(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{551:(bo,Cs,qr)=>{"use strict";function Yt(n){return"function"==typeof n}function B(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Pr=B(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Yr(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class cn{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(Yt(i))try{i()}catch(s){e=s instanceof Pr?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Da(s)}catch(o){e=e??[],o instanceof Pr?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Pr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Da(e);else{if(e instanceof cn){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Yr(t,e)}remove(e){const{_finalizers:t}=this;t&&Yr(t,e),e instanceof cn&&e._removeParent(this)}}cn.EMPTY=(()=>{const n=new cn;return n.closed=!0,n})();const Ln=cn.EMPTY;function cl(n){return n instanceof cn||n&&"closed"in n&&Yt(n.remove)&&Yt(n.add)&&Yt(n.unsubscribe)}function Da(n){Yt(n)?n():n.unsubscribe()}const Es={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},di={setTimeout(n,e,...t){const{delegate:i}=di;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=di;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ui(n){di.setTimeout(()=>{const{onUnhandledError:e}=Es;if(!e)throw n;e(n)})}function ls(){}const As=In("C",void 0,void 0);function In(n,e,t){return{kind:n,value:e,error:t}}let or=null;function ec(n){if(Es.useDeprecatedSynchronousErrorHandling){const e=!or;if(e&&(or={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=or;if(or=null,t)throw i}}else n()}class dl extends cn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cl(e)&&e.add(this)):this.destination=qC}static create(e,t,i){return new qo(e,t,i)}next(e){this.isStopped?Sg(function xo(n){return In("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Sg(function Ts(n){return In("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sg(As,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Xo=Function.prototype.bind;function ul(n,e){return Xo.call(n,e)}class Ia{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){nd(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){nd(i)}else nd(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){nd(t)}}}class qo extends dl{constructor(e,t,i){let r;if(super(),Yt(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&Es.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ul(e.next,s),error:e.error&&ul(e.error,s),complete:e.complete&&ul(e.complete,s)}):r=e}this.destination=new Ia(r)}}function nd(n){Es.useDeprecatedSynchronousErrorHandling?function jo(n){Es.useDeprecatedSynchronousErrorHandling&&or&&(or.errorThrown=!0,or.error=n)}(n):ui(n)}function Sg(n,e){const{onStoppedNotification:t}=Es;t&&di.setTimeout(()=>t(n,e))}const qC={closed:!0,next:ls,error:function XC(n){throw n},complete:ls},Cg="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ra(n){return n}function Cb(n){return 0===n.length?Ra:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let Mn=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function mf(n){return n&&n instanceof dl||function KC(n){return n&&Yt(n.next)&&Yt(n.error)&&Yt(n.complete)}(n)&&cl(n)}(t)?t:new qo(t,i,r);return ec(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=Pa(i))((r,s)=>{const o=new qo({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[Cg](){return this}pipe(...t){return Cb(t)(this)}toPromise(t){return new(t=Pa(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function Pa(n){var e;return null!==(e=n??Es.Promise)&&void 0!==e?e:Promise}const Yo=B(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Ve=(()=>{class n extends Mn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new Eb(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new Yo}next(t){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){ec(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ln:(this.currentObservers=null,s.push(t),new cn(()=>{this.currentObservers=null,Yr(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new Mn;return t.source=this,t}}return n.create=(e,t)=>new Eb(e,t),n})();class Eb extends Ve{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ln}}function Ab(n){return Yt(n?.lift)}function Gn(n){return e=>{if(Ab(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function Bn(n,e,t,i,r){return new ZC(n,e,t,i,r)}class ZC extends dl{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Ye(n,e){return Gn((t,i)=>{let r=0;t.subscribe(Bn(i,s=>{i.next(n.call(e,s,r++))}))})}function Ko(n){return this instanceof Ko?(this.v=n,this):new Ko(n)}function bf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function Eg(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const kg=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function Rb(n){return Yt(n?.then)}function Pb(n){return Yt(n[Cg])}function Og(n){return Symbol.asyncIterator&&Yt(n?.[Symbol.asyncIterator])}function kb(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Ob=function sE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function xf(n){return Yt(n?.[Ob])}function Lb(n){return function yf(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){i[p]&&(r[p]=function(m){return new Promise(function(g,b){s.push([p,m,g,b])>1||a(p,m)})})}function a(p,m){try{!function l(p){p.value instanceof Ko?Promise.resolve(p.value.v).then(c,u):h(s[0][2],p)}(i[p](m))}catch(g){h(s[0][3],g)}}function c(p){a("next",p)}function u(p){a("throw",p)}function h(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield Ko(t.read());if(r)return yield Ko(void 0);yield yield Ko(i)}}finally{t.releaseLock()}})}function wf(n){return Yt(n?.getReader)}function ar(n){if(n instanceof Mn)return n;if(null!=n){if(Pb(n))return function oE(n){return new Mn(e=>{const t=n[Cg]();if(Yt(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(kg(n))return function aE(n){return new Mn(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(Rb(n))return function lE(n){return new Mn(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ui)})}(n);if(Og(n))return Fb(n);if(xf(n))return function cE(n){return new Mn(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(wf(n))return function dE(n){return Fb(Lb(n))}(n)}throw kb(n)}function Fb(n){return new Mn(e=>{(function uE(n,e){var t,i,r,s;return function rd(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=bf(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Zo(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function Ji(n,e,t=1/0){return Yt(e)?Ji((i,r)=>Ye((s,o)=>e(i,s,r,o))(ar(n(i,r))),t):("number"==typeof e&&(t=e),Gn((i,r)=>function hE(n,e,t,i,r,s,o,a){const l=[];let c=0,u=0,h=!1;const p=()=>{h&&!l.length&&!c&&e.complete()},m=b=>c<i?g(b):l.push(b),g=b=>{s&&e.next(b),c++;let y=!1;ar(t(b,u++)).subscribe(Bn(e,v=>{r?.(v),s?m(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<i;){const v=l.shift();o?Zo(e,o,()=>g(v)):g(v)}p()}catch(v){e.error(v)}}))};return n.subscribe(Bn(e,m,()=>{h=!0,p()})),()=>{a?.()}}(i,r,n,t)))}function ad(n=1/0){return Ji(Ra,n)}const Ds=new Mn(n=>n.complete());function bu(n){return n&&Yt(n.schedule)}function Lg(n){return n[n.length-1]}function xu(n){return Yt(Lg(n))?n.pop():void 0}function wu(n){return bu(Lg(n))?n.pop():void 0}function Nb(n,e=0){return Gn((t,i)=>{t.subscribe(Bn(i,r=>Zo(i,n,()=>i.next(r),e),()=>Zo(i,n,()=>i.complete(),e),r=>Zo(i,n,()=>i.error(r),e)))})}function Fg(n,e=0){return Gn((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Vb(n,e){if(!n)throw new Error("Iterable cannot be null");return new Mn(t=>{Zo(t,e,()=>{const i=n[Symbol.asyncIterator]();Zo(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Ri(n,e){return e?function zb(n,e){if(null!=n){if(Pb(n))return function Bb(n,e){return ar(n).pipe(Fg(e),Nb(e))}(n,e);if(kg(n))return function mE(n,e){return new Mn(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(Rb(n))return function Ub(n,e){return ar(n).pipe(Fg(e),Nb(e))}(n,e);if(Og(n))return Vb(n,e);if(xf(n))return function gE(n,e){return new Mn(t=>{let i;return Zo(t,e,()=>{i=n[Ob](),Zo(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Yt(i?.return)&&i.return()})}(n,e);if(wf(n))return function _E(n,e){return Vb(Lb(n),e)}(n,e)}throw kb(n)}(n,e):ar(n)}function cs(...n){const e=wu(n),t=function pE(n,e){return"number"==typeof Lg(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?ar(i[0]):ad(t)(Ri(i,e)):Ds}function Mu(n={}){const{connector:e=(()=>new Ve),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,c=0,u=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,u=h=!1},g=()=>{const b=o;m(),b?.unsubscribe()};return Gn((b,y)=>{c++,!h&&!u&&p();const v=l=l??e();y.add(()=>{c--,0===c&&!h&&!u&&(a=Ng(g,r))}),v.subscribe(y),!o&&c>0&&(o=new qo({next:M=>v.next(M),error:M=>{h=!0,p(),a=Ng(m,t,M),v.error(M)},complete:()=>{u=!0,p(),a=Ng(m,i),v.complete()}}),ar(b).subscribe(o))})(s)}}function Ng(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new qo({next:()=>{i.unsubscribe(),n()}});return ar(e(...t)).subscribe(i)}function Zn(n){for(let e in n)if(n[e]===Zn)return e;throw Error("Could not find renamed property on target object.")}function ld(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function ri(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(ri).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Bg(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Hb=Zn({__forward_ref__:Zn});function Qn(n){return n.__forward_ref__=Qn,n.toString=function(){return ri(this())},n}function wt(n){return Ug(n)?n():n}function Ug(n){return"function"==typeof n&&n.hasOwnProperty(Hb)&&n.__forward_ref__===Qn}function Mf(n){return n&&!!n.\u0275providers}const cd="https://g.co/ng/security#xss";class fe extends Error{constructor(e,t){super(Su(e,t)),this.code=e}}function Su(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}function zt(n){return"string"==typeof n?n:null==n?"":String(n)}function Cu(n,e){throw new fe(-201,!1)}function no(n,e){null==n&&function yt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function ke(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function jt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Sf(n){return qb(n,pl)||qb(n,Ef)}function qb(n,e){return n.hasOwnProperty(e)?n[e]:null}function Vg(n){return n&&(n.hasOwnProperty(Cf)||n.hasOwnProperty(io))?n[Cf]:null}const pl=Zn({\u0275prov:Zn}),Cf=Zn({\u0275inj:Zn}),Ef=Zn({ngInjectableDef:Zn}),io=Zn({ngInjectorDef:Zn});var Ct=(()=>((Ct=Ct||{})[Ct.Default=0]="Default",Ct[Ct.Host=1]="Host",Ct[Ct.Self=2]="Self",Ct[Ct.SkipSelf=4]="SkipSelf",Ct[Ct.Optional=8]="Optional",Ct))();let Af;function Rs(n){const e=Af;return Af=n,e}function zg(n,e,t){const i=Sf(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Ct.Optional?null:void 0!==e?e:void Cu(ri(n))}const yn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),dd={},Qo="__NG_DI_FLAG__",ic="ngTempTokenPath",Hg="ngTokenPath",hi=/\n/gm,ml="\u0275",Tf="__source";let Eu;function gl(n){const e=Eu;return Eu=n,e}function SE(n,e=Ct.Default){if(void 0===Eu)throw new fe(-203,!1);return null===Eu?zg(n,void 0,e):Eu.get(n,e&Ct.Optional?null:void 0,e)}function Q(n,e=Ct.Default){return(function Yb(){return Af}()||SE)(wt(n),e)}function Pt(n,e=Ct.Default){return Q(n,rc(e))}function rc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function _l(n){const e=[];for(let t=0;t<n.length;t++){const i=wt(n[t]);if(Array.isArray(i)){if(0===i.length)throw new fe(900,!1);let r,s=Ct.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Zb(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(Q(r,s))}else e.push(Q(i))}return e}function Au(n,e){return n[Qo]=e,n.prototype[Qo]=e,n}function Zb(n){return n[Qo]}function Co(n){return{toString:n}.toString()}var Eo=(()=>((Eo=Eo||{})[Eo.OnPush=0]="OnPush",Eo[Eo.Default=1]="Default",Eo))(),Ao=(()=>{return(n=Ao||(Ao={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Ao;var n})();const To={},Un=[],Df=Zn({\u0275cmp:Zn}),If=Zn({\u0275dir:Zn}),Kr=Zn({\u0275pipe:Zn}),Rf=Zn({\u0275mod:Zn}),Ps=Zn({\u0275fac:Zn}),ud=Zn({__NG_ELEMENT_ID__:Zn});let Jb=0;function bt(n){return Co(()=>{const e=t0(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===Eo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,data:n.data||{},encapsulation:n.encapsulation||Ao.Emulated,id:"c"+Jb++,styles:n.styles||Un,_:null,schemas:n.schemas||null,tView:null};sc(t);const i=n.dependencies;return t.directiveDefs=ds(i,!1),t.pipeDefs=ds(i,!0),t})}function Tu(n,e,t){const i=n.\u0275cmp;i.directiveDefs=ds(e,!1),i.pipeDefs=ds(t,!0)}function CE(n){return Wn(n)||xi(n)}function EE(n){return null!==n}function Kt(n){return Co(()=>({type:n.type,bootstrap:n.bootstrap||Un,declarations:n.declarations||Un,imports:n.imports||Un,exports:n.exports||Un,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function e0(n,e){if(null==n)return To;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}function Ae(n){return Co(()=>{const e=t0(n);return sc(e),e})}function kr(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Wn(n){return n[Df]||null}function xi(n){return n[If]||null}function vr(n){return n[Kr]||null}function ks(n,e){const t=n[Rf]||null;if(!t&&!0===e)throw new Error(`Type ${ri(n)} does not have '\u0275mod' property.`);return t}function t0(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,exportAs:n.exportAs||null,standalone:!0===n.standalone,selectors:n.selectors||Un,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:e0(n.inputs,e),outputs:e0(n.outputs)}}function sc(n){n.features?.forEach(e=>e(n))}function ds(n,e){if(!n)return null;const t=e?vr:CE;return()=>("function"==typeof n?n():n).map(i=>t(i)).filter(EE)}const Jo=0,Qe=1,Qt=2,Ai=3,Do=4,oc=5,er=6,X=7,oe=8,ae=9,Ke=10,Fe=11,Vn=12,wi=13,Jn=14,vl=15,Or=16,Lr=17,ka=18,ea=19,ta=20,Du=21,ei=22,Wg=1,$g=2,ac=7,Pf=8,pd=9,Zr=10;function zi(n){return Array.isArray(n)&&"object"==typeof n[Wg]}function us(n){return Array.isArray(n)&&!0===n[Wg]}function kf(n){return 0!=(4&n.flags)}function yl(n){return n.componentOffset>-1}function Iu(n){return 1==(1&n.flags)}function ro(n){return!!n.template}function Of(n){return 0!=(256&n[Qt])}function Oa(n,e){return n.hasOwnProperty(Ps)?n[Ps]:null}class Pu{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Hi(){return cc}function cc(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ou),ku}function ku(){const n=dc(this),e=n?.current;if(e){const t=n.previous;if(t===To)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function Ou(n,e,t,i){const r=this.declaredInputs[t],s=dc(n)||function IE(n,e){return n[Lu]=e}(n,{previous:To,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new Pu(l&&l.currentValue,e,a===To),n[i]=e}Hi.ngInherit=!0;const Lu="__ngSimpleChanges__";function dc(n){return n[Lu]||null}const so=function(n,e,t){},s0="svg";function Pi(n){for(;Array.isArray(n);)n=n[Jo];return n}function T(n,e){return Pi(e[n])}function cr(n,e){return Pi(e[n.index])}function Os(n,e){return n.data[e]}function Jt(n,e){return n[e]}function hs(n,e){const t=e[n];return zi(t)?t:t[Jo]}function Ff(n){return 64==(64&n[Qt])}function bl(n,e){return null==e?null:n[e]}function a0(n){n[ka]=0}function Zg(n,e){n[oc]+=e;let t=n,i=n[Ai];for(;null!==i&&(1===e&&1===t[oc]||-1===e&&0===t[oc]);)i[oc]+=e,t=i,i=i[Ai]}const Gt={lFrame:r_(null),bindingsEnabled:!0};function c0(){return Gt.bindingsEnabled}function Ee(){return Gt.lFrame.lView}function Fn(){return Gt.lFrame.tView}function Sn(n){return Gt.lFrame.contextLView=n,n[oe]}function Cn(n){return Gt.lFrame.contextLView=null,n}function br(){let n=wl();for(;null!==n&&64===n.type;)n=n.parent;return n}function wl(){return Gt.lFrame.currentTNode}function na(n,e){const t=Gt.lFrame;t.currentTNode=n,t.isParent=e}function Ls(){return Gt.lFrame.isParent}function Qg(){Gt.lFrame.isParent=!1}function Qr(){const n=Gt.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function md(){return Gt.lFrame.bindingIndex++}function Fa(n){const e=Gt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Nf(n,e){const t=Gt.lFrame;t.bindingIndex=t.bindingRootIndex=n,Bf(e)}function Bf(n){Gt.lFrame.currentDirectiveIndex=n}function t_(n){const e=Gt.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}function ra(){return Gt.lFrame.currentQueryIndex}function Bu(n){Gt.lFrame.currentQueryIndex=n}function hc(n){const e=n[Qe];return 2===e.type?e.declTNode:1===e.type?n[er]:null}function Fs(n,e,t){if(t&Ct.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Ct.Host||(r=hc(s),null===r||(s=s[vl],10&r.type))););if(null===r)return!1;e=r,n=s}const i=Gt.lFrame=i_();return i.currentTNode=e,i.lView=n,!0}function n_(n){const e=i_(),t=n[Qe];Gt.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function i_(){const n=Gt.lFrame,e=null===n?null:n.child;return null===e?r_(n):e}function r_(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function _d(){const n=Gt.lFrame;return Gt.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Na=_d;function Uf(){const n=_d();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Jr(){return Gt.lFrame.selectedIndex}function Ml(n){Gt.lFrame.selectedIndex=n}function dn(){const n=Gt.lFrame;return Os(n.tView,n.selectedIndex)}function Fr(){Gt.lFrame.currentNamespace=s0}function es(){!function s_(){Gt.lFrame.currentNamespace=null}()}function Uu(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(n.contentHooks??(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks??(n.contentHooks=[])).push(t,a),(n.contentCheckHooks??(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks??(n.viewHooks=[])).push(-t,l),c&&((n.viewHooks??(n.viewHooks=[])).push(t,c),(n.viewCheckHooks??(n.viewCheckHooks=[])).push(t,c)),null!=u&&(n.destroyHooks??(n.destroyHooks=[])).push(t,u)}}function dr(n,e,t){h0(n,e,3,t)}function vd(n,e,t,i){(3&n[Qt])===t&&h0(n,e,t,i)}function o_(n,e){let t=n[Qt];(3&t)===e&&(t&=2047,t+=1,n[Qt]=t)}function h0(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[ka]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[ka]+=65536),(a<s||-1==s)&&(VE(n,t,e,l),n[ka]=(4294901760&n[ka])+l+2),l++}function VE(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[Qt]>>11<n[ka]>>16&&(3&n[Qt])===e){n[Qt]+=2048,so(4,a,s);try{s.call(a)}finally{so(5,a,s)}}}else{so(4,a,s);try{s.call(a)}finally{so(5,a,s)}}}const Sl=-1;class Vu{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Hf(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];m0(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function p0(n){return 3===n||4===n||6===n}function m0(n){return 64===n.charCodeAt(0)}function Gu(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||l_(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function l_(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function Gf(n){return n!==Sl}function Wf(n){return 32767&n}function Wu(n,e){let t=function c_(n){return n>>16}(n),i=e;for(;t>0;)i=i[vl],t--;return i}let $f=!0;function $u(n){const e=$f;return $f=n,e}const g0=255,u_=5;let _0=0;const sa={};function jf(n,e){const t=h_(n,e);if(-1!==t)return t;const i=e[Qe];i.firstCreatePass&&(n.injectorIndex=e.length,ju(i.data,n),ju(e,null),ju(i.blueprint,null));const r=Xu(n,e),s=n.injectorIndex;if(Gf(r)){const o=Wf(r),a=Wu(r,e),l=a[Qe].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function ju(n,e){n.push(0,0,0,0,0,0,0,0,e)}function h_(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Xu(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=qf(r),null===i)return Sl;if(t++,r=r[vl],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return Sl}function f_(n,e,t){!function v0(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(ud)&&(i=t[ud]),null==i&&(i=t[ud]=_0++);const r=i&g0;e.data[n+(r>>u_)]|=1<<r}(n,e,t)}function rn(n,e,t){if(t&Ct.Optional||void 0!==n)return n;Cu()}function y0(n,e,t,i){if(t&Ct.Optional&&void 0===i&&(i=null),!(t&(Ct.Self|Ct.Host))){const r=n[ae],s=Rs(void 0);try{return r?r.get(e,i,t&Ct.Optional):zg(e,i,t&Ct.Optional)}finally{Rs(s)}}return rn(i,0,t)}function b0(n,e,t,i=Ct.Default,r){if(null!==n){if(1024&e[Qt]){const o=function El(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[Qt]&&!(256&o[Qt]);){const a=yd(s,o,t,i|Ct.Self,sa);if(a!==sa)return a;let l=s.parent;if(!l){const c=o[Du];if(c){const u=c.get(t,sa,i);if(u!==sa)return u}l=qf(o),o=o[vl]}s=l}return r}(n,e,t,i,sa);if(o!==sa)return o}const s=yd(n,e,t,i,sa);if(s!==sa)return s}return y0(e,t,i,r)}function yd(n,e,t,i,r){const s=function oo(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(ud)?n[ud]:void 0;return"number"==typeof e?e>=0?e&g0:M0:e}(t);if("function"==typeof s){if(!Fs(e,n,i))return i&Ct.Host?rn(r,0,i):y0(e,t,i,r);try{const o=s(i);if(null!=o||i&Ct.Optional)return o;Cu()}finally{Na()}}else if("number"==typeof s){let o=null,a=h_(n,e),l=Sl,c=i&Ct.Host?e[Or][er]:null;for((-1===a||i&Ct.SkipSelf)&&(l=-1===a?Xu(n,e):e[a+8],l!==Sl&&qu(i,!1)?(o=e[Qe],a=Wf(l),e=Wu(l,e)):a=-1);-1!==a;){const u=e[Qe];if(w0(s,a,u.data)){const h=x0(a,e,t,o,i,c);if(h!==sa)return h}l=e[a+8],l!==Sl&&qu(i,e[Qe].data[a+8]===c)&&w0(s,a,e)?(o=u,a=Wf(l),e=Wu(l,e)):a=-1}}return r}function x0(n,e,t,i,r,s){const o=e[Qe],a=o.data[n+8],u=Xf(a,o,t,null==i?yl(a)&&$f:i!=o&&0!=(3&a.type),r&Ct.Host&&s===a);return null!==u?pc(e,o,u,a):sa}function Xf(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,u=s>>20,p=r?a+u:n.directiveEnd;for(let m=i?a:a+u;m<p;m++){const g=o[m];if(m<l&&t===g||m>=l&&g.type===t)return m}if(r){const m=o[l];if(m&&ro(m)&&m.type===t)return l}return null}function pc(n,e,t,i){let r=n[t];const s=e.data;if(function zu(n){return n instanceof Vu}(r)){const o=r;o.resolving&&function Wb(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new fe(-200,`Circular dependency in DI detected for ${n}${t}`)}(function jn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():zt(n)}(s[t]));const a=$u(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Rs(o.injectImpl):null;Fs(n,i,Ct.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function fc(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=cc(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Rs(l),$u(a),o.resolving=!1,Na()}}return r}function w0(n,e,t){return!!(t[e+(n>>u_)]&1<<n)}function qu(n,e){return!(n&Ct.Self||n&Ct.Host&&e)}class Cl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return b0(this._tNode,this._lView,e,rc(i),t)}}function M0(){return new Cl(br(),Ee())}function Mi(n){return Co(()=>{const e=n.prototype.constructor,t=e[Ps]||ts(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[Ps]||ts(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function ts(n){return Ug(n)?()=>{const e=ts(wt(n));return e&&e()}:Oa(n)}function qf(n){const e=n[Qe],t=e.type;return 2===t?e.declTNode:1===t?n[er]:null}function Ba(n){return function p_(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(p0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(br(),n)}const mc="__parameters__";function Tl(n,e,t){return Co(()=>{const i=function Yu(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(mc)?l[mc]:Object.defineProperty(l,mc,{value:[]})[mc];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class ge{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=ke({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function oa(n,e){n.forEach(t=>Array.isArray(t)?oa(t,e):e(t))}function _c(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ku(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xd(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function Ns(n,e,t){let i=vc(n,e);return i>=0?n[1|i]=t:(i=~i,function wd(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function Kf(n,e){const t=vc(n,e);if(t>=0)return n[1|t]}function vc(n,e){return function __(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const tp=Au(Tl("Inject",n=>({token:n})),-1),Io=Au(Tl("Optional"),8),Dl=Au(Tl("SkipSelf"),4);var ns=(()=>((ns=ns||{})[ns.Important=1]="Important",ns[ns.DashCase=2]="DashCase",ns))();const xc=new Map;let E_=0;const D_="__ngContext__";function Br(n,e){zi(e)?(n[D_]=e[ta],function U0(n){xc.set(n[ta],n)}(e)):n[D_]=e}let op;function I_(n,e){return op(n,e)}function nh(n){const e=n[Ai];return us(e)?e[Ai]:e}function R_(n){return Y0(n[wi])}function P_(n){return Y0(n[Do])}function Y0(n){for(;null!==n&&!us(n);)n=n[Do];return n}function Cd(n,e,t,i,r){if(null!=i){let s,o=!1;us(i)?s=i:zi(i)&&(o=!0,i=i[Jo]);const a=Pi(i);0===n&&null!==t?null==r?ex(e,t,a):wc(e,t,a,r||null,!0):1===n&&null!==t?wc(e,t,a,r||null,!0):2===n?function V_(n,e,t){const i=lp(n,e);i&&function vA(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function xA(n,e,t,i,r){const s=t[ac];s!==Pi(t)&&Cd(e,n,i,s,r);for(let a=Zr;a<t.length;a++){const l=t[a];ih(l[Qe],l,n,e,i,s)}}(e,n,s,t,r)}}function O_(n,e,t){return n.createElement(e,t)}function ap(n,e){const t=n[pd],i=t.indexOf(e),r=e[Ai];512&e[Qt]&&(e[Qt]&=-513,Zg(r,-1)),t.splice(i,1)}function L_(n,e){if(n.length<=Zr)return;const t=Zr+e,i=n[t];if(i){const r=i[Lr];null!==r&&r!==n&&ap(r,i),e>0&&(n[t-1][Do]=i[Do]);const s=Ku(n,Zr+e);!function uA(n,e){ih(n,e,e[Fe],2,null,null),e[Jo]=null,e[er]=null}(i[Qe],i);const o=s[ea];null!==o&&o.detachView(s[Qe]),i[Ai]=null,i[Do]=null,i[Qt]&=-65}return i}function Z0(n,e){if(!(128&e[Qt])){const t=e[Fe];t.destroyNode&&ih(n,e,t,3,null,null),function fA(n){let e=n[wi];if(!e)return F_(n[Qe],n);for(;e;){let t=null;if(zi(e))t=e[wi];else{const i=e[Zr];i&&(t=i)}if(!t){for(;e&&!e[Do]&&e!==n;)zi(e)&&F_(e[Qe],e),e=e[Ai];null===e&&(e=n),zi(e)&&F_(e[Qe],e),t=e&&e[Do]}e=t}}(e)}}function F_(n,e){if(!(128&e[Qt])){e[Qt]&=-65,e[Qt]|=128,function _A(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Vu)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];so(4,a,l);try{l.call(a)}finally{so(5,a,l)}}else{so(4,r,s);try{s.call(r)}finally{so(5,r,s)}}}}}(n,e),function gA(n,e){const t=n.cleanup,i=e[X];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[X]=null}}(n,e),1===e[Qe].type&&e[Fe].destroy();const t=e[Lr];if(null!==t&&us(e[Ai])){t!==e[Ai]&&ap(t,e);const i=e[ea];null!==i&&i.detachView(n)}!function V0(n){xc.delete(n[ta])}(e)}}function Q0(n,e,t){return function J0(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[Jo];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===Ao.None||s===Ao.Emulated)return null}return cr(i,t)}}(n,e.parent,t)}function wc(n,e,t,i,r){n.insertBefore(e,t,i,r)}function ex(n,e,t){n.appendChild(e,t)}function tx(n,e,t,i,r){null!==i?wc(n,e,t,i,r):ex(n,e,t)}function lp(n,e){return n.parentNode(e)}function nx(n,e,t){return rx(n,e,t)}let N_,dp,G_,rx=function ix(n,e,t){return 40&n.type?cr(n,t):null};function cp(n,e,t,i){const r=Q0(n,i,e),s=e[Fe],a=nx(i.parent||e[er],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)tx(s,r,t[l],a,!1);else tx(s,r,t,a,!1);void 0!==N_&&N_(s,i,e,t,r)}function Ed(n,e){if(null!==e){const t=e.type;if(3&t)return cr(e,n);if(4&t)return U_(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return Ed(n,i);{const r=n[e.index];return us(r)?U_(-1,r):Pi(r)}}if(32&t)return I_(e,n)()||Pi(n[e.index]);{const i=B_(n,e);return null!==i?Array.isArray(i)?i[0]:Ed(nh(n[Or]),i):Ed(n,e.next)}}return null}function B_(n,e){return null!==e?n[Or][er].projection[e.projection]:null}function U_(n,e){const t=Zr+n+1;if(t<e.length){const i=e[t],r=i[Qe].firstChild;if(null!==r)return Ed(i,r)}return e[ac]}function z_(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&Br(Pi(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)z_(n,e,t.child,i,r,s,!1),Cd(e,n,r,a,s);else if(32&l){const c=I_(t,i);let u;for(;u=c();)Cd(e,n,r,u,s);Cd(e,n,r,a,s)}else 16&l?ox(n,e,i,t,r,s):Cd(e,n,r,a,s);t=o?t.projectionNext:t.next}}function ih(n,e,t,i,r,s){z_(t,i,n.firstChild,e,r,s,!1)}function ox(n,e,t,i,r,s){const o=t[Or],l=o[er].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Cd(e,n,r,l[c],s);else z_(n,e,l,o[Ai],r,s,!0)}function lx(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function rh(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Hf(n,e,i),null!==r&&lx(n,e,r),null!==s&&function ax(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function Ad(n){return function H_(){if(void 0===dp&&(dp=null,yn.trustedTypes))try{dp=yn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return dp}()?.createHTML(n)||n}class Mc{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${cd})`}}class fx extends Mc{getTypeName(){return"HTML"}}class px extends Mc{getTypeName(){return"Style"}}class AA extends Mc{getTypeName(){return"Script"}}class TA extends Mc{getTypeName(){return"URL"}}class DA extends Mc{getTypeName(){return"ResourceURL"}}function Us(n){return n instanceof Mc?n.changingThisBreaksApplicationSecurity:n}function Vs(n,e){const t=function IA(n){return n instanceof Mc&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${cd})`)}return t===e}class FA{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ad(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class NA{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){const t=this.inertDocument.createElement("template");return t.innerHTML=Ad(e),t}}const UA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Sc(n){return(n=String(n)).match(UA)?n:"unsafe:"+n}function za(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Td(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const $_=za("area,br,col,hr,img,wbr"),hp=za("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),j_=za("rp,rt"),X_=Td($_,Td(hp,za("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Td(j_,za("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Td(j_,hp)),q_=za("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sh=Td(q_,za("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),za("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),GA=za("script,style,template");class WA{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!X_.hasOwnProperty(t))return this.sanitizedSomething=!0,!GA.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!sh.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;q_[a]&&(l=Sc(l)),this.buf.push(" ",o,'="',_x(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();X_.hasOwnProperty(t)&&!$_.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(_x(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const K_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gx=/([^\#-~ |!])/g;function _x(n){return n.replace(/&/g,"&amp;").replace(K_,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(gx,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fp;function vx(n,e){let t=null;try{fp=fp||function mx(n){const e=new NA(n);return function BA(){try{return!!(new window.DOMParser).parseFromString(Ad(""),"text/html")}catch{return!1}}()?new FA(e):e}(n);let i=e?String(e):"";t=fp.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=fp.getInertBodyElement(i)}while(i!==s);return Ad((new WA).sanitizeChildren(Z_(t)||t))}finally{if(t){const i=Z_(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Z_(n){return"content"in n&&function $A(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var $n=(()=>(($n=$n||{})[$n.NONE=0]="NONE",$n[$n.HTML=1]="HTML",$n[$n.STYLE=2]="STYLE",$n[$n.SCRIPT=3]="SCRIPT",$n[$n.URL=4]="URL",$n[$n.RESOURCE_URL=5]="RESOURCE_URL",$n))();function Q_(n){const e=function oh(){const n=Ee();return n&&n[Vn]}();return e?e.sanitize($n.URL,n)||"":Vs(n,"URL")?Us(n):Sc(zt(n))}const wr=new ge("ENVIRONMENT_INITIALIZER"),Ti=new ge("INJECTOR",-1),xx=new ge("INJECTOR_DEF_TYPES");class Ha{get(e,t=dd){if(t===dd){const i=new Error(`NullInjectorError: No provider for ${ri(e)}!`);throw i.name="NullInjectorError",i}return t}}function ZA(...n){return{\u0275providers:wx(0,n),\u0275fromNgModule:!0}}function wx(n,...e){const t=[],i=new Set;let r;return oa(e,s=>{const o=s;J_(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&Mx(r,t),t}function Mx(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];ev(r,s=>{e.push(s)})}}function J_(n,e,t,i){if(!(n=wt(n)))return!1;let r=null,s=Vg(n);const o=!s&&Wn(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=Vg(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)J_(c,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{oa(s.imports,u=>{J_(u,e,t,i)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Mx(c,e)}if(!a){const c=Oa(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Un},{provide:xx,useValue:r,multi:!0},{provide:wr,useValue:()=>Q(r),multi:!0})}const l=s.providers;null==l||a||ev(l,u=>{e.push(u)})}}return r!==n&&void 0!==n.providers}function ev(n,e){for(let t of n)Mf(t)&&(t=t.\u0275providers),Array.isArray(t)?ev(t,e):e(t)}const Ga=Zn({provide:String,useValue:Zn});function pp(n){return null!==n&&"object"==typeof n&&Ga in n}function ni(n){return"function"==typeof n}const tv=new ge("Set Injector scope."),mp={},QA={};let nv;function gp(){return void 0===nv&&(nv=new Ha),nv}class Wa{}class iv extends Wa{get destroyed(){return this._destroyed}constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ov(e,o=>this.processProvider(o)),this.records.set(Ti,$a(void 0,this)),r.has("environment")&&this.records.set(Wa,$a(void 0,this));const s=this.records.get(tv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(xx.multi,Un,Ct.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=gl(this),i=Rs(void 0);try{return e()}finally{gl(t),Rs(i)}}get(e,t=dd,i=Ct.Default){this.assertNotDestroyed(),i=rc(i);const r=gl(this),s=Rs(void 0);try{if(!(i&Ct.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function eT(n){return"function"==typeof n||"object"==typeof n&&n instanceof ge}(e)&&Sf(e);a=l&&this.injectableDefInScope(l)?$a(Cc(e),mp):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Ct.Self?gp():this.parent).get(e,t=i&Ct.Optional&&t===dd?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[ic]=o[ic]||[]).unshift(ri(e)),r)throw o;return function Qb(n,e,t,i){const r=n[ic];throw e[Tf]&&r.unshift(e[Tf]),n.message=function Gg(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&n.charAt(1)==ml?n.slice(2):n;let r=ri(e);if(Array.isArray(e))r=e.map(ri).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ri(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(hi,"\n  ")}`}("\n"+n.message,r,t,i),n[Hg]=r,n[ic]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Rs(s),gl(r)}}resolveInjectorInitializers(){const e=gl(this),t=Rs(void 0);try{const i=this.get(wr.multi,Un,Ct.Self);for(const r of i)r()}finally{gl(e),Rs(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(ri(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new fe(205,!1)}processProvider(e){let t=ni(e=wt(e))?e:wt(e&&e.provide);const i=function JA(n){return pp(n)?$a(void 0,n.useValue):$a(sv(n),mp)}(e);if(ni(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=$a(void 0,mp,!0),r.factory=()=>_l(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===mp&&(t.value=QA,t.value=t.factory()),"object"==typeof t.value&&t.value&&function Id(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=wt(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Cc(n){const e=Sf(n),t=null!==e?e.factory:Oa(n);if(null!==t)return t;if(n instanceof ge)throw new fe(204,!1);if(n instanceof Function)return function rv(n){const e=n.length;if(e>0)throw xd(e,"?"),new fe(204,!1);const t=function _r(n){return n&&(n[pl]||n[Ef])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new fe(204,!1)}function sv(n,e,t){let i;if(ni(n)){const r=wt(n);return Oa(r)||Cc(r)}if(pp(n))i=()=>wt(n.useValue);else if(function fi(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(..._l(n.deps||[]));else if(function ah(n){return!(!n||!n.useExisting)}(n))i=()=>Q(wt(n.useExisting));else{const r=wt(n&&(n.useClass||n.provide));if(!function zs(n){return!!n.deps}(n))return Oa(r)||Cc(r);i=()=>new r(..._l(n.deps))}return i}function $a(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ov(n,e){for(const t of n)Array.isArray(t)?ov(t,e):t&&Mf(t)?ov(t.\u0275providers,e):e(t)}class tT{}class Ex{}class en{resolveComponentFactory(e){throw function nT(n){const e=Error(`No component factory found for ${ri(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let kl=(()=>{class n{}return n.NULL=new en,n})();function lo(){return Ec(br(),Ee())}function Ec(n,e){return new _t(cr(n,e))}let _t=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=lo,n})();function Xn(n){return n instanceof _t?n.nativeElement:n}class lh{}let ca=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function _p(){const n=Ee(),t=hs(br().index,n);return(zi(t)?t:n)[Fe]}(),n})(),iT=(()=>{class n{}return n.\u0275prov=ke({token:n,providedIn:"root",factory:()=>null}),n})();class Ac{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rT=new Ac("15.2.10"),lv={},cv="ngOriginalError";function dv(n){return n[cv]}class ja{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&dv(e);for(;t&&dv(t);)t=dv(t);return t||null}}function Xa(n){return n instanceof Function?n():n}function Tx(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const hv="ng-template";function pT(n,e,t){let i=0,r=!0;for(;i<n.length;){let s=n[i++];if("string"==typeof s&&r){const o=n[i++];if(t&&"class"===s&&-1!==Tx(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;i<n.length&&"string"==typeof(s=n[i++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function Dx(n){return 4===n.type&&n.value!==hv}function mT(n,e,t){return e===(4!==n.type||t?n.value:hv)}function Ix(n,e,t){let i=4;const r=n.attrs||[],s=function kx(n){for(let e=0;e<n.length;e++)if(p0(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!mT(n,l,t)||""===l&&1===e.length){if(Po(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!pT(n.attrs,c,t)){if(Po(i))return!1;o=!0}continue}const h=gT(8&i?"class":l,r,Dx(n),t);if(-1===h){if(Po(i))return!1;o=!0;continue}if(""!==c){let p;p=h>s?"":r[h+1].toLowerCase();const m=8&i?p:null;if(m&&-1!==Tx(m,c,0)||2&i&&c!==p){if(Po(i))return!1;o=!0}}}}else{if(!o&&!Po(i)&&!Po(l))return!1;if(o&&Po(l))continue;o=!1,i=l|1&i}}return Po(i)||o}function Po(n){return 0==(1&n)}function gT(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function _T(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function Rx(n,e,t=!1){for(let i=0;i<e.length;i++)if(Ix(n,e[i],t))return!0;return!1}function vT(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function Ox(n,e){return n?":not("+e.trim()+")":e}function yT(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!Po(o)&&(e+=Ox(s,r),r=""),i=o,s=s||!Po(i);t++}return""!==r&&(e+=Ox(s,r)),e}const Wt={};function q(n){Lx(Fn(),Ee(),Jr()+n,!1)}function Lx(n,e,t,i){if(!i)if(3==(3&e[Qt])){const s=n.preOrderCheckHooks;null!==s&&dr(e,s,t)}else{const s=n.preOrderHooks;null!==s&&vd(e,s,0,t)}Ml(t)}function zx(n,e=null,t=null,i){const r=Hx(n,e,t,i);return r.resolveInjectorInitializers(),r}function Hx(n,e=null,t=null,i,r=new Set){const s=[t||Un,ZA(n)];return i=i||("object"==typeof n?void 0:ri(n)),new iv(s,e||gp(),i||null,r)}let ki=(()=>{class n{static create(t,i){if(Array.isArray(t))return zx({name:""},i,t,"");{const r=t.name??"";return zx({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=dd,n.NULL=new Ha,n.\u0275prov=ke({token:n,providedIn:"any",factory:()=>Q(Ti)}),n.__NG_ELEMENT_ID__=-1,n})();function D(n,e=Ct.Default){const t=Ee();return null===t?Q(n,e):b0(br(),t,wt(n),e)}function qa(){throw new Error("invalid")}function xp(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const s=t[i+1];if(-1!==s){const o=n.data[s];Bu(t[i]),o.contentQueries(2,e[s],s)}}}function wp(n,e,t,i,r,s,o,a,l,c,u){const h=e.blueprint.slice();return h[Jo]=r,h[Qt]=76|i,(null!==u||n&&1024&n[Qt])&&(h[Qt]|=1024),a0(h),h[Ai]=h[vl]=n,h[oe]=t,h[Ke]=o||n&&n[Ke],h[Fe]=a||n&&n[Fe],h[Vn]=l||n&&n[Vn]||null,h[ae]=c||n&&n[ae]||null,h[er]=s,h[ta]=function B0(){return E_++}(),h[Du]=u,h[Or]=2==e.type?n[Or]:h,h}function kd(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Mp(n,e,t,i,r){const s=wl(),o=Ls(),l=n.data[e]=function VT(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,i,r),function e_(){return Gt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Nu(){const n=Gt.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return na(s,!0),s}function ch(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function gv(n,e,t){n_(e);try{const i=n.viewQuery;null!==i&&ko(1,i,t);const r=n.template;null!==r&&Cp(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&xp(n,e),n.staticViewQueries&&ko(2,n.viewQuery,t);const s=n.components;null!==s&&function NT(n,e){for(let t=0;t<e.length;t++)Rn(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[Qt]&=-5,Uf()}}function Sp(n,e,t,i){const r=e[Qt];if(128!=(128&r)){n_(e);try{a0(e),function Jg(n){return Gt.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&Cp(n,e,t,2,i);const o=3==(3&r);if(o){const c=n.preOrderCheckHooks;null!==c&&dr(e,c,null)}else{const c=n.preOrderHooks;null!==c&&vd(e,c,0,null),o_(e,0)}if(function sn(n){for(let e=R_(n);null!==e;e=P_(e)){if(!e[$g])continue;const t=e[pd];for(let i=0;i<t.length;i++){const r=t[i];512&r[Qt]||Zg(r[Ai],1),r[Qt]|=512}}}(e),function Et(n){for(let e=R_(n);null!==e;e=P_(e))for(let t=Zr;t<e.length;t++){const i=e[t],r=i[Qe];Ff(i)&&Sp(r,i,r.template,i[oe])}}(e),null!==n.contentQueries&&xp(n,e),o){const c=n.contentCheckHooks;null!==c&&dr(e,c)}else{const c=n.contentHooks;null!==c&&vd(e,c,1),o_(e,1)}!function LT(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)Ml(~r);else{const s=r,o=t[++i],a=t[++i];Nf(o,s),a(2,e[s])}}}finally{Ml(-1)}}(n,e);const a=n.components;null!==a&&function FT(n,e){for(let t=0;t<e.length;t++)At(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&ko(2,l,i),o){const c=n.viewCheckHooks;null!==c&&dr(e,c)}else{const c=n.viewHooks;null!==c&&vd(e,c,2),o_(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Qt]&=-41,512&e[Qt]&&(e[Qt]&=-513,Zg(e[Ai],-1))}finally{Uf()}}}function Cp(n,e,t,i,r){const s=Jr(),o=2&i;try{Ml(-1),o&&e.length>ei&&Lx(n,e,ei,!1),so(o?2:0,r),t(i,r)}finally{Ml(s),so(o?3:1,r)}}function dh(n,e,t){if(kf(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function _v(n,e,t){c0()&&(function XT(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;yl(t)&&function Y(n,e,t){const i=cr(e,n),r=Kx(t),s=n[Ke],o=ur(n,wp(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||jf(t,e),Br(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],c=pc(e,n,a,t);Br(c,e),null!==o&&Te(0,a-r,c,l,0,o),ro(l)&&(hs(t.index,e)[oe]=pc(e,n,a,t))}}(n,e,t,cr(t,e)),64==(64&t.flags)&&d(n,e,t))}function vv(n,e,t=cr){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function Kx(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=yv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function yv(n,e,t,i,r,s,o,a,l,c){const u=ei+i,h=u+r,p=function BT(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:Wt);return t}(u,h),m="function"==typeof c?c():c;return p[Qe]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function Zx(n,e,t,i){const r=xO(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&wO(n).push(i,r.length-1))}function Qx(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?Jx(t,e,r,s):i.hasOwnProperty(r)&&Jx(t,e,i[r],s)}return t}function Jx(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function Gs(n,e,t,i,r,s,o,a){const l=cr(e,t);let u,c=e.inputs;!a&&null!=c&&(u=c[i])?(YT(n,t,u,i,r),yl(e)&&function GT(n,e){const t=hs(e,n);16&t[Qt]||(t[Qt]|=32)}(t,e.index)):3&e.type&&(i=function HT(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}function bv(n,e,t,i){if(c0()){const r=null===i?null:{"":-1},s=function _(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(Rx(e,o.selectors,!1))if(i||(i=[]),ro(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),w(n,e,a.length)}else i.unshift(o),w(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&ew(n,e,t,o,r,a),r&&function C(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new fe(-301,!1);i.push(e[r],s)}}}(t,i,r)}t.mergedAttrs=Gu(t.mergedAttrs,t.attrs)}function ew(n,e,t,i,r,s){for(let c=0;c<i.length;c++)f_(jf(t,e),n,i[c].type);!function U(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let c=0;c<i.length;c++){const u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=ch(n,e,i.length,null);for(let c=0;c<i.length;c++){const u=i[c];t.mergedAttrs=Gu(t.mergedAttrs,u.hostAttrs),H(n,t,e,l,u),O(l,u,r),null!==u.contentQueries&&(t.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(t.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function zT(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let u=e.directiveStart;u<r;u++){const h=s[u],p=t?t.get(h):null,g=p?p.outputs:null;l=Qx(h.inputs,u,l,p?p.inputs:null),c=Qx(h.outputs,u,c,g);const b=null===l||null===o||Dx(e)?null:We(l,u,o);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function d(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function BE(){return Gt.lFrame.currentDirectiveIndex}();try{Ml(s);for(let a=i;a<r;a++){const l=n.data[a],c=e[a];Bf(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&f(l,c)}}finally{Ml(-1),Bf(o)}}function f(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function w(n,e,t){e.componentOffset=t,(n.components??(n.components=[])).push(e.index)}function O(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;ro(e)&&(t[""]=n)}}function H(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=Oa(r.type)),o=new Vu(s,ro(r),D);n.blueprint[i]=o,t[i]=o,function $T(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function jT(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,ch(n,t,r.hostVars,Wt),r)}function pe(n,e,t,i,r,s){const o=cr(n,e);!function ve(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?zt(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[Fe],o,s,n.value,t,i,r)}function Te(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?i.setInput(t,h,c,u):t[u]=h}}}function We(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function lt(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function At(n,e){const t=hs(e,n);if(Ff(t)){const i=t[Qe];48&t[Qt]?Sp(i,t,i.template,t[oe]):t[oc]>0&&un(t)}}function un(n){for(let i=R_(n);null!==i;i=P_(i))for(let r=Zr;r<i.length;r++){const s=i[r];if(Ff(s))if(512&s[Qt]){const o=s[Qe];Sp(o,s,o.template,s[oe])}else s[oc]>0&&un(s)}const t=n[Qe].components;if(null!==t)for(let i=0;i<t.length;i++){const r=hs(t[i],n);Ff(r)&&r[oc]>0&&un(r)}}function Rn(n,e){const t=hs(e,n),i=t[Qe];(function Ws(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),gv(i,t,t[oe])}function ur(n,e){return n[wi]?n[Jn][Do]=e:n[wi]=e,n[Jn]=e,e}function Vr(n){for(;n;){n[Qt]|=32;const e=nh(n);if(Of(n)&&!e)return n;n=e}return null}function pi(n,e,t,i=!0){const r=e[Ke];r.begin&&r.begin();try{Sp(n,e,n.template,t)}catch(o){throw i&&SO(e,o),o}finally{r.end&&r.end()}}function ko(n,e,t){Bu(0),e(n,t)}function xO(n){return n[X]||(n[X]=[])}function wO(n){return n.cleanup||(n.cleanup=[])}function MO(n,e,t){return(null===n||ro(n))&&(t=function o0(n){for(;Array.isArray(n);){if("object"==typeof n[Wg])return n;n=n[Jo]}return null}(t[e.index])),t[Fe]}function SO(n,e){const t=n[ae],i=t?t.get(ja,null):null;i&&i.handleError(e)}function YT(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=n.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function Tc(n,e,t){const i=T(e,n);!function Bs(n,e,t){n.setValue(e,t)}(n[Fe],i,t)}function tw(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Bg(r,a):2==s&&(i=Bg(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function nw(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(Pi(s)),us(s))for(let a=Zr;a<s.length;a++){const l=s[a],c=l[Qe].firstChild;null!==c&&nw(l[Qe],l,c,i)}const o=t.type;if(8&o)nw(n,e,t.child,i);else if(32&o){const a=I_(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=B_(e,t);if(Array.isArray(a))i.push(...a);else{const l=nh(e[Or]);nw(l[Qe],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class xv{get rootNodes(){const e=this._lView,t=e[Qe];return nw(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[oe]}set context(e){this._lView[oe]=e}get destroyed(){return 128==(128&this._lView[Qt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[Ai];if(us(e)){const t=e[Pf],i=t?t.indexOf(this):-1;i>-1&&(L_(e,i),Ku(t,i))}this._attachedToViewContainer=!1}Z0(this._lView[Qe],this._lView)}onDestroy(e){Zx(this._lView[Qe],this._lView,null,e)}markForCheck(){Vr(this._cdRefInjectingView||this._lView)}detach(){this._lView[Qt]&=-65}reattach(){this._lView[Qt]|=64}detectChanges(){pi(this._lView[Qe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new fe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function hA(n,e){ih(n,e,e[Fe],2,null,null)}(this._lView[Qe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new fe(902,!1);this._appRef=e}}class DG extends xv{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;pi(e[Qe],e,e[oe],!1)}checkNoChanges(){}get context(){return null}}class CO extends kl{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Wn(e);return new wv(t,this.ngModule)}}function EO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class RG{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=rc(i);const r=this.injector.get(e,lv,i);return r!==lv||t===lv?r:this.parentInjector.get(e,t,i)}}class wv extends Ex{get inputs(){return EO(this.componentDef.inputs)}get outputs(){return EO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Rd(n){return n.map(yT).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Wa?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new RG(e,s):e,a=o.get(lh,null);if(null===a)throw new fe(407,!1);const l=o.get(iT,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",h=i?function UT(n,e,t){return n.selectRootElement(e,t===Ao.ShadowDom)}(c,i,this.componentDef.encapsulation):O_(c,u,function IG(n){const e=n.toLowerCase();return"svg"===e?s0:"math"===e?"math":null}(u)),p=this.componentDef.onPush?288:272,m=yv(0,null,null,1,0,null,null,null,null,null),g=wp(null,m,null,p,null,null,a,c,l,o,null);let b,y;n_(g);try{const v=this.componentDef;let M,x=null;v.findHostDirectiveDefs?(M=[],x=new Map,v.findHostDirectiveDefs(v,M,x),M.push(v)):M=[v];const S=function kG(n,e){const t=n[Qe],i=ei;return n[i]=e,kd(t,i,2,"#host",null)}(g,h),P=function OG(n,e,t,i,r,s,o,a){const l=r[Qe];!function LG(n,e,t,i){for(const r of n)e.mergedAttrs=Gu(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(tw(e,e.mergedAttrs,!0),null!==t&&rh(i,t,e))}(i,n,e,o);const c=s.createRenderer(e,t),u=wp(r,Kx(t),null,t.onPush?32:16,r[n.index],n,s,c,a||null,null,null);return l.firstCreatePass&&w(l,n,i.length-1),ur(r,u),r[n.index]=u}(S,h,v,M,g,a,c);y=Os(m,ei),h&&function NG(n,e,t,i){if(i)Hf(n,t,["ng-version",rT.full]);else{const{attrs:r,classes:s}=function bT(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!Po(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Hf(n,t,r),s&&s.length>0&&lx(n,t,s.join(" "))}}(c,v,h,i),void 0!==t&&function BG(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(y,this.ngContentSelectors,t),b=function FG(n,e,t,i,r,s){const o=br(),a=r[Qe],l=cr(o,r);ew(a,r,o,t,null,i);for(let u=0;u<t.length;u++)Br(pc(r,a,o.directiveStart+u,o),r);d(a,r,o),l&&Br(l,r);const c=pc(r,a,o.directiveStart+o.componentOffset,o);if(n[oe]=r[oe]=c,null!==s)for(const u of s)u(c,e);return dh(a,o,n),c}(P,v,M,x,g,[UG]),gv(m,g,null)}finally{Uf()}return new PG(this.componentType,b,Ec(y,g),g,y)}}class PG extends tT{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new DG(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;YT(s[Qe],s,r,e,t),Vr(hs(this._tNode.index,s))}}get injector(){return new Cl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function UG(){const n=br();Uu(Ee()[Qe],n)}function ht(n){let e=function AO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const i=[n];for(;e;){let r;if(ro(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new fe(903,!1);r=e.\u0275dir}if(r){if(t){i.push(r);const o=n;o.inputs=KT(n.inputs),o.declaredInputs=KT(n.declaredInputs),o.outputs=KT(n.outputs);const a=r.hostBindings;a&&GG(n,a);const l=r.viewQuery,c=r.contentQueries;if(l&&zG(n,l),c&&HG(n,c),ld(n.inputs,r.inputs),ld(n.declaredInputs,r.declaredInputs),ld(n.outputs,r.outputs),ro(r)&&r.data.animation){const u=n.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ht&&(t=!1)}}e=Object.getPrototypeOf(e)}!function VG(n){let e=0,t=null;for(let i=n.length-1;i>=0;i--){const r=n[i];r.hostVars=e+=r.hostVars,r.hostAttrs=Gu(r.hostAttrs,t=Gu(t,r.hostAttrs))}}(i)}function KT(n){return n===To?{}:n===Un?[]:n}function zG(n,e){const t=n.viewQuery;n.viewQuery=t?(i,r)=>{e(i,r),t(i,r)}:e}function HG(n,e){const t=n.contentQueries;n.contentQueries=t?(i,r,s)=>{e(i,r,s),t(i,r,s)}:e}function GG(n,e){const t=n.hostBindings;n.hostBindings=t?(i,r)=>{e(i,r),t(i,r)}:e}function iw(n){return!!ZT(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function ZT(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ll(n,e,t){return n[e]=t}function ms(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function uh(n,e,t,i){const r=ms(n,e,t);return ms(n,e+1,i)||r}function Bt(n,e,t,i){const r=Ee();return ms(r,md(),e)&&(Fn(),pe(dn(),r,n,e,t,i)),Bt}function Ap(n,e,t,i){return ms(n,md(),t)?e+zt(t)+i:Wt}function Tp(n,e,t,i,r,s){const a=uh(n,function ia(){return Gt.lFrame.bindingIndex}(),t,r);return Fa(2),a?e+zt(t)+i+zt(r)+s:Wt}function ye(n,e,t,i,r,s,o,a){const l=Ee(),c=Fn(),u=n+ei,h=c.firstCreatePass?function JG(n,e,t,i,r,s,o,a,l){const c=e.consts,u=kd(e,n,4,o||null,bl(c,a));bv(e,t,u,bl(c,l)),Uu(e,u);const h=u.tView=yv(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}(u,c,l,e,t,i,r,s,o):c.data[u];na(h,!1);const p=l[Fe].createComment("");cp(c,l,p,h),Br(p,l),ur(l,l[u]=lt(p,l,p,h)),Iu(h)&&_v(c,l,h),null!=o&&vv(l,h,a)}function zr(n){return Jt(function NE(){return Gt.lFrame.contextLView}(),ei+n)}function $(n,e,t){const i=Ee();return ms(i,md(),e)&&Gs(Fn(),dn(),i,n,e,i[Fe],t,!1),$}function QT(n,e,t,i,r){const o=r?"class":"style";YT(n,t,e.inputs[o],o,i)}function Z(n,e,t,i){const r=Ee(),s=Fn(),o=ei+n,a=r[Fe],l=s.firstCreatePass?function t8(n,e,t,i,r,s){const o=e.consts,l=kd(e,n,2,i,bl(o,r));return bv(e,t,l,bl(o,s)),null!==l.attrs&&tw(l,l.attrs,!1),null!==l.mergedAttrs&&tw(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,e,t,i):s.data[o],c=r[o]=O_(a,e,function zf(){return Gt.lFrame.currentNamespace}()),u=Iu(l);return na(l,!0),rh(a,c,l),32!=(32&l.flags)&&cp(s,r,c,l),0===function kE(){return Gt.lFrame.elementDepthCount}()&&Br(c,r),function OE(){Gt.lFrame.elementDepthCount++}(),u&&(_v(s,r,l),dh(s,l,r)),null!==i&&vv(r,l),Z}function se(){let n=br();Ls()?Qg():(n=n.parent,na(n,!1));const e=n;!function LE(){Gt.lFrame.elementDepthCount--}();const t=Fn();return t.firstCreatePass&&(Uu(t,n),kf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function Hu(n){return 0!=(8&n.flags)}(e)&&QT(t,e,Ee(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function HE(n){return 0!=(16&n.flags)}(e)&&QT(t,e,Ee(),e.stylesWithoutHost,!1),se}function $e(n,e,t,i){return Z(n,e,t,i),se(),$e}function ha(n,e,t){const i=Ee(),r=Fn(),s=n+ei,o=r.firstCreatePass?function n8(n,e,t,i,r){const s=e.consts,o=bl(s,i),a=kd(e,n,8,"ng-container",o);return null!==o&&tw(a,o,!0),bv(e,t,a,bl(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];na(o,!0);const a=i[s]=i[Fe].createComment("");return cp(r,i,a,o),Br(a,i),Iu(o)&&(_v(r,i,o),dh(r,o,i)),null!=t&&vv(i,o),ha}function fa(){let n=br();const e=Fn();return Ls()?Qg():(n=n.parent,na(n,!1)),e.firstCreatePass&&(Uu(e,n),kf(n)&&e.queries.elementEnd(n)),fa}function Sv(n,e,t){return ha(n,e,t),fa(),Sv}function Oi(){return Ee()}function Cv(n){return!!n&&"function"==typeof n.then}function VO(n){return!!n&&"function"==typeof n.subscribe}const JT=VO;function ot(n,e,t,i){const r=Ee(),s=Fn(),o=br();return zO(s,r,r[Fe],o,n,e,i),ot}function e1(n,e){const t=br(),i=Ee(),r=Fn();return zO(r,i,MO(t_(r.data),t,i),t,n,e),e1}function zO(n,e,t,i,r,s,o){const a=Iu(i),c=n.firstCreatePass&&wO(n),u=e[oe],h=xO(e);let p=!0;if(3&i.type||o){const b=cr(i,e),y=o?o(b):b,v=h.length,M=o?S=>o(Pi(S[i.index])):i.index;let x=null;if(!o&&a&&(x=function i8(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[X],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=s,x.__ngLastListenerFn__=s,p=!1;else{s=GO(i,e,u,s,!1);const S=t.listen(y,r,s);h.push(s,S),c&&c.push(r,M,v,v+1)}}else s=GO(i,e,u,s,!1);const m=i.outputs;let g;if(p&&null!==m&&(g=m[r])){const b=g.length;if(b)for(let y=0;y<b;y+=2){const P=e[g[y]][g[y+1]].subscribe(s),A=h.length;h.push(s,P),c&&c.push(r,i.index,A,-(A+1))}}}function HO(n,e,t,i){try{return so(6,e,t),!1!==t(i)}catch(r){return SO(n,r),!1}finally{so(7,e,t)}}function GO(n,e,t,i,r){return function s(o){if(o===Function)return i;Vr(n.componentOffset>-1?hs(n.index,e):e);let l=HO(e,t,i,o),c=s.__ngNextListenerFn__;for(;c;)l=HO(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Me(n=1){return function UE(n){return(Gt.lFrame.contextLView=function Vf(n,e){for(;n>0;)e=e[vl],n--;return e}(n,Gt.lFrame.contextLView))[oe]}(n)}function r8(n,e){let t=null;const i=function Px(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Rx(n,s,!0):vT(i,s))return r}else t=r}return t}function Sr(n){const e=Ee()[Or][er];if(!e.projection){const i=e.projection=xd(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?r8(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Xt(n,e=0,t){const i=Ee(),r=Fn(),s=kd(r,ei+n,16,null,t||null);null===s.projection&&(s.projection=e),Qg(),32!=(32&s.flags)&&function bA(n,e,t){ox(e[Fe],0,e,t,Q0(n,t,e),nx(t.parent||e[er],t,e))}(r,i,s)}function t1(n,e,t){return n1(n,"",e,"",t),t1}function n1(n,e,t,i,r){const s=Ee(),o=Ap(s,e,t,i);return o!==Wt&&Gs(Fn(),dn(),s,n,o,s[Fe],r,!1),n1}function sw(n,e){return n<<17|e<<2}function Od(n){return n>>17&32767}function r1(n){return 2|n}function hh(n){return(131068&n)>>2}function s1(n,e){return-131069&n|e<<2}function o1(n){return 1|n}function QO(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?Od(s):hh(s),l=!1;for(;0!==a&&(!1===l||o);){const u=n[a+1];d8(n[a],e)&&(l=!0,n[a+1]=i?o1(u):r1(u)),a=i?Od(u):hh(u)}l&&(n[t+1]=i?r1(s):o1(s))}function d8(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&vc(n,e)>=0}const Cr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function JO(n){return n.substring(Cr.key,Cr.keyEnd)}function eL(n,e){const t=Cr.textEnd;return t===e?-1:(e=Cr.keyEnd=function p8(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,Cr.key=e,t),Lp(n,e,t))}function Lp(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function Dc(n,e,t){return Ya(n,e,t,!1),Dc}function Pn(n,e){return Ya(n,e,null,!0),Pn}function Nl(n,e){for(let t=function h8(n){return function nL(n){Cr.key=0,Cr.keyEnd=0,Cr.value=0,Cr.valueEnd=0,Cr.textEnd=n.length}(n),eL(n,Lp(n,0,Cr.textEnd))}(e);t>=0;t=eL(e,t))Ns(n,JO(e),!0)}function Ya(n,e,t,i){const r=Ee(),s=Fn(),o=Fa(2);s.firstUpdatePass&&oL(s,n,o,i),e!==Wt&&ms(r,o,e)&&lL(s,s.data[Jr()],r,r[Fe],n,r[o+1]=function E8(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=ri(Us(n)))),n}(e,t),i,o)}function sL(n,e){return e>=n.expandoStartIndex}function oL(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[Jr()],o=sL(n,t);dL(s,i)&&null===e&&!o&&(e=!1),e=function y8(n,e,t,i){const r=t_(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=Ev(t=a1(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=a1(r,n,e,t,i),null===s){let l=function b8(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==hh(i))return n[Od(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=a1(null,n,e,l[1],i),l=Ev(l,e.attrs,i),function x8(n,e,t,i){n[Od(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function w8(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Ev(i,n[s].hostAttrs,t);return Ev(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function l8(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Od(o),l=hh(o);n[i]=t;let u,c=!1;if(Array.isArray(t)?(u=t[1],(null===u||vc(t,u)>0)&&(c=!0)):u=t,r)if(0!==l){const p=Od(n[a+1]);n[i+1]=sw(p,a),0!==p&&(n[p+1]=s1(n[p+1],i)),n[a+1]=function o8(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=sw(a,0),0!==a&&(n[a+1]=s1(n[a+1],i)),a=i;else n[i+1]=sw(l,0),0===a?a=i:n[l+1]=s1(n[l+1],i),l=i;c&&(n[i+1]=r1(n[i+1])),QO(n,u,i,!0),QO(n,u,i,!1),function c8(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&vc(s,e)>=0&&(t[i+1]=o1(t[i+1]))}(e,u,n,i,s),o=sw(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}function a1(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=Ev(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function Ev(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ns(n,o,!!t||e[++s]))}return void 0===n?null:n}function lL(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],u=function a8(n){return 1==(1&n)}(c)?cL(l,e,t,r,hh(c),o):void 0;ow(u)||(ow(s)||function s8(n){return 2==(2&n)}(c)&&(s=cL(l,null,t,r,a,o)),function wA(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:ns.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ns.Important),n.setStyle(t,i,r,s))}}(i,o,T(Jr(),t),r,s))}function cL(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let p=t[r+1];p===Wt&&(p=h?Un:void 0);let m=h?Kf(p,i):u===i?p:void 0;if(c&&!ow(m)&&(m=Kf(l,i)),ow(m)&&(a=m,o))return a;const g=n[r+1];r=o?Od(g):hh(g)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Kf(l,i))}return a}function ow(n){return void 0!==n}function dL(n,e){return 0!=(n.flags&(e?8:16))}function it(n,e=""){const t=Ee(),i=Fn(),r=n+ei,s=i.firstCreatePass?kd(i,r,1,e,null):i.data[r],o=t[r]=function k_(n,e){return n.createText(e)}(t[Fe],e);cp(i,t,o,s),na(s,!1)}function $i(n){return Er("",n,""),$i}function Er(n,e,t){const i=Ee(),r=Ap(i,n,e,t);return r!==Wt&&Tc(i,Jr(),r),Er}function Fp(n,e,t,i,r){const s=Ee(),o=Tp(s,n,e,t,i,r);return o!==Wt&&Tc(s,Jr(),o),Fp}function vL(n,e,t){!function Ka(n,e,t,i){const r=Fn(),s=Fa(2);r.firstUpdatePass&&oL(r,null,s,i);const o=Ee();if(t!==Wt&&ms(o,s,t)){const a=r.data[Jr()];if(dL(a,i)&&!sL(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Bg(l,t||"")),QT(r,a,o,t,i)}else!function C8(n,e,t,i,r,s,o,a){r===Wt&&(r=Un);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let b,g=null;u===h?(l+=2,c+=2,p!==m&&(g=h,b=m)):null===h||null!==u&&u<h?(l+=2,g=u):(c+=2,g=h,b=m),null!==g&&lL(n,e,t,i,g,b,o,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[Fe],o[s+1],o[s+1]=function M8(n,e,t){if(null==t||""===t)return Un;const i=[],r=Us(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(Ns,Nl,Ap(Ee(),n,e,t),!0)}function Ld(n,e,t){const i=Ee();return ms(i,md(),e)&&Gs(Fn(),dn(),i,n,e,i[Fe],t,!0),Ld}function l1(n,e,t){const i=Ee();if(ms(i,md(),e)){const s=Fn(),o=dn();Gs(s,o,i,n,e,MO(t_(s.data),o,i),t,!0)}return l1}const fh=void 0;var $8=["en",[["a","p"],["AM","PM"],fh],[["AM","PM"],fh,fh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fh,"{1} 'at' {0}",fh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function W8(n){const t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===i?1:5}];let Np={};function $s(n){const e=function j8(n){return n.toLowerCase().replace(/_/g,"-")}(n);let t=DL(e);if(t)return t;const i=e.split("-")[0];if(t=DL(i),t)return t;if("en"===i)return $8;throw new fe(701,!1)}function DL(n){return n in Np||(Np[n]=yn.ng&&yn.ng.common&&yn.ng.common.locales&&yn.ng.common.locales[n]),Np[n]}var Ze=(()=>((Ze=Ze||{})[Ze.LocaleId=0]="LocaleId",Ze[Ze.DayPeriodsFormat=1]="DayPeriodsFormat",Ze[Ze.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ze[Ze.DaysFormat=3]="DaysFormat",Ze[Ze.DaysStandalone=4]="DaysStandalone",Ze[Ze.MonthsFormat=5]="MonthsFormat",Ze[Ze.MonthsStandalone=6]="MonthsStandalone",Ze[Ze.Eras=7]="Eras",Ze[Ze.FirstDayOfWeek=8]="FirstDayOfWeek",Ze[Ze.WeekendRange=9]="WeekendRange",Ze[Ze.DateFormat=10]="DateFormat",Ze[Ze.TimeFormat=11]="TimeFormat",Ze[Ze.DateTimeFormat=12]="DateTimeFormat",Ze[Ze.NumberSymbols=13]="NumberSymbols",Ze[Ze.NumberFormats=14]="NumberFormats",Ze[Ze.CurrencyCode=15]="CurrencyCode",Ze[Ze.CurrencySymbol=16]="CurrencySymbol",Ze[Ze.CurrencyName=17]="CurrencyName",Ze[Ze.Currencies=18]="Currencies",Ze[Ze.Directionality=19]="Directionality",Ze[Ze.PluralCase=20]="PluralCase",Ze[Ze.ExtraData=21]="ExtraData",Ze))();const Bp="en-US";let IL=Bp;function u1(n,e,t,i,r){if(n=wt(n),Array.isArray(n))for(let s=0;s<n.length;s++)u1(n[s],e,t,i,r);else{const s=Fn(),o=Ee();let a=ni(n)?n:wt(n.provide),l=sv(n);const c=br(),u=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(ni(n)||!n.multi){const m=new Vu(l,r,D),g=f1(a,e,r?u:u+p,h);-1===g?(f_(jf(c,o),s,a),h1(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(m),o.push(m)):(t[g]=m,o[g]=m)}else{const m=f1(a,e,u+p,h),g=f1(a,e,u,u+p),y=g>=0&&t[g];if(r&&!y||!r&&!(m>=0&&t[m])){f_(jf(c,o),s,a);const v=function GW(n,e,t,i,r){const s=new Vu(n,t,D);return s.multi=[],s.index=e,s.componentProviders=0,tF(s,r,i&&!t),s}(r?HW:zW,t.length,r,i,l);!r&&y&&(t[g].providerFactory=v),h1(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(v),o.push(v)}else h1(s,n,m>-1?m:g,tF(t[r?g:m],l,!r&&i));!r&&i&&y&&t[g].componentProviders++}}}function h1(n,e,t,i){const r=ni(e),s=function Cx(n){return!!n.useClass}(e);if(r||s){const l=(s?wt(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const u=c.indexOf(t);-1===u?c.push(t,[i,l]):c[u+1].push(i,l)}else c.push(t,l)}}}function tF(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function f1(n,e,t,i){for(let r=t;r<i;r++)if(e[r]===n)return r;return-1}function zW(n,e,t,i){return p1(this.multi,[])}function HW(n,e,t,i){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=pc(t,t[Qe],this.providerFactory.index,i);s=a.slice(0,o),p1(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],p1(r,s);return s}function p1(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function zn(n,e=[]){return t=>{t.providersResolver=(i,r)=>function VW(n,e,t){const i=Fn();if(i.firstCreatePass){const r=ro(n);u1(t,i.data,i.blueprint,r,!0),u1(e,i.data,i.blueprint,r,!1)}}(i,r?r(n):n,e)}}class Up{}class nF{}class iF extends Up{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new CO(this);const i=ks(e);this._bootstrapComponents=Xa(i.bootstrap),this._r3Injector=Hx(e,t,[{provide:Up,useValue:this},{provide:kl,useValue:this.componentFactoryResolver}],ri(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class m1 extends nF{constructor(e){super(),this.moduleType=e}create(e){return new iF(this.moduleType,e)}}class $W extends Up{constructor(e,t,i){super(),this.componentFactoryResolver=new CO(this),this.instance=null;const r=new iv([...e,{provide:Up,useValue:this},{provide:kl,useValue:this.componentFactoryResolver}],t||gp(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function uw(n,e,t=null){return new $W(n,e,t).injector}let jW=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=wx(0,t.type),r=i.length>0?uw([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ke({token:n,providedIn:"environment",factory:()=>new n(Q(Wa))}),n})();function g1(n){n.getStandaloneInjector=e=>e.get(jW).getOrCreateStandaloneInjector(n)}function co(n,e,t){const i=Qr()+n,r=Ee();return r[i]===Wt?Ll(r,i,t?e.call(t):e()):function Mv(n,e){return n[e]}(r,i)}function hw(n,e,t,i){return uF(Ee(),Qr(),n,e,t,i)}function dF(n,e,t,i,r,s,o){return function pF(n,e,t,i,r,s,o,a,l){const c=e+t;return function ua(n,e,t,i,r,s){const o=uh(n,e,t,i);return uh(n,e+2,r,s)||o}(n,c,r,s,o,a)?Ll(n,c+4,l?i.call(l,r,s,o,a):i(r,s,o,a)):Pv(n,c+4)}(Ee(),Qr(),n,e,t,i,r,s,o)}function Pv(n,e){const t=n[e];return t===Wt?void 0:t}function uF(n,e,t,i,r,s){const o=e+t;return ms(n,o,r)?Ll(n,o+1,s?i.call(s,r):i(r)):Pv(n,o+1)}function gn(n,e){const t=Fn();let i;const r=n+ei;t.firstCreatePass?(i=function l$(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=Oa(i.type)),o=Rs(D);try{const a=$u(!1),l=s();return $u(a),function e8(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,Ee(),r,l),l}finally{Rs(o)}}function En(n,e,t){const i=n+ei,r=Ee(),s=Jt(r,i);return kv(r,i)?uF(r,Qr(),e,s.transform,t,s):s.transform(t)}function v1(n,e,t,i){const r=n+ei,s=Ee(),o=Jt(s,r);return kv(s,r)?function hF(n,e,t,i,r,s,o){const a=e+t;return uh(n,a,r,s)?Ll(n,a+2,o?i.call(o,r,s):i(r,s)):Pv(n,a+2)}(s,Qr(),e,o.transform,t,i,o):o.transform(t,i)}function kv(n,e){return n[Qe].data[e].pure}function y1(n){return e=>{setTimeout(n,void 0,e)}}const st=class h$ extends Ve{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=y1(s),r&&(r=y1(r)),o&&(o=y1(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof cn&&e.add(a),a}};function f$(){return this._results[Symbol.iterator]()}class Vp{get changes(){return this._changes||(this._changes=new st)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Vp.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=f$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function ao(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function qE(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let uo=(()=>{class n{}return n.__NG_ELEMENT_ID__=g$,n})();const p$=uo,m$=class extends p${constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tView,r=wp(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[Lr]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[ea];return null!==o&&(r[ea]=o.createEmbeddedView(i)),gv(i,r,e),new xv(r)}};function g$(){return fw(br(),Ee())}function fw(n,e){return 4&n.type?new m$(e,n,Ec(n,e)):null}let is=(()=>{class n{}return n.__NG_ELEMENT_ID__=_$,n})();function _$(){return vF(br(),Ee())}const v$=is,gF=class extends v${constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ec(this._hostTNode,this._hostLView)}get injector(){return new Cl(this._hostTNode,this._hostLView)}get parentInjector(){const e=Xu(this._hostTNode,this._hostLView);if(Gf(e)){const t=Wu(e,this._hostLView),i=Wf(e);return new Cl(t[Qe].data[i+8],t)}return new Cl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=_F(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Zr}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function fs(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,i=h.injector,r=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}const l=o?e:new wv(Wn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const p=(o?c:this.parentInjector).get(Wa,null);p&&(s=p)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(e,t){const i=e._lView,r=i[Qe];if(function uc(n){return us(n[Ai])}(i)){const u=this.indexOf(e);if(-1!==u)this.detach(u);else{const h=i[Ai],p=new gF(h,h[er],h[Ai]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function pA(n,e,t,i){const r=Zr+i,s=t.length;i>0&&(t[r-1][Do]=e),i<s-Zr?(e[Do]=t[r],_c(t,Zr+i,e)):(t.push(e),e[Do]=null),e[Ai]=t;const o=e[Lr];null!==o&&t!==o&&function mA(n,e){const t=n[pd];e[Or]!==e[Ai][Ai][Or]&&(n[$g]=!0),null===t?n[pd]=[e]:t.push(e)}(o,e);const a=e[ea];null!==a&&a.insertView(n),e[Qt]|=64}(r,i,o,s);const a=U_(s,o),l=i[Fe],c=lp(l,o[ac]);return null!==c&&function K0(n,e,t,i,r,s){i[Jo]=r,i[er]=e,ih(n,i,t,1,r,s)}(r,o[er],l,i,c,a),e.attachToViewContainerRef(),_c(b1(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=_F(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=L_(this._lContainer,t);i&&(Ku(b1(this._lContainer),t),Z0(i[Qe],i))}detach(e){const t=this._adjustIndex(e,-1),i=L_(this._lContainer,t);return i&&null!=Ku(b1(this._lContainer),t)?new xv(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function _F(n){return n[Pf]}function b1(n){return n[Pf]||(n[Pf]=[])}function vF(n,e){let t;const i=e[n.index];if(us(i))t=i;else{let r;if(8&n.type)r=Pi(i);else{const s=e[Fe];r=s.createComment("");const o=cr(n,e);wc(s,lp(s,o),r,function yA(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=lt(i,e,r,n),ur(e,t)}return new gF(t,n,e)}class x1{constructor(e){this.queryList=e,this.matches=null}clone(){return new x1(this.queryList)}setDirty(){this.queryList.setDirty()}}class w1{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new w1(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==MF(e,t).matches&&this.queries[t].setDirty()}}class yF{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class M1{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new M1(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class S1{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new S1(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,y$(t,s)),this.matchTNodeWithReadOption(e,t,Xf(t,e,s,!1,!1))}else i===uo?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Xf(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===_t||r===is||r===uo&&4&t.type)this.addMatch(t.index,-2);else{const s=Xf(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function y$(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function x$(n,e,t,i){return-1===t?function b$(n,e){return 11&n.type?Ec(n,e):4&n.type?fw(n,e):null}(e,n):-2===t?function w$(n,e,t){return t===_t?Ec(e,n):t===uo?fw(e,n):t===is?vF(e,n):void 0}(n,e,i):pc(n,n[Qe],t,e)}function bF(n,e,t,i){const r=e[ea].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:x$(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function C1(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=bF(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],u=e[-l];for(let h=Zr;h<u.length;h++){const p=u[h];p[Lr]===p[Ai]&&C1(p[Qe],p,c,i)}if(null!==u[pd]){const h=u[pd];for(let p=0;p<h.length;p++){const m=h[p];C1(m[Qe],m,c,i)}}}}}return i}function kt(n){const e=Ee(),t=Fn(),i=ra();Bu(i+1);const r=MF(t,i);if(n.dirty&&function PE(n){return 4==(4&n[Qt])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?C1(t,e,i,[]):bF(t,e,r,i);n.reset(s,Xn),n.notifyOnChanges()}return!0}return!1}function oi(n,e,t){const i=Fn();i.firstCreatePass&&(wF(i,new yF(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),xF(i,Ee(),e)}function Xi(n,e,t,i){const r=Fn();if(r.firstCreatePass){const s=br();wF(r,new yF(e,t,i),s.index),function S$(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}xF(r,Ee(),t)}function Ot(){return function M$(n,e){return n[ea].queries[e].queryList}(Ee(),ra())}function xF(n,e,t){const i=new Vp(4==(4&t));Zx(n,e,i,i.destroy),null===e[ea]&&(e[ea]=new w1),e[ea].queries.push(new x1(i))}function wF(n,e,t){null===n.queries&&(n.queries=new M1),n.queries.track(new S1(e,t))}function MF(n,e){return n.queries.getByIndex(e)}function Ic(n,e){return fw(n,e)}function mw(...n){}const gw=new ge("Application Initializer");let _w=(()=>{class n{constructor(t){this.appInits=t,this.resolve=mw,this.reject=mw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Cv(s))t.push(s);else if(JT(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(Q(gw,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gp=new ge("AppId",{providedIn:"root",factory:function zF(){return`${R1()}${R1()}${R1()}`}});function R1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const HF=new ge("Platform Initializer"),P1=new ge("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),rs=new ge("AnimationModuleType");let W$=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Bl=new ge("LocaleId",{providedIn:"root",factory:()=>Pt(Bl,Ct.Optional|Ct.SkipSelf)||function $$(){return typeof $localize<"u"&&$localize.locale||Bp}()});class X${constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let GF=(()=>{class n{compileModuleSync(t){return new m1(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=Xa(ks(t).declarations).reduce((o,a)=>{const l=Wn(a);return l&&o.push(new wv(l)),o},[]);return new X$(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const K$=(()=>Promise.resolve(0))();function k1(n){typeof Zone>"u"?K$.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class ft{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new st(!1),this.onMicrotaskEmpty=new st(!1),this.onStable=new st(!1),this.onError=new st(!1),typeof Zone>"u")throw new fe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function Z$(){let n=yn.requestAnimationFrame,e=yn.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function e6(n){const e=()=>{!function J$(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(yn,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,L1(n),n.isCheckStableRunning=!0,O1(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),L1(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return jF(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),XF(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return jF(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),XF(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,L1(n),O1(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ft.isInAngularZone())throw new fe(909,!1)}static assertNotInAngularZone(){if(ft.isInAngularZone())throw new fe(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,Q$,mw,mw);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const Q$={};function O1(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function L1(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function jF(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function XF(n){n._nesting--,O1(n)}class t6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new st,this.onMicrotaskEmpty=new st,this.onStable=new st,this.onError=new st}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const qF=new ge(""),vw=new ge("");let B1,F1=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,B1||(function n6(n){B1=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ft.assertNotInAngularZone(),k1(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())k1(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(Q(ft),Q(N1),Q(vw))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),N1=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return B1?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const Rc=!1;let Fd=null;const YF=new ge("AllowMultipleToken"),U1=new ge("PlatformDestroyListeners"),KF=new ge("appBootstrapListener");class ZF{constructor(e,t){this.name=e,this.token=t}}function JF(n,e,t=[]){const i=`Platform: ${e}`,r=new ge(i);return(s=[])=>{let o=V1();if(!o||o.injector.get(YF,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function s6(n){if(Fd&&!Fd.get(YF,!1))throw new fe(400,!1);Fd=n;const e=n.get(t2);(function QF(n){const e=n.get(HF,null);e&&e.forEach(t=>t())})(n)}(function e2(n=[],e){return ki.create({name:e,providers:[{provide:tv,useValue:"platform"},{provide:U1,useValue:new Set([()=>Fd=null])},...n]})}(a,i))}return function a6(n){const e=V1();if(!e)throw new fe(401,!1);return e}()}}function V1(){return Fd?.get(t2)??null}let t2=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function r2(n,e){let t;return t="noop"===n?new t6:("zone.js"===n?void 0:n)||new ft(e),t}(i?.ngZone,function n2(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:ft,useValue:r}];return r.run(()=>{const o=ki.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(ja,null);if(!l)throw new fe(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{yw(this._modules,a),c.unsubscribe()})}),function s2(n,e,t){try{const i=t();return Cv(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(_w);return c.runInitializers(),c.donePromise.then(()=>(function RL(n){no(n,"Expected localeId to be defined"),"string"==typeof n&&(IL=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Bl,Bp)||Bp),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=o2({},i);return function i6(n,e,t){const i=new m1(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Wp);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new fe(-403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new fe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(U1,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(Q(ki))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function o2(n,e){return Array.isArray(e)?e.reduce(o2,n):{...n,...e}}let Wp=(()=>{class n{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Mn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Mn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{ft.assertNotInAngularZone(),k1(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{ft.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=cs(s,o.pipe(Mu()))}bootstrap(t,i){const r=t instanceof Ex;if(!this._injector.get(_w).done){!r&&function fd(n){const e=Wn(n)||xi(n)||vr(n);return null!==e&&e.standalone}(t);throw new fe(405,Rc)}let o;o=r?t:this._injector.get(kl).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function r6(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Up),c=o.create(ki.NULL,[],i||o.selector,a),u=c.location.nativeElement,h=c.injector.get(qF,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),yw(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new fe(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;yw(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(KF,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>yw(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new fe(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(Q(ft),Q(Wa),Q(ja))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let ai=(()=>{class n{}return n.__NG_ELEMENT_ID__=c6,n})();function c6(n){return function d6(n,e,t){if(yl(n)&&!t){const i=hs(n.index,e);return new xv(i,i)}return 47&n.type?new xv(e[Or],e):null}(br(),Ee(),16==(16&n))}class u2{constructor(){}supports(e){return iw(e)}create(e){return new g6(e)}}const m6=(n,e)=>e;class g6{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||m6}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<f2(i,r,s)?t:i,a=f2(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,g=m+p;u<=g&&g<c&&(s[p]=m+1)}s[o.previousIndex]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!iw(e))throw new fe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function KG(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new _6(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new h2),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new h2),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class _6{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class v6{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class h2{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new v6,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function f2(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class p2{constructor(){}supports(e){return e instanceof Map||ZT(e)}create(){return new y6}}class y6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||ZT(e)))throw new fe(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new b6(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class b6{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function m2(){return new ww([new u2])}let ww=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||m2()),deps:[[n,new Dl,new Io]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new fe(901,!1)}}return n.\u0275prov=ke({token:n,providedIn:"root",factory:m2}),n})();function g2(){return new Lv([new p2])}let Lv=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||g2()),deps:[[n,new Dl,new Io]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new fe(901,!1)}}return n.\u0275prov=ke({token:n,providedIn:"root",factory:g2}),n})();const M6=JF(null,"core",[]);let S6=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(Q(Wp))},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();let $1=null;function Pc(){return $1}class A6{}const Ut=new ge("DocumentToken");let j1=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(){return function T6(){return Q(_2)}()},providedIn:"platform"}),n})();const D6=new ge("Location Initialized");let _2=(()=>{class n extends j1{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pc().getBaseHref(this._doc)}onPopState(t){const i=Pc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Pc().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,i,r){v2()?this._history.pushState(t,i,r):this._location.hash=r}replaceState(t,i,r){v2()?this._history.replaceState(t,i,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:function(){return function I6(){return new _2(Q(Ut))}()},providedIn:"platform"}),n})();function v2(){return!!window.history.pushState}function X1(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function y2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function kc(n){return n&&"?"!==n[0]?"?"+n:n}let mh=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(){return Pt(x2)},providedIn:"root"}),n})();const b2=new ge("appBaseHref");let x2=(()=>{class n extends mh{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??Pt(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return X1(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+kc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+kc(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+kc(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(j1),Q(b2,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),R6=(()=>{class n extends mh{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=X1(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+kc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+kc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(j1),Q(b2,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),Fv=(()=>{class n{constructor(t){this._subject=new st,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function O6(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(y2(w2(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+kc(i))}normalize(t){return n.stripTrailingSlash(function k6(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,w2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kc(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+kc(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=kc,n.joinWithSlash=X1,n.stripTrailingSlash=y2,n.\u0275fac=function(t){return new(t||n)(Q(mh))},n.\u0275prov=ke({token:n,factory:function(){return function P6(){return new Fv(Q(mh))}()},providedIn:"root"}),n})();function w2(n){return n.replace(/\/index.html$/,"")}var ho=(()=>((ho=ho||{})[ho.Decimal=0]="Decimal",ho[ho.Percent=1]="Percent",ho[ho.Currency=2]="Currency",ho[ho.Scientific=3]="Scientific",ho))(),Tt=(()=>((Tt=Tt||{})[Tt.Decimal=0]="Decimal",Tt[Tt.Group=1]="Group",Tt[Tt.List=2]="List",Tt[Tt.PercentSign=3]="PercentSign",Tt[Tt.PlusSign=4]="PlusSign",Tt[Tt.MinusSign=5]="MinusSign",Tt[Tt.Exponential=6]="Exponential",Tt[Tt.SuperscriptingExponent=7]="SuperscriptingExponent",Tt[Tt.PerMille=8]="PerMille",Tt[Tt.Infinity=9]="Infinity",Tt[Tt.NaN=10]="NaN",Tt[Tt.TimeSeparator=11]="TimeSeparator",Tt[Tt.CurrencyDecimal=12]="CurrencyDecimal",Tt[Tt.CurrencyGroup=13]="CurrencyGroup",Tt))();function pa(n,e){const t=$s(n),i=t[Ze.NumberSymbols][e];if(typeof i>"u"){if(e===Tt.CurrencyDecimal)return t[Ze.NumberSymbols][Tt.Decimal];if(e===Tt.CurrencyGroup)return t[Ze.NumberSymbols][Tt.Group]}return i}const oj=/^(\d+)?\.((\d+)(-(\d+))?)?$/,T2=22,Rw=".",Bv="0",aj=";",lj=",",Q1="#";function tD(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}const iD=/\s+/,R2=[];let Uv=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this.initialClasses=R2,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(iD):R2}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(iD):t}ngDoCheck(){for(const i of this.initialClasses)this._updateState(i,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const i of t)this._updateState(i,!0);else if(null!=t)for(const i of Object.keys(t))this._updateState(i,Boolean(t[i]));this._applyStateDiff()}_updateState(t,i){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==i&&(r.changed=!0,r.enabled=i),r.touched=!0):this.stateMap.set(t,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const i=t[0],r=t[1];r.changed?(this._toggleClass(i,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),r.touched=!1}}_toggleClass(t,i){(t=t.trim()).length>0&&t.split(iD).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(D(ww),D(Lv),D(_t),D(ca))},n.\u0275dir=Ae({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class yj{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ga=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new yj(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),O2(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{O2(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(D(is),D(uo),D(ww))},n.\u0275dir=Ae({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function O2(n,e){n.context.$implicit=e.item}let Di=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new xj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){L2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){L2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(D(is),D(uo))},n.\u0275dir=Ae({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class xj{constructor(){this.$implicit=null,this.ngIf=null}}function L2(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${ri(e)}'.`)}class rD{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Vv=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const i=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||i,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),i}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const i of this._defaultViews)i.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),sD=(()=>{class n{constructor(t,i,r){this.ngSwitch=r,r._addCase(),this._view=new rD(t,i)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(D(is),D(uo),D(Vv,9))},n.\u0275dir=Ae({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),F2=(()=>{class n{constructor(t,i,r){r._addDefault(new rD(t,i))}}return n.\u0275fac=function(t){return new(t||n)(D(is),D(uo),D(Vv,9))},n.\u0275dir=Ae({type:n,selectors:[["","ngSwitchDefault",""]],standalone:!0}),n})(),Pw=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:ns.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(Lv),D(ca))},n.\u0275dir=Ae({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),zv=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(D(is))},n.\u0275dir=Ae({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Hi]}),n})();function Ja(n,e){return new fe(2100,!1)}class Mj{createSubscription(e,t){return e.subscribe({next:t,error:i=>{throw i}})}dispose(e){e.unsubscribe()}}class Sj{createSubscription(e,t){return e.then(t,i=>{throw i})}dispose(e){}}const Cj=new Sj,Ej=new Mj;let Nd=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,i=>this._updateLatestValue(t,i))}_selectStrategy(t){if(Cv(t))return Cj;if(VO(t))return Ej;throw Ja()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,i){t===this._obj&&(this._latestValue=i,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(D(ai,16))},n.\u0275pipe=kr({name:"async",type:n,pure:!1,standalone:!0}),n})(),B2=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=U2}transform(t,i=U2){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),s=i!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function Uj(n,e){return{key:n,value:e}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)(D(Lv,16))},n.\u0275pipe=kr({name:"keyvalue",type:n,pure:!1,standalone:!0}),n})();function U2(n,e){const t=n.key,i=e.key;if(t===i)return 0;if(void 0===t)return 1;if(void 0===i)return-1;if(null===t)return 1;if(null===i)return-1;if("string"==typeof t&&"string"==typeof i)return t<i?-1:1;if("number"==typeof t&&"number"==typeof i)return t-i;if("boolean"==typeof t&&"boolean"==typeof i)return t<i?-1:1;const r=String(t),s=String(i);return r==s?0:r<s?-1:1}let V2=(()=>{class n{constructor(t){this._locale=t}transform(t,i,r){if(!function oD(n){return!(null==n||""===n||n!=n)}(t))return null;r=r||this._locale;try{return function hj(n,e,t){return function J1(n,e,t,i,r,s,o=!1){let a="",l=!1;if(isFinite(n)){let c=function pj(n){let i,r,s,o,a,e=Math.abs(n)+"",t=0;for((r=e.indexOf(Rw))>-1&&(e=e.replace(Rw,"")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;e.charAt(s)===Bv;s++);if(s===(a=e.length))i=[0],r=1;else{for(a--;e.charAt(a)===Bv;)a--;for(r-=s,i=[],o=0;s<=a;s++,o++)i[o]=Number(e.charAt(s))}return r>T2&&(i=i.splice(0,T2-1),t=r-1,r=1),{digits:i,exponent:t,integerLen:r}}(n);o&&(c=function fj(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(c));let u=e.minInt,h=e.minFrac,p=e.maxFrac;if(s){const M=s.match(oj);if(null===M)throw new Error(`${s} is not a valid digit info`);const x=M[1],S=M[3],P=M[5];null!=x&&(u=tD(x)),null!=S&&(h=tD(S)),null!=P?p=tD(P):null!=S&&h>p&&(p=h)}!function mj(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let i=n.digits,r=i.length-n.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+n.integerLen,a=i[o];if(o>0){i.splice(Math.max(n.integerLen,o));for(let h=o;h<i.length;h++)i[h]=0}else{r=Math.max(0,r),n.integerLen=1,i.length=Math.max(1,o=s+1),i[0]=0;for(let h=1;h<o;h++)i[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)i.unshift(0),n.integerLen++;i.unshift(1),n.integerLen++}else i[o-1]++;for(;r<Math.max(0,s);r++)i.push(0);let l=0!==s;const c=e+n.integerLen,u=i.reduceRight(function(h,p,m,g){return g[m]=(p+=h)<10?p:p-10,l&&(0===g[m]&&m>=c?g.pop():l=!1),p>=10?1:0},0);u&&(i.unshift(u),n.integerLen++)}(c,h,p);let m=c.digits,g=c.integerLen;const b=c.exponent;let y=[];for(l=m.every(M=>!M);g<u;g++)m.unshift(0);for(;g<0;g++)m.unshift(0);g>0?y=m.splice(g,m.length):(y=m,m=[0]);const v=[];for(m.length>=e.lgSize&&v.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)v.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&v.unshift(m.join("")),a=v.join(pa(t,i)),y.length&&(a+=pa(t,r)+y.join("")),b&&(a+=pa(t,Tt.Exponential)+"+"+b)}else a=pa(t,Tt.Infinity);return a=n<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(n,function eD(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},i=n.split(aj),r=i[0],s=i[1],o=-1!==r.indexOf(Rw)?r.split(Rw):[r.substring(0,r.lastIndexOf(Bv)+1),r.substring(r.lastIndexOf(Bv)+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf(Q1));for(let u=0;u<l.length;u++){const h=l.charAt(u);h===Bv?t.minFrac=t.maxFrac=u+1:h===Q1?t.maxFrac=u+1:t.posSuf+=h}const c=a.split(lj);if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const u=r.length-t.posPre.length-t.posSuf.length,h=s.indexOf(Q1);t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+u).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function q1(n,e){return $s(n)[Ze.NumberFormats][e]}(e,ho.Decimal),pa(e,Tt.MinusSign)),e,Tt.Group,Tt.Decimal,t)}(function aD(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),r,i)}catch(s){throw Ja()}}}return n.\u0275fac=function(t){return new(t||n)(D(Bl,16))},n.\u0275pipe=kr({name:"number",type:n,pure:!0,standalone:!0}),n})();let _a=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();const z2="browser";let jj=(()=>{class n{}return n.\u0275prov=ke({token:n,providedIn:"root",factory:()=>new Xj(Q(Ut),window)}),n})();class Xj{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function qj(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=H2(this.window.history)||H2(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function H2(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class w9 extends A6{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class dD extends w9{static makeCurrent(){!function E6(n){$1||($1=n)}(new dD)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function M9(){return Gv=Gv||document.querySelector("base"),Gv?Gv.getAttribute("href"):null}();return null==t?null:function S9(n){Lw=Lw||document.createElement("a"),Lw.setAttribute("href",n);const e=Lw.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Gv=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function _j(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Lw,Gv=null;const X2=new ge("TRANSITION_ID"),E9=[{provide:gw,useFactory:function C9(n,e,t){return()=>{t.get(_w).donePromise.then(()=>{const i=Pc(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[X2,Ut,ki],multi:!0}];let T9=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();const Fw=new ge("EventManagerPlugins");let Nw=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(Q(Fw),Q(ft))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();class q2{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Pc().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Y2=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const i of t)1===this.changeUsageCount(i,1)&&this.onStyleAdded(i)}removeStyles(t){for(const i of t)0===this.changeUsageCount(i,-1)&&this.onStyleRemoved(i)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,i){const r=this.usageCount;let s=r.get(t)??0;return s+=i,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),Wv=(()=>{class n extends Y2{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const i of this.hostNodes)this.addStyleToHost(i,t)}onStyleRemoved(t){const i=this.styleRef;i.get(t)?.forEach(s=>s.remove()),i.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const i of this.getAllStyles())this.addStyleToHost(t,i)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,i){const r=this.doc.createElement("style");r.textContent=i,t.appendChild(r);const s=this.styleRef.get(i);s?s.push(r):this.styleRef.set(i,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();const uD={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},hD=/%COMP%/g,Q2=new ge("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function J2(n,e){return e.flat(100).map(t=>t.replace(hD,n))}function eN(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bw=(()=>{class n{constructor(t,i,r,s){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new fD(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,i);return r instanceof iN?r.applyToHost(t):r instanceof pD&&r.applyStyles(),r}getOrCreateRenderer(t,i){const r=this.rendererByCompId;let s=r.get(i.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(i.encapsulation){case Ao.Emulated:s=new iN(o,a,i,this.appId,l);break;case Ao.ShadowDom:return new L9(o,a,t,i);default:s=new pD(o,a,i,l)}s.onDestroy=()=>r.delete(i.id),r.set(i.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(Q(Nw),Q(Wv),Q(Gp),Q(Q2))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();class fD{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(uD[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(nN(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(nN(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=uD[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=uD[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(ns.DashCase|ns.Important)?e.style.setProperty(t,i,r&ns.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&ns.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,eN(i)):this.eventManager.addEventListener(e,t,eN(i))}}function nN(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class L9 extends fD{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=J2(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class pD extends fD{constructor(e,t,i,r,s=i.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=J2(s,i.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class iN extends pD{constructor(e,t,i,r,s){const o=r+"-"+i.id;super(e,t,i,s,o),this.contentAttr=function P9(n){return"_ngcontent-%COMP%".replace(hD,n)}(o),this.hostAttr=function k9(n){return"_nghost-%COMP%".replace(hD,n)}(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}let F9=(()=>{class n extends q2{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();const rN=["alt","control","meta","shift"],N9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B9={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let U9=(()=>{class n extends q2{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),rN.forEach(c=>{const u=i.indexOf(c);u>-1&&(i.splice(u,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=N9[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),rN.forEach(o=>{o!==r&&(0,B9[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();const G9=JF(M6,"browser",[{provide:P1,useValue:z2},{provide:HF,useValue:function V9(){dD.makeCurrent()},multi:!0},{provide:Ut,useFactory:function H9(){return function EA(n){G_=n}(document),document},deps:[]}]),aN=new ge(""),lN=[{provide:vw,useClass:class A9{addToWindow(e){yn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},yn.getAllAngularTestabilities=()=>e.getAllTestabilities(),yn.getAllAngularRootElements=()=>e.getAllRootElements(),yn.frameworkStabilizers||(yn.frameworkStabilizers=[]),yn.frameworkStabilizers.push(i=>{const r=yn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Pc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:qF,useClass:F1,deps:[ft,N1,vw]},{provide:F1,useClass:F1,deps:[ft,N1,vw]}],cN=[{provide:tv,useValue:"root"},{provide:ja,useFactory:function z9(){return new ja},deps:[]},{provide:Fw,useClass:F9,multi:!0,deps:[Ut,ft,P1]},{provide:Fw,useClass:U9,multi:!0,deps:[Ut]},{provide:Bw,useClass:Bw,deps:[Nw,Wv,Gp,Q2]},{provide:lh,useExisting:Bw},{provide:Y2,useExisting:Wv},{provide:Wv,useClass:Wv,deps:[Ut]},{provide:Nw,useClass:Nw,deps:[Fw,ft]},{provide:class Yj{},useClass:T9,deps:[]},[]];let dN=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Gp,useValue:t.appId},{provide:X2,useExisting:Gp},E9]}}}return n.\u0275fac=function(t){return new(t||n)(Q(aN,12))},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[...cN,...lN],imports:[_a,S6]}),n})(),uN=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:function(t){let i=null;return i=t?new t:function $9(){return new uN(Q(Ut))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;let _D=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(t){let i=null;return i=t?new(t||n):Q(pN),i},providedIn:"root"}),n})(),pN=(()=>{class n extends _D{constructor(t){super(),this._doc=t}sanitize(t,i){if(null==i)return null;switch(t){case $n.NONE:return i;case $n.HTML:return Vs(i,"HTML")?Us(i):vx(this._doc,String(i)).toString();case $n.STYLE:return Vs(i,"Style")?Us(i):i;case $n.SCRIPT:if(Vs(i,"Script"))return Us(i);throw new Error("unsafe value used in a script context");case $n.URL:return Vs(i,"URL")?Us(i):Sc(String(i));case $n.RESOURCE_URL:if(Vs(i,"ResourceURL"))return Us(i);throw new Error(`unsafe value used in a resource URL context (see ${cd})`);default:throw new Error(`Unexpected SecurityContext ${t} (see ${cd})`)}}bypassSecurityTrustHtml(t){return function RA(n){return new fx(n)}(t)}bypassSecurityTrustStyle(t){return function PA(n){return new px(n)}(t)}bypassSecurityTrustScript(t){return function kA(n){return new AA(n)}(t)}bypassSecurityTrustUrl(t){return function OA(n){return new TA(n)}(t)}bypassSecurityTrustResourceUrl(t){return function LA(n){return new DA(n)}(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:function(t){let i=null;return i=t?new t:function K9(n){return new pN(n.get(Ut))}(Q(ki)),i},providedIn:"root"}),n})();function ct(...n){return Ri(n,wu(n))}class Ht extends Ve{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const $v=B(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Z9}=Array,{getPrototypeOf:Q9,prototype:J9,keys:e7}=Object;function mN(n){if(1===n.length){const e=n[0];if(Z9(e))return{args:e,keys:null};if(function t7(n){return n&&"object"==typeof n&&Q9(n)===J9}(e)){const t=e7(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:n7}=Array;function vD(n){return Ye(e=>function i7(n,e){return n7(e)?n(...e):n(e)}(n,e))}function gN(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}function Ud(...n){const e=wu(n),t=xu(n),{args:i,keys:r}=mN(n);if(0===i.length)return Ri([],e);const s=new Mn(function r7(n,e,t=Ra){return i=>{_N(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)_N(e,()=>{const c=Ri(n[l],e);let u=!1;c.subscribe(Bn(i,h=>{s[l]=h,u||(u=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>gN(r,o):Ra));return t?s.pipe(vD(t)):s}function _N(n,e,t){n?Zo(t,n,e):e()}function jv(...n){return function s7(){return ad(1)}()(Ri(n,wu(n)))}function Xv(n){return new Mn(e=>{ar(n()).subscribe(e)})}function jp(n,e){const t=Yt(n)?n:()=>n,i=r=>r.error(t());return new Mn(e?r=>e.schedule(i,0,r):i)}function yD(){return Gn((n,e)=>{let t=null;n._refCount++;const i=Bn(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class vN extends Mn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ab(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new cn;const t=this.getSubject();e.add(this.source.subscribe(Bn(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=cn.EMPTY)}return e}refCount(){return yD()(this)}}function gs(n,e){return Gn((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(Bn(i,l=>{r?.unsubscribe();let c=0;const u=s++;ar(n(l,u)).subscribe(r=Bn(i,h=>i.next(e?e(l,h,u,c++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Fi(n){return n<=0?()=>Ds:Gn((e,t)=>{let i=0;e.subscribe(Bn(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Oo(...n){const e=wu(n);return Gn((t,i)=>{(e?jv(n,t,e):jv(n,t)).subscribe(i)})}function Hn(n,e){return Gn((t,i)=>{let r=0;t.subscribe(Bn(i,s=>n.call(e,s,r++)&&i.next(s)))})}function Uw(n){return Gn((e,t)=>{let i=!1;e.subscribe(Bn(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function yN(n=o7){return Gn((e,t)=>{let i=!1;e.subscribe(Bn(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function o7(){return new $v}function Vd(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Hn((r,s)=>n(r,s,i)):Ra,Fi(1),t?Uw(e):yN(()=>new $v))}function zd(n,e){return Yt(e)?Ji(n,e,1):Ji(n,1)}function Ii(n,e,t){const i=Yt(n)||e||t?{next:n,error:e,complete:t}:n;return i?Gn((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(Bn(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):Ra}function Lc(n){return Gn((e,t)=>{let s,i=null,r=!1;i=e.subscribe(Bn(t,void 0,void 0,o=>{s=ar(n(o,Lc(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function bN(n,e){return Gn(function a7(n,e,t,i,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Bn(o,u=>{const h=c++;l=a?n(l,u,h):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function bD(n){return n<=0?()=>Ds:Gn((e,t)=>{let i=[];e.subscribe(Bn(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function xN(n,e){const t=arguments.length>=2;return i=>i.pipe(n?Hn((r,s)=>n(r,s,i)):Ra,bD(1),t?Uw(e):yN(()=>new $v))}function wN(n,e=!1){return Gn((t,i)=>{let r=0;t.subscribe(Bn(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}function MN(n){return Ye(()=>n)}function Hd(n){return Gn((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const tn="primary",qv=Symbol("RouteTitle");class l7{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xp(n){return new l7(n)}function c7(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ul(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!SN(n[r],e[r]))return!1;return!0}function SN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function CN(n){return Array.prototype.concat.apply([],n)}function EN(n){return n.length>0?n[n.length-1]:null}function ss(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Gd(n){return JT(n)?n:Cv(n)?Ri(Promise.resolve(n)):ct(n)}const Vw=!1,u7={exact:function DN(n,e,t){if(!gh(n.segments,e.segments)||!zw(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!DN(n.children[i],e.children[i],t))return!1;return!0},subset:IN},AN={exact:function h7(n,e){return Ul(n,e)},subset:function f7(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>SN(n[t],e[t]))},ignored:()=>!0};function TN(n,e,t){return u7[t.paths](n.root,e.root,t.matrixParams)&&AN[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function IN(n,e,t){return RN(n,e,e.segments,t)}function RN(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!gh(r,t)||e.hasChildren()||!zw(r,t,i))}if(n.segments.length===t.length){if(!gh(n.segments,t)||!zw(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!IN(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(gh(n.segments,r)&&zw(n.segments,r,i)&&n.children[tn])&&RN(n.children[tn],e,s,i)}}function zw(n,e,t){return e.every((i,r)=>AN[t](n[r].parameters,i.parameters))}class Wd{constructor(e=new bn([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xp(this.queryParams)),this._queryParamMap}toString(){return g7.serialize(this)}}class bn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ss(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hw(this)}}class Yv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xp(this.parameters)),this._parameterMap}toString(){return ON(this)}}function gh(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let Kv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(){return new xD},providedIn:"root"}),n})();class xD{parse(e){const t=new C7(e);return new Wd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Zv(e.root,!0)}`,i=function y7(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${Gw(t)}=${Gw(r)}`).join("&"):`${Gw(t)}=${Gw(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function _7(n){return encodeURI(n)}(e.fragment)}`:""}`}}const g7=new xD;function Hw(n){return n.segments.map(e=>ON(e)).join("/")}function Zv(n,e){if(!n.hasChildren())return Hw(n);if(e){const t=n.children[tn]?Zv(n.children[tn],!1):"",i=[];return ss(n.children,(r,s)=>{s!==tn&&i.push(`${s}:${Zv(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function m7(n,e){let t=[];return ss(n.children,(i,r)=>{r===tn&&(t=t.concat(e(i,r)))}),ss(n.children,(i,r)=>{r!==tn&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===tn?[Zv(n.children[tn],!1)]:[`${r}:${Zv(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[tn]?`${Hw(n)}/${t[0]}`:`${Hw(n)}/(${t.join("//")})`}}function PN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gw(n){return PN(n).replace(/%3B/gi,";")}function wD(n){return PN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ww(n){return decodeURIComponent(n)}function kN(n){return Ww(n.replace(/\+/g,"%20"))}function ON(n){return`${wD(n.path)}${function v7(n){return Object.keys(n).map(e=>`;${wD(e)}=${wD(n[e])}`).join("")}(n.parameters)}`}const b7=/^[^\/()?;=#]+/;function $w(n){const e=n.match(b7);return e?e[0]:""}const x7=/^[^=?&#]+/,M7=/^[^&#]+/;class C7{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bn([],{}):new bn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[tn]=new bn(e,t)),i}parseSegment(){const e=$w(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new fe(4009,Vw);return this.capture(e),new Yv(Ww(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=$w(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=$w(this.remaining);r&&(i=r,this.capture(i))}e[Ww(t)]=Ww(i)}parseQueryParam(e){const t=function w7(n){const e=n.match(x7);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function S7(n){const e=n.match(M7);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=kN(t),s=kN(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=$w(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new fe(4010,Vw);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=tn);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[tn]:new bn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new fe(4011,Vw)}}function MD(n){return n.segments.length>0?new bn([],{[tn]:n}):n}function jw(n){const e={};for(const i of Object.keys(n.children)){const s=jw(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function E7(n){if(1===n.numberOfChildren&&n.children[tn]){const e=n.children[tn];return new bn(n.segments.concat(e.segments),e.children)}return n}(new bn(n.segments,e))}function _h(n){return n instanceof Wd}const SD=!1;function A7(n,e,t,i,r){if(0===t.length)return qp(e.root,e.root,e.root,i,r);const s=function UN(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new BN(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ss(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new BN(t,e,i)}(t);return s.toRoot()?qp(e.root,e.root,new bn([],{}),i,r):function o(l){const c=function D7(n,e,t,i){if(n.isAbsolute)return new Yp(e.root,!0,0);if(-1===i)return new Yp(t,t===e.root,0);return function VN(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new fe(4005,SD&&"Invalid number of '../'");r=i.segments.length}return new Yp(i,!1,r-s)}(t,i+(Qv(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),u=c.processChildren?Kp(c.segmentGroup,c.index,s.commands):CD(c.segmentGroup,c.index,s.commands);return qp(e.root,c.segmentGroup,u,i,r)}(n.snapshot?._lastPathIndex)}function Qv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Jv(n){return"object"==typeof n&&null!=n&&n.outlets}function qp(n,e,t,i,r){let o,s={};i&&ss(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=n===e?t:NN(n,e,t);const a=MD(jw(o));return new Wd(a,s,r)}function NN(n,e,t){const i={};return ss(n.children,(r,s)=>{i[s]=r===e?t:NN(r,e,t)}),new bn(n.segments,i)}class BN{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Qv(i[0]))throw new fe(4003,SD&&"Root segment cannot have matrix parameters");const r=i.find(Jv);if(r&&r!==EN(i))throw new fe(4004,SD&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yp{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function CD(n,e,t){if(n||(n=new bn([],{})),0===n.segments.length&&n.hasChildren())return Kp(n,e,t);const i=function R7(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Jv(a))break;const l=`${a}`,c=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!HN(l,c,o))return s;i+=2}else{if(!HN(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new bn(n.segments.slice(0,i.pathIndex),{});return s.children[tn]=new bn(n.segments.slice(i.pathIndex),n.children),Kp(s,0,r)}return i.match&&0===r.length?new bn(n.segments,{}):i.match&&!n.hasChildren()?ED(n,e,t):i.match?Kp(n,0,r):ED(n,e,t)}function Kp(n,e,t){if(0===t.length)return new bn(n.segments,{});{const i=function I7(n){return Jv(n[0])?n[0].outlets:{[tn]:n}}(t),r={};if(!i[tn]&&n.children[tn]&&1===n.numberOfChildren&&0===n.children[tn].segments.length){const s=Kp(n.children[tn],e,t);return new bn(n.segments,s.children)}return ss(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=CD(n.children[o],e,s))}),ss(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new bn(n.segments,r)}}function ED(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Jv(s)){const l=P7(s.outlets);return new bn(i,l)}if(0===r&&Qv(t[0])){i.push(new Yv(n.segments[e].path,zN(t[0]))),r++;continue}const o=Jv(s)?s.outlets[tn]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&Qv(a)?(i.push(new Yv(o,zN(a))),r+=2):(i.push(new Yv(o,{})),r++)}return new bn(i,{})}function P7(n){const e={};return ss(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=ED(new bn([],{}),0,t))}),e}function zN(n){const e={};return ss(n,(t,i)=>e[i]=`${t}`),e}function HN(n,e,t){return n==t.path&&Ul(e,t.parameters)}const ey="imperative";class Vl{constructor(e,t){this.id=e,this.url=t}}class AD extends Vl{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class vh extends Vl{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xw extends Vl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class qw extends Vl{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=16}}class TD extends Vl{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class k7 extends Vl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class O7 extends Vl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L7 extends Vl{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class F7 extends Vl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class N7 extends Vl{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class B7{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class U7{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class V7{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z7{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class H7{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class G7{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class GN{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let j7=(()=>{class n{createUrlTree(t,i,r,s,o,a){return A7(t||i.root,r,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),q7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(e){return j7.\u0275fac(e)},providedIn:"root"}),n})();class WN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DD(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=DD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ID(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ID(e,this._root).map(t=>t.value)}}function DD(n,e){if(n===e.value)return e;for(const t of e.children){const i=DD(n,t);if(i)return i}return null}function ID(n,e){if(n===e.value)return[e];for(const t of e.children){const i=ID(n,t);if(i.length)return i.unshift(e),i}return[]}class Fc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Zp(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class $N extends WN{constructor(e,t){super(e),this.snapshot=t,RD(this,e)}toString(){return this.snapshot.toString()}}function jN(n,e){const t=function Y7(n,e){const o=new Yw([],{},{},"",{},tn,e,null,n.root,-1,{});return new qN("",new Fc(o,[]))}(n,e),i=new Ht([new Yv("",{})]),r=new Ht({}),s=new Ht({}),o=new Ht({}),a=new Ht(""),l=new Qp(i,r,o,a,s,tn,e,t.root);return l.snapshot=t.root,new $N(new Fc(l,[]),t)}class Qp{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Ye(c=>c[qv]))??ct(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Ye(e=>Xp(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Ye(e=>Xp(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XN(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function K7(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class Yw{get title(){return this.data?.[qv]}constructor(e,t,i,r,s,o,a,l,c,u,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qN extends WN{constructor(e,t){super(t),this.url=e,RD(this,t)}toString(){return YN(this._root)}}function RD(n,e){e.value._routerState=n,e.children.forEach(t=>RD(n,t))}function YN(n){const e=n.children.length>0?` { ${n.children.map(YN).join(", ")} } `:"";return`${n.value}${e}`}function PD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ul(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ul(e.params,t.params)||n.params.next(t.params),function d7(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ul(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ul(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function kD(n,e){const t=Ul(n.params,e.params)&&function p7(n,e){return gh(n,e)&&n.every((t,i)=>Ul(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||kD(n.parent,e.parent))}function ty(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Q7(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ty(n,i,r);return ty(n,i)})}(n,e,t);return new Fc(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ty(n,a)),o}}const i=function J7(n){return new Qp(new Ht(n.url),new Ht(n.params),new Ht(n.queryParams),new Ht(n.fragment),new Ht(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>ty(n,s));return new Fc(i,r)}}const OD="ngNavigationCancelingError";function KN(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=_h(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=ZN(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function ZN(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[OD]=!0,i.cancellationCode=e,t&&(i.url=t),i}function QN(n){return JN(n)&&_h(n.url)}function JN(n){return n&&n[OD]}class eX{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new ny,this.attachRef=null}}let ny=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new eX,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Kw=!1;let eB=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=tn,this.activateEvents=new st,this.deactivateEvents=new st,this.attachEvents=new st,this.detachEvents=new st,this.parentContexts=Pt(ny),this.location=Pt(is),this.changeDetector=Pt(ai),this.environmentInjector=Pt(Wa)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new fe(4012,Kw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new fe(4012,Kw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new fe(4012,Kw);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new fe(4013,Kw);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new tX(t,a,r.injector);if(i&&function nX(n){return!!n.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Hi]}),n})();class tX{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Qp?this.route:e===ny?this.childContexts:this.parent.get(e,t)}}let LD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["ng-component"]],standalone:!0,features:[g1],decls:1,vars:0,template:function(t,i){1&t&&$e(0,"router-outlet")},dependencies:[eB],encapsulation:2}),n})();function tB(n,e){return n.providers&&!n._injector&&(n._injector=uw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ND(n){const e=n.children&&n.children.map(ND),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==tn&&(t.component=LD),t}function va(n){return n.outlet||tn}function nB(n,e){const t=n.filter(i=>va(i)===e);return t.push(...n.filter(i=>va(i)!==e)),t}function iy(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class aX{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),PD(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Zp(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),ss(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Zp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Zp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Zp(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new G7(s.value.snapshot))}),e.children.length&&this.forwardEvent(new z7(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(PD(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),PD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=iy(r.snapshot),l=a?.get(kl)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class iB{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zw{constructor(e,t){this.component=e,this.route=t}}function lX(n,e,t){const i=n._root;return ry(i,e?e._root:null,t,[i.value])}function Jp(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function Xb(n){return null!==Sf(n)}(n)?e.get(n):n:i}function ry(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Zp(e);return n.children.forEach(o=>{(function dX(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function uX(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!gh(n.url,e.url);case"pathParamsOrQueryParamsChange":return!gh(n.url,e.url)||!Ul(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kD(n,e)||!Ul(n.queryParams,e.queryParams);default:return!kD(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new iB(i)):(s.data=o.data,s._resolvedData=o._resolvedData),ry(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Zw(a.outlet.component,o))}else o&&sy(e,a,r),r.canActivateChecks.push(new iB(i)),ry(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),ss(s,(o,a)=>sy(o,t.getContext(a),r)),r}function sy(n,e,t){const i=Zp(n),r=n.value;ss(i,(s,o)=>{sy(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Zw(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function oy(n){return"function"==typeof n}function BD(n){return n instanceof $v||"EmptyError"===n?.name}const Qw=Symbol("INITIAL_VALUE");function em(){return gs(n=>Ud(n.map(e=>e.pipe(Fi(1),Oo(Qw)))).pipe(Ye(e=>{for(const t of e)if(!0!==t){if(t===Qw)return Qw;if(!1===t||t instanceof Wd)return t}return!0}),Hn(e=>e!==Qw),Fi(1)))}function rB(n){return function YC(...n){return Cb(n)}(Ii(e=>{if(_h(e))throw KN(0,e)}),Ye(e=>!0===e))}const UD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sB(n,e,t,i,r){const s=VD(n,e,t);return s.matched?function TX(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?ct(r.map(o=>{const a=Jp(o,n);return Gd(function _X(n){return n&&oy(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(em(),rB()):ct(!0)}(i=tB(e,i),e,t).pipe(Ye(o=>!0===o?s:{...UD})):ct(s)}function VD(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...UD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||c7)(t,n,e);if(!r)return{...UD};const s={};ss(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Jw(n,e,t,i){if(t.length>0&&function RX(n,e,t){return t.some(i=>eM(n,e,i)&&va(i)!==tn)}(n,t,i)){const s=new bn(e,function IX(n,e,t,i){const r={};r[tn]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&va(s)!==tn){const o=new bn([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[va(s)]=o}return r}(n,e,i,new bn(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function PX(n,e,t){return t.some(i=>eM(n,e,i))}(n,t,i)){const s=new bn(n.segments,function DX(n,e,t,i,r){const s={};for(const o of i)if(eM(n,t,o)&&!r[va(o)]){const a=new bn([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[va(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new bn(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function eM(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function oB(n,e,t,i){return!!(va(n)===i||i!==tn&&eM(e,t,n))&&("**"===n.path||VD(e,n,t).matched)}function aB(n,e,t){return 0===e.length&&!n.children[t]}const tM=!1;class nM{constructor(e){this.segmentGroup=e||null}}class lB{constructor(e){this.urlTree=e}}function ay(n){return jp(new nM(n))}function cB(n){return jp(new lB(n))}class FX{constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Jw(this.urlTree.root,[],[],this.config).segmentGroup,t=new bn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,tn).pipe(Ye(s=>this.createUrlTree(jw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Lc(s=>{if(s instanceof lB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof nM?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,tn).pipe(Ye(r=>this.createUrlTree(jw(r),e.queryParams,e.fragment))).pipe(Lc(r=>{throw r instanceof nM?this.noMatchError(r):r}))}noMatchError(e){return new fe(4002,tM)}createUrlTree(e,t,i){const r=MD(e);return new Wd(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe(Ye(s=>new bn([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return Ri(r).pipe(zd(s=>{const o=i.children[s],a=nB(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Ye(l=>({segment:l,outlet:s})))}),bN((s,o)=>(s[o.outlet]=o.segment,s),{}),xN())}expandSegment(e,t,i,r,s,o){return Ri(i).pipe(zd(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(Lc(c=>{if(c instanceof nM)return ct(null);throw c}))),Vd(a=>!!a),Lc((a,l)=>{if(BD(a))return aB(t,r,s)?ct(new bn([],{})):ay(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return oB(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):ay(t):ay(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?cB(s):this.lineralizeSegments(i,s).pipe(Ji(o=>{const a=new bn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=VD(t,r,s);if(!a)return ay(t);const h=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?cB(h):this.lineralizeSegments(r,h).pipe(Ji(p=>this.expandSegment(e,t,i,p.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=tB(i,e),i.loadChildren?(i._loadedRoutes?ct({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(Ye(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new bn(r,{})))):ct(new bn(r,{}))):sB(t,i,r,e).pipe(gs(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(Ji(u=>{const h=u.injector??e,p=u.routes,{segmentGroup:m,slicedSegments:g}=Jw(t,a,l,p),b=new bn(m.segments,m.children);if(0===g.length&&b.hasChildren())return this.expandChildren(h,p,b).pipe(Ye(x=>new bn(a,x)));if(0===p.length&&0===g.length)return ct(new bn(a,{}));const y=va(i)===s;return this.expandSegment(h,b,p,g,y?tn:s,!0).pipe(Ye(M=>new bn(a.concat(M.segments),M.children)))})):ay(t)))}getChildConfig(e,t,i){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function AX(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?ct(!0):ct(r.map(o=>{const a=Jp(o,n);return Gd(function fX(n){return n&&oy(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(em(),rB())}(e,t,i).pipe(Ji(r=>r?this.configLoader.loadChildren(e,t).pipe(Ii(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function OX(n){return jp(ZN(tM,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[tn])return e.redirectTo,jp(new fe(4e3,tM));r=r.children[tn]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Wd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return ss(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return ss(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new bn(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new fe(4001,tM);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class BX{}class zX{constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Jw(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,tn).pipe(Ye(t=>{if(null===t)return null;const i=new Yw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Fc(i,t),s=new qN(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=XN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return Ri(Object.keys(i.children)).pipe(zd(r=>{const s=i.children[r],o=nB(t,r);return this.processSegmentGroup(e,o,s,r)}),bN((r,s)=>r&&s?(r.push(...s),r):null),wN(r=>null!==r),Uw(null),xN(),Ye(r=>{if(null===r)return null;const s=uB(r);return function HX(n){n.sort((e,t)=>e.value.outlet===tn?-1:t.value.outlet===tn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return Ri(t).pipe(zd(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),Vd(o=>!!o),Lc(o=>{if(BD(o))return aB(i,r,s)?ct([]):ct(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!oB(t,i,r,s))return ct(null);let o;if("**"===t.path){const a=r.length>0?EN(r).parameters:{},l=fB(i)+r.length;o=ct({snapshot:new Yw(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pB(t),va(t),t.component??t._loadedComponent??null,t,hB(i),l,mB(t)),consumedSegments:[],remainingSegments:[]})}else o=sB(i,t,r,e).pipe(Ye(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const h=fB(i)+l.length;return{snapshot:new Yw(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,pB(t),va(t),t.component??t._loadedComponent??null,t,hB(i),h,mB(t)),consumedSegments:l,remainingSegments:c}}));return o.pipe(gs(a=>{if(null===a)return ct(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;e=t._injector??e;const h=t._loadedInjector??e,p=function GX(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:m,slicedSegments:g}=Jw(i,c,u,p.filter(y=>void 0===y.redirectTo));if(0===g.length&&m.hasChildren())return this.processChildren(h,p,m).pipe(Ye(y=>null===y?null:[new Fc(l,y)]));if(0===p.length&&0===g.length)return ct([new Fc(l,[])]);const b=va(t)===s;return this.processSegment(h,p,m,g,b?tn:s).pipe(Ye(y=>null===y?null:[new Fc(l,y)]))}))}}function WX(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function uB(n){const e=[],t=new Set;for(const i of n){if(!WX(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=uB(i.children);e.push(new Fc(i.value,r))}return e.filter(i=>!t.has(i))}function hB(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function fB(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function pB(n){return n.data||{}}function mB(n){return n.resolve||{}}function gB(n){return"string"==typeof n.title||null===n.title}function zD(n){return gs(e=>{const t=n(e);return t?Ri(t).pipe(Ye(()=>e)):ct(e)})}const tm=new ge("ROUTES");let HD=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Pt(GF)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=Gd(t.loadComponent()).pipe(Ye(vB),Ii(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Hd(()=>{this.componentLoaders.delete(t)})),r=new vN(i,()=>new Ve).pipe(yD());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ct({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(Ye(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=CN(l.get(tm,[],Ct.Self|Ct.Optional)));return{routes:c.map(ND),injector:l}}),Hd(()=>{this.childrenLoaders.delete(i)})),o=new vN(s,()=>new Ve).pipe(yD());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return Gd(t()).pipe(Ye(vB),Ji(i=>i instanceof nF||Array.isArray(i)?ct(i):Ri(this.compiler.compileModuleAsync(i))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vB(n){return function QX(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let rM=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Ve,this.configLoader=Pt(HD),this.environmentInjector=Pt(Wa),this.urlSerializer=Pt(Kv),this.rootContexts=Pt(ny),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new U7(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new B7(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Ht({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ey,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Hn(i=>0!==i.id),Ye(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),gs(i=>{let r=!1,s=!1;return ct(i).pipe(Ii(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),gs(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const u="";return this.events.next(new qw(o.id,t.serializeUrl(i.rawUrl),u,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Ds}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return yB(o.source)&&(t.browserUrlTree=o.extractedUrl),ct(o).pipe(gs(u=>{const h=this.transitions?.getValue();return this.events.next(new AD(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?Ds:Promise.resolve(u)}),function NX(n,e,t,i){return gs(r=>function LX(n,e,t,i,r){return new FX(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe(Ye(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Ii(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},i.urlAfterRedirects=u.urlAfterRedirects}),function jX(n,e,t,i,r){return Ji(s=>function VX(n,e,t,i,r,s,o="emptyOnly"){return new zX(n,e,t,i,r,o,s).recognize().pipe(gs(a=>null===a?function UX(n){return new Mn(e=>e.error(n))}(new BX):ct(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(Ye(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Ii(u=>{if(i.targetSnapshot=u.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!u.extras.skipLocationChange){const p=t.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);t.setBrowserUrl(p,u)}t.browserUrlTree=u.urlAfterRedirects}const h=new k7(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:u,extractedUrl:h,source:p,restoredState:m,extras:g}=o,b=new AD(u,this.urlSerializer.serialize(h),p,m);this.events.next(b);const y=jN(h,this.rootComponentType).snapshot;return ct(i={...o,targetSnapshot:y,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new qw(o.id,t.serializeUrl(i.extractedUrl),u,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Ds}}),Ii(o=>{const a=new O7(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Ye(o=>i={...o,guards:lX(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function yX(n,e){return Ji(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?ct({...t,guardsResult:!0}):function bX(n,e,t,i){return Ri(n).pipe(Ji(r=>function EX(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(a=>{const l=iy(e)??r,c=Jp(a,l);return Gd(function gX(n){return n&&oy(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,i):l.runInContext(()=>c(n,e,t,i))).pipe(Vd())})).pipe(em()):ct(!0)}(r.component,r.route,t,e,i)),Vd(r=>!0!==r,!0))}(o,i,r,n).pipe(Ji(a=>a&&function hX(n){return"boolean"==typeof n}(a)?function xX(n,e,t,i){return Ri(e).pipe(zd(r=>jv(function MX(n,e){return null!==n&&e&&e(new V7(n)),ct(!0)}(r.route.parent,i),function wX(n,e){return null!==n&&e&&e(new H7(n)),ct(!0)}(r.route,i),function CX(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function cX(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Xv(()=>ct(o.guards.map(l=>{const c=iy(o.node)??t,u=Jp(l,c);return Gd(function mX(n){return n&&oy(n.canActivateChild)}(u)?u.canActivateChild(i,n):c.runInContext(()=>u(i,n))).pipe(Vd())})).pipe(em())));return ct(s).pipe(em())}(n,r.path,t),function SX(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>Xv(()=>{const o=iy(e)??t,a=Jp(s,o);return Gd(function pX(n){return n&&oy(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Vd())}));return ct(r).pipe(em())}(n,r.route,t))),Vd(r=>!0!==r,!0))}(i,s,n,e):ct(a)),Ye(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Ii(o=>{if(i.guardsResult=o.guardsResult,_h(o.guardsResult))throw KN(0,o.guardsResult);const a=new L7(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Hn(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),zD(o=>{if(o.guards.canActivateChecks.length)return ct(o).pipe(Ii(a=>{const l=new F7(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),gs(a=>{let l=!1;return ct(a).pipe(function XX(n,e){return Ji(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ct(t);let s=0;return Ri(r).pipe(zd(o=>function qX(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!gB(r)&&(s[qv]=r.title),function YX(n,e,t,i){const r=function KX(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return ct({});const s={};return Ri(r).pipe(Ji(o=>function ZX(n,e,t,i){const r=iy(e)??i,s=Jp(n,r);return Gd(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(Vd(),Ii(a=>{s[o]=a}))),bD(1),MN(s),Lc(o=>BD(o)?Ds:jp(o)))}(s,n,e,i).pipe(Ye(o=>(n._resolvedData=o,n.data=XN(n,t).resolve,r&&gB(r)&&(n.data[qv]=r.title),null)))}(o.route,i,n,e)),Ii(()=>s++),bD(1),Ji(o=>s===r.length?ct(t):Ds))})}(t.paramsInheritanceStrategy,this.environmentInjector),Ii({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Ii(a=>{const l=new N7(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),zD(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ii(u=>{l.component=u}),Ye(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Ud(a(o.targetSnapshot.root)).pipe(Uw(),Fi(1))}),zD(()=>this.afterPreactivation()),Ye(o=>{const a=function Z7(n,e,t){const i=ty(n,e._root,t?t._root:void 0);return new $N(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),Ii(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>Ye(i=>(new aX(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),Fi(1),Ii({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new vh(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Hd(()=>{r||s||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Lc(o=>{if(s=!0,JN(o)){QN(o)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new Xw(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),QN(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||yB(i.source)};t.scheduleNavigation(l,ey,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new TD(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(o))}catch(l){i.reject(l)}}return Ds}))}))}cancelNavigationTransition(t,i,r){const s=new Xw(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function yB(n){return n!==ey}let bB=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===tn);return i}getResolvedTitleForRoute(t){return t.data[qv]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(){return Pt(JX)},providedIn:"root"}),n})(),JX=(()=>{class n extends bB{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(Q(uN))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(){return Pt(nq)},providedIn:"root"}),n})();class tq{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let nq=(()=>{class n extends tq{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sM=new ge("",{providedIn:"root",factory:()=>({})});let rq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:function(){return Pt(sq)},providedIn:"root"}),n})(),sq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function oq(n){throw n}function aq(n,e,t){return e.parse("/")}const lq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Lo=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Pt(W$),this.isNgZoneEnabled=!1,this.options=Pt(sM,{optional:!0})||{},this.errorHandler=this.options.errorHandler||oq,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||aq,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Pt(rq),this.routeReuseStrategy=Pt(eq),this.urlCreationStrategy=Pt(q7),this.titleStrategy=Pt(bB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=CN(Pt(tm,{optional:!0})??[]),this.navigationTransitions=Pt(rM),this.urlSerializer=Pt(Kv),this.location=Pt(Fv),this.isNgZoneEnabled=Pt(ft)instanceof ft&&ft.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Wd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jN(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),ey,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,i,t.state)},0)}))}navigateToSyncWithBrowser(t,i,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,i,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(ND),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,u,c??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=_h(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,ey,null,i)}navigate(t,i={skipLocationChange:!1}){return function dq(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new fe(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...lq}:!1===i?{...cq}:i,_h(t))return TN(this.currentUrlTree,t,r);const s=this.parseUrl(t);return TN(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,p)=>{a=h,l=p}),u="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl){const o={...i.extras.state,...this.generateNgRouterState(i.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.go(r,"",s)}}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xB{}let fq=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Hn(t=>t instanceof vh),zd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=uw(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ri(r).pipe(ad())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):ct(null);const s=r.pipe(Ji(o=>null===o?ct(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?Ri([s,this.loader.loadComponent(i)]).pipe(ad()):s})}}return n.\u0275fac=function(t){return new(t||n)(Q(Lo),Q(GF),Q(Wa),Q(xB),Q(HD))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $D=new ge("");let wB=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof AD?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof vh&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof GN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new GN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){qa()},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();var Fo=(()=>((Fo=Fo||{})[Fo.COMPLETE=0]="COMPLETE",Fo[Fo.FAILED=1]="FAILED",Fo[Fo.REDIRECTING=2]="REDIRECTING",Fo))();const nm=!1;function $d(n,e){return{\u0275kind:n,\u0275providers:e}}const jD=new ge("",{providedIn:"root",factory:()=>!1});function SB(){const n=Pt(ki);return e=>{const t=n.get(Wp);if(e!==t.components[0])return;const i=n.get(Lo),r=n.get(CB);1===n.get(XD)&&i.initialNavigation(),n.get(EB,null,Ct.Optional)?.setUpPreloading(),n.get($D,null,Ct.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const CB=new ge(nm?"bootstrap done indicator":"",{factory:()=>new Ve}),XD=new ge(nm?"initial navigation":"",{providedIn:"root",factory:()=>1});function vq(){let n=[];return n=nm?[{provide:wr,multi:!0,useFactory:()=>{const e=Pt(Lo);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function W7(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],$d(1,n)}const EB=new ge(nm?"router preloader":"");function yq(n){return $d(0,[{provide:EB,useExisting:fq},{provide:xB,useExisting:n}])}const ly=!1,AB=new ge(ly?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),bq=[Fv,{provide:Kv,useClass:xD},Lo,ny,{provide:Qp,useFactory:function MB(n){return n.routerState.root},deps:[Lo]},HD,ly?{provide:jD,useValue:!0}:[]];function xq(){return new ZF("Router",Lo)}let TB=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[bq,ly&&i?.enableTracing?vq().\u0275providers:[],{provide:tm,multi:!0,useValue:t},{provide:AB,useFactory:Cq,deps:[[Lo,new Io,new Dl]]},{provide:sM,useValue:i||{}},i?.useHash?{provide:mh,useClass:R6}:{provide:mh,useClass:x2},{provide:$D,useFactory:()=>{const n=Pt(jj),e=Pt(ft),t=Pt(sM),i=Pt(rM),r=Pt(Kv);return t.scrollOffset&&n.setOffset(t.scrollOffset),new wB(r,i,n,e,t)}},i?.preloadingStrategy?yq(i.preloadingStrategy).\u0275providers:[],{provide:ZF,multi:!0,useFactory:xq},i?.initialNavigation?Eq(i):[],[{provide:DB,useFactory:SB},{provide:KF,multi:!0,useExisting:DB}]]}}static forChild(t){return{ngModule:n,providers:[{provide:tm,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(Q(AB,8))},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[LD]}),n})();function Cq(n){if(ly&&n)throw new fe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Eq(n){return["disabled"===n.initialNavigation?$d(3,[{provide:gw,multi:!0,useFactory:()=>{const e=Pt(Lo);return()=>{e.setUpLocationChangeListener()}}},{provide:XD,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?$d(2,[{provide:XD,useValue:0},{provide:gw,multi:!0,deps:[ki],useFactory:e=>{const t=e.get(D6,Promise.resolve());return()=>t.then(()=>new Promise(i=>{const r=e.get(Lo),s=e.get(CB);(function pq(n,e){n.events.pipe(Hn(t=>t instanceof vh||t instanceof Xw||t instanceof TD||t instanceof qw),Ye(t=>t instanceof vh||t instanceof qw?Fo.COMPLETE:t instanceof Xw&&(0===t.code||1===t.code)?Fo.REDIRECTING:Fo.FAILED),Hn(t=>t!==Fo.REDIRECTING),Fi(1)).subscribe(()=>{e()})})(r,()=>{i(!0)}),e.get(rM).afterPreactivation=()=>(i(!0),s.closed?ct(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const DB=new ge(ly?"Router Initializer":""),Tq=[];let Dq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[TB.forRoot(Tq),TB]}),n})();function IB(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function on(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){IB(s,i,r,o,a,"next",l)}function a(l){IB(s,i,r,o,a,"throw",l)}o(void 0)})}}function An(n){return null!=n&&"false"!=`${n}`}function Xs(n,e=0){return function Iq(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}function oM(n){return Array.isArray(n)?n:[n]}function pr(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Nc(n){return n instanceof _t?n.nativeElement:n}const Rq=["addListener","removeListener"],Pq=["addEventListener","removeEventListener"],kq=["on","off"];function ya(n,e,t,i){if(Yt(t)&&(i=t,t=void 0),i)return ya(n,e,t).pipe(vD(i));const[r,s]=function Fq(n){return Yt(n.addEventListener)&&Yt(n.removeEventListener)}(n)?Pq.map(o=>a=>n[o](e,a,t)):function Oq(n){return Yt(n.addListener)&&Yt(n.removeListener)}(n)?Rq.map(RB(n,e)):function Lq(n){return Yt(n.on)&&Yt(n.off)}(n)?kq.map(RB(n,e)):[];if(!r&&kg(n))return Ji(o=>ya(o,e,t))(ar(n));if(!r)throw new TypeError("Invalid event target");return new Mn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function RB(n,e){return t=>i=>n[t](e,i)}class Nq extends cn{constructor(e,t){super()}schedule(e,t=0){return this}}const aM={setInterval(n,e,...t){const{delegate:i}=aM;return i?.setInterval?i.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=aM;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class qD extends Nq{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var i;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,i=0){return aM.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&aM.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,i=!1;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Yr(i,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const cy={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:i}=cy;i&&(e=i.requestAnimationFrame,t=i.cancelAnimationFrame);const r=e(s=>{t=void 0,n(s)});return new cn(()=>t?.(r))},requestAnimationFrame(...n){const{delegate:e}=cy;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=cy;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0},PB={now:()=>(PB.delegate||Date).now(),delegate:void 0};class dy{constructor(e,t=dy.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,i){return new this.schedulerActionCtor(this,e).schedule(i,t)}}dy.now=PB.now;class YD extends dy{constructor(e,t=dy.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}}const kB=new class Uq extends YD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Bq extends qD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=cy.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(cy.cancelAnimationFrame(t),e._scheduled=void 0)}});let KD,Vq=1;const lM={};function OB(n){return n in lM&&(delete lM[n],!0)}const zq={setImmediate(n){const e=Vq++;return lM[e]=!0,KD||(KD=Promise.resolve()),KD.then(()=>OB(e)&&n()),e},clearImmediate(n){OB(n)}},{setImmediate:Hq,clearImmediate:Gq}=zq,cM={setImmediate(...n){const{delegate:e}=cM;return(e?.setImmediate||Hq)(...n)},clearImmediate(n){const{delegate:e}=cM;return(e?.clearImmediate||Gq)(n)},delegate:void 0},ZD=new class $q extends YD{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;e=e||i.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,r){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw r}}}(class Wq extends qD{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,i=0){return null!==i&&i>0?super.requestAsyncId(e,t,i):(e.actions.push(this),e._scheduled||(e._scheduled=cM.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,i=0){var r;if(null!=i?i>0:this.delay>0)return super.recycleAsyncId(e,t,i);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(cM.clearImmediate(t),e._scheduled=void 0)}}),uy=new YD(qD),jq=uy;function dM(n=0,e,t=jq){let i=-1;return null!=e&&(bu(e)?t=e:i=e),new Mn(r=>{let s=function qq(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function uM(n,e=uy){return function Xq(n){return Gn((e,t)=>{let i=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Bn(t,c=>{i=!0,r=c,s||ar(n(c)).subscribe(s=Bn(t,a,l))},()=>{o=!0,(!i||!s||s.closed)&&t.complete()}))})}(()=>dM(n,e))}function dt(n){return Gn((e,t)=>{ar(n).subscribe(Bn(t,()=>t.complete(),ls)),!t.closed&&e.subscribe(t)})}let QD;try{QD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{QD=!1}let im,Ni=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function $j(n){return n===z2}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!QD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(Q(P1))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const LB=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function FB(){if(im)return im;if("object"!=typeof document||!document)return im=new Set(LB),im;let n=document.createElement("input");return im=new Set(LB.filter(e=>(n.setAttribute("type",e),n.type===e))),im}let hy,hM,bh,JD;function yh(n){return function Yq(){if(null==hy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>hy=!0}))}finally{hy=hy||!1}return hy}()?n:!!n.capture}function NB(){if(null==bh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return bh=!1,bh;if("scrollBehavior"in document.documentElement.style)bh=!0;else{const n=Element.prototype.scrollTo;bh=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return bh}function fy(){if("object"!=typeof document||!document)return 0;if(null==hM){const n=document.createElement("div"),e=n.style;n.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),i=t.style;i.width="2px",i.height="1px",n.appendChild(t),document.body.appendChild(n),hM=0,0===n.scrollLeft&&(n.scrollLeft=1,hM=0===n.scrollLeft?1:2),n.remove()}return hM}function fM(){let n=typeof document<"u"&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const e=n.shadowRoot.activeElement;if(e===n)break;n=e}return n}function jd(n){return n.composedPath?n.composedPath()[0]:n.target}function eI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Qq=new ge("cdk-dir-doc",{providedIn:"root",factory:function Jq(){return Pt(Ut)}}),eY=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let el=(()=>{class n{constructor(t){this.value="ltr",this.change=new st,t&&(this.value=function tY(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?eY.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(Q(Qq,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),py=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();const nY=["contentWrapper"],iY=["*"],rY=new ge("VIRTUAL_SCROLL_STRATEGY");let my=(()=>{class n{constructor(t,i,r){this._ngZone=t,this._platform=i,this._scrolled=new Ve,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const i=this.scrollContainers.get(t);i&&(i.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Mn(i=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(uM(t)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ct()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(t,i){const r=this.getAncestorScrollContainers(t);return this.scrolled(i).pipe(Hn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,i){let r=Nc(i),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ya(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(Q(ft),Q(Ni),Q(Ut,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BB=(()=>{class n{constructor(t,i,r,s){this.elementRef=t,this.scrollDispatcher=i,this.ngZone=r,this.dir=s,this._destroyed=new Ve,this._elementScrolled=new Mn(o=>this.ngZone.runOutsideAngular(()=>ya(this.elementRef.nativeElement,"scroll").pipe(dt(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const i=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=i.scrollHeight-i.clientHeight-t.bottom),r&&0!=fy()?(null!=t.left&&(t.right=i.scrollWidth-i.clientWidth-t.left),2==fy()?t.left=t.right:1==fy()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=i.scrollWidth-i.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const i=this.elementRef.nativeElement;NB()?i.scrollTo(t):(null!=t.top&&(i.scrollTop=t.top),null!=t.left&&(i.scrollLeft=t.left))}measureScrollOffset(t){const i="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==t?t=o?r:i:"end"==t&&(t=o?i:r),o&&2==fy()?t==i?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==fy()?t==i?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==i?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(my),D(ft),D(el,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),n})(),pM=(()=>{class n{constructor(t,i,r){this._platform=t,this._change=new Ve,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,i=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(uM(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(Q(Ni),Q(ft),Q(Ut,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const UB=new ge("VIRTUAL_SCROLLABLE");let aY=(()=>{class n extends BB{constructor(t,i,r,s){super(t,i,r,s)}measureViewportSize(t){const i=this.elementRef.nativeElement;return"horizontal"===t?i.clientWidth:i.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(my),D(ft),D(el,8))},n.\u0275dir=Ae({type:n,features:[ht]}),n})();const cY=typeof requestAnimationFrame<"u"?kB:ZD;let dY=(()=>{class n extends aY{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=An(t)}constructor(t,i,r,s,o,a,l,c){super(t,a,r,o),this.elementRef=t,this._changeDetectorRef=i,this._scrollStrategy=s,this.scrollable=c,this._platform=Pt(Ni),this._detachedSubject=new Ve,this._renderedRangeSubject=new Ve,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Mn(u=>this._scrollStrategy.scrolledIndexChange.subscribe(h=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(h))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=cn.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Oo(null),uM(0,cY)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(dt(this._detachedSubject)).subscribe(i=>{const r=i.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function lY(n,e){return n.start==e.start&&n.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,i="to-start"){t=this.appendOnly&&"to-start"===i?0:t;const s="horizontal"==this.orientation,o=s?"X":"Y";let l=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===i&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,i="auto"){const r={behavior:i};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,i="auto"){this._scrollStrategy.scrollToIndex(t,i)}measureScrollOffset(t){let i;return i=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,i(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let i;const r="left",s="right",o="rtl"==this.dir?.value;i="start"==t?o?s:r:"end"==t?o?r:s:t||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(i);return this.elementRef.nativeElement.getBoundingClientRect()[i]-a}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const i of t)i()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ai),D(ft),D(rY,8),D(el,8),D(my),D(pM),D(UB,8))},n.\u0275cmp=bt({type:n,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,i){if(1&t&&oi(nY,7),2&t){let r;kt(r=Ot())&&(i._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,i){2&t&&Pn("cdk-virtual-scroll-orientation-horizontal","horizontal"===i.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==i.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[zn([{provide:BB,useFactory:(e,t)=>e||t,deps:[[new Io,new tp(UB)],n]}]),ht,g1],ngContentSelectors:iY,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,i){1&t&&(Sr(),Z(0,"div",0,1),Xt(2),se(),$e(3,"div",2)),2&t&&(q(3),Dc("width",i._totalContentWidth)("height",i._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),n})(),gy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})(),VB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[py,gy,dY,py,gy]}),n})();class tI{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class rm extends tI{constructor(e,t,i,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}}class sm extends tI{constructor(e,t,i,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class uY extends tI{constructor(e){super(),this.element=e instanceof _t?e.nativeElement:e}}class mM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof rm?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof sm?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof uY?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class hY extends mM{constructor(e,t,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||ki.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,i=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(i);-1!==r&&t.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let om=(()=>{class n extends mM{constructor(t,i,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new st,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const i=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=i.createComponent(s,i.length,t.injector||i.injector,t.projectableNodes||void 0);return i!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return n.\u0275fac=function(t){return new(t||n)(D(kl),D(is),D(Ut))},n.\u0275dir=Ae({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ht]}),n})(),am=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();function tl(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}const zB=NB();class EY{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=pr(-this._previousScrollPosition.left),e.style.top=pr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,i=e.style,r=this._document.body.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),zB&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),zB&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,i=this._viewportRuler.getViewportSize();return t.scrollHeight>i.height||t.scrollWidth>i.width}}class AY{constructor(e,t,i,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Hn(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class HB{enable(){}disable(){}attach(){}}function iI(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function GB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class TY{constructor(e,t,i,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();iI(t,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let DY=(()=>{class n{constructor(t,i,r,s){this._scrollDispatcher=t,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new HB,this.close=o=>new AY(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new EY(this._viewportRuler,this._document),this.reposition=o=>new TY(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(Q(my),Q(pM),Q(ft),Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class vy{constructor(e){if(this.scrollStrategy=new HB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const i of t)void 0!==e[i]&&(this[i]=e[i])}}}class IY{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let WB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const i=this._attachedOverlays.indexOf(t);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RY=(()=>{class n extends WB{constructor(t,i){super(t),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut),Q(ft,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),PY=(()=>{class n extends WB{constructor(t,i,r){super(t),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=jd(s)},this._clickListener=s=>{const o=jd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(t){if(super.add(t),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut),Q(Ni),Q(ft,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bM=(()=>{class n{constructor(t,i){this._platform=i,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||eI()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(t),eI()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut),Q(Ni))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yy{constructor(e,t,i,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=t,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Ve,this._attachments=new Ve,this._detachments=new Ve,this._locationChanges=cn.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Ve,this._outsidePointerEvents=new Ve,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=pr(this._config.width),e.height=pr(this._config.height),e.minWidth=pr(this._config.minWidth),e.minHeight=pr(this._config.minHeight),e.maxWidth=pr(this._config.maxWidth),e.maxHeight=pr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,i){const r=oM(t||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(dt(cs(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const $B="cdk-overlay-connected-position-bounding-box",kY=/([A-Za-z%]+)$/;class OY{get positions(){return this._preferredPositions}constructor(e,t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Ve,this._resizeSubscription=cn.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add($B),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),u=this._getOverlayFit(c,t,i,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,i)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&xh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove($B),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,i){let r,s;if("center"==i.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==i.originX?o:a}return t.left<0&&(r-=t.left),s="center"==i.originY?e.top+e.height/2:"top"==i.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,i){let r,s;return r="center"==i.overlayX?-t.width/2:"start"===i.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==i.overlayY?-t.height/2:"top"==i.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,i,r){const s=XB(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-i.height,g=this._subtractOverflows(s.width,0-o,o+s.width-i.width),b=this._subtractOverflows(s.height,p,m),y=g*b;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:g==s.width}}_canFitWithFlexibleDimensions(e,t,i){if(this._hasFlexibleDimensions){const r=i.bottom-t.y,s=i.right-t.x,o=jB(this._overlayRef.getConfig().minHeight),a=jB(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(e,t,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=XB(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0);let u=0,h=0;return u=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-i.left-e.x:0,h=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:h},{x:e.x+u,y:e.y+h}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new IY(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=e.overlayY;i="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,t){const i=this._viewportRect,r=this._isRtl();let s,o,a,u,h,p;if("top"===t.overlayY)o=e.y,s=i.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=i.height-e.y+2*this._viewportMargin,s=i.height-a+this._viewportMargin;else{const m=Math.min(i.bottom-e.y+i.top,e.y),g=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>g&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-g/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)h=e.x,u=i.right-e.x;else{const m=Math.min(i.right-e.x+i.left,e.x),g=this._lastBoundingBoxSize.width;u=2*m,h=e.x-m,u>g&&!this._isInitialRender&&!this._growAfterOpen&&(h=e.x-g/2)}return{top:o,left:h,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(e,t){const i=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=pr(i.height),r.top=pr(i.top),r.bottom=pr(i.bottom),r.width=pr(i.width),r.left=pr(i.left),r.right=pr(i.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=pr(s)),o&&(r.maxWidth=pr(o))}this._lastBoundingBoxSize=i,xh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){xh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){xh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();xh(i,this._getExactOverlayY(t,e,u)),xh(i,this._getExactOverlayX(t,e,u))}else i.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=pr(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=pr(o.maxWidth):s&&(i.maxWidth="")),xh(this._pane.style,i)}_getExactOverlayY(e,t,i){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=pr(s.y),r}_getExactOverlayX(e,t,i){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=pr(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GB(e,i),isOriginOutsideView:iI(e,i),isOverlayClipped:GB(t,i),isOverlayOutsideView:iI(t,i)}}_subtractOverflows(e,...t){return t.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&oM(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof _t)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+t,height:i,width:t}}}function xh(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function jB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(kY);return t&&"px"!==t?null:parseFloat(e)}return n||null}function XB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const qB="cdk-global-overlay-wrapper";class LY{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(qB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",g="",b="";l?b="flex-start":"center"===u?(b="center",p?g=h:m=h):p?"left"===u||"end"===u?(b="flex-end",m=h):("right"===u||"start"===u)&&(b="flex-start",g=h):"left"===u||"start"===u?(b="flex-start",m=h):("right"===u||"end"===u)&&(b="flex-end",g=h),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":g,t.justifyContent=b,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,i=t.style;t.classList.remove(qB),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let FY=(()=>{class n{constructor(t,i,r,s){this._viewportRuler=t,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new LY}flexibleConnectedTo(t){return new OY(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(Q(pM),Q(Ut),Q(Ni),Q(bM))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),NY=0,fo=(()=>{class n{constructor(t,i,r,s,o,a,l,c,u,h,p,m){this.scrollStrategies=t,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(t){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),o=new vy(t);return o.direction=o.direction||this._directionality.value,new yy(s,i,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const i=this._document.createElement("div");return i.id="cdk-overlay-"+NY++,i.classList.add("cdk-overlay-pane"),t.appendChild(i),i}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Wp)),new hY(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(Q(DY),Q(bM),Q(kl),Q(FY),Q(RY),Q(ki),Q(ft),Q(Ut),Q(el),Q(Fv),Q(PY),Q(rs,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const BY=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],YB=new ge("cdk-connected-overlay-scroll-strategy");let rI=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(D(_t))},n.\u0275dir=Ae({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),n})(),KB=(()=>{class n{get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=An(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=An(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=An(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=An(t)}get push(){return this._push}set push(t){this._push=An(t)}constructor(t,i,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=cn.EMPTY,this._attachSubscription=cn.EMPTY,this._detachSubscription=cn.EMPTY,this._positionSubscription=cn.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new st,this.positionChange=new st,this.attach=new st,this.detach=new st,this.overlayKeydown=new st,this.overlayOutsideClick=new st,this._templatePortal=new sm(i,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=BY);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(i=>{this.overlayKeydown.next(i),27===i.keyCode&&!this.disableClose&&!tl(i)&&(i.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(i=>{this.overlayOutsideClick.next(i)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),i=new vy({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(i.width=this.width),(this.height||0===this.height)&&(i.height=this.height),(this.minWidth||0===this.minWidth)&&(i.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(i.minHeight=this.minHeight),this.backdropClass&&(i.backdropClass=this.backdropClass),this.panelClass&&(i.panelClass=this.panelClass),i}_updatePositionStrategy(t){const i=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(i).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof rI?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(wN(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(D(fo),D(uo),D(is),D(YB),D(el,8))},n.\u0275dir=Ae({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Hi]}),n})();const VY={provide:YB,deps:[fo],useFactory:function UY(n){return()=>n.scrollStrategies.reposition()}};let dm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[fo,VY],imports:[py,am,VB,VB]}),n})();function um(n,e=uy){return Gn((t,i)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,i.next(c)}};function l(){const c=o+n,u=e.now();if(u<c)return r=this.schedule(void 0,c-u),void i.add(r);a()}t.subscribe(Bn(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,n),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function ZB(n){return Hn((e,t)=>n<=t)}function wh(n,e=Ra){return n=n??zY,Gn((t,i)=>{let r,s=!0;t.subscribe(Bn(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}function zY(n,e){return n===e}let QB=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HY=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,i)=>this._cleanupObserver(i))}observe(t){const i=Nc(t);return new Mn(r=>{const o=this._observeElement(i).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(i)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const i=new Ve,r=this._mutationObserverFactory.create(s=>i.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:i,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:i,stream:r}=this._observedElements.get(t);i&&i.disconnect(),r.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(Q(QB))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),JB=(()=>{class n{get disabled(){return this._disabled}set disabled(t){this._disabled=An(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Xs(t),this._subscribe()}constructor(t,i,r){this._contentObserver=t,this._elementRef=i,this._ngZone=r,this.event=new st,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(um(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(D(HY),D(_t),D(ft))},n.\u0275dir=Ae({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),sI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[QB]}),n})();const e3=new Set;let hm,GY=(()=>{class n{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):$Y}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function WY(n){if(!e3.has(n))try{hm||(hm=document.createElement("style"),hm.setAttribute("type","text/css"),document.head.appendChild(hm)),hm.sheet&&(hm.sheet.insertRule(`@media ${n} {body{ }}`,0),e3.add(n))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(Q(Ni))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $Y(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let oI=(()=>{class n{constructor(t,i){this._mediaMatcher=t,this._zone=i,this._queries=new Map,this._destroySubject=new Ve}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return t3(oM(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=Ud(t3(oM(t)).map(o=>this._registerQuery(o).observable));return s=jv(s.pipe(Fi(1)),s.pipe(ZB(1),um(0))),s.pipe(Ye(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const i=this._mediaMatcher.matchMedia(t),s={observable:new Mn(o=>{const a=l=>this._zone.run(()=>o.next(l));return i.addListener(a),()=>{i.removeListener(a)}}).pipe(Oo(i),Ye(({matches:o})=>({query:t,matches:o})),dt(this._destroySubject)),mql:i};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(Q(GY),Q(ft))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function t3(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function xM(n,e){return(n.getAttribute(e)||"").match(/\S+/g)||[]}const r3="cdk-describedby-message",wM="cdk-describedby-host";let aI=0,YY=(()=>{class n{constructor(t,i){this._platform=i,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+aI++,this._document=t,this._id=Pt(Gp)+"-"+aI++}describe(t,i,r){if(!this._canBeDescribed(t,i))return;const s=lI(i,r);"string"!=typeof i?(s3(i,this._id),this._messageRegistry.set(s,{messageElement:i,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(i,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,i,r){if(!i||!this._isElementNode(t))return;const s=lI(i,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof i){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${wM}="${this._id}"]`);for(let i=0;i<t.length;i++)this._removeCdkDescribedByReferenceIds(t[i]),t[i].removeAttribute(wM);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,i){const r=this._document.createElement("div");s3(r,this._id),r.textContent=t,i&&r.setAttribute("role",i),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(lI(t,i),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",i=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<i.length;s++)i[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const i=xM(t,"aria-describedby").filter(r=>0!=r.indexOf(r3));t.setAttribute("aria-describedby",i.join(" "))}_addMessageReference(t,i){const r=this._messageRegistry.get(i);(function XY(n,e,t){const i=xM(n,e);i.some(r=>r.trim()==t.trim())||(i.push(t.trim()),n.setAttribute(e,i.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(wM,this._id),r.referenceCount++}_removeMessageReference(t,i){const r=this._messageRegistry.get(i);r.referenceCount--,function qY(n,e,t){const r=xM(n,e).filter(s=>s!=t.trim());r.length?n.setAttribute(e,r.join(" ")):n.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(wM)}_isElementDescribedByMessage(t,i){const r=xM(t,"aria-describedby"),s=this._messageRegistry.get(i),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,i){if(!this._isElementNode(t))return!1;if(i&&"object"==typeof i)return!0;const r=null==i?"":`${i}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut),Q(Ni))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lI(n,e){return"string"==typeof n?`${e||""}/${n}`:n}function s3(n,e){n.id||(n.id=`${r3}-${e}-${aI++}`)}class o3{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Ve,this._typeaheadSubscription=cn.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Ve,this.change=new Ve,e instanceof Vp&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ii(t=>this._pressedLetters.push(t)),um(e),Hn(()=>this._pressedLetters.length>0),Ye(()=>this._pressedLetters.join(""))).subscribe(t=>{const i=this._getItemsArray();for(let r=1;r<i.length+1;r++){const s=(this._activeItemIndex+r)%i.length,o=i[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||tl(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),i="number"==typeof e?e:t.indexOf(e);this._activeItem=t[i]??null,this._activeItemIndex=i}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let i=1;i<=t.length;i++){const r=(this._activeItemIndex+e*i+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const i=this._getItemsArray();if(i[e]){for(;this._skipPredicateFn(i[e]);)if(!i[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Vp?this._items.toArray():this._items}}class KY extends o3{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class a3 extends o3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let MM=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function QY(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function ZY(n){try{return n.frameElement}catch{return null}}(function oK(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===c3(i)||!this.isVisible(i)))return!1;let r=t.nodeName.toLowerCase(),s=c3(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function rK(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function sK(n){return!function eK(n){return function nK(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function JY(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function tK(n){return function iK(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||l3(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(Q(Ni))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function l3(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function c3(n){if(!l3(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class aK{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,i,r,s=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const r=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Fi(1)).subscribe(e)}}let cI=(()=>{class n{constructor(t,i,r){this._checker=t,this._ngZone=i,this._document=r}create(t,i=!1){return new aK(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(Q(MM),Q(ft),Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dI(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function uI(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const lK=new ge("cdk-input-modality-detector-options"),cK={ignoreKeys:[18,17,224,91,16]},fm=yh({passive:!0,capture:!0});let dK=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,i,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Ht(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=jd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(dI(o)?"keyboard":"mouse"),this._mostRecentTarget=jd(o))},this._onTouchstart=o=>{uI(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=jd(o))},this._options={...cK,...s},this.modalityDetected=this._modality.pipe(ZB(1)),this.modalityChanged=this.modalityDetected.pipe(wh()),t.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,fm),r.addEventListener("mousedown",this._onMousedown,fm),r.addEventListener("touchstart",this._onTouchstart,fm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fm),document.removeEventListener("mousedown",this._onMousedown,fm),document.removeEventListener("touchstart",this._onTouchstart,fm))}}return n.\u0275fac=function(t){return new(t||n)(Q(Ni),Q(ft),Q(Ut),Q(lK,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const uK=new ge("liveAnnouncerElement",{providedIn:"root",factory:function hK(){return null}}),fK=new ge("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let pK=0,hI=(()=>{class n{constructor(t,i,r,s){this._ngZone=i,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...i){const r=this._defaultOptions;let s,o;return 1===i.length&&"number"==typeof i[0]?o=i[0]:[s,o]=i,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",i=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<i.length;s++)i[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+pK++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(t){const i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(t)&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}}return n.\u0275fac=function(t){return new(t||n)(Q(uK,8),Q(ft),Q(Ut),Q(fK,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mK=new ge("cdk-focus-monitor-default-options"),SM=yh({passive:!0,capture:!0});let Xd=(()=>{class n{constructor(t,i,r,s,o){this._ngZone=t,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Ve,this._rootNodeFocusAndBlurListener=a=>{for(let c=jd(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,i=!1){const r=Nc(t);if(!this._platform.isBrowser||1!==r.nodeType)return ct(null);const s=function Zq(n){if(function Kq(){if(null==JD){const n=typeof document<"u"?document.head:null;JD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return JD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return i&&(o.checkChildren=!0),o.subject;const a={checkChildren:i,subject:new Ve,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const i=Nc(t),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(t,i,r){const s=Nc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,i,l)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const r=this._elementInfo.get(i),s=jd(t);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(t,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(r,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,SM),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,SM)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,SM),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,SM),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,r){this._setClasses(t,i),this._emitOrigin(r,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&i.push([s,r])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(Q(ft),Q(Ni),Q(dK),Q(Ut,8),Q(mK,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const u3="cdk-high-contrast-black-on-white",h3="cdk-high-contrast-white-on-black",fI="cdk-high-contrast-active";let f3=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=Pt(oI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(fI,u3,h3),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add(fI,u3):2===i&&t.add(fI,h3)}}}return n.\u0275fac=function(t){return new(t||n)(Q(Ni),Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),p3=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(Q(f3))},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[sI]}),n})();function gK(n,e){}class CM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let m3=(()=>{class n extends mM{constructor(t,i,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=i,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),i}attachTemplatePortal(t){this._portalOutlet.hasAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),i}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,i){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(i)}_focusByCssSelector(t,i){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,i)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let i=null;if("string"==typeof t?i=this._document.querySelector(t):"boolean"==typeof t?i=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(i=t),this._config.restoreFocus&&i&&"function"==typeof i.focus){const r=fM(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(i,this._closeInteractionType),this._closeInteractionType=null):i.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,i=fM();return t===i||t.contains(i)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=fM())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(cI),D(Ut,8),D(CM),D(MM),D(ft),D(yy),D(Xd))},n.\u0275cmp=bt({type:n,selectors:[["cdk-dialog-container"]],viewQuery:function(t,i){if(1&t&&oi(om,7),2&t){let r;kt(r=Ot())&&(i._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,i){2&t&&Bt("id",i._config.id||null)("role",i._config.role)("aria-modal",i._config.ariaModal)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null)},features:[ht],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,i){1&t&&ye(0,gK,0,0,"ng-template",0)},dependencies:[om],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),n})();class pI{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new Ve,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(i=>{27===i.keyCode&&!this.disableClose&&!tl(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const i=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const g3=new ge("DialogScrollStrategy"),_K=new ge("DialogData"),vK=new ge("DefaultDialogConfig"),bK={provide:g3,deps:[fo],useFactory:function yK(n){return()=>n.scrollStrategies.block()}};let xK=0,_3=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,i,r,s,o,a){this._overlay=t,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ve,this._afterOpenedAtThisLevel=new Ve,this._ariaHiddenElements=new Map,this.afterAllClosed=Xv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Oo(void 0))),this._scrollStrategy=a}open(t,i){(i={...this._defaultOptions||new CM,...i}).id=i.id||"cdk-dialog-"+xK++,i.id&&this.getDialogById(i.id);const s=this._getOverlayConfig(i),o=this._overlay.create(s),a=new pI(o,i),l=this._attachContainer(o,a,i);return a.containerInstance=l,this._attachDialogContent(t,a,l,i),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){mI(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){mI(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),mI(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const i=new vy({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(i.backdropClass=t.backdropClass),i}_attachContainer(t,i,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:CM,useValue:r},{provide:pI,useValue:i},{provide:yy,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=m3;const l=new rm(a,r.viewContainerRef,ki.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,i,r,s){if(t instanceof uo){const o=this._createInjector(s,i,r,void 0);let a={$implicit:s.data,dialogRef:i};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new sm(t,null,a,o))}else{const o=this._createInjector(s,i,r,this._injector),a=r.attachComponentPortal(new rm(t,s.viewContainerRef,o,s.componentFactoryResolver));i.componentInstance=a.instance}}_createInjector(t,i,r,s){const o=t.injector||t.viewContainerRef?.injector,a=[{provide:_K,useValue:t.data},{provide:pI,useValue:i}];return t.providers&&("function"==typeof t.providers?a.push(...t.providers(i,t,r)):a.push(...t.providers)),t.direction&&(!o||!o.get(el,null,{optional:!0}))&&a.push({provide:el,useValue:{value:t.direction,change:ct()}}),ki.create({parent:o||s,providers:a})}_removeOpenDialog(t,i){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),i&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const i=t.parentElement.children;for(let r=i.length-1;r>-1;r--){const s=i[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return n.\u0275fac=function(t){return new(t||n)(Q(fo),Q(ki),Q(vK,8),Q(n,12),Q(bM),Q(g3))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();function mI(n,e){let t=n.length;for(;t--;)e(n[t])}let wK=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[_3,bK],imports:[dm,am,p3,am]}),n})();const MK=["text"];function SK(n,e){if(1&n&&$e(0,"mat-pseudo-checkbox",6),2&n){const t=Me();$("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function CK(n,e){1&n&&$e(0,"mat-pseudo-checkbox",7),2&n&&$("disabled",Me().disabled)}function EK(n,e){if(1&n&&(Z(0,"span",8),it(1),se()),2&n){const t=Me();q(1),Er("(",t.group.label,")")}}const AK=[[["mat-icon"]],"*"],TK=["mat-icon","*"],IK=new ge("mat-sanity-checks",{providedIn:"root",factory:function DK(){return!0}});let qn=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!eI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(Q(f3),Q(IK,8),Q(Ut))},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[py,py]}),n})();function EM(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=An(e)}constructor(...e){super(...e),this._disabled=!1}}}function AM(n,e){return class extends n{get color(){return this._color}set color(t){const i=t||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function gI(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=An(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function b3(n,e=0){return class extends n{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Xs(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}function x3(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}function RK(n){return class extends n{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Mn(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}let w3=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class kK{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const M3=yh({passive:!0,capture:!0});class OK{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=jd(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){const s=this._events.get(t);if(s){const o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,M3)})}removeHandler(e,t,i){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(i),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,M3)))}}const S3={enterDuration:225,exitDuration:150},C3=yh({passive:!0,capture:!0}),E3=["mousedown","touchstart"],A3=["mouseup","mouseleave","touchend","touchcancel"];class pm{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Nc(i))}fadeInRipple(e,t,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...S3,...i.animation};i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=i.radius||function FK(n,e,t){const i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=i.color&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),m=h.transitionDuration,g="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,b=new kK(this,u,i,g);u.style.transform="scale3d(1, 1, 1)",b.state=0,i.persistent||(this._mostRecentTransientRipple=b);let y=null;return!g&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(b),M=()=>this._destroyRipple(b);u.addEventListener("transitionend",v),u.addEventListener("transitioncancel",M),y={onTransitionEnd:v,onTransitionCancel:M}}),this._activeRipples.set(b,y),(g||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,i={...S3,...e.config.animation};t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Nc(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,E3.forEach(i=>{pm._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{A3.forEach(t=>{this._triggerElement.addEventListener(t,this,C3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=dI(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!uI(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(E3.forEach(t=>pm._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&A3.forEach(t=>e.removeEventListener(t,this,C3)))}}pm._eventManager=new OK;const _I=new ge("mat-ripple-global-options");let xy=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,i,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new pm(this,i,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,i=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,i,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft),D(Ni),D(_I,8),D(rs,8))},n.\u0275dir=Ae({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,i){2&t&&Pn("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),TM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,qn]}),n})(),NK=(()=>{class n{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return n.\u0275fac=function(t){return new(t||n)(D(rs,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(t,i){2&t&&Pn("mat-pseudo-checkbox-indeterminate","indeterminate"===i.state)("mat-pseudo-checkbox-checked","checked"===i.state)("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal","minimal"===i.appearance)("mat-pseudo-checkbox-full","full"===i.appearance)("_mat-animation-noopable","NoopAnimations"===i._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(t,i){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),n})(),T3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn]}),n})();const D3=new ge("MAT_OPTION_PARENT_COMPONENT"),I3=new ge("MatOptgroup");let BK=0;class UK{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let VK=(()=>{class n{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=An(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(t,i,r,s){this._element=t,this._changeDetectorRef=i,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+BK++,this.onSelectionChange=new st,this._stateChanges=new Ve}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,i){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(i)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!tl(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=t)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new UK(this,t))}}return n.\u0275fac=function(t){qa()},n.\u0275dir=Ae({type:n,viewQuery:function(t,i){if(1&t&&oi(MK,7),2&t){let r;kt(r=Ot())&&(i._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),mm=(()=>{class n extends VK{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ai),D(D3,8),D(I3,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(t,i){1&t&&ot("click",function(){return i._selectViaInteraction()})("keydown",function(s){return i._handleKeydown(s)}),2&t&&(Ld("id",i.id),Bt("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),Pn("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},exportAs:["matOption"],features:[ht],ngContentSelectors:TK,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(t,i){1&t&&(Sr(AK),ye(0,SK,1,2,"mat-pseudo-checkbox",0),Xt(1),Z(2,"span",1,2),Xt(4,1),se(),ye(5,CK,1,1,"mat-pseudo-checkbox",3),ye(6,EK,2,1,"span",4),$e(7,"div",5)),2&t&&($("ngIf",i.multiple),q(5),$("ngIf",!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator),q(1),$("ngIf",i.group&&i.group._inert),q(1),$("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[xy,Di,NK],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),n})(),vI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[TM,_a,qn,T3]}),n})();class R3{}class GK{}const Bc="*";function zl(n,e){return{type:7,name:n,definitions:e,options:{}}}function po(n,e=null){return{type:4,styles:e,timings:n}}function k3(n,e=null){return{type:2,steps:n,options:e}}function Si(n){return{type:6,styles:n,offset:null}}function mo(n,e,t){return{type:0,name:n,styles:e,options:t}}function qs(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function yI(n=null){return{type:9,options:n}}function bI(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function O3(n){Promise.resolve().then(n)}class wy{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){O3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class L3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?O3(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const xI="!";function WK(n,e){}class DM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const wI="mdc-dialog--open",F3="mdc-dialog--opening",N3="mdc-dialog--closing";let XK=(()=>{class n extends m3{constructor(t,i,r,s,o,a,l,c){super(t,i,r,s,o,a,l,c),this._animationStateChanged=new st}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(cI),D(Ut,8),D(DM),D(MM),D(ft),D(yy),D(Xd))},n.\u0275cmp=bt({type:n,selectors:[["ng-component"]],features:[ht],decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();const B3="--mat-dialog-transition-duration";function U3(n){return null==n?null:"number"==typeof n?n:n.endsWith("ms")?Xs(n.substring(0,n.length-2)):n.endsWith("s")?1e3*Xs(n.substring(0,n.length-1)):"0"===n?0:null}let qK=(()=>{class n extends XK{constructor(t,i,r,s,o,a,l,c,u){super(t,i,r,s,o,a,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?U3(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?U3(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(B3,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(F3,wI)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(wI),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(wI),this._animationsEnabled?(this._hostElement.style.setProperty(B3,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(N3)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(F3,N3)}_waitForAnimationToComplete(t,i){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(i,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(cI),D(Ut,8),D(DM),D(MM),D(ft),D(yy),D(rs,8),D(Xd))},n.\u0275cmp=bt({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,i){2&t&&(Ld("id",i._config.id),Bt("aria-modal",i._config.ariaModal)("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),Pn("_mat-animation-noopable",!i._animationsEnabled))},features:[ht],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1),ye(2,WK,0,0,"ng-template",2),se()())},dependencies:[om],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),n})();class My{constructor(e,t,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Ve,this._beforeClosed=new Ve,this._state=0,this.disableClose=t.disableClose,this.id=e.id,i._animationStateChanged.pipe(Hn(r=>"opened"===r.state),Fi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Hn(r=>"closed"===r.state),Fi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),cs(this.backdropClick(),this.keydownEvents().pipe(Hn(r=>27===r.keyCode&&!this.disableClose&&!tl(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),V3(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Hn(t=>"closing"===t.state),Fi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function V3(n,e,t){return n._closeInteractionType=e,n.close(t)}const MI=new ge("MatMdcDialogData"),YK=new ge("mat-mdc-dialog-default-options"),z3=new ge("mat-mdc-dialog-scroll-strategy"),ZK={provide:z3,deps:[fo],useFactory:function KK(n){return()=>n.scrollStrategies.block()}};let QK=0,JK=(()=>{class n{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,i,r,s,o,a,l,c,u,h){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Ve,this._afterOpenedAtThisLevel=new Ve,this._idPrefix="mat-dialog-",this.dialogConfigClass=DM,this.afterAllClosed=Xv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Oo(void 0))),this._scrollStrategy=a,this._dialog=i.get(_3)}open(t,i){let r;(i={...this._defaultOptions||new DM,...i}).id=i.id||`${this._idPrefix}${QK++}`,i.scrollStrategy=i.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...i,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:i},{provide:CM,useValue:i}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,i,l),r.updatePosition(i?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(i=>i.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let i=t.length;for(;i--;)t[i].close()}}return n.\u0275fac=function(t){qa()},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),IM=(()=>{class n extends JK{constructor(t,i,r,s,o,a,l,c){super(t,i,s,a,l,o,My,qK,MI,c),this._idPrefix="mat-mdc-dialog-"}}return n.\u0275fac=function(t){return new(t||n)(Q(fo),Q(ki),Q(Fv,8),Q(YK,8),Q(z3),Q(n,12),Q(bM),Q(rs,8))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),eZ=0,tZ=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this._elementRef=i,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=$3(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const i=t._matDialogClose||t._matDialogCloseResult;i&&(this.dialogResult=i.currentValue)}_onButtonClick(t){V3(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(t){return new(t||n)(D(My,8),D(_t),D(IM))},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,i){1&t&&ot("click",function(s){return i._onButtonClick(s)}),2&t&&Bt("aria-label",i.ariaLabel||null)("type",i.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Hi]}),n})(),H3=(()=>{class n{constructor(t,i,r){this._dialogRef=t,this._elementRef=i,this._dialog=r,this.id="mat-mdc-dialog-title-"+eZ++}ngOnInit(){this._dialogRef||(this._dialogRef=$3(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(t){return new(t||n)(D(My,8),D(_t),D(IM))},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,i){2&t&&Ld("id",i.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),G3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),n})(),W3=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(t,i){2&t&&Pn("mat-mdc-dialog-actions-align-center","center"===i.align)("mat-mdc-dialog-actions-align-end","end"===i.align)},inputs:{align:"align"}}),n})();function $3(n,e){let t=n.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(i=>i.id===t.id):null}let nZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[IM,ZK],imports:[wK,dm,am,qn,qn]}),n})();const iZ=["mat-button",""],rZ=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],sZ=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],aZ=["mat-icon-button",""],lZ=["*"],cZ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],dZ=AM(EM(gI(class{constructor(n){this._elementRef=n}})));let X3=(()=>{class n extends dZ{constructor(t,i,r,s){super(t),this._platform=i,this._ngZone=r,this._animationMode=s,this._focusMonitor=Pt(Xd),this._isFab=!1;const o=t.nativeElement.classList;for(const a of cZ)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",i){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,i):this._elementRef.nativeElement.focus(i)}_hasHostAttributes(...t){return t.some(i=>this._elementRef.nativeElement.hasAttribute(i))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return n.\u0275fac=function(t){qa()},n.\u0275dir=Ae({type:n,viewQuery:function(t,i){if(1&t&&oi(xy,5),2&t){let r;kt(r=Ot())&&(i.ripple=r.first)}},features:[ht]}),n})(),RM=(()=>{class n extends X3{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(Ni),D(ft),D(rs,8))},n.\u0275cmp=bt({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,i){2&t&&(Bt("disabled",i.disabled||null),Pn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ht],attrs:iZ,ngContentSelectors:sZ,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(Sr(rZ),$e(0,"span",0),Xt(1),Z(2,"span",1),Xt(3,1),se(),Xt(4,2),$e(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(Pn("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab),q(6),$("matRippleDisabled",i._isRippleDisabled())("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[xy],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),SI=(()=>{class n extends X3{constructor(t,i,r,s){super(t,i,r,s)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(Ni),D(ft),D(rs,8))},n.\u0275cmp=bt({type:n,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(t,i){2&t&&(Bt("disabled",i.disabled||null),Pn("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-unthemed",!i.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ht],attrs:aZ,ngContentSelectors:lZ,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){1&t&&(Sr(),$e(0,"span",0),Xt(1),$e(2,"span",1)(3,"span",2)(4,"span",3)),2&t&&(q(3),$("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",i._elementRef.nativeElement))},dependencies:[xy],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),CI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,TM,qn]}),n})();const fZ=["class","dialog"];let q3=(()=>{class n{constructor(t,i){this.dialogRef=t,this.data=i}}return n.\u0275fac=function(t){return new(t||n)(D(My),D(MI))},n.\u0275cmp=bt({type:n,selectors:[["app-confirm",8,"dialog"]],attrs:fZ,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,i){1&t&&(Z(0,"h1",0),it(1,"Confirmation"),se(),Z(2,"div",1)(3,"p"),it(4),se()(),Z(5,"div",2)(6,"button",3),ot("click",function(){return i.dialogRef.close()}),it(7,"Cancel"),se(),Z(8,"button",4),it(9,"Yes"),se()()),2&t&&(q(4),$i(i.data.text),q(4),$("mat-dialog-close",!0))},dependencies:[RM,tZ,H3,G3,W3]}),n})();function EI(n,e){const t="object"==typeof e;return new Promise((i,r)=>{const s=new qo({next:o=>{i(o),s.unsubscribe()},error:r,complete:()=>{t?i(e.defaultValue):r(new $v)}});n.subscribe(s)})}function Y3(...n){const e=xu(n),{args:t,keys:i}=mN(n),r=new Mn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;ar(t[u]).subscribe(Bn(s,p=>{h||(h=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(i?gN(i,a):a),s.complete())}))}});return e?r.pipe(vD(e)):r}let K3=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(D(ca),D(_t))},n.\u0275dir=Ae({type:n}),n})(),Mh=(()=>{class n extends K3{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,features:[ht]}),n})();const nl=new ge("NgValueAccessor"),mZ={provide:nl,useExisting:Qn(()=>Uc),multi:!0},_Z=new ge("CompositionEventMode");let Uc=(()=>{class n extends K3{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gZ(){const n=Pc()?Pc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(D(ca),D(_t),D(_Z,8))},n.\u0275dir=Ae({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&ot("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[zn([mZ]),ht]}),n})();const vZ=!1;function qd(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Q3(n){return null!=n&&"number"==typeof n.length}const _s=new ge("NgValidators"),Yd=new ge("NgAsyncValidators"),yZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class AI{static min(e){return J3(e)}static max(e){return eU(e)}static required(e){return function tU(n){return qd(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function nU(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function iU(n){return qd(n.value)||yZ.test(n.value)?null:{email:!0}}(e)}static minLength(e){return rU(e)}static maxLength(e){return sU(e)}static pattern(e){return function oU(n){if(!n)return PM;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(qd(i.value))return null;const r=i.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return hU(e)}static composeAsync(e){return fU(e)}}function J3(n){return e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function eU(n){return e=>{if(qd(e.value)||qd(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function rU(n){return e=>qd(e.value)||!Q3(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function sU(n){return e=>Q3(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function PM(n){return null}function aU(n){return null!=n}function lU(n){const e=Cv(n)?Ri(n):n;if(vZ&&!JT(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new fe(-1101,t)}return e}function cU(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function dU(n,e){return e.map(t=>t(n))}function uU(n){return n.map(e=>function bZ(n){return!n.validate}(e)?e:t=>e.validate(t))}function hU(n){if(!n)return null;const e=n.filter(aU);return 0==e.length?null:function(t){return cU(dU(t,e))}}function TI(n){return null!=n?hU(uU(n)):null}function fU(n){if(!n)return null;const e=n.filter(aU);return 0==e.length?null:function(t){return Y3(dU(t,e).map(lU)).pipe(Ye(cU))}}function DI(n){return null!=n?fU(uU(n)):null}function pU(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function mU(n){return n._rawValidators}function gU(n){return n._rawAsyncValidators}function II(n){return n?Array.isArray(n)?n:[n]:[]}function kM(n,e){return Array.isArray(n)?n.includes(e):n===e}function _U(n,e){const t=II(e);return II(n).forEach(r=>{kM(t,r)||t.push(r)}),t}function vU(n,e){return II(e).filter(t=>!kM(n,t))}class yU{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=TI(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ys extends yU{get formDirective(){return null}get path(){return null}}class Hl extends yU{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bU{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Kd=(()=>{class n extends bU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Hl,2))},n.\u0275dir=Ae({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&Pn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ht]}),n})(),xU=(()=>{class n extends bU{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(D(Ys,10))},n.\u0275dir=Ae({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&Pn("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ht]}),n})();function wU(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const kI=!1,Sy="VALID",LM="INVALID",gm="PENDING",Cy="DISABLED";function OI(n){return(FM(n)?n.validators:n)||null}function LI(n,e){return(FM(e)?e.asyncValidators:n)||null}function FM(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function MU(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new fe(1e3,kI?function SZ(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!i[t])throw new fe(1001,kI?function CZ(n,e){return`Cannot find form control ${wU(n,e)}`}(e,t):"")}function SU(n,e,t){n._forEachChild((i,r)=>{if(void 0===t[r])throw new fe(1002,kI?function EZ(n,e){return`Must supply a value for form control ${wU(n,e)}`}(e,r):"")})}class NM{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sy}get invalid(){return this.status===LM}get pending(){return this.status==gm}get disabled(){return this.status===Cy}get enabled(){return this.status!==Cy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(_U(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(_U(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(vU(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(vU(e,this._rawAsyncValidators))}hasValidator(e){return kM(this._rawValidators,e)}hasAsyncValidator(e){return kM(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cy,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sy,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sy||this.status===gm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cy:Sy}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gm,this._hasOwnPendingAsyncValidator=!0;const t=lU(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new st,this.statusChanges=new st}_calculateStatus(){return this._allControlsDisabled()?Cy:this.errors?LM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gm)?gm:this._anyControlsHaveStatus(LM)?LM:Sy}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){FM(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function AZ(n){return Array.isArray(n)?TI(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function TZ(n){return Array.isArray(n)?DI(n):n||null}(this._rawAsyncValidators)}}class Ey extends NM{constructor(e,t,i){super(OI(t),LI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){SU(this,!0,e),Object.keys(e).forEach(i=>{MU(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class CU extends Ey{}const Sh=new ge("CallSetDisabledState",{providedIn:"root",factory:()=>Ay}),Ay="always";function BM(n,e){return[...e.path,n]}function Ty(n,e,t=Ay){FI(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function IZ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&EU(n,e)})}(n,e),function PZ(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function RZ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&EU(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function DZ(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function UM(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),zM(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function VM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function FI(n,e){const t=mU(n);null!==e.validator?n.setValidators(pU(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=gU(n);null!==e.asyncValidator?n.setAsyncValidators(pU(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();VM(e._rawValidators,r),VM(e._rawAsyncValidators,r)}function zM(n,e){let t=!1;if(null!==n){if(null!==e.validator){const r=mU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const r=gU(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,n.setAsyncValidators(s))}}}const i=()=>{};return VM(e._rawValidators,i),VM(e._rawAsyncValidators,i),t}function EU(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function AU(n,e){FI(n,e)}function BI(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function TU(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function UI(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Uc?t=s:function LZ(n){return Object.getPrototypeOf(n.constructor)===Mh}(s)?i=s:r=s}),r||i||t||null}const NZ={provide:Ys,useExisting:Qn(()=>Iy)},Dy=(()=>Promise.resolve())();let Iy=(()=>{class n extends Ys{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new st,this.form=new Ey({},TI(t),DI(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Dy.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),Ty(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Dy.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Dy.then(()=>{const i=this._findContainer(t.path),r=new Ey({});AU(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Dy.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){Dy.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,TU(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(D(_s,10),D(Yd,10),D(Sh,8))},n.\u0275dir=Ae({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&ot("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zn([NZ]),ht]}),n})();function DU(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function IU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Ry=class extends NM{constructor(e=null,t,i){super(OI(t),LI(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),FM(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=IU(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){DU(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){DU(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){IU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},VZ={provide:Hl,useExisting:Qn(()=>Zd)},kU=(()=>Promise.resolve())();let Zd=(()=>{class n extends Hl{constructor(t,i,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Ry,this._registered=!1,this.update=new st,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=UI(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),BI(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ty(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){kU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=0!==i&&function $p(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}(i);kU.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?BM(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(D(Ys,9),D(_s,10),D(Yd,10),D(nl,10),D(ai,8),D(Sh,8))},n.\u0275dir=Ae({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[zn([VZ]),ht,Hi]}),n})(),OU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const zZ={provide:nl,useExisting:Qn(()=>_m),multi:!0};let _m=(()=>{class n extends Mh{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&ot("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[zn([zZ]),ht]}),n})(),LU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();const VI=new ge("NgModelWithFormControlWarning"),jZ={provide:Ys,useExisting:Qn(()=>vm)};let vm=(()=>{class n extends Ys{constructor(t,i,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new st,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(zM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Ty(i,t,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){UM(t.control||null,t,!1),function FZ(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,TU(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,r=this.form.get(t.path);i!==r&&(UM(i||null,t),(n=>n instanceof Ry)(r)&&(Ty(r,t,this.callSetDisabledState),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);AU(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function kZ(n,e){return zM(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){FI(this.form,this),this._oldForm&&zM(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(D(_s,10),D(Yd,10),D(Sh,8))},n.\u0275dir=Ae({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&ot("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[zn([jZ]),ht,Hi]}),n})();const YZ={provide:Hl,useExisting:Qn(()=>GI)};let GI=(()=>{class n extends Hl{set isDisabled(t){}constructor(t,i,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new st,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=UI(0,s)}ngOnChanges(t){this._added||this._setUpControl(),BI(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return BM(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(D(Ys,13),D(_s,10),D(Yd,10),D(nl,10),D(VI,8))},n.\u0275dir=Ae({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[zn([YZ]),ht,Hi]}),n})();function HU(n){return"number"==typeof n?n:parseInt(n,10)}function GU(n){return"number"==typeof n?n:parseFloat(n)}let Ch=(()=>{class n{constructor(){this._validator=PM}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):PM,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,features:[Hi]}),n})();const nQ={provide:_s,useExisting:Qn(()=>ym),multi:!0};let ym=(()=>{class n extends Ch{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>GU(t),this.createValidator=t=>eU(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Bt("max",i._enabled?i.max:null)},inputs:{max:"max"},features:[zn([nQ]),ht]}),n})();const iQ={provide:_s,useExisting:Qn(()=>bm),multi:!0};let bm=(()=>{class n extends Ch{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>GU(t),this.createValidator=t=>J3(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Bt("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[zn([iQ]),ht]}),n})();const aQ={provide:_s,useExisting:Qn(()=>XI),multi:!0};let XI=(()=>{class n extends Ch{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>HU(t),this.createValidator=t=>rU(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Bt("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},features:[zn([aQ]),ht]}),n})();const lQ={provide:_s,useExisting:Qn(()=>qI),multi:!0};let qI=(()=>{class n extends Ch{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=t=>HU(t),this.createValidator=t=>sU(t)}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(t,i){2&t&&Bt("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},features:[zn([lQ]),ht]}),n})(),XU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[LU]}),n})();class qU extends NM{constructor(e,t,i){super(OI(t),LI(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){SU(this,!1,e),e.forEach((i,r)=>{MU(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function YU(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let dQ=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,i=null){const r=this._reduceControls(t);let s={};return YU(i)?s=i:null!==i&&(s.validators=i.validator,s.asyncValidators=i.asyncValidator),new Ey(r,s)}record(t,i=null){const r=this._reduceControls(t);return new CU(r,i)}control(t,i,r){let s={};return this.useNonNullable?(YU(i)?s=i:(s.validators=i,s.asyncValidators=r),new Ry(t,{...s,nonNullable:!0})):new Ry(t,i,r)}array(t,i,r){const s=t.map(o=>this._createControl(o));return new qU(s,i,r)}_reduceControls(t){const i={};return Object.keys(t).forEach(r=>{i[r]=this._createControl(t[r])}),i}_createControl(t){return t instanceof Ry||t instanceof NM?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),uQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Sh,useValue:t.callSetDisabledState??Ay}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[XU]}),n})(),hQ=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:VI,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Sh,useValue:t.callSetDisabledState??Ay}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[XU]}),n})();const fQ=["matFormFieldNotchedOutline",""],pQ=["*"],mQ=["textField"],gQ=["iconPrefixContainer"],_Q=["textPrefixContainer"];function vQ(n,e){1&n&&$e(0,"span",19)}function yQ(n,e){if(1&n){const t=Oi();Z(0,"label",17),ot("cdkObserveContent",function(){return Sn(t),Cn(Me(2)._refreshOutlineNotchWidth())}),Xt(1,1),ye(2,vQ,1,0,"span",18),se()}if(2&n){const t=Me(2);$("floating",t._shouldLabelFloat())("cdkObserveContentDisabled",!t._hasOutline())("id",t._labelId),Bt("for",t._control.id)("aria-owns",t._control.id),q(2),$("ngIf",!t.hideRequiredMarker&&t._control.required)}}function bQ(n,e){1&n&&ye(0,yQ,3,6,"label",16),2&n&&$("ngIf",Me()._hasFloatingLabel())}function xQ(n,e){1&n&&$e(0,"div",20)}function wQ(n,e){}function MQ(n,e){1&n&&ye(0,wQ,0,0,"ng-template",22),2&n&&(Me(2),$("ngTemplateOutlet",zr(1)))}function SQ(n,e){if(1&n&&(Z(0,"div",21),ye(1,MQ,1,1,"ng-template",9),se()),2&n){const t=Me();$("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",t._labelWidth),q(1),$("ngIf",!t._forceDisplayInfixLabel())}}function CQ(n,e){1&n&&(Z(0,"div",23,24),Xt(2,2),se())}function EQ(n,e){1&n&&(Z(0,"div",25,26),Xt(2,3),se())}function AQ(n,e){}function TQ(n,e){1&n&&ye(0,AQ,0,0,"ng-template",22),2&n&&(Me(),$("ngTemplateOutlet",zr(1)))}function DQ(n,e){1&n&&(Z(0,"div",27),Xt(1,4),se())}function IQ(n,e){1&n&&(Z(0,"div",28),Xt(1,5),se())}function RQ(n,e){1&n&&$e(0,"div",29)}function PQ(n,e){1&n&&(Z(0,"div",30),Xt(1,6),se()),2&n&&$("@transitionMessages",Me()._subscriptAnimationState)}function kQ(n,e){if(1&n&&(Z(0,"mat-hint",34),it(1),se()),2&n){const t=Me(2);$("id",t._hintLabelId),q(1),$i(t.hintLabel)}}function OQ(n,e){if(1&n&&(Z(0,"div",31),ye(1,kQ,2,2,"mat-hint",32),Xt(2,7),$e(3,"div",33),Xt(4,8),se()),2&n){const t=Me();$("@transitionMessages",t._subscriptAnimationState),q(1),$("ngIf",t.hintLabel)}}const LQ=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],FQ=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let il=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-label"]]}),n})(),NQ=0;const KU=new ge("MatError");let BQ=(()=>{class n{constructor(t,i){this.id="mat-mdc-error-"+NQ++,t||i.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(Ba("aria-live"),D(_t))},n.\u0275dir=Ae({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,i){2&t&&Ld("id",i.id)},inputs:{id:"id"},features:[zn([{provide:KU,useExisting:n}])]}),n})(),UQ=0,ZU=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+UQ++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,i){2&t&&(Ld("id",i.id),Bt("align",null),Pn("mat-mdc-form-field-hint-end","end"===i.align))},inputs:{align:"align",id:"id"}}),n})();const VQ=new ge("MatPrefix"),zQ=new ge("MatSuffix");let QU=(()=>{class n{constructor(t){this._elementRef=t,this.floating=!1}getWidth(){return function HQ(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const i=t.scrollWidth;return t.remove(),i}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return n.\u0275fac=function(t){return new(t||n)(D(_t))},n.\u0275dir=Ae({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,i){2&t&&Pn("mdc-floating-label--float-above",i.floating)},inputs:{floating:"floating"}}),n})();const JU="mdc-line-ripple--active",HM="mdc-line-ripple--deactivating";let eV=(()=>{class n{constructor(t,i){this._elementRef=t,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(HM);"opacity"===r.propertyName&&o&&s.remove(JU,HM)},i.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(HM),t.add(JU)}deactivate(){this._elementRef.nativeElement.classList.add(HM)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft))},n.\u0275dir=Ae({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),tV=(()=>{class n{constructor(t,i){this._elementRef=t,this._ngZone=i,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft))},n.\u0275cmp=bt({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,i){2&t&&Pn("mdc-notched-outline--notched",i.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:fQ,ngContentSelectors:pQ,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(t,i){1&t&&(Sr(),$e(0,"div",0),Z(1,"div",1),Xt(2),se(),$e(3,"div",2)),2&t&&(q(1),Dc("width",i._getNotchWidth()))},encapsulation:2,changeDetection:0}),n})();const GQ={transitionMessages:zl("transitionMessages",[mo("enter",Si({opacity:1,transform:"translateY(0%)"})),qs("void => enter",[Si({opacity:0,transform:"translateY(-5px)"}),po("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let YI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n}),n})();const KI=new ge("MatFormField"),WQ=new ge("MAT_FORM_FIELD_DEFAULT_OPTIONS");let nV=0,Qd=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=An(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const i=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==i&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,i,r,s,o,a,l,c){this._elementRef=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._document=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+nV++,this._hintLabelId="mat-mdc-hint-"+nV++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Ve,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(dt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),cs(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dt(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(dt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const i=this._control?this._control.ngControl:null;return i&&i[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const i=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;i?t.push(i.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(i=>i.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const i=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=i?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const i=t.getRootNode();return i&&i!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ai),D(ft),D(el),D(Ni),D(WQ,8),D(rs,8),D(Ut))},n.\u0275cmp=bt({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,i,r){if(1&t&&(Xi(r,il,5),Xi(r,il,7),Xi(r,YI,5),Xi(r,VQ,5),Xi(r,zQ,5),Xi(r,KU,5),Xi(r,ZU,5)),2&t){let s;kt(s=Ot())&&(i._labelChildNonStatic=s.first),kt(s=Ot())&&(i._labelChildStatic=s.first),kt(s=Ot())&&(i._formFieldControl=s.first),kt(s=Ot())&&(i._prefixChildren=s),kt(s=Ot())&&(i._suffixChildren=s),kt(s=Ot())&&(i._errorChildren=s),kt(s=Ot())&&(i._hintChildren=s)}},viewQuery:function(t,i){if(1&t&&(oi(mQ,5),oi(gQ,5),oi(_Q,5),oi(QU,5),oi(tV,5),oi(eV,5)),2&t){let r;kt(r=Ot())&&(i._textField=r.first),kt(r=Ot())&&(i._iconPrefixContainer=r.first),kt(r=Ot())&&(i._textPrefixContainer=r.first),kt(r=Ot())&&(i._floatingLabel=r.first),kt(r=Ot())&&(i._notchedOutline=r.first),kt(r=Ot())&&(i._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,i){2&t&&Pn("mat-mdc-form-field-label-always-float",i._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",i._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",i._hasIconSuffix)("mat-form-field-invalid",i._control.errorState)("mat-form-field-disabled",i._control.disabled)("mat-form-field-autofilled",i._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===i._animationMode)("mat-form-field-appearance-fill","fill"==i.appearance)("mat-form-field-appearance-outline","outline"==i.appearance)("mat-form-field-hide-placeholder",i._hasFloatingLabel()&&!i._shouldLabelFloat())("mat-focused",i._control.focused)("mat-primary","accent"!==i.color&&"warn"!==i.color)("mat-accent","accent"===i.color)("mat-warn","warn"===i.color)("ng-untouched",i._shouldForward("untouched"))("ng-touched",i._shouldForward("touched"))("ng-pristine",i._shouldForward("pristine"))("ng-dirty",i._shouldForward("dirty"))("ng-valid",i._shouldForward("valid"))("ng-invalid",i._shouldForward("invalid"))("ng-pending",i._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[zn([{provide:KI,useExisting:n}])],ngContentSelectors:FQ,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,i){1&t&&(Sr(LQ),ye(0,bQ,1,1,"ng-template",null,0,Ic),Z(2,"div",1,2),ot("click",function(s){return i._control.onContainerClick&&i._control.onContainerClick(s)}),ye(4,xQ,1,0,"div",3),Z(5,"div",4),ye(6,SQ,2,3,"div",5),ye(7,CQ,3,0,"div",6),ye(8,EQ,3,0,"div",7),Z(9,"div",8),ye(10,TQ,1,1,"ng-template",9),Xt(11),se(),ye(12,DQ,2,0,"div",10),ye(13,IQ,2,0,"div",11),se(),ye(14,RQ,1,0,"div",12),se(),Z(15,"div",13),ye(16,PQ,2,1,"div",14),ye(17,OQ,5,2,"div",15),se()),2&t&&(q(2),Pn("mdc-text-field--filled",!i._hasOutline())("mdc-text-field--outlined",i._hasOutline())("mdc-text-field--no-label",!i._hasFloatingLabel())("mdc-text-field--disabled",i._control.disabled)("mdc-text-field--invalid",i._control.errorState),q(2),$("ngIf",!i._hasOutline()&&!i._control.disabled),q(2),$("ngIf",i._hasOutline()),q(1),$("ngIf",i._hasIconPrefix),q(1),$("ngIf",i._hasTextPrefix),q(2),$("ngIf",!i._hasOutline()||i._forceDisplayInfixLabel()),q(2),$("ngIf",i._hasTextSuffix),q(1),$("ngIf",i._hasIconSuffix),q(1),$("ngIf",!i._hasOutline()),q(1),Pn("mat-mdc-form-field-subscript-dynamic-size","dynamic"===i.subscriptSizing),$("ngSwitch",i._getDisplayedMessages()),q(1),$("ngSwitchCase","error"),q(1),$("ngSwitchCase","hint"))},dependencies:[Di,zv,Vv,sD,JB,ZU,QU,tV,eV],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[GQ.transitionMessages]},changeDetection:0}),n})(),GM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,_a,sI,qn]}),n})();const sV=yh({passive:!0});let XQ=(()=>{class n{constructor(t,i){this._platform=t,this._ngZone=i,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Ds;const i=Nc(t),r=this._monitoredElements.get(i);if(r)return r.subject;const s=new Ve,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||i.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&i.classList.contains(o)&&(i.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(i.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{i.addEventListener("animationstart",a,sV),i.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(i,{subject:s,unlisten:()=>{i.removeEventListener("animationstart",a,sV)}}),s}stopMonitoring(t){const i=Nc(t),r=this._monitoredElements.get(i);r&&(r.unlisten(),r.subject.complete(),i.classList.remove("cdk-text-field-autofill-monitored"),i.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(i))}ngOnDestroy(){this._monitoredElements.forEach((t,i)=>this.stopMonitoring(i))}}return n.\u0275fac=function(t){return new(t||n)(Q(Ni),Q(ft))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();const YQ=new ge("MAT_INPUT_VALUE_ACCESSOR"),KQ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let ZQ=0;const QQ=x3(class{constructor(n,e,t,i){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=i,this.stateChanges=new Ve}});let xm=(()=>{class n extends QQ{get disabled(){return this._disabled}set disabled(t){this._disabled=An(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(AI.required)??!1}set required(t){this._required=An(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&FB().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=An(t)}constructor(t,i,r,s,o,a,l,c,u,h){super(a,s,o,r),this._elementRef=t,this._platform=i,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+ZQ++,this.focused=!1,this.stateChanges=new Ve,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(g=>FB().has(g)),this._iOSKeyupListener=g=>{const b=g.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,i.IOS&&u.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const i=this._elementRef.nativeElement;this._previousPlaceholder=t,t?i.setAttribute("placeholder",t):i.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){KQ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,i=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&i&&i.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(Ni),D(Hl,10),D(Iy,8),D(vm,8),D(w3),D(YQ,10),D(XQ),D(ft),D(KI,8))},n.\u0275dir=Ae({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,i){1&t&&ot("focus",function(){return i._focusChanged(!0)})("blur",function(){return i._focusChanged(!1)})("input",function(){return i._onInput()}),2&t&&(Ld("id",i.id)("disabled",i.disabled)("required",i.required),Bt("name",i.name||null)("readonly",i.readonly&&!i._isNativeSelect||null)("aria-invalid",i.empty&&i.required?null:i.errorState)("aria-required",i.required)("id",i.id),Pn("mat-input-server",i._isServer)("mat-mdc-form-field-textarea-control",i._isInFormField&&i._isTextarea)("mat-mdc-form-field-input-control",i._isInFormField)("mdc-text-field__input",i._isInFormField)("mat-mdc-native-select-inline",i._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[zn([{provide:YI,useExisting:n}]),ht,Hi]}),n})(),JQ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,GM,GM,qQ,qn]}),n})();const eJ=["class","dialog"];function tJ(n,e){if(1&n&&(Z(0,"mat-form-field",7)(1,"mat-label"),it(2),se(),$e(3,"input",8),se()),2&n){const t=e.$implicit;q(2),$i(t.title),q(1),$("id",t.id)("type",t.type)("formControlName",t.id)}}let nJ=(()=>{class n{constructor(t,i,r){this.dialogRef=t,this.fb=i,this.data=r;const s={};for(const o of r.args)s[o.id]=["",AI.required];this.argsForm=this.fb.group(s)}submit(){const t=this.argsForm.value;for(const i of this.data.args)"number"==i.type&&(t[i.id]=+t[i.id]);this.dialogRef.close(t)}}return n.\u0275fac=function(t){return new(t||n)(D(My),D(dQ),D(MI))},n.\u0275cmp=bt({type:n,selectors:[["app-run-custom-action",8,"dialog"]],attrs:eJ,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(t,i){1&t&&(Z(0,"h1",0),it(1),se(),Z(2,"div",1)(3,"p"),it(4),se()(),Z(5,"form",2),ye(6,tJ,4,4,"mat-form-field",3),se(),Z(7,"div",4)(8,"button",5),ot("click",function(){return i.dialogRef.close()}),it(9,"Cancel"),se(),Z(10,"button",6),ot("click",function(){return i.submit()}),it(11,"Run"),se()()),2&t&&(q(1),Er('Run action "',i.data.title,'"'),q(3),$i(i.data.description),q(1),$("formGroup",i.argsForm),q(1),$("ngForOf",i.data.args),q(4),$("disabled",i.argsForm.invalid))},dependencies:[ga,OU,Uc,Kd,xU,Qd,il,xm,RM,H3,G3,W3,vm,GI]}),n})(),Eh=(()=>{class n{constructor(t){this.ngZone=t,this.openedResource$=new Ht(null),this.openedResourcePath$=new Ht(null),eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.on_angular_ready(),setTimeout(on(function*(){for(;;){if(eel._websocket){eel._websocket.onclose=()=>window.close();break}yield new Promise(i=>setTimeout(i,0))}}),0)}wrapHandler(t){return(...i)=>{try{ft.assertInAngularZone(),t.bind(this)(...i)}catch{this.ngZone.run(t,this,i)}}}openFile(t,i=!1){var r=this;return on(function*(){r.openedResource$.next(null),r.openedResourcePath$.next(null);const s=yield eel.open_file(t,i)();r.openedResource$.next({...s,id:s.name}),r.openedResourcePath$.next(t)})()}openFileWithSystemApp(t){return on(function*(){yield eel.open_file_with_system_app(t)()})()}runCustomAction(t,i,r){return on(function*(){return eel.run_custom_action(t,i,r)()})()}saveFile(t){var i=this;return on(function*(){return eel.save_file(i.openedResourcePath$.getValue(),t)()})()}serializeResource(t,i={}){return on(function*(){return eel.serialize_resource(t,i)()})()}serializeResourceTmp(t,i,r={}){return on(function*(){return eel.serialize_resource_tmp(t,i,r)()})()}serializeReversible(t,i){return on(function*(){return eel.serialize_reversible(t,i)()})()}deserializeResource(t){return on(function*(){return eel.deserialize_resource(t)()})()}}return n.\u0275fac=function(t){return new(t||n)(Q(ft))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var WM=qr(489);const oV=n=>!(!n||"object"!=typeof n),aV=(n={},e,t,i=[])=>{const r=[];if(oV(n)){const s=Object.entries(n);for(let o=0;o<s.length;o+=1){const[a,l]=s[o];if(a===e&&l===t)r.push([n,i]);else if(oV(l)){const c=aV(l,e,t,[...i,a]);r.push(...c)}}}return r},rl=(n,e)=>n+(n.includes("__")?"/":"__")+e;let wm=(()=>{class n{constructor(t){this.eelDelegate=t,this.resource$=new Ht(null),this.error$=new Ht(null),this.customActionRunning$=new Ht(!1),this.changedDataBlocks={},this.dataBlockChange$=new Ve,this.hideHiddenFields$=new Ht(!0),this.eelDelegate.openedResource$.subscribe(i=>{if(this.clearUnsavedChanges(),i?.data.error_class)this.error$.next(i),this.resource$.next(null);else if(i?.schema){this.dataSnapshot=(0,WM.cloneDeep)(this.buildResourceDataSnapshot(i));const r=aV(i.schema,"is_recursive_ref",!0);for(const[s,o]of r){const a=s.block_class_mro;let l=i.schema,c=l.block_class_mro===a?l:void 0;for(const u of o.slice(0,o.length-1))!c&&l[u]?.block_class_mro===a&&(c=l[u]),l=l[u];l[o[o.length-1]]=c}this.resource$.next(i),this.error$.next(null)}else this.resource$.next(null),this.error$.next(null)}),this.dataBlockChange$.subscribe(([i,r])=>{(0,WM.isEqual)(r,this.getInitialValueFromSnapshot(i))?delete this.changedDataBlocks[i]:this.changedDataBlocks[i]=r})}get hasUnsavedChanges(){return Object.keys(this.changedDataBlocks).length>0}getInitialValueFromSnapshot(t){return this.dataSnapshot[t]}buildResourceDataSnapshot(t){const i={},r=(s,o)=>{if(o instanceof Array)for(let a=0;a<o.length;a++)r(rl(s,a),o[a]);else if((0,WM.isObject)(o))for(const a in o)r(rl(s,a),o[a]);else i[s]=o};return r(t.id,t.data),i}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(t=>{delete this.changedDataBlocks[t]})}processExternalChanges(t,i){var r=this;return on(function*(){r.customActionRunning$.next(!0);const s=yield i();if(s.error_class)throw r.customActionRunning$.next(!1),s;if(r.resource$.getValue().id===t)r.resource$.getValue().data=s;else{let o=t.substring(r.resource$.getValue().id.length).replace("__","/").split("/").filter(c=>c),a=r.resource$.getValue().data;for(const c of o.slice(0,o.length-1))a=a[c]||a[+c];let l=o[o.length-1];void 0===a[l]&&void 0!==a[+l]&&(l=+l),a[l]=s}r.clearUnsavedChanges(),r.changedDataBlocks.__has_external_changes__=1,r.customActionRunning$.next(!1)})()}runCustomAction(t,i){var r=this;return on(function*(){let s=r.resource$.getValue().id;return r.processExternalChanges(s,()=>r.eelDelegate.runCustomAction(s,t,i))})()}deserializeResource(t){var i=this;return on(function*(){return i.processExternalChanges(t,()=>i.eelDelegate.deserializeResource(t))})()}}return n.\u0275fac=function(t){return new(t||n)(Q(Eh))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iJ(n,e){if(1&n){const t=Oi();Z(0,"div",2)(1,"button",3),ot("click",function(){return Sn(t),Cn(Me().action())}),it(2),se()()}if(2&n){const t=Me();q(2),Er(" ",t.data.action," ")}}const rJ=["label"];function sJ(n,e){}const oJ=Math.pow(2,31)-1;class ZI{constructor(e,t){this._overlayRef=t,this._afterDismissed=new Ve,this._afterOpened=new Ve,this._onAction=new Ve,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,oJ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const lV=new ge("MatSnackBarData");class $M{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let aJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),n})(),lJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),n})(),cJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),n})(),dJ=(()=>{class n{constructor(t,i){this.snackBarRef=t,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return n.\u0275fac=function(t){return new(t||n)(D(ZI),D(lV))},n.\u0275cmp=bt({type:n,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(t,i){1&t&&(Z(0,"div",0),it(1),se(),ye(2,iJ,3,1,"div",1)),2&t&&(q(1),Er(" ",i.data.message,"\n"),q(1),$("ngIf",i.hasAction))},dependencies:[Di,RM,aJ,lJ,cJ],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),n})();const uJ={snackBarState:zl("state",[mo("void, hidden",Si({transform:"scale(0.8)",opacity:0})),mo("visible",Si({transform:"scale(1)",opacity:1})),qs("* => visible",po("150ms cubic-bezier(0, 0, 0.2, 1)")),qs("* => void, * => hidden",po("75ms cubic-bezier(0.4, 0.0, 1, 1)",Si({opacity:0})))])};let hJ=0,fJ=(()=>{class n extends mM{constructor(t,i,r,s,o){super(),this._ngZone=t,this._elementRef=i,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._document=Pt(Ut),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Ve,this._onExit=new Ve,this._onEnter=new Ve,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+hJ++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const i=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),i}attachTemplatePortal(t){this._assertNotAttached();const i=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),i}onAnimationEnd(t){const{fromState:i,toState:r}=t;if(("void"===r&&"void"!==i||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Fi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(r=>t.classList.add(r)):t.classList.add(i)),this._exposeToModals()}_exposeToModals(){const t=this._liveElementId,i=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<i.length;r++){const s=i[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?-1===o.indexOf(t)&&s.setAttribute("aria-owns",o+" "+t):s.setAttribute("aria-owns",t)}}_clearFromModals(){this._trackedModals.forEach(t=>{const i=t.getAttribute("aria-owns");if(i){const r=i.replace(this._liveElementId,"").trim();r.length>0?t.setAttribute("aria-owns",r):t.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&i){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),i.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return n.\u0275fac=function(t){return new(t||n)(D(ft),D(_t),D(ai),D(Ni),D($M))},n.\u0275dir=Ae({type:n,viewQuery:function(t,i){if(1&t&&oi(om,7),2&t){let r;kt(r=Ot())&&(i._portalOutlet=r.first)}},features:[ht]}),n})(),pJ=(()=>{class n extends fJ{_afterPortalAttached(){super._afterPortalAttached();const t=this._label.nativeElement,i="mdc-snackbar__label";t.classList.toggle(i,!t.querySelector(`.${i}`))}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275cmp=bt({type:n,selectors:[["mat-snack-bar-container"]],viewQuery:function(t,i){if(1&t&&oi(rJ,7),2&t){let r;kt(r=Ot())&&(i._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(t,i){1&t&&e1("@state.done",function(s){return i.onAnimationEnd(s)}),2&t&&l1("@state",i._animationState)},features:[ht],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1,2)(3,"div",3),ye(4,sJ,0,0,"ng-template",4),se(),$e(5,"div"),se()()),2&t&&(q(5),Bt("aria-live",i._live)("role",i._role)("id",i._liveElementId))},dependencies:[om],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px));height:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[uJ.snackBarState]}}),n})(),cV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[dm,am,_a,CI,qn,qn]}),n})();const dV=new ge("mat-snack-bar-default-options",{providedIn:"root",factory:function mJ(){return new $M}});let gJ=(()=>{class n{get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}constructor(t,i,r,s,o,a){this._overlay=t,this._live=i,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}openFromComponent(t,i){return this._attach(t,i)}openFromTemplate(t,i){return this._attach(t,i)}open(t,i="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:i},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,i){const s=ki.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:$M,useValue:i}]}),o=new rm(this.snackBarContainerComponent,i.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=i,a.instance}_attach(t,i){const r={...new $M,...this._defaultConfig,...i},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new ZI(o,s);if(t instanceof uo){const l=new sm(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new rm(t,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(dt(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,i){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),i.duration&&i.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(i.duration))}_createOverlay(t){const i=new vy;i.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),i.positionStrategy=r,this._overlay.create(i)}_createInjector(t,i){return ki.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:ZI,useValue:i},{provide:lV,useValue:t.data}]})}}return n.\u0275fac=function(t){return new(t||n)(Q(fo),Q(hI),Q(ki),Q(oI),Q(n,12),Q(dV))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),_J=(()=>{class n extends gJ{constructor(t,i,r,s,o,a){super(t,i,r,s,o,a),this.simpleSnackBarComponent=dJ,this.snackBarContainerComponent=pJ,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return n.\u0275fac=function(t){return new(t||n)(Q(fo),Q(hI),Q(ki),Q(oI),Q(n,12),Q(dV))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:cV}),n})();const vJ=["*",[["mat-toolbar-row"]]],yJ=["*","mat-toolbar-row"],bJ=AM(class{constructor(n){this._elementRef=n}});let xJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),wJ=(()=>{class n extends bJ{constructor(t,i,r){super(t),this._platform=i,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(Ni),D(Ut))},n.\u0275cmp=bt({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,i,r){if(1&t&&Xi(r,xJ,5),2&t){let s;kt(s=Ot())&&(i._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,i){2&t&&Pn("mat-toolbar-multiple-rows",i._toolbarRows.length>0)("mat-toolbar-single-row",0===i._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ht],ngContentSelectors:yJ,decls:2,vars:0,template:function(t,i){1&t&&(Sr(vJ),Xt(0),Xt(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),n})(),MJ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,qn]}),n})(),SJ=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=An(t)}get inset(){return this._inset}set inset(t){this._inset=An(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,i){2&t&&(Bt("aria-orientation",i.vertical?"vertical":"horizontal"),Pn("mat-divider-vertical",i.vertical)("mat-divider-horizontal",!i.vertical)("mat-divider-inset",i.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,i){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),n})(),uV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,qn]}),n})();const CJ=["tooltip"],hV=new ge("mat-tooltip-scroll-strategy"),TJ={provide:hV,deps:[fo],useFactory:function AJ(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}},IJ=new ge("mat-tooltip-default-options",{providedIn:"root",factory:function DJ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),fV="tooltip-panel",pV=yh({passive:!0});let FJ=(()=>{class n{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=An(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=An(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=Xs(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=Xs(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,i,r,s,o,a,l,c,u,h,p,m){this._overlay=t,this._elementRef=i,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=h,this._defaultOptions=p,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Ve,this._scrollStrategy=u,this._document=m,p&&(p.position&&(this.position=p.position),p.positionAtOrigin&&(this.positionAtOrigin=p.positionAtOrigin),p.touchGestures&&(this.touchGestures=p.touchGestures)),h.change.pipe(dt(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(dt(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([i,r])=>{t.removeEventListener(i,r,pV)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,i){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(i);this._detach(),this._portal=this._portal||new rm(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(dt(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){const i=this._tooltipInstance;i&&(i.isVisible()?i.hide(t):(i._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof _t)return this._overlayRef;this._detach()}const i=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(i);return r.positionChanges.pipe(dt(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${fV}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(dt(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(dt(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(dt(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!tl(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const i=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();i.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i||"below"==i?r={originX:"center",originY:"above"==i?"top":"bottom"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={originX:"start",originY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,i=this.position;let r;"above"==i?r={overlayX:"center",overlayY:"bottom"}:"below"==i?r={overlayX:"center",overlayY:"top"}:"before"==i||"left"==i&&t||"right"==i&&!t?r={overlayX:"end",overlayY:"center"}:("after"==i||"right"==i&&t||"left"==i&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Fi(1),dt(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,i){return"above"===this.position||"below"===this.position?"top"===i?i="bottom":"bottom"===i&&(i="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:i}}_updateCurrentPositionClass(t){const{overlayY:i,originX:r,originY:s}=t;let o;if(o="center"===i?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===i&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${fV}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let i;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(i=t),this.show(void 0,i)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const i=t.targetTouches?.[0],r=i?{x:i.clientX,y:i.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",i=>{const r=i.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",i=>this._wheelListener(i)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const i=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",i],["touchcancel",i])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([i,r])=>{this._elementRef.nativeElement.addEventListener(i,r,pV)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const i=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;i!==r&&!r.contains(i)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const i=this._elementRef.nativeElement,r=i.style;("on"===t||"INPUT"!==i.nodeName&&"TEXTAREA"!==i.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!i.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return n.\u0275fac=function(t){qa()},n.\u0275dir=Ae({type:n,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),n})(),Ks=(()=>{class n extends FJ{constructor(t,i,r,s,o,a,l,c,u,h,p,m){super(t,i,r,s,o,a,l,c,u,h,p,m),this._tooltipComponent=BJ,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const r=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=r?-8:8:"end"===t.originX&&(t.offsetX=r?8:-8),t}}return n.\u0275fac=function(t){return new(t||n)(D(fo),D(_t),D(my),D(is),D(ft),D(Ni),D(YY),D(Xd),D(hV),D(el,8),D(IJ,8),D(Ut))},n.\u0275dir=Ae({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[ht]}),n})(),NJ=(()=>{class n{constructor(t,i){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Ve,this._animationsDisabled="NoopAnimations"===i}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const i=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(i.classList.remove(t?s:r),i.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(i);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(i.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return n.\u0275fac=function(t){return new(t||n)(D(ai),D(rs,8))},n.\u0275dir=Ae({type:n}),n})(),BJ=(()=>{class n extends NJ{constructor(t,i,r){super(t,r),this._elementRef=i,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}}return n.\u0275fac=function(t){return new(t||n)(D(ai),D(_t),D(rs,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(1&t&&oi(CJ,7),2&t){let r;kt(r=Ot())&&(i._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,i){1&t&&ot("mouseleave",function(s){return i._handleMouseLeave(s)}),2&t&&Dc("zoom",i.isVisible()?1:null)},features:[ht],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,i){1&t&&(Z(0,"div",0,1),ot("animationend",function(s){return i._handleAnimationEnd(s)}),Z(2,"div",2),it(3),se()()),2&t&&(Pn("mdc-tooltip--multiline",i._isMultiline),$("ngClass",i.tooltipClass),q(3),$i(i.message))},dependencies:[Uv],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),n})(),mV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[TJ],imports:[p3,_a,dm,qn,qn,gy]}),n})();class QI{}class Jd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{let r;if(r="string"==typeof i?[i]:"number"==typeof i?[i.toString()]:i.map(s=>s.toString()),r.length>0){const s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Jd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Jd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Jd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class UJ{encodeKey(e){return _V(e)}encodeValue(e){return _V(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zJ=/%(\d[a-f0-9])/gi,HJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _V(n){return encodeURIComponent(n).replace(zJ,(e,t)=>HJ[t]??e)}function jM(n){return`${n}`}class eu{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new UJ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function VJ(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(jM):[jM(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new eu({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(jM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(jM(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class GJ{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function vV(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yV(n){return typeof Blob<"u"&&n instanceof Blob}function bV(n){return typeof FormData<"u"&&n instanceof FormData}class Py{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function WJ(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Jd),this.context||(this.context=new GJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new eu,this.urlWithParams=t}serializeBody(){return null===this.body?null:vV(this.body)||yV(this.body)||bV(this.body)||function $J(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof eu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||bV(this.body)?null:yV(this.body)?this.body.type||null:vV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof eu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const u=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,p)=>h.set(p,e.setHeaders[p]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((h,p)=>h.set(p,e.setParams[p]),c)),new Py(t,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var os=(()=>((os=os||{})[os.Sent=0]="Sent",os[os.UploadProgress=1]="UploadProgress",os[os.ResponseHeader=2]="ResponseHeader",os[os.DownloadProgress=3]="DownloadProgress",os[os.Response=4]="Response",os[os.User=5]="User",os))();class jJ{constructor(e,t=200,i="OK"){this.headers=e.headers||new Jd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class JI extends jJ{constructor(e={}){super(e),this.type=os.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new JI({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function eR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let tR=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Py)s=t;else{let l,c;l=r.headers instanceof Jd?r.headers:new Jd(r.headers),r.params&&(c=r.params instanceof eu?r.params:new eu({fromObject:r.params})),s=new Py(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=ct(s).pipe(zd(l=>this.handler.handle(l)));if(t instanceof Py||"events"===r.observe)return o;const a=o.pipe(Hn(l=>l instanceof JI));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Ye(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Ye(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Ye(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Ye(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new eu).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,eR(r,i))}post(t,i,r={}){return this.request("POST",t,eR(r,i))}put(t,i,r={}){return this.request("PUT",t,eR(r,i))}}return n.\u0275fac=function(t){return new(t||n)(Q(QI))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();const see=["*"];let qM;function ky(n){return function oee(){if(void 0===qM&&(qM=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(qM=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return qM}()?.createHTML(n)||n}function TV(n){return Error(`Unable to find icon with the name "${n}"`)}function DV(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function IV(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Ah{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}}let YM=(()=>{class n{constructor(t,i,r,s){this._httpClient=t,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,i,r){return this.addSvgIconInNamespace("",t,i,r)}addSvgIconLiteral(t,i,r){return this.addSvgIconLiteralInNamespace("",t,i,r)}addSvgIconInNamespace(t,i,r,s){return this._addSvgIconConfig(t,i,new Ah(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,i,r,s){const o=this._sanitizer.sanitize($n.HTML,r);if(!o)throw IV(r);const a=ky(o);return this._addSvgIconConfig(t,i,new Ah("",a,s))}addSvgIconSet(t,i){return this.addSvgIconSetInNamespace("",t,i)}addSvgIconSetLiteral(t,i){return this.addSvgIconSetLiteralInNamespace("",t,i)}addSvgIconSetInNamespace(t,i,r){return this._addSvgIconSetConfig(t,new Ah(i,null,r))}addSvgIconSetLiteralInNamespace(t,i,r){const s=this._sanitizer.sanitize($n.HTML,i);if(!s)throw IV(i);const o=ky(s);return this._addSvgIconSetConfig(t,new Ah("",o,r))}registerFontClassAlias(t,i=t){return this._fontCssClassesByAlias.set(t,i),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const i=this._sanitizer.sanitize($n.RESOURCE_URL,t);if(!i)throw DV(t);const r=this._cachedIconsByUrl.get(i);return r?ct(KM(r)):this._loadSvgIconFromConfig(new Ah(t,null)).pipe(Ii(s=>this._cachedIconsByUrl.set(i,s)),Ye(s=>KM(s)))}getNamedSvgIcon(t,i=""){const r=RV(i,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(i);return o?this._getSvgFromIconSetConfigs(t,o):jp(TV(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?ct(KM(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Ye(i=>KM(i)))}_getSvgFromIconSetConfigs(t,i){const r=this._extractIconWithNameFromAnySet(t,i);return r?ct(r):Y3(i.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Lc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize($n.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),ct(null)})))).pipe(Ye(()=>{const o=this._extractIconWithNameFromAnySet(t,i);if(!o)throw TV(t);return o}))}_extractIconWithNameFromAnySet(t,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Ii(i=>t.svgText=i),Ye(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?ct(null):this._fetchIcon(t).pipe(Ii(i=>t.svgText=i))}_extractSvgIconFromSet(t,i,r){const s=t.querySelector(`[id="${i}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(ky("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const i=this._document.createElement("DIV");i.innerHTML=t;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const i=this._svgElementFromString(ky("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&i.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(t.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(t,i){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),i&&i.viewBox&&t.setAttribute("viewBox",i.viewBox),t}_fetchIcon(t){const{url:i,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function aee(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const o=this._sanitizer.sanitize($n.RESOURCE_URL,i);if(!o)throw DV(i);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ye(c=>ky(c)),Hd(()=>this._inProgressUrlFetches.delete(o)),Mu());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,i,r){return this._svgIconConfigs.set(RV(t,i),r),this}_addSvgIconSetConfig(t,i){const r=this._iconSetConfigs.get(t);return r?r.push(i):this._iconSetConfigs.set(t,[i]),this}_svgElementFromConfig(t){if(!t.svgElement){const i=this._svgElementFromString(t.svgText);this._setSvgAttributes(i,t.options),t.svgElement=i}return t.svgElement}_getIconConfigFromResolvers(t,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,t);if(s)return cee(s)?new Ah(s.url,null,s.options):new Ah(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(Q(tR,8),Q(_D),Q(Ut,8),Q(ja))},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function KM(n){return n.cloneNode(!0)}function RV(n,e){return n+":"+e}function cee(n){return!(!n.url||!n.options)}const dee=AM(class{constructor(n){this._elementRef=n}}),uee=new ge("MAT_ICON_DEFAULT_OPTIONS"),hee=new ge("mat-icon-location",{providedIn:"root",factory:function fee(){const n=Pt(Ut),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),PV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],pee=PV.map(n=>`[${n}]`).join(", "),mee=/^url\(['"]?#(.*?)['"]?\)$/;let kV=(()=>{class n extends dee{get inline(){return this._inline}set inline(t){this._inline=An(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const i=this._cleanupFontValue(t);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const i=this._cleanupFontValue(t);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}constructor(t,i,r,s,o,a){super(t),this._iconRegistry=i,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=cn.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const i=t.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let i=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=t.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,i=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),i.forEach(r=>t.classList.add(r)),this._previousFontSetClass=i,this.fontIcon!==this._previousFontIconClass&&!i.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const i=t.querySelectorAll(pee),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)PV.forEach(o=>{const a=i[s],l=a.getAttribute(o),c=l?l.match(mee):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[i,r]=this._splitIconName(t);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe(Fi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(YM),Ba("aria-hidden"),D(hee),D(ja),D(uee,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,i){2&t&&(Bt("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet)("fontIcon",i._usingFontIcon()?i.fontIcon:null),Pn("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ht],ngContentSelectors:see,decls:1,vars:0,template:function(t,i){1&t&&(Sr(),Xt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),n})(),gee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,qn]}),n})();function OV(n,e){return e?t=>jv(e.pipe(Fi(1),function _ee(){return Gn((n,e)=>{n.subscribe(Bn(e,ls))})}()),t.pipe(OV(n))):Ji((t,i)=>ar(n(t,i)).pipe(Fi(1),MN(t)))}function LV(n,e=uy){const t=dM(n,e);return OV(()=>t)}const vee=["mat-menu-item",""];function yee(n,e){1&n&&(Fr(),Z(0,"svg",3),$e(1,"polygon",4),se())}const bee=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],xee=["mat-icon, [matMenuItemIcon]","*"];function wee(n,e){if(1&n){const t=Oi();Z(0,"div",0),ot("keydown",function(r){return Sn(t),Cn(Me()._handleKeydown(r))})("click",function(){return Sn(t),Cn(Me().closed.emit("click"))})("@transformMenu.start",function(r){return Sn(t),Cn(Me()._onAnimationStart(r))})("@transformMenu.done",function(r){return Sn(t),Cn(Me()._onAnimationDone(r))}),Z(1,"div",1),Xt(2),se()()}if(2&n){const t=Me();$("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),Bt("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const Mee=["*"],iR=new ge("MAT_MENU_PANEL"),See=gI(EM(class{}));let ZM=(()=>{class n extends See{constructor(t,i,r,s,o){super(),this._elementRef=t,this._document=i,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Ve,this._focused=new Ve,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,i):this._getHostElement().focus(i),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),i=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<i.length;r++)i[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(Ut),D(Xd),D(iR,8),D(ai))},n.\u0275cmp=bt({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(t,i){1&t&&ot("click",function(s){return i._checkDisabled(s)})("mouseenter",function(){return i._handleMouseEnter()}),2&t&&(Bt("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),Pn("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ht],attrs:vee,ngContentSelectors:xee,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){1&t&&(Sr(bee),Xt(0),Z(1,"span",0),Xt(2,1),se(),$e(3,"div",1),ye(4,yee,2,0,"svg",2)),2&t&&(q(3),$("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),q(1),$("ngIf",i._triggersSubmenu))},dependencies:[Di,xy],encapsulation:2,changeDetection:0}),n})();const Cee=new ge("MatMenuContent"),QM={transformMenu:zl("transformMenu",[mo("void",Si({opacity:0,transform:"scale(0.8)"})),qs("void => enter",po("120ms cubic-bezier(0, 0, 0.2, 1)",Si({opacity:1,transform:"scale(1)"}))),qs("* => void",po("100ms 25ms linear",Si({opacity:0})))]),fadeInItems:zl("fadeInItems",[mo("showing",Si({opacity:1})),qs("void => *",[Si({opacity:0}),po("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Eee=0;const FV=new ge("mat-menu-default-options",{providedIn:"root",factory:function Aee(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Oy=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=An(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=An(t)}set panelClass(t){const i=this._previousPanelClass;i&&i.length&&i.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,i,r,s){this._elementRef=t,this._ngZone=i,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Vp,this._classList={},this._panelAnimationState="void",this._animationDone=new Ve,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new st,this.close=this.closed,this.panelId="mat-menu-panel-"+Eee++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new a3(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Oo(this._directDescendantItems),gs(t=>cs(...t.map(i=>i._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const i=this._keyManager;if("enter"===this._panelAnimationState&&i.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,i.activeItemIndex||0));r[s]&&!r[s].disabled?i.setActiveItem(s):i.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Oo(this._directDescendantItems),gs(i=>cs(...i.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const i=t.keyCode,r=this._keyManager;switch(i){case 27:tl(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===i||40===i)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Fi(1)).subscribe(()=>{let i=null;if(this._directDescendantItems.length&&(i=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!i||!i.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&i&&i.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const i=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${i}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,i=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===i,r["mat-menu-below"]="below"===i,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Oo(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(i=>i._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft),D(FV),D(ai))},n.\u0275dir=Ae({type:n,contentQueries:function(t,i,r){if(1&t&&(Xi(r,Cee,5),Xi(r,ZM,5),Xi(r,ZM,4)),2&t){let s;kt(s=Ot())&&(i.lazyContent=s.first),kt(s=Ot())&&(i._allItems=s),kt(s=Ot())&&(i.items=s)}},viewQuery:function(t,i){if(1&t&&oi(uo,5),2&t){let r;kt(r=Ot())&&(i.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),Tee=(()=>{class n extends Oy{constructor(t,i,r,s){super(t,i,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft),D(FV),D(ai))},n.\u0275cmp=bt({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,i){2&t&&Bt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[zn([{provide:iR,useExisting:n}]),ht],ngContentSelectors:Mee,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(t,i){1&t&&(Sr(),ye(0,wee,3,6,"ng-template"))},dependencies:[Uv],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[QM.transformMenu,QM.fadeInItems]},changeDetection:0}),n})();const NV=new ge("mat-menu-scroll-strategy"),Iee={provide:NV,deps:[fo],useFactory:function Dee(n){return()=>n.scrollStrategies.reposition()}},BV=yh({passive:!0});let Ree=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(i=>{this._destroyMenu(i),("click"===i||"tab"===i)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(i)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,i,r,s,o,a,l,c,u){this._overlay=t,this._element=i,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=cn.EMPTY,this._hoverSubscription=cn.EMPTY,this._menuCloseSubscription=cn.EMPTY,this._changeDetectorRef=Pt(ai),this._handleTouchStart=h=>{uI(h)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new st,this.onMenuOpen=this.menuOpened,this.menuClosed=new st,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Oy?o:void 0,i.nativeElement.addEventListener("touchstart",this._handleTouchStart,BV)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,BV),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const i=this._createOverlay(t),r=i.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,i.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Oy&&(t._startAnimation(),t._directDescendantItems.changes.pipe(dt(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,i){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const i=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,i instanceof Oy?(i._resetAnimation(),i.lazyContent?i._animationDone.pipe(Hn(r=>"void"===r.toState),Fi(1),dt(i.lazyContent._attached)).subscribe({next:()=>i.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),i?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let i=0,r=t.parentMenu;for(;r;)i++,r=r.parentMenu;t.setElevation(i)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const i=this._getOverlayConfig(t);this._subscribeToPositions(t,i.positionStrategy),this._overlayRef=this._overlay.create(i),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new vy({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,i){t.setPositionClasses&&i.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,i){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,h]=[r,s],p=0;if(this.triggersSubmenu()){if(h=r="before"===t.xPosition?"start":"end",s=u="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");i.withPositions([{originX:r,originY:l,overlayX:u,overlayY:o,offsetY:p},{originX:s,originY:l,overlayX:h,overlayY:o,offsetY:p},{originX:r,originY:c,overlayX:u,overlayY:a,offsetY:-p},{originX:s,originY:c,overlayX:h,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),i=this._overlayRef.detachments();return cs(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:ct(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Hn(o=>o!==this._menuItemInstance),Hn(()=>this._menuOpen)):ct(),i)}_handleMousedown(t){dI(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const i=t.keyCode;(13===i||32===i)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===i&&"ltr"===this.dir||37===i&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Hn(t=>t===this._menuItemInstance&&!t.disabled),LV(0,ZD)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Oy&&this.menu._isAnimating?this.menu._animationDone.pipe(Fi(1),LV(0,ZD),dt(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new sm(t.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(D(fo),D(_t),D(is),D(NV),D(iR,8),D(ZM,10),D(el,8),D(Xd),D(ft))},n.\u0275dir=Ae({type:n,hostVars:3,hostBindings:function(t,i){1&t&&ot("click",function(s){return i._handleClick(s)})("mousedown",function(s){return i._handleMousedown(s)})("keydown",function(s){return i._handleKeydown(s)}),2&t&&Bt("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),Pee=(()=>{class n extends Ree{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[ht]}),n})(),kee=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[Iee],imports:[_a,TM,qn,dm,gy,qn]}),n})(),UV=(()=>{class n{constructor(t){this.viewContainerRef=t}}return n.\u0275fac=function(t){return new(t||n)(D(is))},n.\u0275dir=Ae({type:n,selectors:[["","dataBlockUI",""]]}),n})(),Oee=(()=>{class n{constructor(){this.resource=null,this.name="",this.resourceDescription="",this.changed=new st}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-fallback-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:2,vars:3,consts:[["matTooltipPosition","above",3,"matTooltip"]],template:function(t,i){1&t&&(Z(0,"p",0),it(1),se()),2&t&&($("matTooltip",i.resourceDescription),q(1),Fp("",null==i.resource?null:i.resource.name,"> GUI component for block ",((null==i.resource||null==i.resource.schema?null:i.resource.schema.block_class_mro)||"").split("__")[0]," not implemented :(\n"))},dependencies:[Ks],changeDetection:0}),n})();function Lee(n,e){if(1&n&&(Z(0,"h2",3),it(1),se()),2&n){const t=Me();$("matTooltip",t.resourceDescription),q(1),$i(t.name)}}const Fee=function(n,e,t,i){return{id:n,name:e,data:t,schema:i}};function Nee(n,e){if(1&n&&$e(0,"app-editor",5),2&n){const t=Me().$implicit,i=Me();$("resource",dF(2,Fee,i.resource.id+(i.resource.id.includes("__")?"/":"__")+t.key,t.key,null==i.data?null:i.data[t.key],null==i.schema?null:i.schema.fields[t.index].schema))("resourceDescription",(null==i.schema?null:i.schema.fields[t.index].description)||"")}}function Bee(n,e){if(1&n&&(ha(0),ye(1,Nee,1,7,"app-editor",4),gn(2,"async"),fa()),2&n){const t=e.$implicit,i=Me();q(1),$("ngIf",!(En(2,1,i.main.hideHiddenFields$)&&(null!=i.schema&&i.schema.fields[t.index].is_unknown||null!=i.schema&&i.schema.fields[t.index].is_programmatic)))}}let Th=(()=>{class n{constructor(t){this.main=t,this.resource=null,this.resourceDescription="",this.fieldWhitelist=null,this.fieldBlacklist=null,this.changed=new st}get name(){return this.resource&&this.resource.name}get data(){return this.resource&&this.resource.data}get schema(){return this.resource&&this.resource.schema}get fieldKeys(){let t=this.schema?.fields.map((i,r)=>({index:r,key:i.name}))||[];return this.fieldWhitelist?t=t.filter(({key:i})=>this.fieldWhitelist?.includes(i)):this.fieldBlacklist&&(t=t.filter(({key:i})=>!this.fieldBlacklist?.includes(i))),t}fieldTrackBy(t,i){return i.index}}return n.\u0275fac=function(t){return new(t||n)(D(wm))},n.\u0275cmp=bt({type:n,selectors:[["app-compound-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",fieldWhitelist:"fieldWhitelist",fieldBlacklist:"fieldBlacklist"},outputs:{changed:"changed"},decls:4,vars:5,consts:[["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf","ngForTrackBy"],["matTooltipPosition","above",3,"matTooltip"],[3,"resource","resourceDescription",4,"ngIf"],[3,"resource","resourceDescription"]],template:function(t,i){if(1&t&&(ye(0,Lee,2,2,"h2",0),gn(1,"async"),Z(2,"div",1),ye(3,Bee,3,3,"ng-container",2),se()),2&t){let r;$("ngIf",(null==i.resource?null:i.resource.name)!=(null==(r=En(1,3,i.main.resource$))?null:r.name)),q(3),$("ngForOf",i.fieldKeys)("ngForTrackBy",i.fieldTrackBy)}},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}"],changeDetection:0}),n})();function Uee(n,e){if(1&n&&(Z(0,"mat-label"),it(1),se()),2&n){const t=Me(2);q(1),$i(t.resource.name)}}function Vee(n,e){if(1&n){const t=Oi();Z(0,"mat-form-field",1),ye(1,Uee,2,1,"mat-label",2),Z(2,"input",3),ot("ngModelChange",function(r){return Sn(t),Cn(Me().resource.data=r)})("change",function(){return Sn(t),Cn(Me().changed.emit())}),se()()}if(2&n){const t=Me();$("matTooltip",t.resourceDescription),q(1),$("ngIf",t.resource.name),q(1),$("max",t.resource.schema.max_value)("min",t.resource.schema.min_value)("step",t.resource.schema.value_interval)("disabled",void 0!==t.resource.schema.required_value)("ngModel",t.resource.data)}}let zee=(()=>{class n{constructor(){this.resource=null,this.resourceDescription="",this.changed=new st}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-integer-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(t,i){1&t&&ye(0,Vee,3,7,"mat-form-field",0),2&t&&$("ngIf",i.resource)},dependencies:[Di,Uc,_m,Kd,bm,ym,Zd,Qd,il,xm,Ks],changeDetection:0}),n})();function Hee(n,e){if(1&n&&(Z(0,"mat-label"),it(1),se()),2&n){const t=Me(2);q(1),$i(t.resource.name)}}function Gee(n,e){if(1&n){const t=Oi();Z(0,"mat-form-field",1),ye(1,Hee,2,1,"mat-label",2),Z(2,"input",3),ot("ngModelChange",function(r){return Sn(t),Cn(Me().resource.data=r)})("change",function(){return Sn(t),Cn(Me().changed.emit())}),se()()}if(2&n){const t=Me();$("matTooltip",t.resourceDescription),q(1),$("ngIf",t.resource.name),q(1),$("disabled",void 0!==t.resource.schema.required_value)("maxlength",t.maxLength)("minlength",t.minLength)("ngModel",t.resource.data)}}let Wee=(()=>{class n{constructor(){this._resource=null,this.resourceDescription="",this.changed=new st,this.minLength=null,this.maxLength=null}get resource(){return this._resource}set resource(t){this._resource=t,isNaN(+this._resource?.schema.length)||(this.minLength=this.maxLength=+this._resource?.schema.length)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-string-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["matInput","","type","text",3,"disabled","maxlength","minlength","ngModel","ngModelChange","change"]],template:function(t,i){1&t&&ye(0,Gee,3,6,"mat-form-field",0),2&t&&$("ngIf",i.resource)},dependencies:[Di,Uc,Kd,XI,qI,Zd,Qd,il,xm,Ks],changeDetection:0}),n})();const Dh=function(){return[]};function $ee(n,e){if(1&n&&(Z(0,"mat-panel-description"),it(1," Click to view items ("),Z(2,"b"),it(3),se(),it(4,") "),se()),2&n){const t=Me(2);q(3),$i((t.resourceData||co(1,Dh)).length)}}function jee(n,e){1&n&&(Z(0,"mat-panel-description"),it(1," Empty array "),se())}function Xee(n,e){}function qee(n,e){if(1&n){const t=Oi();Z(0,"mat-expansion-panel",4),ot("opened",function(){return Sn(t),Cn(Me().onContentsTrigger(!0))})("closed",function(){return Sn(t),Cn(Me().onContentsTrigger(!1))}),Z(1,"mat-expansion-panel-header",5)(2,"mat-panel-title"),it(3),se(),ye(4,$ee,5,2,"mat-panel-description",1),ye(5,jee,2,0,"mat-panel-description",1),se(),ye(6,Xee,0,0,"ng-template",6),se()}if(2&n){const t=Me(),i=zr(3);q(1),$("matTooltip",t.resourceDescription),q(2),Er(" ",t.name," "),q(1),$("ngIf",(t.resourceData||co(5,Dh)).length>0),q(1),$("ngIf",0==(t.resourceData||co(6,Dh)).length),q(1),$("ngTemplateOutlet",i)}}function Yee(n,e){}function Kee(n,e){if(1&n&&(ha(0),Z(1,"h2",5),it(2),se(),Z(3,"div",7),ye(4,Yee,0,0,"ng-template",6),se(),fa()),2&n){const t=Me(),i=zr(3);q(1),$("matTooltip",t.resourceDescription),q(1),$i(t.name),q(2),$("ngTemplateOutlet",i)}}function Zee(n,e){}function Qee(n,e){if(1&n&&$e(0,"app-editor",10),2&n){const t=Me().$implicit,i=Me(3);$("resource",i.children[i.pageIndex*i.pageSize+t])}}function Jee(n,e){if(1&n&&(ha(0),ye(1,Qee,1,1,"app-editor",9),fa()),2&n){const t=e.$implicit,i=Me(3);q(1),$("ngIf",i.pageIndex*i.pageSize+t<i.children.length)}}function ete(n,e){}function tte(n,e){1&n&&(Z(0,"p"),it(1,"Empty array"),se())}function nte(n,e){if(1&n&&(ha(0),ye(1,Zee,0,0,"ng-template",6),ye(2,Jee,2,1,"ng-container",8),ye(3,ete,0,0,"ng-template",6),ye(4,tte,2,0,"p",1),fa()),2&n){const t=Me(2),i=zr(5);q(1),$("ngTemplateOutlet",i),q(1),$("ngForOf",t.renderIndexes),q(1),$("ngTemplateOutlet",i),q(1),$("ngIf",0==(t.resourceData||co(4,Dh)).length)}}function ite(n,e){if(1&n&&ye(0,nte,5,5,"ng-container",1),2&n){const t=Me();$("ngIf",t.renderContents||!t.showAsCollapsable)}}function rte(n,e){if(1&n&&(Z(0,"mat-option",18),it(1),se()),2&n){const t=e.$implicit,i=Me(3);$("value",t),q(1),Fp(" ",t*i.pageSize," - ",(t+1)*i.pageSize-1," ")}}const ste=function(n){return{hidden:n}};function ote(n,e){if(1&n){const t=Oi();Z(0,"div",12)(1,"mat-paginator",13),ot("page",function(r){return Sn(t),Cn(Me(2).renderPage(r.pageIndex,r.pageSize))}),se(),Z(2,"div",14)(3,"div",15),it(4,"Go To:"),se(),Z(5,"mat-form-field")(6,"mat-select",16),ot("ngModelChange",function(r){return Sn(t),Cn(Me(2).goToIndex=r)})("selectionChange",function(){Sn(t);const r=Me(2);return Cn(r.renderPage(r.goToIndex,r.pageSize))}),ye(7,rte,2,3,"mat-option",17),se()()()()}if(2&n){const t=Me(2);$("ngClass",hw(9,ste,(t.resourceData||co(8,Dh)).length<=t.minPageSize)),q(1),$("length",(t.resourceData||co(11,Dh)).length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",t.pageSizeOptions)("showFirstLastButtons",!0),q(5),$("ngModel",t.goToIndex),q(1),$("ngForOf",t.pageIndexes)}}function ate(n,e){1&n&&ye(0,ote,8,12,"div",11),2&n&&$("ngIf",(Me().resourceData||co(1,Dh)).length>0)}let rR=(()=>{class n{constructor(t){this.cdr=t,this._resource=null,this.resourceDescription="",this.changed=new st,this.showAsCollapsable=!1,this.renderContents=!1,this.minPageSize=10,this.pageIndex=0,this.pageSize=0,this.pageSizeOptions=[10,25,50,100],this.children=[],this.renderIndexes=[],this.goToIndex=0,this.pageIndexes=[]}set resource(t){this._resource=t,this.showAsCollapsable=this._resource?.data?.length>5,this.buildChildren(),this.renderPage(0,this.minPageSize),this.updatePageIndexes()}get resource(){return this._resource}get resourceData(){return this._resource?.data}buildChildren(){this.children=(this.resourceData||[]).map((t,i)=>({id:rl(this._resource.id,i),name:""+i,data:t,schema:this._resource.schema.child_schema}))}get schema(){return this._resource?.schema}get name(){return this._resource?.name||null}onContentsTrigger(t){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),t?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(t,i){this.pageSize!==i&&(this.renderIndexes=new Array(i).fill(null).map((r,s)=>s)),this.goToIndex=this.pageIndex=t,this.pageSize=i,this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let t=0;t<Math.ceil((this.resourceData||[]).length/this.pageSize);t++)this.pageIndexes.push(t)}}return n.\u0275fac=function(t){return new(t||n)(D(ai))},n.\u0275cmp=bt({type:n,selectors:[["app-array-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:6,vars:2,consts:[[3,"opened","closed",4,"ngIf"],[4,"ngIf"],["contents",""],["paginator",""],[3,"opened","closed"],["matTooltipPosition","above",3,"matTooltip"],[3,"ngTemplateOutlet"],[1,"mat-expansion-panel-body"],[4,"ngFor","ngForOf"],[3,"resource",4,"ngIf"],[3,"resource"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,i){1&t&&(ye(0,qee,7,7,"mat-expansion-panel",0),ye(1,Kee,5,3,"ng-container",1),ye(2,ite,1,1,"ng-template",null,2,Ic),ye(4,ate,1,2,"ng-template",null,3,Ic)),2&t&&($("ngIf",i.showAsCollapsable),q(1),$("ngIf",!i.showAsCollapsable))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0}),n})();function lte(n,e){1&n&&($e(0,"img",2),gn(1,"async")),2&n&&$("src",En(1,1,Me().imageUrl$),Q_)}const cte=function(){return["bitmap","palette"]};let dte=(()=>{class n{constructor(t,i,r){this.eelDelegate=t,this.cdr=i,this.main=r,this._resource$=new Ht(null),this.imageUrl$=new Ht(null),this.destroyed$=new Ve,this.changed=new st}set resource(t){this._resource$.next(t)}get resource(){return this._resource$.getValue()}ngAfterViewInit(){var t=this;return on(function*(){t._resource$.pipe(dt(t.destroyed$)).subscribe(function(){var i=on(function*(r){if(r){const s=yield t.eelDelegate.serializeResource(r.id);t.imageUrl$.next(s.find(o=>o.endsWith(".png"))||null)}else t.imageUrl$.next(null)});return function(r){return i.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return n.\u0275fac=function(t){return new(t||n)(D(Eh),D(ai),D(wm))},n.\u0275cmp=bt({type:n,selectors:[["app-bitmap-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:8,consts:[[3,"resource","fieldBlacklist"],[3,"src",4,"ngIf"],[3,"src"]],template:function(t,i){1&t&&($e(0,"app-compound-block-ui",0),gn(1,"async"),ye(2,lte,2,3,"img",1),gn(3,"async")),2&t&&($("resource",En(1,3,i._resource$))("fieldBlacklist",co(7,cte)),q(2),$("ngIf",En(3,5,i.imageUrl$)))},dependencies:[Di,Th,Nd],styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;row-gap:1rem}img[_ngcontent-%COMP%]{min-width:10rem;background-image:linear-gradient(45deg,#808080 25%,transparent 25%),linear-gradient(-45deg,#808080 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#808080 75%),linear-gradient(-45deg,transparent 75%,#808080 75%);background-size:16px 16px;background-color:#aaa}"],changeDetection:0}),n})();const ute=function(n){return{"background-color":n}};function hte(n,e){if(1&n&&$e(0,"div",3),2&n){const t=e.$implicit,i=e.index,r=Me();$("ngStyle",hw(2,ute,"#"+r.lpad(t.toString(16),"0",8)))("matTooltip",i+": #"+t.toString(16))}}const fte=function(){return["colors"]};let pte=(()=>{class n{constructor(){this.resource=null,this.changed=new st}get resourceData(){return this.resource?.data}lpad(t,i,r){for(;t.length<r;)t=i+t;return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-palette-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:3,vars:4,consts:[[3,"resource","fieldBlacklist"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip",4,"ngFor","ngForOf"],[1,"color-box",3,"ngStyle","matTooltip"]],template:function(t,i){1&t&&($e(0,"app-compound-block-ui",0),Z(1,"div",1),ye(2,hte,1,4,"div",2),se()),2&t&&($("resource",i.resource)("fieldBlacklist",co(3,fte)),q(2),$("ngForOf",null==i.resourceData?null:i.resourceData.colors))},dependencies:[ga,Pw,Ks,Th],styles:["#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0}),n})();const mte=["editor"];let gte=(()=>{class n{constructor(t){this.cdr=t,this._resource=null,this.resourceDescription="",this.changed=new st,this.editorProps={}}get resource(){return this._resource}set resource(t){this._resource=t,this.editor&&(this.editorProps.data=t?new Uint8Array(t.data):void 0,this.editor.$set({props:{data:this.editorProps.data}}),this.cdr.markForCheck())}ngAfterViewInit(){this.resource&&(this.editorProps.data=new Uint8Array(this.resource.data)),this.editor=new HexEditor({target:this.editorDiv?.nativeElement,props:this.editorProps}),this.cdr.markForCheck()}ngOnDestroy(){this.editor&&this.editor.$destroy()}}return n.\u0275fac=function(t){return new(t||n)(D(ai))},n.\u0275cmp=bt({type:n,selectors:[["app-binary-block-ui"]],viewQuery:function(t,i){if(1&t&&oi(mte,5),2&t){let r;kt(r=Ot())&&(i.editorDiv=r.first)}},inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:4,vars:2,consts:[["matTooltipPosition","above",3,"matTooltip"],["editor",""]],template:function(t,i){1&t&&(Z(0,"h2",0),it(1),se(),$e(2,"div",null,1)),2&t&&($("matTooltip",i.resourceDescription),q(1),$i(null==i.resource?null:i.resource.name))},dependencies:[Ks],changeDetection:0}),n})();const _te=["picker"];function vte(n,e){if(1&n&&(Z(0,"mat-label",8),it(1),se()),2&n){const t=Me();q(1),$i(null==t.resource?null:t.resource.name)}}const yte=function(n){return{transform:n}};let bte=(()=>{class n{constructor(t){this.cdr=t,this.resource=null,this.resourceDescription="",this.changed=new st,this.pi=Math.PI,this.dragging=!1}mousedown(t){this.dragging=!0,this.updateRotation(t)}mousemove(t){this.dragging&&this.updateRotation(t)}mouseout(){this.dragging=!1}updateRotation(t){const i=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(t.clientY-i.top-i.height/2,t.clientX-i.left-i.width/2);t.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resource.data=r,this.changed.emit(),this.cdr.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(D(ai))},n.\u0275cmp=bt({type:n,selectors:[["app-angle-block-ui"]],viewQuery:function(t,i){if(1&t&&oi(_te,5),2&t){let r;kt(r=Ot())&&(i.picker=r.first)}},hostBindings:function(t,i){1&t&&ot("mousedown",function(s){return i.mousedown(s)})("mousemove",function(s){return i.mousemove(s)})("mouseup",function(){return i.mouseout()})("mouseleave",function(){return i.mouseout()})},inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:14,vars:13,consts:[["id","wrapper","matTooltipPosition","above",3,"matTooltip"],[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span",4,"ngIf"],["id","name-span"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1,2)(3,"div",3),$e(4,"div",4)(5,"div",5),se()(),Z(6,"div",6),ye(7,vte,2,1,"mat-label",7),Z(8,"mat-label"),it(9),gn(10,"number"),se(),Z(11,"mat-label"),it(12),gn(13,"number"),se()()()),2&t&&($("matTooltip",i.resourceDescription),q(3),$("ngStyle",hw(11,yte,"rotate("+((null==i.resource?null:i.resource.data)||0)+"rad)")),q(4),$("ngIf",null==i.resource?null:i.resource.name),q(2),Er("",v1(10,5,180*(null==i.resource?null:i.resource.data)/i.pi||0,"1.2-2")," deg"),q(3),Er("",v1(13,8,(null==i.resource?null:i.resource.data)||0,"1.2-2")," rad"))},dependencies:[Di,Pw,il,Ks,V2],styles:["#wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0}),n})();class VV{constructor(){}deepEquals(e,t){if(null===e&&null!==t)return!1;if(null===t&&null!==e)return!1;if(!0===Array.isArray(e)){if(!1===Array.isArray(t))return!1;if(e.length!==t.length)return!1;{const i=new Set,r=new Set,s=new Set,o=new Set;for(const h of e)!0===Array.isArray(h)?i.add(h):"object"==typeof h?r.add(h):"function"==typeof h?o.add(JSON.stringify(""+h)):s.add(h);const a=new Set,l=new Set,c=new Set,u=new Set;for(const h of t)!0===Array.isArray(h)?a.add(h):"object"==typeof h?l.add(h):"function"==typeof h?u.add(JSON.stringify(""+h)):c.add(h);if(s.size!==c.size)return!1;{let h=!0;for(const p of s)if(!1===c.has(p)){h=!1;break}if(!1===h)return!1;if(r.size===l.size){h=!0;for(const p of r){let m=!1;for(const g of l)if(!0===this.deepEquals(p,g)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(i.size===a.size){h=!0;for(const p of i){let m=!1;for(const g of a)if(!0===this.deepEquals(p,g)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(o.size===u.size){h=!0;for(const p of o)if(!1===u.has(p)){h=!1;break}return!1!==h}return!1}return!1}return!1}}}if("object"==typeof e&&null!==e){if("object"!=typeof t)return!1;{let i=!0;if(Object.keys(e).length===Object.keys(t).length){for(const[r,s]of Object.entries(e))if(i=this.deepEquals(s,t[r]),!1===i)break}else i=!1;return i}}return!0!==Array.isArray(t)&&("object"!=typeof t||null===t)&&("function"==typeof e?"function"==typeof t&&JSON.stringify(""+e)===JSON.stringify(""+t):JSON.stringify(e)===JSON.stringify(t))}}function xte(n,e){if(1&n&&(Z(0,"mat-list-option",3),it(1),se()),2&n){const t=e.$implicit,i=Me();$("value",t)("selected",i.selectedValue==t),q(1),Er(" ",t," ")}}function wte(n,e){if(1&n&&(Z(0,"mat-card"),$e(1,"app-editor",4),se()),2&n){const t=Me();q(1),$("resource",t.resources[t.selectedValue])}}let sR=(()=>{class n{constructor(t){this.deep=t,this._resources={},this._selectedValue=null}get resources(){return this._resources}set resources(t){const i=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(t));this._resources=t,i&&(this.selectedValue=Object.keys(t).length>0?Object.keys(t)[0]:null)}set selectedValue(t){this._selectedValue=t}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}}return n.\u0275fac=function(t){return new(t||n)(D(VV))},n.\u0275cmp=bt({type:n,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected"],[3,"resource"]],template:function(t,i){1&t&&(Z(0,"mat-selection-list",0),ot("selectionChange",function(s){return i.selectedValue=s.source.selectedOptions.selected[0].value}),ye(1,xte,2,3,"mat-list-option",1),se(),ye(2,wte,2,1,"mat-card",2)),2&t&&($("multiple",!1),q(1),$("ngForOf",i.keys),q(1),$("ngIf",i.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;max-width:33%;flex-shrink:0;padding:0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]{background-color:#e0e0e0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]:focus{background-color:unset}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]     .mdc-radio{display:none}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%;padding:1rem}"]}),n})();const Mte=function(){return["children","children_descriptions"]};let Ste=(()=>{class n{constructor(){this._resource=null,this.resourceMap={},this.changed=new st}get resource(){return this._resource}set resource(t){this._resource=t,this.resourceMap={};const i=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!i)return;let r=0;for(const[s,o]of this.resourceData.children_aliases.entries()){let a=o||"__"+r++;this.resourceMap[a]={id:rl(this._resource?.id||"",`children/${s}`),data:this.resourceData?.children[s],schema:i,name:""}}}get resourceData(){return this._resource?.data}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-shpi-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:2,vars:4,consts:[[3,"resource","fieldBlacklist"],[3,"resources"]],template:function(t,i){1&t&&$e(0,"app-compound-block-ui",0)(1,"app-sidenav-res-list",1),2&t&&($("resource",i.resource)("fieldBlacklist",co(3,Mte)),q(1),$("resources",i.resourceMap))},dependencies:[Th,sR],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 16px}"],changeDetection:0}),n})(),Cte=(()=>{class n{constructor(){this._resource=null,this.resourceMap={},this.changed=new st}get resource(){return this._resource}set resource(t){this._resource=t,this.resourceMap={};const i=(this._resource?.schema.fields||[]).find(r=>"children"===r.name)?.schema.child_schema;if(i)for(let r=0;r<this.resourceData.children.length;r++)this.resourceMap[r.toString()]={id:rl(this._resource?.id||"",`children/${r}`),data:this.resourceData.children[r],schema:i,name:""}}get resourceData(){return this._resource?.data}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-wwww-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(t,i){1&t&&$e(0,"app-sidenav-res-list",0),2&t&&$("resources",i.resourceMap)},dependencies:[sR],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0}),n})();class oR{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(e=!1,t,i=!0,r){this._multiple=e,this._emitChanges=i,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Ve,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}select(...e){this._verifyValueAssignment(e),e.forEach(i=>this._markSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(i=>this._unmarkSelected(i));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,i=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!i.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){return this._selection.has(this._getConcreteValue(e))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){e=this._getConcreteValue(e),this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){e=this._getConcreteValue(e),this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(e){if(this.compareWith){for(let t of this._selection)if(this.compareWith(e,t))return t;return e}return e}}let zV=(()=>{class n{constructor(){this._listeners=[]}notify(t,i){for(let r of this._listeners)r(t,i)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(i=>t!==i)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ete=["trigger"],Ate=["panel"];function Tte(n,e){if(1&n&&(Z(0,"span",10),it(1),se()),2&n){const t=Me();q(1),$i(t.placeholder)}}function Dte(n,e){if(1&n&&(Z(0,"span",14),it(1),se()),2&n){const t=Me(2);q(1),$i(t.triggerValue)}}function Ite(n,e){1&n&&Xt(0,0,["*ngSwitchCase","true"])}function Rte(n,e){1&n&&(Z(0,"span",11),ye(1,Dte,2,1,"span",12),ye(2,Ite,1,0,"ng-content",13),se()),2&n&&($("ngSwitch",!!Me().customTrigger),q(2),$("ngSwitchCase",!0))}function Pte(n,e){if(1&n){const t=Oi();Fr(),es(),Z(0,"div",15,16),ot("@transformPanel.done",function(r){return Sn(t),Cn(Me()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return Sn(t),Cn(Me()._handleKeydown(r))}),Xt(2,1),se()}if(2&n){const t=Me();vL("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",t._getPanelTheme(),""),$("ngClass",t.panelClass)("@transformPanel","showing"),Bt("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const kte=[[["mat-select-trigger"]],"*"],Ote=["mat-select-trigger","*"],Lte={transformPanelWrap:zl("transformPanelWrap",[qs("* => void",bI("@transformPanel",[yI()],{optional:!0}))]),transformPanel:zl("transformPanel",[mo("void",Si({opacity:0,transform:"scale(1, 0.8)"})),qs("void => showing",po("120ms cubic-bezier(0, 0, 0.2, 1)",Si({opacity:1,transform:"scale(1, 1)"}))),qs("* => void",po("100ms linear",Si({opacity:0})))])};let HV=0;const GV=new ge("mat-select-scroll-strategy"),Nte=new ge("MAT_SELECT_CONFIG"),Bte={provide:GV,deps:[fo],useFactory:function Fte(n){return()=>n.scrollStrategies.reposition()}},Ute=new ge("MatSelectTrigger");class Vte{constructor(e,t){this.source=e,this.value=t}}const zte=gI(b3(EM(x3(class{constructor(n,e,t,i,r){this._elementRef=n,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=i,this.ngControl=r,this.stateChanges=new Ve}}))));let Hte=(()=>{class n extends zte{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(AI.required)??!1}set required(t){this._required=An(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=An(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=An(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=Xs(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}constructor(t,i,r,s,o,a,l,c,u,h,p,m,g,b){super(o,s,l,c,h),this._viewportRuler=t,this._changeDetectorRef=i,this._ngZone=r,this._dir=a,this._parentFormField=u,this._liveAnnouncer=g,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(y,v)=>y===v,this._uid="mat-select-"+HV++,this._triggerAriaLabelledBy=null,this._destroy=new Ve,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+HV++,this._panelDoneAnimatingStream=new Ve,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=Xv(()=>{const y=this.options;return y?y.changes.pipe(Oo(y),gs(()=>cs(...y.map(v=>v.onSelectionChange)))):this._ngZone.onStable.pipe(Fi(1),gs(()=>this.optionSelectionChanges))}),this.openedChange=new st,this._openedStream=this.openedChange.pipe(Hn(y=>y),Ye(()=>{})),this._closedStream=this.openedChange.pipe(Hn(y=>!y),Ye(()=>{})),this.selectionChange=new st,this.valueChange=new st,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}ngOnInit(){this._selectionModel=new oR(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(wh(),dt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(dt(this._destroy)).subscribe(t=>{t.added.forEach(i=>i.select()),t.removed.forEach(i=>i.deselect())}),this.options.changes.pipe(Oo(null),dt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),i=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}i&&(this._previousControl!==i.control&&(void 0!==this._previousControl&&null!==i.disabled&&i.disabled!==this.disabled&&(this.disabled=i.disabled),this._previousControl=i.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(i=>i.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const i=t.keyCode,r=40===i||38===i||37===i||39===i,s=13===i||32===i,o=this._keyManager;if(!o.isTyping()&&s&&!tl(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const i=this._keyManager,r=t.keyCode,s=40===r||38===r,o=i.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!i.activeItem||tl(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=i.activeItemIndex;i.onKeydown(t),this._multiple&&s&&t.shiftKey&&i.activeItem&&i.activeItemIndex!==a&&i.activeItem._selectViaInteraction()}else t.preventDefault(),i.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Fi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this.options.forEach(i=>i.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(i=>this._selectOptionByValue(i)),this._sortValues();else{const i=this._selectOptionByValue(t);i?this._keyManager.updateActiveItem(i):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const i=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return i&&this._selectionModel.select(i),i}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new KY(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=cs(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(dt(t)).subscribe(i=>{this._onSelect(i.source,i.isUserInput),i.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),cs(...this.options.map(i=>i._stateChanges)).pipe(dt(t)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(t,i){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),i&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),i&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((i,r)=>this.sortComparator?this.sortComparator(i,r,t):t.indexOf(i)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let i=null;i=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=i,this.valueChange.emit(i),this._onChange(i),this.selectionChange.emit(this._getChangeEvent(i)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let i=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(i+=" "+this.ariaLabelledby),i}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(t){return new(t||n)(D(pM),D(ai),D(ft),D(w3),D(_t),D(el,8),D(Iy,8),D(vm,8),D(KI,8),D(Hl,10),Ba("tabindex"),D(GV),D(hI),D(Nte,8))},n.\u0275dir=Ae({type:n,viewQuery:function(t,i){if(1&t&&(oi(Ete,5),oi(Ate,5),oi(KB,5)),2&t){let r;kt(r=Ot())&&(i.trigger=r.first),kt(r=Ot())&&(i.panel=r.first),kt(r=Ot())&&(i._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[ht,Hi]}),n})(),Ly=(()=>{class n extends Hte{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(dt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(t){const i=this.options.toArray()[t];if(i){const r=this.panel.nativeElement,s=function zK(n,e,t){if(t.length){let i=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<n+1;o++)i[o].group&&i[o].group===r[s]&&s++;return s}return 0}(t,this.options,this.optionGroups),o=i._getHostElement();r.scrollTop=0===t&&1===s?0:function HK(n,e,t,i){return n<t?n:n+e>t+i?Math.max(0,n-i+e):t}(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(t){return new Vte(this,t)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof rI?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=An(t),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const t of this.options)t._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275cmp=bt({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,r){if(1&t&&(Xi(r,Ute,5),Xi(r,mm,5),Xi(r,I3,5)),2&t){let s;kt(s=Ot())&&(i.customTrigger=s.first),kt(s=Ot())&&(i.options=s),kt(s=Ot())&&(i.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(t,i){1&t&&ot("keydown",function(s){return i._handleKeydown(s)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),2&t&&(Bt("id",i.id)("tabindex",i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),Pn("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[zn([{provide:YI,useExisting:n},{provide:D3,useExisting:n}]),ht],ngContentSelectors:Ote,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,i){if(1&t&&(Sr(kte),Z(0,"div",0,1),ot("click",function(){return i.toggle()}),Z(3,"div",2),ye(4,Tte,2,1,"span",3),ye(5,Rte,3,2,"span",4),se(),Z(6,"div",5)(7,"div",6),Fr(),Z(8,"svg",7),$e(9,"path",8),se()()()(),ye(10,Pte,3,9,"ng-template",9),ot("backdropClick",function(){return i.close()})("attach",function(){return i._onAttached()})("detach",function(){return i.close()})),2&t){const r=zr(1);Bt("aria-owns",i.panelOpen?i.id+"-panel":null),q(3),$("ngSwitch",i.empty),Bt("id",i._valueId),q(1),$("ngSwitchCase",!0),q(1),$("ngSwitchCase",!1),q(5),$("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",i.panelOpen)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)}},dependencies:[Uv,Vv,sD,F2,KB,rI],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Lte.transformPanel]},changeDetection:0}),n})(),WV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[Bte],imports:[_a,dm,vI,qn,gy,GM,vI,qn]}),n})();function Gte(n,e){if(1&n&&(Z(0,"mat-label"),it(1),se()),2&n){const t=Me(3);q(1),$i(t.resource.name)}}function Wte(n,e){if(1&n&&(Z(0,"mat-option",6),it(1),se()),2&n){const t=e.$implicit;$("value",t[1]),q(1),Er(" ",t[1]," ")}}function $te(n,e){if(1&n){const t=Oi();Z(0,"mat-form-field",3),ye(1,Gte,2,1,"mat-label",0),Z(2,"mat-select",4),ot("valueChange",function(r){return Sn(t),Cn(Me(2).resource.data=r)})("selectionChange",function(){return Sn(t),Cn(Me(2).changed.emit())}),ye(3,Wte,2,2,"mat-option",5),se()()}if(2&n){const t=Me(2);$("matTooltip",t.resourceDescription),q(1),$("ngIf",t.resource.name),q(1),$("value",t.resource.data),q(1),$("ngForOf",t.resource.schema.enum_names)}}function jte(n,e){if(1&n&&(Z(0,"mat-label"),it(1),se()),2&n){const t=Me(3);q(1),$i(t.resource.name)}}function Xte(n,e){if(1&n){const t=Oi();Z(0,"mat-form-field",3),ye(1,jte,2,1,"mat-label",0),Z(2,"input",7),ot("ngModelChange",function(r){return Sn(t),Cn(Me(2).resource.data=r)})("change",function(){return Sn(t),Cn(Me(2).changed.emit())}),se()()}if(2&n){const t=Me(2);$("matTooltip",t.resourceDescription),q(1),$("ngIf",t.resource.name),q(1),$("min",0)("max",256*(t.resource.schema.length||1)-1)("ngModel",t.resource.data)}}function qte(n,e){if(1&n&&(ha(0),ye(1,$te,4,4,"mat-form-field",1),ye(2,Xte,3,5,"ng-template",null,2,Ic),fa()),2&n){const t=zr(3),i=Me();q(1),$("ngIf",i.isKnownEnumValue(i.resource.data))("ngIfElse",t)}}let Yte=(()=>{class n{constructor(){this.resource=null,this.resourceDescription="",this.changed=new st}isKnownEnumValue(t){return!!this.resource?.schema.enum_names.find(([i,r])=>r==t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-enum-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf","ngIfElse"],["unknownEnum",""],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange","change"]],template:function(t,i){1&t&&ye(0,qte,4,2,"ng-container",0),2&t&&$("ngIf",i.resource)},dependencies:[ga,Di,Uc,_m,Kd,bm,ym,Zd,Qd,il,xm,Ks,Ly,mm],changeDetection:0}),n})();const Kte=["*"],Qte=["unscopedContent"];function Jte(n,e){1&n&&Xt(0,4)}function ene(n,e){if(1&n&&(Z(0,"div",11),$e(1,"input",12),Z(2,"div",13),Fr(),Z(3,"svg",14),$e(4,"path",15),se(),es(),$e(5,"div",16),se()()),2&n){const t=Me();Pn("mdc-checkbox--disabled",t.disabled),q(1),$("checked",t.selected)("disabled",t.disabled)}}function tne(n,e){if(1&n&&(Z(0,"div",17),$e(1,"input",18),Z(2,"div",19),$e(3,"div",20)(4,"div",21),se()()),2&n){const t=Me();Pn("mdc-radio--disabled",t.disabled),q(1),$("checked",t.selected)("disabled",t.disabled)}}function nne(n,e){}function ine(n,e){if(1&n&&(Z(0,"span",22),ye(1,nne,0,0,"ng-template",23),se()),2&n){Me();const t=zr(3);q(1),$("ngTemplateOutlet",t)}}function rne(n,e){}function sne(n,e){if(1&n&&(Z(0,"span",24),ye(1,rne,0,0,"ng-template",23),se()),2&n){Me();const t=zr(5);q(1),$("ngTemplateOutlet",t)}}function one(n,e){}function ane(n,e){1&n&&ye(0,one,0,0,"ng-template",23),2&n&&(Me(),$("ngTemplateOutlet",zr(1)))}function lne(n,e){}function cne(n,e){if(1&n&&(Z(0,"span",25),ye(1,lne,0,0,"ng-template",23),se()),2&n){Me();const t=zr(3);q(1),$("ngTemplateOutlet",t)}}function dne(n,e){}function une(n,e){if(1&n&&(Z(0,"span",25),ye(1,dne,0,0,"ng-template",23),se()),2&n){Me();const t=zr(5);q(1),$("ngTemplateOutlet",t)}}function hne(n,e){}function fne(n,e){1&n&&ye(0,hne,0,0,"ng-template",23),2&n&&(Me(),$("ngTemplateOutlet",zr(1)))}const pne=[[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["mat-divider"]],[["","matListItemAvatar",""],["","matListItemIcon",""]]],mne=["[matListItemTitle]","[matListItemLine]","*","mat-divider","[matListItemAvatar],[matListItemIcon]"],$V=new ge("ListOption");let gne=(()=>{class n{constructor(t){this._elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(D(_t))},n.\u0275dir=Ae({type:n,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),n})(),_ne=(()=>{class n{constructor(t){this._elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(D(_t))},n.\u0275dir=Ae({type:n,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),n})(),jV=(()=>{class n{constructor(t){this._listOption=t}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return n.\u0275fac=function(t){return new(t||n)(D($V,8))},n.\u0275dir=Ae({type:n,hostVars:4,hostBindings:function(t,i){2&t&&Pn("mdc-list-item__start",i._isAlignedAtStart())("mdc-list-item__end",!i._isAlignedAtStart())}}),n})(),vne=(()=>{class n extends jV{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[ht]}),n})(),yne=(()=>{class n extends jV{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Mi(n)))(i||n)}}(),n.\u0275dir=Ae({type:n,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[ht]}),n})();const bne=new ge("MAT_LIST_CONFIG");let aR=(()=>{class n{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=Pt(bne,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=An(t)}get disabled(){return this._disabled}set disabled(t){this._disabled=An(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,hostVars:1,hostBindings:function(t,i){2&t&&Bt("aria-disabled",i.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),n})(),XV=(()=>{class n{set lines(t){this._explicitLines=Xs(t,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(t){this._disableRipple=An(t)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(t){this._disabled=An(t)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(t,i,r,s,o,a){this._elementRef=t,this._ngZone=i,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new cn,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===a,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new pm(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(cs(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(t){if(!this._lines||!this._titles||!this._unscopedContent)return;t&&this._checkDomForUnscopedTextContent();const i=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",i<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===i),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===i),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===i;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let t=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(t+=1),t}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(t=>t.nodeType!==t.COMMENT_NODE).some(t=>!(!t.textContent||!t.textContent.trim()))}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft),D(aR,8),D(Ni),D(_I,8),D(rs,8))},n.\u0275dir=Ae({type:n,contentQueries:function(t,i,r){if(1&t&&(Xi(r,vne,4),Xi(r,yne,4)),2&t){let s;kt(s=Ot())&&(i._avatars=s),kt(s=Ot())&&(i._icons=s)}},hostVars:4,hostBindings:function(t,i){2&t&&(Bt("aria-disabled",i.disabled)("disabled",i._isButtonElement&&i.disabled||null),Pn("mdc-list-item--disabled",i.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),n})();const qV=new ge("SelectionList");let JM=(()=>{class n extends XV{get checkboxPosition(){return this.togglePosition}set checkboxPosition(t){this.togglePosition=t}get color(){return this._color||this._selectionList.color}set color(t){this._color=t}get value(){return this._value}set value(t){this.selected&&t!==this.value&&this._inputsInitialized&&(this.selected=!1),this._value=t}get selected(){return this._selectionList.selectedOptions.isSelected(this)}set selected(t){const i=An(t);i!==this._selected&&(this._setSelected(i),(i||this._selectionList.multiple)&&this._selectionList._reportValueChange())}constructor(t,i,r,s,o,a,l){super(t,i,r,s,a,l),this._selectionList=r,this._changeDetectorRef=o,this.selectedChange=new st,this.togglePosition="after",this._selected=!1,this._inputsInitialized=!1}ngOnInit(){const t=this._selectionList;t._value&&t._value.some(r=>t.compareWith(this._value,r))&&this._setSelected(!0);const i=this._selected;Promise.resolve().then(()=>{(this._selected||i)&&(this.selected=!0,this._changeDetectorRef.markForCheck())}),this._inputsInitialized=!0}ngOnDestroy(){super.ngOnDestroy(),this.selected&&Promise.resolve().then(()=>{this.selected=!1})}toggle(){this.selected=!this.selected}focus(){this._hostElement.focus()}getLabel(){return(this._titles?.get(0)?._elementRef.nativeElement||this._unscopedContent?.nativeElement)?.textContent||""}_hasCheckboxAt(t){return this._selectionList.multiple&&this._getTogglePosition()===t}_hasRadioAt(t){return!this._selectionList.multiple&&this._getTogglePosition()===t&&!this._selectionList.hideSingleSelectionIndicator}_hasIconsOrAvatarsAt(t){return this._hasProjected("icons",t)||this._hasProjected("avatars",t)}_hasProjected(t,i){return this._getTogglePosition()!==i&&("avatars"===t?0!==this._avatars.length:0!==this._icons.length)}_handleBlur(){this._selectionList._onTouched()}_getTogglePosition(){return this.togglePosition||"after"}_setSelected(t){return t!==this._selected&&(this._selected=t,t?this._selectionList.selectedOptions.select(this):this._selectionList.selectedOptions.deselect(this),this.selectedChange.emit(t),this._changeDetectorRef.markForCheck(),!0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_toggleOnInteraction(){this.disabled||(this._selectionList.multiple?(this.selected=!this.selected,this._selectionList._emitChangeEvent([this])):this.selected||(this.selected=!0,this._selectionList._emitChangeEvent([this])))}_setTabindex(t){this._hostElement.setAttribute("tabindex",t+"")}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft),D(qV),D(Ni),D(ai),D(_I,8),D(rs,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-list-option"]],contentQueries:function(t,i,r){if(1&t&&(Xi(r,_ne,5),Xi(r,gne,5)),2&t){let s;kt(s=Ot())&&(i._lines=s),kt(s=Ot())&&(i._titles=s)}},viewQuery:function(t,i){if(1&t&&oi(Qte,5),2&t){let r;kt(r=Ot())&&(i._unscopedContent=r.first)}},hostAttrs:["role","option",1,"mat-mdc-list-item","mat-mdc-list-option","mdc-list-item"],hostVars:25,hostBindings:function(t,i){1&t&&ot("blur",function(){return i._handleBlur()})("click",function(){return i._toggleOnInteraction()}),2&t&&(Bt("aria-selected",i.selected),Pn("mdc-list-item--selected",i.selected&&!i._selectionList.multiple&&i._selectionList.hideSingleSelectionIndicator)("mdc-list-item--with-leading-avatar",i._hasProjected("avatars","before"))("mdc-list-item--with-leading-icon",i._hasProjected("icons","before"))("mdc-list-item--with-trailing-icon",i._hasProjected("icons","after"))("mat-mdc-list-option-with-trailing-avatar",i._hasProjected("avatars","after"))("mdc-list-item--with-leading-checkbox",i._hasCheckboxAt("before"))("mdc-list-item--with-trailing-checkbox",i._hasCheckboxAt("after"))("mdc-list-item--with-leading-radio",i._hasRadioAt("before"))("mdc-list-item--with-trailing-radio",i._hasRadioAt("after"))("mat-accent","primary"!==i.color&&"warn"!==i.color)("mat-warn","warn"===i.color)("_mat-animation-noopable",i._noopAnimations))},inputs:{togglePosition:"togglePosition",checkboxPosition:"checkboxPosition",color:"color",value:"value",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[zn([{provide:XV,useExisting:n},{provide:$V,useExisting:n}]),ht],ngContentSelectors:mne,decls:20,vars:6,consts:[["icons",""],["checkbox",""],["radio",""],["class","mdc-list-item__start mat-mdc-list-option-checkbox-before",4,"ngIf"],["class","mdc-list-item__start mat-mdc-list-option-radio-before",4,"ngIf"],[3,"ngIf"],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],["class","mdc-list-item__end",4,"ngIf"],[1,"mat-mdc-focus-indicator"],[1,"mdc-checkbox"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","disabled"],[1,"mdc-checkbox__background"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],[1,"mdc-radio"],["type","radio",1,"mdc-radio__native-control",3,"checked","disabled"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],[1,"mdc-list-item__start","mat-mdc-list-option-checkbox-before"],[3,"ngTemplateOutlet"],[1,"mdc-list-item__start","mat-mdc-list-option-radio-before"],[1,"mdc-list-item__end"]],template:function(t,i){1&t&&(Sr(pne),ye(0,Jte,1,0,"ng-template",null,0,Ic),ye(2,ene,6,4,"ng-template",null,1,Ic),ye(4,tne,5,4,"ng-template",null,2,Ic),ye(6,ine,2,1,"span",3),ye(7,sne,2,1,"span",4),ye(8,ane,1,1,"ng-template",5),Z(9,"span",6),Xt(10),Xt(11,1),Z(12,"span",7,8),ot("cdkObserveContent",function(){return i._updateItemLines(!0)}),Xt(14,2),se()(),ye(15,cne,2,1,"span",9),ye(16,une,2,1,"span",9),ye(17,fne,1,1,"ng-template",5),Xt(18,3),$e(19,"div",10)),2&t&&(q(6),$("ngIf",i._hasCheckboxAt("before")),q(1),$("ngIf",i._hasRadioAt("before")),q(1),$("ngIf",i._hasIconsOrAvatarsAt("before")),q(7),$("ngIf",i._hasCheckboxAt("after")),q(1),$("ngIf",i._hasRadioAt("after")),q(1),$("ngIf",i._hasIconsOrAvatarsAt("after")))},dependencies:[JB,Di,zv],styles:['.mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item,.mat-mdc-list-option-with-trailing-avatar.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end,.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-touch-target-wrapper{display:inline}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mat-mdc-list-option .mdc-checkbox[hidden]{display:none}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0}.mdc-checkbox--upgraded .mat-mdc-list-option .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__checkmark-path{stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mat-mdc-list-option .mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mat-mdc-list-option .mdc-radio[hidden]{display:none}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:""}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mat-mdc-list-option .mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mat-mdc-list-option .mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background,.mat-mdc-list-option [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__background{transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__mixedmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:focus+.mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox{padding:calc((40px - 18px) / 2);padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((40px - 40px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.38);border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:rgba(0, 0, 0, 0.38);background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__background{top:calc((40px - 18px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((40px - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-checkbox-state-layer-size, 40px);height:40px;height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio{padding:calc((40px - 20px) / 2);padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio .mdc-radio__background::before{top:calc(-1 * (40px - 20px) / 2);top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (40px - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}'],encapsulation:2,changeDetection:0}),n})();const xne={provide:nl,useExisting:Qn(()=>eS),multi:!0};class wne{constructor(e,t){this.source=e,this.options=t}}let eS=(()=>{class n extends aR{get multiple(){return this._multiple}set multiple(t){const i=An(t);i!==this._multiple&&(this._multiple=i,this.selectedOptions=new oR(this._multiple,this.selectedOptions.selected))}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=An(t)}constructor(t,i){super(),this._element=t,this._ngZone=i,this._initialized=!1,this._destroyed=new Ve,this._onChange=r=>{},this.selectionChange=new st,this.color="accent",this.compareWith=(r,s)=>r===s,this._multiple=!0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this.selectedOptions=new oR(this._multiple),this._onTouched=()=>{},this._selectionListDisabled=!1,this._handleFocusout=()=>{setTimeout(()=>{this._containsFocus()||this._resetActiveOption()})},this._handleFocusin=r=>{if(this.disabled)return;const s=this._items.toArray().findIndex(o=>o._elementRef.nativeElement.contains(r.target));s>-1?this._setActiveOption(s):this._resetActiveOption()},this._isNonInteractive=!1}ngAfterViewInit(){this._initialized=!0,this._setupRovingTabindex(),this._ngZone.runOutsideAngular(()=>{this._element.nativeElement.addEventListener("focusin",this._handleFocusin),this._element.nativeElement.addEventListener("focusout",this._handleFocusout)}),this._value&&this._setOptionsFromValues(this._value),this._watchForSelectionChange()}ngOnChanges(t){const i=t.disabled,r=t.disableRipple,s=t.hideSingleSelectionIndicator;(r&&!r.firstChange||i&&!i.firstChange||s&&!s.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._keyManager?.destroy(),this._element.nativeElement.removeEventListener("focusin",this._handleFocusin),this._element.nativeElement.removeEventListener("focusout",this._handleFocusout),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(t){this._element.nativeElement.focus(t)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_reportValueChange(){if(this.options&&!this._isDestroyed){const t=this._getSelectedOptionValues();this._onChange(t),this._value=t}}_emitChangeEvent(t){this.selectionChange.emit(new wne(this,t))}writeValue(t){this._value=t,this.options&&this._setOptionsFromValues(t||[])}setDisabledState(t){this.disabled=t}get disabled(){return this._selectionListDisabled}set disabled(t){this._selectionListDisabled=An(t),this._selectionListDisabled&&this._keyManager?.setActiveItem(-1)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}_watchForSelectionChange(){this.selectedOptions.changed.pipe(dt(this._destroyed)).subscribe(t=>{for(let i of t.added)i.selected=!0;for(let i of t.removed)i.selected=!1;this._containsFocus()||this._resetActiveOption()})}_setOptionsFromValues(t){this.options.forEach(i=>i._setSelected(!1)),t.forEach(i=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,i));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(t=>t.selected).map(t=>t.value)}_markOptionsForCheck(){this.options&&this.options.forEach(t=>t._markForCheck())}_setAllOptionsSelected(t,i){const r=[];return this.options.forEach(s=>{(!i||!s.disabled)&&s._setSelected(t)&&r.push(s)}),r.length&&this._reportValueChange(),r}get options(){return this._items}_handleKeydown(t){const i=this._keyManager.activeItem;if(13!==t.keyCode&&32!==t.keyCode||this._keyManager.isTyping()||!i||i.disabled)if(65===t.keyCode&&this.multiple&&!this._keyManager.isTyping()&&tl(t,"ctrlKey")){const r=this.options.some(s=>!s.disabled&&!s.selected);t.preventDefault(),this._emitChangeEvent(this._setAllOptionsSelected(r,!0))}else this._keyManager.onKeydown(t);else t.preventDefault(),i._toggleOnInteraction()}_setupRovingTabindex(){this._keyManager=new a3(this._items).withHomeAndEnd().withTypeAhead().withWrap().skipPredicate(()=>this.disabled),this._resetActiveOption(),this._keyManager.change.subscribe(t=>this._setActiveOption(t)),this._items.changes.pipe(dt(this._destroyed)).subscribe(()=>{const t=this._keyManager.activeItem;(!t||!this._items.toArray().indexOf(t))&&this._resetActiveOption()})}_setActiveOption(t){this._items.forEach((i,r)=>i._setTabindex(r===t?0:-1)),this._keyManager.updateActiveItem(t)}_resetActiveOption(){if(this.disabled)return void this._setActiveOption(-1);const t=this._items.find(i=>i.selected&&!i.disabled)||this._items.first;this._setActiveOption(t?this._items.toArray().indexOf(t):-1)}_containsFocus(){const t=fM();return t&&this._element.nativeElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(ft))},n.\u0275cmp=bt({type:n,selectors:[["mat-selection-list"]],contentQueries:function(t,i,r){if(1&t&&Xi(r,JM,5),2&t){let s;kt(s=Ot())&&(i._items=s)}},hostAttrs:["role","listbox",1,"mat-mdc-selection-list","mat-mdc-list-base","mdc-list"],hostVars:1,hostBindings:function(t,i){1&t&&ot("keydown",function(s){return i._handleKeydown(s)}),2&t&&Bt("aria-multiselectable",i.multiple)},inputs:{color:"color",compareWith:"compareWith",multiple:"multiple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator",disabled:"disabled"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[zn([xne,{provide:aR,useExisting:n},{provide:qV,useExisting:n}]),ht,Hi],ngContentSelectors:Kte,decls:1,vars:0,template:function(t,i){1&t&&(Sr(),Xt(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0}),n})(),Mne=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[sI,_a,qn,TM,T3,uV]}),n})();function Sne(n,e){if(1&n&&(Z(0,"mat-label"),it(1),se()),2&n){const t=Me(2);q(1),$i(t.resource.name)}}function Cne(n,e){if(1&n&&(Z(0,"mat-list-option",5),it(1),se()),2&n){const t=e.$implicit,i=Me(2);$("value",t.key)("selected",i.resource.data[t.key]),q(1),Er(" ",t.key," ")}}function Ene(n,e){if(1&n){const t=Oi();ha(0,1),ye(1,Sne,2,1,"mat-label",2),Z(2,"mat-selection-list",3),ot("selectionChange",function(r){return Sn(t),Cn(Me().onSelection(r))}),ye(3,Cne,2,3,"mat-list-option",4),gn(4,"keyvalue"),se(),fa()}if(2&n){const t=Me();$("matTooltip",t.resourceDescription),q(1),$("ngIf",t.resource.name),q(2),$("ngForOf",En(4,3,t.resource.data))}}let Ane=(()=>{class n{constructor(){this.resource=null,this.resourceDescription="",this.changed=new st}onSelection(t){for(const i of t.options)this.resource.data[i.value]=i.selected;this.changed.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-flags-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],[3,"selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,i){1&t&&ye(0,Ene,5,5,"ng-container",0),2&t&&$("ngIf",i.resource)},dependencies:[ga,Di,il,Ks,eS,JM,B2],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0}),n})();class lR{constructor(e=!1,t=Ih.instance){this.parentClock=t,this.tickSub=null,this._tick$=new Ve,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,e&&this.start()}get tick$(){return this._tick$.pipe(Ye(([e,t])=>[t,t-e]))}get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get elapsedTime(){return this.isPaused?this.pausedAt-this.startedAt:this.parentClock.elapsedTime-this.startedAt}createChildClock(e){return new lR(e,this)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks())}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(Ye(([e,t])=>[this.oldRelativeTime,e-this.startedAt]),Ii(([e,t])=>this.oldRelativeTime=t)).subscribe(this._tick$)}stopListeningTicks(){var e;null===(e=this.tickSub)||void 0===e||e.unsubscribe(),this.tickSub=null}}class Ih{constructor(){this._tick$=new Ve;let e=this.elapsedTime;ct(void 0,kB).pipe(function Tne(n){let t,e=1/0;return null!=n&&("object"==typeof n?({count:e=1/0,delay:t}=n):e=n),e<=0?()=>Ds:Gn((i,r)=>{let o,s=0;const a=()=>{if(o?.unsubscribe(),o=null,null!=t){const c="number"==typeof t?dM(t):ar(t(s)),u=Bn(r,()=>{u.unsubscribe(),l()});c.subscribe(u)}else l()},l=()=>{let c=!1;o=i.subscribe(Bn(r,void 0,()=>{++s<e?o?a():c=!0:r.complete()})),c&&a()};l()})}()).pipe(Ye(()=>[e,this.elapsedTime]),Ii(([t,i])=>e=i)).subscribe(this._tick$)}static get instance(){return Ih._instance||(Ih._instance=new Ih),Ih._instance}get tick$(){return this._tick$.pipe(Ye(([e,t])=>[t,t-e]))}get elapsedTime(){return(typeof performance>"u"?Date:performance).now()}createChildClock(e){return new lR(e,this)}}const Dne={transparent:!1,background:0,size:"fullscreen",antialias:!0};class Ine{constructor(e,t,i={}){this.scene=e,this.canvas=t,this.entity=null,this.rendererOptions=Object.assign(Object.assign({},Dne),i||{})}}class Fy{constructor(e){this.data=e,this.adjacent=new Set}static fromArray(e,t=!1){const i=new Fy(e[0]);let r=i;for(let s=1;s<e.length;s++){const o=new Fy(e[s]);r.addAdjacent(o),r=o}return t&&r.addAdjacent(i),i}static fromSquareGrid(e){const t=e.map(i=>i.map(r=>new Fy(r)));for(let i=0;i<t.length;i++)for(let r=0;r<t.length;r++)r>0&&t[i][r].addAdjacent(t[i][r-1]),i>0&&t[i][r].addAdjacent(t[i-1][r]);return t[0][0]}addAdjacent(e){return!this.adjacent.has(e)&&(this.adjacent.add(e),e.adjacent.add(this),!0)}removeAdjacent(e){return!!this.adjacent.has(e)&&(this.adjacent.delete(e),e.adjacent.delete(this),!0)}addEdge(e,t){return!!this.removeAdjacent(t)&&(this.addAdjacent(e),e.addAdjacent(t),!0)}removeEdge(e,t){return!(!e.adjacent.has(this)||!e.adjacent.has(t))&&(e.removeAdjacent(this),e.removeAdjacent(t),this.addAdjacent(t))}walkRead(e){const t=new Set,i=[[this,e]];for(t.add(this);i.length;){const r=i.shift(),[s,o]=r;if(0!==o){const a=Array.from(s.adjacent).filter(l=>!t.has(l));for(const l of a)t.add(l),i.push([l,o-1])}}return t}walkReadPreserveDepth(e){const t=new Set,i=[],r=[[this,e]];for(t.add(this);r.length;){const s=r.shift(),[o,a]=s,l=e-a;if(i[l]||(i[l]=new Set),i[l].add(o),0!==a){const c=Array.from(o.adjacent).filter(u=>!t.has(u));for(const u of c)t.add(u),r.push([u,a-1])}}return i}nodes(){return Array.from(this.walkRead(-1))}}var Gl=(()=>{return(n=Gl||(Gl={}))[n.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",n[n.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",n[n.OBJECTS_BINDING=400]="OBJECTS_BINDING",n[n.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",n[n.CONTROLLERS=800]="CONTROLLERS",n[n.RENDERING=1e3]="RENDERING",n[n.POST_RENDERING=1200]="POST_RENDERING",Gl;var n})();let Ny=(()=>{class n{constructor(){this.tick$=new Ve,this._world=null,this._name="e0x"+(n.default_name_counter++).toString(16),this._active=!0,this.parent=null,this._children=[],this._components=[],this._onSpawned$=new Ve,this._onRemoved$=new Ve}get world(){return this._world}get name(){return this._name}set name(t){this._name=t}get active(){return this._active}set active(t){this._active=t}get children(){return[...this._children]}addChildren(...t){for(const i of t)i.parent&&i.parent.removeChildren([i]),i.parent=this;if(this._children.push(...t),this._world)for(const i of t)this._world.addEntity(i)}removeChildren(t,i=!1){this._children=this._children.filter(r=>!t.includes(r));for(const r of t)r.parent=null,this._world&&this._world.removeEntity(r,i)}get components(){return[...this._components]}addComponents(...t){for(const i of t)i.entity&&i.entity.removeComponents([i]),i.entity=this;if(this._components.push(...t),this._world)for(const i of t)i.addToWorld(this._world)}removeComponents(t,i=!1){this._components=this._components.filter(r=>!t.includes(r));for(const r of t)r.entity=null,this._world&&r.removeFromWorld(this._world,i)}onSpawned(t){this._world=t;for(const i of this._components)i.addToWorld(t);for(const i of this._children)t.addEntity(i);this._onSpawned$.next()}onRemoved(){const t=this._world;this._world=null;for(const i of this._children)t.removeEntity(i);for(const i of this._components)i.removeFromWorld(t,!1);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this,!1),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const t of this._children)t.dispose();for(const t of this._components)t.dispose()}}return n.default_name_counter=0,n})();class Rne extends Ny{constructor(e){super(),this.tickOrder=e}}function tS(n,e=Gl.CONTROLLERS){const t=new Rne(e);return n.addEntity(t),t.tick$.pipe(Hd(()=>{n.removeEntity(t,!0)}))}class Pne extends Ny{constructor(e){super(),this.renderer=e,this.tickOrder=Gl.RENDERING,this._rendererSize$=new Ht(null),this.addComponents(e),this.tick$.subscribe(()=>{this.renderer.render()})}get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}get rendererOptions(){return this.renderer.rendererOptions}onSpawned(e){this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||"function"==typeof this.rendererOptions.size?(this.renderer.canvas&&(this.renderer.canvas.style.position="absolute"),cs(ya(window,"resize").pipe(uM(100)),ya(window,"orientationchange")).pipe(dt(this._onRemoved$),Ye(()=>({x:window.innerWidth,y:window.innerHeight})),Oo({x:window.innerWidth,y:window.innerHeight})).subscribe(t=>{this._rendererSize$.next("function"==typeof this.rendererOptions.size?this.rendererOptions.size(t):t)})):this.rendererOptions.size instanceof Mn||void 0!==this.rendererOptions.size.subscribe&&void 0!==this.rendererOptions.size.pipe?this.rendererOptions.size.pipe(dt(this._onRemoved$)).subscribe(t=>{this._rendererSize$.next(t)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(dt(this._onRemoved$),wh((t,i)=>t?.x==i?.x&&t?.y==i?.y)).subscribe(t=>{t&&this.renderer.resizeRenderer(t)}),super.onSpawned(e)}dispose(){super.dispose(),this._rendererSize$.complete()}}const cR=n=>{n.updateVisibility?n.updateVisibility():YV(n)},YV=n=>{for(const e of n.children)cR(e)};class kne extends Ny{constructor(){super(...arguments),this._visible=!0}get visible(){return this._visible}get worldVisible(){let e=this;for(;;){if(!1===e.visible)return!1;if(!e.parent)break;e=e.parent}return!0}set visible(e){this._visible=e,this.updateVisibility()}updateVisibility(){YV(this)}addChildren(...e){super.addChildren(...e);for(const t of e)cR(t)}removeChildren(e,t=!1){if(super.removeChildren(e,t),!t)for(const i of e)cR(i)}}class dR{constructor(){this._running=!1,this.stop$=new Ve}get running(){return this._running}start(...e){this.running||(this.startInternal(...e),this._running=!0)}stop(...e){this.running&&(this.stop$.next(),this.stopInternal(...e),this._running=!1)}stopInternal(...e){}}class One extends dR{constructor(e,t){super(),this.keyboard=e,this.keymap=t,this._output$=new Ve}get output$(){return this._output$.asObservable()}startInternal(){const e=[[],[],[],[]];this.keymap.includes("wasd")&&(e[0].push("KeyW"),e[1].push("KeyA"),e[2].push("KeyS"),e[3].push("KeyD")),this.keymap.includes("arrows")&&(e[0].push("ArrowUp"),e[1].push("ArrowLeft"),e[2].push("ArrowDown"),e[3].push("ArrowRight")),Ud(e.map(t=>this.keyboard.bindMany(...t))).pipe(dt(this.stop$),Ye(t=>{const i={};if(t.includes(!0)){const[r,s,o,a]=t;r!=o&&(i.upDown=r),s!=a&&(i.leftRight=s)}return i})).subscribe(t=>this._output$.next(t))}}const nS=new Mn(ls);class Lne extends dR{constructor(){super(),this.bindings={},this.skipKeyDownsOnExternalFocus=!0,this.externalFocusBlacklist=[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement,HTMLButtonElement],this.handleKeys=this.handleKeys.bind(this),this.resetAllKeys=this.resetAllKeys.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this)}startInternal(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys),window.addEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange)}stopInternal(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange),this.resetAllKeys()}bind(e){this.bindings[e]||(this.bindings[e]=[]);const t=new Ht(!1);return this.bindings[e].push(t),t.pipe(wh(),Hd(()=>{this.bindings[e].splice(this.bindings[e].indexOf(t),1),t.complete()}))}bindMany(...e){if(0==e.length)return console.warn("[KeyboardController] bindMany called without any key code"),nS;if(1==e.length)return this.bind(e[0]);const t=[];for(const i of e){this.bindings[i]||(this.bindings[i]=[]);const r=new Ht(!1);this.bindings[i].push(r),t.push(r)}return Ud(t).pipe(Hd(()=>{for(let i=0;i<e.length;i++)this.bindings[e[i]].splice(this.bindings[e[i]].indexOf(t[i]),1),t[i].complete()}),Ye(i=>i.includes(!0)),wh())}emulateKeyDown(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!0)}emulateKeyUp(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!1)}emulateKeyPress(e){this.emulateKeyDown(e),this.emulateKeyUp(e)}handleKeys(e){if("keydown"!=e.type&&"keyup"!=e.type)return;const t="keydown"==e.type;if(t&&this.skipKeyDownsOnExternalFocus&&document.activeElement)for(const i of this.externalFocusBlacklist)if(document.activeElement instanceof i)return;for(const i of this.bindings[e.code]||[])i.next(t)}onPointerLockChange(){document.pointerLockElement||this.resetAllKeys()}resetAllKeys(){for(const e in this.bindings)for(const t of this.bindings[e]||[])t.next(!1)}}class Tr{static get O(){return{x:0,y:0}}static get X(){return{x:1,y:0}}static get Y(){return{x:0,y:1}}static get nX(){return{x:-1,y:0}}static get nY(){return{x:0,y:-1}}static clone(e){return{x:e.x,y:e.y}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y}}static avg(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static lenSq(e){return e.x*e.x+e.y*e.y}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static dist(e,t){return Tr.len(Tr.sub(e,t))}static norm(e){const t=Tr.len(e);return{x:e.x/t,y:e.y/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t}}static lerp(e,t,i){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y)}}static angle(e,t){const i=e.x*t.x+e.y*t.y,r=Math.sqrt(e.x**2+e.y**2)*Math.sqrt(t.x**2+t.y**2);return Math.acos(i/r)}}const Nne={pointerLock:!1};var vs=(()=>{return(n=vs||(vs={}))[n.NONE=0]="NONE",n[n.DRAG=1]="DRAG",n[n.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",n[n.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",n[n.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",vs;var n})();class Cm extends dR{constructor(e={}){super(),this._wheel$=null,this._delta$=new Ve,this._position$=new Ht(Tr.O),this._multiTouchPositions$=new Ht([]),this.stopped$=new Ve,this._state$=new Ht(vs.NONE),this.options=Object.assign(Object.assign({},Nne),e),this.canvasClickListener=this.canvasClickListener.bind(this)}static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$||(this._wheel$=ya(this._element,"wheel",{passive:!1}).pipe(dt(this.stopped$),Hd(()=>this._wheel$=null),Ii(e=>e.preventDefault()),Ye(e=>e.deltaY),Mu())),this._wheel$}get isPointerLocked(){return!!document.pointerLockElement}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(gs(e=>e==vs.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:nS),Ye(e=>e.map(t=>({x:t.x,y:t.y}))),function Fne(){return Gn((n,e)=>{let t,i=!1;n.subscribe(Bn(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}(),Hn(([e,t])=>e.length>1&&t.length>1),Ye(([e,t])=>({centerPointDelta:Tr.sub(Tr.scalarMult(t.reduce((i,r)=>Tr.add(i,r),Tr.O),1/t.length),Tr.scalarMult(e.reduce((i,r)=>Tr.add(i,r),Tr.O),1/t.length)),angleDelta:Tr.angle(t[1],t[0])-Tr.angle(e[1],e[0]),distanceDelta:Tr.dist(t[1],t[0])-Tr.dist(e[1],e[0])})))}get _element(){return this.options.canvas||window}startInternal(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(vs.NONE);const e=[vs.DRAG,vs.DRAG_MIDDLE_BUTTON,vs.DRAG_RIGHT_BUTTON],t=[vs.NONE,vs.DRAG,vs.DRAG_TOUCH_TWO_FINGERS],i=[],r={};ya(this._element,"mousemove").pipe(dt(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),ya(this._element,"pointermove").pipe(dt(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!Cm.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<i.length;a++)if(i[a].pointerId==o.pointerId){i.splice(a,1);break}0===i.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),this._element.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(t[Math.min(i.length,2)])};ya(this._element,"pointerdown").pipe(dt(this.stopped$)).subscribe(o=>{0===i.length&&(this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),this._element.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)),i.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(t[Math.min(i.length,2)])):this._state$.next(e[o.button]||vs.NONE)}),ya(this._element,"contextmenu").pipe(dt(this.stopped$)).subscribe(o=>{o.preventDefault()})}stopInternal(e=!0){this.stopped$.next(),e&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())}canvasClickListener(){this.options.canvas.requestPointerLock()}}class Bne{static lookAt(e,t,i){let r=vt.sub(e,t);r=0===vt.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):vt.norm(r);let s=vt.cross(i,r);0===vt.lenSq(s)&&(r=1===Math.abs(i.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=vt.norm(r),s=vt.cross(i,r)),s=vt.norm(s);let o=vt.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}class as{static get O(){return{x:0,y:0,z:0,w:1}}static clone(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}static add(e,t){const i=e.w+t.w,r=e.x+t.x,s=e.y+t.y,o=e.z+t.z,a=Math.sqrt(i*i+r*r+s*s+o*o);return{w:i/a,x:r/a,y:s/a,z:o/a}}static mult(e,t){return{w:e.w*t.w-e.x*t.x-e.y*t.y-e.z*t.z,x:e.w*t.x+e.x*t.w+e.y*t.z-e.z*t.y,y:e.w*t.y-e.x*t.z+e.y*t.w+e.z*t.x,z:e.w*t.z+e.x*t.y-e.y*t.x+e.z*t.w}}static conjugate(e){return{x:-e.x,y:-e.y,z:-e.z,w:e.w}}static opposite(e){return{x:-e.x,y:-e.y,z:-e.z,w:-e.w}}static combineRotations(...e){let t={w:1,x:0,y:0,z:0};for(const i of e)t=this.mult(t,i);return t}static lerp(e,t,i){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y),z:e.z+i*(t.z-e.z),w:e.w+i*(t.w-e.w)}}static slerp(e,t,i){let s=Math.acos(e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w),o=Math.sin(s),a=e.x*Math.sin((1-i)*s)/o+t.x*Math.sin(i*s)/o,l=e.y*Math.sin((1-i)*s)/o+t.y*Math.sin(i*s)/o,c=e.z*Math.sin((1-i)*s)/o+t.z*Math.sin(i*s)/o,u=e.w*Math.sin((1-i)*s)/o+t.w*Math.sin(i*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(u)?as.clone(e):{x:a,y:l,z:c,w:u}}static fromAngle(e,t){const i=t/2,r=Math.sin(i);return Object.assign(Object.assign({},vt.scalarMult(e,r)),{w:Math.cos(i)})}static fromMatrix4(e){const t=e[0],i=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],u=e[10],h=t+o+u;if(h>0){const p=.5/Math.sqrt(h+1);return{x:(c-a)*p,y:(r-l)*p,z:(s-i)*p,w:.25/p}}if(t>o&&t>u){const p=2*Math.sqrt(1+t-o-u);return{x:.25*p,y:(i+s)/p,z:(r+l)/p,w:(c-a)/p}}if(o>u){const p=2*Math.sqrt(1+o-t-u);return{x:(i+s)/p,y:.25*p,z:(a+c)/p,w:(r-l)/p}}{const p=2*Math.sqrt(1+u-t-o);return{x:(r+l)/p,y:(a+c)/p,z:.25*p,w:(s-i)/p}}}static fromEuler(e){const t=e.x,i=e.y,r=e.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*i),l=Math.sin(.5*i),c=Math.cos(.5*t),u=Math.sin(.5*t);return{w:c*a*s+u*l*o,x:u*a*s-c*l*o,y:c*l*s+u*a*o,z:c*a*o-u*l*s}}static toEuler(e){const t=e.w,i=e.x,r=e.y,s=e.z,c=2*(t*r-s*i);return{x:Math.atan2(2*(t*i+r*s),1-2*(i*i+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(t*s+i*r),1-2*(r*r+s*s))}}static lookAt(e,t,i=vt.Z){return this.fromMatrix4(Bne.lookAt(e,t,i))}static rotAround(e,t,i){const r=Math.sin(i/2),s={w:Math.cos(i/2),x:t.x*r,y:t.y*r,z:t.z*r};return this.mult(s,e)}}class vt{static get O(){return{x:0,y:0,z:0}}static get X(){return{x:1,y:0,z:0}}static get Y(){return{x:0,y:1,z:0}}static get Z(){return{x:0,y:0,z:1}}static get nX(){return{x:-1,y:0,z:0}}static get nY(){return{x:0,y:-1,z:0}}static get nZ(){return{x:0,y:0,z:-1}}static clone(e){return{x:e.x,y:e.y,z:e.z}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}}static avg(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2,z:(e.z+t.z)/2}}static lenSq(e){return e.x*e.x+e.y*e.y+e.z*e.z}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}static dist(e,t){return vt.len(vt.sub(e,t))}static cross(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return{x:r*l-s*a,y:s*o-i*l,z:i*a-r*o}}static norm(e){const t=vt.len(e);return 0===t?e:{x:e.x/t,y:e.y/t,z:e.z/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}}static lerp(e,t,i){return{x:e.x+i*(t.x-e.x),y:e.y+i*(t.y-e.y),z:e.z+i*(t.z-e.z)}}static angle(e,t){const i=e.x*t.x+e.y*t.y+e.z*t.z,r=Math.sqrt(e.x**2+e.y**2+e.z**2)*Math.sqrt(t.x**2+t.y**2+t.z**2);return Math.acos(i/r)}static rot(e,t){const{x:i,y:r,z:s}=e;return{x:t.w*t.w*i+2*t.y*t.w*s-2*t.z*t.w*r+t.x*t.x*i+2*t.y*t.x*r+2*t.z*t.x*s-t.y*t.y*i-t.z*t.z*i,y:2*t.x*t.y*i+t.y*t.y*r+2*t.z*t.y*s+2*t.w*t.z*i-t.z*t.z*r+t.w*t.w*r-2*t.x*t.w*s-t.x*t.x*r,z:2*t.x*t.z*i+2*t.y*t.z*r+t.z*t.z*s-2*t.w*t.y*i-t.y*t.y*s+2*t.w*t.x*r-t.x*t.x*s+t.w*t.w*s}}static rotAround(e,t,i){return this.rot(e,as.fromAngle(t,i))}static toSpherical(e){const t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return{radius:t,theta:0==t?0:Math.atan2(e.y,e.x),phi:0==t?0:Math.atan2(Math.sqrt(e.x*e.x+e.y*e.y),e.z)}}static fromSpherical(e){return{x:e.radius*Math.sin(e.phi)*Math.cos(e.theta),y:e.radius*Math.sin(e.phi)*Math.sin(e.theta),z:e.radius*Math.cos(e.phi)}}}var By=function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};let iS=(()=>{class n{constructor(t,i){this.visualScene=t,this.physicsWorld=i,this.worldClock=Ih.instance.createChildClock(!1),this.keyboardInput=new Lne,this.name="w0x"+(n.default_name_counter++).toString(16),this.children=[],this.tickListeners=[],n._documentWorlds.push(this),this.keyboardInput.start(),window.ggstatic&&(window.ggstatic.registerConsoleCommand(this,"show_debugger",(...r)=>By(this,void 0,void 0,function*(){return window.ggstatic.showDebugControls=["1","true","+"].includes(r[0]),""+window.ggstatic.showDebugControls}),"args: [0 or 1]; turn on/off debug panel. Default value is 0"),window.ggstatic.registerConsoleCommand(this,"show_stats",(...r)=>By(this,void 0,void 0,function*(){return window.ggstatic.showStats=["1","true","+"].includes(r[0]),""+window.ggstatic.showStats}),"args: [0 or 1]; turn on/off stats. Default value is 0"),window.ggstatic.registerConsoleCommand(this,"ph_timescale",(...r)=>By(this,void 0,void 0,function*(){return this.physicsWorld.timeScale=+r[0],JSON.stringify(this.physicsWorld.timeScale)}),"args: [float]; change time scale of physics engine. Default value is 1.0"),window.ggstatic.registerConsoleCommand(this,"dr_drawphysics",(...r)=>By(this,void 0,void 0,function*(){return this.physicsDebugViewActive=["1","true","+"].includes(r[0]),""+this.physicsWorld.physicsDebugViewActive}),"args: [0 or 1]; turn on/off physics debug view. Default value is 0"))}static get documentWorlds(){return[...n._documentWorlds]}init(){return By(this,void 0,void 0,function*(){yield Promise.all([this.physicsWorld.init(),this.visualScene.init()]),this.worldClock.tick$.subscribe(([t,i])=>{let r=0;for(;r<this.tickListeners.length&&!(this.tickListeners[r].tickOrder>=Gl.PHYSICS_SIMULATION);r++)this.tickListeners[r].active&&this.tickListeners[r].tick$.next([t,i]);for(this.physicsWorld.simulate(i);r<this.tickListeners.length;r++)this.tickListeners[r].active&&this.tickListeners[r].tick$.next([t,i])})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(t){return this.worldClock.createChildClock(t)}dispose(){window.ggstatic&&window.ggstatic.deregisterWorldCommands(this),this.worldClock.stop(),this.keyboardInput.stop();for(let t=0;t<this.children.length;t++)this.children[t].onRemoved(),this.children[t].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld.dispose(),this.visualScene.dispose()}addEntity(t){t.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(t),this.tickListeners.push(t),this.tickListeners.sort((i,r)=>i.tickOrder-r.tickOrder),t.onSpawned(this))}removeEntity(t,i=!1){if(t.world){if(t.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(r=>r===t),1),this.tickListeners.splice(this.tickListeners.findIndex(r=>r===t),1),t.onRemoved()}i&&t.dispose()}get physicsDebugViewActive(){return this.physicsWorld.physicsDebugViewActive}set physicsDebugViewActive(t){if(this.physicsDebugViewActive!==t)if(t){const i=this.visualScene.debugPhysicsDrawerClass;if(!i)throw new Error("Debug drawer is not available");this.physicsWorld.startDebugger(this,new i)}else this.physicsWorld.stopDebugger(this)}}return n.default_name_counter=0,n._documentWorlds=[],n})();class Vne extends Ine{}class KV extends kne{}class Em extends KV{constructor(e,t=null){if(super(),this.object3D=e,this.objectBody=t,this.tickOrder=Gl.OBJECTS_BINDING,this._position=vt.O,this._rotation=as.O,t)this.tick$.subscribe(()=>{this.runTransformBinding(t,e)}),this.runTransformBinding(t,e),this.name=t.name;else{if(!e)throw new Error("Cannot create entity without a mesh and a body");this._position=e.position,this._rotation=e.rotation,this.name=e.name}t&&this.addComponents(t),e&&this.addComponents(e)}get position(){return this._position}set position(e){this.object3D&&(this.object3D.position=e),this.objectBody&&(this.objectBody.position=e),this._position=e}get rotation(){return this._rotation}set rotation(e){this.object3D&&(this.object3D.rotation=e),this.objectBody&&(this.objectBody.rotation=e),this._rotation=e}updateVisibility(){this.object3D&&(this.object3D.visible=this.worldVisible),super.updateVisibility()}runTransformBinding(e,t){const i=e.position,r=e.rotation;t&&(t.position=i,t.rotation=r),this._position=i,this._rotation=r}}const QV={leading:!0,trailing:!1};function JV(n,e=uy,t=QV){const i=dM(n,e);return function zne(n,e=QV){return Gn((t,i)=>{const{leading:r,trailing:s}=e;let o=!1,a=null,l=null,c=!1;const u=()=>{l?.unsubscribe(),l=null,s&&(m(),c&&i.complete())},h=()=>{l=null,c&&i.complete()},p=g=>l=ar(n(g)).subscribe(Bn(i,u,h)),m=()=>{if(o){o=!1;const g=a;a=null,i.next(g),!c&&p(g)}};t.subscribe(Bn(i,g=>{o=!0,a=g,(!l||l.closed)&&(r?m():p(g))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&i.complete()}))})}(()=>i,t)}class Uy extends Fy{static fromMapArray(e,t=!1){const i=new Uy(e[0]);let r=i;for(let s=1;s<e.length;s++){const o=new Uy(e[s]);r.addAdjacent(o),r=o}return t&&r.addAdjacent(i),i}static fromMapSquareGrid(e){const t=e.map(i=>i.map(r=>new Uy(r)));for(let i=0;i<t.length;i++)for(let r=0;r<t.length;r++)r>0&&t[i][r].addAdjacent(t[i][r-1]),i>0&&t[i][r].addAdjacent(t[i-1][r]);return t[0][0]}getNearestDummy(e,t){let i=1/0,r=this;return e.forEach(s=>{let o=Math.sqrt(Math.pow(t.x-s.data.position.x,2)+Math.pow(t.y-s.data.position.y,2)+Math.pow(t.z-s.data.position.z,2));o<i&&(i=o,r=s)}),r}nodes(){return Array.from(this.walkRead(-1))}}const Gne={loadDepth:5,inertia:0};class Wne extends KV{constructor(e,t={}){super(),this.mapGraph=e,this.tickOrder=Gl.POST_RENDERING,this.loaderCursorEntity$=new Ht(null),this.loaded=new Map,this._initialLoadComplete$=new Ht(!1),this._nearestDummy$=new Ht(null),this._chunkLoaded$=new Ve,this._world=null,this.options=Object.assign(Object.assign({},Gne),t),this.mapGraphNodes=e.nodes()}get initialLoadComplete$(){return this._initialLoadComplete$.asObservable()}get nearestDummy(){return this._nearestDummy$.getValue()}get chunkLoaded$(){return this._chunkLoaded$.asObservable()}get world(){return this._world}onSpawned(e){super.onSpawned(e),this.loaderCursorEntity$.pipe(gs(t=>t?this.tick$.pipe(Oo(null),JV(1e3),Ye(()=>t.position)):nS),Ye(t=>this.mapGraph.getNearestDummy(this.mapGraphNodes,t)),Ii(t=>this._nearestDummy$.next(t)),wh()).subscribe(t=>{let r,i=new Set;if(this.options.inertia>0){r=new Set;const s=t.walkReadPreserveDepth(this.options.loadDepth+this.options.inertia);for(let o=0;o<s.length;o++)s[o].forEach(a=>r.add(a.data)),o<=this.options.loadDepth&&s[o].forEach(a=>i.add(a.data))}else t.walkRead(this.options.loadDepth).forEach(s=>i.add(s.data)),r=i;for(const s of this.loaded.keys())r.has(s)?i.delete(s):this.disposeChunk(s);Promise.all(Array.from(i.keys()).map(s=>this.loadChunk(s))).then(()=>this._initialLoadComplete$.next(!0))})}onRemoved(){super.onRemoved(),this.loaderCursorEntity$.next(null)}loadChunk(e){return function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){const t=yield this.world.loader.loadGgGlb(e.path,Object.assign({position:e.position,rotation:e.rotation||as.O},e.loadOptions)),i=[...t.entities,...(t.props||[]).map(r=>r.entities).reduce((r,s)=>(r.push(...s),r),[])];return this.loaded.set(e,i),this.addChildren(...i),this._chunkLoaded$.next([t,{position:e.position,rotation:e.rotation||as.O}]),[i,t]})}disposeChunk(e){this.loaded.has(e)&&(this.removeChildren(this.loaded.get(e),!0),this.loaded.delete(e))}}class $ne extends Pne{get position(){return this.renderer.camera.position}set position(e){this.renderer.camera.position=e}get rotation(){return this.renderer.camera.rotation}set rotation(e){this.renderer.camera.rotation=e}get camera(){return this.renderer.camera}}var tz=function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const nz={keymap:"wasd",movementOptions:{speed:.5},mouseOptions:{},ignoreMouseUnlessPointerLocked:!1,ignoreKeyboardUnlessPointerLocked:!1};class Xne extends Ny{constructor(e,t,i={}){super(),this.keyboard=e,this.camera=t,this.tickOrder=Gl.INPUT_CONTROLLERS,this.options=Object.assign(Object.assign({},nz),i),i.mouseOptions&&(this.options.movementOptions=Object.assign(Object.assign({},nz.movementOptions),i.mouseOptions)),this.mouseInput=new Cm(i.mouseOptions),this.directionsInput=new One(e,this.options.keymap)}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return tz(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e);let i={direction:{},rest:[]};const r=["KeyE","KeyQ"];this.camera.camera.supportsFov&&r.push("KeyZ","KeyC"),r.push("ShiftLeft"),this.directionsInput.output$.pipe(dt(this._onRemoved$)).subscribe(a=>{i.direction=a}),Ud(r.map(a=>this.keyboard.bind(a))).pipe(dt(this._onRemoved$)).subscribe(a=>{i.rest=a});let s=Tr.O,o=Cm.isTouchDevice();this.mouseInput.delta$.pipe(dt(this._onRemoved$),Hn(()=>o||!this.options.ignoreMouseUnlessPointerLocked||this.mouseInput.isPointerLocked)).subscribe(a=>{s=Tr.add(s,a)}),this.camera.tick$.pipe(dt(this._onRemoved$)).subscribe(()=>{let a=i;this.options.ignoreKeyboardUnlessPointerLocked&&!this.mouseInput.isPointerLocked&&(a={direction:{},rest:[!1,!1,!1,!1,!1]});let l=Object.assign({},vt.O);const[c,u,h,p,m]=a.rest;void 0!==a.direction.upDown&&(l.z=a.direction.upDown?-1:1),void 0!==a.direction.leftRight&&(l.x=a.direction.leftRight?-1:1),c!=u&&(l.y=u?-1:1),h!=p&&(this.camera.camera.fov+=h?1:-1);let g=this.options.movementOptions.speed;if(m&&(g*=2.5),this.camera.position=vt.add(this.camera.position,vt.rot(vt.scalarMult(vt.norm(l),g),this.camera.rotation)),0!=s.x||0!=s.y){const b=vt.toSpherical(vt.rot({x:0,y:0,z:-1},this.camera.rotation));b.theta-=s.x/300,b.phi+=s.y/300,b.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,b.phi)),this.camera.rotation=as.lookAt(this.camera.position,vt.add(this.camera.position,vt.fromSpherical(b))),s=Tr.O}}),yield this.mouseInput.start(),yield this.directionsInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return tz(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var iz=function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const qne={mouseOptions:{},orbiting:{sensitivityX:1,sensitivityY:1},zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class Yne extends Ny{constructor(e,t={}){super(),this.camera=e,this.tickOrder=Gl.INPUT_CONTROLLERS,this.spherical={phi:0,radius:10,theta:0},this.target=vt.O,this.options=Object.assign(Object.assign({},qne),t),this.mouseInput=new Cm(this.options.mouseOptions)}get radius(){return this.spherical.radius}set radius(e){this.spherical.radius=e}get phi(){return this.spherical.phi}set phi(e){this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,e))}get theta(){return this.spherical.theta}set theta(e){this.spherical.theta=e}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return iz(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e),this.spherical=vt.toSpherical(vt.sub(this.camera.position,this.target)),this.options.orbiting&&this.mouseInput.delta$.pipe(dt(this._onRemoved$),Hn(()=>this.mouseInput.state==vs.DRAG)).subscribe(r=>{this.spherical.theta-=r.x*this.options.orbiting.sensitivityX*Math.PI/900,this.spherical.phi-=r.y*this.options.orbiting.sensitivityY*Math.PI/900,this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.spherical.phi))}),this.options.zooming&&this.mouseInput.wheel$.pipe(dt(this._onRemoved$)).subscribe(r=>{0!=r&&(this.spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const i=r=>{const s=vt.fromSpherical(this.spherical),o=vt.rotAround(s,{x:-Math.sin(this.spherical.theta),y:Math.cos(this.spherical.theta),z:0},Math.PI/2),a=vt.rotAround(s,vt.norm(o),Math.PI/2);this.target=vt.add(this.target,vt.add(vt.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),vt.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(dt(this._onRemoved$),Hn(()=>this.mouseInput.state==vs.DRAG_RIGHT_BUTTON)).subscribe(r=>{i(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(dt(this._onRemoved$),Hn(()=>this.mouseInput.state==vs.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this.spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),Cm.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(dt(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this.spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&i(r.centerPointDelta)}),this.camera.tick$.pipe(dt(this._onRemoved$),Ye(()=>this.spherical)).subscribe(r=>{this.camera.position=vt.add(this.target,vt.fromSpherical(r)),this.camera.rotation=as.lookAt(this.camera.position,this.target)}),yield this.mouseInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return iz(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class Zne{randomColor(){return Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())}createPlane(e={}){return this.createPrimitive({shape:"PLANE"},e)}createBox(e,t={}){return this.createPrimitive({shape:"BOX",dimensions:e},t)}createCapsule(e,t,i={}){return this.createPrimitive({shape:"CAPSULE",radius:e,centersDistance:t},i)}createCylinder(e,t,i={}){return this.createPrimitive({shape:"CYLINDER",radius:e,height:t},i)}createCone(e,t,i={}){return this.createPrimitive({shape:"CONE",radius:e,height:t},i)}createSphere(e,t={}){return this.createPrimitive({shape:"SPHERE",radius:e},t)}}var fR=function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})},Wl=(()=>{return(n=Wl||(Wl={}))[n.Nothing=0]="Nothing",n[n.Files=1]="Files",n[n.Entities=2]="Entities",Wl;var n})();const rz={cachingStrategy:Wl.Nothing,position:vt.O,rotation:as.O,loadProps:!0},sz=n=>({meta:n.meta,resources:n.resources.map(({object3D:e,body:t})=>({object3D:e&&e.clone(),body:t&&t.clone()}))});class Qne{constructor(e){this.world=e,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(e,t=!1){return fR(this,void 0,void 0,function*(){if(t&&this.filesCache.has(e))return this.filesCache.get(e);const i=Promise.all([fetch(`${e}.glb`).then(s=>s.arrayBuffer()),fetch(`${e}.meta`).then(s=>s.text()).then(s=>JSON.parse(s))]);t&&this.filesCache.set(e,i);const r=yield i;return t&&this.filesCache.set(e,r),r})}loadGgGlbResources(e,t=Wl.Nothing){return fR(this,void 0,void 0,function*(){if(t==Wl.Entities&&this.loadResultCache.has(e)){const l=this.loadResultCache.get(e),c=l instanceof Promise?yield l:l;return sz(c)}const[i,r]=yield this.loadGgGlbFiles(e,t==Wl.Files);if(!i)throw new Error("GLB not found");const[s,o]=yield Promise.all([this.world.visualScene.loader.loadFromGgGlb(i,r),this.world.physicsWorld.loader.loadFromGgGlb(i,r)]),a={resources:[],meta:r};if(!s)return a;if(0==o.length)a.resources.push({object3D:s,body:null});else if(1==o.length)a.resources.push({object3D:s,body:o[0]});else{for(const l of o)a.resources.push({object3D:s.popChild(l.name),body:l});s.isEmpty()||a.resources.push({object3D:s,body:null})}return t==Wl.Entities&&this.loadResultCache.set(e,sz(a)),a})}loadGgGlb(e,t=rz){return fR(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},rz),t),{resources:r,meta:s}=yield this.loadGgGlbResources(e,i.cachingStrategy),o={entities:r.map(({object3D:a,body:l})=>new Em(a,l)),meta:s};return i.loadProps&&(o.props=yield Promise.all(s.dummies.filter(a=>a.is_prop||a.is_scene).map(a=>this.loadGgGlb(a.is_prop?(i.propsPath||e.substring(0,e.lastIndexOf("/")+1))+a.prop_id:a.scene_id,{loadProps:!!a.is_scene,position:vt.add(vt.rot(a.position,i.rotation),i.position),rotation:as.combineRotations(a.rotation,i.rotation)})))),o.entities.forEach(a=>{a.position=vt.add(vt.rot(vt.clone(a.position),i.rotation),i.position),a.rotation=as.mult(as.clone(a.rotation),i.rotation)}),o})}}class oz extends iS{constructor(e,t){super(e,t),this.visualScene=e,this.physicsWorld=t,this.loader=new Qne(this),window.ggstatic&&window.ggstatic.registerConsoleCommand(this,"ph_gravity",(...i)=>function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){return 1==i.length&&(i=["0","0",""+-+i[0]]),i.length>0&&(this.physicsWorld.gravity={x:+i[0],y:+i[1],z:+i[2]}),JSON.stringify(this.physicsWorld.gravity)}),'args: [float] or [float float float]; change 3D world gravity vector. 1 argument means {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}addPrimitiveRigidBody(e,t=vt.O,i=as.O,r={}){const s=new Em(this.visualScene.factory.createPrimitive(e.shape,r),this.physicsWorld.factory.createRigidBody(e));return s.position=t,s.rotation=i,this.addEntity(s),s}addRenderer(e,t,i){const r=new $ne(this.visualScene.createRenderer(e,t,i));return this.addEntity(r),r}}class tie{constructor(){this.output="\n                  \u2584\u2588\u2588\u2588\u2588   \u2584\u2588\u2588\u2588\u2588     \u2588     \u2588\u2591\u2593\u2588\u2588\u2588\u2588\u2588  \u2584\u2584\u2584\u2584   \n                 \u2588\u2588\u2592 \u2580\u2588\u2592 \u2588\u2588\u2592 \u2580\u2588\u2592   \u2593\u2588\u2591 \u2588 \u2591\u2588\u2591\u2593\u2588   \u2580 \u2593\u2588\u2588\u2588\u2588\u2588\u2584 \n                \u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591\u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591   \u2592\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2588\u2588\u2588   \u2592\u2588\u2588\u2592 \u2584\u2588\u2588\n                \u2591\u2593\u2588  \u2588\u2588\u2593\u2591\u2593\u2588  \u2588\u2588\u2593   \u2591\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2593\u2588  \u2584 \u2592\u2588\u2588\u2591\u2588\u2580  \n                \u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592   \u2591\u2591\u2588\u2588\u2592\u2588\u2588\u2593 \u2591\u2592\u2588\u2588\u2588\u2588\u2592\u2591\u2593\u2588  \u2580\u2588\u2593\n                 \u2591\u2592   \u2592  \u2591\u2592   \u2592    \u2591 \u2593\u2591\u2592 \u2592  \u2591\u2591 \u2592\u2591 \u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\n                  \u2591   \u2591   \u2591   \u2591      \u2592 \u2591 \u2591   \u2591 \u2591  \u2591\u2592\u2591\u2592   \u2591 \n                \u2591 \u2591   \u2591 \u2591 \u2591   \u2591      \u2591   \u2591     \u2591    \u2591    \u2591 \n                      \u2591       \u2591        \u2591       \u2591  \u2591 \u2591      \n                                                         \u2591 \n             >>> https://github.com/AndyGura/gg-web-engine <<<\nWelcome to GG web engine UI console. \nEnter command in input below.\n\nList of available commands: ".replace(/ /g,"&nbsp;")+'<span style="color:yellow">ls_commands</span>',this.commandHistory=[],this.currentCommandIndex=0,this.elements=null}get isUIShown(){return!!this.elements}createUI(){if(this.elements)return;const e=document.createElement("div");e.innerHTML="\n  <div id='gg-console-header' style='padding: 0.2rem 0.2rem 0;cursor:move;display:flex;justify-content:space-between;'>\n    <span>CONSOLE</span>\n    <a id='gg-console-close-icon' style='display:block;padding:0.3rem;margin:-0.3rem;cursor:pointer;color:white;'>X</a>\n  </div>\n  <div id='gg-console-output' style='flex-grow:1;background:#232323;color:white;font-family:monospace;overflow-y:auto;overflow-wrap:anywhere;padding:0.2rem;'></div>\n  <input id='gg-console-input' style='background:#000000;border:none;outline:none;color:white;font-family:monospace;'/>",e.style.position="absolute",e.style.zIndex="1000",e.style.backgroundColor="#343434",e.style.width="640px",e.style.height="480px",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="stretch",e.style.padding="0.1rem",e.style.rowGap="3px",e.style.fontSize="14px",e.style.fontFamily="monospace",e.style.fontWeight="bold",e.style.color="white",e.style.textAlign="left",document.body.append(e),this.elements={main:e,input:document.getElementById("gg-console-input"),output:document.getElementById("gg-console-output")},document.getElementById("gg-console-close-icon").onmousedown=()=>this.destroyUI(),this.elements.input.onkeydown=t=>{13===t?.keyCode?(t.preventDefault(),this.onInput().then()):38===t?.keyCode?(t.preventDefault(),this.onUsePreviousCommand()):40===t?.keyCode&&(t.preventDefault(),this.onUseNextCommand())},this.elements.input.oninput=t=>{var i;let r=(null===(i=this.elements)||void 0===i?void 0:i.input.value)||"";if(r.length>0&&null===t.data&&(r=r.substring(0,r.length-1)),""===r.trim())return;let s=window.ggstatic.availableCommands.find(o=>o[0].startsWith(r));s&&(this.elements.input.value=s[0],this.elements.input.setSelectionRange(r.length,this.elements.input.value.length))},this.stdout(),this.setupDragging(),setTimeout(()=>this.elements.input.focus(),20)}destroyUI(){this.elements&&(document.body.removeChild(this.elements.main),this.elements=null)}onUsePreviousCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex--,this.currentCommandIndex<0&&(this.currentCommandIndex+=this.commandHistory.length),this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onUseNextCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex++,this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onInput(){return n=this,e=void 0,i=function*(){const e=this.elements.input.value;this.elements.input.value="",this.stdout("\n> "+e),this.stdout("\n"+(yield window.ggstatic.console(e))),this.commandHistory.push(e),this.currentCommandIndex=this.commandHistory.length},new((t=void 0)||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())});var n,e,t,i}stdout(e=""){this.output+=e,this.elements.output.innerHTML=this.output.replace(/\n/g,"<br>"),this.elements.output.scrollTop=this.elements.output.scrollHeight}setupDragging(){let e=0,t=0;const r=o=>{if(!this.elements)return void s();o.preventDefault();const a=e-o.clientX,l=t-o.clientY;e=o.clientX,t=o.clientY,this.elements.main.style.left=this.elements.main.offsetLeft-a+"px",this.elements.main.style.top=this.elements.main.offsetTop-l+"px"},s=()=>{document.onmouseup=null,document.onmousemove=null};document.getElementById("gg-console-header").onmousedown=o=>{(o=o||window.event).preventDefault(),e=o.clientX,t=o.clientY,document.onmouseup=s,document.onmousemove=r}}}var nie=qr(738),iie=qr.n(nie);class rie{constructor(){this.ui={stats:null,debugControlsContainer:null},this.statsRemoved$=new Ve,this.currentWorld=null,this.debugControlsRemoved$=new Ve}get showStats(){return!!this.ui.stats}setShowStats(e,t){if(t===this.showStats){if(!t||this.currentWorld===e)return;this.setShowStats(this.currentWorld,!1)}if(this.currentWorld=e,t){const i=new(iie());this.ui.stats=i,i.dom.style.left="unset",i.dom.style.right="0",i.showPanel(0),document.body.appendChild(i.dom),tS(e,-1).pipe(dt(this.statsRemoved$)).subscribe(()=>{i?.begin()}),tS(e,1e4).pipe(dt(this.statsRemoved$)).subscribe(()=>{i?.end()})}else this.statsRemoved$.next(),document.body.removeChild(this.ui.stats.dom),this.ui.stats.end(),this.ui.stats=null}get showDebugControls(){return!!this.ui.debugControlsContainer}setShowDebugControls(e,t){if(t===this.showDebugControls){if(!t||this.currentWorld===e)return;this.setShowDebugControls(this.currentWorld,!1)}if(this.currentWorld=e,t){const i=document.createElement("div");this.ui.debugControlsContainer=i;const r="style='display:flex;align-items:center;margin:0.25rem;'";i.style.cssText="position:fixed;top:48px;right:0;opacity:0.9;z-index:9999;background-color:#333;color:white;display:flex;flex-direction:column",i.innerHTML=`\n      <div ${r}>\n        <input type='checkbox' name='checkbox' id='physics_debugger_checkbox_id' value='1'${this.currentWorld.physicsWorld.physicsDebugViewActive?" checked":""}>\n        <label for='physics_debugger_checkbox_id' style='user-select: none;'>Show physics bodies in scene</label>\n      </div>`,document.body.appendChild(i),ya(document.getElementById("physics_debugger_checkbox_id"),"change").pipe(dt(this.debugControlsRemoved$)).subscribe(s=>{try{this.currentWorld.physicsDebugViewActive=s.target.checked}catch(o){console.error(o)}s.target.checked=this.currentWorld.physicsDebugViewActive})}else this.debugControlsRemoved$.next(),document.body.removeChild(this.ui.debugControlsContainer),this.ui.debugControlsContainer=null}}var Vy=function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class Am{constructor(){this.debuggerUI=new rie,this.consoleUI=new tie,this._devConsoleEnabled=!1,this.consoleKeyPressEventListener=e=>{"Backquote"===e.code&&(e.preventDefault(),this.consoleUI.isUIShown?this.consoleUI.destroyUI():this.consoleUI.createUI())},this._selectedWorld=null,this.consoleCommands=new Map,this.registerConsoleCommand(null,"ls_commands",()=>Vy(this,void 0,void 0,function*(){return this.availableCommands.map(([e,t])=>`<span style="color:yellow">${e}</span>${t.doc?'\t<span style="color:#aaa">// '+t.doc+"</span>":""}`).sort().join("\n\n")}),"no args; print all available commands"),this.registerConsoleCommand(null,"ls_worlds",()=>Vy(this,void 0,void 0,function*(){return iS.documentWorlds.map(e=>e===this.selectedWorld?`<span style="color:green;">* ${e.name}</span>`:`  ${e.name}`).join("\n")}),"no args; print all available worlds"),this.registerConsoleCommand(null,"select_world",(...e)=>Vy(this,void 0,void 0,function*(){var t;for(const i of iS.documentWorlds)if(i.name===e[0]){this._selectedWorld=i;break}return(null===(t=this.selectedWorld)||void 0===t?void 0:t.name)||"null"}),"args: [string]; select world by name")}static get instance(){return Am._instance||(Am._instance=new Am),Am._instance}get devConsoleEnabled(){return this._devConsoleEnabled}set devConsoleEnabled(e){this._devConsoleEnabled!==e&&(this._devConsoleEnabled=e,e?addEventListener("keypress",this.consoleKeyPressEventListener):(removeEventListener("keypress",this.consoleKeyPressEventListener),this.consoleUI.isUIShown&&this.consoleUI.destroyUI()))}get showStats(){return this.debuggerUI.showStats}set showStats(e){this.debuggerUI.setShowStats(this.selectedWorld,e)}get showDebugControls(){return this.debuggerUI.showDebugControls}set showDebugControls(e){this.debuggerUI.setShowDebugControls(this.selectedWorld,e)}get selectedWorld(){return this._selectedWorld||iS.documentWorlds[0]||null}get availableCommands(){let e=this.consoleCommands.get(null)||{};return this.selectedWorld&&(e=Object.assign(Object.assign({},this.consoleCommands.get(this.selectedWorld)||{}),e)),Object.entries(e)}registerConsoleCommand(e,t,i,r){let s={};this.consoleCommands.has(e)?s=this.consoleCommands.get(e):this.consoleCommands.set(e,s),s[t]={handler:i,doc:r}}deregisterWorldCommands(e){this.consoleCommands.delete(e)}console(e){return Vy(this,void 0,void 0,function*(){const t=e.split("\n");let i=[];for(const r of t){const s=r.split(" ");i.push(yield this.runConsoleCommand(s.splice(0,1)[0],s))}return i.join("\n")})}runConsoleCommand(e,t){return Vy(this,void 0,void 0,function*(){let i=(this.consoleCommands.get(null)||{})[e];if(!i&&(i=(this.consoleCommands.get(this.selectedWorld)||{})[e],!i))return`<span style="color:red">Unrecognized command: ${e}</span>`;try{return yield i.handler(...t)}catch(r){return`<span style="color:red">${r}</span>`}})}}window.ggstatic=Am.instance;const sie=0,az=1,oie=2,lz=1,cz=2,Vc=3,$l=0,go=1,No=2,tu=0,Tm=1,dz=2,uz=3,hz=4,aie=5,Rh=100,lie=101,cie=102,fz=103,pz=104,die=200,uie=201,hie=202,fie=203,mR=204,gR=205,pie=206,mie=207,gie=208,_ie=209,vie=210,yie=211,bie=212,xie=213,wie=214,Mie=0,Sie=1,Cie=2,rS=3,Eie=4,Aie=5,Tie=6,Die=7,sS=0,Iie=1,Rie=2,nu=0,Pie=1,kie=2,Oie=3,Lie=4,Fie=5,Nie=6,mz="attached",zc=301,Ph=302,oS=303,aS=304,zy=306,Hc=1e3,ir=1001,Hy=1002,Bi=1003,lS=1004,Gy=1005,qi=1006,vR=1007,Gc=1008,iu=1009,Uie=1010,Vie=1011,yR=1012,gz=1013,ru=1014,jl=1015,Wy=1016,_z=1017,vz=1018,kh=1020,zie=1021,Bo=1023,Hie=1024,Gie=1025,Oh=1026,Dm=1027,Wie=1028,yz=1029,$ie=1030,bz=1031,xz=1033,bR=33776,xR=33777,wR=33778,MR=33779,wz=35840,Mz=35841,Sz=35842,Cz=35843,Ez=36196,Az=37492,Tz=37496,Dz=37808,Iz=37809,Rz=37810,Pz=37811,kz=37812,Oz=37813,Lz=37814,Fz=37815,Nz=37816,Bz=37817,Uz=37818,Vz=37819,zz=37820,Hz=37821,SR=36492,Gz=36494,Wz=36495,jie=36283,$z=36284,jz=36285,Xz=36286,$y=2300,Im=2301,Kie=0,Yz=1,AR=2,Wc=3001,Qie=3201,Lh=0,Jie=1,ba="",Ci="srgb",Hr="srgb-linear",TR="display-p3",dS="display-p3-linear",uS="linear",Ei="srgb",hS="rec709",fS="p3",km=7680,ere=512,tre=513,nre=514,Qz=515,ire=516,rre=517,sre=518,ore=519,Jz="300 es",DR=1035,Xl=2e3;class Om{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const i=this._listeners[e.type];if(void 0!==i){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const ys=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Fh=Math.PI/180,Lm=180/Math.PI;function Uo(){const n=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(ys[255&n]+ys[n>>8&255]+ys[n>>16&255]+ys[n>>24&255]+"-"+ys[255&e]+ys[e>>8&255]+"-"+ys[e>>16&15|64]+ys[e>>24&255]+"-"+ys[63&t|128]+ys[t>>8&255]+"-"+ys[t>>16&255]+ys[t>>24&255]+ys[255&i]+ys[i>>8&255]+ys[i>>16&255]+ys[i>>24&255]).toLowerCase()}function Yi(n,e,t){return Math.max(e,Math.min(t,n))}function IR(n,e){return(n%e+e)%e}function Xy(n,e,t){return(1-t)*n+t*e}function RR(n){return 0==(n&n-1)&&0!==n}function mS(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function _o(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function fn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(4294967295*n);case Uint16Array:return Math.round(65535*n);case Uint8Array:return Math.round(255*n);case Int32Array:return Math.round(2147483647*n);case Int16Array:return Math.round(32767*n);case Int8Array:return Math.round(127*n);default:throw new Error("Invalid component type.")}}const xre_radToDeg=function vre(n){return n*Lm};class Ce{constructor(e=0,t=0){Ce.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class xn{constructor(e,t,i,r,s,o,a,l,c){xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],p=i[2],m=i[5],g=i[8],b=r[0],y=r[3],v=r[6],M=r[1],x=r[4],S=r[7],P=r[2],A=r[5],R=r[8];return s[0]=o*b+a*M+l*P,s[3]=o*y+a*x+l*A,s[6]=o*v+a*S+l*R,s[1]=c*b+u*M+h*P,s[4]=c*y+u*x+h*A,s[7]=c*v+u*S+h*R,s[2]=p*b+m*M+g*P,s[5]=p*y+m*x+g*A,s[8]=p*v+m*S+g*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,p=a*l-u*s,m=c*s-o*l,g=t*h+i*p+r*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const b=1/g;return e[0]=h*b,e[1]=(r*c-u*i)*b,e[2]=(a*i-r*o)*b,e[3]=p*b,e[4]=(u*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=m*b,e[7]=(i*l-c*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(PR.makeScale(e,t)),this}rotate(e){return this.premultiply(PR.makeRotation(-e)),this}translate(e,t){return this.premultiply(PR.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const PR=new xn;function tH(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}function qy(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Mre(){const n=qy("canvas");return n.style.display="block",n}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const nH={};function Yy(n){n in nH||(nH[n]=!0,console.warn(n))}const iH=(new xn).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),rH=(new xn).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),gS={[Hr]:{transfer:uS,primaries:hS,toReference:n=>n,fromReference:n=>n},[Ci]:{transfer:Ei,primaries:hS,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[dS]:{transfer:uS,primaries:fS,toReference:n=>n.applyMatrix3(rH),fromReference:n=>n.applyMatrix3(iH)},[TR]:{transfer:Ei,primaries:fS,toReference:n=>n.convertSRGBToLinear().applyMatrix3(rH),fromReference:n=>n.applyMatrix3(iH).convertLinearToSRGB()}},Sre=new Set([Hr,dS]),ii={enabled:!0,_workingColorSpace:Hr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!Sre.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){return!1!==this.enabled&&e!==t&&e&&t?(0,gS[t].fromReference)((0,gS[e].toReference)(n)):n},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return gS[n].primaries},getTransfer:function(n){return n===ba?uS:gS[n].transfer}};function Nm(n){return n<.04045?.0773993808*n:Math.pow(.9478672986*n+.0521327014,2.4)}function kR(n){return n<.0031308?12.92*n:1.055*Math.pow(n,.41666)-.055}let Bm;class sH{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Bm&&(Bm=qy("canvas")),Bm.width=e.width,Bm.height=e.height;const i=Bm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Bm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qy("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Nm(s[o]/255);return i.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t[i]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Nm(t[i]/255)):Nm(t[i]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Cre=0;class Um{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Cre++}),this.uuid=Uo(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(OR(r[o].isDataTexture?r[o].image:r[o]))}else s=OR(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function OR(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?sH.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Ere=0,sl=(()=>{class n extends Om{constructor(t=n.DEFAULT_IMAGE,i=n.DEFAULT_MAPPING,r=ir,s=ir,o=qi,a=Gc,l=Bo,c=iu,u=n.DEFAULT_ANISOTROPY,h=ba){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Ere++}),this.uuid=Uo(),this.name="",this.source=new Um(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Ce(0,0),this.repeat=new Ce(1,1),this.center=new Ce(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof h?this.colorSpace=h:(Yy("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===Wc?Ci:ba),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=void 0===t||"string"==typeof t;if(!i&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),i||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Hc:t.x=t.x-Math.floor(t.x);break;case ir:t.x=t.x<0?0:1;break;case Hy:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Hc:t.y=t.y-Math.floor(t.y);break;case ir:t.y=t.y<0?0:1;break;case Hy:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Yy("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ci?Wc:3e3}set encoding(t){Yy("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Wc?Ci:ba}}return n.DEFAULT_IMAGE=null,n.DEFAULT_MAPPING=300,n.DEFAULT_ANISOTROPY=1,n})();class li{constructor(e=0,t=0,i=0,r=1){li.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],p=l[1],m=l[5],g=l[9],b=l[2],y=l[6],v=l[10];if(Math.abs(u-p)<.01&&Math.abs(h-b)<.01&&Math.abs(g-y)<.01){if(Math.abs(u+p)<.1&&Math.abs(h+b)<.1&&Math.abs(g+y)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,S=(m+1)/2,P=(v+1)/2,A=(u+p)/4,R=(h+b)/4,V=(g+y)/4;return x>S&&x>P?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=A/i,s=R/i):S>P?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=A/r,s=V/r):P<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(P),i=R/s,r=V/s),this.set(i,r,s,t),this}let M=Math.sqrt((y-g)*(y-g)+(h-b)*(h-b)+(p-u)*(p-u));return Math.abs(M)<.001&&(M=1),this.x=(y-g)/M,this.y=(h-b)/M,this.z=(p-u)/M,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Are extends Om{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new li(0,0,e,t),this.scissorTest=!1,this.viewport=new li(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==i.encoding&&(Yy("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Wc?Ci:ba),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:qi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new sl(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Um(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Nh extends Are{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class LR extends sl{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=ir,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oH extends sl{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Bi,this.minFilter=Bi,this.wrapR=ir,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Zs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],b=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=u,void(e[t+3]=h);if(1===a)return e[t+0]=p,e[t+1]=m,e[t+2]=g,void(e[t+3]=b);if(h!==b||l!==p||c!==m||u!==g){let y=1-a;const v=l*p+c*m+u*g+h*b,M=v>=0?1:-1,x=1-v*v;if(x>Number.EPSILON){const P=Math.sqrt(x),A=Math.atan2(P,v*M);y=Math.sin(y*A)/P,a=Math.sin(a*A)/P}const S=a*M;if(l=l*y+p*S,c=c*y+m*S,u=u*y+g*S,h=h*y+b*S,y===1-a){const P=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=P,c*=P,u*=P,h*=P}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return e[t]=a*g+u*h+l*m-c*p,e[t+1]=l*g+u*p+c*h-a*m,e[t+2]=c*g+u*m+a*p-l*h,e[t+3]=u*g-a*h-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),p=l(i/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*u*h+c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h-p*m*g;break;case"YXZ":this._x=p*u*h+c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h+p*m*g;break;case"ZXY":this._x=p*u*h-c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h-p*m*g;break;case"ZYX":this._x=p*u*h-c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h+p*m*g;break;case"YZX":this._x=p*u*h+c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h-p*m*g;break;case"XZY":this._x=p*u*h-c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],h=t[10],p=i+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>h){const m=2*Math.sqrt(1+i-a-h);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-i-h);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+h-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Yi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-t)*u)/c,p=Math.sin(t*u)/c;return this._w=o*h+this._w*p,this._x=i*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class N{constructor(e=0,t=0,i=0){N.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(aH.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(aH.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),h=2*(s*i-o*t);return this.x=t+l*c+o*h-a*u,this.y=i+l*u+a*c-s*h,this.z=r+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return FR.copy(this).projectOnVector(e),this.sub(FR)}reflect(e){return this.sub(FR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Yi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const FR=new N,aH=new Zs;class bs{constructor(e=new N(1/0,1/0,1/0),t=new N(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(ol.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(ol.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ol.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(void 0!==i){const s=i.getAttribute("position");if(!0===t&&void 0!==s&&!0!==e.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===e.isMesh?e.getVertexPosition(o,ol):ol.fromBufferAttribute(s,o),ol.applyMatrix4(e.matrixWorld),this.expandByPoint(ol);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),_S.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),_S.copy(i.boundingBox)),_S.applyMatrix4(e.matrixWorld),this.union(_S)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ol),ol.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ky),vS.subVectors(this.max,Ky),Vm.subVectors(e.a,Ky),zm.subVectors(e.b,Ky),Hm.subVectors(e.c,Ky),su.subVectors(zm,Vm),ou.subVectors(Hm,zm),Bh.subVectors(Vm,Hm);let t=[0,-su.z,su.y,0,-ou.z,ou.y,0,-Bh.z,Bh.y,su.z,0,-su.x,ou.z,0,-ou.x,Bh.z,0,-Bh.x,-su.y,su.x,0,-ou.y,ou.x,0,-Bh.y,Bh.x,0];return!(!NR(t,Vm,zm,Hm,vS)||(t=[1,0,0,0,1,0,0,0,1],!NR(t,Vm,zm,Hm,vS)))&&(yS.crossVectors(su,ou),t=[yS.x,yS.y,yS.z],NR(t,Vm,zm,Hm,vS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ol).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(ol).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||($c[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$c[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$c[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$c[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$c[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$c[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$c[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$c[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($c)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const $c=[new N,new N,new N,new N,new N,new N,new N,new N],ol=new N,_S=new bs,Vm=new N,zm=new N,Hm=new N,su=new N,ou=new N,Bh=new N,Ky=new N,vS=new N,yS=new N,Uh=new N;function NR(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Uh.fromArray(n,s);const a=r.x*Math.abs(Uh.x)+r.y*Math.abs(Uh.y)+r.z*Math.abs(Uh.z),l=e.dot(Uh),c=t.dot(Uh),u=i.dot(Uh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Tre=new bs,Zy=new N,BR=new N;class xs{constructor(e=new N,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Tre.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Zy.subVectors(e,this.center);const t=Zy.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=.5*(i-this.radius);this.center.addScaledVector(Zy,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(BR.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Zy.copy(e.center).add(BR)),this.expandByPoint(Zy.copy(e.center).sub(BR))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const jc=new N,UR=new N,bS=new N,au=new N,VR=new N,xS=new N,zR=new N;class Qy{constructor(e=new N,t=new N(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,jc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=jc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(jc.copy(this.origin).addScaledVector(this.direction,t),jc.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){UR.copy(e).add(t).multiplyScalar(.5),bS.copy(t).sub(e).normalize(),au.copy(this.origin).sub(UR);const s=.5*e.distanceTo(t),o=-this.direction.dot(bS),a=au.dot(this.direction),l=-au.dot(bS),c=au.lengthSq(),u=Math.abs(1-o*o);let h,p,m,g;if(u>0)if(h=o*l-a,p=o*a-l,g=s*u,h>=0)if(p>=-g)if(p<=g){const b=1/u;h*=b,p*=b,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-g?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=g?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(UR).addScaledVector(bS,p),m}intersectSphere(e,t){jc.subVectors(e.center,this.origin);const i=jc.dot(this.direction),r=jc.dot(jc)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),u>=0?(s=(e.min.y-p.y)*u,o=(e.max.y-p.y)*u):(s=(e.max.y-p.y)*u,o=(e.min.y-p.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),i>l||a>r)||((a>i||i!=i)&&(i=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return null!==this.intersectBox(e,jc)}intersectTriangle(e,t,i,r,s){VR.subVectors(t,e),xS.subVectors(i,e),zR.crossVectors(VR,xS);let a,o=this.direction.dot(zR);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}au.subVectors(this.origin,e);const l=a*this.direction.dot(xS.crossVectors(au,xS));if(l<0)return null;const c=a*this.direction.dot(VR.cross(au));if(c<0||l+c>o)return null;const u=-a*au.dot(zR);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Rt{constructor(e,t,i,r,s,o,a,l,c,u,h,p,m,g,b,y){Rt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,r,s,o,a,l,c,u,h,p,m,g,b,y)}set(e,t,i,r,s,o,a,l,c,u,h,p,m,g,b,y){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=h,v[14]=p,v[3]=m,v[7]=g,v[11]=b,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Rt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Gm.setFromMatrixColumn(e,0).length(),s=1/Gm.setFromMatrixColumn(e,1).length(),o=1/Gm.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if("XYZ"===e.order){const p=o*u,m=o*h,g=a*u,b=a*h;t[0]=l*u,t[4]=-l*h,t[8]=c,t[1]=m+g*c,t[5]=p-b*c,t[9]=-a*l,t[2]=b-p*c,t[6]=g+m*c,t[10]=o*l}else if("YXZ"===e.order){const p=l*u,m=l*h,g=c*u,b=c*h;t[0]=p+b*a,t[4]=g*a-m,t[8]=o*c,t[1]=o*h,t[5]=o*u,t[9]=-a,t[2]=m*a-g,t[6]=b+p*a,t[10]=o*l}else if("ZXY"===e.order){const p=l*u,m=l*h,g=c*u,b=c*h;t[0]=p-b*a,t[4]=-o*h,t[8]=g+m*a,t[1]=m+g*a,t[5]=o*u,t[9]=b-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const p=o*u,m=o*h,g=a*u,b=a*h;t[0]=l*u,t[4]=g*c-m,t[8]=p*c+b,t[1]=l*h,t[5]=b*c+p,t[9]=m*c-g,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const p=o*l,m=o*c,g=a*l,b=a*c;t[0]=l*u,t[4]=b-p*h,t[8]=g*h+m,t[1]=h,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=m*h+g,t[10]=p-b*h}else if("XZY"===e.order){const p=o*l,m=o*c,g=a*l,b=a*c;t[0]=l*u,t[4]=-h,t[8]=c*u,t[1]=p*h+b,t[5]=o*u,t[9]=m*h-g,t[2]=g*h-m,t[6]=a*u,t[10]=b*h+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Dre,e,Ire)}lookAt(e,t,i){const r=this.elements;return Vo.subVectors(e,t),0===Vo.lengthSq()&&(Vo.z=1),Vo.normalize(),lu.crossVectors(i,Vo),0===lu.lengthSq()&&(1===Math.abs(i.z)?Vo.x+=1e-4:Vo.z+=1e-4,Vo.normalize(),lu.crossVectors(i,Vo)),lu.normalize(),wS.crossVectors(Vo,lu),r[0]=lu.x,r[4]=wS.x,r[8]=Vo.x,r[1]=lu.y,r[5]=wS.y,r[9]=Vo.y,r[2]=lu.z,r[6]=wS.z,r[10]=Vo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],p=i[9],m=i[13],g=i[2],b=i[6],y=i[10],v=i[14],M=i[3],x=i[7],S=i[11],P=i[15],A=r[0],R=r[4],V=r[8],E=r[12],k=r[1],K=r[5],ue=r[9],we=r[13],G=r[2],te=r[6],W=r[10],J=r[14],ne=r[3],re=r[7],_e=r[11],Se=r[15];return s[0]=o*A+a*k+l*G+c*ne,s[4]=o*R+a*K+l*te+c*re,s[8]=o*V+a*ue+l*W+c*_e,s[12]=o*E+a*we+l*J+c*Se,s[1]=u*A+h*k+p*G+m*ne,s[5]=u*R+h*K+p*te+m*re,s[9]=u*V+h*ue+p*W+m*_e,s[13]=u*E+h*we+p*J+m*Se,s[2]=g*A+b*k+y*G+v*ne,s[6]=g*R+b*K+y*te+v*re,s[10]=g*V+b*ue+y*W+v*_e,s[14]=g*E+b*we+y*J+v*Se,s[3]=M*A+x*k+S*G+P*ne,s[7]=M*R+x*K+S*te+P*re,s[11]=M*V+x*ue+S*W+P*_e,s[15]=M*E+x*we+S*J+P*Se,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],p=e[10],m=e[14];return e[3]*(+s*l*h-r*c*h-s*a*p+i*c*p+r*a*m-i*l*m)+e[7]*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*u-s*l*u)+e[11]*(+t*c*h-t*a*m-s*o*h+i*o*m+s*a*u-i*c*u)+e[15]*(-r*a*u-t*l*h+t*a*p+r*o*h-i*o*p+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],p=e[10],m=e[11],g=e[12],b=e[13],y=e[14],v=e[15],M=h*y*c-b*p*c+b*l*m-a*y*m-h*l*v+a*p*v,x=g*p*c-u*y*c-g*l*m+o*y*m+u*l*v-o*p*v,S=u*b*c-g*h*c+g*a*m-o*b*m-u*a*v+o*h*v,P=g*h*l-u*b*l-g*a*p+o*b*p+u*a*y-o*h*y,A=t*M+i*x+r*S+s*P;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/A;return e[0]=M*R,e[1]=(b*p*s-h*y*s-b*r*m+i*y*m+h*r*v-i*p*v)*R,e[2]=(a*y*s-b*l*s+b*r*c-i*y*c-a*r*v+i*l*v)*R,e[3]=(h*l*s-a*p*s-h*r*c+i*p*c+a*r*m-i*l*m)*R,e[4]=x*R,e[5]=(u*y*s-g*p*s+g*r*m-t*y*m-u*r*v+t*p*v)*R,e[6]=(g*l*s-o*y*s-g*r*c+t*y*c+o*r*v-t*l*v)*R,e[7]=(o*p*s-u*l*s+u*r*c-t*p*c-o*r*m+t*l*m)*R,e[8]=S*R,e[9]=(g*h*s-u*b*s-g*i*m+t*b*m+u*i*v-t*h*v)*R,e[10]=(o*b*s-g*a*s+g*i*c-t*b*c-o*i*v+t*a*v)*R,e[11]=(u*a*s-o*h*s-u*i*c+t*h*c+o*i*m-t*a*m)*R,e[12]=P*R,e[13]=(u*b*r-g*h*r+g*i*p-t*b*p-u*i*y+t*h*y)*R,e[14]=(g*a*r-o*b*r-g*i*l+t*b*l+o*i*y-t*a*y)*R,e[15]=(o*h*r-u*a*r+u*i*l-t*h*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,h=a+a,p=s*c,m=s*u,g=s*h,b=o*u,y=o*h,v=a*h,M=l*c,x=l*u,S=l*h,P=i.x,A=i.y,R=i.z;return r[0]=(1-(b+v))*P,r[1]=(m+S)*P,r[2]=(g-x)*P,r[3]=0,r[4]=(m-S)*A,r[5]=(1-(p+v))*A,r[6]=(y+M)*A,r[7]=0,r[8]=(g+x)*R,r[9]=(y-M)*R,r[10]=(1-(p+b))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Gm.set(r[0],r[1],r[2]).length();const o=Gm.set(r[4],r[5],r[6]).length(),a=Gm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],al.copy(this);const c=1/s,u=1/o,h=1/a;return al.elements[0]*=c,al.elements[1]*=c,al.elements[2]*=c,al.elements[4]*=u,al.elements[5]*=u,al.elements[6]*=u,al.elements[8]*=h,al.elements[9]*=h,al.elements[10]*=h,t.setFromRotationMatrix(al),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Xl){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),h=(t+e)/(t-e),p=(i+r)/(i-r);let m,g;if(a===Xl)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);m=-o/(o-s),g=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Xl){const l=this.elements,c=1/(t-e),u=1/(i-r),h=1/(o-s),p=(t+e)*c,m=(i+r)*u;let g,b;if(a===Xl)g=(o+s)*h,b=-2*h;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);g=s*h,b=-1*h}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=b,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Gm=new N,al=new Rt,Dre=new N(0,0,0),Ire=new N(1,1,1),lu=new N,wS=new N,Vo=new N,lH=new Rt,cH=new Zs;let Rre=(()=>{class n{constructor(t=0,i=0,r=0,s=n.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,r,s=this._order){return this._x=t,this._y=i,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],h=s[9],p=s[2],m=s[6],g=s[10];switch(i){case"XYZ":this._y=Math.asin(Yi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Yi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Yi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Yi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(Yi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Yi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,i,r){return lH.makeRotationFromQuaternion(t),this.setFromRotationMatrix(lH,i,r)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return cH.setFromEuler(this),this.setFromQuaternion(cH,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return n.DEFAULT_ORDER="XYZ",n})();class HR{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let Pre=0;const dH=new N,Wm=new Zs,Xc=new Rt,MS=new N,Jy=new N,kre=new N,Ore=new Zs,uH=new N(1,0,0),hH=new N(0,1,0),fH=new N(0,0,1),Lre={type:"added"},Fre={type:"removed"};let Gr=(()=>{class n extends Om{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Pre++}),this.uuid=Uo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=n.DEFAULT_UP.clone();const t=new N,i=new Rre,r=new Zs,s=new N(1,1,1);i._onChange(function o(){r.setFromEuler(i,!1)}),r._onChange(function a(){i.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Rt},normalMatrix:{value:new xn}}),this.matrix=new Rt,this.matrixWorld=new Rt,this.matrixAutoUpdate=n.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new HR,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Wm.setFromAxisAngle(t,i),this.quaternion.multiply(Wm),this}rotateOnWorldAxis(t,i){return Wm.setFromAxisAngle(t,i),this.quaternion.premultiply(Wm),this}rotateX(t){return this.rotateOnAxis(uH,t)}rotateY(t){return this.rotateOnAxis(hH,t)}rotateZ(t){return this.rotateOnAxis(fH,t)}translateOnAxis(t,i){return dH.copy(t).applyQuaternion(this.quaternion),this.position.add(dH.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(uH,t)}translateY(t){return this.translateOnAxis(hH,t)}translateZ(t){return this.translateOnAxis(fH,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Xc.copy(this.matrixWorld).invert())}lookAt(t,i,r){t.isVector3?MS.copy(t):MS.set(t,i,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Jy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Xc.lookAt(Jy,MS,this.up):Xc.lookAt(MS,Jy,this.up),this.quaternion.setFromRotationMatrix(Xc),s&&(Xc.extractRotation(s.matrixWorld),Wm.setFromRotationMatrix(Xc),this.quaternion.premultiply(Wm.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Lre)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const i=this.children.indexOf(t);return-1!==i&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Fre)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Xc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Xc.multiply(t.parent.matrixWorld)),t.applyMatrix4(Xc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,i);if(void 0!==a)return a}}getObjectsByProperty(t,i,r=[]){this[t]===i&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(t,i,r);return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jy,t,kre),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Jy,Ore,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].traverseVisible(t)}traverseAncestors(t){const i=this.parent;null!==i&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let r=0,s=i.length;r<s;r++){const o=i[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,i){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===i){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(t),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++)o(t.shapes,c[u]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(i){const l=a(t.geometries),c=a(t.materials),u=a(t.textures),h=a(t.images),p=a(t.shapes),m=a(t.skeletons),g=a(t.animations),b=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===i)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return n.DEFAULT_UP=new N(0,1,0),n.DEFAULT_MATRIX_AUTO_UPDATE=!0,n.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,n})();const ll=new N,qc=new N,GR=new N,Yc=new N,$m=new N,jm=new N,pH=new N,WR=new N,$R=new N,jR=new N;let SS=!1;class zo{constructor(e=new N,t=new N,i=new N){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),ll.subVectors(e,t),r.cross(ll);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){ll.subVectors(r,t),qc.subVectors(i,t),GR.subVectors(e,t);const o=ll.dot(ll),a=ll.dot(qc),l=ll.dot(GR),c=qc.dot(qc),u=qc.dot(GR),h=o*c-a*a;if(0===h)return s.set(0,0,0),null;const p=1/h,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,i,r){return null!==this.getBarycoord(e,t,i,r,Yc)&&Yc.x>=0&&Yc.y>=0&&Yc.x+Yc.y<=1}static getUV(e,t,i,r,s,o,a,l){return!1===SS&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),SS=!0),this.getInterpolation(e,t,i,r,s,o,a,l)}static getInterpolation(e,t,i,r,s,o,a,l){return null===this.getBarycoord(e,t,i,r,Yc)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Yc.x),l.addScaledVector(o,Yc.y),l.addScaledVector(a,Yc.z),l)}static isFrontFacing(e,t,i,r){return ll.subVectors(i,t),qc.subVectors(e,t),ll.cross(qc).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ll.subVectors(this.c,this.b),qc.subVectors(this.a,this.b),.5*ll.cross(qc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return zo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return zo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return!1===SS&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),SS=!0),zo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return zo.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return zo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return zo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;$m.subVectors(r,i),jm.subVectors(s,i),WR.subVectors(e,i);const l=$m.dot(WR),c=jm.dot(WR);if(l<=0&&c<=0)return t.copy(i);$R.subVectors(e,r);const u=$m.dot($R),h=jm.dot($R);if(u>=0&&h<=u)return t.copy(r);const p=l*h-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector($m,o);jR.subVectors(e,s);const m=$m.dot(jR),g=jm.dot(jR);if(g>=0&&m<=g)return t.copy(s);const b=m*c-l*g;if(b<=0&&c>=0&&g<=0)return a=c/(c-g),t.copy(i).addScaledVector(jm,a);const y=u*g-m*h;if(y<=0&&h-u>=0&&m-g>=0)return pH.subVectors(s,r),a=(h-u)/(h-u+(m-g)),t.copy(r).addScaledVector(pH,a);const v=1/(y+b+p);return o=b*v,a=p*v,t.copy(i).addScaledVector($m,o).addScaledVector(jm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const mH={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cu={h:0,s:0,l:0},CS={h:0,s:0,l:0};function XR(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+6*(e-n)*t:t<.5?e:t<2/3?n+6*(e-n)*(2/3-t):n}class Ge{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(void 0===t&&void 0===i){const r=e;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ci){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ii.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ii.workingColorSpace){return this.r=e,this.g=t,this.b=i,ii.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ii.workingColorSpace){if(e=IR(e,1),t=Yi(t,0,1),i=Yi(i,0,1),0===t)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=XR(o,s,e+1/3),this.g=XR(o,s,e),this.b=XR(o,s,e-1/3)}return ii.toWorkingColorSpace(this,r),this}setStyle(e,t=Ci){function i(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ci){const i=mH[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Nm(e.r),this.g=Nm(e.g),this.b=Nm(e.b),this}copyLinearToSRGB(e){return this.r=kR(e.r),this.g=kR(e.g),this.b=kR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ci){return ii.fromWorkingColorSpace(ws.copy(this),e),65536*Math.round(Yi(255*ws.r,0,255))+256*Math.round(Yi(255*ws.g,0,255))+Math.round(Yi(255*ws.b,0,255))}getHexString(e=Ci){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ii.workingColorSpace){ii.fromWorkingColorSpace(ws.copy(this),t);const i=ws.r,r=ws.g,s=ws.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=ii.workingColorSpace){return ii.fromWorkingColorSpace(ws.copy(this),t),e.r=ws.r,e.g=ws.g,e.b=ws.b,e}getStyle(e=Ci){ii.fromWorkingColorSpace(ws.copy(this),e);const t=ws.r,i=ws.g,r=ws.b;return e!==Ci?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(e,t,i){return this.getHSL(cu),this.setHSL(cu.h+e,cu.s+t,cu.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(cu),e.getHSL(CS);const i=Xy(cu.h,CS.h,t),r=Xy(cu.s,CS.s,t),s=Xy(cu.l,CS.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ws=new Ge;Ge.NAMES=mH;let Nre=0;class vo extends Om{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Nre++}),this.uuid=Uo(),this.name="",this.type="Material",this.blending=Tm,this.side=$l,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=mR,this.blendDst=gR,this.blendEquation=Rh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ge(0,0,0),this.blendAlpha=0,this.depthFunc=rS,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=km,this.stencilZFail=km,this.stencilZPass=km,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Tm&&(i.blending=this.blending),this.side!==$l&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==mR&&(i.blendSrc=this.blendSrc),this.blendDst!==gR&&(i.blendDst=this.blendDst),this.blendEquation!==Rh&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==rS&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==km&&(i.stencilFail=this.stencilFail),this.stencilZFail!==km&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==km&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class Dr extends vo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const mr=new N,ES=new Ce;class gi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=jl,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)ES.fromBufferAttribute(this,t),ES.applyMatrix3(e),this.setXY(t,ES.x,ES.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix3(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.applyMatrix4(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.applyNormalMatrix(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mr.fromBufferAttribute(this,t),mr.transformDirection(e),this.setXYZ(t,mr.x,mr.y,mr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=_o(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=fn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_o(t,this.array)),t}setX(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_o(t,this.array)),t}setY(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_o(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_o(t,this.array)),t}setW(e,t){return this.normalized&&(t=fn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),i=fn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),i=fn(i,this.array),r=fn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=fn(t,this.array),i=fn(i,this.array),r=fn(r,this.array),s=fn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class gH extends gi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class _H extends gi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class rt extends gi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let Ure=0;const xa=new Rt,qR=new Gr,Xm=new N,Ho=new bs,tb=new bs,Wr=new N;class an extends Om{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Ure++}),this.uuid=Uo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(tH(e)?_H:gH)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const s=(new xn).getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return xa.makeRotationFromQuaternion(e),this.applyMatrix4(xa),this}rotateX(e){return xa.makeRotationX(e),this.applyMatrix4(xa),this}rotateY(e){return xa.makeRotationY(e),this.applyMatrix4(xa),this}rotateZ(e){return xa.makeRotationZ(e),this.applyMatrix4(xa),this}translate(e,t,i){return xa.makeTranslation(e,t,i),this.applyMatrix4(xa),this}scale(e,t,i){return xa.makeScale(e,t,i),this.applyMatrix4(xa),this}lookAt(e){return qR.lookAt(e),qR.updateMatrix(),this.applyMatrix4(qR.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xm).negate(),this.translate(Xm.x,Xm.y,Xm.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new rt(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new bs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new N(-1/0,-1/0,-1/0),new N(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++)Ho.setFromBufferAttribute(t[i]),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,Ho.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,Ho.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(Ho.min),this.boundingBox.expandByPoint(Ho.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new xs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new N,1/0);if(e){const i=this.boundingSphere.center;if(Ho.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)tb.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Wr.addVectors(Ho.min,tb.min),Ho.expandByPoint(Wr),Wr.addVectors(Ho.max,tb.max),Ho.expandByPoint(Wr)):(Ho.expandByPoint(tb.min),Ho.expandByPoint(tb.max));Ho.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Wr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Wr.fromBufferAttribute(a,c),l&&(Xm.fromBufferAttribute(e,c),Wr.add(Xm)),r=Math.max(r,i.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new gi(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let k=0;k<a;k++)c[k]=new N,u[k]=new N;const h=new N,p=new N,m=new N,g=new Ce,b=new Ce,y=new Ce,v=new N,M=new N;function x(k,K,ue){h.fromArray(r,3*k),p.fromArray(r,3*K),m.fromArray(r,3*ue),g.fromArray(o,2*k),b.fromArray(o,2*K),y.fromArray(o,2*ue),p.sub(h),m.sub(h),b.sub(g),y.sub(g);const we=1/(b.x*y.y-y.x*b.y);isFinite(we)&&(v.copy(p).multiplyScalar(y.y).addScaledVector(m,-b.y).multiplyScalar(we),M.copy(m).multiplyScalar(b.x).addScaledVector(p,-y.x).multiplyScalar(we),c[k].add(v),c[K].add(v),c[ue].add(v),u[k].add(M),u[K].add(M),u[ue].add(M))}let S=this.groups;0===S.length&&(S=[{start:0,count:i.length}]);for(let k=0,K=S.length;k<K;++k){const ue=S[k],we=ue.start;for(let te=we,W=we+ue.count;te<W;te+=3)x(i[te+0],i[te+1],i[te+2])}const P=new N,A=new N,R=new N,V=new N;function E(k){R.fromArray(s,3*k),V.copy(R);const K=c[k];P.copy(K),P.sub(R.multiplyScalar(R.dot(K))).normalize(),A.crossVectors(V,K);const we=A.dot(u[k])<0?-1:1;l[4*k]=P.x,l[4*k+1]=P.y,l[4*k+2]=P.z,l[4*k+3]=we}for(let k=0,K=S.length;k<K;++k){const ue=S[k],we=ue.start;for(let te=we,W=we+ue.count;te<W;te+=3)E(i[te+0]),E(i[te+1]),E(i[te+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new gi(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new N,s=new N,o=new N,a=new N,l=new N,c=new N,u=new N,h=new N;if(e)for(let p=0,m=e.count;p<m;p+=3){const g=e.getX(p+0),b=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,g),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,y),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,g),l.fromBufferAttribute(i,b),c.fromBufferAttribute(i,y),a.add(u),l.add(u),c.add(u),i.setXYZ(g,a.x,a.y,a.z),i.setXYZ(b,l.x,l.y,l.z),i.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(p+0,u.x,u.y,u.z),i.setXYZ(p+1,u.x,u.y,u.z),i.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Wr.fromBufferAttribute(e,t),Wr.normalize(),e.setXYZ(t,Wr.x,Wr.y,Wr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let b=0,y=l.length;b<y;b++){m=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*u;for(let v=0;v<u;v++)p[g++]=c[m++]}return new gi(p,u,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new an,i=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const m=e(c[u],i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i)e.data.attributes[l]=i[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,p=c.length;h<p;h++)u.push(c[h].toJSON(e.data));u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let p=0,m=h.length;p<m;p++)u.push(h[p].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const vH=new Rt,Vh=new Qy,AS=new xs,yH=new N,qm=new N,Ym=new N,Km=new N,YR=new N,TS=new N,DS=new Ce,IS=new Ce,RS=new Ce,bH=new N,xH=new N,wH=new N,PS=new N,kS=new N;class Yn extends Gr{constructor(e=new an,t=new Dr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(i.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){TS.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(YR.fromBufferAttribute(s[l],e),TS.addScaledVector(o?YR:YR.sub(t),u))}t.add(TS)}return t}raycast(e,t){const i=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===i.boundingSphere&&i.computeBoundingSphere(),AS.copy(i.boundingSphere),AS.applyMatrix4(s),Vh.copy(e.ray).recast(e.near),(!1!==AS.containsPoint(Vh.origin)||!(null===Vh.intersectSphere(AS,yH)||Vh.origin.distanceToSquared(yH)>(e.far-e.near)**2))&&(vH.copy(s).invert(),Vh.copy(e.ray).applyMatrix4(vH),(null===i.boundingBox||!1!==Vh.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,Vh)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(null!==a)if(Array.isArray(o))for(let g=0,b=p.length;g<b;g++){const y=p[g],v=o[y.materialIndex];for(let S=Math.max(y.start,m.start),P=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));S<P;S+=3)r=OS(this,v,e,i,c,u,h,a.getX(S),a.getX(S+1),a.getX(S+2)),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=y.materialIndex,t.push(r))}else for(let y=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);y<v;y+=3)r=OS(this,o,e,i,c,u,h,a.getX(y),a.getX(y+1),a.getX(y+2)),r&&(r.faceIndex=Math.floor(y/3),t.push(r));else if(void 0!==l)if(Array.isArray(o))for(let g=0,b=p.length;g<b;g++){const y=p[g],v=o[y.materialIndex];for(let S=Math.max(y.start,m.start),P=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));S<P;S+=3)r=OS(this,v,e,i,c,u,h,S,S+1,S+2),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=y.materialIndex,t.push(r))}else for(let y=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);y<v;y+=3)r=OS(this,o,e,i,c,u,h,y,y+1,y+2),r&&(r.faceIndex=Math.floor(y/3),t.push(r))}}function OS(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,qm),n.getVertexPosition(l,Ym),n.getVertexPosition(c,Km);const u=function Vre(n,e,t,i,r,s,o,a){let l;if(l=e.side===go?i.intersectTriangle(o,s,r,!0,a):i.intersectTriangle(r,s,o,e.side===$l,a),null===l)return null;kS.copy(a),kS.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(kS);return c<t.near||c>t.far?null:{distance:c,point:kS.clone(),object:n}}(n,e,t,i,qm,Ym,Km,PS);if(u){r&&(DS.fromBufferAttribute(r,a),IS.fromBufferAttribute(r,l),RS.fromBufferAttribute(r,c),u.uv=zo.getInterpolation(PS,qm,Ym,Km,DS,IS,RS,new Ce)),s&&(DS.fromBufferAttribute(s,a),IS.fromBufferAttribute(s,l),RS.fromBufferAttribute(s,c),u.uv1=zo.getInterpolation(PS,qm,Ym,Km,DS,IS,RS,new Ce),u.uv2=u.uv1),o&&(bH.fromBufferAttribute(o,a),xH.fromBufferAttribute(o,l),wH.fromBufferAttribute(o,c),u.normal=zo.getInterpolation(PS,qm,Ym,Km,bH,xH,wH,new N),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new N,materialIndex:0};zo.getNormal(qm,Ym,Km,h.normal),u.face=h}return u}class zh extends an{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let p=0,m=0;function g(b,y,v,M,x,S,P,A,R,V,E){const k=S/R,K=P/V,ue=S/2,we=P/2,G=A/2,te=R+1,W=V+1;let J=0,ne=0;const re=new N;for(let _e=0;_e<W;_e++){const Se=_e*K-we;for(let Oe=0;Oe<te;Oe++)re[b]=(Oe*k-ue)*M,re[y]=Se*x,re[v]=G,c.push(re.x,re.y,re.z),re[b]=0,re[y]=0,re[v]=A>0?1:-1,u.push(re.x,re.y,re.z),h.push(Oe/R),h.push(1-_e/V),J+=1}for(let _e=0;_e<V;_e++)for(let Se=0;Se<R;Se++){const le=p+Se+te*(_e+1),me=p+(Se+1)+te*(_e+1),Be=p+(Se+1)+te*_e;l.push(p+Se+te*_e,le,Be),l.push(le,me,Be),ne+=6}a.addGroup(m,ne,E),m+=ne,p+=J}g("z","y","x",-1,-1,i,t,e,o,s,0),g("z","y","x",1,-1,i,t,-e,o,s,1),g("x","z","y",1,1,e,i,t,r,o,2),g("x","z","y",1,-1,e,i,-t,r,o,3),g("x","y","z",1,-1,e,t,i,r,s,4),g("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new rt(c,3)),this.setAttribute("normal",new rt(u,3)),this.setAttribute("uv",new rt(h,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Zm(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():e[t][i]=Array.isArray(r)?r.slice():r}}return e}function Qs(n){const e={};for(let t=0;t<n.length;t++){const i=Zm(n[t]);for(const r in i)e[r]=i[r]}return e}function MH(n){return null===n.getRenderTarget()?n.outputColorSpace:ii.workingColorSpace}const Hre={clone:Zm,merge:Qs};class du extends vo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zm(e.uniforms),this.uniformsGroups=function zre(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)!0===this.extensions[r]&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class KR extends Gr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Rt,this.projectionMatrix=new Rt,this.projectionMatrixInverse=new Rt,this.coordinateSystem=Xl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class gr extends KR{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Lm*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Fh*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Lm*Math.atan(Math.tan(.5*Fh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Fh*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class $re extends Gr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new gr(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new gr(-90,1,e,t);s.layers=this.layers,this.add(s);const o=new gr(-90,1,e,t);o.layers=this.layers,this.add(o);const a=new gr(-90,1,e,t);a.layers=this.layers,this.add(a);const l=new gr(-90,1,e,t);l.layers=this.layers,this.add(l);const c=new gr(-90,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Xl)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==e)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),g=e.xr.enabled;e.xr.enabled=!1;const b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(h,p,m),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class LS extends sl{constructor(e,t,i,r,s,o,a,l,c,u){super(e=void 0!==e?e:[],t=void 0!==t?t:zc,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class jre extends Nh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];void 0!==t.encoding&&(Yy("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Wc?Ci:ba),this.texture=new LS(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:qi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i_uniforms={tEquirect:{value:null}},i_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new zh(5,5,5),s=new du({name:"CubemapFromEquirect",uniforms:Zm(i_uniforms),vertexShader:i_vertexShader,fragmentShader:i_fragmentShader,side:go,blending:tu});s.uniforms.tEquirect.value=t;const o=new Yn(r,s),a=t.minFilter;return t.minFilter===Gc&&(t.minFilter=qi),new $re(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const ZR=new N,Xre=new N,qre=new xn;class Hh{constructor(e=new N(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=ZR.subVectors(i,t).cross(Xre.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(ZR),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||qre.getNormalMatrix(e),r=this.coplanarPoint(ZR).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Gh=new xs,FS=new N;class NS{constructor(e=new Hh,t=new Hh,i=new Hh,r=new Hh,s=new Hh,o=new Hh){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Xl){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],p=r[7],m=r[8],g=r[9],b=r[10],y=r[11],v=r[12],M=r[13],x=r[14],S=r[15];if(i[0].setComponents(l-s,p-c,y-m,S-v).normalize(),i[1].setComponents(l+s,p+c,y+m,S+v).normalize(),i[2].setComponents(l+o,p+u,y+g,S+M).normalize(),i[3].setComponents(l-o,p-u,y-g,S-M).normalize(),i[4].setComponents(l-a,p-h,y-b,S-x).normalize(),t===Xl)i[5].setComponents(l+a,p+h,y+b,S+x).normalize();else{if(2001!==t)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);i[5].setComponents(a,h,b,x).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Gh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Gh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Gh)}intersectsSprite(e){return Gh.center.set(0,0,0),Gh.radius=.7071067811865476,Gh.applyMatrix4(e.matrixWorld),this.intersectsSphere(Gh)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(FS.x=r.normal.x>0?e.max.x:e.min.x,FS.y=r.normal.y>0?e.max.y:e.min.y,FS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(FS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function SH(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Yre(n,e){const t=e.isWebGL2,i=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(n.deleteBuffer(u.buffer),i.delete(c))},update:function l(c,u){if(c.isGLBufferAttribute){const p=i.get(c);return void((!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const h=i.get(c);if(void 0===h)i.set(c,function r(c,u){const h=c.array,p=c.usage,m=h.byteLength,g=n.createBuffer();let b;if(n.bindBuffer(u,g),n.bufferData(u,h,p),c.onUploadCallback(),h instanceof Float32Array)b=n.FLOAT;else if(h instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");b=n.HALF_FLOAT}else b=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)b=n.SHORT;else if(h instanceof Uint32Array)b=n.UNSIGNED_INT;else if(h instanceof Int32Array)b=n.INT;else if(h instanceof Int8Array)b=n.BYTE;else if(h instanceof Uint8Array)b=n.UNSIGNED_BYTE;else{if(!(h instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);b=n.UNSIGNED_BYTE}return{buffer:g,type:b,bytesPerElement:h.BYTES_PER_ELEMENT,version:c.version,size:m}}(c,u));else if(h.version<c.version){if(h.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function s(c,u,h){const p=u.array,m=u._updateRange,g=u.updateRanges;if(n.bindBuffer(h,c),-1===m.count&&0===g.length&&n.bufferSubData(h,0,p),0!==g.length){for(let b=0,y=g.length;b<y;b++){const v=g[b];t?n.bufferSubData(h,v.start*p.BYTES_PER_ELEMENT,p,v.start,v.count):n.bufferSubData(h,v.start*p.BYTES_PER_ELEMENT,p.subarray(v.start,v.start+v.count))}u.clearUpdateRanges()}-1!==m.count&&(t?n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(h,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),u.onUploadCallback()})(h.buffer,c,u),h.version=c.version}}}}class eg extends an{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,p=t/l,m=[],g=[],b=[],y=[];for(let v=0;v<u;v++){const M=v*p-o;for(let x=0;x<c;x++)g.push(x*h-s,-M,0),b.push(0,0,1),y.push(x/a),y.push(1-v/l)}for(let v=0;v<l;v++)for(let M=0;M<a;M++){const S=M+c*(v+1),P=M+1+c*(v+1),A=M+1+c*v;m.push(M+c*v,S,A),m.push(S,P,A)}this.setIndex(m),this.setAttribute("position",new rt(g,3)),this.setAttribute("normal",new rt(b,3)),this.setAttribute("uv",new rt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new eg(e.width,e.height,e.widthSegments,e.heightSegments)}}const _n={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor *= toneMappingExposure;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\treturn color;\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},ze={common:{diffuse:{value:new Ge(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new xn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new xn},normalScale:{value:new Ce(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0},uvTransform:{value:new xn}},sprite:{diffuse:{value:new Ge(16777215)},opacity:{value:1},center:{value:new Ce(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new xn},alphaMap:{value:null},alphaMapTransform:{value:new xn},alphaTest:{value:0}}},ql={basic:{uniforms:Qs([ze.common,ze.specularmap,ze.envmap,ze.aomap,ze.lightmap,ze.fog]),vertexShader:_n.meshbasic_vert,fragmentShader:_n.meshbasic_frag},lambert:{uniforms:Qs([ze.common,ze.specularmap,ze.envmap,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)}}]),vertexShader:_n.meshlambert_vert,fragmentShader:_n.meshlambert_frag},phong:{uniforms:Qs([ze.common,ze.specularmap,ze.envmap,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)},specular:{value:new Ge(1118481)},shininess:{value:30}}]),vertexShader:_n.meshphong_vert,fragmentShader:_n.meshphong_frag},standard:{uniforms:Qs([ze.common,ze.envmap,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.roughnessmap,ze.metalnessmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_n.meshphysical_vert,fragmentShader:_n.meshphysical_frag},toon:{uniforms:Qs([ze.common,ze.aomap,ze.lightmap,ze.emissivemap,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.gradientmap,ze.fog,ze.lights,{emissive:{value:new Ge(0)}}]),vertexShader:_n.meshtoon_vert,fragmentShader:_n.meshtoon_frag},matcap:{uniforms:Qs([ze.common,ze.bumpmap,ze.normalmap,ze.displacementmap,ze.fog,{matcap:{value:null}}]),vertexShader:_n.meshmatcap_vert,fragmentShader:_n.meshmatcap_frag},points:{uniforms:Qs([ze.points,ze.fog]),vertexShader:_n.points_vert,fragmentShader:_n.points_frag},dashed:{uniforms:Qs([ze.common,ze.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_n.linedashed_vert,fragmentShader:_n.linedashed_frag},depth:{uniforms:Qs([ze.common,ze.displacementmap]),vertexShader:_n.depth_vert,fragmentShader:_n.depth_frag},normal:{uniforms:Qs([ze.common,ze.bumpmap,ze.normalmap,ze.displacementmap,{opacity:{value:1}}]),vertexShader:_n.meshnormal_vert,fragmentShader:_n.meshnormal_frag},sprite:{uniforms:Qs([ze.sprite,ze.fog]),vertexShader:_n.sprite_vert,fragmentShader:_n.sprite_frag},background:{uniforms:{uvTransform:{value:new xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_n.background_vert,fragmentShader:_n.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:_n.backgroundCube_vert,fragmentShader:_n.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_n.cube_vert,fragmentShader:_n.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_n.equirect_vert,fragmentShader:_n.equirect_frag},distanceRGBA:{uniforms:Qs([ze.common,ze.displacementmap,{referencePosition:{value:new N},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_n.distanceRGBA_vert,fragmentShader:_n.distanceRGBA_frag},shadow:{uniforms:Qs([ze.lights,ze.fog,{color:{value:new Ge(0)},opacity:{value:1}}]),vertexShader:_n.shadow_vert,fragmentShader:_n.shadow_frag}};ql.physical={uniforms:Qs([ql.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new xn},clearcoatNormalScale:{value:new Ce(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new xn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new xn},sheen:{value:0},sheenColor:{value:new Ge(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new xn},transmissionSamplerSize:{value:new Ce},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new xn},attenuationDistance:{value:0},attenuationColor:{value:new Ge(0)},specularColor:{value:new Ge(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new xn},anisotropyVector:{value:new Ce},anisotropyMap:{value:null},anisotropyMapTransform:{value:new xn}}]),vertexShader:_n.meshphysical_vert,fragmentShader:_n.meshphysical_frag};const BS={r:0,b:0,g:0};function Yoe(n,e,t,i,r,s,o){const a=new Ge(0);let c,u,l=!0===s?0:1,h=null,p=0,m=null;function b(y,v){y.getRGB(BS,MH(n)),i.buffers.color.setClear(BS.r,BS.g,BS.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),l=v,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,b(a,l)},render:function g(y,v){let M=!1,x=!0===v.isScene?v.background:null;x&&x.isTexture&&(x=(v.backgroundBlurriness>0?t:e).get(x)),null===x?b(a,l):x&&x.isColor&&(b(x,1),M=!0);const S=n.xr.getEnvironmentBlendMode();"additive"===S?i.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===S&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||M)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||x.mapping===zy)?(void 0===u&&(u=new Yn(new zh(1,1,1),new du({name:"BackgroundCubeMaterial",uniforms:Zm(ql.backgroundCube.uniforms),vertexShader:ql.backgroundCube.vertexShader,fragmentShader:ql.backgroundCube.fragmentShader,side:go,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(P,A,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=ii.getTransfer(x.colorSpace)!==Ei,(h!==x||p!==x.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=x,p=x.version,m=n.toneMapping),u.layers.enableAll(),y.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new Yn(new eg(2,2),new du({name:"BackgroundMaterial",uniforms:Zm(ql.background.uniforms),vertexShader:ql.background.vertexShader,fragmentShader:ql.background.fragmentShader,side:$l,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=ii.getTransfer(x.colorSpace)!==Ei,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||p!==x.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=x,p=x.version,m=n.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}}}function Koe(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||null!==s,a={},l=y(null);let c=l,u=!1;function m(G){return i.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function g(G){return i.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function y(G){const te=[],W=[],J=[];for(let ne=0;ne<r;ne++)te[ne]=0,W[ne]=0,J[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:te,enabledAttributes:W,attributeDivisors:J,object:G,attributes:{},index:null}}function x(){const G=c.newAttributes;for(let te=0,W=G.length;te<W;te++)G[te]=0}function S(G){P(G,0)}function P(G,te){const J=c.enabledAttributes,ne=c.attributeDivisors;c.newAttributes[G]=1,0===J[G]&&(n.enableVertexAttribArray(G),J[G]=1),ne[G]!==te&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,te),ne[G]=te)}function A(){const G=c.newAttributes,te=c.enabledAttributes;for(let W=0,J=te.length;W<J;W++)te[W]!==G[W]&&(n.disableVertexAttribArray(W),te[W]=0)}function R(G,te,W,J,ne,re,_e){!0===_e?n.vertexAttribIPointer(G,te,W,ne,re):n.vertexAttribPointer(G,te,W,J,ne,re)}function ue(){we(),u=!0,c!==l&&(c=l,m(c.object))}function we(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function h(G,te,W,J,ne){let re=!1;if(o){const _e=function b(G,te,W){const J=!0===W.wireframe;let ne=a[G.id];void 0===ne&&(ne={},a[G.id]=ne);let re=ne[te.id];void 0===re&&(re={},ne[te.id]=re);let _e=re[J];return void 0===_e&&(_e=y(function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}()),re[J]=_e),_e}(J,W,te);c!==_e&&(c=_e,m(c.object)),re=function v(G,te,W,J){const ne=c.attributes,re=te.attributes;let _e=0;const Se=W.getAttributes();for(const Oe in Se)if(Se[Oe].location>=0){const me=ne[Oe];let Be=re[Oe];if(void 0===Be&&("instanceMatrix"===Oe&&G.instanceMatrix&&(Be=G.instanceMatrix),"instanceColor"===Oe&&G.instanceColor&&(Be=G.instanceColor)),void 0===me||me.attribute!==Be||Be&&me.data!==Be.data)return!0;_e++}return c.attributesNum!==_e||c.index!==J}(G,J,W,ne),re&&function M(G,te,W,J){const ne={},re=te.attributes;let _e=0;const Se=W.getAttributes();for(const Oe in Se)if(Se[Oe].location>=0){let me=re[Oe];void 0===me&&("instanceMatrix"===Oe&&G.instanceMatrix&&(me=G.instanceMatrix),"instanceColor"===Oe&&G.instanceColor&&(me=G.instanceColor));const Be={};Be.attribute=me,me&&me.data&&(Be.data=me.data),ne[Oe]=Be,_e++}c.attributes=ne,c.attributesNum=_e,c.index=J}(G,J,W,ne)}else{const _e=!0===te.wireframe;(c.geometry!==J.id||c.program!==W.id||c.wireframe!==_e)&&(c.geometry=J.id,c.program=W.id,c.wireframe=_e,re=!0)}null!==ne&&t.update(ne,n.ELEMENT_ARRAY_BUFFER),(re||u)&&(u=!1,function V(G,te,W,J){if(!1===i.isWebGL2&&(G.isInstancedMesh||J.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;x();const ne=J.attributes,re=W.getAttributes(),_e=te.defaultAttributeValues;for(const Se in re){const Oe=re[Se];if(Oe.location>=0){let le=ne[Se];if(void 0===le&&("instanceMatrix"===Se&&G.instanceMatrix&&(le=G.instanceMatrix),"instanceColor"===Se&&G.instanceColor&&(le=G.instanceColor)),void 0!==le){const me=le.normalized,Be=le.itemSize,tt=t.get(le);if(void 0===tt)continue;const Ne=tt.buffer,pt=tt.type,mt=tt.bytesPerElement,Je=!0===i.isWebGL2&&(pt===n.INT||pt===n.UNSIGNED_INT||le.gpuType===gz);if(le.isInterleavedBufferAttribute){const Dt=le.data,z=Dt.stride,Ue=le.offset;if(Dt.isInstancedInterleavedBuffer){for(let xe=0;xe<Oe.locationSize;xe++)P(Oe.location+xe,Dt.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===J._maxInstanceCount&&(J._maxInstanceCount=Dt.meshPerAttribute*Dt.count)}else for(let xe=0;xe<Oe.locationSize;xe++)S(Oe.location+xe);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let xe=0;xe<Oe.locationSize;xe++)R(Oe.location+xe,Be/Oe.locationSize,pt,me,z*mt,(Ue+Be/Oe.locationSize*xe)*mt,Je)}else{if(le.isInstancedBufferAttribute){for(let Dt=0;Dt<Oe.locationSize;Dt++)P(Oe.location+Dt,le.meshPerAttribute);!0!==G.isInstancedMesh&&void 0===J._maxInstanceCount&&(J._maxInstanceCount=le.meshPerAttribute*le.count)}else for(let Dt=0;Dt<Oe.locationSize;Dt++)S(Oe.location+Dt);n.bindBuffer(n.ARRAY_BUFFER,Ne);for(let Dt=0;Dt<Oe.locationSize;Dt++)R(Oe.location+Dt,Be/Oe.locationSize,pt,me,Be*mt,Be/Oe.locationSize*Dt*mt,Je)}}else if(void 0!==_e){const me=_e[Se];if(void 0!==me)switch(me.length){case 2:n.vertexAttrib2fv(Oe.location,me);break;case 3:n.vertexAttrib3fv(Oe.location,me);break;case 4:n.vertexAttrib4fv(Oe.location,me);break;default:n.vertexAttrib1fv(Oe.location,me)}}}}A()}(G,te,W,J),null!==ne&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(ne).buffer))},reset:ue,resetDefaultState:we,dispose:function E(){ue();for(const G in a){const te=a[G];for(const W in te){const J=te[W];for(const ne in J)g(J[ne].object),delete J[ne];delete te[W]}delete a[G]}},releaseStatesOfGeometry:function k(G){if(void 0===a[G.id])return;const te=a[G.id];for(const W in te){const J=te[W];for(const ne in J)g(J[ne].object),delete J[ne];delete te[W]}delete a[G.id]},releaseStatesOfProgram:function K(G){for(const te in a){const W=a[te];if(void 0===W[G.id])continue;const J=W[G.id];for(const ne in J)g(J[ne].object),delete J[ne];delete W[G.id]}},initAttributes:x,enableAttribute:S,disableUnusedAttributes:A}}function Zoe(n,e,t,i){const r=i.isWebGL2;let s;this.setMode=function o(u){s=u},this.render=function a(u,h){n.drawArrays(s,u,h),t.update(h,s,1)},this.renderInstances=function l(u,h,p){if(0===p)return;let m,g;if(r)m=n,g="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",null===m)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[g](s,u,h,p),t.update(h,s,p)},this.renderMultiDraw=function c(u,h,p){if(0===p)return;const m=e.get("WEBGL_multi_draw");if(null===m)for(let g=0;g<p;g++)this.render(u[g],h[g]);else{m.multiDrawArraysWEBGL(s,u,0,h,0,p);let g=0;for(let b=0;b<p;b++)g+=h[b];t.update(g,s,1)}}}function Qoe(n,e,t){let i;function s(R){if("highp"===R){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return"mediump"===R&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===n.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=!0===t.logarithmicDepthBuffer,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),b=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),v=n.getParameter(n.MAX_VARYING_VECTORS),M=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,S=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==i)return i;if(!0===e.has("EXT_texture_filter_anisotropic")){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:g,maxAttributes:b,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:M,vertexTextures:x,floatFragmentTextures:S,floatVertexTextures:x&&S,maxSamples:o?n.getParameter(n.MAX_SAMPLES):0}}function Joe(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Hh,a=new xn,l={value:null,needsUpdate:!1};function u(h,p,m,g){const b=null!==h?h.length:0;let y=null;if(0!==b){if(y=l.value,!0!==g||null===y){const v=m+4*b,M=p.matrixWorldInverse;a.getNormalMatrix(M),(null===y||y.length<v)&&(y=new Float32Array(v));for(let x=0,S=m;x!==b;++x,S+=4)o.copy(h[x]).applyMatrix4(M,a),o.normal.toArray(y,S),y[S+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,y}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=0!==h.length||p||0!==i||r;return r=p,i=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){t=u(h,p,0)},this.setState=function(h,p,m){const g=h.clippingPlanes,b=h.clipIntersection,y=h.clipShadows,v=n.get(h);if(!r||null===g||0===g.length||s&&!y)s?u(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}();else{const M=s?0:i,x=4*M;let S=v.clippingState||null;l.value=S,S=u(g,p,x,m);for(let P=0;P!==x;++P)S[P]=t[P];v.clippingState=S,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}}}function eae(n){let e=new WeakMap;function t(o,a){return a===oS?o.mapping=zc:a===aS&&(o.mapping=Ph),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===oS||a===aS){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new jre(l.height/2);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class US extends KR{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const CH=[.125,.215,.35,.446,.526,.582],QR=new US,EH=new Ge;let JR=null,eP=0,tP=0;const $h=(1+Math.sqrt(5))/2,ng=1/$h,AH=[new N(1,1,1),new N(-1,1,1),new N(1,1,-1),new N(-1,1,-1),new N(0,$h,ng),new N(0,$h,-ng),new N(ng,0,$h),new N(-ng,0,$h),new N($h,ng,0),new N(-$h,ng,0)];class TH{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){JR=this._renderer.getRenderTarget(),eP=this._renderer.getActiveCubeFace(),tP=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=RH(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=IH(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(JR,eP,tP),e.scissorTest=!1,VS(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===zc||e.mapping===Ph?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),JR=this._renderer.getRenderTarget(),eP=this._renderer.getActiveCubeFace(),tP=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:qi,minFilter:qi,generateMipmaps:!1,type:Wy,format:Bo,colorSpace:Hr,depthBuffer:!1},r=DH(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=DH(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function tae(n){const e=[],t=[],i=[];let r=n;const s=n-4+1+CH.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-4?l=CH[o-n+4-1]:0===o&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,p=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,g=6,b=3,y=2,v=1,M=new Float32Array(b*g*m),x=new Float32Array(y*g*m),S=new Float32Array(v*g*m);for(let A=0;A<m;A++){const R=A%3*2/3-1,V=A>2?0:-1;M.set([R,V,0,R+2/3,V,0,R+2/3,V+1,0,R,V,0,R+2/3,V+1,0,R,V+1,0],b*g*A),x.set(p,y*g*A),S.set([A,A,A,A,A,A],v*g*A)}const P=new an;P.setAttribute("position",new gi(M,b)),P.setAttribute("uv",new gi(x,y)),P.setAttribute("faceIndex",new gi(S,v)),e.push(P),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}(s)),this._blurMaterial=function nae(n,e,t){const i=new Float32Array(20),r=new N(0,1,0);return new du({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:tu,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Yn(this._lodPlanes[0],e);this._renderer.compile(t,QR)}_sceneToCubeUV(e,t,i,r){const a=new gr(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,p=u.toneMapping;u.getClearColor(EH),u.toneMapping=nu,u.autoClear=!1;const m=new Dr({name:"PMREM.Background",side:go,depthWrite:!1,depthTest:!1}),g=new Yn(new zh,m);let b=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,b=!0):(m.color.copy(EH),b=!0);for(let v=0;v<6;v++){const M=v%3;0===M?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):1===M?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const x=this._cubeSize;VS(r,M*x,v>2?x:0,x,x),u.setRenderTarget(r),b&&u.render(g,a),u.render(e,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=h,e.background=y}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===zc||e.mapping===Ph;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=RH()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=IH());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Yn(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;VS(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,QR)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,AH[(r-1)%AH.length])}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Yn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,b=s/g,y=isFinite(s)?1+Math.floor(3*b):20;y>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);const v=[];let M=0;for(let R=0;R<20;++R){const V=R/b,E=Math.exp(-V*V/2);v.push(E),0===R?M+=E:R<y&&(M+=2*E)}for(let R=0;R<v.length;R++)v[R]=v[R]/M;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=v,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:x}=this;p.dTheta.value=g,p.mipInt.value=x-i;const S=this._sizeLods[r];VS(t,3*S*(r>x-4?r-x+4:0),4*(this._cubeSize-S),3*S,2*S),l.setRenderTarget(t),l.render(h,QR)}}function DH(n,e,t){const i=new Nh(n,e,t);return i.texture.mapping=zy,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function VS(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function IH(){return new du({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:tu,depthTest:!1,depthWrite:!1})}function RH(){return new du({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:tu,depthTest:!1,depthWrite:!1})}function iae(n){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===oS||l===aS,u=l===zc||l===Ph;if(c||u){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let h=e.get(a);return null===t&&(t=new TH(n)),h=c?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}if(e.has(a))return e.get(a).texture;{const h=a.image;if(c&&h&&h.height>0||u&&h&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(h)){null===t&&(t=new TH(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function rae(n){const e={};function t(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return null!==t(i)},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return null===r&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function sae(n,e,t,i){const r={},s=new WeakMap;function o(h){const p=h.target;null!==p.index&&e.remove(p.index);for(const g in p.attributes)e.remove(p.attributes[g]);for(const g in p.morphAttributes){const b=p.morphAttributes[g];for(let y=0,v=b.length;y<v;y++)e.remove(b[y])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function c(h){const p=[],m=h.index,g=h.attributes.position;let b=0;if(null!==m){const M=m.array;b=m.version;for(let x=0,S=M.length;x<S;x+=3){const P=M[x+0],A=M[x+1],R=M[x+2];p.push(P,A,A,R,R,P)}}else{if(void 0===g)return;b=g.version;for(let x=0,S=g.array.length/3-1;x<S;x+=3){const P=x+0,A=x+1,R=x+2;p.push(P,A,A,R,R,P)}}const y=new(tH(p)?_H:gH)(p,1);y.version=b;const v=s.get(h);v&&e.remove(v),s.set(h,y)}return{get:function a(h,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function l(h){const p=h.attributes;for(const g in p)e.update(p[g],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const g in m){const b=m[g];for(let y=0,v=b.length;y<v;y++)e.update(b[y],n.ARRAY_BUFFER)}},getWireframeAttribute:function u(h){const p=s.get(h);if(p){const m=h.index;null!==m&&p.version<m.version&&c(h)}else c(h);return s.get(h)}}}function oae(n,e,t,i){const r=i.isWebGL2;let s,a,l;this.setMode=function o(m){s=m},this.setIndex=function c(m){a=m.type,l=m.bytesPerElement},this.render=function u(m,g){n.drawElements(s,g,a,m*l),t.update(g,s,1)},this.renderInstances=function h(m,g,b){if(0===b)return;let y,v;if(r)y=n,v="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",null===y)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");y[v](s,g,a,m*l,b),t.update(g,s,b)},this.renderMultiDraw=function p(m,g,b){if(0===b)return;const y=e.get("WEBGL_multi_draw");if(null===y)for(let v=0;v<b;v++)this.render(m[v]/l,g[v]);else{y.multiDrawElementsWEBGL(s,g,0,a,m,0,b);let v=0;for(let M=0;M<b;M++)v+=g[M];t.update(v,s,1)}}}function aae(n){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function lae(n,e){return n[0]-e[0]}function cae(n,e){return Math.abs(e[1])-Math.abs(n[1])}function dae(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new li,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,u,h){const p=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,g=void 0!==m?m.length:0;let b=s.get(u);if(void 0===b||b.count!==g){let G=function(){ue.dispose(),s.delete(u),u.removeEventListener("dispose",G)};void 0!==b&&b.texture.dispose();const M=void 0!==u.morphAttributes.position,x=void 0!==u.morphAttributes.normal,S=void 0!==u.morphAttributes.color,P=u.morphAttributes.position||[],A=u.morphAttributes.normal||[],R=u.morphAttributes.color||[];let V=0;!0===M&&(V=1),!0===x&&(V=2),!0===S&&(V=3);let E=u.attributes.position.count*V,k=1;E>e.maxTextureSize&&(k=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const K=new Float32Array(E*k*4*g),ue=new LR(K,E,k,g);ue.type=jl,ue.needsUpdate=!0;const we=4*V;for(let te=0;te<g;te++){const W=P[te],J=A[te],ne=R[te],re=E*k*4*te;for(let _e=0;_e<W.count;_e++){const Se=_e*we;!0===M&&(o.fromBufferAttribute(W,_e),K[re+Se+0]=o.x,K[re+Se+1]=o.y,K[re+Se+2]=o.z,K[re+Se+3]=0),!0===x&&(o.fromBufferAttribute(J,_e),K[re+Se+4]=o.x,K[re+Se+5]=o.y,K[re+Se+6]=o.z,K[re+Se+7]=0),!0===S&&(o.fromBufferAttribute(ne,_e),K[re+Se+8]=o.x,K[re+Se+9]=o.y,K[re+Se+10]=o.z,K[re+Se+11]=4===ne.itemSize?o.w:1)}}b={count:g,texture:ue,size:new Ce(E,k)},s.set(u,b),u.addEventListener("dispose",G)}let y=0;for(let M=0;M<p.length;M++)y+=p[M];const v=u.morphTargetsRelative?1:1-y;h.getUniforms().setValue(n,"morphTargetBaseInfluence",v),h.getUniforms().setValue(n,"morphTargetInfluences",p),h.getUniforms().setValue(n,"morphTargetsTexture",b.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",b.size)}else{const m=void 0===p?0:p.length;let g=i[u.id];if(void 0===g||g.length!==m){g=[];for(let x=0;x<m;x++)g[x]=[x,0];i[u.id]=g}for(let x=0;x<m;x++){const S=g[x];S[0]=x,S[1]=p[x]}g.sort(cae);for(let x=0;x<8;x++)x<m&&g[x][1]?(a[x][0]=g[x][0],a[x][1]=g[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(lae);const b=u.morphAttributes.position,y=u.morphAttributes.normal;let v=0;for(let x=0;x<8;x++){const S=a[x],P=S[0],A=S[1];P!==Number.MAX_SAFE_INTEGER&&A?(b&&u.getAttribute("morphTarget"+x)!==b[P]&&u.setAttribute("morphTarget"+x,b[P]),y&&u.getAttribute("morphNormal"+x)!==y[P]&&u.setAttribute("morphNormal"+x,y[P]),r[x]=A,v+=A):(b&&!0===u.hasAttribute("morphTarget"+x)&&u.deleteAttribute("morphTarget"+x),y&&!0===u.hasAttribute("morphNormal"+x)&&u.deleteAttribute("morphNormal"+x),r[x]=0)}const M=u.morphTargetsRelative?1:1-v;h.getUniforms().setValue(n,"morphTargetBaseInfluence",M),h.getUniforms().setValue(n,"morphTargetInfluences",r)}}}}function uae(n,e,t,i){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=i.render.frame,h=e.get(l,l.geometry);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),null!==l.instanceColor&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return h},dispose:function o(){r=new WeakMap}}}class PH extends sl{constructor(e,t,i,r,s,o,a,l,c,u){if((u=void 0!==u?u:Oh)!==Oh&&u!==Dm)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&u===Oh&&(i=ru),void 0===i&&u===Dm&&(i=kh),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:Bi,this.minFilter=void 0!==l?l:Bi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const kH=new sl,OH=new PH(1,1);OH.compareFunction=Qz;const LH=new LR,FH=new oH,NH=new LS,BH=[],UH=[],VH=new Float32Array(16),zH=new Float32Array(9),HH=new Float32Array(4);function ig(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=BH[r];if(void 0===s&&(s=new Float32Array(r),BH[r]=s),0!==e){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ir(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Rr(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function zS(n,e){let t=UH[e];void 0===t&&(t=new Int32Array(e),UH[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function hae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function fae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2fv(this.addr,e),Rr(t,e)}}function pae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ir(t,e))return;n.uniform3fv(this.addr,e),Rr(t,e)}}function mae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4fv(this.addr,e),Rr(t,e)}}function gae(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ir(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Rr(t,e)}else{if(Ir(t,i))return;HH.set(i),n.uniformMatrix2fv(this.addr,!1,HH),Rr(t,i)}}function _ae(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ir(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Rr(t,e)}else{if(Ir(t,i))return;zH.set(i),n.uniformMatrix3fv(this.addr,!1,zH),Rr(t,i)}}function vae(n,e){const t=this.cache,i=e.elements;if(void 0===i){if(Ir(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Rr(t,e)}else{if(Ir(t,i))return;VH.set(i),n.uniformMatrix4fv(this.addr,!1,VH),Rr(t,i)}}function yae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function bae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2iv(this.addr,e),Rr(t,e)}}function xae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ir(t,e))return;n.uniform3iv(this.addr,e),Rr(t,e)}}function wae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4iv(this.addr,e),Rr(t,e)}}function Mae(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Sae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ir(t,e))return;n.uniform2uiv(this.addr,e),Rr(t,e)}}function Cae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ir(t,e))return;n.uniform3uiv(this.addr,e),Rr(t,e)}}function Eae(n,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ir(t,e))return;n.uniform4uiv(this.addr,e),Rr(t,e)}}function Aae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||(this.type===n.SAMPLER_2D_SHADOW?OH:kH),r)}function Tae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||FH,r)}function Dae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||NH,r)}function Iae(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||LH,r)}function Pae(n,e){n.uniform1fv(this.addr,e)}function kae(n,e){const t=ig(e,this.size,2);n.uniform2fv(this.addr,t)}function Oae(n,e){const t=ig(e,this.size,3);n.uniform3fv(this.addr,t)}function Lae(n,e){const t=ig(e,this.size,4);n.uniform4fv(this.addr,t)}function Fae(n,e){const t=ig(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Nae(n,e){const t=ig(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function Bae(n,e){const t=ig(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Uae(n,e){n.uniform1iv(this.addr,e)}function Vae(n,e){n.uniform2iv(this.addr,e)}function zae(n,e){n.uniform3iv(this.addr,e)}function Hae(n,e){n.uniform4iv(this.addr,e)}function Gae(n,e){n.uniform1uiv(this.addr,e)}function Wae(n,e){n.uniform2uiv(this.addr,e)}function $ae(n,e){n.uniform3uiv(this.addr,e)}function jae(n,e){n.uniform4uiv(this.addr,e)}function Xae(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);Ir(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||kH,s[o])}function qae(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);Ir(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||FH,s[o])}function Yae(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);Ir(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||NH,s[o])}function Kae(n,e,t){const i=this.cache,r=e.length,s=zS(t,r);Ir(i,s)||(n.uniform1iv(this.addr,s),Rr(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||LH,s[o])}class Qae{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function Rae(n){switch(n){case 5126:return hae;case 35664:return fae;case 35665:return pae;case 35666:return mae;case 35674:return gae;case 35675:return _ae;case 35676:return vae;case 5124:case 35670:return yae;case 35667:case 35671:return bae;case 35668:case 35672:return xae;case 35669:case 35673:return wae;case 5125:return Mae;case 36294:return Sae;case 36295:return Cae;case 36296:return Eae;case 35678:case 36198:case 36298:case 36306:case 35682:return Aae;case 35679:case 36299:case 36307:return Tae;case 35680:case 36300:case 36308:case 36293:return Dae;case 36289:case 36303:case 36311:case 36292:return Iae}}(t.type)}}class Jae{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function Zae(n){switch(n){case 5126:return Pae;case 35664:return kae;case 35665:return Oae;case 35666:return Lae;case 35674:return Fae;case 35675:return Nae;case 35676:return Bae;case 5124:case 35670:return Uae;case 35667:case 35671:return Vae;case 35668:case 35672:return zae;case 35669:case 35673:return Hae;case 5125:return Gae;case 36294:return Wae;case 36295:return $ae;case 36296:return jae;case 35678:case 36198:case 36298:case 36306:case 35682:return Xae;case 35679:case 36299:case 36307:return qae;case 35680:case 36300:case 36308:case 36293:return Yae;case 36289:case 36303:case 36311:case 36292:return Kae}}(t.type)}}class ele{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const iP=/(\w+)(\])?(\[|\.)?/g;function GH(n,e){n.seq.push(e),n.map[e.id]=e}function tle(n,e,t){const i=n.name,r=i.length;for(iP.lastIndex=0;;){const s=iP.exec(i);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&iP.lastIndex+2===r){GH(t,void 0===c?new Qae(a,n,e):new Jae(a,n,e));break}{let h=t.map[a];void 0===h&&(h=new ele(a),GH(t,h)),t=h}}}class HS{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r);tle(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,i,r){const s=this.map[t];void 0!==s&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];void 0!==r&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function WH(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const nle=37297;let ile=0;function $H(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function rle(n,e){const t=n.split("\n"),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join("\n")}(n.getShaderSource(e),o)}return r}function ole(n,e){const t=function sle(n){const e=ii.getPrimaries(ii.workingColorSpace),t=ii.getPrimaries(n);let i;switch(e===t?i="":e===fS&&t===hS?i="LinearDisplayP3ToLinearSRGB":e===hS&&t===fS&&(i="LinearSRGBToLinearDisplayP3"),n){case Hr:case dS:return[i,"LinearTransferOETF"];case Ci:case TR:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function ale(n,e){let t;switch(e){case Pie:t="Linear";break;case kie:t="Reinhard";break;case Oie:t="OptimizedCineon";break;case Lie:t="ACESFilmic";break;case Nie:t="AgX";break;case Fie:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function rg(n){return""!==n}function jH(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function XH(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const hle=/^[ \t]*#include +<([\w\d./]+)>/gm;function rP(n){return n.replace(hle,ple)}const fle=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function ple(n,e){let t=_n[e];if(void 0===t){const i=fle.get(e);if(void 0===i)throw new Error("Can not resolve #include <"+e+">");t=_n[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i)}return rP(t)}const mle=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function qH(n){return n.replace(mle,gle)}function gle(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function YH(n){let e="precision "+n.precision+" float;\nprecision "+n.precision+" int;";return"highp"===n.precision?e+="\n#define HIGH_PRECISION":"mediump"===n.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===n.precision&&(e+="\n#define LOW_PRECISION"),e}function wle(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function _le(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===lz?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===cz?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Vc&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function vle(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case zc:case Ph:e="ENVMAP_TYPE_CUBE";break;case zy:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),u=function yle(n){let e="ENVMAP_MODE_REFLECTION";return n.envMap&&n.envMapMode===Ph&&(e="ENVMAP_MODE_REFRACTION"),e}(t),h=function ble(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case sS:e="ENVMAP_BLENDING_MULTIPLY";break;case Iie:e="ENVMAP_BLENDING_MIX";break;case Rie:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function xle(n){const e=n.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:i,maxMip:t}}(t),m=t.isWebGL2?"":function lle(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||"physical"===n.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(rg).join("\n")}(t),g=function cle(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(rg).join("\n")}(t),b=function dle(n){const e=[];for(const t in n){const i=n[t];!1!==i&&e.push("#define "+t+" "+i)}return e.join("\n")}(s),y=r.createProgram();let v,M,x=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(rg).join("\n"),v.length>0&&(v+="\n"),M=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(rg).join("\n"),M.length>0&&(M+="\n")):(v=[YH(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(rg).join("\n"),M=[m,YH(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&!1===t.flatShading?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==nu?"#define TONE_MAPPING":"",t.toneMapping!==nu?_n.tonemapping_pars_fragment:"",t.toneMapping!==nu?ale("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",_n.colorspace_pars_fragment,ole("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(rg).join("\n")),o=rP(o),o=jH(o,t),o=XH(o,t),a=rP(a),a=jH(a,t),a=XH(a,t),o=qH(o),a=qH(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(x="#version 300 es\n",v=[g,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,M=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Jz?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Jz?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+M);const P=x+M+a,A=WH(r,r.VERTEX_SHADER,x+v+o),R=WH(r,r.FRAGMENT_SHADER,P);function V(ue){if(n.debug.checkShaderErrors){const we=r.getProgramInfoLog(y).trim(),G=r.getShaderInfoLog(A).trim(),te=r.getShaderInfoLog(R).trim();let W=!0,J=!0;if(!1===r.getProgramParameter(y,r.LINK_STATUS))if(W=!1,"function"==typeof n.debug.onShaderError)n.debug.onShaderError(r,y,A,R);else{const ne=$H(r,A,"vertex"),re=$H(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+we+"\n"+ne+"\n"+re)}else""!==we?console.warn("THREE.WebGLProgram: Program Info Log:",we):(""===G||""===te)&&(J=!1);J&&(ue.diagnostics={runnable:W,programLog:we,vertexShader:{log:G,prefix:v},fragmentShader:{log:te,prefix:M}})}r.deleteShader(A),r.deleteShader(R),E=new HS(r,y),k=function ule(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}(r,y)}let E,k;r.attachShader(y,A),r.attachShader(y,R),void 0!==t.index0AttributeName?r.bindAttribLocation(y,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),this.getUniforms=function(){return void 0===E&&V(this),E},this.getAttributes=function(){return void 0===k&&V(this),k};let K=!1===t.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===K&&(K=r.getProgramParameter(y,nle)),K},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=ile++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=A,this.fragmentShader=R,this}let Mle=0;class Sle{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const i=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,0===i.usedTimes&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new Cle(e),t.set(e,i)),i}}class Cle{constructor(e){this.id=Mle++,this.code=e,this.usedTimes=0}}function Ele(n,e,t,i,r,s,o){const a=new HR,l=new Sle,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(E){return 0===E?"uv":`uv${E}`}return{getParameters:function y(E,k,K,ue,we){const G=ue.fog,te=we.geometry,J=(E.isMeshStandardMaterial?t:e).get(E.envMap||(E.isMeshStandardMaterial?ue.environment:null)),ne=J&&J.mapping===zy?J.image.height:null,re=g[E.type];null!==E.precision&&(m=r.getMaxPrecision(E.precision),m!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",m,"instead."));const _e=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,Se=void 0!==_e?_e.length:0;let le,me,Be,tt,Oe=0;if(void 0!==te.morphAttributes.position&&(Oe=1),void 0!==te.morphAttributes.normal&&(Oe=2),void 0!==te.morphAttributes.color&&(Oe=3),re){const eo=ql[re];le=eo.vertexShader,me=eo.fragmentShader}else le=E.vertexShader,me=E.fragmentShader,l.update(E),Be=l.getVertexShaderID(E),tt=l.getFragmentShaderID(E);const Ne=n.getRenderTarget(),pt=!0===we.isInstancedMesh,Je=!!E.map,z=!!J,Ue=!!E.aoMap,xe=!!E.lightMap,Le=!!E.bumpMap,be=!!E.normalMap,St=!!E.displacementMap,et=!!E.emissiveMap,L=!!E.metalnessMap,I=!!E.roughnessMap,ie=E.anisotropy>0,Pe=E.clearcoat>0,Ie=E.iridescence>0,De=E.sheen>0,gt=E.transmission>0,je=ie&&!!E.anisotropyMap,at=Pe&&!!E.clearcoatMap,Ft=Pe&&!!E.clearcoatNormalMap,pn=Pe&&!!E.clearcoatRoughnessMap,Re=Ie&&!!E.iridescenceMap,Kn=Ie&&!!E.iridescenceThicknessMap,On=De&&!!E.sheenColorMap,nn=De&&!!E.sheenRoughnessMap,It=!!E.specularMap,ut=!!E.specularColorMap,vn=!!E.specularIntensityMap,si=gt&&!!E.transmissionMap,Zi=gt&&!!E.thicknessMap,He=!!E.alphaMap,qe=!!E.extensions,$t=!!te.attributes.uv1,Nt=!!te.attributes.uv2,vi=!!te.attributes.uv3;let yi=nu;return E.toneMapped&&(null===Ne||!0===Ne.isXRRenderTarget)&&(yi=n.toneMapping),{isWebGL2:u,shaderID:re,shaderType:E.type,shaderName:E.name,vertexShader:le,fragmentShader:me,defines:E.defines,customVertexShaderID:Be,customFragmentShaderID:tt,isRawShaderMaterial:!0===E.isRawShaderMaterial,glslVersion:E.glslVersion,precision:m,batching:!0===we.isBatchedMesh,instancing:pt,instancingColor:pt&&null!==we.instanceColor,supportsVertexTextures:p,outputColorSpace:null===Ne?n.outputColorSpace:!0===Ne.isXRRenderTarget?Ne.texture.colorSpace:Hr,map:Je,matcap:!!E.matcap,envMap:z,envMapMode:z&&J.mapping,envMapCubeUVHeight:ne,aoMap:Ue,lightMap:xe,bumpMap:Le,normalMap:be,displacementMap:p&&St,emissiveMap:et,normalMapObjectSpace:be&&E.normalMapType===Jie,normalMapTangentSpace:be&&E.normalMapType===Lh,metalnessMap:L,roughnessMap:I,anisotropy:ie,anisotropyMap:je,clearcoat:Pe,clearcoatMap:at,clearcoatNormalMap:Ft,clearcoatRoughnessMap:pn,iridescence:Ie,iridescenceMap:Re,iridescenceThicknessMap:Kn,sheen:De,sheenColorMap:On,sheenRoughnessMap:nn,specularMap:It,specularColorMap:ut,specularIntensityMap:vn,transmission:gt,transmissionMap:si,thicknessMap:Zi,gradientMap:!!E.gradientMap,opaque:!1===E.transparent&&E.blending===Tm,alphaMap:He,alphaTest:E.alphaTest>0,alphaHash:!!E.alphaHash,combine:E.combine,mapUv:Je&&b(E.map.channel),aoMapUv:Ue&&b(E.aoMap.channel),lightMapUv:xe&&b(E.lightMap.channel),bumpMapUv:Le&&b(E.bumpMap.channel),normalMapUv:be&&b(E.normalMap.channel),displacementMapUv:St&&b(E.displacementMap.channel),emissiveMapUv:et&&b(E.emissiveMap.channel),metalnessMapUv:L&&b(E.metalnessMap.channel),roughnessMapUv:I&&b(E.roughnessMap.channel),anisotropyMapUv:je&&b(E.anisotropyMap.channel),clearcoatMapUv:at&&b(E.clearcoatMap.channel),clearcoatNormalMapUv:Ft&&b(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pn&&b(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Re&&b(E.iridescenceMap.channel),iridescenceThicknessMapUv:Kn&&b(E.iridescenceThicknessMap.channel),sheenColorMapUv:On&&b(E.sheenColorMap.channel),sheenRoughnessMapUv:nn&&b(E.sheenRoughnessMap.channel),specularMapUv:It&&b(E.specularMap.channel),specularColorMapUv:ut&&b(E.specularColorMap.channel),specularIntensityMapUv:vn&&b(E.specularIntensityMap.channel),transmissionMapUv:si&&b(E.transmissionMap.channel),thicknessMapUv:Zi&&b(E.thicknessMap.channel),alphaMapUv:He&&b(E.alphaMap.channel),vertexTangents:!!te.attributes.tangent&&(be||ie),vertexColors:E.vertexColors,vertexAlphas:!0===E.vertexColors&&!!te.attributes.color&&4===te.attributes.color.itemSize,vertexUv1s:$t,vertexUv2s:Nt,vertexUv3s:vi,pointsUvs:!0===we.isPoints&&!!te.attributes.uv&&(Je||He),fog:!!G,useFog:!0===E.fog,fogExp2:G&&G.isFogExp2,flatShading:!0===E.flatShading,sizeAttenuation:!0===E.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===we.isSkinnedMesh,morphTargets:void 0!==te.morphAttributes.position,morphNormals:void 0!==te.morphAttributes.normal,morphColors:void 0!==te.morphAttributes.color,morphTargetsCount:Se,morphTextureStride:Oe,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numLightProbes:k.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:E.dithering,shadowMapEnabled:n.shadowMap.enabled&&K.length>0,shadowMapType:n.shadowMap.type,toneMapping:yi,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Je&&!0===E.map.isVideoTexture&&ii.getTransfer(E.map.colorSpace)===Ei,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===No,flipSided:E.side===go,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:qe&&!0===E.extensions.derivatives,extensionFragDepth:qe&&!0===E.extensions.fragDepth,extensionDrawBuffers:qe&&!0===E.extensions.drawBuffers,extensionShaderTextureLOD:qe&&!0===E.extensions.shaderTextureLOD,extensionClipCullDistance:qe&&E.extensions.clipCullDistance&&i.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:E.customProgramCacheKey()}},getProgramCacheKey:function v(E){const k=[];if(E.shaderID?k.push(E.shaderID):(k.push(E.customVertexShaderID),k.push(E.customFragmentShaderID)),void 0!==E.defines)for(const K in E.defines)k.push(K),k.push(E.defines[K]);return!1===E.isRawShaderMaterial&&(function M(E,k){E.push(k.precision),E.push(k.outputColorSpace),E.push(k.envMapMode),E.push(k.envMapCubeUVHeight),E.push(k.mapUv),E.push(k.alphaMapUv),E.push(k.lightMapUv),E.push(k.aoMapUv),E.push(k.bumpMapUv),E.push(k.normalMapUv),E.push(k.displacementMapUv),E.push(k.emissiveMapUv),E.push(k.metalnessMapUv),E.push(k.roughnessMapUv),E.push(k.anisotropyMapUv),E.push(k.clearcoatMapUv),E.push(k.clearcoatNormalMapUv),E.push(k.clearcoatRoughnessMapUv),E.push(k.iridescenceMapUv),E.push(k.iridescenceThicknessMapUv),E.push(k.sheenColorMapUv),E.push(k.sheenRoughnessMapUv),E.push(k.specularMapUv),E.push(k.specularColorMapUv),E.push(k.specularIntensityMapUv),E.push(k.transmissionMapUv),E.push(k.thicknessMapUv),E.push(k.combine),E.push(k.fogExp2),E.push(k.sizeAttenuation),E.push(k.morphTargetsCount),E.push(k.morphAttributeCount),E.push(k.numDirLights),E.push(k.numPointLights),E.push(k.numSpotLights),E.push(k.numSpotLightMaps),E.push(k.numHemiLights),E.push(k.numRectAreaLights),E.push(k.numDirLightShadows),E.push(k.numPointLightShadows),E.push(k.numSpotLightShadows),E.push(k.numSpotLightShadowsWithMaps),E.push(k.numLightProbes),E.push(k.shadowMapType),E.push(k.toneMapping),E.push(k.numClippingPlanes),E.push(k.numClipIntersection),E.push(k.depthPacking)}(k,E),function x(E,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUv1s&&a.enable(13),k.vertexUv2s&&a.enable(14),k.vertexUv3s&&a.enable(15),k.vertexTangents&&a.enable(16),k.anisotropy&&a.enable(17),k.alphaHash&&a.enable(18),k.batching&&a.enable(19),E.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.useLegacyLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.opaque&&a.enable(17),k.pointsUvs&&a.enable(18),k.decodeVideoTexture&&a.enable(19),E.push(a.mask)}(k,E),k.push(n.outputColorSpace)),k.push(E.customProgramCacheKey),k.join()},getUniforms:function S(E){const k=g[E.type];let K;return K=k?Hre.clone(ql[k].uniforms):E.uniforms,K},acquireProgram:function P(E,k){let K;for(let ue=0,we=c.length;ue<we;ue++){const G=c[ue];if(G.cacheKey===k){K=G,++K.usedTimes;break}}return void 0===K&&(K=new wle(n,k,E,s),c.push(K)),K},releaseProgram:function A(E){if(0==--E.usedTimes){const k=c.indexOf(E);c[k]=c[c.length-1],c.pop(),E.destroy()}},releaseShaderCache:function R(E){l.remove(E)},programs:c,dispose:function V(){l.dispose()}}}function Ale(){let n=new WeakMap;return{get:function e(s){let o=n.get(s);return void 0===o&&(o={},n.set(s,o)),o},remove:function t(s){n.delete(s)},update:function i(s,o,a){n.get(s)[o]=a},dispose:function r(){n=new WeakMap}}}function Tle(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function KH(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ZH(){const n=[];let e=0;const t=[],i=[],r=[];function o(h,p,m,g,b,y){let v=n[e];return void 0===v?(v={id:h.id,object:h,geometry:p,material:m,groupOrder:g,renderOrder:h.renderOrder,z:b,group:y},n[e]=v):(v.id=h.id,v.object=h,v.geometry=p,v.material=m,v.groupOrder=g,v.renderOrder=h.renderOrder,v.z=b,v.group=y),e++,v}return{opaque:t,transmissive:i,transparent:r,init:function s(){e=0,t.length=0,i.length=0,r.length=0},push:function a(h,p,m,g,b,y){const v=o(h,p,m,g,b,y);m.transmission>0?i.push(v):!0===m.transparent?r.push(v):t.push(v)},unshift:function l(h,p,m,g,b,y){const v=o(h,p,m,g,b,y);m.transmission>0?i.unshift(v):!0===m.transparent?r.unshift(v):t.unshift(v)},finish:function u(){for(let h=e,p=n.length;h<p;h++){const m=n[h];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(h,p){t.length>1&&t.sort(h||Tle),i.length>1&&i.sort(p||KH),r.length>1&&r.sort(p||KH)}}}function Dle(){let n=new WeakMap;return{get:function e(i,r){const s=n.get(i);let o;return void 0===s?(o=new ZH,n.set(i,[o])):r>=s.length?(o=new ZH,s.push(o)):o=s[r],o},dispose:function t(){n=new WeakMap}}}function Ile(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new N,color:new Ge};break;case"SpotLight":t={position:new N,direction:new N,color:new Ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new N,color:new Ge,distance:0,decay:0};break;case"HemisphereLight":t={direction:new N,skyColor:new Ge,groundColor:new Ge};break;case"RectAreaLight":t={color:new Ge,position:new N,halfWidth:new N,halfHeight:new N}}return n[e.id]=t,t}}}let Ple=0;function kle(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Ole(n,e){const t=new Ile,i=function Rle(){const n={};return{get:function(e){if(void 0!==n[e.id])return n[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ce,shadowCameraNear:1,shadowCameraFar:1e3}}return n[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)r.probe.push(new N);const s=new N,o=new Rt,a=new Rt;return{setup:function l(u,h){let p=0,m=0,g=0;for(let ue=0;ue<9;ue++)r.probe[ue].set(0,0,0);let b=0,y=0,v=0,M=0,x=0,S=0,P=0,A=0,R=0,V=0,E=0;u.sort(kle);const k=!0===h?Math.PI:1;for(let ue=0,we=u.length;ue<we;ue++){const G=u[ue],te=G.color,W=G.intensity,J=G.distance,ne=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)p+=te.r*W*k,m+=te.g*W*k,g+=te.b*W*k;else if(G.isLightProbe){for(let re=0;re<9;re++)r.probe[re].addScaledVector(G.sh.coefficients[re],W);E++}else if(G.isDirectionalLight){const re=t.get(G);if(re.color.copy(G.color).multiplyScalar(G.intensity*k),G.castShadow){const _e=G.shadow,Se=i.get(G);Se.shadowBias=_e.bias,Se.shadowNormalBias=_e.normalBias,Se.shadowRadius=_e.radius,Se.shadowMapSize=_e.mapSize,r.directionalShadow[b]=Se,r.directionalShadowMap[b]=ne,r.directionalShadowMatrix[b]=G.shadow.matrix,S++}r.directional[b]=re,b++}else if(G.isSpotLight){const re=t.get(G);re.position.setFromMatrixPosition(G.matrixWorld),re.color.copy(te).multiplyScalar(W*k),re.distance=J,re.coneCos=Math.cos(G.angle),re.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),re.decay=G.decay,r.spot[v]=re;const _e=G.shadow;if(G.map&&(r.spotLightMap[R]=G.map,R++,_e.updateMatrices(G),G.castShadow&&V++),r.spotLightMatrix[v]=_e.matrix,G.castShadow){const Se=i.get(G);Se.shadowBias=_e.bias,Se.shadowNormalBias=_e.normalBias,Se.shadowRadius=_e.radius,Se.shadowMapSize=_e.mapSize,r.spotShadow[v]=Se,r.spotShadowMap[v]=ne,A++}v++}else if(G.isRectAreaLight){const re=t.get(G);re.color.copy(te).multiplyScalar(W),re.halfWidth.set(.5*G.width,0,0),re.halfHeight.set(0,.5*G.height,0),r.rectArea[M]=re,M++}else if(G.isPointLight){const re=t.get(G);if(re.color.copy(G.color).multiplyScalar(G.intensity*k),re.distance=G.distance,re.decay=G.decay,G.castShadow){const _e=G.shadow,Se=i.get(G);Se.shadowBias=_e.bias,Se.shadowNormalBias=_e.normalBias,Se.shadowRadius=_e.radius,Se.shadowMapSize=_e.mapSize,Se.shadowCameraNear=_e.camera.near,Se.shadowCameraFar=_e.camera.far,r.pointShadow[y]=Se,r.pointShadowMap[y]=ne,r.pointShadowMatrix[y]=G.shadow.matrix,P++}r.point[y]=re,y++}else if(G.isHemisphereLight){const re=t.get(G);re.skyColor.copy(G.color).multiplyScalar(W*k),re.groundColor.copy(G.groundColor).multiplyScalar(W*k),r.hemi[x]=re,x++}}M>0&&(e.isWebGL2?!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=ze.LTC_FLOAT_1,r.rectAreaLTC2=ze.LTC_FLOAT_2):(r.rectAreaLTC1=ze.LTC_HALF_1,r.rectAreaLTC2=ze.LTC_HALF_2):!0===n.has("OES_texture_float_linear")?(r.rectAreaLTC1=ze.LTC_FLOAT_1,r.rectAreaLTC2=ze.LTC_FLOAT_2):!0===n.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=ze.LTC_HALF_1,r.rectAreaLTC2=ze.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=g;const K=r.hash;(K.directionalLength!==b||K.pointLength!==y||K.spotLength!==v||K.rectAreaLength!==M||K.hemiLength!==x||K.numDirectionalShadows!==S||K.numPointShadows!==P||K.numSpotShadows!==A||K.numSpotMaps!==R||K.numLightProbes!==E)&&(r.directional.length=b,r.spot.length=v,r.rectArea.length=M,r.point.length=y,r.hemi.length=x,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=P,r.pointShadowMap.length=P,r.spotShadow.length=A,r.spotShadowMap.length=A,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=P,r.spotLightMatrix.length=A+R-V,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=V,r.numLightProbes=E,K.directionalLength=b,K.pointLength=y,K.spotLength=v,K.rectAreaLength=M,K.hemiLength=x,K.numDirectionalShadows=S,K.numPointShadows=P,K.numSpotShadows=A,K.numSpotMaps=R,K.numLightProbes=E,r.version=Ple++)},setupView:function c(u,h){let p=0,m=0,g=0,b=0,y=0;const v=h.matrixWorldInverse;for(let M=0,x=u.length;M<x;M++){const S=u[M];if(S.isDirectionalLight){const P=r.directional[p];P.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(v),p++}else if(S.isSpotLight){const P=r.spot[g];P.position.setFromMatrixPosition(S.matrixWorld),P.position.applyMatrix4(v),P.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),P.direction.sub(s),P.direction.transformDirection(v),g++}else if(S.isRectAreaLight){const P=r.rectArea[b];P.position.setFromMatrixPosition(S.matrixWorld),P.position.applyMatrix4(v),a.identity(),o.copy(S.matrixWorld),o.premultiply(v),a.extractRotation(o),P.halfWidth.set(.5*S.width,0,0),P.halfHeight.set(0,.5*S.height,0),P.halfWidth.applyMatrix4(a),P.halfHeight.applyMatrix4(a),b++}else if(S.isPointLight){const P=r.point[m];P.position.setFromMatrixPosition(S.matrixWorld),P.position.applyMatrix4(v),m++}else if(S.isHemisphereLight){const P=r.hemi[y];P.direction.setFromMatrixPosition(S.matrixWorld),P.direction.transformDirection(v),y++}}},state:r}}function QH(n,e){const t=new Ole(n,e),i=[],r=[];return{init:function s(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:function l(h){t.setup(i,h)},setupLightsView:function c(h){t.setupView(i,h)},pushLight:function o(h){i.push(h)},pushShadow:function a(h){r.push(h)}}}function Lle(n,e){let t=new WeakMap;return{get:function i(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new QH(n,e),t.set(s,[l])):o>=a.length?(l=new QH(n,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class JH extends vo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class e4 extends vo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const Fle="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Nle="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Ble(n,e,t){let i=new NS;const r=new Ce,s=new Ce,o=new li,a=new JH({depthPacking:Qie}),l=new e4,c={},u=t.maxTextureSize,h={[$l]:go,[go]:$l,[No]:No},p=new du({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ce},radius:{value:4}},vertexShader:Fle,fragmentShader:Nle}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new an;g.setAttribute("position",new gi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Yn(g,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lz;let v=this.type;function M(A,R){const V=e.update(b);p.defines.VSM_SAMPLES!==A.blurSamples&&(p.defines.VSM_SAMPLES=A.blurSamples,m.defines.VSM_SAMPLES=A.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===A.mapPass&&(A.mapPass=new Nh(r.x,r.y)),p.uniforms.shadow_pass.value=A.map.texture,p.uniforms.resolution.value=A.mapSize,p.uniforms.radius.value=A.radius,n.setRenderTarget(A.mapPass),n.clear(),n.renderBufferDirect(R,null,V,p,b,null),m.uniforms.shadow_pass.value=A.mapPass.texture,m.uniforms.resolution.value=A.mapSize,m.uniforms.radius.value=A.radius,n.setRenderTarget(A.map),n.clear(),n.renderBufferDirect(R,null,V,m,b,null)}function x(A,R,V,E){let k=null;const K=!0===V.isPointLight?A.customDistanceMaterial:A.customDepthMaterial;if(void 0!==K)k=K;else if(k=!0===V.isPointLight?l:a,n.localClippingEnabled&&!0===R.clipShadows&&Array.isArray(R.clippingPlanes)&&0!==R.clippingPlanes.length||R.displacementMap&&0!==R.displacementScale||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const ue=k.uuid,we=R.uuid;let G=c[ue];void 0===G&&(G={},c[ue]=G);let te=G[we];void 0===te&&(te=k.clone(),G[we]=te,R.addEventListener("dispose",P)),k=te}return k.visible=R.visible,k.wireframe=R.wireframe,k.side=E===Vc?null!==R.shadowSide?R.shadowSide:R.side:null!==R.shadowSide?R.shadowSide:h[R.side],k.alphaMap=R.alphaMap,k.alphaTest=R.alphaTest,k.map=R.map,k.clipShadows=R.clipShadows,k.clippingPlanes=R.clippingPlanes,k.clipIntersection=R.clipIntersection,k.displacementMap=R.displacementMap,k.displacementScale=R.displacementScale,k.displacementBias=R.displacementBias,k.wireframeLinewidth=R.wireframeLinewidth,k.linewidth=R.linewidth,!0===V.isPointLight&&!0===k.isMeshDistanceMaterial&&(n.properties.get(k).light=V),k}function S(A,R,V,E,k){if(!1===A.visible)return;if(A.layers.test(R.layers)&&(A.isMesh||A.isLine||A.isPoints)&&(A.castShadow||A.receiveShadow&&k===Vc)&&(!A.frustumCulled||i.intersectsObject(A))){A.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,A.matrixWorld);const we=e.update(A),G=A.material;if(Array.isArray(G)){const te=we.groups;for(let W=0,J=te.length;W<J;W++){const ne=te[W],re=G[ne.materialIndex];if(re&&re.visible){const _e=x(A,re,E,k);A.onBeforeShadow(n,A,R,V,we,_e,ne),n.renderBufferDirect(V,null,we,_e,A,ne),A.onAfterShadow(n,A,R,V,we,_e,ne)}}}else if(G.visible){const te=x(A,G,E,k);A.onBeforeShadow(n,A,R,V,we,te,null),n.renderBufferDirect(V,null,we,te,A,null),A.onAfterShadow(n,A,R,V,we,te,null)}}const ue=A.children;for(let we=0,G=ue.length;we<G;we++)S(ue[we],R,V,E,k)}function P(A){A.target.removeEventListener("dispose",P);for(const V in c){const E=c[V],k=A.target.uuid;k in E&&(E[k].dispose(),delete E[k])}}this.render=function(A,R,V){if(!1===y.enabled||!1===y.autoUpdate&&!1===y.needsUpdate||0===A.length)return;const E=n.getRenderTarget(),k=n.getActiveCubeFace(),K=n.getActiveMipmapLevel(),ue=n.state;ue.setBlending(tu),ue.buffers.color.setClear(1,1,1,1),ue.buffers.depth.setTest(!0),ue.setScissorTest(!1);const we=v!==Vc&&this.type===Vc,G=v===Vc&&this.type!==Vc;for(let te=0,W=A.length;te<W;te++){const J=A[te],ne=J.shadow;if(void 0===ne){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(!1===ne.autoUpdate&&!1===ne.needsUpdate)continue;r.copy(ne.mapSize);const re=ne.getFrameExtents();if(r.multiply(re),s.copy(ne.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/re.x),r.x=s.x*re.x,ne.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/re.y),r.y=s.y*re.y,ne.mapSize.y=s.y)),null===ne.map||!0===we||!0===G){const Se=this.type!==Vc?{minFilter:Bi,magFilter:Bi}:{};null!==ne.map&&ne.map.dispose(),ne.map=new Nh(r.x,r.y,Se),ne.map.texture.name=J.name+".shadowMap",ne.camera.updateProjectionMatrix()}n.setRenderTarget(ne.map),n.clear();const _e=ne.getViewportCount();for(let Se=0;Se<_e;Se++){const Oe=ne.getViewport(Se);o.set(s.x*Oe.x,s.y*Oe.y,s.x*Oe.z,s.y*Oe.w),ue.viewport(o),ne.updateMatrices(J,Se),i=ne.getFrustum(),S(R,V,ne.camera,J,this.type)}!0!==ne.isPointLightShadow&&this.type===Vc&&M(ne,V),ne.needsUpdate=!1}v=this.type,y.needsUpdate=!1,n.setRenderTarget(E,k,K)}}function Ule(n,e,t){const i=t.isWebGL2,a=new function r(){let j=!1;const Xe=new li;let qe=null;const $t=new li(0,0,0,0);return{setMask:function(Nt){qe!==Nt&&!j&&(n.colorMask(Nt,Nt,Nt,Nt),qe=Nt)},setLocked:function(Nt){j=Nt},setClear:function(Nt,vi,yi,jr,eo){!0===eo&&(Nt*=jr,vi*=jr,yi*=jr),Xe.set(Nt,vi,yi,jr),!1===$t.equals(Xe)&&(n.clearColor(Nt,vi,yi,jr),$t.copy(Xe))},reset:function(){j=!1,qe=null,$t.set(-1,0,0,0)}}},l=new function s(){let j=!1,Xe=null,qe=null,$t=null;return{setTest:function(Nt){Nt?mt(n.DEPTH_TEST):Je(n.DEPTH_TEST)},setMask:function(Nt){Xe!==Nt&&!j&&(n.depthMask(Nt),Xe=Nt)},setFunc:function(Nt){if(qe!==Nt){switch(Nt){case Mie:n.depthFunc(n.NEVER);break;case Sie:n.depthFunc(n.ALWAYS);break;case Cie:n.depthFunc(n.LESS);break;case rS:n.depthFunc(n.LEQUAL);break;case Eie:n.depthFunc(n.EQUAL);break;case Aie:n.depthFunc(n.GEQUAL);break;case Tie:n.depthFunc(n.GREATER);break;case Die:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}qe=Nt}},setLocked:function(Nt){j=Nt},setClear:function(Nt){$t!==Nt&&(n.clearDepth(Nt),$t=Nt)},reset:function(){j=!1,Xe=null,qe=null,$t=null}}},c=new function o(){let j=!1,Xe=null,qe=null,$t=null,Nt=null,vi=null,yi=null,jr=null,eo=null;return{setTest:function(bi){j||(bi?mt(n.STENCIL_TEST):Je(n.STENCIL_TEST))},setMask:function(bi){Xe!==bi&&!j&&(n.stencilMask(bi),Xe=bi)},setFunc:function(bi,to,Jl){(qe!==bi||$t!==to||Nt!==Jl)&&(n.stencilFunc(bi,to,Jl),qe=bi,$t=to,Nt=Jl)},setOp:function(bi,to,Jl){(vi!==bi||yi!==to||jr!==Jl)&&(n.stencilOp(bi,to,Jl),vi=bi,yi=to,jr=Jl)},setLocked:function(bi){j=bi},setClear:function(bi){eo!==bi&&(n.clearStencil(bi),eo=bi)},reset:function(){j=!1,Xe=null,qe=null,$t=null,Nt=null,vi=null,yi=null,jr=null,eo=null}}},u=new WeakMap,h=new WeakMap;let p={},m={},g=new WeakMap,b=[],y=null,v=!1,M=null,x=null,S=null,P=null,A=null,R=null,V=null,E=new Ge(0,0,0),k=0,K=!1,ue=null,we=null,G=null,te=null,W=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ne=!1,re=0;const _e=n.getParameter(n.VERSION);-1!==_e.indexOf("WebGL")?(re=parseFloat(/^WebGL (\d)/.exec(_e)[1]),ne=re>=1):-1!==_e.indexOf("OpenGL ES")&&(re=parseFloat(/^OpenGL ES (\d)/.exec(_e)[1]),ne=re>=2);let Se=null,Oe={};const le=n.getParameter(n.SCISSOR_BOX),me=n.getParameter(n.VIEWPORT),Be=(new li).fromArray(le),tt=(new li).fromArray(me);function Ne(j,Xe,qe,$t){const Nt=new Uint8Array(4),vi=n.createTexture();n.bindTexture(j,vi),n.texParameteri(j,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(j,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let yi=0;yi<qe;yi++)!i||j!==n.TEXTURE_3D&&j!==n.TEXTURE_2D_ARRAY?n.texImage2D(Xe+yi,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Nt):n.texImage3D(Xe,0,n.RGBA,1,1,$t,0,n.RGBA,n.UNSIGNED_BYTE,Nt);return vi}const pt={};function mt(j){!0!==p[j]&&(n.enable(j),p[j]=!0)}function Je(j){!1!==p[j]&&(n.disable(j),p[j]=!1)}pt[n.TEXTURE_2D]=Ne(n.TEXTURE_2D,n.TEXTURE_2D,1),pt[n.TEXTURE_CUBE_MAP]=Ne(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(pt[n.TEXTURE_2D_ARRAY]=Ne(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),pt[n.TEXTURE_3D]=Ne(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),mt(n.DEPTH_TEST),l.setFunc(rS),et(!1),L(az),mt(n.CULL_FACE),be(tu);const xe={[Rh]:n.FUNC_ADD,[lie]:n.FUNC_SUBTRACT,[cie]:n.FUNC_REVERSE_SUBTRACT};if(i)xe[fz]=n.MIN,xe[pz]=n.MAX;else{const j=e.get("EXT_blend_minmax");null!==j&&(xe[fz]=j.MIN_EXT,xe[pz]=j.MAX_EXT)}const Le={[die]:n.ZERO,[uie]:n.ONE,[hie]:n.SRC_COLOR,[mR]:n.SRC_ALPHA,[vie]:n.SRC_ALPHA_SATURATE,[gie]:n.DST_COLOR,[pie]:n.DST_ALPHA,[fie]:n.ONE_MINUS_SRC_COLOR,[gR]:n.ONE_MINUS_SRC_ALPHA,[_ie]:n.ONE_MINUS_DST_COLOR,[mie]:n.ONE_MINUS_DST_ALPHA,[yie]:n.CONSTANT_COLOR,[bie]:n.ONE_MINUS_CONSTANT_COLOR,[xie]:n.CONSTANT_ALPHA,[wie]:n.ONE_MINUS_CONSTANT_ALPHA};function be(j,Xe,qe,$t,Nt,vi,yi,jr,eo,bi){if(j!==tu){if(!1===v&&(mt(n.BLEND),v=!0),j===aie)Nt=Nt||Xe,vi=vi||qe,yi=yi||$t,(Xe!==x||Nt!==A)&&(n.blendEquationSeparate(xe[Xe],xe[Nt]),x=Xe,A=Nt),(qe!==S||$t!==P||vi!==R||yi!==V)&&(n.blendFuncSeparate(Le[qe],Le[$t],Le[vi],Le[yi]),S=qe,P=$t,R=vi,V=yi),(!1===jr.equals(E)||eo!==k)&&(n.blendColor(jr.r,jr.g,jr.b,eo),E.copy(jr),k=eo),M=j,K=!1;else if(j!==M||bi!==K){if((x!==Rh||A!==Rh)&&(n.blendEquation(n.FUNC_ADD),x=Rh,A=Rh),bi)switch(j){case Tm:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dz:n.blendFunc(n.ONE,n.ONE);break;case uz:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case hz:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j)}else switch(j){case Tm:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case dz:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case uz:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case hz:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j)}S=null,P=null,R=null,V=null,E.set(0,0,0),k=0,M=j,K=bi}}else!0===v&&(Je(n.BLEND),v=!1)}function et(j){ue!==j&&(n.frontFace(j?n.CW:n.CCW),ue=j)}function L(j){j!==sie?(mt(n.CULL_FACE),j!==we&&n.cullFace(j===az?n.BACK:j===oie?n.FRONT:n.FRONT_AND_BACK)):Je(n.CULL_FACE),we=j}function ie(j,Xe,qe){j?(mt(n.POLYGON_OFFSET_FILL),(te!==Xe||W!==qe)&&(n.polygonOffset(Xe,qe),te=Xe,W=qe)):Je(n.POLYGON_OFFSET_FILL)}return{buffers:{color:a,depth:l,stencil:c},enable:mt,disable:Je,bindFramebuffer:function Dt(j,Xe){return m[j]!==Xe&&(n.bindFramebuffer(j,Xe),m[j]=Xe,i&&(j===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Xe),j===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Xe)),!0)},drawBuffers:function z(j,Xe){let qe=b,$t=!1;if(j)if(qe=g.get(Xe),void 0===qe&&(qe=[],g.set(Xe,qe)),j.isWebGLMultipleRenderTargets){const Nt=j.texture;if(qe.length!==Nt.length||qe[0]!==n.COLOR_ATTACHMENT0){for(let vi=0,yi=Nt.length;vi<yi;vi++)qe[vi]=n.COLOR_ATTACHMENT0+vi;qe.length=Nt.length,$t=!0}}else qe[0]!==n.COLOR_ATTACHMENT0&&(qe[0]=n.COLOR_ATTACHMENT0,$t=!0);else qe[0]!==n.BACK&&(qe[0]=n.BACK,$t=!0);$t&&(t.isWebGL2?n.drawBuffers(qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))},useProgram:function Ue(j){return y!==j&&(n.useProgram(j),y=j,!0)},setBlending:be,setMaterial:function St(j,Xe){j.side===No?Je(n.CULL_FACE):mt(n.CULL_FACE);let qe=j.side===go;Xe&&(qe=!qe),et(qe),j.blending===Tm&&!1===j.transparent?be(tu):be(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),l.setFunc(j.depthFunc),l.setTest(j.depthTest),l.setMask(j.depthWrite),a.setMask(j.colorWrite);const $t=j.stencilWrite;c.setTest($t),$t&&(c.setMask(j.stencilWriteMask),c.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),c.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),ie(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),!0===j.alphaToCoverage?mt(n.SAMPLE_ALPHA_TO_COVERAGE):Je(n.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:et,setCullFace:L,setLineWidth:function I(j){j!==G&&(ne&&n.lineWidth(j),G=j)},setPolygonOffset:ie,setScissorTest:function Pe(j){j?mt(n.SCISSOR_TEST):Je(n.SCISSOR_TEST)},activeTexture:function Ie(j){void 0===j&&(j=n.TEXTURE0+J-1),Se!==j&&(n.activeTexture(j),Se=j)},bindTexture:function De(j,Xe,qe){void 0===qe&&(qe=null===Se?n.TEXTURE0+J-1:Se);let $t=Oe[qe];void 0===$t&&($t={type:void 0,texture:void 0},Oe[qe]=$t),($t.type!==j||$t.texture!==Xe)&&(Se!==qe&&(n.activeTexture(qe),Se=qe),n.bindTexture(j,Xe||pt[j]),$t.type=j,$t.texture=Xe)},unbindTexture:function gt(){const j=Oe[Se];void 0!==j&&void 0!==j.type&&(n.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)},compressedTexImage2D:function je(){try{n.compressedTexImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexImage3D:function at(){try{n.compressedTexImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texImage2D:function It(){try{n.texImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texImage3D:function ut(){try{n.texImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},updateUBOMapping:function Zi(j,Xe){let qe=h.get(Xe);void 0===qe&&(qe=new WeakMap,h.set(Xe,qe));let $t=qe.get(j);void 0===$t&&($t=n.getUniformBlockIndex(Xe,j.name),qe.set(j,$t))},uniformBlockBinding:function Tn(j,Xe){const $t=h.get(Xe).get(j);u.get(Xe)!==$t&&(n.uniformBlockBinding(Xe,$t,j.__bindingPointIndex),u.set(Xe,$t))},texStorage2D:function On(){try{n.texStorage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texStorage3D:function nn(){try{n.texStorage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texSubImage2D:function Ft(){try{n.texSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texSubImage3D:function pn(){try{n.texSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexSubImage2D:function Re(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexSubImage3D:function Kn(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},scissor:function vn(j){!1===Be.equals(j)&&(n.scissor(j.x,j.y,j.z,j.w),Be.copy(j))},viewport:function si(j){!1===tt.equals(j)&&(n.viewport(j.x,j.y,j.z,j.w),tt.copy(j))},reset:function He(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),!0===i&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},Se=null,Oe={},m={},g=new WeakMap,b=[],y=null,v=!1,M=null,x=null,S=null,P=null,A=null,R=null,V=null,E=new Ge(0,0,0),k=0,K=!1,ue=null,we=null,G=null,te=null,W=null,Be.set(0,0,n.canvas.width,n.canvas.height),tt.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}}}function Vle(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),u=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function g(L,I){return m?new OffscreenCanvas(L,I):qy("canvas")}function b(L,I,ie,Pe){let Ie=1;if((L.width>Pe||L.height>Pe)&&(Ie=Pe/Math.max(L.width,L.height)),Ie<1||!0===I){if(typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&L instanceof ImageBitmap){const De=I?mS:Math.floor,gt=De(Ie*L.width),je=De(Ie*L.height);void 0===h&&(h=g(gt,je));const at=ie?g(gt,je):h;return at.width=gt,at.height=je,at.getContext("2d").drawImage(L,0,0,gt,je),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+L.width+"x"+L.height+") to ("+gt+"x"+je+")."),at}return"data"in L&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+L.width+"x"+L.height+")."),L}return L}function y(L){return RR(L.width)&&RR(L.height)}function M(L,I){return L.generateMipmaps&&I&&L.minFilter!==Bi&&L.minFilter!==qi}function x(L){n.generateMipmap(L)}function S(L,I,ie,Pe,Ie=!1){if(!1===a)return I;if(null!==L){if(void 0!==n[L])return n[L];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+L+"'")}let De=I;if(I===n.RED&&(ie===n.FLOAT&&(De=n.R32F),ie===n.HALF_FLOAT&&(De=n.R16F),ie===n.UNSIGNED_BYTE&&(De=n.R8)),I===n.RED_INTEGER&&(ie===n.UNSIGNED_BYTE&&(De=n.R8UI),ie===n.UNSIGNED_SHORT&&(De=n.R16UI),ie===n.UNSIGNED_INT&&(De=n.R32UI),ie===n.BYTE&&(De=n.R8I),ie===n.SHORT&&(De=n.R16I),ie===n.INT&&(De=n.R32I)),I===n.RG&&(ie===n.FLOAT&&(De=n.RG32F),ie===n.HALF_FLOAT&&(De=n.RG16F),ie===n.UNSIGNED_BYTE&&(De=n.RG8)),I===n.RGBA){const gt=Ie?uS:ii.getTransfer(Pe);ie===n.FLOAT&&(De=n.RGBA32F),ie===n.HALF_FLOAT&&(De=n.RGBA16F),ie===n.UNSIGNED_BYTE&&(De=gt===Ei?n.SRGB8_ALPHA8:n.RGBA8),ie===n.UNSIGNED_SHORT_4_4_4_4&&(De=n.RGBA4),ie===n.UNSIGNED_SHORT_5_5_5_1&&(De=n.RGB5_A1)}return(De===n.R16F||De===n.R32F||De===n.RG16F||De===n.RG32F||De===n.RGBA16F||De===n.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function P(L,I,ie){return!0===M(L,ie)||L.isFramebufferTexture&&L.minFilter!==Bi&&L.minFilter!==qi?Math.log2(Math.max(I.width,I.height))+1:void 0!==L.mipmaps&&L.mipmaps.length>0?L.mipmaps.length:L.isCompressedTexture&&Array.isArray(L.image)?I.mipmaps.length:1}function A(L){return L===Bi||L===lS||L===Gy?n.NEAREST:n.LINEAR}function R(L){const I=L.target;I.removeEventListener("dispose",R),function E(L){const I=i.get(L);if(void 0===I.__webglInit)return;const ie=L.source,Pe=p.get(ie);if(Pe){const Ie=Pe[I.__cacheKey];Ie.usedTimes--,0===Ie.usedTimes&&k(L),0===Object.keys(Pe).length&&p.delete(ie)}i.remove(L)}(I),I.isVideoTexture&&u.delete(I)}function V(L){const I=L.target;I.removeEventListener("dispose",V),function K(L){const I=L.texture,ie=i.get(L),Pe=i.get(I);if(void 0!==Pe.__webglTexture&&(n.deleteTexture(Pe.__webglTexture),o.memory.textures--),L.depthTexture&&L.depthTexture.dispose(),L.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++){if(Array.isArray(ie.__webglFramebuffer[Ie]))for(let De=0;De<ie.__webglFramebuffer[Ie].length;De++)n.deleteFramebuffer(ie.__webglFramebuffer[Ie][De]);else n.deleteFramebuffer(ie.__webglFramebuffer[Ie]);ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer[Ie])}else{if(Array.isArray(ie.__webglFramebuffer))for(let Ie=0;Ie<ie.__webglFramebuffer.length;Ie++)n.deleteFramebuffer(ie.__webglFramebuffer[Ie]);else n.deleteFramebuffer(ie.__webglFramebuffer);if(ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let Ie=0;Ie<ie.__webglColorRenderbuffer.length;Ie++)ie.__webglColorRenderbuffer[Ie]&&n.deleteRenderbuffer(ie.__webglColorRenderbuffer[Ie]);ie.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}if(L.isWebGLMultipleRenderTargets)for(let Ie=0,De=I.length;Ie<De;Ie++){const gt=i.get(I[Ie]);gt.__webglTexture&&(n.deleteTexture(gt.__webglTexture),o.memory.textures--),i.remove(I[Ie])}i.remove(I),i.remove(L)}(I)}function k(L){const I=i.get(L);n.deleteTexture(I.__webglTexture),delete p.get(L.source)[I.__cacheKey],o.memory.textures--}let ue=0;function W(L,I){const ie=i.get(L);if(L.isVideoTexture&&function St(L){const I=o.render.frame;u.get(L)!==I&&(u.set(L,I),L.update())}(L),!1===L.isRenderTargetTexture&&L.version>0&&ie.__version!==L.version){const Pe=L.image;if(null===Pe)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Pe.complete)return void Be(ie,L,I);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(n.TEXTURE_2D,ie.__webglTexture,n.TEXTURE0+I)}const _e={[Hc]:n.REPEAT,[ir]:n.CLAMP_TO_EDGE,[Hy]:n.MIRRORED_REPEAT},Se={[Bi]:n.NEAREST,[lS]:n.NEAREST_MIPMAP_NEAREST,[Gy]:n.NEAREST_MIPMAP_LINEAR,[qi]:n.LINEAR,[vR]:n.LINEAR_MIPMAP_NEAREST,[Gc]:n.LINEAR_MIPMAP_LINEAR},Oe={[ere]:n.NEVER,[ore]:n.ALWAYS,[tre]:n.LESS,[Qz]:n.LEQUAL,[nre]:n.EQUAL,[sre]:n.GEQUAL,[ire]:n.GREATER,[rre]:n.NOTEQUAL};function le(L,I,ie){if(ie?(n.texParameteri(L,n.TEXTURE_WRAP_S,_e[I.wrapS]),n.texParameteri(L,n.TEXTURE_WRAP_T,_e[I.wrapT]),(L===n.TEXTURE_3D||L===n.TEXTURE_2D_ARRAY)&&n.texParameteri(L,n.TEXTURE_WRAP_R,_e[I.wrapR]),n.texParameteri(L,n.TEXTURE_MAG_FILTER,Se[I.magFilter]),n.texParameteri(L,n.TEXTURE_MIN_FILTER,Se[I.minFilter])):(n.texParameteri(L,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(L,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(L===n.TEXTURE_3D||L===n.TEXTURE_2D_ARRAY)&&n.texParameteri(L,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(I.wrapS!==ir||I.wrapT!==ir)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(L,n.TEXTURE_MAG_FILTER,A(I.magFilter)),n.texParameteri(L,n.TEXTURE_MIN_FILTER,A(I.minFilter)),I.minFilter!==Bi&&I.minFilter!==qi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),I.compareFunction&&(n.texParameteri(L,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(L,n.TEXTURE_COMPARE_FUNC,Oe[I.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){const Pe=e.get("EXT_texture_filter_anisotropic");if(I.magFilter===Bi||I.minFilter!==Gy&&I.minFilter!==Gc||I.type===jl&&!1===e.has("OES_texture_float_linear")||!1===a&&I.type===Wy&&!1===e.has("OES_texture_half_float_linear"))return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(L,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function me(L,I){let ie=!1;void 0===L.__webglInit&&(L.__webglInit=!0,I.addEventListener("dispose",R));const Pe=I.source;let Ie=p.get(Pe);void 0===Ie&&(Ie={},p.set(Pe,Ie));const De=function te(L){const I=[];return I.push(L.wrapS),I.push(L.wrapT),I.push(L.wrapR||0),I.push(L.magFilter),I.push(L.minFilter),I.push(L.anisotropy),I.push(L.internalFormat),I.push(L.format),I.push(L.type),I.push(L.generateMipmaps),I.push(L.premultiplyAlpha),I.push(L.flipY),I.push(L.unpackAlignment),I.push(L.colorSpace),I.join()}(I);if(De!==L.__cacheKey){void 0===Ie[De]&&(Ie[De]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),Ie[De].usedTimes++;const gt=Ie[L.__cacheKey];void 0!==gt&&(Ie[L.__cacheKey].usedTimes--,0===gt.usedTimes&&k(I)),L.__cacheKey=De,L.__webglTexture=Ie[De].texture}return ie}function Be(L,I,ie){let Pe=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(Pe=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(Pe=n.TEXTURE_3D);const Ie=me(L,I),De=I.source;t.bindTexture(Pe,L.__webglTexture,n.TEXTURE0+ie);const gt=i.get(De);if(De.version!==gt.__version||!0===Ie){t.activeTexture(n.TEXTURE0+ie);const je=ii.getPrimaries(ii.workingColorSpace),at=I.colorSpace===ba?null:ii.getPrimaries(I.colorSpace),Ft=I.colorSpace===ba||je===at?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ft);const pn=function v(L){return!a&&(L.wrapS!==ir||L.wrapT!==ir||L.minFilter!==Bi&&L.minFilter!==qi)}(I)&&!1===y(I.image);let Re=b(I.image,pn,!1,r.maxTextureSize);Re=et(I,Re);const Kn=y(Re)||a,On=s.convert(I.format,I.colorSpace);let ut,nn=s.convert(I.type),It=S(I.internalFormat,On,nn,I.colorSpace,I.isVideoTexture);le(Pe,I,Kn);const vn=I.mipmaps,si=a&&!0!==I.isVideoTexture&&It!==Ez,Zi=void 0===gt.__version||!0===Ie,Tn=P(I,Re,Kn);if(I.isDepthTexture)It=n.DEPTH_COMPONENT,a?It=I.type===jl?n.DEPTH_COMPONENT32F:I.type===ru?n.DEPTH_COMPONENT24:I.type===kh?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT16:I.type===jl&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===Oh&&It===n.DEPTH_COMPONENT&&I.type!==yR&&I.type!==ru&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=ru,nn=s.convert(I.type)),I.format===Dm&&It===n.DEPTH_COMPONENT&&(It=n.DEPTH_STENCIL,I.type!==kh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=kh,nn=s.convert(I.type))),Zi&&(si?t.texStorage2D(n.TEXTURE_2D,1,It,Re.width,Re.height):t.texImage2D(n.TEXTURE_2D,0,It,Re.width,Re.height,0,On,nn,null));else if(I.isDataTexture)if(vn.length>0&&Kn){si&&Zi&&t.texStorage2D(n.TEXTURE_2D,Tn,It,vn[0].width,vn[0].height);for(let He=0,j=vn.length;He<j;He++)ut=vn[He],si?t.texSubImage2D(n.TEXTURE_2D,He,0,0,ut.width,ut.height,On,nn,ut.data):t.texImage2D(n.TEXTURE_2D,He,It,ut.width,ut.height,0,On,nn,ut.data);I.generateMipmaps=!1}else si?(Zi&&t.texStorage2D(n.TEXTURE_2D,Tn,It,Re.width,Re.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Re.width,Re.height,On,nn,Re.data)):t.texImage2D(n.TEXTURE_2D,0,It,Re.width,Re.height,0,On,nn,Re.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){si&&Zi&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Tn,It,vn[0].width,vn[0].height,Re.depth);for(let He=0,j=vn.length;He<j;He++)ut=vn[He],I.format!==Bo?null!==On?si?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,0,ut.width,ut.height,Re.depth,On,ut.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,He,It,ut.width,ut.height,Re.depth,0,ut.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):si?t.texSubImage3D(n.TEXTURE_2D_ARRAY,He,0,0,0,ut.width,ut.height,Re.depth,On,nn,ut.data):t.texImage3D(n.TEXTURE_2D_ARRAY,He,It,ut.width,ut.height,Re.depth,0,On,nn,ut.data)}else{si&&Zi&&t.texStorage2D(n.TEXTURE_2D,Tn,It,vn[0].width,vn[0].height);for(let He=0,j=vn.length;He<j;He++)ut=vn[He],I.format!==Bo?null!==On?si?t.compressedTexSubImage2D(n.TEXTURE_2D,He,0,0,ut.width,ut.height,On,ut.data):t.compressedTexImage2D(n.TEXTURE_2D,He,It,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):si?t.texSubImage2D(n.TEXTURE_2D,He,0,0,ut.width,ut.height,On,nn,ut.data):t.texImage2D(n.TEXTURE_2D,He,It,ut.width,ut.height,0,On,nn,ut.data)}else if(I.isDataArrayTexture)si?(Zi&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Tn,It,Re.width,Re.height,Re.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Re.width,Re.height,Re.depth,On,nn,Re.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,It,Re.width,Re.height,Re.depth,0,On,nn,Re.data);else if(I.isData3DTexture)si?(Zi&&t.texStorage3D(n.TEXTURE_3D,Tn,It,Re.width,Re.height,Re.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Re.width,Re.height,Re.depth,On,nn,Re.data)):t.texImage3D(n.TEXTURE_3D,0,It,Re.width,Re.height,Re.depth,0,On,nn,Re.data);else if(I.isFramebufferTexture){if(Zi)if(si)t.texStorage2D(n.TEXTURE_2D,Tn,It,Re.width,Re.height);else{let He=Re.width,j=Re.height;for(let Xe=0;Xe<Tn;Xe++)t.texImage2D(n.TEXTURE_2D,Xe,It,He,j,0,On,nn,null),He>>=1,j>>=1}}else if(vn.length>0&&Kn){si&&Zi&&t.texStorage2D(n.TEXTURE_2D,Tn,It,vn[0].width,vn[0].height);for(let He=0,j=vn.length;He<j;He++)ut=vn[He],si?t.texSubImage2D(n.TEXTURE_2D,He,0,0,On,nn,ut):t.texImage2D(n.TEXTURE_2D,He,It,On,nn,ut);I.generateMipmaps=!1}else si?(Zi&&t.texStorage2D(n.TEXTURE_2D,Tn,It,Re.width,Re.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,On,nn,Re)):t.texImage2D(n.TEXTURE_2D,0,It,On,nn,Re);M(I,Kn)&&x(Pe),gt.__version=De.version,I.onUpdate&&I.onUpdate(I)}L.__version=I.version}function Ne(L,I,ie,Pe,Ie,De){const gt=s.convert(ie.format,ie.colorSpace),je=s.convert(ie.type),at=S(ie.internalFormat,gt,je,ie.colorSpace);if(!i.get(I).__hasExternalTextures){const pn=Math.max(1,I.width>>De),Re=Math.max(1,I.height>>De);Ie===n.TEXTURE_3D||Ie===n.TEXTURE_2D_ARRAY?t.texImage3D(Ie,De,at,pn,Re,I.depth,0,gt,je,null):t.texImage2D(Ie,De,at,pn,Re,0,gt,je,null)}t.bindFramebuffer(n.FRAMEBUFFER,L),be(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Pe,Ie,i.get(ie).__webglTexture,0,Le(I)):(Ie===n.TEXTURE_2D||Ie>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ie<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Pe,Ie,i.get(ie).__webglTexture,De),t.bindFramebuffer(n.FRAMEBUFFER,null)}function pt(L,I,ie){if(n.bindRenderbuffer(n.RENDERBUFFER,L),I.depthBuffer&&!I.stencilBuffer){let Pe=!0===a?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ie||be(I)){const Ie=I.depthTexture;Ie&&Ie.isDepthTexture&&(Ie.type===jl?Pe=n.DEPTH_COMPONENT32F:Ie.type===ru&&(Pe=n.DEPTH_COMPONENT24));const De=Le(I);be(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,De,Pe,I.width,I.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,De,Pe,I.width,I.height)}else n.renderbufferStorage(n.RENDERBUFFER,Pe,I.width,I.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,L)}else if(I.depthBuffer&&I.stencilBuffer){const Pe=Le(I);ie&&!1===be(I)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,I.width,I.height):be(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Pe,n.DEPTH24_STENCIL8,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,L)}else{const Pe=!0===I.isWebGLMultipleRenderTargets?I.texture:[I.texture];for(let Ie=0;Ie<Pe.length;Ie++){const De=Pe[Ie],gt=s.convert(De.format,De.colorSpace),je=s.convert(De.type),at=S(De.internalFormat,gt,je,De.colorSpace),Ft=Le(I);ie&&!1===be(I)?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ft,at,I.width,I.height):be(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ft,at,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,at,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Je(L){const I=i.get(L),ie=!0===L.isWebGLCubeRenderTarget;if(L.depthTexture&&!I.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");!function mt(L,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,L),!I.depthTexture||!I.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),W(I.depthTexture,0);const Pe=i.get(I.depthTexture).__webglTexture,Ie=Le(I);if(I.depthTexture.format===Oh)be(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else{if(I.depthTexture.format!==Dm)throw new Error("Unknown depthTexture format");be(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,Ie):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0)}}(I.__webglFramebuffer,L)}else if(ie){I.__webglDepthbuffer=[];for(let Pe=0;Pe<6;Pe++)t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[Pe]),I.__webglDepthbuffer[Pe]=n.createRenderbuffer(),pt(I.__webglDepthbuffer[Pe],L,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),pt(I.__webglDepthbuffer,L,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Le(L){return Math.min(r.maxSamples,L.samples)}function be(L){const I=i.get(L);return a&&L.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==I.__useRenderToTexture}function et(L,I){const ie=L.colorSpace,Pe=L.format,Ie=L.type;return!0===L.isCompressedTexture||!0===L.isVideoTexture||L.format===DR||ie!==Hr&&ie!==ba&&(ii.getTransfer(ie)===Ei?!1===a?!0===e.has("EXT_sRGB")&&Pe===Bo?(L.format=DR,L.minFilter=qi,L.generateMipmaps=!1):I=sH.sRGBToLinear(I):(Pe!==Bo||Ie!==iu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ie)),I}this.allocateTextureUnit=function G(){const L=ue;return L>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+L+" texture units while this GPU supports only "+r.maxTextures),ue+=1,L},this.resetTextureUnits=function we(){ue=0},this.setTexture2D=W,this.setTexture2DArray=function J(L,I){const ie=i.get(L);L.version>0&&ie.__version!==L.version?Be(ie,L,I):t.bindTexture(n.TEXTURE_2D_ARRAY,ie.__webglTexture,n.TEXTURE0+I)},this.setTexture3D=function ne(L,I){const ie=i.get(L);L.version>0&&ie.__version!==L.version?Be(ie,L,I):t.bindTexture(n.TEXTURE_3D,ie.__webglTexture,n.TEXTURE0+I)},this.setTextureCube=function re(L,I){const ie=i.get(L);L.version>0&&ie.__version!==L.version?function tt(L,I,ie){if(6!==I.image.length)return;const Pe=me(L,I),Ie=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,L.__webglTexture,n.TEXTURE0+ie);const De=i.get(Ie);if(Ie.version!==De.__version||!0===Pe){t.activeTexture(n.TEXTURE0+ie);const gt=ii.getPrimaries(ii.workingColorSpace),je=I.colorSpace===ba?null:ii.getPrimaries(I.colorSpace),at=I.colorSpace===ba||gt===je?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,at);const Ft=I.isCompressedTexture||I.image[0].isCompressedTexture,pn=I.image[0]&&I.image[0].isDataTexture,Re=[];for(let He=0;He<6;He++)Re[He]=Ft||pn?pn?I.image[He].image:I.image[He]:b(I.image[He],!1,!0,r.maxCubemapSize),Re[He]=et(I,Re[He]);const Kn=Re[0],On=y(Kn)||a,nn=s.convert(I.format,I.colorSpace),It=s.convert(I.type),ut=S(I.internalFormat,nn,It,I.colorSpace),vn=a&&!0!==I.isVideoTexture,si=void 0===De.__version||!0===Pe;let Tn,Zi=P(I,Kn,On);if(le(n.TEXTURE_CUBE_MAP,I,On),Ft){vn&&si&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Zi,ut,Kn.width,Kn.height);for(let He=0;He<6;He++){Tn=Re[He].mipmaps;for(let j=0;j<Tn.length;j++){const Xe=Tn[j];I.format!==Bo?null!==nn?vn?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j,0,0,Xe.width,Xe.height,nn,Xe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j,ut,Xe.width,Xe.height,0,Xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j,0,0,Xe.width,Xe.height,nn,It,Xe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j,ut,Xe.width,Xe.height,0,nn,It,Xe.data)}}}else{Tn=I.mipmaps,vn&&si&&(Tn.length>0&&Zi++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Zi,ut,Re[0].width,Re[0].height));for(let He=0;He<6;He++)if(pn){vn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,Re[He].width,Re[He].height,nn,It,Re[He].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,ut,Re[He].width,Re[He].height,0,nn,It,Re[He].data);for(let j=0;j<Tn.length;j++){const qe=Tn[j].image[He].image;vn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j+1,0,0,qe.width,qe.height,nn,It,qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j+1,ut,qe.width,qe.height,0,nn,It,qe.data)}}else{vn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,nn,It,Re[He]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,ut,nn,It,Re[He]);for(let j=0;j<Tn.length;j++){const Xe=Tn[j];vn?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j+1,0,0,nn,It,Xe.image[He]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,j+1,ut,nn,It,Xe.image[He])}}}M(I,On)&&x(n.TEXTURE_CUBE_MAP),De.__version=Ie.version,I.onUpdate&&I.onUpdate(I)}L.__version=I.version}(ie,L,I):t.bindTexture(n.TEXTURE_CUBE_MAP,ie.__webglTexture,n.TEXTURE0+I)},this.rebindTextures=function Dt(L,I,ie){const Pe=i.get(L);void 0!==I&&Ne(Pe.__webglFramebuffer,L,L.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),void 0!==ie&&Je(L)},this.setupRenderTarget=function z(L){const I=L.texture,ie=i.get(L),Pe=i.get(I);L.addEventListener("dispose",V),!0!==L.isWebGLMultipleRenderTargets&&(void 0===Pe.__webglTexture&&(Pe.__webglTexture=n.createTexture()),Pe.__version=I.version,o.memory.textures++);const Ie=!0===L.isWebGLCubeRenderTarget,De=!0===L.isWebGLMultipleRenderTargets,gt=y(L)||a;if(Ie){ie.__webglFramebuffer=[];for(let je=0;je<6;je++)if(a&&I.mipmaps&&I.mipmaps.length>0){ie.__webglFramebuffer[je]=[];for(let at=0;at<I.mipmaps.length;at++)ie.__webglFramebuffer[je][at]=n.createFramebuffer()}else ie.__webglFramebuffer[je]=n.createFramebuffer()}else{if(a&&I.mipmaps&&I.mipmaps.length>0){ie.__webglFramebuffer=[];for(let je=0;je<I.mipmaps.length;je++)ie.__webglFramebuffer[je]=n.createFramebuffer()}else ie.__webglFramebuffer=n.createFramebuffer();if(De)if(r.drawBuffers){const je=L.texture;for(let at=0,Ft=je.length;at<Ft;at++){const pn=i.get(je[at]);void 0===pn.__webglTexture&&(pn.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&L.samples>0&&!1===be(L)){const je=De?I:[I];ie.__webglMultisampledFramebuffer=n.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglMultisampledFramebuffer);for(let at=0;at<je.length;at++){const Ft=je[at];ie.__webglColorRenderbuffer[at]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ie.__webglColorRenderbuffer[at]);const pn=s.convert(Ft.format,Ft.colorSpace),Re=s.convert(Ft.type),Kn=S(Ft.internalFormat,pn,Re,Ft.colorSpace,!0===L.isXRRenderTarget),On=Le(L);n.renderbufferStorageMultisample(n.RENDERBUFFER,On,Kn,L.width,L.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,ie.__webglColorRenderbuffer[at])}n.bindRenderbuffer(n.RENDERBUFFER,null),L.depthBuffer&&(ie.__webglDepthRenderbuffer=n.createRenderbuffer(),pt(ie.__webglDepthRenderbuffer,L,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ie){t.bindTexture(n.TEXTURE_CUBE_MAP,Pe.__webglTexture),le(n.TEXTURE_CUBE_MAP,I,gt);for(let je=0;je<6;je++)if(a&&I.mipmaps&&I.mipmaps.length>0)for(let at=0;at<I.mipmaps.length;at++)Ne(ie.__webglFramebuffer[je][at],L,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,at);else Ne(ie.__webglFramebuffer[je],L,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+je,0);M(I,gt)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(De){const je=L.texture;for(let at=0,Ft=je.length;at<Ft;at++){const pn=je[at],Re=i.get(pn);t.bindTexture(n.TEXTURE_2D,Re.__webglTexture),le(n.TEXTURE_2D,pn,gt),Ne(ie.__webglFramebuffer,L,pn,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,0),M(pn,gt)&&x(n.TEXTURE_2D)}t.unbindTexture()}else{let je=n.TEXTURE_2D;if((L.isWebGL3DRenderTarget||L.isWebGLArrayRenderTarget)&&(a?je=L.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(je,Pe.__webglTexture),le(je,I,gt),a&&I.mipmaps&&I.mipmaps.length>0)for(let at=0;at<I.mipmaps.length;at++)Ne(ie.__webglFramebuffer[at],L,I,n.COLOR_ATTACHMENT0,je,at);else Ne(ie.__webglFramebuffer,L,I,n.COLOR_ATTACHMENT0,je,0);M(I,gt)&&x(je),t.unbindTexture()}L.depthBuffer&&Je(L)},this.updateRenderTargetMipmap=function Ue(L){const I=y(L)||a,ie=!0===L.isWebGLMultipleRenderTargets?L.texture:[L.texture];for(let Pe=0,Ie=ie.length;Pe<Ie;Pe++){const De=ie[Pe];if(M(De,I)){const gt=L.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,je=i.get(De).__webglTexture;t.bindTexture(gt,je),x(gt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function xe(L){if(a&&L.samples>0&&!1===be(L)){const I=L.isWebGLMultipleRenderTargets?L.texture:[L.texture],ie=L.width,Pe=L.height;let Ie=n.COLOR_BUFFER_BIT;const De=[],gt=L.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,je=i.get(L),at=!0===L.isWebGLMultipleRenderTargets;if(at)for(let Ft=0;Ft<I.length;Ft++)t.bindFramebuffer(n.FRAMEBUFFER,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,je.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,je.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,je.__webglFramebuffer);for(let Ft=0;Ft<I.length;Ft++){De.push(n.COLOR_ATTACHMENT0+Ft),L.depthBuffer&&De.push(gt);const pn=void 0!==je.__ignoreDepthValues&&je.__ignoreDepthValues;if(!1===pn&&(L.depthBuffer&&(Ie|=n.DEPTH_BUFFER_BIT),L.stencilBuffer&&(Ie|=n.STENCIL_BUFFER_BIT)),at&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,je.__webglColorRenderbuffer[Ft]),!0===pn&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[gt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[gt])),at){const Re=i.get(I[Ft]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Re,0)}n.blitFramebuffer(0,0,ie,Pe,0,0,ie,Pe,Ie,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,De)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),at)for(let Ft=0;Ft<I.length;Ft++){t.bindFramebuffer(n.FRAMEBUFFER,je.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.RENDERBUFFER,je.__webglColorRenderbuffer[Ft]);const pn=i.get(I[Ft]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,je.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ft,n.TEXTURE_2D,pn,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,je.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Je,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=be}function zle(n,e,t){const i=t.isWebGL2;return{convert:function r(s,o=ba){let a;const l=ii.getTransfer(o);if(s===iu)return n.UNSIGNED_BYTE;if(s===_z)return n.UNSIGNED_SHORT_4_4_4_4;if(s===vz)return n.UNSIGNED_SHORT_5_5_5_1;if(s===Uie)return n.BYTE;if(s===Vie)return n.SHORT;if(s===yR)return n.UNSIGNED_SHORT;if(s===gz)return n.INT;if(s===ru)return n.UNSIGNED_INT;if(s===jl)return n.FLOAT;if(s===Wy)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(s===zie)return n.ALPHA;if(s===Bo)return n.RGBA;if(s===Hie)return n.LUMINANCE;if(s===Gie)return n.LUMINANCE_ALPHA;if(s===Oh)return n.DEPTH_COMPONENT;if(s===Dm)return n.DEPTH_STENCIL;if(s===DR)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(s===Wie)return n.RED;if(s===yz)return n.RED_INTEGER;if(s===$ie)return n.RG;if(s===bz)return n.RG_INTEGER;if(s===xz)return n.RGBA_INTEGER;if(s===bR||s===xR||s===wR||s===MR)if(l===Ei){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(s===bR)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===xR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===wR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===MR)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(s===bR)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===xR)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===wR)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===MR)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===wz||s===Mz||s===Sz||s===Cz){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(s===wz)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Mz)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Sz)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===Cz)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===Ez)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Az||s===Tz){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(s===Az)return l===Ei?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===Tz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(s===Dz||s===Iz||s===Rz||s===Pz||s===kz||s===Oz||s===Lz||s===Fz||s===Nz||s===Bz||s===Uz||s===Vz||s===zz||s===Hz){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(s===Dz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Iz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Rz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Pz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===kz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Oz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Lz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Fz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Nz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Bz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Uz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Vz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===zz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Hz)return l===Ei?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===SR||s===Gz||s===Wz){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(s===SR)return l===Ei?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Gz)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Wz)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(s===jie||s===$z||s===jz||s===Xz){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(s===SR)return a.COMPRESSED_RED_RGTC1_EXT;if(s===$z)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===jz)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Xz)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===kh?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==n[s]?n[s]:null}}}class Hle extends gr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class wa extends Gr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Gle={type:"move"};class sP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new wa,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new wa,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new N,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new N),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new wa,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new N,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new N),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const y=t.getJointPose(b,i),v=this._getHandJoint(c,b);null!==y&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=y.radius),v.visible=null!==y}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,i),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Gle)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new wa;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Wle extends Om{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,p=null,m=null,g=null;const b=t.getContextAttributes();let y=null,v=null;const M=[],x=[],S=new Ce;let P=null;const A=new gr;A.layers.enable(1),A.viewport=new li;const R=new gr;R.layers.enable(2),R.viewport=new li;const V=[A,R],E=new Hle;E.layers.enable(1),E.layers.enable(2);let k=null,K=null;function ue(le){const me=x.indexOf(le.inputSource);if(-1===me)return;const Be=M[me];void 0!==Be&&(Be.update(le.inputSource,le.frame,c||o),Be.dispatchEvent({type:le.type,data:le.inputSource}))}function we(){r.removeEventListener("select",ue),r.removeEventListener("selectstart",ue),r.removeEventListener("selectend",ue),r.removeEventListener("squeeze",ue),r.removeEventListener("squeezestart",ue),r.removeEventListener("squeezeend",ue),r.removeEventListener("end",we),r.removeEventListener("inputsourceschange",G);for(let le=0;le<M.length;le++){const me=x[le];null!==me&&(x[le]=null,M[le].disconnect(me))}k=null,K=null,e.setRenderTarget(y),m=null,p=null,h=null,r=null,v=null,Oe.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}function G(le){for(let me=0;me<le.removed.length;me++){const Be=le.removed[me],tt=x.indexOf(Be);tt>=0&&(x[tt]=null,M[tt].disconnect(Be))}for(let me=0;me<le.added.length;me++){const Be=le.added[me];let tt=x.indexOf(Be);if(-1===tt){for(let pt=0;pt<M.length;pt++){if(pt>=x.length){x.push(Be),tt=pt;break}if(null===x[pt]){x[pt]=Be,tt=pt;break}}if(-1===tt)break}const Ne=M[tt];Ne&&Ne.connect(Be)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let me=M[le];return void 0===me&&(me=new sP,M[le]=me),me.getTargetRaySpace()},this.getControllerGrip=function(le){let me=M[le];return void 0===me&&(me=new sP,M[le]=me),me.getGripSpace()},this.getHand=function(le){let me=M[le];return void 0===me&&(me=new sP,M[le]=me),me.getHandSpace()},this.setFramebufferScaleFactor=function(le){s=le,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(le){c=le},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var le=on(function*(me){if(r=me,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",ue),r.addEventListener("selectstart",ue),r.addEventListener("selectend",ue),r.addEventListener("squeeze",ue),r.addEventListener("squeezestart",ue),r.addEventListener("squeezeend",ue),r.addEventListener("end",we),r.addEventListener("inputsourceschange",G),!0!==b.xrCompatible&&(yield t.makeXRCompatible()),P=e.getPixelRatio(),e.getSize(S),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)m=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||b.antialias,alpha:!0,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),v=new Nh(m.framebufferWidth,m.framebufferHeight,{format:Bo,type:iu,colorSpace:e.outputColorSpace,stencilBuffer:b.stencil});else{let Be=null,tt=null,Ne=null;b.depth&&(Ne=b.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Be=b.stencil?Dm:Oh,tt=b.stencil?kh:ru);const pt={colorFormat:t.RGBA8,depthFormat:Ne,scaleFactor:s};h=new XRWebGLBinding(r,t),p=h.createProjectionLayer(pt),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),v=new Nh(p.textureWidth,p.textureHeight,{format:Bo,type:iu,depthTexture:new PH(p.textureWidth,p.textureHeight,tt,void 0,void 0,void 0,void 0,void 0,void 0,Be),stencilBuffer:b.stencil,colorSpace:e.outputColorSpace,samples:b.antialias?4:0}),e.properties.get(v).__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Oe.setContext(r),Oe.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}});return function(me){return le.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const te=new N,W=new N;function ne(le,me){null===me?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(me.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(null===r)return;E.near=R.near=A.near=le.near,E.far=R.far=A.far=le.far,(k!==E.near||K!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),k=E.near,K=E.far);const me=le.parent,Be=E.cameras;ne(E,me);for(let tt=0;tt<Be.length;tt++)ne(Be[tt],me);2===Be.length?function J(le,me,Be){te.setFromMatrixPosition(me.matrixWorld),W.setFromMatrixPosition(Be.matrixWorld);const tt=te.distanceTo(W),Ne=me.projectionMatrix.elements,pt=Be.projectionMatrix.elements,mt=Ne[14]/(Ne[10]-1),Je=Ne[14]/(Ne[10]+1),Dt=(Ne[9]+1)/Ne[5],z=(Ne[9]-1)/Ne[5],Ue=(Ne[8]-1)/Ne[0],xe=(pt[8]+1)/pt[0],Le=mt*Ue,be=mt*xe,St=tt/(-Ue+xe),et=St*-Ue;me.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(et),le.translateZ(St),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert();const L=mt+St,I=Je+St;le.projectionMatrix.makePerspective(Le-et,be+(tt-et),Dt*Je/I*L,z*Je/I*L,L,I),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}(E,A,R):E.projectionMatrix.copy(A.projectionMatrix),function re(le,me,Be){null===Be?le.matrix.copy(me.matrixWorld):(le.matrix.copy(Be.matrixWorld),le.matrix.invert(),le.matrix.multiply(me.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(me.projectionMatrix),le.projectionMatrixInverse.copy(me.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=2*Lm*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}(le,E,me)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(le){l=le,null!==p&&(p.fixedFoveation=le),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=le)};let _e=null;const Oe=new SH;Oe.setAnimationLoop(function Se(le,me){if(u=me.getViewerPose(c||o),g=me,null!==u){const Be=u.views;null!==m&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let tt=!1;Be.length!==E.cameras.length&&(E.cameras.length=0,tt=!0);for(let Ne=0;Ne<Be.length;Ne++){const pt=Be[Ne];let mt=null;if(null!==m)mt=m.getViewport(pt);else{const Dt=h.getViewSubImage(p,pt);mt=Dt.viewport,0===Ne&&(e.setRenderTargetTextures(v,Dt.colorTexture,p.ignoreDepthValues?void 0:Dt.depthStencilTexture),e.setRenderTarget(v))}let Je=V[Ne];void 0===Je&&(Je=new gr,Je.layers.enable(Ne),Je.viewport=new li,V[Ne]=Je),Je.matrix.fromArray(pt.transform.matrix),Je.matrix.decompose(Je.position,Je.quaternion,Je.scale),Je.projectionMatrix.fromArray(pt.projectionMatrix),Je.projectionMatrixInverse.copy(Je.projectionMatrix).invert(),Je.viewport.set(mt.x,mt.y,mt.width,mt.height),0===Ne&&(E.matrix.copy(Je.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===tt&&E.cameras.push(Je)}}for(let Be=0;Be<M.length;Be++){const tt=x[Be],Ne=M[Be];null!==tt&&void 0!==Ne&&Ne.update(tt,me,c||o)}_e&&_e(le,me),me.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:me}),g=null}),this.setAnimationLoop=function(le){_e=le},this.dispose=function(){}}}function $le(n,e){function t(y,v){!0===y.matrixAutoUpdate&&y.updateMatrix(),v.value.copy(y.matrix)}function s(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.bumpMap&&(y.bumpMap.value=v.bumpMap,t(v.bumpMap,y.bumpMapTransform),y.bumpScale.value=v.bumpScale,v.side===go&&(y.bumpScale.value*=-1)),v.normalMap&&(y.normalMap.value=v.normalMap,t(v.normalMap,y.normalMapTransform),y.normalScale.value.copy(v.normalScale),v.side===go&&y.normalScale.value.negate()),v.displacementMap&&(y.displacementMap.value=v.displacementMap,t(v.displacementMap,y.displacementMapTransform),y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,y.emissiveMapTransform)),v.specularMap&&(y.specularMap.value=v.specularMap,t(v.specularMap,y.specularMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const M=e.get(v).envMap;if(M&&(y.envMap.value=M,y.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap){y.lightMap.value=v.lightMap;const x=!0===n._useLegacyLights?Math.PI:1;y.lightMapIntensity.value=v.lightMapIntensity*x,t(v.lightMap,y.lightMapTransform)}v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,y.aoMapTransform))}return{refreshFogUniforms:function i(y,v){v.color.getRGB(y.fogColor.value,MH(n)),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)},refreshMaterialUniforms:function r(y,v,M,x,S){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(y,v):v.isMeshToonMaterial?(s(y,v),function h(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}(y,v)):v.isMeshPhongMaterial?(s(y,v),function u(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}(y,v)):v.isMeshStandardMaterial?(s(y,v),function p(y,v){y.metalness.value=v.metalness,v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,y.metalnessMapTransform)),y.roughness.value=v.roughness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,y.roughnessMapTransform)),e.get(v).envMap&&(y.envMapIntensity.value=v.envMapIntensity)}(y,v),v.isMeshPhysicalMaterial&&function m(y,v,M){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,y.sheenColorMapTransform)),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,y.sheenRoughnessMapTransform))),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,y.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(y.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===go&&y.clearcoatNormalScale.value.negate())),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,y.iridescenceMapTransform)),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=M.texture,y.transmissionSamplerSize.value.set(M.width,M.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,y.transmissionMapTransform)),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(y.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(y.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,y.anisotropyMapTransform))),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,y.specularColorMapTransform)),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,y.specularIntensityMapTransform))}(y,v,S)):v.isMeshMatcapMaterial?(s(y,v),function g(y,v){v.matcap&&(y.matcap.value=v.matcap)}(y,v)):v.isMeshDepthMaterial?s(y,v):v.isMeshDistanceMaterial?(s(y,v),function b(y,v){const M=e.get(v).light;y.referencePosition.value.setFromMatrixPosition(M.matrixWorld),y.nearDistance.value=M.shadow.camera.near,y.farDistance.value=M.shadow.camera.far}(y,v)):v.isMeshNormalMaterial?s(y,v):v.isLineBasicMaterial?(function o(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform))}(y,v),v.isLineDashedMaterial&&function a(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}(y,v)):v.isPointsMaterial?function l(y,v,M,x){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*M,y.scale.value=.5*x,v.map&&(y.map.value=v.map,t(v.map,y.uvTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v,M,x):v.isSpriteMaterial?function c(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}}}function jle(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function m(M,x,S,P){const A=M.value,R=x+"_"+S;if(void 0===P[R])return P[R]="number"==typeof A||"boolean"==typeof A?A:A.clone(),!0;{const V=P[R];if("number"==typeof A||"boolean"==typeof A){if(V!==A)return P[R]=A,!0}else if(!1===V.equals(A))return V.copy(A),!0}return!1}function b(M){const x={boundary:0,storage:0};return"number"==typeof M||"boolean"==typeof M?(x.boundary=4,x.storage=4):M.isVector2?(x.boundary=8,x.storage=8):M.isVector3||M.isColor?(x.boundary=16,x.storage=12):M.isVector4?(x.boundary=16,x.storage=16):M.isMatrix3?(x.boundary=48,x.storage=48):M.isMatrix4?(x.boundary=64,x.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),x}function y(M){const x=M.target;x.removeEventListener("dispose",y);const S=o.indexOf(x.__bindingPointIndex);o.splice(S,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}return{bind:function l(M,x){i.uniformBlockBinding(M,x.program)},update:function c(M,x){let S=r[M.id];void 0===S&&(function g(M){const x=M.uniforms;let S=0;for(let R=0,V=x.length;R<V;R++){const E=Array.isArray(x[R])?x[R]:[x[R]];for(let k=0,K=E.length;k<K;k++){const ue=E[k],we=Array.isArray(ue.value)?ue.value:[ue.value];for(let G=0,te=we.length;G<te;G++){const J=b(we[G]),ne=S%16;0!==ne&&16-ne<J.boundary&&(S+=16-ne),ue.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),ue.__offset=S,S+=J.storage}}}const A=S%16;A>0&&(S+=16-A),M.__size=S,M.__cache={}}(M),S=function u(M){const x=function h(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=x;const S=n.createBuffer(),P=M.__size,A=M.usage;return n.bindBuffer(n.UNIFORM_BUFFER,S),n.bufferData(n.UNIFORM_BUFFER,P,A),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,S),S}(M),r[M.id]=S,M.addEventListener("dispose",y)),i.updateUBOMapping(M,x.program);const A=e.render.frame;s[M.id]!==A&&(function p(M){const S=M.uniforms,P=M.__cache;n.bindBuffer(n.UNIFORM_BUFFER,r[M.id]);for(let A=0,R=S.length;A<R;A++){const V=Array.isArray(S[A])?S[A]:[S[A]];for(let E=0,k=V.length;E<k;E++){const K=V[E];if(!0===m(K,A,E,P)){const ue=K.__offset,we=Array.isArray(K.value)?K.value:[K.value];let G=0;for(let te=0;te<we.length;te++){const W=we[te],J=b(W);"number"==typeof W||"boolean"==typeof W?(K.__data[0]=W,n.bufferSubData(n.UNIFORM_BUFFER,ue+G,K.__data)):W.isMatrix3?(K.__data[0]=W.elements[0],K.__data[1]=W.elements[1],K.__data[2]=W.elements[2],K.__data[3]=0,K.__data[4]=W.elements[3],K.__data[5]=W.elements[4],K.__data[6]=W.elements[5],K.__data[7]=0,K.__data[8]=W.elements[6],K.__data[9]=W.elements[7],K.__data[10]=W.elements[8],K.__data[11]=0):(W.toArray(K.__data,G),G+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ue,K.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}(M),s[M.id]=A)},dispose:function v(){for(const M in r)n.deleteBuffer(r[M]);o=[],r={},s={}}}}class t4{constructor(e={}){const{canvas:t=Mre(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;let p;this.isWebGLRenderer=!0,p=null!==i?i.getContextAttributes().alpha:o;const m=new Uint32Array(4),g=new Int32Array(4);let b=null,y=null;const v=[],M=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ci,this._useLegacyLights=!1,this.toneMapping=nu,this.toneMappingExposure=1;const x=this;let S=!1,P=0,A=0,R=null,V=-1,E=null;const k=new li,K=new li;let ue=null;const we=new Ge(0);let G=0,te=t.width,W=t.height,J=1,ne=null,re=null;const _e=new li(0,0,te,W),Se=new li(0,0,te,W);let Oe=!1;const le=new NS;let me=!1,Be=!1,tt=null;const Ne=new Rt,pt=new Ce,mt=new N,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Dt(){return null===R?J:1}let xe,Le,be,St,et,L,I,ie,Pe,Ie,De,gt,je,at,Ft,pn,Re,Kn,On,nn,It,ut,vn,si,z=i;function Ue(F,ee){for(let de=0;de<F.length;de++){const ce=t.getContext(F[de],ee);if(null!==ce)return ce}return null}try{const F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r160"),t.addEventListener("webglcontextlost",He,!1),t.addEventListener("webglcontextrestored",j,!1),t.addEventListener("webglcontextcreationerror",Xe,!1),null===z){const ee=["webgl2","webgl","experimental-webgl"];if(!0===x.isWebGL1Renderer&&ee.shift(),z=Ue(ee,F),null===z)throw Ue(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===z.getShaderPrecisionFormat&&(z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}function Zi(){xe=new rae(z),Le=new Qoe(z,xe,e),xe.init(Le),ut=new zle(z,xe,Le),be=new Ule(z,xe,Le),St=new aae(z),et=new Ale,L=new Vle(z,xe,be,et,Le,ut,St),I=new eae(x),ie=new iae(x),Pe=new Yre(z,Le),vn=new Koe(z,xe,Pe,Le),Ie=new sae(z,Pe,St,vn),De=new uae(z,Ie,Pe,St),On=new dae(z,Le,L),pn=new Joe(et),gt=new Ele(x,I,ie,xe,Le,vn,pn),je=new $le(x,et),at=new Dle,Ft=new Lle(xe,Le),Kn=new Yoe(x,I,ie,be,De,p,l),Re=new Ble(x,De,Le),si=new jle(z,St,Le,be),nn=new Zoe(z,xe,St,Le),It=new oae(z,xe,St,Le),St.programs=gt.programs,x.capabilities=Le,x.extensions=xe,x.properties=et,x.renderLists=at,x.shadowMap=Re,x.state=be,x.info=St}Zi();const Tn=new Wle(x,z);function He(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function j(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const F=St.autoReset,ee=Re.enabled,de=Re.autoUpdate,he=Re.needsUpdate,ce=Re.type;Zi(),St.autoReset=F,Re.enabled=ee,Re.autoUpdate=de,Re.needsUpdate=he,Re.type=ce}function Xe(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function qe(F){const ee=F.target;ee.removeEventListener("dispose",qe),function $t(F){(function Nt(F){const ee=et.get(F).programs;void 0!==ee&&(ee.forEach(function(de){gt.releaseProgram(de)}),F.isShaderMaterial&&gt.releaseShaderCache(F))})(F),et.remove(F)}(ee)}function vi(F,ee,de){!0===F.transparent&&F.side===No&&!1===F.forceSinglePass?(F.side=go,F.needsUpdate=!0,jC(F,ee,de),F.side=$l,F.needsUpdate=!0,jC(F,ee,de),F.side=No):jC(F,ee,de)}this.xr=Tn,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const F=xe.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=xe.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(F){void 0!==F&&(J=F,this.setSize(te,W,!1))},this.getSize=function(F){return F.set(te,W)},this.setSize=function(F,ee,de=!0){Tn.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(te=F,W=ee,t.width=Math.floor(F*J),t.height=Math.floor(ee*J),!0===de&&(t.style.width=F+"px",t.style.height=ee+"px"),this.setViewport(0,0,F,ee))},this.getDrawingBufferSize=function(F){return F.set(te*J,W*J).floor()},this.setDrawingBufferSize=function(F,ee,de){te=F,W=ee,J=de,t.width=Math.floor(F*de),t.height=Math.floor(ee*de),this.setViewport(0,0,F,ee)},this.getCurrentViewport=function(F){return F.copy(k)},this.getViewport=function(F){return F.copy(_e)},this.setViewport=function(F,ee,de,he){F.isVector4?_e.set(F.x,F.y,F.z,F.w):_e.set(F,ee,de,he),be.viewport(k.copy(_e).multiplyScalar(J).floor())},this.getScissor=function(F){return F.copy(Se)},this.setScissor=function(F,ee,de,he){F.isVector4?Se.set(F.x,F.y,F.z,F.w):Se.set(F,ee,de,he),be.scissor(K.copy(Se).multiplyScalar(J).floor())},this.getScissorTest=function(){return Oe},this.setScissorTest=function(F){be.setScissorTest(Oe=F)},this.setOpaqueSort=function(F){ne=F},this.setTransparentSort=function(F){re=F},this.getClearColor=function(F){return F.copy(Kn.getClearColor())},this.setClearColor=function(){Kn.setClearColor.apply(Kn,arguments)},this.getClearAlpha=function(){return Kn.getClearAlpha()},this.setClearAlpha=function(){Kn.setClearAlpha.apply(Kn,arguments)},this.clear=function(F=!0,ee=!0,de=!0){let he=0;if(F){let ce=!1;if(null!==R){const nt=R.texture.format;ce=nt===xz||nt===bz||nt===yz}if(ce){const nt=R.texture.type,xt=nt===iu||nt===ru||nt===yR||nt===kh||nt===_z||nt===vz,Vt=Kn.getClearColor(),qt=Kn.getClearAlpha(),wn=Vt.r,ln=Vt.g,mn=Vt.b;xt?(m[0]=wn,m[1]=ln,m[2]=mn,m[3]=qt,z.clearBufferuiv(z.COLOR,0,m)):(g[0]=wn,g[1]=ln,g[2]=mn,g[3]=qt,z.clearBufferiv(z.COLOR,0,g))}else he|=z.COLOR_BUFFER_BIT}ee&&(he|=z.DEPTH_BUFFER_BIT),de&&(he|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",He,!1),t.removeEventListener("webglcontextrestored",j,!1),t.removeEventListener("webglcontextcreationerror",Xe,!1),at.dispose(),Ft.dispose(),et.dispose(),I.dispose(),ie.dispose(),De.dispose(),vn.dispose(),si.dispose(),gt.dispose(),Tn.dispose(),Tn.removeEventListener("sessionstart",eo),Tn.removeEventListener("sessionend",bi),tt&&(tt.dispose(),tt=null),to.stop()},this.renderBufferDirect=function(F,ee,de,he,ce,nt){null===ee&&(ee=Je);const xt=ce.isMesh&&ce.matrixWorld.determinant()<0,Vt=function _me(F,ee,de,he,ce){!0!==ee.isScene&&(ee=Je),L.resetTextureUnits();const nt=ee.fog,Vt=null===R?x.outputColorSpace:!0===R.isXRRenderTarget?R.texture.colorSpace:Hr,qt=(he.isMeshStandardMaterial?ie:I).get(he.envMap||(he.isMeshStandardMaterial?ee.environment:null)),wn=!0===he.vertexColors&&!!de.attributes.color&&4===de.attributes.color.itemSize,ln=!!de.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),mn=!!de.morphAttributes.position,sr=!!de.morphAttributes.normal,$o=!!de.morphAttributes.color;let Xr=nu;he.toneMapped&&(null===R||!0===R.isXRRenderTarget)&&(Xr=x.toneMapping);const td=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,Vi=void 0!==td?td.length:0,Dn=et.get(he),Ak=y.state.lights;!0!==me||!0!==Be&&F===E||pn.setState(he,F,F===E&&he.id===V);let Qi=!1;he.version===Dn.__version?(Dn.needsLights&&Dn.lightsStateVersion!==Ak.state.version||Dn.outputColorSpace!==Vt||ce.isBatchedMesh&&!1===Dn.batching||!ce.isBatchedMesh&&!0===Dn.batching||ce.isInstancedMesh&&!1===Dn.instancing||!ce.isInstancedMesh&&!0===Dn.instancing||ce.isSkinnedMesh&&!1===Dn.skinning||!ce.isSkinnedMesh&&!0===Dn.skinning||ce.isInstancedMesh&&!0===Dn.instancingColor&&null===ce.instanceColor||ce.isInstancedMesh&&!1===Dn.instancingColor&&null!==ce.instanceColor||Dn.envMap!==qt||!0===he.fog&&Dn.fog!==nt||void 0!==Dn.numClippingPlanes&&(Dn.numClippingPlanes!==pn.numPlanes||Dn.numIntersection!==pn.numIntersection)||Dn.vertexAlphas!==wn||Dn.vertexTangents!==ln||Dn.morphTargets!==mn||Dn.morphNormals!==sr||Dn.morphColors!==$o||Dn.toneMapping!==Xr||!0===Le.isWebGL2&&Dn.morphTargetsCount!==Vi)&&(Qi=!0):(Qi=!0,Dn.__version=he.version);let ff=Dn.currentProgram;!0===Qi&&(ff=jC(he,ee,ce));let AG=!1,Sb=!1,Tk=!1;const Ss=ff.getUniforms(),pf=Dn.uniforms;if(be.useProgram(ff.program)&&(AG=!0,Sb=!0,Tk=!0),he.id!==V&&(V=he.id,Sb=!0),AG||E!==F){Ss.setValue(z,"projectionMatrix",F.projectionMatrix),Ss.setValue(z,"viewMatrix",F.matrixWorldInverse);const Ta=Ss.map.cameraPosition;void 0!==Ta&&Ta.setValue(z,mt.setFromMatrixPosition(F.matrixWorld)),Le.logarithmicDepthBuffer&&Ss.setValue(z,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&Ss.setValue(z,"isOrthographic",!0===F.isOrthographicCamera),E!==F&&(E=F,Sb=!0,Tk=!0)}if(ce.isSkinnedMesh){Ss.setOptional(z,ce,"bindMatrix"),Ss.setOptional(z,ce,"bindMatrixInverse");const Ta=ce.skeleton;Ta&&(Le.floatVertexTextures?(null===Ta.boneTexture&&Ta.computeBoneTexture(),Ss.setValue(z,"boneTexture",Ta.boneTexture,L)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ce.isBatchedMesh&&(Ss.setOptional(z,ce,"batchingTexture"),Ss.setValue(z,"batchingTexture",ce._matricesTexture,L));const Dk=de.morphAttributes;if((void 0!==Dk.position||void 0!==Dk.normal||void 0!==Dk.color&&!0===Le.isWebGL2)&&On.update(ce,de,ff),(Sb||Dn.receiveShadow!==ce.receiveShadow)&&(Dn.receiveShadow=ce.receiveShadow,Ss.setValue(z,"receiveShadow",ce.receiveShadow)),he.isMeshGouraudMaterial&&null!==he.envMap&&(pf.envMap.value=qt,pf.flipEnvMap.value=qt.isCubeTexture&&!1===qt.isRenderTargetTexture?-1:1),Sb&&(Ss.setValue(z,"toneMappingExposure",x.toneMappingExposure),Dn.needsLights&&function vme(F,ee){F.ambientLightColor.needsUpdate=ee,F.lightProbe.needsUpdate=ee,F.directionalLights.needsUpdate=ee,F.directionalLightShadows.needsUpdate=ee,F.pointLights.needsUpdate=ee,F.pointLightShadows.needsUpdate=ee,F.spotLights.needsUpdate=ee,F.spotLightShadows.needsUpdate=ee,F.rectAreaLights.needsUpdate=ee,F.hemisphereLights.needsUpdate=ee}(pf,Tk),nt&&!0===he.fog&&je.refreshFogUniforms(pf,nt),je.refreshMaterialUniforms(pf,he,J,W,tt),HS.upload(z,CG(Dn),pf,L)),he.isShaderMaterial&&!0===he.uniformsNeedUpdate&&(HS.upload(z,CG(Dn),pf,L),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&Ss.setValue(z,"center",ce.center),Ss.setValue(z,"modelViewMatrix",ce.modelViewMatrix),Ss.setValue(z,"normalMatrix",ce.normalMatrix),Ss.setValue(z,"modelMatrix",ce.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){const Ta=he.uniformsGroups;for(let Ik=0,bme=Ta.length;Ik<bme;Ik++)if(Le.isWebGL2){const TG=Ta[Ik];si.update(TG,ff),si.bind(TG,ff)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ff}(F,ee,de,he,ce);be.setMaterial(he,xt);let qt=de.index,wn=1;if(!0===he.wireframe){if(qt=Ie.getWireframeAttribute(de),void 0===qt)return;wn=2}const ln=de.drawRange,mn=de.attributes.position;let sr=ln.start*wn,$o=(ln.start+ln.count)*wn;null!==nt&&(sr=Math.max(sr,nt.start*wn),$o=Math.min($o,(nt.start+nt.count)*wn)),null!==qt?(sr=Math.max(sr,0),$o=Math.min($o,qt.count)):null!=mn&&(sr=Math.max(sr,0),$o=Math.min($o,mn.count));const Xr=$o-sr;if(Xr<0||Xr===1/0)return;vn.setup(ce,he,Vt,de,qt);let td,Vi=nn;if(null!==qt&&(td=Pe.get(qt),Vi=It,Vi.setIndex(td)),ce.isMesh)!0===he.wireframe?(be.setLineWidth(he.wireframeLinewidth*Dt()),Vi.setMode(z.LINES)):Vi.setMode(z.TRIANGLES);else if(ce.isLine){let Dn=he.linewidth;void 0===Dn&&(Dn=1),be.setLineWidth(Dn*Dt()),Vi.setMode(ce.isLineSegments?z.LINES:ce.isLineLoop?z.LINE_LOOP:z.LINE_STRIP)}else ce.isPoints?Vi.setMode(z.POINTS):ce.isSprite&&Vi.setMode(z.TRIANGLES);if(ce.isBatchedMesh)Vi.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else if(ce.isInstancedMesh)Vi.renderInstances(sr,Xr,ce.count);else if(de.isInstancedBufferGeometry){const Ak=Math.min(de.instanceCount,void 0!==de._maxInstanceCount?de._maxInstanceCount:1/0);Vi.renderInstances(sr,Xr,Ak)}else Vi.render(sr,Xr)},this.compile=function(F,ee,de=null){null===de&&(de=F),y=Ft.get(de),y.init(),M.push(y),de.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ee.layers)&&(y.pushLight(ce),ce.castShadow&&y.pushShadow(ce))}),F!==de&&F.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ee.layers)&&(y.pushLight(ce),ce.castShadow&&y.pushShadow(ce))}),y.setupLights(x._useLegacyLights);const he=new Set;return F.traverse(function(ce){const nt=ce.material;if(nt)if(Array.isArray(nt))for(let xt=0;xt<nt.length;xt++){const Vt=nt[xt];vi(Vt,de,ce),he.add(Vt)}else vi(nt,de,ce),he.add(nt)}),M.pop(),y=null,he},this.compileAsync=function(F,ee,de=null){const he=this.compile(F,ee,de);return new Promise(ce=>{function nt(){he.forEach(function(xt){et.get(xt).currentProgram.isReady()&&he.delete(xt)}),0!==he.size?setTimeout(nt,10):ce(F)}null!==xe.get("KHR_parallel_shader_compile")?nt():setTimeout(nt,10)})};let yi=null;function eo(){to.stop()}function bi(){to.start()}const to=new SH;function Jl(F,ee,de,he){if(!1===F.visible)return;if(F.layers.test(ee.layers))if(F.isGroup)de=F.renderOrder;else if(F.isLOD)!0===F.autoUpdate&&F.update(ee);else if(F.isLight)y.pushLight(F),F.castShadow&&y.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||le.intersectsSprite(F)){he&&mt.setFromMatrixPosition(F.matrixWorld).applyMatrix4(Ne);const xt=De.update(F),Vt=F.material;Vt.visible&&b.push(F,xt,Vt,de,mt.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||le.intersectsObject(F))){const xt=De.update(F),Vt=F.material;if(he&&(void 0!==F.boundingSphere?(null===F.boundingSphere&&F.computeBoundingSphere(),mt.copy(F.boundingSphere.center)):(null===xt.boundingSphere&&xt.computeBoundingSphere(),mt.copy(xt.boundingSphere.center)),mt.applyMatrix4(F.matrixWorld).applyMatrix4(Ne)),Array.isArray(Vt)){const qt=xt.groups;for(let wn=0,ln=qt.length;wn<ln;wn++){const mn=qt[wn],sr=Vt[mn.materialIndex];sr&&sr.visible&&b.push(F,xt,sr,de,mt.z,mn)}}else Vt.visible&&b.push(F,xt,Vt,de,mt.z,null)}const nt=F.children;for(let xt=0,Vt=nt.length;xt<Vt;xt++)Jl(nt[xt],ee,de,he)}function MG(F,ee,de,he){const ce=F.opaque,nt=F.transmissive,xt=F.transparent;y.setupLightsView(de),!0===me&&pn.setGlobalState(x.clippingPlanes,de),nt.length>0&&function gme(F,ee,de,he){if(null!==(!0===de.isScene?de.overrideMaterial:null))return;const nt=Le.isWebGL2;null===tt&&(tt=new Nh(1,1,{generateMipmaps:!0,type:xe.has("EXT_color_buffer_half_float")?Wy:iu,minFilter:Gc,samples:nt?4:0})),x.getDrawingBufferSize(pt),nt?tt.setSize(pt.x,pt.y):tt.setSize(mS(pt.x),mS(pt.y));const xt=x.getRenderTarget();x.setRenderTarget(tt),x.getClearColor(we),G=x.getClearAlpha(),G<1&&x.setClearColor(16777215,.5),x.clear();const Vt=x.toneMapping;x.toneMapping=nu,$C(F,de,he),L.updateMultisampleRenderTarget(tt),L.updateRenderTargetMipmap(tt);let qt=!1;for(let wn=0,ln=ee.length;wn<ln;wn++){const mn=ee[wn],sr=mn.object,$o=mn.geometry,Xr=mn.material,td=mn.group;if(Xr.side===No&&sr.layers.test(he.layers)){const Vi=Xr.side;Xr.side=go,Xr.needsUpdate=!0,SG(sr,de,he,$o,Xr,td),Xr.side=Vi,Xr.needsUpdate=!0,qt=!0}}!0===qt&&(L.updateMultisampleRenderTarget(tt),L.updateRenderTargetMipmap(tt)),x.setRenderTarget(xt),x.setClearColor(we,G),x.toneMapping=Vt}(ce,nt,ee,de),he&&be.viewport(k.copy(he)),ce.length>0&&$C(ce,ee,de),nt.length>0&&$C(nt,ee,de),xt.length>0&&$C(xt,ee,de),be.buffers.depth.setTest(!0),be.buffers.depth.setMask(!0),be.buffers.color.setMask(!0),be.setPolygonOffset(!1)}function $C(F,ee,de){const he=!0===ee.isScene?ee.overrideMaterial:null;for(let ce=0,nt=F.length;ce<nt;ce++){const xt=F[ce],Vt=xt.object,qt=xt.geometry,wn=null===he?xt.material:he,ln=xt.group;Vt.layers.test(de.layers)&&SG(Vt,ee,de,qt,wn,ln)}}function SG(F,ee,de,he,ce,nt){F.onBeforeRender(x,ee,de,he,ce,nt),F.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),ce.onBeforeRender(x,ee,de,he,F,nt),!0===ce.transparent&&ce.side===No&&!1===ce.forceSinglePass?(ce.side=go,ce.needsUpdate=!0,x.renderBufferDirect(de,ee,he,ce,F,nt),ce.side=$l,ce.needsUpdate=!0,x.renderBufferDirect(de,ee,he,ce,F,nt),ce.side=No):x.renderBufferDirect(de,ee,he,ce,F,nt),F.onAfterRender(x,ee,de,he,ce,nt)}function jC(F,ee,de){!0!==ee.isScene&&(ee=Je);const he=et.get(F),ce=y.state.lights,xt=ce.state.version,Vt=gt.getParameters(F,ce.state,y.state.shadowsArray,ee,de),qt=gt.getProgramCacheKey(Vt);let wn=he.programs;he.environment=F.isMeshStandardMaterial?ee.environment:null,he.fog=ee.fog,he.envMap=(F.isMeshStandardMaterial?ie:I).get(F.envMap||he.environment),void 0===wn&&(F.addEventListener("dispose",qe),wn=new Map,he.programs=wn);let ln=wn.get(qt);if(void 0!==ln){if(he.currentProgram===ln&&he.lightsStateVersion===xt)return EG(F,Vt),ln}else Vt.uniforms=gt.getUniforms(F),F.onBuild(de,Vt,x),F.onBeforeCompile(Vt,x),ln=gt.acquireProgram(Vt,qt),wn.set(qt,ln),he.uniforms=Vt.uniforms;const mn=he.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||!0===F.clipping)&&(mn.clippingPlanes=pn.uniform),EG(F,Vt),he.needsLights=function yme(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&!0===F.lights}(F),he.lightsStateVersion=xt,he.needsLights&&(mn.ambientLightColor.value=ce.state.ambient,mn.lightProbe.value=ce.state.probe,mn.directionalLights.value=ce.state.directional,mn.directionalLightShadows.value=ce.state.directionalShadow,mn.spotLights.value=ce.state.spot,mn.spotLightShadows.value=ce.state.spotShadow,mn.rectAreaLights.value=ce.state.rectArea,mn.ltc_1.value=ce.state.rectAreaLTC1,mn.ltc_2.value=ce.state.rectAreaLTC2,mn.pointLights.value=ce.state.point,mn.pointLightShadows.value=ce.state.pointShadow,mn.hemisphereLights.value=ce.state.hemi,mn.directionalShadowMap.value=ce.state.directionalShadowMap,mn.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,mn.spotShadowMap.value=ce.state.spotShadowMap,mn.spotLightMatrix.value=ce.state.spotLightMatrix,mn.spotLightMap.value=ce.state.spotLightMap,mn.pointShadowMap.value=ce.state.pointShadowMap,mn.pointShadowMatrix.value=ce.state.pointShadowMatrix),he.currentProgram=ln,he.uniformsList=null,ln}function CG(F){if(null===F.uniformsList){const ee=F.currentProgram.getUniforms();F.uniformsList=HS.seqWithValue(ee.seq,F.uniforms)}return F.uniformsList}function EG(F,ee){const de=et.get(F);de.outputColorSpace=ee.outputColorSpace,de.batching=ee.batching,de.instancing=ee.instancing,de.instancingColor=ee.instancingColor,de.skinning=ee.skinning,de.morphTargets=ee.morphTargets,de.morphNormals=ee.morphNormals,de.morphColors=ee.morphColors,de.morphTargetsCount=ee.morphTargetsCount,de.numClippingPlanes=ee.numClippingPlanes,de.numIntersection=ee.numClipIntersection,de.vertexAlphas=ee.vertexAlphas,de.vertexTangents=ee.vertexTangents,de.toneMapping=ee.toneMapping}to.setAnimationLoop(function jr(F){yi&&yi(F)}),typeof self<"u"&&to.setContext(self),this.setAnimationLoop=function(F){yi=F,Tn.setAnimationLoop(F),null===F?to.stop():to.start()},Tn.addEventListener("sessionstart",eo),Tn.addEventListener("sessionend",bi),this.render=function(F,ee){if(void 0===ee||!0===ee.isCamera){if(!0!==S){if(!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),null===ee.parent&&!0===ee.matrixWorldAutoUpdate&&ee.updateMatrixWorld(),!0===Tn.enabled&&!0===Tn.isPresenting&&(!0===Tn.cameraAutoUpdate&&Tn.updateCamera(ee),ee=Tn.getCamera()),!0===F.isScene&&F.onBeforeRender(x,F,ee,R),y=Ft.get(F,M.length),y.init(),M.push(y),Ne.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),le.setFromProjectionMatrix(Ne),Be=this.localClippingEnabled,me=pn.init(this.clippingPlanes,Be),b=at.get(F,v.length),b.init(),v.push(b),Jl(F,ee,0,x.sortObjects),b.finish(),!0===x.sortObjects&&b.sort(ne,re),this.info.render.frame++,!0===me&&pn.beginShadows(),Re.render(y.state.shadowsArray,F,ee),!0===me&&pn.endShadows(),!0===this.info.autoReset&&this.info.reset(),Kn.render(b,F),y.setupLights(x._useLegacyLights),ee.isArrayCamera){const he=ee.cameras;for(let ce=0,nt=he.length;ce<nt;ce++){const xt=he[ce];MG(b,F,xt,xt.viewport)}}else MG(b,F,ee);null!==R&&(L.updateMultisampleRenderTarget(R),L.updateRenderTargetMipmap(R)),!0===F.isScene&&F.onAfterRender(x,F,ee),vn.resetDefaultState(),V=-1,E=null,M.pop(),y=M.length>0?M[M.length-1]:null,v.pop(),b=v.length>0?v[v.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return P},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(F,ee,de){et.get(F.texture).__webglTexture=ee,et.get(F.depthTexture).__webglTexture=de;const he=et.get(F);he.__hasExternalTextures=!0,he.__hasExternalTextures&&(he.__autoAllocateDepthBuffer=void 0===de,he.__autoAllocateDepthBuffer||!0===xe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),he.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(F,ee){const de=et.get(F);de.__webglFramebuffer=ee,de.__useDefaultFramebuffer=void 0===ee},this.setRenderTarget=function(F,ee=0,de=0){R=F,P=ee,A=de;let he=!0,ce=null,nt=!1,xt=!1;if(F){const qt=et.get(F);void 0!==qt.__useDefaultFramebuffer?(be.bindFramebuffer(z.FRAMEBUFFER,null),he=!1):void 0===qt.__webglFramebuffer?L.setupRenderTarget(F):qt.__hasExternalTextures&&L.rebindTextures(F,et.get(F.texture).__webglTexture,et.get(F.depthTexture).__webglTexture);const wn=F.texture;(wn.isData3DTexture||wn.isDataArrayTexture||wn.isCompressedArrayTexture)&&(xt=!0);const ln=et.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(ce=Array.isArray(ln[ee])?ln[ee][de]:ln[ee],nt=!0):ce=Le.isWebGL2&&F.samples>0&&!1===L.useMultisampledRTT(F)?et.get(F).__webglMultisampledFramebuffer:Array.isArray(ln)?ln[de]:ln,k.copy(F.viewport),K.copy(F.scissor),ue=F.scissorTest}else k.copy(_e).multiplyScalar(J).floor(),K.copy(Se).multiplyScalar(J).floor(),ue=Oe;if(be.bindFramebuffer(z.FRAMEBUFFER,ce)&&Le.drawBuffers&&he&&be.drawBuffers(F,ce),be.viewport(k),be.scissor(K),be.setScissorTest(ue),nt){const qt=et.get(F.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+ee,qt.__webglTexture,de)}else if(xt){const qt=et.get(F.texture);z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,qt.__webglTexture,de||0,ee||0)}V=-1},this.readRenderTargetPixels=function(F,ee,de,he,ce,nt,xt){if(!F||!F.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Vt=et.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==xt&&(Vt=Vt[xt]),Vt){be.bindFramebuffer(z.FRAMEBUFFER,Vt);try{const qt=F.texture,wn=qt.format,ln=qt.type;if(wn!==Bo&&ut.convert(wn)!==z.getParameter(z.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const mn=ln===Wy&&(xe.has("EXT_color_buffer_half_float")||Le.isWebGL2&&xe.has("EXT_color_buffer_float"));if(!(ln===iu||ut.convert(ln)===z.getParameter(z.IMPLEMENTATION_COLOR_READ_TYPE)||ln===jl&&(Le.isWebGL2||xe.has("OES_texture_float")||xe.has("WEBGL_color_buffer_float"))||mn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");ee>=0&&ee<=F.width-he&&de>=0&&de<=F.height-ce&&z.readPixels(ee,de,he,ce,ut.convert(wn),ut.convert(ln),nt)}finally{const qt=null!==R?et.get(R).__webglFramebuffer:null;be.bindFramebuffer(z.FRAMEBUFFER,qt)}}},this.copyFramebufferToTexture=function(F,ee,de=0){const he=Math.pow(2,-de),ce=Math.floor(ee.image.width*he),nt=Math.floor(ee.image.height*he);L.setTexture2D(ee,0),z.copyTexSubImage2D(z.TEXTURE_2D,de,0,0,F.x,F.y,ce,nt),be.unbindTexture()},this.copyTextureToTexture=function(F,ee,de,he=0){const ce=ee.image.width,nt=ee.image.height,xt=ut.convert(de.format),Vt=ut.convert(de.type);L.setTexture2D(de,0),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,de.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,de.unpackAlignment),ee.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,he,F.x,F.y,ce,nt,xt,Vt,ee.image.data):ee.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,he,F.x,F.y,ee.mipmaps[0].width,ee.mipmaps[0].height,xt,ee.mipmaps[0].data):z.texSubImage2D(z.TEXTURE_2D,he,F.x,F.y,xt,Vt,ee.image),0===he&&de.generateMipmaps&&z.generateMipmap(z.TEXTURE_2D),be.unbindTexture()},this.copyTextureToTexture3D=function(F,ee,de,he,ce=0){if(x.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const nt=F.max.x-F.min.x+1,xt=F.max.y-F.min.y+1,Vt=F.max.z-F.min.z+1,qt=ut.convert(he.format),wn=ut.convert(he.type);let ln;if(he.isData3DTexture)L.setTexture3D(he,0),ln=z.TEXTURE_3D;else{if(!he.isDataArrayTexture&&!he.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");L.setTexture2DArray(he,0),ln=z.TEXTURE_2D_ARRAY}z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,he.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,he.unpackAlignment);const mn=z.getParameter(z.UNPACK_ROW_LENGTH),sr=z.getParameter(z.UNPACK_IMAGE_HEIGHT),$o=z.getParameter(z.UNPACK_SKIP_PIXELS),Xr=z.getParameter(z.UNPACK_SKIP_ROWS),td=z.getParameter(z.UNPACK_SKIP_IMAGES),Vi=de.isCompressedTexture?de.mipmaps[ce]:de.image;z.pixelStorei(z.UNPACK_ROW_LENGTH,Vi.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Vi.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,F.min.x),z.pixelStorei(z.UNPACK_SKIP_ROWS,F.min.y),z.pixelStorei(z.UNPACK_SKIP_IMAGES,F.min.z),de.isDataTexture||de.isData3DTexture?z.texSubImage3D(ln,ce,ee.x,ee.y,ee.z,nt,xt,Vt,qt,wn,Vi.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),z.compressedTexSubImage3D(ln,ce,ee.x,ee.y,ee.z,nt,xt,Vt,qt,Vi.data)):z.texSubImage3D(ln,ce,ee.x,ee.y,ee.z,nt,xt,Vt,qt,wn,Vi),z.pixelStorei(z.UNPACK_ROW_LENGTH,mn),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,sr),z.pixelStorei(z.UNPACK_SKIP_PIXELS,$o),z.pixelStorei(z.UNPACK_SKIP_ROWS,Xr),z.pixelStorei(z.UNPACK_SKIP_IMAGES,td),0===ce&&he.generateMipmaps&&z.generateMipmap(ln),be.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?L.setTextureCube(F,0):F.isData3DTexture?L.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?L.setTexture2DArray(F,0):L.setTexture2D(F,0),be.unbindTexture()},this.resetState=function(){P=0,A=0,R=null,be.reset(),vn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Xl}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===TR?"display-p3":"srgb",t.unpackColorSpace=ii.workingColorSpace===dS?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ci?Wc:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Wc?Ci:Hr}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class Xle extends t4{}).prototype.isWebGL1Renderer=!0;class GS extends Gr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class lP{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Uo()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return console.warn("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Uo()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Js=new N;class jh{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyMatrix4(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.applyNormalMatrix(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Js.fromBufferAttribute(this,t),Js.transformDirection(e),this.setXYZ(t,Js.x,Js.y,Js.z);return this}setX(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=fn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_o(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_o(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_o(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_o(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=fn(t,this.array),i=fn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=fn(t,this.array),i=fn(i,this.array),r=fn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=fn(t,this.array),i=fn(i,this.array),r=fn(r,this.array),s=fn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new gi(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const a4=new N,l4=new li,c4=new li,Kle=new N,d4=new Rt,qS=new N,dP=new xs,u4=new Rt,uP=new Qy;class h4 extends Yn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=mz,this.bindMatrix=new Rt,this.bindMatrixInverse=new Rt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new bs),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,qS),this.boundingBox.expandByPoint(qS)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new xs),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,qS),this.boundingSphere.expandByPoint(qS)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),dP.copy(this.boundingSphere),dP.applyMatrix4(r),!1!==e.ray.intersectsSphere(dP)&&(u4.copy(r).invert(),uP.copy(e.ray).applyMatrix4(u4),(null===this.boundingBox||!1!==uP.intersectsBox(this.boundingBox))&&this._computeIntersections(e,t,uP)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new li,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===mz?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;l4.fromBufferAttribute(r.attributes.skinIndex,e),c4.fromBufferAttribute(r.attributes.skinWeight,e),a4.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=c4.getComponent(s);if(0!==o){const a=l4.getComponent(s);d4.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Kle.copy(a4).applyMatrix4(d4),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class hP extends Gr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class cg extends sl{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Bi,u=Bi,h,p){super(null,o,a,l,c,u,r,s,h,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const f4=new Rt,Zle=new Rt;class YS{constructor(e=[],t=[]){this.uuid=Uo(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Rt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Rt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++)f4.multiplyMatrices(e[s]?e[s].matrixWorld:Zle,t[s]),f4.toArray(i,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new YS(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new cg(t,e,e,Bo,jl);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new hP),this.bones.push(o),this.boneInverses.push((new Rt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(i[r].toArray());return e}}class dg extends gi{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ug=new Rt,p4=new Rt,KS=[],m4=new bs,Qle=new Rt,sb=new Yn,ob=new xs;class g4 extends Yn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new dg(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Qle)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new bs),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ug),m4.copy(e.boundingBox).applyMatrix4(ug),this.boundingBox.union(m4)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new xs),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,ug),ob.copy(e.boundingSphere).applyMatrix4(ug),this.boundingSphere.union(ob)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(sb.geometry=this.geometry,sb.material=this.material,void 0!==sb.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),ob.copy(this.boundingSphere),ob.applyMatrix4(i),!1!==e.ray.intersectsSphere(ob)))for(let s=0;s<r;s++){this.getMatrixAt(s,ug),p4.multiplyMatrices(i,ug),sb.matrixWorld=p4,sb.raycast(e,KS);for(let o=0,a=KS.length;o<a;o++){const l=KS[o];l.instanceId=s,l.object=this,t.push(l)}KS.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new dg(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class $r extends vo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ge(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const y4=new N,b4=new N,x4=new Rt,mP=new Qy,JS=new xs;class qh extends Gr{constructor(e=new an,t=new $r){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)y4.fromBufferAttribute(t,r-1),b4.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=y4.distanceTo(b4);e.setAttribute("lineDistance",new rt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),JS.copy(i.boundingSphere),JS.applyMatrix4(r),JS.radius+=s,!1===e.ray.intersectsSphere(JS))return;x4.copy(r).invert(),mP.copy(e.ray).applyMatrix4(x4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new N,u=new N,h=new N,p=new N,m=this.isLineSegments?2:1,g=i.index,y=i.attributes.position;if(null!==g)for(let x=Math.max(0,o.start),S=Math.min(g.count,o.start+o.count)-1;x<S;x+=m){const P=g.getX(x),A=g.getX(x+1);if(c.fromBufferAttribute(y,P),u.fromBufferAttribute(y,A),mP.distanceSqToSegment(c,u,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const V=e.ray.origin.distanceTo(p);V<e.near||V>e.far||t.push({distance:V,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),S=Math.min(y.count,o.start+o.count)-1;x<S;x+=m){if(c.fromBufferAttribute(y,x),u.fromBufferAttribute(y,x+1),mP.distanceSqToSegment(c,u,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(p);A<e.near||A>e.far||t.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const w4=new N,M4=new N;class fg extends qh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)w4.fromBufferAttribute(t,r),M4.fromBufferAttribute(t,r+1),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+w4.distanceTo(M4);e.setAttribute("lineDistance",new rt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class S4 extends qh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Yh extends vo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const C4=new Rt,gP=new Qy,eC=new xs,tC=new N;class lb extends Gr{constructor(e=new an,t=new Yh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),eC.copy(i.boundingSphere),eC.applyMatrix4(r),eC.radius+=s,!1===e.ray.intersectsSphere(eC))return;C4.copy(r).invert(),gP.copy(e.ray).applyMatrix4(C4);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,h=i.attributes.position;if(null!==c)for(let g=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);g<b;g++){const y=c.getX(g);tC.fromBufferAttribute(h,y),E4(tC,y,l,r,e,t,this)}else for(let g=Math.max(0,o.start),b=Math.min(h.count,o.start+o.count);g<b;g++)tC.fromBufferAttribute(h,g),E4(tC,g,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function E4(n,e,t,i,r,s,o){const a=gP.distanceSqToPoint(n);if(a<t){const l=new N;gP.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Yl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;o=t||e*i[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,i[r]===o)return r/(s-1);const u=i[r];return(r+(o-u)/(i[r+1]-u))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ce:new N);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new N,r=[],s=[],o=[],a=new N,l=new Rt;for(let m=0;m<=e;m++)r[m]=this.getTangentAt(m/e,new N);s[0]=new N,o[0]=new N;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),h<=c&&(c=h,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Yi(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(!0===t){let m=Math.acos(Yi(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let g=1;g<=e;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class _P extends Yl{constructor(e=0,t=0,i=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new Ce,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*h+this.aX,c=p*h+m*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function vP(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+h)+(l-a)/h;p*=u,m*=u,r(o,a,p,m)},calc:function(s){const o=s*s;return n+e*s+t*o+i*(o*s)}}}const nC=new N,yP=new vP,bP=new vP,xP=new vP;function A4(n,e,t,i,r){const s=.5*(i-e),o=.5*(r-t),a=n*n;return(2*t-2*i+s+o)*(n*a)+(-3*t+3*i-2*s-o)*a+s*n+t}function cb(n,e,t,i){return function lce(n,e){const t=1-n;return t*t*e}(n,e)+function cce(n,e){return 2*(1-n)*n*e}(n,t)+function dce(n,e){return n*n*e}(n,i)}function db(n,e,t,i,r){return function uce(n,e){const t=1-n;return t*t*t*e}(n,e)+function hce(n,e){const t=1-n;return 3*t*t*n*e}(n,t)+function fce(n,e){return 3*(1-n)*n*n*e}(n,i)+function pce(n,e){return n*n*n*e}(n,r)}class T4 extends Yl{constructor(e=new Ce,t=new Ce,i=new Ce,r=new Ce){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ce){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(db(e,r.x,s.x,o.x,a.x),db(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class D4 extends Yl{constructor(e=new Ce,t=new Ce){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ce){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ce){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class I4 extends Yl{constructor(e=new Ce,t=new Ce,i=new Ce){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ce){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(cb(e,r.x,s.x,o.x),cb(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class P4 extends Yl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ce){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(A4(a,l.x,c.x,u.x,h.x),A4(a,l.y,c.y,u.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new Ce).fromArray(r))}return this}}var iC=Object.freeze({__proto__:null,ArcCurve:class oce extends _P{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class ace extends Yl{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new N){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(nC.subVectors(r[0],r[1]).add(r[0]),c=nC);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(nC.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=nC),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),b=Math.pow(h.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(u),m);b<1e-4&&(b=1),g<1e-4&&(g=b),y<1e-4&&(y=b),yP.initNonuniformCatmullRom(c.x,h.x,p.x,u.x,g,b,y),bP.initNonuniformCatmullRom(c.y,h.y,p.y,u.y,g,b,y),xP.initNonuniformCatmullRom(c.z,h.z,p.z,u.z,g,b,y)}else"catmullrom"===this.curveType&&(yP.initCatmullRom(c.x,h.x,p.x,u.x,this.tension),bP.initCatmullRom(c.y,h.y,p.y,u.y,this.tension),xP.initCatmullRom(c.z,h.z,p.z,u.z,this.tension));return i.set(yP.calc(l),bP.calc(l),xP.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push((new N).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:T4,CubicBezierCurve3:class mce extends Yl{constructor(e=new N,t=new N,i=new N,r=new N){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(db(e,r.x,s.x,o.x,a.x),db(e,r.y,s.y,o.y,a.y),db(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:_P,LineCurve:D4,LineCurve3:class gce extends Yl{constructor(e=new N,t=new N){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new N){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new N){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:I4,QuadraticBezierCurve3:class R4 extends Yl{constructor(e=new N,t=new N,i=new N){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new N){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(cb(e,r.x,s.x,o.x),cb(e,r.y,s.y,o.y),cb(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:P4});class _ce extends Yl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);return e.equals(t)||this.curves.push(new iC[!0===e.isVector2?"LineCurve":"LineCurve3"](t,e)),this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push((new iC[r.type]).fromJSON(r))}return this}}class rC extends _ce{constructor(e){super(),this.type="Path",this.currentPoint=new Ce,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new D4(this.currentPoint.clone(),new Ce(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new I4(this.currentPoint.clone(),new Ce(e,t),new Ce(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new T4(this.currentPoint.clone(),new Ce(e,t),new Ce(i,r),new Ce(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new P4(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new _P(e,t,i,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sC extends an{constructor(e=[new Ce(0,-.5),new Ce(.5,0),new Ce(0,.5)],t=12,i=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Yi(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],u=1/t,h=new N,p=new Ce,m=new N,g=new N,b=new N;let y=0,v=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:y=e[M+1].x-e[M].x,v=e[M+1].y-e[M].y,m.x=1*v,m.y=-y,m.z=0*v,b.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:y=e[M+1].x-e[M].x,v=e[M+1].y-e[M].y,m.x=1*v,m.y=-y,m.z=0*v,g.copy(m),m.x+=b.x,m.y+=b.y,m.z+=b.z,m.normalize(),l.push(m.x,m.y,m.z),b.copy(g)}for(let M=0;M<=t;M++){const x=i+M*u*r,S=Math.sin(x),P=Math.cos(x);for(let A=0;A<=e.length-1;A++)h.x=e[A].x*S,h.y=e[A].y,h.z=e[A].x*P,o.push(h.x,h.y,h.z),p.x=M/t,p.y=A/(e.length-1),a.push(p.x,p.y),c.push(l[3*A+0]*S,l[3*A+1],l[3*A+0]*P)}for(let M=0;M<t;M++)for(let x=0;x<e.length-1;x++){const S=x+M*e.length,A=S+e.length,R=S+e.length+1,V=S+1;s.push(S,A,V),s.push(R,V,A)}this.setIndex(s),this.setAttribute("position",new rt(o,3)),this.setAttribute("uv",new rt(a,2)),this.setAttribute("normal",new rt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sC(e.points,e.segments,e.phiStart,e.phiLength)}}class oC extends sC{constructor(e=1,t=1,i=4,r=8){const s=new rC;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new oC(e.radius,e.length,e.capSegments,e.radialSegments)}}class pg extends an{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],p=[],m=[];let g=0;const b=[],y=i/2;let v=0;function x(S){const P=g,A=new Ce,R=new N;let V=0;const E=!0===S?e:t,k=!0===S?1:-1;for(let ue=1;ue<=r;ue++)h.push(0,y*k,0),p.push(0,k,0),m.push(.5,.5),g++;const K=g;for(let ue=0;ue<=r;ue++){const G=ue/r*l+a,te=Math.cos(G),W=Math.sin(G);R.x=E*W,R.y=y*k,R.z=E*te,h.push(R.x,R.y,R.z),p.push(0,k,0),A.x=.5*te+.5,A.y=.5*W*k+.5,m.push(A.x,A.y),g++}for(let ue=0;ue<r;ue++){const we=P+ue,G=K+ue;!0===S?u.push(G,G+1,we):u.push(G+1,G,we),V+=3}c.addGroup(v,V,!0===S?1:2),v+=V}(function M(){const S=new N,P=new N;let A=0;const R=(t-e)/i;for(let V=0;V<=s;V++){const E=[],k=V/s,K=k*(t-e)+e;for(let ue=0;ue<=r;ue++){const we=ue/r,G=we*l+a,te=Math.sin(G),W=Math.cos(G);P.x=K*te,P.y=-k*i+y,P.z=K*W,h.push(P.x,P.y,P.z),S.set(te,R,W).normalize(),p.push(S.x,S.y,S.z),m.push(we,1-k),E.push(g++)}b.push(E)}for(let V=0;V<r;V++)for(let E=0;E<s;E++){const K=b[E+1][V],ue=b[E+1][V+1],we=b[E][V+1];u.push(b[E][V],K,we),u.push(K,ue,we),A+=6}c.addGroup(v,A,0),v+=A})(),!1===o&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new rt(h,3)),this.setAttribute("normal",new rt(p,3)),this.setAttribute("uv",new rt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class aC extends pg{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new aC(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pb extends an{constructor(e=1,t=32,i=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new N,p=new N,m=[],g=[],b=[],y=[];for(let v=0;v<=i;v++){const M=[],x=v/i;let S=0;0===v&&0===o?S=.5/t:v===i&&l===Math.PI&&(S=-.5/t);for(let P=0;P<=t;P++){const A=P/t;h.x=-e*Math.cos(r+A*s)*Math.sin(o+x*a),h.y=e*Math.cos(o+x*a),h.z=e*Math.sin(r+A*s)*Math.sin(o+x*a),g.push(h.x,h.y,h.z),p.copy(h).normalize(),b.push(p.x,p.y,p.z),y.push(A+S,1-x),M.push(c++)}u.push(M)}for(let v=0;v<i;v++)for(let M=0;M<t;M++){const S=u[v][M],P=u[v+1][M],A=u[v+1][M+1];(0!==v||o>0)&&m.push(u[v][M+1],S,A),(v!==i-1||l<Math.PI)&&m.push(S,P,A)}this.setIndex(m),this.setAttribute("position",new rt(g,3)),this.setAttribute("normal",new rt(b,3)),this.setAttribute("uv",new rt(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pb(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _g extends vo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Kl extends _g{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ce(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Yi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ge(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ge(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class mC extends vo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ge(16777215),this.specular=new Ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Lh,this.normalScale=new Ce(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=sS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function Qh(n,e,t){return!n||!t&&n.constructor===e?n:"number"==typeof e.BYTES_PER_ELEMENT?new e(n):Array.prototype.slice.call(n)}function H4(n){const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(function e(r,s){return n[r]-n[s]}),i}function LP(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function FP(n,e,t,i){let r=1,s=n[0];for(;void 0!==s&&void 0===s[i];)s=n[r++];if(void 0===s)return;let o=s[i];if(void 0!==o)if(Array.isArray(o))do{o=s[i],void 0!==o&&(e.push(s.time),t.push.apply(t,o)),s=n[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[i],void 0!==o&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++]}while(void 0!==s);else do{o=s[i],void 0!==o&&(e.push(s.time),t.push(o)),s=n[r++]}while(void 0!==s)}class mb{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(void 0===r){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0}}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Yce extends mb{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-i;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*i-t;break;case 2402:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(i-t),u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(i-t)/(r-t),b=g*g,y=b*g,v=-p*y+2*p*b-p*g,M=(1+p)*y+(-1.5-2*p)*b+(-.5+p)*g+1,x=(-1-m)*y+(1.5+m)*b+.5*g,S=m*y-m*b;for(let P=0;P!==a;++P)s[P]=v*o[u+P]+M*o[c+P]+x*o[l+P]+S*o[h+P];return s}}class G4 extends mb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),h=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*u;return s}}class Kce extends mb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zl{constructor(e,t,i,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qh(t,this.TimeBufferType),this.values=Qh(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Qh(e.times,Array),values:Qh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Kce(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new G4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Yce(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case $y:t=this.InterpolantFactoryMethodDiscrete;break;case Im:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(i);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $y;case this.InterpolantFactoryMethodLinear:return Im;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;-1!==o&&i[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&function z4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const h=a*i,p=h-i,m=h+i;for(let g=0;g!==i;++g){const b=t[h+g];if(b!==t[p+g]||b!==t[m+g]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Zl.prototype.TimeBufferType=Float32Array,Zl.prototype.ValueBufferType=Float32Array,Zl.prototype.DefaultInterpolation=Im;class vg extends Zl{}vg.prototype.ValueTypeName="bool",vg.prototype.ValueBufferType=Array,vg.prototype.DefaultInterpolation=$y,vg.prototype.InterpolantFactoryMethodLinear=void 0,vg.prototype.InterpolantFactoryMethodSmooth=void 0;class W4 extends Zl{}W4.prototype.ValueTypeName="color";class yg extends Zl{}yg.prototype.ValueTypeName="number";class Zce extends mb{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Zs.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Jh extends Zl{InterpolantFactoryMethodLinear(e){return new Zce(this.times,this.values,this.getValueSize(),e)}}Jh.prototype.ValueTypeName="quaternion",Jh.prototype.DefaultInterpolation=Im,Jh.prototype.InterpolantFactoryMethodSmooth=void 0;class bg extends Zl{}bg.prototype.ValueTypeName="string",bg.prototype.ValueBufferType=Array,bg.prototype.DefaultInterpolation=$y,bg.prototype.InterpolantFactoryMethodLinear=void 0,bg.prototype.InterpolantFactoryMethodSmooth=void 0;class xg extends Zl{}xg.prototype.ValueTypeName="vector";class gb{constructor(e,t=-1,i,r=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Uo(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(Jce(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Zl.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=H4(l);l=LP(l,1,u),c=LP(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new yg(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let p=r[h];p||(r[h]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,p,m,g,b){if(0!==m.length){const y=[],v=[];FP(m,y,v,g),0!==y.length&&b.push(new h(p,y,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(p&&0!==p.length)if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let b=0;b<p[g].morphTargets.length;b++)m[p[g].morphTargets[b]]=-1;for(const b in m){const y=[],v=[];for(let M=0;M!==p[g].morphTargets.length;++M){const x=p[g];y.push(x.time),v.push(x.morphTarget===b?1:0)}r.push(new yg(".morphTargetInfluence["+b+"]",y,v))}l=m.length*o}else{const m=".bones["+t[h].name+"]";i(xg,m+".position",p,"pos",r),i(Jh,m+".quaternion",p,"rot",r),i(xg,m+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let t=0;for(let i=0,r=this.tracks.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Jce(n){if(void 0===n.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Qce(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return yg;case"vector":case"vector2":case"vector3":case"vector4":return xg;case"color":return W4;case"quaternion":return Jh;case"bool":case"boolean":return vg;case"string":return bg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}(n.type);if(void 0===n.times){const t=[],i=[];FP(n.keys,t,i,"value"),n.times=t,n.values=i}return void 0!==e.parse?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const hu={enabled:!1,files:{},add:function(n,e){!1!==this.enabled&&(this.files[n]=e)},get:function(n){if(!1!==this.enabled)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class $4{constructor(e,t,i){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return-1!==h&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const j4=new $4;let ef=(()=>{class n{constructor(t){this.manager=void 0!==t?t:j4,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const r=this;return new Promise(function(s,o){r.load(t,s,i,o)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}return n.DEFAULT_MATERIAL_NAME="__DEFAULT",n})();const Qc={};class ede extends Error{constructor(e,t){super(e),this.response=t}}class Ma extends ef{constructor(e){super(e)}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=hu.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Qc[e])return void Qc[e].push({onLoad:t,onProgress:i,onError:r});Qc[e]=[],Qc[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=Qc[e],h=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,g=0!==m;let b=0;const y=new ReadableStream({start(v){!function M(){h.read().then(({done:x,value:S})=>{if(x)v.close();else{b+=S.byteLength;const P=new ProgressEvent("progress",{lengthComputable:g,loaded:b,total:m});for(let A=0,R=u.length;A<R;A++){const V=u[A];V.onProgress&&V.onProgress(P)}v.enqueue(S),M()}})}()}});return new Response(y)}throw new ede(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{hu.add(e,c);const u=Qc[e];delete Qc[e];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=Qc[e];if(void 0===u)throw this.manager.itemError(e),c;delete Qc[e];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class gC extends ef{constructor(e){super(e)}load(e,t,i,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hu.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qy("img");function l(){u(),hu.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(h){u(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class _C extends ef{constructor(e){super(e)}load(e,t,i,r){const s=new sl,o=new gC(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},i,r),s}}class vC extends Gr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ge(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const NP=new Rt,X4=new N,q4=new N;class BP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ce(512,512),this.map=null,this.mapPass=null,this.matrix=new Rt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new NS,this._frameExtents=new Ce(1,1),this._viewportCount=1,this._viewports=[new li(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;X4.setFromMatrixPosition(e.matrixWorld),t.position.copy(X4),q4.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(q4),t.updateMatrixWorld(),NP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(NP),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(NP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nde extends BP{constructor(){super(new gr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Lm*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Y4 extends vC{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gr.DEFAULT_UP),this.updateMatrix(),this.target=new Gr,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new nde}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const K4=new Rt,_b=new N,UP=new N;class ide extends BP{constructor(){super(new gr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ce(4,2),this._viewportCount=6,this._viewports=[new li(2,1,1,1),new li(0,1,1,1),new li(3,1,1,1),new li(1,1,1,1),new li(3,0,1,1),new li(1,0,1,1)],this._cubeDirections=[new N(1,0,0),new N(-1,0,0),new N(0,0,1),new N(0,0,-1),new N(0,1,0),new N(0,-1,0)],this._cubeUps=[new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,1,0),new N(0,0,1),new N(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),_b.setFromMatrixPosition(e.matrixWorld),i.position.copy(_b),UP.copy(i.position),UP.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(UP),i.updateMatrixWorld(),r.makeTranslation(-_b.x,-_b.y,-_b.z),K4.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(K4)}}class Z4 extends vC{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new ide}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rde extends BP{constructor(){super(new US(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Q4 extends vC{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gr.DEFAULT_UP),this.updateMatrix(),this.target=new Gr,this.shadow=new rde}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class VP extends vC{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class fu{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ude extends ef{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=hu.get(e);if(void 0!==o)return s.manager.itemStart(e),o.then?void o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)}):(setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return hu.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),hu.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});hu.add(e,l),s.manager.itemStart(e)}}const HP="\\[\\]\\.:\\/",gde=new RegExp("["+HP+"]","g"),GP="[^"+HP+"]",_de="[^"+HP.replace("\\.","")+"]",wde=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",GP)+/(WCOD+)?/.source.replace("WCOD",_de)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",GP)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",GP)+"$"),Mde=["material","materials","bones","map"];class Sde{constructor(e,t,i){const r=i||_i.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}let _i=(()=>{class n{constructor(t,i,r){this.path=i,this.parsedPath=r||n.parseTrackName(i),this.node=n.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,r){return t&&t.isAnimationObjectGroup?new n.Composite(t,i,r):new n(t,i,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(gde,"")}static parseTrackName(t){const i=wde.exec(t);if(null===i)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Mde.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,i){if(void 0===i||""===i||"."===i||-1===i||i===t.name||i===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(i);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===i||l.uuid===i)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[i++]=r[s]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,r=i.objectName,s=i.propertyName;let o=i.propertyIndex;if(t||(t=n.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=i.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let h=0;h<t.length;h++)if(t[h].name===u){u=h;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==u){if(void 0===t[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[u]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return n.Composite=Sde,n})();_i.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},_i.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},_i.prototype.GetterByBindingType=[_i.prototype._getValue_direct,_i.prototype._getValue_array,_i.prototype._getValue_arrayElement,_i.prototype._getValue_toArray],_i.prototype.SetterByBindingTypeAndVersioning=[[_i.prototype._setValue_direct,_i.prototype._setValue_direct_setNeedsUpdate,_i.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_array,_i.prototype._setValue_array_setNeedsUpdate,_i.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_arrayElement,_i.prototype._setValue_arrayElement_setNeedsUpdate,_i.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_i.prototype._setValue_fromArray,_i.prototype._setValue_fromArray_setNeedsUpdate,_i.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"160"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="160");const Dde=/^[og]\s*(.+)?/,Ide=/^mtllib /,Rde=/^usemtl /,Pde=/^usemap /,v5=/\s+/,y5=new N,XP=new N,b5=new N,x5=new N,Sa=new N,EC=new Ge;function kde(){const n={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},i&&i.name&&"function"==typeof i.clone){const r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){const i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){const i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[i+0],r[i+1],r[i+2])},addFaceNormal:function(e,t,i){const r=this.vertices,s=this.object.geometry.normals;y5.fromArray(r,e),XP.fromArray(r,t),b5.fromArray(r,i),Sa.subVectors(b5,XP),x5.subVectors(y5,XP),Sa.cross(x5),Sa.normalize(),s.push(Sa.x,Sa.y,Sa.z),s.push(Sa.x,Sa.y,Sa.z),s.push(Sa.x,Sa.y,Sa.z)},addColor:function(e,t,i){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[i]&&s.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[i+0],r[i+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,s,o,a,l,c){const u=this.vertices.length;let h=this.parseVertexIndex(e,u),p=this.parseVertexIndex(t,u),m=this.parseVertexIndex(i,u);if(this.addVertex(h,p,m),this.addColor(h,p,m),void 0!==a&&""!==a){const g=this.normals.length;h=this.parseNormalIndex(a,g),p=this.parseNormalIndex(l,g),m=this.parseNormalIndex(c,g),this.addNormal(h,p,m)}else this.addFaceNormal(h,p,m);if(void 0!==r&&""!==r){const g=this.uvs.length;h=this.parseUVIndex(r,g),p=this.parseUVIndex(s,g),m=this.parseUVIndex(o,g),this.addUV(h,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let i=0,r=e.length;i<r;i++){const s=this.parseVertexIndex(e[i],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const i=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],i));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return n.startObject("",!1),n}class Ode extends ef{constructor(e){super(e),this.materials=null}load(e,t,i,r){const s=this,o=new Ma(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new kde;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const i=e.split("\n");let r=[];for(let a=0,l=i.length;a<l;a++){const c=i[a].trimStart();if(0===c.length)continue;const u=c.charAt(0);if("#"!==u)if("v"===u){const h=c.split(v5);switch(h[0]){case"v":t.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(EC.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),t.colors.push(EC.r,EC.g,EC.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":t.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===u){const p=c.slice(1).trim().split(v5),m=[];for(let b=0,y=p.length;b<y;b++){const v=p[b];if(v.length>0){const M=v.split("/");m.push(M)}}const g=m[0];for(let b=1,y=m.length-1;b<y;b++){const v=m[b],M=m[b+1];t.addFace(g[0],v[0],M[0],g[1],v[1],M[1],g[2],v[2],M[2])}}else if("l"===u){const h=c.substring(1).trim().split(" ");let p=[];const m=[];if(-1===c.indexOf("/"))p=h;else for(let g=0,b=h.length;g<b;g++){const y=h[g].split("/");""!==y[0]&&p.push(y[0]),""!==y[1]&&m.push(y[1])}t.addLineGeometry(p,m)}else if("p"===u){const p=c.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=Dde.exec(c))){const h=(" "+r[0].slice(1).trim()).slice(1);t.startObject(h)}else if(Rde.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(Ide.test(c))t.materialLibraries.push(c.substring(7).trim());else if(Pde.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const h=t.object.currentMaterial();h&&(h.smooth=t.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new wa;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],u=c.geometry,h=c.materials,p="Line"===u.type,m="Points"===u.type;let g=!1;if(0===u.vertices.length)continue;const b=new an;b.setAttribute("position",new rt(u.vertices,3)),u.normals.length>0&&b.setAttribute("normal",new rt(u.normals,3)),u.colors.length>0&&(g=!0,b.setAttribute("color",new rt(u.colors,3))),!0===u.hasUVIndices&&b.setAttribute("uv",new rt(u.uvs,2));const y=[];for(let M=0,x=h.length;M<x;M++){const S=h[M],P=S.name+"_"+S.smooth+"_"+g;let A=t.materials[P];if(null!==this.materials)if(A=this.materials.create(S.name),!p||!A||A instanceof $r){if(m&&A&&!(A instanceof Yh)){const R=new Yh({size:10,sizeAttenuation:!1});vo.prototype.copy.call(R,A),R.color.copy(A.color),R.map=A.map,A=R}}else{const R=new $r;vo.prototype.copy.call(R,A),R.color.copy(A.color),A=R}void 0===A&&(A=p?new $r:m?new Yh({size:1,sizeAttenuation:!1}):new mC,A.name=S.name,A.flatShading=!S.smooth,A.vertexColors=g,t.materials[P]=A),y.push(A)}let v;if(y.length>1){for(let M=0,x=h.length;M<x;M++){const S=h[M];b.addGroup(S.groupStart,S.groupCount,M)}v=p?new fg(b,y):m?new lb(b,y):new Yn(b,y)}else v=p?new fg(b,y[0]):m?new lb(b,y[0]):new Yn(b,y[0]);v.name=c.name,s.add(v)}else if(t.vertices.length>0){const a=new Yh({size:1,sizeAttenuation:!1}),l=new an;l.setAttribute("position",new rt(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(l.setAttribute("color",new rt(t.colors,3)),a.vertexColors=!0);const c=new lb(l,a);s.add(c)}return s}}class Lde extends ef{constructor(e){super(e)}load(e,t,i,r){const s=this,o=""===this.path?fu.extractUrlBase(e):this.path,a=new Ma(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const i=e.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<i.length;l++){let c=i[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const u=c.indexOf(" ");let h=u>=0?c.substring(0,u):c;h=h.toLowerCase();let p=u>=0?c.substring(u+1):"";if(p=p.trim(),"newmtl"===h)r={name:p},o[p]=r;else if("ka"===h||"kd"===h||"ks"===h||"ke"===h){const m=p.split(s,3);r[h]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else r[h]=p}const a=new Fde(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class Fde{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:$l,this.wrap=void 0!==this.options.wrap?this.options.wrap:Hc}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const i in e){const r=e[i],s={};t[i]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function o(a,l){if(r[a])return;const c=t.getTextureParams(l,r),u=t.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(t.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=t.wrap,u.wrapT=t.wrap,("map"===a||"emissiveMap"===a)&&(u.colorSpace=Ci),r[a]=u}for(const a in i){const l=i[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new Ge).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new Ge).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new Ge).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[e]=new mC(r),this.materials[e]}getTextureParams(e,t){const i={scale:new Ce(1,1),offset:new Ce(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(i.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(i.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),i.url=r.join(" ").trim(),i}loadTexture(e,t,i,r,s){const o=void 0!==this.manager?this.manager:j4;let a=o.getHandler(e);null===a&&(a=new _C(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,i,r,s);return void 0!==t&&(l.mapping=t),l}}function w5(n,e){if(e===Kie)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===AR||e===Yz){let t=n.getIndex();if(null===t){const o=[],a=n.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n;for(let l=0;l<a.count;l++)o.push(l);n.setIndex(o),t=n.getIndex()}const i=t.count-2,r=[];if(e===AR)for(let o=1;o<=i;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2==0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class Bde extends ef{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new Gde(t)}),this.register(function(t){return new Qde(t)}),this.register(function(t){return new Jde(t)}),this.register(function(t){return new eue(t)}),this.register(function(t){return new $de(t)}),this.register(function(t){return new jde(t)}),this.register(function(t){return new Xde(t)}),this.register(function(t){return new qde(t)}),this.register(function(t){return new Hde(t)}),this.register(function(t){return new Yde(t)}),this.register(function(t){return new Wde(t)}),this.register(function(t){return new Zde(t)}),this.register(function(t){return new Kde(t)}),this.register(function(t){return new Vde(t)}),this.register(function(t){return new tue(t)}),this.register(function(t){return new nue(t)})}load(e,t,i,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=fu.extractUrlBase(e);o=fu.resolveURL(c,this.path)}else o=fu.extractUrlBase(e);this.manager.itemStart(e);const a=function(c){r?r(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new Ma(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===M5){try{o[Nn.KHR_BINARY_GLTF]=new iue(e)}catch(h){return void(r&&r(h))}s=JSON.parse(o[Nn.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new gue(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],p=s.extensionsRequired||[];switch(h){case Nn.KHR_MATERIALS_UNLIT:o[h]=new zde;break;case Nn.KHR_DRACO_MESH_COMPRESSION:o[h]=new rue(s,this.dracoLoader);break;case Nn.KHR_TEXTURE_TRANSFORM:o[h]=new sue;break;case Nn.KHR_MESH_QUANTIZATION:o[h]=new oue;break;default:p.indexOf(h)>=0&&void 0===a[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Ude(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const Nn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Vde{constructor(e){this.parser=e,this.name=Nn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let c;const u=new Ge(16777215);void 0!==l.color&&u.setRGB(l.color[0],l.color[1],l.color[2],Hr);const h=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new Q4(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Z4(u),c.distance=h;break;case"spot":c=new Y4(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,gu(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(c),t.cache.add(i,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return i._getNodeRef(t.cache,a,l)})}}class zde{constructor(){this.name=Nn.KHR_MATERIALS_UNLIT}getMaterialType(){return Dr}extendParams(e,t,i){const r=[];e.color=new Ge(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],Hr),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(i.assignTexture(e,"map",s.baseColorTexture,Ci))}return Promise.all(r)}}class Hde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class Gde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Ce(a,a)}return Promise.all(s)}}class Wde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class $de{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ge(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],Hr)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Ci)),void 0!==o.sheenRoughnessTexture&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class jde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Xde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new Ge).setRGB(a[0],a[1],a[2],Hr),Promise.all(s)}}class qde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Yde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new Ge).setRGB(a[0],a[1],a[2],Hr),void 0!==o.specularColorTexture&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Ci)),Promise.all(s)}}class Kde{constructor(e){this.parser=e,this.name=Nn.EXT_MATERIALS_BUMP}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(i.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Zde{constructor(e){this.parser=e,this.name=Nn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return i.extensions&&i.extensions[this.name]?Kl:null}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Qde{constructor(e){this.parser=e,this.name=Nn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class Jde{constructor(e){this.parser=e,this.name=Nn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class eue{constructor(e){this.parser=e,this.name=Nn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=r.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class tue{constructor(e){this.name=Nn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,h=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(m),u,h,p,r.mode,r.filter),m})})}return null}}class nue{constructor(e){this.name=Nn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||void 0===i.mesh)return null;const r=t.meshes[i.mesh];for(const c of r.primitives)if(c.mode!==Ca.TRIANGLES&&c.mode!==Ca.TRIANGLE_STRIP&&c.mode!==Ca.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=i.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(e)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of h){const b=new Rt,y=new N,v=new Zs,M=new N(1,1,1),x=new g4(g.geometry,g.material,p);for(let S=0;S<p;S++)l.TRANSLATION&&y.fromBufferAttribute(l.TRANSLATION,S),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,S),l.SCALE&&M.fromBufferAttribute(l.SCALE,S),x.setMatrixAt(S,b.compose(y,v,M));for(const S in l)if("_COLOR_0"===S){const P=l[S];x.instanceColor=new dg(P.array,P.itemSize,P.normalized)}else"TRANSLATION"!==S&&"ROTATION"!==S&&"SCALE"!==S&&g.geometry.setAttribute(S,l[S]);Gr.prototype.copy.call(x,g),this.parser.assignFinalMaterial(x),m.push(x)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const M5="glTF";class iue{constructor(e){this.name=Nn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==M5)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(e,12+o,a);this.content=i.decode(c)}else if(5130562===l){const c=12+o;this.body=e.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class rue{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Nn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=ZP[u]||u.toLowerCase();a[h]=o[u]}for(const u in e.attributes){const h=ZP[u]||u.toLowerCase();if(void 0!==o[u]){const p=i.accessors[e.attributes[u]];c[h]=wg[p.componentType].name,l[h]=!0===p.normalized}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(h,p){r.decodeDracoFile(u,function(m){for(const g in m.attributes){const y=l[g];void 0!==y&&(m.attributes[g].normalized=y)}h(m)},a,c,Hr,p)})})}}class sue{constructor(){this.name=Nn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class oue{constructor(){this.name=Nn.KHR_MESH_QUANTIZATION}}class C5 extends mb{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let o=0;o!==r;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-t,h=(i-t)/u,p=h*h,m=p*h,g=e*c,b=g-c,y=-2*m+3*p,v=m-p,M=1-y,x=v-p+h;for(let S=0;S!==a;S++)s[S]=M*o[b+S+a]+x*(o[b+S+l]*u)+y*o[g+S+a]+v*(o[g+S]*u);return s}}const aue=new Zs;class lue extends C5{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return aue.fromArray(s).normalize().toArray(s),s}}const Ca={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},wg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},E5={9728:Bi,9729:qi,9984:lS,9985:vR,9986:Gy,9987:Gc},A5={33071:ir,33648:Hy,10497:Hc},KP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ZP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},mu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},cue={CUBICSPLINE:void 0,LINEAR:Im,STEP:$y};function lf(n,e,t){for(const i in t.extensions)void 0===n[i]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function gu(n,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function hue(n,e){if(n.updateMorphTargets(),void 0!==e.weights)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function fue(n){let e;const t=n.extensions&&n.extensions[Nn.KHR_DRACO_MESH_COMPRESSION];if(e=t?"draco:"+t.bufferView+":"+t.indices+":"+JP(t.attributes):n.indices+":"+JP(n.attributes)+":"+n.mode,void 0!==n.targets)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+JP(n.targets[i]);return e}function JP(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function ek(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const mue=new Rt;class gue{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Ude,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&(i=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||i||r&&s<98?new _C(this.options.manager):new ude(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ma(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:i,userData:{}};return lf(s,a,r),gu(a,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const o=t[r].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const o=e[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(i[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[Nn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){i.load(fu.resolveURL(t.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const s=t.byteOffset||0;return i.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const o=KP[r.type],l=!0===r.normalized,c=new(0,wg[r.componentType])(r.count*o);return Promise.resolve(new gi(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=KP[r.type],c=wg[r.componentType],u=c.BYTES_PER_ELEMENT,p=r.byteOffset||0,m=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,g=!0===r.normalized;let b,y;if(m&&m!==u*l){const v=Math.floor(p/m),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let x=t.cache.get(M);x||(b=new c(a,v*m,r.count*m/u),x=new lP(b,m/u),t.cache.add(M,x)),y=new jh(x,l,p%m/u,g)}else b=null===a?new c(r.count*l):new c(a,p,r.count*l),y=new gi(b,l,g);if(void 0!==r.sparse){const S=r.sparse.values.byteOffset||0,P=new(0,wg[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*KP.SCALAR),A=new c(o[2],S,r.sparse.count*l);null!==a&&(y=new gi(y.array.slice(),y.itemSize,y.normalized));for(let R=0,V=P.length;R<V;R++){const E=P[R];if(y.setX(E,A[R*l]),l>=2&&y.setY(E,A[R*l+1]),l>=3&&y.setZ(E,A[R*l+2]),l>=4&&y.setW(E,A[R*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return y})}loadTexture(e){const t=this.json,s=t.textures[e].source,o=t.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(e,s,a)}loadTextureImage(e,t,i){const r=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=E5[p.magFilter]||qi,u.minFilter=E5[p.minFilter]||Gc,u.wrapS=A5[p.wrapS]||Hc,u.wrapT=A5[p.wrapT]||Hc,r.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(h=>h.clone());const o=r.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let g=p;!0===t.isImageBitmapLoader&&(g=function(b){const y=new sl(b);y.needsUpdate=!0,p(y)}),t.load(fu.resolveURL(h,s.path),g,void 0,m)})}).then(function(h){return!0===c&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||function pue(n){return n.search(/\.jpe?g($|\?)/i)>0||0===n.search(/^data\:image\/jpeg/)?"image/jpeg":n.search(/\.webp($|\?)/i)>0||0===n.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=u,u}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(void 0!==i.texCoord&&i.texCoord>0&&((o=o.clone()).channel=i.texCoord),s.extensions[Nn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==i.extensions?i.extensions[Nn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Nn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Yh,vo.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new $r,vo.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(r||s||o){let a="ClonedMaterial:"+i.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return _g}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let o;const a={},c=[];if((s.extensions||{})[Nn.KHR_MATERIALS_UNLIT]){const h=r[Nn.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,t))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Ge(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],Hr),a.opacity=p[3]}void 0!==h.baseColorTexture&&c.push(t.assignTexture(a,"map",h.baseColorTexture,Ci)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(c.push(t.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(e,a)})))}!0===s.doubleSided&&(a.side=No);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Dr&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new Ce(1,1),void 0!==s.normalTexture.scale)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(void 0!==s.occlusionTexture&&o!==Dr&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Dr){const h=s.emissiveFactor;a.emissive=(new Ge).setRGB(h[0],h[1],h[2],Hr)}return void 0!==s.emissiveTexture&&o!==Dr&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Ci)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),gu(h,s),t.associations.set(h,{materials:e}),s.extensions&&lf(r,h,s),h})}createUniqueName(e){const t=_i.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(a){return i[Nn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return T5(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=fue(c),h=r[u];if(h)o.push(h.promise);else{let p;p=c.extensions&&c.extensions[Nn.KHR_DRACO_MESH_COMPRESSION]?s(c):T5(new an,c,t),r[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?(void 0===(n=this.cache).DefaultMaterial&&(n.DefaultMaterial=new _g({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:$l})),n.DefaultMaterial):this.getDependency("material",o[l].material);a.push(u)}var n;return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let m=0,g=u.length;m<g;m++){const b=u[m],y=o[m];let v;const M=c[m];if(y.mode===Ca.TRIANGLES||y.mode===Ca.TRIANGLE_STRIP||y.mode===Ca.TRIANGLE_FAN||void 0===y.mode)v=!0===s.isSkinnedMesh?new h4(b,M):new Yn(b,M),!0===v.isSkinnedMesh&&v.normalizeSkinWeights(),y.mode===Ca.TRIANGLE_STRIP?v.geometry=w5(v.geometry,Yz):y.mode===Ca.TRIANGLE_FAN&&(v.geometry=w5(v.geometry,AR));else if(y.mode===Ca.LINES)v=new fg(b,M);else if(y.mode===Ca.LINE_STRIP)v=new qh(b,M);else if(y.mode===Ca.LINE_LOOP)v=new S4(b,M);else{if(y.mode!==Ca.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+y.mode);v=new lb(b,M)}Object.keys(v.geometry.morphAttributes).length>0&&hue(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),gu(v,s),y.extensions&&lf(r,v,y),t.assignFinalMaterial(v),h.push(v)}for(let m=0,g=h.length;m<g;m++)t.associations.set(h[m],{meshes:e,primitives:m});if(1===h.length)return s.extensions&&lf(r,h[0],s),h[0];const p=new wa;s.extensions&&lf(r,p,s),t.associations.set(p,{meshes:e});for(let m=0,g=h.length;m<g;m++)p.add(h[m]);return p})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new gr(xre_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new US(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),gu(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return i.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(i).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const p=new Rt;null!==s&&p.fromArray(s.array,16*c),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new YS(a,l)})}loadAnimation(e){const i=this,r=this.json.animations[e],s=r.name?r.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let h=0,p=r.channels.length;h<p;h++){const m=r.channels[h],g=r.samplers[m.sampler],b=m.target,v=void 0!==r.parameters?r.parameters[g.input]:g.input,M=void 0!==r.parameters?r.parameters[g.output]:g.output;void 0!==b.node&&(o.push(this.getDependency("node",b.node)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",M)),c.push(g),u.push(b))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const p=h[0],m=h[1],g=h[2],b=h[3],y=h[4],v=[];for(let M=0,x=p.length;M<x;M++){const S=p[M],P=m[M],A=g[M],R=b[M],V=y[M];if(void 0===S)continue;S.updateMatrix&&S.updateMatrix();const E=i._createAnimationTracks(S,P,A,R,V);if(E)for(let k=0;k<E.length;k++)v.push(E[k])}return new gb(s,void 0,v)})}createNodeMesh(e){const i=this,r=this.json.nodes[e];return void 0===r.mesh?null:i.getDependency("mesh",r.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(e){const i=this,r=this.json.nodes[e],s=i._loadNodeShallow(e),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],p=c[2];null!==p&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,mue)});for(let m=0,g=h.length;m<g;m++)u.add(h[m]);return u})}_loadNodeShallow(e){const i=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(u=!0===s.isBone?new hP:c.length>1?new wa:1===c.length?c[0]:new Gr,u!==c[0])for(let h=0,p=c.length;h<p;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=o),gu(u,s),s.extensions&&lf(i,u,s),void 0!==s.matrix){const h=new Rt;h.fromArray(s.matrix),u.applyMatrix4(h)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new wa;i.name&&(s.name=r.createUniqueName(i.name)),gu(s,i),i.extensions&&lf(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);return r.associations=(u=>{const h=new Map;for(const[p,m]of r.associations)(p instanceof vo||p instanceof sl)&&h.set(p,m);return u.traverse(p=>{const m=r.associations.get(p);null!=m&&h.set(p,m)}),h})(s),s})}_createAnimationTracks(e,t,i,r,s){const o=[],a=e.name?e.name:e.uuid,l=[];let c;switch(mu[s.path]===mu.weights?e.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a),mu[s.path]){case mu.weights:c=yg;break;case mu.rotation:c=Jh;break;case mu.position:case mu.scale:c=xg;break;default:c=1===i.itemSize?yg:xg}const u=void 0!==r.interpolation?cue[r.interpolation]:Im,h=this._getArrayFromAccessor(i);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+mu[s.path],t.array,h,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=ek(t.constructor),r=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)r[s]=t[s]*i;t=r}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(i){return new(this instanceof Jh?lue:C5)(this.times,this.values,this.getValueSize()/3,i)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function T5(n,e,t){const i=e.attributes,r=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){n.setAttribute(a,l)})}for(const o in i){const a=ZP[o]||o.toLowerCase();a in n.attributes||r.push(s(i[o],a))}if(void 0!==e.indices&&!n.index){const o=t.getDependency("accessor",e.indices).then(function(a){n.setIndex(a)});r.push(o)}return ii.workingColorSpace!==Hr&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ii.workingColorSpace}" not supported.`),gu(n,e),function _ue(n,e,t){const i=e.attributes,r=new bs;if(void 0===i.POSITION)return;{const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new N(l[0],l[1],l[2]),new N(c[0],c[1],c[2])),a.normalized){const u=ek(wg[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=e.targets;if(void 0!==s){const a=new N,l=new N;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(void 0!==h.POSITION){const p=t.json.accessors[h.POSITION],m=p.min,g=p.max;if(void 0!==m&&void 0!==g){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const b=ek(wg[p.componentType]);l.multiplyScalar(b)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}n.boundingBox=r;const o=new xs;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=o}(n,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function uue(n,e,t){let i=!1,r=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const h=e[c];if(void 0!==h.POSITION&&(i=!0),void 0!==h.NORMAL&&(r=!0),void 0!==h.COLOR_0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const h=e[c];if(i){const p=void 0!==h.POSITION?t.getDependency("accessor",h.POSITION):n.attributes.position;o.push(p)}if(r){const p=void 0!==h.NORMAL?t.getDependency("accessor",h.NORMAL):n.attributes.normal;a.push(p)}if(s){const p=void 0!==h.COLOR_0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[1],p=c[2];return i&&(n.morphAttributes.position=c[0]),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=p),n.morphTargetsRelative=!0,n})}(n,e.targets,t):n})}class Jc{constructor(e){this.nativeMesh=e,this.entity=null}get position(){return vt.clone(this.nativeMesh.position)}set position(e){this.nativeMesh.position.set(e.x,e.y,e.z)}get rotation(){return as.clone(this.nativeMesh.quaternion)}set rotation(e){this.nativeMesh.quaternion.set(e.x,e.y,e.z,e.w)}get scale(){return vt.clone(this.nativeMesh.scale)}set scale(e){this.nativeMesh.scale.set(e.x,e.y,e.z)}get visible(){return this.nativeMesh.visible}set visible(e){this.nativeMesh.visible=e}get name(){return this.nativeMesh.name||this.nativeMesh.uuid}set name(e){this.nativeMesh.name=e}isEmpty(){return(this.nativeMesh instanceof GS||this.nativeMesh instanceof wa)&&0==this.nativeMesh.children.length}popChild(e){const t=this.nativeMesh.children.find(i=>i.name===e||i.userData.name===e);return t?(t.removeFromParent(),new Jc(t)):null}getBoundings(){return(new bs).setFromObject(this.nativeMesh)}clone(){return new Jc(this.nativeMesh.clone())}addToWorld(e){var t;null===(t=e.visualScene.nativeScene)||void 0===t||t.add(this.nativeMesh)}removeFromWorld(e){var t;null===(t=e.visualScene.nativeScene)||void 0===t||t.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(e=>{e instanceof Yn&&this.disposeMesh(e)}),this.nativeMesh instanceof Yn&&this.disposeMesh(this.nativeMesh)}disposeMesh(e){e.geometry.dispose();const t=e.material instanceof Array?e.material:[e.material];for(const i of t)i.dispose()}}class vue extends Jc{constructor(e){super(e),this.nativeCamera=e}get supportsFov(){return this.nativeCamera instanceof gr||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(e){this.supportsFov&&(this.nativeCamera.fov=e,this.nativeCamera.updateProjectionMatrix())}}class yue extends Zne{createMaterial(e){let t=e.color||super.randomColor(),i=e.shading||"unlit";switch(i){case"unlit":return new Dr({color:t,map:e.diffuse||null});case"standart":return new _g({color:t,map:e.diffuse||null});case"phong":return new mC({color:t,map:e.diffuse||null});default:throw new Error(`"${i}" shading not implemented for three.js`)}}transformPrimitiveZUp(e){e.rotateX(Math.PI/2);const t=new wa;return t.add(e),t}createPrimitive(e,t={}){let i=null,r=this.createMaterial(t);switch(e.shape){case"PLANE":i=new Yn(new eg(1e4,1e4),r);break;case"BOX":i=new Yn(new zh(e.dimensions.x,e.dimensions.y,e.dimensions.z),r);break;case"CAPSULE":i=this.transformPrimitiveZUp(new Yn(new oC(e.radius,e.centersDistance),r));break;case"CYLINDER":i=this.transformPrimitiveZUp(new Yn(new pg(e.radius,e.radius,e.height),r));break;case"CONE":i=this.transformPrimitiveZUp(new Yn(new aC(e.radius,e.height),r));break;case"SPHERE":i=new Yn(new pb(e.radius),r)}if(!i)throw new Error(`Primitive with shape "${e.shape}" not implemented`);return void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),new Jc(i)}createPerspectiveCamera(e={}){return new vue(new gr(e.fov||75,e.aspectRatio||1,e.frustrum?e.frustrum.near:1,e.frustrum?e.frustrum.far:1e4))}}class xue{constructor(){this.gltfLoader=new Bde}loadFromGgGlb(e,t){return function(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){const i=yield this.gltfLoader.parseAsync(e,"");return i.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new Jc(i.scene)})}}class wue extends Jc{constructor(){super(new fg(new an,new $r({color:16711680,linewidth:.5}))),this.entity=null,this.debugBufferSize=3e6,this.index=0,this.lastMaxIndex=0,this.debugVertices=new Float32Array(this.debugBufferSize),this.debugColors=new Float32Array(this.debugBufferSize),this.nativeMesh.geometry.setAttribute("position",new gi(this.debugVertices,3)),this.nativeMesh.geometry.setAttribute("color",new gi(this.debugColors,3)),this.nativeMesh.frustumCulled=!1}drawContactPoint(e,t,i){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,i?.x||0,i?.y||0,i?.z||0),this.setXYZ(this.debugVertices,this.index,e.x+t.x,e.y+t.y,e.z+t.z),this.setXYZ(this.debugColors,this.index++,i?.x||0,i?.y||0,i?.z||0)}drawLine(e,t,i){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,i?.x||0,i?.y||0,i?.z||0),this.setXYZ(this.debugVertices,this.index,t.x,t.y,t.z),this.setXYZ(this.debugColors,this.index++,i?.x||0,i?.y||0,i?.z||0)}update(){this.index<this.lastMaxIndex&&(this.debugVertices.fill(0,this.index,this.lastMaxIndex),this.debugColors.fill(0,this.index,this.lastMaxIndex)),this.lastMaxIndex=this.index,this.index=0,this.nativeMesh.geometry.attributes.position.needsUpdate=!0,this.nativeMesh.geometry.attributes.color.needsUpdate=!0}setXYZ(e,t,i,r,s){e[t*=3]=i,e[t+1]=r,e[t+2]=s}}class Mue extends Vne{constructor(e,t,i,r={}){super(e,i,r),this.scene=e,this.camera=t,this.canvas=i,this.nativeRenderer=new t4({canvas:i,antialias:this.rendererOptions.antialias,preserveDrawingBuffer:!0,alpha:this.rendererOptions.transparent}),this.nativeRenderer.outputColorSpace=Ci,this.nativeRenderer.shadowMap.enabled=!0,this.nativeRenderer.setClearColor(this.rendererOptions.background),this.nativeRenderer.shadowMap.type=cz,this.nativeRenderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}addToWorld(e){}removeFromWorld(e){}resizeRenderer(e){this.nativeRenderer.setSize(e.x,e.y),(this.camera.nativeCamera instanceof gr||"PerspectiveCamera"==this.camera.nativeCamera.type)&&Math.abs(this.camera.nativeCamera.aspect-e.x/e.y)>.01&&(this.camera.nativeCamera.aspect=e.x/e.y,this.camera.nativeCamera.updateProjectionMatrix())}render(){this.nativeRenderer.render(this.scene.nativeScene,this.camera.nativeCamera)}dispose(){this.camera.dispose(),this.nativeRenderer.clear(),this.nativeRenderer.dispose(),this.nativeRenderer.domElement=null}}class D5{constructor(){this._nativeScene=null,this.factory=new yue,this.loader=new xue,this.debugPhysicsDrawerClass=wue}get nativeScene(){return this._nativeScene}init(){return n=this,e=void 0,i=function*(){this._nativeScene=new GS},new((t=void 0)||(t=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(u.value).then(a,l)}c((i=i.apply(n,e||[])).next())});var n,e,t,i}createRenderer(e,t,i){return new Mue(this,e,t,i)}dispose(){this._nativeScene=new GS}}const Cue=["determinateSpinner"];function Eue(n,e){if(1&n&&(Fr(),Z(0,"svg",11),$e(1,"circle",12),se()),2&n){const t=Me();Bt("viewBox",t._viewBox()),q(1),Dc("stroke-dasharray",t._strokeCircumference(),"px")("stroke-dashoffset",t._strokeCircumference()/2,"px")("stroke-width",t._circleStrokeWidth(),"%"),Bt("r",t._circleRadius())}}const Aue=AM(class{constructor(n){this._elementRef=n}},"primary"),Tue=new ge("mat-progress-spinner-default-options",{providedIn:"root",factory:function Due(){return{diameter:I5}}}),I5=100;let tk=(()=>{class n extends Aue{constructor(t,i,r){super(t),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=I5,this._noopAnimations="NoopAnimations"===i&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Xs(t)))}get diameter(){return this._diameter}set diameter(t){this._diameter=Xs(t)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(t){this._strokeWidth=Xs(t)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const t=2*this._circleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return n.\u0275fac=function(t){return new(t||n)(D(_t),D(rs,8),D(Tue))},n.\u0275cmp=bt({type:n,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,i){if(1&t&&oi(Cue,5),2&t){let r;kt(r=Ot())&&(i._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(t,i){2&t&&(Bt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===i.mode?i.value:null)("mode",i.mode),Dc("width",i.diameter,"px")("height",i.diameter,"px"),Pn("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===i.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[ht],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,i){if(1&t&&(ye(0,Eue,2,8,"ng-template",null,0,Ic),Z(2,"div",1,2),Fr(),Z(4,"svg",3),$e(5,"circle",4),se()(),es(),Z(6,"div",5)(7,"div",6)(8,"div",7),Sv(9,8),se(),Z(10,"div",9),Sv(11,8),se(),Z(12,"div",10),Sv(13,8),se()()()),2&t){const r=zr(1);q(4),Bt("viewBox",i._viewBox()),q(1),Dc("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),Bt("r",i._circleRadius()),q(4),$("ngTemplateOutlet",r),q(2),$("ngTemplateOutlet",r),q(2),$("ngTemplateOutlet",r)}},dependencies:[zv],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),n})(),Rue=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[_a,qn]}),n})();const Pue=["previewCanvasContainer"],kue=["previewCanvas"];function Oue(n,e){1&n&&$e(0,"mat-spinner",6)}const AC=n=>{n.encoding=Wc,n.anisotropy=8,n.magFilter=Bi,n.minFilter=Bi};let Lue=(()=>{class n{constructor(t,i,r){this.eelDelegate=t,this.cdr=i,this.mainService=r,this._resource$=new Ht(null),this.changed=new st,this.destroyed$=new Ve,this.entity=null}get resource(){return this._resource$.getValue()}set resource(t){this._resource$.next(t)}ngAfterViewInit(){var t=this;return on(function*(){var s;t.world=new oz(new D5,{init:(s=on(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield t.world.init(),t.world.visualScene.nativeScene.add(new VP(16777215,2));let i=new Ht({x:1,y:1});t.renderer=t.world.addRenderer(t.world.visualScene.factory.createPerspectiveCamera(),t.previewCanvas.nativeElement,{size:i.asObservable(),background:11184810}),t.controller=new Yne(t.renderer,{mouseOptions:{canvas:t.previewCanvas.nativeElement}}),t.world.addEntity(t.controller);const r=()=>{i.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resource$.pipe(dt(t.destroyed$)).subscribe(function(){var s=on(function*(o){const a=yield t.loadPreviewFilePaths(o?.id);a&&(yield t.loadPreview(a))});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(dt(t.destroyed$),Hn(([s,o])=>!!t.resource&&s.startsWith(t.resource.id)),um(1500)).subscribe(on(function*(){t.unloadPreview();const s=yield t.postTmpUpdates(t.resource?.id);s&&(yield t.loadPreview(s))}))})()}postTmpUpdates(t){var i=this;return on(function*(){if(t){const r=yield i.eelDelegate.serializeResourceTmp(t,Object.entries(i.mainService.changedDataBlocks).filter(([a,l])=>"__has_external_changes__"!=a&&a.startsWith(t)).map(([a,l])=>({id:a,value:l})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreviewFilePaths(t){var i=this;return on(function*(){if(t){const r=yield i.eelDelegate.serializeResource(t,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreview([t,i]){var r=this;return on(function*(){r.unloadPreview();const s=new Ode,a=yield(new Lde).loadAsync(i);a.preload(),s.setMaterials(a);const l=yield s.loadAsync(t);l.traverse(u=>{if(u instanceof Yn){const h=u.material instanceof Array?u.material:[u.material];for(const p of h)p.transparent=!0,p.alphaTest=.5,p instanceof Dr&&p.map&&(p.map.wrapS=ir,p.map.wrapT=ir,AC(p.map),p.map.needsUpdate=!0)}}),r.entity=new Em(new Jc(l),null),r.world.addEntity(r.entity);const c=r.entity.object3D.getBoundings();r.controller.target=vt.scalarMult(vt.add(c.min,c.max),.5),r.controller.radius=vt.dist(c.min,c.max),r.controller.theta=-1.32,r.controller.phi=1.22,r.cdr.markForCheck()})()}unloadPreview(){this.entity&&(this.world.removeEntity(this.entity),this.entity.dispose(),this.entity=null,this.cdr.markForCheck())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return n.\u0275fac=function(t){return new(t||n)(D(Eh),D(ai),D(wm))},n.\u0275cmp=bt({type:n,selectors:[["app-orip-geometry-block-ui"]],viewQuery:function(t,i){if(1&t&&(oi(Pue,5),oi(kue,5)),2&t){let r;kt(r=Ot())&&(i.previewCanvasContainer=r.first),kt(r=Ot())&&(i.previewCanvas=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:7,vars:4,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[3,"resource"],["mode","indeterminate"]],template:function(t,i){1&t&&(Z(0,"div",0,1),$e(2,"canvas",2,3),ye(4,Oue,1,0,"mat-spinner",4),se(),$e(5,"app-compound-block-ui",5),gn(6,"async")),2&t&&(q(4),$("ngIf",!i.entity),q(1),$("resource",En(6,2,i._resource$)))},dependencies:[Di,tk,Th,Nd],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),n})();function Fue(n,e){if(1&n&&(Fr(),$e(0,"circle",3),gn(1,"async"),gn(2,"async")),2&n){const t=Me();let i,r;Bt("cx",(null==(i=En(1,3,t.mapPointer$))?null:i.x)||0)("cy",(null==(r=En(2,5,t.mapPointer$))?null:r.y)||0)("r",10)}}const Nue=function(){return{"stroke-width":3}};let Bue=(()=>{class n{constructor(t){this.ref=t,this._roadSpline$=new Ht([]),this._pointer$=new Ht(null),this.splineClosed=!1,this.svgSize$=new Ht({x:100,y:100}),this.scalingSquare$=new Ht({x:0,y:0,width:100,height:100}),this.mapPolyline$=new Ht(""),this.mapPointer$=new Ht(null),this.destroyed$=new Ve}set roadSpline(t){this._roadSpline$.next(t)}set pointer(t){this._pointer$.next(t)}ngAfterViewInit(){this._roadSpline$.pipe(dt(this.destroyed$),Ye(i=>{let r={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},s={x:Number.MIN_SAFE_INTEGER,y:Number.MIN_SAFE_INTEGER};i.forEach(a=>{r={x:Math.min(r.x,a.x),y:Math.min(r.y,a.z)},s={x:Math.max(s.x,a.x),y:Math.max(s.y,a.z)}});const o_x=s.x-r.x,o_y=s.y-r.y;return{x:r.x-.1*o_x,y:r.y-.1*o_y,width:1.2*o_x,height:1.2*o_y}})).subscribe(this.scalingSquare$),Ud([this._roadSpline$,this.scalingSquare$,this.svgSize$]).pipe(dt(this.destroyed$),Ye(([i,r,s])=>{const o=i.map(a=>({x:(a.x-r.x)*s.x/r.width,y:(r.y-a.z)*s.y/r.height+s.y}));return this.splineClosed&&o.length&&o.push(o[0]),o.map(a=>Math.round(a.x)+","+Math.round(a.y)).join(" ")})).subscribe(this.mapPolyline$),Ud([this._pointer$,this.scalingSquare$.asObservable(),this.svgSize$]).pipe(dt(this.destroyed$),Ye(([i,r,s])=>i?{x:(i.x-r.x)*s.x/r.width,y:(r.y-i.y)*s.y/r.height+s.y}:null)).subscribe(this.mapPointer$);const t=()=>{this.svgSize$.next({x:this.ref.nativeElement.clientWidth,y:this.ref.nativeElement.clientHeight})};new ResizeObserver(t).observe(this.ref.nativeElement),t()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return n.\u0275fac=function(t){return new(t||n)(D(_t))},n.\u0275cmp=bt({type:n,selectors:[["app-tri-minimap"]],inputs:{roadSpline:"roadSpline",pointer:"pointer",splineClosed:"splineClosed"},decls:8,vars:13,consts:[["shape-rendering","geometricPrecision"],[2,"fill","none","stroke","#333333",3,"ngStyle"],["fill","#e30","stroke","black","stroke-width","3",4,"ngIf"],["fill","#e30","stroke","black","stroke-width","3"]],template:function(t,i){if(1&t&&(Fr(),Z(0,"svg",0),gn(1,"async"),gn(2,"async"),$e(3,"polyline",1),gn(4,"async"),it(5," cars "),ye(6,Fue,3,7,"circle",2),gn(7,"async"),se()),2&t){let r;Bt("viewBox","0 0 "+(null==(r=En(1,4,i.svgSize$))?null:r.x)+" "+(null==(r=En(2,6,i.svgSize$))?null:r.y)),q(3),$("ngStyle",co(12,Nue)),Bt("points",En(4,8,i.mapPolyline$)),q(3),$("ngIf",En(7,10,i.mapPointer$))}},dependencies:[Di,Pw,Nd],styles:["[_nghost-%COMP%]{overflow:auto}svg[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0}),n})();const Uue=["previewCanvasContainer"],Vue=["previewCanvas"];function zue(n,e){if(1&n&&(Z(0,"mat-option",19),it(1),se()),2&n){const t=e.$implicit;$("value",t),q(1),Er(" ",t," ")}}function Hue(n,e){if(1&n){const t=Oi();ha(0),Z(1,"mat-form-field",1)(2,"mat-label"),it(3,"Custom FAM path"),se(),$e(4,"input",20,21),gn(6,"async"),se(),Z(7,"button",22),ot("click",function(){Sn(t);const r=zr(5);return Cn(Me().onFamSelected(r.value))}),it(8,"LOAD"),se(),fa()}if(2&n){const t=Me();q(4),$("value",En(6,1,t.previewFamLocation$))}}function Gue(n,e){1&n&&$e(0,"mat-spinner",23),2&n&&$("diameter",40)}function Wue(n,e){1&n&&$e(0,"mat-spinner",24)}const $ue=function(){return["num_segments","terrain_length","unk0","unk1","position","unknowns0","terrain_block_size","railing_texture_id","proxy_objects_count","proxy_object_instances_count","unk2","unk3","proxy_objects","proxy_object_instances"]};var cf=(()=>{return(n=cf||(cf={})).ThreeModel="model",n.Bitmap="bitmap",n.TwoSidedBitmap="two_sided_bitmap",cf;var n})();class Xue extends Wne{constructor(e,t){super(e,{loadDepth:50,inertia:2}),this.mapGraph=e,this.famPath=t,this.textureLoader=new _C,this.terrainMaterials={}}loadChunk(e){var t=()=>super.loadChunk,i=this;return on(function*(){const[r,s]=yield t().call(i,e);for(const l of r)l.object3D&&l.object3D.nativeMesh.traverse(c=>{c instanceof Yn&&(c.material=i.getTerrainMaterial((c.userData.name||c.name).substr((c.userData.name||c.name).lastIndexOf("_")+1).split(".")[0]))});const o=(yield Promise.all(s.meta.dummies.filter(l=>l.is_prop).map(l=>i.loadPropInternal(l)))).filter(l=>!!l);for(const l of o)l.position=vt.add(l.position,e.position);const a=[...r,...o];return i.loaded.set(e,a),i.addChildren(...o),[a,s]})()}getTerrainMaterial(e){return this.terrainMaterials[e]||(this.terrainMaterials[e]=new Dr({side:No,transparent:!0,visible:!1}),this.textureLoader.loadAsync(`${this.famPath}/background/${e}.png`).then(t=>{t.wrapS=Hc,t.wrapT=ir,AC(t),t.flipY=!1,this.terrainMaterials[e].map=t,this.terrainMaterials[e].needsUpdate=!0,this.terrainMaterials[e].visible=!0}).catch(t=>{console.warn(`Problem with loading terrain material ${e}`)})),this.terrainMaterials[e]}loadPropInternal(e){var t=this;return on(function*(){if(e.type==cf.ThreeModel){const{entities:[i]}=yield t.world.loader.loadGgGlb(`${t.famPath}/props/${e.model_ref_id}/0/body`,{loadProps:!1,cachingStrategy:Wl.Entities});return i.object3D.nativeMesh.traverse(r=>{r instanceof Yn&&((n,e)=>{let t=n.material instanceof Array?n.material:[n.material];t=t.map(i=>(i instanceof Dr||(i=new Dr({map:i instanceof _g?i.map:null,side:i.side,transparent:!0,alphaTest:.5})),i instanceof Dr&&i.map&&(i.map.wrapS=ir,i.map.wrapT=ir,AC(i.map),i.map.needsUpdate=!0),i)),n.material=t.length>1?t:t[0]})(r)}),i.position=e.position,i.rotation=e.rotation,i}if(e.type==cf.Bitmap||e.type==cf.TwoSidedBitmap){const i=new wa,r=yield t.loadTexturePlaneProp(e.texture,{x:e.width,y:e.height},e.animation_interval);if(i.add(r),e.type==cf.TwoSidedBitmap){const o=yield t.loadTexturePlaneProp(e.back_texture,{x:e.width,y:e.height},e.animation_interval);o.rotateY(Math.PI/2),o.position.x=o.position.y=e.width/2,i.add(o)}const s=new Em(new Jc(i),null);return s.position=e.position,s.rotation=e.rotation,s}return null})()}loadTexturePlaneProp(e,t,i){var r=this;return on(function*(){const s=e.split(";"),a=(yield Promise.all(s.map(c=>r.textureLoader.loadAsync(`${r.famPath}/foreground/${c}.png`)))).map(c=>(AC(c),new Dr({map:c,alphaTest:.5,transparent:!0,side:No}))),l=new Yn(new eg(t.x,t.y),a[0]);if(l.rotateX(Math.PI/2),l.position.set(0,0,t.y/2),a.length>1){let c=-1;tS(r.world).pipe(JV(i&&!isNaN(+i)?+i:250)).subscribe(()=>{c=(c+1)%a.length,l.material=a[c]})}return l})()}}let que=(()=>{class n{constructor(t,i,r){this.eelDelegate=t,this.cdr=i,this.mainService=r,this._resource$=new Ht(null),this.changed=new st,this.previewLoading$=new Ht(!0),this.previewFamLocation$=new Ht(null),this.previewFamLoading$=new Ht(!1),this.pointer$=new Ht(null),this.selectedSplineIndex$=new Ht(0),this.selectedSplineItem$=new Ht(null),this.selectedAiInfoItem$=new Ht(null),this.selectedTerrainItem$=new Ht(null),this.famPath="",this.name="",this.renderer=null,this.map=null,this.roadPath=null,this.destroyed$=new Ve,this.Math=Math,this.Object=Object}get resource(){return this._resource$.getValue()}set resource(t){this._resource$.next(t)}get previewFamPossibleLocations(){const t=this.resource?.id;return t?[t.substring(0,t.indexOf("MISC"))+"ETRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_001.FAM",t.substring(0,t.indexOf("MISC"))+"GTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_001.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_M01.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_R01.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_T01.FAM"]:[]}get roadSpline(){return(this.resource?.data.road_spline||[]).filter((t,i)=>i<(4*this.resource?.data.terrain_length||0)).map(t=>t.position)||[]}ngAfterViewInit(){var t=this;return on(function*(){var s;t.world=new oz(new D5,{init:(s=on(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{},loader:{loadFromGgGlb:function(){var s=on(function*(...o){return[]});return function(){return s.apply(this,arguments)}}()}}),yield t.world.init(),t.skySphere=new Em(t.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})),t.skySphere.object3D.nativeMesh.material.side=No,t.skySphere.rotation=as.fromEuler({x:Math.PI/2,y:0,z:0}),t.world.addEntity(t.skySphere),t.selectionSphere=new Em(t.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})),t.selectionSphere.object3D.nativeMesh.material.opacity=.4,t.selectionSphere.object3D.nativeMesh.material.transparent=!0,t.world.addEntity(t.selectionSphere),t.world.visualScene.nativeScene.add(new VP(16777215,2));let i=new Ht({x:1,y:1});t.renderer=t.world.addRenderer(t.world.visualScene.factory.createPerspectiveCamera(),t.previewCanvas.nativeElement,{size:i.asObservable(),background:11184810}),t.renderer.camera.position={x:0,y:0,z:2.5},t.renderer.camera.rotation=as.lookAt(t.renderer.camera.position,vt.add(t.renderer.camera.position,vt.Y),vt.Z),tS(t.world).pipe(dt(t.destroyed$)).subscribe(()=>{t.renderer&&(t.skySphere.position=t.renderer.camera.position,t.pointer$.next(t.renderer.camera.position))}),t.controller=new Xne(t.world.keyboardInput,t.renderer,{mouseOptions:{canvas:t.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",movementOptions:{speed:1},ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),t.world.addEntity(t.controller);const r=()=>{i.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resource$.pipe(dt(t.destroyed$)).subscribe(function(){var s=on(function*(o){t.previewLoading$.next(!0),t.previewFamPossibleLocations[0]&&(t.previewFamLocation$.next(t.previewFamPossibleLocations[0]),yield t.onFamSelected(t.previewFamPossibleLocations[0])),yield t.loadPreviewGlbPath(o?.id),yield t.loadPreview(),t.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(dt(t.destroyed$),Hn(([s,o])=>!!t.resource&&s.startsWith(t.resource.id)),um(3e3)).subscribe(on(function*(){t.previewLoading$.next(!0),yield t.postTmpUpdates(t.resource?.id),yield t.loadPreview(),t.previewLoading$.next(!1)})),t.selectedSplineIndex$.pipe(dt(t.destroyed$),um(250)).subscribe(s=>{if(t.roadPath){const o=t.roadPath.points[s];if(!o)return;t.selectionSphere.position=o,t.renderer&&(t.renderer.position=vt.add(o,vt.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-t.resource.data.road_spline[s].orientation)),t.renderer.rotation=as.lookAt(t.renderer.position,o,{x:0,y:0,z:1}))}t.selectedSplineItem$.next({id:rl(t.resource.id,`road_spline/${s}`),data:t.resource.data.road_spline[s],schema:(t.resource.schema.fields||[]).find(o=>"road_spline"===o.name)?.schema.child_schema,name:""}),t.selectedAiInfoItem$.next({id:rl(t.resource.id,`ai_info/${Math.floor(s/4)}`),data:t.resource.data.ai_info[Math.floor(s/4)],schema:(t.resource.schema.fields||[]).find(o=>"ai_info"===o.name)?.schema.child_schema,name:""}),t.selectedTerrainItem$.next({id:rl(t.resource.id,`terrain/${Math.floor(s/4)}`),data:t.resource.data.terrain[Math.floor(s/4)],schema:(t.resource.schema.fields||[]).find(o=>"terrain"===o.name)?.schema.child_schema,name:""})})})()}onFamSelected(t){var i=this;return on(function*(){if("custom"!=t&&i.famPath!=t){i.famPath=t,i.previewFamLoading$.next(!0);try{const r=yield i.eelDelegate.serializeResource(t,{geometry__save_obj:!1,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!0}),s=new _C,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.encoding=Wc,a.mapping=zc,i.skySphere.object3D.nativeMesh.material.map=a}else i.skySphere.object3D.nativeMesh.material.map=null;i.skySphere.object3D.nativeMesh.material.needsUpdate=!0}finally{i.previewFamLoading$.next(!1)}yield i.loadPreview()}})()}loadPreviewGlbPath(t){var i=this;return on(function*(){if(t){const r=yield i.eelDelegate.serializeResource(t,{geometry__save_obj:!1,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!0,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0});i.previewGlbPath=r.find(s=>s.endsWith("map.glb"))}else i.previewGlbPath=void 0})()}loadPreview(){var t=this;return on(function*(){if(!t.previewGlbPath)return;const{meta:i}=yield t.world.loader.loadGgGlb(t.previewGlbPath.substring(0,t.previewGlbPath.length-4),{loadProps:!1});t.roadPath=i.curves.find(s=>"road_path"===s.name);const r=Uy.fromMapArray(t.roadPath.points.filter((s,o)=>o%4==0).map((s,o)=>({path:`${t.previewGlbPath.substring(0,t.previewGlbPath.lastIndexOf("/"))}/terrain_chunk_${o}`,position:s,loadOptions:{cachingStrategy:Wl.Nothing,loadProps:!1}}))||[],t.roadPath.cyclic);t.unloadPreview(),t.map=new Xue(r,"resources/"+t.famPath),t.map.loaderCursorEntity$.next(t.renderer),t.world.addEntity(t.map),t.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(t){var i=this;return on(function*(){if(t){const r=yield i.eelDelegate.serializeResourceTmp(t,Object.entries(i.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(t)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!1,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!0,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0});i.previewGlbPath=r.find(s=>s.endsWith("map.glb"))}else i.previewGlbPath=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return n.\u0275fac=function(t){return new(t||n)(D(Eh),D(ai),D(wm))},n.\u0275cmp=bt({type:n,selectors:[["app-tri-map-block-ui"]],viewQuery:function(t,i){if(1&t&&(oi(Uue,5),oi(Vue,5)),2&t){let r;kt(r=Ot())&&(i.previewCanvasContainer=r.first),kt(r=Ot())&&(i.previewCanvas=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:49,vars:38,consts:[[1,"famSelector"],["appearance","fill"],[3,"value","valueChange"],["famSelect",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],[4,"ngIf"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer"],[3,"resource"],[3,"resource","fieldWhitelist"],[3,"value"],["matInput","","type","text",3,"value"],["customFamInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(t,i){if(1&t&&(Z(0,"div",0)(1,"h4"),it(2,"Preview *.FAM file"),se(),Z(3,"mat-form-field",1)(4,"mat-label"),it(5,"Current preview FAM"),se(),Z(6,"mat-select",2,3),ot("valueChange",function(s){return i.onFamSelected(s)}),gn(8,"async"),gn(9,"async"),ye(10,zue,2,2,"mat-option",4),Z(11,"mat-option",5),it(12,"custom"),se()()(),ye(13,Hue,9,3,"ng-container",6),ye(14,Gue,1,1,"mat-spinner",7),gn(15,"async"),se(),Z(16,"div",8)(17,"div",9,10),$e(19,"canvas",11,12),ye(21,Wue,1,0,"mat-spinner",13),gn(22,"async"),se(),Z(23,"div",14,10)(25,"mat-form-field",1)(26,"mat-label"),it(27,"Spline item"),se(),Z(28,"input",15),ot("ngModelChange",function(s){return i.selectedSplineIndex$.next(s)}),gn(29,"async"),gn(30,"async"),se()(),$e(31,"app-tri-minimap",16),gn(32,"async"),se()(),Z(33,"h4"),it(34,"Road spline item"),se(),$e(35,"app-compound-block-ui",17),gn(36,"async"),Z(37,"h4"),it(38,"AI info (block for 4 spline items)"),se(),$e(39,"app-compound-block-ui",17),gn(40,"async"),Z(41,"h4"),it(42,"Terrain (block for 4 spline items)"),se(),$e(43,"app-compound-block-ui",17),gn(44,"async"),Z(45,"h4"),it(46,"Common"),se(),$e(47,"app-compound-block-ui",18),gn(48,"async")),2&t){const r=zr(7);let s;q(6),$("value",i.previewFamPossibleLocations.includes(En(8,15,i.previewFamLocation$))?En(9,17,i.previewFamLocation$):"custom"),q(4),$("ngForOf",i.previewFamPossibleLocations),q(3),$("ngIf","custom"==r.value),q(1),$("ngIf",En(15,19,i.previewFamLoading$)),q(7),$("ngIf",En(22,21,i.previewLoading$)),q(7),$("min",0)("max",4*(null==(s=En(29,23,i._resource$))?null:s.data.terrain_length)-1)("ngModel",En(30,25,i.selectedSplineIndex$)),q(3),$("roadSpline",i.roadSpline)("pointer",En(32,27,i.pointer$)),q(4),$("resource",En(36,29,i.selectedSplineItem$)),q(4),$("resource",En(40,31,i.selectedAiInfoItem$)),q(4),$("resource",En(44,33,i.selectedTerrainItem$)),q(4),$("resource",En(48,35,i._resource$))("fieldWhitelist",co(37,$ue))}},dependencies:[ga,Di,Uc,_m,Kd,bm,ym,Zd,Qd,il,xm,RM,Ly,mm,tk,Th,Bue,Nd],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-tri-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.famSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.famSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.famSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.famSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .famSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),n})();const Yue=["class","block-ui"];function Kue(n,e){if(1&n&&(Z(0,"h2",6),it(1),se()),2&n){const t=Me(2);$("matTooltip",t.resourceDescription),q(1),$i(null==t.resource?null:t.resource.name)}}function Zue(n,e){if(1&n&&(Z(0,"mat-option",7),it(1),se()),2&n){const t=e.$implicit;$("value",e.index),q(1),Er(" ",t.block_class_mro.split("__")[0]," ")}}function Que(n,e){if(1&n){const t=Oi();ha(0),ye(1,Kue,2,2,"h2",1),Z(2,"div",2)(3,"mat-label"),it(4,"Resource type:"),se(),Z(5,"mat-select",3),ot("selectionChange",function(r){return Sn(t),Cn(Me().setChoiceIndex(r.value))}),ye(6,Zue,2,2,"mat-option",4),se()(),$e(7,"app-editor",5),fa()}if(2&n){const t=Me();q(1),$("ngIf",null==t.resource?null:t.resource.name),q(4),$("value",t.resourceData.choice_index),q(1),$("ngForOf",t.resource.schema.possible_resource_schemas),q(1),$("resource",t.childResource)}}let R5=(()=>{class n{constructor(){this._resource=null,this.resourceDescription="",this.childResource=null,this.choiceDataCaches=[],this.changed=new st}get resource(){return this._resource}set resource(t){const i=!this._resource||!t||this._resource.id!==t.id;this._resource=t,i&&(this.choiceDataCaches=new Array(this._resource?.schema.possible_resource_schemas||0).fill(null),this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this._resource.data.data)),this.updateChild()}get resourceData(){return this._resource?.data||null}setChoiceIndex(t){this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this.childResource.data,this._resource.data.choice_index=t,this._resource.data.data=this.choiceDataCaches[t],this.updateChild(),this.changed.emit())}updateChild(){this.childResource=this._resource?{...this._resource,id:rl(this._resource.id,"data"),data:this.choiceDataCaches[this._resource.data.choice_index],name:"",schema:this._resource.schema.possible_resource_schemas[this._resource.data.choice_index]}:null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-delegate",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},attrs:Yue,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["id","resource-type-container"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"resource"],["matTooltipPosition","above",3,"matTooltip"],[3,"value"]],template:function(t,i){1&t&&ye(0,Que,8,4,"ng-container",0),2&t&&$("ngIf",i.resourceData)},styles:["#resource-type-container[_ngcontent-%COMP%]{display:flex;column-gap:.5rem;align-items:center}#resource-type-container[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{flex-shrink:0}"],changeDetection:0}),n})();const Jue=["class","block-ui"];function ehe(n,e){if(1&n&&(Z(0,"mat-label",7),it(1),se()),2&n){const t=Me(2);$("matTooltip",t.resourceDescription),q(1),Er(" ",t.resource.name," ")}}function the(n,e){if(1&n){const t=Oi();ha(0),ye(1,ehe,2,2,"mat-label",1),Z(2,"mat-selection-list",2),ot("selectionChange",function(r){return Sn(t),Cn(Me().onSelection(r))}),Z(3,"mat-list-option",3),it(4," Left "),se(),Z(5,"mat-list-option",4),it(6," Right "),se()(),Z(7,"mat-form-field",5)(8,"mat-label"),it(9,"Texture ID"),se(),Z(10,"input",6),ot("ngModelChange",function(r){return Sn(t),Cn(Me().resource.data.texture_id=r)})("change",function(){return Sn(t),Cn(Me().changed.emit())}),se()(),fa()}if(2&n){const t=Me();q(1),$("ngIf",t.resource.name),q(2),$("selected",t.resource.data.has_left_fence),q(2),$("selected",t.resource.data.has_right_fence),q(5),$("max",63)("min",0)("step",1)("ngModel",t.resource.data.texture_id)}}let nhe=(()=>{class n{constructor(){this.resource=null,this.resourceDescription="",this.changed=new st}onSelection(t){for(const i of t.options)this.resource.data[i.value]=i.selected;this.changed.emit()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=bt({type:n,selectors:[["app-fence-type",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},attrs:Jue,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"selectionChange"],["value","has_left_fence",3,"selected"],["value","has_right_fence",3,"selected"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","ngModel","ngModelChange","change"],["matTooltipPosition","above",3,"matTooltip"]],template:function(t,i){1&t&&ye(0,the,11,7,"ng-container",0),2&t&&$("ngIf",i.resource)},dependencies:[Di,Uc,_m,Kd,bm,ym,Zd,Qd,il,xm,Ks,eS,JM],changeDetection:0}),n})();function ihe(n,e){if(1&n&&(Z(0,"mat-error"),it(1),se()),2&n){const t=Me(2);q(1),Fp(" ",t.resourceError.data.error_class,": ",t.resourceError.data.error_text," ")}}function rhe(n,e){1&n&&$e(0,"mat-spinner",6)}function she(n,e){if(1&n&&(Z(0,"div",3),ye(1,ihe,2,2,"mat-error",4),ye(2,rhe,1,0,"mat-spinner",5),se()),2&n){const t=Me();q(1),$("ngIf",t.resourceError),q(1),$("ngIf",!t.resourceError)}}function ohe(n,e){if(1&n){const t=Oi();Z(0,"button",11),ot("click",function(){return Sn(t),Cn(Me(2).deserialize())}),$e(1,"mat-icon",12),se()}}function ahe(n,e){if(1&n){const t=Oi();Z(0,"div",7),ye(1,ohe,2,0,"button",8),Z(2,"button",9),ot("click",function(){return Sn(t),Cn(Me().serializeBlockReversible())}),$e(3,"mat-icon",10),se()()}if(2&n){const t=Me();q(1),$("ngIf",t.isInReversibleSerializationState),q(1),$("disabled",t.isInReversibleSerializationState)}}function lhe(n,e){}let yb=(()=>{class n{constructor(t,i,r){this.mainService=t,this.eelDelegate=i,this.cdr=r,this._component=null,this._componentChangedSub=null,this.isInReversibleSerializationState=!1,this.destroyed$=new Ve,this.resourceSet$=new Ve,this._resource=null,this._resourceError=null,this._resourceDescription=""}get resource(){return this._resource}get resourceError(){return this._resourceError}set resourceDescription(t){this._component&&(this._component.instance.resourceDescription=t)}set resource(t){if(this.resourceSet$.next(),t?t.data?.error_class?(this._resourceError=t,this._resource=null):(this._resource=t,this._resourceError=null):(this._resource=null,this._resourceError=null),this.dataBlockUiHost.viewContainerRef.clear(),this._resource&&this._resource.schema.block_class_mro){{let r;for(const s of this._resource.schema.block_class_mro.split("__"))if(r=n.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+this._resource.schema.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._componentChangedSub=this._component.instance.changed.pipe(dt(this.destroyed$),dt(this.resourceSet$)).subscribe(()=>{const s=this._resource.id,o=this._resource.data;if(o instanceof Array)for(let a=0;a<o.length;a++)this.mainService.dataBlockChange$.next([rl(s,a),o[a]]);else if((0,WM.isObject)(o))for(const a in o)this.mainService.dataBlockChange$.next([rl(s,a),o[a]]);else this.mainService.dataBlockChange$.next([s,o])})}this._component.instance.resource=this._resource,this._component.instance.resourceDescription=this._resourceDescription}}serializeBlockReversible(){var t=this;return on(function*(){if(!t.resource)return;const[i,r]=yield t.eelDelegate.serializeReversible(t.resource.id,[]),s=i.reduce((o,a)=>{let l=0;for(;l<o.length&&l<a.length&&o[l]===a[l];)l++;return o.substring(0,l)});yield t.eelDelegate.openFileWithSystemApp(s),t.isInReversibleSerializationState=r,t.cdr.markForCheck()})()}deserialize(){var t=this;return on(function*(){t.resource&&(yield t.mainService.deserializeResource(t.resource.id),t.isInReversibleSerializationState=!1,t.cdr.markForCheck())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return n.DATA_BLOCK_COMPONENTS_MAP={ArrayBlock:rR,SubByteArrayBlock:rR,BitFlagsBlock:Ane,BytesBlock:gte,CompoundBlock:Th,DataBlock:Oee,DelegateBlock:R5,EnumByteBlock:Yte,IntegerBlock:zee,UTF8Block:Wee,AngleBlock:bte,AnyBitmapBlock:dte,BasePalette:pte,OripGeometry:Lue,ShpiBlock:Ste,TriMap:que,WwwwBlock:Cte,FenceType:nhe},n.\u0275fac=function(t){return new(t||n)(D(wm),D(Eh),D(ai))},n.\u0275cmp=bt({type:n,selectors:[["app-editor"]],viewQuery:function(t,i){if(1&t&&oi(UV,7),2&t){let r;kt(r=Ot())&&(i.dataBlockUiHost=r.first)}},inputs:{resourceDescription:"resourceDescription",resource:"resource"},decls:4,vars:4,consts:[["id","error-spinner-wrapper",4,"ngIf"],["id","actionsOverlay",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"],["id","actionsOverlay"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"]],template:function(t,i){if(1&t&&(ye(0,she,3,2,"div",0),ye(1,ahe,4,2,"div",1),gn(2,"async"),ye(3,lhe,0,0,"ng-template",2)),2&t){let r;$("ngIf",!i.resource||i.resourceError),q(1),$("ngIf",(null==i.resource||null==i.resource.schema?null:i.resource.schema.serializable_to_disc)&&(null==i.resource?null:i.resource.name)!=(null==(r=En(2,2,i.mainService.resource$))?null:r.name))}},dependencies:[Di,BQ,Ks,SI,kV,tk,UV,Nd],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #actionsOverlay[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0}),n})();function che(n,e){1&n&&$e(0,"mat-icon",20)}function dhe(n,e){1&n&&$e(0,"mat-icon",21)}function uhe(n,e){if(1&n){const t=Oi();Z(0,"button",22),ot("click",function(){return Sn(t),Cn(Me().deserialize())}),$e(1,"mat-icon",23),se()}}function hhe(n,e){if(1&n){const t=Oi();Z(0,"button",24),ot("click",function(){return Sn(t),Cn(Me().serializeBlockReversible())}),$e(1,"mat-icon",25),se()}2&n&&$("disabled",Me().isInReversibleSerializationState)}function fhe(n,e){1&n&&(Z(0,"button",26),$e(1,"mat-icon",27),se()),2&n&&(Me(),$("matMenuTriggerFor",zr(32)))}function phe(n,e){if(1&n){const t=Oi();Z(0,"button",28),ot("click",function(){const s=Sn(t).$implicit;return Cn(Me().runCustomAction(s))}),Z(1,"span"),it(2),se()()}if(2&n){const t=e.$implicit;q(2),$i(t.title)}}const mhe=function(){return[]};let ghe=(()=>{class n{constructor(t,i,r,s,o){this.eelDelegate=t,this.mainService=i,this.dialog=r,this.snackBar=s,this.cdr=o,this.isInReversibleSerializationState=!1}serializeBlockReversible(){var t=this;return on(function*(){const i=Object.entries(t.mainService.changedDataBlocks).filter(([a,l])=>"__has_external_changes__"!=a),[r,s]=yield t.eelDelegate.serializeReversible(t.mainService.resource$.getValue().id,i.map(([a,l])=>({id:a,value:l}))),o=r.reduce((a,l)=>{let c=0;for(;c<a.length&&c<l.length&&a[c]===l[c];)c++;return a.substring(0,c)});yield t.eelDelegate.openFileWithSystemApp(o),t.isInReversibleSerializationState=s,t.cdr.markForCheck()})()}deserialize(){var t=this;return on(function*(){yield t.mainService.deserializeResource(t.mainService.resource$.getValue().name),t.isInReversibleSerializationState=!1,t.cdr.markForCheck()})()}saveResource(){var t=this;return on(function*(){try{const i=Object.entries(t.mainService.changedDataBlocks).filter(([r,s])=>"__has_external_changes__"!=r);yield t.eelDelegate.saveFile(i.map(([r,s])=>({id:r,value:s}))),t.mainService.clearUnsavedChanges(),t.snackBar.open("File Saved!","OK",{duration:1500})}catch(i){t.snackBar.open("Error while saving file! "+i.errorText,"OK :(",{duration:5e3})}})()}toggleUnknownsVisibility(){this.mainService.hideHiddenFields$.next(!this.mainService.hideHiddenFields$.getValue())}serializeResource(){var t=this;return on(function*(){const r=(yield t.eelDelegate.serializeResource(t.mainService.resource$.getValue().name)).reduce((s,o)=>{let a=0;for(;a<s.length&&a<o.length&&s[a]===o[a];)a++;return s.substring(0,a)});yield t.eelDelegate.openFileWithSystemApp(r)})()}reloadResource(){var t=this;return on(function*(){if(t.mainService.hasUnsavedChanges){let r=t.dialog.open(q3,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield EI(r.afterClosed())))return}const i=t.mainService.eelDelegate.openedResourcePath$.getValue();i&&t.eelDelegate.openFile(i,!0).then(),t.cdr.markForCheck()})()}runCustomAction(t){var i=this;return on(function*(){if(i.mainService.hasUnsavedChanges){let o=i.dialog.open(q3,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield EI(o.afterClosed())))return;yield i.saveResource()}let r=i.dialog.open(nJ,{data:t});const s=yield EI(r.afterClosed());if(s)try{yield i.mainService.runCustomAction(t,s),i.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){i.mainService.clearUnsavedChanges(),i.reloadResource().then(),i.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}}return n.\u0275fac=function(t){return new(t||n)(D(Eh),D(wm),D(IM),D(_J),D(ai))},n.\u0275cmp=bt({type:n,selectors:[["app-root"]],decls:35,vars:34,consts:[["color","primary"],[1,"flex-spacer"],["mat-icon-button","","matTooltip","Show/hide hidden fields",3,"click"],["fontIcon","visibility_off",4,"ngIf"],["fontIcon","visibility_on",4,"ngIf"],["vertical",""],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click",4,"ngIf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["mat-icon-button","","matTooltip","Reload file from disk",3,"disabled","click"],["fontIcon","refresh"],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[3,"resource"],["id","bmac"],["href","https://www.buymeacoffee.com/andygura","target","_blank"],["src","https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png","alt","Buy Me A Coffee",2,"height","60px !important","width","217px !important"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["fontIcon","visibility_off"],["fontIcon","visibility_on"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(t,i){if(1&t&&(Z(0,"mat-toolbar",0)(1,"span"),it(2),gn(3,"async"),se(),$e(4,"span",1),Z(5,"button",2),ot("click",function(){return i.toggleUnknownsVisibility()}),ye(6,che,1,0,"mat-icon",3),gn(7,"async"),ye(8,dhe,1,0,"mat-icon",4),gn(9,"async"),se(),$e(10,"mat-divider",5),ye(11,uhe,2,0,"button",6),ye(12,hhe,2,1,"button",7),gn(13,"async"),ye(14,fhe,2,1,"button",8),gn(15,"async"),Z(16,"button",9),ot("click",function(){return i.reloadResource()}),gn(17,"async"),$e(18,"mat-icon",10),se(),$e(19,"mat-divider",5),Z(20,"button",11),ot("click",function(){return i.saveResource()}),gn(21,"async"),$e(22,"mat-icon",12),se()(),Z(23,"div",13),$e(24,"app-editor",14),gn(25,"async"),gn(26,"async"),gn(27,"async"),Z(28,"div",15)(29,"a",16),$e(30,"img",17),se()()(),Z(31,"mat-menu",null,18),ye(33,phe,3,1,"button",19),gn(34,"async"),se()),2&t){let r,s,o,a;q(2),Fp("",(null==(r=En(3,11,i.mainService.resource$))?null:r.name)||"...","",i.mainService.hasUnsavedChanges?"*":"",""),q(4),$("ngIf",En(7,13,i.mainService.hideHiddenFields$)),q(2),$("ngIf",!En(9,15,i.mainService.hideHiddenFields$)),q(3),$("ngIf",i.isInReversibleSerializationState),q(1),$("ngIf",null==(s=En(13,17,i.mainService.resource$))?null:s.schema.serializable_to_disc),q(2),$("ngIf",(null==(o=En(15,19,i.mainService.resource$))||null==o.schema.custom_actions?null:o.schema.custom_actions.length)>0),q(2),$("disabled",!En(17,21,i.mainService.eelDelegate.openedResourcePath$)),q(4),$("disabled",!En(21,23,i.mainService.resource$)||!i.mainService.hasUnsavedChanges),q(4),$("resource",En(25,25,i.mainService.customActionRunning$)?null:En(26,27,i.mainService.resource$)||En(27,29,i.mainService.error$)),q(9),$("ngForOf",(null==(a=En(34,31,i.mainService.resource$))?null:a.schema.custom_actions)||co(33,mhe))}},dependencies:[ga,Di,wJ,SJ,Ks,SI,kV,Tee,ZM,Pee,yb,Nd],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}#content-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem;height:100%}#bmac[_ngcontent-%COMP%]{text-align:end;margin-top:1rem}mat-divider[_ngcontent-%COMP%]{height:100%;margin:0 16px}"],changeDetection:0}),n})();function P5(n){return new fe(3e3,!1)}function Zhe(){return typeof window<"u"&&typeof window.document<"u"}function nk(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function _u(n){switch(n.length){case 0:return new wy;case 1:return n[0];default:return new L3(n)}}function k5(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(i.forEach(u=>{const h=u.get("offset"),p=h==l,m=p&&c||new Map;u.forEach((g,b)=>{let y=b,v=g;if("offset"!==b)switch(y=e.normalizePropertyName(y,o),v){case xI:v=r.get(b);break;case Bc:v=s.get(b);break;default:v=e.normalizeStyleValue(b,y,v,o)}m.set(y,v)}),p||a.push(m),c=m,l=h}),o.length)throw function Uhe(n){return new fe(3502,!1)}();return a}function ik(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&rk(t,"start",n)));break;case"done":n.onDone(()=>i(t&&rk(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&rk(t,"destroy",n)))}}function rk(n,e,t){const s=sk(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function sk(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Go(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function O5(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let ok=(n,e)=>!1,L5=(n,e,t)=>[],F5=null;function ak(n){const e=n.parentNode||n.host;return e===F5?null:e}(nk()||typeof Element<"u")&&(Zhe()?(F5=(()=>document.documentElement)(),ok=(n,e)=>{for(;e;){if(e===n)return!0;e=ak(e)}return!1}):ok=(n,e)=>n.contains(e),L5=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let df=null,N5=!1;const B5=ok,U5=L5;let V5=(()=>{class n{validateStyleProperty(t){return function Jhe(n){df||(df=function efe(){return typeof document<"u"?document.body:null}()||{},N5=!!df.style&&"WebkitAppearance"in df.style);let e=!0;return df.style&&!function Qhe(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in df.style,!e&&N5&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in df.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return B5(t,i)}getParentElement(t){return ak(t)}query(t,i,r){return U5(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new wy(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})(),lk=(()=>{class n{}return n.NOOP=new V5,n})();const tfe=1e3,ck="ng-enter",TC="ng-leave",DC="ng-trigger",IC=".ng-trigger",H5="ng-animating",dk=".ng-animating";function ed(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:uk(parseFloat(e[1]),e[2])}function uk(n,e){return"s"===e?n*tfe:n}function RC(n,e,t){return n.hasOwnProperty("duration")?n:function ife(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(P5()),{duration:0,delay:0,easing:""};r=uk(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=uk(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function _he(){return new fe(3100,!1)}()),a=!0),s<0&&(e.push(function vhe(){return new fe(3101,!1)}()),a=!0),a&&e.splice(l,0,P5())}return{duration:r,delay:s,easing:o}}(n,e,t)}function bb(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function G5(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function vu(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function $5(n,e,t){return t?e+":"+t+";":""}function j5(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=$5(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=$5(0,afe(t),n.style[t]));n.setAttribute("style",e)}function Ql(n,e,t){n.style&&(e.forEach((i,r)=>{const s=fk(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),nk()&&j5(n))}function uf(n,e){n.style&&(e.forEach((t,i)=>{const r=fk(i);n.style[r]=""}),nk()&&j5(n))}function xb(n){return Array.isArray(n)?1==n.length?n[0]:k3(n):n}const hk=new RegExp("{{\\s*(.+?)\\s*}}","g");function X5(n){let e=[];if("string"==typeof n){let t;for(;t=hk.exec(n);)e.push(t[1]);hk.lastIndex=0}return e}function wb(n,e,t){const i=n.toString(),r=i.replace(hk,(s,o)=>{let a=e[o];return null==a&&(t.push(function bhe(n){return new fe(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function PC(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const ofe=/-+([a-z0-9])/g;function fk(n){return n.replace(ofe,(...e)=>e[1].toUpperCase())}function afe(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Wo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function xhe(n){return new fe(3004,!1)}()}}function q5(n,e){return window.getComputedStyle(n)[e]}const LC="*";function ffe(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function pfe(n,e,t){if(":"==n[0]){const l=function mfe(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function Lhe(n){return new fe(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function Ohe(n){return new fe(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(Y5(r,o));"<"==s[0]&&!(r==LC&&o==LC)&&e.push(Y5(o,r))}(i,t,e)):t.push(n),t}const FC=new Set(["true","1"]),NC=new Set(["false","0"]);function Y5(n,e){const t=FC.has(n)||NC.has(n),i=FC.has(e)||NC.has(e);return(r,s)=>{let o=n==LC||n==r,a=e==LC||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?FC.has(n):NC.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?FC.has(e):NC.has(e)),o&&a}}const gfe=new RegExp("s*:selfs*,?","g");function pk(n,e,t,i){return new _fe(n).build(e,t,i)}class _fe{constructor(e){this._driver=e}build(e,t,i){const r=new bfe(t);return this._resetContextStyleTimingState(r),Wo(this,xb(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Mhe(){return new fe(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function She(){return new fe(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{X5(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(PC(s.values()),t.errors.push(function Che(n,e){return new fe(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Wo(this,xb(e.animation),t);return{type:1,matchers:ffe(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:hf(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Wo(this,i,t)),options:hf(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Wo(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:hf(e.options)}}visitAnimate(e,t){const i=function wfe(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return mk(RC(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=mk(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=RC(t,e);return mk(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Si({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};i.easing&&(c.easing=i.easing),o=Si(c)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Bc?i.push(a):t.errors.push(new fe(3002,!1)):i.push(G5(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),u=c.get(l);let h=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(t.errors.push(function Ahe(n,e,t,i,r){return new fe(3010,!1)}()),h=!1),s=u.startTime),h&&c.set(l,{startTime:s,endTime:r}),t.options&&function sfe(n,e,t){const i=e.params||{},r=X5(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function yhe(n){return new fe(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function The(){return new fe(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,c=0;const u=e.steps.map(v=>{const M=this._makeStyleAst(v,t);let x=null!=M.offset?M.offset:function xfe(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),S=0;return null!=x&&(s++,S=M.offset=x),l=l||S<0||S>1,a=a||S<c,c=S,o.push(S),M});l&&t.errors.push(function Dhe(){return new fe(3012,!1)}()),a&&t.errors.push(function Ihe(){return new fe(3200,!1)}());const h=e.steps.length;let p=0;s>0&&s<h?t.errors.push(function Rhe(){return new fe(3202,!1)}()):0==s&&(p=1/(h-1));const m=h-1,g=t.currentTime,b=t.currentAnimateTimings,y=b.duration;return u.forEach((v,M)=>{const x=p>0?M==m?1:p*M:o[M],S=x*y;t.currentTime=g+b.delay+S,b.duration=S,this._validateStyleAst(v,t),v.offset=x,i.styles.push(v)}),i}visitReference(e,t){return{type:8,animation:Wo(this,xb(e.animation),t),options:hf(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:hf(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:hf(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function vfe(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(gfe,"")),n=n.replace(/@\*/g,IC).replace(/@\w+/g,t=>IC+"-"+t.slice(1)).replace(/:animating/g,dk),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Go(t.collectedStyles,t.currentQuerySelector,new Map);const a=Wo(this,xb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:hf(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Phe(){return new fe(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:RC(e.timings,t.errors,!0);return{type:12,animation:Wo(this,xb(e.animation),t),timings:i,options:null}}}class bfe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function hf(n){return n?(n=bb(n)).params&&(n.params=function yfe(n){return n?bb(n):null}(n.params)):n={},n}function mk(n,e,t){return{duration:n,delay:e,easing:t}}function gk(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class BC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Cfe=new RegExp(":enter","g"),Afe=new RegExp(":leave","g");function _k(n,e,t,i,r,s=new Map,o=new Map,a,l,c=[]){return(new Tfe).buildKeyframes(n,e,t,i,r,s,o,a,l,c)}class Tfe{buildKeyframes(e,t,i,r,s,o,a,l,c,u=[]){c=c||new BC;const h=new vk(e,t,c,r,s,u,[]);h.options=l;const p=l.delay?ed(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([o],null,h.errors,l),Wo(this,i,h);const m=h.timelines.filter(g=>g.containsAnimation());if(m.length&&a.size){let g;for(let b=m.length-1;b>=0;b--){const y=m[b];if(y.element===t){g=y;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,h.errors,l)}return m.length?m.map(g=>g.buildKeyframes()):[gk(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:ed(wb(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?ed(i.duration):null,a=null!=i.delay?ed(i.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Wo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=UC);const o=ed(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Wo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?ed(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Wo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return RC(t.params?wb(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?ed(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=UC);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{t.currentQueryIndex=u;const h=t.createSubContext(e.options,c);s&&h.delayNextStep(s),c===t.element&&(l=h.currentTimeline),Wo(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const u=t.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;Wo(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}}const UC={};class vk{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=UC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new VC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=ed(i.duration)),null!=i.delay&&(r.delay=ed(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=wb(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new vk(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=UC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new Dfe(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Cfe,"."+this._enterClassName)).replace(Afe,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=i);0!==i&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&0==a.length&&o.push(function khe(n){return new fe(3014,!1)}()),a}}class VC{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new VC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Bc),this._currentKeyframe.set(t,Bc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function Ife(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Bc)}else vu(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=wb(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Bc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=vu(a,new Map,this._backFill);c.forEach((u,h)=>{u===xI?e.add(h):u===Bc&&t.add(h)}),i||c.set("offset",l/this.duration),r.push(c)});const s=e.size?PC(e.values()):[],o=t.size?PC(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return gk(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Dfe extends VC{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=vu(e[0]);l.set("offset",0),s.push(l);const c=vu(e[0]);c.set("offset",Q5(a)),s.push(c);const u=e.length-1;for(let h=1;h<=u;h++){let p=vu(e[h]);const m=p.get("offset");p.set("offset",Q5((t+m*i)/o)),s.push(p)}i=o,t=0,r="",e=s}return gk(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function Q5(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class yk{}const Rfe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Pfe extends yk{normalizePropertyName(e,t){return fk(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(Rfe.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function whe(n,e){return new fe(3005,!1)}())}return o+s}}function J5(n,e,t,i,r,s,o,a,l,c,u,h,p){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:p}}const bk={};class eG{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function kfe(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,c,u){const h=[],p=this.ast.options&&this.ast.options.params||bk,g=this.buildStyles(i,a&&a.params||bk,h),b=l&&l.params||bk,y=this.buildStyles(r,b,h),v=new Set,M=new Map,x=new Map,S="void"===r,P={params:Ofe(b,p),delay:this.ast.options?.delay},A=u?[]:_k(e,t,this.ast.animation,s,o,g,y,P,c,h);let R=0;if(A.forEach(E=>{R=Math.max(E.duration+E.delay,R)}),h.length)return J5(t,this._triggerName,i,r,S,g,y,[],[],M,x,R,h);A.forEach(E=>{const k=E.element,K=Go(M,k,new Set);E.preStyleProps.forEach(we=>K.add(we));const ue=Go(x,k,new Set);E.postStyleProps.forEach(we=>ue.add(we)),k!==t&&v.add(k)});const V=PC(v.values());return J5(t,this._triggerName,i,r,S,g,y,A,V,M,x,R)}}function Ofe(n,e){const t=bb(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class Lfe{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=bb(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=wb(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class Nfe{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Lfe(r.style,r.options&&r.options.params||{},i))}),tG(this.states,"true","1"),tG(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new eG(e,r,this.states))}),this.fallbackTransition=function Bfe(n,e,t){return new eG(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function tG(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const Ufe=new BC;class Vfe{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],r=[],s=pk(this._driver,t,i,r);if(i.length)throw function Vhe(n){return new fe(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=k5(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=_k(this._driver,t,s,ck,TC,new Map,new Map,i,Ufe,r),o.forEach(u=>{const h=Go(a,u.element,new Map);u.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(function zhe(){return new fe(3300,!1)}()),o=[]),r.length)throw function Hhe(n){return new fe(3504,!1)}();a.forEach((u,h)=>{u.forEach((p,m)=>{u.set(m,this._driver.computeStyle(h,m,Bc))})});const c=_u(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function Ghe(n){return new fe(3301,!1)}();return t}listen(e,t,i,r){const s=sk(t,"","","");return ik(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const nG="ng-animate-queued",xk="ng-animate-disabled",$fe=[],iG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},jfe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ea="__ng_removed";class wk{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function Kfe(n){return n??null}(i?e.value:e),i){const s=bb(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Mb="void",Mk=new wk(Mb);class Xfe{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Aa(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function Whe(n,e){return new fe(3302,!1)}();if(null==i||0==i.length)throw function $he(n){return new fe(3303,!1)}();if(!function Zfe(n){return"start"==n||"done"==n}(i))throw function jhe(n,e){return new fe(3400,!1)}();const s=Go(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Go(this._engine.statesByElement,e,new Map);return a.has(t)||(Aa(e,DC),Aa(e,DC+"-"+t),a.set(t,Mk)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Xhe(n){return new fe(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new Sk(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(Aa(e,DC),Aa(e,DC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new wk(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=Mk),c.value!==Mb&&l.value===c.value){if(!function epe(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const b=[],y=s.matchStyles(l.value,l.params,b),v=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{uf(e,y),Ql(e,v)})}return}const p=Go(this._engine.playersByElement,e,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let m=s.matchTransition(l.value,c.value,e,c.params),g=!1;if(!m){if(!r)return;m=s.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:g}),g||(Aa(e,nG),o.onStart(()=>{Mg(e,nG)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const y=this._engine.playersByElement.get(e);if(y){let v=y.indexOf(o);v>=0&&y.splice(v,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,IC,!0);i.forEach(r=>{if(r[Ea])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(e,c,Mb,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&_u(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=i.get(o)||Mk,u=new wk(Mb),h=new Sk(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ea];(!s||s===iG)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Aa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=sk(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,ik(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class qfe{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new Xfe(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(zC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!zC(t))return;const s=t[Ea];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Aa(e,xk)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Mg(e,xk))}removeNode(e,t,i,r){if(zC(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ea]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return zC(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,IC,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,dk,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return _u(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ea];if(t&&t.setForRemoval){if(e[Ea]=iG,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(xk)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)Aa(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?_u(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function qhe(n){return new fe(3402,!1)}()}_flushAnimations(e,t){const i=new BC,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(W=>{u.add(W);const J=this.driver.query(W,".ng-animate-queued",!0);for(let ne=0;ne<J.length;ne++)u.add(J[ne])});const h=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=oG(p,this.collectedEnterElements),g=new Map;let b=0;m.forEach((W,J)=>{const ne=ck+b++;g.set(J,ne),W.forEach(re=>Aa(re,ne))});const y=[],v=new Set,M=new Set;for(let W=0;W<this.collectedLeaveElements.length;W++){const J=this.collectedLeaveElements[W],ne=J[Ea];ne&&ne.setForRemoval&&(y.push(J),v.add(J),ne.hasAnimation?this.driver.query(J,".ng-star-inserted",!0).forEach(re=>v.add(re)):M.add(J))}const x=new Map,S=oG(p,Array.from(v));S.forEach((W,J)=>{const ne=TC+b++;x.set(J,ne),W.forEach(re=>Aa(re,ne))}),e.push(()=>{m.forEach((W,J)=>{const ne=g.get(J);W.forEach(re=>Mg(re,ne))}),S.forEach((W,J)=>{const ne=x.get(J);W.forEach(re=>Mg(re,ne))}),y.forEach(W=>{this.processLeaveNode(W)})});const P=[],A=[];for(let W=this._namespaceList.length-1;W>=0;W--)this._namespaceList[W].drainQueuedTransitions(t).forEach(ne=>{const re=ne.player,_e=ne.element;if(P.push(re),this.collectedEnterElements.length){const Ne=_e[Ea];if(Ne&&Ne.setForMove){if(Ne.previousTriggersValues&&Ne.previousTriggersValues.has(ne.triggerName)){const pt=Ne.previousTriggersValues.get(ne.triggerName),mt=this.statesByElement.get(ne.element);if(mt&&mt.has(ne.triggerName)){const Je=mt.get(ne.triggerName);Je.value=pt,mt.set(ne.triggerName,Je)}}return void re.destroy()}}const Se=!h||!this.driver.containsElement(h,_e),Oe=x.get(_e),le=g.get(_e),me=this._buildInstruction(ne,i,le,Oe,Se);if(me.errors&&me.errors.length)return void A.push(me);if(Se)return re.onStart(()=>uf(_e,me.fromStyles)),re.onDestroy(()=>Ql(_e,me.toStyles)),void r.push(re);if(ne.isFallbackTransition)return re.onStart(()=>uf(_e,me.fromStyles)),re.onDestroy(()=>Ql(_e,me.toStyles)),void r.push(re);const Be=[];me.timelines.forEach(Ne=>{Ne.stretchStartingKeyframe=!0,this.disabledNodes.has(Ne.element)||Be.push(Ne)}),me.timelines=Be,i.append(_e,me.timelines),o.push({instruction:me,player:re,element:_e}),me.queriedElements.forEach(Ne=>Go(a,Ne,[]).push(re)),me.preStyleProps.forEach((Ne,pt)=>{if(Ne.size){let mt=l.get(pt);mt||l.set(pt,mt=new Set),Ne.forEach((Je,Dt)=>mt.add(Dt))}}),me.postStyleProps.forEach((Ne,pt)=>{let mt=c.get(pt);mt||c.set(pt,mt=new Set),Ne.forEach((Je,Dt)=>mt.add(Dt))})});if(A.length){const W=[];A.forEach(J=>{W.push(function Yhe(n,e){return new fe(3505,!1)}())}),P.forEach(J=>J.destroy()),this.reportError(W)}const R=new Map,V=new Map;o.forEach(W=>{const J=W.element;i.has(J)&&(V.set(J,J),this._beforeAnimationBuild(W.player.namespaceId,W.instruction,R))}),r.forEach(W=>{const J=W.element;this._getPreviousPlayers(J,!1,W.namespaceId,W.triggerName,null).forEach(re=>{Go(R,J,[]).push(re),re.destroy()})});const E=y.filter(W=>lG(W,l,c)),k=new Map;sG(k,this.driver,M,c,Bc).forEach(W=>{lG(W,l,c)&&E.push(W)});const ue=new Map;m.forEach((W,J)=>{sG(ue,this.driver,new Set(W),l,xI)}),E.forEach(W=>{const J=k.get(W),ne=ue.get(W);k.set(W,new Map([...Array.from(J?.entries()??[]),...Array.from(ne?.entries()??[])]))});const we=[],G=[],te={};o.forEach(W=>{const{element:J,player:ne,instruction:re}=W;if(i.has(J)){if(u.has(J))return ne.onDestroy(()=>Ql(J,re.toStyles)),ne.disabled=!0,ne.overrideTotalTime(re.totalTime),void r.push(ne);let _e=te;if(V.size>1){let Oe=J;const le=[];for(;Oe=Oe.parentNode;){const me=V.get(Oe);if(me){_e=me;break}le.push(Oe)}le.forEach(me=>V.set(me,_e))}const Se=this._buildAnimation(ne.namespaceId,re,R,s,ue,k);if(ne.setRealPlayer(Se),_e===te)we.push(ne);else{const Oe=this.playersByElement.get(_e);Oe&&Oe.length&&(ne.parentPlayer=_u(Oe)),r.push(ne)}}else uf(J,re.fromStyles),ne.onDestroy(()=>Ql(J,re.toStyles)),G.push(ne),u.has(J)&&r.push(ne)}),G.forEach(W=>{const J=s.get(W.element);if(J&&J.length){const ne=_u(J);W.setRealPlayer(ne)}}),r.forEach(W=>{W.parentPlayer?W.syncPlayerEvents(W.parentPlayer):W.destroy()});for(let W=0;W<y.length;W++){const J=y[W],ne=J[Ea];if(Mg(J,TC),ne&&ne.hasAnimation)continue;let re=[];if(a.size){let Se=a.get(J);Se&&Se.length&&re.push(...Se);let Oe=this.driver.query(J,dk,!0);for(let le=0;le<Oe.length;le++){let me=a.get(Oe[le]);me&&me.length&&re.push(...me)}}const _e=re.filter(Se=>!Se.destroyed);_e.length?Qfe(this,J,_e):this.processLeaveNode(J)}return y.length=0,we.forEach(W=>{this.players.push(W),W.onDone(()=>{W.destroy();const J=this.players.indexOf(W);this.players.splice(J,1)}),W.play()}),we}elementContainsData(e,t){let i=!1;const r=t[Ea];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Mb;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,u=c!==s,h=Go(i,c,[]);this._getPreviousPlayers(c,u,o,a,t.toState).forEach(m=>{const g=m.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),m.destroy(),h.push(m)})}uf(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,c=[],u=new Set,h=new Set,p=t.timelines.map(g=>{const b=g.element;u.add(b);const y=b[Ea];if(y&&y.removedBeforeQueried)return new wy(g.duration,g.delay);const v=b!==l,M=function Jfe(n){const e=[];return aG(n,e),e}((i.get(b)||$fe).map(R=>R.getRealPlayer())).filter(R=>!!R.element&&R.element===b),x=s.get(b),S=o.get(b),P=k5(0,this._normalizer,0,g.keyframes,x,S),A=this._buildPlayer(g,P,M);if(g.subTimeline&&r&&h.add(b),v){const R=new Sk(e,a,b);R.setRealPlayer(A),c.push(R)}return A});c.forEach(g=>{Go(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>function Yfe(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,g.element,g))}),u.forEach(g=>Aa(g,H5));const m=_u(p);return m.onDestroy(()=>{u.forEach(g=>Mg(g,H5)),Ql(l,t.toStyles)}),h.forEach(g=>{Go(r,g,[]).push(m)}),m}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new wy(e.duration,e.delay)}}class Sk{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new wy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>ik(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Go(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function zC(n){return n&&1===n.nodeType}function rG(n,e){const t=n.style.display;return n.style.display=e??"none",t}function sG(n,e,t,i,r){const s=[];t.forEach(l=>s.push(rG(l)));const o=[];i.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const p=e.computeStyle(c,h,r);u.set(h,p),(!p||0==p.length)&&(c[Ea]=jfe,o.push(c))}),n.set(c,u)});let a=0;return t.forEach(l=>rG(l,s[a++])),o}function oG(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?i:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);l!==i&&t.get(l).push(a)}),t}function Aa(n,e){n.classList?.add(e)}function Mg(n,e){n.classList?.remove(e)}function Qfe(n,e,t){_u(t).onDone(()=>n.processLeaveNode(e))}function aG(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof L3?aG(i.players,e):e.push(i)}}function lG(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class HC{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new qfe(e,t,i),this._timelineEngine=new Vfe(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],u=pk(this._driver,s,l,c);if(l.length)throw function Bhe(n,e){return new fe(3404,!1)}();a=function Ffe(n,e,t){return new Nfe(n,e,t)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=O5(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=O5(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let npe=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ql(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ql(this._element,this._initialStyles),this._endStyles&&(Ql(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(uf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(uf(this._element,this._endStyles),this._endStyles=null),Ql(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Ck(n){let e=null;return n.forEach((t,i)=>{(function ipe(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class cG{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:q5(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class rpe{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return B5(e,t)}getParentElement(e){return ak(e)}query(e,t,i){return U5(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(m=>m instanceof cG);(function lfe(n,e){return 0===n||0===e})(i,r)&&u.forEach(m=>{m.currentSnapshot.forEach((g,b)=>c.set(b,g))});let h=function rfe(n){return n.length?n[0]instanceof Map?n:n.map(e=>G5(e)):[]}(t).map(m=>vu(m));h=function cfe(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,q5(n,a)))}}return e}(e,h,c);const p=function tpe(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Ck(e[0]),e.length>1&&(i=Ck(e[e.length-1]))):e instanceof Map&&(t=Ck(e)),t||i?new npe(n,t,i):null}(e,h);return new cG(e,h,l,p)}}let spe=(()=>{class n extends R3{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:Ao.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?k3(t):t;return dG(this._renderer,null,i,"register",[r]),new ope(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(Q(lh),Q(Ut))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();class ope extends GK{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new ape(this._id,e,t||{},this._renderer)}}class ape{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return dG(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function dG(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const uG="@.disabled";let lpe=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let u=this._rendererCache.get(s);return u||(u=new hG("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,t,u.name,u)};return i.data.animation.forEach(l),new cpe(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(Q(lh),Q(HC),Q(ft))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})();class hG{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==uG?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class cpe extends hG{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==uG?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function dpe(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function upe(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}const fG=[{provide:R3,useClass:spe},{provide:yk,useFactory:function fpe(){return new Pfe}},{provide:HC,useClass:(()=>{class n extends HC{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(Q(Ut),Q(lk),Q(yk),Q(Wp))},n.\u0275prov=ke({token:n,factory:n.\u0275fac}),n})()},{provide:lh,useFactory:function ppe(n,e,t){return new lpe(n,e,t)},deps:[Bw,HC,ft]}],Ek=[{provide:lk,useFactory:()=>new rpe},{provide:rs,useValue:"BrowserAnimations"},...fG],pG=[{provide:lk,useClass:V5},{provide:rs,useValue:"NoopAnimations"},...fG];let mpe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?pG:Ek}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:Ek,imports:[dN]}),n})();const mG=new ge("CdkAccordion");let gpe=0,_pe=(()=>{class n{get expanded(){return this._expanded}set expanded(t){t=An(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=An(t)}constructor(t,i,r){this.accordion=t,this._changeDetectorRef=i,this._expansionDispatcher=r,this._openCloseAllSubscription=cn.EMPTY,this.closed=new st,this.opened=new st,this.destroyed=new st,this.expandedChange=new st,this.id="cdk-accordion-child-"+gpe++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return n.\u0275fac=function(t){return new(t||n)(D(mG,12),D(ai),D(zV))},n.\u0275dir=Ae({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[zn([{provide:mG,useValue:void 0}])]}),n})(),vpe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({}),n})();const ype=["body"];function bpe(n,e){}const xpe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],wpe=["mat-expansion-panel-header","*","mat-action-row"];function Mpe(n,e){1&n&&$e(0,"span",2),2&n&&$("@indicatorRotate",Me()._getExpandedState())}const Spe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Cpe=["mat-panel-title","mat-panel-description","*"],gG=new ge("MAT_ACCORDION"),_G="225ms cubic-bezier(0.4,0.0,0.2,1)",vG={indicatorRotate:zl("indicatorRotate",[mo("collapsed, void",Si({transform:"rotate(0deg)"})),mo("expanded",Si({transform:"rotate(180deg)"})),qs("expanded <=> collapsed, void => collapsed",po(_G))]),bodyExpansion:zl("bodyExpansion",[mo("collapsed, void",Si({height:"0px",visibility:"hidden"})),mo("expanded",Si({height:"*",visibility:"visible"})),qs("expanded <=> collapsed, void => collapsed",po(_G))])},yG=new ge("MAT_EXPANSION_PANEL");let Epe=(()=>{class n{constructor(t,i){this._template=t,this._expansionPanel=i}}return n.\u0275fac=function(t){return new(t||n)(D(uo),D(yG,8))},n.\u0275dir=Ae({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),Ape=0;const bG=new ge("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let xG=(()=>{class n extends _pe{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=An(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}constructor(t,i,r,s,o,a,l){super(t,i,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new st,this.afterCollapse=new st,this._inputChanges=new Ve,this._headerId="mat-expansion-panel-header-"+Ape++,this._bodyAnimationDone=new Ve,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(wh((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Oo(null),Hn(()=>this.expanded&&!this._portal),Fi(1)).subscribe(()=>{this._portal=new sm(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,i=this._body.nativeElement;return t===i||i.contains(t)}return!1}}return n.\u0275fac=function(t){return new(t||n)(D(gG,12),D(ai),D(zV),D(is),D(Ut),D(rs,8),D(bG,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(t,i,r){if(1&t&&Xi(r,Epe,5),2&t){let s;kt(s=Ot())&&(i._lazyContent=s.first)}},viewQuery:function(t,i){if(1&t&&oi(ype,5),2&t){let r;kt(r=Ot())&&(i._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,i){2&t&&Pn("mat-expanded",i.expanded)("_mat-animation-noopable","NoopAnimations"===i._animationMode)("mat-expansion-panel-spacing",i._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[zn([{provide:gG,useValue:void 0},{provide:yG,useExisting:n}]),ht,Hi],ngContentSelectors:wpe,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(Sr(xpe),Xt(0),Z(1,"div",0,1),ot("@bodyExpansion.done",function(s){return i._bodyAnimationDone.next(s)}),Z(3,"div",2),Xt(4,1),ye(5,bpe,0,0,"ng-template",3),se(),Xt(6,2),se()),2&t&&(q(1),$("@bodyExpansion",i._getExpandedState())("id",i.id),Bt("aria-labelledby",i._headerId),q(4),$("cdkPortalOutlet",i._portal))},dependencies:[om],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[vG.bodyExpansion]},changeDetection:0}),n})();class Tpe{}const Dpe=b3(Tpe);let Ipe=(()=>{class n extends Dpe{constructor(t,i,r,s,o,a,l){super(),this.panel=t,this._element=i,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=cn.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Hn(u=>!(!u.hideToggle&&!u.togglePosition))):Ds;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=cs(t.opened,t.closed,c,t._inputChanges.pipe(Hn(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Hn(()=>t._containsFocus())).subscribe(()=>r.focusVia(i,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:tl(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,i){t?this._focusMonitor.focusVia(this._element,t,i):this._element.nativeElement.focus(i)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(t){return new(t||n)(D(xG,1),D(_t),D(Xd),D(ai),D(bG,8),D(rs,8),Ba("tabindex"))},n.\u0275cmp=bt({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,i){1&t&&ot("click",function(){return i._toggle()})("keydown",function(s){return i._keydown(s)}),2&t&&(Bt("id",i.panel._headerId)("tabindex",i.tabIndex)("aria-controls",i._getPanelId())("aria-expanded",i._isExpanded())("aria-disabled",i.panel.disabled),Dc("height",i._getHeaderHeight()),Pn("mat-expanded",i._isExpanded())("mat-expansion-toggle-indicator-after","after"===i._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===i._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===i._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ht],ngContentSelectors:Cpe,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,i){1&t&&(Sr(Spe),Z(0,"span",0),Xt(1),Xt(2,1),Xt(3,2),se(),ye(4,Mpe,1,1,"span",1)),2&t&&(Pn("mat-content-hide-toggle",!i._showToggle()),q(4),$("ngIf",i._showToggle()))},dependencies:[Di],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[vG.indicatorRotate]},changeDetection:0}),n})(),Rpe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),n})(),Ppe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Ae({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),kpe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[_a,qn,vpe,am]}),n})();function Ope(n,e){if(1&n&&(Z(0,"mat-option",19),it(1),se()),2&n){const t=e.$implicit;$("value",t),q(1),Er(" ",t," ")}}function Lpe(n,e){if(1&n){const t=Oi();Z(0,"mat-form-field",16)(1,"mat-select",17),ot("selectionChange",function(r){return Sn(t),Cn(Me(2)._changePageSize(r.value))}),ye(2,Ope,2,2,"mat-option",18),se()()}if(2&n){const t=Me(2);$("appearance",t._formFieldAppearance)("color",t.color),q(1),$("value",t.pageSize)("disabled",t.disabled)("aria-labelledby",t._pageSizeLabelId)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering),q(1),$("ngForOf",t._displayedPageSizeOptions)}}function Fpe(n,e){if(1&n&&(Z(0,"div",20),it(1),se()),2&n){const t=Me(2);q(1),$i(t.pageSize)}}function Npe(n,e){if(1&n&&(Z(0,"div",12)(1,"div",13),it(2),se(),ye(3,Lpe,3,8,"mat-form-field",14),ye(4,Fpe,2,1,"div",15),se()),2&n){const t=Me();q(1),t1("id",t._pageSizeLabelId),q(1),Er(" ",t._intl.itemsPerPageLabel," "),q(1),$("ngIf",t._displayedPageSizeOptions.length>1),q(1),$("ngIf",t._displayedPageSizeOptions.length<=1)}}function Bpe(n,e){if(1&n){const t=Oi();Z(0,"button",21),ot("click",function(){return Sn(t),Cn(Me().firstPage())}),Fr(),Z(1,"svg",7),$e(2,"path",22),se()()}if(2&n){const t=Me();$("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),Bt("aria-label",t._intl.firstPageLabel)}}function Upe(n,e){if(1&n){const t=Oi();Fr(),es(),Z(0,"button",23),ot("click",function(){return Sn(t),Cn(Me().lastPage())}),Fr(),Z(1,"svg",7),$e(2,"path",24),se()()}if(2&n){const t=Me();$("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),Bt("aria-label",t._intl.lastPageLabel)}}let WC=(()=>{class n{constructor(){this.changes=new Ve,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,i,r)=>{if(0==r||0==i)return`0 of ${r}`;const s=t*i;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+i,r):s+i} of ${r}`}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ke({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zpe={provide:WC,deps:[[new Io,new Dl,WC]],useFactory:function Vpe(n){return n||new WC}},Gpe=new ge("MAT_PAGINATOR_DEFAULT_OPTIONS"),Wpe=EM(RK(class{}));let $pe=(()=>{class n extends Wpe{get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(Xs(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=Xs(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(Xs(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(i=>Xs(i)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=An(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=An(t)}constructor(t,i,r){if(super(),this._intl=t,this._changeDetectorRef=i,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new st,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,i)=>t-i),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return n.\u0275fac=function(t){qa()},n.\u0275dir=Ae({type:n,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[ht]}),n})(),jpe=0,Xpe=(()=>{class n extends $pe{constructor(t,i,r){super(t,i,r),this._pageSizeLabelId="mat-paginator-page-size-label-"+jpe++,this._formFieldAppearance=r?.formFieldAppearance||"outline"}}return n.\u0275fac=function(t){return new(t||n)(D(WC),D(ai),D(Gpe,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[ht],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,i){1&t&&(Z(0,"div",0)(1,"div",1),ye(2,Npe,5,4,"div",2),Z(3,"div",3)(4,"div",4),it(5),se(),ye(6,Bpe,3,5,"button",5),Z(7,"button",6),ot("click",function(){return i.previousPage()}),Fr(),Z(8,"svg",7),$e(9,"path",8),se()(),es(),Z(10,"button",9),ot("click",function(){return i.nextPage()}),Fr(),Z(11,"svg",7),$e(12,"path",10),se()(),ye(13,Upe,3,5,"button",11),se()()()),2&t&&(q(2),$("ngIf",!i.hidePageSize),q(3),Er(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),q(1),$("ngIf",i.showFirstLastButtons),q(1),$("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("matTooltipPosition","above")("disabled",i._previousButtonsDisabled()),Bt("aria-label",i._intl.previousPageLabel),q(3),$("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("matTooltipPosition","above")("disabled",i._nextButtonsDisabled()),Bt("aria-label",i._intl.nextPageLabel),q(3),$("ngIf",i.showFirstLastButtons))},dependencies:[ga,Di,SI,Qd,Ly,mm,Ks],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),qpe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({providers:[zpe],imports:[_a,CI,WV,mV]}),n})();const Ype=["*"],eme=new ge("MAT_CARD_CONFIG");let wG=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}}return n.\u0275fac=function(t){return new(t||n)(D(eme,8))},n.\u0275cmp=bt({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,i){2&t&&Pn("mat-mdc-card-outlined","outlined"===i.appearance)("mdc-card--outlined","outlined"===i.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Ype,decls:1,vars:0,template:function(t,i){1&t&&(Sr(),Xt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),n})(),pme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n}),n.\u0275inj=jt({imports:[qn,_a,qn]}),n})(),mme=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Kt({type:n,bootstrap:[ghe]}),n.\u0275inj=jt({providers:[Eh,VV],imports:[dN,Dq,mpe,uQ,MJ,GM,JQ,kpe,cV,uV,mV,CI,gee,qpe,Mne,pme,WV,nZ,Rue,kee,hQ,vI]}),n})();Tu(Th,[ga,Di,Ks,yb],[Nd]),Tu(rR,[Uv,ga,Di,zv,Kd,Zd,Qd,xG,Ipe,Ppe,Rpe,Ks,Xpe,Ly,mm,yb],[]),Tu(sR,[ga,Di,eS,JM,wG,yb],[]),Tu(R5,[ga,Di,il,Ks,Ly,mm,yb],[]),G9().bootstrapModule(mme).catch(n=>console.error(n))},489:function(bo,Cs,qr){var Yt;bo=qr.nmd(bo),function(){var B,Yr=200,Ln="Expected a function",Da="__lodash_hash_undefined__",di="__lodash_placeholder__",ui=1,ls=2,As=4,Ts=1,xo=2,In=1,or=2,ec=4,jo=8,dl=16,Xo=32,ul=64,Ia=128,qo=256,nd=512,qC=800,Cg=16,Mn=1/0,Pa=9007199254740991,KC=17976931348623157e292,mf=NaN,Yo=4294967295,Ve=Yo-1,Eb=Yo>>>1,Ab=[["ary",Ia],["bind",In],["bindKey",or],["curry",jo],["curryRight",dl],["flip",nd],["partial",Xo],["partialRight",ul],["rearg",qo]],Gn="[object Arguments]",Bn="[object Array]",ZC="[object AsyncFunction]",Ye="[object Boolean]",tc="[object Date]",QC="[object DOMException]",id="[object Error]",gf="[object Function]",Tb="[object GeneratorFunction]",wo="[object Map]",_f="[object Number]",Rk="[object Null]",hl="[object Object]",JC="[object Promise]",eE="[object Proxy]",rd="[object RegExp]",Mo="[object Set]",nc="[object String]",vf="[object Symbol]",Eg="[object Undefined]",sd="[object WeakMap]",yu="[object ArrayBuffer]",od="[object DataView]",Ko="[object Float32Array]",yf="[object Float64Array]",Ag="[object Int8Array]",bf="[object Int16Array]",Tg="[object Int32Array]",Dg="[object Uint8Array]",Ig="[object Uint8ClampedArray]",Rg="[object Uint16Array]",Pg="[object Uint32Array]",nE=/\b__p \+= '';/g,iE=/\b(__p \+=) '' \+/g,rE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Db=/&(?:amp|lt|gt|quot|#39);/g,Ib=/[&<>"']/g,Pk=RegExp(Db.source),kg=RegExp(Ib.source),Rb=/<%-([\s\S]+?)%>/g,Pb=/<%([\s\S]+?)%>/g,Og=/<%=([\s\S]+?)%>/g,kb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,sE=/^\w*$/,Ob=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,xf=/[\\^$.*+?()[\]{}|]/g,Lb=RegExp(xf.source),wf=/^\s+/,ar=/\s/,oE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,aE=/\{\n\/\* \[wrapped with (.+)\] \*/,lE=/,? & /,cE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fb=/[()=,{}\[\]\/\s]/,dE=/\\(\\)?/g,uE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zo=/\w*$/,hE=/^[-+]0x[0-9a-f]+$/i,Ji=/^0b[01]+$/i,ad=/^\[object .+?Constructor\]$/,Ds=/^0o[0-7]+$/i,kk=/^(?:0|[1-9]\d*)$/,fE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bu=/($^)/,Lg=/['\n\r\u2028\u2029\\]/g,xu="\\ud800-\\udfff",Fg="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Bb="\\u2700-\\u27bf",Ub="a-z\\xdf-\\xf6\\xf8-\\xff",zb="A-Z\\xc0-\\xd6\\xd8-\\xde",Ri="\\ufe0e\\ufe0f",cs="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ng="["+xu+"]",Zn="["+cs+"]",ld="["+Fg+"]",ri="\\d+",Bg="["+Bb+"]",Hb="["+Ub+"]",Qn="[^"+xu+cs+ri+Bb+Ub+zb+"]",wt="\\ud83c[\\udffb-\\udfff]",Mf="[^"+xu+"]",Gb="(?:\\ud83c[\\udde6-\\uddff]){2}",cd="[\\ud800-\\udbff][\\udc00-\\udfff]",fe="["+zb+"]",zt="(?:"+Hb+"|"+Qn+")",jn="(?:"+fe+"|"+Qn+")",Wb="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",vE="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",$b="(?:"+ld+"|"+wt+")?",Cu="["+Ri+"]?",bE=Cu+$b+"(?:\\u200d(?:"+[Mf,Gb,cd].join("|")+")"+Cu+$b+")*",fl="(?:"+[Bg,Gb,cd].join("|")+")"+bE,Lk="(?:"+[Mf+ld+"?",ld,Gb,cd,Ng].join("|")+")",Fk=RegExp("['\u2019]","g"),Nk=RegExp(ld,"g"),jb=RegExp(wt+"(?="+wt+")|"+Lk+bE,"g"),xE=RegExp([fe+"?"+Hb+"+"+Wb+"(?="+[Zn,fe,"$"].join("|")+")",jn+"+"+vE+"(?="+[Zn,fe+zt,"$"].join("|")+")",fe+"?"+zt+"+"+Wb,fe+"+"+vE,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ri,fl].join("|"),"g"),Bk=RegExp("[\\u200d"+xu+Fg+Ri+"]"),wE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Uk=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],no=-1,yt={};yt[Ko]=yt[yf]=yt[Ag]=yt[bf]=yt[Tg]=yt[Dg]=yt[Ig]=yt[Rg]=yt[Pg]=!0,yt[Gn]=yt[Bn]=yt[yu]=yt[Ye]=yt[od]=yt[tc]=yt[id]=yt[gf]=yt[wo]=yt[_f]=yt[hl]=yt[rd]=yt[Mo]=yt[nc]=yt[sd]=!1;var ci={};ci[Gn]=ci[Bn]=ci[yu]=ci[od]=ci[Ye]=ci[tc]=ci[Ko]=ci[yf]=ci[Ag]=ci[bf]=ci[Tg]=ci[wo]=ci[_f]=ci[hl]=ci[rd]=ci[Mo]=ci[nc]=ci[vf]=ci[Dg]=ci[Ig]=ci[Rg]=ci[Pg]=!0,ci[id]=ci[gf]=ci[sd]=!1;var Hk={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jt=parseFloat,Sf=parseInt,Xb="object"==typeof global&&global&&global.Object===Object&&global,qb="object"==typeof self&&self&&self.Object===Object&&self,_r=Xb||qb||Function("return this")(),Vg=Cs&&!Cs.nodeType&&Cs,pl=Vg&&bo&&!bo.nodeType&&bo,Cf=pl&&pl.exports===Vg,Ef=Cf&&Xb.process,io=function(){try{return pl&&pl.require&&pl.require("util").types||Ef&&Ef.binding&&Ef.binding("util")}catch{}}(),Ct=io&&io.isArrayBuffer,Af=io&&io.isDate,Yb=io&&io.isMap,Rs=io&&io.isRegExp,zg=io&&io.isSet,ME=io&&io.isTypedArray;function yn(X,oe,ae){switch(ae.length){case 0:return X.call(oe);case 1:return X.call(oe,ae[0]);case 2:return X.call(oe,ae[0],ae[1]);case 3:return X.call(oe,ae[0],ae[1],ae[2])}return X.apply(oe,ae)}function Gk(X,oe,ae,Ke){for(var Fe=-1,Vn=null==X?0:X.length;++Fe<Vn;){var wi=X[Fe];oe(Ke,wi,ae(wi),X)}return Ke}function So(X,oe){for(var ae=-1,Ke=null==X?0:X.length;++ae<Ke&&!1!==oe(X[ae],ae,X););return X}function Wk(X,oe){for(var ae=null==X?0:X.length;ae--&&!1!==oe(X[ae],ae,X););return X}function dd(X,oe){for(var ae=-1,Ke=null==X?0:X.length;++ae<Ke;)if(!oe(X[ae],ae,X))return!1;return!0}function Qo(X,oe){for(var ae=-1,Ke=null==X?0:X.length,Fe=0,Vn=[];++ae<Ke;){var wi=X[ae];oe(wi,ae,X)&&(Vn[Fe++]=wi)}return Vn}function ic(X,oe){return!(null==X||!X.length)&&_l(X,oe,0)>-1}function Hg(X,oe,ae){for(var Ke=-1,Fe=null==X?0:X.length;++Ke<Fe;)if(ae(oe,X[Ke]))return!0;return!1}function hi(X,oe){for(var ae=-1,Ke=null==X?0:X.length,Fe=Array(Ke);++ae<Ke;)Fe[ae]=oe(X[ae],ae,X);return Fe}function ml(X,oe){for(var ae=-1,Ke=oe.length,Fe=X.length;++ae<Ke;)X[Fe+ae]=oe[ae];return X}function Tf(X,oe,ae,Ke){var Fe=-1,Vn=null==X?0:X.length;for(Ke&&Vn&&(ae=X[++Fe]);++Fe<Vn;)ae=oe(ae,X[Fe],Fe,X);return ae}function Eu(X,oe,ae,Ke){var Fe=null==X?0:X.length;for(Ke&&Fe&&(ae=X[--Fe]);Fe--;)ae=oe(ae,X[Fe],Fe,X);return ae}function gl(X,oe){for(var ae=-1,Ke=null==X?0:X.length;++ae<Ke;)if(oe(X[ae],ae,X))return!0;return!1}var SE=Gg("length");function Pt(X,oe,ae){var Ke;return ae(X,function(Fe,Vn,wi){if(oe(Fe,Vn,wi))return Ke=Vn,!1}),Ke}function rc(X,oe,ae,Ke){for(var Fe=X.length,Vn=ae+(Ke?1:-1);Ke?Vn--:++Vn<Fe;)if(oe(X[Vn],Vn,X))return Vn;return-1}function _l(X,oe,ae){return oe==oe?function ks(X,oe,ae){for(var Ke=ae-1,Fe=X.length;++Ke<Fe;)if(X[Ke]===oe)return Ke;return-1}(X,oe,ae):rc(X,Zb,ae)}function Au(X,oe,ae,Ke){for(var Fe=ae-1,Vn=X.length;++Fe<Vn;)if(Ke(X[Fe],oe))return Fe;return-1}function Zb(X){return X!=X}function Qb(X,oe){var ae=null==X?0:X.length;return ae?To(X,oe)/ae:mf}function Gg(X){return function(oe){return null==oe?B:oe[X]}}function Co(X){return function(oe){return null==X?B:X[oe]}}function Eo(X,oe,ae,Ke,Fe){return Fe(X,function(Vn,wi,Jn){ae=Ke?(Ke=!1,Vn):oe(ae,Vn,wi,Jn)}),ae}function To(X,oe){for(var ae,Ke=-1,Fe=X.length;++Ke<Fe;){var Vn=oe(X[Ke]);Vn!==B&&(ae=ae===B?Vn:ae+Vn)}return ae}function Un(X,oe){for(var ae=-1,Ke=Array(X);++ae<X;)Ke[ae]=oe(ae);return Ke}function If(X){return X&&X.slice(0,Jo(X)+1).replace(wf,"")}function Kr(X){return function(oe){return X(oe)}}function Rf(X,oe){return hi(oe,function(ae){return X[ae]})}function Ps(X,oe){return X.has(oe)}function ud(X,oe){for(var ae=-1,Ke=X.length;++ae<Ke&&_l(oe,X[ae],0)>-1;);return ae}function Jb(X,oe){for(var ae=X.length;ae--&&_l(oe,X[ae],0)>-1;);return ae}var Tu=Co({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),CE=Co({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function EE(X){return"\\"+Hk[X]}function hd(X){return Bk.test(X)}function kr(X){var oe=-1,ae=Array(X.size);return X.forEach(function(Ke,Fe){ae[++oe]=[Fe,Ke]}),ae}function Wn(X,oe){return function(ae){return X(oe(ae))}}function xi(X,oe){for(var ae=-1,Ke=X.length,Fe=0,Vn=[];++ae<Ke;){var wi=X[ae];(wi===oe||wi===di)&&(X[ae]=di,Vn[Fe++]=ae)}return Vn}function vr(X){var oe=-1,ae=Array(X.size);return X.forEach(function(Ke){ae[++oe]=Ke}),ae}function sc(X){return hd(X)?function Qt(X){for(var oe=jb.lastIndex=0;jb.test(X);)++oe;return oe}(X):SE(X)}function ds(X){return hd(X)?function Ai(X){return X.match(jb)||[]}(X):function Q(X){return X.split("")}(X)}function Jo(X){for(var oe=X.length;oe--&&ar.test(X.charAt(oe)););return oe}var Qe=Co({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),er=function X(oe){var d,ae=(oe=null==oe?_r:er.defaults(_r.Object(),oe,er.pick(_r,Uk))).Array,Ke=oe.Date,Fe=oe.Error,Vn=oe.Function,wi=oe.Math,Jn=oe.Object,vl=oe.RegExp,Or=oe.String,Lr=oe.TypeError,ka=ae.prototype,ta=Jn.prototype,Du=oe["__core-js_shared__"],ei=Vn.prototype.toString,ti=ta.hasOwnProperty,Wg=0,$g=(d=/[^.]+$/.exec(Du&&Du.keys&&Du.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",ac=ta.toString,Pf=ei.call(Jn),pd=_r._,Zr=vl("^"+ei.call(ti).replace(xf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),jg=Cf?oe.Buffer:B,zi=oe.Symbol,us=oe.Uint8Array,kf=jg?jg.allocUnsafe:B,yl=Wn(Jn.getPrototypeOf,Jn),Iu=Jn.create,ro=ta.propertyIsEnumerable,Of=ka.splice,AE=zi?zi.isConcatSpreadable:B,Ru=zi?zi.iterator:B,lc=zi?zi.toStringTag:B,Xg=function(){try{var d=bc(Jn,"defineProperty");return d({},"",{}),d}catch{}}(),$k=oe.clearTimeout!==_r.clearTimeout&&oe.clearTimeout,jk=Ke&&Ke.now!==_r.Date.now&&Ke.now,Xk=oe.setTimeout!==_r.setTimeout&&oe.setTimeout,qg=wi.ceil,Yg=wi.floor,n0=Jn.getOwnPropertySymbols,qk=jg?jg.isBuffer:B,TE=oe.isFinite,Yk=ka.join,Kk=Wn(Jn.keys,Jn),lr=wi.max,yr=wi.min,r0=Ke.now,Zk=oe.parseInt,DE=wi.random,Qk=ka.reverse,Oa=bc(oe,"DataView"),Pu=bc(oe,"Map"),Hi=bc(oe,"Promise"),cc=bc(oe,"Set"),ku=bc(oe,"WeakMap"),Ou=bc(Jn,"create"),Lu=ku&&new ku,dc={},IE=Wi(Oa),Kg=Wi(Pu),RE=Wi(Hi),so=Wi(cc),s0=Wi(ku),Fu=zi?zi.prototype:B,Pi=Fu?Fu.valueOf:B,o0=Fu?Fu.toString:B;function T(d){if(ni(d)&&!Zt(d)&&!(d instanceof Jt)){if(d instanceof Os)return d;if(ti.call(d,"__wrapped__"))return T_(d)}return new Os(d)}var cr=function(){function d(){}return function(f){if(!fi(f))return{};if(Iu)return Iu(f);d.prototype=f;var _=new d;return d.prototype=B,_}}();function Lf(){}function Os(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=B}function Jt(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Yo,this.__views__=[]}function uc(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var w=d[f];this.set(w[0],w[1])}}function xl(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var w=d[f];this.set(w[0],w[1])}}function La(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var w=d[f];this.set(w[0],w[1])}}function wl(d){var f=-1,_=null==d?0:d.length;for(this.__data__=new La;++f<_;)this.add(d[f])}function Ls(d){var f=this.__data__=new xl(d);this.size=f.size}function ia(d,f){var _=Zt(d),w=!_&&Dd(d),C=!_&&!w&&Ha(d),O=!_&&!w&&!C&&Id(d),U=_||w||C||O,H=U?Un(d.length,Or):[],Y=H.length;for(var pe in d)(f||ti.call(d,pe))&&(!U||!("length"==pe||C&&("offset"==pe||"parent"==pe)||O&&("buffer"==pe||"byteLength"==pe||"byteOffset"==pe)||Rl(pe,Y)))&&H.push(pe);return H}function Jg(d){var f=d.length;return f?d[Xu(0,f-1)]:B}function md(d,f){return eh(Nr(d),hc(f,0,d.length))}function Fa(d){return eh(Nr(d))}function e_(d,f,_){(_!==B&&!Ro(d[f],_)||_===B&&!(f in d))&&ra(d,f,_)}function gd(d,f,_){var w=d[f];(!ti.call(d,f)||!Ro(w,_)||_===B&&!(f in d))&&ra(d,f,_)}function Nf(d,f){for(var _=d.length;_--;)if(Ro(d[_][0],f))return _;return-1}function BE(d,f,_,w){return Na(d,function(C,O,U){f(w,C,_(C),U)}),w}function Bf(d,f){return d&&fs(f,Mr(f),d)}function ra(d,f,_){"__proto__"==f&&Xg?Xg(d,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[f]=_}function Bu(d,f){for(var _=-1,w=f.length,C=ae(w),O=null==d;++_<w;)C[_]=O?B:uv(d,f[_]);return C}function hc(d,f,_){return d==d&&(_!==B&&(d=d<=_?d:_),f!==B&&(d=d>=f?d:f)),d}function Fs(d,f,_,w,C,O){var U,H=f&ui,Y=f&ls,pe=f&As;if(_&&(U=C?_(d,w,C,O):_(d)),U!==B)return U;if(!fi(d))return d;var ve=Zt(d);if(ve){if(U=function R0(d){var f=d.length,_=new d.constructor(f);return f&&"string"==typeof d[0]&&ti.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!H)return Nr(d,U)}else{var Te=xr(d),We=Te==gf||Te==Tb;if(Ha(d))return $E(d,H);if(Te==hl||Te==Gn||We&&!C){if(U=Y||We?{}:tA(d),!H)return Y?function ao(d,f){return fs(d,Qu(d),f)}(d,function t_(d,f){return d&&fs(f,Hs(f),d)}(U,d)):function qE(d,f){return fs(d,b_(d),f)}(d,Bf(U,d))}else{if(!ci[Te])return C?d:{};U=function nA(d,f,_){var w=d.constructor;switch(f){case yu:return S0(d);case Ye:case tc:return new w(+d);case od:return function nO(d,f){var _=f?S0(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case Ko:case yf:case Ag:case bf:case Tg:case Dg:case Ig:case Rg:case Pg:return jE(d,_);case wo:return new w;case _f:case nc:return new w(d);case rd:return function iO(d){var f=new d.constructor(d.source,Zo.exec(d));return f.lastIndex=d.lastIndex,f}(d);case Mo:return new w;case vf:return function rO(d){return Pi?Jn(Pi.call(d)):{}}(d)}}(d,Te,H)}}O||(O=new Ls);var lt=O.get(d);if(lt)return lt;O.set(d,U),sv(d)?d.forEach(function(At){U.add(Fs(At,f,_,At,d,O))}):Cx(d)&&d.forEach(function(At,un){U.set(un,Fs(At,f,_,un,d,O))});var sn=ve?B:(pe?Y?Il:y_:Y?Hs:Mr)(d);return So(sn||d,function(At,un){sn&&(At=d[un=At]),gd(U,un,Fs(At,f,_,un,d,O))}),U}function i_(d,f,_){var w=_.length;if(null==d)return!w;for(d=Jn(d);w--;){var C=_[w],U=d[C];if(U===B&&!(C in d)||!(0,f[C])(U))return!1}return!0}function r_(d,f,_){if("function"!=typeof d)throw new Lr(Ln);return xc(function(){d.apply(B,_)},f)}function _d(d,f,_,w){var C=-1,O=ic,U=!0,H=d.length,Y=[],pe=f.length;if(!H)return Y;_&&(f=hi(f,Kr(_))),w?(O=Hg,U=!1):f.length>=Yr&&(O=Ps,U=!1,f=new wl(f));e:for(;++C<H;){var ve=d[C],Te=null==_?ve:_(ve);if(ve=w||0!==ve?ve:0,U&&Te==Te){for(var We=pe;We--;)if(f[We]===Te)continue e;Y.push(ve)}else O(f,Te,w)||Y.push(ve)}return Y}T.templateSettings={escape:Rb,evaluate:Pb,interpolate:Og,variable:"",imports:{_:T}},(T.prototype=Lf.prototype).constructor=T,(Os.prototype=cr(Lf.prototype)).constructor=Os,(Jt.prototype=cr(Lf.prototype)).constructor=Jt,uc.prototype.clear=function bl(){this.__data__=Ou?Ou(null):{},this.size=0},uc.prototype.delete=function a0(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f},uc.prototype.get=function Zg(d){var f=this.__data__;if(Ou){var _=f[d];return _===Da?B:_}return ti.call(f,d)?f[d]:B},uc.prototype.has=function Gt(d){var f=this.__data__;return Ou?f[d]!==B:ti.call(f,d)},uc.prototype.set=function l0(d,f){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=Ou&&f===B?Da:f,this},xl.prototype.clear=function kE(){this.__data__=[],this.size=0},xl.prototype.delete=function OE(d){var f=this.__data__,_=Nf(f,d);return!(_<0||(_==f.length-1?f.pop():Of.call(f,_,1),--this.size,0))},xl.prototype.get=function LE(d){var f=this.__data__,_=Nf(f,d);return _<0?B:f[_][1]},xl.prototype.has=function c0(d){return Nf(this.__data__,d)>-1},xl.prototype.set=function FE(d,f){var _=this.__data__,w=Nf(_,d);return w<0?(++this.size,_.push([d,f])):_[w][1]=f,this},La.prototype.clear=function Ee(){this.size=0,this.__data__={hash:new uc,map:new(Pu||xl),string:new uc}},La.prototype.delete=function Fn(d){var f=rp(this,d).delete(d);return this.size-=f?1:0,f},La.prototype.get=function Sn(d){return rp(this,d).get(d)},La.prototype.has=function Cn(d){return rp(this,d).has(d)},La.prototype.set=function br(d,f){var _=rp(this,d),w=_.size;return _.set(d,f),this.size+=_.size==w?0:1,this},wl.prototype.add=wl.prototype.push=function Nu(d){return this.__data__.set(d,Da),this},wl.prototype.has=function na(d){return this.__data__.has(d)},Ls.prototype.clear=function Qg(){this.__data__=new xl,this.size=0},Ls.prototype.delete=function NE(d){var f=this.__data__,_=f.delete(d);return this.size=f.size,_},Ls.prototype.get=function Jk(d){return this.__data__.get(d)},Ls.prototype.has=function d0(d){return this.__data__.has(d)},Ls.prototype.set=function Qr(d,f){var _=this.__data__;if(_ instanceof xl){var w=_.__data__;if(!Pu||w.length<Yr-1)return w.push([d,f]),this.size=++_.size,this;_=this.__data__=new La(w)}return _.set(d,f),this.size=_.size,this};var Na=Ku(es),Uf=Ku(s_,!0);function UE(d,f){var _=!0;return Na(d,function(w,C,O){return _=!!f(w,C,O)}),_}function Vf(d,f,_){for(var w=-1,C=d.length;++w<C;){var O=d[w],U=f(O);if(null!=U&&(H===B?U==U&&!zs(U):_(U,H)))var H=U,Y=O}return Y}function Ml(d,f){var _=[];return Na(d,function(w,C,O){f(w,C,O)&&_.push(w)}),_}function dn(d,f,_,w,C){var O=-1,U=d.length;for(_||(_=x_),C||(C=[]);++O<U;){var H=d[O];f>0&&_(H)?f>1?dn(H,f-1,_,w,C):ml(C,H):w||(C[C.length]=H)}return C}var Fr=xd(),u0=xd(!0);function es(d,f){return d&&Fr(d,f,Mr)}function s_(d,f){return d&&u0(d,f,Mr)}function zf(d,f){return Qo(f,function(_){return Ga(d[_])})}function fc(d,f){for(var _=0,w=(f=gc(f,d)).length;null!=d&&_<w;)d=d[la(f[_++])];return _&&_==w?d:B}function Uu(d,f,_){var w=f(d);return Zt(d)?w:ml(w,_(d))}function dr(d){return null==d?d===B?Eg:Rk:lc&&lc in Jn(d)?function QE(d){var f=ti.call(d,lc),_=d[lc];try{d[lc]=B;var w=!0}catch{}var C=ac.call(d);return w&&(f?d[lc]=_:delete d[lc]),C}(d):function F0(d){return ac.call(d)}(d)}function vd(d,f){return d>f}function o_(d,f){return null!=d&&ti.call(d,f)}function h0(d,f){return null!=d&&f in Jn(d)}function Sl(d,f,_){for(var w=_?Hg:ic,C=d[0].length,O=d.length,U=O,H=ae(O),Y=1/0,pe=[];U--;){var ve=d[U];U&&f&&(ve=hi(ve,Kr(f))),Y=yr(ve.length,Y),H[U]=!_&&(f||C>=120&&ve.length>=120)?new wl(U&&ve):B}ve=d[0];var Te=-1,We=H[0];e:for(;++Te<C&&pe.length<Y;){var lt=ve[Te],Et=f?f(lt):lt;if(lt=_||0!==lt?lt:0,!(We?Ps(We,Et):w(pe,Et,_))){for(U=O;--U;){var sn=H[U];if(!(sn?Ps(sn,Et):w(d[U],Et,_)))continue e}We&&We.push(Et),pe.push(lt)}}return pe}function zu(d,f,_){var w=null==(d=N0(d,f=gc(f,d)))?d:d[la(Bs(f))];return null==w?B:yn(w,d,_)}function zE(d){return ni(d)&&dr(d)==Gn}function Hu(d,f,_,w,C){return d===f||(null==d||null==f||!ni(d)&&!ni(f)?d!=d&&f!=f:function HE(d,f,_,w,C,O){var U=Zt(d),H=Zt(f),Y=U?Bn:xr(d),pe=H?Bn:xr(f),ve=(Y=Y==Gn?hl:Y)==hl,Te=(pe=pe==Gn?hl:pe)==hl,We=Y==pe;if(We&&Ha(d)){if(!Ha(f))return!1;U=!0,ve=!1}if(We&&!ve)return O||(O=new Ls),U||Id(d)?Sd(d,f,_,w,C,O):function np(d,f,_,w,C,O,U){switch(_){case od:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case yu:return!(d.byteLength!=f.byteLength||!O(new us(d),new us(f)));case Ye:case tc:case _f:return Ro(+d,+f);case id:return d.name==f.name&&d.message==f.message;case rd:case nc:return d==f+"";case wo:var H=kr;case Mo:if(H||(H=vr),d.size!=f.size&&!(w&Ts))return!1;var pe=U.get(d);if(pe)return pe==f;w|=xo,U.set(d,f);var ve=Sd(H(d),H(f),w,C,O,U);return U.delete(d),ve;case vf:if(Pi)return Pi.call(d)==Pi.call(f)}return!1}(d,f,Y,_,w,C,O);if(!(_&Ts)){var lt=ve&&ti.call(d,"__wrapped__"),Et=Te&&ti.call(f,"__wrapped__");if(lt||Et){var sn=lt?d.value():d,At=Et?f.value():f;return O||(O=new Ls),C(sn,At,_,w,O)}}return!!We&&(O||(O=new Ls),function T0(d,f,_,w,C,O){var U=_&Ts,H=y_(d),Y=H.length;if(Y!=y_(f).length&&!U)return!1;for(var Te=Y;Te--;){var We=H[Te];if(!(U?We in f:ti.call(f,We)))return!1}var lt=O.get(d),Et=O.get(f);if(lt&&Et)return lt==f&&Et==d;var sn=!0;O.set(d,f),O.set(f,d);for(var At=U;++Te<Y;){var un=d[We=H[Te]],Rn=f[We];if(w)var Ws=U?w(Rn,un,We,f,d,O):w(un,Rn,We,d,f,O);if(!(Ws===B?un===Rn||C(un,Rn,_,w,O):Ws)){sn=!1;break}At||(At="constructor"==We)}if(sn&&!At){var ur=d.constructor,Vr=f.constructor;ur!=Vr&&"constructor"in d&&"constructor"in f&&!("function"==typeof ur&&ur instanceof ur&&"function"==typeof Vr&&Vr instanceof Vr)&&(sn=!1)}return O.delete(d),O.delete(f),sn}(d,f,_,w,C,O))}(d,f,_,w,Hu,C))}function f0(d,f,_,w){var C=_.length,O=C,U=!w;if(null==d)return!O;for(d=Jn(d);C--;){var H=_[C];if(U&&H[2]?H[1]!==d[H[0]]:!(H[0]in d))return!1}for(;++C<O;){var Y=(H=_[C])[0],pe=d[Y],ve=H[1];if(U&&H[2]){if(pe===B&&!(Y in d))return!1}else{var Te=new Ls;if(w)var We=w(pe,ve,Y,d,f,Te);if(!(We===B?Hu(ve,pe,Ts|xo,w,Te):We))return!1}}return!0}function Hf(d){return!(!fi(d)||function aO(d){return!!$g&&$g in d}(d))&&(Ga(d)?Zr:ad).test(Wi(d))}function l_(d){return"function"==typeof d?d:null==d?Ur:"object"==typeof d?Zt(d)?$u(d[0],d[1]):$f(d):Mp(d)}function Gf(d){if(!sp(d))return Kk(d);var f=[];for(var _ in Jn(d))ti.call(d,_)&&"constructor"!=_&&f.push(_);return f}function c_(d,f){return d<f}function Wu(d,f){var _=-1,w=wr(d)?ae(d.length):[];return Na(d,function(C,O,U){w[++_]=f(C,O,U)}),w}function $f(d){var f=D0(d);return 1==f.length&&f[0][2]?w_(f[0][0],f[0][1]):function(_){return _===d||f0(_,d,f)}}function $u(d,f){return Ju(d)&&k0(f)?w_(la(d),f):function(_){var w=uv(_,d);return w===B&&w===f?Ol(_,d):Hu(f,w,Ts|xo)}}function d_(d,f,_,w,C){d!==f&&Fr(f,function(O,U){if(C||(C=new Ls),fi(O))!function g0(d,f,_,w,C,O,U){var H=S_(d,_),Y=S_(f,_),pe=U.get(Y);if(pe)e_(d,_,pe);else{var ve=O?O(H,Y,_+"",d,f,U):B,Te=ve===B;if(Te){var We=Zt(Y),lt=!We&&Ha(Y),Et=!We&&!lt&&Id(Y);ve=Y,We||lt||Et?Zt(H)?ve=H:Ti(H)?ve=Nr(H):lt?(Te=!1,ve=$E(Y,!0)):Et?(Te=!1,ve=jE(Y,!0)):ve=[]:Cc(Y)||Dd(Y)?(ve=H,Dd(H)?ve=Ec(H):(!fi(H)||Ga(H))&&(ve=tA(Y))):Te=!1}Te&&(U.set(Y,ve),C(ve,Y,w,O,U),U.delete(Y)),e_(d,_,ve)}}(d,f,U,_,d_,w,C);else{var H=w?w(S_(d,U),O,U+"",d,f,C):B;H===B&&(H=O),e_(d,U,H)}},Hs)}function u_(d,f){var _=d.length;if(_)return Rl(f+=f<0?_:0,_)?d[f]:B}function _0(d,f,_){f=f.length?hi(f,function(O){return Zt(O)?function(U){return fc(U,1===O.length?O[0]:O)}:O}):[Ur];var w=-1;return f=hi(f,Kr(Mt())),function Ao(X,oe){var ae=X.length;for(X.sort(oe);ae--;)X[ae]=X[ae].value;return X}(Wu(d,function(O,U,H){return{criteria:hi(f,function(pe){return pe(O)}),index:++w,value:O}}),function(O,U){return function sO(d,f,_){for(var w=-1,C=d.criteria,O=f.criteria,U=C.length,H=_.length;++w<U;){var Y=bd(C[w],O[w]);if(Y)return w>=H?Y:Y*("desc"==_[w]?-1:1)}return d.index-f.index}(O,U,_)})}function v0(d,f,_){for(var w=-1,C=f.length,O={};++w<C;){var U=f[w],H=fc(d,U);_(H,U)&&yd(O,gc(U,d),H)}return O}function ju(d,f,_,w){var C=w?Au:_l,O=-1,U=f.length,H=d;for(d===f&&(f=Nr(f)),_&&(H=hi(d,Kr(_)));++O<U;)for(var Y=0,pe=f[O],ve=_?_(pe):pe;(Y=C(H,ve,Y,w))>-1;)H!==d&&Of.call(H,Y,1),Of.call(d,Y,1);return d}function h_(d,f){for(var _=d?f.length:0,w=_-1;_--;){var C=f[_];if(_==w||C!==O){var O=C;Rl(C)?Of.call(d,C,1):qf(d,C)}}return d}function Xu(d,f){return d+Yg(DE()*(f-d+1))}function p_(d,f){var _="";if(!d||f<1||f>Pa)return _;do{f%2&&(_+=d),(f=Yg(f/2))&&(d+=d)}while(f);return _}function rn(d,f){return E_(ns(d,f,Ur),d+"")}function y0(d){return Jg(Rd(d))}function b0(d,f){var _=Rd(d);return eh(_,hc(f,0,_.length))}function yd(d,f,_,w){if(!fi(d))return d;for(var C=-1,O=(f=gc(f,d)).length,U=O-1,H=d;null!=H&&++C<O;){var Y=la(f[C]),pe=_;if("__proto__"===Y||"constructor"===Y||"prototype"===Y)return d;if(C!=U){var ve=H[Y];(pe=w?w(ve,Y,H):B)===B&&(pe=fi(ve)?ve:Rl(f[C+1])?[]:{})}gd(H,Y,pe),H=H[Y]}return d}var x0=Lu?function(d,f){return Lu.set(d,f),d}:Ur,Xf=Xg?function(d,f){return Xg(d,"toString",{configurable:!0,enumerable:!1,value:bp(f),writable:!0})}:Ur;function pc(d){return eh(Rd(d))}function oo(d,f,_){var w=-1,C=d.length;f<0&&(f=-f>C?0:C+f),(_=_>C?C:_)<0&&(_+=C),C=f>_?0:_-f>>>0,f>>>=0;for(var O=ae(C);++w<C;)O[w]=d[w+f];return O}function w0(d,f){var _;return Na(d,function(w,C,O){return!(_=f(w,C,O))}),!!_}function qu(d,f,_){var w=0,C=null==d?w:d.length;if("number"==typeof f&&f==f&&C<=Eb){for(;w<C;){var O=w+C>>>1,U=d[O];null!==U&&!zs(U)&&(_?U<=f:U<f)?w=O+1:C=O}return C}return Cl(d,f,Ur,_)}function Cl(d,f,_,w){var C=0,O=null==d?0:d.length;if(0===O)return 0;for(var U=(f=_(f))!=f,H=null===f,Y=zs(f),pe=f===B;C<O;){var ve=Yg((C+O)/2),Te=_(d[ve]),We=Te!==B,lt=null===Te,Et=Te==Te,sn=zs(Te);if(U)var At=w||Et;else At=pe?Et&&(w||We):H?Et&&We&&(w||!lt):Y?Et&&We&&!lt&&(w||!sn):!lt&&!sn&&(w?Te<=f:Te<f);At?C=ve+1:O=ve}return yr(O,Ve)}function M0(d,f){for(var _=-1,w=d.length,C=0,O=[];++_<w;){var U=d[_],H=f?f(U):U;if(!_||!Ro(H,Y)){var Y=H;O[C++]=0===U?0:U}}return O}function Mi(d){return"number"==typeof d?d:zs(d)?mf:+d}function ts(d){if("string"==typeof d)return d;if(Zt(d))return hi(d,ts)+"";if(zs(d))return o0?o0.call(d):"";var f=d+"";return"0"==f&&1/d==-Mn?"-0":f}function El(d,f,_){var w=-1,C=ic,O=d.length,U=!0,H=[],Y=H;if(_)U=!1,C=Hg;else if(O>=Yr){var pe=f?null:tp(d);if(pe)return vr(pe);U=!1,C=Ps,Y=new wl}else Y=f?[]:H;e:for(;++w<O;){var ve=d[w],Te=f?f(ve):ve;if(ve=_||0!==ve?ve:0,U&&Te==Te){for(var We=Y.length;We--;)if(Y[We]===Te)continue e;f&&Y.push(Te),H.push(ve)}else C(Y,Te,_)||(Y!==H&&Y.push(Te),H.push(ve))}return H}function qf(d,f){return null==(d=N0(d,f=gc(f,d)))||delete d[la(Bs(f))]}function Ba(d,f,_,w){return yd(d,f,_(fc(d,f)),w)}function Ua(d,f,_,w){for(var C=d.length,O=w?C:-1;(w?O--:++O<C)&&f(d[O],O,d););return _?oo(d,w?0:O,w?O+1:C):oo(d,w?O+1:0,w?C:O)}function mc(d,f){var _=d;return _ instanceof Jt&&(_=_.value()),Tf(f,function(w,C){return C.func.apply(C.thisArg,ml([w],C.args))},_)}function Al(d,f,_){var w=d.length;if(w<2)return w?El(d[0]):[];for(var C=-1,O=ae(w);++C<w;)for(var U=d[C],H=-1;++H<w;)H!=C&&(O[C]=_d(O[C]||U,d[H],f,_));return El(dn(O,1),f,_)}function m_(d,f,_){for(var w=-1,C=d.length,O=f.length,U={};++w<C;)_(U,d[w],w<O?f[w]:B);return U}function Yu(d){return Ti(d)?d:[]}function Tl(d){return"function"==typeof d?d:Ur}function gc(d,f){return Zt(d)?d:Ju(d,f)?[d]:V0(Xn(d))}var GE=rn;function ge(d,f,_){var w=d.length;return _=_===B?w:_,!f&&_>=w?d:oo(d,f,_)}var WE=$k||function(d){return _r.clearTimeout(d)};function $E(d,f){if(f)return d.slice();var _=d.length,w=kf?kf(_):new d.constructor(_);return d.copy(w),w}function S0(d){var f=new d.constructor(d.byteLength);return new us(f).set(new us(d)),f}function jE(d,f){var _=f?S0(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function bd(d,f){if(d!==f){var _=d!==B,w=null===d,C=d==d,O=zs(d),U=f!==B,H=null===f,Y=f==f,pe=zs(f);if(!H&&!pe&&!O&&d>f||O&&U&&Y&&!H&&!pe||w&&U&&Y||!_&&Y||!C)return 1;if(!w&&!O&&!pe&&d<f||pe&&_&&C&&!w&&!O||H&&_&&C||!U&&C||!Y)return-1}return 0}function XE(d,f,_,w){for(var C=-1,O=d.length,U=_.length,H=-1,Y=f.length,pe=lr(O-U,0),ve=ae(Y+pe),Te=!w;++H<Y;)ve[H]=f[H];for(;++C<U;)(Te||C<O)&&(ve[_[C]]=d[C]);for(;pe--;)ve[H++]=d[C++];return ve}function Gi(d,f,_,w){for(var C=-1,O=d.length,U=-1,H=_.length,Y=-1,pe=f.length,ve=lr(O-H,0),Te=ae(ve+pe),We=!w;++C<ve;)Te[C]=d[C];for(var lt=C;++Y<pe;)Te[lt+Y]=f[Y];for(;++U<H;)(We||C<O)&&(Te[lt+_[U]]=d[C++]);return Te}function Nr(d,f){var _=-1,w=d.length;for(f||(f=ae(w));++_<w;)f[_]=d[_];return f}function fs(d,f,_,w){var C=!_;_||(_={});for(var O=-1,U=f.length;++O<U;){var H=f[O],Y=w?w(_[H],d[H],H,_,d):B;Y===B&&(Y=d[H]),C?ra(_,H,Y):gd(_,H,Y)}return _}function oa(d,f){return function(_,w){var C=Zt(_)?Gk:BE,O=f?f():{};return C(_,d,Mt(w,2),O)}}function _c(d){return rn(function(f,_){var w=-1,C=_.length,O=C>1?_[C-1]:B,U=C>2?_[2]:B;for(O=d.length>3&&"function"==typeof O?(C--,O):B,U&&ps(_[0],_[1],U)&&(O=C<3?B:O,C=1),f=Jn(f);++w<C;){var H=_[w];H&&d(f,H,w,O)}return f})}function Ku(d,f){return function(_,w){if(null==_)return _;if(!wr(_))return d(_,w);for(var C=_.length,O=f?C:-1,U=Jn(_);(f?O--:++O<C)&&!1!==w(U[O],O,U););return _}}function xd(d){return function(f,_,w){for(var C=-1,O=Jn(f),U=w(f),H=U.length;H--;){var Y=U[d?H:++C];if(!1===_(O[Y],Y,O))break}return f}}function KE(d){return function(f){var _=hd(f=Xn(f))?ds(f):B,w=_?_[0]:f.charAt(0),C=_?ge(_,1).join(""):f.slice(1);return w[d]()+C}}function wd(d){return function(f){return Tf($x(Bx(f).replace(Fk,"")),d,"")}}function Yf(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=cr(d.prototype),w=d.apply(_,f);return fi(w)?w:_}}function Kf(d){return function(f,_,w){var C=Jn(f);if(!wr(f)){var O=Mt(_,3);f=Mr(f),_=function(H){return O(C[H],H,C)}}var U=d(f,_,w);return U>-1?C[O?f[U]:U]:B}}function vc(d){return Va(function(f){var _=f.length,w=_,C=Os.prototype.thru;for(d&&f.reverse();w--;){var O=f[w];if("function"!=typeof O)throw new Lr(Ln);if(C&&!U&&"wrapper"==ip(O))var U=new Os([],!0)}for(w=U?w:_;++w<_;){var H=ip(O=f[w]),Y="wrapper"==H?yc(O):B;U=Y&&P0(Y[0])&&Y[1]==(Ia|jo|Xo|qo)&&!Y[4].length&&1==Y[9]?U[ip(Y[0])].apply(U,Y[3]):1==O.length&&P0(O)?U[H]():U.thru(O)}return function(){var pe=arguments,ve=pe[0];if(U&&1==pe.length&&Zt(ve))return U.plant(ve).value();for(var Te=0,We=_?f[Te].apply(this,pe):ve;++Te<_;)We=f[Te].call(this,We);return We}})}function g_(d,f,_,w,C,O,U,H,Y,pe){var ve=f&Ia,Te=f&In,We=f&or,lt=f&(jo|dl),Et=f&nd,sn=We?B:Yf(d);return function At(){for(var un=arguments.length,Rn=ae(un),Ws=un;Ws--;)Rn[Ws]=arguments[Ws];if(lt)var ur=Zu(At),Vr=function bt(X,oe){for(var ae=X.length,Ke=0;ae--;)X[ae]===oe&&++Ke;return Ke}(Rn,ur);if(w&&(Rn=XE(Rn,w,C,lt)),O&&(Rn=Gi(Rn,O,U,lt)),un-=Vr,lt&&un<pe){var pi=xi(Rn,ur);return ep(d,f,g_,At.placeholder,_,Rn,pi,H,Y,pe-un)}var da=Te?_:this,ko=We?da[d]:d;return un=Rn.length,H?Rn=function rA(d,f){for(var _=d.length,w=yr(f.length,_),C=Nr(d);w--;){var O=f[w];d[w]=Rl(O,_)?C[O]:B}return d}(Rn,H):Et&&un>1&&Rn.reverse(),ve&&Y<un&&(Rn.length=Y),this&&this!==_r&&this instanceof At&&(ko=sn||Yf(ko)),ko.apply(da,Rn)}}function __(d,f){return function(_,w){return function Vu(d,f,_,w){return es(d,function(C,O,U){f(w,_(C),O,U)}),w}(_,d,f(w),{})}}function Zf(d,f){return function(_,w){var C;if(_===B&&w===B)return f;if(_!==B&&(C=_),w!==B){if(C===B)return w;"string"==typeof _||"string"==typeof w?(_=ts(_),w=ts(w)):(_=Mi(_),w=Mi(w)),C=d(_,w)}return C}}function v_(d){return Va(function(f){return f=hi(f,Kr(Mt())),rn(function(_){var w=this;return d(f,function(C){return yn(C,w,_)})})})}function Qf(d,f){var _=(f=f===B?" ":ts(f)).length;if(_<2)return _?p_(f,d):f;var w=p_(f,qg(d/sc(f)));return hd(f)?ge(ds(w),0,d).join(""):w.slice(0,d)}function C0(d){return function(f,_,w){return w&&"number"!=typeof w&&ps(f,_,w)&&(_=w=B),f=Pl(f),_===B?(_=f,f=0):_=Pl(_),function f_(d,f,_,w){for(var C=-1,O=lr(qg((f-d)/(_||1)),0),U=ae(O);O--;)U[w?O:++C]=d,d+=_;return U}(f,_,w=w===B?f<_?1:-1:Pl(w),d)}}function Jf(d){return function(f,_){return"string"==typeof f&&"string"==typeof _||(f=lo(f),_=lo(_)),d(f,_)}}function ep(d,f,_,w,C,O,U,H,Y,pe){var ve=f&jo;f|=ve?Xo:ul,(f&=~(ve?ul:Xo))&ec||(f&=~(In|or));var sn=[d,f,C,ve?O:B,ve?U:B,ve?B:O,ve?B:U,H,Y,pe],At=_.apply(B,sn);return P0(d)&&C_(At,sn),At.placeholder=w,B0(At,d,f)}function Md(d){var f=wi[d];return function(_,w){if(_=lo(_),(w=null==w?0:yr(en(w),292))&&TE(_)){var C=(Xn(_)+"e").split("e");return+((C=(Xn(f(C[0]+"e"+(+C[1]+w)))+"e").split("e"))[0]+"e"+(+C[1]-w))}return f(_)}}var tp=cc&&1/vr(new cc([,-0]))[1]==Mn?function(d){return new cc(d)}:xp;function Io(d){return function(f){var _=xr(f);return _==wo?kr(f):_==Mo?function fd(X){var oe=-1,ae=Array(X.size);return X.forEach(function(Ke){ae[++oe]=[Ke,Ke]}),ae}(f):function Df(X,oe){return hi(oe,function(ae){return[ae,X[ae]]})}(f,d(f))}}function aa(d,f,_,w,C,O,U,H){var Y=f&or;if(!Y&&"function"!=typeof d)throw new Lr(Ln);var pe=w?w.length:0;if(pe||(f&=~(Xo|ul),w=C=B),U=U===B?U:lr(en(U),0),H=H===B?H:en(H),pe-=C?C.length:0,f&ul){var ve=w,Te=C;w=C=B}var We=Y?B:yc(d),lt=[d,f,_,w,C,ve,Te,O,U,H];if(We&&function O0(d,f){var _=d[1],w=f[1],C=_|w;if(!(C<(In|or|Ia))&&!(w==Ia&&_==jo||w==Ia&&_==qo&&d[7].length<=f[8]||w==(Ia|qo)&&f[7].length<=f[8]&&_==jo))return d;w&In&&(d[2]=f[2],C|=_&In?0:ec);var H=f[3];if(H){var Y=d[3];d[3]=Y?XE(Y,H,f[4]):H,d[4]=Y?xi(d[3],di):f[4]}(H=f[5])&&(d[5]=(Y=d[5])?Gi(Y,H,f[6]):H,d[6]=Y?xi(d[5],di):f[6]),(H=f[7])&&(d[7]=H),w&Ia&&(d[8]=null==d[8]?f[8]:yr(d[8],f[8])),null==d[9]&&(d[9]=f[9]),d[0]=f[0],d[1]=C}(lt,We),d=lt[0],f=lt[1],_=lt[2],w=lt[3],C=lt[4],!(H=lt[9]=lt[9]===B?Y?0:d.length:lr(lt[9]-pe,0))&&f&(jo|dl)&&(f&=~(jo|dl)),f&&f!=In)Et=f==jo||f==dl?function Ns(d,f,_){var w=Yf(d);return function C(){for(var O=arguments.length,U=ae(O),H=O,Y=Zu(C);H--;)U[H]=arguments[H];var pe=O<3&&U[0]!==Y&&U[O-1]!==Y?[]:xi(U,Y);return(O-=pe.length)<_?ep(d,f,g_,C.placeholder,B,U,pe,B,B,_-O):yn(this&&this!==_r&&this instanceof C?w:d,this,U)}}(d,f,H):f!=Xo&&f!=(In|Xo)||C.length?g_.apply(B,lt):function ZE(d,f,_,w){var C=f&In,O=Yf(d);return function U(){for(var H=-1,Y=arguments.length,pe=-1,ve=w.length,Te=ae(ve+Y),We=this&&this!==_r&&this instanceof U?O:d;++pe<ve;)Te[pe]=w[pe];for(;Y--;)Te[pe++]=arguments[++H];return yn(We,C?_:this,Te)}}(d,f,_,w);else var Et=function YE(d,f,_){var w=f&In,C=Yf(d);return function O(){return(this&&this!==_r&&this instanceof O?C:d).apply(w?_:this,arguments)}}(d,f,_);return B0((We?x0:C_)(Et,lt),d,f)}function Dl(d,f,_,w){return d===B||Ro(d,ta[_])&&!ti.call(w,_)?f:d}function E0(d,f,_,w,C,O){return fi(d)&&fi(f)&&(O.set(f,d),d_(d,f,B,E0,O),O.delete(f)),d}function A0(d){return Cc(d)?B:d}function Sd(d,f,_,w,C,O){var U=_&Ts,H=d.length,Y=f.length;if(H!=Y&&!(U&&Y>H))return!1;var pe=O.get(d),ve=O.get(f);if(pe&&ve)return pe==f&&ve==d;var Te=-1,We=!0,lt=_&xo?new wl:B;for(O.set(d,f),O.set(f,d);++Te<H;){var Et=d[Te],sn=f[Te];if(w)var At=U?w(sn,Et,Te,f,d,O):w(Et,sn,Te,d,f,O);if(At!==B){if(At)continue;We=!1;break}if(lt){if(!gl(f,function(un,Rn){if(!Ps(lt,Rn)&&(Et===un||C(Et,un,_,w,O)))return lt.push(Rn)})){We=!1;break}}else if(Et!==sn&&!C(Et,sn,_,w,O)){We=!1;break}}return O.delete(d),O.delete(f),We}function Va(d){return E_(ns(d,B,op),d+"")}function y_(d){return Uu(d,Mr,b_)}function Il(d){return Uu(d,Hs,Qu)}var yc=Lu?function(d){return Lu.get(d)}:xp;function ip(d){for(var f=d.name+"",_=dc[f],w=ti.call(dc,f)?_.length:0;w--;){var C=_[w],O=C.func;if(null==O||O==d)return C.name}return f}function Zu(d){return(ti.call(T,"placeholder")?T:d).placeholder}function Mt(){var d=T.iteratee||Yx;return d=d===Yx?l_:d,arguments.length?d(arguments[0],arguments[1]):d}function rp(d,f){var _=d.__data__;return function oO(d){var f=typeof d;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==d:null===d}(f)?_["string"==typeof f?"string":"hash"]:_.map}function D0(d){for(var f=Mr(d),_=f.length;_--;){var w=f[_],C=d[w];f[_]=[w,C,k0(C)]}return f}function bc(d,f){var _=function Kt(X,oe){return null==X?B:X[oe]}(d,f);return Hf(_)?_:B}var b_=n0?function(d){return null==d?[]:(d=Jn(d),Qo(n0(d),function(f){return ro.call(d,f)}))}:Cp,Qu=n0?function(d){for(var f=[];d;)ml(f,b_(d)),d=yl(d);return f}:Cp,xr=dr;function eA(d,f,_){for(var w=-1,C=(f=gc(f,d)).length,O=!1;++w<C;){var U=la(f[w]);if(!(O=null!=d&&_(d,U)))break;d=d[U]}return O||++w!=C?O:!!(C=null==d?0:d.length)&&ah(C)&&Rl(U,C)&&(Zt(d)||Dd(d))}function tA(d){return"function"!=typeof d.constructor||sp(d)?{}:cr(yl(d))}function x_(d){return Zt(d)||Dd(d)||!!(AE&&d&&d[AE])}function Rl(d,f){var _=typeof d;return!!(f=f??Pa)&&("number"==_||"symbol"!=_&&kk.test(d))&&d>-1&&d%1==0&&d<f}function ps(d,f,_){if(!fi(_))return!1;var w=typeof f;return!!("number"==w?wr(_)&&Rl(f,_.length):"string"==w&&f in _)&&Ro(_[f],d)}function Ju(d,f){if(Zt(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!zs(d))||sE.test(d)||!kb.test(d)||null!=f&&d in Jn(f)}function P0(d){var f=ip(d),_=T[f];if("function"!=typeof _||!(f in Jt.prototype))return!1;if(d===_)return!0;var w=yc(_);return!!w&&d===w[0]}(Oa&&xr(new Oa(new ArrayBuffer(1)))!=od||Pu&&xr(new Pu)!=wo||Hi&&xr(Hi.resolve())!=JC||cc&&xr(new cc)!=Mo||ku&&xr(new ku)!=sd)&&(xr=function(d){var f=dr(d),_=f==hl?d.constructor:B,w=_?Wi(_):"";if(w)switch(w){case IE:return od;case Kg:return wo;case RE:return JC;case so:return Mo;case s0:return sd}return f});var lO=Du?Ga:dh;function sp(d){var f=d&&d.constructor;return d===("function"==typeof f&&f.prototype||ta)}function k0(d){return d==d&&!fi(d)}function w_(d,f){return function(_){return null!=_&&_[d]===f&&(f!==B||d in Jn(_))}}function ns(d,f,_){return f=lr(f===B?d.length-1:f,0),function(){for(var w=arguments,C=-1,O=lr(w.length-f,0),U=ae(O);++C<O;)U[C]=w[f+C];C=-1;for(var H=ae(f+1);++C<f;)H[C]=w[C];return H[f]=_(U),yn(d,this,H)}}function N0(d,f){return f.length<2?d:fc(d,oo(f,0,-1))}function S_(d,f){if(("constructor"!==f||"function"!=typeof d[f])&&"__proto__"!=f)return d[f]}var C_=U0(x0),xc=Xk||function(d,f){return _r.setTimeout(d,f)},E_=U0(Xf);function B0(d,f,_){var w=f+"";return E_(d,function iA(d,f){var _=f.length;if(!_)return d;var w=_-1;return f[w]=(_>1?"& ":"")+f[w],f=f.join(_>2?", ":" "),d.replace(oE,"{\n/* [wrapped with "+f+"] */\n")}(w,function A_(d,f){return So(Ab,function(_){var w="_."+_[0];f&_[1]&&!ic(d,w)&&d.push(w)}),d.sort()}(function I0(d){var f=d.match(aE);return f?f[1].split(lE):[]}(w),_)))}function U0(d){var f=0,_=0;return function(){var w=r0(),C=Cg-(w-_);if(_=w,C>0){if(++f>=qC)return arguments[0]}else f=0;return d.apply(B,arguments)}}function eh(d,f){var _=-1,w=d.length,C=w-1;for(f=f===B?w:f;++_<f;){var O=Xu(_,C),U=d[O];d[O]=d[_],d[_]=U}return d.length=f,d}var V0=function M_(d){var f=Y_(d,function(w){return 500===_.size&&_.clear(),w}),_=f.cache;return f}(function(d){var f=[];return 46===d.charCodeAt(0)&&f.push(""),d.replace(Ob,function(_,w,C,O){f.push(C?O.replace(dE,"$1"):w||_)}),f});function la(d){if("string"==typeof d||zs(d))return d;var f=d+"";return"0"==f&&1/d==-Mn?"-0":f}function Wi(d){if(null!=d){try{return ei.call(d)}catch{}try{return d+""}catch{}}return""}function T_(d){if(d instanceof Jt)return d.clone();var f=new Os(d.__wrapped__,d.__chain__);return f.__actions__=Nr(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}var z0=rn(function(d,f){return Ti(d)?_d(d,dn(f,1,Ti,!0)):[]}),H0=rn(function(d,f){var _=Bs(f);return Ti(_)&&(_=B),Ti(d)?_d(d,dn(f,1,Ti,!0),Mt(_,2)):[]}),sA=rn(function(d,f){var _=Bs(f);return Ti(_)&&(_=B),Ti(d)?_d(d,dn(f,1,Ti,!0),B,_):[]});function j0(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var C=null==_?0:en(_);return C<0&&(C=lr(w+C,0)),rc(d,Mt(f,3),C)}function X0(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var C=w-1;return _!==B&&(C=en(_),C=_<0?lr(w+C,0):yr(C,w-1)),rc(d,Mt(f,3),C,!0)}function op(d){return null!=d&&d.length?dn(d,1):[]}function q0(d){return d&&d.length?d[0]:B}var P_=rn(function(d){var f=hi(d,Yu);return f.length&&f[0]===d[0]?Sl(f):[]}),Y0=rn(function(d){var f=Bs(d),_=hi(d,Yu);return f===Bs(_)?f=B:_.pop(),_.length&&_[0]===d[0]?Sl(_,Mt(f,2)):[]}),Cd=rn(function(d){var f=Bs(d),_=hi(d,Yu);return(f="function"==typeof f?f:B)&&_.pop(),_.length&&_[0]===d[0]?Sl(_,B,f):[]});function Bs(d){var f=null==d?0:d.length;return f?d[f-1]:B}var uA=rn(K0);function K0(d,f){return d&&d.length&&f&&f.length?ju(d,f):d}var pA=Va(function(d,f){var _=null==d?0:d.length,w=Bu(d,f);return h_(d,hi(f,function(C){return Rl(C,_)?+C:C}).sort(bd)),w});function ap(d){return null==d?d:Qk.call(d)}var nx=rn(function(d){return El(dn(d,1,Ti,!0))}),ix=rn(function(d){var f=Bs(d);return Ti(f)&&(f=B),El(dn(d,1,Ti,!0),Mt(f,2))}),rx=rn(function(d){var f=Bs(d);return f="function"==typeof f?f:B,El(dn(d,1,Ti,!0),B,f)});function Ed(d){if(!d||!d.length)return[];var f=0;return d=Qo(d,function(_){if(Ti(_))return f=lr(_.length,f),!0}),Un(f,function(_){return hi(d,Gg(_))})}function B_(d,f){if(!d||!d.length)return[];var _=Ed(d);return null==f?_:hi(_,function(w){return yn(f,B,w)})}var U_=rn(function(d,f){return Ti(d)?_d(d,f):[]}),V_=rn(function(d){return Al(Qo(d,Ti))}),z_=rn(function(d){var f=Bs(d);return Ti(f)&&(f=B),Al(Qo(d,Ti),Mt(f,2))}),ih=rn(function(d){var f=Bs(d);return f="function"==typeof f?f:B,Al(Qo(d,Ti),B,f)}),bA=rn(Ed),wA=rn(function(d){var f=d.length,_=f>1?d[f-1]:B;return _="function"==typeof _?(d.pop(),_):B,B_(d,_)});function ax(d){var f=T(d);return f.__chain__=!0,f}function rh(d,f){return f(d)}var dp=Va(function(d){var f=d.length,_=f?d[0]:0,w=this.__wrapped__,C=function(O){return Bu(O,d)};return!(f>1||this.__actions__.length)&&w instanceof Jt&&Rl(_)?((w=w.slice(_,+_+(f?1:0))).__actions__.push({func:rh,args:[C],thisArg:B}),new Os(w,this.__chain__).thru(function(O){return f&&!O.length&&O.push(B),O})):this.thru(C)}),EA=oa(function(d,f,_){ti.call(d,_)?++d[_]:ra(d,_,1)}),W_=Kf(j0),dx=Kf(X0);function fx(d,f){return(Zt(d)?So:Na)(d,Mt(f,3))}function px(d,f){return(Zt(d)?Wk:Uf)(d,Mt(f,3))}var AA=oa(function(d,f,_){ti.call(d,_)?d[_].push(f):ra(d,_,[f])}),DA=rn(function(d,f,_){var w=-1,C="function"==typeof f,O=wr(d)?ae(d.length):[];return Na(d,function(U){O[++w]=C?yn(f,U,_):zu(U,f,_)}),O}),Us=oa(function(d,f,_){ra(d,_,f)});function Vs(d,f){return(Zt(d)?hi:Wu)(d,Mt(f,3))}var RA=oa(function(d,f,_){d[_?0:1].push(f)},function(){return[[],[]]}),UA=rn(function(d,f){if(null==d)return[];var _=f.length;return _>1&&ps(d,f[0],f[1])?f=[]:_>2&&ps(f[0],f[1],f[2])&&(f=[f[0]]),_0(d,dn(f,1),[])}),Sc=jk||function(){return _r.Date.now()};function Td(d,f,_){return f=_?B:f,aa(d,Ia,B,B,B,B,f=d&&null==f?d.length:f)}function $_(d,f){var _;if("function"!=typeof f)throw new Lr(Ln);return d=en(d),function(){return--d>0&&(_=f.apply(this,arguments)),d<=1&&(f=B),_}}var hp=rn(function(d,f,_){var w=In;if(_.length){var C=xi(_,Zu(hp));w|=Xo}return aa(d,w,f,_,C)}),j_=rn(function(d,f,_){var w=In|or;if(_.length){var C=xi(_,Zu(j_));w|=Xo}return aa(f,w,d,_,C)});function HA(d,f,_){var w,C,O,U,H,Y,pe=0,ve=!1,Te=!1,We=!0;if("function"!=typeof d)throw new Lr(Ln);function lt(pi){var da=w,ko=C;return w=C=B,pe=pi,U=d.apply(ko,da)}function At(pi){var da=pi-Y;return Y===B||da>=f||da<0||Te&&pi-pe>=O}function un(){var pi=Sc();if(At(pi))return Rn(pi);H=xc(un,function sn(pi){var qT=f-(pi-Y);return Te?yr(qT,O-(pi-pe)):qT}(pi))}function Rn(pi){return H=B,We&&w?lt(pi):(w=C=B,U)}function Vr(){var pi=Sc(),da=At(pi);if(w=arguments,C=this,Y=pi,da){if(H===B)return function Et(pi){return pe=pi,H=xc(un,f),ve?lt(pi):U}(Y);if(Te)return WE(H),H=xc(un,f),lt(Y)}return H===B&&(H=xc(un,f)),U}return f=lo(f)||0,fi(_)&&(ve=!!_.leading,O=(Te="maxWait"in _)?lr(lo(_.maxWait)||0,f):O,We="trailing"in _?!!_.trailing:We),Vr.cancel=function Ws(){H!==B&&WE(H),pe=0,w=Y=C=H=B},Vr.flush=function ur(){return H===B?U:Rn(Sc())},Vr}var X_=rn(function(d,f){return r_(d,1,f)}),q_=rn(function(d,f,_){return r_(d,lo(f)||0,_)});function Y_(d,f){if("function"!=typeof d||null!=f&&"function"!=typeof f)throw new Lr(Ln);var _=function(){var w=arguments,C=f?f.apply(this,w):w[0],O=_.cache;if(O.has(C))return O.get(C);var U=d.apply(this,w);return _.cache=O.set(C,U)||O,U};return _.cache=new(Y_.Cache||La),_}function sh(d){if("function"!=typeof d)throw new Lr(Ln);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}Y_.Cache=La;var WA=GE(function(d,f){var _=(f=1==f.length&&Zt(f[0])?hi(f[0],Kr(Mt())):hi(dn(f,1),Kr(Mt()))).length;return rn(function(w){for(var C=-1,O=yr(w.length,_);++C<O;)w[C]=f[C].call(this,w[C]);return yn(d,this,w)})}),K_=rn(function(d,f){var _=xi(f,Zu(K_));return aa(d,Xo,B,f,_)}),gx=rn(function(d,f){var _=xi(f,Zu(gx));return aa(d,ul,B,f,_)}),_x=Va(function(d,f){return aa(d,qo,B,B,B,f)});function Ro(d,f){return d===f||d!=d&&f!=f}var KA=Jf(vd),bx=Jf(function(d,f){return d>=f}),Dd=zE(function(){return arguments}())?zE:function(d){return ni(d)&&ti.call(d,"callee")&&!ro.call(d,"callee")},Zt=ae.isArray,oh=Ct?Kr(Ct):function a_(d){return ni(d)&&dr(d)==yu};function wr(d){return null!=d&&ah(d.length)&&!Ga(d)}function Ti(d){return ni(d)&&wr(d)}var Ha=qk||dh,hO=Af?Kr(Af):function eO(d){return ni(d)&&dr(d)==tc};function Sx(d){if(!ni(d))return!1;var f=dr(d);return f==id||f==QC||"string"==typeof d.message&&"string"==typeof d.name&&!Cc(d)}function Ga(d){if(!fi(d))return!1;var f=dr(d);return f==gf||f==Tb||f==ZC||f==eE}function pp(d){return"number"==typeof d&&d==en(d)}function ah(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Pa}function fi(d){var f=typeof d;return null!=d&&("object"==f||"function"==f)}function ni(d){return null!=d&&"object"==typeof d}var Cx=Yb?Kr(Yb):function tO(d){return ni(d)&&xr(d)==wo};function iv(d){return"number"==typeof d||ni(d)&&dr(d)==_f}function Cc(d){if(!ni(d)||dr(d)!=hl)return!1;var f=yl(d);if(null===f)return!0;var _=ti.call(f,"constructor")&&f.constructor;return"function"==typeof _&&_ instanceof _&&ei.call(_)==Pf}var rv=Rs?Kr(Rs):function p0(d){return ni(d)&&dr(d)==rd},sv=zg?Kr(zg):function m0(d){return ni(d)&&xr(d)==Mo};function $a(d){return"string"==typeof d||!Zt(d)&&ni(d)&&dr(d)==nc}function zs(d){return"symbol"==typeof d||ni(d)&&dr(d)==vf}var Id=ME?Kr(ME):function Gu(d){return ni(d)&&ah(d.length)&&!!yt[dr(d)]},Ex=Jf(c_),nT=Jf(function(d,f){return d<=f});function av(d){if(!d)return[];if(wr(d))return $a(d)?ds(d):Nr(d);if(Ru&&d[Ru])return function Ae(X){for(var oe,ae=[];!(oe=X.next()).done;)ae.push(oe.value);return ae}(d[Ru]());var f=xr(d);return(f==wo?kr:f==Mo?vr:Rd)(d)}function Pl(d){return d?(d=lo(d))===Mn||d===-Mn?(d<0?-1:1)*KC:d==d?d:0:0===d?d:0}function en(d){var f=Pl(d),_=f%1;return f==f?_?f-_:f:0}function kl(d){return d?hc(en(d),0,Yo):0}function lo(d){if("number"==typeof d)return d;if(zs(d))return mf;if(fi(d)){var f="function"==typeof d.valueOf?d.valueOf():d;d=fi(f)?f+"":f}if("string"!=typeof d)return 0===d?d:+d;d=If(d);var _=Ji.test(d);return _||Ds.test(d)?Sf(d.slice(2),_?2:8):hE.test(d)?mf:+d}function Ec(d){return fs(d,Hs(d))}function Xn(d){return null==d?"":ts(d)}var lh=_c(function(d,f){if(sp(f)||wr(f))fs(f,Mr(f),d);else for(var _ in f)ti.call(f,_)&&gd(d,_,f[_])}),ca=_c(function(d,f){fs(f,Hs(f),d)}),_p=_c(function(d,f,_,w){fs(f,Hs(f),d,w)}),iT=_c(function(d,f,_,w){fs(f,Mr(f),d,w)}),Ac=Va(Bu),lv=rn(function(d,f){d=Jn(d);var _=-1,w=f.length,C=w>2?f[2]:B;for(C&&ps(f[0],f[1],C)&&(w=1);++_<w;)for(var O=f[_],U=Hs(O),H=-1,Y=U.length;++H<Y;){var pe=U[H],ve=d[pe];(ve===B||Ro(ve,ta[pe])&&!ti.call(d,pe))&&(d[pe]=O[pe])}return d}),cv=rn(function(d){return d.push(B,E0),yn(hv,B,d)});function uv(d,f,_){var w=null==d?B:fc(d,f);return w===B?_:w}function Ol(d,f){return null!=d&&eA(d,f,h0)}var Xa=__(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=ac.call(f)),d[f]=_},bp(Ur)),hT=__(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=ac.call(f)),ti.call(d,f)?d[f].push(_):d[f]=[_]},Mt),fT=rn(zu);function Mr(d){return wr(d)?ia(d):Gf(d)}function Hs(d){return wr(d)?ia(d,!0):function Wf(d){if(!fi(d))return function L0(d){var f=[];if(null!=d)for(var _ in Jn(d))f.push(_);return f}(d);var f=sp(d),_=[];for(var w in d)"constructor"==w&&(f||!ti.call(d,w))||_.push(w);return _}(d)}var Tx=_c(function(d,f,_){d_(d,f,_)}),hv=_c(function(d,f,_,w){d_(d,f,_,w)}),pT=Va(function(d,f){var _={};if(null==d)return _;var w=!1;f=hi(f,function(O){return O=gc(O,d),w||(w=O.length>1),O}),fs(d,Il(d),_),w&&(_=Fs(_,ui|ls|As,A0));for(var C=f.length;C--;)qf(_,f[C]);return _}),mT=Va(function(d,f){return null==d?{}:function sa(d,f){return v0(d,f,function(_,w){return Ol(d,w)})}(d,f)});function Ix(d,f){if(null==d)return{};var _=hi(Il(d),function(w){return[w]});return f=Mt(f),v0(d,_,function(w,C){return f(w,C[0])})}var Px=Io(Mr),kx=Io(Hs);function Rd(d){return null==d?[]:Rf(d,Mr(d))}var Fx=wd(function(d,f,_){return f=f.toLowerCase(),d+(_?Nx(f):f)});function Nx(d){return yp(Xn(d).toLowerCase())}function Bx(d){return(d=Xn(d))&&d.replace(fE,Tu).replace(Nk,"")}var wT=wd(function(d,f,_){return d+(_?"-":"")+f.toLowerCase()}),MT=wd(function(d,f,_){return d+(_?" ":"")+f.toLowerCase()}),pO=KE("toLowerCase"),CT=wd(function(d,f,_){return d+(_?"_":"")+f.toLowerCase()}),gO=wd(function(d,f,_){return d+(_?" ":"")+yp(f)}),DT=wd(function(d,f,_){return d+(_?" ":"")+f.toUpperCase()}),yp=KE("toUpperCase");function $x(d,f,_){return d=Xn(d),(f=_?B:f)===B?function e0(X){return wE.test(X)}(d)?function Do(X){return X.match(xE)||[]}(d):function Kb(X){return X.match(cE)||[]}(d):d.match(f)||[]}var jx=rn(function(d,f){try{return yn(d,B,f)}catch(_){return Sx(_)?_:new Fe(_)}}),IT=Va(function(d,f){return So(f,function(_){_=la(_),ra(d,_,hp(d[_],d))}),d});function bp(d){return function(){return d}}var Xx=vc(),qx=vc(!0);function Ur(d){return d}function Yx(d){return l_("function"==typeof d?d:Fs(d,ui))}var yO=rn(function(d,f){return function(_){return zu(_,d,f)}}),D=rn(function(d,f){return function(_){return zu(d,_,f)}});function qa(d,f,_){var w=Mr(f),C=zf(f,w);null==_&&(!fi(f)||!C.length&&w.length)&&(_=f,f=d,d=this,C=zf(f,Mr(f)));var O=!(fi(_)&&"chain"in _&&!_.chain),U=Ga(d);return So(C,function(H){var Y=f[H];d[H]=Y,U&&(d.prototype[H]=function(){var pe=this.__chain__;if(O||pe){var ve=d(this.__wrapped__);return(ve.__actions__=Nr(this.__actions__)).push({func:Y,args:arguments,thisArg:d}),ve.__chain__=pe,ve}return Y.apply(d,ml([this.value()],arguments))})}),d}function xp(){}var NT=v_(hi),wp=v_(dd),kd=v_(gl);function Mp(d){return Ju(d)?Gg(la(d)):function jf(d){return function(f){return fc(f,d)}}(d)}var gv=C0(),Sp=C0(!0);function Cp(){return[]}function dh(){return!1}var Zx=Zf(function(d,f){return d+f},0),VT=Md("ceil"),Qx=Zf(function(d,f){return d/f},1),Jx=Md("floor"),bv=Zf(function(d,f){return d*f},1),ew=Md("round"),$T=Zf(function(d,f){return d-f},0);return T.after=function za(d,f){if("function"!=typeof f)throw new Lr(Ln);return d=en(d),function(){if(--d<1)return f.apply(this,arguments)}},T.ary=Td,T.assign=lh,T.assignIn=ca,T.assignInWith=_p,T.assignWith=iT,T.at=Ac,T.before=$_,T.bind=hp,T.bindAll=IT,T.bindKey=j_,T.castArray=function jA(){if(!arguments.length)return[];var d=arguments[0];return Zt(d)?d:[d]},T.chain=ax,T.chunk=function D_(d,f,_){f=(_?ps(d,f,_):f===B)?1:lr(en(f),0);var w=null==d?0:d.length;if(!w||f<1)return[];for(var C=0,O=0,U=ae(qg(w/f));C<w;)U[O++]=oo(d,C,C+=f);return U},T.compact=function Br(d){for(var f=-1,_=null==d?0:d.length,w=0,C=[];++f<_;){var O=d[f];O&&(C[w++]=O)}return C},T.concat=function th(){var d=arguments.length;if(!d)return[];for(var f=ae(d-1),_=arguments[0],w=d;w--;)f[w-1]=arguments[w];return ml(Zt(_)?Nr(_):[_],dn(f,1))},T.cond=function RT(d){var f=null==d?0:d.length,_=Mt();return d=f?hi(d,function(w){if("function"!=typeof w[1])throw new Lr(Ln);return[_(w[0]),w[1]]}):[],rn(function(w){for(var C=-1;++C<f;){var O=d[C];if(yn(O[0],this,w))return yn(O[1],this,w)}})},T.conforms=function PT(d){return function n_(d){var f=Mr(d);return function(_){return i_(_,d,f)}}(Fs(d,ui))},T.constant=bp,T.countBy=EA,T.create=function rT(d,f){var _=cr(d);return null==f?_:Bf(_,f)},T.curry=function VA(d,f,_){var w=aa(d,jo,B,B,B,B,B,f=_?B:f);return w.placeholder=VA.placeholder,w},T.curryRight=function zA(d,f,_){var w=aa(d,dl,B,B,B,B,B,f=_?B:f);return w.placeholder=zA.placeholder,w},T.debounce=HA,T.defaults=lv,T.defaultsDeep=cv,T.defer=X_,T.delay=q_,T.difference=z0,T.differenceBy=H0,T.differenceWith=sA,T.drop=function G0(d,f,_){var w=null==d?0:d.length;return w?oo(d,(f=_||f===B?1:en(f))<0?0:f,w):[]},T.dropRight=function oA(d,f,_){var w=null==d?0:d.length;return w?oo(d,0,(f=w-(f=_||f===B?1:en(f)))<0?0:f):[]},T.dropRightWhile=function W0(d,f){return d&&d.length?Ua(d,Mt(f,3),!0,!0):[]},T.dropWhile=function aA(d,f){return d&&d.length?Ua(d,Mt(f,3),!0):[]},T.fill=function $0(d,f,_,w){var C=null==d?0:d.length;return C?(_&&"number"!=typeof _&&ps(d,f,_)&&(_=0,w=C),function Jr(d,f,_,w){var C=d.length;for((_=en(_))<0&&(_=-_>C?0:C+_),(w=w===B||w>C?C:en(w))<0&&(w+=C),w=_>w?0:kl(w);_<w;)d[_++]=f;return d}(d,f,_,w)):[]},T.filter=function up(d,f){return(Zt(d)?Qo:Ml)(d,Mt(f,3))},T.flatMap=function ux(d,f){return dn(Vs(d,f),1)},T.flatMapDeep=function hx(d,f){return dn(Vs(d,f),Mn)},T.flatMapDepth=function Mc(d,f,_){return _=_===B?1:en(_),dn(Vs(d,f),_)},T.flatten=op,T.flattenDeep=function I_(d){return null!=d&&d.length?dn(d,Mn):[]},T.flattenDepth=function lA(d,f){return null!=d&&d.length?dn(d,f=f===B?1:en(f)):[]},T.flip=function uO(d){return aa(d,nd)},T.flow=Xx,T.flowRight=qx,T.fromPairs=function nh(d){for(var f=-1,_=null==d?0:d.length,w={};++f<_;){var C=d[f];w[C[0]]=C[1]}return w},T.functions=function cT(d){return null==d?[]:zf(d,Mr(d))},T.functionsIn=function dT(d){return null==d?[]:zf(d,Hs(d))},T.groupBy=AA,T.initial=function R_(d){return null!=d&&d.length?oo(d,0,-1):[]},T.intersection=P_,T.intersectionBy=Y0,T.intersectionWith=Cd,T.invert=Xa,T.invertBy=hT,T.invokeMap=DA,T.iteratee=Yx,T.keyBy=Us,T.keys=Mr,T.keysIn=Hs,T.map=Vs,T.mapKeys=function Ax(d,f){var _={};return f=Mt(f,3),es(d,function(w,C,O){ra(_,f(w,C,O),w)}),_},T.mapValues=function fO(d,f){var _={};return f=Mt(f,3),es(d,function(w,C,O){ra(_,C,f(w,C,O))}),_},T.matches=function mv(d){return $f(Fs(d,ui))},T.matchesProperty=function OT(d,f){return $u(d,Fs(f,ui))},T.memoize=Y_,T.merge=Tx,T.mergeWith=hv,T.method=yO,T.methodOf=D,T.mixin=qa,T.negate=sh,T.nthArg=function FT(d){return d=en(d),rn(function(f){return u_(f,d)})},T.omit=pT,T.omitBy=function Dx(d,f){return Ix(d,sh(Mt(f)))},T.once=function GA(d){return $_(2,d)},T.orderBy=function IA(d,f,_,w){return null==d?[]:(Zt(f)||(f=null==f?[]:[f]),Zt(_=w?B:_)||(_=null==_?[]:[_]),_0(d,f,_))},T.over=NT,T.overArgs=WA,T.overEvery=wp,T.overSome=kd,T.partial=K_,T.partialRight=gx,T.partition=RA,T.pick=mT,T.pickBy=Ix,T.property=Mp,T.propertyOf=function ch(d){return function(f){return null==d?B:fc(d,f)}},T.pull=uA,T.pullAll=K0,T.pullAllBy=function hA(d,f,_){return d&&d.length&&f&&f.length?ju(d,f,Mt(_,2)):d},T.pullAllWith=function fA(d,f,_){return d&&d.length&&f&&f.length?ju(d,f,B,_):d},T.pullAt=pA,T.range=gv,T.rangeRight=Sp,T.rearg=_x,T.reject=function OA(d,f){return(Zt(d)?Qo:Ml)(d,sh(Mt(f,3)))},T.remove=function mA(d,f){var _=[];if(!d||!d.length)return _;var w=-1,C=[],O=d.length;for(f=Mt(f,3);++w<O;){var U=d[w];f(U,w,d)&&(_.push(U),C.push(w))}return h_(d,C),_},T.rest=function fp(d,f){if("function"!=typeof d)throw new Lr(Ln);return rn(d,f=f===B?f:en(f))},T.reverse=ap,T.sampleSize=function mx(d,f,_){return f=(_?ps(d,f,_):f===B)?1:en(f),(Zt(d)?md:b0)(d,f)},T.set=function gT(d,f,_){return null==d?d:yd(d,f,_)},T.setWith=function Rx(d,f,_,w){return w="function"==typeof w?w:B,null==d?d:yd(d,f,_,w)},T.shuffle=function FA(d){return(Zt(d)?Fa:pc)(d)},T.slice=function L_(d,f,_){var w=null==d?0:d.length;return w?(_&&"number"!=typeof _&&ps(d,f,_)?(f=0,_=w):(f=null==f?0:en(f),_=_===B?w:en(_)),oo(d,f,_)):[]},T.sortBy=UA,T.sortedUniq=function wc(d){return d&&d.length?M0(d):[]},T.sortedUniqBy=function ex(d,f){return d&&d.length?M0(d,Mt(f,2)):[]},T.split=function mO(d,f,_){return _&&"number"!=typeof _&&ps(d,f,_)&&(f=_=B),(_=_===B?Yo:_>>>0)?(d=Xn(d))&&("string"==typeof f||null!=f&&!rv(f))&&!(f=ts(f))&&hd(d)?ge(ds(d),0,_):d.split(f,_):[]},T.spread=function vx(d,f){if("function"!=typeof d)throw new Lr(Ln);return f=null==f?0:lr(en(f),0),rn(function(_){var w=_[f],C=ge(_,0,f);return w&&ml(C,w),yn(d,this,C)})},T.tail=function tx(d){var f=null==d?0:d.length;return f?oo(d,1,f):[]},T.take=function vA(d,f,_){return d&&d.length?oo(d,0,(f=_||f===B?1:en(f))<0?0:f):[]},T.takeRight=function cO(d,f,_){var w=null==d?0:d.length;return w?oo(d,(f=w-(f=_||f===B?1:en(f)))<0?0:f,w):[]},T.takeRightWhile=function lp(d,f){return d&&d.length?Ua(d,Mt(f,3),!1,!0):[]},T.takeWhile=function yA(d,f){return d&&d.length?Ua(d,Mt(f,3)):[]},T.tap=function lx(d,f){return f(d),d},T.throttle=function Z_(d,f,_){var w=!0,C=!0;if("function"!=typeof d)throw new Lr(Ln);return fi(_)&&(w="leading"in _?!!_.leading:w,C="trailing"in _?!!_.trailing:C),HA(d,f,{leading:w,maxWait:f,trailing:C})},T.thru=rh,T.toArray=av,T.toPairs=Px,T.toPairsIn=kx,T.toPath=function BT(d){return Zt(d)?hi(d,la):zs(d)?[d]:Nr(V0(Xn(d)))},T.toPlainObject=Ec,T.transform=function _T(d,f,_){var w=Zt(d),C=w||Ha(d)||Id(d);if(f=Mt(f,4),null==_){var O=d&&d.constructor;_=C?w?new O:[]:fi(d)&&Ga(O)?cr(yl(d)):{}}return(C?So:es)(d,function(U,H,Y){return f(_,U,H,Y)}),_},T.unary=function $A(d){return Td(d,1)},T.union=nx,T.unionBy=ix,T.unionWith=rx,T.uniq=function N_(d){return d&&d.length?El(d):[]},T.uniqBy=function sx(d,f){return d&&d.length?El(d,Mt(f,2)):[]},T.uniqWith=function cp(d,f){return f="function"==typeof f?f:B,d&&d.length?El(d,B,f):[]},T.unset=function vT(d,f){return null==d||qf(d,f)},T.unzip=Ed,T.unzipWith=B_,T.update=function Ox(d,f,_){return null==d?d:Ba(d,f,Tl(_))},T.updateWith=function yT(d,f,_,w){return w="function"==typeof w?w:B,null==d?d:Ba(d,f,Tl(_),w)},T.values=Rd,T.valuesIn=function bT(d){return null==d?[]:Rf(d,Hs(d))},T.without=U_,T.words=$x,T.wrap=function $n(d,f){return K_(Tl(f),d)},T.xor=V_,T.xorBy=z_,T.xorWith=ih,T.zip=bA,T.zipObject=function ox(d,f){return m_(d||[],f||[],gd)},T.zipObjectDeep=function xA(d,f){return m_(d||[],f||[],yd)},T.zipWith=wA,T.entries=Px,T.entriesIn=kx,T.extend=ca,T.extendWith=_p,qa(T,T),T.add=Zx,T.attempt=jx,T.camelCase=Fx,T.capitalize=Nx,T.ceil=VT,T.clamp=function Wt(d,f,_){return _===B&&(_=f,f=B),_!==B&&(_=(_=lo(_))==_?_:0),f!==B&&(f=(f=lo(f))==f?f:0),hc(lo(d),f,_)},T.clone=function XA(d){return Fs(d,As)},T.cloneDeep=function yx(d){return Fs(d,ui|As)},T.cloneDeepWith=function qA(d,f){return Fs(d,ui|As,f="function"==typeof f?f:B)},T.cloneWith=function Q_(d,f){return Fs(d,As,f="function"==typeof f?f:B)},T.conformsTo=function YA(d,f){return null==f||i_(d,f,Mr(f))},T.deburr=Bx,T.defaultTo=function kT(d,f){return null==d||d!=d?f:d},T.divide=Qx,T.endsWith=function Ux(d,f,_){d=Xn(d),f=ts(f);var w=d.length,C=_=_===B?w:hc(en(_),0,w);return(_-=f.length)>=0&&d.slice(_,C)==f},T.eq=Ro,T.escape=function xT(d){return(d=Xn(d))&&kg.test(d)?d.replace(Ib,CE):d},T.escapeRegExp=function Vx(d){return(d=Xn(d))&&Lb.test(d)?d.replace(xf,"\\$&"):d},T.every=function cx(d,f,_){var w=Zt(d)?dd:UE;return _&&ps(d,f,_)&&(f=B),w(d,Mt(f,3))},T.find=W_,T.findIndex=j0,T.findKey=function sT(d,f){return Pt(d,Mt(f,3),es)},T.findLast=dx,T.findLastIndex=X0,T.findLastKey=function dv(d,f){return Pt(d,Mt(f,3),s_)},T.floor=Jx,T.forEach=fx,T.forEachRight=px,T.forIn=function ja(d,f){return null==d?d:Fr(d,Mt(f,3),Hs)},T.forInRight=function oT(d,f){return null==d?d:u0(d,Mt(f,3),Hs)},T.forOwn=function aT(d,f){return d&&es(d,Mt(f,3))},T.forOwnRight=function lT(d,f){return d&&s_(d,Mt(f,3))},T.get=uv,T.gt=KA,T.gte=bx,T.has=function uT(d,f){return null!=d&&eA(d,f,o_)},T.hasIn=Ol,T.head=q0,T.identity=Ur,T.includes=function TA(d,f,_,w){d=wr(d)?d:Rd(d),_=_&&!w?en(_):0;var C=d.length;return _<0&&(_=lr(C+_,0)),$a(d)?_<=C&&d.indexOf(f,_)>-1:!!C&&_l(d,f,_)>-1},T.indexOf=function cA(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var C=null==_?0:en(_);return C<0&&(C=lr(w+C,0)),_l(d,f,C)},T.inRange=function q(d,f,_){return f=Pl(f),_===B?(_=f,f=0):_=Pl(_),function VE(d,f,_){return d>=yr(f,_)&&d<lr(f,_)}(d=lo(d),f,_)},T.invoke=fT,T.isArguments=Dd,T.isArray=Zt,T.isArrayBuffer=oh,T.isArrayLike=wr,T.isArrayLikeObject=Ti,T.isBoolean=function xx(d){return!0===d||!1===d||ni(d)&&dr(d)==Ye},T.isBuffer=Ha,T.isDate=hO,T.isElement=function ZA(d){return ni(d)&&1===d.nodeType&&!Cc(d)},T.isEmpty=function wx(d){if(null==d)return!0;if(wr(d)&&(Zt(d)||"string"==typeof d||"function"==typeof d.splice||Ha(d)||Id(d)||Dd(d)))return!d.length;var f=xr(d);if(f==wo||f==Mo)return!d.size;if(sp(d))return!Gf(d).length;for(var _ in d)if(ti.call(d,_))return!1;return!0},T.isEqual=function Mx(d,f){return Hu(d,f)},T.isEqualWith=function J_(d,f,_){var w=(_="function"==typeof _?_:B)?_(d,f):B;return w===B?Hu(d,f,B,_):!!w},T.isError=Sx,T.isFinite=function ev(d){return"number"==typeof d&&TE(d)},T.isFunction=Ga,T.isInteger=pp,T.isLength=ah,T.isMap=Cx,T.isMatch=function tv(d,f){return d===f||f0(d,f,D0(f))},T.isMatchWith=function mp(d,f,_){return _="function"==typeof _?_:B,f0(d,f,D0(f),_)},T.isNaN=function QA(d){return iv(d)&&d!=+d},T.isNative=function nv(d){if(lO(d))throw new Fe("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Hf(d)},T.isNil=function Wa(d){return null==d},T.isNull=function gp(d){return null===d},T.isNumber=iv,T.isObject=fi,T.isObjectLike=ni,T.isPlainObject=Cc,T.isRegExp=rv,T.isSafeInteger=function JA(d){return pp(d)&&d>=-Pa&&d<=Pa},T.isSet=sv,T.isString=$a,T.isSymbol=zs,T.isTypedArray=Id,T.isUndefined=function eT(d){return d===B},T.isWeakMap=function ov(d){return ni(d)&&xr(d)==sd},T.isWeakSet=function tT(d){return ni(d)&&"[object WeakSet]"==dr(d)},T.join=function k_(d,f){return null==d?"":Yk.call(d,f)},T.kebabCase=wT,T.last=Bs,T.lastIndexOf=function dA(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var C=w;return _!==B&&(C=(C=en(_))<0?lr(w+C,0):yr(C,w-1)),f==f?function t0(X,oe,ae){for(var Ke=ae+1;Ke--;)if(X[Ke]===oe)return Ke;return Ke}(d,f,C):rc(d,Zb,C,!0)},T.lowerCase=MT,T.lowerFirst=pO,T.lt=Ex,T.lte=nT,T.max=function zT(d){return d&&d.length?Vf(d,Ur,vd):B},T.maxBy=function HT(d,f){return d&&d.length?Vf(d,Mt(f,2),vd):B},T.mean=function Gs(d){return Qb(d,Ur)},T.meanBy=function GT(d,f){return Qb(d,Mt(f,2))},T.min=function WT(d){return d&&d.length?Vf(d,Ur,c_):B},T.minBy=function bO(d,f){return d&&d.length?Vf(d,Mt(f,2),c_):B},T.stubArray=Cp,T.stubFalse=dh,T.stubObject=function _v(){return{}},T.stubString=function vv(){return""},T.stubTrue=function Kx(){return!0},T.multiply=bv,T.nth=function O_(d,f){return d&&d.length?u_(d,en(f)):B},T.noConflict=function LT(){return _r._===this&&(_r._=pd),this},T.noop=xp,T.now=Sc,T.pad=function zx(d,f,_){d=Xn(d);var w=(f=en(f))?sc(d):0;if(!f||w>=f)return d;var C=(f-w)/2;return Qf(Yg(C),_)+d+Qf(qg(C),_)},T.padEnd=function Hx(d,f,_){d=Xn(d);var w=(f=en(f))?sc(d):0;return f&&w<f?d+Qf(f-w,_):d},T.padStart=function ki(d,f,_){d=Xn(d);var w=(f=en(f))?sc(d):0;return f&&w<f?Qf(f-w,_)+d:d},T.parseInt=function ST(d,f,_){return _||null==f?f=0:f&&(f=+f),Zk(Xn(d).replace(wf,""),f||0)},T.random=function Lx(d,f,_){if(_&&"boolean"!=typeof _&&ps(d,f,_)&&(f=_=B),_===B&&("boolean"==typeof f?(_=f,f=B):"boolean"==typeof d&&(_=d,d=B)),d===B&&f===B?(d=0,f=1):(d=Pl(d),f===B?(f=d,d=0):f=Pl(f)),d>f){var w=d;d=f,f=w}if(_||d%1||f%1){var C=DE();return yr(d+C*(f-d+jt("1e-"+((C+"").length-1))),f)}return Xu(d,f)},T.reduce=function PA(d,f,_){var w=Zt(d)?Tf:Eo,C=arguments.length<3;return w(d,Mt(f,4),_,C,Na)},T.reduceRight=function kA(d,f,_){var w=Zt(d)?Eu:Eo,C=arguments.length<3;return w(d,Mt(f,4),_,C,Uf)},T.repeat=function fv(d,f,_){return f=(_?ps(d,f,_):f===B)?1:en(f),p_(Xn(d),f)},T.replace=function pv(){var d=arguments,f=Xn(d[0]);return d.length<3?f:f.replace(d[1],d[2])},T.result=function Po(d,f,_){var w=-1,C=(f=gc(f,d)).length;for(C||(C=1,d=B);++w<C;){var O=null==d?B:d[la(f[w])];O===B&&(w=C,O=_),d=Ga(O)?O.call(d):O}return d},T.round=ew,T.runInContext=X,T.sample=function LA(d){return(Zt(d)?Jg:y0)(d)},T.size=function NA(d){if(null==d)return 0;if(wr(d))return $a(d)?sc(d):d.length;var f=xr(d);return f==wo||f==Mo?d.size:Gf(d).length},T.snakeCase=CT,T.some=function BA(d,f,_){var w=Zt(d)?gl:w0;return _&&ps(d,f,_)&&(f=B),w(d,Mt(f,3))},T.sortedIndex=function Z0(d,f){return qu(d,f)},T.sortedIndexBy=function F_(d,f,_){return Cl(d,f,Mt(_,2))},T.sortedIndexOf=function gA(d,f){var _=null==d?0:d.length;if(_){var w=qu(d,f);if(w<_&&Ro(d[w],f))return w}return-1},T.sortedLastIndex=function _A(d,f){return qu(d,f,!0)},T.sortedLastIndexBy=function Q0(d,f,_){return Cl(d,f,Mt(_,2),!0)},T.sortedLastIndexOf=function J0(d,f){if(null!=d&&d.length){var w=qu(d,f,!0)-1;if(Ro(d[w],f))return w}return-1},T.startCase=gO,T.startsWith=function _O(d,f,_){return d=Xn(d),_=null==_?0:hc(en(_),0,d.length),f=ts(f),d.slice(_,_+f.length)==f},T.subtract=$T,T.sum=function jT(d){return d&&d.length?To(d,Ur):0},T.sumBy=function XT(d,f){return d&&d.length?To(d,Mt(f,2)):0},T.template=function ET(d,f,_){var w=T.templateSettings;_&&ps(d,f,_)&&(f=B),d=Xn(d),f=_p({},f,w,Dl);var H,Y,C=_p({},f.imports,w.imports,Dl),O=Mr(C),U=Rf(C,O),pe=0,ve=f.interpolate||bu,Te="__p += '",We=vl((f.escape||bu).source+"|"+ve.source+"|"+(ve===Og?uE:bu).source+"|"+(f.evaluate||bu).source+"|$","g"),lt="//# sourceURL="+(ti.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++no+"]")+"\n";d.replace(We,function(At,un,Rn,Ws,ur,Vr){return Rn||(Rn=Ws),Te+=d.slice(pe,Vr).replace(Lg,EE),un&&(H=!0,Te+="' +\n__e("+un+") +\n'"),ur&&(Y=!0,Te+="';\n"+ur+";\n__p += '"),Rn&&(Te+="' +\n((__t = ("+Rn+")) == null ? '' : __t) +\n'"),pe=Vr+At.length,At}),Te+="';\n";var Et=ti.call(f,"variable")&&f.variable;if(Et){if(Fb.test(Et))throw new Fe("Invalid `variable` option passed into `_.template`")}else Te="with (obj) {\n"+Te+"\n}\n";Te=(Y?Te.replace(nE,""):Te).replace(iE,"$1").replace(rE,"$1;"),Te="function("+(Et||"obj")+") {\n"+(Et?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(H?", __e = _.escape":"")+(Y?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Te+"return __p\n}";var sn=jx(function(){return Vn(O,lt+"return "+Te).apply(B,U)});if(sn.source=Te,Sx(sn))throw sn;return sn},T.times=function yv(d,f){if((d=en(d))<1||d>Pa)return[];var _=Yo,w=yr(d,Yo);f=Mt(f),d-=Yo;for(var C=Un(w,f);++_<d;)f(_);return C},T.toFinite=Pl,T.toInteger=en,T.toLength=kl,T.toLower=function Gx(d){return Xn(d).toLowerCase()},T.toNumber=lo,T.toSafeInteger=function _t(d){return d?hc(en(d),-Pa,Pa):0===d?d:0},T.toString=Xn,T.toUpper=function vO(d){return Xn(d).toUpperCase()},T.trim=function AT(d,f,_){if((d=Xn(d))&&(_||f===B))return If(d);if(!d||!(f=ts(f)))return d;var w=ds(d),C=ds(f);return ge(w,ud(w,C),Jb(w,C)+1).join("")},T.trimEnd=function Pd(d,f,_){if((d=Xn(d))&&(_||f===B))return d.slice(0,Jo(d)+1);if(!d||!(f=ts(f)))return d;var w=ds(d);return ge(w,0,Jb(w,ds(f))+1).join("")},T.trimStart=function TT(d,f,_){if((d=Xn(d))&&(_||f===B))return d.replace(wf,"");if(!d||!(f=ts(f)))return d;var w=ds(d);return ge(w,ud(w,ds(f))).join("")},T.truncate=function Wx(d,f){var _=30,w="...";if(fi(f)){var C="separator"in f?f.separator:C;_="length"in f?en(f.length):_,w="omission"in f?ts(f.omission):w}var O=(d=Xn(d)).length;if(hd(d)){var U=ds(d);O=U.length}if(_>=O)return d;var H=_-sc(w);if(H<1)return w;var Y=U?ge(U,0,H).join(""):d.slice(0,H);if(C===B)return Y+w;if(U&&(H+=Y.length-H),rv(C)){if(d.slice(H).search(C)){var pe,ve=Y;for(C.global||(C=vl(C.source,Xn(Zo.exec(C))+"g")),C.lastIndex=0;pe=C.exec(ve);)var Te=pe.index;Y=Y.slice(0,Te===B?H:Te)}}else if(d.indexOf(ts(C),H)!=H){var We=Y.lastIndexOf(C);We>-1&&(Y=Y.slice(0,We))}return Y+w},T.unescape=function vp(d){return(d=Xn(d))&&Pk.test(d)?d.replace(Db,Qe):d},T.uniqueId=function UT(d){var f=++Wg;return Xn(d)+f},T.upperCase=DT,T.upperFirst=yp,T.each=fx,T.eachRight=px,T.first=q0,qa(T,function(){var d={};return es(T,function(f,_){ti.call(T.prototype,_)||(d[_]=f)}),d}(),{chain:!1}),T.VERSION="4.17.21",So(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){T[d].placeholder=T}),So(["drop","take"],function(d,f){Jt.prototype[d]=function(_){_=_===B?1:lr(en(_),0);var w=this.__filtered__&&!f?new Jt(this):this.clone();return w.__filtered__?w.__takeCount__=yr(_,w.__takeCount__):w.__views__.push({size:yr(_,Yo),type:d+(w.__dir__<0?"Right":"")}),w},Jt.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),So(["filter","map","takeWhile"],function(d,f){var _=f+1,w=1==_||3==_;Jt.prototype[d]=function(C){var O=this.clone();return O.__iteratees__.push({iteratee:Mt(C,3),type:_}),O.__filtered__=O.__filtered__||w,O}}),So(["head","last"],function(d,f){var _="take"+(f?"Right":"");Jt.prototype[d]=function(){return this[_](1).value()[0]}}),So(["initial","tail"],function(d,f){var _="drop"+(f?"":"Right");Jt.prototype[d]=function(){return this.__filtered__?new Jt(this):this[_](1)}}),Jt.prototype.compact=function(){return this.filter(Ur)},Jt.prototype.find=function(d){return this.filter(d).head()},Jt.prototype.findLast=function(d){return this.reverse().find(d)},Jt.prototype.invokeMap=rn(function(d,f){return"function"==typeof d?new Jt(this):this.map(function(_){return zu(_,d,f)})}),Jt.prototype.reject=function(d){return this.filter(sh(Mt(d)))},Jt.prototype.slice=function(d,f){d=en(d);var _=this;return _.__filtered__&&(d>0||f<0)?new Jt(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),f!==B&&(_=(f=en(f))<0?_.dropRight(-f):_.take(f-d)),_)},Jt.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},Jt.prototype.toArray=function(){return this.take(Yo)},es(Jt.prototype,function(d,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),w=/^(?:head|last)$/.test(f),C=T[w?"take"+("last"==f?"Right":""):f],O=w||/^find/.test(f);C&&(T.prototype[f]=function(){var U=this.__wrapped__,H=w?[1]:arguments,Y=U instanceof Jt,pe=H[0],ve=Y||Zt(U),Te=function(un){var Rn=C.apply(T,ml([un],H));return w&&We?Rn[0]:Rn};ve&&_&&"function"==typeof pe&&1!=pe.length&&(Y=ve=!1);var We=this.__chain__,Et=O&&!We,sn=Y&&!this.__actions__.length;if(!O&&ve){U=sn?U:new Jt(this);var At=d.apply(U,H);return At.__actions__.push({func:rh,args:[Te],thisArg:B}),new Os(At,We)}return Et&&sn?d.apply(this,H):(At=this.thru(Te),Et?w?At.value()[0]:At.value():At)})}),So(["pop","push","shift","sort","splice","unshift"],function(d){var f=ka[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",w=/^(?:pop|shift)$/.test(d);T.prototype[d]=function(){var C=arguments;if(w&&!this.__chain__){var O=this.value();return f.apply(Zt(O)?O:[],C)}return this[_](function(U){return f.apply(Zt(U)?U:[],C)})}}),es(Jt.prototype,function(d,f){var _=T[f];if(_){var w=_.name+"";ti.call(dc,w)||(dc[w]=[]),dc[w].push({name:f,func:_})}}),dc[g_(B,or).name]=[{name:"wrapper",func:B}],Jt.prototype.clone=function hs(){var d=new Jt(this.__wrapped__);return d.__actions__=Nr(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Nr(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Nr(this.__views__),d},Jt.prototype.reverse=function PE(){if(this.__filtered__){var d=new Jt(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},Jt.prototype.value=function Ff(){var d=this.__wrapped__.value(),f=this.__dir__,_=Zt(d),w=f<0,C=_?d.length:0,O=function JE(d,f,_){for(var w=-1,C=_.length;++w<C;){var O=_[w],U=O.size;switch(O.type){case"drop":d+=U;break;case"dropRight":f-=U;break;case"take":f=yr(f,d+U);break;case"takeRight":d=lr(d,f-U)}}return{start:d,end:f}}(0,C,this.__views__),U=O.start,H=O.end,Y=H-U,pe=w?H:U-1,ve=this.__iteratees__,Te=ve.length,We=0,lt=yr(Y,this.__takeCount__);if(!_||!w&&C==Y&&lt==Y)return mc(d,this.__actions__);var Et=[];e:for(;Y--&&We<lt;){for(var sn=-1,At=d[pe+=f];++sn<Te;){var un=ve[sn],Ws=un.type,ur=(0,un.iteratee)(At);if(2==Ws)At=ur;else if(!ur){if(1==Ws)continue e;break e}}Et[We++]=At}return Et},T.prototype.at=dp,T.prototype.chain=function H_(){return ax(this)},T.prototype.commit=function Ad(){return new Os(this.value(),this.__chain__)},T.prototype.next=function MA(){this.__values__===B&&(this.__values__=av(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?B:this.__values__[this.__index__++]}},T.prototype.plant=function dO(d){for(var f,_=this;_ instanceof Lf;){var w=T_(_);w.__index__=0,w.__values__=B,f?C.__wrapped__=w:f=w;var C=w;_=_.__wrapped__}return C.__wrapped__=d,f},T.prototype.reverse=function CA(){var d=this.__wrapped__;if(d instanceof Jt){var f=d;return this.__actions__.length&&(f=new Jt(this)),(f=f.reverse()).__actions__.push({func:rh,args:[ap],thisArg:B}),new Os(f,this.__chain__)}return this.thru(ap)},T.prototype.toJSON=T.prototype.valueOf=T.prototype.value=function G_(){return mc(this.__wrapped__,this.__actions__)},T.prototype.first=T.prototype.head,Ru&&(T.prototype[Ru]=function SA(){return this}),T}();_r._=er,(Yt=function(){return er}.call(Cs,qr,Cs,bo))!==B&&(bo.exports=Yt)}.call(this)},738:function(bo){var Cs;bo.exports=((Cs=function(){function qr(di){return Pr.appendChild(di.dom),di}function Yt(di){for(var ui=0;ui<Pr.children.length;ui++)Pr.children[ui].style.display=ui===di?"block":"none";B=di}var B=0,Pr=document.createElement("div");Pr.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",Pr.addEventListener("click",function(di){di.preventDefault(),Yt(++B%Pr.children.length)},!1);var Yr=(performance||Date).now(),cn=Yr,Ln=0,cl=qr(new Cs.Panel("FPS","#0ff","#002")),Da=qr(new Cs.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var Es=qr(new Cs.Panel("MB","#f08","#201"));return Yt(0),{REVISION:16,dom:Pr,addPanel:qr,showPanel:Yt,begin:function(){Yr=(performance||Date).now()},end:function(){Ln++;var di=(performance||Date).now();if(Da.update(di-Yr,200),di>cn+1e3&&(cl.update(1e3*Ln/(di-cn),100),cn=di,Ln=0,Es)){var ui=performance.memory;Es.update(ui.usedJSHeapSize/1048576,ui.jsHeapSizeLimit/1048576)}return di},update:function(){Yr=this.end()},domElement:Pr,setMode:Yt}}).Panel=function(qr,Yt,B){var Pr=1/0,Yr=0,cn=Math.round,Ln=cn(window.devicePixelRatio||1),cl=80*Ln,Da=48*Ln,Es=3*Ln,di=2*Ln,ui=3*Ln,ls=15*Ln,As=74*Ln,Ts=30*Ln,xo=document.createElement("canvas");xo.width=cl,xo.height=Da,xo.style.cssText="width:80px;height:48px";var In=xo.getContext("2d");return In.font="bold "+9*Ln+"px Helvetica,Arial,sans-serif",In.textBaseline="top",In.fillStyle=B,In.fillRect(0,0,cl,Da),In.fillStyle=Yt,In.fillText(qr,Es,di),In.fillRect(ui,ls,As,Ts),In.fillStyle=B,In.globalAlpha=.9,In.fillRect(ui,ls,As,Ts),{dom:xo,update:function(or,ec){Pr=Math.min(Pr,or),Yr=Math.max(Yr,or),In.fillStyle=B,In.globalAlpha=1,In.fillRect(0,0,cl,ls),In.fillStyle=Yt,In.fillText(cn(or)+" "+qr+" ("+cn(Pr)+"-"+cn(Yr)+")",Es,di),In.drawImage(xo,ui+Ln,ls,As-Ln,Ts,ui,ls,As-Ln,Ts),In.fillRect(ui+As-Ln,ls,Ln,Ts),In.fillStyle=B,In.globalAlpha=.9,In.fillRect(ui+As-Ln,ls,Ln,cn((1-or/ec)*Ts))}}},Cs)}},bo=>{bo(bo.s=551)}]);