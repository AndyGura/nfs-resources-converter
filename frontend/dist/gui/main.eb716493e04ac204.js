(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{135:(Co,ks,Zr)=>{"use strict";function en(i){return"function"==typeof i}function U(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const kr=U(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Qr(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class $t{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(en(n))try{n()}catch(s){t=s instanceof kr?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Fa(s)}catch(o){t=t??[],o instanceof kr?t=[...t,...o.errors]:t.push(o)}}if(t)throw new kr(t)}}add(t){var e;if(t&&t!==this)if(this.closed)Fa(t);else{if(t instanceof $t){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Qr(e,t)}remove(t){const{_finalizers:e}=this;e&&Qr(e,t),t instanceof $t&&t._removeParent(this)}}$t.EMPTY=(()=>{const i=new $t;return i.closed=!0,i})();const kn=$t.EMPTY;function hl(i){return i instanceof $t||i&&"closed"in i&&en(i.remove)&&en(i.add)&&en(i.unsubscribe)}function Fa(i){en(i)?i():i.unsubscribe()}const Ps={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ui={setTimeout(i,t,...e){const{delegate:n}=ui;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=ui;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function hi(i){ui.setTimeout(()=>{const{onUnhandledError:t}=Ps;if(!t)throw i;t(i)})}function hs(){}const Os=Tn("C",void 0,void 0);function Tn(i,t,e){return{kind:i,value:t,error:e}}let rr=null;function oc(i){if(Ps.useDeprecatedSynchronousErrorHandling){const t=!rr;if(t&&(rr={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=rr;if(rr=null,e)throw n}}else i()}class fl extends $t{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,hl(t)&&t.add(this)):this.destination=gE}static create(t,e,n){return new ta(t,e,n)}next(t){this.isStopped?$g(function So(i){return Tn("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?$g(function Fs(i){return Tn("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?$g(Os,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ea=Function.prototype.bind;function pl(i,t){return ea.call(i,t)}class La{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){hd(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){hd(n)}else hd(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){hd(e)}}}class ta extends fl{constructor(t,e,n){let r;if(super(),en(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&Ps.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&pl(t.next,s),error:t.error&&pl(t.error,s),complete:t.complete&&pl(t.complete,s)}):r=t}this.destination=new La(r)}}function hd(i){Ps.useDeprecatedSynchronousErrorHandling?function Jo(i){Ps.useDeprecatedSynchronousErrorHandling&&rr&&(rr.errorThrown=!0,rr.error=i)}(i):hi(i)}function $g(i,t){const{onStoppedNotification:e}=Ps;e&&ui.setTimeout(()=>e(i,t))}const gE={closed:!0,next:hs,error:function mE(i){throw i},complete:hs},Wg="function"==typeof Symbol&&Symbol.observable||"@@observable";function Na(i){return i}function $b(i){return 0===i.length?Na:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let An=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function Ff(i){return i&&i instanceof fl||function vE(i){return i&&en(i.next)&&en(i.error)&&en(i.complete)}(i)&&hl(i)}(e)?e:new ta(e,n,r);return oc(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Ba(n))((r,s)=>{const o=new ta({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Wg](){return this}pipe(...e){return $b(e)(this)}toPromise(e){return new(e=Ba(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function Ba(i){var t;return null!==(t=i??Ps.Promise)&&void 0!==t?t:Promise}const na=U(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Fe=(()=>{class i extends An{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new Wb(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new na}next(e){oc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){oc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){oc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?kn:(this.currentObservers=null,s.push(e),new $t(()=>{this.currentObservers=null,Qr(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new An;return e.source=this,e}}return i.create=(t,e)=>new Wb(t,e),i})();class Wb extends Fe{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:kn}}function jb(i){return en(i?.lift)}function zn(i){return t=>{if(jb(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fn(i,t,e,n,r){return new yE(i,t,e,n,r)}class yE extends fl{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Qe(i,t){return zn((e,n)=>{let r=0;e.subscribe(Fn(n,s=>{n.next(i.call(t,s,r++))}))})}function ia(i){return this instanceof ia?(this.v=i,this):new ia(i)}function Vf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function jg(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const Jg=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Kb(i){return en(i?.then)}function Zb(i){return en(i[Wg])}function e_(i){return Symbol.asyncIterator&&en(i?.[Symbol.asyncIterator])}function Qb(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Jb=function AE(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zf(i){return en(i?.[Jb])}function e0(i){return function Uf(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){n[p]&&(r[p]=function(m){return new Promise(function(g,b){s.push([p,m,g,b])>1||a(p,m)})})}function a(p,m){try{!function l(p){p.value instanceof ia?Promise.resolve(p.value.v).then(c,u):h(s[0][2],p)}(n[p](m))}catch(g){h(s[0][3],g)}}function c(p){a("next",p)}function u(p){a("throw",p)}function h(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield ia(e.read());if(r)return yield ia(void 0);yield yield ia(n)}}finally{e.releaseLock()}})}function Hf(i){return en(i?.getReader)}function sr(i){if(i instanceof An)return i;if(null!=i){if(Zb(i))return function DE(i){return new An(t=>{const e=i[Wg]();if(en(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(Jg(i))return function TE(i){return new An(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(Kb(i))return function IE(i){return new An(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,hi)})}(i);if(e_(i))return t0(i);if(zf(i))return function RE(i){return new An(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(Hf(i))return function kE(i){return t0(e0(i))}(i)}throw Qb(i)}function t0(i){return new An(t=>{(function PE(i,t){var e,n,r,s;return function pd(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Vf(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function ra(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function qi(i,t,e=1/0){return en(t)?qi((n,r)=>Qe((s,o)=>t(n,s,r,o))(sr(i(n,r))),e):("number"==typeof t&&(e=t),zn((n,r)=>function OE(i,t,e,n,r,s,o,a){const l=[];let c=0,u=0,h=!1;const p=()=>{h&&!l.length&&!c&&t.complete()},m=b=>c<n?g(b):l.push(b),g=b=>{s&&t.next(b),c++;let v=!1;sr(e(b,u++)).subscribe(Fn(t,y=>{r?.(y),s?m(y):t.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<n;){const y=l.shift();o?ra(t,o,()=>g(y)):g(y)}p()}catch(y){t.error(y)}}))};return i.subscribe(Fn(t,m,()=>{h=!0,p()})),()=>{a?.()}}(n,r,i,e)))}function _d(i=1/0){return qi(Na,i)}const Ls=new An(i=>i.complete());function Ru(i){return i&&en(i.schedule)}function t_(i){return i[i.length-1]}function ku(i){return en(t_(i))?i.pop():void 0}function Pu(i){return Ru(t_(i))?i.pop():void 0}function n0(i,t=0){return zn((e,n)=>{e.subscribe(Fn(n,r=>ra(n,i,()=>n.next(r),t),()=>ra(n,i,()=>n.complete(),t),r=>ra(n,i,()=>n.error(r),t)))})}function n_(i,t=0){return zn((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function o0(i,t){if(!i)throw new Error("Iterable cannot be null");return new An(e=>{ra(e,t,()=>{const n=i[Symbol.asyncIterator]();ra(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Oi(i,t){return t?function a0(i,t){if(null!=i){if(Zb(i))return function r0(i,t){return sr(i).pipe(n_(t),n0(t))}(i,t);if(Jg(i))return function NE(i,t){return new An(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(Kb(i))return function s0(i,t){return sr(i).pipe(n_(t),n0(t))}(i,t);if(e_(i))return o0(i,t);if(zf(i))return function BE(i,t){return new An(e=>{let n;return ra(e,t,()=>{n=i[Jb](),ra(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>en(n?.return)&&n.return()})}(i,t);if(Hf(i))return function UE(i,t){return o0(e0(i),t)}(i,t)}throw Qb(i)}(i,t):sr(i)}function or(...i){const t=Pu(i),e=function LE(i,t){return"number"==typeof t_(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?sr(n[0]):_d(e)(Oi(n,t)):Ls}function Ou(i={}){const{connector:t=(()=>new Fe),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,u=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,u=h=!1},g=()=>{const b=o;m(),b?.unsubscribe()};return zn((b,v)=>{c++,!h&&!u&&p();const y=l=l??t();v.add(()=>{c--,0===c&&!h&&!u&&(a=i_(g,r))}),y.subscribe(v),!o&&c>0&&(o=new ta({next:M=>y.next(M),error:M=>{h=!0,p(),a=i_(m,e,M),y.error(M)},complete:()=>{u=!0,p(),a=i_(m,n),y.complete()}}),sr(b).subscribe(o))})(s)}}function i_(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new ta({next:()=>{n.unsubscribe(),i()}});return sr(t(...e)).subscribe(n)}function Zn(i){for(let t in i)if(i[t]===Zn)return t;throw Error("Could not find renamed property on target object.")}function vd(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function ri(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ri).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function r_(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const l0=Zn({__forward_ref__:Zn});function Ln(i){return i.__forward_ref__=Ln,i.toString=function(){return ri(this())},i}function Mt(i){return s_(i)?i():i}function s_(i){return"function"==typeof i&&i.hasOwnProperty(l0)&&i.__forward_ref__===Ln}function Gf(i){return i&&!!i.\u0275providers}const yd="https://g.co/ng/security#xss";class he extends Error{constructor(t,e){super(Fu(t,e)),this.code=t}}function Fu(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}function Wt(i){return"string"==typeof i?i:null==i?"":String(i)}function Lu(i,t){throw new he(-201,!1)}function oo(i,t){null==i&&function _t(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Ie(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function jt(i){return{providers:i.providers||[],imports:i.imports||[]}}function $f(i){return p0(i,_l)||p0(i,jf)}function p0(i,t){return i.hasOwnProperty(t)?i[t]:null}function o_(i){return i&&(i.hasOwnProperty(Wf)||i.hasOwnProperty(ao))?i[Wf]:null}const _l=Zn({\u0275prov:Zn}),Wf=Zn({\u0275inj:Zn}),jf=Zn({ngInjectableDef:Zn}),ao=Zn({ngInjectorDef:Zn});var Tt=(()=>((Tt=Tt||{})[Tt.Default=0]="Default",Tt[Tt.Host=1]="Host",Tt[Tt.Self=2]="Self",Tt[Tt.SkipSelf=4]="SkipSelf",Tt[Tt.Optional=8]="Optional",Tt))();let Yf;function Bs(i){const t=Yf;return Yf=i,t}function a_(i,t,e){const n=$f(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Tt.Optional?null:void 0!==t?t:void Lu(ri(i))}const Cn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),bd={},sa="__NG_DI_FLAG__",cc="ngTempTokenPath",l_="ngTokenPath",fi=/\n/gm,vl="\u0275",qf="__source";let Nu;function yl(i){const t=Nu;return Nu=i,t}function jE(i,t=Tt.Default){if(void 0===Nu)throw new he(-203,!1);return null===Nu?a_(i,void 0,t):Nu.get(i,t&Tt.Optional?null:void 0,t)}function J(i,t=Tt.Default){return(function m0(){return Yf}()||jE)(Mt(i),t)}function Nt(i,t=Tt.Default){return J(i,dc(t))}function dc(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function bl(i){const t=[];for(let e=0;e<i.length;e++){const n=Mt(i[e]);if(Array.isArray(n)){if(0===n.length)throw new he(900,!1);let r,s=Tt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=_0(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(J(r,s))}else t.push(J(n))}return t}function Bu(i,t){return i[sa]=t,i.prototype[sa]=t,i}function _0(i){return i[sa]}function To(i){return{toString:i}.toString()}var Io=(()=>((Io=Io||{})[Io.OnPush=0]="OnPush",Io[Io.Default=1]="Default",Io))(),Ro=(()=>{return(i=Ro||(Ro={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ro;var i})();const ko={},Nn=[],Xf=Zn({\u0275cmp:Zn}),Kf=Zn({\u0275dir:Zn}),Jr=Zn({\u0275pipe:Zn}),Zf=Zn({\u0275mod:Zn}),Us=Zn({\u0275fac:Zn}),xd=Zn({__NG_ELEMENT_ID__:Zn});let y0=0;function it(i){return To(()=>{const t=x0(i),e={...t,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Io.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||Ro.Emulated,id:"c"+y0++,styles:i.styles||Nn,_:null,schemas:i.schemas||null,tView:null};uc(e);const n=i.dependencies;return e.directiveDefs=fs(n,!1),e.pipeDefs=fs(n,!0),e})}function Uu(i,t,e){const n=i.\u0275cmp;n.directiveDefs=fs(t,!1),n.pipeDefs=fs(e,!0)}function YE(i){return Hn(i)||xi(i)}function qE(i){return null!==i}function qt(i){return To(()=>({type:i.type,bootstrap:i.bootstrap||Nn,declarations:i.declarations||Nn,imports:i.imports||Nn,exports:i.exports||Nn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function b0(i,t){if(null==i)return ko;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}function xe(i){return To(()=>{const t=x0(i);return uc(t),t})}function Pr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Hn(i){return i[Xf]||null}function xi(i){return i[Kf]||null}function yr(i){return i[Jr]||null}function Vs(i,t){const e=i[Zf]||null;if(!e&&!0===t)throw new Error(`Type ${ri(i)} does not have '\u0275mod' property.`);return e}function x0(i){const t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Nn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:b0(i.inputs,t),outputs:b0(i.outputs)}}function uc(i){i.features?.forEach(t=>t(i))}function fs(i,t){if(!i)return null;const e=t?yr:YE;return()=>("function"==typeof i?i():i).map(n=>e(n)).filter(qE)}const oa=0,nt=1,sn=2,Ei=3,Po=4,hc=5,Xi=6,q=7,oe=8,ae=9,Je=10,Be=11,Bn=12,wi=13,Qn=14,xl=15,Or=16,Fr=17,Ua=18,aa=19,la=20,Vu=21,Jn=22,d_=1,u_=2,fc=7,Qf=8,Cd=9,es=10;function Hi(i){return Array.isArray(i)&&"object"==typeof i[d_]}function ps(i){return Array.isArray(i)&&!0===i[d_]}function Jf(i){return 0!=(4&i.flags)}function wl(i){return i.componentOffset>-1}function zu(i){return 1==(1&i.flags)}function lo(i){return!!i.template}function ep(i){return 0!=(256&i[sn])}function Va(i,t){return i.hasOwnProperty(Us)?i[Us]:null}class Gu{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Mi(){return mc}function mc(i){return i.type.prototype.ngOnChanges&&(i.setInput=Wu),$u}function $u(){const i=gc(this),t=i?.current;if(t){const e=i.previous;if(e===ko)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function Wu(i,t,e,n){const r=this.declaredInputs[e],s=gc(i)||function QE(i,t){return i[ju]=t}(i,{previous:ko,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new Gu(l&&l.currentValue,t,a===ko),i[n]=t}Mi.ngInherit=!0;const ju="__ngSimpleChanges__";function gc(i){return i[ju]||null}const co=function(i,t,e){},C0="svg";function Fi(i){for(;Array.isArray(i);)i=i[oa];return i}function R(i,t){return Fi(t[i])}function lr(i,t){return Fi(t[i.index])}function zs(i,t){return i.data[t]}function on(i,t){return i[t]}function ms(i,t){const e=t[i];return Hi(e)?e:e[oa]}function np(i){return 64==(64&i[sn])}function Ml(i,t){return null==t?null:i[t]}function E0(i){i[Ua]=0}function __(i,t){i[hc]+=t;let e=i,n=i[Ei];for(;null!==n&&(1===t&&1===e[hc]||-1===t&&0===e[hc]);)n[hc]+=t,e=n,n=n[Ei]}const Xt={lFrame:C_(null),bindingsEnabled:!0};function D0(){return Xt.bindingsEnabled}function Ee(){return Xt.lFrame.lView}function Pn(){return Xt.lFrame.tView}function an(i){return Xt.lFrame.contextLView=i,i[oe]}function ln(i){return Xt.lFrame.contextLView=null,i}function xr(){let i=Sl();for(;null!==i&&64===i.type;)i=i.parent;return i}function Sl(){return Xt.lFrame.currentTNode}function ca(i,t){const e=Xt.lFrame;e.currentTNode=i,e.isParent=t}function Hs(){return Xt.lFrame.isParent}function v_(){Xt.lFrame.isParent=!1}function ts(){const i=Xt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Sd(){return Xt.lFrame.bindingIndex++}function Ha(i){const t=Xt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function ip(i,t){const e=Xt.lFrame;e.bindingIndex=e.bindingRootIndex=i,rp(t)}function rp(i){Xt.lFrame.currentDirectiveIndex=i}function x_(i){const t=Xt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function ua(){return Xt.lFrame.currentQueryIndex}function Xu(i){Xt.lFrame.currentQueryIndex=i}function vc(i){const t=i[nt];return 2===t.type?t.declTNode:1===t.type?i[Xi]:null}function Gs(i,t,e){if(e&Tt.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&Tt.Host||(r=vc(s),null===r||(s=s[xl],10&r.type))););if(null===r)return!1;t=r,i=s}const n=Xt.lFrame=M_();return n.currentTNode=t,n.lView=i,!0}function w_(i){const t=M_(),e=i[nt];Xt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function M_(){const i=Xt.lFrame,t=null===i?null:i.child;return null===t?C_(i):t}function C_(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function Ad(){const i=Xt.lFrame;return Xt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ga=Ad;function sp(){const i=Ad();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function ns(){return Xt.lFrame.selectedIndex}function El(i){Xt.lFrame.selectedIndex=i}function gn(){const i=Xt.lFrame;return zs(i.tView,i.selectedIndex)}function Lr(){Xt.lFrame.currentNamespace=C0}function is(){!function S_(){Xt.lFrame.currentNamespace=null}()}function Ku(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(i.contentHooks??(i.contentHooks=[])).push(-e,o),a&&((i.contentHooks??(i.contentHooks=[])).push(e,a),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(e,a)),l&&(i.viewHooks??(i.viewHooks=[])).push(-e,l),c&&((i.viewHooks??(i.viewHooks=[])).push(e,c),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(e,c)),null!=u&&(i.destroyHooks??(i.destroyHooks=[])).push(e,u)}}function cr(i,t,e){R0(i,t,3,e)}function Dd(i,t,e,n){(3&i[sn])===e&&R0(i,t,e,n)}function E_(i,t){let e=i[sn];(3&e)===t&&(e&=2047,e+=1,i[sn]=e)}function R0(i,t,e,n){const s=n??-1,o=t.length-1;let a=0;for(let l=void 0!==n?65535&i[Ua]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[Ua]+=65536),(a<s||-1==s)&&(lA(i,e,t,l),i[Ua]=(4294901760&i[Ua])+l+2),l++}function lA(i,t,e,n){const r=e[n]<0,s=e[n+1],a=i[r?-e[n]:e[n]];if(r){if(i[sn]>>11<i[Ua]>>16&&(3&i[sn])===t){i[sn]+=2048,co(4,a,s);try{s.call(a)}finally{co(5,a,s)}}}else{co(4,a,s);try{s.call(a)}finally{co(5,a,s)}}}const Al=-1;class Zu{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function lp(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],a=e[n++];i.setAttribute(t,o,a,s)}else{const s=r,o=e[++n];O0(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function P0(i){return 3===i||4===i||6===i}function O0(i){return 64===i.charCodeAt(0)}function eh(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||D_(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function D_(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function cp(i){return i!==Al}function dp(i){return 32767&i}function th(i,t){let e=function T_(i){return i>>16}(i),n=t;for(;e>0;)n=n[xl],e--;return n}let up=!0;function nh(i){const t=up;return up=i,t}const F0=255,R_=5;let L0=0;const ha={};function hp(i,t){const e=k_(i,t);if(-1!==e)return e;const n=t[nt];n.firstCreatePass&&(i.injectorIndex=t.length,ih(n.data,i),ih(t,null),ih(n.blueprint,null));const r=rh(i,t),s=i.injectorIndex;if(cp(r)){const o=dp(r),a=th(r,t),l=a[nt].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function ih(i,t){i.push(0,0,0,0,0,0,0,0,t)}function k_(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function rh(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=pp(r),null===n)return Al;if(e++,r=r[xl],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return Al}function P_(i,t,e){!function N0(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(xd)&&(n=e[xd]),null==n&&(n=e[xd]=L0++);const r=n&F0;t.data[i+(r>>R_)]|=1<<r}(i,t,e)}function un(i,t,e){if(e&Tt.Optional||void 0!==i)return i;Lu()}function B0(i,t,e,n){if(e&Tt.Optional&&void 0===n&&(n=null),!(e&(Tt.Self|Tt.Host))){const r=i[ae],s=Bs(void 0);try{return r?r.get(t,n,e&Tt.Optional):a_(t,n,e&Tt.Optional)}finally{Bs(s)}}return un(n,0,e)}function U0(i,t,e,n=Tt.Default,r){if(null!==i){if(1024&t[sn]){const o=function Tl(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[sn]&&!(256&o[sn]);){const a=Td(s,o,e,n|Tt.Self,ha);if(a!==ha)return a;let l=s.parent;if(!l){const c=o[Vu];if(c){const u=c.get(e,ha,n);if(u!==ha)return u}l=pp(o),o=o[xl]}s=l}return r}(i,t,e,n,ha);if(o!==ha)return o}const s=Td(i,t,e,n,ha);if(s!==ha)return s}return B0(t,e,n,r)}function Td(i,t,e,n,r){const s=function uo(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(xd)?i[xd]:void 0;return"number"==typeof t?t>=0?t&F0:H0:t}(e);if("function"==typeof s){if(!Gs(t,i,n))return n&Tt.Host?un(r,0,n):B0(t,e,n,r);try{const o=s(n);if(null!=o||n&Tt.Optional)return o;Lu()}finally{Ga()}}else if("number"==typeof s){let o=null,a=k_(i,t),l=Al,c=n&Tt.Host?t[Or][Xi]:null;for((-1===a||n&Tt.SkipSelf)&&(l=-1===a?rh(i,t):t[a+8],l!==Al&&sh(n,!1)?(o=t[nt],a=dp(l),t=th(l,t)):a=-1);-1!==a;){const u=t[nt];if(z0(s,a,u.data)){const h=V0(a,t,e,o,n,c);if(h!==ha)return h}l=t[a+8],l!==Al&&sh(n,t[nt].data[a+8]===c)&&z0(s,a,t)?(o=u,a=dp(l),t=th(l,t)):a=-1}}return r}function V0(i,t,e,n,r,s){const o=t[nt],a=o.data[i+8],u=fp(a,o,e,null==n?wl(a)&&up:n!=o&&0!=(3&a.type),r&Tt.Host&&s===a);return null!==u?bc(t,o,u,a):ha}function fp(i,t,e,n,r){const s=i.providerIndexes,o=t.data,a=1048575&s,l=i.directiveStart,u=s>>20,p=r?a+u:i.directiveEnd;for(let m=n?a:a+u;m<p;m++){const g=o[m];if(m<l&&e===g||m>=l&&g.type===e)return m}if(r){const m=o[l];if(m&&lo(m)&&m.type===e)return l}return null}function bc(i,t,e,n){let r=i[e];const s=t.data;if(function Qu(i){return i instanceof Zu}(r)){const o=r;o.resolving&&function d0(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${e}`)}(function jn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Wt(i)}(s[e]));const a=nh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Bs(o.injectImpl):null;Gs(i,n,Tt.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function yc(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=mc(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==l&&Bs(l),nh(a),o.resolving=!1,Ga()}}return r}function z0(i,t,e){return!!(e[t+(i>>R_)]&1<<i)}function sh(i,t){return!(i&Tt.Self||i&Tt.Host&&t)}class Dl{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return U0(this._tNode,this._lView,t,dc(n),e)}}function H0(){return new Dl(xr(),Ee())}function pi(i){return To(()=>{const t=i.prototype.constructor,e=t[Us]||rs(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[Us]||rs(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function rs(i){return s_(i)?()=>{const t=rs(Mt(i));return t&&t()}:Va(i)}function pp(i){const t=i[nt],e=t.type;return 2===e?t.declTNode:1===e?i[Xi]:null}function fa(i){return function O_(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(P0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(xr(),i)}const xc="__parameters__";function Rl(i,t,e){return To(()=>{const n=function oh(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,u){const h=l.hasOwnProperty(xc)?l[xc]:Object.defineProperty(l,xc,{value:[]})[xc];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class fe{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Ie({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function pa(i,t){i.forEach(e=>Array.isArray(e)?pa(e,t):t(e))}function Mc(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function ah(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Rd(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function $s(i,t,e){let n=Cc(i,t);return n>=0?i[1|n]=e:(n=~n,function kd(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function gp(i,t){const e=Cc(i,t);if(e>=0)return i[1|e]}function Cc(i,t){return function N_(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const xp=Bu(Rl("Inject",i=>({token:i})),-1),_s=Bu(Rl("Optional"),8),Oo=Bu(Rl("SkipSelf"),4);var ss=(()=>((ss=ss||{})[ss.Important=1]="Important",ss[ss.DashCase=2]="DashCase",ss))();const Ac=new Map;let j_=0;const X_="__ngContext__";function Br(i,t){Hi(t)?(i[X_]=t[la],function rx(i){Ac.set(i[la],i)}(t)):i[X_]=t}let Ep;function K_(i,t){return Ep(i,t)}function fh(i){const t=i[Ei];return ps(t)?t[Ei]:t}function Z_(i){return px(i[wi])}function Q_(i){return px(i[Po])}function px(i){for(;null!==i&&!ps(i);)i=i[Po];return i}function Fd(i,t,e,n,r){if(null!=n){let s,o=!1;ps(n)?s=n:Hi(n)&&(o=!0,n=n[oa]);const a=Fi(n);0===i&&null!==e?null==r?yx(t,e,a):Dc(t,e,a,r||null,!0):1===i&&null!==e?Dc(t,e,a,r||null,!0):2===i?function ov(i,t,e){const n=Dp(i,t);n&&function VA(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,a,o):3===i&&t.destroyNode(a),null!=s&&function GA(i,t,e,n,r){const s=e[fc];s!==Fi(e)&&Fd(t,i,n,s,r);for(let a=es;a<e.length;a++){const l=e[a];ph(l[nt],l,i,t,n,s)}}(t,i,s,e,r)}}function ev(i,t,e){return i.createElement(t,e)}function Ap(i,t){const e=i[Cd],n=e.indexOf(t),r=t[Ei];512&t[sn]&&(t[sn]&=-513,__(r,-1)),e.splice(n,1)}function tv(i,t){if(i.length<=es)return;const e=es+t,n=i[e];if(n){const r=n[Fr];null!==r&&r!==i&&Ap(r,n),t>0&&(i[e-1][Po]=n[Po]);const s=ah(i,es+t);!function PA(i,t){ph(i,t,t[Be],2,null,null),t[oa]=null,t[Xi]=null}(n[nt],n);const o=s[aa];null!==o&&o.detachView(s[nt]),n[Ei]=null,n[Po]=null,n[sn]&=-65}return n}function gx(i,t){if(!(128&t[sn])){const e=t[Be];e.destroyNode&&ph(i,t,e,3,null,null),function FA(i){let t=i[wi];if(!t)return nv(i[nt],i);for(;t;){let e=null;if(Hi(t))e=t[wi];else{const n=t[es];n&&(e=n)}if(!e){for(;t&&!t[Po]&&t!==i;)Hi(t)&&nv(t[nt],t),t=t[Ei];null===t&&(t=i),Hi(t)&&nv(t[nt],t),e=t&&t[Po]}t=e}}(t)}}function nv(i,t){if(!(128&t[sn])){t[sn]&=-65,t[sn]|=128,function UA(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Zu)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];co(4,a,l);try{l.call(a)}finally{co(5,a,l)}}else{co(4,r,s);try{s.call(r)}finally{co(5,r,s)}}}}}(i,t),function BA(i,t){const e=i.cleanup,n=t[q];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?n[r=o]():n[r=-o].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[q]=null}}(i,t),1===t[nt].type&&t[Be].destroy();const e=t[Fr];if(null!==e&&ps(t[Ei])){e!==t[Ei]&&Ap(e,t);const n=t[aa];null!==n&&n.detachView(i)}!function sx(i){Ac.delete(i[la])}(t)}}function _x(i,t,e){return function vx(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[oa];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===Ro.None||s===Ro.Emulated)return null}return lr(n,e)}}(i,t.parent,e)}function Dc(i,t,e,n,r){i.insertBefore(t,e,n,r)}function yx(i,t,e){i.appendChild(t,e)}function bx(i,t,e,n,r){null!==n?Dc(i,t,e,n,r):yx(i,t,e)}function Dp(i,t){return i.parentNode(t)}function xx(i,t,e){return Mx(i,t,e)}let iv,Ip,cv,Mx=function wx(i,t,e){return 40&i.type?lr(i,e):null};function Tp(i,t,e,n){const r=_x(i,n,t),s=t[Be],a=xx(n.parent||t[Xi],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)bx(s,r,e[l],a,!1);else bx(s,r,e,a,!1);void 0!==iv&&iv(s,n,t,e,r)}function Ld(i,t){if(null!==t){const e=t.type;if(3&e)return lr(t,i);if(4&e)return sv(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return Ld(i,n);{const r=i[t.index];return ps(r)?sv(-1,r):Fi(r)}}if(32&e)return K_(t,i)()||Fi(i[t.index]);{const n=rv(i,t);return null!==n?Array.isArray(n)?n[0]:Ld(fh(i[Or]),n):Ld(i,t.next)}}return null}function rv(i,t){return null!==t?i[Or][Xi].projection[t.projection]:null}function sv(i,t){const e=es+i+1;if(e<t.length){const n=t[e],r=n[nt].firstChild;if(null!==r)return Ld(n,r)}return t[fc]}function av(i,t,e,n,r,s,o){for(;null!=e;){const a=n[e.index],l=e.type;if(o&&0===t&&(a&&Br(Fi(a),n),e.flags|=2),32!=(32&e.flags))if(8&l)av(i,t,e.child,n,r,s,!1),Fd(t,i,r,a,s);else if(32&l){const c=K_(e,n);let u;for(;u=c();)Fd(t,i,r,u,s);Fd(t,i,r,a,s)}else 16&l?Sx(i,t,n,e,r,s):Fd(t,i,r,a,s);e=o?e.projectionNext:e.next}}function ph(i,t,e,n,r,s){av(e,n,i.firstChild,t,r,s,!1)}function Sx(i,t,e,n,r,s){const o=e[Or],l=o[Xi].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Fd(t,i,r,l[c],s);else av(i,t,l,o[Ei],r,s,!0)}function Ax(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function mh(i,t,e){const{mergedAttrs:n,classes:r,styles:s}=e;null!==n&&lp(i,t,n),null!==r&&Ax(i,t,r),null!==s&&function Ex(i,t,e){i.setAttribute(t,"style",e)}(i,t,s)}function Nd(i){return function lv(){if(void 0===Ip&&(Ip=null,Cn.trustedTypes))try{Ip=Cn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ip}()?.createHTML(i)||i}class Tc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yd})`}}class kx extends Tc{getTypeName(){return"HTML"}}class Px extends Tc{getTypeName(){return"Style"}}class XA extends Tc{getTypeName(){return"Script"}}class KA extends Tc{getTypeName(){return"URL"}}class ZA extends Tc{getTypeName(){return"ResourceURL"}}function js(i){return i instanceof Tc?i.changingThisBreaksApplicationSecurity:i}function Ys(i,t){const e=function QA(i){return i instanceof Tc&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${yd})`)}return e===t}class rD{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Nd(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class sD{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Nd(t),e}}const aD=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ic(i){return(i=String(i)).match(aD)?i:"unsafe:"+i}function ja(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Bd(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const uv=ja("area,br,col,hr,img,wbr"),kp=ja("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),hv=ja("rp,rt"),fv=Bd(uv,Bd(kp,ja("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Bd(hv,ja("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Bd(hv,kp)),pv=ja("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),gh=Bd(pv,ja("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ja("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),uD=ja("script,style,template");class hD{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!fv.hasOwnProperty(e))return this.sanitizedSomething=!0,!uD.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!gh.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;pv[a]&&(l=Ic(l)),this.buf.push(" ",o,'="',Lx(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();fv.hasOwnProperty(e)&&!uv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Lx(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const gv=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Fx=/([^\#-~ |!])/g;function Lx(i){return i.replace(/&/g,"&amp;").replace(gv,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Fx,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Pp;function Nx(i,t){let e=null;try{Pp=Pp||function Ox(i){const t=new sD(i);return function oD(){try{return!!(new window.DOMParser).parseFromString(Nd(""),"text/html")}catch{return!1}}()?new rD(t):t}(i);let n=t?String(t):"";e=Pp.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=Pp.getInertBodyElement(n)}while(n!==s);return Nd((new hD).sanitizeChildren(_v(e)||e))}finally{if(e){const n=_v(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function _v(i){return"content"in i&&function fD(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Gn=(()=>((Gn=Gn||{})[Gn.NONE=0]="NONE",Gn[Gn.HTML=1]="HTML",Gn[Gn.STYLE=2]="STYLE",Gn[Gn.SCRIPT=3]="SCRIPT",Gn[Gn.URL=4]="URL",Gn[Gn.RESOURCE_URL=5]="RESOURCE_URL",Gn))();function Op(i){const t=function _h(){const i=Ee();return i&&i[Bn]}();return t?t.sanitize(Gn.URL,i)||"":Ys(i,"URL")?js(i):Ic(Wt(i))}const Mr=new fe("ENVIRONMENT_INITIALIZER"),Ai=new fe("INJECTOR",-1),Vx=new fe("INJECTOR_DEF_TYPES");class Ya{get(t,e=bd){if(e===bd){const n=new Error(`NullInjectorError: No provider for ${ri(t)}!`);throw n.name="NullInjectorError",n}return e}}function yD(...i){return{\u0275providers:zx(0,i),\u0275fromNgModule:!0}}function zx(i,...t){const e=[],n=new Set;let r;return pa(t,s=>{const o=s;vv(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&Hx(r,e),e}function Hx(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];yv(r,s=>{t.push(s)})}}function vv(i,t,e,n){if(!(i=Mt(i)))return!1;let r=null,s=o_(i);const o=!s&&Hn(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=o_(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)vv(c,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{pa(s.imports,u=>{vv(u,t,e,n)&&(c||(c=[]),c.push(u))})}finally{}void 0!==c&&Hx(c,t)}if(!a){const c=Va(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:Nn},{provide:Vx,useValue:r,multi:!0},{provide:Mr,useValue:()=>J(r),multi:!0})}const l=s.providers;null==l||a||yv(l,u=>{t.push(u)})}}return r!==i&&void 0!==i.providers}function yv(i,t){for(let e of i)Gf(e)&&(e=e.\u0275providers),Array.isArray(e)?yv(e,t):t(e)}const qa=Zn({provide:String,useValue:Zn});function Fp(i){return null!==i&&"object"==typeof i&&qa in i}function ti(i){return"function"==typeof i}const bv=new fe("Set Injector scope."),Lp={},bD={};let xv;function Np(){return void 0===xv&&(xv=new Ya),xv}class Xa{}class wv extends Xa{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sv(t,o=>this.processProvider(o)),this.records.set(Ai,Ka(void 0,this)),r.has("environment")&&this.records.set(Xa,Ka(void 0,this));const s=this.records.get(bv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Vx.multi,Nn,Tt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=yl(this),n=Bs(void 0);try{return t()}finally{yl(e),Bs(n)}}get(t,e=bd,n=Tt.Default){this.assertNotDestroyed(),n=dc(n);const r=yl(this),s=Bs(void 0);try{if(!(n&Tt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function wD(i){return"function"==typeof i||"object"==typeof i&&i instanceof fe}(t)&&$f(t);a=l&&this.injectableDefInScope(l)?Ka(Rc(t),Lp):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&Tt.Self?Np():this.parent).get(t,e=n&Tt.Optional&&e===bd?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[cc]=o[cc]||[]).unshift(ri(t)),r)throw o;return function v0(i,t,e,n){const r=i[cc];throw t[qf]&&r.unshift(t[qf]),i.message=function c_(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==vl?i.slice(2):i;let r=ri(t);if(Array.isArray(t))r=t.map(ri).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ri(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(fi,"\n  ")}`}("\n"+i.message,r,e,n),i[l_]=r,i[cc]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{Bs(s),yl(r)}}resolveInjectorInitializers(){const t=yl(this),e=Bs(void 0);try{const n=this.get(Mr.multi,Nn,Tt.Self);for(const r of n)r()}finally{yl(t),Bs(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(ri(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(t){let e=ti(t=Mt(t))?t:Mt(t&&t.provide);const n=function xD(i){return Fp(i)?Ka(void 0,i.useValue):Ka(Cv(i),Lp)}(t);if(ti(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Ka(void 0,Lp,!0),r.factory=()=>bl(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===Lp&&(e.value=bD,e.value=e.factory()),"object"==typeof e.value&&e.value&&function Vd(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Mt(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Rc(i){const t=$f(i),e=null!==t?t.factory:Va(i);if(null!==e)return e;if(i instanceof fe)throw new he(204,!1);if(i instanceof Function)return function Mv(i){const t=i.length;if(t>0)throw Rd(t,"?"),new he(204,!1);const e=function vr(i){return i&&(i[_l]||i[jf])||null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new he(204,!1)}function Cv(i,t,e){let n;if(ti(i)){const r=Mt(i);return Va(r)||Rc(r)}if(Fp(i))n=()=>Mt(i.useValue);else if(function mi(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...bl(i.deps||[]));else if(function vh(i){return!(!i||!i.useExisting)}(i))n=()=>J(Mt(i.useExisting));else{const r=Mt(i&&(i.useClass||i.provide));if(!function qs(i){return!!i.deps}(i))return Va(r)||Rc(r);n=()=>new r(...bl(i.deps))}return n}function Ka(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Sv(i,t){for(const e of i)Array.isArray(e)?Sv(e,t):e&&Gf(e)?Sv(e.\u0275providers,t):t(e)}class MD{}class Wx{}class cn{resolveComponentFactory(t){throw function CD(i){const t=Error(`No component factory found for ${ri(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let Fl=(()=>{class i{}return i.NULL=new cn,i})();function fo(){return kc(xr(),Ee())}function kc(i,t){return new ct(lr(i,t))}let ct=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=fo,i})();function Yn(i){return i instanceof ct?i.nativeElement:i}class yh{}let _a=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function Bp(){const i=Ee(),e=ms(xr().index,i);return(Hi(e)?e:i)[Be]}(),i})(),SD=(()=>{class i{}return i.\u0275prov=Ie({token:i,providedIn:"root",factory:()=>null}),i})();class Pc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ED=new Pc("15.2.10"),Av={},Dv="ngOriginalError";function Tv(i){return i[Dv]}class Za{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Tv(t);for(;e&&Tv(e);)e=Tv(e);return e||null}}function Qa(i){return i instanceof Function?i():i}function Yx(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const Rv="ng-template";function LD(i,t,e){let n=0,r=!0;for(;n<i.length;){let s=i[n++];if("string"==typeof s&&r){const o=i[n++];if(e&&"class"===s&&-1!==Yx(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;n<i.length&&"string"==typeof(s=i[n++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function qx(i){return 4===i.type&&i.value!==Rv}function ND(i,t,e){return t===(4!==i.type||e?i.value:Rv)}function Xx(i,t,e){let n=4;const r=i.attrs||[],s=function Qx(i){for(let t=0;t<i.length;t++)if(P0(i[t]))return t;return i.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!ND(i,l,e)||""===l&&1===t.length){if(Lo(n))return!1;o=!0}}else{const c=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!LD(i.attrs,c,e)){if(Lo(n))return!1;o=!0}continue}const h=BD(8&n?"class":l,r,qx(i),e);if(-1===h){if(Lo(n))return!1;o=!0;continue}if(""!==c){let p;p=h>s?"":r[h+1].toLowerCase();const m=8&n?p:null;if(m&&-1!==Yx(m,c,0)||2&n&&c!==p){if(Lo(n))return!1;o=!0}}}}else{if(!o&&!Lo(n)&&!Lo(l))return!1;if(o&&Lo(l))continue;o=!1,n=l|1&n}}return Lo(n)||o}function Lo(i){return 0==(1&i)}function BD(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function UD(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function Kx(i,t,e=!1){for(let n=0;n<t.length;n++)if(Xx(i,t[n],e))return!0;return!1}function VD(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function Jx(i,t){return i?":not("+t.trim()+")":t}function zD(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Lo(o)&&(t+=Jx(s,r),r=""),n=o,s=s||!Lo(n);e++}return""!==r&&(t+=Jx(s,r)),t}const Kt={};function G(i){ew(Pn(),Ee(),ns()+i,!1)}function ew(i,t,e,n){if(!n)if(3==(3&t[sn])){const s=i.preOrderCheckHooks;null!==s&&cr(t,s,e)}else{const s=i.preOrderHooks;null!==s&&Dd(t,s,0,e)}El(e)}function ow(i,t=null,e=null,n){const r=aw(i,t,e,n);return r.resolveInjectorInitializers(),r}function aw(i,t=null,e=null,n,r=new Set){const s=[e||Nn,yD(i)];return n=n||("object"==typeof i?void 0:ri(i)),new wv(s,t||Np(),n||null,r)}let Li=(()=>{class i{static create(e,n){if(Array.isArray(e))return ow({name:""},n,e,"");{const r=e.name??"";return ow({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=bd,i.NULL=new Ya,i.\u0275prov=Ie({token:i,providedIn:"any",factory:()=>J(Ai)}),i.__NG_ELEMENT_ID__=-1,i})();function A(i,t=Tt.Default){const e=Ee();return null===e?J(i,t):U0(xr(),e,Mt(i),t)}function po(){throw new Error("invalid")}function Hp(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const s=e[n+1];if(-1!==s){const o=i.data[s];Xu(e[n]),o.contentQueries(2,t[s],s)}}}function Gp(i,t,e,n,r,s,o,a,l,c,u){const h=t.blueprint.slice();return h[oa]=r,h[sn]=76|n,(null!==u||i&&1024&i[sn])&&(h[sn]|=1024),E0(h),h[Ei]=h[xl]=i,h[oe]=e,h[Je]=o||i&&i[Je],h[Be]=a||i&&i[Be],h[Bn]=l||i&&i[Bn]||null,h[ae]=c||i&&i[ae]||null,h[Xi]=s,h[la]=function ix(){return j_++}(),h[Vu]=u,h[Or]=2==t.type?i[Or]:h,h}function Gd(i,t,e,n,r){let s=i.data[t];if(null===s)s=function $p(i,t,e,n,r){const s=Sl(),o=Hs(),l=i.data[t]=function c1(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(i,t,e,n,r),function b_(){return Xt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function qu(){const i=Xt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return ca(s,!0),s}function bh(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function Fv(i,t,e){w_(t);try{const n=i.viewQuery;null!==n&&No(1,n,e);const r=i.template;null!==r&&jp(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&Hp(i,t),i.staticViewQueries&&No(2,i.viewQuery,e);const s=i.components;null!==s&&function o1(i,t){for(let e=0;e<t.length;e++)In(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[sn]&=-5,sp()}}function Wp(i,t,e,n){const r=t[sn];if(128!=(128&r)){w_(t);try{E0(t),function y_(i){return Xt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&jp(i,t,e,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&cr(t,c,null)}else{const c=i.preOrderHooks;null!==c&&Dd(t,c,0,null),E_(t,0)}if(function hn(i){for(let t=Z_(i);null!==t;t=Q_(t)){if(!t[u_])continue;const e=t[Cd];for(let n=0;n<e.length;n++){const r=e[n];512&r[sn]||__(r[Ei],1),r[sn]|=512}}}(t),function kt(i){for(let t=Z_(i);null!==t;t=Q_(t))for(let e=es;e<t.length;e++){const n=t[e],r=n[nt];np(n)&&Wp(r,n,r.template,n[oe])}}(t),null!==i.contentQueries&&Hp(i,t),o){const c=i.contentCheckHooks;null!==c&&cr(t,c)}else{const c=i.contentHooks;null!==c&&Dd(t,c,1),E_(t,1)}!function r1(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)El(~r);else{const s=r,o=e[++n],a=e[++n];ip(o,s),a(2,t[s])}}}finally{El(-1)}}(i,t);const a=i.components;null!==a&&function s1(i,t){for(let e=0;e<t.length;e++)Pt(i,t[e])}(t,a);const l=i.viewQuery;if(null!==l&&No(2,l,n),o){const c=i.viewCheckHooks;null!==c&&cr(t,c)}else{const c=i.viewHooks;null!==c&&Dd(t,c,2),E_(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[sn]&=-41,512&t[sn]&&(t[sn]&=-513,__(t[Ei],-1))}finally{sp()}}}function jp(i,t,e,n,r){const s=ns(),o=2&n;try{El(-1),o&&t.length>Jn&&ew(i,t,Jn,!1),co(o?2:0,r),e(n,r)}finally{El(s),co(o?3:1,r)}}function xh(i,t,e){if(Jf(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function Lv(i,t,e){D0()&&(function g1(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;wl(e)&&function Z(i,t,e){const n=lr(t,i),r=mw(e),s=i[Je],o=dr(i,Gp(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||hp(e,t),Br(n,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=bc(t,i,a,e);Br(c,t),null!==o&&De(0,a-r,c,l,0,o),lo(l)&&(ms(e.index,t)[oe]=bc(t,i,a,e))}}(i,t,e,lr(e,t)),64==(64&e.flags)&&d(i,t,e))}function Nv(i,t,e=lr){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?e(t,i):i[o];i[r++]=a}}}function mw(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=Bv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function Bv(i,t,e,n,r,s,o,a,l,c){const u=Jn+n,h=u+r,p=function a1(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Kt);return e}(u,h),m="function"==typeof c?c():c;return p[nt]={type:i,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function gw(i,t,e,n){const r=YO(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&qO(i).push(n,r.length-1))}function _w(i,t,e,n){for(let r in i)if(i.hasOwnProperty(r)){e=null===e?{}:e;const s=i[r];null===n?vw(e,t,r,s):n.hasOwnProperty(r)&&vw(e,t,n[r],s)}return e}function vw(i,t,e,n){i.hasOwnProperty(e)?i[e].push(t,n):i[e]=[t,n]}function Ks(i,t,e,n,r,s,o,a){const l=lr(t,e);let u,c=t.inputs;!a&&null!=c&&(u=c[n])?(v1(i,e,u,n,r),wl(t)&&function h1(i,t){const e=ms(t,i);16&e[sn]||(e[sn]|=32)}(e,t.index)):3&t.type&&(n=function u1(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(l,n,r))}function Uv(i,t,e,n){if(D0()){const r=null===n?null:{"":-1},s=function _(i,t){const e=i.directiveRegistry;let n=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Kx(t,o.selectors,!1))if(n||(n=[]),lo(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o),w(i,t,a.length)}else n.unshift(o),w(i,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&yw(i,t,e,o,r,a),r&&function S(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new he(-301,!1);n.push(t[r],s)}}}(e,n,r)}e.mergedAttrs=eh(e.mergedAttrs,e.attrs)}function yw(i,t,e,n,r,s){for(let c=0;c<n.length;c++)P_(hp(e,t),i,n[c].type);!function z(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}(e,i.data.length,n.length);for(let c=0;c<n.length;c++){const u=n[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=bh(i,t,n.length,null);for(let c=0;c<n.length;c++){const u=n[c];e.mergedAttrs=eh(e.mergedAttrs,u.hostAttrs),W(i,e,t,l,u),k(l,u,r),null!==u.contentQueries&&(e.flags|=4),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(e.flags|=64);const h=u.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(e.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function d1(i,t,e){const r=t.directiveEnd,s=i.data,o=t.attrs,a=[];let l=null,c=null;for(let u=t.directiveStart;u<r;u++){const h=s[u],p=e?e.get(h):null,g=p?p.outputs:null;l=_w(h.inputs,u,l,p?p.inputs:null),c=_w(h.outputs,u,c,g);const b=null===l||null===o||qx(t)?null:Ye(l,u,o);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(i,e,s)}function d(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function oA(){return Xt.lFrame.currentDirectiveIndex}();try{El(s);for(let a=n;a<r;a++){const l=i.data[a],c=t[a];rp(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&f(l,c)}}finally{El(-1),rp(o)}}function f(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function w(i,t,e){t.componentOffset=e,(i.components??(i.components=[])).push(t.index)}function k(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;lo(t)&&(e[""]=i)}}function W(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=Va(r.type)),o=new Zu(s,lo(r),A);i.blueprint[n]=o,e[n]=o,function p1(i,t,e,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const a=~t.index;(function m1(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,n,s)}}(i,t,n,bh(i,e,r.hostVars,Kt),r)}function _e(i,t,e,n,r,s){const o=lr(i,t);!function be(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const a=null==o?Wt(s):o(s,n||"",r);i.setAttribute(t,r,a,e)}}(t[Be],o,s,i.value,e,n,r)}function De(i,t,e,n,r,s){const o=s[t];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],u=o[l++],h=o[l++];null!==a?n.setInput(e,h,c,u):e[u]=h}}}function Ye(i,t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){n.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function dt(i,t,e,n){return[i,!0,!1,t,null,0,n,e,null,null]}function Pt(i,t){const e=ms(t,i);if(np(e)){const n=e[nt];48&e[sn]?Wp(n,e,n.template,e[oe]):e[hc]>0&&_n(e)}}function _n(i){for(let n=Z_(i);null!==n;n=Q_(n))for(let r=es;r<n.length;r++){const s=n[r];if(np(s))if(512&s[sn]){const o=s[nt];Wp(o,s,o.template,s[oe])}else s[hc]>0&&_n(s)}const e=i[nt].components;if(null!==e)for(let n=0;n<e.length;n++){const r=ms(e[n],i);np(r)&&r[hc]>0&&_n(r)}}function In(i,t){const e=ms(t,i),n=e[nt];(function Zs(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),Fv(n,e,e[oe])}function dr(i,t){return i[wi]?i[Qn][Po]=t:i[wi]=t,i[Qn]=t,t}function Vr(i){for(;i;){i[sn]|=32;const t=fh(i);if(ep(i)&&!t)return i;i=t}return null}function gi(i,t,e,n=!0){const r=t[Je];r.begin&&r.begin();try{Wp(i,t,i.template,e)}catch(o){throw n&&KO(t,o),o}finally{r.end&&r.end()}}function No(i,t,e){Xu(0),t(i,e)}function YO(i){return i[q]||(i[q]=[])}function qO(i){return i.cleanup||(i.cleanup=[])}function XO(i,t,e){return(null===i||lo(i))&&(e=function S0(i){for(;Array.isArray(i);){if("object"==typeof i[d_])return i;i=i[oa]}return null}(e[t.index])),e[Be]}function KO(i,t){const e=i[ae],n=e?e.get(Za,null):null;n&&n.handleError(t)}function v1(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function Oc(i,t,e){const n=R(t,i);!function Ws(i,t,e){i.setValue(t,e)}(i[Be],n,e)}function bw(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=r_(r,a):2==s&&(n=r_(n,a+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function xw(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(Fi(s)),ps(s))for(let a=es;a<s.length;a++){const l=s[a],c=l[nt].firstChild;null!==c&&xw(l[nt],l,c,n)}const o=e.type;if(8&o)xw(i,t,e.child,n);else if(32&o){const a=K_(e,t);let l;for(;l=a();)n.push(l)}else if(16&o){const a=rv(t,e);if(Array.isArray(a))n.push(...a);else{const l=fh(t[Or]);xw(l[nt],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}class Vv{get rootNodes(){const t=this._lView,e=t[nt];return xw(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[oe]}set context(t){this._lView[oe]=t}get destroyed(){return 128==(128&this._lView[sn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Ei];if(ps(t)){const e=t[Qf],n=e?e.indexOf(this):-1;n>-1&&(tv(t,n),ah(e,n))}this._attachedToViewContainer=!1}gx(this._lView[nt],this._lView)}onDestroy(t){gw(this._lView[nt],this._lView,null,t)}markForCheck(){Vr(this._cdRefInjectingView||this._lView)}detach(){this._lView[sn]&=-65}reattach(){this._lView[sn]|=64}detectChanges(){gi(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function OA(i,t){ph(i,t,t[Be],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=t}}class z8 extends Vv{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;gi(t[nt],t,t[oe],!1)}checkNoChanges(){}get context(){return null}}class ZO extends Fl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Hn(t);return new zv(e,this.ngModule)}}function QO(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class G8{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=dc(n);const r=this.injector.get(t,Av,n);return r!==Av||e===Av?r:this.parentInjector.get(t,e,n)}}class zv extends Wx{get inputs(){return QO(this.componentDef.inputs)}get outputs(){return QO(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function zd(i){return i.map(zD).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof Xa?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new G8(t,s):t,a=o.get(yh,null);if(null===a)throw new he(407,!1);const l=o.get(SD,null),c=a.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",h=n?function l1(i,t,e){return i.selectRootElement(t,e===Ro.ShadowDom)}(c,n,this.componentDef.encapsulation):ev(c,u,function H8(i){const t=i.toLowerCase();return"svg"===t?C0:"math"===t?"math":null}(u)),p=this.componentDef.onPush?288:272,m=Bv(0,null,null,1,0,null,null,null,null,null),g=Gp(null,m,null,p,null,null,a,c,l,o,null);let b,v;w_(g);try{const y=this.componentDef;let M,x=null;y.findHostDirectiveDefs?(M=[],x=new Map,y.findHostDirectiveDefs(y,M,x),M.push(y)):M=[y];const C=function W8(i,t){const e=i[nt],n=Jn;return i[n]=t,Gd(e,n,2,"#host",null)}(g,h),O=function j8(i,t,e,n,r,s,o,a){const l=r[nt];!function Y8(i,t,e,n){for(const r of i)t.mergedAttrs=eh(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(bw(t,t.mergedAttrs,!0),null!==e&&mh(n,e,t))}(n,i,t,o);const c=s.createRenderer(t,e),u=Gp(r,mw(e),null,e.onPush?32:16,r[i.index],i,s,c,a||null,null,null);return l.firstCreatePass&&w(l,i,n.length-1),dr(r,u),r[i.index]=u}(C,h,y,M,g,a,c);v=zs(m,Jn),h&&function X8(i,t,e,n){if(n)lp(i,e,["ng-version",ED.full]);else{const{attrs:r,classes:s}=function HD(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!Lo(r))break;r=s}n++}return{attrs:t,classes:e}}(t.selectors[0]);r&&lp(i,e,r),s&&s.length>0&&Ax(i,e,s.join(" "))}}(c,y,h,n),void 0!==e&&function K8(i,t,e){const n=i.projection=[];for(let r=0;r<t.length;r++){const s=e[r];n.push(null!=s?Array.from(s):null)}}(v,this.ngContentSelectors,e),b=function q8(i,t,e,n,r,s){const o=xr(),a=r[nt],l=lr(o,r);yw(a,r,o,e,null,n);for(let u=0;u<e.length;u++)Br(bc(r,a,o.directiveStart+u,o),r);d(a,r,o),l&&Br(l,r);const c=bc(r,a,o.directiveStart+o.componentOffset,o);if(i[oe]=r[oe]=c,null!==s)for(const u of s)u(c,t);return xh(a,o,i),c}(O,y,M,x,g,[Z8]),Fv(m,g,null)}finally{sp()}return new $8(this.componentType,b,kc(v,g),g,v)}}class $8 extends MD{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new z8(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;v1(s[nt],s,r,t,e),Vr(ms(this._tNode.index,s))}}get injector(){return new Dl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function Z8(){const i=xr();Ku(Ee()[nt],i)}function rt(i){let t=function JO(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(lo(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new he(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=y1(i.inputs),o.declaredInputs=y1(i.declaredInputs),o.outputs=y1(i.outputs);const a=r.hostBindings;a&&t$(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&J8(i,l),c&&e$(i,c),vd(i.inputs,r.inputs),vd(i.declaredInputs,r.declaredInputs),vd(i.outputs,r.outputs),lo(r)&&r.data.animation){const u=i.data;u.animation=(u.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===rt&&(e=!1)}}t=Object.getPrototypeOf(t)}!function Q8(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=eh(r.hostAttrs,e=eh(e,r.hostAttrs))}}(n)}function y1(i){return i===ko?{}:i===Nn?[]:i}function J8(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function e$(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function t$(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}function ww(i){return!!b1(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function b1(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Nl(i,t,e){return i[t]=e}function ys(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function wh(i,t,e,n){const r=ys(i,t,e);return ys(i,t+1,n)||r}function yt(i,t,e,n){const r=Ee();return ys(r,Sd(),t)&&(Pn(),_e(gn(),r,i,t,e,n)),yt}function qp(i,t,e,n){return ys(i,Sd(),e)?t+Wt(e)+n:Kt}function Xp(i,t,e,n,r,s){const a=wh(i,function da(){return Xt.lFrame.bindingIndex}(),e,r);return Ha(2),a?t+Wt(e)+n+Wt(r)+s:Kt}function me(i,t,e,n,r,s,o,a){const l=Ee(),c=Pn(),u=i+Jn,h=c.firstCreatePass?function u$(i,t,e,n,r,s,o,a,l){const c=t.consts,u=Gd(t,i,4,o||null,Ml(c,a));Uv(t,e,u,Ml(c,l)),Ku(t,u);const h=u.tView=Bv(2,u,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,c,l,t,e,n,r,s,o):c.data[u];ca(h,!1);const p=l[Be].createComment("");Tp(c,l,p,h),Br(p,l),dr(l,l[u]=dt(p,l,p,h)),zu(h)&&Lv(c,l,h),null!=o&&Nv(l,h,a)}function Ki(i){return on(function sA(){return Xt.lFrame.contextLView}(),Jn+i)}function V(i,t,e){const n=Ee();return ys(n,Sd(),t)&&Ks(Pn(),gn(),n,i,t,n[Be],e,!1),V}function x1(i,t,e,n,r){const o=r?"class":"style";v1(i,e,t.inputs[o],o,n)}function $(i,t,e,n){const r=Ee(),s=Pn(),o=Jn+i,a=r[Be],l=s.firstCreatePass?function f$(i,t,e,n,r,s){const o=t.consts,l=Gd(t,i,2,n,Ml(o,r));return Uv(t,e,l,Ml(o,s)),null!==l.attrs&&bw(l,l.attrs,!1),null!==l.mergedAttrs&&bw(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,n):s.data[o],c=r[o]=ev(a,t,function ap(){return Xt.lFrame.currentNamespace}()),u=zu(l);return ca(l,!0),mh(a,c,l),32!=(32&l.flags)&&Tp(s,r,c,l),0===function tA(){return Xt.lFrame.elementDepthCount}()&&Br(c,r),function nA(){Xt.lFrame.elementDepthCount++}(),u&&(Lv(s,r,l),xh(s,l,r)),null!==n&&Nv(r,l),$}function Y(){let i=xr();Hs()?v_():(i=i.parent,ca(i,!1));const t=i;!function iA(){Xt.lFrame.elementDepthCount--}();const e=Pn();return e.firstCreatePass&&(Ku(e,i),Jf(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function Ju(i){return 0!=(8&i.flags)}(t)&&x1(e,t,Ee(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function dA(i){return 0!=(16&i.flags)}(t)&&x1(e,t,Ee(),t.stylesWithoutHost,!1),Y}function Pe(i,t,e,n){return $(i,t,e,n),Y(),Pe}function os(i,t,e){const n=Ee(),r=Pn(),s=i+Jn,o=r.firstCreatePass?function p$(i,t,e,n,r){const s=t.consts,o=Ml(s,n),a=Gd(t,i,8,"ng-container",o);return null!==o&&bw(a,o,!0),Uv(t,e,a,Ml(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,n,t,e):r.data[s];ca(o,!0);const a=n[s]=n[Be].createComment("");return Tp(r,n,a,o),Br(a,n),zu(o)&&(Lv(r,n,o),xh(r,o,n)),null!=e&&Nv(n,o),os}function as(){let i=xr();const t=Pn();return Hs()?v_():(i=i.parent,ca(i,!1)),t.firstCreatePass&&(Ku(t,i),Jf(i)&&t.queries.elementEnd(i)),as}function Gv(i,t,e){return os(i,t,e),as(),Gv}function oi(){return Ee()}function $v(i){return!!i&&"function"==typeof i.then}function hF(i){return!!i&&"function"==typeof i.subscribe}const w1=hF;function Ne(i,t,e,n){const r=Ee(),s=Pn(),o=xr();return fF(s,r,r[Be],o,i,t,n),Ne}function M1(i,t){const e=xr(),n=Ee(),r=Pn();return fF(r,n,XO(x_(r.data),e,n),e,i,t),M1}function fF(i,t,e,n,r,s,o){const a=zu(n),c=i.firstCreatePass&&qO(i),u=t[oe],h=YO(t);let p=!0;if(3&n.type||o){const b=lr(n,t),v=o?o(b):b,y=h.length,M=o?C=>o(Fi(C[n.index])):n.index;let x=null;if(!o&&a&&(x=function m$(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const a=t[q],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=s,x.__ngLastListenerFn__=s,p=!1;else{s=mF(n,t,u,s,!1);const C=e.listen(v,r,s);h.push(s,C),c&&c.push(r,M,y,y+1)}}else s=mF(n,t,u,s,!1);const m=n.outputs;let g;if(p&&null!==m&&(g=m[r])){const b=g.length;if(b)for(let v=0;v<b;v+=2){const O=t[g[v]][g[v+1]].subscribe(s),T=h.length;h.push(s,O),c&&c.push(r,n.index,T,-(T+1))}}}function pF(i,t,e,n){try{return co(6,t,e),!1!==e(n)}catch(r){return KO(i,r),!1}finally{co(7,t,e)}}function mF(i,t,e,n,r){return function s(o){if(o===Function)return n;Vr(i.componentOffset>-1?ms(i.index,t):t);let l=pF(t,e,n,o),c=s.__ngNextListenerFn__;for(;c;)l=pF(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function pe(i=1){return function aA(i){return(Xt.lFrame.contextLView=function op(i,t){for(;i>0;)t=t[xl],i--;return t}(i,Xt.lFrame.contextLView))[oe]}(i)}function g$(i,t){let e=null;const n=function Zx(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?Kx(i,s,!0):VD(n,s))return r}else e=r}return e}function Zi(i){const t=Ee()[Or][Xi];if(!t.projection){const n=t.projection=Rd(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?g$(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Bt(i,t=0,e){const n=Ee(),r=Pn(),s=Gd(r,Jn+i,16,null,e||null);null===s.projection&&(s.projection=t),v_(),32!=(32&s.flags)&&function HA(i,t,e){Sx(t[Be],0,t,e,_x(i,e,t),xx(e.parent||t[Xi],e,t))}(r,n,s)}function C1(i,t,e){return S1(i,"",t,"",e),C1}function S1(i,t,e,n,r){const s=Ee(),o=qp(s,t,e,n);return o!==Kt&&Ks(Pn(),gn(),s,i,o,s[Be],r,!1),S1}function Cw(i,t){return i<<17|t<<2}function $d(i){return i>>17&32767}function E1(i){return 2|i}function Mh(i){return(131068&i)>>2}function A1(i,t){return-131069&i|t<<2}function D1(i){return 1|i}function CF(i,t,e,n,r){const s=i[e+1],o=null===t;let a=n?$d(s):Mh(s),l=!1;for(;0!==a&&(!1===l||o);){const u=i[a+1];w$(i[a],t)&&(l=!0,i[a+1]=n?D1(u):E1(u)),a=n?$d(u):Mh(u)}l&&(i[e+1]=n?E1(s):D1(s))}function w$(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Cc(i,t)>=0}const Sr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function SF(i){return i.substring(Sr.key,Sr.keyEnd)}function EF(i,t){const e=Sr.textEnd;return e===t?-1:(t=Sr.keyEnd=function E$(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,Sr.key=t,e),nm(i,t,e))}function nm(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Bo(i,t,e){return Ja(i,t,e,!1),Bo}function nn(i,t){return Ja(i,t,null,!0),nn}function Ul(i,t){for(let e=function C$(i){return function DF(i){Sr.key=0,Sr.keyEnd=0,Sr.value=0,Sr.valueEnd=0,Sr.textEnd=i.length}(i),EF(i,nm(i,0,Sr.textEnd))}(t);e>=0;e=EF(t,e))$s(i,SF(t),!0)}function Ja(i,t,e,n){const r=Ee(),s=Pn(),o=Ha(2);s.firstUpdatePass&&kF(s,i,o,n),t!==Kt&&ys(r,o,t)&&OF(s,s.data[ns()],r,r[Be],i,r[o+1]=function B$(i,t){return null==i||""===i||("string"==typeof t?i+=t:"object"==typeof i&&(i=ri(js(i)))),i}(t,e),n,o)}function RF(i,t){return t>=i.expandoStartIndex}function kF(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[ns()],o=RF(i,e);LF(s,n)&&null===t&&!o&&(t=!1),t=function R$(i,t,e,n){const r=x_(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Wv(e=T1(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=T1(r,i,t,e,n),null===s){let l=function k$(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Mh(n))return i[$d(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=T1(null,i,t,l[1],n),l=Wv(l,t.attrs,n),function P$(i,t,e,n){i[$d(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else s=function O$(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Wv(n,i[s].hostAttrs,e);return Wv(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function b$(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=$d(o),l=Mh(o);i[n]=e;let u,c=!1;if(Array.isArray(e)?(u=e[1],(null===u||Cc(e,u)>0)&&(c=!0)):u=e,r)if(0!==l){const p=$d(i[a+1]);i[n+1]=Cw(p,a),0!==p&&(i[p+1]=A1(i[p+1],n)),i[a+1]=function v$(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=Cw(a,0),0!==a&&(i[a+1]=A1(i[a+1],n)),a=n;else i[n+1]=Cw(l,0),0===a?a=n:i[l+1]=A1(i[l+1],n),l=n;c&&(i[n+1]=E1(i[n+1])),CF(i,u,n,!0),CF(i,u,n,!1),function x$(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Cc(s,t)>=0&&(e[n+1]=D1(e[n+1]))}(t,u,i,n,s),o=Cw(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function T1(i,t,e,n,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],n=Wv(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function Wv(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),$s(i,o,!!e||t[++s]))}return void 0===i?null:i}function OF(i,t,e,n,r,s,o,a){if(!(3&t.type))return;const l=i.data,c=l[a+1],u=function y$(i){return 1==(1&i)}(c)?FF(l,t,e,r,Mh(c),o):void 0;Sw(u)||(Sw(s)||function _$(i){return 2==(2&i)}(c)&&(s=FF(l,null,e,r,a,o)),function $A(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:ss.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ss.Important),i.setStyle(e,n,r,s))}}(n,o,R(ns(),e),r,s))}function FF(i,t,e,n,r,s){const o=null===t;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),u=c?l[1]:l,h=null===u;let p=e[r+1];p===Kt&&(p=h?Nn:void 0);let m=h?gp(p,n):u===n?p:void 0;if(c&&!Sw(m)&&(m=gp(l,n)),Sw(m)&&(a=m,o))return a;const g=i[r+1];r=o?$d(g):Mh(g)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=gp(l,n))}return a}function Sw(i){return void 0!==i}function LF(i,t){return 0!=(i.flags&(t?8:16))}function ze(i,t=""){const e=Ee(),n=Pn(),r=i+Jn,s=n.firstCreatePass?Gd(n,r,1,t,null):n.data[r],o=e[r]=function J_(i,t){return i.createText(t)}(e[Be],t);Tp(n,e,o,s),ca(s,!1)}function ci(i){return Qi("",i,""),ci}function Qi(i,t,e){const n=Ee(),r=qp(n,i,t,e);return r!==Kt&&Oc(n,ns(),r),Qi}function im(i,t,e,n,r){const s=Ee(),o=Xp(s,i,t,e,n,r);return o!==Kt&&Oc(s,ns(),o),im}function $F(i,t,e){!function el(i,t,e,n){const r=Pn(),s=Ha(2);r.firstUpdatePass&&kF(r,null,s,n);const o=Ee();if(e!==Kt&&ys(o,s,e)){const a=r.data[ns()];if(LF(a,n)&&!RF(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=r_(l,e||"")),x1(r,a,o,e,n)}else!function N$(i,t,e,n,r,s,o,a){r===Kt&&(r=Nn);let l=0,c=0,u=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let b,g=null;u===h?(l+=2,c+=2,p!==m&&(g=h,b=m)):null===h||null!==u&&u<h?(l+=2,g=u):(c+=2,g=h,b=m),null!==g&&OF(i,t,e,n,g,b,o,a),u=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[Be],o[s+1],o[s+1]=function F$(i,t,e){if(null==e||""===e)return Nn;const n=[],r=js(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}($s,Ul,qp(Ee(),i,t,e),!0)}function Vl(i,t,e){const n=Ee();return ys(n,Sd(),t)&&Ks(Pn(),gn(),n,i,t,n[Be],e,!0),Vl}function Ew(i,t,e){const n=Ee();if(ys(n,Sd(),t)){const s=Pn(),o=gn();Ks(s,o,n,i,t,XO(x_(s.data),o,n),e,!0)}return Ew}const Ch=void 0;var iW=["en",[["a","p"],["AM","PM"],Ch],[["AM","PM"],Ch,Ch],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ch,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ch,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ch,"{1} 'at' {0}",Ch],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function nW(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let rm={};function Qs(i){const t=function rW(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=tL(t);if(e)return e;const n=t.split("-")[0];if(e=tL(n),e)return e;if("en"===n)return iW;throw new he(701,!1)}function tL(i){return i in rm||(rm[i]=Cn.ng&&Cn.ng.common&&Cn.ng.common.locales&&Cn.ng.common.locales[i]),rm[i]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const sm="en-US";let nL=sm;function k1(i,t,e,n,r){if(i=Mt(i),Array.isArray(i))for(let s=0;s<i.length;s++)k1(i[s],t,e,n,r);else{const s=Pn(),o=Ee();let a=ti(i)?i:Mt(i.provide),l=Cv(i);const c=xr(),u=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(ti(i)||!i.multi){const m=new Zu(l,r,A),g=O1(a,t,r?u:u+p,h);-1===g?(P_(hp(c,o),s,a),P1(s,i,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(m),o.push(m)):(e[g]=m,o[g]=m)}else{const m=O1(a,t,u+p,h),g=O1(a,t,u,u+p),v=g>=0&&e[g];if(r&&!v||!r&&!(m>=0&&e[m])){P_(hp(c,o),s,a);const y=function t6(i,t,e,n,r){const s=new Zu(i,e,A);return s.multi=[],s.index=t,s.componentProviders=0,AL(s,r,n&&!e),s}(r?e6:JW,e.length,r,n,l);!r&&v&&(e[g].providerFactory=y),P1(s,i,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(y),o.push(y)}else P1(s,i,m>-1?m:g,AL(e[r?g:m],l,!r&&n));!r&&n&&v&&e[g].componentProviders++}}}function P1(i,t,e,n){const r=ti(t),s=function $x(i){return!!i.useClass}(t);if(r||s){const l=(s?Mt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const u=c.indexOf(e);-1===u?c.push(e,[n,l]):c[u+1].push(n,l)}else c.push(e,l)}}}function AL(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function O1(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function JW(i,t,e,n){return F1(this.multi,[])}function e6(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=bc(e,e[nt],this.providerFactory.index,n);s=a.slice(0,o),F1(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],F1(r,s);return s}function F1(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function Sn(i,t=[]){return e=>{e.providersResolver=(n,r)=>function QW(i,t,e){const n=Pn();if(n.firstCreatePass){const r=lo(i);k1(e,n.data,n.blueprint,r,!0),k1(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class om{}class DL{}class TL extends om{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ZO(this);const n=Vs(t);this._bootstrapComponents=Qa(n.bootstrap),this._r3Injector=aw(t,e,[{provide:om,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver}],ri(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class L1 extends DL{constructor(t){super(),this.moduleType=t}create(t){return new TL(this.moduleType,t)}}class r6 extends om{constructor(t,e,n){super(),this.componentFactoryResolver=new ZO(this),this.instance=null;const r=new wv([...t,{provide:om,useValue:this},{provide:Fl,useValue:this.componentFactoryResolver}],e||Np(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Rw(i,t,e=null){return new r6(i,t,e).injector}let s6=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const n=zx(0,e.type),r=n.length>0?Rw([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ie({token:i,providedIn:"environment",factory:()=>new i(J(Xa))}),i})();function N1(i){i.getStandaloneInjector=t=>t.get(s6).getOrCreateStandaloneInjector(i)}function Js(i,t,e){const n=ts()+i,r=Ee();return r[n]===Kt?Nl(r,n,e?t.call(e):t()):function Hv(i,t){return i[t]}(r,n)}function am(i,t,e,n){return NL(Ee(),ts(),i,t,e,n)}function LL(i,t,e,n,r,s,o){return function VL(i,t,e,n,r,s,o,a,l){const c=t+e;return function ya(i,t,e,n,r,s){const o=wh(i,t,e,n);return wh(i,t+2,r,s)||o}(i,c,r,s,o,a)?Nl(i,c+4,l?n.call(l,r,s,o,a):n(r,s,o,a)):Zv(i,c+4)}(Ee(),ts(),i,t,e,n,r,s,o)}function Zv(i,t){const e=i[t];return e===Kt?void 0:e}function NL(i,t,e,n,r,s){const o=t+e;return ys(i,o,r)?Nl(i,o+1,s?n.call(s,r):n(r)):Zv(i,o+1)}function Ht(i,t){const e=Pn();let n;const r=i+Jn;e.firstCreatePass?(n=function x6(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=Va(n.type)),o=Bs(A);try{const a=nh(!1),l=s();return nh(a),function h$(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,Ee(),r,l),l}finally{Bs(o)}}function Zt(i,t,e){const n=i+Jn,r=Ee(),s=on(r,n);return Qv(r,n)?NL(r,ts(),t,s.transform,e,s):s.transform(e)}function U1(i,t,e,n){const r=i+Jn,s=Ee(),o=on(s,r);return Qv(s,r)?function BL(i,t,e,n,r,s,o){const a=t+e;return wh(i,a,r,s)?Nl(i,a+2,o?n.call(o,r,s):n(r,s)):Zv(i,a+2)}(s,ts(),t,o.transform,e,n,o):o.transform(e,n)}function Qv(i,t){return i[nt].data[t].pure}function V1(i){return t=>{setTimeout(i,void 0,t)}}const He=class S6 extends Fe{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=V1(s),r&&(r=V1(r)),o&&(o=V1(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof $t&&t.add(a),a}};function E6(){return this._results[Symbol.iterator]()}class lm{get changes(){return this._changes||(this._changes=new He)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=lm.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=E6)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=function ho(i){return i.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function gA(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let mo=(()=>{class i{}return i.__NG_ELEMENT_ID__=T6,i})();const A6=mo,D6=class extends A6{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tView,r=Gp(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[Fr]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[aa];return null!==o&&(r[aa]=o.createEmbeddedView(n)),Fv(n,r,t),new Vv(r)}};function T6(){return kw(xr(),Ee())}function kw(i,t){return 4&i.type?new D6(t,i,kc(i,t)):null}let zr=(()=>{class i{}return i.__NG_ELEMENT_ID__=I6,i})();function I6(){return $L(xr(),Ee())}const R6=zr,HL=class extends R6{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return kc(this._hostTNode,this._hostLView)}get injector(){return new Dl(this._hostTNode,this._hostLView)}get parentInjector(){const t=rh(this._hostTNode,this._hostLView);if(cp(t)){const e=th(t,this._hostLView),n=dp(t);return new Dl(e[nt].data[n+8],e)}return new Dl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=GL(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-es}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function gs(i){return"function"==typeof i}(t);let a;if(o)a=e;else{const h=e||{};a=h.index,n=h.injector,r=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}const l=o?t:new zv(Hn(t)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const p=(o?c:this.parentInjector).get(Xa,null);p&&(s=p)}const u=l.create(c,r,void 0,s);return this.insert(u.hostView,a),u}insert(t,e){const n=t._lView,r=n[nt];if(function _c(i){return ps(i[Ei])}(n)){const u=this.indexOf(t);if(-1!==u)this.detach(u);else{const h=n[Ei],p=new HL(h,h[Xi],h[Ei]);p.detach(p.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function LA(i,t,e,n){const r=es+n,s=e.length;n>0&&(e[r-1][Po]=t),n<s-es?(t[Po]=e[r],Mc(e,es+n,t)):(e.push(t),t[Po]=null),t[Ei]=e;const o=t[Fr];null!==o&&e!==o&&function NA(i,t){const e=i[Cd];t[Or]!==t[Ei][Ei][Or]&&(i[u_]=!0),null===e?i[Cd]=[t]:e.push(t)}(o,t);const a=t[aa];null!==a&&a.insertView(i),t[sn]|=64}(r,n,o,s);const a=sv(s,o),l=n[Be],c=Dp(l,o[fc]);return null!==c&&function mx(i,t,e,n,r,s){n[oa]=r,n[Xi]=t,ph(i,n,e,1,r,s)}(r,o[Xi],l,n,c,a),t.attachToViewContainerRef(),Mc(z1(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=GL(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=tv(this._lContainer,e);n&&(ah(z1(this._lContainer),e),gx(n[nt],n))}detach(t){const e=this._adjustIndex(t,-1),n=tv(this._lContainer,e);return n&&null!=ah(z1(this._lContainer),e)?new Vv(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function GL(i){return i[Qf]}function z1(i){return i[Qf]||(i[Qf]=[])}function $L(i,t){let e;const n=t[i.index];if(ps(n))e=n;else{let r;if(8&i.type)r=Fi(n);else{const s=t[Be];r=s.createComment("");const o=lr(i,t);Dc(s,Dp(s,o),r,function zA(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=dt(n,t,r,i),dr(t,e)}return new HL(e,i,t)}class H1{constructor(t){this.queryList=t,this.matches=null}clone(){return new H1(this.queryList)}setDirty(){this.queryList.setDirty()}}class G1{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new G1(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==XL(t,e).matches&&this.queries[e].setDirty()}}class WL{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class $1{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new $1(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class W1{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new W1(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,k6(e,s)),this.matchTNodeWithReadOption(t,e,fp(e,t,s,!1,!1))}else n===mo?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,fp(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ct||r===zr||r===mo&&4&e.type)this.addMatch(e.index,-2);else{const s=fp(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function k6(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function O6(i,t,e,n){return-1===e?function P6(i,t){return 11&i.type?kc(i,t):4&i.type?kw(i,t):null}(t,i):-2===e?function F6(i,t,e){return e===ct?kc(t,i):e===mo?kw(t,i):e===zr?$L(t,i):void 0}(i,t,n):bc(i,i[nt],e,t)}function jL(i,t,e,n){const r=t[aa].queries[n];if(null===r.matches){const s=i.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:O6(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function j1(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=jL(i,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],u=t[-l];for(let h=es;h<u.length;h++){const p=u[h];p[Fr]===p[Ei]&&j1(p[nt],p,c,n)}if(null!==u[Cd]){const h=u[Cd];for(let p=0;p<h.length;p++){const m=h[p];j1(m[nt],m,c,n)}}}}}return n}function St(i){const t=Ee(),e=Pn(),n=ua();Xu(n+1);const r=XL(e,n);if(i.dirty&&function eA(i){return 4==(4&i[sn])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?j1(e,t,n,[]):jL(e,t,r,n);i.reset(s,Yn),i.notifyOnChanges()}return!0}return!1}function qn(i,t,e){const n=Pn();n.firstCreatePass&&(qL(n,new WL(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),YL(n,Ee(),t)}function Ni(i,t,e,n){const r=Pn();if(r.firstCreatePass){const s=xr();qL(r,new WL(t,e,n),s.index),function N6(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}YL(r,Ee(),e)}function Et(){return function L6(i,t){return i[aa].queries[t].queryList}(Ee(),ua())}function YL(i,t,e){const n=new lm(4==(4&e));gw(i,t,n,n.destroy),null===t[aa]&&(t[aa]=new G1),t[aa].queries.push(new H1(n))}function qL(i,t,e){null===i.queries&&(i.queries=new $1),i.queries.track(new W1(t,e))}function XL(i,t){return i.queries.getByIndex(t)}function Fc(i,t){return kw(i,t)}function Ow(...i){}const Fw=new fe("Application Initializer");let Lw=(()=>{class i{constructor(e){this.appInits=e,this.resolve=Ow,this.reject=Ow,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if($v(s))e.push(s);else if(w1(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(J(Fw,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const um=new fe("AppId",{providedIn:"root",factory:function p2(){return`${Q1()}${Q1()}${Q1()}`}});function Q1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const m2=new fe("Platform Initializer"),J1=new fe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Er=new fe("AnimationModuleType");let ij=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zl=new fe("LocaleId",{providedIn:"root",factory:()=>Nt(zl,Tt.Optional|Tt.SkipSelf)||function rj(){return typeof $localize<"u"&&$localize.locale||sm}()});class oj{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let g2=(()=>{class i{compileModuleSync(e){return new L1(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=Qa(Vs(e).declarations).reduce((o,a)=>{const l=Hn(a);return l&&o.push(new zv(l)),o},[]);return new oj(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cj=(()=>Promise.resolve(0))();function eT(i){typeof Zone>"u"?cj.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class at{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function dj(){let i=Cn.requestAnimationFrame,t=Cn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function fj(i){const t=()=>{!function hj(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Cn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,nT(i),i.isCheckStableRunning=!0,tT(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),nT(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,a)=>{try{return y2(i),e.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),b2(i)}},onInvoke:(e,n,r,s,o,a,l)=>{try{return y2(i),e.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),b2(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,nT(i),tT(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!at.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(at.isInAngularZone())throw new he(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,uj,Ow,Ow);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const uj={};function tT(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function nT(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function y2(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function b2(i){i._nesting--,tT(i)}class pj{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const x2=new fe(""),Nw=new fe("");let sT,iT=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,sT||(function mj(i){sT=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{at.assertNotInAngularZone(),eT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eT(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(J(at),J(rT),J(Nw))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),rT=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return sT?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Lc=!1;let Wd=null;const w2=new fe("AllowMultipleToken"),oT=new fe("PlatformDestroyListeners"),M2=new fe("appBootstrapListener");class C2{constructor(t,e){this.name=t,this.token=e}}function E2(i,t,e=[]){const n=`Platform: ${t}`,r=new fe(n);return(s=[])=>{let o=aT();if(!o||o.injector.get(w2,!1)){const a=[...e,...s,{provide:r,useValue:!0}];i?i(a):function vj(i){if(Wd&&!Wd.get(w2,!1))throw new he(400,!1);Wd=i;const t=i.get(D2);(function S2(i){const t=i.get(m2,null);t&&t.forEach(e=>e())})(i)}(function A2(i=[],t){return Li.create({name:t,providers:[{provide:bv,useValue:"platform"},{provide:oT,useValue:new Set([()=>Wd=null])},...i]})}(a,n))}return function bj(i){const t=aT();if(!t)throw new he(401,!1);return t}()}}function aT(){return Wd?.get(D2)??null}let D2=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function I2(i,t){let e;return e="noop"===i?new pj:("zone.js"===i?void 0:i)||new at(t),e}(n?.ngZone,function T2(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:at,useValue:r}];return r.run(()=>{const o=Li.create({providers:s,parent:this.injector,name:e.moduleType.name}),a=e.create(o),l=a.injector.get(Za,null);if(!l)throw new he(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:u=>{l.handleError(u)}});a.onDestroy(()=>{Bw(this._modules,a),c.unsubscribe()})}),function R2(i,t,e){try{const n=e();return $v(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(Lw);return c.runInitializers(),c.donePromise.then(()=>(function iL(i){oo(i,"Expected localeId to be defined"),"string"==typeof i&&(nL=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(zl,sm)||sm),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,n=[]){const r=k2({},n);return function gj(i,t,e){const n=new L1(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(hm);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new he(-403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(oT,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(J(Li))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function k2(i,t){return Array.isArray(t)?t.reduce(k2,i):{...i,...t}}let hm=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new An(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new An(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{at.assertNotInAngularZone(),eT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{at.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=or(s,o.pipe(Ou()))}bootstrap(e,n){const r=e instanceof Wx;if(!this._injector.get(Lw).done){!r&&function Md(i){const t=Hn(i)||xi(i)||yr(i);return null!==t&&t.standalone}(e);throw new he(405,Lc)}let o;o=r?e:this._injector.get(Fl).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function _j(i){return i.isBoundToModule}(o)?void 0:this._injector.get(om),c=o.create(Li.NULL,[],n||o.selector,a),u=c.location.nativeElement,h=c.injector.get(x2,null);return h?.registerApplication(u),c.onDestroy(()=>{this.detachView(c.hostView),Bw(this.components,c),h?.unregisterApplication(u)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Bw(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const n=this._injector.get(M2,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Bw(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new he(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(J(at),J(Xa),J(Za))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Bw(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let Xn=(()=>{class i{}return i.__NG_ELEMENT_ID__=wj,i})();function wj(i){return function Mj(i,t,e){if(wl(i)&&!e){const n=ms(i.index,t);return new Vv(n,n)}return 47&i.type?new Vv(t[Or],t):null}(xr(),Ee(),16==(16&i))}class N2{constructor(){}supports(t){return ww(t)}create(t){return new Tj(t)}}const Dj=(i,t)=>t;class Tj{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Dj}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<U2(n,r,s)?e:n,a=U2(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,u=l-r;if(c!=u){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,g=m+p;u<=g&&g<c&&(s[p]=m+1)}s[o.previousIndex]=u-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!ww(t))throw new he(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),n=!0),e=e._next}else r=0,function l$(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Symbol.iterator]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new Ij(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new B2),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new B2),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Ij{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rj{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class B2{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Rj,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function U2(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class V2{constructor(){}supports(t){return t instanceof Map||b1(t)}create(){return new kj}}class kj{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||b1(t)))throw new he(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new Pj(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Pj{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function z2(){return new zw([new N2])}let zw=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||z2()),deps:[[i,new Oo,new _s]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new he(901,!1)}}return i.\u0275prov=Ie({token:i,providedIn:"root",factory:z2}),i})();function H2(){return new ey([new V2])}let ey=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||H2()),deps:[[i,new Oo,new _s]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new he(901,!1)}}return i.\u0275prov=Ie({token:i,providedIn:"root",factory:H2}),i})();const Lj=E2(null,"core",[]);let Nj=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(J(hm))},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();let hT=null;function Nc(){return hT}class Vj{}const Ut=new fe("DocumentToken");let fT=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(){return function zj(){return J(G2)}()},providedIn:"platform"}),i})();const Hj=new fe("Location Initialized");let G2=(()=>{class i extends fT{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Nc().getBaseHref(this._doc)}onPopState(e){const n=Nc().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Nc().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){$2()?this._history.pushState(e,n,r):this._location.hash=r}replaceState(e,n,r){$2()?this._history.replaceState(e,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:function(){return function Gj(){return new G2(J(Ut))}()},providedIn:"platform"}),i})();function $2(){return!!window.history.pushState}function pT(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function W2(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Bc(i){return i&&"?"!==i[0]?"?"+i:i}let Eh=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(){return Nt(Y2)},providedIn:"root"}),i})();const j2=new fe("appBaseHref");let Y2=(()=>{class i extends Eh{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Nt(Ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return pT(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Bc(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Bc(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Bc(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(J(fT),J(j2,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$j=(()=>{class i extends Eh{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=pT(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Bc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Bc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(J(fT),J(j2,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),ty=(()=>{class i{constructor(e){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function Yj(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(W2(q2(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Bc(n))}normalize(e){return i.stripTrailingSlash(function jj(i,t){if(!i||!t.startsWith(i))return t;const e=t.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,q2(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bc(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Bc(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Bc,i.joinWithSlash=pT,i.stripTrailingSlash=W2,i.\u0275fac=function(e){return new(e||i)(J(Eh))},i.\u0275prov=Ie({token:i,factory:function(){return function Wj(){return new ty(J(Eh))}()},providedIn:"root"}),i})();function q2(i){return i.replace(/\/index.html$/,"")}var go=(()=>((go=go||{})[go.Decimal=0]="Decimal",go[go.Percent=1]="Percent",go[go.Currency=2]="Currency",go[go.Scientific=3]="Scientific",go))(),Ot=(()=>((Ot=Ot||{})[Ot.Decimal=0]="Decimal",Ot[Ot.Group=1]="Group",Ot[Ot.List=2]="List",Ot[Ot.PercentSign=3]="PercentSign",Ot[Ot.PlusSign=4]="PlusSign",Ot[Ot.MinusSign=5]="MinusSign",Ot[Ot.Exponential=6]="Exponential",Ot[Ot.SuperscriptingExponent=7]="SuperscriptingExponent",Ot[Ot.PerMille=8]="PerMille",Ot[Ot.Infinity=9]="Infinity",Ot[Ot.NaN=10]="NaN",Ot[Ot.TimeSeparator=11]="TimeSeparator",Ot[Ot.CurrencyDecimal=12]="CurrencyDecimal",Ot[Ot.CurrencyGroup=13]="CurrencyGroup",Ot))();function ba(i,t){const e=Qs(i),n=e[et.NumberSymbols][t];if(typeof n>"u"){if(t===Ot.CurrencyDecimal)return e[et.NumberSymbols][Ot.Decimal];if(t===Ot.CurrencyGroup)return e[et.NumberSymbols][Ot.Group]}return n}const b9=/^(\d+)?\.((\d+)(-(\d+))?)?$/,eN=22,Kw=".",iy="0",x9=";",w9=",",yT="#";function wT(i){const t=parseInt(i);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+i);return t}const CT=/\s+/,iN=[];let pm=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this.initialClasses=iN,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(CT):iN}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(CT):e}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const n of e)this._updateState(n,!0);else if(null!=e)for(const n of Object.keys(e))this._updateState(n,Boolean(e[n]));this._applyStateDiff()}_updateState(e,n){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const n=e[0],r=e[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(e,n){(e=e.trim()).length>0&&e.split(CT).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(A(zw),A(ey),A(ct),A(_a))},i.\u0275dir=xe({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class P9{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let _o=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new P9(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),oN(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{oN(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(A(zr),A(mo),A(zw))},i.\u0275dir=xe({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function oN(i,t){i.context.$implicit=t.item}let vi=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new F9,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){aN("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){aN("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(A(zr),A(mo))},i.\u0275dir=xe({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class F9{constructor(){this.$implicit=null,this.ngIf=null}}function aN(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${ri(t)}'.`)}class ST{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let ry=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const n of this._defaultViews)n.enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),ET=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new ST(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(A(zr),A(mo),A(ry,9))},i.\u0275dir=xe({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),lN=(()=>{class i{constructor(e,n,r){r._addDefault(new ST(e,n))}}return i.\u0275fac=function(e){return new(e||i)(A(zr),A(mo),A(ry,9))},i.\u0275dir=xe({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),Zw=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:ss.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(ey),A(_a))},i.\u0275dir=xe({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),sy=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(A(zr))},i.\u0275dir=xe({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Mi]}),i})();function il(i,t){return new he(2100,!1)}class N9{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}}class B9{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}}const U9=new B9,V9=new N9;let Hl=(()=>{class i{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if($v(e))return U9;if(hF(e))return V9;throw il()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(A(Xn,16))},i.\u0275pipe=Pr({name:"async",type:i,pure:!1,standalone:!0}),i})(),dN=(()=>{class i{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=uN}transform(e,n=uN){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const r=this.differ.diff(e),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function J9(i,t){return{key:i,value:t}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(e){return new(e||i)(A(ey,16))},i.\u0275pipe=Pr({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function uN(i,t){const e=i.key,n=t.key;if(e===n)return 0;if(void 0===e)return 1;if(void 0===n)return-1;if(null===e)return 1;if(null===n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const r=String(e),s=String(n);return r==s?0:r<s?-1:1}let hN=(()=>{class i{constructor(e){this._locale=e}transform(e,n,r){if(!function AT(i){return!(null==i||""===i||i!=i)}(e))return null;r=r||this._locale;try{return function E9(i,t,e){return function bT(i,t,e,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function D9(i){let n,r,s,o,a,t=Math.abs(i)+"",e=0;for((r=t.indexOf(Kw))>-1&&(t=t.replace(Kw,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===iy;s++);if(s===(a=t.length))n=[0],r=1;else{for(a--;t.charAt(a)===iy;)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(t.charAt(s))}return r>eN&&(n=n.splice(0,eN-1),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(i);o&&(c=function A9(i){if(0===i.digits[0])return i;const t=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===t?i.digits.push(0,0):1===t&&i.digits.push(0),i.integerLen+=2),i}(c));let u=t.minInt,h=t.minFrac,p=t.maxFrac;if(s){const M=s.match(b9);if(null===M)throw new Error(`${s} is not a valid digit info`);const x=M[1],C=M[3],O=M[5];null!=x&&(u=wT(x)),null!=C&&(h=wT(C)),null!=O?p=wT(O):null!=C&&h>p&&(p=h)}!function T9(i,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(t,r),e);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let h=o;h<n.length;h++)n[h]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let h=1;h<o;h++)n[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=t+i.integerLen,u=n.reduceRight(function(h,p,m,g){return g[m]=(p+=h)<10?p:p-10,l&&(0===g[m]&&m>=c?g.pop():l=!1),p>=10?1:0},0);u&&(n.unshift(u),i.integerLen++)}(c,h,p);let m=c.digits,g=c.integerLen;const b=c.exponent;let v=[];for(l=m.every(M=>!M);g<u;g++)m.unshift(0);for(;g<0;g++)m.unshift(0);g>0?v=m.splice(g,m.length):(v=m,m=[0]);const y=[];for(m.length>=t.lgSize&&y.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)y.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&y.unshift(m.join("")),a=y.join(ba(e,n)),v.length&&(a+=ba(e,r)+v.join("")),b&&(a+=ba(e,Ot.Exponential)+"+"+b)}else a=ba(e,Ot.Infinity);return a=i<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(i,function xT(i,t="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(x9),r=n[0],s=n[1],o=-1!==r.indexOf(Kw)?r.split(Kw):[r.substring(0,r.lastIndexOf(iy)+1),r.substring(r.lastIndexOf(iy)+1)],a=o[0],l=o[1]||"";e.posPre=a.substring(0,a.indexOf(yT));for(let u=0;u<l.length;u++){const h=l.charAt(u);h===iy?e.minFrac=e.maxFrac=u+1:h===yT?e.maxFrac=u+1:e.posSuf+=h}const c=a.split(w9);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const u=r.length-e.posPre.length-e.posSuf.length,h=s.indexOf(yT);e.negPre=s.substring(0,h).replace(/'/g,""),e.negSuf=s.slice(h+u).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}(function mT(i,t){return Qs(i)[et.NumberFormats][t]}(t,go.Decimal),ba(t,Ot.MinusSign)),t,Ot.Group,Ot.Decimal,e)}(function DT(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(e),r,n)}catch(s){throw il()}}}return i.\u0275fac=function(e){return new(e||i)(A(zl,16))},i.\u0275pipe=Pr({name:"number",type:i,pure:!0,standalone:!0}),i})();let vo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();const fN="browser";let oY=(()=>{class i{}return i.\u0275prov=Ie({token:i,providedIn:"root",factory:()=>new aY(J(Ut),window)}),i})();class aY{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function lY(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=pN(this.window.history)||pN(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function pN(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class LY extends Vj{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class RT extends LY{static makeCurrent(){!function Uj(i){hT||(hT=i)}(new RT)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function NY(){return ay=ay||document.querySelector("base"),ay?ay.getAttribute("href"):null}();return null==e?null:function BY(i){eM=eM||document.createElement("a"),eM.setAttribute("href",i);const t=eM.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){ay=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function R9(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let eM,ay=null;const yN=new fe("TRANSITION_ID"),VY=[{provide:Fw,useFactory:function UY(i,t,e){return()=>{e.get(Lw).donePromise.then(()=>{const n=Nc(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[yN,Ut,Li],multi:!0}];let HY=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();const tM=new fe("EventManagerPlugins");let nM=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(J(tM),J(at))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();class bN{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Nc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let xN=(()=>{class i{constructor(){this.usageCount=new Map}addStyles(e){for(const n of e)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(e){for(const n of e)0===this.changeUsageCount(n,-1)&&this.onStyleRemoved(n)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,n){const r=this.usageCount;let s=r.get(e)??0;return s+=n,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),ly=(()=>{class i extends xN{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){const n=this.styleRef;n.get(e)?.forEach(s=>s.remove()),n.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,n){const r=this.doc.createElement("style");r.textContent=n,e.appendChild(r);const s=this.styleRef.get(n);s?s.push(r):this.styleRef.set(n,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();const kT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},PT=/%COMP%/g,CN=new fe("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function SN(i,t){return t.flat(100).map(e=>e.replace(PT,i))}function EN(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let iM=(()=>{class i{constructor(e,n,r,s){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new OT(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,n);return r instanceof TN?r.applyToHost(e):r instanceof FT&&r.applyStyles(),r}getOrCreateRenderer(e,n){const r=this.rendererByCompId;let s=r.get(n.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(n.encapsulation){case Ro.Emulated:s=new TN(o,a,n,this.appId,l);break;case Ro.ShadowDom:return new XY(o,a,e,n);default:s=new FT(o,a,n,l)}s.onDestroy=()=>r.delete(n.id),r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(J(nM),J(ly),J(um),J(CN))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();class OT{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(kT[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(DN(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(DN(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=kT[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=kT[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(ss.DashCase|ss.Important)?t.style.setProperty(e,n,r&ss.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ss.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,EN(n)):this.eventManager.addEventListener(t,e,EN(n))}}function DN(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class XY extends OT{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=SN(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class FT extends OT{constructor(t,e,n,r,s=n.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=SN(s,n.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class TN extends FT{constructor(t,e,n,r,s){const o=r+"-"+n.id;super(t,e,n,s,o),this.contentAttr=function jY(i){return"_ngcontent-%COMP%".replace(PT,i)}(o),this.hostAttr=function YY(i){return"_nghost-%COMP%".replace(PT,i)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}let KY=(()=>{class i extends bN{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();const IN=["alt","control","meta","shift"],ZY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},QY={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let JY=(()=>{class i extends bN{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Nc().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),IN.forEach(c=>{const u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=ZY[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),IN.forEach(o=>{o!==r&&(0,QY[o])(e)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();const i7=E2(Lj,"browser",[{provide:J1,useValue:fN},{provide:m2,useValue:function e7(){RT.makeCurrent()},multi:!0},{provide:Ut,useFactory:function n7(){return function qA(i){cv=i}(document),document},deps:[]}]),PN=new fe(""),ON=[{provide:Nw,useClass:class zY{addToWindow(t){Cn.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Cn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Cn.getAllAngularRootElements=()=>t.getAllRootElements(),Cn.frameworkStabilizers||(Cn.frameworkStabilizers=[]),Cn.frameworkStabilizers.push(n=>{const r=Cn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Nc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:x2,useClass:iT,deps:[at,rT,Nw]},{provide:iT,useClass:iT,deps:[at,rT,Nw]}],FN=[{provide:bv,useValue:"root"},{provide:Za,useFactory:function t7(){return new Za},deps:[]},{provide:tM,useClass:KY,multi:!0,deps:[Ut,at,J1]},{provide:tM,useClass:JY,multi:!0,deps:[Ut]},{provide:iM,useClass:iM,deps:[nM,ly,um,CN]},{provide:yh,useExisting:iM},{provide:xN,useExisting:ly},{provide:ly,useClass:ly,deps:[Ut]},{provide:nM,useClass:nM,deps:[tM,at]},{provide:class cY{},useClass:HY,deps:[]},[]];let LN=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:um,useValue:e.appId},{provide:yN,useExisting:um},VY]}}}return i.\u0275fac=function(e){return new(e||i)(J(PN,12))},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[...FN,...ON],imports:[vo,Nj]}),i})(),NN=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:function(e){let n=null;return n=e?new e:function s7(){return new NN(J(Ut))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let BT=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(e){let n=null;return n=e?new(e||i):J(VN),n},providedIn:"root"}),i})(),VN=(()=>{class i extends BT{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Gn.NONE:return n;case Gn.HTML:return Ys(n,"HTML")?js(n):Nx(this._doc,String(n)).toString();case Gn.STYLE:return Ys(n,"Style")?js(n):n;case Gn.SCRIPT:if(Ys(n,"Script"))return js(n);throw new Error("unsafe value used in a script context");case Gn.URL:return Ys(n,"URL")?js(n):Ic(String(n));case Gn.RESOURCE_URL:if(Ys(n,"ResourceURL"))return js(n);throw new Error(`unsafe value used in a resource URL context (see ${yd})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${yd})`)}}bypassSecurityTrustHtml(e){return function JA(i){return new kx(i)}(e)}bypassSecurityTrustStyle(e){return function eD(i){return new Px(i)}(e)}bypassSecurityTrustScript(e){return function tD(i){return new XA(i)}(e)}bypassSecurityTrustUrl(e){return function nD(i){return new KA(i)}(e)}bypassSecurityTrustResourceUrl(e){return function iD(i){return new ZA(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:function(e){let n=null;return n=e?new e:function d7(i){return new VN(i.get(Ut))}(J(Li)),n},providedIn:"root"}),i})();function st(...i){return Oi(i,Pu(i))}class At extends Fe{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const cy=U(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:u7}=Array,{getPrototypeOf:h7,prototype:f7,keys:p7}=Object;function zN(i){if(1===i.length){const t=i[0];if(u7(t))return{args:t,keys:null};if(function m7(i){return i&&"object"==typeof i&&h7(i)===f7}(t)){const e=p7(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:g7}=Array;function UT(i){return Qe(t=>function _7(i,t){return g7(t)?i(...t):i(t)}(i,t))}function HN(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function Yd(...i){const t=Pu(i),e=ku(i),{args:n,keys:r}=zN(i);if(0===n.length)return Oi([],t);const s=new An(function v7(i,t,e=Na){return n=>{GN(t,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)GN(t,()=>{const c=Oi(i[l],t);let u=!1;c.subscribe(Fn(n,h=>{s[l]=h,u||(u=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>HN(r,o):Na));return e?s.pipe(UT(e)):s}function GN(i,t,e){i?ra(e,i,t):t()}function dy(...i){return function y7(){return _d(1)}()(Oi(i,Pu(i)))}function uy(i){return new An(t=>{sr(i()).subscribe(t)})}function mm(i,t){const e=en(i)?i:()=>i,n=r=>r.error(e());return new An(t?r=>t.schedule(n,0,r):n)}function VT(){return zn((i,t)=>{let e=null;i._refCount++;const n=Fn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class $N extends An{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,jb(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new $t;const e=this.getSubject();t.add(this.source.subscribe(Fn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=$t.EMPTY)}return t}refCount(){return VT()(this)}}function bs(i,t){return zn((e,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();e.subscribe(Fn(n,l=>{r?.unsubscribe();let c=0;const u=s++;sr(i(l,u)).subscribe(r=Fn(n,h=>n.next(t?t(l,h,u,c++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Di(i){return i<=0?()=>Ls:zn((t,e)=>{let n=0;t.subscribe(Fn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Uo(...i){const t=Pu(i);return zn((e,n)=>{(t?dy(i,e,t):dy(i,e)).subscribe(n)})}function Dn(i,t){return zn((e,n)=>{let r=0;e.subscribe(Fn(n,s=>i.call(t,s,r++)&&n.next(s)))})}function rM(i){return zn((t,e)=>{let n=!1;t.subscribe(Fn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function WN(i=b7){return zn((t,e)=>{let n=!1;t.subscribe(Fn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function b7(){return new cy}function qd(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Dn((r,s)=>i(r,s,n)):Na,Di(1),e?rM(t):WN(()=>new cy))}function Xd(i,t){return en(t)?qi(i,t,1):qi(i,1)}function Ti(i,t,e){const n=en(i)||t||e?{next:i,error:t,complete:e}:i;return n?zn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(Fn(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Na}function Vc(i){return zn((t,e)=>{let s,n=null,r=!1;n=t.subscribe(Fn(e,void 0,void 0,o=>{s=sr(i(o,Vc(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function jN(i,t){return zn(function x7(i,t,e,n,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Fn(o,u=>{const h=c++;l=a?i(l,u,h):(a=!0,u),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(i,t,arguments.length>=2,!0))}function zT(i){return i<=0?()=>Ls:zn((t,e)=>{let n=[];t.subscribe(Fn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function YN(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Dn((r,s)=>i(r,s,n)):Na,zT(1),e?rM(t):WN(()=>new cy))}function qN(i,t=!1){return zn((e,n)=>{let r=0;e.subscribe(Fn(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}function XN(i){return Qe(()=>i)}function Kd(i){return zn((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const dn="primary",hy=Symbol("RouteTitle");class w7{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function gm(i){return new w7(i)}function M7(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Gl(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!KN(i[r],t[r]))return!1;return!0}function KN(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function ZN(i){return Array.prototype.concat.apply([],i)}function QN(i){return i.length>0?i[i.length-1]:null}function ls(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function Zd(i){return w1(i)?i:$v(i)?Oi(Promise.resolve(i)):st(i)}const sM=!1,S7={exact:function tB(i,t,e){if(!Ah(i.segments,t.segments)||!oM(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!tB(i.children[n],t.children[n],e))return!1;return!0},subset:nB},JN={exact:function E7(i,t){return Gl(i,t)},subset:function A7(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>KN(i[e],t[e]))},ignored:()=>!0};function eB(i,t,e){return S7[e.paths](i.root,t.root,e.matrixParams)&&JN[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function nB(i,t,e){return iB(i,t,t.segments,e)}function iB(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!Ah(r,e)||t.hasChildren()||!oM(r,e,n))}if(i.segments.length===e.length){if(!Ah(i.segments,e)||!oM(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!nB(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(Ah(i.segments,r)&&oM(i.segments,r,n)&&i.children[dn])&&iB(i.children[dn],t,s,n)}}function oM(i,t,e){return t.every((n,r)=>JN[e](i[r].parameters,n.parameters))}class Qd{constructor(t=new En([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gm(this.queryParams)),this._queryParamMap}toString(){return I7.serialize(this)}}class En{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ls(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return aM(this)}}class fy{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=gm(this.parameters)),this._parameterMap}toString(){return oB(this)}}function Ah(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let py=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(){return new HT},providedIn:"root"}),i})();class HT{parse(t){const e=new U7(t);return new Qd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${my(t.root,!0)}`,n=function P7(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${lM(e)}=${lM(r)}`).join("&"):`${lM(e)}=${lM(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function R7(i){return encodeURI(i)}(t.fragment)}`:""}`}}const I7=new HT;function aM(i){return i.segments.map(t=>oB(t)).join("/")}function my(i,t){if(!i.hasChildren())return aM(i);if(t){const e=i.children[dn]?my(i.children[dn],!1):"",n=[];return ls(i.children,(r,s)=>{s!==dn&&n.push(`${s}:${my(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function T7(i,t){let e=[];return ls(i.children,(n,r)=>{r===dn&&(e=e.concat(t(n,r)))}),ls(i.children,(n,r)=>{r!==dn&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===dn?[my(i.children[dn],!1)]:[`${r}:${my(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[dn]?`${aM(i)}/${e[0]}`:`${aM(i)}/(${e.join("//")})`}}function rB(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lM(i){return rB(i).replace(/%3B/gi,";")}function GT(i){return rB(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cM(i){return decodeURIComponent(i)}function sB(i){return cM(i.replace(/\+/g,"%20"))}function oB(i){return`${GT(i.path)}${function k7(i){return Object.keys(i).map(t=>`;${GT(t)}=${GT(i[t])}`).join("")}(i.parameters)}`}const O7=/^[^\/()?;=#]+/;function dM(i){const t=i.match(O7);return t?t[0]:""}const F7=/^[^=?&#]+/,N7=/^[^&#]+/;class U7{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new En([],{}):new En([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[dn]=new En(t,e)),n}parseSegment(){const t=dM(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new he(4009,sM);return this.capture(t),new fy(cM(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=dM(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=dM(this.remaining);r&&(n=r,this.capture(n))}t[cM(e)]=cM(n)}parseQueryParam(t){const e=function L7(i){const t=i.match(F7);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function B7(i){const t=i.match(N7);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=sB(e),s=sB(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=dM(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new he(4010,sM);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=dn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[dn]:new En([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new he(4011,sM)}}function $T(i){return i.segments.length>0?new En([],{[dn]:i}):i}function uM(i){const t={};for(const n of Object.keys(i.children)){const s=uM(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function V7(i){if(1===i.numberOfChildren&&i.children[dn]){const t=i.children[dn];return new En(i.segments.concat(t.segments),t.children)}return i}(new En(i.segments,t))}function Dh(i){return i instanceof Qd}const WT=!1;function z7(i,t,e,n,r){if(0===e.length)return _m(t.root,t.root,t.root,n,r);const s=function uB(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new dB(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ls(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new dB(e,t,n)}(e);return s.toRoot()?_m(t.root,t.root,new En([],{}),n,r):function o(l){const c=function G7(i,t,e,n){if(i.isAbsolute)return new vm(t.root,!0,0);if(-1===n)return new vm(e,e===t.root,0);return function hB(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new he(4005,WT&&"Invalid number of '../'");r=n.segments.length}return new vm(n,!1,r-s)}(e,n+(gy(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,l),u=c.processChildren?ym(c.segmentGroup,c.index,s.commands):jT(c.segmentGroup,c.index,s.commands);return _m(t.root,c.segmentGroup,u,n,r)}(i.snapshot?._lastPathIndex)}function gy(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function _y(i){return"object"==typeof i&&null!=i&&i.outlets}function _m(i,t,e,n,r){let o,s={};n&&ls(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`}),o=i===t?e:cB(i,t,e);const a=$T(uM(o));return new Qd(a,s,r)}function cB(i,t,e){const n={};return ls(i.children,(r,s)=>{n[s]=r===t?e:cB(r,t,e)}),new En(i.segments,n)}class dB{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&gy(n[0]))throw new he(4003,WT&&"Root segment cannot have matrix parameters");const r=n.find(_y);if(r&&r!==QN(n))throw new he(4004,WT&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vm{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function jT(i,t,e){if(i||(i=new En([],{})),0===i.segments.length&&i.hasChildren())return ym(i,t,e);const n=function W7(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],a=e[n];if(_y(a))break;const l=`${a}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!pB(l,c,o))return s;n+=2}else{if(!pB(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new En(i.segments.slice(0,n.pathIndex),{});return s.children[dn]=new En(i.segments.slice(n.pathIndex),i.children),ym(s,0,r)}return n.match&&0===r.length?new En(i.segments,{}):n.match&&!i.hasChildren()?YT(i,t,e):n.match?ym(i,0,r):YT(i,t,e)}function ym(i,t,e){if(0===e.length)return new En(i.segments,{});{const n=function $7(i){return _y(i[0])?i[0].outlets:{[dn]:i}}(e),r={};if(!n[dn]&&i.children[dn]&&1===i.numberOfChildren&&0===i.children[dn].segments.length){const s=ym(i.children[dn],t,e);return new En(i.segments,s.children)}return ls(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=jT(i.children[o],t,s))}),ls(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new En(i.segments,r)}}function YT(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(_y(s)){const l=j7(s.outlets);return new En(n,l)}if(0===r&&gy(e[0])){n.push(new fy(i.segments[t].path,fB(e[0]))),r++;continue}const o=_y(s)?s.outlets[dn]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&gy(a)?(n.push(new fy(o,fB(a))),r+=2):(n.push(new fy(o,{})),r++)}return new En(n,{})}function j7(i){const t={};return ls(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=YT(new En([],{}),0,e))}),t}function fB(i){const t={};return ls(i,(e,n)=>t[n]=`${e}`),t}function pB(i,t,e){return i==e.path&&Gl(t,e.parameters)}const vy="imperative";class $l{constructor(t,e){this.id=t,this.url=e}}class qT extends $l{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Th extends $l{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class hM extends $l{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class fM extends $l{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=16}}class XT extends $l{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Y7 extends $l{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q7 extends $l{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X7 extends $l{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class K7 extends $l{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Z7 extends $l{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Q7{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class J7{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class eq{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tq{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nq{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class iq{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mB{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let oq=(()=>{class i{createUrlTree(e,n,r,s,o,a){return z7(e||n.root,r,s,o,a)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),lq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(t){return oq.\u0275fac(t)},providedIn:"root"}),i})();class gB{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=KT(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=KT(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ZT(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ZT(t,this._root).map(e=>e.value)}}function KT(i,t){if(i===t.value)return t;for(const e of t.children){const n=KT(i,e);if(n)return n}return null}function ZT(i,t){if(i===t.value)return[t];for(const e of t.children){const n=ZT(i,e);if(n.length)return n.unshift(t),n}return[]}class zc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function bm(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class _B extends gB{constructor(t,e){super(t),this.snapshot=e,QT(this,t)}toString(){return this.snapshot.toString()}}function vB(i,t){const e=function cq(i,t){const o=new pM([],{},{},"",{},dn,t,null,i.root,-1,{});return new bB("",new zc(o,[]))}(i,t),n=new At([new fy("",{})]),r=new At({}),s=new At({}),o=new At({}),a=new At(""),l=new xm(n,r,o,a,s,dn,t,e.root);return l.snapshot=e.root,new _B(new zc(l,[]),e)}class xm{constructor(t,e,n,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(Qe(c=>c[hy]))??st(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Qe(t=>gm(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Qe(t=>gm(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yB(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function dq(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class pM{get title(){return this.data?.[hy]}constructor(t,e,n,r,s,o,a,l,c,u,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=u,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class bB extends gB{constructor(t,e){super(e),this.url=t,QT(this,e)}toString(){return xB(this._root)}}function QT(i,t){t.value._routerState=i,t.children.forEach(e=>QT(i,e))}function xB(i){const t=i.children.length>0?` { ${i.children.map(xB).join(", ")} } `:"";return`${i.value}${t}`}function JT(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Gl(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),Gl(t.params,e.params)||i.params.next(e.params),function C7(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Gl(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),Gl(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function eI(i,t){const e=Gl(i.params,t.params)&&function D7(i,t){return Ah(i,t)&&i.every((e,n)=>Gl(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||eI(i.parent,t.parent))}function yy(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function hq(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return yy(i,n,r);return yy(i,n)})}(i,t,e);return new zc(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>yy(i,a)),o}}const n=function fq(i){return new xm(new At(i.url),new At(i.params),new At(i.queryParams),new At(i.fragment),new At(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>yy(i,s));return new zc(n,r)}}const tI="ngNavigationCancelingError";function wB(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=Dh(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=MB(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function MB(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[tI]=!0,n.cancellationCode=t,e&&(n.url=e),n}function CB(i){return SB(i)&&Dh(i.url)}function SB(i){return i&&i[tI]}class pq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new by,this.attachRef=null}}let by=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new pq,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mM=!1;let EB=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=dn,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=Nt(by),this.location=Nt(zr),this.changeDetector=Nt(Xn),this.environmentInjector=Nt(Xa)}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,mM);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,mM);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,mM);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new he(4013,mM);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new mq(e,a,r.injector);if(n&&function gq(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Mi]}),i})();class mq{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===xm?this.route:t===by?this.childContexts:this.parent.get(t,e)}}let nI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["ng-component"]],standalone:!0,features:[N1],decls:1,vars:0,template:function(e,n){1&e&&Pe(0,"router-outlet")},dependencies:[EB],encapsulation:2}),i})();function AB(i,t){return i.providers&&!i._injector&&(i._injector=Rw(i.providers,t,`Route: ${i.path}`)),i._injector??t}function rI(i){const t=i.children&&i.children.map(rI),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==dn&&(e.component=nI),e}function wa(i){return i.outlet||dn}function DB(i,t){const e=i.filter(n=>wa(n)===t);return e.push(...i.filter(n=>wa(n)!==t)),e}function xy(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class xq{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),JT(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=bm(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),ls(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=bm(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=bm(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=bm(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new iq(s.value.snapshot))}),t.children.length&&this.forwardEvent(new tq(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(JT(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),JT(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=xy(r.snapshot),l=a?.get(Fl)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class TB{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class gM{constructor(t,e){this.component=t,this.route=e}}function wq(i,t,e){const n=i._root;return wy(n,t?t._root:null,e,[n.value])}function wm(i,t){const e=Symbol(),n=t.get(i,e);return n===e?"function"!=typeof i||function f0(i){return null!==$f(i)}(i)?t.get(i):i:n}function wy(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=bm(t);return i.children.forEach(o=>{(function Cq(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Sq(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Ah(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Ah(i.url,t.url)||!Gl(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eI(i,t)||!Gl(i.queryParams,t.queryParams);default:return!eI(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new TB(n)):(s.data=o.data,s._resolvedData=o._resolvedData),wy(i,t,s.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new gM(a.outlet.component,o))}else o&&My(t,a,r),r.canActivateChecks.push(new TB(n)),wy(i,null,s.component?a?a.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),ls(s,(o,a)=>My(o,e.getContext(a),r)),r}function My(i,t,e){const n=bm(i),r=i.value;ls(n,(s,o)=>{My(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new gM(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Cy(i){return"function"==typeof i}function sI(i){return i instanceof cy||"EmptyError"===i?.name}const _M=Symbol("INITIAL_VALUE");function Mm(){return bs(i=>Yd(i.map(t=>t.pipe(Di(1),Uo(_M)))).pipe(Qe(t=>{for(const e of t)if(!0!==e){if(e===_M)return _M;if(!1===e||e instanceof Qd)return e}return!0}),Dn(t=>t!==_M),Di(1)))}function IB(i){return function _E(...i){return $b(i)}(Ti(t=>{if(Dh(t))throw wB(0,t)}),Qe(t=>!0===t))}const oI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function RB(i,t,e,n,r){const s=aI(i,t,e);return s.matched?function Hq(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?st(r.map(o=>{const a=wm(o,i);return Zd(function Rq(i){return i&&Cy(i.canMatch)}(a)?a.canMatch(t,e):i.runInContext(()=>a(t,e)))})).pipe(Mm(),IB()):st(!0)}(n=AB(t,n),t,e).pipe(Qe(o=>!0===o?s:{...oI})):st(s)}function aI(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...oI}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||M7)(e,i,t);if(!r)return{...oI};const s={};ls(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function vM(i,t,e,n){if(e.length>0&&function Wq(i,t,e){return e.some(n=>yM(i,t,n)&&wa(n)!==dn)}(i,e,n)){const s=new En(t,function $q(i,t,e,n){const r={};r[dn]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&wa(s)!==dn){const o=new En([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[wa(s)]=o}return r}(i,t,n,new En(e,i.children)));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function jq(i,t,e){return e.some(n=>yM(i,t,n))}(i,e,n)){const s=new En(i.segments,function Gq(i,t,e,n,r){const s={};for(const o of n)if(yM(i,e,o)&&!r[wa(o)]){const a=new En([],{});a._sourceSegment=i,a._segmentIndexShift=t.length,s[wa(o)]=a}return{...r,...s}}(i,t,e,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new En(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function yM(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function kB(i,t,e,n){return!!(wa(i)===n||n!==dn&&yM(t,e,i))&&("**"===i.path||aI(t,i,e).matched)}function PB(i,t,e){return 0===t.length&&!i.children[e]}const bM=!1;class xM{constructor(t){this.segmentGroup=t||null}}class OB{constructor(t){this.urlTree=t}}function Sy(i){return mm(new xM(i))}function FB(i){return mm(new OB(i))}class Kq{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=vM(this.urlTree.root,[],[],this.config).segmentGroup,e=new En(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,dn).pipe(Qe(s=>this.createUrlTree(uM(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Vc(s=>{if(s instanceof OB)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof xM?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,dn).pipe(Qe(r=>this.createUrlTree(uM(r),t.queryParams,t.fragment))).pipe(Vc(r=>{throw r instanceof xM?this.noMatchError(r):r}))}noMatchError(t){return new he(4002,bM)}createUrlTree(t,e,n){const r=$T(t);return new Qd(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Qe(s=>new En([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Oi(r).pipe(Xd(s=>{const o=n.children[s],a=DB(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(Qe(l=>({segment:l,outlet:s})))}),jN((s,o)=>(s[o.outlet]=o.segment,s),{}),YN())}expandSegment(t,e,n,r,s,o){return Oi(n).pipe(Xd(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,s,o).pipe(Vc(c=>{if(c instanceof xM)return st(null);throw c}))),qd(a=>!!a),Vc((a,l)=>{if(sI(a))return PB(e,r,s)?st(new En([],{})):Sy(e);throw a}))}expandSegmentAgainstRoute(t,e,n,r,s,o,a){return kB(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):Sy(e):Sy(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?FB(s):this.lineralizeSegments(n,s).pipe(qi(o=>{const a=new En(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:u}=aI(e,r,s);if(!a)return Sy(e);const h=this.applyRedirectCommands(l,r.redirectTo,u);return r.redirectTo.startsWith("/")?FB(h):this.lineralizeSegments(r,h).pipe(qi(p=>this.expandSegment(t,e,n,p.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=AB(n,t),n.loadChildren?(n._loadedRoutes?st({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(Qe(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new En(r,{})))):st(new En(r,{}))):RB(e,n,r,t).pipe(bs(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(qi(u=>{const h=u.injector??t,p=u.routes,{segmentGroup:m,slicedSegments:g}=vM(e,a,l,p),b=new En(m.segments,m.children);if(0===g.length&&b.hasChildren())return this.expandChildren(h,p,b).pipe(Qe(x=>new En(a,x)));if(0===p.length&&0===g.length)return st(new En(a,{}));const v=wa(n)===s;return this.expandSegment(h,b,p,g,v?dn:s,!0).pipe(Qe(M=>new En(a.concat(M.segments),M.children)))})):Sy(e)))}getChildConfig(t,e,n){return e.children?st({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?st({routes:e._loadedRoutes,injector:e._loadedInjector}):function zq(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?st(!0):st(r.map(o=>{const a=wm(o,i);return Zd(function Aq(i){return i&&Cy(i.canLoad)}(a)?a.canLoad(t,e):i.runInContext(()=>a(t,e)))})).pipe(Mm(),IB())}(t,e,n).pipe(qi(r=>r?this.configLoader.loadChildren(t,e).pipe(Ti(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function qq(i){return mm(MB(bM,3))}())):st({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return st(n);if(r.numberOfChildren>1||!r.children[dn])return t.redirectTo,mm(new he(4e3,bM));r=r.children[dn]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new Qd(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ls(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=e[a]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return ls(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,n,r)}),new En(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new he(4001,bM);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class Qq{}class tX{constructor(t,e,n,r,s,o,a){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=vM(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,dn).pipe(Qe(e=>{if(null===e)return null;const n=new pM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},dn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new zc(n,e),s=new bB(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=yB(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return Oi(Object.keys(n.children)).pipe(Xd(r=>{const s=n.children[r],o=DB(e,r);return this.processSegmentGroup(t,o,s,r)}),jN((r,s)=>r&&s?(r.push(...s),r):null),qN(r=>null!==r),rM(null),YN(),Qe(r=>{if(null===r)return null;const s=NB(r);return function nX(i){i.sort((t,e)=>t.value.outlet===dn?-1:e.value.outlet===dn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return Oi(e).pipe(Xd(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),qd(o=>!!o),Vc(o=>{if(sI(o))return PB(n,r,s)?st([]):st(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!kB(e,n,r,s))return st(null);let o;if("**"===e.path){const a=r.length>0?QN(r).parameters:{},l=UB(n)+r.length;o=st({snapshot:new pM(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VB(e),wa(e),e.component??e._loadedComponent??null,e,BB(n),l,zB(e)),consumedSegments:[],remainingSegments:[]})}else o=RB(n,e,r,t).pipe(Qe(({matched:a,consumedSegments:l,remainingSegments:c,parameters:u})=>{if(!a)return null;const h=UB(n)+l.length;return{snapshot:new pM(l,u,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VB(e),wa(e),e.component??e._loadedComponent??null,e,BB(n),h,zB(e)),consumedSegments:l,remainingSegments:c}}));return o.pipe(bs(a=>{if(null===a)return st(null);const{snapshot:l,consumedSegments:c,remainingSegments:u}=a;t=e._injector??t;const h=e._loadedInjector??t,p=function iX(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:m,slicedSegments:g}=vM(n,c,u,p.filter(v=>void 0===v.redirectTo));if(0===g.length&&m.hasChildren())return this.processChildren(h,p,m).pipe(Qe(v=>null===v?null:[new zc(l,v)]));if(0===p.length&&0===g.length)return st([new zc(l,[])]);const b=wa(e)===s;return this.processSegment(h,p,m,g,b?dn:s).pipe(Qe(v=>null===v?null:[new zc(l,v)]))}))}}function rX(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function NB(i){const t=[],e=new Set;for(const n of i){if(!rX(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=NB(n.children);t.push(new zc(n.value,r))}return t.filter(n=>!e.has(n))}function BB(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function UB(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function VB(i){return i.data||{}}function zB(i){return i.resolve||{}}function HB(i){return"string"==typeof i.title||null===i.title}function lI(i){return bs(t=>{const e=i(t);return e?Oi(e).pipe(Qe(()=>t)):st(t)})}const Cm=new fe("ROUTES");let cI=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Nt(g2)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return st(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=Zd(e.loadComponent()).pipe(Qe($B),Ti(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),Kd(()=>{this.componentLoaders.delete(e)})),r=new $N(n,()=>new Fe).pipe(VT());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return st({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Qe(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,u=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=ZN(l.get(Cm,[],Tt.Self|Tt.Optional)));return{routes:c.map(rI),injector:l}}),Kd(()=>{this.childrenLoaders.delete(n)})),o=new $N(s,()=>new Fe).pipe(VT());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return Zd(e()).pipe(Qe($B),qi(n=>n instanceof DL||Array.isArray(n)?st(n):Oi(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function $B(i){return function hX(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let MM=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Fe,this.configLoader=Nt(cI),this.environmentInjector=Nt(Xa),this.urlSerializer=Nt(py),this.rootContexts=Nt(by),this.navigationId=0,this.afterPreactivation=()=>st(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new J7(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Q7(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e){return this.transitions=new At({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:vy,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Dn(n=>0!==n.id),Qe(n=>({...n,extractedUrl:e.urlHandlingStrategy.extract(n.rawUrl)})),bs(n=>{let r=!1,s=!1;return st(n).pipe(Ti(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),bs(o=>{const a=e.browserUrlTree.toString(),l=!e.navigated||o.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const u="";return this.events.next(new fM(o.id,e.serializeUrl(n.rawUrl),u,0)),e.rawUrlTree=o.rawUrl,o.resolve(null),Ls}if(e.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return WB(o.source)&&(e.browserUrlTree=o.extractedUrl),st(o).pipe(bs(u=>{const h=this.transitions?.getValue();return this.events.next(new qT(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?Ls:Promise.resolve(u)}),function Zq(i,t,e,n){return bs(r=>function Xq(i,t,e,n,r){return new Kq(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(Qe(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),Ti(u=>{this.currentNavigation={...this.currentNavigation,finalUrl:u.urlAfterRedirects},n.urlAfterRedirects=u.urlAfterRedirects}),function oX(i,t,e,n,r){return qi(s=>function eX(i,t,e,n,r,s,o="emptyOnly"){return new tX(i,t,e,n,r,o,s).recognize().pipe(bs(a=>null===a?function Jq(i){return new An(t=>t.error(i))}(new Qq):st(a)))}(i,t,e,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(Qe(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),Ti(u=>{if(n.targetSnapshot=u.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!u.extras.skipLocationChange){const p=e.urlHandlingStrategy.merge(u.urlAfterRedirects,u.rawUrl);e.setBrowserUrl(p,u)}e.browserUrlTree=u.urlAfterRedirects}const h=new Y7(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:u,extractedUrl:h,source:p,restoredState:m,extras:g}=o,b=new qT(u,this.urlSerializer.serialize(h),p,m);this.events.next(b);const v=vB(h,this.rootComponentType).snapshot;return st(n={...o,targetSnapshot:v,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const u="";return this.events.next(new fM(o.id,e.serializeUrl(n.extractedUrl),u,1)),e.rawUrlTree=o.rawUrl,o.resolve(null),Ls}}),Ti(o=>{const a=new q7(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),Qe(o=>n={...o,guards:wq(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Pq(i,t){return qi(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?st({...e,guardsResult:!0}):function Oq(i,t,e,n){return Oi(i).pipe(qi(r=>function Vq(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?st(s.map(a=>{const l=xy(t)??r,c=wm(a,l);return Zd(function Iq(i){return i&&Cy(i.canDeactivate)}(c)?c.canDeactivate(i,t,e,n):l.runInContext(()=>c(i,t,e,n))).pipe(qd())})).pipe(Mm()):st(!0)}(r.component,r.route,e,t,n)),qd(r=>!0!==r,!0))}(o,n,r,i).pipe(qi(a=>a&&function Eq(i){return"boolean"==typeof i}(a)?function Fq(i,t,e,n){return Oi(t).pipe(Xd(r=>dy(function Nq(i,t){return null!==i&&t&&t(new eq(i)),st(!0)}(r.route.parent,n),function Lq(i,t){return null!==i&&t&&t(new nq(i)),st(!0)}(r.route,n),function Uq(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function Mq(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>uy(()=>st(o.guards.map(l=>{const c=xy(o.node)??e,u=wm(l,c);return Zd(function Tq(i){return i&&Cy(i.canActivateChild)}(u)?u.canActivateChild(n,i):c.runInContext(()=>u(n,i))).pipe(qd())})).pipe(Mm())));return st(s).pipe(Mm())}(i,r.path,e),function Bq(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return st(!0);const r=n.map(s=>uy(()=>{const o=xy(t)??e,a=wm(s,o);return Zd(function Dq(i){return i&&Cy(i.canActivate)}(a)?a.canActivate(t,i):o.runInContext(()=>a(t,i))).pipe(qd())}));return st(r).pipe(Mm())}(i,r.route,e))),qd(r=>!0!==r,!0))}(n,s,i,t):st(a)),Qe(a=>({...e,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Ti(o=>{if(n.guardsResult=o.guardsResult,Dh(o.guardsResult))throw wB(0,o.guardsResult);const a=new X7(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Dn(o=>!!o.guardsResult||(e.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),lI(o=>{if(o.guards.canActivateChecks.length)return st(o).pipe(Ti(a=>{const l=new K7(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),bs(a=>{let l=!1;return st(a).pipe(function aX(i,t){return qi(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return st(e);let s=0;return Oi(r).pipe(Xd(o=>function lX(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!HB(r)&&(s[hy]=r.title),function cX(i,t,e,n){const r=function dX(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return st({});const s={};return Oi(r).pipe(qi(o=>function uX(i,t,e,n){const r=xy(t)??n,s=wm(i,r);return Zd(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(i[o],t,e,n).pipe(qd(),Ti(a=>{s[o]=a}))),zT(1),XN(s),Vc(o=>sI(o)?Ls:mm(o)))}(s,i,t,n).pipe(Qe(o=>(i._resolvedData=o,i.data=yB(i,e).resolve,r&&HB(r)&&(i.data[hy]=r.title),null)))}(o.route,n,i,t)),Ti(()=>s++),zT(1),qi(o=>s===r.length?st(e):Ls))})}(e.paramsInheritanceStrategy,this.environmentInjector),Ti({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),Ti(a=>{const l=new Z7(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),lI(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ti(u=>{l.component=u}),Qe(()=>{})));for(const u of l.children)c.push(...a(u));return c};return Yd(a(o.targetSnapshot.root)).pipe(rM(),Di(1))}),lI(()=>this.afterPreactivation()),Qe(o=>{const a=function uq(i,t,e){const n=yy(i,t._root,e?e._root:void 0);return new _B(n,t)}(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return n={...o,targetRouterState:a}}),Ti(o=>{e.currentUrlTree=o.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),e.routerState=o.targetRouterState,"deferred"===e.urlUpdateStrategy&&(o.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,o),e.browserUrlTree=o.urlAfterRedirects)}),((i,t,e)=>Qe(n=>(new xq(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o)),Di(1),Ti({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Th(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),Kd(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),Vc(o=>{if(s=!0,SB(o)){CB(o)||(e.navigated=!0,e.restoreHistory(n,!0));const a=new hM(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),CB(o)){const l=e.urlHandlingStrategy.merge(o.url,e.rawUrlTree),c={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||WB(n.source)};e.scheduleNavigation(l,vy,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{e.restoreHistory(n,!0);const a=new XT(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);this.events.next(a);try{n.resolve(e.errorHandler(o))}catch(l){n.reject(l)}}return Ls}))}))}cancelNavigationTransition(e,n,r){const s=new hM(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function WB(i){return i!==vy}let jB=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===dn);return n}getResolvedTitleForRoute(e){return e.data[hy]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(){return Nt(fX)},providedIn:"root"}),i})(),fX=(()=>{class i extends jB{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(J(NN))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),pX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(){return Nt(gX)},providedIn:"root"}),i})();class mX{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let gX=(()=>{class i extends mX{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const CM=new fe("",{providedIn:"root",factory:()=>({})});let vX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:function(){return Nt(yX)},providedIn:"root"}),i})(),yX=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function bX(i){throw i}function xX(i,t,e){return t.parse("/")}const wX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},MX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Vo=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Nt(ij),this.isNgZoneEnabled=!1,this.options=Nt(CM,{optional:!0})||{},this.errorHandler=this.options.errorHandler||bX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Nt(vX),this.routeReuseStrategy=Nt(pX),this.urlCreationStrategy=Nt(lq),this.titleStrategy=Nt(jB),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=ZN(Nt(Cm,{optional:!0})??[]),this.navigationTransitions=Nt(MM),this.urlSerializer=Nt(py),this.location=Nt(ty),this.isNgZoneEnabled=Nt(at)instanceof at&&at.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Qd,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=vB(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),vy,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,n,e.state)},0)}))}navigateToSyncWithBrowser(e,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(rI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o;let u=null;switch(a){case"merge":u={...this.currentUrlTree.queryParams,...s};break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}return null!==u&&(u=this.removeEmptyProps(u)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,u,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=Dh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,vy,null,n)}navigate(e,n={skipLocationChange:!1}){return function CX(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new he(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...wX}:!1===n?{...MX}:n,Dh(e))return eB(this.currentUrlTree,e,r);const s=this.parseUrl(e);return eB(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,u;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,p)=>{a=h,l=p}),u="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:u,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.go(r,"",s)}}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class YB{}let AX=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Dn(e=>e instanceof Th),Xd(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=Rw(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Oi(r).pipe(_d())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):st(null);const s=r.pipe(qi(o=>null===o?st(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?Oi([s,this.loader.loadComponent(n)]).pipe(_d()):s})}}return i.\u0275fac=function(e){return new(e||i)(J(Vo),J(g2),J(Xa),J(YB),J(cI))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hI=new fe("");let qB=(()=>{class i{constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof qT?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Th&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof mB&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mB(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(e){po()},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();var zo=(()=>((zo=zo||{})[zo.COMPLETE=0]="COMPLETE",zo[zo.FAILED=1]="FAILED",zo[zo.REDIRECTING=2]="REDIRECTING",zo))();const Sm=!1;function Jd(i,t){return{\u0275kind:i,\u0275providers:t}}const fI=new fe("",{providedIn:"root",factory:()=>!1});function KB(){const i=Nt(Li);return t=>{const e=i.get(hm);if(t!==e.components[0])return;const n=i.get(Vo),r=i.get(ZB);1===i.get(pI)&&n.initialNavigation(),i.get(QB,null,Tt.Optional)?.setUpPreloading(),i.get(hI,null,Tt.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const ZB=new fe(Sm?"bootstrap done indicator":"",{factory:()=>new Fe}),pI=new fe(Sm?"initial navigation":"",{providedIn:"root",factory:()=>1});function kX(){let i=[];return i=Sm?[{provide:Mr,multi:!0,useFactory:()=>{const t=Nt(Vo);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function rq(i){if(!("type"in i))return`Unknown Router Event: ${i.constructor.name}`;switch(i.type){case 14:return`ActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state}, shouldActivate: ${i.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 2:return`NavigationCancel(id: ${i.id}, url: '${i.url}')`;case 16:return`NavigationSkipped(id: ${i.id}, url: '${i.url}')`;case 1:return`NavigationEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${i.id}, url: '${i.url}', error: ${i.error})`;case 0:return`NavigationStart(id: ${i.id}, url: '${i.url}')`;case 6:return`ResolveEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 5:return`ResolveStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 10:return`RouteConfigLoadEnd(path: ${i.route.path})`;case 9:return`RouteConfigLoadStart(path: ${i.route.path})`;case 4:return`RoutesRecognized(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 15:return`Scroll(anchor: '${i.anchor}', position: '${i.position?`${i.position[0]}, ${i.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],Jd(1,i)}const QB=new fe(Sm?"router preloader":"");function PX(i){return Jd(0,[{provide:QB,useExisting:AX},{provide:YB,useExisting:i}])}const Ey=!1,JB=new fe(Ey?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),OX=[ty,{provide:py,useClass:HT},Vo,by,{provide:xm,useFactory:function XB(i){return i.routerState.root},deps:[Vo]},cI,Ey?{provide:fI,useValue:!0}:[]];function FX(){return new C2("Router",Vo)}let e3=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[OX,Ey&&n?.enableTracing?kX().\u0275providers:[],{provide:Cm,multi:!0,useValue:e},{provide:JB,useFactory:UX,deps:[[Vo,new _s,new Oo]]},{provide:CM,useValue:n||{}},n?.useHash?{provide:Eh,useClass:$j}:{provide:Eh,useClass:Y2},{provide:hI,useFactory:()=>{const i=Nt(oY),t=Nt(at),e=Nt(CM),n=Nt(MM),r=Nt(py);return e.scrollOffset&&i.setOffset(e.scrollOffset),new qB(r,n,i,t,e)}},n?.preloadingStrategy?PX(n.preloadingStrategy).\u0275providers:[],{provide:C2,multi:!0,useFactory:FX},n?.initialNavigation?VX(n):[],[{provide:t3,useFactory:KB},{provide:M2,multi:!0,useExisting:t3}]]}}static forChild(e){return{ngModule:i,providers:[{provide:Cm,multi:!0,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(J(JB,8))},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[nI]}),i})();function UX(i){if(Ey&&i)throw new he(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function VX(i){return["disabled"===i.initialNavigation?Jd(3,[{provide:Fw,multi:!0,useFactory:()=>{const t=Nt(Vo);return()=>{t.setUpLocationChangeListener()}}},{provide:pI,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?Jd(2,[{provide:pI,useValue:0},{provide:Fw,multi:!0,deps:[Li],useFactory:t=>{const e=t.get(Hj,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const r=t.get(Vo),s=t.get(ZB);(function DX(i,t){i.events.pipe(Dn(e=>e instanceof Th||e instanceof hM||e instanceof XT||e instanceof fM),Qe(e=>e instanceof Th||e instanceof fM?zo.COMPLETE:e instanceof hM&&(0===e.code||1===e.code)?zo.REDIRECTING:zo.FAILED),Dn(e=>e!==zo.REDIRECTING),Di(1)).subscribe(()=>{t()})})(r,()=>{n(!0)}),t.get(MM).afterPreactivation=()=>(n(!0),s.closed?st(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const t3=new fe(Ey?"Router Initializer":""),HX=[];let GX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[e3.forRoot(HX),e3]}),i})();function n3(i,t,e,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(n,r)}function ht(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(l){n3(s,n,r,o,a,"next",l)}function a(l){n3(s,n,r,o,a,"throw",l)}o(void 0)})}}function Yt(i){return null!=i&&"false"!=`${i}`}function xs(i,t=0){return function $X(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function SM(i){return Array.isArray(i)?i:[i]}function fr(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Hc(i){return i instanceof ct?i.nativeElement:i}const WX=["addListener","removeListener"],jX=["addEventListener","removeEventListener"],YX=["on","off"];function Ma(i,t,e,n){if(en(e)&&(n=e,e=void 0),n)return Ma(i,t,e).pipe(UT(n));const[r,s]=function KX(i){return en(i.addEventListener)&&en(i.removeEventListener)}(i)?jX.map(o=>a=>i[o](t,a,e)):function qX(i){return en(i.addListener)&&en(i.removeListener)}(i)?WX.map(r3(i,t)):function XX(i){return en(i.on)&&en(i.off)}(i)?YX.map(r3(i,t)):[];if(!r&&Jg(i))return qi(o=>Ma(o,t,e))(sr(i));if(!r)throw new TypeError("Invalid event target");return new An(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function r3(i,t){return e=>n=>i[e](t,n)}class ZX extends $t{constructor(t,e){super()}schedule(t,e=0){return this}}const EM={setInterval(i,t,...e){const{delegate:n}=EM;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=EM;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class mI extends ZX{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return EM.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&EM.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Qr(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const Ay={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=Ay;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new $t(()=>e?.(r))},requestAnimationFrame(...i){const{delegate:t}=Ay;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=Ay;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},s3={now:()=>(s3.delegate||Date).now(),delegate:void 0};class Dy{constructor(t,e=Dy.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Dy.now=s3.now;class gI extends Dy{constructor(t,e=Dy.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const o3=new class JX extends gI{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class QX extends mI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=Ay.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(Ay.cancelAnimationFrame(e),t._scheduled=void 0)}});let _I,eK=1;const AM={};function a3(i){return i in AM&&(delete AM[i],!0)}const tK={setImmediate(i){const t=eK++;return AM[t]=!0,_I||(_I=Promise.resolve()),_I.then(()=>a3(t)&&i()),t},clearImmediate(i){a3(i)}},{setImmediate:nK,clearImmediate:iK}=tK,DM={setImmediate(...i){const{delegate:t}=DM;return(t?.setImmediate||nK)(...i)},clearImmediate(i){const{delegate:t}=DM;return(t?.clearImmediate||iK)(i)},delegate:void 0},vI=new class sK extends gI{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class rK extends mI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=DM.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(DM.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}}),Ty=new gI(mI),oK=Ty;function TM(i=0,t,e=oK){let n=-1;return null!=t&&(Ru(t)?e=t:n=t),new An(r=>{let s=function lK(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function IM(i,t=Ty){return function aK(i){return zn((t,e)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Fn(e,c=>{n=!0,r=c,s||sr(i(c)).subscribe(s=Fn(e,a,l))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>TM(i,t))}function Ze(i){return zn((t,e)=>{sr(i).subscribe(Fn(e,()=>e.complete(),hs)),!e.closed&&t.subscribe(e)})}let yI;try{yI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{yI=!1}let Em,Ii=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function sY(i){return i===fN}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(J(J1))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const l3=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function c3(){if(Em)return Em;if("object"!=typeof document||!document)return Em=new Set(l3),Em;let i=document.createElement("input");return Em=new Set(l3.filter(t=>(i.setAttribute("type",t),i.type===t))),Em}let Iy,RM,Rh,bI;function Ih(i){return function cK(){if(null==Iy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Iy=!0}))}finally{Iy=Iy||!1}return Iy}()?i:!!i.capture}function d3(){if(null==Rh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Rh=!1,Rh;if("scrollBehavior"in document.documentElement.style)Rh=!0;else{const i=Element.prototype.scrollTo;Rh=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Rh}function Ry(){if("object"!=typeof document||!document)return 0;if(null==RM){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),RM=0,0===i.scrollLeft&&(i.scrollLeft=1,RM=0===i.scrollLeft?1:2),i.remove()}return RM}function kM(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function eu(i){return i.composedPath?i.composedPath()[0]:i.target}function xI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const hK=new fe("cdk-dir-doc",{providedIn:"root",factory:function fK(){return Nt(Ut)}}),pK=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ca=(()=>{class i{constructor(e){this.value="ltr",this.change=new He,e&&(this.value=function mK(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?pK.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(J(hK,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ky=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();const gK=["contentWrapper"],_K=["*"],vK=new fe("VIRTUAL_SCROLL_STRATEGY");let Py=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new Fe,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new An(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(IM(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):st()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Dn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Hc(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Ma(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(J(at),J(Ii),J(Ut,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),u3=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new Fe,this._elementScrolled=new An(o=>this.ngZone.runOutsideAngular(()=>Ma(this.elementRef.nativeElement,"scroll").pipe(Ze(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&0!=Ry()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==Ry()?e.left=e.right:1==Ry()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;d3()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&2==Ry()?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==Ry()?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Py),A(at),A(Ca,8))},i.\u0275dir=xe({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),PM=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new Fe,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(IM(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(J(Ii),J(at),J(Ut,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const h3=new fe("VIRTUAL_SCROLLABLE");let xK=(()=>{class i extends u3{constructor(e,n,r,s){super(e,n,r,s)}measureViewportSize(e){const n=this.elementRef.nativeElement;return"horizontal"===e?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Py),A(at),A(Ca,8))},i.\u0275dir=xe({type:i,features:[rt]}),i})();const MK=typeof requestAnimationFrame<"u"?o3:vI;let CK=(()=>{class i extends xK{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=Yt(e)}constructor(e,n,r,s,o,a,l,c){super(e,a,r,o),this.elementRef=e,this._changeDetectorRef=n,this._scrollStrategy=s,this.scrollable=c,this._platform=Nt(Ii),this._detachedSubject=new Fe,this._renderedRangeSubject=new Fe,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new An(u=>this._scrollStrategy.scrolledIndexChange.subscribe(h=>Promise.resolve().then(()=>this.ngZone.run(()=>u.next(h))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=$t.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Uo(null),IM(0,MK)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(Ze(this._detachedSubject)).subscribe(n=>{const r=n.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function wK(i,t){return i.start==t.start&&i.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,n="to-start"){e=this.appendOnly&&"to-start"===n?0:e;const s="horizontal"==this.orientation,o=s?"X":"Y";let l=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===n&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,n="auto"){const r={behavior:n};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,n="auto"){this._scrollStrategy.scrollToIndex(e,n)}measureScrollOffset(e){let n;return n=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,n(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let n;const r="left",s="right",o="rtl"==this.dir?.value;n="start"==e?o?s:r:"end"==e?o?r:s:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of e)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Xn),A(at),A(vK,8),A(Ca,8),A(Py),A(PM),A(h3,8))},i.\u0275cmp=it({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,n){if(1&e&&qn(gK,7),2&e){let r;St(r=Et())&&(n._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,n){2&e&&nn("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[Sn([{provide:u3,useFactory:(t,e)=>t||e,deps:[[new _s,new xp(h3)],i]}]),rt,N1],ngContentSelectors:_K,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,n){1&e&&(Zi(),$(0,"div",0,1),Bt(2),Y(),Pe(3,"div",2)),2&e&&(G(3),Bo("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})(),Oy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})(),f3=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[ky,Oy,CK,ky,Oy]}),i})();class wI{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class kh extends wI{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class Am extends wI{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class SK extends wI{constructor(t){super(),this.element=t instanceof ct?t.nativeElement:t}}class OM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof kh?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Am?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof SK?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class EK extends OM{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Li.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Dm=(()=>{class i extends OM{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new He,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(A(Fl),A(zr),A(Ut))},i.\u0275dir=xe({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[rt]}),i})(),Ph=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();function Ho(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}const p3=d3();class VK{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=fr(-this._previousScrollPosition.left),t.style.top=fr(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),p3&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),p3&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class zK{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(Dn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class m3{enable(){}disable(){}attach(){}}function CI(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function g3(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class HK{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();CI(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let GK=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new m3,this.close=o=>new zK(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new VK(this._viewportRuler,this._document),this.reposition=o=>new HK(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(e){return new(e||i)(J(Py),J(PM),J(at),J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Pm{constructor(t){if(this.scrollStrategy=new m3,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class $K{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let _3=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WK=(()=>{class i extends _3{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(J(Ut),J(at,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),jK=(()=>{class i extends _3{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=eu(s)},this._clickListener=s=>{const o=eu(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const u=l[c];if(u._outsidePointerEvents.observers.length<1||!u.hasAttached())continue;if(u.overlayElement.contains(o)||u.overlayElement.contains(a))break;const h=u._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(J(Ut),J(Ii),J(at,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),NM=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||xI()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),xI()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(J(Ut),J(Ii))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Ly{constructor(t,e,n,r,s,o,a,l,c,u=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Fe,this._attachments=new Fe,this._detachments=new Fe,this._locationChanges=$t.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Fe,this._outsidePointerEvents=new Fe,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Di(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=fr(this._config.width),t.height=fr(this._config.height),t.minWidth=fr(this._config.minWidth),t.minHeight=fr(this._config.minHeight),t.maxWidth=fr(this._config.maxWidth),t.maxHeight=fr(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const r=SM(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Ze(or(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const v3="cdk-overlay-connected-position-bounding-box",YK=/([A-Za-z%]+)$/;class qK{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Fe,this._resizeSubscription=$t.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(v3),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),u=this._getOverlayFit(c,e,n,a);if(u.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(u,c,n)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Oh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(v3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?o:a}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=b3(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-n.height,g=this._subtractOverflows(s.width,0-o,o+s.width-n.width),b=this._subtractOverflows(s.height,p,m),v=g*b;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:g==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=y3(this._overlayRef.getConfig().minHeight),a=y3(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=b3(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0);let u=0,h=0;return u=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,h=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:u,y:h},{x:t.x+u,y:t.y+h}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new $K(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,a,u,h,p;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const m=Math.min(n.bottom-t.y+n.top,t.y),g=this._lastBoundingBoxSize.height;s=2*m,o=t.y-m,s>g&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-g/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)p=n.width-t.x+this._viewportMargin,u=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)h=t.x,u=n.right-t.x;else{const m=Math.min(n.right-t.x+n.left,t.x),g=this._lastBoundingBoxSize.width;u=2*m,h=t.x-m,u>g&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-g/2)}return{top:o,left:h,bottom:a,right:p,width:u,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=fr(n.height),r.top=fr(n.top),r.bottom=fr(n.bottom),r.width=fr(n.width),r.left=fr(n.left),r.right=fr(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=fr(s)),o&&(r.maxWidth=fr(o))}this._lastBoundingBoxSize=n,Oh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Oh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Oh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const u=this._viewportRuler.getViewportScrollPosition();Oh(n,this._getExactOverlayY(e,t,u)),Oh(n,this._getExactOverlayX(e,t,u))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=fr(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=fr(o.maxWidth):s&&(n.maxWidth="")),Oh(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=fr(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=fr(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:g3(t,n),isOriginOutsideView:CI(t,n),isOverlayClipped:g3(e,n),isOverlayOutsideView:CI(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&SM(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ct)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Oh(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function y3(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(YK);return e&&"px"!==e?null:parseFloat(t)}return i||null}function b3(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const x3="cdk-global-overlay-wrapper";class w3{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(x3),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),u=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",g="",b="";l?b="flex-start":"center"===u?(b="center",p?g=h:m=h):p?"left"===u||"end"===u?(b="flex-end",m=h):("right"===u||"start"===u)&&(b="flex-start",g=h):"left"===u||"start"===u?(b="flex-start",m=h):("right"===u||"end"===u)&&(b="flex-end",g=h),t.position=this._cssPosition,t.marginLeft=l?"0":m,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":g,e.justifyContent=b,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(x3),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let XK=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new w3}flexibleConnectedTo(e){return new qK(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(J(PM),J(Ut),J(Ii),J(NM))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),KK=0,cs=(()=>{class i{constructor(e,n,r,s,o,a,l,c,u,h,p,m){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=u,this._location=h,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Pm(e);return o.direction=o.direction||this._directionality.value,new Ly(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+KK++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(hm)),new EK(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(J(GK),J(NM),J(Fl),J(XK),J(WK),J(Li),J(at),J(Ut),J(Ca),J(ty),J(jK),J(Er,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ZK=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],M3=new fe("cdk-connected-overlay-scroll-strategy");let SI=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(A(ct))},i.\u0275dir=xe({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),i})(),C3=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Yt(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=Yt(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=Yt(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=Yt(e)}get push(){return this._push}set push(e){this._push=Yt(e)}constructor(e,n,r,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=$t.EMPTY,this._attachSubscription=$t.EMPTY,this._detachSubscription=$t.EMPTY,this._positionSubscription=$t.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new He,this.positionChange=new He,this.attach=new He,this.detach=new He,this.overlayKeydown=new He,this.overlayOutsideClick=new He,this._templatePortal=new Am(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ZK);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!Ho(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Pm({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof SI?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(qN(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(A(cs),A(mo),A(zr),A(M3),A(Ca,8))},i.\u0275dir=xe({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Mi]}),i})();const JK={provide:M3,deps:[cs],useFactory:function QK(i){return()=>i.scrollStrategies.reposition()}};let Om=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[cs,JK],imports:[ky,Ph,f3,f3]}),i})();function Gc(i,t=Ty){return zn((e,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,u=t.now();if(u<c)return r=this.schedule(void 0,c-u),void n.add(r);a()}e.subscribe(Fn(n,c=>{s=c,o=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function S3(i){return Dn((t,e)=>i<=e)}function $c(i,t=Na){return i=i??eZ,zn((e,n)=>{let r,s=!0;e.subscribe(Fn(n,o=>{const a=t(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function eZ(i,t){return i===t}let E3=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),tZ=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=Hc(e);return new An(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new Fe,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(J(E3))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),A3=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=Yt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=xs(e),this._subscribe()}constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new He,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Gc(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(A(tZ),A(ct),A(at))},i.\u0275dir=xe({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),EI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[E3]}),i})();const D3=new Set;let Fm,nZ=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):rZ}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function iZ(i){if(!D3.has(i))try{Fm||(Fm=document.createElement("style"),Fm.setAttribute("type","text/css"),document.head.appendChild(Fm)),Fm.sheet&&(Fm.sheet.insertRule(`@media ${i} {body{ }}`,0),D3.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(J(Ii))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function rZ(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let AI=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new Fe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return T3(SM(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Yd(T3(SM(e)).map(o=>this._registerQuery(o).observable));return s=dy(s.pipe(Di(1)),s.pipe(S3(1),Gc(0))),s.pipe(Qe(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),s={observable:new An(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(Uo(n),Qe(({matches:o})=>({query:e,matches:o})),Ze(this._destroySubject)),mql:n};return this._queries.set(e,s),s}}return i.\u0275fac=function(e){return new(e||i)(J(nZ),J(at))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function T3(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function BM(i,t){return(i.getAttribute(t)||"").match(/\S+/g)||[]}const R3="cdk-describedby-message",UM="cdk-describedby-host";let DI=0,lZ=(()=>{class i{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+DI++,this._document=e,this._id=Nt(um)+"-"+DI++}describe(e,n,r){if(!this._canBeDescribed(e,n))return;const s=TI(n,r);"string"!=typeof n?(k3(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,n,r){if(!n||!this._isElementNode(e))return;const s=TI(n,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof n){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${UM}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(UM);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){const r=this._document.createElement("div");k3(r,this._id),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(TI(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const n=BM(e,"aria-describedby").filter(r=>0!=r.indexOf(R3));e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){const r=this._messageRegistry.get(n);(function oZ(i,t,e){const n=BM(i,t);n.some(r=>r.trim()==e.trim())||(n.push(e.trim()),i.setAttribute(t,n.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(UM,this._id),r.referenceCount++}_removeMessageReference(e,n){const r=this._messageRegistry.get(n);r.referenceCount--,function aZ(i,t,e){const r=BM(i,t).filter(s=>s!=e.trim());r.length?i.setAttribute(t,r.join(" ")):i.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(UM)}_isElementDescribedByMessage(e,n){const r=BM(e,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=e.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(e){return new(e||i)(J(Ut),J(Ii))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function TI(i,t){return"string"==typeof i?`${t||""}/${i}`:i}function k3(i,t){i.id||(i.id=`${R3}-${t}-${DI++}`)}class P3{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Fe,this._typeaheadSubscription=$t.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Fe,this.change=new Fe,t instanceof lm&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ti(e=>this._pressedLetters.push(e)),Gc(t),Dn(()=>this._pressedLetters.length>0),Qe(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||Ho(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t);this._activeItem=e[n]??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof lm?this._items.toArray():this._items}}class cZ extends P3{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class O3 extends P3{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let VM=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function uZ(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function dZ(i){try{return i.frameElement}catch{return null}}(function yZ(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===L3(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=L3(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function _Z(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function vZ(i){return!function fZ(i){return function mZ(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function hZ(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function pZ(i){return function gZ(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||F3(i))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(J(Ii))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function F3(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function L3(i){if(!F3(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class bZ{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Di(1)).subscribe(t)}}let II=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new bZ(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(J(VM),J(at),J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function RI(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function kI(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const xZ=new fe("cdk-input-modality-detector-options"),wZ={ignoreKeys:[18,17,224,91,16]},Lm=Ih({passive:!0,capture:!0});let MZ=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new At(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=eu(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(RI(o)?"keyboard":"mouse"),this._mostRecentTarget=eu(o))},this._onTouchstart=o=>{kI(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=eu(o))},this._options={...wZ,...s},this.modalityDetected=this._modality.pipe(S3(1)),this.modalityChanged=this.modalityDetected.pipe($c()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Lm),r.addEventListener("mousedown",this._onMousedown,Lm),r.addEventListener("touchstart",this._onTouchstart,Lm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Lm),document.removeEventListener("mousedown",this._onMousedown,Lm),document.removeEventListener("touchstart",this._onTouchstart,Lm))}}return i.\u0275fac=function(e){return new(e||i)(J(Ii),J(at),J(Ut),J(xZ,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const CZ=new fe("liveAnnouncerElement",{providedIn:"root",factory:function SZ(){return null}}),EZ=new fe("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let AZ=0,PI=(()=>{class i{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+AZ++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const s=n[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(e)&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}}return i.\u0275fac=function(e){return new(e||i)(J(CZ,8),J(at),J(Ut),J(EZ,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const DZ=new fe("cdk-focus-monitor-default-options"),zM=Ih({passive:!0,capture:!0});let Wc=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Fe,this._rootNodeFocusAndBlurListener=a=>{for(let c=eu(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,n=!1){const r=Hc(e);if(!this._platform.isBrowser||1!==r.nodeType)return st(null);const s=function uK(i){if(function dK(){if(null==bI){const i=typeof document<"u"?document.head:null;bI=!(!i||!i.createShadowRoot&&!i.attachShadow)}return bI}()){const t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Fe,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=Hc(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=Hc(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=eu(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,zM),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,zM)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Ze(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,zM),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,zM),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(e){return new(e||i)(J(at),J(Ii),J(MZ),J(Ut,8),J(DZ,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const B3="cdk-high-contrast-black-on-white",U3="cdk-high-contrast-white-on-black",OI="cdk-high-contrast-active";let V3=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=Nt(AI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(OI,B3,U3),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?e.add(OI,B3):2===n&&e.add(OI,U3)}}}return i.\u0275fac=function(e){return new(e||i)(J(Ii),J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),z3=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(J(V3))},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[EI]}),i})();function TZ(i,t){}class HM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let H3=(()=>{class i extends OM{constructor(e,n,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=u=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(u);return this._contentAttached(),h},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let n=null;if("string"==typeof e?n=this._document.querySelector(e):"boolean"==typeof e?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=kM(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=kM();return e===n||e.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=kM())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(II),A(Ut,8),A(HM),A(VM),A(at),A(Ly),A(Wc))},i.\u0275cmp=it({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(e,n){if(1&e&&qn(Dm,7),2&e){let r;St(r=Et())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,n){2&e&&yt("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[rt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&me(0,TZ,0,0,"ng-template",0)},dependencies:[Dm],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class FI{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Fe,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!Ho(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(t),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const G3=new fe("DialogScrollStrategy"),IZ=new fe("DialogData"),RZ=new fe("DefaultDialogConfig"),PZ={provide:G3,deps:[cs],useFactory:function kZ(i){return()=>i.scrollStrategies.block()}};let OZ=0,$3=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,n,r,s,o,a){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Fe,this._afterOpenedAtThisLevel=new Fe,this._ariaHiddenElements=new Map,this.afterAllClosed=uy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Uo(void 0))),this._scrollStrategy=a}open(e,n){(n={...this._defaultOptions||new HM,...n}).id=n.id||"cdk-dialog-"+OZ++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new FI(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(e,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){LI(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){LI(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),LI(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const n=new Pm({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:HM,useValue:r},{provide:FI,useValue:n},{provide:Ly,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=H3;const l=new kh(a,r.viewContainerRef,Li.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,s){if(e instanceof mo){const o=this._createInjector(s,n,r,void 0);let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Am(e,null,a,o))}else{const o=this._createInjector(s,n,r,this._injector),a=r.attachComponentPortal(new kh(e,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(e,n,r,s){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:IZ,useValue:e.data},{provide:FI,useValue:n}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(n,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Ca,null,{optional:!0}))&&a.push({provide:Ca,useValue:{value:e.direction,change:st()}}),Li.create({parent:o||s,providers:a})}_removeOpenDialog(e,n){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(e){return new(e||i)(J(cs),J(Li),J(RZ,8),J(i,12),J(NM),J(G3))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();function LI(i,t){let e=i.length;for(;e--;)t(i[e])}let FZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[$3,PZ],imports:[Om,Ph,z3,Ph]}),i})();const LZ=["text"];function NZ(i,t){if(1&i&&Pe(0,"mat-pseudo-checkbox",6),2&i){const e=pe();V("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function BZ(i,t){1&i&&Pe(0,"mat-pseudo-checkbox",7),2&i&&V("disabled",pe().disabled)}function UZ(i,t){if(1&i&&($(0,"span",8),ze(1),Y()),2&i){const e=pe();G(1),Qi("(",e.group.label,")")}}const VZ=[[["mat-icon"]],"*"],zZ=["mat-icon","*"],GZ=new fe("mat-sanity-checks",{providedIn:"root",factory:function HZ(){return!0}});let $n=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!xI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(J(V3),J(GZ,8),J(Ut))},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[ky,ky]}),i})();function GM(i){return class extends i{get disabled(){return this._disabled}set disabled(t){this._disabled=Yt(t)}constructor(...t){super(...t),this._disabled=!1}}}function Ny(i,t){return class extends i{get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function $M(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Yt(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function NI(i,t=0){return class extends i{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?xs(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}}}function Y3(i){return class extends i{updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}function $Z(i){return class extends i{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new An(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}let X3=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class jZ{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const K3=Ih({passive:!0,capture:!0});class YZ{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=eu(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){const s=this._events.get(e);if(s){const o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,K3)})}removeHandler(t,e,n){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(n),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,K3)))}}const Z3={enterDuration:225,exitDuration:150},Q3=Ih({passive:!0,capture:!0}),J3=["mousedown","touchstart"],eU=["mouseup","mouseleave","touchend","touchcancel"];class Nm{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Hc(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...Z3,...n.animation};n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function XZ(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=a-o+"px",u.style.top=l-o+"px",u.style.height=2*o+"px",u.style.width=2*o+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);const h=window.getComputedStyle(u),m=h.transitionDuration,g="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,b=new jZ(this,u,n,g);u.style.transform="scale3d(1, 1, 1)",b.state=0,n.persistent||(this._mostRecentTransientRipple=b);let v=null;return!g&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>this._finishRippleTransition(b),M=()=>this._destroyRipple(b);u.addEventListener("transitionend",y),u.addEventListener("transitioncancel",M),v={onTransitionEnd:y,onTransitionCancel:M}}),this._activeRipples.set(b,v),(g||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,n={...Z3,...t.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Hc(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,J3.forEach(n=>{Nm._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{eU.forEach(e=>{this._triggerElement.addEventListener(e,this,Q3)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=1,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=RI(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!kI(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(J3.forEach(e=>Nm._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&eU.forEach(e=>t.removeEventListener(e,this,Q3)))}}Nm._eventManager=new YZ;const BI=new fe("mat-ripple-global-options");let Fh=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Nm(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at),A(Ii),A(BI,8),A(Er,8))},i.\u0275dir=xe({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&nn("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Uy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,$n]}),i})(),KZ=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return i.\u0275fac=function(e){return new(e||i)(A(Er,8))},i.\u0275cmp=it({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,n){2&e&&nn("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("mat-pseudo-checkbox-minimal","minimal"===n.appearance)("mat-pseudo-checkbox-full","full"===n.appearance)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,n){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),i})(),tU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n]}),i})();const nU=new fe("MAT_OPTION_PARENT_COMPONENT"),iU=new fe("MatOptgroup");let ZZ=0;class QZ{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let JZ=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=Yt(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+ZZ++,this.onSelectionChange=new He,this._stateChanges=new Fe}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Ho(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new QZ(this,e))}}return i.\u0275fac=function(e){po()},i.\u0275dir=xe({type:i,viewQuery:function(e,n){if(1&e&&qn(LZ,7),2&e){let r;St(r=Et())&&(n._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),Bm=(()=>{class i extends JZ{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Xn),A(nU,8),A(iU,8))},i.\u0275cmp=it({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(e,n){1&e&&Ne("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&e&&(Vl("id",n.id),yt("aria-selected",n.selected)("aria-disabled",n.disabled.toString()),nn("mdc-list-item--selected",n.selected)("mat-mdc-option-multiple",n.multiple)("mat-mdc-option-active",n.active)("mdc-list-item--disabled",n.disabled))},exportAs:["matOption"],features:[rt],ngContentSelectors:zZ,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(e,n){1&e&&(Zi(VZ),me(0,NZ,1,2,"mat-pseudo-checkbox",0),Bt(1),$(2,"span",1,2),Bt(4,1),Y(),me(5,BZ,1,1,"mat-pseudo-checkbox",3),me(6,UZ,2,1,"span",4),Pe(7,"div",5)),2&e&&(V("ngIf",n.multiple),G(5),V("ngIf",!n.multiple&&n.selected&&!n.hideSingleSelectionIndicator),G(1),V("ngIf",n.group&&n.group._inert),G(1),V("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[Fh,vi,KZ],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})(),UI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[Uy,vo,$n,tU]}),i})();class rU{}class nQ{}const jc="*";function Sa(i,t){return{type:7,name:i,definitions:t,options:{}}}function Hr(i,t=null){return{type:4,styles:t,timings:i}}function oU(i,t=null){return{type:2,steps:i,options:t}}function Kn(i){return{type:6,styles:i,offset:null}}function ws(i,t,e){return{type:0,name:i,styles:t,options:e}}function aU(i){return{type:5,steps:i}}function Dr(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function VI(i=null){return{type:9,options:i}}function zI(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function lU(i){Promise.resolve().then(i)}class Vy{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){lU(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class cU{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?lU(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const HI="!";function iQ(i,t){}class WM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const GI="mdc-dialog--open",dU="mdc-dialog--opening",uU="mdc-dialog--closing";let oQ=(()=>{class i extends H3{constructor(e,n,r,s,o,a,l,c){super(e,n,r,s,o,a,l,c),this._animationStateChanged=new He}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(II),A(Ut,8),A(WM),A(VM),A(at),A(Ly),A(Wc))},i.\u0275cmp=it({type:i,selectors:[["ng-component"]],features:[rt],decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})();const hU="--mat-dialog-transition-duration";function fU(i){return null==i?null:"number"==typeof i?i:i.endsWith("ms")?xs(i.substring(0,i.length-2)):i.endsWith("s")?1e3*xs(i.substring(0,i.length-1)):"0"===i?0:null}let aQ=(()=>{class i extends oQ{constructor(e,n,r,s,o,a,l,c,u){super(e,n,r,s,o,a,l,u),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?fU(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?fU(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(hU,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(dU,GI)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(GI),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(GI),this._animationsEnabled?(this._hostElement.style.setProperty(hU,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(uU)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(dU,uU)}_waitForAnimationToComplete(e,n){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(II),A(Ut,8),A(WM),A(VM),A(at),A(Ly),A(Er,8),A(Wc))},i.\u0275cmp=it({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(e,n){2&e&&(Vl("id",n._config.id),yt("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),nn("_mat-animation-noopable",!n._animationsEnabled))},features:[rt],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1),me(2,iQ,0,0,"ng-template",2),Y()())},dependencies:[Dm],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),i})();class zy{constructor(t,e,n){this._ref=t,this._containerInstance=n,this._afterOpened=new Fe,this._beforeClosed=new Fe,this._state=0,this.disableClose=e.disableClose,this.id=t.id,n._animationStateChanged.pipe(Dn(r=>"opened"===r.state),Di(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Dn(r=>"closed"===r.state),Di(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),or(this.backdropClick(),this.keydownEvents().pipe(Dn(r=>27===r.keyCode&&!this.disableClose&&!Ho(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),pU(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Dn(e=>"closing"===e.state),Di(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function pU(i,t,e){return i._closeInteractionType=t,i.close(e)}const $I=new fe("MatMdcDialogData"),lQ=new fe("mat-mdc-dialog-default-options"),mU=new fe("mat-mdc-dialog-scroll-strategy"),dQ={provide:mU,deps:[cs],useFactory:function cQ(i){return()=>i.scrollStrategies.block()}};let uQ=0,hQ=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,n,r,s,o,a,l,c,u,h){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=u,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Fe,this._afterOpenedAtThisLevel=new Fe,this._idPrefix="mat-dialog-",this.dialogConfigClass=WM,this.afterAllClosed=uy(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Uo(void 0))),this._scrollStrategy=a,this._dialog=n.get($3)}open(e,n){let r;(n={...this._defaultOptions||new WM,...n}).id=n.id||`${this._idPrefix}${uQ++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:HM,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return i.\u0275fac=function(e){po()},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),Um=(()=>{class i extends hQ{constructor(e,n,r,s,o,a,l,c){super(e,n,s,a,l,o,zy,aQ,$I,c),this._idPrefix="mat-mdc-dialog-"}}return i.\u0275fac=function(e){return new(e||i)(J(cs),J(Li),J(ty,8),J(lQ,8),J(mU),J(i,12),J(NM),J(Er,8))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),fQ=0,pQ=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=yU(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){pU(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(e){return new(e||i)(A(zy,8),A(ct),A(Um))},i.\u0275dir=xe({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,n){1&e&&Ne("click",function(s){return n._onButtonClick(s)}),2&e&&yt("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Mi]}),i})(),gU=(()=>{class i{constructor(e,n,r){this._dialogRef=e,this._elementRef=n,this._dialog=r,this.id="mat-mdc-dialog-title-"+fQ++}ngOnInit(){this._dialogRef||(this._dialogRef=yU(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(e){return new(e||i)(A(zy,8),A(ct),A(Um))},i.\u0275dir=xe({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(e,n){2&e&&Vl("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),_U=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),i})(),vU=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(e,n){2&e&&nn("mat-mdc-dialog-actions-align-center","center"===n.align)("mat-mdc-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})();function yU(i,t){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(n=>n.id===e.id):null}let bU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[Um,dQ],imports:[FZ,Om,Ph,$n,$n]}),i})();const mQ=["mat-button",""],wU=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],MU=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],_Q=["mat-mini-fab",""],yQ=["mat-icon-button",""],bQ=["*"],xQ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],wQ=Ny(GM($M(class{constructor(i){this._elementRef=i}})));let WI=(()=>{class i extends wQ{constructor(e,n,r,s){super(e),this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=Nt(Wc),this._isFab=!1;const o=e.nativeElement.classList;for(const a of xQ)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...e){return e.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return i.\u0275fac=function(e){po()},i.\u0275dir=xe({type:i,viewQuery:function(e,n){if(1&e&&qn(Fh,5),2&e){let r;St(r=Et())&&(n.ripple=r.first)}},features:[rt]}),i})(),jM=(()=>{class i extends WI{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Ii),A(at),A(Er,8))},i.\u0275cmp=it({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,n){2&e&&(yt("disabled",n.disabled||null),nn("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[rt],attrs:mQ,ngContentSelectors:MU,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(Zi(wU),Pe(0,"span",0),Bt(1),$(2,"span",1),Bt(3,1),Y(),Bt(4,2),Pe(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(nn("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),G(6),V("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Fh],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})();const CQ=new fe("mat-mdc-fab-default-options",{providedIn:"root",factory:CU});function CU(){return{color:"accent"}}const SU=CU();let EU=(()=>{class i extends WI{constructor(e,n,r,s,o){super(e,n,r,s),this._options=o,this._isFab=!0,this._options=this._options||SU,this.color=this.defaultColor=this._options.color||SU.color}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Ii),A(at),A(Er,8),A(CQ,8))},i.\u0275cmp=it({type:i,selectors:[["button","mat-mini-fab",""]],hostVars:7,hostBindings:function(e,n){2&e&&(yt("disabled",n.disabled||null),nn("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[rt],attrs:_Q,ngContentSelectors:MU,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(Zi(wU),Pe(0,"span",0),Bt(1),$(2,"span",1),Bt(3,1),Y(),Bt(4,2),Pe(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(nn("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),G(6),V("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Fh],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),i})(),YM=(()=>{class i extends WI{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Ii),A(at),A(Er,8))},i.\u0275cmp=it({type:i,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,n){2&e&&(yt("disabled",n.disabled||null),nn("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[rt],attrs:yQ,ngContentSelectors:bQ,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(Zi(),Pe(0,"span",0),Bt(1),Pe(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(G(3),V("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Fh],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),qM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,Uy,$n]}),i})();const SQ=["class","dialog"];let AU=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n}}return i.\u0275fac=function(e){return new(e||i)(A(zy),A($I))},i.\u0275cmp=it({type:i,selectors:[["app-confirm",8,"dialog"]],attrs:SQ,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,n){1&e&&($(0,"h1",0),ze(1,"Confirmation"),Y(),$(2,"div",1)(3,"p"),ze(4),Y()(),$(5,"div",2)(6,"button",3),Ne("click",function(){return n.dialogRef.close()}),ze(7,"Cancel"),Y(),$(8,"button",4),ze(9,"Yes"),Y()()),2&e&&(G(4),ci(n.data.text),G(4),V("mat-dialog-close",!0))},dependencies:[jM,pQ,gU,_U,vU]}),i})();function jI(i,t){const e="object"==typeof t;return new Promise((n,r)=>{const s=new ta({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{e?n(t.defaultValue):r(new cy)}});i.subscribe(s)})}let Yc=(()=>{class i{constructor(e){this.ngZone=e,this.openedResource$=new At(null),this.openedResourcePath$=new At(null),eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.on_angular_ready(),setTimeout(ht(function*(){for(;;){if(eel._websocket){eel._websocket.onclose=()=>window.close();break}yield new Promise(n=>setTimeout(n,0))}}),0)}wrapHandler(e){return(...n)=>{try{at.assertInAngularZone(),e.bind(this)(...n)}catch{this.ngZone.run(e,this,n)}}}openFile(e,n=!1){var r=this;return ht(function*(){r.openedResource$.next(null),r.openedResourcePath$.next(null);const s=yield eel.open_file(e,n)();r.openedResource$.next({...s,id:s.name}),r.openedResourcePath$.next(e)})()}openFileWithSystemApp(e){return ht(function*(){yield eel.open_file_with_system_app(e)()})()}retrieveValue(e){return ht(function*(){return yield eel.retrieve_value(e)()})()}runCustomAction(e,n,r){return ht(function*(){return eel.run_custom_action(e,n,r)()})()}saveFile(e){var n=this;return ht(function*(){const r=n.openedResource$.getValue();if(!r)return;const s=yield eel.save_file(n.openedResourcePath$.getValue(),e)();n.openedResource$.next({id:r.id,name:r.name,schema:r.schema,data:s})})()}serializeResource(e,n={}){return ht(function*(){return eel.serialize_resource(e,n)()})()}serializeResourceTmp(e,n,r={}){return ht(function*(){return eel.serialize_resource_tmp(e,n,r)()})()}serializeReversible(e,n){return ht(function*(){return eel.serialize_reversible(e,n)()})()}deserializeResource(e){return ht(function*(){return eel.deserialize_resource(e)()})()}}return i.\u0275fac=function(e){return new(e||i)(J(at))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var YI=Zr(489);const DU=i=>!(!i||"object"!=typeof i),TU=(i={},t,e,n=[])=>{const r=[];if(DU(i)){const s=Object.entries(i);for(let o=0;o<s.length;o+=1){const[a,l]=s[o];if(a===t&&l===e)r.push([i,n]);else if(DU(l)){const c=TU(l,t,e,[...n,a]);r.push(...c)}}}return r};let rl=(()=>{class i{constructor(e){var n=this;this.eelDelegate=e,this._hasUnsavedChanges$=new At(!1),this.resource$=new At(null),this.error$=new At(null),this.customActionRunning$=new At(!1),this.changedDataBlocks={},this.dataBlockChange$=new Fe,this.hideHiddenFields$=new At(!0),this.eelDelegate.openedResource$.subscribe(r=>{if(this.clearUnsavedChanges(),r?.data.error_class)this.error$.next(r),this.resource$.next(null);else if(r?.schema){const s=TU(r.schema,"is_recursive_ref",!0);for(const[o,a]of s){const l=o.block_class_mro;let c=r.schema,u=c.block_class_mro===l?c:void 0;for(const h of a.slice(0,a.length-1))!u&&c[h]?.block_class_mro===l&&(u=c[h]),c=c[h];c[a[a.length-1]]=u}this.resource$.next(r),this.error$.next(null)}else this.resource$.next(null),this.error$.next(null)}),this.dataBlockChange$.subscribe(function(){var r=ht(function*([s,o]){n.changedDataBlocks[s]=o,n.updateUnsavedChanges();const a=yield n.eelDelegate.retrieveValue(s);n.changedDataBlocks[s]==o&&((0,YI.isNumber)(o)?Math.abs(o-a)<1e-10:(0,YI.isEqual)(o,a))&&(delete n.changedDataBlocks[s],n.updateUnsavedChanges())});return function(s){return r.apply(this,arguments)}}())}updateUnsavedChanges(){this._hasUnsavedChanges$.next(Object.keys(this.changedDataBlocks).length>0)}get hasUnsavedChanges$(){return this._hasUnsavedChanges$.asObservable()}get hasUnsavedChanges(){return this._hasUnsavedChanges$.getValue()}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(e=>{delete this.changedDataBlocks[e]}),this.updateUnsavedChanges()}processExternalChanges(e,n){var r=this;return ht(function*(){r.customActionRunning$.next(!0);const s=yield n();if(s.error_class)throw r.customActionRunning$.next(!1),s;if(r.resource$.getValue().id===e)r.resource$.getValue().data=s;else{let o=e.substring(r.resource$.getValue().id.length).replace("__","/").split("/").filter(c=>c),a=r.resource$.getValue().data;for(const c of o.slice(0,o.length-1))a=a[c]||a[+c];let l=o[o.length-1];void 0===a[l]&&void 0!==a[+l]&&(l=+l),a[l]=s}r.clearUnsavedChanges(),r.changedDataBlocks.__has_external_changes__=1,r.updateUnsavedChanges(),r.customActionRunning$.next(!1)})()}runCustomAction(e,n,r){var s=this;return ht(function*(){return s.processExternalChanges(e,()=>s.eelDelegate.runCustomAction(e,n,r))})()}deserializeResource(e){var n=this;return ht(function*(){return n.processExternalChanges(e,()=>n.eelDelegate.deserializeResource(e))})()}reloadResource(){var e=this;return ht(function*(){const n=e.eelDelegate.openedResourcePath$.getValue();n&&e.eelDelegate.openFile(n,!0).then()})()}saveResource(){var e=this;return ht(function*(){const n=Object.entries(e.changedDataBlocks).filter(([r,s])=>"__has_external_changes__"!=r);yield e.eelDelegate.saveFile(n.map(([r,s])=>({id:r,value:s}))),e.clearUnsavedChanges()})()}}return i.\u0275fac=function(e){return new(e||i)(J(Yc))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function EQ(i,t){if(1&i){const e=oi();$(0,"div",2)(1,"button",3),Ne("click",function(){return an(e),ln(pe().action())}),ze(2),Y()()}if(2&i){const e=pe();G(2),Qi(" ",e.data.action," ")}}const AQ=["label"];function DQ(i,t){}const TQ=Math.pow(2,31)-1;class qI{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Fe,this._afterOpened=new Fe,this._onAction=new Fe,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,TQ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const IU=new fe("MatSnackBarData");class XM{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let IQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),i})(),RQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),i})(),kQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),i})(),PQ=(()=>{class i{constructor(e,n){this.snackBarRef=e,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(e){return new(e||i)(A(qI),A(IU))},i.\u0275cmp=it({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,n){1&e&&($(0,"div",0),ze(1),Y(),me(2,EQ,3,1,"div",1)),2&e&&(G(1),Qi(" ",n.data.message,"\n"),G(1),V("ngIf",n.hasAction))},dependencies:[vi,jM,IQ,RQ,kQ],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),i})();const OQ={snackBarState:Sa("state",[ws("void, hidden",Kn({transform:"scale(0.8)",opacity:0})),ws("visible",Kn({transform:"scale(1)",opacity:1})),Dr("* => visible",Hr("150ms cubic-bezier(0, 0, 0.2, 1)")),Dr("* => void, * => hidden",Hr("75ms cubic-bezier(0.4, 0.0, 1, 1)",Kn({opacity:0})))])};let FQ=0,LQ=(()=>{class i extends OM{constructor(e,n,r,s,o){super(),this._ngZone=e,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._document=Nt(Ut),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Fe,this._onExit=new Fe,this._onEnter=new Fe,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+FQ++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}onAnimationEnd(e){const{fromState:n,toState:r}=e;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Di(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>e.classList.add(r)):e.classList.add(n)),this._exposeToModals()}_exposeToModals(){const e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const s=n[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?-1===o.indexOf(e)&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const n=e.getAttribute("aria-owns");if(n){const r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),n.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(e){return new(e||i)(A(at),A(ct),A(Xn),A(Ii),A(XM))},i.\u0275dir=xe({type:i,viewQuery:function(e,n){if(1&e&&qn(Dm,7),2&e){let r;St(r=Et())&&(n._portalOutlet=r.first)}},features:[rt]}),i})(),NQ=(()=>{class i extends LQ{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,n="mdc-snackbar__label";e.classList.toggle(n,!e.querySelector(`.${n}`))}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275cmp=it({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,n){if(1&e&&qn(AQ,7),2&e){let r;St(r=Et())&&(n._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,n){1&e&&M1("@state.done",function(s){return n.onAnimationEnd(s)}),2&e&&Ew("@state",n._animationState)},features:[rt],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1,2)(3,"div",3),me(4,DQ,0,0,"ng-template",4),Y(),Pe(5,"div"),Y()()),2&e&&(G(5),yt("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[Dm],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px));height:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[OQ.snackBarState]}}),i})(),RU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[Om,Ph,vo,qM,$n,$n]}),i})();const kU=new fe("mat-snack-bar-default-options",{providedIn:"root",factory:function BQ(){return new XM}});let UQ=(()=>{class i{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,n,r,s,o,a){this._overlay=e,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){const s={...this._defaultConfig,...r};return s.data={message:e,action:n},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){const s=Li.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:XM,useValue:n}]}),o=new kh(this.snackBarContainerComponent,n.viewContainerRef,s),a=e.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(e,n){const r={...new XM,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new qI(o,s);if(e instanceof mo){const l=new Am(e,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new kh(e,void 0,l),u=o.attachComponentPortal(c);a.instance=u.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Ze(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration))}_createOverlay(e){const n=new Pm;n.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,a=!o&&"center"!==e.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){return Li.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:qI,useValue:n},{provide:IU,useValue:e.data}]})}}return i.\u0275fac=function(e){return new(e||i)(J(cs),J(PI),J(Li),J(AI),J(i,12),J(kU))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),PU=(()=>{class i extends UQ{constructor(e,n,r,s,o,a){super(e,n,r,s,o,a),this.simpleSnackBarComponent=PQ,this.snackBarContainerComponent=NQ,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return i.\u0275fac=function(e){return new(e||i)(J(cs),J(PI),J(Li),J(AI),J(i,12),J(kU))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:RU}),i})();const VQ=["*",[["mat-toolbar-row"]]],zQ=["*","mat-toolbar-row"],HQ=Ny(class{constructor(i){this._elementRef=i}});let GQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),$Q=(()=>{class i extends HQ{constructor(e,n,r){super(e),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Ii),A(Ut))},i.\u0275cmp=it({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Ni(r,GQ,5),2&e){let s;St(s=Et())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&nn("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[rt],ngContentSelectors:zQ,decls:2,vars:0,template:function(e,n){1&e&&(Zi(VQ),Bt(0),Bt(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),WQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,$n]}),i})(),jQ=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=Yt(e)}get inset(){return this._inset}set inset(e){this._inset=Yt(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(yt("aria-orientation",n.vertical?"vertical":"horizontal"),nn("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),OU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,$n]}),i})();const YQ=["tooltip"],FU=new fe("mat-tooltip-scroll-strategy"),KQ={provide:FU,deps:[cs],useFactory:function XQ(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},QQ=new fe("mat-tooltip-default-options",{providedIn:"root",factory:function ZQ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),LU="tooltip-panel",NU=Ih({passive:!0});let rJ=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Yt(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Yt(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=xs(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=xs(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,r,s,o,a,l,c,u,h,p,m){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=h,this._defaultOptions=p,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Fe,this._scrollStrategy=u,this._document=m,p&&(p.position&&(this.position=p.position),p.positionAtOrigin&&(this.positionAtOrigin=p.positionAtOrigin),p.touchGestures&&(this.touchGestures=p.touchGestures)),h.change.pipe(Ze(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Ze(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,NU)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(n);this._detach(),this._portal=this._portal||new kh(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Ze(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(e)}hide(e=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof ct)return this._overlayRef;this._detach()}const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Ze(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${LU}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Ze(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Ze(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Ze(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!Ho(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const n=e.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Di(1),Ze(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){const{overlayY:n,originX:r,originY:s}=e;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${LU}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let n;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(n=e),this.show(void 0,n)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const n=e.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,NU)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const n=this._elementRef.nativeElement,r=n.style;("on"===e||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(e){po()},i.\u0275dir=xe({type:i,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Ms=(()=>{class i extends rJ{constructor(e,n,r,s,o,a,l,c,u,h,p,m){super(e,n,r,s,o,a,l,c,u,h,p,m),this._tooltipComponent=oJ,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const r=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=r?-8:8:"end"===e.originX&&(e.offsetX=r?8:-8),e}}return i.\u0275fac=function(e){return new(e||i)(A(cs),A(ct),A(Py),A(zr),A(at),A(Ii),A(lZ),A(Wc),A(FU),A(Ca,8),A(QQ,8),A(Ut))},i.\u0275dir=xe({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[rt]}),i})(),sJ=(()=>{class i{constructor(e,n){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Fe,this._animationsDisabled="NoopAnimations"===n}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(e?s:r),n.classList.add(e?r:s),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return i.\u0275fac=function(e){return new(e||i)(A(Xn),A(Er,8))},i.\u0275dir=xe({type:i}),i})(),oJ=(()=>{class i extends sJ{constructor(e,n,r){super(e,r),this._elementRef=n,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}}return i.\u0275fac=function(e){return new(e||i)(A(Xn),A(ct),A(Er,8))},i.\u0275cmp=it({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(e,n){if(1&e&&qn(YQ,7),2&e){let r;St(r=Et())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,n){1&e&&Ne("mouseleave",function(s){return n._handleMouseLeave(s)}),2&e&&Bo("zoom",n.isVisible()?1:null)},features:[rt],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(e,n){1&e&&($(0,"div",0,1),Ne("animationend",function(s){return n._handleAnimationEnd(s)}),$(2,"div",2),ze(3),Y()()),2&e&&(nn("mdc-tooltip--multiline",n._isMultiline),V("ngClass",n.tooltipClass),G(3),ci(n.message))},dependencies:[pm],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),i})(),BU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[KQ],imports:[z3,vo,Om,$n,$n,Oy]}),i})();function UU(...i){const t=ku(i),{args:e,keys:n}=zN(i),r=new An(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let u=0;u<o;u++){let h=!1;sr(e[u]).subscribe(Fn(s,p=>{h||(h=!0,c--),a[u]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(n?HN(n,a):a),s.complete())}))}});return t?r.pipe(UT(t)):r}class XI{}class nu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{let r;if(r="string"==typeof n?[n]:"number"==typeof n?[n.toString()]:n.map(s=>s.toString()),r.length>0){const s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof nu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new nu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof nu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class aJ{encodeKey(t){return zU(t)}encodeValue(t){return zU(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const cJ=/%(\d[a-f0-9])/gi,dJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function zU(i){return encodeURIComponent(i).replace(cJ,(t,e)=>dJ[e]??t)}function KM(i){return`${i}`}class iu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new aJ,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lJ(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(KM):[KM(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new iu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(KM(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(KM(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class uJ{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function HU(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function GU(i){return typeof Blob<"u"&&i instanceof Blob}function $U(i){return typeof FormData<"u"&&i instanceof FormData}class Hy{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function hJ(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new nu),this.context||(this.context=new uJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new iu,this.urlWithParams=e}serializeBody(){return null===this.body?null:HU(this.body)||GU(this.body)||$U(this.body)||function fJ(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof iu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||$U(this.body)?null:GU(this.body)?this.body.type||null:HU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof iu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const u=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),c)),new Hy(e,n,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}}var ds=(()=>((ds=ds||{})[ds.Sent=0]="Sent",ds[ds.UploadProgress=1]="UploadProgress",ds[ds.ResponseHeader=2]="ResponseHeader",ds[ds.DownloadProgress=3]="DownloadProgress",ds[ds.Response=4]="Response",ds[ds.User=5]="User",ds))();class pJ{constructor(t,e=200,n="OK"){this.headers=t.headers||new nu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class KI extends pJ{constructor(t={}){super(t),this.type=ds.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new KI({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function ZI(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let QI=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof Hy)s=e;else{let l,c;l=r.headers instanceof nu?r.headers:new nu(r.headers),r.params&&(c=r.params instanceof iu?r.params:new iu({fromObject:r.params})),s=new Hy(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=st(s).pipe(Xd(l=>this.handler.handle(l)));if(e instanceof Hy||"events"===r.observe)return o;const a=o.pipe(Dn(l=>l instanceof KI));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Qe(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Qe(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Qe(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Qe(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new iu).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,ZI(r,n))}post(e,n,r={}){return this.request("POST",e,ZI(r,n))}put(e,n,r={}){return this.request("PUT",e,ZI(r,n))}}return i.\u0275fac=function(e){return new(e||i)(J(XI))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();const AJ=["*"];let QM;function Gy(i){return function DJ(){if(void 0===QM&&(QM=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(QM=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return QM}()?.createHTML(i)||i}function QU(i){return Error(`Unable to find icon with the name "${i}"`)}function JU(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function eV(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Lh{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let JM=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new Lh(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const o=this._sanitizer.sanitize(Gn.HTML,r);if(!o)throw eV(r);const a=Gy(o);return this._addSvgIconConfig(e,n,new Lh("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Lh(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(Gn.HTML,n);if(!s)throw eV(n);const o=Gy(s);return this._addSvgIconSetConfig(e,new Lh("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(Gn.RESOURCE_URL,e);if(!n)throw JU(e);const r=this._cachedIconsByUrl.get(n);return r?st(eC(r)):this._loadSvgIconFromConfig(new Lh(e,null)).pipe(Ti(s=>this._cachedIconsByUrl.set(n,s)),Qe(s=>eC(s)))}getNamedSvgIcon(e,n=""){const r=tV(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):mm(QU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?st(eC(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Qe(n=>eC(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?st(r):UU(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Vc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Gn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),st(null)})))).pipe(Qe(()=>{const o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw QU(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ti(n=>e.svgText=n),Qe(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?st(null):this._fetchIcon(e).pipe(Ti(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Gy("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(Gy("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function TJ(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Gn.RESOURCE_URL,n);if(!o)throw JU(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Qe(c=>Gy(c)),Kd(()=>this._inProgressUrlFetches.delete(o)),Ou());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(tV(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return RJ(s)?new Lh(s.url,null,s.options):new Lh(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(J(QI,8),J(BT),J(Ut,8),J(Za))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function eC(i){return i.cloneNode(!0)}function tV(i,t){return i+":"+t}function RJ(i){return!(!i.url||!i.options)}const kJ=Ny(class{constructor(i){this._elementRef=i}}),PJ=new fe("MAT_ICON_DEFAULT_OPTIONS"),OJ=new fe("mat-icon-location",{providedIn:"root",factory:function FJ(){const i=Nt(Ut),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),nV=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],LJ=nV.map(i=>`[${i}]`).join(", "),NJ=/^url\(['"]?#(.*?)['"]?\)$/;let eR=(()=>{class i extends kJ{get inline(){return this._inline}set inline(e){this._inline=Yt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,s,o,a){super(e),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=$t.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(LJ),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)nV.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(NJ):null;if(c){let u=r.get(a);u||(u=[],r.set(a,u)),u.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Di(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(JM),fa("aria-hidden"),A(OJ),A(Za),A(PJ,8))},i.\u0275cmp=it({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,n){2&e&&(yt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),nn("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[rt],ngContentSelectors:AJ,decls:1,vars:0,template:function(e,n){1&e&&(Zi(),Bt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),iV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,$n]}),i})(),rV=(()=>{class i{constructor(e){this.viewContainerRef=e}}return i.\u0275fac=function(e){return new(e||i)(A(zr))},i.\u0275dir=xe({type:i,selectors:[["","dataBlockUI",""]]}),i})(),BJ=(()=>{class i{constructor(){this.resource=null,this.name="",this.resourceDescription="",this.changed=new He}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-fallback-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:2,vars:3,consts:[["matTooltipPosition","above",3,"matTooltip"]],template:function(e,n){1&e&&($(0,"p",0),ze(1),Y()),2&e&&(V("matTooltip",n.resourceDescription),G(1),im("",null==n.resource?null:n.resource.name,"> GUI component for block ",((null==n.resource||null==n.resource.schema?null:n.resource.schema.block_class_mro)||"").split("__")[0]," not implemented :(\n"))},dependencies:[Ms],changeDetection:0}),i})();function UJ(i,t){if(1&i&&($(0,"h2",4),ze(1),Y()),2&i){const e=pe();V("matTooltip",e.resourceDescription),G(1),ci(e.name)}}function VJ(i,t){1&i&&Pe(0,"app-block-actions",5),2&i&&V("resource",pe().resource)}const zJ=function(i,t,e,n){return{id:i,name:t,data:e,schema:n}};function HJ(i,t){if(1&i&&Pe(0,"app-editor",7),2&i){const e=pe().$implicit,n=pe();V("resource",LL(3,zJ,n.resource.id+(n.resource.id.includes("__")?"/":"__")+e.key,e.key,null==n.data?null:n.data[e.key],null==n.schema?null:n.schema.fields[e.index].schema))("resourceDescription",(null==n.schema?null:n.schema.fields[e.index].description)||"")("disabled",n.disabled||!(null==n.schema||!n.schema.fields[e.index].is_programmatic))}}function GJ(i,t){if(1&i&&(os(0),me(1,HJ,1,8,"app-editor",6),Ht(2,"async"),as()),2&i){const e=t.$implicit,n=pe();G(1),V("ngIf",!(Zt(2,1,n.main.hideHiddenFields$)&&(null!=n.schema&&n.schema.fields[e.index].is_unknown||void 0!==(null==n.schema?null:n.schema.fields[e.index].schema.required_value)||null!=n.schema&&n.schema.fields[e.index].is_programmatic)))}}let qc=(()=>{class i{constructor(e){this.main=e,this.resource=null,this.resourceDescription="",this.hideBlockActions=!1,this.disabled=!1,this.fieldWhitelist=null,this.fieldBlacklist=null,this.changed=new He,this.destroyed$=new Fe}get name(){return this.resource&&this.resource.name}get data(){return this.resource&&this.resource.data}get schema(){return this.resource&&this.resource.schema}get fieldKeys(){let e=this.schema?.fields.map((n,r)=>({index:r,key:n.name}))||[];return this.fieldWhitelist?e=e.filter(({key:n})=>this.fieldWhitelist?.includes(n)):this.fieldBlacklist&&(e=e.filter(({key:n})=>!this.fieldBlacklist?.includes(n))),e}fieldTrackBy(e,n){return n.index}ngAfterViewInit(){var e=this;this.main.dataBlockChange$.pipe(Ze(this.destroyed$),Dn(([n,r])=>!!this.resource&&n.startsWith(this.resource.id)&&!n.substring(this.resource.id.length+1).includes("/"))).subscribe(function(){var n=ht(function*([r,s]){const o=r.substring(e.resource.id.length+1);e.data[o]=s});return function(r){return n.apply(this,arguments)}}())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(rl))},i.\u0275cmp=it({type:i,selectors:[["app-compound-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled",fieldWhitelist:"fieldWhitelist",fieldBlacklist:"fieldBlacklist"},outputs:{changed:"changed"},decls:5,vars:6,consts:[["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"resource",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf","ngForTrackBy"],["matTooltipPosition","above",3,"matTooltip"],[3,"resource"],[3,"resource","resourceDescription","disabled",4,"ngIf"],[3,"resource","resourceDescription","disabled"]],template:function(e,n){if(1&e&&(me(0,UJ,2,2,"h2",0),Ht(1,"async"),me(2,VJ,1,1,"app-block-actions",1),$(3,"div",2),me(4,GJ,3,3,"ng-container",3),Y()),2&e){let r;V("ngIf",n.name&&n.name!=(null==(r=Zt(1,4,n.main.resource$))?null:r.name)),G(2),V("ngIf",!n.hideBlockActions),G(2),V("ngForOf",n.fieldKeys)("ngForTrackBy",n.fieldTrackBy)}},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}"],changeDetection:0}),i})(),sV=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(A(_a),A(ct))},i.\u0275dir=xe({type:i}),i})(),Nh=(()=>{class i extends sV{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,features:[rt]}),i})();const yo=new fe("NgValueAccessor"),WJ={provide:yo,useExisting:Ln(()=>Wl),multi:!0},YJ=new fe("CompositionEventMode");let Wl=(()=>{class i extends sV{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function jJ(){const i=Nc()?Nc().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(A(_a),A(ct),A(YJ,8))},i.\u0275dir=xe({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&Ne("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Sn([WJ]),rt]}),i})();const qJ=!1;function ru(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function aV(i){return null!=i&&"number"==typeof i.length}const Gr=new fe("NgValidators"),su=new fe("NgAsyncValidators"),XJ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class sl{static min(t){return lV(t)}static max(t){return cV(t)}static required(t){return function dV(i){return ru(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function uV(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function hV(i){return ru(i.value)||XJ.test(i.value)?null:{email:!0}}(t)}static minLength(t){return fV(t)}static maxLength(t){return pV(t)}static pattern(t){return function mV(i){if(!i)return tC;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(ru(n.value))return null;const r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return xV(t)}static composeAsync(t){return wV(t)}}function lV(i){return t=>{if(ru(t.value)||ru(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function cV(i){return t=>{if(ru(t.value)||ru(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function fV(i){return t=>ru(t.value)||!aV(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function pV(i){return t=>aV(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function tC(i){return null}function gV(i){return null!=i}function _V(i){const t=$v(i)?Oi(i):i;if(qJ&&!w1(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof i&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new he(-1101,e)}return t}function vV(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function yV(i,t){return t.map(e=>e(i))}function bV(i){return i.map(t=>function KJ(i){return!i.validate}(t)?t:e=>t.validate(e))}function xV(i){if(!i)return null;const t=i.filter(gV);return 0==t.length?null:function(e){return vV(yV(e,t))}}function tR(i){return null!=i?xV(bV(i)):null}function wV(i){if(!i)return null;const t=i.filter(gV);return 0==t.length?null:function(e){return UU(yV(e,t).map(_V)).pipe(Qe(vV))}}function nR(i){return null!=i?wV(bV(i)):null}function MV(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function CV(i){return i._rawValidators}function SV(i){return i._rawAsyncValidators}function iR(i){return i?Array.isArray(i)?i:[i]:[]}function nC(i,t){return Array.isArray(i)?i.includes(t):i===t}function EV(i,t){const e=iR(t);return iR(i).forEach(r=>{nC(e,r)||e.push(r)}),e}function AV(i,t){return iR(t).filter(e=>!nC(i,e))}class DV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=tR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=nR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class to extends DV{get formDirective(){return null}get path(){return null}}class jl extends DV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class TV{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Xc=(()=>{class i extends TV{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(A(jl,2))},i.\u0275dir=xe({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&nn("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[rt]}),i})(),rR=(()=>{class i extends TV{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(A(to,10))},i.\u0275dir=xe({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&nn("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[rt]}),i})();function IV(i,t){return i?`with name: '${t}'`:`at index: ${t}`}const aR=!1,$y="VALID",rC="INVALID",Hm="PENDING",Wy="DISABLED";function lR(i){return(sC(i)?i.validators:i)||null}function cR(i,t){return(sC(t)?t.asyncValidators:i)||null}function sC(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function RV(i,t,e){const n=i.controls;if(!(t?Object.keys(n):n).length)throw new he(1e3,aR?function eee(i){return`\n    There are no form controls registered with this ${i?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!n[e])throw new he(1001,aR?function tee(i,t){return`Cannot find form control ${IV(i,t)}`}(t,e):"")}function kV(i,t,e){i._forEachChild((n,r)=>{if(void 0===e[r])throw new he(1002,aR?function nee(i,t){return`Must supply a value for form control ${IV(i,t)}`}(t,r):"")})}class oC{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===$y}get invalid(){return this.status===rC}get pending(){return this.status==Hm}get disabled(){return this.status===Wy}get enabled(){return this.status!==Wy}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(EV(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(EV(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(AV(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(AV(t,this._rawAsyncValidators))}hasValidator(t){return nC(this._rawValidators,t)}hasAsyncValidator(t){return nC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Hm,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Wy,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=$y,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$y||this.status===Hm)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wy:$y}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Hm,this._hasOwnPendingAsyncValidator=!0;const e=_V(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?Wy:this.errors?rC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hm)?Hm:this._anyControlsHaveStatus(rC)?rC:$y}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){sC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function iee(i){return Array.isArray(i)?tR(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function ree(i){return Array.isArray(i)?nR(i):i||null}(this._rawAsyncValidators)}}class Gm extends oC{constructor(t,e,n){super(lR(e),cR(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){kV(this,!0,t),Object.keys(t).forEach(n=>{RV(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{const r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class PV extends Gm{}const Bh=new fe("CallSetDisabledState",{providedIn:"root",factory:()=>jy}),jy="always";function aC(i,t){return[...t.path,i]}function Yy(i,t,e=jy){dR(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function oee(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&OV(i,t)})}(i,t),function lee(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function aee(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&OV(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function see(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function lC(i,t,e=!0){const n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),dC(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function cC(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function dR(i,t){const e=CV(i);null!==t.validator?i.setValidators(MV(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=SV(i);null!==t.asyncValidator?i.setAsyncValidators(MV(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();cC(t._rawValidators,r),cC(t._rawAsyncValidators,r)}function dC(i,t){let e=!1;if(null!==i){if(null!==t.validator){const r=CV(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(null!==t.asyncValidator){const r=SV(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}const n=()=>{};return cC(t._rawValidators,n),cC(t._rawAsyncValidators,n),e}function OV(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function FV(i,t){dR(i,t)}function hR(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function LV(i,t){i._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function fR(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Wl?e=s:function uee(i){return Object.getPrototypeOf(i.constructor)===Nh}(s)?n=s:r=s}),r||n||e||null}const fee={provide:to,useExisting:Ln(()=>Xy)},qy=(()=>Promise.resolve())();let Xy=(()=>{class i extends to{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new He,this.form=new Gm({},tR(e),nR(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){qy.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Yy(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){qy.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){qy.then(()=>{const n=this._findContainer(e.path),r=new Gm({});FV(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){qy.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){qy.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,LV(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(A(Gr,10),A(su,10),A(Bh,8))},i.\u0275dir=xe({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&Ne("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Sn([fee]),rt]}),i})();function NV(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function BV(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Yl=class extends oC{constructor(t=null,e,n){super(lR(e),cR(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sC(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=BV(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){NV(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){NV(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){BV(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},gee={provide:jl,useExisting:Ln(()=>ou)},zV=(()=>Promise.resolve())();let ou=(()=>{class i extends jl{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new Yl,this._registered=!1,this.update=new He,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=fR(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),hR(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Yy(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){zV.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&function fm(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);zV.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?aC(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(A(to,9),A(Gr,10),A(su,10),A(yo,10),A(Xn,8),A(Bh,8))},i.\u0275dir=xe({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Sn([gee]),rt,Mi]}),i})(),pR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const _ee={provide:yo,useExisting:Ln(()=>Uh),multi:!0};let Uh=(()=>{class i extends Nh{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&Ne("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[Sn([_ee]),rt]}),i})(),HV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();const mR=new fe("NgModelWithFormControlWarning"),wee={provide:to,useExisting:Ln(()=>Vh)};let Vh=(()=>{class i extends to{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return Yy(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){lC(e.control||null,e,!1),function hee(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,LV(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(lC(n||null,e),(i=>i instanceof Yl)(r)&&(Yy(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);FV(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function cee(i,t){return dC(i,t)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dR(this.form,this),this._oldForm&&dC(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(A(Gr,10),A(su,10),A(Bh,8))},i.\u0275dir=xe({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&Ne("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Sn([wee]),rt,Mi]}),i})();const See={provide:jl,useExisting:Ln(()=>uC)};let uC=(()=>{class i extends jl{set isDisabled(e){}constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new He,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=fR(0,s)}ngOnChanges(e){this._added||this._setUpControl(),hR(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return aC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(A(to,13),A(Gr,10),A(su,10),A(yo,10),A(mR,8))},i.\u0275dir=xe({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Sn([See]),rt,Mi]}),i})();function XV(i){return"number"==typeof i?i:parseInt(i,10)}function KV(i){return"number"==typeof i?i:parseFloat(i)}let zh=(()=>{class i{constructor(){this._validator=tC}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):tC,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,features:[Mi]}),i})();const kee={provide:Gr,useExisting:Ln(()=>Hh),multi:!0};let Hh=(()=>{class i extends zh{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>KV(e),this.createValidator=e=>cV(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&yt("max",n._enabled?n.max:null)},inputs:{max:"max"},features:[Sn([kee]),rt]}),i})();const Pee={provide:Gr,useExisting:Ln(()=>Gh),multi:!0};let Gh=(()=>{class i extends zh{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>KV(e),this.createValidator=e=>lV(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&yt("min",n._enabled?n.min:null)},inputs:{min:"min"},features:[Sn([Pee]),rt]}),i})();const Nee={provide:Gr,useExisting:Ln(()=>xR),multi:!0};let xR=(()=>{class i extends zh{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>XV(e),this.createValidator=e=>fV(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&yt("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[Sn([Nee]),rt]}),i})();const Bee={provide:Gr,useExisting:Ln(()=>wR),multi:!0};let wR=(()=>{class i extends zh{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>XV(e),this.createValidator=e=>pV(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&yt("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[Sn([Bee]),rt]}),i})(),ez=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[HV]}),i})();class tz extends oC{constructor(t,e,n){super(lR(e),cR(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){kV(this,!1,t),t.forEach((n,r)=>{RV(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function nz(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let Vee=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new i;return e.useNonNullable=!0,e}group(e,n=null){const r=this._reduceControls(e);let s={};return nz(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Gm(r,s)}record(e,n=null){const r=this._reduceControls(e);return new PV(r,n)}control(e,n,r){let s={};return this.useNonNullable?(nz(n)?s=n:(s.validators=n,s.asyncValidators=r),new Yl(e,{...s,nonNullable:!0})):new Yl(e,n,r)}array(e,n,r){const s=e.map(o=>this._createControl(o));return new tz(s,n,r)}_reduceControls(e){const n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){return e instanceof Yl||e instanceof oC?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),iz=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Bh,useValue:e.callSetDisabledState??jy}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[ez]}),i})(),rz=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:mR,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Bh,useValue:e.callSetDisabledState??jy}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[ez]}),i})();const zee=["matFormFieldNotchedOutline",""],Hee=["*"],Gee=["textField"],$ee=["iconPrefixContainer"],Wee=["textPrefixContainer"];function jee(i,t){1&i&&Pe(0,"span",19)}function Yee(i,t){if(1&i){const e=oi();$(0,"label",17),Ne("cdkObserveContent",function(){return an(e),ln(pe(2)._refreshOutlineNotchWidth())}),Bt(1,1),me(2,jee,1,0,"span",18),Y()}if(2&i){const e=pe(2);V("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),yt("for",e._control.id)("aria-owns",e._control.id),G(2),V("ngIf",!e.hideRequiredMarker&&e._control.required)}}function qee(i,t){1&i&&me(0,Yee,3,6,"label",16),2&i&&V("ngIf",pe()._hasFloatingLabel())}function Xee(i,t){1&i&&Pe(0,"div",20)}function Kee(i,t){}function Zee(i,t){1&i&&me(0,Kee,0,0,"ng-template",22),2&i&&(pe(2),V("ngTemplateOutlet",Ki(1)))}function Qee(i,t){if(1&i&&($(0,"div",21),me(1,Zee,1,1,"ng-template",9),Y()),2&i){const e=pe();V("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),G(1),V("ngIf",!e._forceDisplayInfixLabel())}}function Jee(i,t){1&i&&($(0,"div",23,24),Bt(2,2),Y())}function ete(i,t){1&i&&($(0,"div",25,26),Bt(2,3),Y())}function tte(i,t){}function nte(i,t){1&i&&me(0,tte,0,0,"ng-template",22),2&i&&(pe(),V("ngTemplateOutlet",Ki(1)))}function ite(i,t){1&i&&($(0,"div",27),Bt(1,4),Y())}function rte(i,t){1&i&&($(0,"div",28),Bt(1,5),Y())}function ste(i,t){1&i&&Pe(0,"div",29)}function ote(i,t){1&i&&($(0,"div",30),Bt(1,6),Y()),2&i&&V("@transitionMessages",pe()._subscriptAnimationState)}function ate(i,t){if(1&i&&($(0,"mat-hint",34),ze(1),Y()),2&i){const e=pe(2);V("id",e._hintLabelId),G(1),ci(e.hintLabel)}}function lte(i,t){if(1&i&&($(0,"div",31),me(1,ate,2,2,"mat-hint",32),Bt(2,7),Pe(3,"div",33),Bt(4,8),Y()),2&i){const e=pe();V("@transitionMessages",e._subscriptAnimationState),G(1),V("ngIf",e.hintLabel)}}const cte=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],dte=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let Go=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["mat-label"]]}),i})(),ute=0;const sz=new fe("MatError");let hte=(()=>{class i{constructor(e,n){this.id="mat-mdc-error-"+ute++,e||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(e){return new(e||i)(fa("aria-live"),A(ct))},i.\u0275dir=xe({type:i,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(e,n){2&e&&Vl("id",n.id)},inputs:{id:"id"},features:[Sn([{provide:sz,useExisting:i}])]}),i})(),fte=0,oz=(()=>{class i{constructor(){this.align="start",this.id="mat-mdc-hint-"+fte++}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,n){2&e&&(Vl("id",n.id),yt("align",null),nn("mat-mdc-form-field-hint-end","end"===n.align))},inputs:{align:"align",id:"id"}}),i})();const az=new fe("MatPrefix");let pte=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:["matTextPrefix","_isTextSelector"]},features:[Sn([{provide:az,useExisting:i}])]}),i})();const lz=new fe("MatSuffix");let mte=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[Sn([{provide:lz,useExisting:i}])]}),i})(),cz=(()=>{class i{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function gte(i){if(null!==i.offsetParent)return i.scrollWidth;const e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const n=e.scrollWidth;return e.remove(),n}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return i.\u0275fac=function(e){return new(e||i)(A(ct))},i.\u0275dir=xe({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,n){2&e&&nn("mdc-floating-label--float-above",n.floating)},inputs:{floating:"floating"}}),i})();const dz="mdc-line-ripple--active",hC="mdc-line-ripple--deactivating";let uz=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(hC);"opacity"===r.propertyName&&o&&s.remove(dz,hC)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(hC),e.add(dz)}deactivate(){this._elementRef.nativeElement.classList.add(hC)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at))},i.\u0275dir=xe({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),i})(),hz=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at))},i.\u0275cmp=it({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,n){2&e&&nn("mdc-notched-outline--notched",n.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:zee,ngContentSelectors:Hee,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,n){1&e&&(Zi(),Pe(0,"div",0),$(1,"div",1),Bt(2),Y(),Pe(3,"div",2)),2&e&&(G(1),Bo("width",n._getNotchWidth()))},encapsulation:2,changeDetection:0}),i})();const _te={transitionMessages:Sa("transitionMessages",[ws("enter",Kn({opacity:1,transform:"translateY(0%)"})),Dr("void => enter",[Kn({opacity:0,transform:"translateY(-5px)"}),Hr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let MR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i}),i})();const fC=new fe("MatFormField"),vte=new fe("MAT_FORM_FIELD_DEFAULT_OPTIONS");let fz=0,ql=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Yt(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==n&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._document=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+fz++,this._hintLabelId="mat-mdc-hint-"+fz++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Fe,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Ze(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),or(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Ze(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Ze(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Xn),A(at),A(Ca),A(Ii),A(vte,8),A(Er,8),A(Ut))},i.\u0275cmp=it({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,n,r){if(1&e&&(Ni(r,Go,5),Ni(r,Go,7),Ni(r,MR,5),Ni(r,az,5),Ni(r,lz,5),Ni(r,sz,5),Ni(r,oz,5)),2&e){let s;St(s=Et())&&(n._labelChildNonStatic=s.first),St(s=Et())&&(n._labelChildStatic=s.first),St(s=Et())&&(n._formFieldControl=s.first),St(s=Et())&&(n._prefixChildren=s),St(s=Et())&&(n._suffixChildren=s),St(s=Et())&&(n._errorChildren=s),St(s=Et())&&(n._hintChildren=s)}},viewQuery:function(e,n){if(1&e&&(qn(Gee,5),qn($ee,5),qn(Wee,5),qn(cz,5),qn(hz,5),qn(uz,5)),2&e){let r;St(r=Et())&&(n._textField=r.first),St(r=Et())&&(n._iconPrefixContainer=r.first),St(r=Et())&&(n._textPrefixContainer=r.first),St(r=Et())&&(n._floatingLabel=r.first),St(r=Et())&&(n._notchedOutline=r.first),St(r=Et())&&(n._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,n){2&e&&nn("mat-mdc-form-field-label-always-float",n._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",n._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",n._hasIconSuffix)("mat-form-field-invalid",n._control.errorState)("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===n._animationMode)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-hide-placeholder",n._hasFloatingLabel()&&!n._shouldLabelFloat())("mat-focused",n._control.focused)("mat-primary","accent"!==n.color&&"warn"!==n.color)("mat-accent","accent"===n.color)("mat-warn","warn"===n.color)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Sn([{provide:fC,useExisting:i}])],ngContentSelectors:dte,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,n){1&e&&(Zi(cte),me(0,qee,1,1,"ng-template",null,0,Fc),$(2,"div",1,2),Ne("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),me(4,Xee,1,0,"div",3),$(5,"div",4),me(6,Qee,2,3,"div",5),me(7,Jee,3,0,"div",6),me(8,ete,3,0,"div",7),$(9,"div",8),me(10,nte,1,1,"ng-template",9),Bt(11),Y(),me(12,ite,2,0,"div",10),me(13,rte,2,0,"div",11),Y(),me(14,ste,1,0,"div",12),Y(),$(15,"div",13),me(16,ote,2,1,"div",14),me(17,lte,5,2,"div",15),Y()),2&e&&(G(2),nn("mdc-text-field--filled",!n._hasOutline())("mdc-text-field--outlined",n._hasOutline())("mdc-text-field--no-label",!n._hasFloatingLabel())("mdc-text-field--disabled",n._control.disabled)("mdc-text-field--invalid",n._control.errorState),G(2),V("ngIf",!n._hasOutline()&&!n._control.disabled),G(2),V("ngIf",n._hasOutline()),G(1),V("ngIf",n._hasIconPrefix),G(1),V("ngIf",n._hasTextPrefix),G(2),V("ngIf",!n._hasOutline()||n._forceDisplayInfixLabel()),G(2),V("ngIf",n._hasTextSuffix),G(1),V("ngIf",n._hasIconSuffix),G(1),V("ngIf",!n._hasOutline()),G(1),nn("mat-mdc-form-field-subscript-dynamic-size","dynamic"===n.subscriptSizing),V("ngSwitch",n._getDisplayedMessages()),G(1),V("ngSwitchCase","error"),G(1),V("ngSwitchCase","hint"))},dependencies:[vi,sy,ry,ET,A3,oz,cz,hz,uz],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[_te.transitionMessages]},changeDetection:0}),i})(),pC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,vo,EI,$n]}),i})();const gz=Ih({passive:!0});let xte=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Ls;const n=Hc(e),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new Fe,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,gz),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,gz)}}),s}stopMonitoring(e){const n=Hc(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(e){return new(e||i)(J(Ii),J(at))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),wte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();const CR=new fe("MAT_INPUT_VALUE_ACCESSOR"),Mte=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Cte=0;const Ste=Y3(class{constructor(i,t,e,n){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=e,this.ngControl=n,this.stateChanges=new Fe}});let Kc=(()=>{class i extends Ste{get disabled(){return this._disabled}set disabled(e){this._disabled=Yt(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(sl.required)??!1}set required(e){this._required=Yt(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&c3().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Yt(e)}constructor(e,n,r,s,o,a,l,c,u,h){super(a,s,o,r),this._elementRef=e,this._platform=n,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+Cte++,this.focused=!1,this.stateChanges=new Fe,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(g=>c3().has(g)),this._iOSKeyupListener=g=>{const b=g.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&u.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Mte.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Ii),A(jl,10),A(Xy,8),A(Vh,8),A(X3),A(CR,10),A(xte),A(at),A(fC,8))},i.\u0275dir=xe({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,n){1&e&&Ne("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&e&&(Vl("id",n.id)("disabled",n.disabled)("required",n.required),yt("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),nn("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Sn([{provide:MR,useExisting:i}]),rt,Mi]}),i})(),_z=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,pC,pC,wte,$n]}),i})();function Ete(i,t){if(1&i&&($(0,"mat-label"),ze(1),Y()),2&i){const e=pe(2);G(1),ci(e.resource.name)}}function Ate(i,t){if(1&i){const e=oi();$(0,"mat-form-field",1),me(1,Ete,2,1,"mat-label",2),$(2,"input",3),Ne("ngModelChange",function(r){return an(e),ln(pe().resource.data=r)})("change",function(){return an(e),ln(pe().changed.emit())}),Y()()}if(2&i){const e=pe();V("matTooltip",e.resourceDescription),G(1),V("ngIf",e.resource.name),G(1),V("max",e.resource.schema.max_value)("min",e.resource.schema.min_value)("step",e.resource.schema.value_interval)("disabled",e.disabled||void 0!==e.resource.schema.required_value)("ngModel",e.resource.data)}}let Dte=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-integer-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(e,n){1&e&&me(0,Ate,3,7,"mat-form-field",0),2&e&&V("ngIf",n.resource)},dependencies:[vi,Wl,Uh,Xc,Gh,Hh,ou,ql,Go,Kc,Ms],changeDetection:0}),i})();function Tte(i,t){if(1&i&&($(0,"mat-label"),ze(1),Y()),2&i){const e=pe(2);G(1),ci(e.resource.name)}}function Ite(i,t){if(1&i){const e=oi();$(0,"mat-form-field",1),me(1,Tte,2,1,"mat-label",2),$(2,"input",3),Ne("ngModelChange",function(r){return an(e),ln(pe().resource.data=r)})("change",function(){return an(e),ln(pe().changed.emit())}),Y()()}if(2&i){const e=pe();V("matTooltip",e.resourceDescription),G(1),V("ngIf",e.resource.name),G(1),V("disabled",e.disabled||void 0!==e.resource.schema.required_value)("maxlength",e.maxLength)("minlength",e.minLength)("ngModel",e.resource.data)}}let vz=(()=>{class i{constructor(){this._resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He,this.minLength=null,this.maxLength=null}get resource(){return this._resource}set resource(e){this._resource=e,isNaN(+this._resource?.schema.length)||(this.minLength=this.maxLength=+this._resource?.schema.length)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-string-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["matInput","","type","text",3,"disabled","maxlength","minlength","ngModel","ngModelChange","change"]],template:function(e,n){1&e&&me(0,Ite,3,6,"mat-form-field",0),2&e&&V("ngIf",n.resource)},dependencies:[vi,Wl,Xc,xR,wR,ou,ql,Go,Kc,Ms],changeDetection:0}),i})();const Xl=(i,t)=>i+(i.includes("__")?"/":"__")+t,$h=function(){return[]};function Rte(i,t){if(1&i&&($(0,"mat-panel-description"),ze(1," Click to view items ("),$(2,"b"),ze(3),Y(),ze(4,") "),Y()),2&i){const e=pe(2);G(3),ci((e.resourceData||Js(1,$h)).length)}}function kte(i,t){1&i&&($(0,"mat-panel-description"),ze(1," Empty array "),Y())}function Pte(i,t){}function Ote(i,t){if(1&i){const e=oi();$(0,"mat-expansion-panel",4),Ne("opened",function(){return an(e),ln(pe().onContentsTrigger(!0))})("closed",function(){return an(e),ln(pe().onContentsTrigger(!1))}),$(1,"mat-expansion-panel-header",5)(2,"mat-panel-title"),ze(3),Y(),me(4,Rte,5,2,"mat-panel-description",1),me(5,kte,2,0,"mat-panel-description",1),Y(),me(6,Pte,0,0,"ng-template",6),Y()}if(2&i){const e=pe(),n=Ki(3);G(1),V("matTooltip",e.resourceDescription),G(2),Qi(" ",e.name," "),G(1),V("ngIf",(e.resourceData||Js(5,$h)).length>0),G(1),V("ngIf",0==(e.resourceData||Js(6,$h)).length),G(1),V("ngTemplateOutlet",n)}}function Fte(i,t){}function Lte(i,t){if(1&i&&(os(0),$(1,"h2",5),ze(2),Y(),$(3,"div",7),me(4,Fte,0,0,"ng-template",6),Y(),as()),2&i){const e=pe(),n=Ki(3);G(1),V("matTooltip",e.resourceDescription),G(1),ci(e.name),G(2),V("ngTemplateOutlet",n)}}function Nte(i,t){}function Bte(i,t){if(1&i&&Pe(0,"app-editor",10),2&i){const e=pe().$implicit,n=pe(3);V("resource",n.children[n.pageIndex*n.pageSize+e])("disabled",n.disabled)}}function Ute(i,t){if(1&i&&(os(0),me(1,Bte,1,2,"app-editor",9),as()),2&i){const e=t.$implicit,n=pe(3);G(1),V("ngIf",n.pageIndex*n.pageSize+e<n.children.length)}}function Vte(i,t){}function zte(i,t){1&i&&($(0,"p"),ze(1,"Empty array"),Y())}function Hte(i,t){if(1&i&&(os(0),me(1,Nte,0,0,"ng-template",6),me(2,Ute,2,1,"ng-container",8),me(3,Vte,0,0,"ng-template",6),me(4,zte,2,0,"p",1),as()),2&i){const e=pe(2),n=Ki(5);G(1),V("ngTemplateOutlet",n),G(1),V("ngForOf",e.renderIndexes),G(1),V("ngTemplateOutlet",n),G(1),V("ngIf",0==(e.resourceData||Js(4,$h)).length)}}function Gte(i,t){if(1&i&&me(0,Hte,5,5,"ng-container",1),2&i){const e=pe();V("ngIf",e.renderContents||!e.showAsCollapsable)}}function $te(i,t){if(1&i&&($(0,"mat-option",18),ze(1),Y()),2&i){const e=t.$implicit,n=pe(3);V("value",e),G(1),im(" ",e*n.pageSize," - ",(e+1)*n.pageSize-1," ")}}const Wte=function(i){return{hidden:i}};function jte(i,t){if(1&i){const e=oi();$(0,"div",12)(1,"mat-paginator",13),Ne("page",function(r){return an(e),ln(pe(2).renderPage(r.pageIndex,r.pageSize))}),Y(),$(2,"div",14)(3,"div",15),ze(4,"Go To:"),Y(),$(5,"mat-form-field")(6,"mat-select",16),Ne("ngModelChange",function(r){return an(e),ln(pe(2).goToIndex=r)})("selectionChange",function(){an(e);const r=pe(2);return ln(r.renderPage(r.goToIndex,r.pageSize))}),me(7,$te,2,3,"mat-option",17),Y()()()()}if(2&i){const e=pe(2);V("ngClass",am(9,Wte,(e.resourceData||Js(8,$h)).length<=e.minPageSize)),G(1),V("length",(e.resourceData||Js(11,$h)).length)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",!0),G(5),V("ngModel",e.goToIndex),G(1),V("ngForOf",e.pageIndexes)}}function Yte(i,t){1&i&&me(0,jte,8,12,"div",11),2&i&&V("ngIf",(pe().resourceData||Js(1,$h)).length>0)}let SR=(()=>{class i{constructor(e,n){this.main=e,this.cdr=n,this._resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He,this.showAsCollapsable=!1,this.renderContents=!1,this.minPageSize=10,this.pageIndex=0,this.pageSize=0,this.pageSizeOptions=[10,25,50,100],this.children=[],this.renderIndexes=[],this.goToIndex=0,this.pageIndexes=[],this.destroyed$=new Fe}set resource(e){this._resource=e,this.showAsCollapsable=this._resource?.data?.length>5,this.buildChildren(),this.renderPage(0,this.minPageSize),this.updatePageIndexes()}get resource(){return this._resource}get resourceData(){return this._resource?.data}buildChildren(){this.children=(this.resourceData||[]).map((e,n)=>({id:Xl(this._resource.id,n),name:""+n,data:e,schema:this._resource.schema.child_schema}))}get schema(){return this._resource?.schema}get name(){return this._resource?.name||null}ngAfterViewInit(){var e=this;this.main.dataBlockChange$.pipe(Ze(this.destroyed$),Dn(([n,r])=>!!this.resource&&n.startsWith(this.resource.id)&&!n.substring(this.resource.id.length+1).includes("/"))).subscribe(function(){var n=ht(function*([r,s]){const o=r.substring(e.resource.id.length+1);e.resourceData[+o]=s});return function(r){return n.apply(this,arguments)}}())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onContentsTrigger(e){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),e?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(e,n){this.pageSize!==n&&(this.renderIndexes=new Array(n).fill(null).map((r,s)=>s)),this.goToIndex=this.pageIndex=e,this.pageSize=n,this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let e=0;e<Math.ceil((this.resourceData||[]).length/this.pageSize);e++)this.pageIndexes.push(e)}}return i.\u0275fac=function(e){return new(e||i)(A(rl),A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-array-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:6,vars:2,consts:[[3,"opened","closed",4,"ngIf"],[4,"ngIf"],["contents",""],["paginator",""],[3,"opened","closed"],["matTooltipPosition","above",3,"matTooltip"],[3,"ngTemplateOutlet"],[1,"mat-expansion-panel-body"],[4,"ngFor","ngForOf"],[3,"resource","disabled",4,"ngIf"],[3,"resource","disabled"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&(me(0,Ote,7,7,"mat-expansion-panel",0),me(1,Lte,5,3,"ng-container",1),me(2,Gte,1,1,"ng-template",null,2,Fc),me(4,Yte,1,2,"ng-template",null,3,Fc)),2&e&&(V("ngIf",n.showAsCollapsable),G(1),V("ngIf",!n.showAsCollapsable))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0}),i})();function qte(i,t){1&i&&(Pe(0,"img",2),Ht(1,"async")),2&i&&V("src",Zt(1,1,pe().imageUrl$),Op)}const Xte=function(){return["bitmap","palette"]};let Kte=(()=>{class i{constructor(e,n){this.eelDelegate=e,this.main=n,this._resource$=new At(null),this.imageUrl$=new At(null),this.destroyed$=new Fe,this.changed=new He}set resource(e){this._resource$.next(e)}get resource(){return this._resource$.getValue()}ngAfterViewInit(){var e=this;return ht(function*(){e._resource$.pipe(Ze(e.destroyed$)).subscribe(function(){var n=ht(function*(r){if(r){const s=yield e.eelDelegate.serializeResource(r.id);e.imageUrl$.next(s.find(o=>o.endsWith(".png"))||null)}else e.imageUrl$.next(null)});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(Yc),A(rl))},i.\u0275cmp=it({type:i,selectors:[["app-bitmap-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:8,consts:[[3,"resource","fieldBlacklist"],[3,"src",4,"ngIf"],[3,"src"]],template:function(e,n){1&e&&(Pe(0,"app-compound-block-ui",0),Ht(1,"async"),me(2,qte,2,3,"img",1),Ht(3,"async")),2&e&&(V("resource",Zt(1,3,n._resource$))("fieldBlacklist",Js(7,Xte)),G(2),V("ngIf",Zt(3,5,n.imageUrl$)))},dependencies:[vi,qc,Hl],styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;row-gap:1rem}img[_ngcontent-%COMP%]{min-width:10rem;max-width:100%;max-height:25rem;object-fit:contain;background-image:linear-gradient(45deg,#808080 25%,transparent 25%),linear-gradient(-45deg,#808080 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#808080 75%),linear-gradient(-45deg,transparent 75%,#808080 75%);background-size:16px 16px;background-color:#aaa}"],changeDetection:0}),i})();const Zte=["*"],nne=new fe("MAT_CARD_CONFIG");let yz=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}}return i.\u0275fac=function(e){return new(e||i)(A(nne,8))},i.\u0275cmp=it({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,n){2&e&&nn("mat-mdc-card-outlined","outlined"===n.appearance)("mdc-card--outlined","outlined"===n.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Zte,decls:1,vars:0,template:function(e,n){1&e&&(Zi(),Bt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),i})(),bz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,vo,$n]}),i})();class ER{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Fe,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,n=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(t){if(this.compareWith){for(let e of this._selection)if(this.compareWith(t,e))return e;return t}return t}}let AR=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ane=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[$n,vo,Uy,$n]}),i})();const Ez={transformPanel:Sa("transformPanel",[Dr("void => enter-dropdown",Hr("120ms cubic-bezier(0, 0, 0.2, 1)",aU([Kn({opacity:0,transform:"scale(1, 0.8)"}),Kn({opacity:1,transform:"scale(1, 1)"})]))),Dr("void => enter-dialog",Hr("150ms cubic-bezier(0, 0, 0.2, 1)",aU([Kn({opacity:0,transform:"scale(0.7)"}),Kn({transform:"none",opacity:1})]))),Dr("* => void",Hr("100ms linear",Kn({opacity:0})))]),fadeInCalendar:Sa("fadeInCalendar",[ws("void",Kn({opacity:0})),ws("enter",Kn({opacity:1})),Dr("void => *",Hr("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},Tz=function(i){return{active:i}};function Wne(i,t){if(1&i){const e=oi();$(0,"button",2),Ne("click",function(){const s=an(e).$implicit;return ln(pe().select(s))}),Y()}if(2&i){const e=t.$implicit,n=pe();Bo("background-color",e),V("ngClass",am(3,Tz,n.selectedColor===e))}}function jne(i,t){if(1&i){const e=oi();$(0,"button",2),Ne("click",function(){const s=an(e).$implicit;return ln(pe().select(s))}),Y()}if(2&i){const e=t.$implicit,n=pe();Bo("background-color",e),V("ngClass",am(3,Tz,n.selectedColor===e))}}const Yne=["button"],qne=/^\s+/,Xne=/\s+$/,Wm=Math.round,Kne=(Math,Math,Math,/[^0-9]/g),Iz=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function Rz(i,t,e){const n=i.getImageData(t,e,1,1).data;return{r:n[0],g:n[1],b:n[2]}}function Wh(i){return 1==i.length?"0"+i:""+i}function Qne(i){return Math.round(255*parseFloat(i)).toString(16)}function kz(i){return $o(i)/255}function $o(i){return parseInt(i,16)}function Pz(i,t,e,n){var r=[Wh(Wm(i).toString(16)),Wh(Wm(t).toString(16)),Wh(Wm(e).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}const au="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",IR="[\\s|\\(]+("+au+")[,|\\s]+("+au+")[,|\\s]+("+au+")\\s*\\)?",RR="[\\s|\\(]+("+au+")[,|\\s]+("+au+")[,|\\s]+("+au+")[,|\\s]+("+au+")\\s*\\)?",jh={CSS_UNIT:new RegExp(au),rgb:new RegExp("rgb"+IR),rgba:new RegExp("rgba"+RR),hsl:new RegExp("hsl"+IR),hsla:new RegExp("hsla"+RR),hsv:new RegExp("hsv"+IR),hsva:new RegExp("hsva"+RR),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function kR(i){let t;return i=i.replace(qne,"").replace(Xne,"").toLowerCase(),(t=jh.rgb.exec(i))?{r:t[1],g:t[2],b:t[3],a:1}:(t=jh.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=jh.hex8.exec(i))?{r:$o(t[1]),g:$o(t[2]),b:$o(t[3]),a:kz(t[4])}:(t=jh.hex6.exec(i))?{r:$o(t[1]),g:$o(t[2]),b:$o(t[3]),a:1}:(t=jh.hex4.exec(i))?{r:$o(t[1]+""+t[1]),g:$o(t[2]+""+t[2]),b:$o(t[3]+""+t[3]),a:kz(t[4]+""+t[4])}:(t=jh.hex3.exec(i))?{r:$o(t[1]+""+t[1]),g:$o(t[2]+""+t[2]),b:$o(t[3]+""+t[3]),a:1}:null}class Yh{constructor(t,e,n,r){this.r=t>255?255:t,this.g=e>255?255:e,this.b=n>255?255:n,this.a=null!=r?r>1?1:r:1,this.roundA=Math.round(this.a),this.hex=Pz(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(t){return Pz(this.r,this.g,this.b,t)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(t){return"#"+this.toHex(t)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(t){return function Zne(i,t,e,n,r){var s=[Wh(Wm(i).toString(16)),Wh(Wm(t).toString(16)),Wh(Wm(e).toString(16)),Wh(Qne(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this.r,this.g,this.b,this.a,t)}toHex8String(t){return"#"+this.toHex8(t)}toString(t){let n;return t||!(this.a<1&&this.a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t?("rgb"===t&&(n=this.toRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),n||this.toHexString()):this.toRgbString()}}let Oz=(()=>{class i{constructor(e,n){this.zone=e,this.colorChanged=new He,this.x=0,this.y=0,this.drag=!1,this._destroyed=new Fe,this.elementId=n}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(e){this.drag=!0,this.changeColor(e),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(e){this.drag&&this.zone.run(()=>{this.changeColor(e)})}onMouseup(e){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(e){this.colorChanged.emit(e)}}return i.\u0275fac=function(e){po()},i.\u0275dir=xe({type:i,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),i})(),tie=(()=>{class i extends Oz{constructor(e){super(e,"color-strip"),this.zone=e}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"rgba(255, 0, 0, 1)"),e.addColorStop(.17,"rgba(255, 255, 0, 1)"),e.addColorStop(.34,"rgba(0, 255, 0, 1)"),e.addColorStop(.51,"rgba(0, 255, 255, 1)"),e.addColorStop(.68,"rgba(0, 0, 255, 1)"),e.addColorStop(.85,"rgba(255, 0, 255, 1)"),e.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=e,this.ctx.fill()}redrawIndicator(e,n){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,n,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(e){this.x=e.offsetX,this.y=e.offsetY,this.draw();const{r:n,g:r,b:s}=Rz(this.ctx,e.offsetX,e.offsetY);this.emitChange(new Yh(n,r,s))}}return i.\u0275fac=function(e){return new(e||i)(A(at))},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-slider"]],features:[rt],decls:1,vars:0,consts:[["id","color-strip","width","15","height","234",1,"zone-strip",3,"mousedown","mouseup"]],template:function(e,n){1&e&&($(0,"canvas",0),Ne("mousedown",function(s){return n.onMousedown(s)})("mouseup",function(s){return n.onMouseup(s)}),Y())}}),i})(),nie=(()=>{class i{constructor(){}onInput(e){this._formatInput(e.target)}_formatInput(e){let n=Number(e.value.replace(Kne,""));n=isNaN(n)?0:n,e.value=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(e,n){1&e&&Ne("input",function(s){return n.onInput(s)})}}),i})(),rie=(()=>{class i extends Oz{constructor(e){super(e,"color-block"),this.zone=e,this._resetBaseColor=!0,this.formGroup=new Gm({r:new Yl(null,[sl.required]),g:new Yl(null,[sl.required]),b:new Yl(null,[sl.required]),a:new Yl(null,[sl.required]),hex:new Yl(null,[sl.required,sl.pattern(jh.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){or(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(Ze(this._destroyed),Gc(400)).subscribe(r=>{const s=new Yh(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(s)}),this.hexCtrl.valueChanges.pipe(Ze(this._destroyed),Gc(400),$c()).subscribe(r=>{const s=kR(r);if(null!=s){const o=new Yh(s.r,s.g,s.b,s.a);this.emitChange(o)}})}ngOnChanges(e){e.color&&e.color.currentValue&&(this.updateForm(e.color.currentValue),this._resetBaseColor&&(this._baseColor=e.color.currentValue),this._resetBaseColor=!0,e.color.firstChange||this.draw())}updateForm(e){const n={emitEvent:!1};this.rCtrl.setValue(e.r,n),this.gCtrl.setValue(e.g,n),this.bCtrl.setValue(e.b,n),this.aCtrl.setValue(e.a,n),this.hexCtrl.setValue(e.hex,n)}redrawIndicator(e,n){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(e,n,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const e=this.ctx.createLinearGradient(0,0,this.width,0);e.addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height);const n=this.ctx.createLinearGradient(0,0,0,this.height);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(e){this._baseColor=e,this.color=e,this.fillGradient(),this.emitChange(e)}changeColor(e){this.x=e.offsetX,this.y=e.offsetY,this._resetBaseColor=!1,this.draw();const{r:n,g:r,b:s}=Rz(this.ctx,e.offsetX,e.offsetY);this.emitChange(new Yh(n,r,s))}}return i.\u0275fac=function(e){return new(e||i)(A(at))},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[rt,Mi],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","235",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],[1,"input-opacity"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(e,n){1&e&&($(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),Ne("mousedown",function(s){return n.onMousedown(s)})("mouseup",function(s){return n.onMouseup(s)}),Y(),$(4,"ngx-mat-color-slider",4),Ne("colorChanged",function(s){return n.onSliderColorChanged(s)}),Y()(),$(5,"div",5)(6,"mat-form-field")(7,"mat-label"),ze(8,"R"),Y(),Pe(9,"input",6),Y(),$(10,"mat-form-field")(11,"mat-label"),ze(12,"G"),Y(),Pe(13,"input",7),Y(),$(14,"mat-form-field")(15,"mat-label"),ze(16,"B"),Y(),Pe(17,"input",8),Y()()(),$(18,"div",1),Pe(19,"button",9),$(20,"mat-form-field")(21,"mat-label"),ze(22,"HEX6"),Y(),$(23,"mat-label",10),ze(24,"#\xa0"),Y(),Pe(25,"input",11),Y(),$(26,"mat-form-field",12)(27,"mat-label"),ze(28,"A"),Y(),Pe(29,"input",13),Y()()()),2&e&&(V("formGroup",n.formGroup),G(19),Bo("background-color",(null==n.color?null:n.color.rgba)||"transparent"))},dependencies:[Kc,ql,Go,pte,EU,pR,Wl,Uh,Xc,rR,Gh,Hh,Vh,uC,tie,nie],styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:235px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:235px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:60px;height:235px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type .symbol{font-weight:700;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type{width:60px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type .mat-mdc-text-field-wrapper{padding:0 8px}.ngx-mat-color-canvas .mat-mdc-form-field-label{font-weight:700}.ngx-mat-color-canvas .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent}\n"],encapsulation:2}),i})(),sie=(()=>{class i{constructor(){this.colorChanged=new He,this.colors1=Iz.slice(0,8),this.colors2=Iz.slice(8,16)}set color(e){e&&(this.selectedColor=e.toHexString())}ngOnInit(){}select(e){this.selectedColor=e;const{r:n,g:r,b:s,a:o}=kR(e);this.colorChanged.emit(new Yh(n,r,s,o))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(e,n){1&e&&($(0,"div",0),me(1,Wne,1,5,"button",1),Y(),$(2,"div",0),me(3,jne,1,5,"button",1),Y()),2&e&&(G(1),V("ngForOf",n.colors1),G(2),V("ngForOf",n.colors2))},dependencies:[pm,_o,EU],styles:[".ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}\n"],encapsulation:2}),i})(),Fz=(()=>{class i{constructor(){this.colorChanged=new He}ngOnInit(){}handleColorChanged(e){this.colorChanged.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(e,n){1&e&&($(0,"ngx-mat-color-canvas",0),Ne("colorChanged",function(s){return n.handleColorChanged(s)}),Y(),$(1,"ngx-mat-color-collection",0),Ne("colorChanged",function(s){return n.handleColorChanged(s)}),Y()),2&e&&(V("color",n.color),G(1),V("color",n.color))},dependencies:[rie,sie],styles:[".ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:60px;flex-direction:column}\n"],encapsulation:2}),i})(),PR=(()=>{class i{constructor(){}sameColor(e,n){return null==e&&null==n||null!=e&&null!=n&&e.rgba===n.rgba}format(e,n){return e.toString(n)}parse(e){const n=kR(e);return n?new Yh(n.r,n.g,n.b,n.a):null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();const oie={display:{colorInput:"hex"}},Lz=new fe("mat-color-formats"),Nz=new fe("ngx-mat-colorpicker-scroll-strategy"),lie={provide:Nz,deps:[cs],useFactory:function aie(i){return()=>i.scrollStrategies.reposition()}},cie=Ny(class{constructor(i){this._elementRef=i}});let Bz=(()=>{class i extends cie{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(A(ct))},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(e,n){if(1&e&&qn(Fz,5),2&e){let r;St(r=Et())&&(n._palette=r.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(e,n){2&e&&(Ew("@transformPanel","enter"),nn("ngx-mat-colorpicker-content-touch",n.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[rt],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(e,n){1&e&&($(0,"ngx-mat-color-palette",0),Ne("colorChanged",function(s){return n.picker.select(s)}),Y()),2&e&&V("color",n.picker._selected)},dependencies:[Fz],styles:[".ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[Ez.transformPanel,Ez.fadeInCalendar]},changeDetection:0}),i})(),Uz=(()=>{class i{constructor(e,n,r,s,o,a,l,c){this._dialog=e,this._overlay=n,this._zone=r,this._adapter=s,this._dir=o,this._document=l,this._viewContainerRef=c,this.openedStream=new He,this.closedStream=new He,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new Fe,this._focusedElementBeforeOpen=null,this._inputSubscription=$t.EMPTY,this._selectedChanged=new Fe,this._scrollStrategy=a}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(e){const n=Yt(e);n!==this._disabled&&(this._disabled=n,this._disabledChange.next(n))}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=Yt(e)}get opened(){return this._opened}set opened(e){e?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(e){this._defaultColor=e}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(e){this._color=e}get _selected(){return this._validSelected}set _selected(e){this._validSelected=e}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(e){let n=this._selected;this._selected=e,this._adapter.sameColor(n,this._selected)||this._selectedChanged.next(e)}registerInput(e){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=e,this._inputSubscription=this._pickerInput._valueChange.subscribe(n=>this._selected=n)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(Bz,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new kh(Bz,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(Di(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const e=new Pm({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(e),this._popupRef.overlayElement.setAttribute("role","dialog"),or(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Dn(n=>27===n.keyCode||this._pickerInput&&n.altKey&&38===n.keyCode))).subscribe(n=>{n&&n.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_setColor(){const e=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=e),this._dialogRef&&(this._dialogRef.componentInstance.color=e)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return i.\u0275fac=function(e){return new(e||i)(A(Um),A(cs),A(at),A(PR),A(Ca,8),A(Nz),A(Ut,8),A(zr))},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),i})();class _C{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}const die={provide:yo,useExisting:Ln(()=>vC),multi:!0},uie={provide:Gr,useExisting:Ln(()=>vC),multi:!0};let vC=(()=>{class i{constructor(e,n,r,s){if(this._elementRef=e,this._formField=n,this._colorFormats=r,this._adapter=s,this.colorChange=new He,this.colorInput=new He,this._disabledChange=new He,this._valueChange=new He,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=$t.EMPTY,this._validator=sl.compose([]),this._lastValueValid=!1,!this._colorFormats)throw function eie(i){return Error(`NgxMatColorPicker: No provider found for ${i}. You must define MAT_COLOR_FORMATS in your module`)}("MAT_COLOR_FORMATS")}set ngxMatColorPicker(e){e&&(this._picker=e,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(n=>{this.value=n,this._cvaOnChange(n),this._onTouched(),this.colorInput.emit(new _C(this,this._elementRef.nativeElement)),this.colorChange.emit(new _C(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(e){const n=Yt(e),r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this._disabledChange.emit(n)),n&&r.blur&&r.blur()}get value(){return this._value}set value(e){const n=this.value;this._value=e,this._formatValue(e),this._adapter.sameColor(n,e)||this._valueChange.emit(e)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(e){this.value=e}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onChange(){this.colorChange.emit(new _C(this,this._elementRef.nativeElement))}_onKeydown(e){this._picker&&e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),e.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._adapter.format(e,this._colorFormats.display.colorInput):""}_onInput(e){const n=this._lastValueValid,r=this._adapter.parse(e);this._adapter.sameColor(r,this._value)?n!==this._lastValueValid&&this._validatorOnChange():(this._value=r,this._cvaOnChange(r),this._valueChange.emit(r),this.colorInput.emit(new _C(this,this._elementRef.nativeElement)))}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(ql,8),A(Lz,8),A(PR))},i.\u0275dir=xe({type:i,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(e,n){1&e&&Ne("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)}),2&e&&(Vl("disabled",n.disabled),yt("aria-haspopup",n._picker?"dialog":null)("aria-owns",(null==n._picker?null:n._picker.opened)&&n._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[Sn([die,uie,{provide:CR,useExisting:i}])]}),i})(),hie=(()=>{class i{constructor(e){this._cd=e,this._stateChanges=$t.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(e){this._disabled=e}ngOnInit(){}ngOnChanges(e){e.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(e){this.picker&&!this.disabled&&(this.picker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.picker?this.picker._disabledChange:st(),n=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:st(),r=this.picker?or(this.picker.openedStream,this.picker.closedStream):st();this._stateChanges.unsubscribe(),this._stateChanges=or(e,n,r).subscribe(()=>this._cd.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(A(Xn))},i.\u0275cmp=it({type:i,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(e,n){if(1&e&&qn(Yne,5),2&e){let r;St(r=Et())&&(n._button=r.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(e,n){1&e&&Ne("focus",function(){return n._button.focus()}),2&e&&(yt("tabindex",-1),nn("ngx-mat-color-toggle-active",n.picker&&n.picker.opened)("mat-accent",n.picker&&"accent"===n.picker.color)("mat-warn",n.picker&&"warn"===n.picker.color))},inputs:{picker:["for","picker"],tabIndex:"tabIndex",disabled:"disabled"},exportAs:["ngxMatColorPickerToggle"],features:[Mi],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(e,n){1&e&&($(0,"button",0,1),Ne("click",function(s){return n.open(s)}),$(2,"mat-icon"),ze(3,"palette"),Y()()),2&e&&(V("disabled",n.disabled),yt("aria-haspopup",n.picker?"dialog":null)("tabindex",n.disabled?-1:n.tabIndex),G(2),Bo("color",null==n.picker||null==n.picker._selected?null:n.picker._selected.rgba))},dependencies:[YM,eR],styles:[".mat-form-field-appearance .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}\n"],encapsulation:2}),i})(),fie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[PR,lie],imports:[vo,_z,qM,bz,Ane,iz,rz,bU,Ph,iV]}),i})();const pie=["picker"],mie=function(i){return{"background-color":i}};function gie(i,t){if(1&i){const e=oi();$(0,"div",5),Ne("click",function(r){const o=an(e).index;return ln(pe().onColorClicked(r.currentTarget,o))}),Y()}if(2&i){const e=t.$implicit,n=t.index,r=pe();V("ngStyle",am(2,mie,"#"+r.lpad(e.toString(16),"0",8)))("matTooltip",n+": #"+e.toString(16))}}const _ie=function(){return["colors"]};let vie=(()=>{class i{constructor(){this.resource=null,this.changed=new He,this.selectedIndex=null}get resourceData(){return this.resource?.data}lpad(e,n,r){for(;e.length<r;)e=n+e;return e}onColorClicked(e,n){if(!this.resourceData)return void(this.selectedIndex=null);this.selectedIndex=n;const r=this.resourceData.colors[n]||0;this.picker.select(new Yh((4278190080&r)>>>24,(16711680&r)>>>16,(65280&r)>>>8,255&r)),this.picker.open();const s=new w3;s.top(Math.min(e.offsetTop,window.innerHeight-450)+"px"),s.left(Math.min(e.offsetLeft,window.innerWidth-380)+"px"),this.picker._popupRef.updatePositionStrategy(s),s.apply()}onColorChange(e){this.resourceData?null!==this.selectedIndex&&(this.resourceData.colors[this.selectedIndex]=e?parseInt(e.toHex8String().substring(1),16):0,this.changed.emit()):this.selectedIndex=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-palette-block-ui"]],viewQuery:function(e,n){if(1&e&&qn(pie,5),2&e){let r;St(r=Et())&&(n.picker=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:6,vars:5,consts:[[3,"resource","fieldBlacklist"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip","click",4,"ngFor","ngForOf"],["matInput","",1,"hidden",3,"ngxMatColorPicker","colorChange"],["picker",""],[1,"color-box",3,"ngStyle","matTooltip","click"]],template:function(e,n){if(1&e&&(Pe(0,"app-compound-block-ui",0),$(1,"div",1),me(2,gie,1,4,"div",2),Y(),$(3,"input",3),Ne("colorChange",function(s){return n.onColorChange(s.value)}),Y(),Pe(4,"ngx-mat-color-picker",null,4)),2&e){const r=Ki(5);V("resource",n.resource)("fieldBlacklist",Js(4,_ie)),G(2),V("ngForOf",null==n.resourceData?null:n.resourceData.colors),G(1),V("ngxMatColorPicker",r)}},dependencies:[_o,Zw,Kc,Ms,vC,Uz,qc],styles:["#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0}),i})();const yie=["editor"];let bie=(()=>{class i{constructor(e){this.cdr=e,this._resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He,this.editorProps={showHeader:!1,height:"10rem",readonly:!1}}get resource(){return this._resource}set resource(e){this._resource=e,this.editor&&(this.editorProps.data=e?new Uint8Array(e.data):void 0,this.editorProps.height=Math.min(24,1.5*Math.ceil((e?.data||[]).length/8))+"rem",this.editor.$set({props:this.editorProps}),this.cdr.markForCheck())}ngAfterViewInit(){this.resource&&(this.editorProps.data=new Uint8Array(this.resource.data),this.editorProps.height=Math.min(24,1.5*Math.ceil(this.resource.data.length/8))+"rem"),this.editor=new HexEditor({target:this.editorDiv?.nativeElement,props:this.editorProps}),this.cdr.markForCheck()}ngOnDestroy(){this.editor&&this.editor.$destroy()}}return i.\u0275fac=function(e){return new(e||i)(A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-binary-block-ui"]],viewQuery:function(e,n){if(1&e&&qn(yie,5),2&e){let r;St(r=Et())&&(n.editorDiv=r.first)}},inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:4,vars:2,consts:[["matTooltipPosition","above",3,"matTooltip"],["editor",""]],template:function(e,n){1&e&&($(0,"h2",0),ze(1),Y(),Pe(2,"div",null,1)),2&e&&(V("matTooltip",n.resourceDescription),G(1),ci(null==n.resource?null:n.resource.name))},dependencies:[Ms],changeDetection:0}),i})();const xie=["picker"];function wie(i,t){if(1&i&&($(0,"mat-label",8),ze(1),Y()),2&i){const e=pe();G(1),ci(null==e.resource?null:e.resource.name)}}const Mie=function(i){return{transform:i}};let Cie=(()=>{class i{constructor(e){this.cdr=e,this.resource=null,this.resourceDescription="",this.changed=new He,this.pi=Math.PI,this.dragging=!1}mousedown(e){this.dragging=!0,this.updateRotation(e)}mousemove(e){this.dragging&&this.updateRotation(e)}mouseout(){this.dragging=!1}updateRotation(e){const n=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(e.clientY-n.top-n.height/2,e.clientX-n.left-n.width/2);e.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resource.data=r,this.changed.emit(),this.cdr.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-angle-block-ui"]],viewQuery:function(e,n){if(1&e&&qn(xie,5),2&e){let r;St(r=Et())&&(n.picker=r.first)}},hostBindings:function(e,n){1&e&&Ne("mousedown",function(s){return n.mousedown(s)})("mousemove",function(s){return n.mousemove(s)})("mouseup",function(){return n.mouseout()})("mouseleave",function(){return n.mouseout()})},inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:14,vars:13,consts:[["id","wrapper","matTooltipPosition","above",3,"matTooltip"],[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span",4,"ngIf"],["id","name-span"]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1,2)(3,"div",3),Pe(4,"div",4)(5,"div",5),Y()(),$(6,"div",6),me(7,wie,2,1,"mat-label",7),$(8,"mat-label"),ze(9),Ht(10,"number"),Y(),$(11,"mat-label"),ze(12),Ht(13,"number"),Y()()()),2&e&&(V("matTooltip",n.resourceDescription),G(3),V("ngStyle",am(11,Mie,"rotate("+((null==n.resource?null:n.resource.data)||0)+"rad)")),G(4),V("ngIf",null==n.resource?null:n.resource.name),G(2),Qi("",U1(10,5,180*(null==n.resource?null:n.resource.data)/n.pi||0,"1.2-2")," deg"),G(3),Qi("",U1(13,8,(null==n.resource?null:n.resource.data)||0,"1.2-2")," rad"))},dependencies:[vi,Zw,Go,Ms,hN],styles:["#wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0}),i})();class Vz{constructor(){}deepEquals(t,e){if(null===t&&null!==e)return!1;if(null===e&&null!==t)return!1;if(!0===Array.isArray(t)){if(!1===Array.isArray(e))return!1;if(t.length!==e.length)return!1;{const n=new Set,r=new Set,s=new Set,o=new Set;for(const h of t)!0===Array.isArray(h)?n.add(h):"object"==typeof h?r.add(h):"function"==typeof h?o.add(JSON.stringify(""+h)):s.add(h);const a=new Set,l=new Set,c=new Set,u=new Set;for(const h of e)!0===Array.isArray(h)?a.add(h):"object"==typeof h?l.add(h):"function"==typeof h?u.add(JSON.stringify(""+h)):c.add(h);if(s.size!==c.size)return!1;{let h=!0;for(const p of s)if(!1===c.has(p)){h=!1;break}if(!1===h)return!1;if(r.size===l.size){h=!0;for(const p of r){let m=!1;for(const g of l)if(!0===this.deepEquals(p,g)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(n.size===a.size){h=!0;for(const p of n){let m=!1;for(const g of a)if(!0===this.deepEquals(p,g)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(o.size===u.size){h=!0;for(const p of o)if(!1===u.has(p)){h=!1;break}return!1!==h}return!1}return!1}return!1}}}if("object"==typeof t&&null!==t){if("object"!=typeof e)return!1;{let n=!0;if(Object.keys(t).length===Object.keys(e).length){for(const[r,s]of Object.entries(t))if(n=this.deepEquals(s,e[r]),!1===n)break}else n=!1;return n}}return!0!==Array.isArray(e)&&("object"!=typeof e||null===e)&&("function"==typeof t?"function"==typeof e&&JSON.stringify(""+t)===JSON.stringify(""+e):JSON.stringify(t)===JSON.stringify(e))}}function Sie(i,t){if(1&i&&($(0,"mat-list-option",3),ze(1),Y()),2&i){const e=t.$implicit,n=pe();V("value",e)("selected",n.selectedValue==e),G(1),Qi(" ",e," ")}}function Eie(i,t){if(1&i&&($(0,"mat-card"),Pe(1,"app-editor",4),Y()),2&i){const e=pe();G(1),V("resource",e.resources[e.selectedValue])}}let yC=(()=>{class i{constructor(e){this.deep=e,this._resources={},this._selectedValue=null}get resources(){return this._resources}set resources(e){const n=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(e));this._resources=e,n&&(this.selectedValue=Object.keys(e).length>0?Object.keys(e)[0]:null)}set selectedValue(e){this._selectedValue=e}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}}return i.\u0275fac=function(e){return new(e||i)(A(Vz))},i.\u0275cmp=it({type:i,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected"],[3,"resource"]],template:function(e,n){1&e&&($(0,"mat-selection-list",0),Ne("selectionChange",function(s){return n.selectedValue=s.source.selectedOptions.selected[0].value}),me(1,Sie,2,3,"mat-list-option",1),Y(),me(2,Eie,2,1,"mat-card",2)),2&e&&(V("multiple",!1),G(1),V("ngForOf",n.keys),G(1),V("ngIf",n.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit;scroll-snap-align:start;scroll-margin:.5rem}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;max-height:calc(100vh - 54px - 1rem);overflow-y:auto;max-width:33%;flex-shrink:0;padding:0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]{background-color:#e0e0e0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]:focus{background-color:unset}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]     .mdc-radio{display:none}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%;padding:1rem}"],changeDetection:0}),i})(),Aie=(()=>{class i{constructor(){this._resource=null,this.resourceMap={},this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(r=>"children"===r.name)?.schema.child_schema;if(n)for(let r=0;r<this.resourceData.children.length;r++)this.resourceMap[r.toString()]={id:Xl(this._resource?.id||"",`children/${r}`),data:this.resourceData.children[r],schema:n,name:""}}get resourceData(){return this._resource?.data}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-wwww-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(e,n){1&e&&Pe(0,"app-sidenav-res-list",0),2&e&&V("resources",n.resourceMap)},dependencies:[yC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0}),i})();const Die=["trigger"],Tie=["panel"];function Iie(i,t){if(1&i&&($(0,"span",10),ze(1),Y()),2&i){const e=pe();G(1),ci(e.placeholder)}}function Rie(i,t){if(1&i&&($(0,"span",14),ze(1),Y()),2&i){const e=pe(2);G(1),ci(e.triggerValue)}}function kie(i,t){1&i&&Bt(0,0,["*ngSwitchCase","true"])}function Pie(i,t){1&i&&($(0,"span",11),me(1,Rie,2,1,"span",12),me(2,kie,1,0,"ng-content",13),Y()),2&i&&(V("ngSwitch",!!pe().customTrigger),G(2),V("ngSwitchCase",!0))}function Oie(i,t){if(1&i){const e=oi();Lr(),is(),$(0,"div",15,16),Ne("@transformPanel.done",function(r){return an(e),ln(pe()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return an(e),ln(pe()._handleKeydown(r))}),Bt(2,1),Y()}if(2&i){const e=pe();$F("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),V("ngClass",e.panelClass)("@transformPanel","showing"),yt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Fie=[[["mat-select-trigger"]],"*"],Lie=["mat-select-trigger","*"],Nie={transformPanelWrap:Sa("transformPanelWrap",[Dr("* => void",zI("@transformPanel",[VI()],{optional:!0}))]),transformPanel:Sa("transformPanel",[ws("void",Kn({opacity:0,transform:"scale(1, 0.8)"})),Dr("void => showing",Hr("120ms cubic-bezier(0, 0, 0.2, 1)",Kn({opacity:1,transform:"scale(1, 1)"}))),Dr("* => void",Hr("100ms linear",Kn({opacity:0})))])};let zz=0;const Hz=new fe("mat-select-scroll-strategy"),Uie=new fe("MAT_SELECT_CONFIG"),Vie={provide:Hz,deps:[cs],useFactory:function Bie(i){return()=>i.scrollStrategies.reposition()}},zie=new fe("MatSelectTrigger");class Hie{constructor(t,e){this.source=t,this.value=e}}const Gie=$M(NI(GM(Y3(class{constructor(i,t,e,n,r){this._elementRef=i,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new Fe}}))));let $ie=(()=>{class i extends Gie{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(sl.required)??!1}set required(e){this._required=Yt(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=Yt(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=Yt(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=xs(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,n,r,s,o,a,l,c,u,h,p,m,g,b){super(o,s,l,c,h),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=u,this._liveAnnouncer=g,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(v,y)=>v===y,this._uid="mat-select-"+zz++,this._triggerAriaLabelledBy=null,this._destroy=new Fe,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+zz++,this._panelDoneAnimatingStream=new Fe,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=uy(()=>{const v=this.options;return v?v.changes.pipe(Uo(v),bs(()=>or(...v.map(y=>y.onSelectionChange)))):this._ngZone.onStable.pipe(Di(1),bs(()=>this.optionSelectionChanges))}),this.openedChange=new He,this._openedStream=this.openedChange.pipe(Dn(v=>v),Qe(()=>{})),this._closedStream=this.openedChange.pipe(Dn(v=>!v),Qe(()=>{})),this.selectionChange=new He,this.valueChange=new He,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}ngOnInit(){this._selectionModel=new ER(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe($c(),Ze(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Ze(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(Uo(null),Ze(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!Ho(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||Ho(e))if(!o&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Di(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new cZ(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=or(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Ze(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),or(...this.options.map(n=>n._stateChanges)).pipe(Ze(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(A(PM),A(Xn),A(at),A(X3),A(ct),A(Ca,8),A(Xy,8),A(Vh,8),A(fC,8),A(jl,10),fa("tabindex"),A(Hz),A(PI),A(Uie,8))},i.\u0275dir=xe({type:i,viewQuery:function(e,n){if(1&e&&(qn(Die,5),qn(Tie,5),qn(C3,5)),2&e){let r;St(r=Et())&&(n.trigger=r.first),St(r=Et())&&(n.panel=r.first),St(r=Et())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[rt,Mi]}),i})(),Zy=(()=>{class i extends $ie{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Ze(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const n=this.options.toArray()[e];if(n){const r=this.panel.nativeElement,s=function eQ(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}(e,this.options,this.optionGroups),o=n._getHostElement();r.scrollTop=0===e&&1===s?0:function tQ(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Hie(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof SI?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=Yt(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275cmp=it({type:i,selectors:[["mat-select"]],contentQueries:function(e,n,r){if(1&e&&(Ni(r,zie,5),Ni(r,Bm,5),Ni(r,iU,5)),2&e){let s;St(s=Et())&&(n.customTrigger=s.first),St(s=Et())&&(n.options=s),St(s=Et())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,n){1&e&&Ne("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&e&&(yt("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),nn("mat-mdc-select-disabled",n.disabled)("mat-mdc-select-invalid",n.errorState)("mat-mdc-select-required",n.required)("mat-mdc-select-empty",n.empty)("mat-mdc-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[Sn([{provide:MR,useExisting:i},{provide:nU,useExisting:i}]),rt],ngContentSelectors:Lie,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,n){if(1&e&&(Zi(Fie),$(0,"div",0,1),Ne("click",function(){return n.toggle()}),$(3,"div",2),me(4,Iie,2,1,"span",3),me(5,Pie,3,2,"span",4),Y(),$(6,"div",5)(7,"div",6),Lr(),$(8,"svg",7),Pe(9,"path",8),Y()()()(),me(10,Oie,3,9,"ng-template",9),Ne("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&e){const r=Ki(1);yt("aria-owns",n.panelOpen?n.id+"-panel":null),G(3),V("ngSwitch",n.empty),yt("id",n._valueId),G(1),V("ngSwitchCase",!0),G(1),V("ngSwitchCase",!1),G(5),V("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",n._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayWidth",n._overlayWidth)}},dependencies:[pm,ry,ET,lN,C3,SI],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Nie.transformPanel]},changeDetection:0}),i})(),Gz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[Vie],imports:[vo,Om,UI,$n,Oy,pC,UI,$n]}),i})();function Wie(i,t){if(1&i&&($(0,"mat-label"),ze(1),Y()),2&i){const e=pe(3);G(1),ci(e.resource.name)}}function jie(i,t){if(1&i&&($(0,"mat-option",6),ze(1),Y()),2&i){const e=t.$implicit,n=pe(3);V("value",e[1])("disabled",n.disabled),G(1),Qi(" ",e[1]," ")}}function Yie(i,t){if(1&i){const e=oi();$(0,"mat-form-field",3),me(1,Wie,2,1,"mat-label",0),$(2,"mat-select",4),Ne("valueChange",function(r){return an(e),ln(pe(2).resource.data=r)})("selectionChange",function(){return an(e),ln(pe(2).changed.emit())}),me(3,jie,2,3,"mat-option",5),Y()()}if(2&i){const e=pe(2);V("matTooltip",e.resourceDescription),G(1),V("ngIf",e.resource.name),G(1),V("value",e.resource.data)("disabled",e.disabled),G(1),V("ngForOf",e.resource.schema.enum_names)}}function qie(i,t){if(1&i&&($(0,"mat-label"),ze(1),Y()),2&i){const e=pe(3);G(1),ci(e.resource.name)}}function Xie(i,t){if(1&i){const e=oi();$(0,"mat-form-field",3),me(1,qie,2,1,"mat-label",0),$(2,"input",7),Ne("ngModelChange",function(r){return an(e),ln(pe(2).resource.data=r)})("change",function(){return an(e),ln(pe(2).changed.emit())}),Y()()}if(2&i){const e=pe(2);V("matTooltip",e.resourceDescription),G(1),V("ngIf",e.resource.name),G(1),V("min",0)("max",256*(e.resource.schema.length||1)-1)("ngModel",e.resource.data)}}function Kie(i,t){if(1&i&&(os(0),me(1,Yie,4,5,"mat-form-field",1),me(2,Xie,3,5,"ng-template",null,2,Fc),as()),2&i){const e=Ki(3),n=pe();G(1),V("ngIf",n.isKnownEnumValue(n.resource.data))("ngIfElse",e)}}let Zie=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He}isKnownEnumValue(e){return!!this.resource?.schema.enum_names.find(([n,r])=>r==e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-enum-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf","ngIfElse"],["unknownEnum",""],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[3,"value","disabled","valueChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange","change"]],template:function(e,n){1&e&&me(0,Kie,4,2,"ng-container",0),2&e&&V("ngIf",n.resource)},dependencies:[_o,vi,Wl,Uh,Xc,Gh,Hh,ou,ql,Go,Kc,Ms,Zy,Bm],changeDetection:0}),i})();const Qie=["*"],ere=["unscopedContent"];function tre(i,t){1&i&&Bt(0,4)}function nre(i,t){if(1&i&&($(0,"div",11),Pe(1,"input",12),$(2,"div",13),Lr(),$(3,"svg",14),Pe(4,"path",15),Y(),is(),Pe(5,"div",16),Y()()),2&i){const e=pe();nn("mdc-checkbox--disabled",e.disabled),G(1),V("checked",e.selected)("disabled",e.disabled)}}function ire(i,t){if(1&i&&($(0,"div",17),Pe(1,"input",18),$(2,"div",19),Pe(3,"div",20)(4,"div",21),Y()()),2&i){const e=pe();nn("mdc-radio--disabled",e.disabled),G(1),V("checked",e.selected)("disabled",e.disabled)}}function rre(i,t){}function sre(i,t){if(1&i&&($(0,"span",22),me(1,rre,0,0,"ng-template",23),Y()),2&i){pe();const e=Ki(3);G(1),V("ngTemplateOutlet",e)}}function ore(i,t){}function are(i,t){if(1&i&&($(0,"span",24),me(1,ore,0,0,"ng-template",23),Y()),2&i){pe();const e=Ki(5);G(1),V("ngTemplateOutlet",e)}}function lre(i,t){}function cre(i,t){1&i&&me(0,lre,0,0,"ng-template",23),2&i&&(pe(),V("ngTemplateOutlet",Ki(1)))}function dre(i,t){}function ure(i,t){if(1&i&&($(0,"span",25),me(1,dre,0,0,"ng-template",23),Y()),2&i){pe();const e=Ki(3);G(1),V("ngTemplateOutlet",e)}}function hre(i,t){}function fre(i,t){if(1&i&&($(0,"span",25),me(1,hre,0,0,"ng-template",23),Y()),2&i){pe();const e=Ki(5);G(1),V("ngTemplateOutlet",e)}}function pre(i,t){}function mre(i,t){1&i&&me(0,pre,0,0,"ng-template",23),2&i&&(pe(),V("ngTemplateOutlet",Ki(1)))}const gre=[[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["mat-divider"]],[["","matListItemAvatar",""],["","matListItemIcon",""]]],_re=["[matListItemTitle]","[matListItemLine]","*","mat-divider","[matListItemAvatar],[matListItemIcon]"],$z=new fe("ListOption");let vre=(()=>{class i{constructor(e){this._elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(A(ct))},i.\u0275dir=xe({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),i})(),yre=(()=>{class i{constructor(e){this._elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(A(ct))},i.\u0275dir=xe({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),i})(),Wz=(()=>{class i{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return i.\u0275fac=function(e){return new(e||i)(A($z,8))},i.\u0275dir=xe({type:i,hostVars:4,hostBindings:function(e,n){2&e&&nn("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}}),i})(),bre=(()=>{class i extends Wz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[rt]}),i})(),xre=(()=>{class i extends Wz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[rt]}),i})();const wre=new fe("MAT_LIST_CONFIG");let OR=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=Nt(wre,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Yt(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Yt(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,hostVars:1,hostBindings:function(e,n){2&e&&yt("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),i})(),jz=(()=>{class i{set lines(e){this._explicitLines=xs(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=Yt(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=Yt(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,r,s,o,a){this._elementRef=e,this._ngZone=n,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new $t,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===a,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Nm(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(or(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();const n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===n),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===n),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===n;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!(!e.textContent||!e.textContent.trim()))}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at),A(OR,8),A(Ii),A(BI,8),A(Er,8))},i.\u0275dir=xe({type:i,contentQueries:function(e,n,r){if(1&e&&(Ni(r,bre,4),Ni(r,xre,4)),2&e){let s;St(s=Et())&&(n._avatars=s),St(s=Et())&&(n._icons=s)}},hostVars:4,hostBindings:function(e,n){2&e&&(yt("aria-disabled",n.disabled)("disabled",n._isButtonElement&&n.disabled||null),nn("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),i})();const Yz=new fe("SelectionList");let bC=(()=>{class i extends jz{get checkboxPosition(){return this.togglePosition}set checkboxPosition(e){this.togglePosition=e}get color(){return this._color||this._selectionList.color}set color(e){this._color=e}get value(){return this._value}set value(e){this.selected&&e!==this.value&&this._inputsInitialized&&(this.selected=!1),this._value=e}get selected(){return this._selectionList.selectedOptions.isSelected(this)}set selected(e){const n=Yt(e);n!==this._selected&&(this._setSelected(n),(n||this._selectionList.multiple)&&this._selectionList._reportValueChange())}constructor(e,n,r,s,o,a,l){super(e,n,r,s,a,l),this._selectionList=r,this._changeDetectorRef=o,this.selectedChange=new He,this.togglePosition="after",this._selected=!1,this._inputsInitialized=!1}ngOnInit(){const e=this._selectionList;e._value&&e._value.some(r=>e.compareWith(this._value,r))&&this._setSelected(!0);const n=this._selected;Promise.resolve().then(()=>{(this._selected||n)&&(this.selected=!0,this._changeDetectorRef.markForCheck())}),this._inputsInitialized=!0}ngOnDestroy(){super.ngOnDestroy(),this.selected&&Promise.resolve().then(()=>{this.selected=!1})}toggle(){this.selected=!this.selected}focus(){this._hostElement.focus()}getLabel(){return(this._titles?.get(0)?._elementRef.nativeElement||this._unscopedContent?.nativeElement)?.textContent||""}_hasCheckboxAt(e){return this._selectionList.multiple&&this._getTogglePosition()===e}_hasRadioAt(e){return!this._selectionList.multiple&&this._getTogglePosition()===e&&!this._selectionList.hideSingleSelectionIndicator}_hasIconsOrAvatarsAt(e){return this._hasProjected("icons",e)||this._hasProjected("avatars",e)}_hasProjected(e,n){return this._getTogglePosition()!==n&&("avatars"===e?0!==this._avatars.length:0!==this._icons.length)}_handleBlur(){this._selectionList._onTouched()}_getTogglePosition(){return this.togglePosition||"after"}_setSelected(e){return e!==this._selected&&(this._selected=e,e?this._selectionList.selectedOptions.select(this):this._selectionList.selectedOptions.deselect(this),this.selectedChange.emit(e),this._changeDetectorRef.markForCheck(),!0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_toggleOnInteraction(){this.disabled||(this._selectionList.multiple?(this.selected=!this.selected,this._selectionList._emitChangeEvent([this])):this.selected||(this.selected=!0,this._selectionList._emitChangeEvent([this])))}_setTabindex(e){this._hostElement.setAttribute("tabindex",e+"")}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at),A(Yz),A(Ii),A(Xn),A(BI,8),A(Er,8))},i.\u0275cmp=it({type:i,selectors:[["mat-list-option"]],contentQueries:function(e,n,r){if(1&e&&(Ni(r,yre,5),Ni(r,vre,5)),2&e){let s;St(s=Et())&&(n._lines=s),St(s=Et())&&(n._titles=s)}},viewQuery:function(e,n){if(1&e&&qn(ere,5),2&e){let r;St(r=Et())&&(n._unscopedContent=r.first)}},hostAttrs:["role","option",1,"mat-mdc-list-item","mat-mdc-list-option","mdc-list-item"],hostVars:25,hostBindings:function(e,n){1&e&&Ne("blur",function(){return n._handleBlur()})("click",function(){return n._toggleOnInteraction()}),2&e&&(yt("aria-selected",n.selected),nn("mdc-list-item--selected",n.selected&&!n._selectionList.multiple&&n._selectionList.hideSingleSelectionIndicator)("mdc-list-item--with-leading-avatar",n._hasProjected("avatars","before"))("mdc-list-item--with-leading-icon",n._hasProjected("icons","before"))("mdc-list-item--with-trailing-icon",n._hasProjected("icons","after"))("mat-mdc-list-option-with-trailing-avatar",n._hasProjected("avatars","after"))("mdc-list-item--with-leading-checkbox",n._hasCheckboxAt("before"))("mdc-list-item--with-trailing-checkbox",n._hasCheckboxAt("after"))("mdc-list-item--with-leading-radio",n._hasRadioAt("before"))("mdc-list-item--with-trailing-radio",n._hasRadioAt("after"))("mat-accent","primary"!==n.color&&"warn"!==n.color)("mat-warn","warn"===n.color)("_mat-animation-noopable",n._noopAnimations))},inputs:{togglePosition:"togglePosition",checkboxPosition:"checkboxPosition",color:"color",value:"value",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[Sn([{provide:jz,useExisting:i},{provide:$z,useExisting:i}]),rt],ngContentSelectors:_re,decls:20,vars:6,consts:[["icons",""],["checkbox",""],["radio",""],["class","mdc-list-item__start mat-mdc-list-option-checkbox-before",4,"ngIf"],["class","mdc-list-item__start mat-mdc-list-option-radio-before",4,"ngIf"],[3,"ngIf"],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],["class","mdc-list-item__end",4,"ngIf"],[1,"mat-mdc-focus-indicator"],[1,"mdc-checkbox"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","disabled"],[1,"mdc-checkbox__background"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],[1,"mdc-radio"],["type","radio",1,"mdc-radio__native-control",3,"checked","disabled"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],[1,"mdc-list-item__start","mat-mdc-list-option-checkbox-before"],[3,"ngTemplateOutlet"],[1,"mdc-list-item__start","mat-mdc-list-option-radio-before"],[1,"mdc-list-item__end"]],template:function(e,n){1&e&&(Zi(gre),me(0,tre,1,0,"ng-template",null,0,Fc),me(2,nre,6,4,"ng-template",null,1,Fc),me(4,ire,5,4,"ng-template",null,2,Fc),me(6,sre,2,1,"span",3),me(7,are,2,1,"span",4),me(8,cre,1,1,"ng-template",5),$(9,"span",6),Bt(10),Bt(11,1),$(12,"span",7,8),Ne("cdkObserveContent",function(){return n._updateItemLines(!0)}),Bt(14,2),Y()(),me(15,ure,2,1,"span",9),me(16,fre,2,1,"span",9),me(17,mre,1,1,"ng-template",5),Bt(18,3),Pe(19,"div",10)),2&e&&(G(6),V("ngIf",n._hasCheckboxAt("before")),G(1),V("ngIf",n._hasRadioAt("before")),G(1),V("ngIf",n._hasIconsOrAvatarsAt("before")),G(7),V("ngIf",n._hasCheckboxAt("after")),G(1),V("ngIf",n._hasRadioAt("after")),G(1),V("ngIf",n._hasIconsOrAvatarsAt("after")))},dependencies:[A3,vi,sy],styles:['.mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item,.mat-mdc-list-option-with-trailing-avatar.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end,.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-touch-target-wrapper{display:inline}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mat-mdc-list-option .mdc-checkbox[hidden]{display:none}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0}.mdc-checkbox--upgraded .mat-mdc-list-option .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__checkmark-path{stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mat-mdc-list-option .mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mat-mdc-list-option .mdc-radio[hidden]{display:none}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:""}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mat-mdc-list-option .mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mat-mdc-list-option .mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background,.mat-mdc-list-option [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__background{transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__mixedmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:focus+.mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox{padding:calc((40px - 18px) / 2);padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((40px - 40px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.38);border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:rgba(0, 0, 0, 0.38);background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__background{top:calc((40px - 18px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((40px - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-checkbox-state-layer-size, 40px);height:40px;height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio{padding:calc((40px - 20px) / 2);padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio .mdc-radio__background::before{top:calc(-1 * (40px - 20px) / 2);top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (40px - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}'],encapsulation:2,changeDetection:0}),i})();const Mre={provide:yo,useExisting:Ln(()=>xC),multi:!0};class Cre{constructor(t,e){this.source=t,this.options=e}}let xC=(()=>{class i extends OR{get multiple(){return this._multiple}set multiple(e){const n=Yt(e);n!==this._multiple&&(this._multiple=n,this.selectedOptions=new ER(this._multiple,this.selectedOptions.selected))}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=Yt(e)}constructor(e,n){super(),this._element=e,this._ngZone=n,this._initialized=!1,this._destroyed=new Fe,this._onChange=r=>{},this.selectionChange=new He,this.color="accent",this.compareWith=(r,s)=>r===s,this._multiple=!0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this.selectedOptions=new ER(this._multiple),this._onTouched=()=>{},this._selectionListDisabled=!1,this._handleFocusout=()=>{setTimeout(()=>{this._containsFocus()||this._resetActiveOption()})},this._handleFocusin=r=>{if(this.disabled)return;const s=this._items.toArray().findIndex(o=>o._elementRef.nativeElement.contains(r.target));s>-1?this._setActiveOption(s):this._resetActiveOption()},this._isNonInteractive=!1}ngAfterViewInit(){this._initialized=!0,this._setupRovingTabindex(),this._ngZone.runOutsideAngular(()=>{this._element.nativeElement.addEventListener("focusin",this._handleFocusin),this._element.nativeElement.addEventListener("focusout",this._handleFocusout)}),this._value&&this._setOptionsFromValues(this._value),this._watchForSelectionChange()}ngOnChanges(e){const n=e.disabled,r=e.disableRipple,s=e.hideSingleSelectionIndicator;(r&&!r.firstChange||n&&!n.firstChange||s&&!s.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._keyManager?.destroy(),this._element.nativeElement.removeEventListener("focusin",this._handleFocusin),this._element.nativeElement.removeEventListener("focusout",this._handleFocusout),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(e){this._element.nativeElement.focus(e)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_reportValueChange(){if(this.options&&!this._isDestroyed){const e=this._getSelectedOptionValues();this._onChange(e),this._value=e}}_emitChangeEvent(e){this.selectionChange.emit(new Cre(this,e))}writeValue(e){this._value=e,this.options&&this._setOptionsFromValues(e||[])}setDisabledState(e){this.disabled=e}get disabled(){return this._selectionListDisabled}set disabled(e){this._selectionListDisabled=Yt(e),this._selectionListDisabled&&this._keyManager?.setActiveItem(-1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}_watchForSelectionChange(){this.selectedOptions.changed.pipe(Ze(this._destroyed)).subscribe(e=>{for(let n of e.added)n.selected=!0;for(let n of e.removed)n.selected=!1;this._containsFocus()||this._resetActiveOption()})}_setOptionsFromValues(e){this.options.forEach(n=>n._setSelected(!1)),e.forEach(n=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,n));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(e=>e.selected).map(e=>e.value)}_markOptionsForCheck(){this.options&&this.options.forEach(e=>e._markForCheck())}_setAllOptionsSelected(e,n){const r=[];return this.options.forEach(s=>{(!n||!s.disabled)&&s._setSelected(e)&&r.push(s)}),r.length&&this._reportValueChange(),r}get options(){return this._items}_handleKeydown(e){const n=this._keyManager.activeItem;if(13!==e.keyCode&&32!==e.keyCode||this._keyManager.isTyping()||!n||n.disabled)if(65===e.keyCode&&this.multiple&&!this._keyManager.isTyping()&&Ho(e,"ctrlKey")){const r=this.options.some(s=>!s.disabled&&!s.selected);e.preventDefault(),this._emitChangeEvent(this._setAllOptionsSelected(r,!0))}else this._keyManager.onKeydown(e);else e.preventDefault(),n._toggleOnInteraction()}_setupRovingTabindex(){this._keyManager=new O3(this._items).withHomeAndEnd().withTypeAhead().withWrap().skipPredicate(()=>this.disabled),this._resetActiveOption(),this._keyManager.change.subscribe(e=>this._setActiveOption(e)),this._items.changes.pipe(Ze(this._destroyed)).subscribe(()=>{const e=this._keyManager.activeItem;(!e||!this._items.toArray().indexOf(e))&&this._resetActiveOption()})}_setActiveOption(e){this._items.forEach((n,r)=>n._setTabindex(r===e?0:-1)),this._keyManager.updateActiveItem(e)}_resetActiveOption(){if(this.disabled)return void this._setActiveOption(-1);const e=this._items.find(n=>n.selected&&!n.disabled)||this._items.first;this._setActiveOption(e?this._items.toArray().indexOf(e):-1)}_containsFocus(){const e=kM();return e&&this._element.nativeElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at))},i.\u0275cmp=it({type:i,selectors:[["mat-selection-list"]],contentQueries:function(e,n,r){if(1&e&&Ni(r,bC,5),2&e){let s;St(s=Et())&&(n._items=s)}},hostAttrs:["role","listbox",1,"mat-mdc-selection-list","mat-mdc-list-base","mdc-list"],hostVars:1,hostBindings:function(e,n){1&e&&Ne("keydown",function(s){return n._handleKeydown(s)}),2&e&&yt("aria-multiselectable",n.multiple)},inputs:{color:"color",compareWith:"compareWith",multiple:"multiple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator",disabled:"disabled"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[Sn([Mre,{provide:OR,useExisting:i},{provide:Yz,useExisting:i}]),rt,Mi],ngContentSelectors:Qie,decls:1,vars:0,template:function(e,n){1&e&&(Zi(),Bt(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0}),i})(),Sre=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[EI,vo,$n,Uy,tU,OU]}),i})();function Ere(i,t){if(1&i&&($(0,"mat-label"),ze(1),Y()),2&i){const e=pe(2);G(1),ci(e.resource.name)}}function Are(i,t){if(1&i&&($(0,"mat-list-option",5),ze(1),Y()),2&i){const e=t.$implicit,n=pe(2);V("value",e.key)("selected",n.resource.data[e.key])("disabled",n.disabled),G(1),Qi(" ",e.key," ")}}function Dre(i,t){if(1&i){const e=oi();os(0,1),me(1,Ere,2,1,"mat-label",2),$(2,"mat-selection-list",3),Ne("selectionChange",function(r){return an(e),ln(pe().onSelection(r))}),me(3,Are,2,4,"mat-list-option",4),Ht(4,"keyvalue"),Y(),as()}if(2&i){const e=pe();V("matTooltip",e.resourceDescription),G(1),V("ngIf",e.resource.name),G(1),V("disabled",e.disabled),G(1),V("ngForOf",Zt(4,4,e.resource.data))}}let Tre=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He}onSelection(e){for(const n of e.options)this.resource.data[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-flags-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],[3,"disabled","selectionChange"],[3,"value","selected","disabled",4,"ngFor","ngForOf"],[3,"value","selected","disabled"]],template:function(e,n){1&e&&me(0,Dre,5,6,"ng-container",0),2&e&&V("ngIf",n.resource)},dependencies:[_o,vi,Go,Ms,xC,bC,dN],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0}),i})();class FR{constructor(t=!1,e=qh.instance){this.parentClock=e,this.tickSub=null,this._tick$=new Fe,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,t&&this.start()}get tick$(){return this._tick$.pipe(Qe(([t,e])=>[e,e-t]))}get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get elapsedTime(){return this.isPaused?this.pausedAt-this.startedAt:this.parentClock.elapsedTime-this.startedAt}createChildClock(t){return new FR(t,this)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks())}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(Qe(([t,e])=>[this.oldRelativeTime,t-this.startedAt]),Ti(([t,e])=>this.oldRelativeTime=e)).subscribe(this._tick$)}stopListeningTicks(){var t;null===(t=this.tickSub)||void 0===t||t.unsubscribe(),this.tickSub=null}}class qh{constructor(){this._tick$=new Fe;let t=this.elapsedTime;st(void 0,o3).pipe(function Ire(i){let e,t=1/0;return null!=i&&("object"==typeof i?({count:t=1/0,delay:e}=i):t=i),t<=0?()=>Ls:zn((n,r)=>{let o,s=0;const a=()=>{if(o?.unsubscribe(),o=null,null!=e){const c="number"==typeof e?TM(e):sr(e(s)),u=Fn(r,()=>{u.unsubscribe(),l()});c.subscribe(u)}else l()},l=()=>{let c=!1;o=n.subscribe(Fn(r,void 0,()=>{++s<t?o?a():c=!0:r.complete()})),c&&a()};l()})}()).pipe(Qe(()=>[t,this.elapsedTime]),Ti(([e,n])=>t=n)).subscribe(this._tick$)}static get instance(){return qh._instance||(qh._instance=new qh),qh._instance}get tick$(){return this._tick$.pipe(Qe(([t,e])=>[e,e-t]))}get elapsedTime(){return(typeof performance>"u"?Date:performance).now()}createChildClock(t){return new FR(t,this)}}const Rre={transparent:!1,background:0,size:"fullscreen",antialias:!0};class kre{constructor(t,e,n={}){this.scene=t,this.canvas=e,this.entity=null,this.rendererOptions=Object.assign(Object.assign({},Rre),n||{})}}class Qy{constructor(t){this.data=t,this.adjacent=new Set}static fromArray(t,e=!1){const n=new Qy(t[0]);let r=n;for(let s=1;s<t.length;s++){const o=new Qy(t[s]);r.addAdjacent(o),r=o}return e&&r.addAdjacent(n),n}static fromSquareGrid(t){const e=t.map(n=>n.map(r=>new Qy(r)));for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)r>0&&e[n][r].addAdjacent(e[n][r-1]),n>0&&e[n][r].addAdjacent(e[n-1][r]);return e[0][0]}addAdjacent(t){return!this.adjacent.has(t)&&(this.adjacent.add(t),t.adjacent.add(this),!0)}removeAdjacent(t){return!!this.adjacent.has(t)&&(this.adjacent.delete(t),t.adjacent.delete(this),!0)}addEdge(t,e){return!!this.removeAdjacent(e)&&(this.addAdjacent(t),t.addAdjacent(e),!0)}removeEdge(t,e){return!(!t.adjacent.has(this)||!t.adjacent.has(e))&&(t.removeAdjacent(this),t.removeAdjacent(e),this.addAdjacent(e))}walkRead(t){const e=new Set,n=[[this,t]];for(e.add(this);n.length;){const r=n.shift(),[s,o]=r;if(0!==o){const a=Array.from(s.adjacent).filter(l=>!e.has(l));for(const l of a)e.add(l),n.push([l,o-1])}}return e}walkReadPreserveDepth(t){const e=new Set,n=[],r=[[this,t]];for(e.add(this);r.length;){const s=r.shift(),[o,a]=s,l=t-a;if(n[l]||(n[l]=new Set),n[l].add(o),0!==a){const c=Array.from(o.adjacent).filter(u=>!e.has(u));for(const u of c)e.add(u),r.push([u,a-1])}}return n}nodes(){return Array.from(this.walkRead(-1))}}var Kl=(()=>{return(i=Kl||(Kl={}))[i.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",i[i.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",i[i.OBJECTS_BINDING=400]="OBJECTS_BINDING",i[i.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",i[i.CONTROLLERS=800]="CONTROLLERS",i[i.RENDERING=1e3]="RENDERING",i[i.POST_RENDERING=1200]="POST_RENDERING",Kl;var i})();let Jy=(()=>{class i{constructor(){this.tick$=new Fe,this._world=null,this._name="e0x"+(i.default_name_counter++).toString(16),this._active=!0,this.parent=null,this._children=[],this._components=[],this._onSpawned$=new Fe,this._onRemoved$=new Fe}get world(){return this._world}get name(){return this._name}set name(e){this._name=e}get active(){return this._active}set active(e){this._active=e}get children(){return[...this._children]}addChildren(...e){for(const n of e)n.parent&&n.parent.removeChildren([n]),n.parent=this;if(this._children.push(...e),this._world)for(const n of e)this._world.addEntity(n)}removeChildren(e,n=!1){this._children=this._children.filter(r=>!e.includes(r));for(const r of e)r.parent=null,this._world&&this._world.removeEntity(r,n)}get components(){return[...this._components]}addComponents(...e){for(const n of e)n.entity&&n.entity.removeComponents([n]),n.entity=this;if(this._components.push(...e),this._world)for(const n of e)n.addToWorld(this._world)}removeComponents(e,n=!1){this._components=this._components.filter(r=>!e.includes(r));for(const r of e)r.entity=null,this._world&&r.removeFromWorld(this._world,n)}get onSpawned$(){return this._onSpawned$.asObservable()}get onRemoved$(){return this._onRemoved$.asObservable()}onSpawned(e){this._world=e;for(const n of this._components)n.addToWorld(e);for(const n of this._children)e.addEntity(n);this._onSpawned$.next()}onRemoved(){const e=this._world;this._world=null;for(const n of this._children)e.removeEntity(n);for(const n of this._components)n.removeFromWorld(e,!1);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this,!1),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const e of this._children)e.dispose();for(const e of this._components)e.dispose()}}return i.default_name_counter=0,i})();class Pre extends Jy{constructor(t){super(),this.tickOrder=t}}function wC(i,t=Kl.CONTROLLERS){const e=new Pre(t);return i.addEntity(e),e.tick$.pipe(Kd(()=>{i.removeEntity(e,!0)}))}class Ore extends Jy{constructor(t){super(),this.renderer=t,this.tickOrder=Kl.RENDERING,this._rendererSize$=new At(null),this.addComponents(t),this.tick$.subscribe(()=>{this.renderer.render()})}get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}get rendererOptions(){return this.renderer.rendererOptions}onSpawned(t){this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||"function"==typeof this.rendererOptions.size?(this.renderer.canvas&&(this.renderer.canvas.style.position="absolute"),or(Ma(window,"resize").pipe(IM(100)),Ma(window,"orientationchange")).pipe(Ze(this._onRemoved$),Qe(()=>({x:window.innerWidth,y:window.innerHeight})),Uo({x:window.innerWidth,y:window.innerHeight})).subscribe(e=>{this._rendererSize$.next("function"==typeof this.rendererOptions.size?this.rendererOptions.size(e):e)})):this.rendererOptions.size instanceof An||void 0!==this.rendererOptions.size.subscribe&&void 0!==this.rendererOptions.size.pipe?this.rendererOptions.size.pipe(Ze(this._onRemoved$)).subscribe(e=>{this._rendererSize$.next(e)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(Ze(this._onRemoved$),$c((e,n)=>e?.x==n?.x&&e?.y==n?.y)).subscribe(e=>{e&&this.renderer.resizeRenderer(e)}),super.onSpawned(t)}dispose(){super.dispose(),this._rendererSize$.complete()}}const LR=i=>{i.updateVisibility?i.updateVisibility():qz(i)},qz=i=>{for(const t of i.children)LR(t)};class Fre extends Jy{constructor(){super(...arguments),this._visible=!0}get visible(){return this._visible}get worldVisible(){let t=this;for(;;){if(!1===t.visible)return!1;if(!t.parent)break;t=t.parent}return!0}set visible(t){this._visible=t,this.updateVisibility()}updateVisibility(){qz(this)}addChildren(...t){super.addChildren(...t);for(const e of t)LR(e)}removeChildren(t,e=!1){if(super.removeChildren(t,e),!e)for(const n of t)LR(n)}}class NR{constructor(){this._running=!1,this.stop$=new Fe}get running(){return this._running}start(...t){this.running||(this.startInternal(...t),this._running=!0)}stop(...t){this.running&&(this.stop$.next(),this.stopInternal(...t),this._running=!1)}stopInternal(...t){}}class Lre extends NR{constructor(t,e){super(),this.keyboard=t,this.keymap=e,this._output$=new Fe}get output$(){return this._output$.asObservable()}startInternal(){const t=[[],[],[],[]];this.keymap.includes("wasd")&&(t[0].push("KeyW"),t[1].push("KeyA"),t[2].push("KeyS"),t[3].push("KeyD")),this.keymap.includes("arrows")&&(t[0].push("ArrowUp"),t[1].push("ArrowLeft"),t[2].push("ArrowDown"),t[3].push("ArrowRight")),Yd(t.map(e=>this.keyboard.bindMany(...e))).pipe(Ze(this.stop$),Qe(e=>{const n={};if(e.includes(!0)){const[r,s,o,a]=e;r!=o&&(n.upDown=r),s!=a&&(n.leftRight=s)}return n})).subscribe(e=>this._output$.next(e))}}const MC=new An(hs);class Nre extends NR{constructor(){super(),this.bindings={},this.skipKeyDownsOnExternalFocus=!0,this.externalFocusBlacklist=[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement,HTMLButtonElement],this.handleKeys=this.handleKeys.bind(this),this.resetAllKeys=this.resetAllKeys.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this)}startInternal(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys),window.addEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange)}stopInternal(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange),this.resetAllKeys()}bind(t){this.bindings[t]||(this.bindings[t]=[]);const e=new At(!1);return this.bindings[t].push(e),e.pipe($c(),Kd(()=>{this.bindings[t].splice(this.bindings[t].indexOf(e),1),e.complete()}))}bindMany(...t){if(0==t.length)return console.warn("[KeyboardController] bindMany called without any key code"),MC;if(1==t.length)return this.bind(t[0]);const e=[];for(const n of t){this.bindings[n]||(this.bindings[n]=[]);const r=new At(!1);this.bindings[n].push(r),e.push(r)}return Yd(e).pipe(Kd(()=>{for(let n=0;n<t.length;n++)this.bindings[t[n]].splice(this.bindings[t[n]].indexOf(e[n]),1),e[n].complete()}),Qe(n=>n.includes(!0)),$c())}emulateKeyDown(t){if(this.running)for(const e of this.bindings[t]||[])e.next(!0)}emulateKeyUp(t){if(this.running)for(const e of this.bindings[t]||[])e.next(!1)}emulateKeyPress(t){this.emulateKeyDown(t),this.emulateKeyUp(t)}handleKeys(t){if("keydown"!=t.type&&"keyup"!=t.type)return;const e="keydown"==t.type;if(e&&this.skipKeyDownsOnExternalFocus&&document.activeElement)for(const n of this.externalFocusBlacklist)if(document.activeElement instanceof n)return;for(const n of this.bindings[t.code]||[])n.next(e)}onPointerLockChange(){document.pointerLockElement||this.resetAllKeys()}resetAllKeys(){for(const t in this.bindings)for(const e of this.bindings[t]||[])e.next(!1)}}class Tr{static get O(){return{x:0,y:0}}static get X(){return{x:1,y:0}}static get Y(){return{x:0,y:1}}static get nX(){return{x:-1,y:0}}static get nY(){return{x:0,y:-1}}static clone(t){return{x:t.x,y:t.y}}static spr(t){return[t.x,t.y]}static neg(t){return{x:-t.x,y:-t.y}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y}}static scale(t,e){return{x:t.x*e.x,y:t.y*e.y}}static avg(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}static round(t){return{x:Math.round(t.x),y:Math.round(t.y)}}static lenSq(t){return t.x*t.x+t.y*t.y}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static dist(t,e){return Tr.len(Tr.sub(t,e))}static norm(t){const e=Tr.len(t);return{x:t.x/e,y:t.y/e}}static scalarMult(t,e){return{x:t.x*e,y:t.y*e}}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}static angle(t,e){const n=t.x*e.x+t.y*e.y,r=Math.sqrt(t.x**2+t.y**2)*Math.sqrt(e.x**2+e.y**2);return Math.acos(n/r)}static rot(t,e){const n=Math.cos(e),r=Math.sin(e);return{x:t.x*n-t.y*r,y:t.x*r+t.y*n}}static rotAround(t,e,n){const r=Math.cos(n),s=Math.sin(n),o_x=t.x-e.x,o_y=t.y-e.y;return{x:o_x*r-o_y*s+e.x,y:o_x*s+o_y*r+e.y}}}const Ure={pointerLock:!1};var Cs=(()=>{return(i=Cs||(Cs={}))[i.NONE=0]="NONE",i[i.DRAG=1]="DRAG",i[i.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",i[i.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",i[i.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",Cs;var i})();class Ym extends NR{constructor(t={}){super(),this._wheel$=null,this._delta$=new Fe,this._position$=new At(Tr.O),this._multiTouchPositions$=new At([]),this.stopped$=new Fe,this._state$=new At(Cs.NONE),this.options=Object.assign(Object.assign({},Ure),t),this.canvasClickListener=this.canvasClickListener.bind(this)}static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$||(this._wheel$=Ma(this._element,"wheel",{passive:!1}).pipe(Ze(this.stopped$),Kd(()=>this._wheel$=null),Ti(t=>t.preventDefault()),Qe(t=>t.deltaY),Ou())),this._wheel$}get isPointerLocked(){return!!document.pointerLockElement}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(bs(t=>t==Cs.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:MC),Qe(t=>t.map(e=>({x:e.x,y:e.y}))),function Bre(){return zn((i,t)=>{let e,n=!1;i.subscribe(Fn(t,r=>{const s=e;e=r,n&&t.next([s,r]),n=!0}))})}(),Dn(([t,e])=>t.length>1&&e.length>1),Qe(([t,e])=>({centerPointDelta:Tr.sub(Tr.scalarMult(e.reduce((n,r)=>Tr.add(n,r),Tr.O),1/e.length),Tr.scalarMult(t.reduce((n,r)=>Tr.add(n,r),Tr.O),1/e.length)),angleDelta:Tr.angle(e[1],e[0])-Tr.angle(t[1],t[0]),distanceDelta:Tr.dist(e[1],e[0])-Tr.dist(t[1],t[0])})))}get _element(){return this.options.canvas||window}startInternal(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(Cs.NONE);const t=[Cs.DRAG,Cs.DRAG_MIDDLE_BUTTON,Cs.DRAG_RIGHT_BUTTON],e=[Cs.NONE,Cs.DRAG,Cs.DRAG_TOUCH_TWO_FINGERS],n=[],r={};Ma(this._element,"mousemove").pipe(Ze(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),Ma(this._element,"pointermove").pipe(Ze(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!Ym.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<n.length;a++)if(n[a].pointerId==o.pointerId){n.splice(a,1);break}0===n.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),this._element.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(e[Math.min(n.length,2)])};Ma(this._element,"pointerdown").pipe(Ze(this.stopped$)).subscribe(o=>{0===n.length&&(this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),this._element.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)),n.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(e[Math.min(n.length,2)])):this._state$.next(t[o.button]||Cs.NONE)}),Ma(this._element,"contextmenu").pipe(Ze(this.stopped$)).subscribe(o=>{o.preventDefault()})}stopInternal(t=!0){this.stopped$.next(),t&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())}canvasClickListener(){this.options.canvas.requestPointerLock()}}class Vre{static lookAt(t,e,n){let r=mt.sub(t,e);r=0===mt.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):mt.norm(r);let s=mt.cross(n,r);0===mt.lenSq(s)&&(r=1===Math.abs(n.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=mt.norm(r),s=mt.cross(n,r)),s=mt.norm(s);let o=mt.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}class $r{static get O(){return{x:0,y:0,z:0,w:1}}static clone(t){return{x:t.x,y:t.y,z:t.z,w:t.w}}static spr(t){return[t.x,t.y,t.z,t.w]}static add(t,e){const n=t.w+e.w,r=t.x+e.x,s=t.y+e.y,o=t.z+e.z,a=Math.sqrt(n*n+r*r+s*s+o*o);return{w:n/a,x:r/a,y:s/a,z:o/a}}static mult(t,e){return{w:t.w*e.w-t.x*e.x-t.y*e.y-t.z*e.z,x:t.w*e.x+t.x*e.w+t.y*e.z-t.z*e.y,y:t.w*e.y-t.x*e.z+t.y*e.w+t.z*e.x,z:t.w*e.z+t.x*e.y-t.y*e.x+t.z*e.w}}static conjugate(t){return{x:-t.x,y:-t.y,z:-t.z,w:t.w}}static opposite(t){return{x:-t.x,y:-t.y,z:-t.z,w:-t.w}}static combineRotations(...t){let e={w:1,x:0,y:0,z:0};for(const n of t)e=this.mult(e,n);return e}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y),z:t.z+n*(e.z-t.z),w:t.w+n*(e.w-t.w)}}static slerp(t,e,n){let s=Math.acos(t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w),o=Math.sin(s),a=t.x*Math.sin((1-n)*s)/o+e.x*Math.sin(n*s)/o,l=t.y*Math.sin((1-n)*s)/o+e.y*Math.sin(n*s)/o,c=t.z*Math.sin((1-n)*s)/o+e.z*Math.sin(n*s)/o,u=t.w*Math.sin((1-n)*s)/o+e.w*Math.sin(n*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(u)?$r.clone(t):{x:a,y:l,z:c,w:u}}static fromAngle(t,e){const n=e/2,r=Math.sin(n);return Object.assign(Object.assign({},mt.scalarMult(t,r)),{w:Math.cos(n)})}static fromMatrix4(t){const e=t[0],n=t[4],r=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=e+o+u;if(h>0){const p=.5/Math.sqrt(h+1);return{x:(c-a)*p,y:(r-l)*p,z:(s-n)*p,w:.25/p}}if(e>o&&e>u){const p=2*Math.sqrt(1+e-o-u);return{x:.25*p,y:(n+s)/p,z:(r+l)/p,w:(c-a)/p}}if(o>u){const p=2*Math.sqrt(1+o-e-u);return{x:(n+s)/p,y:.25*p,z:(a+c)/p,w:(r-l)/p}}{const p=2*Math.sqrt(1+u-e-o);return{x:(r+l)/p,y:(a+c)/p,z:.25*p,w:(s-n)/p}}}static fromEuler(t){const e=t.x,n=t.y,r=t.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*n),l=Math.sin(.5*n),c=Math.cos(.5*e),u=Math.sin(.5*e);return{w:c*a*s+u*l*o,x:u*a*s-c*l*o,y:c*l*s+u*a*o,z:c*a*o-u*l*s}}static toEuler(t){const e=t.w,n=t.x,r=t.y,s=t.z,c=2*(e*r-s*n);return{x:Math.atan2(2*(e*n+r*s),1-2*(n*n+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(e*s+n*r),1-2*(r*r+s*s))}}static lookAt(t,e,n=mt.Z){return this.fromMatrix4(Vre.lookAt(t,e,n))}static rotAround(t,e,n){const r=Math.sin(n/2),s={w:Math.cos(n/2),x:e.x*r,y:e.y*r,z:e.z*r};return this.mult(s,t)}}class mt{static get O(){return{x:0,y:0,z:0}}static get X(){return{x:1,y:0,z:0}}static get Y(){return{x:0,y:1,z:0}}static get Z(){return{x:0,y:0,z:1}}static get nX(){return{x:-1,y:0,z:0}}static get nY(){return{x:0,y:-1,z:0}}static get nZ(){return{x:0,y:0,z:-1}}static clone(t){return{x:t.x,y:t.y,z:t.z}}static spr(t){return[t.x,t.y,t.z]}static neg(t){return{x:-t.x,y:-t.y,z:-t.z}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}}static scale(t,e){return{x:t.x*e.x,y:t.y*e.y,z:t.z*e.z}}static avg(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2,z:(t.z+e.z)/2}}static round(t){return{x:Math.round(t.x),y:Math.round(t.y),z:Math.round(t.z)}}static lenSq(t){return t.x*t.x+t.y*t.y+t.z*t.z}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static dist(t,e){return mt.len(mt.sub(t,e))}static cross(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return{x:r*l-s*a,y:s*o-n*l,z:n*a-r*o}}static norm(t){const e=mt.len(t);return 0===e?t:{x:t.x/e,y:t.y/e,z:t.z/e}}static scalarMult(t,e){return{x:t.x*e,y:t.y*e,z:t.z*e}}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y),z:t.z+n*(e.z-t.z)}}static angle(t,e){const n=t.x*e.x+t.y*e.y+t.z*e.z,r=Math.sqrt(t.x**2+t.y**2+t.z**2)*Math.sqrt(e.x**2+e.y**2+e.z**2);return Math.acos(n/r)}static rot(t,e){const{x:n,y:r,z:s}=t;return{x:e.w*e.w*n+2*e.y*e.w*s-2*e.z*e.w*r+e.x*e.x*n+2*e.y*e.x*r+2*e.z*e.x*s-e.y*e.y*n-e.z*e.z*n,y:2*e.x*e.y*n+e.y*e.y*r+2*e.z*e.y*s+2*e.w*e.z*n-e.z*e.z*r+e.w*e.w*r-2*e.x*e.w*s-e.x*e.x*r,z:2*e.x*e.z*n+2*e.y*e.z*r+e.z*e.z*s-2*e.w*e.y*n-e.y*e.y*s+2*e.w*e.x*r-e.x*e.x*s+e.w*e.w*s}}static rotAround(t,e,n){return this.rot(t,$r.fromAngle(e,n))}static toSpherical(t){const e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return{radius:e,theta:0==e?0:Math.atan2(t.y,t.x),phi:0==e?0:Math.atan2(Math.sqrt(t.x*t.x+t.y*t.y),t.z)}}static fromSpherical(t){return{x:t.radius*Math.sin(t.phi)*Math.cos(t.theta),y:t.radius*Math.sin(t.phi)*Math.sin(t.theta),z:t.radius*Math.cos(t.phi)}}}var eb=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};let CC=(()=>{class i{constructor(e,n){this.visualScene=e,this.physicsWorld=n,this.worldClock=qh.instance.createChildClock(!1),this.keyboardInput=new Nre,this.name="w0x"+(i.default_name_counter++).toString(16),this.children=[],this.tickListeners=[],i._documentWorlds.push(this),this.keyboardInput.start(),window.ggstatic&&(window.ggstatic.registerConsoleCommand(this,"show_debugger",(...r)=>eb(this,void 0,void 0,function*(){return window.ggstatic.showDebugControls=["1","true","+"].includes(r[0]),""+window.ggstatic.showDebugControls}),"args: [0 or 1]; turn on/off debug panel. Default value is 0"),window.ggstatic.registerConsoleCommand(this,"show_stats",(...r)=>eb(this,void 0,void 0,function*(){return window.ggstatic.showStats=["1","true","+"].includes(r[0]),""+window.ggstatic.showStats}),"args: [0 or 1]; turn on/off stats. Default value is 0"),window.ggstatic.registerConsoleCommand(this,"ph_timescale",(...r)=>eb(this,void 0,void 0,function*(){return this.physicsWorld.timeScale=+r[0],JSON.stringify(this.physicsWorld.timeScale)}),"args: [float]; change time scale of physics engine. Default value is 1.0"),window.ggstatic.registerConsoleCommand(this,"dr_drawphysics",(...r)=>eb(this,void 0,void 0,function*(){return this.physicsDebugViewActive=["1","true","+"].includes(r[0]),""+this.physicsWorld.physicsDebugViewActive}),"args: [0 or 1]; turn on/off physics debug view. Default value is 0"))}static get documentWorlds(){return[...i._documentWorlds]}init(){return eb(this,void 0,void 0,function*(){yield Promise.all([this.physicsWorld.init(),this.visualScene.init()]),this.worldClock.tick$.subscribe(([e,n])=>{let r=0;for(;r<this.tickListeners.length&&!(this.tickListeners[r].tickOrder>=Kl.PHYSICS_SIMULATION);r++)this.tickListeners[r].active&&this.tickListeners[r].tick$.next([e,n]);for(this.physicsWorld.simulate(n);r<this.tickListeners.length;r++)this.tickListeners[r].active&&this.tickListeners[r].tick$.next([e,n])})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(e){return this.worldClock.createChildClock(e)}dispose(){window.ggstatic&&window.ggstatic.deregisterWorldCommands(this),this.worldClock.stop(),this.keyboardInput.stop();for(let e=0;e<this.children.length;e++)this.children[e].onRemoved(),this.children[e].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld.dispose(),this.visualScene.dispose()}addEntity(e){e.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(e),this.tickListeners.push(e),this.tickListeners.sort((n,r)=>n.tickOrder-r.tickOrder),e.onSpawned(this))}removeEntity(e,n=!1){if(e.world){if(e.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(r=>r===e),1),this.tickListeners.splice(this.tickListeners.findIndex(r=>r===e),1),e.onRemoved()}n&&e.dispose()}get physicsDebugViewActive(){return this.physicsWorld.physicsDebugViewActive}set physicsDebugViewActive(e){if(this.physicsDebugViewActive!==e)if(e){const n=this.visualScene.debugPhysicsDrawerClass;if(!n)throw new Error("Debug drawer is not available");this.physicsWorld.startDebugger(this,new n)}else this.physicsWorld.stopDebugger(this)}}return i.default_name_counter=0,i._documentWorlds=[],i})();class Hre extends kre{}class Xz extends Fre{}class lu extends Xz{constructor(t,e=null){if(super(),this.object3D=t,this.objectBody=e,this.tickOrder=Kl.OBJECTS_BINDING,this._position=mt.O,this._rotation=$r.O,e)this.tick$.subscribe(()=>{this.runTransformBinding(e,t)}),this.runTransformBinding(e,t),this.name=e.name;else{if(!t)throw new Error("Cannot create entity without a mesh and a body");this._position=t.position,this._rotation=t.rotation,this.name=t.name}e&&this.addComponents(e),t&&this.addComponents(t)}get position(){return this._position}set position(t){this.object3D&&(this.object3D.position=t),this.objectBody&&(this.objectBody.position=t),this._position=t}get rotation(){return this._rotation}set rotation(t){this.object3D&&(this.object3D.rotation=t),this.objectBody&&(this.objectBody.rotation=t),this._rotation=t}updateVisibility(){this.object3D&&(this.object3D.visible=this.worldVisible),super.updateVisibility()}runTransformBinding(t,e){const n=t.position,r=t.rotation;e&&(e.position=n,e.rotation=r),this._position=n,this._rotation=r}}function Qz(i,t=Ty,e){const n=TM(i,t);return function Gre(i,t){return zn((e,n)=>{const{leading:r=!0,trailing:s=!1}=t??{};let o=!1,a=null,l=null,c=!1;const u=()=>{l?.unsubscribe(),l=null,s&&(m(),c&&n.complete())},h=()=>{l=null,c&&n.complete()},p=g=>l=sr(i(g)).subscribe(Fn(n,u,h)),m=()=>{if(o){o=!1;const g=a;a=null,n.next(g),!c&&p(g)}};e.subscribe(Fn(n,g=>{o=!0,a=g,(!l||l.closed)&&(r?m():p(g))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&n.complete()}))})}(()=>n,e)}class tb extends Qy{static fromMapArray(t,e=!1){const n=new tb(t[0]);let r=n;for(let s=1;s<t.length;s++){const o=new tb(t[s]);r.addAdjacent(o),r=o}return e&&r.addAdjacent(n),n}static fromMapSquareGrid(t){const e=t.map(n=>n.map(r=>new tb(r)));for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)r>0&&e[n][r].addAdjacent(e[n][r-1]),n>0&&e[n][r].addAdjacent(e[n-1][r]);return e[0][0]}getNearestDummy(t,e){let n=1/0,r=this;return t.forEach(s=>{let o=Math.sqrt(Math.pow(e.x-s.data.position.x,2)+Math.pow(e.y-s.data.position.y,2)+Math.pow(e.z-s.data.position.z,2));o<n&&(n=o,r=s)}),r}nodes(){return Array.from(this.walkRead(-1))}}const Wre={loadDepth:5,inertia:0};class jre extends Xz{constructor(t,e={}){super(),this.mapGraph=t,this.tickOrder=Kl.POST_RENDERING,this.loaderCursorEntity$=new At(null),this.loaded=new Map,this._initialLoadComplete$=new At(!1),this._nearestDummy$=new At(null),this._chunkLoaded$=new Fe,this._world=null,this.options=Object.assign(Object.assign({},Wre),e),this.mapGraphNodes=t.nodes()}get initialLoadComplete$(){return this._initialLoadComplete$.asObservable()}get nearestDummy(){return this._nearestDummy$.getValue()}get chunkLoaded$(){return this._chunkLoaded$.asObservable()}get world(){return this._world}onSpawned(t){super.onSpawned(t),this.loaderCursorEntity$.pipe(Ze(this._onRemoved$),bs(e=>e?this.tick$.pipe(Uo(null),Ze(e.onRemoved$),Qz(1e3),Qe(()=>e.position)):MC),Qe(e=>this.mapGraph.getNearestDummy(this.mapGraphNodes,e)),Ti(e=>this._nearestDummy$.next(e)),$c()).subscribe(e=>{let r,n=new Set;if(this.options.inertia>0){r=new Set;const s=e.walkReadPreserveDepth(this.options.loadDepth+this.options.inertia);for(let o=0;o<s.length;o++)s[o].forEach(a=>r.add(a.data)),o<=this.options.loadDepth&&s[o].forEach(a=>n.add(a.data))}else e.walkRead(this.options.loadDepth).forEach(s=>n.add(s.data)),r=n;for(const s of this.loaded.keys())r.has(s)?n.delete(s):this.disposeChunk(s);Promise.all(Array.from(n.keys()).map(s=>this.loadChunk(s))).then(()=>this._initialLoadComplete$.next(!0))})}onRemoved(){super.onRemoved(),this.loaderCursorEntity$.next(null)}loadChunk(t){return function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){const e=yield this.world.loader.loadGgGlb(t.path,Object.assign({position:t.position,rotation:t.rotation||$r.O},t.loadOptions)),n=[...e.entities,...(e.props||[]).map(r=>r.entities).reduce((r,s)=>(r.push(...s),r),[])];return this.loaded.set(t,n),this.addChildren(...n),this._chunkLoaded$.next([e,{position:t.position,rotation:t.rotation||$r.O}]),[n,e]})}disposeChunk(t){this.loaded.has(t)&&(this.removeChildren(this.loaded.get(t),!0),this.loaded.delete(t))}}class Yre extends Ore{get position(){return this.renderer.camera.position}set position(t){this.renderer.camera.position=t}get rotation(){return this.renderer.camera.rotation}set rotation(t){this.renderer.camera.rotation=t}get camera(){return this.renderer.camera}}var eH=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};const tH={keymap:"wasd",movementOptions:{speed:.5},mouseOptions:{},ignoreMouseUnlessPointerLocked:!1,ignoreKeyboardUnlessPointerLocked:!1};class Xre extends Jy{constructor(t,e,n={}){super(),this.keyboard=t,this.camera=e,this.tickOrder=Kl.INPUT_CONTROLLERS,this.options=Object.assign(Object.assign({},tH),n),n.mouseOptions&&(this.options.movementOptions=Object.assign(Object.assign({},tH.movementOptions),n.mouseOptions)),this.mouseInput=new Ym(n.mouseOptions),this.directionsInput=new Lre(t,this.options.keymap)}onSpawned(t){const e=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return eH(this,void 0,void 0,function*(){yield e.onSpawned.call(this,t);let n={direction:{},rest:[]};const r=["KeyE","KeyQ"];this.camera.camera.supportsFov&&r.push("KeyZ","KeyC"),r.push("ShiftLeft"),this.directionsInput.output$.pipe(Ze(this._onRemoved$)).subscribe(a=>{n.direction=a}),Yd(r.map(a=>this.keyboard.bind(a))).pipe(Ze(this._onRemoved$)).subscribe(a=>{n.rest=a});let s=Tr.O,o=Ym.isTouchDevice();this.mouseInput.delta$.pipe(Ze(this._onRemoved$),Dn(()=>o||!this.options.ignoreMouseUnlessPointerLocked||this.mouseInput.isPointerLocked)).subscribe(a=>{s=Tr.add(s,a)}),this.camera.tick$.pipe(Ze(this._onRemoved$)).subscribe(()=>{let a=n;this.options.ignoreKeyboardUnlessPointerLocked&&!this.mouseInput.isPointerLocked&&(a={direction:{},rest:[!1,!1,!1,!1,!1]});let l=Object.assign({},mt.O);const[c,u,h,p,m]=a.rest;void 0!==a.direction.upDown&&(l.z=a.direction.upDown?-1:1),void 0!==a.direction.leftRight&&(l.x=a.direction.leftRight?-1:1),c!=u&&(l.y=u?-1:1),h!=p&&(this.camera.camera.fov+=h?1:-1);let g=this.options.movementOptions.speed;if(m&&(g*=2.5),this.camera.position=mt.add(this.camera.position,mt.rot(mt.scalarMult(mt.norm(l),g),this.camera.rotation)),0!=s.x||0!=s.y){const b=mt.toSpherical(mt.rot({x:0,y:0,z:-1},this.camera.rotation));b.theta-=s.x/300,b.phi+=s.y/300,b.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,b.phi)),this.camera.rotation=$r.lookAt(this.camera.position,mt.add(this.camera.position,mt.fromSpherical(b))),s=Tr.O}}),yield this.mouseInput.start(),yield this.directionsInput.start()})}onRemoved(){const t=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return eH(this,void 0,void 0,function*(){yield t.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var nH=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};const Kre={mouseOptions:{},orbiting:{sensitivityX:1,sensitivityY:1},zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class Zre extends Jy{constructor(t,e={}){super(),this.camera=t,this.tickOrder=Kl.INPUT_CONTROLLERS,this.spherical={phi:0,radius:10,theta:0},this.target=mt.O,this.options=Object.assign(Object.assign({},Kre),e),this.mouseInput=new Ym(this.options.mouseOptions)}get radius(){return this.spherical.radius}set radius(t){this.spherical.radius=t}get phi(){return this.spherical.phi}set phi(t){this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,t))}get theta(){return this.spherical.theta}set theta(t){this.spherical.theta=t}onSpawned(t){const e=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return nH(this,void 0,void 0,function*(){yield e.onSpawned.call(this,t),this.spherical=mt.toSpherical(mt.sub(this.camera.position,this.target)),this.options.orbiting&&this.mouseInput.delta$.pipe(Ze(this._onRemoved$),Dn(()=>this.mouseInput.state==Cs.DRAG)).subscribe(r=>{this.spherical.theta-=r.x*this.options.orbiting.sensitivityX*Math.PI/900,this.spherical.phi-=r.y*this.options.orbiting.sensitivityY*Math.PI/900,this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.spherical.phi))}),this.options.zooming&&this.mouseInput.wheel$.pipe(Ze(this._onRemoved$)).subscribe(r=>{0!=r&&(this.spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const n=r=>{const s=mt.fromSpherical(this.spherical),o=mt.rotAround(s,{x:-Math.sin(this.spherical.theta),y:Math.cos(this.spherical.theta),z:0},Math.PI/2),a=mt.rotAround(s,mt.norm(o),Math.PI/2);this.target=mt.add(this.target,mt.add(mt.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),mt.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(Ze(this._onRemoved$),Dn(()=>this.mouseInput.state==Cs.DRAG_RIGHT_BUTTON)).subscribe(r=>{n(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(Ze(this._onRemoved$),Dn(()=>this.mouseInput.state==Cs.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this.spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),Ym.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(Ze(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this.spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&n(r.centerPointDelta)}),this.camera.tick$.pipe(Ze(this._onRemoved$),Qe(()=>this.spherical)).subscribe(r=>{this.camera.position=mt.add(this.target,mt.fromSpherical(r)),this.camera.rotation=$r.lookAt(this.camera.position,this.target)}),yield this.mouseInput.start()})}onRemoved(){const t=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return nH(this,void 0,void 0,function*(){yield t.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class Jre{randomColor(){return Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())}createPlane(t={}){return this.createPrimitive({shape:"PLANE"},t)}createBox(t,e={}){return this.createPrimitive({shape:"BOX",dimensions:t},e)}createCapsule(t,e,n={}){return this.createPrimitive({shape:"CAPSULE",radius:t,centersDistance:e},n)}createCylinder(t,e,n={}){return this.createPrimitive({shape:"CYLINDER",radius:t,height:e},n)}createCone(t,e,n={}){return this.createPrimitive({shape:"CONE",radius:t,height:e},n)}createSphere(t,e={}){return this.createPrimitive({shape:"SPHERE",radius:t},e)}}var VR=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})},cu=(()=>{return(i=cu||(cu={}))[i.Nothing=0]="Nothing",i[i.Files=1]="Files",i[i.Entities=2]="Entities",cu;var i})();const iH={cachingStrategy:cu.Nothing,position:mt.O,rotation:$r.O,loadProps:!0},rH=i=>({meta:i.meta,resources:i.resources.map(({object3D:t,body:e})=>({object3D:t&&t.clone(),body:e&&e.clone()}))});class ese{constructor(t){this.world=t,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(t,e=!1){return VR(this,void 0,void 0,function*(){if(e&&this.filesCache.has(t))return this.filesCache.get(t);const n=Promise.all([fetch(`${t}.glb`).then(s=>s.arrayBuffer()),fetch(`${t}.meta`).then(s=>s.text()).then(s=>JSON.parse(s))]);e&&this.filesCache.set(t,n);const r=yield n;return e&&this.filesCache.set(t,r),r})}loadGgGlbResources(t,e=cu.Nothing){return VR(this,void 0,void 0,function*(){if(e==cu.Entities&&this.loadResultCache.has(t)){const l=this.loadResultCache.get(t),c=l instanceof Promise?yield l:l;return rH(c)}const[n,r]=yield this.loadGgGlbFiles(t,e==cu.Files);if(!n)throw new Error("GLB not found");const[s,o]=yield Promise.all([this.world.visualScene.loader.loadFromGgGlb(n,r),this.world.physicsWorld.loader.loadFromGgGlb(n,r)]),a={resources:[],meta:r};if(!s)return a;if(0==o.length)a.resources.push({object3D:s,body:null});else if(1==o.length)a.resources.push({object3D:s,body:o[0]});else{for(const l of o)a.resources.push({object3D:s.popChild(l.name),body:l});s.isEmpty()||a.resources.push({object3D:s,body:null})}return e==cu.Entities&&this.loadResultCache.set(t,rH(a)),a})}loadGgGlb(t,e=iH){return VR(this,void 0,void 0,function*(){const n=Object.assign(Object.assign({},iH),e),{resources:r,meta:s}=yield this.loadGgGlbResources(t,n.cachingStrategy),o={entities:r.map(({object3D:a,body:l})=>new lu(a,l)),meta:s};return n.loadProps&&(o.props=yield Promise.all(s.dummies.filter(a=>a.is_prop||a.is_scene).map(a=>this.loadGgGlb(a.is_prop?(n.propsPath||t.substring(0,t.lastIndexOf("/")+1))+a.prop_id:a.scene_id,{loadProps:!!a.is_scene,position:mt.add(mt.rot(a.position,n.rotation),n.position),rotation:$r.combineRotations(a.rotation,n.rotation)})))),o.entities.forEach(a=>{a.position=mt.add(mt.rot(mt.clone(a.position),n.rotation),n.position),a.rotation=$r.mult($r.clone(a.rotation),n.rotation)}),o})}}class sH extends CC{constructor(t,e){super(t,e),this.visualScene=t,this.physicsWorld=e,this.loader=new ese(this),window.ggstatic&&window.ggstatic.registerConsoleCommand(this,"ph_gravity",(...n)=>function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){return 1==n.length&&(n=["0","0",""+-+n[0]]),n.length>0&&(this.physicsWorld.gravity={x:+n[0],y:+n[1],z:+n[2]}),JSON.stringify(this.physicsWorld.gravity)}),'args: [float] or [float float float]; change 3D world gravity vector. 1 argument means {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}addPrimitiveRigidBody(t,e=mt.O,n=$r.O,r={}){const s=new lu(this.visualScene.factory.createPrimitive(t.shape,r),this.physicsWorld.factory.createRigidBody(t));return s.position=e,s.rotation=n,this.addEntity(s),s}addRenderer(t,e,n){const r=new Yre(this.visualScene.createRenderer(t,e,n));return this.addEntity(r),r}}class ise{constructor(){this.output="\n                  \u2584\u2588\u2588\u2588\u2588   \u2584\u2588\u2588\u2588\u2588     \u2588     \u2588\u2591\u2593\u2588\u2588\u2588\u2588\u2588  \u2584\u2584\u2584\u2584   \n                 \u2588\u2588\u2592 \u2580\u2588\u2592 \u2588\u2588\u2592 \u2580\u2588\u2592   \u2593\u2588\u2591 \u2588 \u2591\u2588\u2591\u2593\u2588   \u2580 \u2593\u2588\u2588\u2588\u2588\u2588\u2584 \n                \u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591\u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591   \u2592\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2588\u2588\u2588   \u2592\u2588\u2588\u2592 \u2584\u2588\u2588\n                \u2591\u2593\u2588  \u2588\u2588\u2593\u2591\u2593\u2588  \u2588\u2588\u2593   \u2591\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2593\u2588  \u2584 \u2592\u2588\u2588\u2591\u2588\u2580  \n                \u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592   \u2591\u2591\u2588\u2588\u2592\u2588\u2588\u2593 \u2591\u2592\u2588\u2588\u2588\u2588\u2592\u2591\u2593\u2588  \u2580\u2588\u2593\n                 \u2591\u2592   \u2592  \u2591\u2592   \u2592    \u2591 \u2593\u2591\u2592 \u2592  \u2591\u2591 \u2592\u2591 \u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\n                  \u2591   \u2591   \u2591   \u2591      \u2592 \u2591 \u2591   \u2591 \u2591  \u2591\u2592\u2591\u2592   \u2591 \n                \u2591 \u2591   \u2591 \u2591 \u2591   \u2591      \u2591   \u2591     \u2591    \u2591    \u2591 \n                      \u2591       \u2591        \u2591       \u2591  \u2591 \u2591      \n                                                         \u2591 \n             >>> https://github.com/AndyGura/gg-web-engine <<<\nWelcome to GG web engine UI console. \nEnter command in input below.\n\nList of available commands: ".replace(/ /g,"&nbsp;")+'<span style="color:yellow">ls_commands</span>',this.commandHistory=[],this.currentCommandIndex=0,this.elements=null}get isUIShown(){return!!this.elements}createUI(){if(this.elements)return;const t=document.createElement("div");t.innerHTML="\n  <div id='gg-console-header' style='padding: 0.2rem 0.2rem 0;cursor:move;display:flex;justify-content:space-between;'>\n    <span>CONSOLE</span>\n    <a id='gg-console-close-icon' style='display:block;padding:0.3rem;margin:-0.3rem;cursor:pointer;color:white;'>X</a>\n  </div>\n  <div id='gg-console-output' style='flex-grow:1;background:#232323;color:white;font-family:monospace;overflow-y:auto;overflow-wrap:anywhere;padding:0.2rem;'></div>\n  <input id='gg-console-input' style='background:#000000;border:none;outline:none;color:white;font-family:monospace;'/>",t.style.position="absolute",t.style.zIndex="1000",t.style.backgroundColor="#343434",t.style.width="640px",t.style.height="480px",t.style.display="flex",t.style.flexDirection="column",t.style.alignItems="stretch",t.style.padding="0.1rem",t.style.rowGap="3px",t.style.fontSize="14px",t.style.fontFamily="monospace",t.style.fontWeight="bold",t.style.color="white",t.style.textAlign="left",document.body.append(t),this.elements={main:t,input:document.getElementById("gg-console-input"),output:document.getElementById("gg-console-output")},document.getElementById("gg-console-close-icon").onmousedown=()=>this.destroyUI(),this.elements.input.onkeydown=e=>{13===e?.keyCode?(e.preventDefault(),this.onInput().then()):38===e?.keyCode?(e.preventDefault(),this.onUsePreviousCommand()):40===e?.keyCode&&(e.preventDefault(),this.onUseNextCommand())},this.elements.input.oninput=e=>{var n;let r=(null===(n=this.elements)||void 0===n?void 0:n.input.value)||"";if(r.length>0&&null===e.data&&(r=r.substring(0,r.length-1)),""===r.trim())return;let s=window.ggstatic.availableCommands.find(o=>o[0].startsWith(r));s&&(this.elements.input.value=s[0],this.elements.input.setSelectionRange(r.length,this.elements.input.value.length))},this.stdout(),this.setupDragging(),setTimeout(()=>this.elements.input.focus(),20)}destroyUI(){this.elements&&(document.body.removeChild(this.elements.main),this.elements=null)}onUsePreviousCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex--,this.currentCommandIndex<0&&(this.currentCommandIndex+=this.commandHistory.length),this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onUseNextCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex++,this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onInput(){return i=this,t=void 0,n=function*(){const t=this.elements.input.value;this.elements.input.value="",this.stdout("\n> "+t),this.stdout("\n"+(yield window.ggstatic.console(t))),this.commandHistory.push(t),this.currentCommandIndex=this.commandHistory.length},new((e=void 0)||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())});var i,t,e,n}stdout(t=""){this.output+=t,this.elements.output.innerHTML=this.output.replace(/\n/g,"<br>"),this.elements.output.scrollTop=this.elements.output.scrollHeight}setupDragging(){let t=0,e=0;const r=o=>{if(!this.elements)return void s();o.preventDefault();const a=t-o.clientX,l=e-o.clientY;t=o.clientX,e=o.clientY,this.elements.main.style.left=this.elements.main.offsetLeft-a+"px",this.elements.main.style.top=this.elements.main.offsetTop-l+"px"},s=()=>{document.onmouseup=null,document.onmousemove=null};document.getElementById("gg-console-header").onmousedown=o=>{(o=o||window.event).preventDefault(),t=o.clientX,e=o.clientY,document.onmouseup=s,document.onmousemove=r}}}var rse=Zr(738),sse=Zr.n(rse);class ose{constructor(){this.ui={stats:null,debugControlsContainer:null},this.statsRemoved$=new Fe,this.currentWorld=null,this.debugControlsRemoved$=new Fe}get showStats(){return!!this.ui.stats}setShowStats(t,e){if(e===this.showStats){if(!e||this.currentWorld===t)return;this.setShowStats(this.currentWorld,!1)}if(this.currentWorld=t,e){const n=new(sse());this.ui.stats=n,n.dom.style.left="unset",n.dom.style.right="0",n.showPanel(0),document.body.appendChild(n.dom),wC(t,-1).pipe(Ze(this.statsRemoved$)).subscribe(()=>{n?.begin()}),wC(t,1e4).pipe(Ze(this.statsRemoved$)).subscribe(()=>{n?.end()})}else this.statsRemoved$.next(),document.body.removeChild(this.ui.stats.dom),this.ui.stats.end(),this.ui.stats=null}get showDebugControls(){return!!this.ui.debugControlsContainer}setShowDebugControls(t,e){if(e===this.showDebugControls){if(!e||this.currentWorld===t)return;this.setShowDebugControls(this.currentWorld,!1)}if(this.currentWorld=t,e){const n=document.createElement("div");this.ui.debugControlsContainer=n;const r="style='display:flex;align-items:center;margin:0.25rem;'";n.style.cssText="position:fixed;top:48px;right:0;opacity:0.9;z-index:9999;background-color:#333;color:white;display:flex;flex-direction:column",n.innerHTML=`\n      <div ${r}>\n        <input type='checkbox' name='checkbox' id='physics_debugger_checkbox_id' value='1'${this.currentWorld.physicsWorld.physicsDebugViewActive?" checked":""}>\n        <label for='physics_debugger_checkbox_id' style='user-select: none;'>Show physics bodies in scene</label>\n      </div>`,document.body.appendChild(n),Ma(document.getElementById("physics_debugger_checkbox_id"),"change").pipe(Ze(this.debugControlsRemoved$)).subscribe(s=>{try{this.currentWorld.physicsDebugViewActive=s.target.checked}catch(o){console.error(o)}s.target.checked=this.currentWorld.physicsDebugViewActive})}else this.debugControlsRemoved$.next(),document.body.removeChild(this.ui.debugControlsContainer),this.ui.debugControlsContainer=null}}var nb=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};class qm{constructor(){this.debuggerUI=new ose,this.consoleUI=new ise,this._devConsoleEnabled=!1,this.consoleKeyPressEventListener=t=>{"Backquote"===t.code&&(t.preventDefault(),this.consoleUI.isUIShown?this.consoleUI.destroyUI():this.consoleUI.createUI())},this._selectedWorld=null,this.consoleCommands=new Map,this.registerConsoleCommand(null,"ls_commands",()=>nb(this,void 0,void 0,function*(){return this.availableCommands.map(([t,e])=>`<span style="color:yellow">${t}</span>${e.doc?'\t<span style="color:#aaa">// '+e.doc+"</span>":""}`).sort().join("\n\n")}),"no args; print all available commands"),this.registerConsoleCommand(null,"ls_worlds",()=>nb(this,void 0,void 0,function*(){return CC.documentWorlds.map(t=>t===this.selectedWorld?`<span style="color:green;">* ${t.name}</span>`:`  ${t.name}`).join("\n")}),"no args; print all available worlds"),this.registerConsoleCommand(null,"select_world",(...t)=>nb(this,void 0,void 0,function*(){var e;for(const n of CC.documentWorlds)if(n.name===t[0]){this._selectedWorld=n;break}return(null===(e=this.selectedWorld)||void 0===e?void 0:e.name)||"null"}),"args: [string]; select world by name")}static get instance(){return qm._instance||(qm._instance=new qm),qm._instance}get devConsoleEnabled(){return this._devConsoleEnabled}set devConsoleEnabled(t){this._devConsoleEnabled!==t&&(this._devConsoleEnabled=t,t?addEventListener("keypress",this.consoleKeyPressEventListener):(removeEventListener("keypress",this.consoleKeyPressEventListener),this.consoleUI.isUIShown&&this.consoleUI.destroyUI()))}get showStats(){return this.debuggerUI.showStats}set showStats(t){this.debuggerUI.setShowStats(this.selectedWorld,t)}get showDebugControls(){return this.debuggerUI.showDebugControls}set showDebugControls(t){this.debuggerUI.setShowDebugControls(this.selectedWorld,t)}get selectedWorld(){return this._selectedWorld||CC.documentWorlds[0]||null}get availableCommands(){let t=this.consoleCommands.get(null)||{};return this.selectedWorld&&(t=Object.assign(Object.assign({},this.consoleCommands.get(this.selectedWorld)||{}),t)),Object.entries(t)}registerConsoleCommand(t,e,n,r){let s={};this.consoleCommands.has(t)?s=this.consoleCommands.get(t):this.consoleCommands.set(t,s),s[e]={handler:n,doc:r}}deregisterWorldCommands(t){this.consoleCommands.delete(t)}console(t){return nb(this,void 0,void 0,function*(){const e=t.split("\n");let n=[];for(const r of e){const s=r.split(" ");n.push(yield this.runConsoleCommand(s.splice(0,1)[0],s))}return n.join("\n")})}runConsoleCommand(t,e){return nb(this,void 0,void 0,function*(){let n=(this.consoleCommands.get(null)||{})[t];if(!n&&(n=(this.consoleCommands.get(this.selectedWorld)||{})[t],!n))return`<span style="color:red">Unrecognized command: ${t}</span>`;try{return yield n.handler(...e)}catch(r){return`<span style="color:red">${r}</span>`}})}}window.ggstatic=qm.instance;const ase=0,oH=1,lse=2,aH=1,lH=2,Zc=3,Zl=0,bo=1,Wo=2,du=0,Xm=1,cH=2,dH=3,uH=4,cse=5,Xh=100,dse=101,use=102,hse=103,fse=104,pse=200,mse=201,gse=202,_se=203,HR=204,GR=205,vse=206,yse=207,bse=208,xse=209,wse=210,Mse=211,Cse=212,Sse=213,Ese=214,Ase=0,Dse=1,Tse=2,SC=3,Ise=4,Rse=5,kse=6,Pse=7,EC=0,Ose=1,Fse=2,uu=0,Lse=1,Nse=2,Bse=3,Use=4,Vse=5,zse=6,Hse=7,hH="attached",Qc=301,Kh=302,AC=303,DC=304,ib=306,Ql=1e3,pr=1001,rb=1002,mr=1003,WR=1004,Km=1005,tr=1006,sb=1007,ol=1008,hu=1009,$se=1010,Wse=1011,fH=1012,pH=1013,Zm=1014,al=1015,TC=1016,mH=1017,gH=1018,ob=1020,jse=35902,Yse=1021,qse=1022,Ea=1023,Xse=1024,Kse=1025,Qm=1026,ab=1027,_H=1028,vH=1029,Zse=1030,yH=1031,bH=1033,jR=33776,YR=33777,qR=33778,XR=33779,xH=35840,wH=35841,MH=35842,CH=35843,SH=36196,EH=37492,AH=37496,DH=37808,TH=37809,IH=37810,RH=37811,kH=37812,PH=37813,OH=37814,FH=37815,LH=37816,NH=37817,BH=37818,UH=37819,VH=37820,zH=37821,KR=36492,HH=36494,GH=36495,Qse=36283,$H=36284,WH=36285,jH=36286,lb=2300,Jm=2301,noe=0,qH=1,JR=2,roe=3201,Zh=0,soe=1,fu="",Wr="srgb",us="srgb-linear",ek="display-p3",RC="display-p3-linear",kC="linear",Ci="srgb",PC="rec709",OC="p3",ng=7680,ooe=512,aoe=513,loe=514,KH=515,coe=516,doe=517,uoe=518,hoe=519,ZH="300 es",Jc=2e3;class ig{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Ss=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const Qh=Math.PI/180,rg=180/Math.PI;function jo(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Ss[255&i]+Ss[i>>8&255]+Ss[i>>16&255]+Ss[i>>24&255]+"-"+Ss[255&t]+Ss[t>>8&255]+"-"+Ss[t>>16&15|64]+Ss[t>>24&255]+"-"+Ss[63&e|128]+Ss[e>>8&255]+"-"+Ss[e>>16&255]+Ss[e>>24&255]+Ss[255&n]+Ss[n>>8&255]+Ss[n>>16&255]+Ss[n>>24&255]).toLowerCase()}function ji(i,t,e){return Math.max(t,Math.min(e,i))}function tk(i,t){return(i%t+t)%t}function cb(i,t,e){return(1-e)*i+e*t}function no(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function fn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(4294967295*i);case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int32Array:return Math.round(2147483647*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const Toe_radToDeg=function Coe(i){return i*rg};class we{constructor(t=0,e=0){we.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(ji(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class yn{constructor(t,e,n,r,s,o,a,l,c){yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c)}set(t,e,n,r,s,o,a,l,c){const u=this.elements;return u[0]=t,u[1]=r,u[2]=a,u[3]=e,u[4]=s,u[5]=l,u[6]=n,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],u=n[4],h=n[7],p=n[2],m=n[5],g=n[8],b=r[0],v=r[3],y=r[6],M=r[1],x=r[4],C=r[7],O=r[2],T=r[5],P=r[8];return s[0]=o*b+a*M+l*O,s[3]=o*v+a*x+l*T,s[6]=o*y+a*C+l*P,s[1]=c*b+u*M+h*O,s[4]=c*v+u*x+h*T,s[7]=c*y+u*C+h*P,s[2]=p*b+m*M+g*O,s[5]=p*v+m*x+g*T,s[8]=p*y+m*C+g*P,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8];return e*o*u-e*a*c-n*s*u+n*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=u*o-a*c,p=a*l-u*s,m=c*s-o*l,g=e*h+n*p+r*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const b=1/g;return t[0]=h*b,t[1]=(r*c-u*n)*b,t[2]=(a*n-r*o)*b,t[3]=p*b,t[4]=(u*e-r*l)*b,t[5]=(r*s-a*e)*b,t[6]=m*b,t[7]=(n*l-c*e)*b,t[8]=(o*e-n*s)*b,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(nk.makeScale(t,e)),this}rotate(t){return this.premultiply(nk.makeRotation(-t)),this}translate(t,e){return this.premultiply(nk.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const nk=new yn;function JH(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function db(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Roe(){const i=db("canvas");return i.style.display="block",i}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const e4={};function t4(i){i in e4||(e4[i]=!0,console.warn(i))}const n4=(new yn).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),i4=(new yn).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),NC={[us]:{transfer:kC,primaries:PC,toReference:i=>i,fromReference:i=>i},[Wr]:{transfer:Ci,primaries:PC,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[RC]:{transfer:kC,primaries:OC,toReference:i=>i.applyMatrix3(i4),fromReference:i=>i.applyMatrix3(n4)},[ek]:{transfer:Ci,primaries:OC,toReference:i=>i.convertSRGBToLinear().applyMatrix3(i4),fromReference:i=>i.applyMatrix3(n4).convertLinearToSRGB()}},koe=new Set([us,RC]),ni={enabled:!0,_workingColorSpace:us,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!koe.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,t,e){return!1!==this.enabled&&t!==e&&t&&e?(0,NC[e].fromReference)((0,NC[t].toReference)(i)):i},fromWorkingColorSpace:function(i,t){return this.convert(i,this._workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this._workingColorSpace)},getPrimaries:function(i){return NC[i].primaries},getTransfer:function(i){return i===fu?kC:NC[i].transfer}};function og(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function ik(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let ag;class Poe{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ag&&(ag=db("canvas")),ag.width=t.width,ag.height=t.height;const n=ag.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=ag}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=db("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*og(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*og(e[n]/255)):og(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let Ooe=0;class lg{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Ooe++}),this.uuid=jo(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(rk(r[o].isDataTexture?r[o].image:r[o]))}else s=rk(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function rk(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Poe.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Foe=0,xo=(()=>{class i extends ig{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=pr,s=pr,o=tr,a=ol,l=Ea,c=hu,u=i.DEFAULT_ANISOTROPY,h=fu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Foe++}),this.uuid=jo(),this.name="",this.source=new lg(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new we(0,0),this.repeat=new we(1,1),this.center=new we(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ql:e.x=e.x-Math.floor(e.x);break;case pr:e.x=e.x<0?0:1;break;case rb:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ql:e.y=e.y-Math.floor(e.y);break;case pr:e.y=e.y<0?0:1;break;case rb:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class ai{constructor(t=0,e=0,n=0,r=1){ai.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const l=t.elements,c=l[0],u=l[4],h=l[8],p=l[1],m=l[5],g=l[9],b=l[2],v=l[6],y=l[10];if(Math.abs(u-p)<.01&&Math.abs(h-b)<.01&&Math.abs(g-v)<.01){if(Math.abs(u+p)<.1&&Math.abs(h+b)<.1&&Math.abs(g+v)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const x=(c+1)/2,C=(m+1)/2,O=(y+1)/2,T=(u+p)/4,P=(h+b)/4,B=(g+v)/4;return x>C&&x>O?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=T/n,s=P/n):C>O?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=T/r,s=B/r):O<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(O),n=P/s,r=B/s),this.set(n,r,s,e),this}let M=Math.sqrt((v-g)*(v-g)+(h-b)*(h-b)+(p-u)*(p-u));return Math.abs(M)<.001&&(M=1),this.x=(v-g)/M,this.y=(h-b)/M,this.z=(p-u)/M,this.w=Math.acos((c+m+y-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Loe extends ig{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new ai(0,0,t,e),this.scissorTest=!1,this.viewport=new ai(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:tr,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},n);const s=new xo(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new lg(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Jh extends Loe{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class sk extends xo{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=mr,this.minFilter=mr,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class r4 extends xo{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=mr,this.minFilter=mr,this.wrapR=pr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class io{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,a){let l=n[r+0],c=n[r+1],u=n[r+2],h=n[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],b=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=u,void(t[e+3]=h);if(1===a)return t[e+0]=p,t[e+1]=m,t[e+2]=g,void(t[e+3]=b);if(h!==b||l!==p||c!==m||u!==g){let v=1-a;const y=l*p+c*m+u*g+h*b,M=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const O=Math.sqrt(x),T=Math.atan2(O,y*M);v=Math.sin(v*T)/O,a=Math.sin(a*T)/O}const C=a*M;if(l=l*v+p*C,c=c*v+m*C,u=u*v+g*C,h=h*v+b*C,v===1-a){const O=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=O,c*=O,u*=O,h*=O}}t[e]=l,t[e+1]=c,t[e+2]=u,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],u=n[r+3],h=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return t[e]=a*g+u*h+l*m-c*p,t[e+1]=l*g+u*p+c*h-a*m,t[e+2]=c*g+u*m+a*p-l*h,t[e+3]=u*g-a*h-l*p-c*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(n/2),u=a(r/2),h=a(s/2),p=l(n/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*u*h+c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h-p*m*g;break;case"YXZ":this._x=p*u*h+c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h+p*m*g;break;case"ZXY":this._x=p*u*h-c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h-p*m*g;break;case"ZYX":this._x=p*u*h-c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h+p*m*g;break;case"YZX":this._x=p*u*h+c*m*g,this._y=c*m*h+p*u*g,this._z=c*u*g-p*m*h,this._w=c*u*h-p*m*g;break;case"XZY":this._x=p*u*h-c*m*g,this._y=c*m*h-p*u*g,this._z=c*u*g+p*m*h,this._w=c*u*h+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],u=e[6],h=e[10],p=n+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(u-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(n>a&&n>h){const m=2*Math.sqrt(1+n-a-h);this._w=(u-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-n-h);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+u)/m}else{const m=2*Math.sqrt(1+h-n-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+u)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ji(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,u=e._w;return this._x=n*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-n*c,this._z=s*u+o*c+n*l-r*a,this._w=o*u-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-e;return this._w=m*o+e*this._w,this._x=m*n+e*this._x,this._y=m*r+e*this._y,this._z=m*s+e*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-e)*u)/c,p=Math.sin(e*u)/c;return this._w=o*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class L{constructor(t=0,e=0,n=0){L.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(s4.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(s4.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=2*(o*r-a*n),u=2*(a*e-s*r),h=2*(s*n-o*e);return this.x=e+l*c+o*h-a*u,this.y=n+l*u+a*c-s*h,this.z=r+l*h+s*u-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return ok.copy(this).projectOnVector(t),this.sub(ok)}reflect(t){return this.sub(ok.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(ji(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ok=new L,s4=new io;class Es{constructor(t=new L(1/0,1/0,1/0),e=new L(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(ll.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(ll.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ll.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const s=n.getAttribute("position");if(!0===e&&void 0!==s&&!0!==t.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===t.isMesh?t.getVertexPosition(o,ll):ll.fromBufferAttribute(s,o),ll.applyMatrix4(t.matrixWorld),this.expandByPoint(ll);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),BC.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),BC.copy(n.boundingBox)),BC.applyMatrix4(t.matrixWorld),this.union(BC)}const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ll),ll.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ub),UC.subVectors(this.max,ub),cg.subVectors(t.a,ub),dg.subVectors(t.b,ub),ug.subVectors(t.c,ub),pu.subVectors(dg,cg),mu.subVectors(ug,dg),ef.subVectors(cg,ug);let e=[0,-pu.z,pu.y,0,-mu.z,mu.y,0,-ef.z,ef.y,pu.z,0,-pu.x,mu.z,0,-mu.x,ef.z,0,-ef.x,-pu.y,pu.x,0,-mu.y,mu.x,0,-ef.y,ef.x,0];return!(!ak(e,cg,dg,ug,UC)||(e=[1,0,0,0,1,0,0,0,1],!ak(e,cg,dg,ug,UC)))&&(VC.crossVectors(pu,mu),e=[VC.x,VC.y,VC.z],ak(e,cg,dg,ug,UC))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,ll).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(ll).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(ed[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ed[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ed[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ed[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ed[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ed[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ed[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ed[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ed)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const ed=[new L,new L,new L,new L,new L,new L,new L,new L],ll=new L,BC=new Es,cg=new L,dg=new L,ug=new L,pu=new L,mu=new L,ef=new L,ub=new L,UC=new L,VC=new L,tf=new L;function ak(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){tf.fromArray(i,s);const a=r.x*Math.abs(tf.x)+r.y*Math.abs(tf.y)+r.z*Math.abs(tf.z),l=t.dot(tf),c=e.dot(tf),u=n.dot(tf);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Noe=new Es,hb=new L,lk=new L;class As{constructor(t=new L,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):Noe.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;hb.subVectors(t,this.center);const e=hb.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(hb,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(lk.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(hb.copy(t.center).add(lk)),this.expandByPoint(hb.copy(t.center).sub(lk))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const td=new L,ck=new L,zC=new L,gu=new L,dk=new L,HC=new L,uk=new L;class fb{constructor(t=new L,e=new L(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,td)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=td.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(td.copy(this.origin).addScaledVector(this.direction,e),td.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){ck.copy(t).add(e).multiplyScalar(.5),zC.copy(e).sub(t).normalize(),gu.copy(this.origin).sub(ck);const s=.5*t.distanceTo(e),o=-this.direction.dot(zC),a=gu.dot(this.direction),l=-gu.dot(zC),c=gu.lengthSq(),u=Math.abs(1-o*o);let h,p,m,g;if(u>0)if(h=o*l-a,p=o*a-l,g=s*u,h>=0)if(p>=-g)if(p<=g){const b=1/u;h*=b,p*=b,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-g?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=g?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(ck).addScaledVector(zC,p),m}intersectSphere(t,e){td.subVectors(t.center,this.origin);const n=td.dot(this.direction),r=td.dot(td)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(n=(t.min.x-p.x)*c,r=(t.max.x-p.x)*c):(n=(t.max.x-p.x)*c,r=(t.min.x-p.x)*c),u>=0?(s=(t.min.y-p.y)*u,o=(t.max.y-p.y)*u):(s=(t.max.y-p.y)*u,o=(t.min.y-p.y)*u),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(t.min.z-p.z)*h,l=(t.max.z-p.z)*h):(a=(t.max.z-p.z)*h,l=(t.min.z-p.z)*h),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,td)}intersectTriangle(t,e,n,r,s){dk.subVectors(e,t),HC.subVectors(n,t),uk.crossVectors(dk,HC);let a,o=this.direction.dot(uk);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}gu.subVectors(this.origin,t);const l=a*this.direction.dot(HC.crossVectors(gu,HC));if(l<0)return null;const c=a*this.direction.dot(dk.cross(gu));if(c<0||l+c>o)return null;const u=-a*gu.dot(uk);return u<0?null:this.at(u/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class It{constructor(t,e,n,r,s,o,a,l,c,u,h,p,m,g,b,v){It.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c,u,h,p,m,g,b,v)}set(t,e,n,r,s,o,a,l,c,u,h,p,m,g,b,v){const y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=h,y[14]=p,y[3]=m,y[7]=g,y[11]=b,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new It).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/hg.setFromMatrixColumn(t,0).length(),s=1/hg.setFromMatrixColumn(t,1).length(),o=1/hg.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if("XYZ"===t.order){const p=o*u,m=o*h,g=a*u,b=a*h;e[0]=l*u,e[4]=-l*h,e[8]=c,e[1]=m+g*c,e[5]=p-b*c,e[9]=-a*l,e[2]=b-p*c,e[6]=g+m*c,e[10]=o*l}else if("YXZ"===t.order){const p=l*u,m=l*h,g=c*u,b=c*h;e[0]=p+b*a,e[4]=g*a-m,e[8]=o*c,e[1]=o*h,e[5]=o*u,e[9]=-a,e[2]=m*a-g,e[6]=b+p*a,e[10]=o*l}else if("ZXY"===t.order){const p=l*u,m=l*h,g=c*u,b=c*h;e[0]=p-b*a,e[4]=-o*h,e[8]=g+m*a,e[1]=m+g*a,e[5]=o*u,e[9]=b-p*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const p=o*u,m=o*h,g=a*u,b=a*h;e[0]=l*u,e[4]=g*c-m,e[8]=p*c+b,e[1]=l*h,e[5]=b*c+p,e[9]=m*c-g,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const p=o*l,m=o*c,g=a*l,b=a*c;e[0]=l*u,e[4]=b-p*h,e[8]=g*h+m,e[1]=h,e[5]=o*u,e[9]=-a*u,e[2]=-c*u,e[6]=m*h+g,e[10]=p-b*h}else if("XZY"===t.order){const p=o*l,m=o*c,g=a*l,b=a*c;e[0]=l*u,e[4]=-h,e[8]=c*u,e[1]=p*h+b,e[5]=o*u,e[9]=m*h-g,e[2]=g*h-m,e[6]=a*u,e[10]=b*h+p}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Boe,t,Uoe)}lookAt(t,e,n){const r=this.elements;return Yo.subVectors(t,e),0===Yo.lengthSq()&&(Yo.z=1),Yo.normalize(),_u.crossVectors(n,Yo),0===_u.lengthSq()&&(1===Math.abs(n.z)?Yo.x+=1e-4:Yo.z+=1e-4,Yo.normalize(),_u.crossVectors(n,Yo)),_u.normalize(),GC.crossVectors(Yo,_u),r[0]=_u.x,r[4]=GC.x,r[8]=Yo.x,r[1]=_u.y,r[5]=GC.y,r[9]=Yo.y,r[2]=_u.z,r[6]=GC.z,r[10]=Yo.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],u=n[1],h=n[5],p=n[9],m=n[13],g=n[2],b=n[6],v=n[10],y=n[14],M=n[3],x=n[7],C=n[11],O=n[15],T=r[0],P=r[4],B=r[8],I=r[12],E=r[1],X=r[5],re=r[9],j=r[13],ie=r[2],ge=r[6],Q=r[10],ue=r[14],K=r[3],ve=r[7],Ce=r[11],$e=r[15];return s[0]=o*T+a*E+l*ie+c*K,s[4]=o*P+a*X+l*ge+c*ve,s[8]=o*B+a*re+l*Q+c*Ce,s[12]=o*I+a*j+l*ue+c*$e,s[1]=u*T+h*E+p*ie+m*K,s[5]=u*P+h*X+p*ge+m*ve,s[9]=u*B+h*re+p*Q+m*Ce,s[13]=u*I+h*j+p*ue+m*$e,s[2]=g*T+b*E+v*ie+y*K,s[6]=g*P+b*X+v*ge+y*ve,s[10]=g*B+b*re+v*Q+y*Ce,s[14]=g*I+b*j+v*ue+y*$e,s[3]=M*T+x*E+C*ie+O*K,s[7]=M*P+x*X+C*ge+O*ve,s[11]=M*B+x*re+C*Q+O*Ce,s[15]=M*I+x*j+C*ue+O*$e,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],u=t[2],h=t[6],p=t[10],m=t[14];return t[3]*(+s*l*h-r*c*h-s*a*p+n*c*p+r*a*m-n*l*m)+t[7]*(+e*l*m-e*c*p+s*o*p-r*o*m+r*c*u-s*l*u)+t[11]*(+e*c*h-e*a*m-s*o*h+n*o*m+s*a*u-n*c*u)+t[15]*(-r*a*u-e*l*h+e*a*p+r*o*h-n*o*p+n*l*u)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],u=t[8],h=t[9],p=t[10],m=t[11],g=t[12],b=t[13],v=t[14],y=t[15],M=h*v*c-b*p*c+b*l*m-a*v*m-h*l*y+a*p*y,x=g*p*c-u*v*c-g*l*m+o*v*m+u*l*y-o*p*y,C=u*b*c-g*h*c+g*a*m-o*b*m-u*a*y+o*h*y,O=g*h*l-u*b*l-g*a*p+o*b*p+u*a*v-o*h*v,T=e*M+n*x+r*C+s*O;if(0===T)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/T;return t[0]=M*P,t[1]=(b*p*s-h*v*s-b*r*m+n*v*m+h*r*y-n*p*y)*P,t[2]=(a*v*s-b*l*s+b*r*c-n*v*c-a*r*y+n*l*y)*P,t[3]=(h*l*s-a*p*s-h*r*c+n*p*c+a*r*m-n*l*m)*P,t[4]=x*P,t[5]=(u*v*s-g*p*s+g*r*m-e*v*m-u*r*y+e*p*y)*P,t[6]=(g*l*s-o*v*s-g*r*c+e*v*c+o*r*y-e*l*y)*P,t[7]=(o*p*s-u*l*s+u*r*c-e*p*c-o*r*m+e*l*m)*P,t[8]=C*P,t[9]=(g*h*s-u*b*s-g*n*m+e*b*m+u*n*y-e*h*y)*P,t[10]=(o*b*s-g*a*s+g*n*c-e*b*c-o*n*y+e*a*y)*P,t[11]=(u*a*s-o*h*s-u*n*c+e*h*c+o*n*m-e*a*m)*P,t[12]=O*P,t[13]=(u*b*r-g*h*r+g*n*p-e*b*p-u*n*v+e*h*v)*P,t[14]=(g*a*r-o*b*r-g*n*l+e*b*l+o*n*v-e*a*v)*P,t[15]=(o*h*r-u*a*r+u*n*l-e*h*l-o*n*p+e*a*p)*P,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,a=t.y,l=t.z,c=s*o,u=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+n,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,u=o+o,h=a+a,p=s*c,m=s*u,g=s*h,b=o*u,v=o*h,y=a*h,M=l*c,x=l*u,C=l*h,O=n.x,T=n.y,P=n.z;return r[0]=(1-(b+y))*O,r[1]=(m+C)*O,r[2]=(g-x)*O,r[3]=0,r[4]=(m-C)*T,r[5]=(1-(p+y))*T,r[6]=(v+M)*T,r[7]=0,r[8]=(g+x)*P,r[9]=(v-M)*P,r[10]=(1-(p+b))*P,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=hg.set(r[0],r[1],r[2]).length();const o=hg.set(r[4],r[5],r[6]).length(),a=hg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],cl.copy(this);const c=1/s,u=1/o,h=1/a;return cl.elements[0]*=c,cl.elements[1]*=c,cl.elements[2]*=c,cl.elements[4]*=u,cl.elements[5]*=u,cl.elements[6]*=u,cl.elements[8]*=h,cl.elements[9]*=h,cl.elements[10]*=h,e.setFromRotationMatrix(cl),n.x=s,n.y=o,n.z=a,this}makePerspective(t,e,n,r,s,o,a=Jc){const l=this.elements,c=2*s/(e-t),u=2*s/(n-r),h=(e+t)/(e-t),p=(n+r)/(n-r);let m,g;if(a===Jc)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);m=-o/(o-s),g=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o,a=Jc){const l=this.elements,c=1/(e-t),u=1/(n-r),h=1/(o-s),p=(e+t)*c,m=(n+r)*u;let g,b;if(a===Jc)g=(o+s)*h,b=-2*h;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);g=s*h,b=-1*h}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=b,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const hg=new L,cl=new It,Boe=new L(0,0,0),Uoe=new L(1,1,1),_u=new L,GC=new L,Yo=new L,o4=new It,a4=new io;let nd=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],u=s[5],h=s[9],p=s[2],m=s[6],g=s[10];switch(n){case"XYZ":this._y=Math.asin(ji(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-ji(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(ji(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-ji(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin(ji(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-ji(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return o4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(o4,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return a4.setFromEuler(this),this.setFromQuaternion(a4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class hk{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Voe=0;const l4=new L,fg=new io,id=new It,$C=new L,pb=new L,zoe=new L,Hoe=new io,c4=new L(1,0,0),d4=new L(0,1,0),u4=new L(0,0,1),h4={type:"added"},Goe={type:"removed"},pg={type:"childadded",child:null},fk={type:"childremoved",child:null};let jr=(()=>{class i extends ig{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Voe++}),this.uuid=jo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const e=new L,n=new nd,r=new io,s=new L(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new It},normalMatrix:{value:new yn}}),this.matrix=new It,this.matrixWorld=new It,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new hk,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return fg.setFromAxisAngle(e,n),this.quaternion.multiply(fg),this}rotateOnWorldAxis(e,n){return fg.setFromAxisAngle(e,n),this.quaternion.premultiply(fg),this}rotateX(e){return this.rotateOnAxis(c4,e)}rotateY(e){return this.rotateOnAxis(d4,e)}rotateZ(e){return this.rotateOnAxis(u4,e)}translateOnAxis(e,n){return l4.copy(e).applyQuaternion(this.quaternion),this.position.add(l4.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(c4,e)}translateY(e){return this.translateOnAxis(d4,e)}translateZ(e){return this.translateOnAxis(u4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(id.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?$C.copy(e):$C.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),pb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?id.lookAt(pb,$C,this.up):id.lookAt($C,pb,this.up),this.quaternion.setFromRotationMatrix(id),s&&(id.extractRotation(s.matrixWorld),fg.setFromRotationMatrix(id),this.quaternion.premultiply(fg.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(h4),pg.child=e,this.dispatchEvent(pg),pg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Goe),fk.child=e,this.dispatchEvent(fk),fk.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),id.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),id.multiply(e.parent.matrixWorld)),e.applyMatrix4(id),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(h4),pg.child=e,this.dispatchEvent(pg),pg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(e,n);if(void 0!==a)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pb,e,zoe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(pb,Hoe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===e)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxGeometryCount=this._maxGeometryCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++)o(e.shapes,c[u]);else o(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(o(e.materials,this.material[c]));s.material=l}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(e.animations,this.animations[l]))}if(n){const l=a(e.geometries),c=a(e.materials),u=a(e.textures),h=a(e.images),p=a(e.shapes),m=a(e.skeletons),g=a(e.animations),b=a(e.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),u.length>0&&(r.textures=u),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(l){const c=[];for(const u in l){const h=l[u];delete h.metadata,c.push(h)}return c}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DEFAULT_UP=new L(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const dl=new L,rd=new L,pk=new L,sd=new L,mg=new L,gg=new L,f4=new L,mk=new L,gk=new L,_k=new L;class Aa{constructor(t=new L,e=new L,n=new L){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),dl.subVectors(t,e),r.cross(dl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){dl.subVectors(r,e),rd.subVectors(n,e),pk.subVectors(t,e);const o=dl.dot(dl),a=dl.dot(rd),l=dl.dot(pk),c=rd.dot(rd),u=rd.dot(pk),h=o*c-a*a;if(0===h)return s.set(0,0,0),null;const p=1/h,m=(c*l-a*u)*p,g=(o*u-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,sd)&&sd.x>=0&&sd.y>=0&&sd.x+sd.y<=1}static getInterpolation(t,e,n,r,s,o,a,l){return null===this.getBarycoord(t,e,n,r,sd)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,sd.x),l.addScaledVector(o,sd.y),l.addScaledVector(a,sd.z),l)}static isFrontFacing(t,e,n,r){return dl.subVectors(n,e),rd.subVectors(t,e),dl.cross(rd).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return dl.subVectors(this.c,this.b),rd.subVectors(this.a,this.b),.5*dl.cross(rd).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Aa.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Aa.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,s){return Aa.getInterpolation(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Aa.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Aa.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,a;mg.subVectors(r,n),gg.subVectors(s,n),mk.subVectors(t,n);const l=mg.dot(mk),c=gg.dot(mk);if(l<=0&&c<=0)return e.copy(n);gk.subVectors(t,r);const u=mg.dot(gk),h=gg.dot(gk);if(u>=0&&h<=u)return e.copy(r);const p=l*h-u*c;if(p<=0&&l>=0&&u<=0)return o=l/(l-u),e.copy(n).addScaledVector(mg,o);_k.subVectors(t,s);const m=mg.dot(_k),g=gg.dot(_k);if(g>=0&&m<=g)return e.copy(s);const b=m*c-l*g;if(b<=0&&c>=0&&g<=0)return a=c/(c-g),e.copy(n).addScaledVector(gg,a);const v=u*g-m*h;if(v<=0&&h-u>=0&&m-g>=0)return f4.subVectors(s,r),a=(h-u)/(h-u+(m-g)),e.copy(r).addScaledVector(f4,a);const y=1/(v+b+p);return o=b*y,a=p*y,e.copy(n).addScaledVector(mg,o).addScaledVector(gg,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const p4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vu={h:0,s:0,l:0},WC={h:0,s:0,l:0};function vk(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}class Ge{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const r=t;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Wr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ni.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=ni.workingColorSpace){return this.r=t,this.g=e,this.b=n,ni.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=ni.workingColorSpace){if(t=tk(t,1),e=ji(e,0,1),n=ji(n,0,1),0===e)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+e):n+e-n*e,o=2*n-s;this.r=vk(o,s,t+1/3),this.g=vk(o,s,t),this.b=vk(o,s,t-1/3)}return ni.toWorkingColorSpace(this,r),this}setStyle(t,e=Wr){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(6===o)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Wr){const n=p4[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=og(t.r),this.g=og(t.g),this.b=og(t.b),this}copyLinearToSRGB(t){return this.r=ik(t.r),this.g=ik(t.g),this.b=ik(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Wr){return ni.fromWorkingColorSpace(Ds.copy(this),t),65536*Math.round(ji(255*Ds.r,0,255))+256*Math.round(ji(255*Ds.g,0,255))+Math.round(ji(255*Ds.b,0,255))}getHexString(t=Wr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=ni.workingColorSpace){ni.fromWorkingColorSpace(Ds.copy(this),e);const n=Ds.r,r=Ds.g,s=Ds.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4}l/=6}return t.h=l,t.s=c,t.l=u,t}getRGB(t,e=ni.workingColorSpace){return ni.fromWorkingColorSpace(Ds.copy(this),e),t.r=Ds.r,t.g=Ds.g,t.b=Ds.b,t}getStyle(t=Wr){ni.fromWorkingColorSpace(Ds.copy(this),t);const e=Ds.r,n=Ds.g,r=Ds.b;return t!==Wr?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(vu),this.setHSL(vu.h+t,vu.s+e,vu.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(vu),t.getHSL(WC);const n=cb(vu.h,WC.h,e),r=cb(vu.s,WC.s,e),s=cb(vu.l,WC.l,e);return this.setHSL(n,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*n+s[6]*r,this.g=s[1]*e+s[4]*n+s[7]*r,this.b=s[2]*e+s[5]*n+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ds=new Ge;Ge.NAMES=p4;let $oe=0;class wo extends ig{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:$oe++}),this.uuid=jo(),this.name="",this.type="Material",this.blending=Xm,this.side=Zl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=HR,this.blendDst=GR,this.blendEquation=Xh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ge(0,0,0),this.blendAlpha=0,this.depthFunc=SC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ng,this.stencilZFail=ng,this.stencilZPass=ng,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Xm&&(n.blending=this.blending),this.side!==Zl&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==HR&&(n.blendSrc=this.blendSrc),this.blendDst!==GR&&(n.blendDst=this.blendDst),this.blendEquation!==Xh&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==SC&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ng&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ng&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ng&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}}class Yr extends wo{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nd,this.combine=EC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const gr=new L,jC=new we;class di{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=al,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return t4("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)jC.fromBufferAttribute(this,e),jC.applyMatrix3(t),this.setXY(e,jC.x,jC.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)gr.fromBufferAttribute(this,e),gr.applyMatrix3(t),this.setXYZ(e,gr.x,gr.y,gr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)gr.fromBufferAttribute(this,e),gr.applyMatrix4(t),this.setXYZ(e,gr.x,gr.y,gr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)gr.fromBufferAttribute(this,e),gr.applyNormalMatrix(t),this.setXYZ(e,gr.x,gr.y,gr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)gr.fromBufferAttribute(this,e),gr.transformDirection(t),this.setXYZ(e,gr.x,gr.y,gr.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=no(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=fn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=no(e,this.array)),e}setX(t,e){return this.normalized&&(e=fn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=no(e,this.array)),e}setY(t,e){return this.normalized&&(e=fn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=no(e,this.array)),e}setZ(t,e){return this.normalized&&(e=fn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=no(e,this.array)),e}setW(t,e){return this.normalized&&(e=fn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=fn(e,this.array),n=fn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=fn(e,this.array),n=fn(n,this.array),r=fn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=fn(e,this.array),n=fn(n,this.array),r=fn(r,this.array),s=fn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class m4 extends di{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class g4 extends di{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ot extends di{constructor(t,e,n){super(new Float32Array(t),e,n)}}let joe=0;const Da=new It,yk=new jr,_g=new L,qo=new Es,gb=new Es,qr=new L;class pn extends ig{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:joe++}),this.uuid=jo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(JH(t)?g4:m4)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new yn).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Da.makeRotationFromQuaternion(t),this.applyMatrix4(Da),this}rotateX(t){return Da.makeRotationX(t),this.applyMatrix4(Da),this}rotateY(t){return Da.makeRotationY(t),this.applyMatrix4(Da),this}rotateZ(t){return Da.makeRotationZ(t),this.applyMatrix4(Da),this}translate(t,e,n){return Da.makeTranslation(t,e,n),this.applyMatrix4(Da),this}scale(t,e,n){return Da.makeScale(t,e,n),this.applyMatrix4(Da),this}lookAt(t){return yk.lookAt(t),yk.updateMatrix(),this.applyMatrix4(yk.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_g).negate(),this.translate(_g.x,_g.y,_g.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Es);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new L(-1/0,-1/0,-1/0),new L(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)qo.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(qr.addVectors(this.boundingBox.min,qo.min),this.boundingBox.expandByPoint(qr),qr.addVectors(this.boundingBox.max,qo.max),this.boundingBox.expandByPoint(qr)):(this.boundingBox.expandByPoint(qo.min),this.boundingBox.expandByPoint(qo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new As);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new L,1/0);if(t){const n=this.boundingSphere.center;if(qo.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)gb.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(qr.addVectors(qo.min,gb.min),qo.expandByPoint(qr),qr.addVectors(qo.max,gb.max),qo.expandByPoint(qr)):(qo.expandByPoint(gb.min),qo.expandByPoint(gb.max));qo.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)qr.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(qr));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)qr.fromBufferAttribute(a,c),l&&(_g.fromBufferAttribute(t,c),qr.add(_g)),r=Math.max(r,n.distanceToSquared(qr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new di(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<n.count;B++)a[B]=new L,l[B]=new L;const c=new L,u=new L,h=new L,p=new we,m=new we,g=new we,b=new L,v=new L;function y(B,I,E){c.fromBufferAttribute(n,B),u.fromBufferAttribute(n,I),h.fromBufferAttribute(n,E),p.fromBufferAttribute(s,B),m.fromBufferAttribute(s,I),g.fromBufferAttribute(s,E),u.sub(c),h.sub(c),m.sub(p),g.sub(p);const X=1/(m.x*g.y-g.x*m.y);isFinite(X)&&(b.copy(u).multiplyScalar(g.y).addScaledVector(h,-m.y).multiplyScalar(X),v.copy(h).multiplyScalar(m.x).addScaledVector(u,-g.x).multiplyScalar(X),a[B].add(b),a[I].add(b),a[E].add(b),l[B].add(v),l[I].add(v),l[E].add(v))}let M=this.groups;0===M.length&&(M=[{start:0,count:t.count}]);for(let B=0,I=M.length;B<I;++B){const E=M[B],X=E.start;for(let j=X,ie=X+E.count;j<ie;j+=3)y(t.getX(j+0),t.getX(j+1),t.getX(j+2))}const x=new L,C=new L,O=new L,T=new L;function P(B){O.fromBufferAttribute(r,B),T.copy(O);const I=a[B];x.copy(I),x.sub(O.multiplyScalar(O.dot(I))).normalize(),C.crossVectors(T,I);const X=C.dot(l[B])<0?-1:1;o.setXYZW(B,x.x,x.y,x.z,X)}for(let B=0,I=M.length;B<I;++B){const E=M[B],X=E.start;for(let j=X,ie=X+E.count;j<ie;j+=3)P(t.getX(j+0)),P(t.getX(j+1)),P(t.getX(j+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new di(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const r=new L,s=new L,o=new L,a=new L,l=new L,c=new L,u=new L,h=new L;if(t)for(let p=0,m=t.count;p<m;p+=3){const g=t.getX(p+0),b=t.getX(p+1),v=t.getX(p+2);r.fromBufferAttribute(e,g),s.fromBufferAttribute(e,b),o.fromBufferAttribute(e,v),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,b),c.fromBufferAttribute(n,v),a.add(u),l.add(u),c.add(u),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=e.count;p<m;p+=3)r.fromBufferAttribute(e,p+0),s.fromBufferAttribute(e,p+1),o.fromBufferAttribute(e,p+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),n.setXYZ(p+0,u.x,u.y,u.z),n.setXYZ(p+1,u.x,u.y,u.z),n.setXYZ(p+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)qr.fromBufferAttribute(t,e),qr.normalize(),t.setXYZ(e,qr.x,qr.y,qr.z)}toNonIndexed(){function t(a,l){const c=a.array,u=a.itemSize,h=a.normalized,p=new c.constructor(l.length*u);let m=0,g=0;for(let b=0,v=l.length;b<v;b++){m=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*u;for(let y=0;y<u;y++)p[g++]=c[m++]}return new di(p,u,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new pn,n=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],n);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const m=t(c[u],n);l.push(m)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,p=c.length;h<p;h++)u.push(c[h].toJSON(t.data));u.length>0&&(r[l]=u,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const u=[],h=s[c];for(let p=0,m=h.length;p<m;p++)u.push(h[p].clone(e));this.morphAttributes[c]=u}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _4=new It,nf=new fb,YC=new As,v4=new L,vg=new L,yg=new L,bg=new L,bk=new L,qC=new L,XC=new we,KC=new we,ZC=new we,y4=new L,b4=new L,x4=new L,QC=new L,JC=new L;class Un extends jr{constructor(t=new pn,e=new Yr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(n.attributes.position,t);const a=this.morphTargetInfluences;if(s&&a){qC.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l];0!==u&&(bk.fromBufferAttribute(s[l],t),qC.addScaledVector(o?bk:bk.sub(e),u))}e.add(qC)}return e}raycast(t,e){const n=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),YC.copy(n.boundingSphere),YC.applyMatrix4(s),nf.copy(t.ray).recast(t.near),(!1!==YC.containsPoint(nf.origin)||!(null===nf.intersectSphere(YC,v4)||nf.origin.distanceToSquared(v4)>(t.far-t.near)**2))&&(_4.copy(s).invert(),nf.copy(t.ray).applyMatrix4(_4),(null===n.boundingBox||!1!==nf.intersectsBox(n.boundingBox))&&this._computeIntersections(t,e,nf)))}_computeIntersections(t,e,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(null!==a)if(Array.isArray(o))for(let g=0,b=p.length;g<b;g++){const v=p[g],y=o[v.materialIndex];for(let C=Math.max(v.start,m.start),O=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));C<O;C+=3)r=eS(this,y,t,n,c,u,h,a.getX(C),a.getX(C+1),a.getX(C+2)),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=v.materialIndex,e.push(r))}else for(let v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);v<y;v+=3)r=eS(this,o,t,n,c,u,h,a.getX(v),a.getX(v+1),a.getX(v+2)),r&&(r.faceIndex=Math.floor(v/3),e.push(r));else if(void 0!==l)if(Array.isArray(o))for(let g=0,b=p.length;g<b;g++){const v=p[g],y=o[v.materialIndex];for(let C=Math.max(v.start,m.start),O=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));C<O;C+=3)r=eS(this,y,t,n,c,u,h,C,C+1,C+2),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=v.materialIndex,e.push(r))}else for(let v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);v<y;v+=3)r=eS(this,o,t,n,c,u,h,v,v+1,v+2),r&&(r.faceIndex=Math.floor(v/3),e.push(r))}}function eS(i,t,e,n,r,s,o,a,l,c){i.getVertexPosition(a,vg),i.getVertexPosition(l,yg),i.getVertexPosition(c,bg);const u=function Yoe(i,t,e,n,r,s,o,a){let l;if(l=t.side===bo?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,t.side===Zl,a),null===l)return null;JC.copy(a),JC.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(JC);return c<e.near||c>e.far?null:{distance:c,point:JC.clone(),object:i}}(i,t,e,n,vg,yg,bg,QC);if(u){r&&(XC.fromBufferAttribute(r,a),KC.fromBufferAttribute(r,l),ZC.fromBufferAttribute(r,c),u.uv=Aa.getInterpolation(QC,vg,yg,bg,XC,KC,ZC,new we)),s&&(XC.fromBufferAttribute(s,a),KC.fromBufferAttribute(s,l),ZC.fromBufferAttribute(s,c),u.uv1=Aa.getInterpolation(QC,vg,yg,bg,XC,KC,ZC,new we)),o&&(y4.fromBufferAttribute(o,a),b4.fromBufferAttribute(o,l),x4.fromBufferAttribute(o,c),u.normal=Aa.getInterpolation(QC,vg,yg,bg,y4,b4,x4,new L),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new L,materialIndex:0};Aa.getNormal(vg,yg,bg,h.normal),u.face=h}return u}class rf extends pn{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let p=0,m=0;function g(b,v,y,M,x,C,O,T,P,B,I){const E=C/P,X=O/B,re=C/2,j=O/2,ie=T/2,ge=P+1,Q=B+1;let ue=0,K=0;const ve=new L;for(let Ce=0;Ce<Q;Ce++){const $e=Ce*X-j;for(let vt=0;vt<ge;vt++)ve[b]=(vt*E-re)*M,ve[v]=$e*x,ve[y]=ie,c.push(ve.x,ve.y,ve.z),ve[b]=0,ve[v]=0,ve[y]=T>0?1:-1,u.push(ve.x,ve.y,ve.z),h.push(vt/P),h.push(1-Ce/B),ue+=1}for(let Ce=0;Ce<B;Ce++)for(let $e=0;$e<P;$e++){const Qt=p+$e+ge*(Ce+1),se=p+($e+1)+ge*(Ce+1),Oe=p+($e+1)+ge*Ce;l.push(p+$e+ge*Ce,Qt,Oe),l.push(Qt,se,Oe),K+=6}a.addGroup(m,K,I),m+=K,p+=ue}g("z","y","x",-1,-1,n,e,t,o,s,0),g("z","y","x",1,-1,n,e,-t,o,s,1),g("x","z","y",1,1,t,n,e,r,o,2),g("x","z","y",1,-1,t,n,-e,r,o,3),g("x","y","z",1,-1,t,e,n,r,s,4),g("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(u,3)),this.setAttribute("uv",new ot(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new rf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function xg(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=r.clone():t[e][n]=Array.isArray(r)?r.slice():r}}return t}function ro(i){const t={};for(let e=0;e<i.length;e++){const n=xg(i[e]);for(const r in n)t[r]=n[r]}return t}function w4(i){const t=i.getRenderTarget();return null===t?i.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:ni.workingColorSpace}const Xoe={clone:xg,merge:ro};class ad extends wo{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=xg(t.uniforms),this.uniformsGroups=function qoe(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class xk extends jr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new It,this.projectionMatrix=new It,this.projectionMatrixInverse=new It,this.coordinateSystem=Jc}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const yu=new L,M4=new we,C4=new we;class _r extends xk{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*rg*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Qh*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*rg*Math.atan(Math.tan(.5*Qh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){yu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(yu.x,yu.y).multiplyScalar(-t/yu.z),yu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(yu.x,yu.y).multiplyScalar(-t/yu.z)}getViewSize(t,e){return this.getViewBounds(t,M4,C4),e.subVectors(C4,M4)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Qh*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Qoe extends jr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new _r(-90,1,t,e);r.layers=this.layers,this.add(r);const s=new _r(-90,1,t,e);s.layers=this.layers,this.add(s);const o=new _r(-90,1,t,e);o.layers=this.layers,this.add(o);const a=new _r(-90,1,t,e);a.layers=this.layers,this.add(a);const l=new _r(-90,1,t,e);l.layers=this.layers,this.add(l);const c=new _r(-90,1,t,e);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,s,o,a,l]=e;for(const c of e)this.remove(c);if(t===Jc)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of e)this.add(c),c.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=t.getRenderTarget(),p=t.getActiveCubeFace(),m=t.getActiveMipmapLevel(),g=t.xr.enabled;t.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,s),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,l),t.setRenderTarget(n,4,r),t.render(e,c),n.texture.generateMipmaps=b,t.setRenderTarget(n,5,r),t.render(e,u),t.setRenderTarget(h,p,m),t.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class tS extends xo{constructor(t,e,n,r,s,o,a,l,c,u){super(t=void 0!==t?t:[],e=void 0!==e?e:Qc,n,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Joe extends Jh{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new tS([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:tr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new rf(5,5,5),s=new ad({name:"CubemapFromEquirect",uniforms:xg(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:bo,blending:du});s.uniforms.tEquirect.value=e;const o=new Un(r,s),a=e.minFilter;return e.minFilter===ol&&(e.minFilter=tr),new Qoe(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const wk=new L,eae=new L,tae=new yn;class sf{constructor(t=new L(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=wk.subVectors(n,e).cross(eae.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(wk),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(n,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||tae.getNormalMatrix(t),r=this.coplanarPoint(wk).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const af=new As,nS=new L;class iS{constructor(t=new sf,e=new sf,n=new sf,r=new sf,s=new sf,o=new sf){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Jc){const n=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],h=r[6],p=r[7],m=r[8],g=r[9],b=r[10],v=r[11],y=r[12],M=r[13],x=r[14],C=r[15];if(n[0].setComponents(l-s,p-c,v-m,C-y).normalize(),n[1].setComponents(l+s,p+c,v+m,C+y).normalize(),n[2].setComponents(l+o,p+u,v+g,C+M).normalize(),n[3].setComponents(l-o,p-u,v-g,C-M).normalize(),n[4].setComponents(l-a,p-h,v-b,C-x).normalize(),e===Jc)n[5].setComponents(l+a,p+h,v+b,C+x).normalize();else{if(2001!==e)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,h,b,x).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),af.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),af.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(af)}intersectsSprite(t){return af.center.set(0,0,0),af.radius=.7071067811865476,af.applyMatrix4(t.matrixWorld),this.intersectsSphere(af)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(nS.x=r.normal.x>0?t.max.x:t.min.x,nS.y=r.normal.y>0?t.max.y:t.min.y,nS.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(nS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function S4(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function nae(i){const t=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(i.deleteBuffer(l.buffer),t.delete(a))},update:function o(a,l){if(a.isGLBufferAttribute){const u=t.get(a);return void((!u||u.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}a.isInterleavedBufferAttribute&&(a=a.data);const c=t.get(a);if(void 0===c)t.set(a,function e(a,l){const c=a.array,u=a.usage,h=c.byteLength,p=i.createBuffer();let m;if(i.bindBuffer(l,p),i.bufferData(l,c,u),a.onUploadCallback(),c instanceof Float32Array)m=i.FLOAT;else if(c instanceof Uint16Array)m=a.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=i.SHORT;else if(c instanceof Uint32Array)m=i.UNSIGNED_INT;else if(c instanceof Int32Array)m=i.INT;else if(c instanceof Int8Array)m=i.BYTE;else if(c instanceof Uint8Array)m=i.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);m=i.UNSIGNED_BYTE}return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(a,l,c){const u=l.array,h=l._updateRange,p=l.updateRanges;if(i.bindBuffer(c,a),-1===h.count&&0===p.length&&i.bufferSubData(c,0,u),0!==p.length){for(let m=0,g=p.length;m<g;m++){const b=p[m];i.bufferSubData(c,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}l.clearUpdateRanges()}-1!==h.count&&(i.bufferSubData(c,h.offset*u.BYTES_PER_ELEMENT,u,h.offset,h.count),h.count=-1),l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}class lf extends pn{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(n),l=Math.floor(r),c=a+1,u=l+1,h=t/a,p=e/l,m=[],g=[],b=[],v=[];for(let y=0;y<u;y++){const M=y*p-o;for(let x=0;x<c;x++)g.push(x*h-s,-M,0),b.push(0,0,1),v.push(x/a),v.push(1-y/l)}for(let y=0;y<l;y++)for(let M=0;M<a;M++){const C=M+c*(y+1),O=M+1+c*(y+1),T=M+1+c*y;m.push(M+c*y,C,T),m.push(C,O,T)}this.setIndex(m),this.setAttribute("position",new ot(g,3)),this.setAttribute("normal",new ot(b,3)),this.setAttribute("uv",new ot(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lf(t.width,t.height,t.widthSegments,t.heightSegments)}}const wn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, newPeak * vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},Ke={common:{diffuse:{value:new Ge(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yn}},envmap:{envMap:{value:null},envMapRotation:{value:new yn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yn},normalScale:{value:new we(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0},uvTransform:{value:new yn}},sprite:{diffuse:{value:new Ge(16777215)},opacity:{value:1},center:{value:new we(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yn},alphaMap:{value:null},alphaMapTransform:{value:new yn},alphaTest:{value:0}}},Jl={basic:{uniforms:ro([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.fog]),vertexShader:wn.meshbasic_vert,fragmentShader:wn.meshbasic_frag},lambert:{uniforms:ro([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new Ge(0)}}]),vertexShader:wn.meshlambert_vert,fragmentShader:wn.meshlambert_frag},phong:{uniforms:ro([Ke.common,Ke.specularmap,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,Ke.lights,{emissive:{value:new Ge(0)},specular:{value:new Ge(1118481)},shininess:{value:30}}]),vertexShader:wn.meshphong_vert,fragmentShader:wn.meshphong_frag},standard:{uniforms:ro([Ke.common,Ke.envmap,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.roughnessmap,Ke.metalnessmap,Ke.fog,Ke.lights,{emissive:{value:new Ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag},toon:{uniforms:ro([Ke.common,Ke.aomap,Ke.lightmap,Ke.emissivemap,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.gradientmap,Ke.fog,Ke.lights,{emissive:{value:new Ge(0)}}]),vertexShader:wn.meshtoon_vert,fragmentShader:wn.meshtoon_frag},matcap:{uniforms:ro([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,Ke.fog,{matcap:{value:null}}]),vertexShader:wn.meshmatcap_vert,fragmentShader:wn.meshmatcap_frag},points:{uniforms:ro([Ke.points,Ke.fog]),vertexShader:wn.points_vert,fragmentShader:wn.points_frag},dashed:{uniforms:ro([Ke.common,Ke.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wn.linedashed_vert,fragmentShader:wn.linedashed_frag},depth:{uniforms:ro([Ke.common,Ke.displacementmap]),vertexShader:wn.depth_vert,fragmentShader:wn.depth_frag},normal:{uniforms:ro([Ke.common,Ke.bumpmap,Ke.normalmap,Ke.displacementmap,{opacity:{value:1}}]),vertexShader:wn.meshnormal_vert,fragmentShader:wn.meshnormal_frag},sprite:{uniforms:ro([Ke.sprite,Ke.fog]),vertexShader:wn.sprite_vert,fragmentShader:wn.sprite_frag},background:{uniforms:{uvTransform:{value:new yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wn.background_vert,fragmentShader:wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yn}},vertexShader:wn.backgroundCube_vert,fragmentShader:wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wn.cube_vert,fragmentShader:wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wn.equirect_vert,fragmentShader:wn.equirect_frag},distanceRGBA:{uniforms:ro([Ke.common,Ke.displacementmap,{referencePosition:{value:new L},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wn.distanceRGBA_vert,fragmentShader:wn.distanceRGBA_frag},shadow:{uniforms:ro([Ke.lights,Ke.fog,{color:{value:new Ge(0)},opacity:{value:1}}]),vertexShader:wn.shadow_vert,fragmentShader:wn.shadow_frag}};Jl.physical={uniforms:ro([Jl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yn},clearcoatNormalScale:{value:new we(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yn},sheen:{value:0},sheenColor:{value:new Ge(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yn},transmissionSamplerSize:{value:new we},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yn},attenuationDistance:{value:0},attenuationColor:{value:new Ge(0)},specularColor:{value:new Ge(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yn},anisotropyVector:{value:new we},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yn}}]),vertexShader:wn.meshphysical_vert,fragmentShader:wn.meshphysical_frag};const rS={r:0,b:0,g:0},cf=new nd,ice=new It;function rce(i,t,e,n,r,s,o){const a=new Ge(0);let c,u,l=!0===s?0:1,h=null,p=0,m=null;function b(v,y){v.getRGB(rS,w4(i)),n.buffers.color.setClear(rS.r,rS.g,rS.b,y,o)}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,b(a,l)},render:function g(v,y){let M=!1,x=!0===y.isScene?y.background:null;x&&x.isTexture&&(x=(y.backgroundBlurriness>0?e:t).get(x)),null===x?b(a,l):x&&x.isColor&&(b(x,1),M=!0);const C=i.xr.getEnvironmentBlendMode();"additive"===C?n.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===C&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||M)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),x&&(x.isCubeTexture||x.mapping===ib)?(void 0===u&&(u=new Un(new rf(1,1,1),new ad({name:"BackgroundCubeMaterial",uniforms:xg(Jl.backgroundCube.uniforms),vertexShader:Jl.backgroundCube.vertexShader,fragmentShader:Jl.backgroundCube.fragmentShader,side:bo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,T,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),cf.copy(y.backgroundRotation),cf.x*=-1,cf.y*=-1,cf.z*=-1,x.isCubeTexture&&!1===x.isRenderTargetTexture&&(cf.y*=-1,cf.z*=-1),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(ice.makeRotationFromEuler(cf)),u.material.toneMapped=ni.getTransfer(x.colorSpace)!==Ci,(h!==x||p!==x.version||m!==i.toneMapping)&&(u.material.needsUpdate=!0,h=x,p=x.version,m=i.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(void 0===c&&(c=new Un(new lf(2,2),new ad({name:"BackgroundMaterial",uniforms:xg(Jl.background.uniforms),vertexShader:Jl.background.vertexShader,fragmentShader:Jl.background.fragmentShader,side:Zl,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=ni.getTransfer(x.colorSpace)!==Ci,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(h!==x||p!==x.version||m!==i.toneMapping)&&(c.material.needsUpdate=!0,h=x,p=x.version,m=i.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}}}function sce(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=p(null);let s=r,o=!1;function c(E){return i.bindVertexArray(E)}function u(E){return i.deleteVertexArray(E)}function p(E){const X=[],re=[],j=[];for(let ie=0;ie<e;ie++)X[ie]=0,re[ie]=0,j[ie]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:X,enabledAttributes:re,attributeDivisors:j,object:E,attributes:{},index:null}}function b(){const E=s.newAttributes;for(let X=0,re=E.length;X<re;X++)E[X]=0}function v(E){y(E,0)}function y(E,X){const j=s.enabledAttributes,ie=s.attributeDivisors;s.newAttributes[E]=1,0===j[E]&&(i.enableVertexAttribArray(E),j[E]=1),ie[E]!==X&&(i.vertexAttribDivisor(E,X),ie[E]=X)}function M(){const E=s.newAttributes,X=s.enabledAttributes;for(let re=0,j=X.length;re<j;re++)X[re]!==E[re]&&(i.disableVertexAttribArray(re),X[re]=0)}function x(E,X,re,j,ie,ge,Q){!0===Q?i.vertexAttribIPointer(E,X,re,ie,ge):i.vertexAttribPointer(E,X,re,j,ie,ge)}function B(){I(),o=!0,s!==r&&(s=r,c(s.object))}function I(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(E,X,re,j,ie){let ge=!1;const Q=function h(E,X,re){const j=!0===re.wireframe;let ie=n[E.id];void 0===ie&&(ie={},n[E.id]=ie);let ge=ie[X.id];void 0===ge&&(ge={},ie[X.id]=ge);let Q=ge[j];return void 0===Q&&(Q=p(function l(){return i.createVertexArray()}()),ge[j]=Q),Q}(j,re,X);s!==Q&&(s=Q,c(s.object)),ge=function m(E,X,re,j){const ie=s.attributes,ge=X.attributes;let Q=0;const ue=re.getAttributes();for(const K in ue)if(ue[K].location>=0){const Ce=ie[K];let $e=ge[K];if(void 0===$e&&("instanceMatrix"===K&&E.instanceMatrix&&($e=E.instanceMatrix),"instanceColor"===K&&E.instanceColor&&($e=E.instanceColor)),void 0===Ce||Ce.attribute!==$e||$e&&Ce.data!==$e.data)return!0;Q++}return s.attributesNum!==Q||s.index!==j}(E,j,re,ie),ge&&function g(E,X,re,j){const ie={},ge=X.attributes;let Q=0;const ue=re.getAttributes();for(const K in ue)if(ue[K].location>=0){let Ce=ge[K];void 0===Ce&&("instanceMatrix"===K&&E.instanceMatrix&&(Ce=E.instanceMatrix),"instanceColor"===K&&E.instanceColor&&(Ce=E.instanceColor));const $e={};$e.attribute=Ce,Ce&&Ce.data&&($e.data=Ce.data),ie[K]=$e,Q++}s.attributes=ie,s.attributesNum=Q,s.index=j}(E,j,re,ie),null!==ie&&t.update(ie,i.ELEMENT_ARRAY_BUFFER),(ge||o)&&(o=!1,function C(E,X,re,j){b();const ie=j.attributes,ge=re.getAttributes(),Q=X.defaultAttributeValues;for(const ue in ge){const K=ge[ue];if(K.location>=0){let ve=ie[ue];if(void 0===ve&&("instanceMatrix"===ue&&E.instanceMatrix&&(ve=E.instanceMatrix),"instanceColor"===ue&&E.instanceColor&&(ve=E.instanceColor)),void 0!==ve){const Ce=ve.normalized,$e=ve.itemSize,vt=t.get(ve);if(void 0===vt)continue;const Qt=vt.buffer,se=vt.type,Oe=vt.bytesPerElement,qe=se===i.INT||se===i.UNSIGNED_INT||ve.gpuType===pH;if(ve.isInterleavedBufferAttribute){const Re=ve.data,ft=Re.stride,bt=ve.offset;if(Re.isInstancedInterleavedBuffer){for(let gt=0;gt<K.locationSize;gt++)y(K.location+gt,Re.meshPerAttribute);!0!==E.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let gt=0;gt<K.locationSize;gt++)v(K.location+gt);i.bindBuffer(i.ARRAY_BUFFER,Qt);for(let gt=0;gt<K.locationSize;gt++)x(K.location+gt,$e/K.locationSize,se,Ce,ft*Oe,(bt+$e/K.locationSize*gt)*Oe,qe)}else{if(ve.isInstancedBufferAttribute){for(let Re=0;Re<K.locationSize;Re++)y(K.location+Re,ve.meshPerAttribute);!0!==E.isInstancedMesh&&void 0===j._maxInstanceCount&&(j._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let Re=0;Re<K.locationSize;Re++)v(K.location+Re);i.bindBuffer(i.ARRAY_BUFFER,Qt);for(let Re=0;Re<K.locationSize;Re++)x(K.location+Re,$e/K.locationSize,se,Ce,$e*Oe,$e/K.locationSize*Re*Oe,qe)}}else if(void 0!==Q){const Ce=Q[ue];if(void 0!==Ce)switch(Ce.length){case 2:i.vertexAttrib2fv(K.location,Ce);break;case 3:i.vertexAttrib3fv(K.location,Ce);break;case 4:i.vertexAttrib4fv(K.location,Ce);break;default:i.vertexAttrib1fv(K.location,Ce)}}}}M()}(E,X,re,j),null!==ie&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ie).buffer))},reset:B,resetDefaultState:I,dispose:function O(){B();for(const E in n){const X=n[E];for(const re in X){const j=X[re];for(const ie in j)u(j[ie].object),delete j[ie];delete X[re]}delete n[E]}},releaseStatesOfGeometry:function T(E){if(void 0===n[E.id])return;const X=n[E.id];for(const re in X){const j=X[re];for(const ie in j)u(j[ie].object),delete j[ie];delete X[re]}delete n[E.id]},releaseStatesOfProgram:function P(E){for(const X in n){const re=n[X];if(void 0===re[E.id])continue;const j=re[E.id];for(const ie in j)u(j[ie].object),delete j[ie];delete re[E.id]}},initAttributes:b,enableAttribute:v,disableUnusedAttributes:M}}function oce(i,t,e){let n;this.setMode=function r(l){n=l},this.render=function s(l,c){i.drawArrays(n,l,c),e.update(c,n,1)},this.renderInstances=function o(l,c,u){0!==u&&(i.drawArraysInstanced(n,l,c,u),e.update(c,n,u))},this.renderMultiDraw=function a(l,c,u){if(0===u)return;const h=t.get("WEBGL_multi_draw");if(null===h)for(let p=0;p<u;p++)this.render(l[p],c[p]);else{h.multiDrawArraysWEBGL(n,l,0,c,0,u);let p=0;for(let m=0;m<u;m++)p+=c[m];e.update(p,n,1)}}}function ace(i,t,e){let n;function s(x){if("highp"===x){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";x="mediump"}return"mediump"===x&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==e.precision?e.precision:"highp";const a=s(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const l=!0===e.logarithmicDepthBuffer,c=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),u=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const x=t.get("EXT_texture_filter_anisotropic");n=i.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:o,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:i.getParameter(i.MAX_TEXTURE_SIZE),maxCubemapSize:i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:i.getParameter(i.MAX_VERTEX_ATTRIBS),maxVertexUniforms:i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:i.getParameter(i.MAX_VARYING_VECTORS),maxFragmentUniforms:i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:i.getParameter(i.MAX_SAMPLES)}}function lce(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new sf,a=new yn,l={value:null,needsUpdate:!1};function u(h,p,m,g){const b=null!==h?h.length:0;let v=null;if(0!==b){if(v=l.value,!0!==g||null===v){const y=m+4*b,M=p.matrixWorldInverse;a.getNormalMatrix(M),(null===v||v.length<y)&&(v=new Float32Array(y));for(let x=0,C=m;x!==b;++x,C+=4)o.copy(h[x]).applyMatrix4(M,a),o.normal.toArray(v,C),v[C+3]=o.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=b,t.numIntersection=0,v}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=0!==h.length||p||0!==n||r;return r=p,n=h.length,m},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){e=u(h,p,0)},this.setState=function(h,p,m){const g=h.clippingPlanes,b=h.clipIntersection,v=h.clipShadows,y=i.get(h);if(!r||null===g||0===g.length||s&&!v)s?u(null):function c(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}();else{const M=s?0:n,x=4*M;let C=y.clippingState||null;l.value=C,C=u(g,p,x,m);for(let O=0;O!==x;++O)C[O]=e[O];y.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}}}function cce(i){let t=new WeakMap;function e(o,a){return a===AC?o.mapping=Qc:a===DC&&(o.mapping=Kh),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===AC||a===DC){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new Joe(l.height);return c.fromEquirectangularTexture(i,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}class sS extends xk{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const E4=[.125,.215,.35,.446,.526,.582],Mk=new sS,A4=new Ge;let Ck=null,Sk=0,Ek=0,Ak=!1;const uf=(1+Math.sqrt(5))/2,Sg=1/uf,D4=[new L(1,1,1),new L(-1,1,1),new L(1,1,-1),new L(-1,1,-1),new L(0,uf,Sg),new L(0,uf,-Sg),new L(Sg,0,uf),new L(-Sg,0,uf),new L(uf,Sg,0),new L(-uf,Sg,0)];class T4{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){Ck=this._renderer.getRenderTarget(),Sk=this._renderer.getActiveCubeFace(),Ek=this._renderer.getActiveMipmapLevel(),Ak=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=k4(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=R4(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(Ck,Sk,Ek),this._renderer.xr.enabled=Ak,t.scissorTest=!1,oS(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(t.mapping===Qc||t.mapping===Kh?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),Ck=this._renderer.getRenderTarget(),Sk=this._renderer.getActiveCubeFace(),Ek=this._renderer.getActiveMipmapLevel(),Ak=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:tr,minFilter:tr,generateMipmaps:!1,type:TC,format:Ea,colorSpace:us,depthBuffer:!1},r=I4(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=I4(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function dce(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+E4.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>i-4?l=E4[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),u=-c,h=1+c,p=[u,u,h,u,h,h,u,u,h,h,u,h],m=6,g=6,b=3,v=2,y=1,M=new Float32Array(b*g*m),x=new Float32Array(v*g*m),C=new Float32Array(y*g*m);for(let T=0;T<m;T++){const P=T%3*2/3-1,B=T>2?0:-1;M.set([P,B,0,P+2/3,B,0,P+2/3,B+1,0,P,B,0,P+2/3,B+1,0,P,B+1,0],b*g*T),x.set(p,v*g*T),C.set([T,T,T,T,T,T],y*g*T)}const O=new pn;O.setAttribute("position",new di(M,b)),O.setAttribute("uv",new di(x,v)),O.setAttribute("faceIndex",new di(C,y)),t.push(O),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function uce(i,t,e){const n=new Float32Array(20),r=new L(0,1,0);return new ad({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:du,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Un(this._lodPlanes[0],t);this._renderer.compile(e,Mk)}_sceneToCubeUV(t,e,n,r){const a=new _r(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,p=u.toneMapping;u.getClearColor(A4),u.toneMapping=uu,u.autoClear=!1;const m=new Yr({name:"PMREM.Background",side:bo,depthWrite:!1,depthTest:!1}),g=new Un(new rf,m);let b=!1;const v=t.background;v?v.isColor&&(m.color.copy(v),t.background=null,b=!0):(m.color.copy(A4),b=!0);for(let y=0;y<6;y++){const M=y%3;0===M?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1===M?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const x=this._cubeSize;oS(r,M*x,y>2?x:0,x,x),u.setRenderTarget(r),b&&u.render(g,a),u.render(t,a)}g.geometry.dispose(),g.material.dispose(),u.toneMapping=p,u.autoClear=h,t.background=v}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===Qc||t.mapping===Kh;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=k4()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=R4());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Un(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;oS(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,Mk)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(t,r-1,r,s,D4[(r-1)%D4.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Un(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[n]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,b=s/g,v=isFinite(s)?1+Math.floor(3*b):20;v>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);const y=[];let M=0;for(let P=0;P<20;++P){const B=P/b,I=Math.exp(-B*B/2);y.push(I),0===P?M+=I:P<v&&(M+=2*I)}for(let P=0;P<y.length;P++)y[P]=y[P]/M;p.envMap.value=t.texture,p.samples.value=v,p.weights.value=y,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:x}=this;p.dTheta.value=g,p.mipInt.value=x-n;const C=this._sizeLods[r];oS(e,3*C*(r>x-4?r-x+4:0),4*(this._cubeSize-C),3*C,2*C),l.setRenderTarget(e),l.render(h,Mk)}}function I4(i,t,e){const n=new Jh(i,t,e);return n.texture.mapping=ib,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function oS(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function R4(){return new ad({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:du,depthTest:!1,depthWrite:!1})}function k4(){return new ad({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:du,depthTest:!1,depthWrite:!1})}function hce(i){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===AC||l===DC,u=l===Qc||l===Kh;if(c||u){let h=t.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==h?h.texture.pmremVersion:0))return null===e&&(e=new T4(i)),h=c?e.fromEquirectangular(a,h):e.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(void 0!==h)return h.texture;{const m=a.image;return c&&m&&m.height>0||u&&m&&function r(a){let l=0;for(let u=0;u<6;u++)void 0!==a[u]&&l++;return 6===l}(m)?(null===e&&(e=new T4(i)),h=c?e.fromEquirectangular(a):e.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function fce(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const r=e(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function pce(i,t,e,n){const r={},s=new WeakMap;function o(h){const p=h.target;null!==p.index&&t.remove(p.index);for(const g in p.attributes)t.remove(p.attributes[g]);for(const g in p.morphAttributes){const b=p.morphAttributes[g];for(let v=0,y=b.length;v<y;v++)t.remove(b[v])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(t.remove(m),s.delete(p)),n.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,e.memory.geometries--}function c(h){const p=[],m=h.index,g=h.attributes.position;let b=0;if(null!==m){const M=m.array;b=m.version;for(let x=0,C=M.length;x<C;x+=3){const O=M[x+0],T=M[x+1],P=M[x+2];p.push(O,T,T,P,P,O)}}else{if(void 0===g)return;b=g.version;for(let x=0,C=g.array.length/3-1;x<C;x+=3){const O=x+0,T=x+1,P=x+2;p.push(O,T,T,P,P,O)}}const v=new(JH(p)?g4:m4)(p,1);v.version=b;const y=s.get(h);y&&t.remove(y),s.set(h,v)}return{get:function a(h,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,e.memory.geometries++),p},update:function l(h){const p=h.attributes;for(const g in p)t.update(p[g],i.ARRAY_BUFFER);const m=h.morphAttributes;for(const g in m){const b=m[g];for(let v=0,y=b.length;v<y;v++)t.update(b[v],i.ARRAY_BUFFER)}},getWireframeAttribute:function u(h){const p=s.get(h);if(p){const m=h.index;null!==m&&p.version<m.version&&c(h)}else c(h);return s.get(h)}}}function mce(i,t,e){let n,s,o;this.setMode=function r(h){n=h},this.setIndex=function a(h){s=h.type,o=h.bytesPerElement},this.render=function l(h,p){i.drawElements(n,p,s,h*o),e.update(p,n,1)},this.renderInstances=function c(h,p,m){0!==m&&(i.drawElementsInstanced(n,p,s,h*o,m),e.update(p,n,m))},this.renderMultiDraw=function u(h,p,m){if(0===m)return;const g=t.get("WEBGL_multi_draw");if(null===g)for(let b=0;b<m;b++)this.render(h[b]/o,p[b]);else{g.multiDrawElementsWEBGL(n,p,0,s,h,0,m);let b=0;for(let v=0;v<m;v++)b+=p[v];e.update(b,n,1)}}}function gce(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,a){switch(e.calls++,o){case i.TRIANGLES:e.triangles+=a*(s/3);break;case i.LINES:e.lines+=a*(s/2);break;case i.LINE_STRIP:e.lines+=a*(s-1);break;case i.LINE_LOOP:e.lines+=a*s;break;case i.POINTS:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function _ce(i,t,e){const n=new WeakMap,r=new ai;return{update:function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=void 0!==u?u.length:0;let p=n.get(a);if(void 0===p||p.count!==h){let I=function(){P.dispose(),n.delete(a),a.removeEventListener("dispose",I)};void 0!==p&&p.texture.dispose();const m=void 0!==a.morphAttributes.position,g=void 0!==a.morphAttributes.normal,b=void 0!==a.morphAttributes.color,v=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let x=0;!0===m&&(x=1),!0===g&&(x=2),!0===b&&(x=3);let C=a.attributes.position.count*x,O=1;C>t.maxTextureSize&&(O=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);const T=new Float32Array(C*O*4*h),P=new sk(T,C,O,h);P.type=al,P.needsUpdate=!0;const B=4*x;for(let E=0;E<h;E++){const X=v[E],re=y[E],j=M[E],ie=C*O*4*E;for(let ge=0;ge<X.count;ge++){const Q=ge*B;!0===m&&(r.fromBufferAttribute(X,ge),T[ie+Q+0]=r.x,T[ie+Q+1]=r.y,T[ie+Q+2]=r.z,T[ie+Q+3]=0),!0===g&&(r.fromBufferAttribute(re,ge),T[ie+Q+4]=r.x,T[ie+Q+5]=r.y,T[ie+Q+6]=r.z,T[ie+Q+7]=0),!0===b&&(r.fromBufferAttribute(j,ge),T[ie+Q+8]=r.x,T[ie+Q+9]=r.y,T[ie+Q+10]=r.z,T[ie+Q+11]=4===j.itemSize?r.w:1)}}p={count:h,texture:P,size:new we(C,O)},n.set(a,p),a.addEventListener("dispose",I)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,e);else{let m=0;for(let b=0;b<c.length;b++)m+=c[b];const g=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(i,"morphTargetBaseInfluence",g),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",p.texture,e),l.getUniforms().setValue(i,"morphTargetsTextureSize",p.size)}}}function vce(i,t,e,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,h=t.get(l,l.geometry);if(r.get(h)!==c&&(t.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(e.update(l.instanceMatrix,i.ARRAY_BUFFER),null!==l.instanceColor&&e.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return h},dispose:function o(){r=new WeakMap}}}class P4 extends xo{constructor(t,e,n,r,s,o,a,l,c,u){if((u=void 0!==u?u:Qm)!==Qm&&u!==ab)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Qm&&(n=Zm),void 0===n&&u===ab&&(n=ob),super(null,r,s,o,a,l,u,n,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:mr,this.minFilter=void 0!==l?l:mr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const O4=new xo,F4=new P4(1,1);F4.compareFunction=KH;const L4=new sk,N4=new r4,B4=new tS,U4=[],V4=[],z4=new Float32Array(16),H4=new Float32Array(9),G4=new Float32Array(4);function Eg(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=U4[r];if(void 0===s&&(s=new Float32Array(r),U4[r]=s),0!==t){n.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,i[o].toArray(s,a)}return s}function Ir(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Rr(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function aS(i,t){let e=V4[t];void 0===e&&(e=new Int32Array(t),V4[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function yce(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function bce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ir(e,t))return;i.uniform2fv(this.addr,t),Rr(e,t)}}function xce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Ir(e,t))return;i.uniform3fv(this.addr,t),Rr(e,t)}}function wce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ir(e,t))return;i.uniform4fv(this.addr,t),Rr(e,t)}}function Mce(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ir(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Rr(e,t)}else{if(Ir(e,n))return;G4.set(n),i.uniformMatrix2fv(this.addr,!1,G4),Rr(e,n)}}function Cce(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ir(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Rr(e,t)}else{if(Ir(e,n))return;H4.set(n),i.uniformMatrix3fv(this.addr,!1,H4),Rr(e,n)}}function Sce(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Ir(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Rr(e,t)}else{if(Ir(e,n))return;z4.set(n),i.uniformMatrix4fv(this.addr,!1,z4),Rr(e,n)}}function Ece(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function Ace(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ir(e,t))return;i.uniform2iv(this.addr,t),Rr(e,t)}}function Dce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ir(e,t))return;i.uniform3iv(this.addr,t),Rr(e,t)}}function Tce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ir(e,t))return;i.uniform4iv(this.addr,t),Rr(e,t)}}function Ice(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function Rce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Ir(e,t))return;i.uniform2uiv(this.addr,t),Rr(e,t)}}function kce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Ir(e,t))return;i.uniform3uiv(this.addr,t),Rr(e,t)}}function Pce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Ir(e,t))return;i.uniform4uiv(this.addr,t),Rr(e,t)}}function Oce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2D(t||(this.type===i.SAMPLER_2D_SHADOW?F4:O4),r)}function Fce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||N4,r)}function Lce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||B4,r)}function Nce(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||L4,r)}function Uce(i,t){i.uniform1fv(this.addr,t)}function Vce(i,t){const e=Eg(t,this.size,2);i.uniform2fv(this.addr,e)}function zce(i,t){const e=Eg(t,this.size,3);i.uniform3fv(this.addr,e)}function Hce(i,t){const e=Eg(t,this.size,4);i.uniform4fv(this.addr,e)}function Gce(i,t){const e=Eg(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function $ce(i,t){const e=Eg(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Wce(i,t){const e=Eg(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function jce(i,t){i.uniform1iv(this.addr,t)}function Yce(i,t){i.uniform2iv(this.addr,t)}function qce(i,t){i.uniform3iv(this.addr,t)}function Xce(i,t){i.uniform4iv(this.addr,t)}function Kce(i,t){i.uniform1uiv(this.addr,t)}function Zce(i,t){i.uniform2uiv(this.addr,t)}function Qce(i,t){i.uniform3uiv(this.addr,t)}function Jce(i,t){i.uniform4uiv(this.addr,t)}function ede(i,t,e){const n=this.cache,r=t.length,s=aS(e,r);Ir(n,s)||(i.uniform1iv(this.addr,s),Rr(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||O4,s[o])}function tde(i,t,e){const n=this.cache,r=t.length,s=aS(e,r);Ir(n,s)||(i.uniform1iv(this.addr,s),Rr(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||N4,s[o])}function nde(i,t,e){const n=this.cache,r=t.length,s=aS(e,r);Ir(n,s)||(i.uniform1iv(this.addr,s),Rr(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||B4,s[o])}function ide(i,t,e){const n=this.cache,r=t.length,s=aS(e,r);Ir(n,s)||(i.uniform1iv(this.addr,s),Rr(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||L4,s[o])}class sde{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function Bce(i){switch(i){case 5126:return yce;case 35664:return bce;case 35665:return xce;case 35666:return wce;case 35674:return Mce;case 35675:return Cce;case 35676:return Sce;case 5124:case 35670:return Ece;case 35667:case 35671:return Ace;case 35668:case 35672:return Dce;case 35669:case 35673:return Tce;case 5125:return Ice;case 36294:return Rce;case 36295:return kce;case 36296:return Pce;case 35678:case 36198:case 36298:case 36306:case 35682:return Oce;case 35679:case 36299:case 36307:return Fce;case 35680:case 36300:case 36308:case 36293:return Lce;case 36289:case 36303:case 36311:case 36292:return Nce}}(e.type)}}class ode{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function rde(i){switch(i){case 5126:return Uce;case 35664:return Vce;case 35665:return zce;case 35666:return Hce;case 35674:return Gce;case 35675:return $ce;case 35676:return Wce;case 5124:case 35670:return jce;case 35667:case 35671:return Yce;case 35668:case 35672:return qce;case 35669:case 35673:return Xce;case 5125:return Kce;case 36294:return Zce;case 36295:return Qce;case 36296:return Jce;case 35678:case 36198:case 36298:case 36306:case 35682:return ede;case 35679:case 36299:case 36307:return tde;case 35680:case 36300:case 36308:case 36293:return nde;case 36289:case 36303:case 36311:case 36292:return ide}}(e.type)}}class ade{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(t,e[a.id],n)}}}const Tk=/(\w+)(\])?(\[|\.)?/g;function $4(i,t){i.seq.push(t),i.map[t.id]=t}function lde(i,t,e){const n=i.name,r=n.length;for(Tk.lastIndex=0;;){const s=Tk.exec(n);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&Tk.lastIndex+2===r){$4(e,void 0===c?new sde(a,i,t):new ode(a,i,t));break}{let h=e.map[a];void 0===h&&(h=new ade(a),$4(e,h)),e=h}}}class lS{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);lde(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const a=e[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function W4(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const cde=37297;let dde=0;function j4(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function ude(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function fde(i,t){const e=function hde(i){const t=ni.getPrimaries(ni.workingColorSpace),e=ni.getPrimaries(i);let n;switch(t===e?n="":t===OC&&e===PC?n="LinearDisplayP3ToLinearSRGB":t===PC&&e===OC&&(n="LinearSRGBToLinearDisplayP3"),i){case us:case RC:return[n,"LinearTransferOETF"];case Wr:case ek:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}(t);return`vec4 ${i}( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`}function pde(i,t){let e;switch(t){case Lse:e="Linear";break;case Nse:e="Reinhard";break;case Bse:e="OptimizedCineon";break;case Use:e="ACESFilmic";break;case zse:e="AgX";break;case Hse:e="Neutral";break;case Vse:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}function _b(i){return""!==i}function Y4(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function q4(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const vde=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ik(i){return i.replace(vde,bde)}const yde=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function bde(i,t){let e=wn[t];if(void 0===e){const n=yde.get(t);if(void 0===n)throw new Error("Can not resolve #include <"+t+">");e=wn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n)}return Ik(e)}const xde=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function X4(i){return i.replace(xde,wde)}function wde(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function K4(i){let t=`precision ${i.precision} float;\n\tprecision ${i.precision} int;\n\tprecision ${i.precision} sampler2D;\n\tprecision ${i.precision} samplerCube;\n\tprecision ${i.precision} sampler3D;\n\tprecision ${i.precision} sampler2DArray;\n\tprecision ${i.precision} sampler2DShadow;\n\tprecision ${i.precision} samplerCubeShadow;\n\tprecision ${i.precision} sampler2DArrayShadow;\n\tprecision ${i.precision} isampler2D;\n\tprecision ${i.precision} isampler3D;\n\tprecision ${i.precision} isamplerCube;\n\tprecision ${i.precision} isampler2DArray;\n\tprecision ${i.precision} usampler2D;\n\tprecision ${i.precision} usampler3D;\n\tprecision ${i.precision} usamplerCube;\n\tprecision ${i.precision} usampler2DArray;\n\t`;return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function Dde(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function Mde(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===aH?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===lH?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Zc&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function Cde(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Qc:case Kh:t="ENVMAP_TYPE_CUBE";break;case ib:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),u=function Sde(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===Kh&&(t="ENVMAP_MODE_REFRACTION"),t}(e),h=function Ede(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case EC:t="ENVMAP_BLENDING_MULTIPLY";break;case Ose:t="ENVMAP_BLENDING_MIX";break;case Fse:t="ENVMAP_BLENDING_ADD"}return t}(e),p=function Ade(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),m=function mde(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(_b).join("\n")}(e),g=function gde(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),b=r.createProgram();let v,y,M=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(v=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g].filter(_b).join("\n"),v.length>0&&(v+="\n"),y=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g].filter(_b).join("\n"),y.length>0&&(y+="\n")):(v=[K4(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+u:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.useLegacyLights?"#define LEGACY_LIGHTS":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(_b).join("\n"),y=[K4(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+u:"",e.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.useLegacyLights?"#define LEGACY_LIGHTS":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==uu?"#define TONE_MAPPING":"",e.toneMapping!==uu?wn.tonemapping_pars_fragment:"",e.toneMapping!==uu?pde("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",wn.colorspace_pars_fragment,fde("linearToOutputTexel",e.outputColorSpace),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(_b).join("\n")),o=Ik(o),o=Y4(o,e),o=q4(o,e),a=Ik(a),a=Y4(a,e),a=q4(a,e),o=X4(o),a=X4(a),!0!==e.isRawShaderMaterial&&(M="#version 300 es\n",v=[m,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["#define varying in",e.glslVersion===ZH?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===ZH?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const C=M+y+a,O=W4(r,r.VERTEX_SHADER,M+v+o),T=W4(r,r.FRAGMENT_SHADER,C);function P(X){if(i.debug.checkShaderErrors){const re=r.getProgramInfoLog(b).trim(),j=r.getShaderInfoLog(O).trim(),ie=r.getShaderInfoLog(T).trim();let ge=!0,Q=!0;if(!1===r.getProgramParameter(b,r.LINK_STATUS))if(ge=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,b,O,T);else{const ue=j4(r,O,"vertex"),K=j4(r,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+X.name+"\nMaterial Type: "+X.type+"\n\nProgram Info Log: "+re+"\n"+ue+"\n"+K)}else""!==re?console.warn("THREE.WebGLProgram: Program Info Log:",re):(""===j||""===ie)&&(Q=!1);Q&&(X.diagnostics={runnable:ge,programLog:re,vertexShader:{log:j,prefix:v},fragmentShader:{log:ie,prefix:y}})}r.deleteShader(O),r.deleteShader(T),B=new lS(r,b),I=function _de(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:a}}return e}(r,b)}let B,I;r.attachShader(b,O),r.attachShader(b,T),void 0!==e.index0AttributeName?r.bindAttribLocation(b,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),this.getUniforms=function(){return void 0===B&&P(this),B},this.getAttributes=function(){return void 0===I&&P(this),I};let E=!1===e.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===E&&(E=r.getProgramParameter(b,cde)),E},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=dde++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=O,this.fragmentShader=T,this}let Tde=0;class Ide{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new Rde(t),e.set(t,n)),n}}class Rde{constructor(t){this.id=Tde++,this.code=t,this.usedTimes=0}}function kde(i,t,e,n,r,s,o){const a=new hk,l=new Ide,c=new Set,u=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(I){return c.add(I),0===I?"uv":`uv${I}`}return{getParameters:function v(I,E,X,re,j){const ie=re.fog,ge=j.geometry,ue=(I.isMeshStandardMaterial?e:t).get(I.envMap||(I.isMeshStandardMaterial?re.environment:null)),K=ue&&ue.mapping===ib?ue.image.height:null,ve=g[I.type];null!==I.precision&&(m=r.getMaxPrecision(I.precision),m!==I.precision&&console.warn("THREE.WebGLProgram.getParameters:",I.precision,"not supported, using",m,"instead."));const Ce=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,$e=void 0!==Ce?Ce.length:0;let Qt,se,Oe,qe,vt=0;if(void 0!==ge.morphAttributes.position&&(vt=1),void 0!==ge.morphAttributes.normal&&(vt=2),void 0!==ge.morphAttributes.color&&(vt=3),ve){const Is=Jl[ve];Qt=Is.vertexShader,se=Is.fragmentShader}else Qt=I.vertexShader,se=I.fragmentShader,l.update(I),Oe=l.getVertexShaderID(I),qe=l.getFragmentShaderID(I);const Re=i.getRenderTarget(),ft=!0===j.isInstancedMesh,gt=!!I.map,Ae=!!ue,Se=!!I.aoMap,Ve=!!I.lightMap,Le=!!I.bumpMap,Ue=!!I.normalMap,N=!!I.displacementMap,D=!!I.emissiveMap,ne=!!I.metalnessMap,ye=!!I.roughnessMap,Me=I.anisotropy>0,Te=I.clearcoat>0,Ft=I.iridescence>0,ke=I.sheen>0,xt=I.transmission>0,zt=Me&&!!I.anisotropyMap,We=Te&&!!I.clearcoatMap,lt=Te&&!!I.clearcoatNormalMap,rn=Te&&!!I.clearcoatRoughnessMap,ut=Ft&&!!I.iridescenceMap,pt=Ft&&!!I.iridescenceThicknessMap,Vn=ke&&!!I.sheenColorMap,Wn=ke&&!!I.sheenRoughnessMap,si=!!I.specularMap,ii=!!I.specularColorMap,Ri=!!I.specularIntensityMap,Dt=xt&&!!I.transmissionMap,H=xt&&!!I.thicknessMap,je=!!I.alphaMap,bi=!!I.extensions;let ki=uu;I.toneMapped&&(null===Re||!0===Re.isXRRenderTarget)&&(ki=i.toneMapping);const Vi={shaderID:ve,shaderType:I.type,shaderName:I.name,vertexShader:Qt,fragmentShader:se,defines:I.defines,customVertexShaderID:Oe,customFragmentShaderID:qe,isRawShaderMaterial:!0===I.isRawShaderMaterial,glslVersion:I.glslVersion,precision:m,batching:!0===j.isBatchedMesh,instancing:ft,instancingColor:ft&&null!==j.instanceColor,instancingMorph:ft&&null!==j.morphTexture,supportsVertexTextures:p,outputColorSpace:null===Re?i.outputColorSpace:!0===Re.isXRRenderTarget?Re.texture.colorSpace:us,alphaToCoverage:!!I.alphaToCoverage,map:gt,matcap:!!I.matcap,envMap:Ae,envMapMode:Ae&&ue.mapping,envMapCubeUVHeight:K,aoMap:Se,lightMap:Ve,bumpMap:Le,normalMap:Ue,displacementMap:p&&N,emissiveMap:D,normalMapObjectSpace:Ue&&I.normalMapType===soe,normalMapTangentSpace:Ue&&I.normalMapType===Zh,metalnessMap:ne,roughnessMap:ye,anisotropy:Me,anisotropyMap:zt,clearcoat:Te,clearcoatMap:We,clearcoatNormalMap:lt,clearcoatRoughnessMap:rn,iridescence:Ft,iridescenceMap:ut,iridescenceThicknessMap:pt,sheen:ke,sheenColorMap:Vn,sheenRoughnessMap:Wn,specularMap:si,specularColorMap:ii,specularIntensityMap:Ri,transmission:xt,transmissionMap:Dt,thicknessMap:H,gradientMap:!!I.gradientMap,opaque:!1===I.transparent&&I.blending===Xm&&!1===I.alphaToCoverage,alphaMap:je,alphaTest:I.alphaTest>0,alphaHash:!!I.alphaHash,combine:I.combine,mapUv:gt&&b(I.map.channel),aoMapUv:Se&&b(I.aoMap.channel),lightMapUv:Ve&&b(I.lightMap.channel),bumpMapUv:Le&&b(I.bumpMap.channel),normalMapUv:Ue&&b(I.normalMap.channel),displacementMapUv:N&&b(I.displacementMap.channel),emissiveMapUv:D&&b(I.emissiveMap.channel),metalnessMapUv:ne&&b(I.metalnessMap.channel),roughnessMapUv:ye&&b(I.roughnessMap.channel),anisotropyMapUv:zt&&b(I.anisotropyMap.channel),clearcoatMapUv:We&&b(I.clearcoatMap.channel),clearcoatNormalMapUv:lt&&b(I.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:rn&&b(I.clearcoatRoughnessMap.channel),iridescenceMapUv:ut&&b(I.iridescenceMap.channel),iridescenceThicknessMapUv:pt&&b(I.iridescenceThicknessMap.channel),sheenColorMapUv:Vn&&b(I.sheenColorMap.channel),sheenRoughnessMapUv:Wn&&b(I.sheenRoughnessMap.channel),specularMapUv:si&&b(I.specularMap.channel),specularColorMapUv:ii&&b(I.specularColorMap.channel),specularIntensityMapUv:Ri&&b(I.specularIntensityMap.channel),transmissionMapUv:Dt&&b(I.transmissionMap.channel),thicknessMapUv:H&&b(I.thicknessMap.channel),alphaMapUv:je&&b(I.alphaMap.channel),vertexTangents:!!ge.attributes.tangent&&(Ue||Me),vertexColors:I.vertexColors,vertexAlphas:!0===I.vertexColors&&!!ge.attributes.color&&4===ge.attributes.color.itemSize,pointsUvs:!0===j.isPoints&&!!ge.attributes.uv&&(gt||je),fog:!!ie,useFog:!0===I.fog,fogExp2:!!ie&&ie.isFogExp2,flatShading:!0===I.flatShading,sizeAttenuation:!0===I.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===j.isSkinnedMesh,morphTargets:void 0!==ge.morphAttributes.position,morphNormals:void 0!==ge.morphAttributes.normal,morphColors:void 0!==ge.morphAttributes.color,morphTargetsCount:$e,morphTextureStride:vt,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numLightProbes:E.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:I.dithering,shadowMapEnabled:i.shadowMap.enabled&&X.length>0,shadowMapType:i.shadowMap.type,toneMapping:ki,useLegacyLights:i._useLegacyLights,decodeVideoTexture:gt&&!0===I.map.isVideoTexture&&ni.getTransfer(I.map.colorSpace)===Ci,premultipliedAlpha:I.premultipliedAlpha,doubleSided:I.side===Wo,flipSided:I.side===bo,useDepthPacking:I.depthPacking>=0,depthPacking:I.depthPacking||0,index0AttributeName:I.index0AttributeName,extensionClipCullDistance:bi&&!0===I.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:bi&&!0===I.extensions.multiDraw&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:I.customProgramCacheKey()};return Vi.vertexUv1s=c.has(1),Vi.vertexUv2s=c.has(2),Vi.vertexUv3s=c.has(3),c.clear(),Vi},getProgramCacheKey:function y(I){const E=[];if(I.shaderID?E.push(I.shaderID):(E.push(I.customVertexShaderID),E.push(I.customFragmentShaderID)),void 0!==I.defines)for(const X in I.defines)E.push(X),E.push(I.defines[X]);return!1===I.isRawShaderMaterial&&(function M(I,E){I.push(E.precision),I.push(E.outputColorSpace),I.push(E.envMapMode),I.push(E.envMapCubeUVHeight),I.push(E.mapUv),I.push(E.alphaMapUv),I.push(E.lightMapUv),I.push(E.aoMapUv),I.push(E.bumpMapUv),I.push(E.normalMapUv),I.push(E.displacementMapUv),I.push(E.emissiveMapUv),I.push(E.metalnessMapUv),I.push(E.roughnessMapUv),I.push(E.anisotropyMapUv),I.push(E.clearcoatMapUv),I.push(E.clearcoatNormalMapUv),I.push(E.clearcoatRoughnessMapUv),I.push(E.iridescenceMapUv),I.push(E.iridescenceThicknessMapUv),I.push(E.sheenColorMapUv),I.push(E.sheenRoughnessMapUv),I.push(E.specularMapUv),I.push(E.specularColorMapUv),I.push(E.specularIntensityMapUv),I.push(E.transmissionMapUv),I.push(E.thicknessMapUv),I.push(E.combine),I.push(E.fogExp2),I.push(E.sizeAttenuation),I.push(E.morphTargetsCount),I.push(E.morphAttributeCount),I.push(E.numDirLights),I.push(E.numPointLights),I.push(E.numSpotLights),I.push(E.numSpotLightMaps),I.push(E.numHemiLights),I.push(E.numRectAreaLights),I.push(E.numDirLightShadows),I.push(E.numPointLightShadows),I.push(E.numSpotLightShadows),I.push(E.numSpotLightShadowsWithMaps),I.push(E.numLightProbes),I.push(E.shadowMapType),I.push(E.toneMapping),I.push(E.numClippingPlanes),I.push(E.numClipIntersection),I.push(E.depthPacking)}(E,I),function x(I,E){a.disableAll(),E.supportsVertexTextures&&a.enable(0),E.instancing&&a.enable(1),E.instancingColor&&a.enable(2),E.instancingMorph&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),E.anisotropy&&a.enable(17),E.alphaHash&&a.enable(18),E.batching&&a.enable(19),I.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.useLegacyLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),E.decodeVideoTexture&&a.enable(19),E.alphaToCoverage&&a.enable(20),I.push(a.mask)}(E,I),E.push(i.outputColorSpace)),E.push(I.customProgramCacheKey),E.join()},getUniforms:function C(I){const E=g[I.type];let X;return X=E?Xoe.clone(Jl[E].uniforms):I.uniforms,X},acquireProgram:function O(I,E){let X;for(let re=0,j=u.length;re<j;re++){const ie=u[re];if(ie.cacheKey===E){X=ie,++X.usedTimes;break}}return void 0===X&&(X=new Dde(i,E,I,s),u.push(X)),X},releaseProgram:function T(I){if(0==--I.usedTimes){const E=u.indexOf(I);u[E]=u[u.length-1],u.pop(),I.destroy()}},releaseShaderCache:function P(I){l.remove(I)},programs:u,dispose:function B(){l.dispose()}}}function Pde(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function Ode(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function Z4(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function Q4(){const i=[];let t=0;const e=[],n=[],r=[];function o(h,p,m,g,b,v){let y=i[t];return void 0===y?(y={id:h.id,object:h,geometry:p,material:m,groupOrder:g,renderOrder:h.renderOrder,z:b,group:v},i[t]=y):(y.id=h.id,y.object=h,y.geometry=p,y.material=m,y.groupOrder=g,y.renderOrder=h.renderOrder,y.z=b,y.group=v),t++,y}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function a(h,p,m,g,b,v){const y=o(h,p,m,g,b,v);m.transmission>0?n.push(y):!0===m.transparent?r.push(y):e.push(y)},unshift:function l(h,p,m,g,b,v){const y=o(h,p,m,g,b,v);m.transmission>0?n.unshift(y):!0===m.transparent?r.unshift(y):e.unshift(y)},finish:function u(){for(let h=t,p=i.length;h<p;h++){const m=i[h];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(h,p){e.length>1&&e.sort(h||Ode),n.length>1&&n.sort(p||Z4),r.length>1&&r.sort(p||Z4)}}}function Fde(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new Q4,i.set(n,[o])):r>=s.length?(o=new Q4,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function Lde(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new L,color:new Ge};break;case"SpotLight":e={position:new L,direction:new L,color:new Ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new L,color:new Ge,distance:0,decay:0};break;case"HemisphereLight":e={direction:new L,skyColor:new Ge,groundColor:new Ge};break;case"RectAreaLight":e={color:new Ge,position:new L,halfWidth:new L,halfHeight:new L}}return i[t.id]=e,e}}}let Bde=0;function Ude(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function Vde(i){const t=new Lde,e=function Nde(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new we,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new L);const r=new L,s=new It,o=new It;return{setup:function a(c,u){let h=0,p=0,m=0;for(let X=0;X<9;X++)n.probe[X].set(0,0,0);let g=0,b=0,v=0,y=0,M=0,x=0,C=0,O=0,T=0,P=0,B=0;c.sort(Ude);const I=!0===u?Math.PI:1;for(let X=0,re=c.length;X<re;X++){const j=c[X],ie=j.color,ge=j.intensity,Q=j.distance,ue=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)h+=ie.r*ge*I,p+=ie.g*ge*I,m+=ie.b*ge*I;else if(j.isLightProbe){for(let K=0;K<9;K++)n.probe[K].addScaledVector(j.sh.coefficients[K],ge);B++}else if(j.isDirectionalLight){const K=t.get(j);if(K.color.copy(j.color).multiplyScalar(j.intensity*I),j.castShadow){const ve=j.shadow,Ce=e.get(j);Ce.shadowBias=ve.bias,Ce.shadowNormalBias=ve.normalBias,Ce.shadowRadius=ve.radius,Ce.shadowMapSize=ve.mapSize,n.directionalShadow[g]=Ce,n.directionalShadowMap[g]=ue,n.directionalShadowMatrix[g]=j.shadow.matrix,x++}n.directional[g]=K,g++}else if(j.isSpotLight){const K=t.get(j);K.position.setFromMatrixPosition(j.matrixWorld),K.color.copy(ie).multiplyScalar(ge*I),K.distance=Q,K.coneCos=Math.cos(j.angle),K.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),K.decay=j.decay,n.spot[v]=K;const ve=j.shadow;if(j.map&&(n.spotLightMap[T]=j.map,T++,ve.updateMatrices(j),j.castShadow&&P++),n.spotLightMatrix[v]=ve.matrix,j.castShadow){const Ce=e.get(j);Ce.shadowBias=ve.bias,Ce.shadowNormalBias=ve.normalBias,Ce.shadowRadius=ve.radius,Ce.shadowMapSize=ve.mapSize,n.spotShadow[v]=Ce,n.spotShadowMap[v]=ue,O++}v++}else if(j.isRectAreaLight){const K=t.get(j);K.color.copy(ie).multiplyScalar(ge),K.halfWidth.set(.5*j.width,0,0),K.halfHeight.set(0,.5*j.height,0),n.rectArea[y]=K,y++}else if(j.isPointLight){const K=t.get(j);if(K.color.copy(j.color).multiplyScalar(j.intensity*I),K.distance=j.distance,K.decay=j.decay,j.castShadow){const ve=j.shadow,Ce=e.get(j);Ce.shadowBias=ve.bias,Ce.shadowNormalBias=ve.normalBias,Ce.shadowRadius=ve.radius,Ce.shadowMapSize=ve.mapSize,Ce.shadowCameraNear=ve.camera.near,Ce.shadowCameraFar=ve.camera.far,n.pointShadow[b]=Ce,n.pointShadowMap[b]=ue,n.pointShadowMatrix[b]=j.shadow.matrix,C++}n.point[b]=K,b++}else if(j.isHemisphereLight){const K=t.get(j);K.skyColor.copy(j.color).multiplyScalar(ge*I),K.groundColor.copy(j.groundColor).multiplyScalar(ge*I),n.hemi[M]=K,M++}}y>0&&(!0===i.has("OES_texture_float_linear")?(n.rectAreaLTC1=Ke.LTC_FLOAT_1,n.rectAreaLTC2=Ke.LTC_FLOAT_2):(n.rectAreaLTC1=Ke.LTC_HALF_1,n.rectAreaLTC2=Ke.LTC_HALF_2)),n.ambient[0]=h,n.ambient[1]=p,n.ambient[2]=m;const E=n.hash;(E.directionalLength!==g||E.pointLength!==b||E.spotLength!==v||E.rectAreaLength!==y||E.hemiLength!==M||E.numDirectionalShadows!==x||E.numPointShadows!==C||E.numSpotShadows!==O||E.numSpotMaps!==T||E.numLightProbes!==B)&&(n.directional.length=g,n.spot.length=v,n.rectArea.length=y,n.point.length=b,n.hemi.length=M,n.directionalShadow.length=x,n.directionalShadowMap.length=x,n.pointShadow.length=C,n.pointShadowMap.length=C,n.spotShadow.length=O,n.spotShadowMap.length=O,n.directionalShadowMatrix.length=x,n.pointShadowMatrix.length=C,n.spotLightMatrix.length=O+T-P,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=P,n.numLightProbes=B,E.directionalLength=g,E.pointLength=b,E.spotLength=v,E.rectAreaLength=y,E.hemiLength=M,E.numDirectionalShadows=x,E.numPointShadows=C,E.numSpotShadows=O,E.numSpotMaps=T,E.numLightProbes=B,n.version=Bde++)},setupView:function l(c,u){let h=0,p=0,m=0,g=0,b=0;const v=u.matrixWorldInverse;for(let y=0,M=c.length;y<M;y++){const x=c[y];if(x.isDirectionalLight){const C=n.directional[h];C.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(v),h++}else if(x.isSpotLight){const C=n.spot[m];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(v),C.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(v),m++}else if(x.isRectAreaLight){const C=n.rectArea[g];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(v),o.identity(),s.copy(x.matrixWorld),s.premultiply(v),o.extractRotation(s),C.halfWidth.set(.5*x.width,0,0),C.halfHeight.set(0,.5*x.height,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),g++}else if(x.isPointLight){const C=n.point[p];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(v),p++}else if(x.isHemisphereLight){const C=n.hemi[b];C.direction.setFromMatrixPosition(x.matrixWorld),C.direction.transformDirection(v),b++}}},state:n}}function J4(i){const t=new Vde(i),e=[],n=[];return{init:function r(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t,transmissionRenderTarget:null},setupLights:function a(u){t.setup(e,u)},setupLightsView:function l(u){t.setupView(e,u)},pushLight:function s(u){e.push(u)},pushShadow:function o(u){n.push(u)}}}function zde(i){let t=new WeakMap;return{get:function e(r,s=0){const o=t.get(r);let a;return void 0===o?(a=new J4(i),t.set(r,[a])):s>=o.length?(a=new J4(i),o.push(a)):a=o[s],a},dispose:function n(){t=new WeakMap}}}class e5 extends wo{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class t5 extends wo{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Hde="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Gde="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function $de(i,t,e){let n=new iS;const r=new we,s=new we,o=new ai,a=new e5({depthPacking:roe}),l=new t5,c={},u=e.maxTextureSize,h={[Zl]:bo,[bo]:Zl,[Wo]:Wo},p=new ad({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new we},radius:{value:4}},vertexShader:Hde,fragmentShader:Gde}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new pn;g.setAttribute("position",new di(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Un(g,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=aH;let y=this.type;function M(T,P){const B=t.update(b);p.defines.VSM_SAMPLES!==T.blurSamples&&(p.defines.VSM_SAMPLES=T.blurSamples,m.defines.VSM_SAMPLES=T.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===T.mapPass&&(T.mapPass=new Jh(r.x,r.y)),p.uniforms.shadow_pass.value=T.map.texture,p.uniforms.resolution.value=T.mapSize,p.uniforms.radius.value=T.radius,i.setRenderTarget(T.mapPass),i.clear(),i.renderBufferDirect(P,null,B,p,b,null),m.uniforms.shadow_pass.value=T.mapPass.texture,m.uniforms.resolution.value=T.mapSize,m.uniforms.radius.value=T.radius,i.setRenderTarget(T.map),i.clear(),i.renderBufferDirect(P,null,B,m,b,null)}function x(T,P,B,I){let E=null;const X=!0===B.isPointLight?T.customDistanceMaterial:T.customDepthMaterial;if(void 0!==X)E=X;else if(E=!0===B.isPointLight?l:a,i.localClippingEnabled&&!0===P.clipShadows&&Array.isArray(P.clippingPlanes)&&0!==P.clippingPlanes.length||P.displacementMap&&0!==P.displacementScale||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const re=E.uuid,j=P.uuid;let ie=c[re];void 0===ie&&(ie={},c[re]=ie);let ge=ie[j];void 0===ge&&(ge=E.clone(),ie[j]=ge,P.addEventListener("dispose",O)),E=ge}return E.visible=P.visible,E.wireframe=P.wireframe,E.side=I===Zc?null!==P.shadowSide?P.shadowSide:P.side:null!==P.shadowSide?P.shadowSide:h[P.side],E.alphaMap=P.alphaMap,E.alphaTest=P.alphaTest,E.map=P.map,E.clipShadows=P.clipShadows,E.clippingPlanes=P.clippingPlanes,E.clipIntersection=P.clipIntersection,E.displacementMap=P.displacementMap,E.displacementScale=P.displacementScale,E.displacementBias=P.displacementBias,E.wireframeLinewidth=P.wireframeLinewidth,E.linewidth=P.linewidth,!0===B.isPointLight&&!0===E.isMeshDistanceMaterial&&(i.properties.get(E).light=B),E}function C(T,P,B,I,E){if(!1===T.visible)return;if(T.layers.test(P.layers)&&(T.isMesh||T.isLine||T.isPoints)&&(T.castShadow||T.receiveShadow&&E===Zc)&&(!T.frustumCulled||n.intersectsObject(T))){T.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,T.matrixWorld);const j=t.update(T),ie=T.material;if(Array.isArray(ie)){const ge=j.groups;for(let Q=0,ue=ge.length;Q<ue;Q++){const K=ge[Q],ve=ie[K.materialIndex];if(ve&&ve.visible){const Ce=x(T,ve,I,E);T.onBeforeShadow(i,T,P,B,j,Ce,K),i.renderBufferDirect(B,null,j,Ce,T,K),T.onAfterShadow(i,T,P,B,j,Ce,K)}}}else if(ie.visible){const ge=x(T,ie,I,E);T.onBeforeShadow(i,T,P,B,j,ge,null),i.renderBufferDirect(B,null,j,ge,T,null),T.onAfterShadow(i,T,P,B,j,ge,null)}}const re=T.children;for(let j=0,ie=re.length;j<ie;j++)C(re[j],P,B,I,E)}function O(T){T.target.removeEventListener("dispose",O);for(const B in c){const I=c[B],E=T.target.uuid;E in I&&(I[E].dispose(),delete I[E])}}this.render=function(T,P,B){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===T.length)return;const I=i.getRenderTarget(),E=i.getActiveCubeFace(),X=i.getActiveMipmapLevel(),re=i.state;re.setBlending(du),re.buffers.color.setClear(1,1,1,1),re.buffers.depth.setTest(!0),re.setScissorTest(!1);const j=y!==Zc&&this.type===Zc,ie=y===Zc&&this.type!==Zc;for(let ge=0,Q=T.length;ge<Q;ge++){const ue=T[ge],K=ue.shadow;if(void 0===K){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(!1===K.autoUpdate&&!1===K.needsUpdate)continue;r.copy(K.mapSize);const ve=K.getFrameExtents();if(r.multiply(ve),s.copy(K.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/ve.x),r.x=s.x*ve.x,K.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/ve.y),r.y=s.y*ve.y,K.mapSize.y=s.y)),null===K.map||!0===j||!0===ie){const $e=this.type!==Zc?{minFilter:mr,magFilter:mr}:{};null!==K.map&&K.map.dispose(),K.map=new Jh(r.x,r.y,$e),K.map.texture.name=ue.name+".shadowMap",K.camera.updateProjectionMatrix()}i.setRenderTarget(K.map),i.clear();const Ce=K.getViewportCount();for(let $e=0;$e<Ce;$e++){const vt=K.getViewport($e);o.set(s.x*vt.x,s.y*vt.y,s.x*vt.z,s.y*vt.w),re.viewport(o),K.updateMatrices(ue,$e),n=K.getFrustum(),C(P,B,K.camera,ue,this.type)}!0!==K.isPointLightShadow&&this.type===Zc&&M(K,B),K.needsUpdate=!1}y=this.type,v.needsUpdate=!1,i.setRenderTarget(I,E,X)}}function Wde(i){const r=new function t(){let H=!1;const Xe=new ai;let je=null;const Rt=new ai(0,0,0,0);return{setMask:function(Lt){je!==Lt&&!H&&(i.colorMask(Lt,Lt,Lt,Lt),je=Lt)},setLocked:function(Lt){H=Lt},setClear:function(Lt,bi,ki,Vi,Is){!0===Is&&(Lt*=Vi,bi*=Vi,ki*=Vi),Xe.set(Lt,bi,ki,Vi),!1===Rt.equals(Xe)&&(i.clearColor(Lt,bi,ki,Vi),Rt.copy(Xe))},reset:function(){H=!1,je=null,Rt.set(-1,0,0,0)}}},s=new function e(){let H=!1,Xe=null,je=null,Rt=null;return{setTest:function(Lt){Lt?qe(i.DEPTH_TEST):Re(i.DEPTH_TEST)},setMask:function(Lt){Xe!==Lt&&!H&&(i.depthMask(Lt),Xe=Lt)},setFunc:function(Lt){if(je!==Lt){switch(Lt){case Ase:i.depthFunc(i.NEVER);break;case Dse:i.depthFunc(i.ALWAYS);break;case Tse:i.depthFunc(i.LESS);break;case SC:i.depthFunc(i.LEQUAL);break;case Ise:i.depthFunc(i.EQUAL);break;case Rse:i.depthFunc(i.GEQUAL);break;case kse:i.depthFunc(i.GREATER);break;case Pse:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}je=Lt}},setLocked:function(Lt){H=Lt},setClear:function(Lt){Rt!==Lt&&(i.clearDepth(Lt),Rt=Lt)},reset:function(){H=!1,Xe=null,je=null,Rt=null}}},o=new function n(){let H=!1,Xe=null,je=null,Rt=null,Lt=null,bi=null,ki=null,Vi=null,Is=null;return{setTest:function(Si){H||(Si?qe(i.STENCIL_TEST):Re(i.STENCIL_TEST))},setMask:function(Si){Xe!==Si&&!H&&(i.stencilMask(Si),Xe=Si)},setFunc:function(Si,rc,sc){(je!==Si||Rt!==rc||Lt!==sc)&&(i.stencilFunc(Si,rc,sc),je=Si,Rt=rc,Lt=sc)},setOp:function(Si,rc,sc){(bi!==Si||ki!==rc||Vi!==sc)&&(i.stencilOp(Si,rc,sc),bi=Si,ki=rc,Vi=sc)},setLocked:function(Si){H=Si},setClear:function(Si){Is!==Si&&(i.clearStencil(Si),Is=Si)},reset:function(){H=!1,Xe=null,je=null,Rt=null,Lt=null,bi=null,ki=null,Vi=null,Is=null}}},a=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,p=[],m=null,g=!1,b=null,v=null,y=null,M=null,x=null,C=null,O=null,T=new Ge(0,0,0),P=0,B=!1,I=null,E=null,X=null,re=null,j=null;const ie=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ge=!1,Q=0;const ue=i.getParameter(i.VERSION);-1!==ue.indexOf("WebGL")?(Q=parseFloat(/^WebGL (\d)/.exec(ue)[1]),ge=Q>=1):-1!==ue.indexOf("OpenGL ES")&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(ue)[1]),ge=Q>=2);let K=null,ve={};const Ce=i.getParameter(i.SCISSOR_BOX),$e=i.getParameter(i.VIEWPORT),vt=(new ai).fromArray(Ce),Qt=(new ai).fromArray($e);function se(H,Xe,je,Rt){const Lt=new Uint8Array(4),bi=i.createTexture();i.bindTexture(H,bi),i.texParameteri(H,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(H,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ki=0;ki<je;ki++)H===i.TEXTURE_3D||H===i.TEXTURE_2D_ARRAY?i.texImage3D(Xe,0,i.RGBA,1,1,Rt,0,i.RGBA,i.UNSIGNED_BYTE,Lt):i.texImage2D(Xe+ki,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Lt);return bi}const Oe={};function qe(H){!0!==c[H]&&(i.enable(H),c[H]=!0)}function Re(H){!1!==c[H]&&(i.disable(H),c[H]=!1)}Oe[i.TEXTURE_2D]=se(i.TEXTURE_2D,i.TEXTURE_2D,1),Oe[i.TEXTURE_CUBE_MAP]=se(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Oe[i.TEXTURE_2D_ARRAY]=se(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Oe[i.TEXTURE_3D]=se(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),qe(i.DEPTH_TEST),s.setFunc(SC),Le(!1),Ue(oH),qe(i.CULL_FACE),Se(du);const ee={[Xh]:i.FUNC_ADD,[dse]:i.FUNC_SUBTRACT,[use]:i.FUNC_REVERSE_SUBTRACT};ee[hse]=i.MIN,ee[fse]=i.MAX;const Ae={[pse]:i.ZERO,[mse]:i.ONE,[gse]:i.SRC_COLOR,[HR]:i.SRC_ALPHA,[wse]:i.SRC_ALPHA_SATURATE,[bse]:i.DST_COLOR,[vse]:i.DST_ALPHA,[_se]:i.ONE_MINUS_SRC_COLOR,[GR]:i.ONE_MINUS_SRC_ALPHA,[xse]:i.ONE_MINUS_DST_COLOR,[yse]:i.ONE_MINUS_DST_ALPHA,[Mse]:i.CONSTANT_COLOR,[Cse]:i.ONE_MINUS_CONSTANT_COLOR,[Sse]:i.CONSTANT_ALPHA,[Ese]:i.ONE_MINUS_CONSTANT_ALPHA};function Se(H,Xe,je,Rt,Lt,bi,ki,Vi,Is,Si){if(H!==du){if(!1===g&&(qe(i.BLEND),g=!0),H===cse)Lt=Lt||Xe,bi=bi||je,ki=ki||Rt,(Xe!==v||Lt!==x)&&(i.blendEquationSeparate(ee[Xe],ee[Lt]),v=Xe,x=Lt),(je!==y||Rt!==M||bi!==C||ki!==O)&&(i.blendFuncSeparate(Ae[je],Ae[Rt],Ae[bi],Ae[ki]),y=je,M=Rt,C=bi,O=ki),(!1===Vi.equals(T)||Is!==P)&&(i.blendColor(Vi.r,Vi.g,Vi.b,Is),T.copy(Vi),P=Is),b=H,B=!1;else if(H!==b||Si!==B){if((v!==Xh||x!==Xh)&&(i.blendEquation(i.FUNC_ADD),v=Xh,x=Xh),Si)switch(H){case Xm:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case cH:i.blendFunc(i.ONE,i.ONE);break;case dH:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case uH:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}else switch(H){case Xm:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case cH:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case dH:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case uH:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}y=null,M=null,C=null,O=null,T.set(0,0,0),P=0,b=H,B=Si}}else!0===g&&(Re(i.BLEND),g=!1)}function Le(H){I!==H&&(i.frontFace(H?i.CW:i.CCW),I=H)}function Ue(H){H!==ase?(qe(i.CULL_FACE),H!==E&&i.cullFace(H===oH?i.BACK:H===lse?i.FRONT:i.FRONT_AND_BACK)):Re(i.CULL_FACE),E=H}function D(H,Xe,je){H?(qe(i.POLYGON_OFFSET_FILL),(re!==Xe||j!==je)&&(i.polygonOffset(Xe,je),re=Xe,j=je)):Re(i.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:o},enable:qe,disable:Re,bindFramebuffer:function ft(H,Xe){return u[H]!==Xe&&(i.bindFramebuffer(H,Xe),u[H]=Xe,H===i.DRAW_FRAMEBUFFER&&(u[i.FRAMEBUFFER]=Xe),H===i.FRAMEBUFFER&&(u[i.DRAW_FRAMEBUFFER]=Xe),!0)},drawBuffers:function bt(H,Xe){let je=p,Rt=!1;if(H){je=h.get(Xe),void 0===je&&(je=[],h.set(Xe,je));const Lt=H.textures;if(je.length!==Lt.length||je[0]!==i.COLOR_ATTACHMENT0){for(let bi=0,ki=Lt.length;bi<ki;bi++)je[bi]=i.COLOR_ATTACHMENT0+bi;je.length=Lt.length,Rt=!0}}else je[0]!==i.BACK&&(je[0]=i.BACK,Rt=!0);Rt&&i.drawBuffers(je)},useProgram:function gt(H){return m!==H&&(i.useProgram(H),m=H,!0)},setBlending:Se,setMaterial:function Ve(H,Xe){H.side===Wo?Re(i.CULL_FACE):qe(i.CULL_FACE);let je=H.side===bo;Xe&&(je=!je),Le(je),H.blending===Xm&&!1===H.transparent?Se(du):Se(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.blendColor,H.blendAlpha,H.premultipliedAlpha),s.setFunc(H.depthFunc),s.setTest(H.depthTest),s.setMask(H.depthWrite),r.setMask(H.colorWrite);const Rt=H.stencilWrite;o.setTest(Rt),Rt&&(o.setMask(H.stencilWriteMask),o.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),o.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),D(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),!0===H.alphaToCoverage?qe(i.SAMPLE_ALPHA_TO_COVERAGE):Re(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Le,setCullFace:Ue,setLineWidth:function N(H){H!==X&&(ge&&i.lineWidth(H),X=H)},setPolygonOffset:D,setScissorTest:function ne(H){H?qe(i.SCISSOR_TEST):Re(i.SCISSOR_TEST)},activeTexture:function ye(H){void 0===H&&(H=i.TEXTURE0+ie-1),K!==H&&(i.activeTexture(H),K=H)},bindTexture:function Me(H,Xe,je){void 0===je&&(je=null===K?i.TEXTURE0+ie-1:K);let Rt=ve[je];void 0===Rt&&(Rt={type:void 0,texture:void 0},ve[je]=Rt),(Rt.type!==H||Rt.texture!==Xe)&&(K!==je&&(i.activeTexture(je),K=je),i.bindTexture(H,Xe||Oe[H]),Rt.type=H,Rt.texture=Xe)},unbindTexture:function Te(){const H=ve[K];void 0!==H&&void 0!==H.type&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)},compressedTexImage2D:function Ft(){try{i.compressedTexImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexImage3D:function ke(){try{i.compressedTexImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage2D:function pt(){try{i.texImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage3D:function Vn(){try{i.texImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},updateUBOMapping:function ii(H,Xe){let je=l.get(Xe);void 0===je&&(je=new WeakMap,l.set(Xe,je));let Rt=je.get(H);void 0===Rt&&(Rt=i.getUniformBlockIndex(Xe,H.name),je.set(H,Rt))},uniformBlockBinding:function Ri(H,Xe){const Rt=l.get(Xe).get(H);a.get(Xe)!==Rt&&(i.uniformBlockBinding(Xe,Rt,H.__bindingPointIndex),a.set(Xe,Rt))},texStorage2D:function rn(){try{i.texStorage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texStorage3D:function ut(){try{i.texStorage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage2D:function xt(){try{i.texSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage3D:function zt(){try{i.texSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage2D:function We(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage3D:function lt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},scissor:function Wn(H){!1===vt.equals(H)&&(i.scissor(H.x,H.y,H.z,H.w),vt.copy(H))},viewport:function si(H){!1===Qt.equals(H)&&(i.viewport(H.x,H.y,H.z,H.w),Qt.copy(H))},reset:function Dt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},K=null,ve={},u={},h=new WeakMap,p=[],m=null,g=!1,b=null,v=null,y=null,M=null,x=null,C=null,O=null,T=new Ge(0,0,0),P=0,B=!1,I=null,E=null,X=null,re=null,j=null,vt.set(0,0,i.canvas.width,i.canvas.height),Qt.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),o.reset()}}}function jde(i,t,e,n,r,s,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new we,u=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function g(N,D){return m?new OffscreenCanvas(N,D):db("canvas")}function b(N,D,ne){let ye=1;const Me=Ue(N);if((Me.width>ne||Me.height>ne)&&(ye=ne/Math.max(Me.width,Me.height)),ye<1){if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){const Te=Math.floor(ye*Me.width),Ft=Math.floor(ye*Me.height);void 0===h&&(h=g(Te,Ft));const ke=D?g(Te,Ft):h;return ke.width=Te,ke.height=Ft,ke.getContext("2d").drawImage(N,0,0,Te,Ft),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Me.width+"x"+Me.height+") to ("+Te+"x"+Ft+")."),ke}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Me.width+"x"+Me.height+")."),N}return N}function v(N){return N.generateMipmaps&&N.minFilter!==mr&&N.minFilter!==tr}function y(N){i.generateMipmap(N)}function M(N,D,ne,ye,Me=!1){if(null!==N){if(void 0!==i[N])return i[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Te=D;if(D===i.RED&&(ne===i.FLOAT&&(Te=i.R32F),ne===i.HALF_FLOAT&&(Te=i.R16F),ne===i.UNSIGNED_BYTE&&(Te=i.R8)),D===i.RED_INTEGER&&(ne===i.UNSIGNED_BYTE&&(Te=i.R8UI),ne===i.UNSIGNED_SHORT&&(Te=i.R16UI),ne===i.UNSIGNED_INT&&(Te=i.R32UI),ne===i.BYTE&&(Te=i.R8I),ne===i.SHORT&&(Te=i.R16I),ne===i.INT&&(Te=i.R32I)),D===i.RG&&(ne===i.FLOAT&&(Te=i.RG32F),ne===i.HALF_FLOAT&&(Te=i.RG16F),ne===i.UNSIGNED_BYTE&&(Te=i.RG8)),D===i.RG_INTEGER&&(ne===i.UNSIGNED_BYTE&&(Te=i.RG8UI),ne===i.UNSIGNED_SHORT&&(Te=i.RG16UI),ne===i.UNSIGNED_INT&&(Te=i.RG32UI),ne===i.BYTE&&(Te=i.RG8I),ne===i.SHORT&&(Te=i.RG16I),ne===i.INT&&(Te=i.RG32I)),D===i.RGB&&ne===i.UNSIGNED_INT_5_9_9_9_REV&&(Te=i.RGB9_E5),D===i.RGBA){const Ft=Me?kC:ni.getTransfer(ye);ne===i.FLOAT&&(Te=i.RGBA32F),ne===i.HALF_FLOAT&&(Te=i.RGBA16F),ne===i.UNSIGNED_BYTE&&(Te=Ft===Ci?i.SRGB8_ALPHA8:i.RGBA8),ne===i.UNSIGNED_SHORT_4_4_4_4&&(Te=i.RGBA4),ne===i.UNSIGNED_SHORT_5_5_5_1&&(Te=i.RGB5_A1)}return(Te===i.R16F||Te===i.R32F||Te===i.RG16F||Te===i.RG32F||Te===i.RGBA16F||Te===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Te}function x(N,D){return!0===v(N)||N.isFramebufferTexture&&N.minFilter!==mr&&N.minFilter!==tr?Math.log2(Math.max(D.width,D.height))+1:void 0!==N.mipmaps&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?D.mipmaps.length:1}function C(N){const D=N.target;D.removeEventListener("dispose",C),function T(N){const D=n.get(N);if(void 0===D.__webglInit)return;const ne=N.source,ye=p.get(ne);if(ye){const Me=ye[D.__cacheKey];Me.usedTimes--,0===Me.usedTimes&&P(N),0===Object.keys(ye).length&&p.delete(ne)}n.remove(N)}(D),D.isVideoTexture&&u.delete(D)}function O(N){const D=N.target;D.removeEventListener("dispose",O),function B(N){const D=n.get(N);if(N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(D.__webglFramebuffer[ye]))for(let Me=0;Me<D.__webglFramebuffer[ye].length;Me++)i.deleteFramebuffer(D.__webglFramebuffer[ye][Me]);else i.deleteFramebuffer(D.__webglFramebuffer[ye]);D.__webglDepthbuffer&&i.deleteRenderbuffer(D.__webglDepthbuffer[ye])}else{if(Array.isArray(D.__webglFramebuffer))for(let ye=0;ye<D.__webglFramebuffer.length;ye++)i.deleteFramebuffer(D.__webglFramebuffer[ye]);else i.deleteFramebuffer(D.__webglFramebuffer);if(D.__webglDepthbuffer&&i.deleteRenderbuffer(D.__webglDepthbuffer),D.__webglMultisampledFramebuffer&&i.deleteFramebuffer(D.__webglMultisampledFramebuffer),D.__webglColorRenderbuffer)for(let ye=0;ye<D.__webglColorRenderbuffer.length;ye++)D.__webglColorRenderbuffer[ye]&&i.deleteRenderbuffer(D.__webglColorRenderbuffer[ye]);D.__webglDepthRenderbuffer&&i.deleteRenderbuffer(D.__webglDepthRenderbuffer)}const ne=N.textures;for(let ye=0,Me=ne.length;ye<Me;ye++){const Te=n.get(ne[ye]);Te.__webglTexture&&(i.deleteTexture(Te.__webglTexture),o.memory.textures--),n.remove(ne[ye])}n.remove(N)}(D)}function P(N){const D=n.get(N);i.deleteTexture(D.__webglTexture),delete p.get(N.source)[D.__cacheKey],o.memory.textures--}let I=0;function j(N,D){const ne=n.get(N);if(N.isVideoTexture&&function Ve(N){const D=o.render.frame;u.get(N)!==D&&(u.set(N,D),N.update())}(N),!1===N.isRenderTargetTexture&&N.version>0&&ne.__version!==N.version){const ye=N.image;if(null===ye)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==ye.complete)return void vt(ne,N,D);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(i.TEXTURE_2D,ne.__webglTexture,i.TEXTURE0+D)}const ue={[Ql]:i.REPEAT,[pr]:i.CLAMP_TO_EDGE,[rb]:i.MIRRORED_REPEAT},K={[mr]:i.NEAREST,[WR]:i.NEAREST_MIPMAP_NEAREST,[Km]:i.NEAREST_MIPMAP_LINEAR,[tr]:i.LINEAR,[sb]:i.LINEAR_MIPMAP_NEAREST,[ol]:i.LINEAR_MIPMAP_LINEAR},ve={[ooe]:i.NEVER,[hoe]:i.ALWAYS,[aoe]:i.LESS,[KH]:i.LEQUAL,[loe]:i.EQUAL,[uoe]:i.GEQUAL,[coe]:i.GREATER,[doe]:i.NOTEQUAL};function Ce(N,D){if(D.type===al&&!1===t.has("OES_texture_float_linear")&&(D.magFilter===tr||D.magFilter===sb||D.magFilter===Km||D.magFilter===ol||D.minFilter===tr||D.minFilter===sb||D.minFilter===Km||D.minFilter===ol)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(N,i.TEXTURE_WRAP_S,ue[D.wrapS]),i.texParameteri(N,i.TEXTURE_WRAP_T,ue[D.wrapT]),(N===i.TEXTURE_3D||N===i.TEXTURE_2D_ARRAY)&&i.texParameteri(N,i.TEXTURE_WRAP_R,ue[D.wrapR]),i.texParameteri(N,i.TEXTURE_MAG_FILTER,K[D.magFilter]),i.texParameteri(N,i.TEXTURE_MIN_FILTER,K[D.minFilter]),D.compareFunction&&(i.texParameteri(N,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(N,i.TEXTURE_COMPARE_FUNC,ve[D.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(D.magFilter===mr||D.minFilter!==Km&&D.minFilter!==ol||D.type===al&&!1===t.has("OES_texture_float_linear"))return;if(D.anisotropy>1||n.get(D).__currentAnisotropy){const ne=t.get("EXT_texture_filter_anisotropic");i.texParameterf(N,ne.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(D.anisotropy,r.getMaxAnisotropy())),n.get(D).__currentAnisotropy=D.anisotropy}}}function $e(N,D){let ne=!1;void 0===N.__webglInit&&(N.__webglInit=!0,D.addEventListener("dispose",C));const ye=D.source;let Me=p.get(ye);void 0===Me&&(Me={},p.set(ye,Me));const Te=function re(N){const D=[];return D.push(N.wrapS),D.push(N.wrapT),D.push(N.wrapR||0),D.push(N.magFilter),D.push(N.minFilter),D.push(N.anisotropy),D.push(N.internalFormat),D.push(N.format),D.push(N.type),D.push(N.generateMipmaps),D.push(N.premultiplyAlpha),D.push(N.flipY),D.push(N.unpackAlignment),D.push(N.colorSpace),D.join()}(D);if(Te!==N.__cacheKey){void 0===Me[Te]&&(Me[Te]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),Me[Te].usedTimes++;const Ft=Me[N.__cacheKey];void 0!==Ft&&(Me[N.__cacheKey].usedTimes--,0===Ft.usedTimes&&P(D)),N.__cacheKey=Te,N.__webglTexture=Me[Te].texture}return ne}function vt(N,D,ne){let ye=i.TEXTURE_2D;(D.isDataArrayTexture||D.isCompressedArrayTexture)&&(ye=i.TEXTURE_2D_ARRAY),D.isData3DTexture&&(ye=i.TEXTURE_3D);const Me=$e(N,D),Te=D.source;e.bindTexture(ye,N.__webglTexture,i.TEXTURE0+ne);const Ft=n.get(Te);if(Te.version!==Ft.__version||!0===Me){e.activeTexture(i.TEXTURE0+ne);const ke=ni.getPrimaries(ni.workingColorSpace),xt=D.colorSpace===fu?null:ni.getPrimaries(D.colorSpace),zt=D.colorSpace===fu||ke===xt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,D.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,D.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,zt);let We=b(D.image,!1,r.maxTextureSize);We=Le(D,We);const lt=s.convert(D.format,D.colorSpace),rn=s.convert(D.type);let pt,ut=M(D.internalFormat,lt,rn,D.colorSpace,D.isVideoTexture);Ce(ye,D);const Vn=D.mipmaps,Wn=!0!==D.isVideoTexture&&ut!==SH,si=void 0===Ft.__version||!0===Me,ii=Te.dataReady,Ri=x(D,We);if(D.isDepthTexture)ut=i.DEPTH_COMPONENT16,D.type===al?ut=i.DEPTH_COMPONENT32F:D.type===Zm?ut=i.DEPTH_COMPONENT24:D.type===ob&&(ut=i.DEPTH24_STENCIL8),si&&(Wn?e.texStorage2D(i.TEXTURE_2D,1,ut,We.width,We.height):e.texImage2D(i.TEXTURE_2D,0,ut,We.width,We.height,0,lt,rn,null));else if(D.isDataTexture)if(Vn.length>0){Wn&&si&&e.texStorage2D(i.TEXTURE_2D,Ri,ut,Vn[0].width,Vn[0].height);for(let Dt=0,H=Vn.length;Dt<H;Dt++)pt=Vn[Dt],Wn?ii&&e.texSubImage2D(i.TEXTURE_2D,Dt,0,0,pt.width,pt.height,lt,rn,pt.data):e.texImage2D(i.TEXTURE_2D,Dt,ut,pt.width,pt.height,0,lt,rn,pt.data);D.generateMipmaps=!1}else Wn?(si&&e.texStorage2D(i.TEXTURE_2D,Ri,ut,We.width,We.height),ii&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,We.width,We.height,lt,rn,We.data)):e.texImage2D(i.TEXTURE_2D,0,ut,We.width,We.height,0,lt,rn,We.data);else if(D.isCompressedTexture)if(D.isCompressedArrayTexture){Wn&&si&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ri,ut,Vn[0].width,Vn[0].height,We.depth);for(let Dt=0,H=Vn.length;Dt<H;Dt++)pt=Vn[Dt],D.format!==Ea?null!==lt?Wn?ii&&e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Dt,0,0,0,pt.width,pt.height,We.depth,lt,pt.data,0,0):e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Dt,ut,pt.width,pt.height,We.depth,0,pt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wn?ii&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Dt,0,0,0,pt.width,pt.height,We.depth,lt,rn,pt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Dt,ut,pt.width,pt.height,We.depth,0,lt,rn,pt.data)}else{Wn&&si&&e.texStorage2D(i.TEXTURE_2D,Ri,ut,Vn[0].width,Vn[0].height);for(let Dt=0,H=Vn.length;Dt<H;Dt++)pt=Vn[Dt],D.format!==Ea?null!==lt?Wn?ii&&e.compressedTexSubImage2D(i.TEXTURE_2D,Dt,0,0,pt.width,pt.height,lt,pt.data):e.compressedTexImage2D(i.TEXTURE_2D,Dt,ut,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wn?ii&&e.texSubImage2D(i.TEXTURE_2D,Dt,0,0,pt.width,pt.height,lt,rn,pt.data):e.texImage2D(i.TEXTURE_2D,Dt,ut,pt.width,pt.height,0,lt,rn,pt.data)}else if(D.isDataArrayTexture)Wn?(si&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ri,ut,We.width,We.height,We.depth),ii&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,We.width,We.height,We.depth,lt,rn,We.data)):e.texImage3D(i.TEXTURE_2D_ARRAY,0,ut,We.width,We.height,We.depth,0,lt,rn,We.data);else if(D.isData3DTexture)Wn?(si&&e.texStorage3D(i.TEXTURE_3D,Ri,ut,We.width,We.height,We.depth),ii&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,We.width,We.height,We.depth,lt,rn,We.data)):e.texImage3D(i.TEXTURE_3D,0,ut,We.width,We.height,We.depth,0,lt,rn,We.data);else if(D.isFramebufferTexture){if(si)if(Wn)e.texStorage2D(i.TEXTURE_2D,Ri,ut,We.width,We.height);else{let Dt=We.width,H=We.height;for(let Xe=0;Xe<Ri;Xe++)e.texImage2D(i.TEXTURE_2D,Xe,ut,Dt,H,0,lt,rn,null),Dt>>=1,H>>=1}}else if(Vn.length>0){if(Wn&&si){const Dt=Ue(Vn[0]);e.texStorage2D(i.TEXTURE_2D,Ri,ut,Dt.width,Dt.height)}for(let Dt=0,H=Vn.length;Dt<H;Dt++)pt=Vn[Dt],Wn?ii&&e.texSubImage2D(i.TEXTURE_2D,Dt,0,0,lt,rn,pt):e.texImage2D(i.TEXTURE_2D,Dt,ut,lt,rn,pt);D.generateMipmaps=!1}else if(Wn){if(si){const Dt=Ue(We);e.texStorage2D(i.TEXTURE_2D,Ri,ut,Dt.width,Dt.height)}ii&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,lt,rn,We)}else e.texImage2D(i.TEXTURE_2D,0,ut,lt,rn,We);v(D)&&y(ye),Ft.__version=Te.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}function se(N,D,ne,ye,Me,Te){const Ft=s.convert(ne.format,ne.colorSpace),ke=s.convert(ne.type),xt=M(ne.internalFormat,Ft,ke,ne.colorSpace);if(!n.get(D).__hasExternalTextures){const We=Math.max(1,D.width>>Te),lt=Math.max(1,D.height>>Te);Me===i.TEXTURE_3D||Me===i.TEXTURE_2D_ARRAY?e.texImage3D(Me,Te,xt,We,lt,D.depth,0,Ft,ke,null):e.texImage2D(Me,Te,xt,We,lt,0,Ft,ke,null)}e.bindFramebuffer(i.FRAMEBUFFER,N),Se(D)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,ye,Me,n.get(ne).__webglTexture,0,Ae(D)):(Me===i.TEXTURE_2D||Me>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Me<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,ye,Me,n.get(ne).__webglTexture,Te),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Oe(N,D,ne){if(i.bindRenderbuffer(i.RENDERBUFFER,N),D.depthBuffer&&!D.stencilBuffer){let ye=i.DEPTH_COMPONENT24;if(ne||Se(D)){const Me=D.depthTexture;Me&&Me.isDepthTexture&&(Me.type===al?ye=i.DEPTH_COMPONENT32F:Me.type===Zm&&(ye=i.DEPTH_COMPONENT24));const Te=Ae(D);Se(D)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Te,ye,D.width,D.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,Te,ye,D.width,D.height)}else i.renderbufferStorage(i.RENDERBUFFER,ye,D.width,D.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,N)}else if(D.depthBuffer&&D.stencilBuffer){const ye=Ae(D);ne&&!1===Se(D)?i.renderbufferStorageMultisample(i.RENDERBUFFER,ye,i.DEPTH24_STENCIL8,D.width,D.height):Se(D)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,ye,i.DEPTH24_STENCIL8,D.width,D.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,D.width,D.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,N)}else{const ye=D.textures;for(let Me=0;Me<ye.length;Me++){const Te=ye[Me],Ft=s.convert(Te.format,Te.colorSpace),ke=s.convert(Te.type),xt=M(Te.internalFormat,Ft,ke,Te.colorSpace),zt=Ae(D);ne&&!1===Se(D)?i.renderbufferStorageMultisample(i.RENDERBUFFER,zt,xt,D.width,D.height):Se(D)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,zt,xt,D.width,D.height):i.renderbufferStorage(i.RENDERBUFFER,xt,D.width,D.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function Re(N){const D=n.get(N),ne=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!D.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");!function qe(N,D){if(D&&D.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,N),!D.depthTexture||!D.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(D.depthTexture).__webglTexture||D.depthTexture.image.width!==D.width||D.depthTexture.image.height!==D.height)&&(D.depthTexture.image.width=D.width,D.depthTexture.image.height=D.height,D.depthTexture.needsUpdate=!0),j(D.depthTexture,0);const ye=n.get(D.depthTexture).__webglTexture,Me=Ae(D);if(D.depthTexture.format===Qm)Se(D)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ye,0,Me):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ye,0);else{if(D.depthTexture.format!==ab)throw new Error("Unknown depthTexture format");Se(D)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ye,0,Me):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ye,0)}}(D.__webglFramebuffer,N)}else if(ne){D.__webglDepthbuffer=[];for(let ye=0;ye<6;ye++)e.bindFramebuffer(i.FRAMEBUFFER,D.__webglFramebuffer[ye]),D.__webglDepthbuffer[ye]=i.createRenderbuffer(),Oe(D.__webglDepthbuffer[ye],N,!1)}else e.bindFramebuffer(i.FRAMEBUFFER,D.__webglFramebuffer),D.__webglDepthbuffer=i.createRenderbuffer(),Oe(D.__webglDepthbuffer,N,!1);e.bindFramebuffer(i.FRAMEBUFFER,null)}function Ae(N){return Math.min(r.maxSamples,N.samples)}function Se(N){const D=n.get(N);return N.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==D.__useRenderToTexture}function Le(N,D){const ne=N.colorSpace,ye=N.format,Me=N.type;return!0===N.isCompressedTexture||!0===N.isVideoTexture||ne!==us&&ne!==fu&&(ni.getTransfer(ne)===Ci?(ye!==Ea||Me!==hu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),D}function Ue(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(c.width=N.naturalWidth||N.width,c.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(c.width=N.displayWidth,c.height=N.displayHeight):(c.width=N.width,c.height=N.height),c}this.allocateTextureUnit=function X(){const N=I;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),I+=1,N},this.resetTextureUnits=function E(){I=0},this.setTexture2D=j,this.setTexture2DArray=function ie(N,D){const ne=n.get(N);N.version>0&&ne.__version!==N.version?vt(ne,N,D):e.bindTexture(i.TEXTURE_2D_ARRAY,ne.__webglTexture,i.TEXTURE0+D)},this.setTexture3D=function ge(N,D){const ne=n.get(N);N.version>0&&ne.__version!==N.version?vt(ne,N,D):e.bindTexture(i.TEXTURE_3D,ne.__webglTexture,i.TEXTURE0+D)},this.setTextureCube=function Q(N,D){const ne=n.get(N);N.version>0&&ne.__version!==N.version?function Qt(N,D,ne){if(6!==D.image.length)return;const ye=$e(N,D),Me=D.source;e.bindTexture(i.TEXTURE_CUBE_MAP,N.__webglTexture,i.TEXTURE0+ne);const Te=n.get(Me);if(Me.version!==Te.__version||!0===ye){e.activeTexture(i.TEXTURE0+ne);const Ft=ni.getPrimaries(ni.workingColorSpace),ke=D.colorSpace===fu?null:ni.getPrimaries(D.colorSpace),xt=D.colorSpace===fu||Ft===ke?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,D.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,D.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,D.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);const zt=D.isCompressedTexture||D.image[0].isCompressedTexture,We=D.image[0]&&D.image[0].isDataTexture,lt=[];for(let H=0;H<6;H++)lt[H]=zt||We?We?D.image[H].image:D.image[H]:b(D.image[H],!0,r.maxCubemapSize),lt[H]=Le(D,lt[H]);const rn=lt[0],ut=s.convert(D.format,D.colorSpace),pt=s.convert(D.type),Vn=M(D.internalFormat,ut,pt,D.colorSpace),Wn=!0!==D.isVideoTexture,si=void 0===Te.__version||!0===ye,ii=Me.dataReady;let Dt,Ri=x(D,rn);if(Ce(i.TEXTURE_CUBE_MAP,D),zt){Wn&&si&&e.texStorage2D(i.TEXTURE_CUBE_MAP,Ri,Vn,rn.width,rn.height);for(let H=0;H<6;H++){Dt=lt[H].mipmaps;for(let Xe=0;Xe<Dt.length;Xe++){const je=Dt[Xe];D.format!==Ea?null!==ut?Wn?ii&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe,0,0,je.width,je.height,ut,je.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe,Vn,je.width,je.height,0,je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Wn?ii&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe,0,0,je.width,je.height,ut,pt,je.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe,Vn,je.width,je.height,0,ut,pt,je.data)}}}else{if(Dt=D.mipmaps,Wn&&si){Dt.length>0&&Ri++;const H=Ue(lt[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,Ri,Vn,H.width,H.height)}for(let H=0;H<6;H++)if(We){Wn?ii&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,0,0,0,lt[H].width,lt[H].height,ut,pt,lt[H].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,0,Vn,lt[H].width,lt[H].height,0,ut,pt,lt[H].data);for(let Xe=0;Xe<Dt.length;Xe++){const Rt=Dt[Xe].image[H].image;Wn?ii&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe+1,0,0,Rt.width,Rt.height,ut,pt,Rt.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe+1,Vn,Rt.width,Rt.height,0,ut,pt,Rt.data)}}else{Wn?ii&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,0,0,0,ut,pt,lt[H]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,0,Vn,ut,pt,lt[H]);for(let Xe=0;Xe<Dt.length;Xe++){const je=Dt[Xe];Wn?ii&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe+1,0,0,ut,pt,je.image[H]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+H,Xe+1,Vn,ut,pt,je.image[H])}}}v(D)&&y(i.TEXTURE_CUBE_MAP),Te.__version=Me.version,D.onUpdate&&D.onUpdate(D)}N.__version=D.version}(ne,N,D):e.bindTexture(i.TEXTURE_CUBE_MAP,ne.__webglTexture,i.TEXTURE0+D)},this.rebindTextures=function ft(N,D,ne){const ye=n.get(N);void 0!==D&&se(ye.__webglFramebuffer,N,N.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),void 0!==ne&&Re(N)},this.setupRenderTarget=function bt(N){const D=N.texture,ne=n.get(N),ye=n.get(D);N.addEventListener("dispose",O);const Me=N.textures,Te=!0===N.isWebGLCubeRenderTarget,Ft=Me.length>1;if(Ft||(void 0===ye.__webglTexture&&(ye.__webglTexture=i.createTexture()),ye.__version=D.version,o.memory.textures++),Te){ne.__webglFramebuffer=[];for(let ke=0;ke<6;ke++)if(D.mipmaps&&D.mipmaps.length>0){ne.__webglFramebuffer[ke]=[];for(let xt=0;xt<D.mipmaps.length;xt++)ne.__webglFramebuffer[ke][xt]=i.createFramebuffer()}else ne.__webglFramebuffer[ke]=i.createFramebuffer()}else{if(D.mipmaps&&D.mipmaps.length>0){ne.__webglFramebuffer=[];for(let ke=0;ke<D.mipmaps.length;ke++)ne.__webglFramebuffer[ke]=i.createFramebuffer()}else ne.__webglFramebuffer=i.createFramebuffer();if(Ft)for(let ke=0,xt=Me.length;ke<xt;ke++){const zt=n.get(Me[ke]);void 0===zt.__webglTexture&&(zt.__webglTexture=i.createTexture(),o.memory.textures++)}if(N.samples>0&&!1===Se(N)){ne.__webglMultisampledFramebuffer=i.createFramebuffer(),ne.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let ke=0;ke<Me.length;ke++){const xt=Me[ke];ne.__webglColorRenderbuffer[ke]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,ne.__webglColorRenderbuffer[ke]);const zt=s.convert(xt.format,xt.colorSpace),We=s.convert(xt.type),lt=M(xt.internalFormat,zt,We,xt.colorSpace,!0===N.isXRRenderTarget),rn=Ae(N);i.renderbufferStorageMultisample(i.RENDERBUFFER,rn,lt,N.width,N.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ke,i.RENDERBUFFER,ne.__webglColorRenderbuffer[ke])}i.bindRenderbuffer(i.RENDERBUFFER,null),N.depthBuffer&&(ne.__webglDepthRenderbuffer=i.createRenderbuffer(),Oe(ne.__webglDepthRenderbuffer,N,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Te){e.bindTexture(i.TEXTURE_CUBE_MAP,ye.__webglTexture),Ce(i.TEXTURE_CUBE_MAP,D);for(let ke=0;ke<6;ke++)if(D.mipmaps&&D.mipmaps.length>0)for(let xt=0;xt<D.mipmaps.length;xt++)se(ne.__webglFramebuffer[ke][xt],N,D,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,xt);else se(ne.__webglFramebuffer[ke],N,D,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+ke,0);v(D)&&y(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(Ft){for(let ke=0,xt=Me.length;ke<xt;ke++){const zt=Me[ke],We=n.get(zt);e.bindTexture(i.TEXTURE_2D,We.__webglTexture),Ce(i.TEXTURE_2D,zt),se(ne.__webglFramebuffer,N,zt,i.COLOR_ATTACHMENT0+ke,i.TEXTURE_2D,0),v(zt)&&y(i.TEXTURE_2D)}e.unbindTexture()}else{let ke=i.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(ke=N.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(ke,ye.__webglTexture),Ce(ke,D),D.mipmaps&&D.mipmaps.length>0)for(let xt=0;xt<D.mipmaps.length;xt++)se(ne.__webglFramebuffer[xt],N,D,i.COLOR_ATTACHMENT0,ke,xt);else se(ne.__webglFramebuffer,N,D,i.COLOR_ATTACHMENT0,ke,0);v(D)&&y(ke),e.unbindTexture()}N.depthBuffer&&Re(N)},this.updateRenderTargetMipmap=function gt(N){const D=N.textures;for(let ne=0,ye=D.length;ne<ye;ne++){const Me=D[ne];if(v(Me)){const Te=N.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Ft=n.get(Me).__webglTexture;e.bindTexture(Te,Ft),y(Te),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function ee(N){if(N.samples>0&&!1===Se(N)){const D=N.textures,ne=N.width,ye=N.height;let Me=i.COLOR_BUFFER_BIT;const Te=[],Ft=N.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,ke=n.get(N),xt=D.length>1;if(xt)for(let zt=0;zt<D.length;zt++)e.bindFramebuffer(i.FRAMEBUFFER,ke.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+zt,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,ke.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+zt,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,ke.__webglMultisampledFramebuffer),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ke.__webglFramebuffer);for(let zt=0;zt<D.length;zt++){Te.push(i.COLOR_ATTACHMENT0+zt),N.depthBuffer&&Te.push(Ft);const We=void 0!==ke.__ignoreDepthValues&&ke.__ignoreDepthValues;if(!1===We&&(N.depthBuffer&&(Me|=i.DEPTH_BUFFER_BIT),N.stencilBuffer&&!0!==ke.__isTransmissionRenderTarget&&(Me|=i.STENCIL_BUFFER_BIT)),xt&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,ke.__webglColorRenderbuffer[zt]),!0===We&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[Ft]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Ft])),xt){const lt=n.get(D[zt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,lt,0)}i.blitFramebuffer(0,0,ne,ye,0,0,ne,ye,Me,i.NEAREST),l&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Te)}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),xt)for(let zt=0;zt<D.length;zt++){e.bindFramebuffer(i.FRAMEBUFFER,ke.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+zt,i.RENDERBUFFER,ke.__webglColorRenderbuffer[zt]);const We=n.get(D[zt]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,ke.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+zt,i.TEXTURE_2D,We,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,ke.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=se,this.useMultisampledRTT=Se}function Yde(i,t){return{convert:function e(n,r=fu){let s;const o=ni.getTransfer(r);if(n===hu)return i.UNSIGNED_BYTE;if(n===mH)return i.UNSIGNED_SHORT_4_4_4_4;if(n===gH)return i.UNSIGNED_SHORT_5_5_5_1;if(n===jse)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===$se)return i.BYTE;if(n===Wse)return i.SHORT;if(n===fH)return i.UNSIGNED_SHORT;if(n===pH)return i.INT;if(n===Zm)return i.UNSIGNED_INT;if(n===al)return i.FLOAT;if(n===TC)return i.HALF_FLOAT;if(n===Yse)return i.ALPHA;if(n===qse)return i.RGB;if(n===Ea)return i.RGBA;if(n===Xse)return i.LUMINANCE;if(n===Kse)return i.LUMINANCE_ALPHA;if(n===Qm)return i.DEPTH_COMPONENT;if(n===ab)return i.DEPTH_STENCIL;if(n===_H)return i.RED;if(n===vH)return i.RED_INTEGER;if(n===Zse)return i.RG;if(n===yH)return i.RG_INTEGER;if(n===bH)return i.RGBA_INTEGER;if(n===jR||n===YR||n===qR||n===XR)if(o===Ci){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===jR)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===YR)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===qR)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===XR)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===jR)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===YR)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===qR)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===XR)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===xH||n===wH||n===MH||n===CH){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===xH)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===wH)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===MH)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===CH)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===SH)return s=t.get("WEBGL_compressed_texture_etc1"),null!==s?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===EH||n===AH){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===EH)return o===Ci?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===AH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===DH||n===TH||n===IH||n===RH||n===kH||n===PH||n===OH||n===FH||n===LH||n===NH||n===BH||n===UH||n===VH||n===zH){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===DH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===TH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===IH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===RH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===kH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===PH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===OH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===FH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===LH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===NH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===BH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===UH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===VH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===zH)return o===Ci?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===KR||n===HH||n===GH){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===KR)return o===Ci?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===HH)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===GH)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Qse||n===$H||n===WH||n===jH){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===KR)return s.COMPRESSED_RED_RGTC1_EXT;if(n===$H)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===WH)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===jH)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===ob?i.UNSIGNED_INT_24_8:void 0!==i[n]?i[n]:null}}}class qde extends _r{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Xo extends jr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Xde={type:"move"};class Rk{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Xo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Xo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new L,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new L),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Xo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new L,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new L),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const b of t.hand.values()){const v=e.getJointPose(b,n),y=this._getHandJoint(c,b);null!==v&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=null!==v}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Xde)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new Xo;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Qde{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new xo;t.properties.get(r).__webglTexture=e.texture,(e.depthNear!=n.depthNear||e.depthFar!=n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}render(t,e){if(null!==this.texture){if(null===this.mesh){const n=e.cameras[0].viewport,r=new ad({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Un(new lf(20,20),r)}t.render(this.mesh,e)}}reset(){this.texture=null,this.mesh=null}}class Jde extends ig{constructor(t,e){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,p=null,m=null,g=null;const b=new Qde,v=e.getContextAttributes();let y=null,M=null;const x=[],C=[],O=new we;let T=null;const P=new _r;P.layers.enable(1),P.viewport=new ai;const B=new _r;B.layers.enable(2),B.viewport=new ai;const I=[P,B],E=new qde;E.layers.enable(1),E.layers.enable(2);let X=null,re=null;function j(se){const Oe=C.indexOf(se.inputSource);if(-1===Oe)return;const qe=x[Oe];void 0!==qe&&(qe.update(se.inputSource,se.frame,c||o),qe.dispatchEvent({type:se.type,data:se.inputSource}))}function ie(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",ie),r.removeEventListener("inputsourceschange",ge);for(let se=0;se<x.length;se++){const Oe=C[se];null!==Oe&&(C[se]=null,x[se].disconnect(Oe))}X=null,re=null,b.reset(),t.setRenderTarget(y),m=null,p=null,h=null,r=null,M=null,Qt.stop(),n.isPresenting=!1,t.setPixelRatio(T),t.setSize(O.width,O.height,!1),n.dispatchEvent({type:"sessionend"})}function ge(se){for(let Oe=0;Oe<se.removed.length;Oe++){const qe=se.removed[Oe],Re=C.indexOf(qe);Re>=0&&(C[Re]=null,x[Re].disconnect(qe))}for(let Oe=0;Oe<se.added.length;Oe++){const qe=se.added[Oe];let Re=C.indexOf(qe);if(-1===Re){for(let bt=0;bt<x.length;bt++){if(bt>=C.length){C.push(qe),Re=bt;break}if(null===C[bt]){C[bt]=qe,Re=bt;break}}if(-1===Re)break}const ft=x[Re];ft&&ft.connect(qe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let Oe=x[se];return void 0===Oe&&(Oe=new Rk,x[se]=Oe),Oe.getTargetRaySpace()},this.getControllerGrip=function(se){let Oe=x[se];return void 0===Oe&&(Oe=new Rk,x[se]=Oe),Oe.getGripSpace()},this.getHand=function(se){let Oe=x[se];return void 0===Oe&&(Oe=new Rk,x[se]=Oe),Oe.getHandSpace()},this.setFramebufferScaleFactor=function(se){s=se,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(se){c=se},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var se=ht(function*(Oe){if(r=Oe,null!==r){if(y=t.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",ie),r.addEventListener("inputsourceschange",ge),!0!==v.xrCompatible&&(yield e.makeXRCompatible()),T=t.getPixelRatio(),t.getSize(O),void 0===r.renderState.layers)m=new XRWebGLLayer(r,e,{antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),t.setPixelRatio(1),t.setSize(m.framebufferWidth,m.framebufferHeight,!1),M=new Jh(m.framebufferWidth,m.framebufferHeight,{format:Ea,type:hu,colorSpace:t.outputColorSpace,stencilBuffer:v.stencil});else{let qe=null,Re=null,ft=null;v.depth&&(ft=v.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,qe=v.stencil?ab:Qm,Re=v.stencil?ob:Zm);const bt={colorFormat:e.RGBA8,depthFormat:ft,scaleFactor:s};h=new XRWebGLBinding(r,e),p=h.createProjectionLayer(bt),r.updateRenderState({layers:[p]}),t.setPixelRatio(1),t.setSize(p.textureWidth,p.textureHeight,!1),M=new Jh(p.textureWidth,p.textureHeight,{format:Ea,type:hu,depthTexture:new P4(p.textureWidth,p.textureHeight,Re,void 0,void 0,void 0,void 0,void 0,void 0,qe),stencilBuffer:v.stencil,colorSpace:t.outputColorSpace,samples:v.antialias?4:0}),t.properties.get(M).__ignoreDepthValues=p.ignoreDepthValues}M.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Qt.setContext(r),Qt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Oe){return se.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const Q=new L,ue=new L;function ve(se,Oe){null===Oe?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(Oe.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(null===r)return;null!==b.texture&&(se.near=b.depthNear,se.far=b.depthFar),E.near=B.near=P.near=se.near,E.far=B.far=P.far=se.far,(X!==E.near||re!==E.far)&&(r.updateRenderState({depthNear:E.near,depthFar:E.far}),X=E.near,re=E.far,P.near=X,P.far=re,B.near=X,B.far=re,P.updateProjectionMatrix(),B.updateProjectionMatrix(),se.updateProjectionMatrix());const Oe=se.parent,qe=E.cameras;ve(E,Oe);for(let Re=0;Re<qe.length;Re++)ve(qe[Re],Oe);2===qe.length?function K(se,Oe,qe){Q.setFromMatrixPosition(Oe.matrixWorld),ue.setFromMatrixPosition(qe.matrixWorld);const Re=Q.distanceTo(ue),ft=Oe.projectionMatrix.elements,bt=qe.projectionMatrix.elements,gt=ft[14]/(ft[10]-1),ee=ft[14]/(ft[10]+1),Ae=(ft[9]+1)/ft[5],Se=(ft[9]-1)/ft[5],Ve=(ft[8]-1)/ft[0],Le=(bt[8]+1)/bt[0],Ue=gt*Ve,N=gt*Le,D=Re/(-Ve+Le),ne=D*-Ve;Oe.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(ne),se.translateZ(D),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const ye=gt+D,Me=ee+D;se.projectionMatrix.makePerspective(Ue-ne,N+(Re-ne),Ae*ee/Me*ye,Se*ee/Me*ye,ye,Me),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}(E,P,B):E.projectionMatrix.copy(P.projectionMatrix),function Ce(se,Oe,qe){null===qe?se.matrix.copy(Oe.matrixWorld):(se.matrix.copy(qe.matrixWorld),se.matrix.invert(),se.matrix.multiply(Oe.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0),se.projectionMatrix.copy(Oe.projectionMatrix),se.projectionMatrixInverse.copy(Oe.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=2*rg*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}(se,E,Oe)},this.getCamera=function(){return E},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(se){l=se,null!==p&&(p.fixedFoveation=se),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=se)},this.hasDepthSensing=function(){return null!==b.texture};let $e=null;const Qt=new S4;Qt.setAnimationLoop(function vt(se,Oe){if(u=Oe.getViewerPose(c||o),g=Oe,null!==u){const qe=u.views;null!==m&&(t.setRenderTargetFramebuffer(M,m.framebuffer),t.setRenderTarget(M));let Re=!1;qe.length!==E.cameras.length&&(E.cameras.length=0,Re=!0);for(let bt=0;bt<qe.length;bt++){const gt=qe[bt];let ee=null;if(null!==m)ee=m.getViewport(gt);else{const Se=h.getViewSubImage(p,gt);ee=Se.viewport,0===bt&&(t.setRenderTargetTextures(M,Se.colorTexture,p.ignoreDepthValues?void 0:Se.depthStencilTexture),t.setRenderTarget(M))}let Ae=I[bt];void 0===Ae&&(Ae=new _r,Ae.layers.enable(bt),Ae.viewport=new ai,I[bt]=Ae),Ae.matrix.fromArray(gt.transform.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.projectionMatrix.fromArray(gt.projectionMatrix),Ae.projectionMatrixInverse.copy(Ae.projectionMatrix).invert(),Ae.viewport.set(ee.x,ee.y,ee.width,ee.height),0===bt&&(E.matrix.copy(Ae.matrix),E.matrix.decompose(E.position,E.quaternion,E.scale)),!0===Re&&E.cameras.push(Ae)}const ft=r.enabledFeatures;if(ft&&ft.includes("depth-sensing")){const bt=h.getDepthInformation(qe[0]);bt&&bt.isValid&&bt.texture&&b.init(t,bt,r.renderState)}}for(let qe=0;qe<x.length;qe++){const Re=C[qe],ft=x[qe];null!==Re&&void 0!==ft&&ft.update(Re,Oe,c||o)}b.render(t,E),$e&&$e(se,Oe),Oe.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Oe}),g=null}),this.setAnimationLoop=function(se){$e=se},this.dispose=function(){}}}const hf=new nd,eue=new It;function tue(i,t){function e(v,y){!0===v.matrixAutoUpdate&&v.updateMatrix(),y.value.copy(v.matrix)}function s(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,e(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,e(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,e(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,y.side===bo&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,e(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),y.side===bo&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,e(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,e(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,e(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const M=t.get(y),x=M.envMap,C=M.envMapRotation;if(x&&(v.envMap.value=x,hf.copy(C),hf.x*=-1,hf.y*=-1,hf.z*=-1,x.isCubeTexture&&!1===x.isRenderTargetTexture&&(hf.y*=-1,hf.z*=-1),v.envMapRotation.value.setFromMatrix4(eue.makeRotationFromEuler(hf)),v.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const O=!0===i._useLegacyLights?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*O,e(y.lightMap,v.lightMapTransform)}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,e(y.aoMap,v.aoMapTransform))}return{refreshFogUniforms:function n(v,y){y.color.getRGB(v.fogColor.value,w4(i)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)},refreshMaterialUniforms:function r(v,y,M,x,C){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(v,y):y.isMeshToonMaterial?(s(v,y),function h(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}(v,y)):y.isMeshPhongMaterial?(s(v,y),function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}(v,y)):y.isMeshStandardMaterial?(s(v,y),function p(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,e(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,e(y.roughnessMap,v.roughnessMapTransform)),y.envMap&&(v.envMapIntensity.value=y.envMapIntensity)}(v,y),y.isMeshPhysicalMaterial&&function m(v,y,M){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,e(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,e(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,e(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,e(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,e(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===bo&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,e(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,e(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=M.texture,v.transmissionSamplerSize.value.set(M.width,M.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,e(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,e(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,e(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,e(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,e(y.specularIntensityMap,v.specularIntensityMapTransform))}(v,y,C)):y.isMeshMatcapMaterial?(s(v,y),function g(v,y){y.matcap&&(v.matcap.value=y.matcap)}(v,y)):y.isMeshDepthMaterial?s(v,y):y.isMeshDistanceMaterial?(s(v,y),function b(v,y){const M=t.get(y).light;v.referencePosition.value.setFromMatrixPosition(M.matrixWorld),v.nearDistance.value=M.shadow.camera.near,v.farDistance.value=M.shadow.camera.far}(v,y)):y.isMeshNormalMaterial?s(v,y):y.isLineBasicMaterial?(function o(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,e(y.map,v.mapTransform))}(v,y),y.isLineDashedMaterial&&function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}(v,y)):y.isPointsMaterial?function l(v,y,M,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*M,v.scale.value=.5*x,y.map&&(v.map.value=y.map,e(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,e(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y,M,x):y.isSpriteMaterial?function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,e(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,e(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}}}function nue(i,t,e,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function m(M,x,C,O){const T=M.value,P=x+"_"+C;if(void 0===O[P])return O[P]="number"==typeof T||"boolean"==typeof T?T:T.clone(),!0;{const B=O[P];if("number"==typeof T||"boolean"==typeof T){if(B!==T)return O[P]=T,!0}else if(!1===B.equals(T))return B.copy(T),!0}return!1}function b(M){const x={boundary:0,storage:0};return"number"==typeof M||"boolean"==typeof M?(x.boundary=4,x.storage=4):M.isVector2?(x.boundary=8,x.storage=8):M.isVector3||M.isColor?(x.boundary=16,x.storage=12):M.isVector4?(x.boundary=16,x.storage=16):M.isMatrix3?(x.boundary=48,x.storage=48):M.isMatrix4?(x.boundary=64,x.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),x}function v(M){const x=M.target;x.removeEventListener("dispose",v);const C=o.indexOf(x.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}return{bind:function l(M,x){n.uniformBlockBinding(M,x.program)},update:function c(M,x){let C=r[M.id];void 0===C&&(function g(M){const x=M.uniforms;let C=0;for(let P=0,B=x.length;P<B;P++){const I=Array.isArray(x[P])?x[P]:[x[P]];for(let E=0,X=I.length;E<X;E++){const re=I[E],j=Array.isArray(re.value)?re.value:[re.value];for(let ie=0,ge=j.length;ie<ge;ie++){const ue=b(j[ie]),K=C%16;0!==K&&16-K<ue.boundary&&(C+=16-K),re.__data=new Float32Array(ue.storage/Float32Array.BYTES_PER_ELEMENT),re.__offset=C,C+=ue.storage}}}const T=C%16;T>0&&(C+=16-T),M.__size=C,M.__cache={}}(M),C=function u(M){const x=function h(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=x;const C=i.createBuffer(),O=M.__size,T=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,O,T),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,x,C),C}(M),r[M.id]=C,M.addEventListener("dispose",v)),n.updateUBOMapping(M,x.program);const T=t.render.frame;s[M.id]!==T&&(function p(M){const C=M.uniforms,O=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[M.id]);for(let T=0,P=C.length;T<P;T++){const B=Array.isArray(C[T])?C[T]:[C[T]];for(let I=0,E=B.length;I<E;I++){const X=B[I];if(!0===m(X,T,I,O)){const re=X.__offset,j=Array.isArray(X.value)?X.value:[X.value];let ie=0;for(let ge=0;ge<j.length;ge++){const Q=j[ge],ue=b(Q);"number"==typeof Q||"boolean"==typeof Q?(X.__data[0]=Q,i.bufferSubData(i.UNIFORM_BUFFER,re+ie,X.__data)):Q.isMatrix3?(X.__data[0]=Q.elements[0],X.__data[1]=Q.elements[1],X.__data[2]=Q.elements[2],X.__data[3]=0,X.__data[4]=Q.elements[3],X.__data[5]=Q.elements[4],X.__data[6]=Q.elements[5],X.__data[7]=0,X.__data[8]=Q.elements[6],X.__data[9]=Q.elements[7],X.__data[10]=Q.elements[8],X.__data[11]=0):(Q.toArray(X.__data,ie),ie+=ue.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,re,X.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(M),s[M.id]=T)},dispose:function y(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}}}class iue{constructor(t={}){const{canvas:e=Roe(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=t;let p;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let b=null,v=null;const y=[],M=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Wr,this._useLegacyLights=!1,this.toneMapping=uu,this.toneMappingExposure=1;const x=this;let C=!1,O=0,T=0,P=null,B=-1,I=null;const E=new ai,X=new ai;let re=null;const j=new Ge(0);let ie=0,ge=e.width,Q=e.height,ue=1,K=null,ve=null;const Ce=new ai(0,0,ge,Q),$e=new ai(0,0,ge,Q);let vt=!1;const Qt=new iS;let se=!1,Oe=!1;const qe=new It,Re=new we,ft=new L,bt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function gt(){return null===P?ue:1}let Se,Ve,Le,Ue,N,D,ne,ye,Me,Te,Ft,ke,xt,zt,We,lt,rn,ut,pt,Vn,Wn,si,ii,Ri,ee=n;function Ae(F,te){const ce=e.getContext(F,te);return null!==ce?ce:null}try{const F={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r163"),e.addEventListener("webglcontextlost",Xe,!1),e.addEventListener("webglcontextrestored",je,!1),e.addEventListener("webglcontextcreationerror",Rt,!1),null===ee){const te="webgl2";if(ee=Ae(te,F),null===ee)throw Ae(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(F){throw console.error("THREE.WebGLRenderer: "+F.message),F}function Dt(){Se=new fce(ee),Se.init(),Ve=new ace(ee,Se,t),si=new Yde(ee,Se),Le=new Wde(ee),Ue=new gce(ee),N=new Pde,D=new jde(ee,Se,Le,N,Ve,si,Ue),ne=new cce(x),ye=new hce(x),Me=new nae(ee),ii=new sce(ee,Me),Te=new pce(ee,Me,Ue,ii),Ft=new vce(ee,Te,Me,Ue),pt=new _ce(ee,Ve,D),lt=new lce(N),ke=new kde(x,ne,ye,Se,Ve,ii,lt),xt=new tue(x,N),zt=new Fde,We=new zde(Se),ut=new rce(x,ne,ye,Le,Ft,p,l),rn=new $de(x,Ft,Ve),Ri=new nue(ee,Ue,Ve,Le),Vn=new oce(ee,Se,Ue),Wn=new mce(ee,Se,Ue),Ue.programs=ke.programs,x.capabilities=Ve,x.extensions=Se,x.properties=N,x.renderLists=zt,x.shadowMap=rn,x.state=Le,x.info=Ue}Dt();const H=new Jde(x,ee);function Xe(F){F.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function je(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const F=Ue.autoReset,te=rn.enabled,ce=rn.autoUpdate,de=rn.needsUpdate,le=rn.type;Dt(),Ue.autoReset=F,rn.enabled=te,rn.autoUpdate=ce,rn.needsUpdate=de,rn.type=le}function Rt(F){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",F.statusMessage)}function Lt(F){const te=F.target;te.removeEventListener("dispose",Lt),function bi(F){(function ki(F){const te=N.get(F).programs;void 0!==te&&(te.forEach(function(ce){ke.releaseProgram(ce)}),F.isShaderMaterial&&ke.releaseShaderCache(F))})(F),N.remove(F)}(te)}function Vi(F,te,ce){!0===F.transparent&&F.side===Wo&&!1===F.forceSinglePass?(F.side=bo,F.needsUpdate=!0,pE(F,te,ce),F.side=Zl,F.needsUpdate=!0,pE(F,te,ce),F.side=Wo):pE(F,te,ce)}this.xr=H,this.getContext=function(){return ee},this.getContextAttributes=function(){return ee.getContextAttributes()},this.forceContextLoss=function(){const F=Se.get("WEBGL_lose_context");F&&F.loseContext()},this.forceContextRestore=function(){const F=Se.get("WEBGL_lose_context");F&&F.restoreContext()},this.getPixelRatio=function(){return ue},this.setPixelRatio=function(F){void 0!==F&&(ue=F,this.setSize(ge,Q,!1))},this.getSize=function(F){return F.set(ge,Q)},this.setSize=function(F,te,ce=!0){H.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ge=F,Q=te,e.width=Math.floor(F*ue),e.height=Math.floor(te*ue),!0===ce&&(e.style.width=F+"px",e.style.height=te+"px"),this.setViewport(0,0,F,te))},this.getDrawingBufferSize=function(F){return F.set(ge*ue,Q*ue).floor()},this.setDrawingBufferSize=function(F,te,ce){ge=F,Q=te,ue=ce,e.width=Math.floor(F*ce),e.height=Math.floor(te*ce),this.setViewport(0,0,F,te)},this.getCurrentViewport=function(F){return F.copy(E)},this.getViewport=function(F){return F.copy(Ce)},this.setViewport=function(F,te,ce,de){F.isVector4?Ce.set(F.x,F.y,F.z,F.w):Ce.set(F,te,ce,de),Le.viewport(E.copy(Ce).multiplyScalar(ue).round())},this.getScissor=function(F){return F.copy($e)},this.setScissor=function(F,te,ce,de){F.isVector4?$e.set(F.x,F.y,F.z,F.w):$e.set(F,te,ce,de),Le.scissor(X.copy($e).multiplyScalar(ue).round())},this.getScissorTest=function(){return vt},this.setScissorTest=function(F){Le.setScissorTest(vt=F)},this.setOpaqueSort=function(F){K=F},this.setTransparentSort=function(F){ve=F},this.getClearColor=function(F){return F.copy(ut.getClearColor())},this.setClearColor=function(){ut.setClearColor.apply(ut,arguments)},this.getClearAlpha=function(){return ut.getClearAlpha()},this.setClearAlpha=function(){ut.setClearAlpha.apply(ut,arguments)},this.clear=function(F=!0,te=!0,ce=!0){let de=0;if(F){let le=!1;if(null!==P){const tt=P.texture.format;le=tt===bH||tt===yH||tt===vH}if(le){const tt=P.texture.type,wt=tt===hu||tt===Zm||tt===fH||tt===ob||tt===mH||tt===gH,Gt=ut.getClearColor(),Jt=ut.getClearAlpha(),bn=Gt.r,mn=Gt.g,xn=Gt.b;wt?(m[0]=bn,m[1]=mn,m[2]=xn,m[3]=Jt,ee.clearBufferuiv(ee.COLOR,0,m)):(g[0]=bn,g[1]=mn,g[2]=xn,g[3]=Jt,ee.clearBufferiv(ee.COLOR,0,g))}else de|=ee.COLOR_BUFFER_BIT}te&&(de|=ee.DEPTH_BUFFER_BIT),ce&&(de|=ee.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ee.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Xe,!1),e.removeEventListener("webglcontextrestored",je,!1),e.removeEventListener("webglcontextcreationerror",Rt,!1),zt.dispose(),We.dispose(),N.dispose(),ne.dispose(),ye.dispose(),Ft.dispose(),ii.dispose(),Ri.dispose(),ke.dispose(),H.dispose(),H.removeEventListener("sessionstart",rc),H.removeEventListener("sessionend",sc),Pf.stop()},this.renderBufferDirect=function(F,te,ce,de,le,tt){null===te&&(te=bt);const wt=le.isMesh&&le.matrixWorld.determinant()<0,Gt=function $_e(F,te,ce,de,le){!0!==te.isScene&&(te=bt),D.resetTextureUnits();const tt=te.fog,Gt=null===P?x.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:us,Jt=(de.isMeshStandardMaterial?ye:ne).get(de.envMap||(de.isMeshStandardMaterial?te.environment:null)),bn=!0===de.vertexColors&&!!ce.attributes.color&&4===ce.attributes.color.itemSize,mn=!!ce.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),xn=!!ce.morphAttributes.position,ir=!!ce.morphAttributes.normal,Qo=!!ce.morphAttributes.color;let Kr=uu;de.toneMapped&&(null===P||!0===P.isXRRenderTarget)&&(Kr=x.toneMapping);const ud=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,zi=void 0!==ud?ud.length:0,Mn=N.get(de),JP=v.state.lights;!0!==se||!0!==Oe&&F===I||lt.setState(de,F,F===I&&de.id===B);let Pi=!1;de.version===Mn.__version?(Mn.needsLights&&Mn.lightsStateVersion!==JP.state.version||Mn.outputColorSpace!==Gt||le.isBatchedMesh&&!1===Mn.batching||!le.isBatchedMesh&&!0===Mn.batching||le.isInstancedMesh&&!1===Mn.instancing||!le.isInstancedMesh&&!0===Mn.instancing||le.isSkinnedMesh&&!1===Mn.skinning||!le.isSkinnedMesh&&!0===Mn.skinning||le.isInstancedMesh&&!0===Mn.instancingColor&&null===le.instanceColor||le.isInstancedMesh&&!1===Mn.instancingColor&&null!==le.instanceColor||le.isInstancedMesh&&!0===Mn.instancingMorph&&null===le.morphTexture||le.isInstancedMesh&&!1===Mn.instancingMorph&&null!==le.morphTexture||Mn.envMap!==Jt||!0===de.fog&&Mn.fog!==tt||void 0!==Mn.numClippingPlanes&&(Mn.numClippingPlanes!==lt.numPlanes||Mn.numIntersection!==lt.numIntersection)||Mn.vertexAlphas!==bn||Mn.vertexTangents!==mn||Mn.morphTargets!==xn||Mn.morphNormals!==ir||Mn.morphColors!==Qo||Mn.toneMapping!==Kr||Mn.morphTargetsCount!==zi)&&(Pi=!0):(Pi=!0,Mn.__version=de.version);let Of=Mn.currentProgram;!0===Pi&&(Of=pE(de,te,le));let U8=!1,Gb=!1,eO=!1;const Rs=Of.getUniforms(),Tu=Mn.uniforms;if(Le.useProgram(Of.program)&&(U8=!0,Gb=!0,eO=!0),de.id!==B&&(B=de.id,Gb=!0),U8||I!==F){Rs.setValue(ee,"projectionMatrix",F.projectionMatrix),Rs.setValue(ee,"viewMatrix",F.matrixWorldInverse);const Oa=Rs.map.cameraPosition;void 0!==Oa&&Oa.setValue(ee,ft.setFromMatrixPosition(F.matrixWorld)),Ve.logarithmicDepthBuffer&&Rs.setValue(ee,"logDepthBufFC",2/(Math.log(F.far+1)/Math.LN2)),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&Rs.setValue(ee,"isOrthographic",!0===F.isOrthographicCamera),I!==F&&(I=F,Gb=!0,eO=!0)}if(le.isSkinnedMesh){Rs.setOptional(ee,le,"bindMatrix"),Rs.setOptional(ee,le,"bindMatrixInverse");const Oa=le.skeleton;Oa&&(null===Oa.boneTexture&&Oa.computeBoneTexture(),Rs.setValue(ee,"boneTexture",Oa.boneTexture,D))}le.isBatchedMesh&&(Rs.setOptional(ee,le,"batchingTexture"),Rs.setValue(ee,"batchingTexture",le._matricesTexture,D));const tO=ce.morphAttributes;if((void 0!==tO.position||void 0!==tO.normal||void 0!==tO.color)&&pt.update(le,ce,Of),(Gb||Mn.receiveShadow!==le.receiveShadow)&&(Mn.receiveShadow=le.receiveShadow,Rs.setValue(ee,"receiveShadow",le.receiveShadow)),de.isMeshGouraudMaterial&&null!==de.envMap&&(Tu.envMap.value=Jt,Tu.flipEnvMap.value=Jt.isCubeTexture&&!1===Jt.isRenderTargetTexture?-1:1),de.isMeshStandardMaterial&&null===de.envMap&&null!==te.environment&&(Tu.envMapIntensity.value=te.environmentIntensity),Gb&&(Rs.setValue(ee,"toneMappingExposure",x.toneMappingExposure),Mn.needsLights&&function W_e(F,te){F.ambientLightColor.needsUpdate=te,F.lightProbe.needsUpdate=te,F.directionalLights.needsUpdate=te,F.directionalLightShadows.needsUpdate=te,F.pointLights.needsUpdate=te,F.pointLightShadows.needsUpdate=te,F.spotLights.needsUpdate=te,F.spotLightShadows.needsUpdate=te,F.rectAreaLights.needsUpdate=te,F.hemisphereLights.needsUpdate=te}(Tu,eO),tt&&!0===de.fog&&xt.refreshFogUniforms(Tu,tt),xt.refreshMaterialUniforms(Tu,de,ue,Q,v.state.transmissionRenderTarget),lS.upload(ee,N8(Mn),Tu,D)),de.isShaderMaterial&&!0===de.uniformsNeedUpdate&&(lS.upload(ee,N8(Mn),Tu,D),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&Rs.setValue(ee,"center",le.center),Rs.setValue(ee,"modelViewMatrix",le.modelViewMatrix),Rs.setValue(ee,"normalMatrix",le.normalMatrix),Rs.setValue(ee,"modelMatrix",le.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const Oa=de.uniformsGroups;for(let nO=0,Y_e=Oa.length;nO<Y_e;nO++){const V8=Oa[nO];Ri.update(V8,Of),Ri.bind(V8,Of)}}return Of}(F,te,ce,de,le);Le.setMaterial(de,wt);let Jt=ce.index,bn=1;if(!0===de.wireframe){if(Jt=Te.getWireframeAttribute(ce),void 0===Jt)return;bn=2}const mn=ce.drawRange,xn=ce.attributes.position;let ir=mn.start*bn,Qo=(mn.start+mn.count)*bn;null!==tt&&(ir=Math.max(ir,tt.start*bn),Qo=Math.min(Qo,(tt.start+tt.count)*bn)),null!==Jt?(ir=Math.max(ir,0),Qo=Math.min(Qo,Jt.count)):null!=xn&&(ir=Math.max(ir,0),Qo=Math.min(Qo,xn.count));const Kr=Qo-ir;if(Kr<0||Kr===1/0)return;ii.setup(le,de,Gt,ce,Jt);let ud,zi=Vn;if(null!==Jt&&(ud=Me.get(Jt),zi=Wn,zi.setIndex(ud)),le.isMesh)!0===de.wireframe?(Le.setLineWidth(de.wireframeLinewidth*gt()),zi.setMode(ee.LINES)):zi.setMode(ee.TRIANGLES);else if(le.isLine){let Mn=de.linewidth;void 0===Mn&&(Mn=1),Le.setLineWidth(Mn*gt()),zi.setMode(le.isLineSegments?ee.LINES:le.isLineLoop?ee.LINE_LOOP:ee.LINE_STRIP)}else le.isPoints?zi.setMode(ee.POINTS):le.isSprite&&zi.setMode(ee.TRIANGLES);if(le.isBatchedMesh)zi.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else if(le.isInstancedMesh)zi.renderInstances(ir,Kr,le.count);else if(ce.isInstancedBufferGeometry){const JP=Math.min(ce.instanceCount,void 0!==ce._maxInstanceCount?ce._maxInstanceCount:1/0);zi.renderInstances(ir,Kr,JP)}else zi.render(ir,Kr)},this.compile=function(F,te,ce=null){null===ce&&(ce=F),v=We.get(ce),v.init(),M.push(v),ce.traverseVisible(function(le){le.isLight&&le.layers.test(te.layers)&&(v.pushLight(le),le.castShadow&&v.pushShadow(le))}),F!==ce&&F.traverseVisible(function(le){le.isLight&&le.layers.test(te.layers)&&(v.pushLight(le),le.castShadow&&v.pushShadow(le))}),v.setupLights(x._useLegacyLights);const de=new Set;return F.traverse(function(le){const tt=le.material;if(tt)if(Array.isArray(tt))for(let wt=0;wt<tt.length;wt++){const Gt=tt[wt];Vi(Gt,ce,le),de.add(Gt)}else Vi(tt,ce,le),de.add(tt)}),M.pop(),v=null,de},this.compileAsync=function(F,te,ce=null){const de=this.compile(F,te,ce);return new Promise(le=>{function tt(){de.forEach(function(wt){N.get(wt).currentProgram.isReady()&&de.delete(wt)}),0!==de.size?setTimeout(tt,10):le(F)}null!==Se.get("KHR_parallel_shader_compile")?tt():setTimeout(tt,10)})};let Is=null;function rc(){Pf.stop()}function sc(){Pf.start()}const Pf=new S4;function O8(F,te,ce,de){if(!1===F.visible)return;if(F.layers.test(te.layers))if(F.isGroup)ce=F.renderOrder;else if(F.isLOD)!0===F.autoUpdate&&F.update(te);else if(F.isLight)v.pushLight(F),F.castShadow&&v.pushShadow(F);else if(F.isSprite){if(!F.frustumCulled||Qt.intersectsSprite(F)){de&&ft.setFromMatrixPosition(F.matrixWorld).applyMatrix4(qe);const wt=Ft.update(F),Gt=F.material;Gt.visible&&b.push(F,wt,Gt,ce,ft.z,null)}}else if((F.isMesh||F.isLine||F.isPoints)&&(!F.frustumCulled||Qt.intersectsObject(F))){const wt=Ft.update(F),Gt=F.material;if(de&&(void 0!==F.boundingSphere?(null===F.boundingSphere&&F.computeBoundingSphere(),ft.copy(F.boundingSphere.center)):(null===wt.boundingSphere&&wt.computeBoundingSphere(),ft.copy(wt.boundingSphere.center)),ft.applyMatrix4(F.matrixWorld).applyMatrix4(qe)),Array.isArray(Gt)){const Jt=wt.groups;for(let bn=0,mn=Jt.length;bn<mn;bn++){const xn=Jt[bn],ir=Gt[xn.materialIndex];ir&&ir.visible&&b.push(F,wt,ir,ce,ft.z,xn)}}else Gt.visible&&b.push(F,wt,Gt,ce,ft.z,null)}const tt=F.children;for(let wt=0,Gt=tt.length;wt<Gt;wt++)O8(tt[wt],te,ce,de)}function F8(F,te,ce,de){const le=F.opaque,tt=F.transmissive,wt=F.transparent;v.setupLightsView(ce),!0===se&&lt.setGlobalState(x.clippingPlanes,ce),tt.length>0&&function G_e(F,te,ce,de){if(null!==(!0===ce.isScene?ce.overrideMaterial:null))return;null===v.state.transmissionRenderTarget&&(v.state.transmissionRenderTarget=new Jh(1,1,{generateMipmaps:!0,type:Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float")?TC:hu,minFilter:ol,samples:4,stencilBuffer:s}),N.get(v.state.transmissionRenderTarget).__isTransmissionRenderTarget=!0);const tt=v.state.transmissionRenderTarget;x.getDrawingBufferSize(Re),tt.setSize(Re.x,Re.y);const wt=x.getRenderTarget();x.setRenderTarget(tt),x.getClearColor(j),ie=x.getClearAlpha(),ie<1&&x.setClearColor(16777215,.5),x.clear();const Gt=x.toneMapping;x.toneMapping=uu,fE(F,ce,de),D.updateMultisampleRenderTarget(tt),D.updateRenderTargetMipmap(tt);let Jt=!1;for(let bn=0,mn=te.length;bn<mn;bn++){const xn=te[bn],ir=xn.object,Qo=xn.geometry,Kr=xn.material,ud=xn.group;if(Kr.side===Wo&&ir.layers.test(de.layers)){const zi=Kr.side;Kr.side=bo,Kr.needsUpdate=!0,L8(ir,ce,de,Qo,Kr,ud),Kr.side=zi,Kr.needsUpdate=!0,Jt=!0}}!0===Jt&&(D.updateMultisampleRenderTarget(tt),D.updateRenderTargetMipmap(tt)),x.setRenderTarget(wt),x.setClearColor(j,ie),x.toneMapping=Gt}(le,tt,te,ce),de&&Le.viewport(E.copy(de)),le.length>0&&fE(le,te,ce),tt.length>0&&fE(tt,te,ce),wt.length>0&&fE(wt,te,ce),Le.buffers.depth.setTest(!0),Le.buffers.depth.setMask(!0),Le.buffers.color.setMask(!0),Le.setPolygonOffset(!1)}function fE(F,te,ce){const de=!0===te.isScene?te.overrideMaterial:null;for(let le=0,tt=F.length;le<tt;le++){const wt=F[le],Gt=wt.object,Jt=wt.geometry,bn=null===de?wt.material:de,mn=wt.group;Gt.layers.test(ce.layers)&&L8(Gt,te,ce,Jt,bn,mn)}}function L8(F,te,ce,de,le,tt){F.onBeforeRender(x,te,ce,de,le,tt),F.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,F.matrixWorld),F.normalMatrix.getNormalMatrix(F.modelViewMatrix),le.onBeforeRender(x,te,ce,de,F,tt),!0===le.transparent&&le.side===Wo&&!1===le.forceSinglePass?(le.side=bo,le.needsUpdate=!0,x.renderBufferDirect(ce,te,de,le,F,tt),le.side=Zl,le.needsUpdate=!0,x.renderBufferDirect(ce,te,de,le,F,tt),le.side=Wo):x.renderBufferDirect(ce,te,de,le,F,tt),F.onAfterRender(x,te,ce,de,le,tt)}function pE(F,te,ce){!0!==te.isScene&&(te=bt);const de=N.get(F),le=v.state.lights,wt=le.state.version,Gt=ke.getParameters(F,le.state,v.state.shadowsArray,te,ce),Jt=ke.getProgramCacheKey(Gt);let bn=de.programs;de.environment=F.isMeshStandardMaterial?te.environment:null,de.fog=te.fog,de.envMap=(F.isMeshStandardMaterial?ye:ne).get(F.envMap||de.environment),de.envMapRotation=null!==de.environment&&null===F.envMap?te.environmentRotation:F.envMapRotation,void 0===bn&&(F.addEventListener("dispose",Lt),bn=new Map,de.programs=bn);let mn=bn.get(Jt);if(void 0!==mn){if(de.currentProgram===mn&&de.lightsStateVersion===wt)return B8(F,Gt),mn}else Gt.uniforms=ke.getUniforms(F),F.onBuild(ce,Gt,x),F.onBeforeCompile(Gt,x),mn=ke.acquireProgram(Gt,Jt),bn.set(Jt,mn),de.uniforms=Gt.uniforms;const xn=de.uniforms;return(!F.isShaderMaterial&&!F.isRawShaderMaterial||!0===F.clipping)&&(xn.clippingPlanes=lt.uniform),B8(F,Gt),de.needsLights=function j_e(F){return F.isMeshLambertMaterial||F.isMeshToonMaterial||F.isMeshPhongMaterial||F.isMeshStandardMaterial||F.isShadowMaterial||F.isShaderMaterial&&!0===F.lights}(F),de.lightsStateVersion=wt,de.needsLights&&(xn.ambientLightColor.value=le.state.ambient,xn.lightProbe.value=le.state.probe,xn.directionalLights.value=le.state.directional,xn.directionalLightShadows.value=le.state.directionalShadow,xn.spotLights.value=le.state.spot,xn.spotLightShadows.value=le.state.spotShadow,xn.rectAreaLights.value=le.state.rectArea,xn.ltc_1.value=le.state.rectAreaLTC1,xn.ltc_2.value=le.state.rectAreaLTC2,xn.pointLights.value=le.state.point,xn.pointLightShadows.value=le.state.pointShadow,xn.hemisphereLights.value=le.state.hemi,xn.directionalShadowMap.value=le.state.directionalShadowMap,xn.directionalShadowMatrix.value=le.state.directionalShadowMatrix,xn.spotShadowMap.value=le.state.spotShadowMap,xn.spotLightMatrix.value=le.state.spotLightMatrix,xn.spotLightMap.value=le.state.spotLightMap,xn.pointShadowMap.value=le.state.pointShadowMap,xn.pointShadowMatrix.value=le.state.pointShadowMatrix),de.currentProgram=mn,de.uniformsList=null,mn}function N8(F){if(null===F.uniformsList){const te=F.currentProgram.getUniforms();F.uniformsList=lS.seqWithValue(te.seq,F.uniforms)}return F.uniformsList}function B8(F,te){const ce=N.get(F);ce.outputColorSpace=te.outputColorSpace,ce.batching=te.batching,ce.instancing=te.instancing,ce.instancingColor=te.instancingColor,ce.instancingMorph=te.instancingMorph,ce.skinning=te.skinning,ce.morphTargets=te.morphTargets,ce.morphNormals=te.morphNormals,ce.morphColors=te.morphColors,ce.morphTargetsCount=te.morphTargetsCount,ce.numClippingPlanes=te.numClippingPlanes,ce.numIntersection=te.numClipIntersection,ce.vertexAlphas=te.vertexAlphas,ce.vertexTangents=te.vertexTangents,ce.toneMapping=te.toneMapping}Pf.setAnimationLoop(function Si(F){Is&&Is(F)}),typeof self<"u"&&Pf.setContext(self),this.setAnimationLoop=function(F){Is=F,H.setAnimationLoop(F),null===F?Pf.stop():Pf.start()},H.addEventListener("sessionstart",rc),H.addEventListener("sessionend",sc),this.render=function(F,te){if(void 0===te||!0===te.isCamera){if(!0!==C){if(!0===F.matrixWorldAutoUpdate&&F.updateMatrixWorld(),null===te.parent&&!0===te.matrixWorldAutoUpdate&&te.updateMatrixWorld(),!0===H.enabled&&!0===H.isPresenting&&(!0===H.cameraAutoUpdate&&H.updateCamera(te),te=H.getCamera()),!0===F.isScene&&F.onBeforeRender(x,F,te,P),v=We.get(F,M.length),v.init(),M.push(v),qe.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),Qt.setFromProjectionMatrix(qe),Oe=this.localClippingEnabled,se=lt.init(this.clippingPlanes,Oe),b=zt.get(F,y.length),b.init(),y.push(b),O8(F,te,0,x.sortObjects),b.finish(),!0===x.sortObjects&&b.sort(K,ve),this.info.render.frame++,!0===se&&lt.beginShadows(),rn.render(v.state.shadowsArray,F,te),!0===se&&lt.endShadows(),!0===this.info.autoReset&&this.info.reset(),(!1===H.enabled||!1===H.isPresenting||!1===H.hasDepthSensing())&&ut.render(b,F),v.setupLights(x._useLegacyLights),te.isArrayCamera){const de=te.cameras;for(let le=0,tt=de.length;le<tt;le++){const wt=de[le];F8(b,F,wt,wt.viewport)}}else F8(b,F,te);null!==P&&(D.updateMultisampleRenderTarget(P),D.updateRenderTargetMipmap(P)),!0===F.isScene&&F.onAfterRender(x,F,te),ii.resetDefaultState(),B=-1,I=null,M.pop(),v=M.length>0?M[M.length-1]:null,y.pop(),b=y.length>0?y[y.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(F,te,ce){N.get(F.texture).__webglTexture=te,N.get(F.depthTexture).__webglTexture=ce;const de=N.get(F);de.__hasExternalTextures=!0,de.__autoAllocateDepthBuffer=void 0===ce,de.__autoAllocateDepthBuffer||!0===Se.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(F,te){const ce=N.get(F);ce.__webglFramebuffer=te,ce.__useDefaultFramebuffer=void 0===te},this.setRenderTarget=function(F,te=0,ce=0){P=F,O=te,T=ce;let de=!0,le=null,tt=!1,wt=!1;if(F){const Jt=N.get(F);void 0!==Jt.__useDefaultFramebuffer?(Le.bindFramebuffer(ee.FRAMEBUFFER,null),de=!1):void 0===Jt.__webglFramebuffer?D.setupRenderTarget(F):Jt.__hasExternalTextures&&D.rebindTextures(F,N.get(F.texture).__webglTexture,N.get(F.depthTexture).__webglTexture);const bn=F.texture;(bn.isData3DTexture||bn.isDataArrayTexture||bn.isCompressedArrayTexture)&&(wt=!0);const mn=N.get(F).__webglFramebuffer;F.isWebGLCubeRenderTarget?(le=Array.isArray(mn[te])?mn[te][ce]:mn[te],tt=!0):le=F.samples>0&&!1===D.useMultisampledRTT(F)?N.get(F).__webglMultisampledFramebuffer:Array.isArray(mn)?mn[ce]:mn,E.copy(F.viewport),X.copy(F.scissor),re=F.scissorTest}else E.copy(Ce).multiplyScalar(ue).floor(),X.copy($e).multiplyScalar(ue).floor(),re=vt;if(Le.bindFramebuffer(ee.FRAMEBUFFER,le)&&de&&Le.drawBuffers(F,le),Le.viewport(E),Le.scissor(X),Le.setScissorTest(re),tt){const Jt=N.get(F.texture);ee.framebufferTexture2D(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,ee.TEXTURE_CUBE_MAP_POSITIVE_X+te,Jt.__webglTexture,ce)}else if(wt){const Jt=N.get(F.texture);ee.framebufferTextureLayer(ee.FRAMEBUFFER,ee.COLOR_ATTACHMENT0,Jt.__webglTexture,ce||0,te||0)}B=-1},this.readRenderTargetPixels=function(F,te,ce,de,le,tt,wt){if(!F||!F.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Gt=N.get(F).__webglFramebuffer;if(F.isWebGLCubeRenderTarget&&void 0!==wt&&(Gt=Gt[wt]),Gt){Le.bindFramebuffer(ee.FRAMEBUFFER,Gt);try{const Jt=F.texture,bn=Jt.format,mn=Jt.type;if(bn!==Ea&&si.convert(bn)!==ee.getParameter(ee.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const xn=mn===TC&&(Se.has("EXT_color_buffer_half_float")||Se.has("EXT_color_buffer_float"));if(mn!==hu&&si.convert(mn)!==ee.getParameter(ee.IMPLEMENTATION_COLOR_READ_TYPE)&&mn!==al&&!xn)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");te>=0&&te<=F.width-de&&ce>=0&&ce<=F.height-le&&ee.readPixels(te,ce,de,le,si.convert(bn),si.convert(mn),tt)}finally{const Jt=null!==P?N.get(P).__webglFramebuffer:null;Le.bindFramebuffer(ee.FRAMEBUFFER,Jt)}}},this.copyFramebufferToTexture=function(F,te,ce=0){const de=Math.pow(2,-ce),le=Math.floor(te.image.width*de),tt=Math.floor(te.image.height*de);D.setTexture2D(te,0),ee.copyTexSubImage2D(ee.TEXTURE_2D,ce,0,0,F.x,F.y,le,tt),Le.unbindTexture()},this.copyTextureToTexture=function(F,te,ce,de=0){const le=te.image.width,tt=te.image.height,wt=si.convert(ce.format),Gt=si.convert(ce.type);D.setTexture2D(ce,0),ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,ce.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,ce.unpackAlignment),te.isDataTexture?ee.texSubImage2D(ee.TEXTURE_2D,de,F.x,F.y,le,tt,wt,Gt,te.image.data):te.isCompressedTexture?ee.compressedTexSubImage2D(ee.TEXTURE_2D,de,F.x,F.y,te.mipmaps[0].width,te.mipmaps[0].height,wt,te.mipmaps[0].data):ee.texSubImage2D(ee.TEXTURE_2D,de,F.x,F.y,wt,Gt,te.image),0===de&&ce.generateMipmaps&&ee.generateMipmap(ee.TEXTURE_2D),Le.unbindTexture()},this.copyTextureToTexture3D=function(F,te,ce,de,le=0){const tt=Math.round(F.max.x-F.min.x),wt=Math.round(F.max.y-F.min.y),Gt=F.max.z-F.min.z+1,Jt=si.convert(de.format),bn=si.convert(de.type);let mn;if(de.isData3DTexture)D.setTexture3D(de,0),mn=ee.TEXTURE_3D;else{if(!de.isDataArrayTexture&&!de.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");D.setTexture2DArray(de,0),mn=ee.TEXTURE_2D_ARRAY}ee.pixelStorei(ee.UNPACK_FLIP_Y_WEBGL,de.flipY),ee.pixelStorei(ee.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),ee.pixelStorei(ee.UNPACK_ALIGNMENT,de.unpackAlignment);const xn=ee.getParameter(ee.UNPACK_ROW_LENGTH),ir=ee.getParameter(ee.UNPACK_IMAGE_HEIGHT),Qo=ee.getParameter(ee.UNPACK_SKIP_PIXELS),Kr=ee.getParameter(ee.UNPACK_SKIP_ROWS),ud=ee.getParameter(ee.UNPACK_SKIP_IMAGES),zi=ce.isCompressedTexture?ce.mipmaps[le]:ce.image;ee.pixelStorei(ee.UNPACK_ROW_LENGTH,zi.width),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,zi.height),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,F.min.x),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,F.min.y),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,F.min.z),ce.isDataTexture||ce.isData3DTexture?ee.texSubImage3D(mn,le,te.x,te.y,te.z,tt,wt,Gt,Jt,bn,zi.data):de.isCompressedArrayTexture?ee.compressedTexSubImage3D(mn,le,te.x,te.y,te.z,tt,wt,Gt,Jt,zi.data):ee.texSubImage3D(mn,le,te.x,te.y,te.z,tt,wt,Gt,Jt,bn,zi),ee.pixelStorei(ee.UNPACK_ROW_LENGTH,xn),ee.pixelStorei(ee.UNPACK_IMAGE_HEIGHT,ir),ee.pixelStorei(ee.UNPACK_SKIP_PIXELS,Qo),ee.pixelStorei(ee.UNPACK_SKIP_ROWS,Kr),ee.pixelStorei(ee.UNPACK_SKIP_IMAGES,ud),0===le&&de.generateMipmaps&&ee.generateMipmap(mn),Le.unbindTexture()},this.initTexture=function(F){F.isCubeTexture?D.setTextureCube(F,0):F.isData3DTexture?D.setTexture3D(F,0):F.isDataArrayTexture||F.isCompressedArrayTexture?D.setTexture2DArray(F,0):D.setTexture2D(F,0),Le.unbindTexture()},this.resetState=function(){O=0,T=0,P=null,Le.reset(),ii.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Jc}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===ek?"display-p3":"srgb",e.unpackColorSpace=ni.workingColorSpace===RC?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(t){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=t}}class cS extends jr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new nd,this.environmentIntensity=1,this.environmentRotation=new nd,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class Ok{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=jo()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return t4("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jo()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=jo()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const so=new L;class ff{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)so.fromBufferAttribute(this,e),so.applyMatrix4(t),this.setXYZ(e,so.x,so.y,so.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)so.fromBufferAttribute(this,e),so.applyNormalMatrix(t),this.setXYZ(e,so.x,so.y,so.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)so.fromBufferAttribute(this,e),so.transformDirection(t),this.setXYZ(e,so.x,so.y,so.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=no(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=fn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=fn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=fn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=fn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=fn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=no(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=no(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=no(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=no(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=fn(e,this.array),n=fn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=fn(e,this.array),n=fn(n,this.array),r=fn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=fn(e,this.array),n=fn(n,this.array),r=fn(r,this.array),s=fn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new di(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new ff(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const l5=new L,c5=new ai,d5=new ai,oue=new L,u5=new It,pS=new L,Lk=new As,h5=new It,Nk=new fb;class f5 extends Un{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=hH,this.bindMatrix=new It,this.bindMatrixInverse=new It,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Es),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,pS),this.boundingBox.expandByPoint(pS)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new As),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,pS),this.boundingSphere.expandByPoint(pS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Lk.copy(this.boundingSphere),Lk.applyMatrix4(r),!1!==t.ray.intersectsSphere(Lk)&&(h5.copy(r).invert(),Nk.copy(t.ray).applyMatrix4(h5),(null===this.boundingBox||!1!==Nk.intersectsBox(this.boundingBox))&&this._computeIntersections(t,e,Nk)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new ai,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===hH?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;c5.fromBufferAttribute(r.attributes.skinIndex,t),d5.fromBufferAttribute(r.attributes.skinWeight,t),l5.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=d5.getComponent(s);if(0!==o){const a=c5.getComponent(s);u5.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(oue.copy(l5).applyMatrix4(u5),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class Bk extends jr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class pf extends xo{constructor(t=null,e=1,n=1,r,s,o,a,l,c=mr,u=mr,h,p){super(null,o,a,l,c,u,r,s,h,p),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const p5=new It,aue=new It;class mS{constructor(t=[],e=[]){this.uuid=jo(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new It)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new It;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)p5.multiplyMatrices(t[s]?t[s].matrixWorld:aue,e[s]),p5.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new mS(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new pf(e,t,t,Ea,al);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const s=t.bones[n];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Bk),this.bones.push(o),this.boneInverses.push((new It).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}}class Rg extends di{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const kg=new It,m5=new It,gS=[],g5=new Es,lue=new It,xb=new Un,wb=new As;class _5 extends Un{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Rg(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,lue)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Es),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,kg),g5.copy(t.boundingBox).applyMatrix4(kg),this.boundingBox.union(g5)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new As),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,kg),wb.copy(t.boundingSphere).applyMatrix4(kg),this.boundingSphere.union(wb)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=t*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(xb.geometry=this.geometry,xb.material=this.material,void 0!==xb.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),wb.copy(this.boundingSphere),wb.applyMatrix4(n),!1!==t.ray.intersectsSphere(wb)))for(let s=0;s<r;s++){this.getMatrixAt(s,kg),m5.multiplyMatrices(n,kg),xb.matrixWorld=m5,xb.raycast(t,gS);for(let o=0,a=gS.length;o<a;o++){const l=gS[o];l.instanceId=s,l.object=this,e.push(l)}gS.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Rg(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new pf(new Float32Array(r*this.count),r,this.count,_H,al));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const l=r*t;s[l]=this.geometry.morphTargetsRelative?1:1-o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class Xr extends wo{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ge(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const b5=new L,x5=new L,w5=new It,zk=new fb,yS=new As;class gf extends jr{constructor(t=new pn,e=new Xr){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)b5.fromBufferAttribute(e,r-1),x5.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=b5.distanceTo(x5);t.setAttribute("lineDistance",new ot(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),yS.copy(n.boundingSphere),yS.applyMatrix4(r),yS.radius+=s,!1===t.ray.intersectsSphere(yS))return;w5.copy(r).invert(),zk.copy(t.ray).applyMatrix4(w5);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new L,u=new L,h=new L,p=new L,m=this.isLineSegments?2:1,g=n.index,v=n.attributes.position;if(null!==g)for(let x=Math.max(0,o.start),C=Math.min(g.count,o.start+o.count)-1;x<C;x+=m){const O=g.getX(x),T=g.getX(x+1);if(c.fromBufferAttribute(v,O),u.fromBufferAttribute(v,T),zk.distanceSqToSegment(c,u,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const B=t.ray.origin.distanceTo(p);B<t.near||B>t.far||e.push({distance:B,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}else for(let x=Math.max(0,o.start),C=Math.min(v.count,o.start+o.count)-1;x<C;x+=m){if(c.fromBufferAttribute(v,x),u.fromBufferAttribute(v,x+1),zk.distanceSqToSegment(c,u,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const T=t.ray.origin.distanceTo(p);T<t.near||T>t.far||e.push({distance:T,point:h.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const M5=new L,C5=new L;class Og extends gf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let r=0,s=e.count;r<s;r+=2)M5.fromBufferAttribute(e,r),C5.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+M5.distanceTo(C5);t.setAttribute("lineDistance",new ot(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class S5 extends gf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class _f extends wo{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const E5=new It,Hk=new fb,bS=new As,xS=new L;class Cb extends jr{constructor(t=new pn,e=new _f){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),bS.copy(n.boundingSphere),bS.applyMatrix4(r),bS.radius+=s,!1===t.ray.intersectsSphere(bS))return;E5.copy(r).invert(),Hk.copy(t.ray).applyMatrix4(E5);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,h=n.attributes.position;if(null!==c)for(let g=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);g<b;g++){const v=c.getX(g);xS.fromBufferAttribute(h,v),A5(xS,v,l,r,t,e,this)}else for(let g=Math.max(0,o.start),b=Math.min(h.count,o.start+o.count);g<b;g++)xS.fromBufferAttribute(h,g),A5(xS,g,l,r,t,e,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function A5(i,t,e,n,r,s,o){const a=Hk.distanceSqToPoint(i);if(a<e){const l=new L;Hk.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}class ec{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const u=n[r];return(r+(o-u)/(n[r+1]-u))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new we:new L);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new L,r=[],s=[],o=[],a=new L,l=new It;for(let m=0;m<=t;m++)r[m]=this.getTangentAt(m/t,new L);s[0]=new L,o[0]=new L;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);u<=c&&(c=u,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),p<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=t;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(ji(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(!0===e){let m=Math.acos(ji(s[0].dot(s[t]),-1,1));m/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(m=-m);for(let g=1;g<=t;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class Gk extends ec{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e=new we){const n=e,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*u-m*h+this.aX,c=p*h+m*u+this.aY}return n.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function $k(){let i=0,t=0,e=0,n=0;function r(s,o,a,l){i=s,t=a,e=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,h){let p=(o-s)/c-(a-s)/(c+u)+(a-o)/u,m=(a-o)/u-(l-o)/(u+h)+(l-a)/h;p*=u,m*=u,r(o,a,p,m)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const wS=new L,Wk=new $k,jk=new $k,Yk=new $k;function D5(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),a=i*i;return(2*e-2*n+s+o)*(i*a)+(-3*e+3*n-2*s-o)*a+s*i+e}function Sb(i,t,e,n){return function vue(i,t){const e=1-i;return e*e*t}(i,t)+function yue(i,t){return 2*(1-i)*i*t}(i,e)+function bue(i,t){return i*i*t}(i,n)}function Eb(i,t,e,n,r){return function xue(i,t){const e=1-i;return e*e*e*t}(i,t)+function wue(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function Mue(i,t){return 3*(1-i)*i*i*t}(i,n)+function Cue(i,t){return i*i*i*t}(i,r)}class T5 extends ec{constructor(t=new we,e=new we,n=new we,r=new we){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new we){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Eb(t,r.x,s.x,o.x,a.x),Eb(t,r.y,s.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class I5 extends ec{constructor(t=new we,e=new we){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new we){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new we){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class R5 extends ec{constructor(t=new we,e=new we,n=new we){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new we){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Sb(t,r.x,s.x,o.x),Sb(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class P5 extends ec{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new we){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(D5(a,l.x,c.x,u.x,h.x),D5(a,l.y,c.y,u.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new we).fromArray(r))}return this}}var MS=Object.freeze({__proto__:null,ArcCurve:class gue extends Gk{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class _ue extends ec{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new L){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,u,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(wS.subVectors(r[0],r[1]).add(r[0]),c=wS);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(wS.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=wS),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),b=Math.pow(h.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(u),m);b<1e-4&&(b=1),g<1e-4&&(g=b),v<1e-4&&(v=b),Wk.initNonuniformCatmullRom(c.x,h.x,p.x,u.x,g,b,v),jk.initNonuniformCatmullRom(c.y,h.y,p.y,u.y,g,b,v),Yk.initNonuniformCatmullRom(c.z,h.z,p.z,u.z,g,b,v)}else"catmullrom"===this.curveType&&(Wk.initCatmullRom(c.x,h.x,p.x,u.x,this.tension),jk.initCatmullRom(c.y,h.y,p.y,u.y,this.tension),Yk.initCatmullRom(c.z,h.z,p.z,u.z,this.tension));return n.set(Wk.calc(l),jk.calc(l),Yk.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new L).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:T5,CubicBezierCurve3:class Sue extends ec{constructor(t=new L,e=new L,n=new L,r=new L){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new L){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Eb(t,r.x,s.x,o.x,a.x),Eb(t,r.y,s.y,o.y,a.y),Eb(t,r.z,s.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:Gk,LineCurve:I5,LineCurve3:class Eue extends ec{constructor(t=new L,e=new L){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new L){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new L){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:R5,QuadraticBezierCurve3:class k5 extends ec{constructor(t=new L,e=new L,n=new L){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new L){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(Sb(t,r.x,s.x,o.x),Sb(t,r.y,s.y,o.y),Sb(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:P5});class Aue extends ec{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new MS[!0===t.isVector2?"LineCurve":"LineCurve3"](e,t)),this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const u=l[c];n&&n.equals(u)||(e.push(u),n=u)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new MS[r.type]).fromJSON(r))}return this}}class CS extends Aue{constructor(t){super(),this.type="Path",this.currentPoint=new we,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new I5(this.currentPoint.clone(),new we(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new R5(this.currentPoint.clone(),new we(t,e),new we(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const a=new T5(this.currentPoint.clone(),new we(t,e),new we(n,r),new we(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new P5(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(t,e,n,r,s,o,a,l){const c=new Gk(t,e,n,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class SS extends pn{constructor(t=[new we(0,-.5),new we(.5,0),new we(0,.5)],e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=ji(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],u=1/e,h=new L,p=new we,m=new L,g=new L,b=new L;let v=0,y=0;for(let M=0;M<=t.length-1;M++)switch(M){case 0:v=t[M+1].x-t[M].x,y=t[M+1].y-t[M].y,m.x=1*y,m.y=-v,m.z=0*y,b.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case t.length-1:l.push(b.x,b.y,b.z);break;default:v=t[M+1].x-t[M].x,y=t[M+1].y-t[M].y,m.x=1*y,m.y=-v,m.z=0*y,g.copy(m),m.x+=b.x,m.y+=b.y,m.z+=b.z,m.normalize(),l.push(m.x,m.y,m.z),b.copy(g)}for(let M=0;M<=e;M++){const x=n+M*u*r,C=Math.sin(x),O=Math.cos(x);for(let T=0;T<=t.length-1;T++)h.x=t[T].x*C,h.y=t[T].y,h.z=t[T].x*O,o.push(h.x,h.y,h.z),p.x=M/e,p.y=T/(t.length-1),a.push(p.x,p.y),c.push(l[3*T+0]*C,l[3*T+1],l[3*T+0]*O)}for(let M=0;M<e;M++)for(let x=0;x<t.length-1;x++){const C=x+M*t.length,T=C+t.length,P=C+t.length+1,B=C+1;s.push(C,T,B),s.push(P,B,T)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(c,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new SS(t.points,t.segments,t.phiStart,t.phiLength)}}class ES extends SS{constructor(t=1,e=1,n=4,r=8){const s=new CS;s.absarc(0,-e/2,t,1.5*Math.PI,0),s.absarc(0,e/2,t,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new ES(t.radius,t.length,t.capSegments,t.radialSegments)}}class Fg extends pn{constructor(t=1,e=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],h=[],p=[],m=[];let g=0;const b=[],v=n/2;let y=0;function x(C){const O=g,T=new we,P=new L;let B=0;const I=!0===C?t:e,E=!0===C?1:-1;for(let re=1;re<=r;re++)h.push(0,v*E,0),p.push(0,E,0),m.push(.5,.5),g++;const X=g;for(let re=0;re<=r;re++){const ie=re/r*l+a,ge=Math.cos(ie),Q=Math.sin(ie);P.x=I*Q,P.y=v*E,P.z=I*ge,h.push(P.x,P.y,P.z),p.push(0,E,0),T.x=.5*ge+.5,T.y=.5*Q*E+.5,m.push(T.x,T.y),g++}for(let re=0;re<r;re++){const j=O+re,ie=X+re;!0===C?u.push(ie,ie+1,j):u.push(ie+1,ie,j),B+=3}c.addGroup(y,B,!0===C?1:2),y+=B}(function M(){const C=new L,O=new L;let T=0;const P=(e-t)/n;for(let B=0;B<=s;B++){const I=[],E=B/s,X=E*(e-t)+t;for(let re=0;re<=r;re++){const j=re/r,ie=j*l+a,ge=Math.sin(ie),Q=Math.cos(ie);O.x=X*ge,O.y=-E*n+v,O.z=X*Q,h.push(O.x,O.y,O.z),C.set(ge,P,Q).normalize(),p.push(C.x,C.y,C.z),m.push(j,1-E),I.push(g++)}b.push(I)}for(let B=0;B<r;B++)for(let I=0;I<s;I++){const X=b[I+1][B],re=b[I+1][B+1],j=b[I][B+1];u.push(b[I][B],X,j),u.push(X,re,j),T+=6}c.addGroup(y,T,0),y+=T})(),!1===o&&(t>0&&x(!0),e>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new ot(h,3)),this.setAttribute("normal",new ot(p,3)),this.setAttribute("uv",new ot(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Fg(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class AS extends Fg{constructor(t=1,e=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(t){return new AS(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ib extends pn{constructor(t=1,e=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const u=[],h=new L,p=new L,m=[],g=[],b=[],v=[];for(let y=0;y<=n;y++){const M=[],x=y/n;let C=0;0===y&&0===o?C=.5/e:y===n&&l===Math.PI&&(C=-.5/e);for(let O=0;O<=e;O++){const T=O/e;h.x=-t*Math.cos(r+T*s)*Math.sin(o+x*a),h.y=t*Math.cos(o+x*a),h.z=t*Math.sin(r+T*s)*Math.sin(o+x*a),g.push(h.x,h.y,h.z),p.copy(h).normalize(),b.push(p.x,p.y,p.z),v.push(T+C,1-x),M.push(c++)}u.push(M)}for(let y=0;y<n;y++)for(let M=0;M<e;M++){const C=u[y][M],O=u[y+1][M],T=u[y+1][M+1];(0!==y||o>0)&&m.push(u[y][M+1],C,T),(y!==n-1||l<Math.PI)&&m.push(C,O,T)}this.setIndex(m),this.setAttribute("position",new ot(g,3)),this.setAttribute("normal",new ot(b,3)),this.setAttribute("uv",new ot(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Ib(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Rb extends wo{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zh,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nd,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class tc extends Rb{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new we(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ji(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ge(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ge(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class FS extends wo{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ge(16777215),this.specular=new Ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Zh,this.normalScale=new we(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new nd,this.combine=EC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function bf(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function G5(i){const e=i.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function t(r,s){return i[r]-i[s]}),n}function aP(i,t,e){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=i[a+l]}return r}function lP(i,t,e,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(t.push(s.time),e.push(o)),s=i[r++]}while(void 0!==s)}class kb{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;t<e[a]?o=a:n=a+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class she extends kb{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=t,a=2*e-n;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=t,l=2*n-e;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(n-e),u=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-n),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(n-e)/(r-e),b=g*g,v=b*g,y=-p*v+2*p*b-p*g,M=(1+p)*v+(-1.5-2*p)*b+(-.5+p)*g+1,x=(-1-m)*v+(1.5+m)*b+.5*g,C=m*v-m*b;for(let O=0;O!==a;++O)s[O]=y*o[u+O]+M*o[c+O]+x*o[l+O]+C*o[h+O];return s}}class $5 extends kb{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,u=(n-e)/(r-e),h=1-u;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*u;return s}}class ohe extends kb{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class nc{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=bf(e,this.TimeBufferType),this.values=bf(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:bf(t.times,Array),values:bf(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new ohe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new $5(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new she(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case lb:e=this.InterpolantFactoryMethodDiscrete;break;case Jm:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lb;case this.InterpolantFactoryMethodLinear:return Jm;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&function H5(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const h=a*n,p=h-n,m=h+n;for(let g=0;g!==n;++g){const b=e[h+g];if(b!==e[p+g]||b!==e[m+g]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const h=a*n,p=o*n;for(let m=0;m!==n;++m)e[p+m]=e[h+m]}++o}}if(s>0){t[o]=t[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}nc.prototype.TimeBufferType=Float32Array,nc.prototype.ValueBufferType=Float32Array,nc.prototype.DefaultInterpolation=Jm;class Bg extends nc{}Bg.prototype.ValueTypeName="bool",Bg.prototype.ValueBufferType=Array,Bg.prototype.DefaultInterpolation=lb,Bg.prototype.InterpolantFactoryMethodLinear=void 0,Bg.prototype.InterpolantFactoryMethodSmooth=void 0;class W5 extends nc{}W5.prototype.ValueTypeName="color";class Ug extends nc{}Ug.prototype.ValueTypeName="number";class ahe extends kb{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let c=t*a;for(let u=c+a;c!==u;c+=4)io.slerpFlat(s,0,o,c-a,o,c,l);return s}}class xf extends nc{InterpolantFactoryMethodLinear(t){return new ahe(this.times,this.values,this.getValueSize(),t)}}xf.prototype.ValueTypeName="quaternion",xf.prototype.DefaultInterpolation=Jm,xf.prototype.InterpolantFactoryMethodSmooth=void 0;class Vg extends nc{}Vg.prototype.ValueTypeName="string",Vg.prototype.ValueBufferType=Array,Vg.prototype.DefaultInterpolation=lb,Vg.prototype.InterpolantFactoryMethodLinear=void 0,Vg.prototype.InterpolantFactoryMethodSmooth=void 0;class zg extends nc{}zg.prototype.ValueTypeName="vector";class Pb{constructor(t="",e=-1,n=[],r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=jo(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(che(n[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=n.length;s!==o;++s)e.push(nc.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=G5(l);l=aP(l,1,u),c=aP(c,1,u),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new Ug(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],u=c.name.match(s);if(u&&u.length>1){const h=u[1];let p=r[h];p||(r[h]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,p,m,g,b){if(0!==m.length){const v=[],y=[];lP(m,v,y,g),0!==v.length&&b.push(new h(p,v,y))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(p&&0!==p.length)if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let b=0;b<p[g].morphTargets.length;b++)m[p[g].morphTargets[b]]=-1;for(const b in m){const v=[],y=[];for(let M=0;M!==p[g].morphTargets.length;++M){const x=p[g];v.push(x.time),y.push(x.morphTarget===b?1:0)}r.push(new Ug(".morphTargetInfluence["+b+"]",v,y))}l=m.length*o}else{const m=".bones["+e[h].name+"]";n(zg,m+".position",p,"pos",r),n(xf,m+".quaternion",p,"rot",r),n(zg,m+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function che(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function lhe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ug;case"vector":case"vector2":case"vector3":case"vector4":return zg;case"color":return W5;case"quaternion":return xf;case"bool":case"boolean":return Bg;case"string":return Vg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const e=[],n=[];lP(i.keys,e,n,"value"),i.times=e,i.values=n}return void 0!==t.parse?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const xu={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class j5{constructor(t,e,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(u){a++,!1===s&&void 0!==r.onStart&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,void 0!==r.onProgress&&r.onProgress(u,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(u){void 0!==r.onError&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,h){return c.push(u,h),this},this.removeHandler=function(u){const h=c.indexOf(u);return-1!==h&&c.splice(h,2),this},this.getHandler=function(u){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(u))return g}return null}}}const Y5=new j5;let wf=(()=>{class i{constructor(e){this.manager=void 0!==e?e:Y5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(s,o){r.load(e,s,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})();const cd={};class dhe extends Error{constructor(t,e){super(t),this.response=e}}class Ta extends wf{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=xu.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==cd[t])return void cd[t].push({onLoad:e,onProgress:n,onError:r});cd[t]=[],cd[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const u=cd[t],h=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,g=0!==m;let b=0;const v=new ReadableStream({start(y){!function M(){h.read().then(({done:x,value:C})=>{if(x)y.close();else{b+=C.byteLength;const O=new ProgressEvent("progress",{lengthComputable:g,loaded:b,total:m});for(let T=0,P=u.length;T<P;T++){const B=u[T];B.onProgress&&B.onProgress(O)}y.enqueue(C),M()}})}()}});return new Response(v)}throw new dhe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>(new DOMParser).parseFromString(u,a));case"json":return c.json();default:if(void 0===a)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{xu.add(t,c);const u=cd[t];delete cd[t];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const u=cd[t];if(void 0===u)throw this.manager.itemError(t),c;delete cd[t];for(let h=0,p=u.length;h<p;h++){const m=u[h];m.onError&&m.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class LS extends wf{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=xu.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=db("img");function l(){u(),xu.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(h){u(),r&&r(h),s.manager.itemError(t),s.manager.itemEnd(t)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class Ob extends wf{constructor(t){super(t)}load(t,e,n,r){const s=new xo,o=new LS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s}}class NS extends jr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ge(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}const cP=new It,q5=new L,X5=new L;class dP{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new we(512,512),this.map=null,this.mapPass=null,this.matrix=new It,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new iS,this._frameExtents=new we(1,1),this._viewportCount=1,this._viewports=[new ai(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;q5.setFromMatrixPosition(t.matrixWorld),e.position.copy(q5),X5.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(X5),e.updateMatrixWorld(),cP.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cP),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(cP)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class hhe extends dP{constructor(){super(new _r(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*rg*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class K5 extends NS{constructor(t,e,n=0,r=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(jr.DEFAULT_UP),this.updateMatrix(),this.target=new jr,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new hhe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Z5=new It,Fb=new L,uP=new L;class fhe extends dP{constructor(){super(new _r(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new we(4,2),this._viewportCount=6,this._viewports=[new ai(2,1,1,1),new ai(0,1,1,1),new ai(3,1,1,1),new ai(1,1,1,1),new ai(3,0,1,1),new ai(1,0,1,1)],this._cubeDirections=[new L(1,0,0),new L(-1,0,0),new L(0,0,1),new L(0,0,-1),new L(0,1,0),new L(0,-1,0)],this._cubeUps=[new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,1,0),new L(0,0,1),new L(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Fb.setFromMatrixPosition(t.matrixWorld),n.position.copy(Fb),uP.copy(n.position),uP.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(uP),n.updateMatrixWorld(),r.makeTranslation(-Fb.x,-Fb.y,-Fb.z),Z5.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Z5)}}class Q5 extends NS{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new fhe}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class phe extends dP{constructor(){super(new sS(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class J5 extends NS{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(jr.DEFAULT_UP),this.updateMatrix(),this.target=new jr,this.shadow=new phe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class hP extends NS{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class wu{static decodeText(t){if(typeof TextDecoder<"u")return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class xhe extends wf{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=xu.get(t);if(void 0!==o)return s.manager.itemStart(t),o.then?void o.then(c=>{e&&e(c),s.manager.itemEnd(t)}).catch(c=>{r&&r(c)}):(setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(t,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return xu.add(t,c),e&&e(c),s.manager.itemEnd(t),c}).catch(function(c){r&&r(c),xu.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});xu.add(t,l),s.manager.itemStart(t)}}const pP="\\[\\]\\.:\\/",Ehe=new RegExp("["+pP+"]","g"),mP="[^"+pP+"]",Ahe="[^"+pP.replace("\\.","")+"]",khe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",mP)+/(WCOD+)?/.source.replace("WCOD",Ahe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",mP)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",mP)+"$"),Phe=["material","materials","bones","map"];class Ohe{constructor(t,e,n){const r=n||yi.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let yi=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ehe,"")}static parseTrackName(e){const n=khe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==Phe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==u){if(void 0===e[u])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[u]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Ohe,i})();function xG(i,t){if(t===noe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===JR||t===qH){let e=i.getIndex();if(null===e){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),e=i.getIndex()}const n=e.count-2,r=[];if(t===JR)for(let o=1;o<=n;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}yi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},yi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},yi.prototype.GetterByBindingType=[yi.prototype._getValue_direct,yi.prototype._getValue_array,yi.prototype._getValue_arrayElement,yi.prototype._getValue_toArray],yi.prototype.SetterByBindingTypeAndVersioning=[[yi.prototype._setValue_direct,yi.prototype._setValue_direct_setNeedsUpdate,yi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[yi.prototype._setValue_array,yi.prototype._setValue_array_setNeedsUpdate,yi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[yi.prototype._setValue_arrayElement,yi.prototype._setValue_arrayElement_setNeedsUpdate,yi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[yi.prototype._setValue_fromArray,yi.prototype._setValue_fromArray_setNeedsUpdate,yi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"163"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="163");class Uhe extends wf{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new $he(e)}),this.register(function(e){return new Jhe(e)}),this.register(function(e){return new efe(e)}),this.register(function(e){return new tfe(e)}),this.register(function(e){return new jhe(e)}),this.register(function(e){return new Yhe(e)}),this.register(function(e){return new qhe(e)}),this.register(function(e){return new Xhe(e)}),this.register(function(e){return new Ghe(e)}),this.register(function(e){return new Khe(e)}),this.register(function(e){return new Whe(e)}),this.register(function(e){return new Qhe(e)}),this.register(function(e){return new Zhe(e)}),this.register(function(e){return new zhe(e)}),this.register(function(e){return new nfe(e)}),this.register(function(e){return new ife(e)})}load(t,e,n,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=wu.extractUrlBase(t);o=wu.resolveURL(c,this.path)}else o=wu.extractUrlBase(t);this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new Ta(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(u){e(u),s.manager.itemEnd(t)},a)}catch(u){a(u)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof t)s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===wG){try{o[On.KHR_BINARY_GLTF]=new rfe(t)}catch(h){return void(r&&r(h))}s=JSON.parse(o[On.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(t));else s=t;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new _fe(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const h=this.pluginCallbacks[u](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const h=s.extensionsUsed[u],p=s.extensionsRequired||[];switch(h){case On.KHR_MATERIALS_UNLIT:o[h]=new Hhe;break;case On.KHR_DRACO_MESH_COMPRESSION:o[h]=new sfe(s,this.dracoLoader);break;case On.KHR_TEXTURE_TRANSFORM:o[h]=new ofe;break;case On.KHR_MESH_QUANTIZATION:o[h]=new afe;break;default:p.indexOf(h)>=0&&void 0===a[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise(function(r,s){n.parse(t,e,r,s)})}}function Vhe(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const On={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class zhe{constructor(t){this.parser=t,this.name=On.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const u=new Ge(16777215);void 0!==l.color&&u.setRGB(l.color[0],l.color[1],l.color[2],us);const h=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new J5(u),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new Q5(u),c.distance=h;break;case"spot":c=new K5(u),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,Su(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(e.cache,a,l)})}}class Hhe{constructor(){this.name=On.KHR_MATERIALS_UNLIT}getMaterialType(){return Yr}extendParams(t,e,n){const r=[];t.color=new Ge(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],us),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(t,"map",s.baseColorTexture,Wr))}return Promise.all(r)}}class Ghe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(e.emissiveIntensity=s),Promise.resolve()}}class $he{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new we(a,a)}return Promise.all(s)}}class Whe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(e.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(e.iridescenceIOR=o.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class jhe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Ge(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],us)}return void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Wr)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Yhe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class qhe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=(new Ge).setRGB(a[0],a[1],a[2],us),Promise.all(s)}}class Xhe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Khe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=(new Ge).setRGB(a[0],a[1],a[2],us),void 0!==o.specularColorTexture&&s.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,Wr)),Promise.all(s)}}class Zhe{constructor(t){this.parser=t,this.name=On.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return e.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(n.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Qhe{constructor(t){this.parser=t,this.name=On.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?tc:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(e.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(e.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(n.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Jhe{constructor(t){this.parser=t,this.name=On.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class efe{constructor(t){this.parser=t,this.name=On.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class tfe{constructor(t){this.parser=t,this.name=On.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class nfe{constructor(t){this.name=On.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const u=r.count,h=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,h,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(u*h);return o.decodeGltfBuffer(new Uint8Array(m),u,h,p,r.mode,r.filter),m})})}return null}}class ife{constructor(t){this.name=On.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=e.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==Ia.TRIANGLES&&c.mode!==Ia.TRIANGLE_STRIP&&c.mode!==Ia.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(u=>(l[c]=u,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(c=>{const u=c.pop(),h=u.isGroup?u.children:[u],p=c[0].count,m=[];for(const g of h){const b=new It,v=new L,y=new io,M=new L(1,1,1),x=new _5(g.geometry,g.material,p);for(let C=0;C<p;C++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,C),l.SCALE&&M.fromBufferAttribute(l.SCALE,C),x.setMatrixAt(C,b.compose(v,y,M));for(const C in l)if("_COLOR_0"===C){const O=l[C];x.instanceColor=new Rg(O.array,O.itemSize,O.normalized)}else"TRANSLATION"!==C&&"ROTATION"!==C&&"SCALE"!==C&&g.geometry.setAttribute(C,l[C]);jr.prototype.copy.call(x,g),this.parser.assignFinalMaterial(x),m.push(x)}return u.isGroup?(u.clear(),u.add(...m),u):m[0]}))}}const wG="glTF";class rfe{constructor(t){this.name=On.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==wG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(t,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(t,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=t.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class sfe{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=On.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const h=xP[u]||u.toLowerCase();a[h]=o[u]}for(const u in t.attributes){const h=xP[u]||u.toLowerCase();if(void 0!==o[u]){const p=n.accessors[t.attributes[u]];c[h]=Hg[p.componentType].name,l[h]=!0===p.normalized}}return e.getDependency("bufferView",s).then(function(u){return new Promise(function(h,p){r.decodeDracoFile(u,function(m){for(const g in m.attributes){const v=l[g];void 0!==v&&(m.attributes[g].normalized=v)}h(m)},a,c,us,p)})})}}class ofe{constructor(){this.name=On.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(void 0===e.texCoord||e.texCoord===t.channel)&&void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class afe{constructor(){this.name=On.KHR_MESH_QUANTIZATION}}class CG extends kb{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=n[s+o];return e}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,u=r-e,h=(n-e)/u,p=h*h,m=p*h,g=t*c,b=g-c,v=-2*m+3*p,y=m-p,M=1-v,x=y-p+h;for(let C=0;C!==a;C++)s[C]=M*o[b+C+a]+x*(o[b+C+l]*u)+v*o[g+C+a]+y*(o[g+C]*u);return s}}const lfe=new io;class cfe extends CG{interpolate_(t,e,n,r){const s=super.interpolate_(t,e,n,r);return lfe.fromArray(s).normalize().toArray(s),s}}const Ia={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Hg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},SG={9728:mr,9729:tr,9984:WR,9985:sb,9986:Km,9987:ol},EG={33071:pr,33648:rb,10497:Ql},bP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},xP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Cu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},dfe={CUBICSPLINE:void 0,LINEAR:Jm,STEP:lb};function Df(i,t,e){for(const n in e.extensions)void 0===i[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function Su(i,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function ffe(i,t){if(i.updateMorphTargets(),void 0!==t.weights)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,r=e.length;n<r;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function pfe(i){let t;const e=i.extensions&&i.extensions[On.KHR_DRACO_MESH_COMPRESSION];if(t=e?"draco:"+e.bufferView+":"+e.indices+":"+MP(e.attributes):i.indices+":"+MP(i.attributes)+":"+i.mode,void 0!==i.targets)for(let n=0,r=i.targets.length;n<r;n++)t+=":"+MP(i.targets[n]);return t}function MP(i){let t="";const e=Object.keys(i).sort();for(let n=0,r=e.length;n<r;n++)t+=e[n]+":"+i[e[n]]+";";return t}function CP(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const gfe=new It;class _fe{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Vhe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||n||r&&s<98?new Ob(this.options.manager):new xhe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Ta(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Df(s,a,r),Su(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[On.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(wu.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteOffset||0;return n.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse){const o=bP[r.type],l=!0===r.normalized,c=new(0,Hg[r.componentType])(r.count*o);return Promise.resolve(new di(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=bP[r.type],c=Hg[r.componentType],u=c.BYTES_PER_ELEMENT,p=r.byteOffset||0,m=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,g=!0===r.normalized;let b,v;if(m&&m!==u*l){const y=Math.floor(p/m),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let x=e.cache.get(M);x||(b=new c(a,y*m,r.count*m/u),x=new Ok(b,m/u),e.cache.add(M,x)),v=new ff(x,l,p%m/u,g)}else b=null===a?new c(r.count*l):new c(a,p,r.count*l),v=new di(b,l,g);if(void 0!==r.sparse){const C=r.sparse.values.byteOffset||0,O=new(0,Hg[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*bP.SCALAR),T=new c(o[2],C,r.sparse.count*l);null!==a&&(v=new di(v.array.slice(),v.itemSize,v.normalized));for(let P=0,B=O.length;P<B;P++){const I=O[P];if(v.setX(I,T[P*l]),l>=2&&v.setY(I,T[P*l+1]),l>=3&&v.setZ(I,T[P*l+2]),l>=4&&v.setW(I,T[P*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,n){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,n).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",""===u.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(u.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return u.magFilter=SG[p.magFilter]||tr,u.minFilter=SG[p.minFilter]||ol,u.wrapS=EG[p.wrapS]||Ql,u.wrapT=EG[p.wrapT]||Ql,r.associations.set(u,{textures:t}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(h=>h.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let g=p;!0===e.isImageBitmapLoader&&(g=function(b){const v=new xo(b);v.needsUpdate=!0,p(v)}),e.load(wu.resolveURL(h,s.path),g,void 0,m)})}).then(function(h){return!0===c&&a.revokeObjectURL(l),h.userData.mimeType=o.mimeType||function mfe(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[t]=u,u}assignTexture(t,e,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[On.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[On.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[On.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new _f,wo.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new Xr,wo.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}t.material=n}getMaterialType(){return Rb}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},c=[];if((s.extensions||{})[On.KHR_MATERIALS_UNLIT]){const h=r[On.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,e))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Ge(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],us),a.opacity=p[3]}void 0!==h.baseColorTexture&&c.push(e.assignTexture(a,"map",h.baseColorTexture,Wr)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=Wo);const u=s.alphaMode||"OPAQUE";if("BLEND"===u?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===u&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==Yr&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new we(1,1),void 0!==s.normalTexture.scale)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(void 0!==s.occlusionTexture&&o!==Yr&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==Yr){const h=s.emissiveFactor;a.emissive=(new Ge).setRGB(h[0],h[1],h[2],us)}return void 0!==s.emissiveTexture&&o!==Yr&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,Wr)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),Su(h,s),e.associations.set(h,{materials:t}),s.extensions&&Df(r,h,s),h})}createUniqueName(t){const e=yi.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[On.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return AG(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],u=pfe(c),h=r[u];if(h)o.push(h.promise);else{let p;p=c.extensions&&c.extensions[On.KHR_DRACO_MESH_COMPRESSION]?s(c):AG(new pn,c,e),r[u]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new Rb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Zl})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(u)}var i;return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],h=[];for(let m=0,g=u.length;m<g;m++){const b=u[m],v=o[m];let y;const M=c[m];if(v.mode===Ia.TRIANGLES||v.mode===Ia.TRIANGLE_STRIP||v.mode===Ia.TRIANGLE_FAN||void 0===v.mode)y=!0===s.isSkinnedMesh?new f5(b,M):new Un(b,M),!0===y.isSkinnedMesh&&y.normalizeSkinWeights(),v.mode===Ia.TRIANGLE_STRIP?y.geometry=xG(y.geometry,qH):v.mode===Ia.TRIANGLE_FAN&&(y.geometry=xG(y.geometry,JR));else if(v.mode===Ia.LINES)y=new Og(b,M);else if(v.mode===Ia.LINE_STRIP)y=new gf(b,M);else if(v.mode===Ia.LINE_LOOP)y=new S5(b,M);else{if(v.mode!==Ia.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);y=new Cb(b,M)}Object.keys(y.geometry.morphAttributes).length>0&&ffe(y,s),y.name=e.createUniqueName(s.name||"mesh_"+t),Su(y,s),v.extensions&&Df(r,y,v),e.assignFinalMaterial(y),h.push(y)}for(let m=0,g=h.length;m<g;m++)e.associations.set(h[m],{meshes:t,primitives:m});if(1===h.length)return s.extensions&&Df(r,h[0],s),h[0];const p=new Xo;s.extensions&&Df(r,p,s),e.associations.set(p,{meshes:t});for(let m=0,g=h.length;m<g;m++)p.add(h[m]);return p})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new _r(Toe_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new sS(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),Su(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let r=0,s=e.joints.length;r<s;r++)n.push(this._loadNodeShallow(e.joints[r]));return n.push(void 0!==e.inverseBindMatrices?this.getDependency("accessor",e.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const h=o[c];if(h){a.push(h);const p=new It;null!==s&&p.fromArray(s.array,16*c),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[c])}return new mS(a,l)})}loadAnimation(t){const n=this,r=this.json.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],l=[],c=[],u=[];for(let h=0,p=r.channels.length;h<p;h++){const m=r.channels[h],g=r.samplers[m.sampler],b=m.target,y=void 0!==r.parameters?r.parameters[g.input]:g.input,M=void 0!==r.parameters?r.parameters[g.output]:g.output;void 0!==b.node&&(o.push(this.getDependency("node",b.node)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",M)),c.push(g),u.push(b))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(h){const p=h[0],m=h[1],g=h[2],b=h[3],v=h[4],y=[];for(let M=0,x=p.length;M<x;M++){const C=p[M],O=m[M],T=g[M],P=b[M],B=v[M];if(void 0===C)continue;C.updateMatrix&&C.updateMatrix();const I=n._createAnimationTracks(C,O,T,P,B);if(I)for(let E=0;E<I.length;E++)y.push(I[E])}return new Pb(s,void 0,y)})}createNodeMesh(t){const n=this,r=this.json.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const n=this,r=this.json.nodes[t],s=n._loadNodeShallow(t),o=[],a=r.children||[];for(let c=0,u=a.length;c<u;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],h=c[1],p=c[2];null!==p&&u.traverse(function(m){m.isSkinnedMesh&&m.bind(p,gfe)});for(let m=0,g=h.length;m<g;m++)u.add(h[m]);return u})}_loadNodeShallow(t){const n=this.extensions,r=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),this.nodeCache[t]=Promise.all(a).then(function(c){let u;if(u=!0===s.isBone?new Bk:c.length>1?new Xo:1===c.length?c[0]:new jr,u!==c[0])for(let h=0,p=c.length;h<p;h++)u.add(c[h]);if(s.name&&(u.userData.name=s.name,u.name=o),Su(u,s),s.extensions&&Df(n,u,s),void 0!==s.matrix){const h=new It;h.fromArray(s.matrix),u.applyMatrix4(h)}else void 0!==s.translation&&u.position.fromArray(s.translation),void 0!==s.rotation&&u.quaternion.fromArray(s.rotation),void 0!==s.scale&&u.scale.fromArray(s.scale);return r.associations.has(u)||r.associations.set(u,{}),r.associations.get(u).nodes=t,u}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],r=this,s=new Xo;n.name&&(s.name=r.createUniqueName(n.name)),Su(s,n),n.extensions&&Df(e,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,h=l.length;u<h;u++)s.add(l[u]);return r.associations=(u=>{const h=new Map;for(const[p,m]of r.associations)(p instanceof wo||p instanceof xo)&&h.set(p,m);return u.traverse(p=>{const m=r.associations.get(p);null!=m&&h.set(p,m)}),h})(s),s})}_createAnimationTracks(t,e,n,r,s){const o=[],a=t.name?t.name:t.uuid,l=[];let c;switch(Cu[s.path]===Cu.weights?t.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a),Cu[s.path]){case Cu.weights:c=Ug;break;case Cu.rotation:c=xf;break;case Cu.position:case Cu.scale:c=zg;break;default:c=1===n.itemSize?Ug:zg}const u=void 0!==r.interpolation?dfe[r.interpolation]:Jm,h=this._getArrayFromAccessor(n);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+Cu[s.path],e.array,h,u);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=CP(e.constructor),r=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)r[s]=e[s]*n;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){return new(this instanceof xf?cfe:CG)(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function AG(i,t,e){const n=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=xP[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==t.indices&&!i.index){const o=e.getDependency("accessor",t.indices).then(function(a){i.setIndex(a)});r.push(o)}return ni.workingColorSpace!==us&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ni.workingColorSpace}" not supported.`),Su(i,t),function vfe(i,t,e){const n=t.attributes,r=new Es;if(void 0===n.POSITION)return;{const a=e.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new L(l[0],l[1],l[2]),new L(c[0],c[1],c[2])),a.normalized){const u=CP(Hg[a.componentType]);r.min.multiplyScalar(u),r.max.multiplyScalar(u)}}const s=t.targets;if(void 0!==s){const a=new L,l=new L;for(let c=0,u=s.length;c<u;c++){const h=s[c];if(void 0!==h.POSITION){const p=e.json.accessors[h.POSITION],m=p.min,g=p.max;if(void 0!==m&&void 0!==g){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const b=CP(Hg[p.componentType]);l.multiplyScalar(b)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new As;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function hfe(i,t,e){let n=!1,r=!1,s=!1;for(let c=0,u=t.length;c<u;c++){const h=t[c];if(void 0!==h.POSITION&&(n=!0),void 0!==h.NORMAL&&(r=!0),void 0!==h.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,u=t.length;c<u;c++){const h=t[c];if(n){const p=void 0!==h.POSITION?e.getDependency("accessor",h.POSITION):i.attributes.position;o.push(p)}if(r){const p=void 0!==h.NORMAL?e.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(p)}if(s){const p=void 0!==h.COLOR_0?e.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[1],p=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=p),i.morphTargetsRelative=!0,i})}(i,t.targets,e):i})}class ul{constructor(t){this.nativeMesh=t,this.entity=null}get position(){return mt.clone(this.nativeMesh.position)}set position(t){this.nativeMesh.position.set(t.x,t.y,t.z)}get rotation(){return $r.clone(this.nativeMesh.quaternion)}set rotation(t){this.nativeMesh.quaternion.set(t.x,t.y,t.z,t.w)}get scale(){return mt.clone(this.nativeMesh.scale)}set scale(t){this.nativeMesh.scale.set(t.x,t.y,t.z)}get visible(){return this.nativeMesh.visible}set visible(t){this.nativeMesh.visible=t}get name(){return this.nativeMesh.name||this.nativeMesh.uuid}set name(t){this.nativeMesh.name=t}isEmpty(){return(this.nativeMesh instanceof cS||this.nativeMesh instanceof Xo)&&0==this.nativeMesh.children.length}popChild(t){const e=this.nativeMesh.children.find(n=>n.name===t||n.userData.name===t);return e?(e.removeFromParent(),new ul(e)):null}getBoundings(){return(new Es).setFromObject(this.nativeMesh)}clone(){return new ul(this.nativeMesh.clone())}addToWorld(t){var e;null===(e=t.visualScene.nativeScene)||void 0===e||e.add(this.nativeMesh)}removeFromWorld(t){var e;null===(e=t.visualScene.nativeScene)||void 0===e||e.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(t=>{t instanceof Un&&this.disposeMesh(t)}),this.nativeMesh instanceof Un&&this.disposeMesh(this.nativeMesh)}disposeMesh(t){t.geometry.dispose();const e=t.material instanceof Array?t.material:[t.material];for(const n of e)n.dispose()}}class yfe extends ul{constructor(t){super(t),this.nativeCamera=t}get supportsFov(){return this.nativeCamera instanceof _r||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(t){this.supportsFov&&(this.nativeCamera.fov=t,this.nativeCamera.updateProjectionMatrix())}}class bfe extends Jre{createMaterial(t){let e=t.color||super.randomColor(),n=t.shading||"unlit";switch(n){case"unlit":return new Yr({color:e,map:t.diffuse||null});case"standart":return new Rb({color:e,map:t.diffuse||null});case"phong":return new FS({color:e,map:t.diffuse||null});default:throw new Error(`"${n}" shading not implemented for three.js`)}}transformPrimitiveZUp(t){t.rotateX(Math.PI/2);const e=new Xo;return e.add(t),e}createPrimitive(t,e={}){let n=null,r=this.createMaterial(e);switch(t.shape){case"PLANE":n=new Un(new lf(1e4,1e4),r);break;case"BOX":n=new Un(new rf(t.dimensions.x,t.dimensions.y,t.dimensions.z),r);break;case"CAPSULE":n=this.transformPrimitiveZUp(new Un(new ES(t.radius,t.centersDistance),r));break;case"CYLINDER":n=this.transformPrimitiveZUp(new Un(new Fg(t.radius,t.radius,t.height),r));break;case"CONE":n=this.transformPrimitiveZUp(new Un(new AS(t.radius,t.height),r));break;case"SPHERE":n=new Un(new Ib(t.radius),r)}if(!n)throw new Error(`Primitive with shape "${t.shape}" not implemented`);return void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),new ul(n)}createPerspectiveCamera(t={}){return new yfe(new _r(t.fov||75,t.aspectRatio||1,t.frustrum?t.frustrum.near:1,t.frustrum?t.frustrum.far:1e4))}}class wfe{constructor(){this.gltfLoader=new Uhe}loadFromGgGlb(t,e){return function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){const n=yield this.gltfLoader.parseAsync(t,"");return n.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new ul(n.scene)})}}class Mfe extends ul{constructor(){super(new Og(new pn,new Xr({color:16711680,linewidth:.5}))),this.entity=null,this.debugBufferSize=3e6,this.index=0,this.lastMaxIndex=0,this.debugVertices=new Float32Array(this.debugBufferSize),this.debugColors=new Float32Array(this.debugBufferSize),this.nativeMesh.geometry.setAttribute("position",new di(this.debugVertices,3)),this.nativeMesh.geometry.setAttribute("color",new di(this.debugColors,3)),this.nativeMesh.frustumCulled=!1}drawContactPoint(t,e,n){this.setXYZ(this.debugVertices,this.index,t.x,t.y,t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,t.x+e.x,t.y+e.y,t.z+e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}drawLine(t,e,n){this.setXYZ(this.debugVertices,this.index,t.x,t.y,t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}update(){this.index<this.lastMaxIndex&&(this.debugVertices.fill(0,this.index,this.lastMaxIndex),this.debugColors.fill(0,this.index,this.lastMaxIndex)),this.lastMaxIndex=this.index,this.index=0,this.nativeMesh.geometry.attributes.position.needsUpdate=!0,this.nativeMesh.geometry.attributes.color.needsUpdate=!0}setXYZ(t,e,n,r,s){t[e*=3]=n,t[e+1]=r,t[e+2]=s}}class Cfe extends Hre{constructor(t,e,n,r={}){super(t,n,r),this.scene=t,this.camera=e,this.canvas=n,this.nativeRenderer=new iue({canvas:n,antialias:this.rendererOptions.antialias,preserveDrawingBuffer:!0,alpha:this.rendererOptions.transparent}),this.nativeRenderer.outputColorSpace=Wr,this.nativeRenderer.shadowMap.enabled=!0,this.nativeRenderer.setClearColor(this.rendererOptions.background),this.nativeRenderer.shadowMap.type=lH,this.nativeRenderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}addToWorld(t){}removeFromWorld(t){}resizeRenderer(t){this.nativeRenderer.setSize(t.x,t.y),(this.camera.nativeCamera instanceof _r||"PerspectiveCamera"==this.camera.nativeCamera.type)&&Math.abs(this.camera.nativeCamera.aspect-t.x/t.y)>.01&&(this.camera.nativeCamera.aspect=t.x/t.y,this.camera.nativeCamera.updateProjectionMatrix())}render(){this.nativeRenderer.render(this.scene.nativeScene,this.camera.nativeCamera)}dispose(){this.camera.dispose(),this.nativeRenderer.clear(),this.nativeRenderer.dispose(),this.nativeRenderer.domElement=null}}class DG{constructor(){this._nativeScene=null,this.factory=new bfe,this.loader=new wfe,this.debugPhysicsDrawerClass=Mfe}get nativeScene(){return this._nativeScene}init(){return i=this,t=void 0,n=function*(){this._nativeScene=new cS},new((e=void 0)||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(u.value).then(a,l)}c((n=n.apply(i,t||[])).next())});var i,t,e,n}createRenderer(t,e,n){return new Cfe(this,t,e,n)}dispose(){this._nativeScene=new cS}}const Efe=/^[og]\s*(.+)?/,Afe=/^mtllib /,Dfe=/^usemtl /,Tfe=/^usemap /,TG=/\s+/,IG=new L,SP=new L,RG=new L,kG=new L,Ra=new L,WS=new Ge;function Ife(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){const n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[t+0],r[t+1],r[t+2]),s.push(r[e+0],r[e+1],r[e+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[t+0],r[t+1],r[t+2]),s.push(r[e+0],r[e+1],r[e+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(t,e,n){const r=this.vertices,s=this.object.geometry.normals;IG.fromArray(r,t),SP.fromArray(r,e),RG.fromArray(r,n),Ra.subVectors(RG,SP),kG.subVectors(IG,SP),Ra.cross(kG),Ra.normalize(),s.push(Ra.x,Ra.y,Ra.z),s.push(Ra.x,Ra.y,Ra.z),s.push(Ra.x,Ra.y,Ra.z)},addColor:function(t,e,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,e,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[t+0],r[t+1]),s.push(r[e+0],r[e+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,r,s,o,a,l,c){const u=this.vertices.length;let h=this.parseVertexIndex(t,u),p=this.parseVertexIndex(e,u),m=this.parseVertexIndex(n,u);if(this.addVertex(h,p,m),this.addColor(h,p,m),void 0!==a&&""!==a){const g=this.normals.length;h=this.parseNormalIndex(a,g),p=this.parseNormalIndex(l,g),m=this.parseNormalIndex(c,g),this.addNormal(h,p,m)}else this.addFaceNormal(h,p,m);if(void 0!==r&&""!==r){const g=this.uvs.length;h=this.parseUVIndex(r,g),p=this.parseUVIndex(s,g),m=this.parseUVIndex(o,g),this.addUV(h,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,r=t.length;n<r;n++){const s=this.parseVertexIndex(t[n],e);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=t.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(t[s],n));for(let s=0,o=e.length;s<o;s++)this.addUVLine(this.parseUVIndex(e[s],r))}};return i.startObject("",!1),i}class EP extends wf{constructor(t){super(t),this.materials=null}load(t,e,n,r){const s=this,o=new Ta(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{e(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}setMaterials(t){return this.materials=t,this}parse(t){const e=new Ife;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const u=c.charAt(0);if("#"!==u)if("v"===u){const h=c.split(TG);switch(h[0]){case"v":e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(WS.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),e.colors.push(WS.r,WS.g,WS.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":e.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===u){const p=c.slice(1).trim().split(TG),m=[];for(let b=0,v=p.length;b<v;b++){const y=p[b];if(y.length>0){const M=y.split("/");m.push(M)}}const g=m[0];for(let b=1,v=m.length-1;b<v;b++){const y=m[b],M=m[b+1];e.addFace(g[0],y[0],M[0],g[1],y[1],M[1],g[2],y[2],M[2])}}else if("l"===u){const h=c.substring(1).trim().split(" ");let p=[];const m=[];if(-1===c.indexOf("/"))p=h;else for(let g=0,b=h.length;g<b;g++){const v=h[g].split("/");""!==v[0]&&p.push(v[0]),""!==v[1]&&m.push(v[1])}e.addLineGeometry(p,m)}else if("p"===u){const p=c.slice(1).trim().split(" ");e.addPointGeometry(p)}else if(null!==(r=Efe.exec(c))){const h=(" "+r[0].slice(1).trim()).slice(1);e.startObject(h)}else if(Dfe.test(c))e.object.startMaterial(c.substring(7).trim(),e.materialLibraries);else if(Afe.test(c))e.materialLibraries.push(c.substring(7).trim());else if(Tfe.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();e.object.smooth="0"!==p&&"off"!==p}else e.object.smooth=!0;const h=e.object.currentMaterial();h&&(h.smooth=e.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}e.finalize();const s=new Xo;if(s.materialLibraries=[].concat(e.materialLibraries),1==!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let a=0,l=e.objects.length;a<l;a++){const c=e.objects[a],u=c.geometry,h=c.materials,p="Line"===u.type,m="Points"===u.type;let g=!1;if(0===u.vertices.length)continue;const b=new pn;b.setAttribute("position",new ot(u.vertices,3)),u.normals.length>0&&b.setAttribute("normal",new ot(u.normals,3)),u.colors.length>0&&(g=!0,b.setAttribute("color",new ot(u.colors,3))),!0===u.hasUVIndices&&b.setAttribute("uv",new ot(u.uvs,2));const v=[];for(let M=0,x=h.length;M<x;M++){const C=h[M],O=C.name+"_"+C.smooth+"_"+g;let T=e.materials[O];if(null!==this.materials)if(T=this.materials.create(C.name),!p||!T||T instanceof Xr){if(m&&T&&!(T instanceof _f)){const P=new _f({size:10,sizeAttenuation:!1});wo.prototype.copy.call(P,T),P.color.copy(T.color),P.map=T.map,T=P}}else{const P=new Xr;wo.prototype.copy.call(P,T),P.color.copy(T.color),T=P}void 0===T&&(T=p?new Xr:m?new _f({size:1,sizeAttenuation:!1}):new FS,T.name=C.name,T.flatShading=!C.smooth,T.vertexColors=g,e.materials[O]=T),v.push(T)}let y;if(v.length>1){for(let M=0,x=h.length;M<x;M++){const C=h[M];b.addGroup(C.groupStart,C.groupCount,M)}y=p?new Og(b,v):m?new Cb(b,v):new Un(b,v)}else y=p?new Og(b,v[0]):m?new Cb(b,v[0]):new Un(b,v[0]);y.name=c.name,s.add(y)}else if(e.vertices.length>0){const a=new _f({size:1,sizeAttenuation:!1}),l=new pn;l.setAttribute("position",new ot(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(l.setAttribute("color",new ot(e.colors,3)),a.vertexColors=!0);const c=new Cb(l,a);s.add(c)}return s}}class PG extends wf{constructor(t){super(t)}load(t,e,n,r){const s=this,o=""===this.path?wu.extractUrlBase(t):this.path,a=new Ta(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},n,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,e){const n=t.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<n.length;l++){let c=n[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const u=c.indexOf(" ");let h=u>=0?c.substring(0,u):c;h=h.toLowerCase();let p=u>=0?c.substring(u+1):"";if(p=p.trim(),"newmtl"===h)r={name:p},o[p]=r;else if("ka"===h||"kd"===h||"ks"===h||"ke"===h){const m=p.split(s,3);r[h]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else r[h]=p}const a=new Rfe(this.resourcePath||e,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class Rfe{constructor(t="",e={}){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:Zl,this.wrap=void 0!==this.options.wrap?this.options.wrap:Ql}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const e={};for(const n in t){const r=t[n],s={};e[n]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return e}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray}create(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const e=this,n=this.materialsInfo[t],r={name:t,side:this.side};function o(a,l){if(r[a])return;const c=e.getTextureParams(l,r),u=e.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(e.baseUrl,c.url));u.repeat.copy(c.scale),u.offset.copy(c.offset),u.wrapS=e.wrap,u.wrapT=e.wrap,("map"===a||"emissiveMap"===a)&&(u.colorSpace=Wr),r[a]=u}for(const a in n){const l=n[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new Ge).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new Ge).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new Ge).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[t]=new FS(r),this.materials[t]}getTextureParams(t,e){const n={scale:new we(1,1),offset:new we(0,0)},r=t.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(e.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(n.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(n.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),n.url=r.join(" ").trim(),n}loadTexture(t,e,n,r,s){const o=void 0!==this.manager?this.manager:Y5;let a=o.getHandler(t);null===a&&(a=new Ob(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(t,n,r,s);return void 0!==e&&(l.mapping=e),l}}const kfe=["determinateSpinner"];function Pfe(i,t){if(1&i&&(Lr(),$(0,"svg",11),Pe(1,"circle",12),Y()),2&i){const e=pe();yt("viewBox",e._viewBox()),G(1),Bo("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),yt("r",e._circleRadius())}}const Ofe=Ny(class{constructor(i){this._elementRef=i}},"primary"),Ffe=new fe("mat-progress-spinner-default-options",{providedIn:"root",factory:function Lfe(){return{diameter:OG}}}),OG=100;let jS=(()=>{class i extends Ofe{constructor(e,n,r){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=OG,this._noopAnimations="NoopAnimations"===n&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,xs(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=xs(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=xs(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Er,8),A(Ffe))},i.\u0275cmp=it({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,n){if(1&e&&qn(kfe,5),2&e){let r;St(r=Et())&&(n._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,n){2&e&&(yt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===n.mode?n.value:null)("mode",n.mode),Bo("width",n.diameter,"px")("height",n.diameter,"px"),nn("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===n.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[rt],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,n){if(1&e&&(me(0,Pfe,2,8,"ng-template",null,0,Fc),$(2,"div",1,2),Lr(),$(4,"svg",3),Pe(5,"circle",4),Y()(),is(),$(6,"div",5)(7,"div",6)(8,"div",7),Gv(9,8),Y(),$(10,"div",9),Gv(11,8),Y(),$(12,"div",10),Gv(13,8),Y()()()),2&e){const r=Ki(1);G(4),yt("viewBox",n._viewBox()),G(1),Bo("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),yt("r",n._circleRadius()),G(4),V("ngTemplateOutlet",r),G(2),V("ngTemplateOutlet",r),G(2),V("ngTemplateOutlet",r)}},dependencies:[sy],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),Bfe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[vo,$n]}),i})();const Ufe=["previewCanvasContainer"],Vfe=["previewCanvas"];function zfe(i,t){if(1&i){const e=oi();os(0),$(1,"label",11),ze(2),Y(),$(3,"input",12),Ne("change",function(r){an(e);const s=pe().$implicit;return s.value=r.currentTarget.checked,ln(s.change(s.value))}),Y(),as()}if(2&i){const e=pe(),n=e.index,r=e.$implicit,s=pe().index;G(1),V("for","custom_control_"+s+"_"+n),G(1),ci(r.label),G(1),V("id","custom_control_"+s+"_"+n)("type",r.type)("checked",r.value)}}function Hfe(i,t){if(1&i){const e=oi();$(0,"div",9)(1,"label",11),ze(2),Y(),$(3,"input",14),Ne("change",function(){const s=an(e).$implicit,o=pe(2).$implicit;return o.value=s,ln(o.change(o.value))}),Y()()}if(2&i){const e=t.$implicit,n=pe(2),r=n.index,s=n.$implicit,o=pe().index;G(1),V("for","custom_control_"+o+"_"+r+"_"+e),G(1),ci(e),G(1),V("id","custom_control_"+o+"_"+r+"_"+e)("checked",s.value===e)}}function Gfe(i,t){if(1&i&&($(0,"div",13)(1,"label"),ze(2),Y(),me(3,Hfe,4,4,"div",8),Y()),2&i){const e=pe().$implicit;G(2),ci(e.label),G(1),V("ngForOf",e.options)}}function $fe(i,t){if(1&i){const e=oi();os(0),$(1,"label",11),ze(2),Y(),$(3,"input",15),Ne("colorChange",function(r){an(e);const s=pe().$implicit,o=pe(2);return s.value=o.toRGB(r.value),ln(s.change(s.value))}),Y(),Pe(4,"ngx-mat-color-toggle",16)(5,"ngx-mat-color-picker",null,17),as()}if(2&i){const e=Ki(6),n=pe(),r=n.index,s=n.$implicit,o=pe().index;G(1),V("for","custom_control_"+o+"_"+r),G(1),ci(s.label),G(1),V("ngxMatColorPicker",e),G(1),V("for",e)}}function Wfe(i,t){if(1&i&&($(0,"div",9),me(1,zfe,4,5,"ng-container",6),me(2,Gfe,4,2,"div",10),me(3,$fe,7,4,"ng-container",6),Y()),2&i){const e=t.$implicit;G(1),V("ngIf","checkbox"===e.type),G(1),V("ngIf","radio"===e.type),G(1),V("ngIf","color"===e.type)}}function jfe(i,t){if(1&i&&(os(0),$(1,"h4"),ze(2),Y(),me(3,Wfe,4,3,"div",8),as()),2&i){const e=t.$implicit;G(2),ci(e.title),G(1),V("ngForOf",e.controls)}}function Yfe(i,t){if(1&i){const e=oi();$(0,"div",9)(1,"label",11),ze(2),Y(),$(3,"input",18),Ne("change",function(r){return ln(an(e).$implicit.visible=r.currentTarget.checked)}),Y()()}if(2&i){const e=t.$implicit;G(1),V("for","visibility_"+e.name),G(1),ci(e.name),G(1),V("id","visibility_"+e.name)("checked",e.visible)}}function qfe(i,t){if(1&i&&(os(0),$(1,"h4"),ze(2,"Objects visibility"),Y(),me(3,Yfe,4,4,"div",8),as()),2&i){const e=pe();G(3),V("ngForOf",e.meshes)}}function Xfe(i,t){1&i&&Pe(0,"mat-spinner",19)}const Eu=i=>{i.colorSpace="srgb",i.anisotropy=8,i.magFilter=mr,i.minFilter=mr};let FG=(()=>{class i{constructor(e){this.cdr=e,this.visibilityControls=!0,this.groupFunction=null,this.customControls=[],this.onObjectLoaded=new He,this._paths$=new At(null),this.destroyed$=new Fe,this.entity=null,this.meshes=[]}get paths(){return this._paths$.getValue()}set paths(e){this._paths$.next(e)}ngAfterViewInit(){var e=this;return ht(function*(){var s;e.world=new sH(new DG,{init:(s=ht(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield e.world.init(),e.world.visualScene.nativeScene.add(new hP(16777215,2));let n=new At({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera({frustrum:{near:.01,far:1e4}}),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.controller=new Zre(e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement}}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._paths$.pipe(Ze(e.destroyed$)).subscribe(function(){var s=ht(function*(o){if(e.entity&&(e.world.removeEntity(e.entity),e.entity.dispose(),e.entity=null,e.meshes=[],e.cdr.markForCheck()),o){const[a,l]=o,c=new EP,h=yield(new PG).loadAsync(l);h.preload(),c.setMaterials(h);const p=yield c.loadAsync(a);if(e.groupFunction){const b={};for(const v of p.children){const y=e.groupFunction(v.name);b[y]||(b[y]=[]),b[y].push(v)}for(const v of Object.keys(b)){const y=new Xo;y.add(...b[v]),y.name=v,p.remove(...b[v]),p.add(y)}}e.meshes=p.children,e.meshes.sort((b,v)=>b.name>v.name?1:-1),p.traverse(b=>{if(b instanceof Un){const v=b.material instanceof Array?b.material:[b.material];for(const y of v)y.transparent=!0,y.alphaTest=.5,y instanceof Yr&&y.map&&(y.map.wrapS=pr,y.map.wrapT=pr,Eu(y.map),y.map.needsUpdate=!0)}}),e.onObjectLoaded.next(p),e.entity=new lu(new ul(p),null),e.world.addEntity(e.entity);let m={min:{x:-5,y:-5,z:-5},max:{x:5,y:5,z:5}};const g=e.entity.object3D.getBoundings();!isNaN(g.min.x)&&!isNaN(g.max.x)&&(m=g),e.controller.target=mt.scalarMult(mt.add(m.min,m.max),.5),e.controller.radius=mt.dist(m.min,m.max),e.controller.theta=-1.32,e.controller.phi=1.22,e.cdr.markForCheck()}});return function(o){return s.apply(this,arguments)}}())})()}toRGB(e){return(e?.r||0)<<16|(e?.g||0)<<8|(e?.b||0)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-obj-viewer"]],viewQuery:function(e,n){if(1&e&&(qn(Ufe,5),qn(Vfe,5)),2&e){let r;St(r=Et())&&(n.previewCanvasContainer=r.first),St(r=Et())&&(n.previewCanvas=r.first)}},inputs:{paths:"paths",visibilityControls:"visibilityControls",groupFunction:"groupFunction",customControls:"customControls"},outputs:{onObjectLoaded:"onObjectLoaded"},decls:8,vars:3,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["id","controls"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["class","controls-list",4,"ngFor","ngForOf"],[1,"controls-list"],["style","width: 100%",4,"ngIf"],[3,"for"],[3,"id","type","checked","change"],[2,"width","100%"],["type","radio",3,"id","checked","change"],["matInput","",1,"hidden",3,"ngxMatColorPicker","colorChange"],["matSuffix","",3,"for"],["picker",""],["type","checkbox",3,"id","checked","change"],["mode","indeterminate"]],template:function(e,n){1&e&&($(0,"div",0,1),Pe(2,"canvas",2,3),$(4,"div",4),me(5,jfe,4,2,"ng-container",5),me(6,qfe,4,1,"ng-container",6),Y(),me(7,Xfe,1,0,"mat-spinner",7),Y()),2&e&&(G(5),V("ngForOf",n.customControls),G(1),V("ngIf",n.visibilityControls),G(1),V("ngIf",!n.entity))},dependencies:[_o,vi,mte,Kc,jS,hie,vC,Uz],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]{position:absolute;right:0;top:0;padding:5px;display:flex;flex-direction:column;row-gap:10px;background-color:#333;color:#fff;max-height:calc(100% - 8px);overflow-y:auto}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]:empty{display:none}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin:0}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%]{width:100%;display:flex;-webkit-user-select:none;user-select:none;align-items:center}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex-grow:1}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),i})();function Kfe(i,t){if(1&i&&(Lr(),Pe(0,"circle",3),Ht(1,"async"),Ht(2,"async")),2&i){const e=pe();let n,r;yt("cx",(null==(n=Zt(1,3,e.mapPointer$))?null:n.x)||0)("cy",(null==(r=Zt(2,5,e.mapPointer$))?null:r.y)||0)("r",10)}}const Zfe=function(){return{"stroke-width":3}};let Qfe=(()=>{class i{constructor(e){this.ref=e,this._roadSpline$=new At([]),this._pointer$=new At(null),this.splineClosed=!1,this.svgSize$=new At({x:100,y:100}),this.scalingSquare$=new At({x:0,y:0,width:100,height:100}),this.mapPolyline$=new At(""),this.mapPointer$=new At(null),this.destroyed$=new Fe}set roadSpline(e){this._roadSpline$.next(e)}set pointer(e){this._pointer$.next(e)}ngAfterViewInit(){this._roadSpline$.pipe(Ze(this.destroyed$),Qe(n=>{let r={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},s={x:Number.MIN_SAFE_INTEGER,y:Number.MIN_SAFE_INTEGER};n.forEach(a=>{r={x:Math.min(r.x,a.x),y:Math.min(r.y,a.z)},s={x:Math.max(s.x,a.x),y:Math.max(s.y,a.z)}});const o_x=s.x-r.x,o_y=s.y-r.y;return{x:r.x-.1*o_x,y:r.y-.1*o_y,width:1.2*o_x,height:1.2*o_y}})).subscribe(this.scalingSquare$),Yd([this._roadSpline$,this.scalingSquare$,this.svgSize$]).pipe(Ze(this.destroyed$),Qe(([n,r,s])=>{const o=n.map(a=>({x:(a.x-r.x)*s.x/r.width,y:(r.y-a.z)*s.y/r.height+s.y}));return this.splineClosed&&o.length&&o.push(o[0]),o.map(a=>Math.round(a.x)+","+Math.round(a.y)).join(" ")})).subscribe(this.mapPolyline$),Yd([this._pointer$,this.scalingSquare$.asObservable(),this.svgSize$]).pipe(Ze(this.destroyed$),Qe(([n,r,s])=>n?{x:(n.x-r.x)*s.x/r.width,y:(r.y-n.y)*s.y/r.height+s.y}:null)).subscribe(this.mapPointer$);const e=()=>{this.svgSize$.next({x:this.ref.nativeElement.clientWidth,y:this.ref.nativeElement.clientHeight})};new ResizeObserver(e).observe(this.ref.nativeElement),e()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(ct))},i.\u0275cmp=it({type:i,selectors:[["app-tri-minimap"]],inputs:{roadSpline:"roadSpline",pointer:"pointer",splineClosed:"splineClosed"},decls:8,vars:13,consts:[["shape-rendering","geometricPrecision"],[2,"fill","none","stroke","#333333",3,"ngStyle"],["fill","#e30","stroke","black","stroke-width","3",4,"ngIf"],["fill","#e30","stroke","black","stroke-width","3"]],template:function(e,n){if(1&e&&(Lr(),$(0,"svg",0),Ht(1,"async"),Ht(2,"async"),Pe(3,"polyline",1),Ht(4,"async"),ze(5," cars "),me(6,Kfe,3,7,"circle",2),Ht(7,"async"),Y()),2&e){let r;yt("viewBox","0 0 "+(null==(r=Zt(1,4,n.svgSize$))?null:r.x)+" "+(null==(r=Zt(2,6,n.svgSize$))?null:r.y)),G(3),V("ngStyle",Js(12,Zfe)),yt("points",Zt(4,8,n.mapPolyline$)),G(3),V("ngIf",Zt(7,10,n.mapPointer$))}},dependencies:[vi,Zw,Hl],styles:["[_nghost-%COMP%]{overflow:auto}svg[_ngcontent-%COMP%]{width:100%;height:100%}"],changeDetection:0}),i})();const Jfe=["previewCanvasContainer"],epe=["previewCanvas"];function tpe(i,t){if(1&i&&($(0,"mat-option",19),ze(1),Y()),2&i){const e=t.$implicit;V("value",e),G(1),Qi(" ",e," ")}}function npe(i,t){if(1&i){const e=oi();os(0),$(1,"mat-form-field",1)(2,"mat-label"),ze(3,"Custom FAM path"),Y(),Pe(4,"input",20,21),Ht(6,"async"),Y(),$(7,"button",22),Ne("click",function(){an(e);const r=Ki(5);return ln(pe().onFamSelected(r.value))}),ze(8,"LOAD"),Y(),as()}if(2&i){const e=pe();G(4),V("value",Zt(6,1,e.previewFamLocation$))}}function ipe(i,t){1&i&&Pe(0,"mat-spinner",23),2&i&&V("diameter",40)}function rpe(i,t){1&i&&Pe(0,"mat-spinner",24)}const spe=function(){return["loop_chunk","num_chunks","unk0","unk1","position","unknowns0","chunks_size","rail_tex_id","num_prop_descr","num_props","unk2","unk3","prop_descr","props"]};var Tf=(()=>{return(i=Tf||(Tf={})).ThreeModel="model",i.Bitmap="bitmap",i.TwoSidedBitmap="two_sided_bitmap",Tf;var i})();class ope extends jre{constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.famPath=e,this.hideUnknownEntities$=n,this.textureLoader=new Ob,this.terrainMaterials={},this.objLoader=new EP,this.resource=null,this.isOpenedTrack=!1,this._placeholder=null,this._placeholderPromise=null,this.unknownEntities=new Set,this._placeholderTerrain=null,this._placeholderTerrainPromise=null}onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe($c(),Ze(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return ht(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}getPlaceholderTerrainTexture(){var t=this;return ht(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=Ql,e.wrapT=pr,Eu(e),e.flipY=!0,e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return ht(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(l=>{l instanceof Un&&(l.material=e.getTerrainMaterial((l.userData.name||l.name).substr((l.userData.name||l.name).lastIndexOf("_")+1).split(".")[0]))});let r=+t.path.split("_")[t.path.split("_").length-1],s=(e.resource.data.props||[]).filter(l=>l.road_point_idx>=4*r&&l.road_point_idx<4*(r+1)).map(l=>({...l,...e.resource.data.prop_descr[l.prop_descr_idx],position:mt.add({x:l.position.x,y:l.position.z,z:l.position.y},{x:e.resource.data.road_spline[l.road_point_idx].position.x,y:e.resource.data.road_spline[l.road_point_idx].position.z,z:e.resource.data.road_spline[l.road_point_idx].position.y}),rotation:$r.fromAngle(mt.nZ,l.rotation+e.resource.data.road_spline[l.road_point_idx].orientation)}));const o=(yield Promise.all(s.map(l=>e.loadPropInternal(l)))).filter(l=>!!l),a=new lu(new ul(n));return e.addChildren(a,...o),e.loaded.set(t,[a,...o]),[[a,...o],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new Yr({side:Wo,transparent:!0,visible:!1}),this.famPath?this.textureLoader.loadAsync(`${this.famPath}/background/${t}.png`).then(e=>{e.wrapS=Ql,e.wrapT=pr,Eu(e),e.flipY=!0,this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}loadPropInternal(t){var e=this;return ht(function*(){let n=!1;if(t.type==Tf.ThreeModel){let r;try{if(!e.famPath)throw new Error;const o=new PG,a=new EP,l=yield o.loadAsync(`${e.famPath}/props/${t.data.data.resource_id}/0/material.mtl`);l.preload(),a.setMaterials(l),r=new ul(yield a.loadAsync(`${e.famPath}/props/${t.data.data.resource_id}/0/geometry.obj`))}catch{n=!0,r=e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:5},{diffuse:yield e.getPlaceholderTexture()})}r.nativeMesh.traverse(o=>{if(o instanceof Un){const a=o.material instanceof Array?o.material:[o.material];for(const l of a)l.transparent=!0,l.alphaTest=.5,l instanceof Yr&&l.map&&(l.map.wrapS=pr,l.map.wrapT=pr,Eu(l.map),l.map.needsUpdate=!0)}});const s=new lu(r);return s.position=t.position,s.rotation=t.rotation,n&&(e.unknownEntities.add(s),s.visible=!e.hideUnknownEntities$.getValue()),e.world.addEntity(s),s}if(t.type==Tf.Bitmap||t.type==Tf.TwoSidedBitmap){const r=(c,u)=>new Array(u).fill(null).map((h,p)=>e.isOpenedTrack?`${Math.floor(c/4)+p}/0000`:`0/${(Math.floor(c/4)+p).toString().padStart(2,"0")}00`).join(";"),s=new Xo,[o,a]=yield e.loadTexturePlaneProp(r(t.data.data.resource_id,t.flags.is_animated?t.data.data.frame_count:1),{x:t.data.data.width,y:t.data.data.height},t.data.data.animation_interval);if(s.add(o),t.type==Tf.TwoSidedBitmap){const[c,u]=yield e.loadTexturePlaneProp(r(t.data.data.resource_id_2,1),{x:t.data.data.width_2,y:t.data.data.height},t.data.data.animation_interval);c.rotateY(Math.PI/2),c.position.x=t.data.data.width/2,c.position.y=t.data.data.width_2/2,s.add(c)}const l=new lu(new ul(s),null);return l.position=t.position,l.rotation=t.rotation,a&&(e.unknownEntities.add(l),l.visible=!e.hideUnknownEntities$.getValue()),l}return null})()}loadTexturePlaneProp(t,e,n){var r=this;return ht(function*(){const s=t.split(";"),o=yield r.getPlaceholderTexture();let a=!1,l=[];r.famPath?l=yield Promise.all(s.map(h=>r.textureLoader.loadAsync(`${r.famPath}/foreground/${h}.png`).catch(()=>(a=!0,o)))):(a=!0,l=s.map(()=>o));const c=l.map(h=>(Eu(h),new Yr({map:h,alphaTest:.5,transparent:!0,side:Wo}))),u=new Un(new lf(e.x,e.y),c[0]);if(u.rotateX(Math.PI/2),u.position.set(0,0,e.y/2),c.length>1){let h=-1;wC(r.world).pipe(Qz(n&&!isNaN(+n)?1e3*+n:250)).subscribe(()=>{h=(h+1)%c.length,u.material=c[h]})}return[u,a]})()}}let ape=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r,this._resource$=new At(null),this.changed=new He,this.previewLoading$=new At(!0),this.previewFamLocation$=new At(null),this.previewFamLoading$=new At(!1),this.pointer$=new At(null),this.selectedSplineIndex$=new At(0),this.selectedSplineItem$=new At(null),this.selectedAiInfoItem$=new At(null),this.selectedTerrainItem$=new At(null),this.famPath=null,this.name="",this.renderer=null,this.map=null,this.isOpenedTrack=!0,this.roadPath=null,this.destroyed$=new Fe}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}get previewFamPossibleLocations(){const e=this.resource?.id;return e?[e.substring(0,e.indexOf("MISC"))+"ETRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_001.FAM",e.substring(0,e.indexOf("MISC"))+"GTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_001.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_M01.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_R01.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_T01.FAM"]:[]}get roadSpline(){return(this.resource?.data.road_spline||[]).filter((e,n)=>n<(4*this.resource?.data.num_chunks||0)).map(e=>e.position)||[]}ngAfterViewInit(){var e=this;return ht(function*(){var s;e.world=new sH(new DG,{init:(s=ht(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{},loader:{loadFromGgGlb:function(){var s=ht(function*(...o){return[]});return function(){return s.apply(this,arguments)}}()}}),yield e.world.init(),e.skySphere=new lu(e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})),e.skySphere.object3D.nativeMesh.material.side=Wo,e.skySphere.rotation=$r.fromEuler({x:Math.PI/2,y:0,z:0}),e.world.addEntity(e.skySphere),e.selectionSphere=new lu(e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new hP(16777215,2));let n=new At({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=$r.lookAt(e.renderer.camera.position,mt.add(e.renderer.camera.position,mt.Y),mt.Z),wC(e.world).pipe(Ze(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new Xre(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",movementOptions:{speed:1},ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(Ze(e.destroyed$)).subscribe(function(){var s=ht(function*(o){e.previewLoading$.next(!0),yield e.loadTerrainChunks(o?.id),yield e.loadPreview(),e.previewFamPossibleLocations[0]&&(e.previewFamLocation$.next(e.previewFamPossibleLocations[0]),yield e.onFamSelected(e.previewFamPossibleLocations[0])),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Ze(e.destroyed$),Dn(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),Gc(3e3)).subscribe(ht(function*(){e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(Ze(e.destroyed$),Gc(250)).subscribe(s=>{if(e.resource){const o=e.resource.data.road_spline[s];if(!o)return;const a={x:o.position.x,y:o.position.z,z:o.position.y};e.selectionSphere.position=a,e.renderer&&(e.renderer.position=mt.add(a,mt.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-e.resource.data.road_spline[s].orientation)),e.renderer.rotation=$r.lookAt(e.renderer.position,a,{x:0,y:0,z:1}))}e.selectedSplineItem$.next({id:Xl(e.resource.id,`road_spline/${s}`),data:e.resource.data.road_spline[s],schema:(e.resource.schema.fields||[]).find(o=>"road_spline"===o.name)?.schema.child_schema,name:""}),e.selectedAiInfoItem$.next({id:Xl(e.resource.id,`ai_info/${Math.floor(s/4)}`),data:e.resource.data.ai_info[Math.floor(s/4)],schema:(e.resource.schema.fields||[]).find(o=>"ai_info"===o.name)?.schema.child_schema,name:""}),e.selectedTerrainItem$.next({id:Xl(e.resource.id,`terrain/${Math.floor(s/4)}`),data:e.resource.data.terrain[Math.floor(s/4)],schema:(e.resource.schema.fields||[]).find(o=>"terrain"===o.name)?.schema.child_schema,name:""})})})()}onFamSelected(e){var n=this;return ht(function*(){if("custom"!=e&&n.famPath!=e){n.previewFamLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}),s=new Ob,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=Qc,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.famPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.famPath=null}finally{n.previewFamLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return ht(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}loadPreview(){var e=this;return ht(function*(){if(e.roadPath=e.resource?.data.road_spline.map(r=>({x:r.position.x,y:r.position.z,z:r.position.y})).filter((r,s)=>s%4==0).slice(0,e.resource.data.num_chunks)||null,e.isOpenedTrack=0===e.resource?.data.loop_chunk,!e.terrainChunksObjLocation||!e.roadPath)return;const n=tb.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!e.isOpenedTrack);e.unloadPreview(),e.map=new ope(n,e.famPath&&"resources/"+e.famPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=e.isOpenedTrack,e.map.loaderCursorEntity$.next(e.renderer),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return ht(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(Yc),A(Xn),A(rl))},i.\u0275cmp=it({type:i,selectors:[["app-tri-map-block-ui"]],viewQuery:function(e,n){if(1&e&&(qn(Jfe,5),qn(epe,5)),2&e){let r;St(r=Et())&&(n.previewCanvasContainer=r.first),St(r=Et())&&(n.previewCanvas=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:49,vars:43,consts:[[1,"famSelector"],["appearance","fill"],[3,"value","valueChange"],["famSelect",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],[4,"ngIf"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed"],[3,"resource","hideBlockActions"],[3,"resource","hideBlockActions","fieldWhitelist"],[3,"value"],["matInput","","type","text",3,"value"],["customFamInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(e,n){if(1&e&&($(0,"div",0)(1,"h4"),ze(2,"Preview *.FAM file"),Y(),$(3,"mat-form-field",1)(4,"mat-label"),ze(5,"Current preview FAM"),Y(),$(6,"mat-select",2,3),Ne("valueChange",function(s){return n.onFamSelected(s)}),Ht(8,"async"),Ht(9,"async"),me(10,tpe,2,2,"mat-option",4),$(11,"mat-option",5),ze(12,"custom"),Y()()(),me(13,npe,9,3,"ng-container",6),me(14,ipe,1,1,"mat-spinner",7),Ht(15,"async"),Y(),$(16,"div",8)(17,"div",9,10),Pe(19,"canvas",11,12),me(21,rpe,1,0,"mat-spinner",13),Ht(22,"async"),Y(),$(23,"div",14,10)(25,"mat-form-field",1)(26,"mat-label"),ze(27,"Spline item"),Y(),$(28,"input",15),Ne("ngModelChange",function(s){return n.selectedSplineIndex$.next(s)}),Ht(29,"async"),Ht(30,"async"),Y()(),Pe(31,"app-tri-minimap",16),Ht(32,"async"),Y()(),$(33,"h4"),ze(34,"Road spline item"),Y(),Pe(35,"app-compound-block-ui",17),Ht(36,"async"),$(37,"h4"),ze(38,"AI info (block for 4 spline items)"),Y(),Pe(39,"app-compound-block-ui",17),Ht(40,"async"),$(41,"h4"),ze(42,"Terrain (block for 4 spline items)"),Y(),Pe(43,"app-compound-block-ui",17),Ht(44,"async"),$(45,"h4"),ze(46,"Common"),Y(),Pe(47,"app-compound-block-ui",18),Ht(48,"async")),2&e){const r=Ki(7);let s;G(6),V("value",n.previewFamPossibleLocations.includes(Zt(8,20,n.previewFamLocation$))?Zt(9,22,n.previewFamLocation$):"custom"),G(4),V("ngForOf",n.previewFamPossibleLocations),G(3),V("ngIf","custom"==r.value),G(1),V("ngIf",Zt(15,24,n.previewFamLoading$)),G(7),V("ngIf",Zt(22,26,n.previewLoading$)),G(7),V("min",0)("max",4*(null==(s=Zt(29,28,n._resource$))?null:s.data.num_chunks)-1)("ngModel",Zt(30,30,n.selectedSplineIndex$)),G(3),V("roadSpline",n.roadSpline)("pointer",Zt(32,32,n.pointer$))("splineClosed",!n.isOpenedTrack),G(4),V("resource",Zt(36,34,n.selectedSplineItem$))("hideBlockActions",!0),G(4),V("resource",Zt(40,36,n.selectedAiInfoItem$))("hideBlockActions",!0),G(4),V("resource",Zt(44,38,n.selectedTerrainItem$))("hideBlockActions",!0),G(4),V("resource",Zt(48,40,n._resource$))("hideBlockActions",!0)("fieldWhitelist",Js(42,spe))}},dependencies:[_o,vi,Wl,Uh,Xc,Gh,Hh,ou,ql,Go,Kc,jM,Zy,Bm,jS,qc,Qfe,Hl],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-tri-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.famSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.famSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.famSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.famSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .famSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),i})();const LG=i=>new Promise(t=>setTimeout(t,i)),NG=(i,t,e=null)=>{const n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0}),s=i.width,o=i.height;n.width=s,n.height=o,r.drawImage(i,0,0,s,o);const a=r.getImageData(0,0,s,o);for(let l=0;l<a.data.length;l+=4)t(a.data,l);r.putImageData(a,0,0),(e||i).src=n.toDataURL("image/png"),n.remove()};class cpe{constructor(t,e,n,r){this.mesh=t,this.palette=e,this.resourceId=n,this.previewObjPath=r,this.originalTexWithTailLights=null,this.tailLightsTexColor=0,this.tyreMaterial=null,this.texWithTailLightsImg=null,this.texWithTailLights=null,this.tailLightColors=[0,0],this.tyreTextures=[],this.tyreTextureUpdateTimer=void 0,this._tailLightsOn=!1,this._speed="idle";const s=[],o=[];if(t.traverse(l=>{l instanceof Un&&((l.name.startsWith("lbl__lt_")||l.name.startsWith("lbl__rt_"))&&s.push(l),["rsid","lite"].includes(l.name)&&(o.push(l),this.originalTexWithTailLights=l.material.map))}),!this.originalTexWithTailLights)throw new Error("Not a driveable NFS1 car");this.tailLightsTexColor=e.data.colors[254]>>>8,this.tailLightColors=n.includes("TRAFFC.CFM")?[9509903,16711680]:[3212546,16258068],this.texWithTailLightsImg=document.createElement("img"),this.texWithTailLights=new xo(this.texWithTailLightsImg),Eu(this.texWithTailLights),this.recolorTailLights(this.tailLightColors[0]).then();for(const l of o)l.material.map=this.texWithTailLights;const a=new Ob;this.tyreTextures=[1,2,3,4].map(l=>a.load(r.substring(0,r.lastIndexOf("/"))+`/assets/tyr${l}.png`));for(const l of this.tyreTextures)Eu(l);this.tyreMaterial=new Yr({map:this.tyreTextures[0]}),this.tyreMaterial.transparent=!0,this.tyreMaterial.alphaTest=.5,this.tyreMaterial.map.wrapS=pr,this.tyreMaterial.map.wrapT=pr,this.tyreMaterial.polygonOffset=!0,this.tyreMaterial.polygonOffsetFactor=-4;for(const l of s)l.material=this.tyreMaterial}get tailLightsOn(){return this._tailLightsOn}set tailLightsOn(t){t!==this._tailLightsOn&&(this._tailLightsOn=t,this.recolorTailLights(this.tailLightColors[t?1:0]))}get speed(){return this._speed}set speed(t){if(t!==this._speed){switch(this._speed=t,this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),t){case"idle":this.tyreMaterial.map=this.tyreTextures[0];break;case"slow":let e=!0;this.tyreTextureUpdateTimer=setInterval(()=>{this.tyreMaterial.map=this.tyreTextures[e?1:2],this.tyreMaterial.needsUpdate=!0,e=!e},16);break;case"fast":this.tyreMaterial.map=this.tyreTextures[3]}this.tyreMaterial.needsUpdate=!0}}recolorTailLights(t){var e=this;return ht(function*(){if(e.originalTexWithTailLights&&e.texWithTailLights&&e.texWithTailLightsImg){for(let n=100;n>0&&!e.originalTexWithTailLights.source.data;n--)yield LG(50);((i,t,e,n=null)=>{const[r,s,o]=[t>>16,t>>8&255,255&t],[a,l,c]=[e>>16,e>>8&255,255&e];NG(i,(u,h)=>{u[h]==r&&u[h+1]==s&&u[h+2]==o&&(u[h]=a,u[h+1]=l,u[h+2]=c)},n)})(e.originalTexWithTailLights.source.data,e.tailLightsTexColor,t,e.texWithTailLightsImg),e.texWithTailLights.needsUpdate=!0}})()}}let dpe=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.mainService=n,this.cdr=r,this._resource$=new At(null),this.changed=new He,this.previewPaths$=new At(null),this.destroyed$=new Fe,this.customControls=[],this.serializerSettings={geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}ngAfterViewInit(){var e=this;return ht(function*(){e._resource$.pipe(Ze(e.destroyed$)).subscribe(function(){var n=ht(function*(r){e.previewPaths$.next(yield e.loadPreviewFilePaths(r?.id))});return function(r){return n.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Ze(e.destroyed$),Dn(([n,r])=>!!e.resource&&n.startsWith(e.resource.id)),Gc(1500)).subscribe(ht(function*(){e.previewPaths$.next(null),e.previewPaths$.next(yield e.postTmpUpdates(e.resource?.id))}))})()}onObjectLoaded(e){var n=this;return ht(function*(){if((n._resource$.value?.id||"").includes(".CFM__"))try{const r=n.resource?.id.split("/");r.pop(),r[r.length-1]=""+(+r[r.length-1]+1);const s=yield n.eelDelegate.retrieveValue(r.join("/")+"/data"),o=s.children_aliases.findIndex(l=>"!PAL"===l);if(-1==o)throw new Error("Not a car");const a=new cpe(e,s.children[o],n._resource$.value.id,n.previewPaths$.value[0]);n.customControls=[{title:"TNFS car features",controls:[{label:"Brake lights on",type:"checkbox",value:!1,change:l=>{a.tailLightsOn=l}},{label:"Car speed",type:"radio",options:["idle","slow","fast"],value:"idle",change:l=>{a.speed=l}}]}],n.cdr.markForCheck()}catch{}})()}postTmpUpdates(e){var n=this;return ht(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}loadPreviewFilePaths(e){var n=this;return ht(function*(){if(e){const r=yield n.eelDelegate.serializeResource(e,n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(Yc),A(rl),A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-orip-geometry-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:7,consts:[[3,"paths","customControls","onObjectLoaded"],[3,"resource"]],template:function(e,n){1&e&&($(0,"app-obj-viewer",0),Ne("onObjectLoaded",function(s){return n.onObjectLoaded(s)}),Ht(1,"async"),Y(),Pe(2,"app-compound-block-ui",1),Ht(3,"async")),2&e&&(V("paths",Zt(1,3,n.previewPaths$))("customControls",n.customControls),G(2),V("resource",Zt(3,5,n._resource$)))},dependencies:[qc,FG,Hl],changeDetection:0}),i})();const upe=["class","block-ui"];function hpe(i,t){if(1&i&&($(0,"mat-label",7),ze(1),Y()),2&i){const e=pe(2);V("matTooltip",e.resourceDescription),G(1),Qi("",null==e.resource?null:e.resource.name," ")}}function fpe(i,t){if(1&i&&($(0,"mat-option",8),ze(1),Y()),2&i){const e=t.$implicit,n=t.index,r=pe(2);V("value",n)("disabled",r.disabled),G(1),Qi(" ",e.block_class_mro.split("__")[0]," ")}}function ppe(i,t){if(1&i){const e=oi();os(0),me(1,hpe,2,2,"mat-label",1),Ht(2,"async"),$(3,"div",2)(4,"mat-label"),ze(5,"Resource type:"),Y(),$(6,"mat-select",3),Ne("selectionChange",function(r){return an(e),ln(pe().setChoiceIndex(r.value))}),me(7,fpe,2,3,"mat-option",4),Y(),Pe(8,"app-block-actions",5),Y(),Pe(9,"app-editor",6),as()}if(2&i){const e=pe();let n;G(1),V("ngIf",(null==e.resource?null:e.resource.name)&&(null==e.resource?null:e.resource.name)!=(null==(n=Zt(2,8,e.main.resource$))?null:n.name)),G(5),V("value",e.resourceData.choice_index)("disabled",e.disabled),G(1),V("ngForOf",e.resource.schema.possible_resource_schemas),G(1),V("resource",e.childResource),G(1),V("resource",e.childResource)("hideBlockActions",!0)("disabled",e.disabled)}}let BG=(()=>{class i{constructor(e){this.main=e,this._resource=null,this.resourceDescription="",this.hideBlockActions=!1,this.disabled=!1,this.childResource=null,this.choiceDataCaches=[],this.changed=new He}get resource(){return this._resource}set resource(e){const n=!this._resource||!e||this._resource.id!==e.id;this._resource=e,n&&(this.choiceDataCaches=new Array(this._resource?.schema.possible_resource_schemas||0).fill(null),this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this._resource.data.data)),this.updateChild()}get resourceData(){return this._resource?.data||null}setChoiceIndex(e){this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this.childResource.data,this._resource.data.choice_index=e,this._resource.data.data=this.choiceDataCaches[e],this.updateChild(),this.changed.emit())}updateChild(){this.childResource=this._resource?{...this._resource,id:Xl(this._resource.id,"data"),data:this.choiceDataCaches[this._resource.data.choice_index],name:"",schema:this._resource.schema.possible_resource_schemas[this._resource.data.choice_index]}:null}}return i.\u0275fac=function(e){return new(e||i)(A(rl))},i.\u0275cmp=it({type:i,selectors:[["app-delegate",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled"},outputs:{changed:"changed"},attrs:upe,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["id","resource-type-container"],[3,"value","disabled","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"resource"],[3,"resource","hideBlockActions","disabled"],["matTooltipPosition","above",3,"matTooltip"],[3,"value","disabled"]],template:function(e,n){1&e&&me(0,ppe,10,10,"ng-container",0),2&e&&V("ngIf",n.resourceData)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;row-gap:1rem}#resource-type-container[_ngcontent-%COMP%]{display:flex;column-gap:.5rem;align-items:center}#resource-type-container[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{flex-shrink:0}"],changeDetection:0}),i})();const mpe=["class","block-ui"];function gpe(i,t){if(1&i&&($(0,"mat-label",7),ze(1),Y()),2&i){const e=pe(2);V("matTooltip",e.resourceDescription),G(1),Qi(" ",e.resource.name," ")}}function _pe(i,t){if(1&i){const e=oi();os(0),me(1,gpe,2,2,"mat-label",1),$(2,"mat-selection-list",2),Ne("selectionChange",function(r){return an(e),ln(pe().onSelection(r))}),$(3,"mat-list-option",3),ze(4," Left "),Y(),$(5,"mat-list-option",4),ze(6," Right "),Y()(),$(7,"mat-form-field",5)(8,"mat-label"),ze(9,"Texture ID"),Y(),$(10,"input",6),Ne("ngModelChange",function(r){return an(e),ln(pe().resource.data.texture_id=r)})("change",function(){return an(e),ln(pe().changed.emit())}),Y()(),as()}if(2&i){const e=pe();G(1),V("ngIf",e.resource.name),G(2),V("selected",e.resource.data.has_left_fence),G(2),V("selected",e.resource.data.has_right_fence),G(5),V("max",63)("min",0)("step",1)("ngModel",e.resource.data.texture_id)}}let vpe=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.changed=new He}onSelection(e){for(const n of e.options)this.resource.data[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-fence-type",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},attrs:mpe,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"selectionChange"],["value","has_left_fence",3,"selected"],["value","has_right_fence",3,"selected"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","ngModel","ngModelChange","change"],["matTooltipPosition","above",3,"matTooltip"]],template:function(e,n){1&e&&me(0,_pe,11,7,"ng-container",0),2&e&&V("ngIf",n.resource)},dependencies:[vi,Wl,Uh,Xc,Gh,Hh,ou,ql,Go,Kc,Ms,xC,bC],changeDetection:0}),i})(),ype=(()=>{class i{constructor(){this._resource=null,this.resourceMap={},this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!n)return;let r=this.resourceData.items_descr.map((s,o)=>[s,o]).filter(([s,o])=>s>0).map(([s,o])=>o);for(let s=0;s<this.resourceData.children.length;s++)this.resourceMap["0x"+r[s].toString(16)]={id:Xl(this._resource?.id||"",`children/${s}`),data:this.resourceData.children[s],schema:n,name:""}}get resourceData(){return this._resource?.data}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-soundbank-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(e,n){1&e&&Pe(0,"app-sidenav-res-list",0),2&e&&V("resources",n.resourceMap)},dependencies:[yC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0}),i})();const bpe=["class","dialog"];function xpe(i,t){if(1&i&&($(0,"mat-form-field",7)(1,"mat-label"),ze(2),Y(),Pe(3,"input",8),Y()),2&i){const e=t.$implicit;G(2),ci(e.title),G(1),V("id",e.id)("type",e.type)("formControlName",e.id)}}let wpe=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this.fb=n,this.data=r;const s={};for(const o of r.args)s[o.id]=["",sl.required];this.argsForm=this.fb.group(s)}submit(){const e=this.argsForm.value;for(const n of this.data.args)"number"==n.type&&(e[n.id]=+e[n.id]);this.dialogRef.close(e)}}return i.\u0275fac=function(e){return new(e||i)(A(zy),A(Vee),A($I))},i.\u0275cmp=it({type:i,selectors:[["app-run-custom-action",8,"dialog"]],attrs:bpe,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(e,n){1&e&&($(0,"h1",0),ze(1),Y(),$(2,"div",1)(3,"p"),ze(4),Y()(),$(5,"form",2),me(6,xpe,4,4,"mat-form-field",3),Y(),$(7,"div",4)(8,"button",5),Ne("click",function(){return n.dialogRef.close()}),ze(9,"Cancel"),Y(),$(10,"button",6),Ne("click",function(){return n.submit()}),ze(11,"Run"),Y()()),2&e&&(G(1),Qi('Run action "',n.data.title,'"'),G(3),ci(n.data.description),G(1),V("formGroup",n.argsForm),G(1),V("ngForOf",n.data.args),G(4),V("disabled",n.argsForm.invalid))},dependencies:[_o,pR,Wl,Xc,rR,ql,Go,Kc,jM,gU,_U,vU,Vh,uC],styles:["form[_ngcontent-%COMP%]{padding:0 24px}"]}),i})();function UG(i,t){return t?e=>dy(t.pipe(Di(1),function Mpe(){return zn((i,t)=>{i.subscribe(Fn(t,hs))})}()),e.pipe(UG(i))):qi((e,n)=>sr(i(e,n)).pipe(Di(1),XN(e)))}function VG(i,t=Ty){const e=TM(i,t);return UG(()=>e)}const Cpe=["mat-menu-item",""];function Spe(i,t){1&i&&(Lr(),$(0,"svg",3),Pe(1,"polygon",4),Y())}const Epe=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Ape=["mat-icon, [matMenuItemIcon]","*"];function Dpe(i,t){if(1&i){const e=oi();$(0,"div",0),Ne("keydown",function(r){return an(e),ln(pe()._handleKeydown(r))})("click",function(){return an(e),ln(pe().closed.emit("click"))})("@transformMenu.start",function(r){return an(e),ln(pe()._onAnimationStart(r))})("@transformMenu.done",function(r){return an(e),ln(pe()._onAnimationDone(r))}),$(1,"div",1),Bt(2),Y()()}if(2&i){const e=pe();V("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),yt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const Tpe=["*"],AP=new fe("MAT_MENU_PANEL"),Ipe=$M(GM(class{}));let YS=(()=>{class i extends Ipe{constructor(e,n,r,s,o){super(),this._elementRef=e,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Fe,this._focused=new Fe,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),n=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(Ut),A(Wc),A(AP,8),A(Xn))},i.\u0275cmp=it({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,n){1&e&&Ne("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&e&&(yt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),nn("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[rt],attrs:Cpe,ngContentSelectors:Ape,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){1&e&&(Zi(Epe),Bt(0),$(1,"span",0),Bt(2,1),Y(),Pe(3,"div",1),me(4,Spe,2,0,"svg",2)),2&e&&(G(3),V("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),G(1),V("ngIf",n._triggersSubmenu))},dependencies:[vi,Fh],encapsulation:2,changeDetection:0}),i})();const Rpe=new fe("MatMenuContent"),qS={transformMenu:Sa("transformMenu",[ws("void",Kn({opacity:0,transform:"scale(0.8)"})),Dr("void => enter",Hr("120ms cubic-bezier(0, 0, 0.2, 1)",Kn({opacity:1,transform:"scale(1)"}))),Dr("* => void",Hr("100ms 25ms linear",Kn({opacity:0})))]),fadeInItems:Sa("fadeInItems",[ws("showing",Kn({opacity:1})),Dr("void => *",[Kn({opacity:0}),Hr("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let kpe=0;const zG=new fe("mat-menu-default-options",{providedIn:"root",factory:function Ppe(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Nb=(()=>{class i{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=Yt(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=Yt(e)}set panelClass(e){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,n,r,s){this._elementRef=e,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new lm,this._classList={},this._panelAnimationState="void",this._animationDone=new Fe,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new He,this.close=this.closed,this.panelId="mat-menu-panel-"+kpe++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new O3(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Uo(this._directDescendantItems),bs(e=>or(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=e.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Uo(this._directDescendantItems),bs(n=>or(...n.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,r=this._keyManager;switch(n){case 27:Ho(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Di(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const n=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===e,r["mat-menu-after"]="after"===e,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Uo(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at),A(zG),A(Xn))},i.\u0275dir=xe({type:i,contentQueries:function(e,n,r){if(1&e&&(Ni(r,Rpe,5),Ni(r,YS,5),Ni(r,YS,4)),2&e){let s;St(s=Et())&&(n.lazyContent=s.first),St(s=Et())&&(n._allItems=s),St(s=Et())&&(n.items=s)}},viewQuery:function(e,n){if(1&e&&qn(mo,5),2&e){let r;St(r=Et())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),Ope=(()=>{class i extends Nb{constructor(e,n,r,s){super(e,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return i.\u0275fac=function(e){return new(e||i)(A(ct),A(at),A(zG),A(Xn))},i.\u0275cmp=it({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,n){2&e&&yt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Sn([{provide:AP,useExisting:i}]),rt],ngContentSelectors:Tpe,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,n){1&e&&(Zi(),me(0,Dpe,3,6,"ng-template"))},dependencies:[pm],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[qS.transformMenu,qS.fadeInItems]},changeDetection:0}),i})();const HG=new fe("mat-menu-scroll-strategy"),Lpe={provide:HG,deps:[cs],useFactory:function Fpe(i){return()=>i.scrollStrategies.reposition()}},GG=Ih({passive:!0});let Npe=(()=>{class i{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,n,r,s,o,a,l,c,u){this._overlay=e,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=u,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=$t.EMPTY,this._hoverSubscription=$t.EMPTY,this._menuCloseSubscription=$t.EMPTY,this._changeDetectorRef=Nt(Xn),this._handleTouchStart=h=>{kI(h)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new He,this.onMenuOpen=this.menuOpened,this.menuClosed=new He,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Nb?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,GG)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,GG),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const n=this._createOverlay(e),r=n.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,n.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Nb&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Ze(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Nb?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Dn(r=>"void"===r.toState),Di(1),Ze(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let n=0,r=e.parentMenu;for(;r;)n++,r=r.parentMenu;e.setElevation(n)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const n=this._getOverlayConfig(e);this._subscribeToPositions(e,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Pm({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,n){e.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,o)):e.setPositionClasses(s,o)})}_setPosition(e,n){let[r,s]="before"===e.xPosition?["end","start"]:["start","end"],[o,a]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[u,h]=[r,s],p=0;if(this.triggersSubmenu()){if(h=r="before"===e.xPosition?"start":"end",s=u="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:u,overlayY:o,offsetY:p},{originX:s,originY:l,overlayX:h,overlayY:o,offsetY:p},{originX:r,originY:c,overlayX:u,overlayY:a,offsetY:-p},{originX:s,originY:c,overlayX:h,overlayY:a,offsetY:-p}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return or(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:st(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Dn(o=>o!==this._menuItemInstance),Dn(()=>this._menuOpen)):st(),n)}_handleMousedown(e){RI(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Dn(e=>e===this._menuItemInstance&&!e.disabled),VG(0,vI)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Nb&&this.menu._isAnimating?this.menu._animationDone.pipe(Di(1),VG(0,vI),Ze(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Am(e.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(e){return new(e||i)(A(cs),A(ct),A(zr),A(HG),A(AP,8),A(YS,10),A(Ca,8),A(Wc),A(at))},i.\u0275dir=xe({type:i,hostVars:3,hostBindings:function(e,n){1&e&&Ne("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&e&&yt("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),Bpe=(()=>{class i extends Npe{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=pi(i)))(n||i)}}(),i.\u0275dir=xe({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[rt]}),i})(),Upe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[Lpe],imports:[vo,Uy,$n,Om,Oy,$n]}),i})();function Vpe(i,t){if(1&i){const e=oi();$(0,"button",7),Ne("click",function(){return an(e),ln(pe(2).deserialize())}),Pe(1,"mat-icon",8),Y()}}function zpe(i,t){if(1&i){const e=oi();os(0),me(1,Vpe,2,0,"button",4),$(2,"button",5),Ne("click",function(){return an(e),ln(pe().serializeBlockReversible())}),Pe(3,"mat-icon",6),Y(),as()}if(2&i){const e=pe();G(1),V("ngIf",e.isInReversibleSerializationState),G(1),V("disabled",e.isInReversibleSerializationState)}}function Hpe(i,t){1&i&&($(0,"button",9),Pe(1,"mat-icon",10),Y()),2&i&&(pe(),V("matMenuTriggerFor",Ki(3)))}function Gpe(i,t){if(1&i){const e=oi();$(0,"button",11),Ne("click",function(){const s=an(e).$implicit;return ln(pe().runCustomAction(s))}),$(1,"span"),ze(2),Y()()}if(2&i){const e=t.$implicit;G(2),ci(e.title)}}const $pe=function(){return[]};let XS=(()=>{class i{constructor(e,n,r,s,o){this.mainService=e,this.eelDelegate=n,this.cdr=r,this.dialog=s,this.snackBar=o,this.resource=null,this.isInReversibleSerializationState=!1}serializeBlockReversible(){var e=this;return ht(function*(){if(!e.resource)return;const[n,r]=yield e.eelDelegate.serializeReversible(e.resource.id,[]),s=n.reduce((o,a)=>{let l=0;for(;l<o.length&&l<a.length&&o[l]===a[l];)l++;return o.substring(0,l)});yield e.eelDelegate.openFileWithSystemApp(s),e.isInReversibleSerializationState=r,e.cdr.markForCheck()})()}deserialize(){var e=this;return ht(function*(){e.resource&&(yield e.mainService.deserializeResource(e.resource.id),e.isInReversibleSerializationState=!1,e.cdr.markForCheck())})()}runCustomAction(e){var n=this;return ht(function*(){if(n.mainService.hasUnsavedChanges){let o=n.dialog.open(AU,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield jI(o.afterClosed())))return;try{yield n.mainService.saveResource(),n.snackBar.open("File Saved!","OK",{duration:1500})}catch(a){n.snackBar.open("Error while saving file! "+a.errorText,"OK :(",{duration:5e3})}}let r=n.dialog.open(wpe,{data:e});const s=yield jI(r.afterClosed());if(s)try{yield n.mainService.runCustomAction(n.resource.id,e,s),n.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){n.mainService.clearUnsavedChanges(),n.mainService.reloadResource().then(()=>n.cdr.markForCheck()),n.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}}return i.\u0275fac=function(e){return new(e||i)(A(rl),A(Yc),A(Xn),A(Um),A(PU))},i.\u0275cmp=it({type:i,selectors:[["app-block-actions"]],inputs:{resource:"resource"},decls:5,vars:4,consts:[[4,"ngIf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(e,n){1&e&&(me(0,zpe,4,2,"ng-container",0),me(1,Hpe,2,1,"button",1),$(2,"mat-menu",null,2),me(4,Gpe,3,1,"button",3),Y()),2&e&&(V("ngIf",null==n.resource||null==n.resource.schema?null:n.resource.schema.serializable_to_disc),G(1),V("ngIf",(null==n.resource||null==n.resource.schema.custom_actions?null:n.resource.schema.custom_actions.length)>0),G(3),V("ngForOf",(null==n.resource?null:n.resource.schema.custom_actions)||Js(3,$pe)))},dependencies:[_o,vi,Ms,YM,eR,Ope,YS,Bpe],styles:["[_nghost-%COMP%]{display:flex}"]}),i})();const Wpe=["class","block-ui"];function jpe(i,t){if(1&i&&($(0,"mat-label",7),ze(1),Y()),2&i){const e=pe();V("matTooltip",e.resourceDescription),G(1),Qi("",null==e.resource?null:e.resource.name," ")}}function Ype(i,t){if(1&i&&($(0,"audio",8),Pe(1,"source",9),Ht(2,"async"),ze(3," Your browser does not support the audio element. "),Y()),2&i){const e=pe();G(1),V("src",Zt(2,1,e.audioUrl$),Op)}}function qpe(i,t){1&i&&Pe(0,"mat-spinner",10)}function Xpe(i,t){1&i&&Pe(0,"app-block-actions",11),2&i&&V("resource",pe().resource)}const Kpe=function(){return["wave_data"]};let Zpe=(()=>{class i{constructor(e,n){this.eelDelegate=e,this.main=n,this._resource$=new At(null),this.audioUrl$=new At(null),this.resourceDescription="",this.hideBlockActions=!1,this.destroyed$=new Fe,this.changed=new He}set resource(e){this._resource$.next(e)}get resource(){return this._resource$.getValue()}ngAfterViewInit(){var e=this;return ht(function*(){e._resource$.pipe(Ze(e.destroyed$)).subscribe(function(){var n=ht(function*(r){if(e.audioUrl$.next(null),r){const s=yield e.eelDelegate.serializeResource(r.id,{audio__save_car_sfx_loops:!1});e.audioUrl$.next(s.find(o=>o.endsWith(".mp3"))||null)}});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(Yc),A(rl))},i.\u0275cmp=it({type:i,selectors:[["app-eacs-audio",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions"},outputs:{changed:"changed"},attrs:Wpe,decls:11,vars:16,consts:[["id","header"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["controls","",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"flex-spacer"],[3,"resource",4,"ngIf"],[3,"resource","hideBlockActions","fieldBlacklist"],["matTooltipPosition","above",3,"matTooltip"],["controls",""],[3,"src"],["mode","indeterminate"],[3,"resource"]],template:function(e,n){if(1&e&&($(0,"div",0),me(1,jpe,2,2,"mat-label",1),Ht(2,"async"),me(3,Ype,4,3,"audio",2),Ht(4,"async"),me(5,qpe,1,0,"mat-spinner",3),Ht(6,"async"),Pe(7,"div",4),me(8,Xpe,1,1,"app-block-actions",5),Y(),Pe(9,"app-compound-block-ui",6),Ht(10,"async")),2&e){let r;G(1),V("ngIf",(null==n.resource?null:n.resource.name)&&(null==n.resource?null:n.resource.name)!=(null==(r=Zt(2,7,n.main.resource$))?null:r.name)),G(2),V("ngIf",Zt(4,9,n.audioUrl$)),G(2),V("ngIf",n.resource&&!Zt(6,11,n.audioUrl$)),G(3),V("ngIf",!n.hideBlockActions),G(1),V("resource",Zt(10,13,n._resource$))("hideBlockActions",!0)("fieldBlacklist",Js(15,Kpe))}},dependencies:[vi,Go,Ms,jS,qc,XS,Hl],styles:["#header[_ngcontent-%COMP%]{display:flex}"]}),i})();class Qpe{constructor(t){this.mesh=t,this.textures=[],this._color=65280;let e=new Set;t.traverse(n=>{if(!(n instanceof Un))return;const r=n.material.map;r&&e.add(r)}),this.textures=Array.from(e).map(n=>{const r=new xo(document.createElement("img"));return Eu(r),[n,r]}),t.traverse(n=>{if(!(n instanceof Un))return;const r=n.material.map;if(r){const s=this.textures.find(([o,a])=>o===r);s&&(n.material.map=s[1])}}),this.color=65280,this.recolorCar().then()}get color(){return this._color}set color(t){t!==this._color&&(this._color=t,this.recolorCar().then())}recolorCar(){var t=this;return ht(function*(){const[e,n,r]=[t.color>>16,t.color>>8&255,255&t.color];for(const[s,o]of t.textures){for(let a=100;a>0&&!s.source.data;a--)yield LG(50);NG(s.source.data,(a,l)=>{if(0==a[l]&&0==a[l+2]){const c=a[l+1];a[l]=Math.round(e*c/255),a[l+1]=Math.round(n*c/255),a[l+2]=Math.round(r*c/255)}},o.source.data),o.needsUpdate=!0}})()}}const Jpe=["class","block-ui"];let eme=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.mainService=n,this.cdr=r,this._resource$=new At(null),this.changed=new He,this.customControls=[],this.previewPaths$=new At(null),this.destroyed$=new Fe,this.serializerSettings={geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}ngAfterViewInit(){var e=this;return ht(function*(){e._resource$.pipe(Ze(e.destroyed$)).subscribe(function(){var n=ht(function*(r){e.previewPaths$.next(yield e.loadPreviewFilePaths(r?.id))});return function(r){return n.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Ze(e.destroyed$),Dn(([n,r])=>!!e.resource&&n.startsWith(e.resource.id)),Gc(1500)).subscribe(ht(function*(){e.previewPaths$.next(null),e.previewPaths$.next(yield e.postTmpUpdates(e.resource?.id))}))})()}onObjectLoaded(e){var n=this;return ht(function*(){try{const r=new Qpe(e);let s=null;const o=a=>{s&&clearTimeout(s),s=setTimeout(()=>r.color=a,50)};n.customControls=[{title:"NFS2 car features",controls:[{label:"Car color",type:"color",value:65280,change:a=>o(a)}]}],n.cdr.markForCheck()}catch(r){console.error(r)}})()}postTmpUpdates(e){var n=this;return ht(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}loadPreviewFilePaths(e){var n=this;return ht(function*(){if(e){const r=yield n.eelDelegate.serializeResource(e,n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}previewObjectGroupFunc(e){return e.startsWith("part_hp")?"High-poly":e.startsWith("part_mp")?"Medium-poly":e.startsWith("part_lp")?"Low-poly":e.startsWith("part_res")?"Reserved":e}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(A(Yc),A(rl),A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-geo-geometry",8,"block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},attrs:Jpe,decls:4,vars:8,consts:[[3,"paths","groupFunction","customControls","onObjectLoaded"],[3,"resource"]],template:function(e,n){1&e&&($(0,"app-obj-viewer",0),Ne("onObjectLoaded",function(s){return n.onObjectLoaded(s)}),Ht(1,"async"),Y(),Pe(2,"app-compound-block-ui",1),Ht(3,"async")),2&e&&(V("paths",Zt(1,4,n.previewPaths$))("groupFunction",n.previewObjectGroupFunc)("customControls",n.customControls),G(2),V("resource",Zt(3,6,n._resource$)))},dependencies:[qc,FG,Hl],changeDetection:0}),i})();const tme=function(){return["children","items_descr"]};let nme=(()=>{class i{constructor(){this._resource=null,this.hideBlockActions=!1,this.resourceMap={},this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!n)return;let r=0;for(const[s,o]of this.resourceData.children_aliases.entries()){let a=o||"__"+r++;this.resourceMap[a]={id:Xl(this._resource?.id||"",`children/${s}`),data:this.resourceData?.children[s],schema:n,name:""}}}get resourceData(){return this._resource?.data}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=it({type:i,selectors:[["app-base-archive-block-ui"]],inputs:{resource:"resource",hideBlockActions:"hideBlockActions"},outputs:{changed:"changed"},decls:2,vars:5,consts:[[3,"resource","hideBlockActions","fieldBlacklist"],[3,"resources"]],template:function(e,n){1&e&&Pe(0,"app-compound-block-ui",0)(1,"app-sidenav-res-list",1),2&e&&(V("resource",n.resource)("hideBlockActions",n.hideBlockActions)("fieldBlacklist",Js(4,tme)),G(1),V("resources",n.resourceMap))},dependencies:[qc,yC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 16px}"],changeDetection:0}),i})();function ime(i,t){if(1&i&&($(0,"mat-error"),ze(1),Y()),2&i){const e=pe(2);G(1),im(" ",e.resourceError.data.error_class,": ",e.resourceError.data.error_text," ")}}function rme(i,t){1&i&&Pe(0,"mat-spinner",5)}function sme(i,t){if(1&i&&($(0,"div",2),me(1,ime,2,2,"mat-error",3),me(2,rme,1,0,"mat-spinner",4),Y()),2&i){const e=pe();G(1),V("ngIf",e.resourceError),G(1),V("ngIf",!e.resourceError)}}function ome(i,t){}let Bb=(()=>{class i{constructor(e){this.mainService=e,this._component=null,this._componentChangedSub=null,this.destroyed$=new Fe,this.resourceSet$=new Fe,this._resource=null,this._resourceError=null,this._resourceDescription="",this._hideBlockActions=!1,this._disabled=!1}get resource(){return this._resource}get resourceError(){return this._resourceError}set resourceDescription(e){this._resourceDescription=e,this._component&&(this._component.instance.resourceDescription=e)}set hideBlockActions(e){this._hideBlockActions=e,this._component&&(this._component.instance.hideBlockActions=e)}set disabled(e){this._disabled=e,this._component&&(this._component.instance.disabled=e)}set resource(e){if(this.resourceSet$.next(),e?e.data?.error_class?(this._resourceError=e,this._resource=null):(this._resource=e,this._resourceError=null):(this._resource=null,this._resourceError=null),this.dataBlockUiHost.viewContainerRef.clear(),this._resource&&this._resource.schema.block_class_mro){{let r;for(const s of this._resource.schema.block_class_mro.split("__"))if(r=i.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+this._resource.schema.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._componentChangedSub=this._component.instance.changed.pipe(Ze(this.destroyed$),Ze(this.resourceSet$)).subscribe(()=>{const s=this._resource.id,o=this._resource.data;if(o instanceof Array)for(let a=0;a<o.length;a++)this.mainService.dataBlockChange$.next([Xl(s,a),o[a]]);else if((0,YI.isObject)(o))for(const a in o)this.mainService.dataBlockChange$.next([Xl(s,a),o[a]]);else this.mainService.dataBlockChange$.next([s,o])})}this._component.instance.resource=this._resource,this._component.instance.resourceDescription=this._resourceDescription,this._component.instance.hideBlockActions=this._hideBlockActions,this._component.instance.disabled=this._disabled}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.DATA_BLOCK_COMPONENTS_MAP={ArrayBlock:SR,SubByteArrayBlock:SR,BitFlagsBlock:Tre,BytesBlock:bie,CompoundBlock:qc,DataBlock:BJ,DelegateBlock:BG,EnumByteBlock:Zie,IntegerBlock:Dte,UTF8Block:vz,NullTerminatedUTF8Block:vz,AngleBlock:Cie,AnyBitmapBlock:Kte,BasePalette:vie,OripGeometry:dpe,GeoGeometry:eme,BaseArchiveBlock:nme,TriMap:ape,WwwwBlock:Aie,FenceType:vpe,SoundBank:ype,EacsAudioFile:Zpe},i.\u0275fac=function(e){return new(e||i)(A(rl))},i.\u0275cmp=it({type:i,selectors:[["app-editor"]],viewQuery:function(e,n){if(1&e&&qn(rV,7),2&e){let r;St(r=Et())&&(n.dataBlockUiHost=r.first)}},inputs:{resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled",resource:"resource"},decls:2,vars:1,consts:[["id","error-spinner-wrapper",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,n){1&e&&(me(0,sme,3,2,"div",0),me(1,ome,0,0,"ng-template",1)),2&e&&V("ngIf",!n.resource||n.resourceError)},dependencies:[vi,hte,jS,rV],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0}),i})();function ame(i,t){1&i&&Pe(0,"mat-icon",17)}function lme(i,t){1&i&&Pe(0,"mat-icon",18)}let cme=(()=>{class i{constructor(e,n,r,s,o){this.eelDelegate=e,this.mainService=n,this.dialog=r,this.snackBar=s,this.cdr=o}saveResource(){var e=this;return ht(function*(){try{yield e.mainService.saveResource(),e.snackBar.open("File Saved!","OK",{duration:1500})}catch(n){e.snackBar.open("Error while saving file! "+n.errorText,"OK :(",{duration:5e3})}})()}toggleUnknownsVisibility(){this.mainService.hideHiddenFields$.next(!this.mainService.hideHiddenFields$.getValue())}reloadResource(){var e=this;return ht(function*(){if(e.mainService.hasUnsavedChanges){let n=e.dialog.open(AU,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield jI(n.afterClosed())))return}yield e.mainService.reloadResource(),e.cdr.markForCheck()})()}}return i.\u0275fac=function(e){return new(e||i)(A(Yc),A(rl),A(Um),A(PU),A(Xn))},i.\u0275cmp=it({type:i,selectors:[["app-root"]],decls:32,vars:31,consts:[["color","primary"],[1,"flex-spacer"],["mat-icon-button","","matTooltip","Show/hide hidden fields",3,"click"],["fontIcon","visibility_off",4,"ngIf"],["fontIcon","visibility_on",4,"ngIf"],["vertical",""],[3,"resource"],["mat-icon-button","","matTooltip","Reload file from disk",3,"disabled","click"],["fontIcon","refresh"],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[1,"scroll-bounds-snapper"],[3,"resource","hideBlockActions"],["id","bmac"],["href","https://www.buymeacoffee.com/andygura","target","_blank"],["src","https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png","alt","Buy Me A Coffee",2,"height","60px !important","width","217px !important"],["fontIcon","visibility_off"],["fontIcon","visibility_on"]],template:function(e,n){if(1&e&&($(0,"mat-toolbar",0)(1,"span"),ze(2),Ht(3,"async"),Ht(4,"async"),Y(),Pe(5,"span",1),$(6,"button",2),Ne("click",function(){return n.toggleUnknownsVisibility()}),me(7,ame,1,0,"mat-icon",3),Ht(8,"async"),me(9,lme,1,0,"mat-icon",4),Ht(10,"async"),Y(),Pe(11,"mat-divider",5)(12,"app-block-actions",6),Ht(13,"async"),$(14,"button",7),Ne("click",function(){return n.reloadResource()}),Ht(15,"async"),Pe(16,"mat-icon",8),Y(),Pe(17,"mat-divider",5),$(18,"button",9),Ne("click",function(){return n.saveResource()}),Ht(19,"async"),Ht(20,"async"),Pe(21,"mat-icon",10),Y()(),$(22,"div",11),Pe(23,"div",12)(24,"app-editor",13),Ht(25,"async"),Ht(26,"async"),Ht(27,"async"),$(28,"div",14)(29,"a",15),Pe(30,"img",16),Y()(),Pe(31,"div",12),Y()),2&e){let r;G(2),im("",(null==(r=Zt(3,9,n.mainService.resource$))?null:r.name)||"...","",Zt(4,11,n.mainService.hasUnsavedChanges$)?"*":"",""),G(5),V("ngIf",Zt(8,13,n.mainService.hideHiddenFields$)),G(2),V("ngIf",!Zt(10,15,n.mainService.hideHiddenFields$)),G(3),V("resource",Zt(13,17,n.mainService.resource$)),G(2),V("disabled",!Zt(15,19,n.mainService.eelDelegate.openedResourcePath$)),G(4),V("disabled",!Zt(19,21,n.mainService.resource$)||!Zt(20,23,n.mainService.hasUnsavedChanges$)),G(6),V("resource",Zt(25,25,n.mainService.customActionRunning$)?null:Zt(26,27,n.mainService.resource$)||Zt(27,29,n.mainService.error$))("hideBlockActions",!0)}},dependencies:[vi,$Q,jQ,Ms,YM,eR,Bb,XS,Hl],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}#content-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem;height:100%;scroll-snap-type:y proximity}#content-wrapper[_ngcontent-%COMP%]   .scroll-bounds-snapper[_ngcontent-%COMP%]{height:0;width:100%;scroll-snap-align:start;scroll-margin:1rem}#bmac[_ngcontent-%COMP%]{text-align:end;margin-top:1rem}mat-divider[_ngcontent-%COMP%]{height:100%;margin:0 16px}"],changeDetection:0}),i})();function $G(i){return new he(3e3,!1)}function $me(){return typeof window<"u"&&typeof window.document<"u"}function DP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Au(i){switch(i.length){case 0:return new Vy;case 1:return i[0];default:return new cU(i)}}function WG(i,t,e,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(u=>{const h=u.get("offset"),p=h==l,m=p&&c||new Map;u.forEach((g,b)=>{let v=b,y=g;if("offset"!==b)switch(v=t.normalizePropertyName(v,o),y){case HI:y=r.get(b);break;case jc:y=s.get(b);break;default:y=t.normalizeStyleValue(b,v,y,o)}m.set(v,y)}),p||a.push(m),c=m,l=h}),o.length)throw function kme(i){return new he(3502,!1)}();return a}function TP(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&IP(e,"start",i)));break;case"done":i.onDone(()=>n(e&&IP(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&IP(e,"destroy",i)))}}function IP(i,t,e){const s=RP(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function RP(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Ko(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function jG(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let kP=(i,t)=>!1,YG=(i,t,e)=>[],qG=null;function PP(i){const t=i.parentNode||i.host;return t===qG?null:t}(DP()||typeof Element<"u")&&($me()?(qG=(()=>document.documentElement)(),kP=(i,t)=>{for(;t;){if(t===i)return!0;t=PP(t)}return!1}):kP=(i,t)=>i.contains(t),YG=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let If=null,XG=!1;const KG=kP,ZG=YG;let QG=(()=>{class i{validateStyleProperty(e){return function jme(i){If||(If=function Yme(){return typeof document<"u"?document.body:null}()||{},XG=!!If.style&&"WebkitAppearance"in If.style);let t=!0;return If.style&&!function Wme(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in If.style,!t&&XG&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in If.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return KG(e,n)}getParentElement(e){return PP(e)}query(e,n,r){return ZG(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],l){return new Vy(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})(),OP=(()=>{class i{}return i.NOOP=new QG,i})();const qme=1e3,FP="ng-enter",KS="ng-leave",ZS="ng-trigger",QS=".ng-trigger",e8="ng-animating",LP=".ng-animating";function dd(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:NP(parseFloat(t[1]),t[2])}function NP(i,t){return"s"===t?i*qme:i}function JS(i,t,e){return i.hasOwnProperty("duration")?i:function Kme(i,t,e){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push($G()),{duration:0,delay:0,easing:""};r=NP(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=NP(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function dme(){return new he(3100,!1)}()),a=!0),s<0&&(t.push(function ume(){return new he(3101,!1)}()),a=!0),a&&t.splice(l,0,$G())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Ub(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function t8(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function Du(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function i8(i,t,e){return e?t+":"+e+";":""}function r8(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=i8(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=i8(0,ege(e),i.style[e]));i.setAttribute("style",t)}function ic(i,t,e){i.style&&(t.forEach((n,r)=>{const s=UP(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),DP()&&r8(i))}function Rf(i,t){i.style&&(t.forEach((e,n)=>{const r=UP(n);i.style[r]=""}),DP()&&r8(i))}function Vb(i){return Array.isArray(i)?1==i.length?i[0]:oU(i):i}const BP=new RegExp("{{\\s*(.+?)\\s*}}","g");function s8(i){let t=[];if("string"==typeof i){let e;for(;e=BP.exec(i);)t.push(e[1]);BP.lastIndex=0}return t}function zb(i,t,e){const n=i.toString(),r=n.replace(BP,(s,o)=>{let a=t[o];return null==a&&(e.push(function fme(i){return new he(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function eE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const Jme=/-+([a-z0-9])/g;function UP(i){return i.replace(Jme,(...t)=>t[1].toUpperCase())}function ege(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Zo(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function pme(i){return new he(3004,!1)}()}}function o8(i,t){return window.getComputedStyle(i)[t]}const iE="*";function oge(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function age(i,t,e){if(":"==i[0]){const l=function lge(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function Dme(i){return new he(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function Ame(i){return new he(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(a8(r,o));"<"==s[0]&&!(r==iE&&o==iE)&&t.push(a8(o,r))}(n,e,t)):e.push(i),e}const rE=new Set(["true","1"]),sE=new Set(["false","0"]);function a8(i,t){const e=rE.has(i)||sE.has(i),n=rE.has(t)||sE.has(t);return(r,s)=>{let o=i==iE||i==r,a=t==iE||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?rE.has(i):sE.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?rE.has(t):sE.has(t)),o&&a}}const cge=new RegExp("s*:selfs*,?","g");function VP(i,t,e,n){return new dge(i).build(t,e,n)}class dge{constructor(t){this._driver=t}build(t,e,n){const r=new fge(e);return this._resetContextStyleTimingState(r),Zo(this,Vb(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function gme(){return new he(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function _me(){return new he(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{s8(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(eE(s.values()),e.errors.push(function vme(i,t){return new he(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Zo(this,Vb(t.animation),e);return{type:1,matchers:oge(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:kf(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Zo(this,n,e)),options:kf(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const a=Zo(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:kf(t.options)}}visitAnimate(t,e){const n=function mge(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return zP(JS(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=zP(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=JS(e,t);return zP(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:Kn({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=Kn(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===jc?n.push(a):e.errors.push(new he(3002,!1)):n.push(t8(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),u=c.get(l);let h=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(e.errors.push(function bme(i,t,e,n,r){return new he(3010,!1)}()),h=!1),s=u.startTime),h&&c.set(l,{startTime:s,endTime:r}),e.options&&function Qme(i,t,e){const n=t.params||{},r=s8(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function hme(i){return new he(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function xme(){return new he(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const u=t.steps.map(y=>{const M=this._makeStyleAst(y,e);let x=null!=M.offset?M.offset:function pge(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(M.styles),C=0;return null!=x&&(s++,C=M.offset=x),l=l||C<0||C>1,a=a||C<c,c=C,o.push(C),M});l&&e.errors.push(function wme(){return new he(3012,!1)}()),a&&e.errors.push(function Mme(){return new he(3200,!1)}());const h=t.steps.length;let p=0;s>0&&s<h?e.errors.push(function Cme(){return new he(3202,!1)}()):0==s&&(p=1/(h-1));const m=h-1,g=e.currentTime,b=e.currentAnimateTimings,v=b.duration;return u.forEach((y,M)=>{const x=p>0?M==m?1:p*M:o[M],C=x*v;e.currentTime=g+b.delay+C,b.duration=C,this._validateStyleAst(y,e),y.offset=x,n.styles.push(y)}),n}visitReference(t,e){return{type:8,animation:Zo(this,Vb(t.animation),e),options:kf(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:kf(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:kf(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function uge(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(cge,"")),i=i.replace(/@\*/g,QS).replace(/@\w+/g,e=>QS+"-"+e.slice(1)).replace(/:animating/g,LP),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,Ko(e.collectedStyles,e.currentQuerySelector,new Map);const a=Zo(this,Vb(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:kf(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Sme(){return new he(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:JS(t.timings,e.errors,!0);return{type:12,animation:Zo(this,Vb(t.animation),e),timings:n,options:null}}}class fge{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function kf(i){return i?(i=Ub(i)).params&&(i.params=function hge(i){return i?Ub(i):null}(i.params)):i={},i}function zP(i,t,e){return{duration:i,delay:t,easing:e}}function HP(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class oE{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const vge=new RegExp(":enter","g"),bge=new RegExp(":leave","g");function GP(i,t,e,n,r,s=new Map,o=new Map,a,l,c=[]){return(new xge).buildKeyframes(i,t,e,n,r,s,o,a,l,c)}class xge{buildKeyframes(t,e,n,r,s,o,a,l,c,u=[]){c=c||new oE;const h=new $P(t,e,c,r,s,u,[]);h.options=l;const p=l.delay?dd(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([o],null,h.errors,l),Zo(this,n,h);const m=h.timelines.filter(g=>g.containsAnimation());if(m.length&&a.size){let g;for(let b=m.length-1;b>=0;b--){const v=m[b];if(v.element===e){g=v;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,h.errors,l)}return m.length?m.map(g=>g.buildKeyframes()):[HP(e,[],[],[],0,p,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:dd(zb(s,r?.params??{},e.errors));n.delayNextStep(o)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?dd(n.duration):null,a=null!=n.delay?dd(n.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Zo(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=aE);const o=dd(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Zo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?dd(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),Zo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return JS(e.params?zb(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?dd(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=aE);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{e.currentQueryIndex=u;const h=e.createSubContext(t.options,c);s&&h.delayNextStep(s),c===e.element&&(l=h.currentTimeline),Zo(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const u=e.currentTimeline;l&&u.delayNextStep(l);const h=u.currentTime;Zo(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}}const aE={};class $P{constructor(t,e,n,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=aE,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new lE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=dd(n.duration)),null!=n.delay&&(r.delay=dd(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=zb(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new $P(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=aE,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new wge(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(vge,"."+this._enterClassName)).replace(bge,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function Eme(i){return new he(3014,!1)}()),a}}class lE{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new lE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||jc),this._currentKeyframe.set(e,jc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function Mge(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,jc)}else Du(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=zb(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??jc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Du(a,new Map,this._backFill);c.forEach((u,h)=>{u===HI?t.add(h):u===jc&&e.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});const s=t.size?eE(t.values()):[],o=e.size?eE(e.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return HP(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class wge extends lE{constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,a=e/o,l=Du(t[0]);l.set("offset",0),s.push(l);const c=Du(t[0]);c.set("offset",d8(a)),s.push(c);const u=t.length-1;for(let h=1;h<=u;h++){let p=Du(t[h]);const m=p.get("offset");p.set("offset",d8((e+m*n)/o)),s.push(p)}n=o,e=0,r="",t=s}return HP(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function d8(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class WP{}const Cge=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Sge extends WP{normalizePropertyName(t,e){return UP(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(Cge.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function mme(i,t){return new he(3005,!1)}())}return o+s}}function u8(i,t,e,n,r,s,o,a,l,c,u,h,p){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:h,errors:p}}const jP={};class h8{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function Ege(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,a,l,c,u){const h=[],p=this.ast.options&&this.ast.options.params||jP,g=this.buildStyles(n,a&&a.params||jP,h),b=l&&l.params||jP,v=this.buildStyles(r,b,h),y=new Set,M=new Map,x=new Map,C="void"===r,O={params:Age(b,p),delay:this.ast.options?.delay},T=u?[]:GP(t,e,this.ast.animation,s,o,g,v,O,c,h);let P=0;if(T.forEach(I=>{P=Math.max(I.duration+I.delay,P)}),h.length)return u8(e,this._triggerName,n,r,C,g,v,[],[],M,x,P,h);T.forEach(I=>{const E=I.element,X=Ko(M,E,new Set);I.preStyleProps.forEach(j=>X.add(j));const re=Ko(x,E,new Set);I.postStyleProps.forEach(j=>re.add(j)),E!==e&&y.add(E)});const B=eE(y.values());return u8(e,this._triggerName,n,r,C,g,v,T,B,M,x,P)}}function Age(i,t){const e=Ub(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class Dge{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=Ub(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=zb(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),n.set(a,o)})}),n}}class Ige{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new Dge(r.style,r.options&&r.options.params||{},n))}),f8(this.states,"true","1"),f8(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new h8(t,r,this.states))}),this.fallbackTransition=function Rge(i,t,e){return new h8(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function f8(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const kge=new oE;class Pge{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],r=[],s=VP(this._driver,e,n,r);if(n.length)throw function Pme(i){return new he(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=WG(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=GP(this._driver,e,s,FP,KS,new Map,new Map,n,kge,r),o.forEach(u=>{const h=Ko(a,u.element,new Map);u.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(function Ome(){return new he(3300,!1)}()),o=[]),r.length)throw function Fme(i){return new he(3504,!1)}();a.forEach((u,h)=>{u.forEach((p,m)=>{u.set(m,this._driver.computeStyle(h,m,jc))})});const c=Au(o.map(u=>{const h=a.get(u.element);return this._buildPlayer(u,new Map,h)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Lme(i){return new he(3301,!1)}();return e}listen(t,e,n,r){const s=RP(e,"","","");return TP(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const p8="ng-animate-queued",YP="ng-animate-disabled",Bge=[],m8={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Uge={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ka="__ng_removed";class qP{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function Gge(i){return i??null}(n?t.value:t),n){const s=Ub(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Hb="void",XP=new qP(Hb);class Vge{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,Pa(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function Nme(i,t){return new he(3302,!1)}();if(null==n||0==n.length)throw function Bme(i){return new he(3303,!1)}();if(!function $ge(i){return"start"==i||"done"==i}(n))throw function Ume(i,t){return new he(3400,!1)}();const s=Ko(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=Ko(this._engine.statesByElement,t,new Map);return a.has(e)||(Pa(t,ZS),Pa(t,ZS+"-"+e),a.set(e,XP)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Vme(i){return new he(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new KP(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(Pa(t,ZS),Pa(t,ZS+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new qP(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=XP),c.value!==Hb&&l.value===c.value){if(!function Yge(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(l.params,c.params)){const b=[],v=s.matchStyles(l.value,l.params,b),y=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Rf(t,v),ic(t,y)})}return}const p=Ko(this._engine.playersByElement,t,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let m=s.matchTransition(l.value,c.value,t,c.params),g=!1;if(!m){if(!r)return;m=s.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:g}),g||(Pa(t,p8),o.onStart(()=>{Gg(t,p8)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const v=this._engine.playersByElement.get(t);if(v){let y=v.indexOf(o);y>=0&&v.splice(y,1)}}),this.players.push(o),p.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,QS,!0);n.forEach(r=>{if(r[ka])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const u=this.trigger(t,c,Hb,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&Au(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||XP,u=new qP(Hb),h=new KP(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:u,player:h,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[ka];(!s||s===m8)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){Pa(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=RP(s,n.triggerName,n.fromState.value,n.toState.value);l._data=t,TP(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class zge{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new Vge(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(cE(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!cE(e))return;const s=e[ka];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),Pa(t,YP)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Gg(t,YP))}removeNode(t,e,n,r){if(cE(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[ka]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return cE(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,QS,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,LP,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Au(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[ka];if(e&&e.setForRemoval){if(t[ka]=m8,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(YP)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Pa(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Au(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function zme(i){return new he(3402,!1)}()}_flushAnimations(t,e){const n=new oE,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(Q=>{u.add(Q);const ue=this.driver.query(Q,".ng-animate-queued",!0);for(let K=0;K<ue.length;K++)u.add(ue[K])});const h=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=v8(p,this.collectedEnterElements),g=new Map;let b=0;m.forEach((Q,ue)=>{const K=FP+b++;g.set(ue,K),Q.forEach(ve=>Pa(ve,K))});const v=[],y=new Set,M=new Set;for(let Q=0;Q<this.collectedLeaveElements.length;Q++){const ue=this.collectedLeaveElements[Q],K=ue[ka];K&&K.setForRemoval&&(v.push(ue),y.add(ue),K.hasAnimation?this.driver.query(ue,".ng-star-inserted",!0).forEach(ve=>y.add(ve)):M.add(ue))}const x=new Map,C=v8(p,Array.from(y));C.forEach((Q,ue)=>{const K=KS+b++;x.set(ue,K),Q.forEach(ve=>Pa(ve,K))}),t.push(()=>{m.forEach((Q,ue)=>{const K=g.get(ue);Q.forEach(ve=>Gg(ve,K))}),C.forEach((Q,ue)=>{const K=x.get(ue);Q.forEach(ve=>Gg(ve,K))}),v.forEach(Q=>{this.processLeaveNode(Q)})});const O=[],T=[];for(let Q=this._namespaceList.length-1;Q>=0;Q--)this._namespaceList[Q].drainQueuedTransitions(e).forEach(K=>{const ve=K.player,Ce=K.element;if(O.push(ve),this.collectedEnterElements.length){const Re=Ce[ka];if(Re&&Re.setForMove){if(Re.previousTriggersValues&&Re.previousTriggersValues.has(K.triggerName)){const ft=Re.previousTriggersValues.get(K.triggerName),bt=this.statesByElement.get(K.element);if(bt&&bt.has(K.triggerName)){const gt=bt.get(K.triggerName);gt.value=ft,bt.set(K.triggerName,gt)}}return void ve.destroy()}}const $e=!h||!this.driver.containsElement(h,Ce),vt=x.get(Ce),Qt=g.get(Ce),se=this._buildInstruction(K,n,Qt,vt,$e);if(se.errors&&se.errors.length)return void T.push(se);if($e)return ve.onStart(()=>Rf(Ce,se.fromStyles)),ve.onDestroy(()=>ic(Ce,se.toStyles)),void r.push(ve);if(K.isFallbackTransition)return ve.onStart(()=>Rf(Ce,se.fromStyles)),ve.onDestroy(()=>ic(Ce,se.toStyles)),void r.push(ve);const Oe=[];se.timelines.forEach(Re=>{Re.stretchStartingKeyframe=!0,this.disabledNodes.has(Re.element)||Oe.push(Re)}),se.timelines=Oe,n.append(Ce,se.timelines),o.push({instruction:se,player:ve,element:Ce}),se.queriedElements.forEach(Re=>Ko(a,Re,[]).push(ve)),se.preStyleProps.forEach((Re,ft)=>{if(Re.size){let bt=l.get(ft);bt||l.set(ft,bt=new Set),Re.forEach((gt,ee)=>bt.add(ee))}}),se.postStyleProps.forEach((Re,ft)=>{let bt=c.get(ft);bt||c.set(ft,bt=new Set),Re.forEach((gt,ee)=>bt.add(ee))})});if(T.length){const Q=[];T.forEach(ue=>{Q.push(function Hme(i,t){return new he(3505,!1)}())}),O.forEach(ue=>ue.destroy()),this.reportError(Q)}const P=new Map,B=new Map;o.forEach(Q=>{const ue=Q.element;n.has(ue)&&(B.set(ue,ue),this._beforeAnimationBuild(Q.player.namespaceId,Q.instruction,P))}),r.forEach(Q=>{const ue=Q.element;this._getPreviousPlayers(ue,!1,Q.namespaceId,Q.triggerName,null).forEach(ve=>{Ko(P,ue,[]).push(ve),ve.destroy()})});const I=v.filter(Q=>b8(Q,l,c)),E=new Map;_8(E,this.driver,M,c,jc).forEach(Q=>{b8(Q,l,c)&&I.push(Q)});const re=new Map;m.forEach((Q,ue)=>{_8(re,this.driver,new Set(Q),l,HI)}),I.forEach(Q=>{const ue=E.get(Q),K=re.get(Q);E.set(Q,new Map([...Array.from(ue?.entries()??[]),...Array.from(K?.entries()??[])]))});const j=[],ie=[],ge={};o.forEach(Q=>{const{element:ue,player:K,instruction:ve}=Q;if(n.has(ue)){if(u.has(ue))return K.onDestroy(()=>ic(ue,ve.toStyles)),K.disabled=!0,K.overrideTotalTime(ve.totalTime),void r.push(K);let Ce=ge;if(B.size>1){let vt=ue;const Qt=[];for(;vt=vt.parentNode;){const se=B.get(vt);if(se){Ce=se;break}Qt.push(vt)}Qt.forEach(se=>B.set(se,Ce))}const $e=this._buildAnimation(K.namespaceId,ve,P,s,re,E);if(K.setRealPlayer($e),Ce===ge)j.push(K);else{const vt=this.playersByElement.get(Ce);vt&&vt.length&&(K.parentPlayer=Au(vt)),r.push(K)}}else Rf(ue,ve.fromStyles),K.onDestroy(()=>ic(ue,ve.toStyles)),ie.push(K),u.has(ue)&&r.push(K)}),ie.forEach(Q=>{const ue=s.get(Q.element);if(ue&&ue.length){const K=Au(ue);Q.setRealPlayer(K)}}),r.forEach(Q=>{Q.parentPlayer?Q.syncPlayerEvents(Q.parentPlayer):Q.destroy()});for(let Q=0;Q<v.length;Q++){const ue=v[Q],K=ue[ka];if(Gg(ue,KS),K&&K.hasAnimation)continue;let ve=[];if(a.size){let $e=a.get(ue);$e&&$e.length&&ve.push(...$e);let vt=this.driver.query(ue,LP,!0);for(let Qt=0;Qt<vt.length;Qt++){let se=a.get(vt[Qt]);se&&se.length&&ve.push(...se)}}const Ce=ve.filter($e=>!$e.destroyed);Ce.length?Wge(this,ue,Ce):this.processLeaveNode(ue)}return v.length=0,j.forEach(Q=>{this.players.push(Q),Q.onDone(()=>{Q.destroy();const ue=this.players.indexOf(Q);this.players.splice(ue,1)}),Q.play()}),j}elementContainsData(t,e){let n=!1;const r=e[ka];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Hb;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,u=c!==s,h=Ko(n,c,[]);this._getPreviousPlayers(c,u,o,a,e.toState).forEach(m=>{const g=m.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),m.destroy(),h.push(m)})}Rf(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const a=e.triggerName,l=e.element,c=[],u=new Set,h=new Set,p=e.timelines.map(g=>{const b=g.element;u.add(b);const v=b[ka];if(v&&v.removedBeforeQueried)return new Vy(g.duration,g.delay);const y=b!==l,M=function jge(i){const t=[];return y8(i,t),t}((n.get(b)||Bge).map(P=>P.getRealPlayer())).filter(P=>!!P.element&&P.element===b),x=s.get(b),C=o.get(b),O=WG(0,this._normalizer,0,g.keyframes,x,C),T=this._buildPlayer(g,O,M);if(g.subTimeline&&r&&h.add(b),y){const P=new KP(t,a,b);P.setRealPlayer(T),c.push(P)}return T});c.forEach(g=>{Ko(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>function Hge(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,g.element,g))}),u.forEach(g=>Pa(g,e8));const m=Au(p);return m.onDestroy(()=>{u.forEach(g=>Gg(g,e8)),ic(l,e.toStyles)}),h.forEach(g=>{Ko(r,g,[]).push(m)}),m}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Vy(t.duration,t.delay)}}class KP{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Vy,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>TP(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ko(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function cE(i){return i&&1===i.nodeType}function g8(i,t){const e=i.style.display;return i.style.display=t??"none",e}function _8(i,t,e,n,r){const s=[];e.forEach(l=>s.push(g8(l)));const o=[];n.forEach((l,c)=>{const u=new Map;l.forEach(h=>{const p=t.computeStyle(c,h,r);u.set(h,p),(!p||0==p.length)&&(c[ka]=Uge,o.push(c))}),i.set(c,u)});let a=0;return e.forEach(l=>g8(l,s[a++])),o}function v8(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const n=1,r=new Set(t),s=new Map;function o(a){if(!a)return n;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?n:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);l!==n&&e.get(l).push(a)}),e}function Pa(i,t){i.classList?.add(t)}function Gg(i,t){i.classList?.remove(t)}function Wge(i,t,e){Au(e).onDone(()=>i.processLeaveNode(t))}function y8(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof cU?y8(n.players,t):t.push(n)}}function b8(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class dE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new zge(t,e,n),this._timelineEngine=new Pge(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],u=VP(this._driver,s,l,c);if(l.length)throw function Rme(i,t){return new he(3404,!1)}();a=function Tge(i,t,e){return new Ige(i,t,e)}(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=jG(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,a]=jG(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Xge=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ic(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ic(this._element,this._initialStyles),this._endStyles&&(ic(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Rf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Rf(this._element,this._endStyles),this._endStyles=null),ic(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function ZP(i){let t=null;return i.forEach((e,n)=>{(function Kge(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class x8{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:o8(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class Zge{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return KG(t,e)}getParentElement(t){return PP(t)}query(t,e,n){return ZG(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,u=o.filter(m=>m instanceof x8);(function tge(i,t){return 0===i||0===t})(n,r)&&u.forEach(m=>{m.currentSnapshot.forEach((g,b)=>c.set(b,g))});let h=function Zme(i){return i.length?i[0]instanceof Map?i:i.map(t=>t8(t)):[]}(e).map(m=>Du(m));h=function nge(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,o8(i,a)))}}return t}(t,h,c);const p=function qge(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=ZP(t[0]),t.length>1&&(n=ZP(t[t.length-1]))):t instanceof Map&&(e=ZP(t)),e||n?new Xge(i,e,n):null}(t,h);return new x8(t,h,l,p)}}let Qge=(()=>{class i extends rU{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Ro.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?oU(e):e;return w8(this._renderer,null,n,"register",[r]),new Jge(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(J(yh),J(Ut))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();class Jge extends nQ{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new e_e(this._id,t,e||{},this._renderer)}}class e_e{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return w8(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function w8(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const M8="@.disabled";let t_e=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let u=this._rendererCache.get(s);return u||(u=new C8("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,u)),u}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=u=>{Array.isArray(u)?u.forEach(l):this.engine.registerTrigger(o,a,e,u.name,u)};return n.data.animation.forEach(l),new n_e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(J(yh),J(dE),J(at))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})();class C8{constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==M8?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class n_e extends C8{constructor(t,e,n,r,s){super(e,n,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==M8?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function i_e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function r_e(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}const S8=[{provide:rU,useClass:Qge},{provide:WP,useFactory:function o_e(){return new Sge}},{provide:dE,useClass:(()=>{class i extends dE{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(J(Ut),J(OP),J(WP),J(hm))},i.\u0275prov=Ie({token:i,factory:i.\u0275fac}),i})()},{provide:yh,useFactory:function a_e(i,t,e){return new t_e(i,t,e)},deps:[iM,dE,at]}],QP=[{provide:OP,useFactory:()=>new Zge},{provide:Er,useValue:"BrowserAnimations"},...S8],E8=[{provide:OP,useClass:QG},{provide:Er,useValue:"NoopAnimations"},...S8];let l_e=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?E8:QP}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:QP,imports:[LN]}),i})();const A8=new fe("CdkAccordion");let c_e=0,d_e=(()=>{class i{get expanded(){return this._expanded}set expanded(e){e=Yt(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=Yt(e)}constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=$t.EMPTY,this.closed=new He,this.opened=new He,this.destroyed=new He,this.expandedChange=new He,this.id="cdk-accordion-child-"+c_e++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(A(A8,12),A(Xn),A(AR))},i.\u0275dir=xe({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Sn([{provide:A8,useValue:void 0}])]}),i})(),u_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({}),i})();const h_e=["body"];function f_e(i,t){}const p_e=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],m_e=["mat-expansion-panel-header","*","mat-action-row"];function g_e(i,t){1&i&&Pe(0,"span",2),2&i&&V("@indicatorRotate",pe()._getExpandedState())}const __e=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],v_e=["mat-panel-title","mat-panel-description","*"],D8=new fe("MAT_ACCORDION"),T8="225ms cubic-bezier(0.4,0.0,0.2,1)",I8={indicatorRotate:Sa("indicatorRotate",[ws("collapsed, void",Kn({transform:"rotate(0deg)"})),ws("expanded",Kn({transform:"rotate(180deg)"})),Dr("expanded <=> collapsed, void => collapsed",Hr(T8))]),bodyExpansion:Sa("bodyExpansion",[ws("collapsed, void",Kn({height:"0px",visibility:"hidden"})),ws("expanded",Kn({height:"*",visibility:"visible"})),Dr("expanded <=> collapsed, void => collapsed",Hr(T8))])},R8=new fe("MAT_EXPANSION_PANEL");let y_e=(()=>{class i{constructor(e,n){this._template=e,this._expansionPanel=n}}return i.\u0275fac=function(e){return new(e||i)(A(mo),A(R8,8))},i.\u0275dir=xe({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),b_e=0;const k8=new fe("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let P8=(()=>{class i extends d_e{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=Yt(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,n,r,s,o,a,l){super(e,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new He,this.afterCollapse=new He,this._inputChanges=new Fe,this._headerId="mat-expansion-panel-header-"+b_e++,this._bodyAnimationDone=new Fe,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe($c((c,u)=>c.fromState===u.fromState&&c.toState===u.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Uo(null),Dn(()=>this.expanded&&!this._portal),Di(1)).subscribe(()=>{this._portal=new Am(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(A(D8,12),A(Xn),A(AR),A(zr),A(Ut),A(Er,8),A(k8,8))},i.\u0275cmp=it({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,r){if(1&e&&Ni(r,y_e,5),2&e){let s;St(s=Et())&&(n._lazyContent=s.first)}},viewQuery:function(e,n){if(1&e&&qn(h_e,5),2&e){let r;St(r=Et())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&nn("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Sn([{provide:D8,useValue:void 0},{provide:R8,useExisting:i}]),rt,Mi],ngContentSelectors:m_e,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(Zi(p_e),Bt(0),$(1,"div",0,1),Ne("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),$(3,"div",2),Bt(4,1),me(5,f_e,0,0,"ng-template",3),Y(),Bt(6,2),Y()),2&e&&(G(1),V("@bodyExpansion",n._getExpandedState())("id",n.id),yt("aria-labelledby",n._headerId),G(4),V("cdkPortalOutlet",n._portal))},dependencies:[Dm],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[I8.bodyExpansion]},changeDetection:0}),i})();class x_e{}const w_e=NI(x_e);let M_e=(()=>{class i extends w_e{constructor(e,n,r,s,o,a,l){super(),this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=$t.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe(Dn(u=>!(!u.hideToggle&&!u.togglePosition))):Ls;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=or(e.opened,e.closed,c,e._inputChanges.pipe(Dn(u=>!!(u.hideToggle||u.disabled||u.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Dn(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Ho(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(A(P8,1),A(ct),A(Wc),A(Xn),A(k8,8),A(Er,8),fa("tabindex"))},i.\u0275cmp=it({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&Ne("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&e&&(yt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),Bo("height",n._getHeaderHeight()),nn("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[rt],ngContentSelectors:v_e,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(Zi(__e),$(0,"span",0),Bt(1),Bt(2,1),Bt(3,2),Y(),me(4,g_e,1,1,"span",1)),2&e&&(nn("mat-content-hide-toggle",!n._showToggle()),G(4),V("ngIf",n._showToggle()))},dependencies:[vi],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[I8.indicatorRotate]},changeDetection:0}),i})(),C_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),S_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=xe({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),E_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({imports:[vo,$n,u_e,Ph]}),i})();function A_e(i,t){if(1&i&&($(0,"mat-option",19),ze(1),Y()),2&i){const e=t.$implicit;V("value",e),G(1),Qi(" ",e," ")}}function D_e(i,t){if(1&i){const e=oi();$(0,"mat-form-field",16)(1,"mat-select",17),Ne("selectionChange",function(r){return an(e),ln(pe(2)._changePageSize(r.value))}),me(2,A_e,2,2,"mat-option",18),Y()()}if(2&i){const e=pe(2);V("appearance",e._formFieldAppearance)("color",e.color),G(1),V("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),G(1),V("ngForOf",e._displayedPageSizeOptions)}}function T_e(i,t){if(1&i&&($(0,"div",20),ze(1),Y()),2&i){const e=pe(2);G(1),ci(e.pageSize)}}function I_e(i,t){if(1&i&&($(0,"div",12)(1,"div",13),ze(2),Y(),me(3,D_e,3,8,"mat-form-field",14),me(4,T_e,2,1,"div",15),Y()),2&i){const e=pe();G(1),C1("id",e._pageSizeLabelId),G(1),Qi(" ",e._intl.itemsPerPageLabel," "),G(1),V("ngIf",e._displayedPageSizeOptions.length>1),G(1),V("ngIf",e._displayedPageSizeOptions.length<=1)}}function R_e(i,t){if(1&i){const e=oi();$(0,"button",21),Ne("click",function(){return an(e),ln(pe().firstPage())}),Lr(),$(1,"svg",7),Pe(2,"path",22),Y()()}if(2&i){const e=pe();V("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),yt("aria-label",e._intl.firstPageLabel)}}function k_e(i,t){if(1&i){const e=oi();Lr(),is(),$(0,"button",23),Ne("click",function(){return an(e),ln(pe().lastPage())}),Lr(),$(1,"svg",7),Pe(2,"path",24),Y()()}if(2&i){const e=pe();V("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),yt("aria-label",e._intl.lastPageLabel)}}let hE=(()=>{class i{constructor(){this.changes=new Fe,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=e*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Ie({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const O_e={provide:hE,deps:[[new _s,new Oo,hE]],useFactory:function P_e(i){return i||new hE}},L_e=new fe("MAT_PAGINATOR_DEFAULT_OPTIONS"),N_e=GM($Z(class{}));let B_e=(()=>{class i extends N_e{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(xs(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=xs(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(xs(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(n=>xs(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=Yt(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=Yt(e)}constructor(e,n,r){if(super(),this._intl=e,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new He,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,n)=>e-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(e){po()},i.\u0275dir=xe({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[rt]}),i})(),U_e=0,V_e=(()=>{class i extends B_e{constructor(e,n,r){super(e,n,r),this._pageSizeLabelId="mat-paginator-page-size-label-"+U_e++,this._formFieldAppearance=r?.formFieldAppearance||"outline"}}return i.\u0275fac=function(e){return new(e||i)(A(hE),A(Xn),A(L_e,8))},i.\u0275cmp=it({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[rt],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1),me(2,I_e,5,4,"div",2),$(3,"div",3)(4,"div",4),ze(5),Y(),me(6,R_e,3,5,"button",5),$(7,"button",6),Ne("click",function(){return n.previousPage()}),Lr(),$(8,"svg",7),Pe(9,"path",8),Y()(),is(),$(10,"button",9),Ne("click",function(){return n.nextPage()}),Lr(),$(11,"svg",7),Pe(12,"path",10),Y()(),me(13,k_e,3,5,"button",11),Y()()()),2&e&&(G(2),V("ngIf",!n.hidePageSize),G(3),Qi(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),G(1),V("ngIf",n.showFirstLastButtons),G(1),V("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),yt("aria-label",n._intl.previousPageLabel),G(3),V("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),yt("aria-label",n._intl.nextPageLabel),G(3),V("ngIf",n.showFirstLastButtons))},dependencies:[_o,vi,YM,ql,Zy,Bm,Ms],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),z_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i}),i.\u0275inj=jt({providers:[O_e],imports:[vo,qM,Gz,BU]}),i})(),H_e=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=qt({type:i,bootstrap:[cme]}),i.\u0275inj=jt({providers:[Yc,Vz,{provide:Lz,useValue:oie}],imports:[LN,GX,l_e,iz,WQ,pC,_z,E_e,RU,OU,BU,qM,iV,z_e,Sre,bz,Gz,bU,Bfe,Upe,rz,UI,fie]}),i})();Uu(qc,[_o,vi,Ms,Bb,XS],[Hl]),Uu(SR,[pm,_o,vi,sy,Xc,ou,ql,P8,M_e,S_e,C_e,Ms,V_e,Zy,Bm,Bb],[]),Uu(yC,[_o,vi,xC,bC,yz,Bb],[]),Uu(BG,[_o,vi,Go,Ms,Zy,Bm,Bb,XS],[Hl]),i7().bootstrapModule(H_e).catch(i=>console.error(i))},489:function(Co,ks,Zr){var en;Co=Zr.nmd(Co),function(){var U,Qr=200,kn="Expected a function",Fa="__lodash_hash_undefined__",ui="__lodash_placeholder__",hi=1,hs=2,Os=4,Fs=1,So=2,Tn=1,rr=2,oc=4,Jo=8,fl=16,ea=32,pl=64,La=128,ta=256,hd=512,gE=800,Wg=16,An=1/0,Ba=9007199254740991,vE=17976931348623157e292,Ff=NaN,na=4294967295,Fe=na-1,Wb=na>>>1,jb=[["ary",La],["bind",Tn],["bindKey",rr],["curry",Jo],["curryRight",fl],["flip",hd],["partial",ea],["partialRight",pl],["rearg",ta]],zn="[object Arguments]",Fn="[object Array]",yE="[object AsyncFunction]",Qe="[object Boolean]",ac="[object Date]",bE="[object DOMException]",fd="[object Error]",Lf="[object Function]",Yb="[object GeneratorFunction]",Eo="[object Map]",Nf="[object Number]",iO="[object Null]",ml="[object Object]",xE="[object Promise]",wE="[object Proxy]",pd="[object RegExp]",Ao="[object Set]",lc="[object String]",Bf="[object Symbol]",jg="[object Undefined]",md="[object WeakMap]",Iu="[object ArrayBuffer]",gd="[object DataView]",ia="[object Float32Array]",Uf="[object Float64Array]",Yg="[object Int8Array]",Vf="[object Int16Array]",qg="[object Int32Array]",Xg="[object Uint8Array]",Kg="[object Uint8ClampedArray]",Zg="[object Uint16Array]",Qg="[object Uint32Array]",CE=/\b__p \+= '';/g,SE=/\b(__p \+=) '' \+/g,EE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,qb=/&(?:amp|lt|gt|quot|#39);/g,Xb=/[&<>"']/g,rO=RegExp(qb.source),Jg=RegExp(Xb.source),Kb=/<%-([\s\S]+?)%>/g,Zb=/<%([\s\S]+?)%>/g,e_=/<%=([\s\S]+?)%>/g,Qb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,AE=/^\w*$/,Jb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,zf=/[\\^$.*+?()[\]{}|]/g,e0=RegExp(zf.source),Hf=/^\s+/,sr=/\s/,DE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,TE=/\{\n\/\* \[wrapped with (.+)\] \*/,IE=/,? & /,RE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,t0=/[()=,{}\[\]\/\s]/,kE=/\\(\\)?/g,PE=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ra=/\w*$/,OE=/^[-+]0x[0-9a-f]+$/i,qi=/^0b[01]+$/i,_d=/^\[object .+?Constructor\]$/,Ls=/^0o[0-7]+$/i,sO=/^(?:0|[1-9]\d*)$/,FE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ru=/($^)/,t_=/['\n\r\u2028\u2029\\]/g,ku="\\ud800-\\udfff",n_="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",r0="\\u2700-\\u27bf",s0="a-z\\xdf-\\xf6\\xf8-\\xff",a0="A-Z\\xc0-\\xd6\\xd8-\\xde",Oi="\\ufe0e\\ufe0f",or="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",i_="["+ku+"]",Zn="["+or+"]",vd="["+n_+"]",ri="\\d+",r_="["+r0+"]",l0="["+s0+"]",Ln="[^"+ku+or+ri+r0+s0+a0+"]",Mt="\\ud83c[\\udffb-\\udfff]",Gf="[^"+ku+"]",c0="(?:\\ud83c[\\udde6-\\uddff]){2}",yd="[\\ud800-\\udbff][\\udc00-\\udfff]",he="["+a0+"]",Wt="(?:"+l0+"|"+Ln+")",jn="(?:"+he+"|"+Ln+")",d0="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",VE="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",u0="(?:"+vd+"|"+Mt+")?",Lu="["+Oi+"]?",HE=Lu+u0+"(?:\\u200d(?:"+[Gf,c0,yd].join("|")+")"+Lu+u0+")*",gl="(?:"+[r_,c0,yd].join("|")+")"+HE,aO="(?:"+[Gf+vd+"?",vd,c0,yd,i_].join("|")+")",lO=RegExp("['\u2019]","g"),cO=RegExp(vd,"g"),h0=RegExp(Mt+"(?="+Mt+")|"+aO+HE,"g"),GE=RegExp([he+"?"+l0+"+"+d0+"(?="+[Zn,he,"$"].join("|")+")",jn+"+"+VE+"(?="+[Zn,he+Wt,"$"].join("|")+")",he+"?"+Wt+"+"+d0,he+"+"+VE,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ri,gl].join("|"),"g"),dO=RegExp("[\\u200d"+ku+n_+Oi+"]"),$E=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,uO=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],oo=-1,_t={};_t[ia]=_t[Uf]=_t[Yg]=_t[Vf]=_t[qg]=_t[Xg]=_t[Kg]=_t[Zg]=_t[Qg]=!0,_t[zn]=_t[Fn]=_t[Iu]=_t[Qe]=_t[gd]=_t[ac]=_t[fd]=_t[Lf]=_t[Eo]=_t[Nf]=_t[ml]=_t[pd]=_t[Ao]=_t[lc]=_t[md]=!1;var li={};li[zn]=li[Fn]=li[Iu]=li[gd]=li[Qe]=li[ac]=li[ia]=li[Uf]=li[Yg]=li[Vf]=li[qg]=li[Eo]=li[Nf]=li[ml]=li[pd]=li[Ao]=li[lc]=li[Bf]=li[Xg]=li[Kg]=li[Zg]=li[Qg]=!0,li[fd]=li[Lf]=li[md]=!1;var pO={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jt=parseFloat,$f=parseInt,f0="object"==typeof global&&global&&global.Object===Object&&global,p0="object"==typeof self&&self&&self.Object===Object&&self,vr=f0||p0||Function("return this")(),o_=ks&&!ks.nodeType&&ks,_l=o_&&Co&&!Co.nodeType&&Co,Wf=_l&&_l.exports===o_,jf=Wf&&f0.process,ao=function(){try{return _l&&_l.require&&_l.require("util").types||jf&&jf.binding&&jf.binding("util")}catch{}}(),Tt=ao&&ao.isArrayBuffer,Yf=ao&&ao.isDate,m0=ao&&ao.isMap,Bs=ao&&ao.isRegExp,a_=ao&&ao.isSet,WE=ao&&ao.isTypedArray;function Cn(q,oe,ae){switch(ae.length){case 0:return q.call(oe);case 1:return q.call(oe,ae[0]);case 2:return q.call(oe,ae[0],ae[1]);case 3:return q.call(oe,ae[0],ae[1],ae[2])}return q.apply(oe,ae)}function mO(q,oe,ae,Je){for(var Be=-1,Bn=null==q?0:q.length;++Be<Bn;){var wi=q[Be];oe(Je,wi,ae(wi),q)}return Je}function Do(q,oe){for(var ae=-1,Je=null==q?0:q.length;++ae<Je&&!1!==oe(q[ae],ae,q););return q}function gO(q,oe){for(var ae=null==q?0:q.length;ae--&&!1!==oe(q[ae],ae,q););return q}function bd(q,oe){for(var ae=-1,Je=null==q?0:q.length;++ae<Je;)if(!oe(q[ae],ae,q))return!1;return!0}function sa(q,oe){for(var ae=-1,Je=null==q?0:q.length,Be=0,Bn=[];++ae<Je;){var wi=q[ae];oe(wi,ae,q)&&(Bn[Be++]=wi)}return Bn}function cc(q,oe){return!(null==q||!q.length)&&bl(q,oe,0)>-1}function l_(q,oe,ae){for(var Je=-1,Be=null==q?0:q.length;++Je<Be;)if(ae(oe,q[Je]))return!0;return!1}function fi(q,oe){for(var ae=-1,Je=null==q?0:q.length,Be=Array(Je);++ae<Je;)Be[ae]=oe(q[ae],ae,q);return Be}function vl(q,oe){for(var ae=-1,Je=oe.length,Be=q.length;++ae<Je;)q[Be+ae]=oe[ae];return q}function qf(q,oe,ae,Je){var Be=-1,Bn=null==q?0:q.length;for(Je&&Bn&&(ae=q[++Be]);++Be<Bn;)ae=oe(ae,q[Be],Be,q);return ae}function Nu(q,oe,ae,Je){var Be=null==q?0:q.length;for(Je&&Be&&(ae=q[--Be]);Be--;)ae=oe(ae,q[Be],Be,q);return ae}function yl(q,oe){for(var ae=-1,Je=null==q?0:q.length;++ae<Je;)if(oe(q[ae],ae,q))return!0;return!1}var jE=c_("length");function Nt(q,oe,ae){var Je;return ae(q,function(Be,Bn,wi){if(oe(Be,Bn,wi))return Je=Bn,!1}),Je}function dc(q,oe,ae,Je){for(var Be=q.length,Bn=ae+(Je?1:-1);Je?Bn--:++Bn<Be;)if(oe(q[Bn],Bn,q))return Bn;return-1}function bl(q,oe,ae){return oe==oe?function Vs(q,oe,ae){for(var Je=ae-1,Be=q.length;++Je<Be;)if(q[Je]===oe)return Je;return-1}(q,oe,ae):dc(q,_0,ae)}function Bu(q,oe,ae,Je){for(var Be=ae-1,Bn=q.length;++Be<Bn;)if(Je(q[Be],oe))return Be;return-1}function _0(q){return q!=q}function v0(q,oe){var ae=null==q?0:q.length;return ae?ko(q,oe)/ae:Ff}function c_(q){return function(oe){return null==oe?U:oe[q]}}function To(q){return function(oe){return null==q?U:q[oe]}}function Io(q,oe,ae,Je,Be){return Be(q,function(Bn,wi,Qn){ae=Je?(Je=!1,Bn):oe(ae,Bn,wi,Qn)}),ae}function ko(q,oe){for(var ae,Je=-1,Be=q.length;++Je<Be;){var Bn=oe(q[Je]);Bn!==U&&(ae=ae===U?Bn:ae+Bn)}return ae}function Nn(q,oe){for(var ae=-1,Je=Array(q);++ae<q;)Je[ae]=oe(ae);return Je}function Kf(q){return q&&q.slice(0,oa(q)+1).replace(Hf,"")}function Jr(q){return function(oe){return q(oe)}}function Zf(q,oe){return fi(oe,function(ae){return q[ae]})}function Us(q,oe){return q.has(oe)}function xd(q,oe){for(var ae=-1,Je=q.length;++ae<Je&&bl(oe,q[ae],0)>-1;);return ae}function y0(q,oe){for(var ae=q.length;ae--&&bl(oe,q[ae],0)>-1;);return ae}var Uu=To({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),YE=To({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function qE(q){return"\\"+pO[q]}function wd(q){return dO.test(q)}function Pr(q){var oe=-1,ae=Array(q.size);return q.forEach(function(Je,Be){ae[++oe]=[Be,Je]}),ae}function Hn(q,oe){return function(ae){return q(oe(ae))}}function xi(q,oe){for(var ae=-1,Je=q.length,Be=0,Bn=[];++ae<Je;){var wi=q[ae];(wi===oe||wi===ui)&&(q[ae]=ui,Bn[Be++]=ae)}return Bn}function yr(q){var oe=-1,ae=Array(q.size);return q.forEach(function(Je){ae[++oe]=Je}),ae}function uc(q){return wd(q)?function sn(q){for(var oe=h0.lastIndex=0;h0.test(q);)++oe;return oe}(q):jE(q)}function fs(q){return wd(q)?function Ei(q){return q.match(h0)||[]}(q):function J(q){return q.split("")}(q)}function oa(q){for(var oe=q.length;oe--&&sr.test(q.charAt(oe)););return oe}var nt=To({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Xi=function q(oe){var d,ae=(oe=null==oe?vr:Xi.defaults(vr.Object(),oe,Xi.pick(vr,uO))).Array,Je=oe.Date,Be=oe.Error,Bn=oe.Function,wi=oe.Math,Qn=oe.Object,xl=oe.RegExp,Or=oe.String,Fr=oe.TypeError,Ua=ae.prototype,la=Qn.prototype,Vu=oe["__core-js_shared__"],Jn=Bn.prototype.toString,ei=la.hasOwnProperty,d_=0,u_=(d=/[^.]+$/.exec(Vu&&Vu.keys&&Vu.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",fc=la.toString,Qf=Jn.call(Qn),Cd=vr._,es=xl("^"+Jn.call(ei).replace(zf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),h_=Wf?oe.Buffer:U,Hi=oe.Symbol,ps=oe.Uint8Array,Jf=h_?h_.allocUnsafe:U,wl=Hn(Qn.getPrototypeOf,Qn),zu=Qn.create,lo=la.propertyIsEnumerable,ep=Ua.splice,XE=Hi?Hi.isConcatSpreadable:U,Hu=Hi?Hi.iterator:U,pc=Hi?Hi.toStringTag:U,f_=function(){try{var d=Ec(Qn,"defineProperty");return d({},"",{}),d}catch{}}(),_O=oe.clearTimeout!==vr.clearTimeout&&oe.clearTimeout,vO=Je&&Je.now!==vr.Date.now&&Je.now,yO=oe.setTimeout!==vr.setTimeout&&oe.setTimeout,p_=wi.ceil,m_=wi.floor,w0=Qn.getOwnPropertySymbols,bO=h_?h_.isBuffer:U,KE=oe.isFinite,xO=Ua.join,wO=Hn(Qn.keys,Qn),ar=wi.max,br=wi.min,M0=Je.now,MO=oe.parseInt,ZE=wi.random,CO=Ua.reverse,Va=Ec(oe,"DataView"),Gu=Ec(oe,"Map"),Mi=Ec(oe,"Promise"),mc=Ec(oe,"Set"),$u=Ec(oe,"WeakMap"),Wu=Ec(Qn,"create"),ju=$u&&new $u,gc={},QE=$i(Va),g_=$i(Gu),JE=$i(Mi),co=$i(mc),C0=$i($u),Yu=Hi?Hi.prototype:U,Fi=Yu?Yu.valueOf:U,S0=Yu?Yu.toString:U;function R(d){if(ti(d)&&!tn(d)&&!(d instanceof on)){if(d instanceof zs)return d;if(ei.call(d,"__wrapped__"))return q_(d)}return new zs(d)}var lr=function(){function d(){}return function(f){if(!mi(f))return{};if(zu)return zu(f);d.prototype=f;var _=new d;return d.prototype=U,_}}();function tp(){}function zs(d,f){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=U}function on(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=na,this.__views__=[]}function _c(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var w=d[f];this.set(w[0],w[1])}}function Cl(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var w=d[f];this.set(w[0],w[1])}}function za(d){var f=-1,_=null==d?0:d.length;for(this.clear();++f<_;){var w=d[f];this.set(w[0],w[1])}}function Sl(d){var f=-1,_=null==d?0:d.length;for(this.__data__=new za;++f<_;)this.add(d[f])}function Hs(d){var f=this.__data__=new Cl(d);this.size=f.size}function da(d,f){var _=tn(d),w=!_&&Ud(d),S=!_&&!w&&Ya(d),k=!_&&!w&&!S&&Vd(d),z=_||w||S||k,W=z?Nn(d.length,Or):[],Z=W.length;for(var _e in d)(f||ei.call(d,_e))&&(!z||!("length"==_e||S&&("offset"==_e||"parent"==_e)||k&&("buffer"==_e||"byteLength"==_e||"byteOffset"==_e)||Pl(_e,Z)))&&W.push(_e);return W}function y_(d){var f=d.length;return f?d[rh(0,f-1)]:U}function Sd(d,f){return uh(Nr(d),vc(f,0,d.length))}function Ha(d){return uh(Nr(d))}function b_(d,f,_){(_!==U&&!Fo(d[f],_)||_===U&&!(f in d))&&ua(d,f,_)}function Ed(d,f,_){var w=d[f];(!ei.call(d,f)||!Fo(w,_)||_===U&&!(f in d))&&ua(d,f,_)}function ip(d,f){for(var _=d.length;_--;)if(Fo(d[_][0],f))return _;return-1}function oA(d,f,_,w){return Ga(d,function(S,k,z){f(w,S,_(S),z)}),w}function rp(d,f){return d&&gs(f,Cr(f),d)}function ua(d,f,_){"__proto__"==f&&f_?f_(d,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):d[f]=_}function Xu(d,f){for(var _=-1,w=f.length,S=ae(w),k=null==d;++_<w;)S[_]=k?U:Iv(d,f[_]);return S}function vc(d,f,_){return d==d&&(_!==U&&(d=d<=_?d:_),f!==U&&(d=d>=f?d:f)),d}function Gs(d,f,_,w,S,k){var z,W=f&hi,Z=f&hs,_e=f&Os;if(_&&(z=S?_(d,w,S,k):_(d)),z!==U)return z;if(!mi(d))return d;var be=tn(d);if(be){if(z=function K0(d){var f=d.length,_=new d.constructor(f);return f&&"string"==typeof d[0]&&ei.call(d,"index")&&(_.index=d.index,_.input=d.input),_}(d),!W)return Nr(d,z)}else{var De=wr(d),Ye=De==Lf||De==Yb;if(Ya(d))return fA(d,W);if(De==ml||De==zn||Ye&&!S){if(z=Z||Ye?{}:MA(d),!W)return Z?function ho(d,f){return gs(d,ch(d),f)}(d,function x_(d,f){return d&&gs(f,Xs(f),d)}(z,d)):function gA(d,f){return gs(d,V_(d),f)}(d,rp(z,d))}else{if(!li[De])return S?d:{};z=function CA(d,f,_){var w=d.constructor;switch(f){case Iu:return G0(d);case Qe:case ac:return new w(+d);case gd:return function DO(d,f){var _=f?G0(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.byteLength)}(d,_);case ia:case Uf:case Yg:case Vf:case qg:case Xg:case Kg:case Zg:case Qg:return pA(d,_);case Eo:return new w;case Nf:case lc:return new w(d);case pd:return function TO(d){var f=new d.constructor(d.source,ra.exec(d));return f.lastIndex=d.lastIndex,f}(d);case Ao:return new w;case Bf:return function IO(d){return Fi?Qn(Fi.call(d)):{}}(d)}}(d,De,W)}}k||(k=new Hs);var dt=k.get(d);if(dt)return dt;k.set(d,z),Cv(d)?d.forEach(function(Pt){z.add(Gs(Pt,f,_,Pt,d,k))}):$x(d)&&d.forEach(function(Pt,_n){z.set(_n,Gs(Pt,f,_,_n,d,k))});var hn=be?U:(_e?Z?kl:U_:Z?Xs:Cr)(d);return Do(hn||d,function(Pt,_n){hn&&(Pt=d[_n=Pt]),Ed(z,_n,Gs(Pt,f,_,_n,d,k))}),z}function M_(d,f,_){var w=_.length;if(null==d)return!w;for(d=Qn(d);w--;){var S=_[w],z=d[S];if(z===U&&!(S in d)||!(0,f[S])(z))return!1}return!0}function C_(d,f,_){if("function"!=typeof d)throw new Fr(kn);return Ac(function(){d.apply(U,_)},f)}function Ad(d,f,_,w){var S=-1,k=cc,z=!0,W=d.length,Z=[],_e=f.length;if(!W)return Z;_&&(f=fi(f,Jr(_))),w?(k=l_,z=!1):f.length>=Qr&&(k=Us,z=!1,f=new Sl(f));e:for(;++S<W;){var be=d[S],De=null==_?be:_(be);if(be=w||0!==be?be:0,z&&De==De){for(var Ye=_e;Ye--;)if(f[Ye]===De)continue e;Z.push(be)}else k(f,De,w)||Z.push(be)}return Z}R.templateSettings={escape:Kb,evaluate:Zb,interpolate:e_,variable:"",imports:{_:R}},(R.prototype=tp.prototype).constructor=R,(zs.prototype=lr(tp.prototype)).constructor=zs,(on.prototype=lr(tp.prototype)).constructor=on,_c.prototype.clear=function Ml(){this.__data__=Wu?Wu(null):{},this.size=0},_c.prototype.delete=function E0(d){var f=this.has(d)&&delete this.__data__[d];return this.size-=f?1:0,f},_c.prototype.get=function __(d){var f=this.__data__;if(Wu){var _=f[d];return _===Fa?U:_}return ei.call(f,d)?f[d]:U},_c.prototype.has=function Xt(d){var f=this.__data__;return Wu?f[d]!==U:ei.call(f,d)},_c.prototype.set=function A0(d,f){var _=this.__data__;return this.size+=this.has(d)?0:1,_[d]=Wu&&f===U?Fa:f,this},Cl.prototype.clear=function tA(){this.__data__=[],this.size=0},Cl.prototype.delete=function nA(d){var f=this.__data__,_=ip(f,d);return!(_<0||(_==f.length-1?f.pop():ep.call(f,_,1),--this.size,0))},Cl.prototype.get=function iA(d){var f=this.__data__,_=ip(f,d);return _<0?U:f[_][1]},Cl.prototype.has=function D0(d){return ip(this.__data__,d)>-1},Cl.prototype.set=function rA(d,f){var _=this.__data__,w=ip(_,d);return w<0?(++this.size,_.push([d,f])):_[w][1]=f,this},za.prototype.clear=function Ee(){this.size=0,this.__data__={hash:new _c,map:new(Gu||Cl),string:new _c}},za.prototype.delete=function Pn(d){var f=Cp(this,d).delete(d);return this.size-=f?1:0,f},za.prototype.get=function an(d){return Cp(this,d).get(d)},za.prototype.has=function ln(d){return Cp(this,d).has(d)},za.prototype.set=function xr(d,f){var _=Cp(this,d),w=_.size;return _.set(d,f),this.size+=_.size==w?0:1,this},Sl.prototype.add=Sl.prototype.push=function qu(d){return this.__data__.set(d,Fa),this},Sl.prototype.has=function ca(d){return this.__data__.has(d)},Hs.prototype.clear=function v_(){this.__data__=new Cl,this.size=0},Hs.prototype.delete=function sA(d){var f=this.__data__,_=f.delete(d);return this.size=f.size,_},Hs.prototype.get=function SO(d){return this.__data__.get(d)},Hs.prototype.has=function T0(d){return this.__data__.has(d)},Hs.prototype.set=function ts(d,f){var _=this.__data__;if(_ instanceof Cl){var w=_.__data__;if(!Gu||w.length<Qr-1)return w.push([d,f]),this.size=++_.size,this;_=this.__data__=new za(w)}return _.set(d,f),this.size=_.size,this};var Ga=ah(is),sp=ah(S_,!0);function aA(d,f){var _=!0;return Ga(d,function(w,S,k){return _=!!f(w,S,k)}),_}function op(d,f,_){for(var w=-1,S=d.length;++w<S;){var k=d[w],z=f(k);if(null!=z&&(W===U?z==z&&!qs(z):_(z,W)))var W=z,Z=k}return Z}function El(d,f){var _=[];return Ga(d,function(w,S,k){f(w,S,k)&&_.push(w)}),_}function gn(d,f,_,w,S){var k=-1,z=d.length;for(_||(_=z_),S||(S=[]);++k<z;){var W=d[k];f>0&&_(W)?f>1?gn(W,f-1,_,w,S):vl(S,W):w||(S[S.length]=W)}return S}var Lr=Rd(),I0=Rd(!0);function is(d,f){return d&&Lr(d,f,Cr)}function S_(d,f){return d&&I0(d,f,Cr)}function ap(d,f){return sa(f,function(_){return qa(d[_])})}function yc(d,f){for(var _=0,w=(f=wc(f,d)).length;null!=d&&_<w;)d=d[ga(f[_++])];return _&&_==w?d:U}function Ku(d,f,_){var w=f(d);return tn(d)?w:vl(w,_(d))}function cr(d){return null==d?d===U?jg:iO:pc&&pc in Qn(d)?function bA(d){var f=ei.call(d,pc),_=d[pc];try{d[pc]=U;var w=!0}catch{}var S=fc.call(d);return w&&(f?d[pc]=_:delete d[pc]),S}(d):function tx(d){return fc.call(d)}(d)}function Dd(d,f){return d>f}function E_(d,f){return null!=d&&ei.call(d,f)}function R0(d,f){return null!=d&&f in Qn(d)}function Al(d,f,_){for(var w=_?l_:cc,S=d[0].length,k=d.length,z=k,W=ae(k),Z=1/0,_e=[];z--;){var be=d[z];z&&f&&(be=fi(be,Jr(f))),Z=br(be.length,Z),W[z]=!_&&(f||S>=120&&be.length>=120)?new Sl(z&&be):U}be=d[0];var De=-1,Ye=W[0];e:for(;++De<S&&_e.length<Z;){var dt=be[De],kt=f?f(dt):dt;if(dt=_||0!==dt?dt:0,!(Ye?Us(Ye,kt):w(_e,kt,_))){for(z=k;--z;){var hn=W[z];if(!(hn?Us(hn,kt):w(d[z],kt,_)))continue e}Ye&&Ye.push(kt),_e.push(dt)}}return _e}function Qu(d,f,_){var w=null==(d=nx(d,f=wc(f,d)))?d:d[ga(Ws(f))];return null==w?U:Cn(w,d,_)}function cA(d){return ti(d)&&cr(d)==zn}function Ju(d,f,_,w,S){return d===f||(null==d||null==f||!ti(d)&&!ti(f)?d!=d&&f!=f:function dA(d,f,_,w,S,k){var z=tn(d),W=tn(f),Z=z?Fn:wr(d),_e=W?Fn:wr(f),be=(Z=Z==zn?ml:Z)==ml,De=(_e=_e==zn?ml:_e)==ml,Ye=Z==_e;if(Ye&&Ya(d)){if(!Ya(f))return!1;z=!0,be=!1}if(Ye&&!be)return k||(k=new Hs),z||Vd(d)?Od(d,f,_,w,S,k):function wp(d,f,_,w,S,k,z){switch(_){case gd:if(d.byteLength!=f.byteLength||d.byteOffset!=f.byteOffset)return!1;d=d.buffer,f=f.buffer;case Iu:return!(d.byteLength!=f.byteLength||!k(new ps(d),new ps(f)));case Qe:case ac:case Nf:return Fo(+d,+f);case fd:return d.name==f.name&&d.message==f.message;case pd:case lc:return d==f+"";case Eo:var W=Pr;case Ao:if(W||(W=yr),d.size!=f.size&&!(w&Fs))return!1;var _e=z.get(d);if(_e)return _e==f;w|=So,z.set(d,f);var be=Od(W(d),W(f),w,S,k,z);return z.delete(d),be;case Bf:if(Fi)return Fi.call(d)==Fi.call(f)}return!1}(d,f,Z,_,w,S,k);if(!(_&Fs)){var dt=be&&ei.call(d,"__wrapped__"),kt=De&&ei.call(f,"__wrapped__");if(dt||kt){var hn=dt?d.value():d,Pt=kt?f.value():f;return k||(k=new Hs),S(hn,Pt,_,w,k)}}return!!Ye&&(k||(k=new Hs),function Y0(d,f,_,w,S,k){var z=_&Fs,W=U_(d),Z=W.length;if(Z!=U_(f).length&&!z)return!1;for(var De=Z;De--;){var Ye=W[De];if(!(z?Ye in f:ei.call(f,Ye)))return!1}var dt=k.get(d),kt=k.get(f);if(dt&&kt)return dt==f&&kt==d;var hn=!0;k.set(d,f),k.set(f,d);for(var Pt=z;++De<Z;){var _n=d[Ye=W[De]],In=f[Ye];if(w)var Zs=z?w(In,_n,Ye,f,d,k):w(_n,In,Ye,d,f,k);if(!(Zs===U?_n===In||S(_n,In,_,w,k):Zs)){hn=!1;break}Pt||(Pt="constructor"==Ye)}if(hn&&!Pt){var dr=d.constructor,Vr=f.constructor;dr!=Vr&&"constructor"in d&&"constructor"in f&&!("function"==typeof dr&&dr instanceof dr&&"function"==typeof Vr&&Vr instanceof Vr)&&(hn=!1)}return k.delete(d),k.delete(f),hn}(d,f,_,w,S,k))}(d,f,_,w,Ju,S))}function k0(d,f,_,w){var S=_.length,k=S,z=!w;if(null==d)return!k;for(d=Qn(d);S--;){var W=_[S];if(z&&W[2]?W[1]!==d[W[0]]:!(W[0]in d))return!1}for(;++S<k;){var Z=(W=_[S])[0],_e=d[Z],be=W[1];if(z&&W[2]){if(_e===U&&!(Z in d))return!1}else{var De=new Hs;if(w)var Ye=w(_e,be,Z,d,f,De);if(!(Ye===U?Ju(be,_e,Fs|So,w,De):Ye))return!1}}return!0}function lp(d){return!(!mi(d)||function PO(d){return!!u_&&u_ in d}(d))&&(qa(d)?es:_d).test($i(d))}function D_(d){return"function"==typeof d?d:null==d?Ur:"object"==typeof d?tn(d)?nh(d[0],d[1]):up(d):$p(d)}function cp(d){if(!Sp(d))return wO(d);var f=[];for(var _ in Qn(d))ei.call(d,_)&&"constructor"!=_&&f.push(_);return f}function T_(d,f){return d<f}function th(d,f){var _=-1,w=Mr(d)?ae(d.length):[];return Ga(d,function(S,k,z){w[++_]=f(S,k,z)}),w}function up(d){var f=q0(d);return 1==f.length&&f[0][2]?H_(f[0][0],f[0][1]):function(_){return _===d||k0(_,d,f)}}function nh(d,f){return dh(d)&&Q0(f)?H_(ga(d),f):function(_){var w=Iv(_,d);return w===U&&w===f?Ll(_,d):Ju(f,w,Fs|So)}}function I_(d,f,_,w,S){d!==f&&Lr(f,function(k,z){if(S||(S=new Hs),mi(k))!function F0(d,f,_,w,S,k,z){var W=$_(d,_),Z=$_(f,_),_e=z.get(Z);if(_e)b_(d,_,_e);else{var be=k?k(W,Z,_+"",d,f,z):U,De=be===U;if(De){var Ye=tn(Z),dt=!Ye&&Ya(Z),kt=!Ye&&!dt&&Vd(Z);be=Z,Ye||dt||kt?tn(W)?be=W:Ai(W)?be=Nr(W):dt?(De=!1,be=fA(Z,!0)):kt?(De=!1,be=pA(Z,!0)):be=[]:Rc(Z)||Ud(Z)?(be=W,Ud(W)?be=kc(W):(!mi(W)||qa(W))&&(be=MA(Z))):De=!1}De&&(z.set(Z,be),S(be,Z,w,k,z),z.delete(Z)),b_(d,_,be)}}(d,f,z,_,I_,w,S);else{var W=w?w($_(d,z),k,z+"",d,f,S):U;W===U&&(W=k),b_(d,z,W)}},Xs)}function R_(d,f){var _=d.length;if(_)return Pl(f+=f<0?_:0,_)?d[f]:U}function L0(d,f,_){f=f.length?fi(f,function(k){return tn(k)?function(z){return yc(z,1===k.length?k[0]:k)}:k}):[Ur];var w=-1;return f=fi(f,Jr(Ct())),function Ro(q,oe){var ae=q.length;for(q.sort(oe);ae--;)q[ae]=q[ae].value;return q}(th(d,function(k,z,W){return{criteria:fi(f,function(_e){return _e(k)}),index:++w,value:k}}),function(k,z){return function RO(d,f,_){for(var w=-1,S=d.criteria,k=f.criteria,z=S.length,W=_.length;++w<z;){var Z=Id(S[w],k[w]);if(Z)return w>=W?Z:Z*("desc"==_[w]?-1:1)}return d.index-f.index}(k,z,_)})}function N0(d,f,_){for(var w=-1,S=f.length,k={};++w<S;){var z=f[w],W=yc(d,z);_(W,z)&&Td(k,wc(z,d),W)}return k}function ih(d,f,_,w){var S=w?Bu:bl,k=-1,z=f.length,W=d;for(d===f&&(f=Nr(f)),_&&(W=fi(d,Jr(_)));++k<z;)for(var Z=0,_e=f[k],be=_?_(_e):_e;(Z=S(W,be,Z,w))>-1;)W!==d&&ep.call(W,Z,1),ep.call(d,Z,1);return d}function k_(d,f){for(var _=d?f.length:0,w=_-1;_--;){var S=f[_];if(_==w||S!==k){var k=S;Pl(S)?ep.call(d,S,1):pp(d,S)}}return d}function rh(d,f){return d+m_(ZE()*(f-d+1))}function O_(d,f){var _="";if(!d||f<1||f>Ba)return _;do{f%2&&(_+=d),(f=m_(f/2))&&(d+=d)}while(f);return _}function un(d,f){return j_(ss(d,f,Ur),d+"")}function B0(d){return y_(zd(d))}function U0(d,f){var _=zd(d);return uh(_,vc(f,0,_.length))}function Td(d,f,_,w){if(!mi(d))return d;for(var S=-1,k=(f=wc(f,d)).length,z=k-1,W=d;null!=W&&++S<k;){var Z=ga(f[S]),_e=_;if("__proto__"===Z||"constructor"===Z||"prototype"===Z)return d;if(S!=z){var be=W[Z];(_e=w?w(be,Z,W):U)===U&&(_e=mi(be)?be:Pl(f[S+1])?[]:{})}Ed(W,Z,_e),W=W[Z]}return d}var V0=ju?function(d,f){return ju.set(d,f),d}:Ur,fp=f_?function(d,f){return f_(d,"toString",{configurable:!0,enumerable:!1,value:zp(f),writable:!0})}:Ur;function bc(d){return uh(zd(d))}function uo(d,f,_){var w=-1,S=d.length;f<0&&(f=-f>S?0:S+f),(_=_>S?S:_)<0&&(_+=S),S=f>_?0:_-f>>>0,f>>>=0;for(var k=ae(S);++w<S;)k[w]=d[w+f];return k}function z0(d,f){var _;return Ga(d,function(w,S,k){return!(_=f(w,S,k))}),!!_}function sh(d,f,_){var w=0,S=null==d?w:d.length;if("number"==typeof f&&f==f&&S<=Wb){for(;w<S;){var k=w+S>>>1,z=d[k];null!==z&&!qs(z)&&(_?z<=f:z<f)?w=k+1:S=k}return S}return Dl(d,f,Ur,_)}function Dl(d,f,_,w){var S=0,k=null==d?0:d.length;if(0===k)return 0;for(var z=(f=_(f))!=f,W=null===f,Z=qs(f),_e=f===U;S<k;){var be=m_((S+k)/2),De=_(d[be]),Ye=De!==U,dt=null===De,kt=De==De,hn=qs(De);if(z)var Pt=w||kt;else Pt=_e?kt&&(w||Ye):W?kt&&Ye&&(w||!dt):Z?kt&&Ye&&!dt&&(w||!hn):!dt&&!hn&&(w?De<=f:De<f);Pt?S=be+1:k=be}return br(k,Fe)}function H0(d,f){for(var _=-1,w=d.length,S=0,k=[];++_<w;){var z=d[_],W=f?f(z):z;if(!_||!Fo(W,Z)){var Z=W;k[S++]=0===z?0:z}}return k}function pi(d){return"number"==typeof d?d:qs(d)?Ff:+d}function rs(d){if("string"==typeof d)return d;if(tn(d))return fi(d,rs)+"";if(qs(d))return S0?S0.call(d):"";var f=d+"";return"0"==f&&1/d==-An?"-0":f}function Tl(d,f,_){var w=-1,S=cc,k=d.length,z=!0,W=[],Z=W;if(_)z=!1,S=l_;else if(k>=Qr){var _e=f?null:xp(d);if(_e)return yr(_e);z=!1,S=Us,Z=new Sl}else Z=f?[]:W;e:for(;++w<k;){var be=d[w],De=f?f(be):be;if(be=_||0!==be?be:0,z&&De==De){for(var Ye=Z.length;Ye--;)if(Z[Ye]===De)continue e;f&&Z.push(De),W.push(be)}else S(Z,De,_)||(Z!==W&&Z.push(De),W.push(be))}return W}function pp(d,f){return null==(d=nx(d,f=wc(f,d)))||delete d[ga(Ws(f))]}function fa(d,f,_,w){return Td(d,f,_(yc(d,f)),w)}function $a(d,f,_,w){for(var S=d.length,k=w?S:-1;(w?k--:++k<S)&&f(d[k],k,d););return _?uo(d,w?0:k,w?k+1:S):uo(d,w?k+1:0,w?S:k)}function xc(d,f){var _=d;return _ instanceof on&&(_=_.value()),qf(f,function(w,S){return S.func.apply(S.thisArg,vl([w],S.args))},_)}function Il(d,f,_){var w=d.length;if(w<2)return w?Tl(d[0]):[];for(var S=-1,k=ae(w);++S<w;)for(var z=d[S],W=-1;++W<w;)W!=S&&(k[S]=Ad(k[S]||z,d[W],f,_));return Tl(gn(k,1),f,_)}function F_(d,f,_){for(var w=-1,S=d.length,k=f.length,z={};++w<S;)_(z,d[w],w<k?f[w]:U);return z}function oh(d){return Ai(d)?d:[]}function Rl(d){return"function"==typeof d?d:Ur}function wc(d,f){return tn(d)?d:dh(d,f)?[d]:sx(Yn(d))}var uA=un;function fe(d,f,_){var w=d.length;return _=_===U?w:_,!f&&_>=w?d:uo(d,f,_)}var hA=_O||function(d){return vr.clearTimeout(d)};function fA(d,f){if(f)return d.slice();var _=d.length,w=Jf?Jf(_):new d.constructor(_);return d.copy(w),w}function G0(d){var f=new d.constructor(d.byteLength);return new ps(f).set(new ps(d)),f}function pA(d,f){var _=f?G0(d.buffer):d.buffer;return new d.constructor(_,d.byteOffset,d.length)}function Id(d,f){if(d!==f){var _=d!==U,w=null===d,S=d==d,k=qs(d),z=f!==U,W=null===f,Z=f==f,_e=qs(f);if(!W&&!_e&&!k&&d>f||k&&z&&Z&&!W&&!_e||w&&z&&Z||!_&&Z||!S)return 1;if(!w&&!k&&!_e&&d<f||_e&&_&&S&&!w&&!k||W&&_&&S||!z&&S||!Z)return-1}return 0}function mA(d,f,_,w){for(var S=-1,k=d.length,z=_.length,W=-1,Z=f.length,_e=ar(k-z,0),be=ae(Z+_e),De=!w;++W<Z;)be[W]=f[W];for(;++S<z;)(De||S<k)&&(be[_[S]]=d[S]);for(;_e--;)be[W++]=d[S++];return be}function Gi(d,f,_,w){for(var S=-1,k=d.length,z=-1,W=_.length,Z=-1,_e=f.length,be=ar(k-W,0),De=ae(be+_e),Ye=!w;++S<be;)De[S]=d[S];for(var dt=S;++Z<_e;)De[dt+Z]=f[Z];for(;++z<W;)(Ye||S<k)&&(De[dt+_[z]]=d[S++]);return De}function Nr(d,f){var _=-1,w=d.length;for(f||(f=ae(w));++_<w;)f[_]=d[_];return f}function gs(d,f,_,w){var S=!_;_||(_={});for(var k=-1,z=f.length;++k<z;){var W=f[k],Z=w?w(_[W],d[W],W,_,d):U;Z===U&&(Z=d[W]),S?ua(_,W,Z):Ed(_,W,Z)}return _}function pa(d,f){return function(_,w){var S=tn(_)?mO:oA,k=f?f():{};return S(_,d,Ct(w,2),k)}}function Mc(d){return un(function(f,_){var w=-1,S=_.length,k=S>1?_[S-1]:U,z=S>2?_[2]:U;for(k=d.length>3&&"function"==typeof k?(S--,k):U,z&&vs(_[0],_[1],z)&&(k=S<3?U:k,S=1),f=Qn(f);++w<S;){var W=_[w];W&&d(f,W,w,k)}return f})}function ah(d,f){return function(_,w){if(null==_)return _;if(!Mr(_))return d(_,w);for(var S=_.length,k=f?S:-1,z=Qn(_);(f?k--:++k<S)&&!1!==w(z[k],k,z););return _}}function Rd(d){return function(f,_,w){for(var S=-1,k=Qn(f),z=w(f),W=z.length;W--;){var Z=z[d?W:++S];if(!1===_(k[Z],Z,k))break}return f}}function vA(d){return function(f){var _=wd(f=Yn(f))?fs(f):U,w=_?_[0]:f.charAt(0),S=_?fe(_,1).join(""):f.slice(1);return w[d]()+S}}function kd(d){return function(f){return qf(dw(iw(f).replace(lO,"")),d,"")}}function mp(d){return function(){var f=arguments;switch(f.length){case 0:return new d;case 1:return new d(f[0]);case 2:return new d(f[0],f[1]);case 3:return new d(f[0],f[1],f[2]);case 4:return new d(f[0],f[1],f[2],f[3]);case 5:return new d(f[0],f[1],f[2],f[3],f[4]);case 6:return new d(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new d(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=lr(d.prototype),w=d.apply(_,f);return mi(w)?w:_}}function gp(d){return function(f,_,w){var S=Qn(f);if(!Mr(f)){var k=Ct(_,3);f=Cr(f),_=function(W){return k(S[W],W,S)}}var z=d(f,_,w);return z>-1?S[k?f[z]:z]:U}}function Cc(d){return Wa(function(f){var _=f.length,w=_,S=zs.prototype.thru;for(d&&f.reverse();w--;){var k=f[w];if("function"!=typeof k)throw new Fr(kn);if(S&&!z&&"wrapper"==Mp(k))var z=new zs([],!0)}for(w=z?w:_;++w<_;){var W=Mp(k=f[w]),Z="wrapper"==W?Sc(k):U;z=Z&&Z0(Z[0])&&Z[1]==(La|Jo|ea|ta)&&!Z[4].length&&1==Z[9]?z[Mp(Z[0])].apply(z,Z[3]):1==k.length&&Z0(k)?z[W]():z.thru(k)}return function(){var _e=arguments,be=_e[0];if(z&&1==_e.length&&tn(be))return z.plant(be).value();for(var De=0,Ye=_?f[De].apply(this,_e):be;++De<_;)Ye=f[De].call(this,Ye);return Ye}})}function L_(d,f,_,w,S,k,z,W,Z,_e){var be=f&La,De=f&Tn,Ye=f&rr,dt=f&(Jo|fl),kt=f&hd,hn=Ye?U:mp(d);return function Pt(){for(var _n=arguments.length,In=ae(_n),Zs=_n;Zs--;)In[Zs]=arguments[Zs];if(dt)var dr=lh(Pt),Vr=function it(q,oe){for(var ae=q.length,Je=0;ae--;)q[ae]===oe&&++Je;return Je}(In,dr);if(w&&(In=mA(In,w,S,dt)),k&&(In=Gi(In,k,z,dt)),_n-=Vr,dt&&_n<_e){var gi=xi(In,dr);return bp(d,f,L_,Pt.placeholder,_,In,gi,W,Z,_e-_n)}var va=De?_:this,No=Ye?va[d]:d;return _n=In.length,W?In=function EA(d,f){for(var _=d.length,w=br(f.length,_),S=Nr(d);w--;){var k=f[w];d[w]=Pl(k,_)?S[k]:U}return d}(In,W):kt&&_n>1&&In.reverse(),be&&Z<_n&&(In.length=Z),this&&this!==vr&&this instanceof Pt&&(No=hn||mp(No)),No.apply(va,In)}}function N_(d,f){return function(_,w){return function Zu(d,f,_,w){return is(d,function(S,k,z){f(w,_(S),k,z)}),w}(_,d,f(w),{})}}function _p(d,f){return function(_,w){var S;if(_===U&&w===U)return f;if(_!==U&&(S=_),w!==U){if(S===U)return w;"string"==typeof _||"string"==typeof w?(_=rs(_),w=rs(w)):(_=pi(_),w=pi(w)),S=d(_,w)}return S}}function B_(d){return Wa(function(f){return f=fi(f,Jr(Ct())),un(function(_){var w=this;return d(f,function(S){return Cn(S,w,_)})})})}function vp(d,f){var _=(f=f===U?" ":rs(f)).length;if(_<2)return _?O_(f,d):f;var w=O_(f,p_(d/uc(f)));return wd(f)?fe(fs(w),0,d).join(""):w.slice(0,d)}function $0(d){return function(f,_,w){return w&&"number"!=typeof w&&vs(f,_,w)&&(_=w=U),f=Ol(f),_===U?(_=f,f=0):_=Ol(_),function P_(d,f,_,w){for(var S=-1,k=ar(p_((f-d)/(_||1)),0),z=ae(k);k--;)z[w?k:++S]=d,d+=_;return z}(f,_,w=w===U?f<_?1:-1:Ol(w),d)}}function yp(d){return function(f,_){return"string"==typeof f&&"string"==typeof _||(f=fo(f),_=fo(_)),d(f,_)}}function bp(d,f,_,w,S,k,z,W,Z,_e){var be=f&Jo;f|=be?ea:pl,(f&=~(be?pl:ea))&oc||(f&=~(Tn|rr));var hn=[d,f,S,be?k:U,be?z:U,be?U:k,be?U:z,W,Z,_e],Pt=_.apply(U,hn);return Z0(d)&&W_(Pt,hn),Pt.placeholder=w,ix(Pt,d,f)}function Pd(d){var f=wi[d];return function(_,w){if(_=fo(_),(w=null==w?0:br(cn(w),292))&&KE(_)){var S=(Yn(_)+"e").split("e");return+((S=(Yn(f(S[0]+"e"+(+S[1]+w)))+"e").split("e"))[0]+"e"+(+S[1]-w))}return f(_)}}var xp=mc&&1/yr(new mc([,-0]))[1]==An?function(d){return new mc(d)}:Hp;function _s(d){return function(f){var _=wr(f);return _==Eo?Pr(f):_==Ao?function Md(q){var oe=-1,ae=Array(q.size);return q.forEach(function(Je){ae[++oe]=[Je,Je]}),ae}(f):function Xf(q,oe){return fi(oe,function(ae){return[ae,q[ae]]})}(f,d(f))}}function ma(d,f,_,w,S,k,z,W){var Z=f&rr;if(!Z&&"function"!=typeof d)throw new Fr(kn);var _e=w?w.length:0;if(_e||(f&=~(ea|pl),w=S=U),z=z===U?z:ar(cn(z),0),W=W===U?W:cn(W),_e-=S?S.length:0,f&pl){var be=w,De=S;w=S=U}var Ye=Z?U:Sc(d),dt=[d,f,_,w,S,be,De,k,z,W];if(Ye&&function J0(d,f){var _=d[1],w=f[1],S=_|w;if(!(S<(Tn|rr|La))&&!(w==La&&_==Jo||w==La&&_==ta&&d[7].length<=f[8]||w==(La|ta)&&f[7].length<=f[8]&&_==Jo))return d;w&Tn&&(d[2]=f[2],S|=_&Tn?0:oc);var W=f[3];if(W){var Z=d[3];d[3]=Z?mA(Z,W,f[4]):W,d[4]=Z?xi(d[3],ui):f[4]}(W=f[5])&&(d[5]=(Z=d[5])?Gi(Z,W,f[6]):W,d[6]=Z?xi(d[5],ui):f[6]),(W=f[7])&&(d[7]=W),w&La&&(d[8]=null==d[8]?f[8]:br(d[8],f[8])),null==d[9]&&(d[9]=f[9]),d[0]=f[0],d[1]=S}(dt,Ye),d=dt[0],f=dt[1],_=dt[2],w=dt[3],S=dt[4],!(W=dt[9]=dt[9]===U?Z?0:d.length:ar(dt[9]-_e,0))&&f&(Jo|fl)&&(f&=~(Jo|fl)),f&&f!=Tn)kt=f==Jo||f==fl?function $s(d,f,_){var w=mp(d);return function S(){for(var k=arguments.length,z=ae(k),W=k,Z=lh(S);W--;)z[W]=arguments[W];var _e=k<3&&z[0]!==Z&&z[k-1]!==Z?[]:xi(z,Z);return(k-=_e.length)<_?bp(d,f,L_,S.placeholder,U,z,_e,U,U,_-k):Cn(this&&this!==vr&&this instanceof S?w:d,this,z)}}(d,f,W):f!=ea&&f!=(Tn|ea)||S.length?L_.apply(U,dt):function yA(d,f,_,w){var S=f&Tn,k=mp(d);return function z(){for(var W=-1,Z=arguments.length,_e=-1,be=w.length,De=ae(be+Z),Ye=this&&this!==vr&&this instanceof z?k:d;++_e<be;)De[_e]=w[_e];for(;Z--;)De[_e++]=arguments[++W];return Cn(Ye,S?_:this,De)}}(d,f,_,w);else var kt=function _A(d,f,_){var w=f&Tn,S=mp(d);return function k(){return(this&&this!==vr&&this instanceof k?S:d).apply(w?_:this,arguments)}}(d,f,_);return ix((Ye?V0:W_)(kt,dt),d,f)}function Oo(d,f,_,w){return d===U||Fo(d,la[_])&&!ei.call(w,_)?f:d}function W0(d,f,_,w,S,k){return mi(d)&&mi(f)&&(k.set(f,d),I_(d,f,U,W0,k),k.delete(f)),d}function j0(d){return Rc(d)?U:d}function Od(d,f,_,w,S,k){var z=_&Fs,W=d.length,Z=f.length;if(W!=Z&&!(z&&Z>W))return!1;var _e=k.get(d),be=k.get(f);if(_e&&be)return _e==f&&be==d;var De=-1,Ye=!0,dt=_&So?new Sl:U;for(k.set(d,f),k.set(f,d);++De<W;){var kt=d[De],hn=f[De];if(w)var Pt=z?w(hn,kt,De,f,d,k):w(kt,hn,De,d,f,k);if(Pt!==U){if(Pt)continue;Ye=!1;break}if(dt){if(!yl(f,function(_n,In){if(!Us(dt,In)&&(kt===_n||S(kt,_n,_,w,k)))return dt.push(In)})){Ye=!1;break}}else if(kt!==hn&&!S(kt,hn,_,w,k)){Ye=!1;break}}return k.delete(d),k.delete(f),Ye}function Wa(d){return j_(ss(d,U,Ep),d+"")}function U_(d){return Ku(d,Cr,V_)}function kl(d){return Ku(d,Xs,ch)}var Sc=ju?function(d){return ju.get(d)}:Hp;function Mp(d){for(var f=d.name+"",_=gc[f],w=ei.call(gc,f)?_.length:0;w--;){var S=_[w],k=S.func;if(null==k||k==d)return S.name}return f}function lh(d){return(ei.call(R,"placeholder")?R:d).placeholder}function Ct(){var d=R.iteratee||pw;return d=d===pw?D_:d,arguments.length?d(arguments[0],arguments[1]):d}function Cp(d,f){var _=d.__data__;return function kO(d){var f=typeof d;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==d:null===d}(f)?_["string"==typeof f?"string":"hash"]:_.map}function q0(d){for(var f=Cr(d),_=f.length;_--;){var w=f[_],S=d[w];f[_]=[w,S,Q0(S)]}return f}function Ec(d,f){var _=function qt(q,oe){return null==q?U:q[oe]}(d,f);return lp(_)?_:U}var V_=w0?function(d){return null==d?[]:(d=Qn(d),sa(w0(d),function(f){return lo.call(d,f)}))}:jp,ch=w0?function(d){for(var f=[];d;)vl(f,V_(d)),d=wl(d);return f}:jp,wr=cr;function wA(d,f,_){for(var w=-1,S=(f=wc(f,d)).length,k=!1;++w<S;){var z=ga(f[w]);if(!(k=null!=d&&_(d,z)))break;d=d[z]}return k||++w!=S?k:!!(S=null==d?0:d.length)&&vh(S)&&Pl(z,S)&&(tn(d)||Ud(d))}function MA(d){return"function"!=typeof d.constructor||Sp(d)?{}:lr(wl(d))}function z_(d){return tn(d)||Ud(d)||!!(XE&&d&&d[XE])}function Pl(d,f){var _=typeof d;return!!(f=f??Ba)&&("number"==_||"symbol"!=_&&sO.test(d))&&d>-1&&d%1==0&&d<f}function vs(d,f,_){if(!mi(_))return!1;var w=typeof f;return!!("number"==w?Mr(_)&&Pl(f,_.length):"string"==w&&f in _)&&Fo(_[f],d)}function dh(d,f){if(tn(d))return!1;var _=typeof d;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=d&&!qs(d))||AE.test(d)||!Qb.test(d)||null!=f&&d in Qn(f)}function Z0(d){var f=Mp(d),_=R[f];if("function"!=typeof _||!(f in on.prototype))return!1;if(d===_)return!0;var w=Sc(_);return!!w&&d===w[0]}(Va&&wr(new Va(new ArrayBuffer(1)))!=gd||Gu&&wr(new Gu)!=Eo||Mi&&wr(Mi.resolve())!=xE||mc&&wr(new mc)!=Ao||$u&&wr(new $u)!=md)&&(wr=function(d){var f=cr(d),_=f==ml?d.constructor:U,w=_?$i(_):"";if(w)switch(w){case QE:return gd;case g_:return Eo;case JE:return xE;case co:return Ao;case C0:return md}return f});var OO=Vu?qa:xh;function Sp(d){var f=d&&d.constructor;return d===("function"==typeof f&&f.prototype||la)}function Q0(d){return d==d&&!mi(d)}function H_(d,f){return function(_){return null!=_&&_[d]===f&&(f!==U||d in Qn(_))}}function ss(d,f,_){return f=ar(f===U?d.length-1:f,0),function(){for(var w=arguments,S=-1,k=ar(w.length-f,0),z=ae(k);++S<k;)z[S]=w[f+S];S=-1;for(var W=ae(f+1);++S<f;)W[S]=w[S];return W[f]=_(z),Cn(d,this,W)}}function nx(d,f){return f.length<2?d:yc(d,uo(f,0,-1))}function $_(d,f){if(("constructor"!==f||"function"!=typeof d[f])&&"__proto__"!=f)return d[f]}var W_=rx(V0),Ac=yO||function(d,f){return vr.setTimeout(d,f)},j_=rx(fp);function ix(d,f,_){var w=f+"";return j_(d,function SA(d,f){var _=f.length;if(!_)return d;var w=_-1;return f[w]=(_>1?"& ":"")+f[w],f=f.join(_>2?", ":" "),d.replace(DE,"{\n/* [wrapped with "+f+"] */\n")}(w,function Y_(d,f){return Do(jb,function(_){var w="_."+_[0];f&_[1]&&!cc(d,w)&&d.push(w)}),d.sort()}(function X0(d){var f=d.match(TE);return f?f[1].split(IE):[]}(w),_)))}function rx(d){var f=0,_=0;return function(){var w=M0(),S=Wg-(w-_);if(_=w,S>0){if(++f>=gE)return arguments[0]}else f=0;return d.apply(U,arguments)}}function uh(d,f){var _=-1,w=d.length,S=w-1;for(f=f===U?w:f;++_<f;){var k=rh(_,S),z=d[k];d[k]=d[_],d[_]=z}return d.length=f,d}var sx=function G_(d){var f=mv(d,function(w){return 500===_.size&&_.clear(),w}),_=f.cache;return f}(function(d){var f=[];return 46===d.charCodeAt(0)&&f.push(""),d.replace(Jb,function(_,w,S,k){f.push(S?k.replace(kE,"$1"):w||_)}),f});function ga(d){if("string"==typeof d||qs(d))return d;var f=d+"";return"0"==f&&1/d==-An?"-0":f}function $i(d){if(null!=d){try{return Jn.call(d)}catch{}try{return d+""}catch{}}return""}function q_(d){if(d instanceof on)return d.clone();var f=new zs(d.__wrapped__,d.__chain__);return f.__actions__=Nr(d.__actions__),f.__index__=d.__index__,f.__values__=d.__values__,f}var ox=un(function(d,f){return Ai(d)?Ad(d,gn(f,1,Ai,!0)):[]}),ax=un(function(d,f){var _=Ws(f);return Ai(_)&&(_=U),Ai(d)?Ad(d,gn(f,1,Ai,!0),Ct(_,2)):[]}),AA=un(function(d,f){var _=Ws(f);return Ai(_)&&(_=U),Ai(d)?Ad(d,gn(f,1,Ai,!0),U,_):[]});function ux(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var S=null==_?0:cn(_);return S<0&&(S=ar(w+S,0)),dc(d,Ct(f,3),S)}function hx(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var S=w-1;return _!==U&&(S=cn(_),S=_<0?ar(w+S,0):br(S,w-1)),dc(d,Ct(f,3),S,!0)}function Ep(d){return null!=d&&d.length?gn(d,1):[]}function fx(d){return d&&d.length?d[0]:U}var Q_=un(function(d){var f=fi(d,oh);return f.length&&f[0]===d[0]?Al(f):[]}),px=un(function(d){var f=Ws(d),_=fi(d,oh);return f===Ws(_)?f=U:_.pop(),_.length&&_[0]===d[0]?Al(_,Ct(f,2)):[]}),Fd=un(function(d){var f=Ws(d),_=fi(d,oh);return(f="function"==typeof f?f:U)&&_.pop(),_.length&&_[0]===d[0]?Al(_,U,f):[]});function Ws(d){var f=null==d?0:d.length;return f?d[f-1]:U}var PA=un(mx);function mx(d,f){return d&&d.length&&f&&f.length?ih(d,f):d}var LA=Wa(function(d,f){var _=null==d?0:d.length,w=Xu(d,f);return k_(d,fi(f,function(S){return Pl(S,_)?+S:S}).sort(Id)),w});function Ap(d){return null==d?d:CO.call(d)}var xx=un(function(d){return Tl(gn(d,1,Ai,!0))}),wx=un(function(d){var f=Ws(d);return Ai(f)&&(f=U),Tl(gn(d,1,Ai,!0),Ct(f,2))}),Mx=un(function(d){var f=Ws(d);return f="function"==typeof f?f:U,Tl(gn(d,1,Ai,!0),U,f)});function Ld(d){if(!d||!d.length)return[];var f=0;return d=sa(d,function(_){if(Ai(_))return f=ar(_.length,f),!0}),Nn(f,function(_){return fi(d,c_(_))})}function rv(d,f){if(!d||!d.length)return[];var _=Ld(d);return null==f?_:fi(_,function(w){return Cn(f,U,w)})}var sv=un(function(d,f){return Ai(d)?Ad(d,f):[]}),ov=un(function(d){return Il(sa(d,Ai))}),av=un(function(d){var f=Ws(d);return Ai(f)&&(f=U),Il(sa(d,Ai),Ct(f,2))}),ph=un(function(d){var f=Ws(d);return f="function"==typeof f?f:U,Il(sa(d,Ai),U,f)}),HA=un(Ld),$A=un(function(d){var f=d.length,_=f>1?d[f-1]:U;return _="function"==typeof _?(d.pop(),_):U,rv(d,_)});function Ex(d){var f=R(d);return f.__chain__=!0,f}function mh(d,f){return f(d)}var Ip=Wa(function(d){var f=d.length,_=f?d[0]:0,w=this.__wrapped__,S=function(k){return Xu(k,d)};return!(f>1||this.__actions__.length)&&w instanceof on&&Pl(_)?((w=w.slice(_,+_+(f?1:0))).__actions__.push({func:mh,args:[S],thisArg:U}),new zs(w,this.__chain__).thru(function(k){return f&&!k.length&&k.push(U),k})):this.thru(S)}),qA=pa(function(d,f,_){ei.call(d,_)?++d[_]:ua(d,_,1)}),dv=gp(ux),Tx=gp(hx);function kx(d,f){return(tn(d)?Do:Ga)(d,Ct(f,3))}function Px(d,f){return(tn(d)?gO:sp)(d,Ct(f,3))}var XA=pa(function(d,f,_){ei.call(d,_)?d[_].push(f):ua(d,_,[f])}),ZA=un(function(d,f,_){var w=-1,S="function"==typeof f,k=Mr(d)?ae(d.length):[];return Ga(d,function(z){k[++w]=S?Cn(f,z,_):Qu(z,f,_)}),k}),js=pa(function(d,f,_){ua(d,_,f)});function Ys(d,f){return(tn(d)?fi:th)(d,Ct(f,3))}var JA=pa(function(d,f,_){d[_?0:1].push(f)},function(){return[[],[]]}),aD=un(function(d,f){if(null==d)return[];var _=f.length;return _>1&&vs(d,f[0],f[1])?f=[]:_>2&&vs(f[0],f[1],f[2])&&(f=[f[0]]),L0(d,gn(f,1),[])}),Ic=vO||function(){return vr.Date.now()};function Bd(d,f,_){return f=_?U:f,ma(d,La,U,U,U,U,f=d&&null==f?d.length:f)}function uv(d,f){var _;if("function"!=typeof f)throw new Fr(kn);return d=cn(d),function(){return--d>0&&(_=f.apply(this,arguments)),d<=1&&(f=U),_}}var kp=un(function(d,f,_){var w=Tn;if(_.length){var S=xi(_,lh(kp));w|=ea}return ma(d,w,f,_,S)}),hv=un(function(d,f,_){var w=Tn|rr;if(_.length){var S=xi(_,lh(hv));w|=ea}return ma(f,w,d,_,S)});function dD(d,f,_){var w,S,k,z,W,Z,_e=0,be=!1,De=!1,Ye=!0;if("function"!=typeof d)throw new Fr(kn);function dt(gi){var va=w,No=S;return w=S=U,_e=gi,z=d.apply(No,va)}function Pt(gi){var va=gi-Z;return Z===U||va>=f||va<0||De&&gi-_e>=k}function _n(){var gi=Ic();if(Pt(gi))return In(gi);W=Ac(_n,function hn(gi){var _1=f-(gi-Z);return De?br(_1,k-(gi-_e)):_1}(gi))}function In(gi){return W=U,Ye&&w?dt(gi):(w=S=U,z)}function Vr(){var gi=Ic(),va=Pt(gi);if(w=arguments,S=this,Z=gi,va){if(W===U)return function kt(gi){return _e=gi,W=Ac(_n,f),be?dt(gi):z}(Z);if(De)return hA(W),W=Ac(_n,f),dt(Z)}return W===U&&(W=Ac(_n,f)),z}return f=fo(f)||0,mi(_)&&(be=!!_.leading,k=(De="maxWait"in _)?ar(fo(_.maxWait)||0,f):k,Ye="trailing"in _?!!_.trailing:Ye),Vr.cancel=function Zs(){W!==U&&hA(W),_e=0,w=Z=S=W=U},Vr.flush=function dr(){return W===U?z:In(Ic())},Vr}var fv=un(function(d,f){return C_(d,1,f)}),pv=un(function(d,f,_){return C_(d,fo(f)||0,_)});function mv(d,f){if("function"!=typeof d||null!=f&&"function"!=typeof f)throw new Fr(kn);var _=function(){var w=arguments,S=f?f.apply(this,w):w[0],k=_.cache;if(k.has(S))return k.get(S);var z=d.apply(this,w);return _.cache=k.set(S,z)||k,z};return _.cache=new(mv.Cache||za),_}function gh(d){if("function"!=typeof d)throw new Fr(kn);return function(){var f=arguments;switch(f.length){case 0:return!d.call(this);case 1:return!d.call(this,f[0]);case 2:return!d.call(this,f[0],f[1]);case 3:return!d.call(this,f[0],f[1],f[2])}return!d.apply(this,f)}}mv.Cache=za;var hD=uA(function(d,f){var _=(f=1==f.length&&tn(f[0])?fi(f[0],Jr(Ct())):fi(gn(f,1),Jr(Ct()))).length;return un(function(w){for(var S=-1,k=br(w.length,_);++S<k;)w[S]=f[S].call(this,w[S]);return Cn(d,this,w)})}),gv=un(function(d,f){var _=xi(f,lh(gv));return ma(d,ea,U,f,_)}),Fx=un(function(d,f){var _=xi(f,lh(Fx));return ma(d,pl,U,f,_)}),Lx=Wa(function(d,f){return ma(d,ta,U,U,U,f)});function Fo(d,f){return d===f||d!=d&&f!=f}var vD=yp(Dd),Ux=yp(function(d,f){return d>=f}),Ud=cA(function(){return arguments}())?cA:function(d){return ti(d)&&ei.call(d,"callee")&&!lo.call(d,"callee")},tn=ae.isArray,_h=Tt?Jr(Tt):function A_(d){return ti(d)&&cr(d)==Iu};function Mr(d){return null!=d&&vh(d.length)&&!qa(d)}function Ai(d){return ti(d)&&Mr(d)}var Ya=bO||xh,BO=Yf?Jr(Yf):function EO(d){return ti(d)&&cr(d)==ac};function Gx(d){if(!ti(d))return!1;var f=cr(d);return f==fd||f==bE||"string"==typeof d.message&&"string"==typeof d.name&&!Rc(d)}function qa(d){if(!mi(d))return!1;var f=cr(d);return f==Lf||f==Yb||f==yE||f==wE}function Fp(d){return"number"==typeof d&&d==cn(d)}function vh(d){return"number"==typeof d&&d>-1&&d%1==0&&d<=Ba}function mi(d){var f=typeof d;return null!=d&&("object"==f||"function"==f)}function ti(d){return null!=d&&"object"==typeof d}var $x=m0?Jr(m0):function AO(d){return ti(d)&&wr(d)==Eo};function wv(d){return"number"==typeof d||ti(d)&&cr(d)==Nf}function Rc(d){if(!ti(d)||cr(d)!=ml)return!1;var f=wl(d);if(null===f)return!0;var _=ei.call(f,"constructor")&&f.constructor;return"function"==typeof _&&_ instanceof _&&Jn.call(_)==Qf}var Mv=Bs?Jr(Bs):function P0(d){return ti(d)&&cr(d)==pd},Cv=a_?Jr(a_):function O0(d){return ti(d)&&wr(d)==Ao};function Ka(d){return"string"==typeof d||!tn(d)&&ti(d)&&cr(d)==lc}function qs(d){return"symbol"==typeof d||ti(d)&&cr(d)==Bf}var Vd=WE?Jr(WE):function eh(d){return ti(d)&&vh(d.length)&&!!_t[cr(d)]},Wx=yp(T_),CD=yp(function(d,f){return d<=f});function Ev(d){if(!d)return[];if(Mr(d))return Ka(d)?fs(d):Nr(d);if(Hu&&d[Hu])return function xe(q){for(var oe,ae=[];!(oe=q.next()).done;)ae.push(oe.value);return ae}(d[Hu]());var f=wr(d);return(f==Eo?Pr:f==Ao?yr:zd)(d)}function Ol(d){return d?(d=fo(d))===An||d===-An?(d<0?-1:1)*vE:d==d?d:0:0===d?d:0}function cn(d){var f=Ol(d),_=f%1;return f==f?_?f-_:f:0}function Fl(d){return d?vc(cn(d),0,na):0}function fo(d){if("number"==typeof d)return d;if(qs(d))return Ff;if(mi(d)){var f="function"==typeof d.valueOf?d.valueOf():d;d=mi(f)?f+"":f}if("string"!=typeof d)return 0===d?d:+d;d=Kf(d);var _=qi.test(d);return _||Ls.test(d)?$f(d.slice(2),_?2:8):OE.test(d)?Ff:+d}function kc(d){return gs(d,Xs(d))}function Yn(d){return null==d?"":rs(d)}var yh=Mc(function(d,f){if(Sp(f)||Mr(f))gs(f,Cr(f),d);else for(var _ in f)ei.call(f,_)&&Ed(d,_,f[_])}),_a=Mc(function(d,f){gs(f,Xs(f),d)}),Bp=Mc(function(d,f,_,w){gs(f,Xs(f),d,w)}),SD=Mc(function(d,f,_,w){gs(f,Cr(f),d,w)}),Pc=Wa(Xu),Av=un(function(d,f){d=Qn(d);var _=-1,w=f.length,S=w>2?f[2]:U;for(S&&vs(f[0],f[1],S)&&(w=1);++_<w;)for(var k=f[_],z=Xs(k),W=-1,Z=z.length;++W<Z;){var _e=z[W],be=d[_e];(be===U||Fo(be,la[_e])&&!ei.call(d,_e))&&(d[_e]=k[_e])}return d}),Dv=un(function(d){return d.push(U,W0),Cn(Rv,U,d)});function Iv(d,f,_){var w=null==d?U:yc(d,f);return w===U?_:w}function Ll(d,f){return null!=d&&wA(d,f,R0)}var Qa=N_(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=fc.call(f)),d[f]=_},zp(Ur)),OD=N_(function(d,f,_){null!=f&&"function"!=typeof f.toString&&(f=fc.call(f)),ei.call(d,f)?d[f].push(_):d[f]=[_]},Ct),FD=un(Qu);function Cr(d){return Mr(d)?da(d):cp(d)}function Xs(d){return Mr(d)?da(d,!0):function dp(d){if(!mi(d))return function ex(d){var f=[];if(null!=d)for(var _ in Qn(d))f.push(_);return f}(d);var f=Sp(d),_=[];for(var w in d)"constructor"==w&&(f||!ei.call(d,w))||_.push(w);return _}(d)}var Yx=Mc(function(d,f,_){I_(d,f,_)}),Rv=Mc(function(d,f,_,w){I_(d,f,_,w)}),LD=Wa(function(d,f){var _={};if(null==d)return _;var w=!1;f=fi(f,function(k){return k=wc(k,d),w||(w=k.length>1),k}),gs(d,kl(d),_),w&&(_=Gs(_,hi|hs|Os,j0));for(var S=f.length;S--;)pp(_,f[S]);return _}),ND=Wa(function(d,f){return null==d?{}:function ha(d,f){return N0(d,f,function(_,w){return Ll(d,w)})}(d,f)});function Xx(d,f){if(null==d)return{};var _=fi(kl(d),function(w){return[w]});return f=Ct(f),N0(d,_,function(w,S){return f(w,S[0])})}var Zx=_s(Cr),Qx=_s(Xs);function zd(d){return null==d?[]:Zf(d,Cr(d))}var tw=kd(function(d,f,_){return f=f.toLowerCase(),d+(_?nw(f):f)});function nw(d){return Vp(Yn(d).toLowerCase())}function iw(d){return(d=Yn(d))&&d.replace(FE,Uu).replace(cO,"")}var $D=kd(function(d,f,_){return d+(_?"-":"")+f.toLowerCase()}),WD=kd(function(d,f,_){return d+(_?" ":"")+f.toLowerCase()}),VO=vA("toLowerCase"),YD=kd(function(d,f,_){return d+(_?"_":"")+f.toLowerCase()}),HO=kd(function(d,f,_){return d+(_?" ":"")+Vp(f)}),ZD=kd(function(d,f,_){return d+(_?" ":"")+f.toUpperCase()}),Vp=vA("toUpperCase");function dw(d,f,_){return d=Yn(d),(f=_?U:f)===U?function b0(q){return $E.test(q)}(d)?function Po(q){return q.match(GE)||[]}(d):function g0(q){return q.match(RE)||[]}(d):d.match(f)||[]}var uw=un(function(d,f){try{return Cn(d,U,f)}catch(_){return Gx(_)?_:new Be(_)}}),QD=Wa(function(d,f){return Do(f,function(_){_=ga(_),ua(d,_,kp(d[_],d))}),d});function zp(d){return function(){return d}}var hw=Cc(),fw=Cc(!0);function Ur(d){return d}function pw(d){return D_("function"==typeof d?d:Gs(d,hi))}var WO=un(function(d,f){return function(_){return Qu(_,d,f)}}),A=un(function(d,f){return function(_){return Qu(d,_,f)}});function po(d,f,_){var w=Cr(f),S=ap(f,w);null==_&&(!mi(f)||!S.length&&w.length)&&(_=f,f=d,d=this,S=ap(f,Cr(f)));var k=!(mi(_)&&"chain"in _&&!_.chain),z=qa(d);return Do(S,function(W){var Z=f[W];d[W]=Z,z&&(d.prototype[W]=function(){var _e=this.__chain__;if(k||_e){var be=d(this.__wrapped__);return(be.__actions__=Nr(this.__actions__)).push({func:Z,args:arguments,thisArg:d}),be.__chain__=_e,be}return Z.apply(d,vl([this.value()],arguments))})}),d}function Hp(){}var o1=B_(fi),Gp=B_(bd),Gd=B_(yl);function $p(d){return dh(d)?c_(ga(d)):function hp(d){return function(f){return yc(f,d)}}(d)}var Fv=$0(),Wp=$0(!0);function jp(){return[]}function xh(){return!1}var gw=_p(function(d,f){return d+f},0),c1=Pd("ceil"),_w=_p(function(d,f){return d/f},1),vw=Pd("floor"),Uv=_p(function(d,f){return d*f},1),yw=Pd("round"),p1=_p(function(d,f){return d-f},0);return R.after=function ja(d,f){if("function"!=typeof f)throw new Fr(kn);return d=cn(d),function(){if(--d<1)return f.apply(this,arguments)}},R.ary=Bd,R.assign=yh,R.assignIn=_a,R.assignInWith=Bp,R.assignWith=SD,R.at=Pc,R.before=uv,R.bind=kp,R.bindAll=QD,R.bindKey=hv,R.castArray=function pD(){if(!arguments.length)return[];var d=arguments[0];return tn(d)?d:[d]},R.chain=Ex,R.chunk=function X_(d,f,_){f=(_?vs(d,f,_):f===U)?1:ar(cn(f),0);var w=null==d?0:d.length;if(!w||f<1)return[];for(var S=0,k=0,z=ae(p_(w/f));S<w;)z[k++]=uo(d,S,S+=f);return z},R.compact=function Br(d){for(var f=-1,_=null==d?0:d.length,w=0,S=[];++f<_;){var k=d[f];k&&(S[w++]=k)}return S},R.concat=function hh(){var d=arguments.length;if(!d)return[];for(var f=ae(d-1),_=arguments[0],w=d;w--;)f[w-1]=arguments[w];return vl(tn(_)?Nr(_):[_],gn(f,1))},R.cond=function JD(d){var f=null==d?0:d.length,_=Ct();return d=f?fi(d,function(w){if("function"!=typeof w[1])throw new Fr(kn);return[_(w[0]),w[1]]}):[],un(function(w){for(var S=-1;++S<f;){var k=d[S];if(Cn(k[0],this,w))return Cn(k[1],this,w)}})},R.conforms=function e1(d){return function w_(d){var f=Cr(d);return function(_){return M_(_,d,f)}}(Gs(d,hi))},R.constant=zp,R.countBy=qA,R.create=function ED(d,f){var _=lr(d);return null==f?_:rp(_,f)},R.curry=function lD(d,f,_){var w=ma(d,Jo,U,U,U,U,U,f=_?U:f);return w.placeholder=lD.placeholder,w},R.curryRight=function cD(d,f,_){var w=ma(d,fl,U,U,U,U,U,f=_?U:f);return w.placeholder=cD.placeholder,w},R.debounce=dD,R.defaults=Av,R.defaultsDeep=Dv,R.defer=fv,R.delay=pv,R.difference=ox,R.differenceBy=ax,R.differenceWith=AA,R.drop=function lx(d,f,_){var w=null==d?0:d.length;return w?uo(d,(f=_||f===U?1:cn(f))<0?0:f,w):[]},R.dropRight=function DA(d,f,_){var w=null==d?0:d.length;return w?uo(d,0,(f=w-(f=_||f===U?1:cn(f)))<0?0:f):[]},R.dropRightWhile=function cx(d,f){return d&&d.length?$a(d,Ct(f,3),!0,!0):[]},R.dropWhile=function TA(d,f){return d&&d.length?$a(d,Ct(f,3),!0):[]},R.fill=function dx(d,f,_,w){var S=null==d?0:d.length;return S?(_&&"number"!=typeof _&&vs(d,f,_)&&(_=0,w=S),function ns(d,f,_,w){var S=d.length;for((_=cn(_))<0&&(_=-_>S?0:S+_),(w=w===U||w>S?S:cn(w))<0&&(w+=S),w=_>w?0:Fl(w);_<w;)d[_++]=f;return d}(d,f,_,w)):[]},R.filter=function Rp(d,f){return(tn(d)?sa:El)(d,Ct(f,3))},R.flatMap=function Ix(d,f){return gn(Ys(d,f),1)},R.flatMapDeep=function Rx(d,f){return gn(Ys(d,f),An)},R.flatMapDepth=function Tc(d,f,_){return _=_===U?1:cn(_),gn(Ys(d,f),_)},R.flatten=Ep,R.flattenDeep=function K_(d){return null!=d&&d.length?gn(d,An):[]},R.flattenDepth=function IA(d,f){return null!=d&&d.length?gn(d,f=f===U?1:cn(f)):[]},R.flip=function NO(d){return ma(d,hd)},R.flow=hw,R.flowRight=fw,R.fromPairs=function fh(d){for(var f=-1,_=null==d?0:d.length,w={};++f<_;){var S=d[f];w[S[0]]=S[1]}return w},R.functions=function RD(d){return null==d?[]:ap(d,Cr(d))},R.functionsIn=function kD(d){return null==d?[]:ap(d,Xs(d))},R.groupBy=XA,R.initial=function Z_(d){return null!=d&&d.length?uo(d,0,-1):[]},R.intersection=Q_,R.intersectionBy=px,R.intersectionWith=Fd,R.invert=Qa,R.invertBy=OD,R.invokeMap=ZA,R.iteratee=pw,R.keyBy=js,R.keys=Cr,R.keysIn=Xs,R.map=Ys,R.mapKeys=function jx(d,f){var _={};return f=Ct(f,3),is(d,function(w,S,k){ua(_,f(w,S,k),w)}),_},R.mapValues=function UO(d,f){var _={};return f=Ct(f,3),is(d,function(w,S,k){ua(_,S,f(w,S,k))}),_},R.matches=function Ov(d){return up(Gs(d,hi))},R.matchesProperty=function n1(d,f){return nh(d,Gs(f,hi))},R.memoize=mv,R.merge=Yx,R.mergeWith=Rv,R.method=WO,R.methodOf=A,R.mixin=po,R.negate=gh,R.nthArg=function s1(d){return d=cn(d),un(function(f){return R_(f,d)})},R.omit=LD,R.omitBy=function qx(d,f){return Xx(d,gh(Ct(f)))},R.once=function uD(d){return uv(2,d)},R.orderBy=function QA(d,f,_,w){return null==d?[]:(tn(f)||(f=null==f?[]:[f]),tn(_=w?U:_)||(_=null==_?[]:[_]),L0(d,f,_))},R.over=o1,R.overArgs=hD,R.overEvery=Gp,R.overSome=Gd,R.partial=gv,R.partialRight=Fx,R.partition=JA,R.pick=ND,R.pickBy=Xx,R.property=$p,R.propertyOf=function bh(d){return function(f){return null==d?U:yc(d,f)}},R.pull=PA,R.pullAll=mx,R.pullAllBy=function OA(d,f,_){return d&&d.length&&f&&f.length?ih(d,f,Ct(_,2)):d},R.pullAllWith=function FA(d,f,_){return d&&d.length&&f&&f.length?ih(d,f,U,_):d},R.pullAt=LA,R.range=Fv,R.rangeRight=Wp,R.rearg=Lx,R.reject=function nD(d,f){return(tn(d)?sa:El)(d,gh(Ct(f,3)))},R.remove=function NA(d,f){var _=[];if(!d||!d.length)return _;var w=-1,S=[],k=d.length;for(f=Ct(f,3);++w<k;){var z=d[w];f(z,w,d)&&(_.push(z),S.push(w))}return k_(d,S),_},R.rest=function Pp(d,f){if("function"!=typeof d)throw new Fr(kn);return un(d,f=f===U?f:cn(f))},R.reverse=Ap,R.sampleSize=function Ox(d,f,_){return f=(_?vs(d,f,_):f===U)?1:cn(f),(tn(d)?Sd:U0)(d,f)},R.set=function BD(d,f,_){return null==d?d:Td(d,f,_)},R.setWith=function Kx(d,f,_,w){return w="function"==typeof w?w:U,null==d?d:Td(d,f,_,w)},R.shuffle=function rD(d){return(tn(d)?Ha:bc)(d)},R.slice=function tv(d,f,_){var w=null==d?0:d.length;return w?(_&&"number"!=typeof _&&vs(d,f,_)?(f=0,_=w):(f=null==f?0:cn(f),_=_===U?w:cn(_)),uo(d,f,_)):[]},R.sortBy=aD,R.sortedUniq=function Dc(d){return d&&d.length?H0(d):[]},R.sortedUniqBy=function yx(d,f){return d&&d.length?H0(d,Ct(f,2)):[]},R.split=function zO(d,f,_){return _&&"number"!=typeof _&&vs(d,f,_)&&(f=_=U),(_=_===U?na:_>>>0)?(d=Yn(d))&&("string"==typeof f||null!=f&&!Mv(f))&&!(f=rs(f))&&wd(d)?fe(fs(d),0,_):d.split(f,_):[]},R.spread=function Nx(d,f){if("function"!=typeof d)throw new Fr(kn);return f=null==f?0:ar(cn(f),0),un(function(_){var w=_[f],S=fe(_,0,f);return w&&vl(S,w),Cn(d,this,S)})},R.tail=function bx(d){var f=null==d?0:d.length;return f?uo(d,1,f):[]},R.take=function VA(d,f,_){return d&&d.length?uo(d,0,(f=_||f===U?1:cn(f))<0?0:f):[]},R.takeRight=function FO(d,f,_){var w=null==d?0:d.length;return w?uo(d,(f=w-(f=_||f===U?1:cn(f)))<0?0:f,w):[]},R.takeRightWhile=function Dp(d,f){return d&&d.length?$a(d,Ct(f,3),!1,!0):[]},R.takeWhile=function zA(d,f){return d&&d.length?$a(d,Ct(f,3)):[]},R.tap=function Ax(d,f){return f(d),d},R.throttle=function _v(d,f,_){var w=!0,S=!0;if("function"!=typeof d)throw new Fr(kn);return mi(_)&&(w="leading"in _?!!_.leading:w,S="trailing"in _?!!_.trailing:S),dD(d,f,{leading:w,maxWait:f,trailing:S})},R.thru=mh,R.toArray=Ev,R.toPairs=Zx,R.toPairsIn=Qx,R.toPath=function a1(d){return tn(d)?fi(d,ga):qs(d)?[d]:Nr(sx(Yn(d)))},R.toPlainObject=kc,R.transform=function UD(d,f,_){var w=tn(d),S=w||Ya(d)||Vd(d);if(f=Ct(f,4),null==_){var k=d&&d.constructor;_=S?w?new k:[]:mi(d)&&qa(k)?lr(wl(d)):{}}return(S?Do:is)(d,function(z,W,Z){return f(_,z,W,Z)}),_},R.unary=function fD(d){return Bd(d,1)},R.union=xx,R.unionBy=wx,R.unionWith=Mx,R.uniq=function iv(d){return d&&d.length?Tl(d):[]},R.uniqBy=function Cx(d,f){return d&&d.length?Tl(d,Ct(f,2)):[]},R.uniqWith=function Tp(d,f){return f="function"==typeof f?f:U,d&&d.length?Tl(d,U,f):[]},R.unset=function VD(d,f){return null==d||pp(d,f)},R.unzip=Ld,R.unzipWith=rv,R.update=function Jx(d,f,_){return null==d?d:fa(d,f,Rl(_))},R.updateWith=function zD(d,f,_,w){return w="function"==typeof w?w:U,null==d?d:fa(d,f,Rl(_),w)},R.values=zd,R.valuesIn=function HD(d){return null==d?[]:Zf(d,Xs(d))},R.without=sv,R.words=dw,R.wrap=function Gn(d,f){return gv(Rl(f),d)},R.xor=ov,R.xorBy=av,R.xorWith=ph,R.zip=HA,R.zipObject=function Sx(d,f){return F_(d||[],f||[],Ed)},R.zipObjectDeep=function GA(d,f){return F_(d||[],f||[],Td)},R.zipWith=$A,R.entries=Zx,R.entriesIn=Qx,R.extend=_a,R.extendWith=Bp,po(R,R),R.add=gw,R.attempt=uw,R.camelCase=tw,R.capitalize=nw,R.ceil=c1,R.clamp=function Kt(d,f,_){return _===U&&(_=f,f=U),_!==U&&(_=(_=fo(_))==_?_:0),f!==U&&(f=(f=fo(f))==f?f:0),vc(fo(d),f,_)},R.clone=function mD(d){return Gs(d,Os)},R.cloneDeep=function Bx(d){return Gs(d,hi|Os)},R.cloneDeepWith=function gD(d,f){return Gs(d,hi|Os,f="function"==typeof f?f:U)},R.cloneWith=function Op(d,f){return Gs(d,Os,f="function"==typeof f?f:U)},R.conformsTo=function _D(d,f){return null==f||M_(d,f,Cr(f))},R.deburr=iw,R.defaultTo=function t1(d,f){return null==d||d!=d?f:d},R.divide=_w,R.endsWith=function rw(d,f,_){d=Yn(d),f=rs(f);var w=d.length,S=_=_===U?w:vc(cn(_),0,w);return(_-=f.length)>=0&&d.slice(_,S)==f},R.eq=Fo,R.escape=function GD(d){return(d=Yn(d))&&Jg.test(d)?d.replace(Xb,YE):d},R.escapeRegExp=function sw(d){return(d=Yn(d))&&e0.test(d)?d.replace(zf,"\\$&"):d},R.every=function Dx(d,f,_){var w=tn(d)?bd:aA;return _&&vs(d,f,_)&&(f=U),w(d,Ct(f,3))},R.find=dv,R.findIndex=ux,R.findKey=function AD(d,f){return Nt(d,Ct(f,3),is)},R.findLast=Tx,R.findLastIndex=hx,R.findLastKey=function Tv(d,f){return Nt(d,Ct(f,3),S_)},R.floor=vw,R.forEach=kx,R.forEachRight=Px,R.forIn=function Za(d,f){return null==d?d:Lr(d,Ct(f,3),Xs)},R.forInRight=function DD(d,f){return null==d?d:I0(d,Ct(f,3),Xs)},R.forOwn=function TD(d,f){return d&&is(d,Ct(f,3))},R.forOwnRight=function ID(d,f){return d&&S_(d,Ct(f,3))},R.get=Iv,R.gt=vD,R.gte=Ux,R.has=function PD(d,f){return null!=d&&wA(d,f,E_)},R.hasIn=Ll,R.head=fx,R.identity=Ur,R.includes=function KA(d,f,_,w){d=Mr(d)?d:zd(d),_=_&&!w?cn(_):0;var S=d.length;return _<0&&(_=ar(S+_,0)),Ka(d)?_<=S&&d.indexOf(f,_)>-1:!!S&&bl(d,f,_)>-1},R.indexOf=function RA(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var S=null==_?0:cn(_);return S<0&&(S=ar(w+S,0)),bl(d,f,S)},R.inRange=function G(d,f,_){return f=Ol(f),_===U?(_=f,f=0):_=Ol(_),function lA(d,f,_){return d>=br(f,_)&&d<ar(f,_)}(d=fo(d),f,_)},R.invoke=FD,R.isArguments=Ud,R.isArray=tn,R.isArrayBuffer=_h,R.isArrayLike=Mr,R.isArrayLikeObject=Ai,R.isBoolean=function Vx(d){return!0===d||!1===d||ti(d)&&cr(d)==Qe},R.isBuffer=Ya,R.isDate=BO,R.isElement=function yD(d){return ti(d)&&1===d.nodeType&&!Rc(d)},R.isEmpty=function zx(d){if(null==d)return!0;if(Mr(d)&&(tn(d)||"string"==typeof d||"function"==typeof d.splice||Ya(d)||Vd(d)||Ud(d)))return!d.length;var f=wr(d);if(f==Eo||f==Ao)return!d.size;if(Sp(d))return!cp(d).length;for(var _ in d)if(ei.call(d,_))return!1;return!0},R.isEqual=function Hx(d,f){return Ju(d,f)},R.isEqualWith=function vv(d,f,_){var w=(_="function"==typeof _?_:U)?_(d,f):U;return w===U?Ju(d,f,U,_):!!w},R.isError=Gx,R.isFinite=function yv(d){return"number"==typeof d&&KE(d)},R.isFunction=qa,R.isInteger=Fp,R.isLength=vh,R.isMap=$x,R.isMatch=function bv(d,f){return d===f||k0(d,f,q0(f))},R.isMatchWith=function Lp(d,f,_){return _="function"==typeof _?_:U,k0(d,f,q0(f),_)},R.isNaN=function bD(d){return wv(d)&&d!=+d},R.isNative=function xv(d){if(OO(d))throw new Be("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return lp(d)},R.isNil=function Xa(d){return null==d},R.isNull=function Np(d){return null===d},R.isNumber=wv,R.isObject=mi,R.isObjectLike=ti,R.isPlainObject=Rc,R.isRegExp=Mv,R.isSafeInteger=function xD(d){return Fp(d)&&d>=-Ba&&d<=Ba},R.isSet=Cv,R.isString=Ka,R.isSymbol=qs,R.isTypedArray=Vd,R.isUndefined=function wD(d){return d===U},R.isWeakMap=function Sv(d){return ti(d)&&wr(d)==md},R.isWeakSet=function MD(d){return ti(d)&&"[object WeakSet]"==cr(d)},R.join=function J_(d,f){return null==d?"":xO.call(d,f)},R.kebabCase=$D,R.last=Ws,R.lastIndexOf=function kA(d,f,_){var w=null==d?0:d.length;if(!w)return-1;var S=w;return _!==U&&(S=(S=cn(_))<0?ar(w+S,0):br(S,w-1)),f==f?function x0(q,oe,ae){for(var Je=ae+1;Je--;)if(q[Je]===oe)return Je;return Je}(d,f,S):dc(d,_0,S,!0)},R.lowerCase=WD,R.lowerFirst=VO,R.lt=Wx,R.lte=CD,R.max=function d1(d){return d&&d.length?op(d,Ur,Dd):U},R.maxBy=function u1(d,f){return d&&d.length?op(d,Ct(f,2),Dd):U},R.mean=function Ks(d){return v0(d,Ur)},R.meanBy=function h1(d,f){return v0(d,Ct(f,2))},R.min=function f1(d){return d&&d.length?op(d,Ur,T_):U},R.minBy=function jO(d,f){return d&&d.length?op(d,Ct(f,2),T_):U},R.stubArray=jp,R.stubFalse=xh,R.stubObject=function Lv(){return{}},R.stubString=function Nv(){return""},R.stubTrue=function mw(){return!0},R.multiply=Uv,R.nth=function ev(d,f){return d&&d.length?R_(d,cn(f)):U},R.noConflict=function r1(){return vr._===this&&(vr._=Cd),this},R.noop=Hp,R.now=Ic,R.pad=function ow(d,f,_){d=Yn(d);var w=(f=cn(f))?uc(d):0;if(!f||w>=f)return d;var S=(f-w)/2;return vp(m_(S),_)+d+vp(p_(S),_)},R.padEnd=function aw(d,f,_){d=Yn(d);var w=(f=cn(f))?uc(d):0;return f&&w<f?d+vp(f-w,_):d},R.padStart=function Li(d,f,_){d=Yn(d);var w=(f=cn(f))?uc(d):0;return f&&w<f?vp(f-w,_)+d:d},R.parseInt=function jD(d,f,_){return _||null==f?f=0:f&&(f=+f),MO(Yn(d).replace(Hf,""),f||0)},R.random=function ew(d,f,_){if(_&&"boolean"!=typeof _&&vs(d,f,_)&&(f=_=U),_===U&&("boolean"==typeof f?(_=f,f=U):"boolean"==typeof d&&(_=d,d=U)),d===U&&f===U?(d=0,f=1):(d=Ol(d),f===U?(f=d,d=0):f=Ol(f)),d>f){var w=d;d=f,f=w}if(_||d%1||f%1){var S=ZE();return br(d+S*(f-d+jt("1e-"+((S+"").length-1))),f)}return rh(d,f)},R.reduce=function eD(d,f,_){var w=tn(d)?qf:Io,S=arguments.length<3;return w(d,Ct(f,4),_,S,Ga)},R.reduceRight=function tD(d,f,_){var w=tn(d)?Nu:Io,S=arguments.length<3;return w(d,Ct(f,4),_,S,sp)},R.repeat=function kv(d,f,_){return f=(_?vs(d,f,_):f===U)?1:cn(f),O_(Yn(d),f)},R.replace=function Pv(){var d=arguments,f=Yn(d[0]);return d.length<3?f:f.replace(d[1],d[2])},R.result=function Lo(d,f,_){var w=-1,S=(f=wc(f,d)).length;for(S||(S=1,d=U);++w<S;){var k=null==d?U:d[ga(f[w])];k===U&&(w=S,k=_),d=qa(k)?k.call(d):k}return d},R.round=yw,R.runInContext=q,R.sample=function iD(d){return(tn(d)?y_:B0)(d)},R.size=function sD(d){if(null==d)return 0;if(Mr(d))return Ka(d)?uc(d):d.length;var f=wr(d);return f==Eo||f==Ao?d.size:cp(d).length},R.snakeCase=YD,R.some=function oD(d,f,_){var w=tn(d)?yl:z0;return _&&vs(d,f,_)&&(f=U),w(d,Ct(f,3))},R.sortedIndex=function gx(d,f){return sh(d,f)},R.sortedIndexBy=function nv(d,f,_){return Dl(d,f,Ct(_,2))},R.sortedIndexOf=function BA(d,f){var _=null==d?0:d.length;if(_){var w=sh(d,f);if(w<_&&Fo(d[w],f))return w}return-1},R.sortedLastIndex=function UA(d,f){return sh(d,f,!0)},R.sortedLastIndexBy=function _x(d,f,_){return Dl(d,f,Ct(_,2),!0)},R.sortedLastIndexOf=function vx(d,f){if(null!=d&&d.length){var w=sh(d,f,!0)-1;if(Fo(d[w],f))return w}return-1},R.startCase=HO,R.startsWith=function GO(d,f,_){return d=Yn(d),_=null==_?0:vc(cn(_),0,d.length),f=rs(f),d.slice(_,_+f.length)==f},R.subtract=p1,R.sum=function m1(d){return d&&d.length?ko(d,Ur):0},R.sumBy=function g1(d,f){return d&&d.length?ko(d,Ct(f,2)):0},R.template=function qD(d,f,_){var w=R.templateSettings;_&&vs(d,f,_)&&(f=U),d=Yn(d),f=Bp({},f,w,Oo);var W,Z,S=Bp({},f.imports,w.imports,Oo),k=Cr(S),z=Zf(S,k),_e=0,be=f.interpolate||Ru,De="__p += '",Ye=xl((f.escape||Ru).source+"|"+be.source+"|"+(be===e_?PE:Ru).source+"|"+(f.evaluate||Ru).source+"|$","g"),dt="//# sourceURL="+(ei.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++oo+"]")+"\n";d.replace(Ye,function(Pt,_n,In,Zs,dr,Vr){return In||(In=Zs),De+=d.slice(_e,Vr).replace(t_,qE),_n&&(W=!0,De+="' +\n__e("+_n+") +\n'"),dr&&(Z=!0,De+="';\n"+dr+";\n__p += '"),In&&(De+="' +\n((__t = ("+In+")) == null ? '' : __t) +\n'"),_e=Vr+Pt.length,Pt}),De+="';\n";var kt=ei.call(f,"variable")&&f.variable;if(kt){if(t0.test(kt))throw new Be("Invalid `variable` option passed into `_.template`")}else De="with (obj) {\n"+De+"\n}\n";De=(Z?De.replace(CE,""):De).replace(SE,"$1").replace(EE,"$1;"),De="function("+(kt||"obj")+") {\n"+(kt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(W?", __e = _.escape":"")+(Z?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+De+"return __p\n}";var hn=uw(function(){return Bn(k,dt+"return "+De).apply(U,z)});if(hn.source=De,Gx(hn))throw hn;return hn},R.times=function Bv(d,f){if((d=cn(d))<1||d>Ba)return[];var _=na,w=br(d,na);f=Ct(f),d-=na;for(var S=Nn(w,f);++_<d;)f(_);return S},R.toFinite=Ol,R.toInteger=cn,R.toLength=Fl,R.toLower=function lw(d){return Yn(d).toLowerCase()},R.toNumber=fo,R.toSafeInteger=function ct(d){return d?vc(cn(d),-Ba,Ba):0===d?d:0},R.toString=Yn,R.toUpper=function $O(d){return Yn(d).toUpperCase()},R.trim=function XD(d,f,_){if((d=Yn(d))&&(_||f===U))return Kf(d);if(!d||!(f=rs(f)))return d;var w=fs(d),S=fs(f);return fe(w,xd(w,S),y0(w,S)+1).join("")},R.trimEnd=function Hd(d,f,_){if((d=Yn(d))&&(_||f===U))return d.slice(0,oa(d)+1);if(!d||!(f=rs(f)))return d;var w=fs(d);return fe(w,0,y0(w,fs(f))+1).join("")},R.trimStart=function KD(d,f,_){if((d=Yn(d))&&(_||f===U))return d.replace(Hf,"");if(!d||!(f=rs(f)))return d;var w=fs(d);return fe(w,xd(w,fs(f))).join("")},R.truncate=function cw(d,f){var _=30,w="...";if(mi(f)){var S="separator"in f?f.separator:S;_="length"in f?cn(f.length):_,w="omission"in f?rs(f.omission):w}var k=(d=Yn(d)).length;if(wd(d)){var z=fs(d);k=z.length}if(_>=k)return d;var W=_-uc(w);if(W<1)return w;var Z=z?fe(z,0,W).join(""):d.slice(0,W);if(S===U)return Z+w;if(z&&(W+=Z.length-W),Mv(S)){if(d.slice(W).search(S)){var _e,be=Z;for(S.global||(S=xl(S.source,Yn(ra.exec(S))+"g")),S.lastIndex=0;_e=S.exec(be);)var De=_e.index;Z=Z.slice(0,De===U?W:De)}}else if(d.indexOf(rs(S),W)!=W){var Ye=Z.lastIndexOf(S);Ye>-1&&(Z=Z.slice(0,Ye))}return Z+w},R.unescape=function Up(d){return(d=Yn(d))&&rO.test(d)?d.replace(qb,nt):d},R.uniqueId=function l1(d){var f=++d_;return Yn(d)+f},R.upperCase=ZD,R.upperFirst=Vp,R.each=kx,R.eachRight=Px,R.first=fx,po(R,function(){var d={};return is(R,function(f,_){ei.call(R.prototype,_)||(d[_]=f)}),d}(),{chain:!1}),R.VERSION="4.17.21",Do(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){R[d].placeholder=R}),Do(["drop","take"],function(d,f){on.prototype[d]=function(_){_=_===U?1:ar(cn(_),0);var w=this.__filtered__&&!f?new on(this):this.clone();return w.__filtered__?w.__takeCount__=br(_,w.__takeCount__):w.__views__.push({size:br(_,na),type:d+(w.__dir__<0?"Right":"")}),w},on.prototype[d+"Right"]=function(_){return this.reverse()[d](_).reverse()}}),Do(["filter","map","takeWhile"],function(d,f){var _=f+1,w=1==_||3==_;on.prototype[d]=function(S){var k=this.clone();return k.__iteratees__.push({iteratee:Ct(S,3),type:_}),k.__filtered__=k.__filtered__||w,k}}),Do(["head","last"],function(d,f){var _="take"+(f?"Right":"");on.prototype[d]=function(){return this[_](1).value()[0]}}),Do(["initial","tail"],function(d,f){var _="drop"+(f?"":"Right");on.prototype[d]=function(){return this.__filtered__?new on(this):this[_](1)}}),on.prototype.compact=function(){return this.filter(Ur)},on.prototype.find=function(d){return this.filter(d).head()},on.prototype.findLast=function(d){return this.reverse().find(d)},on.prototype.invokeMap=un(function(d,f){return"function"==typeof d?new on(this):this.map(function(_){return Qu(_,d,f)})}),on.prototype.reject=function(d){return this.filter(gh(Ct(d)))},on.prototype.slice=function(d,f){d=cn(d);var _=this;return _.__filtered__&&(d>0||f<0)?new on(_):(d<0?_=_.takeRight(-d):d&&(_=_.drop(d)),f!==U&&(_=(f=cn(f))<0?_.dropRight(-f):_.take(f-d)),_)},on.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},on.prototype.toArray=function(){return this.take(na)},is(on.prototype,function(d,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),w=/^(?:head|last)$/.test(f),S=R[w?"take"+("last"==f?"Right":""):f],k=w||/^find/.test(f);S&&(R.prototype[f]=function(){var z=this.__wrapped__,W=w?[1]:arguments,Z=z instanceof on,_e=W[0],be=Z||tn(z),De=function(_n){var In=S.apply(R,vl([_n],W));return w&&Ye?In[0]:In};be&&_&&"function"==typeof _e&&1!=_e.length&&(Z=be=!1);var Ye=this.__chain__,kt=k&&!Ye,hn=Z&&!this.__actions__.length;if(!k&&be){z=hn?z:new on(this);var Pt=d.apply(z,W);return Pt.__actions__.push({func:mh,args:[De],thisArg:U}),new zs(Pt,Ye)}return kt&&hn?d.apply(this,W):(Pt=this.thru(De),kt?w?Pt.value()[0]:Pt.value():Pt)})}),Do(["pop","push","shift","sort","splice","unshift"],function(d){var f=Ua[d],_=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",w=/^(?:pop|shift)$/.test(d);R.prototype[d]=function(){var S=arguments;if(w&&!this.__chain__){var k=this.value();return f.apply(tn(k)?k:[],S)}return this[_](function(z){return f.apply(tn(z)?z:[],S)})}}),is(on.prototype,function(d,f){var _=R[f];if(_){var w=_.name+"";ei.call(gc,w)||(gc[w]=[]),gc[w].push({name:f,func:_})}}),gc[L_(U,rr).name]=[{name:"wrapper",func:U}],on.prototype.clone=function ms(){var d=new on(this.__wrapped__);return d.__actions__=Nr(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Nr(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Nr(this.__views__),d},on.prototype.reverse=function eA(){if(this.__filtered__){var d=new on(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},on.prototype.value=function np(){var d=this.__wrapped__.value(),f=this.__dir__,_=tn(d),w=f<0,S=_?d.length:0,k=function xA(d,f,_){for(var w=-1,S=_.length;++w<S;){var k=_[w],z=k.size;switch(k.type){case"drop":d+=z;break;case"dropRight":f-=z;break;case"take":f=br(f,d+z);break;case"takeRight":d=ar(d,f-z)}}return{start:d,end:f}}(0,S,this.__views__),z=k.start,W=k.end,Z=W-z,_e=w?W:z-1,be=this.__iteratees__,De=be.length,Ye=0,dt=br(Z,this.__takeCount__);if(!_||!w&&S==Z&&dt==Z)return xc(d,this.__actions__);var kt=[];e:for(;Z--&&Ye<dt;){for(var hn=-1,Pt=d[_e+=f];++hn<De;){var _n=be[hn],Zs=_n.type,dr=(0,_n.iteratee)(Pt);if(2==Zs)Pt=dr;else if(!dr){if(1==Zs)continue e;break e}}kt[Ye++]=Pt}return kt},R.prototype.at=Ip,R.prototype.chain=function lv(){return Ex(this)},R.prototype.commit=function Nd(){return new zs(this.value(),this.__chain__)},R.prototype.next=function WA(){this.__values__===U&&(this.__values__=Ev(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?U:this.__values__[this.__index__++]}},R.prototype.plant=function LO(d){for(var f,_=this;_ instanceof tp;){var w=q_(_);w.__index__=0,w.__values__=U,f?S.__wrapped__=w:f=w;var S=w;_=_.__wrapped__}return S.__wrapped__=d,f},R.prototype.reverse=function YA(){var d=this.__wrapped__;if(d instanceof on){var f=d;return this.__actions__.length&&(f=new on(this)),(f=f.reverse()).__actions__.push({func:mh,args:[Ap],thisArg:U}),new zs(f,this.__chain__)}return this.thru(Ap)},R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=function cv(){return xc(this.__wrapped__,this.__actions__)},R.prototype.first=R.prototype.head,Hu&&(R.prototype[Hu]=function jA(){return this}),R}();vr._=Xi,(en=function(){return Xi}.call(ks,Zr,ks,Co))!==U&&(Co.exports=en)}.call(this)},738:function(Co){var ks;Co.exports=((ks=function(){function Zr(ui){return kr.appendChild(ui.dom),ui}function en(ui){for(var hi=0;hi<kr.children.length;hi++)kr.children[hi].style.display=hi===ui?"block":"none";U=ui}var U=0,kr=document.createElement("div");kr.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",kr.addEventListener("click",function(ui){ui.preventDefault(),en(++U%kr.children.length)},!1);var Qr=(performance||Date).now(),$t=Qr,kn=0,hl=Zr(new ks.Panel("FPS","#0ff","#002")),Fa=Zr(new ks.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var Ps=Zr(new ks.Panel("MB","#f08","#201"));return en(0),{REVISION:16,dom:kr,addPanel:Zr,showPanel:en,begin:function(){Qr=(performance||Date).now()},end:function(){kn++;var ui=(performance||Date).now();if(Fa.update(ui-Qr,200),ui>$t+1e3&&(hl.update(1e3*kn/(ui-$t),100),$t=ui,kn=0,Ps)){var hi=performance.memory;Ps.update(hi.usedJSHeapSize/1048576,hi.jsHeapSizeLimit/1048576)}return ui},update:function(){Qr=this.end()},domElement:kr,setMode:en}}).Panel=function(Zr,en,U){var kr=1/0,Qr=0,$t=Math.round,kn=$t(window.devicePixelRatio||1),hl=80*kn,Fa=48*kn,Ps=3*kn,ui=2*kn,hi=3*kn,hs=15*kn,Os=74*kn,Fs=30*kn,So=document.createElement("canvas");So.width=hl,So.height=Fa,So.style.cssText="width:80px;height:48px";var Tn=So.getContext("2d");return Tn.font="bold "+9*kn+"px Helvetica,Arial,sans-serif",Tn.textBaseline="top",Tn.fillStyle=U,Tn.fillRect(0,0,hl,Fa),Tn.fillStyle=en,Tn.fillText(Zr,Ps,ui),Tn.fillRect(hi,hs,Os,Fs),Tn.fillStyle=U,Tn.globalAlpha=.9,Tn.fillRect(hi,hs,Os,Fs),{dom:So,update:function(rr,oc){kr=Math.min(kr,rr),Qr=Math.max(Qr,rr),Tn.fillStyle=U,Tn.globalAlpha=1,Tn.fillRect(0,0,hl,hs),Tn.fillStyle=en,Tn.fillText($t(rr)+" "+Zr+" ("+$t(kr)+"-"+$t(Qr)+")",Ps,ui),Tn.drawImage(So,hi+kn,hs,Os-kn,Fs,hi,hs,Os-kn,Fs),Tn.fillRect(hi+Os-kn,hs,kn,Fs),Tn.fillStyle=U,Tn.globalAlpha=.9,Tn.fillRect(hi+Os-kn,hs,kn,$t((1-rr/oc)*Fs))}}},ks)}},Co=>{Co(Co.s=135)}]);