(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{84:(io,ys,Or)=>{"use strict";function Ht(i){return"function"==typeof i}function B(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Er=B(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Lr(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class Zt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(Ht(n))try{n()}catch(s){e=s instanceof Er?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{wa(s)}catch(o){e=e??[],o instanceof Er?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Er(e)}}add(e){var t;if(e&&e!==this)if(this.closed)wa(e);else{if(e instanceof Zt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Lr(t,e)}remove(e){const{_finalizers:t}=this;t&&Lr(t,e),e instanceof Zt&&e._removeParent(this)}}Zt.EMPTY=(()=>{const i=new Zt;return i.closed=!0,i})();const _n=Zt.EMPTY;function Ka(i){return i instanceof Zt||i&&"closed"in i&&Ht(i.remove)&&Ht(i.add)&&Ht(i.unsubscribe)}function wa(i){Ht(i)?i():i.unsubscribe()}const bs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},oi={setTimeout(i,e,...t){const{delegate:n}=oi;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=oi;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ai(i){oi.setTimeout(()=>{const{onUnhandledError:e}=bs;if(!e)throw i;e(i)})}function Jr(){}const xs=fn("C",void 0,void 0);function fn(i,e,t){return{kind:i,value:e,error:t}}let Ki=null;function Nl(i){if(bs.useDeprecatedSynchronousErrorHandling){const e=!Ki;if(e&&(Ki={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=Ki;if(Ki=null,t)throw n}}else i()}class Ja extends Zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ka(e)&&e.add(this)):this.destination=jC}static create(e,t,n){return new Go(e,t,n)}next(e){this.isStopped?Om(function ro(i){return fn("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Om(function ws(i){return fn("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Om(xs,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ho=Function.prototype.bind;function Qa(i,e){return Ho.call(i,e)}class Ma{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Nc(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Nc(n)}else Nc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Nc(t)}}}class Go extends Ja{constructor(e,t,n){let r;if(super(),Ht(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&bs.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Qa(e.next,s),error:e.error&&Qa(e.error,s),complete:e.complete&&Qa(e.complete,s)}):r=e}this.destination=new Ma(r)}}function Nc(i){bs.useDeprecatedSynchronousErrorHandling?function zo(i){bs.useDeprecatedSynchronousErrorHandling&&Ki&&(Ki.errorThrown=!0,Ki.error=i)}(i):ai(i)}function Om(i,e){const{onStoppedNotification:t}=bs;t&&oi.setTimeout(()=>t(i,e))}const jC={closed:!0,next:Jr,error:function $C(i){throw i},complete:Jr},Lm="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ca(i){return i}function wy(i){return 0===i.length?Ca:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let vn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function Ah(i){return i&&i instanceof Ja||function XC(i){return i&&Ht(i.next)&&Ht(i.error)&&Ht(i.complete)}(i)&&Ka(i)}(t)?t:new Go(t,n,r);return Nl(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=Sa(n))((r,s)=>{const o=new Go({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[Lm](){return this}pipe(...t){return wy(t)(this)}toPromise(t){return new(t=Sa(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function Sa(i){var e;return null!==(e=i??bs.Promise)&&void 0!==e?e:Promise}const Wo=B(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let He=(()=>{class i extends vn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new My(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new Wo}next(t){Nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){Nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Nl(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?_n:(this.currentObservers=null,s.push(t),new Zt(()=>{this.currentObservers=null,Lr(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new vn;return t.source=this,t}}return i.create=(e,t)=>new My(e,t),i})();class My extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:_n}}function Cy(i){return Ht(i?.lift)}function Pn(i){return e=>{if(Cy(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Dn(i,e,t,n,r){return new YC(i,e,t,n,r)}class YC extends Ja{constructor(e,t,n,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Je(i,e){return Pn((t,n)=>{let r=0;t.subscribe(Dn(n,s=>{n.next(i.call(e,s,r++))}))})}function oo(i){return this instanceof oo?(this.v=i,this):new oo(i)}function JC(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){n[p]&&(r[p]=function(m){return new Promise(function(_,b){s.push([p,m,_,b])>1||a(p,m)})})}function a(p,m){try{!function l(p){p.value instanceof oo?Promise.resolve(p.value.v).then(c,d):f(s[0][2],p)}(n[p](m))}catch(_){f(s[0][3],_)}}function c(p){a("next",p)}function d(p){a("throw",p)}function f(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Uc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function Bc(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const $u=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Ph(i){return Ht(i?.then)}function Ry(i){return Ht(i[Lm])}function Py(i){return Symbol.asyncIterator&&Ht(i?.[Symbol.asyncIterator])}function ky(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Vm=function Oy(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ly(i){return Ht(i?.[Vm])}function Fy(i){return JC(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield oo(t.read());if(r)return yield oo(void 0);yield yield oo(n)}}finally{t.releaseLock()}})}function Ny(i){return Ht(i?.getReader)}function pr(i){if(i instanceof vn)return i;if(null!=i){if(Ry(i))return function By(i){return new vn(e=>{const t=i[Lm]();if(Ht(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if($u(i))return function QC(i){return new vn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(Ph(i))return function eS(i){return new vn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ai)})}(i);if(Py(i))return kh(i);if(Ly(i))return function tS(i){return new vn(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(Ny(i))return function nS(i){return kh(Fy(i))}(i)}throw ky(i)}function kh(i){return new vn(e=>{(function zm(i,e){var t,n,r,s;return function KC(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Uc(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function Ea(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Wi(i,e,t=1/0){return Ht(e)?Wi((n,r)=>Je((s,o)=>e(n,s,r,o))(pr(i(n,r))),t):("number"==typeof e&&(t=e),Pn((n,r)=>function iS(i,e,t,n,r,s,o,a){const l=[];let c=0,d=0,f=!1;const p=()=>{f&&!l.length&&!c&&e.complete()},m=b=>c<n?_(b):l.push(b),_=b=>{s&&e.next(b),c++;let y=!1;pr(t(b,d++)).subscribe(Dn(e,v=>{r?.(v),s?m(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<n;){const v=l.shift();o?Ea(e,o,()=>_(v)):_(v)}p()}catch(v){e.error(v)}}))};return i.subscribe(Dn(e,m,()=>{f=!0,p()})),()=>{a?.()}}(n,r,i,t)))}function Vc(i=1/0){return Wi(Ca,i)}const Bs=new vn(i=>i.complete());function Uy(i){return i&&Ht(i.schedule)}function Oh(i){return i[i.length-1]}function Vy(i){return Ht(Oh(i))?i.pop():void 0}function ju(i){return Uy(Oh(i))?i.pop():void 0}function zy(i,e=0){return Pn((t,n)=>{t.subscribe(Dn(n,r=>Ea(n,i,()=>n.next(r),e),()=>Ea(n,i,()=>n.complete(),e),r=>Ea(n,i,()=>n.error(r),e)))})}function Hy(i,e=0){return Pn((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function Gy(i,e){if(!i)throw new Error("Iterable cannot be null");return new vn(t=>{Ea(t,e,()=>{const n=i[Symbol.asyncIterator]();Ea(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Mi(i,e){return e?function cS(i,e){if(null!=i){if(Ry(i))return function oS(i,e){return pr(i).pipe(Hy(e),zy(e))}(i,e);if($u(i))return function aS(i,e){return new vn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(Ph(i))return function Lh(i,e){return pr(i).pipe(Hy(e),zy(e))}(i,e);if(Py(i))return Gy(i,e);if(Ly(i))return function Fh(i,e){return new vn(t=>{let n;return Ea(t,e,()=>{n=i[Vm](),Ea(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Ht(n?.return)&&n.return()})}(i,e);if(Ny(i))return function lS(i,e){return Gy(Fy(i),e)}(i,e)}throw ky(i)}(i,e):pr(i)}function Ms(...i){const e=ju(i),t=function sS(i,e){return"number"==typeof Oh(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?pr(n[0]):Vc(t)(Mi(n,e)):Bs}function Hm(i={}){const{connector:e=(()=>new He),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,d=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,d=f=!1},_=()=>{const b=o;m(),b?.unsubscribe()};return Pn((b,y)=>{c++,!f&&!d&&p();const v=l=l??e();y.add(()=>{c--,0===c&&!f&&!d&&(a=Gm(_,r))}),v.subscribe(y),!o&&c>0&&(o=new Go({next:M=>v.next(M),error:M=>{f=!0,p(),a=Gm(m,t,M),v.error(M)},complete:()=>{d=!0,p(),a=Gm(m,n),v.complete()}}),pr(b).subscribe(o))})(s)}}function Gm(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new Go({next:()=>{n.unsubscribe(),i()}});return pr(e(...t)).subscribe(n)}function jn(i){for(let e in i)if(i[e]===jn)return e;throw Error("Could not find renamed property on target object.")}function Wm(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function qn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(qn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Nh(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const Wy=jn({__forward_ref__:jn});function Un(i){return i.__forward_ref__=Un,i.toString=function(){return qn(this())},i}function _t(i){return $m(i)?i():i}function $m(i){return"function"==typeof i&&i.hasOwnProperty(Wy)&&i.__forward_ref__===Un}class ge extends Error{constructor(e,t){super(function qu(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Ot(i){return"string"==typeof i?i:null==i?"":String(i)}function Xu(i,e){throw new ge(-201,!1)}function Qr(i,e){null==i&&function kn(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Pe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Lt(i){return{providers:i.providers||[],imports:i.imports||[]}}function jm(i){return Yy(i,Bh)||Yy(i,Zy)}function Yy(i,e){return i.hasOwnProperty(e)?i[e]:null}function Xn(i){return i&&(i.hasOwnProperty(qm)||i.hasOwnProperty(vS))?i[qm]:null}const Bh=jn({\u0275prov:jn}),qm=jn({\u0275inj:jn}),Zy=jn({ngInjectableDef:jn}),vS=jn({ngInjectorDef:jn});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Xm;function Us(i){const e=Xm;return Xm=i,e}function Ji(i,e,t){const n=jm(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&mt.Optional?null:void 0!==e?e:void Xu(qn(i))}function Vs(i){return{toString:i}.toString()}var zs=(()=>((zs=zs||{})[zs.OnPush=0]="OnPush",zs[zs.Default=1]="Default",zs))(),Hs=(()=>{return(i=Hs||(Hs={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Hs;var i})();const Vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ul={},Cn=[],Dr=jn({\u0275cmp:jn}),Ym=jn({\u0275dir:jn}),es=jn({\u0275pipe:jn}),Qy=jn({\u0275mod:jn}),qo=jn({\u0275fac:jn}),Gs=jn({__NG_ELEMENT_ID__:jn});let Uh=0;function Ct(i){return Vs(()=>{const t=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zs.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Cn,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Hs.Emulated,id:"c"+Uh++,styles:i.styles||Cn,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=e0(i.inputs,n),r.outputs=e0(i.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Da).filter(Vh):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Oi).filter(Vh):null,r})}function zn(i,e,t){const n=i.\u0275cmp;n.directiveDefs=()=>("function"==typeof e?e():e).map(Da),n.pipeDefs=()=>("function"==typeof t?t():t).map(Oi)}function Da(i){return On(i)||Qi(i)}function Vh(i){return null!==i}function Ut(i){return Vs(()=>({type:i.type,bootstrap:i.bootstrap||Cn,declarations:i.declarations||Cn,imports:i.imports||Cn,exports:i.exports||Cn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function e0(i,e){if(null==i)return Ul;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}const Oe=Ct;function ts(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function On(i){return i[Dr]||null}function Qi(i){return i[Ym]||null}function Oi(i){return i[es]||null}function Cs(i,e){const t=i[Qy]||null;if(!t&&!0===e)throw new Error(`Type ${qn(i)} does not have '\u0275mod' property.`);return t}function Nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function fo(i){return Array.isArray(i)&&!0===i[1]}function Jm(i){return 0!=(8&i.flags)}function Gh(i){return 2==(2&i.flags)}function Wh(i){return 1==(1&i.flags)}function po(i){return null!==i.template}function $h(i){return 0!=(256&i[2])}function Wl(i,e){return i.hasOwnProperty(qo)?i[qo]:null}class qh{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ii(){return Ju}function Ju(i){return i.type.prototype.ngOnChanges&&(i.setInput=Xh),o0}function o0(){const i=rg(this),e=i?.current;if(e){const t=i.previous;if(t===Ul)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function Xh(i,e,t,n){const r=rg(i)||function Yh(i,e){return i[ig]=e}(i,{previous:Ul,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new qh(l&&l.currentValue,e,o===Ul),i[n]=e}ii.ngInherit=!0;const ig="__ngSimpleChanges__";function rg(i){return i[ig]||null}function ui(i){for(;Array.isArray(i);)i=i[0];return i}function ed(i,e){return ui(e[i])}function Ws(i,e){return ui(e[i.index])}function Si(i,e){return i.data[e]}function Ei(i,e){return i[e]}function Es(i,e){const t=e[i];return Nr(t)?t:t[0]}function a0(i){return 4==(4&i[2])}function td(i){return 64==(64&i[2])}function Xo(i,e){return null==e?null:i[e]}function jc(i){i[18]=0}function nd(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const vt={lFrame:f0(null),bindingsEnabled:!0};function l0(){return vt.bindingsEnabled}function xe(){return vt.lFrame.lView}function on(){return vt.lFrame.tView}function yn(i){return vt.lFrame.contextLView=i,i[8]}function An(i){return vt.lFrame.contextLView=null,i}function E(){let i=$l();for(;null!==i&&64===i.type;)i=i.parent;return i}function $l(){return vt.lFrame.currentTNode}function Di(i,e){const t=vt.lFrame;t.currentTNode=i,t.isParent=e}function nn(){return vt.lFrame.isParent}function lg(){vt.lFrame.isParent=!1}function Br(){const i=vt.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Zc(){return vt.lFrame.bindingIndex++}function mr(i){const e=vt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function RS(i,e){const t=vt.lFrame;t.bindingIndex=t.bindingRootIndex=i,cg(e)}function cg(i){vt.lFrame.currentDirectiveIndex=i}function go(i){const e=vt.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}function d0(){return vt.lFrame.currentQueryIndex}function ug(i){vt.lFrame.currentQueryIndex=i}function kS(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function h0(i,e,t){if(t&mt.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&mt.Host||(r=kS(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,i=s}const n=vt.lFrame=il();return n.currentTNode=e,n.lView=i,!0}function dg(i){const e=il(),t=i[1];vt.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function il(){const i=vt.lFrame,e=null===i?null:i.child;return null===e?f0(i):e}function f0(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function p0(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const $s=p0;function hg(){const i=p0();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ur(){return vt.lFrame.selectedIndex}function rl(i){vt.lFrame.selectedIndex=i}function di(){const i=vt.lFrame;return Si(i.tView,i.selectedIndex)}function _o(){vt.lFrame.currentNamespace="svg"}function fg(){!function pg(){vt.lFrame.currentNamespace=null}()}function tf(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=d&&(i.destroyHooks||(i.destroyHooks=[])).push(t,d)}}function rd(i,e,t){rf(i,e,3,t)}function nf(i,e,t,n){(3&i[2])===t&&rf(i,e,t,n)}function vo(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function rf(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(jl(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function jl(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class sd{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function od(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];sf(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function ir(i){return 3===i||4===i||6===i}function sf(i){return 64===i.charCodeAt(0)}function ad(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||yo(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function yo(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function af(i){return-1!==i}function Ra(i){return 32767&i}function Xl(i,e){let t=function ql(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let gr=!0;function Kc(i){const e=gr;return gr=i,e}let gg=0;const Zo={};function Jc(i,e){const t=vg(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,_g(n.data,i),_g(e,null),_g(n.blueprint,null));const r=sl(i,e),s=i.injectorIndex;if(af(r)){const o=Ra(r),a=Xl(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function _g(i,e){i.push(0,0,0,0,0,0,0,0,e)}function vg(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function sl(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=wg(r),null===n)return-1;if(t++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function lf(i,e,t){!function ld(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Gs)&&(n=t[Gs]),null==n&&(n=t[Gs]=gg++);const r=255&n;e.data[i+(r>>5)]|=1<<r}(i,e,t)}function cf(i,e,t){if(t&mt.Optional)return i;Xu()}function yg(i,e,t,n){if(t&mt.Optional&&void 0===n&&(n=null),0==(t&(mt.Self|mt.Host))){const r=i[9],s=Us(void 0);try{return r?r.get(e,n,t&mt.Optional):Ji(e,n,t&mt.Optional)}finally{Us(s)}}return cf(n,0,t)}function b0(i,e,t,n=mt.Default,r){if(null!==i){if(1024&e[2]){const o=function M0(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=x0(s,o,t,n|mt.Self,Zo);if(a!==Zo)return a;let l=s.parent;if(!l){const c=o[21];if(c){const d=c.get(t,Zo,n);if(d!==Zo)return d}l=wg(o),o=o[15]}s=l}return r}(i,e,t,n,Zo);if(o!==Zo)return o}const s=x0(i,e,t,n,Zo);if(s!==Zo)return s}return yg(e,t,n,r)}function x0(i,e,t,n,r){const s=function VS(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(Gs)?i[Gs]:void 0;return"number"==typeof e?e>=0?255&e:w0:e}(t);if("function"==typeof s){if(!h0(e,i,n))return n&mt.Host?cf(r,0,n):yg(e,t,n,r);try{const o=s(n);if(null!=o||n&mt.Optional)return o;Xu()}finally{$s()}}else if("number"==typeof s){let o=null,a=vg(i,e),l=-1,c=n&mt.Host?e[16][6]:null;for((-1===a||n&mt.SkipSelf)&&(l=-1===a?sl(i,e):e[a+8],-1!==l&&bg(n,!1)?(o=e[1],a=Ra(l),e=Xl(l,e)):a=-1);-1!==a;){const d=e[1];if(uf(s,a,d.data)){const f=US(a,e,t,o,n,c);if(f!==Zo)return f}l=e[a+8],-1!==l&&bg(n,e[1].data[a+8]===c)&&uf(s,a,e)?(o=d,a=Ra(l),e=Xl(l,e)):a=-1}}return r}function US(i,e,t,n,r,s){const o=e[1],a=o.data[i+8],d=cd(a,o,t,null==n?Gh(a)&&gr:n!=o&&0!=(3&a.type),r&mt.Host&&s===a);return null!==d?Yl(e,o,d,a):Zo}function cd(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,d=s>>20,p=r?a+d:i.directiveEnd;for(let m=n?a:a+d;m<p;m++){const _=o[m];if(m<l&&t===_||m>=l&&_.type===t)return m}if(r){const m=o[l];if(m&&po(m)&&m.type===t)return l}return null}function Yl(i,e,t,n){let r=i[t];const s=e.data;if(function m0(i){return i instanceof sd}(r)){const o=r;o.resolving&&function $y(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new ge(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Mn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ot(i)}(s[t]));const a=Kc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Us(o.injectImpl):null;h0(i,n,mt.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function ef(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=Ju(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&Us(l),Kc(a),o.resolving=!1,$s()}}return r}function uf(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function bg(i,e){return!(i&mt.Self||i&mt.Host&&e)}class Zl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return b0(this._tNode,this._lView,e,n,t)}}function w0(){return new Zl(E(),xe())}function _i(i){return Vs(()=>{const e=i.prototype.constructor,t=e[qo]||xg(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[qo]||xg(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function xg(i){return $m(i)?()=>{const e=xg(_t(i));return e&&e()}:Wl(i)}function wg(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}function Pa(i){return function BS(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(ir(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(E(),i)}const Qc="__parameters__";function eu(i,e,t){return Vs(()=>{const n=function ud(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const f=l.hasOwnProperty(Qc)?l[Qc]:Object.defineProperty(l,Qc,{value:[]})[Qc];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class Se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Tr(i,e){void 0===e&&(e=i);for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)?(e===i&&(e=i.slice(0,t)),Tr(n,e)):e!==i&&e.push(n)}return e}function Ko(i,e){i.forEach(t=>Array.isArray(t)?Ko(t,e):e(t))}function hf(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function dd(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function Jl(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function zr(i,e,t){let n=tu(i,e);return n>=0?i[1|n]=t:(n=~n,function GS(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function Sg(i,e){const t=tu(i,e);if(t>=0)return i[1|t]}function tu(i,e){return function Eg(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const Qo={},mf="__NG_DI_FLAG__",hd="ngTempTokenPath",R0=/\n/gm,iu="__source";let fd;function ec(i){const e=fd;return fd=i,e}function P0(i,e=mt.Default){if(void 0===fd)throw new ge(-203,!1);return null===fd?Ji(i,void 0,e):fd.get(i,e&mt.Optional?null:void 0,e)}function j(i,e=mt.Default){return(function Ky(){return Xm}()||P0)(_t(i),e)}function Hn(i,e=mt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),j(i,e)}function pd(i){const e=[];for(let t=0;t<i.length;t++){const n=_t(i[t]);if(Array.isArray(n)){if(0===n.length)throw new ge(900,!1);let r,s=mt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=qS(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(j(r,s))}else e.push(j(n))}return e}function cl(i,e){return i[mf]=e,i.prototype[mf]=e,i}function qS(i){return i[mf]}const xo=cl(eu("Optional"),8),ul=cl(eu("SkipSelf"),4);let Og,wf;function ss(i){return function Lg(){if(void 0===wf&&(wf=null,Vn.trustedTypes))try{wf=Vn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return wf}()?.createHTML(i)||i}class dl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class KS extends dl{getTypeName(){return"HTML"}}class JS extends dl{getTypeName(){return"Style"}}class QS extends dl{getTypeName(){return"Script"}}class eE extends dl{getTypeName(){return"URL"}}class z0 extends dl{getTypeName(){return"ResourceURL"}}function os(i){return i instanceof dl?i.changingThisBreaksApplicationSecurity:i}function ea(i,e){const t=function Ug(i){return i instanceof dl&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class $0{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(ss(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class ta{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const n=this.inertDocument.createElement("body");t.appendChild(n)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=ss(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=ss(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const tE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,iE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function vd(i){return(i=String(i)).match(tE)||i.match(iE)?i:"unsafe:"+i}function na(i){const e={};for(const t of i.split(","))e[t]=!0;return e}function yd(...i){const e={};for(const t of i)for(const n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}const q0=na("area,br,col,hr,img,wbr"),X0=na("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Y0=na("rp,rt"),Mf=yd(q0,yd(X0,na("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),yd(Y0,na("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),yd(Y0,X0)),Cf=na("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Sf=na("srcset"),Z0=yd(Cf,Sf,na("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),na("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),K0=na("script,style,template");class rE{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Mf.hasOwnProperty(t))return this.sanitizedSomething=!0,!K0.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!Z0.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Cf[a]&&(l=vd(l)),Sf[a]&&(i=l,l=(i=String(i)).split(",").map(e=>vd(e.trim())).join(", ")),this.buf.push(" ",o,'="',J0(l),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Mf.hasOwnProperty(t)&&!q0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(J0(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const sE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,oE=/([^\#-~ |!])/g;function J0(i){return i.replace(/&/g,"&amp;").replace(sE,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(oE,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ef;function Q0(i,e){let t=null;try{Ef=Ef||function _d(i){const e=new ta(i);return function ic(){try{return!!(new window.DOMParser).parseFromString(ss(""),"text/html")}catch{return!1}}()?new $0(e):e}(i);let n=e?String(e):"";t=Ef.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=t.innerHTML,t=Ef.getInertBodyElement(n)}while(n!==s);return ss((new rE).sanitizeChildren(as(t)||t))}finally{if(t){const n=as(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function as(i){return"content"in i&&function aE(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Tn=(()=>((Tn=Tn||{})[Tn.NONE=0]="NONE",Tn[Tn.HTML=1]="HTML",Tn[Tn.STYLE=2]="STYLE",Tn[Tn.SCRIPT=3]="SCRIPT",Tn[Tn.URL=4]="URL",Tn[Tn.RESOURCE_URL=5]="RESOURCE_URL",Tn))();function Df(i){const e=function bd(){const i=xe();return i&&i[12]}();return e?e.sanitize(Tn.URL,i)||"":ea(i,"URL")?os(i):vd(Ot(i))}const Hg=new Se("ENVIRONMENT_INITIALIZER"),nb=new Se("INJECTOR",-1),ib=new Se("INJECTOR_DEF_TYPES");class rb{get(e,t=Qo){if(t===Qo){const n=new Error(`NullInjectorError: No provider for ${qn(e)}!`);throw n.name="NullInjectorError",n}return t}}function fE(...i){return{\u0275providers:sb(0,i)}}function sb(i,...e){const t=[],n=new Set;let r;return Ko(e,s=>{const o=s;Gg(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&ob(r,t),t}function ob(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];Ko(r,s=>{e.push(s)})}}function Gg(i,e,t,n){if(!(i=_t(i)))return!1;let r=null,s=Xn(i);const o=!s&&On(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=Xn(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Gg(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{Ko(s.imports,d=>{Gg(d,e,t,n)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&ob(c,e)}if(!a){const c=Wl(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Cn},{provide:ib,useValue:r,multi:!0},{provide:Hg,useValue:()=>j(r),multi:!0})}const l=s.providers;null==l||a||Ko(l,d=>{e.push(d)})}}return r!==i&&void 0!==i.providers}const pE=jn({provide:String,useValue:jn});function Wg(i){return null!==i&&"object"==typeof i&&pE in i}function rc(i){return"function"==typeof i}const xd=new Se("Set Injector scope."),wd={},gE={};let $g;function Af(){return void 0===$g&&($g=new rb),$g}class hl{}class cb extends hl{constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xg(e,o=>this.processProvider(o)),this.records.set(nb,lu(void 0,this)),r.has("environment")&&this.records.set(hl,lu(void 0,this));const s=this.records.get(xd);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ib.multi,Cn,mt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=ec(this),n=Us(void 0);try{return e()}finally{ec(t),Us(n)}}get(e,t=Qo,n=mt.Default){this.assertNotDestroyed();const r=ec(this),s=Us(void 0);try{if(!(n&mt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function bE(i){return"function"==typeof i||"object"==typeof i&&i instanceof Se}(e)&&jm(e);a=l&&this.injectableDefInScope(l)?lu(jg(e),wd):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&mt.Self?Af():this.parent).get(e,t=n&mt.Optional&&t===Qo?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[hd]=o[hd]||[]).unshift(qn(e)),r)throw o;return function k0(i,e,t,n){const r=i[hd];throw e[iu]&&r.unshift(e[iu]),i.message=function gf(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=qn(e);if(Array.isArray(e))r=e.map(qn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):qn(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(R0,"\n  ")}`}("\n"+i.message,r,t,n),i.ngTokenPath=r,i[hd]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{Us(s),ec(r)}}resolveInjectorInitializers(){const e=ec(this),t=Us(void 0);try{const n=this.get(Hg.multi,Cn,mt.Self);for(const r of n)r()}finally{ec(e),Us(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(qn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ge(205,!1)}processProvider(e){let t=rc(e=_t(e))?e:_t(e&&e.provide);const n=function vE(i){return Wg(i)?lu(void 0,i.useValue):lu(qg(i),wd)}(e);if(rc(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=lu(void 0,wd,!0),r.factory=()=>pd(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===wd&&(t.value=gE,t.value=t.factory()),"object"==typeof t.value&&t.value&&function yE(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=_t(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function jg(i){const e=jm(i),t=null!==e?e.factory:Wl(i);if(null!==t)return t;if(i instanceof Se)throw new ge(204,!1);if(i instanceof Function)return function _E(i){const e=i.length;if(e>0)throw Jl(e,"?"),new ge(204,!1);const t=function _S(i){const e=i&&(i[Bh]||i[Zy]);if(e){const t=function ni(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new ge(204,!1)}function qg(i,e,t){let n;if(rc(i)){const r=_t(i);return Wl(r)||jg(r)}if(Wg(i))n=()=>_t(i.useValue);else if(function lb(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...pd(i.deps||[]));else if(function ab(i){return!(!i||!i.useExisting)}(i))n=()=>j(_t(i.useExisting));else{const r=_t(i&&(i.useClass||i.provide));if(!function Tf(i){return!!i.deps}(i))return Wl(r)||jg(r);n=()=>new r(...pd(i.deps))}return n}function lu(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function xE(i){return!!i.\u0275providers}function Xg(i,e){for(const t of i)Array.isArray(t)?Xg(t,e):xE(t)?Xg(t.\u0275providers,e):e(t)}class ub{}class CE{resolveComponentFactory(e){throw function ME(i){const e=Error(`No component factory found for ${qn(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let sc=(()=>{class i{}return i.NULL=new CE,i})();function SE(){return cu(E(),xe())}function cu(i,e){return new Wt(Ws(i,e))}let Wt=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=SE,i})();function EE(i){return i instanceof Wt?i.nativeElement:i}class uu{}let ia=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function DE(){const i=xe(),t=Es(E().index,i);return(Nr(t)?t:i)[11]}(),i})(),AE=(()=>{class i{}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:()=>null}),i})();class oc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const TE=new oc("14.1.2"),du={};function Of(i){return i.ngOriginalError}class Oa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Of(e);for(;t&&Of(t);)t=Of(t);return t||null}}const e_=new Map;let FE=0;const n_="__ngContext__";function Ir(i,e){Nr(e)?(i[n_]=e[20],function BE(i){e_.set(i[20],i)}(e)):i[n_]=e}function Wr(i){const e=i[n_];return"number"==typeof e?function mb(i){return e_.get(i)||null}(e):e||null}function i_(i){const e=Wr(i);return e?Nr(e)?e:e.lView:null}const WE=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Vn))();function La(i){return i instanceof Function?i():i}var ls=(()=>((ls=ls||{})[ls.Important=1]="Important",ls[ls.DashCase=2]="DashCase",ls))();function o_(i,e){return undefined(i,e)}function hu(i){const e=i[3];return fo(e)?e[3]:e}function a_(i){return Sd(i[13])}function Nf(i){return Sd(i[4])}function Sd(i){for(;null!==i&&!fo(i);)i=i[4];return i}function wo(i,e,t,n,r){if(null!=n){let s,o=!1;fo(n)?s=n:Nr(n)&&(o=!0,n=n[0]);const a=ui(n);0===i&&null!==t?null==r?Eb(e,t,a):lc(e,t,a,r||null,!0):1===i&&null!==t?lc(e,t,a,r||null,!0):2===i?function Pb(i,e,t){const n=Uf(i,e);n&&function QE(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function nD(i,e,t,n,r){const s=t[7];s!==ui(t)&&wo(e,i,n,s,r);for(let a=10;a<t.length;a++){const l=t[a];rr(l[1],l,i,e,n,s)}}(e,i,s,t,r)}}function c_(i,e,t){return i.createElement(e,t)}function u_(i,e){const t=i[9],n=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,nd(r,-1)),t.splice(n,1)}function d_(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const r=n[17];null!==r&&r!==i&&u_(r,n),e>0&&(i[t-1][4]=n[4]);const s=dd(i,10+e);!function JE(i,e){rr(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function In(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&rr(i,e,t,3,null,null),function Xt(i){let e=i[13];if(!e)return h_(i[1],i);for(;e;){let t=null;if(Nr(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)Nr(e)&&h_(e[1],e),e=e[3];null===e&&(e=i),Nr(e)&&h_(e[1],e),t=e&&e[4]}e=t}}(e)}}function h_(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function Bf(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof sd)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,e),function Mb(i,e){const t=i.cleanup,n=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):ui(e[o]),l=n[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&fo(e[3])){t!==e[3]&&u_(t,e);const n=e[19];null!==n&&n.detachView(i)}!function UE(i){e_.delete(i[20])}(e)}}function Cb(i,e,t){return function Sb(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Hs.None||r===Hs.Emulated)return null}return Ws(n,t)}(i,e.parent,t)}function lc(i,e,t,n,r){i.insertBefore(e,t,n,r)}function Eb(i,e,t){i.appendChild(e,t)}function Db(i,e,t,n,r){null!==n?lc(i,e,t,n,r):Eb(i,e,t)}function Uf(i,e){return i.parentNode(e)}function Ab(i,e,t){return Ib(i,e,t)}let Ib=function Tb(i,e,t){return 40&i.type?Ws(i,t):null};function zf(i,e,t,n){const r=Cb(i,n,e),s=e[11],a=Ab(n.parent||e[6],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)Db(s,r,t[l],a,!1);else Db(s,r,t,a,!1)}function fu(i,e){if(null!==e){const t=e.type;if(3&t)return Ws(e,i);if(4&t)return p_(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return fu(i,n);{const r=i[e.index];return fo(r)?p_(-1,r):ui(r)}}if(32&t)return o_(e,i)()||ui(i[e.index]);{const n=Rb(i,e);return null!==n?Array.isArray(n)?n[0]:fu(hu(i[16]),n):fu(i,e.next)}}return null}function Rb(i,e){return null!==e?i[16][6].projection[e.projection]:null}function p_(i,e){const t=10+i+1;if(t<e.length){const n=e[t],r=n[1].firstChild;if(null!==r)return fu(n,r)}return e[7]}function Ni(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&Ir(ui(a),n),t.flags|=4),64!=(64&t.flags))if(8&l)Ni(i,e,t.child,n,r,s,!1),wo(e,i,r,a,s);else if(32&l){const c=o_(t,n);let d;for(;d=c();)wo(e,i,r,d,s);wo(e,i,r,a,s)}else 16&l?kb(i,e,n,t,r,s):wo(e,i,r,a,s);t=o?t.projectionNext:t.next}}function rr(i,e,t,n,r,s){Ni(t,n,i.firstChild,e,r,s,!1)}function kb(i,e,t,n,r,s){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)wo(e,i,r,l[c],s);else Ni(i,e,l,o[3],r,s,!0)}function Lb(i,e,t){i.setAttribute(e,"style",t)}function m_(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function Fb(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const Nb="ng-template";function rD(i,e,t){let n=0;for(;n<i.length;){let r=i[n++];if(t&&"class"===r){if(r=i[n],-1!==Fb(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Bb(i){return 4===i.type&&i.value!==Nb}function Ub(i,e,t){return e===(4!==i.type||t?i.value:Nb)}function Vb(i,e,t){let n=4;const r=i.attrs||[],s=function pu(i){for(let e=0;e<i.length;e++)if(ir(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!Ub(i,l,t)||""===l&&1===e.length){if(Mo(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!rD(i.attrs,c,t)){if(Mo(n))return!1;o=!0}continue}const f=sD(8&n?"class":l,r,Bb(i),t);if(-1===f){if(Mo(n))return!1;o=!0;continue}if(""!==c){let p;p=f>s?"":r[f+1].toLowerCase();const m=8&n?p:null;if(m&&-1!==Fb(m,c,0)||2&n&&c!==p){if(Mo(n))return!1;o=!0}}}}else{if(!o&&!Mo(n)&&!Mo(l))return!1;if(o&&Mo(l))continue;o=!1,n=l|1&n}}return Mo(n)||o}function Mo(i){return 0==(1&i)}function sD(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function aD(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function zb(i,e,t=!1){for(let n=0;n<e.length;n++)if(Vb(i,e[n],t))return!0;return!1}function lD(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function Hb(i,e){return i?":not("+e.trim()+")":e}function cD(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Mo(o)&&(e+=Hb(s,r),r=""),n=o,s=s||!Mo(n);t++}return""!==r&&(e+=Hb(s,r)),e}const Pt={};function re(i){Wb(on(),xe(),Ur()+i,!1)}function Wb(i,e,t,n){if(!n)if(3==(3&e[2])){const s=i.preOrderCheckHooks;null!==s&&rd(e,s,t)}else{const s=i.preOrderHooks;null!==s&&nf(e,s,0,t)}rl(t)}function Xb(i,e=null,t=null,n){const r=Yb(i,e,t,n);return r.resolveInjectorInitializers(),r}function Yb(i,e=null,t=null,n,r=new Set){const s=[t||Cn,fE(i)];return n=n||("object"==typeof i?void 0:qn(i)),new cb(s,e||Af(),n||null,r)}let fi=(()=>{class i{static create(t,n){if(Array.isArray(t))return Xb({name:""},n,t,"");{const r=t.name??"";return Xb({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=Qo,i.NULL=new rb,i.\u0275prov=Pe({token:i,providedIn:"any",factory:()=>j(nb)}),i.__NG_ELEMENT_ID__=-1,i})();function R(i,e=mt.Default){const t=xe();return null===t?j(i,e):b0(E(),t,_t(i),e)}function cc(){throw new Error("invalid")}function Ed(i,e){return i<<17|e<<2}function Co(i){return i>>17&32767}function Dd(i){return 2|i}function So(i){return(131068&i)>>2}function M_(i,e){return-131069&i|e<<2}function C_(i){return 1|i}function tk(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const r=t[n],s=t[n+1];if(-1!==s){const o=i.data[s];ug(r),o.contentQueries(2,e[s],s)}}}function cx(i,e,t,n,r,s,o,a,l,c,d){const f=e.blueprint.slice();return f[0]=r,f[2]=76|n,(null!==d||i&&1024&i[2])&&(f[2]|=1024),jc(f),f[3]=f[15]=i,f[8]=t,f[10]=o||i&&i[10],f[11]=a||i&&i[11],f[12]=l||i&&i[12]||null,f[9]=c||i&&i[9]||null,f[6]=s,f[20]=function NE(){return FE++}(),f[21]=d,f[16]=2==e.type?i[16]:f,f}function jf(i,e,t,n,r){let s=i.data[e];if(null===s)s=function RD(i,e,t,n,r){const s=$l(),o=nn(),l=i.data[e]=function k4(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,e,t,n,r),function IS(){return vt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function nl(){const i=vt.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Di(s,!0),s}function qf(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function ux(i,e,t){dg(e);try{const n=i.viewQuery;null!==n&&VD(1,n,t);const r=i.template;null!==r&&nk(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&tk(i,e),i.staticViewQueries&&VD(2,i.viewQuery,t);const s=i.components;null!==s&&function T4(i,e){for(let t=0;t<e.length;t++)Y4(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,hg()}}function A_(i,e,t,n){const r=e[2];if(128!=(128&r)){dg(e);try{jc(e),function c0(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&nk(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&rd(e,c,null)}else{const c=i.preOrderHooks;null!==c&&nf(e,c,0,null),vo(e,0)}if(function q4(i){for(let e=a_(i);null!==e;e=Nf(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const r=t[n],s=r[3];0==(512&r[2])&&nd(s,1),r[2]|=512}}}(e),function j4(i){for(let e=a_(i);null!==e;e=Nf(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];td(n)&&A_(r,n,r.template,n[8])}}(e),null!==i.contentQueries&&tk(i,e),o){const c=i.contentCheckHooks;null!==c&&rd(e,c)}else{const c=i.contentHooks;null!==c&&nf(e,c,1),vo(e,1)}!function lx(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)rl(~r);else{const s=r,o=t[++n],a=t[++n];RS(o,s),a(2,e[s])}}}finally{rl(-1)}}(i,e);const a=i.components;null!==a&&function A4(i,e){for(let t=0;t<e.length;t++)X4(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&VD(2,l,n),o){const c=i.viewCheckHooks;null!==c&&rd(e,c)}else{const c=i.viewHooks;null!==c&&nf(e,c,2),vo(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,nd(e[3],-1))}finally{hg()}}}function I4(i,e,t,n){const r=e[10],o=a0(e);try{!o&&r.begin&&r.begin(),o&&ux(i,e,n),A_(i,e,t,n)}finally{!o&&r.end&&r.end()}}function nk(i,e,t,n,r){const s=Ur(),o=2&n;try{rl(-1),o&&e.length>22&&Wb(i,e,22,!1),t(n,r)}finally{rl(s)}}function ik(i,e,t){if(Jm(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function PD(i,e,t){!l0()||(function B4(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;i.firstCreatePass||Jc(t,e),Ir(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=po(l);c&&G4(e,t,l);const d=Yl(e,i,a,t);Ir(d,e),null!==o&&W4(0,a-r,d,l,0,o),c&&(Es(t.index,e)[8]=d)}}(i,e,t,Ws(t,e)),128==(128&t.flags)&&function U4(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function PS(){return vt.lFrame.currentDirectiveIndex}();try{rl(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];cg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&uk(l,c)}}finally{rl(-1),cg(o)}}(i,e,t))}function kD(i,e,t=Ws){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function rk(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=OD(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function OD(i,e,t,n,r,s,o,a,l,c){const d=22+n,f=d+r,p=function R4(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:Pt);return t}(d,f),m="function"==typeof c?c():c;return p[1]={type:i,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function sk(i,e,t,n){const r=_k(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&vk(i).push(n,r.length-1))}function ok(i,e,t){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}return t}function ak(i,e){const n=e.directiveEnd,r=i.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<n;c++){const d=r[c],f=d.inputs,p=null===s||Bb(e)?null:$4(f,s);o.push(p),a=ok(f,c,a),l=ok(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function Ao(i,e,t,n,r,s,o,a){const l=Ws(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[n])?(zD(i,t,d,n,r),Gh(e)&&lk(t,e.index)):3&e.type&&(n=function O4(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function lk(i,e){const t=Es(e,i);16&t[2]||(t[2]|=32)}function LD(i,e,t,n){let r=!1;if(l0()){const s=function V4(i,e,t){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];zb(t,o.selectors,!1)&&(r||(r=[]),lf(Jc(t,e),i,o.type),po(o)?(dk(i,t),r.unshift(o)):r.push(o))}return r}(i,e,t),o=null===n?null:{"":-1};if(null!==s){r=!0,hk(t,i.data.length,s.length);for(let d=0;d<s.length;d++){const f=s[d];f.providersResolver&&f.providersResolver(f)}let a=!1,l=!1,c=qf(i,e,s.length,null);for(let d=0;d<s.length;d++){const f=s[d];t.mergedAttrs=ad(t.mergedAttrs,f.hostAttrs),fk(i,t,e,c,f),H4(c,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),l=!0),c++}ak(i,t)}o&&function z4(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new ge(-301,!1);n.push(e[r],s)}}}(t,n,o)}return t.mergedAttrs=ad(t.mergedAttrs,t.attrs),r}function ck(i,e,t,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function N4(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function uk(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function dk(i,e){e.flags|=2,(i.components||(i.components=[])).push(e.index)}function H4(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;po(e)&&(t[""]=i)}}function hk(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function fk(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=Wl(r.type)),o=new sd(s,po(r),R);i.blueprint[n]=o,t[n]=o,ck(i,e,0,n,qf(i,t,r.hostVars,Pt),r)}function G4(i,e,t){const n=Ws(e,i),r=rk(t),s=i[10],o=dx(i,cx(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}function gl(i,e,t,n,r,s){const o=Ws(i,e);!function FD(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?Ot(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[11],o,s,i.value,t,n,r)}function W4(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],f=o[l++];null!==a?n.setInput(t,f,c,d):t[d]=f}}}function $4(i,e){let t=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,i[r],e[n+1])),n+=2}else n+=2;else n+=4}return t}function pk(i,e,t,n){return new Array(i,!0,!1,e,null,0,n,t,null,null)}function X4(i,e){const t=Es(e,i);if(td(t)){const n=t[1];48&t[2]?A_(n,t,n.template,t[8]):t[5]>0&&ND(t)}}function ND(i){for(let n=a_(i);null!==n;n=Nf(n))for(let r=10;r<n.length;r++){const s=n[r];if(td(s))if(512&s[2]){const o=s[1];A_(o,s,o.template,s[8])}else s[5]>0&&ND(s)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Es(t[n],i);td(r)&&r[5]>0&&ND(r)}}function Y4(i,e){const t=Es(e,i),n=t[1];(function Z4(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),ux(n,t,t[8])}function dx(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function BD(i){for(;i;){i[2]|=32;const e=hu(i);if($h(i)&&!e)return i;i=e}return null}function gk(i){!function mk(i){for(let e=0;e<i.components.length;e++){const t=i.components[e],n=i_(t);if(null!==n){const r=n[1];I4(r,n,r.template,t)}}}(i[8])}function VD(i,e,t){ug(0),e(i,t)}const J4=(()=>Promise.resolve(null))();function _k(i){return i[7]||(i[7]=[])}function vk(i){return i.cleanup||(i.cleanup=[])}function yk(i,e,t){return(null===i||po(i))&&(t=function ag(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(t[e.index])),t[11]}function bk(i,e){const t=i[9],n=t?t.get(Oa,null):null;n&&n.handleError(e)}function zD(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function uc(i,e,t){const n=ed(e,i);!function bb(i,e,t){i.setValue(e,t)}(i[11],n,t)}function hx(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Nh(r,a):2==s&&(n=Nh(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function fx(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(ui(s)),fo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&fx(l[1],l,c,n)}const o=t.type;if(8&o)fx(i,e,t.child,n);else if(32&o){const a=o_(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=Rb(e,t);if(Array.isArray(a))n.push(...a);else{const l=hu(e[16]);fx(l[1],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class T_{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return fx(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(fo(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(d_(e,n),dd(t,n))}this._attachedToViewContainer=!1}In(this._lView[1],this._lView)}onDestroy(e){sk(this._lView[1],this._lView,null,e)}markForCheck(){BD(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function UD(i,e,t){const n=e[10];n.begin&&n.begin();try{A_(i,e,i.template,t)}catch(r){throw bk(e,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ge(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Na(i,e){rr(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ge(902,!1);this._appRef=e}}class Q4 extends T_{constructor(e){super(e),this._view=e}detectChanges(){gk(this._view)}checkNoChanges(){}get context(){return null}}class HD extends sc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=On(e);return new I_(t,this.ngModule)}}function xk(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class t5{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const r=this.injector.get(e,du,n);return r!==du||t===du?r:this.parentInjector.get(e,t,n)}}class I_ extends ub{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function uD(i){return i.map(cD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return xk(this.componentDef.inputs)}get outputs(){return xk(this.componentDef.outputs)}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof hl?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new t5(e,s):e,a=o.get(uu,null);if(null===a)throw new ge(407,!1);const l=o.get(AE,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",f=n?function P4(i,e,t){return i.selectRootElement(e,t===Hs.ShadowDom)}(c,n,this.componentDef.encapsulation):c_(a.createRenderer(null,this.componentDef),d,function e5(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),p=this.componentDef.onPush?288:272,m=function o5(i,e){return{components:[],scheduler:i||WE,clean:J4,playerHandler:e||null,flags:0}}(),_=OD(0,null,null,1,0,null,null,null,null,null),b=cx(null,_,m,p,null,null,a,c,l,o,null);let y,v;dg(b);try{const M=function r5(i,e,t,n,r,s){const o=t[1];t[22]=i;const l=jf(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(hx(l,c,!0),null!==i&&(od(r,i,c),null!==l.classes&&m_(r,i,l.classes),null!==l.styles&&Lb(r,i,l.styles)));const d=n.createRenderer(i,e),f=cx(t,rk(e),null,e.onPush?32:16,t[22],l,n,d,s||null,null,null);return o.firstCreatePass&&(lf(Jc(l,t),o,e.type),dk(o,l),hk(l,t.length,1)),dx(t,f),t[22]=f}(f,this.componentDef,b,a,c);if(f)if(n)od(c,f,["ng-version",TE.full]);else{const{attrs:w,classes:C}=function Gb(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!Mo(r))break;r=s}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);w&&od(c,f,w),C&&C.length>0&&m_(c,f,C.join(" "))}if(v=Si(_,22),void 0!==t){const w=v.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const D=t[C];w.push(null!=D?Array.from(D):null)}}y=function s5(i,e,t,n,r){const s=t[1],o=function F4(i,e,t){const n=E();i.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),fk(i,n,e,qf(i,e,1,null),t),ak(i,n));const r=Yl(e,i,n.directiveStart,n);Ir(r,e);const s=Ws(n,e);return s&&Ir(s,e),r}(s,t,e);if(n.components.push(o),i[8]=o,null!==r)for(const l of r)l(o,e);if(e.contentQueries){const l=E();e.contentQueries(1,o,l.directiveStart)}const a=E();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(rl(a.index),ck(t[1],a,0,a.directiveStart,a.directiveEnd,e),uk(e,o)),o}(M,this.componentDef,b,m,[a5]),ux(_,b,null)}finally{hg()}return new i5(this.componentType,y,cu(v,b),b,v)}}class i5 extends class wE{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new Q4(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;zD(s[1],s,r,e,t),lk(s,this._tNode.index)}}get injector(){return new Zl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function a5(){const i=E();tf(xe()[1],i)}function lt(i){let e=function wk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(po(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ge(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=GD(i.inputs),o.declaredInputs=GD(i.declaredInputs),o.outputs=GD(i.outputs);const a=r.hostBindings;a&&d5(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&c5(i,l),c&&u5(i,c),Wm(i.inputs,r.inputs),Wm(i.declaredInputs,r.declaredInputs),Wm(i.outputs,r.outputs),po(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===lt&&(t=!1)}}e=Object.getPrototypeOf(e)}!function l5(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=ad(r.hostAttrs,t=ad(t,r.hostAttrs))}}(n)}function GD(i){return i===Ul?{}:i===Cn?[]:i}function c5(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function u5(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function d5(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}let px=null;function Ad(){if(!px){const i=Vn.Symbol;if(i&&i.iterator)px=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(px=n)}}}return px}function R_(i){return!!WD(i)&&(Array.isArray(i)||!(i instanceof Map)&&Ad()in i)}function WD(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function _l(i,e,t){return i[e]=t}function us(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function Td(i,e,t,n){const r=us(i,e,t);return us(i,e+1,n)||r}function Qt(i,e,t,n){const r=xe();return us(r,Zc(),e)&&(on(),gl(di(),r,i,e,t,n)),Qt}function Yf(i,e,t,n){return us(i,Zc(),t)?e+Ot(t)+n:Pt}function Zf(i,e,t,n,r,s){const a=Td(i,function Ta(){return vt.lFrame.bindingIndex}(),t,r);return mr(2),a?e+Ot(t)+n+Ot(r)+s:Pt}function Ne(i,e,t,n,r,s,o,a){const l=xe(),c=on(),d=i+22,f=c.firstCreatePass?function b5(i,e,t,n,r,s,o,a,l){const c=e.consts,d=jf(e,i,4,o||null,Xo(c,a));LD(e,t,d,Xo(c,l)),tf(e,d);const f=d.tViews=OD(2,d,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,n,r,s,o):c.data[d];Di(f,!1);const p=l[11].createComment("");zf(c,l,p,f),Ir(p,l),dx(l,l[d]=pk(p,l,p,f)),Wh(f)&&PD(c,l,f),null!=o&&kD(l,f,a)}function mu(i){return Ei(function TS(){return vt.lFrame.contextLView}(),22+i)}function oe(i,e,t){const n=xe();return us(n,Zc(),e)&&Ao(on(),di(),n,i,e,n[11],t,!1),oe}function $D(i,e,t,n,r){const o=r?"class":"style";zD(i,t,e.inputs[o],o,n)}function fe(i,e,t,n){const r=xe(),s=on(),o=22+i,a=r[11],l=r[o]=c_(a,e,function id(){return vt.lFrame.currentNamespace}()),c=s.firstCreatePass?function w5(i,e,t,n,r,s,o){const a=e.consts,c=jf(e,i,2,r,Xo(a,s));return LD(e,t,c,Xo(a,o)),null!==c.attrs&&hx(c,c.attrs,!1),null!==c.mergedAttrs&&hx(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,n):s.data[o];Di(c,!0);const d=c.mergedAttrs;null!==d&&od(a,l,d);const f=c.classes;null!==f&&m_(a,l,f);const p=c.styles;return null!==p&&Lb(a,l,p),64!=(64&c.flags)&&zf(s,r,l,c),0===function Jh(){return vt.lFrame.elementDepthCount}()&&Ir(l,r),function Xc(){vt.lFrame.elementDepthCount++}(),Wh(c)&&(PD(s,r,c),ik(s,c,r)),null!==n&&kD(r,c),fe}function be(){let i=E();nn()?lg():(i=i.parent,Di(i,!1));const e=i;!function ES(){vt.lFrame.elementDepthCount--}();const t=on();return t.firstCreatePass&&(tf(t,i),Jm(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function _0(i){return 0!=(16&i.flags)}(e)&&$D(t,e,xe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function NS(i){return 0!=(32&i.flags)}(e)&&$D(t,e,xe(),e.stylesWithoutHost,!1),be}function Et(i,e,t,n){return fe(i,e,t,n),be(),Et}function sa(i,e,t){const n=xe(),r=on(),s=i+22,o=r.firstCreatePass?function M5(i,e,t,n,r){const s=e.consts,o=Xo(s,n),a=jf(e,i,8,"ng-container",o);return null!==o&&hx(a,o,!0),LD(e,t,a,Xo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,n,e,t):r.data[s];Di(o,!0);const a=n[s]=n[11].createComment("");return zf(r,n,a,o),Ir(a,n),Wh(o)&&(PD(r,n,o),ik(r,o,n)),null!=t&&kD(n,o),sa}function oa(){let i=E();const e=on();return nn()?lg():(i=i.parent,Di(i,!1)),e.firstCreatePass&&(tf(e,i),Jm(i)&&e.queries.elementEnd(i)),oa}function Rr(){return xe()}function k_(i){return!!i&&"function"==typeof i.then}function kk(i){return!!i&&"function"==typeof i.subscribe}const jD=kk;function ct(i,e,t,n){const r=xe(),s=on(),o=E();return Ok(s,r,r[11],o,i,e,0,n),ct}function gx(i,e){const t=E(),n=xe(),r=on();return Ok(r,n,yk(go(r.data),t,n),t,i,e),gx}function Ok(i,e,t,n,r,s,o,a){const l=Wh(n),d=i.firstCreatePass&&vk(i),f=e[8],p=_k(e);let m=!0;if(3&n.type||a){const y=Ws(n,e),v=a?a(y):y,M=p.length,w=a?D=>a(ui(D[n.index])):n.index;let C=null;if(!a&&l&&(C=function C5(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,m=!1;else{s=Fk(n,e,f,s,!1);const D=t.listen(v,r,s);p.push(s,D),d&&d.push(r,w,M,M+1)}}else s=Fk(n,e,f,s,!1);const _=n.outputs;let b;if(m&&null!==_&&(b=_[r])){const y=b.length;if(y)for(let v=0;v<y;v+=2){const I=e[b[v]][b[v+1]].subscribe(s),N=p.length;p.push(s,I),d&&d.push(r,n.index,N,-(N+1))}}}function Lk(i,e,t,n){try{return!1!==t(n)}catch(r){return bk(i,r),!1}}function Fk(i,e,t,n,r){return function s(o){if(o===Function)return n;BD(2&i.flags?Es(i.index,e):e);let l=Lk(e,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=Lk(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Le(i=1){return function OS(i){return(vt.lFrame.contextLView=function LS(i,e){for(;i>0;)e=e[15],i--;return e}(i,vt.lFrame.contextLView))[8]}(i)}function S5(i,e){let t=null;const n=function oD(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?zb(i,s,!0):lD(n,s))return r}else t=r}return t}function Ys(i){const e=xe()[16][6];if(!e.projection){const n=e.projection=Jl(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const o=i?S5(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Yn(i,e=0,t){const n=xe(),r=on(),s=jf(r,22+i,16,null,t||null);null===s.projection&&(s.projection=e),lg(),64!=(64&s.flags)&&function tD(i,e,t){kb(e[11],0,e,t,Cb(i,t,e),Ab(t.parent||e[6],t,e))}(r,n,s)}function jk(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?Co(s):So(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];A5(i[a],e)&&(l=!0,i[a+1]=n?C_(d):Dd(d)),a=n?Co(d):So(d)}l&&(i[t+1]=n?Dd(s):C_(s))}function A5(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&tu(i,e)>=0}const vr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function qk(i){return i.substring(vr.key,vr.keyEnd)}function Xk(i,e){const t=vr.textEnd;return t===e?-1:(e=vr.keyEnd=function P5(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}(i,vr.key=e,t),ip(i,e,t))}function ip(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function dc(i,e,t){return Ba(i,e,t,!1),dc}function li(i,e){return Ba(i,e,null,!0),li}function yl(i,e){for(let t=function I5(i){return function Zk(i){vr.key=0,vr.keyEnd=0,vr.value=0,vr.valueEnd=0,vr.textEnd=i.length}(i),Xk(i,ip(i,0,vr.textEnd))}(e);t>=0;t=Xk(e,t))zr(i,qk(e),!0)}function Ba(i,e,t,n){const r=xe(),s=on(),o=mr(2);s.firstUpdatePass&&eO(s,i,o,n),e!==Pt&&us(r,o,e)&&nO(s,s.data[Ur()],r,r[11],i,r[o+1]=function G5(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=qn(os(i)))),i}(e,t),n,o)}function Qk(i,e){return e>=i.expandoStartIndex}function eO(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[Ur()],o=Qk(i,t);rO(s,n)&&null===e&&!o&&(e=!1),e=function N5(i,e,t,n){const r=go(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=O_(t=XD(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=XD(r,i,e,t,n),null===s){let l=function B5(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==So(n))return i[Co(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=XD(null,i,e,l[1],n),l=O_(l,e.attrs,n),function U5(i,e,t,n){i[Co(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function V5(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=O_(n,i[s].hostAttrs,t);return O_(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function E5(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=Co(o),l=So(o);i[n]=t;let d,c=!1;if(Array.isArray(t)){const f=t;d=f[1],(null===d||tu(f,d)>0)&&(c=!0)}else d=t;if(r)if(0!==l){const p=Co(i[a+1]);i[n+1]=Ed(p,a),0!==p&&(i[p+1]=M_(i[p+1],n)),i[a+1]=function SD(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=Ed(a,0),0!==a&&(i[a+1]=M_(i[a+1],n)),a=n;else i[n+1]=Ed(l,0),0===a?a=n:i[l+1]=M_(i[l+1],n),l=n;c&&(i[n+1]=Dd(i[n+1])),jk(i,d,n,!0),jk(i,d,n,!1),function D5(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&tu(s,e)>=0&&(t[n+1]=C_(t[n+1]))}(e,d,i,n,s),o=Ed(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}function XD(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=O_(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function O_(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),zr(i,o,!!t||e[++s]))}return void 0===i?null:i}function nO(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1];_x(function rx(i){return 1==(1&i)}(c)?iO(l,e,t,r,So(c),o):void 0)||(_x(s)||function ix(i){return 2==(2&i)}(c)&&(s=iO(l,null,t,r,a,o)),function Ob(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:ls.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ls.Important),i.setStyle(t,n,r,s))}}(n,o,ed(Ur(),t),r,s))}function iO(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,f=null===d;let p=t[r+1];p===Pt&&(p=f?Cn:void 0);let m=f?Sg(p,n):d===n?p:void 0;if(c&&!_x(m)&&(m=Sg(l,n)),_x(m)&&(a=m,o))return a;const _=i[r+1];r=o?Co(_):So(_)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Sg(l,n))}return a}function _x(i){return void 0!==i}function rO(i,e){return 0!=(i.flags&(e?16:32))}function pt(i,e=""){const t=xe(),n=on(),r=i+22,s=n.firstCreatePass?jf(n,r,1,e,null):n.data[r],o=t[r]=function l_(i,e){return i.createText(e)}(t[11],e);zf(n,t,o,s),Di(s,!1)}function Ti(i){return ds("",i,""),Ti}function ds(i,e,t){const n=xe(),r=Yf(n,i,e,t);return r!==Pt&&uc(n,Ur(),r),ds}function L_(i,e,t,n,r){const s=xe(),o=Zf(s,i,e,t,n,r);return o!==Pt&&uc(s,Ur(),o),L_}function hO(i,e,t){!function Ua(i,e,t,n){const r=on(),s=mr(2);r.firstUpdatePass&&eO(r,null,s,n);const o=xe();if(t!==Pt&&us(o,s,t)){const a=r.data[Ur()];if(rO(a,n)&&!Qk(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Nh(l,t||"")),$D(r,a,o,t,n)}else!function H5(i,e,t,n,r,s,o,a){r===Pt&&(r=Cn);let l=0,c=0,d=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==d||null!==f;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let b,_=null;d===f?(l+=2,c+=2,p!==m&&(_=f,b=m)):null===f||null!==d&&d<f?(l+=2,_=d):(c+=2,_=f,b=m),null!==_&&nO(i,e,t,n,_,b,o,a),d=l<r.length?r[l]:null,f=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function z5(i,e,t){if(null==t||""===t)return Cn;const n=[],r=os(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&e(n,r);return n}(i,e,t),n,s)}}(zr,yl,Yf(xe(),i,e,t),!0)}function rp(i,e,t){const n=xe();return us(n,Zc(),e)&&Ao(on(),di(),n,i,e,n[11],t,!0),rp}function vx(i,e,t){const n=xe();if(us(n,Zc(),e)){const s=on(),o=di();Ao(s,o,n,i,e,yk(go(s.data),o,n),t,!0)}return vx}const Id=void 0;var lG=["en",[["a","p"],["AM","PM"],Id],[["AM","PM"],Id,Id],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Id,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Id,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Id,"{1} 'at' {0}",Id],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aG(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let sp={};function Ds(i){const e=function cG(i){return i.toLowerCase().replace(/_/g,"-")}(i);let t=MO(e);if(t)return t;const n=e.split("-")[0];if(t=MO(n),t)return t;if("en"===n)return lG;throw new ge(701,!1)}function MO(i){return i in sp||(sp[i]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[i]),sp[i]}var We=(()=>((We=We||{})[We.LocaleId=0]="LocaleId",We[We.DayPeriodsFormat=1]="DayPeriodsFormat",We[We.DayPeriodsStandalone=2]="DayPeriodsStandalone",We[We.DaysFormat=3]="DaysFormat",We[We.DaysStandalone=4]="DaysStandalone",We[We.MonthsFormat=5]="MonthsFormat",We[We.MonthsStandalone=6]="MonthsStandalone",We[We.Eras=7]="Eras",We[We.FirstDayOfWeek=8]="FirstDayOfWeek",We[We.WeekendRange=9]="WeekendRange",We[We.DateFormat=10]="DateFormat",We[We.TimeFormat=11]="TimeFormat",We[We.DateTimeFormat=12]="DateTimeFormat",We[We.NumberSymbols=13]="NumberSymbols",We[We.NumberFormats=14]="NumberFormats",We[We.CurrencyCode=15]="CurrencyCode",We[We.CurrencySymbol=16]="CurrencySymbol",We[We.CurrencyName=17]="CurrencyName",We[We.Currencies=18]="Currencies",We[We.Directionality=19]="Directionality",We[We.PluralCase=20]="PluralCase",We[We.ExtraData=21]="ExtraData",We))();const op="en-US";let CO=op;function KD(i,e,t,n,r){if(i=_t(i),Array.isArray(i))for(let s=0;s<i.length;s++)KD(i[s],e,t,n,r);else{const s=on(),o=xe();let a=rc(i)?i:_t(i.provide),l=qg(i);const c=E(),d=1048575&c.providerIndexes,f=c.directiveStart,p=c.providerIndexes>>20;if(rc(i)||!i.multi){const m=new sd(l,r,R),_=QD(a,e,r?d:d+p,f);-1===_?(lf(Jc(c,o),s,a),JD(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{const m=QD(a,e,d+p,f),_=QD(a,e,d,d+p),b=m>=0&&t[m],y=_>=0&&t[_];if(r&&!y||!r&&!b){lf(Jc(c,o),s,a);const v=function oW(i,e,t,n,r){const s=new sd(i,t,R);return s.multi=[],s.index=e,s.componentProviders=0,YO(s,r,n&&!t),s}(r?sW:rW,t.length,r,n,l);!r&&y&&(t[_].providerFactory=v),JD(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(v),o.push(v)}else JD(s,i,m>-1?m:_,YO(t[r?_:m],l,!r&&n));!r&&n&&y&&t[_].componentProviders++}}}function JD(i,e,t,n){const r=rc(e),s=function mE(i){return!!i.useClass}(e);if(r||s){const l=(s?_t(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[n,l]):c[d+1].push(n,l)}else c.push(t,l)}}}function YO(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function QD(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function rW(i,e,t,n){return eA(this.multi,[])}function sW(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Yl(t,t[1],this.providerFactory.index,n);s=a.slice(0,o),eA(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],eA(r,s);return s}function eA(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function Fn(i,e=[]){return t=>{t.providersResolver=(n,r)=>function iW(i,e,t){const n=on();if(n.firstCreatePass){const r=po(i);KD(t,n.data,n.blueprint,r,!0),KD(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class Rd{}class ZO{}class KO extends Rd{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new HD(this);const n=Cs(e);this._bootstrapComponents=La(n.bootstrap),this._r3Injector=Yb(e,t,[{provide:Rd,useValue:this},{provide:sc,useValue:this.componentFactoryResolver}],qn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class tA extends ZO{constructor(e){super(),this.moduleType=e}create(e){return new KO(this.moduleType,e)}}class lW extends Rd{constructor(e,t,n){super(),this.componentFactoryResolver=new HD(this),this.instance=null;const r=new cb([...e,{provide:Rd,useValue:this},{provide:sc,useValue:this.componentFactoryResolver}],t||Af(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Mx(i,e,t=null){return new lW(i,e,t).injector}function aa(i,e,t){const n=Br()+i,r=xe();return r[n]===Pt?_l(r,n,t?e.call(t):e()):function P_(i,e){return i[e]}(r,n)}function Cx(i,e,t,n){return rL(xe(),Br(),i,e,t,n)}function V_(i,e){const t=i[e];return t===Pt?void 0:t}function rL(i,e,t,n,r,s){const o=e+t;return us(i,o,r)?_l(i,o+1,s?n.call(s,r):n(r)):V_(i,o+1)}function Vi(i,e){const t=on();let n;const r=i+22;t.firstCreatePass?(n=function DW(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=Wl(n.type)),o=Us(R);try{const a=Kc(!1),l=s();return Kc(a),function x5(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,xe(),r,l),l}finally{Us(o)}}function sr(i,e,t){const n=i+22,r=xe(),s=Ei(r,n);return z_(r,n)?rL(r,Br(),e,s.transform,t,s):s.transform(t)}function iA(i,e,t,n){const r=i+22,s=xe(),o=Ei(s,r);return z_(s,r)?function sL(i,e,t,n,r,s,o){const a=e+t;return Td(i,a,r,s)?_l(i,a+2,o?n.call(o,r,s):n(r,s)):V_(i,a+2)}(s,Br(),e,o.transform,t,n,o):o.transform(t,n)}function z_(i,e){return i[1].data[e].pure}function rA(i){return e=>{setTimeout(i,void 0,e)}}const et=class RW extends He{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=rA(s),r&&(r=rA(r)),o&&(o=rA(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Zt&&e.add(a),a}};function PW(){return this._results[Ad()]()}class lp{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ad(),n=lp.prototype;n[t]||(n[t]=PW)}get changes(){return this._changes||(this._changes=new et)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Tr(e);(this._changesDetected=!function D0(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zs=(()=>{class i{}return i.__NG_ELEMENT_ID__=LW,i})();const kW=Zs,OW=class extends kW{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,r=cx(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),ux(n,r,e),new T_(r)}};function LW(){return Sx(E(),xe())}function Sx(i,e){return 4&i.type?new OW(e,i,cu(i,e)):null}let Xr=(()=>{class i{}return i.__NG_ELEMENT_ID__=FW,i})();function FW(){return dL(E(),xe())}const NW=Xr,cL=class extends NW{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return cu(this._hostTNode,this._hostLView)}get injector(){return new Zl(this._hostTNode,this._hostLView)}get parentInjector(){const e=sl(this._hostTNode,this._hostLView);if(af(e)){const t=Xl(e,this._hostLView),n=Ra(e);return new Zl(t[1].data[n+8],t)}return new Zl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=uL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function js(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,n=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const l=o?e:new I_(On(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const p=(o?c:this.parentInjector).get(hl,null);p&&(s=p)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(e,t){const n=e._lView,r=n[1];if(function SS(i){return fo(i[3])}(n)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const f=n[3],p=new cL(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function wb(i,e,t,n){const r=10+n,s=t.length;n>0&&(t[r-1][4]=e),n<s-10?(e[4]=t[r],hf(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Xs(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(r,n,o,s);const a=p_(s,o),l=n[11],c=Uf(l,o[7]);return null!==c&&function xb(i,e,t,n,r,s){n[0]=r,n[6]=e,rr(i,n,t,1,r,s)}(r,o[6],l,n,c,a),e.attachToViewContainerRef(),hf(sA(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=uL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=d_(this._lContainer,t);n&&(dd(sA(this._lContainer),t),In(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=d_(this._lContainer,t);return n&&null!=dd(sA(this._lContainer),t)?new T_(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function uL(i){return i[8]}function sA(i){return i[8]||(i[8]=[])}function dL(i,e){let t;const n=e[i.index];if(fo(n))t=n;else{let r;if(8&i.type)r=ui(n);else{const s=e[11];r=s.createComment("");const o=Ws(i,e);lc(s,Uf(s,o),r,function eD(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=pk(n,e,r,i),dx(e,t)}return new cL(t,i,e)}class oA{constructor(e){this.queryList=e,this.matches=null}clone(){return new oA(this.queryList)}setDirty(){this.queryList.setDirty()}}class aA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new aA(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==gL(e,t).matches&&this.queries[t].setDirty()}}class hL{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class lA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new lA(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,VW(t,s)),this.matchTNodeWithReadOption(e,t,cd(t,e,s,!1,!1))}else n===Zs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,cd(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Wt||r===Xr||r===Zs&&4&t.type)this.addMatch(t.index,-2);else{const s=cd(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function VW(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function HW(i,e,t,n){return-1===t?function zW(i,e){return 11&i.type?cu(i,e):4&i.type?Sx(i,e):null}(e,i):-2===t?function GW(i,e,t){return t===Wt?cu(e,i):t===Zs?Sx(e,i):t===Xr?dL(e,i):void 0}(i,e,n):Yl(i,i[1],t,e)}function fL(i,e,t,n){const r=e[19].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:HW(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function uA(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=fL(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let f=10;f<d.length;f++){const p=d[f];p[17]===p[3]&&uA(p[1],p,c,n)}if(null!==d[9]){const f=d[9];for(let p=0;p<f.length;p++){const m=f[p];uA(m[1],m,c,n)}}}}}return n}function $t(i){const e=xe(),t=on(),n=d0();ug(n+1);const r=gL(t,n);if(i.dirty&&a0(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?uA(t,e,n,[]):fL(t,e,r,n);i.reset(s,EE),i.notifyOnChanges()}return!0}return!1}function ji(i,e,t){const n=on();n.firstCreatePass&&(mL(n,new hL(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),pL(n,xe(),e)}function bi(i,e,t,n){const r=on();if(r.firstCreatePass){const s=E();mL(r,new hL(e,t,n),s.index),function $W(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}pL(r,xe(),t)}function jt(){return function WW(i,e){return i[19].queries[e].queryList}(xe(),d0())}function pL(i,e,t){const n=new lp(4==(4&t));sk(i,e,n,n.destroy),null===e[19]&&(e[19]=new aA),e[19].queries.push(new oA(n))}function mL(i,e,t){null===i.queries&&(i.queries=new lA),i.queries.track(new cA(e,t))}function gL(i,e){return i.queries.getByIndex(e)}function dA(i,e){return Sx(i,e)}function Dx(...i){}const Ax=new Se("Application Initializer");let Tx=(()=>{class i{constructor(t){this.appInits=t,this.resolve=Dx,this.reject=Dx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(k_(s))t.push(s);else if(jD(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(j(Ax,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hp=new Se("AppId",{providedIn:"root",factory:function LL(){return`${gA()}${gA()}${gA()}`}});function gA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const FL=new Se("Platform Initializer"),_A=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),NL=new Se("appBootstrapListener"),Ks=new Se("AnimationModuleType");let d8=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const bl=new Se("LocaleId",{providedIn:"root",factory:()=>Hn(bl,mt.Optional|mt.SkipSelf)||function h8(){return typeof $localize<"u"&&$localize.locale||op}()});class p8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let vA=(()=>{class i{compileModuleSync(t){return new tA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=La(Cs(t).declarations).reduce((o,a)=>{const l=On(a);return l&&o.push(new I_(l)),o},[]);return new p8(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _8=(()=>Promise.resolve(0))();function yA(i){typeof Zone>"u"?_8.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class St{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new ge(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function v8(){let i=Vn.requestAnimationFrame,e=Vn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function x8(i){const e=()=>{!function b8(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,xA(i),i.isCheckStableRunning=!0,bA(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),xA(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return VL(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),zL(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return VL(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),zL(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,xA(i),bA(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!St.isInAngularZone())throw new ge(909,!1)}static assertNotInAngularZone(){if(St.isInAngularZone())throw new ge(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,y8,Dx,Dx);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const y8={};function bA(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function xA(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function VL(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function zL(i){i._nesting--,bA(i)}class w8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const HL=new Se(""),Ix=new Se("");let CA,wA=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,CA||(function M8(i){CA=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{St.assertNotInAngularZone(),yA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())yA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(j(St),j(MA),j(Ix))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),MA=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return CA?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),gu=null;const GL=new Se("AllowMultipleToken"),SA=new Se("PlatformDestroyListeners");class WL{constructor(e,t){this.name=e,this.token=t}}function jL(i,e,t=[]){const n=`Platform: ${e}`,r=new Se(n);return(s=[])=>{let o=EA();if(!o||o.injector.get(GL,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function E8(i){if(gu&&!gu.get(GL,!1))throw new ge(400,!1);gu=i;const e=i.get(XL);(function $L(i){const e=i.get(FL,null);e&&e.forEach(t=>t())})(i)}(function qL(i=[],e){return fi.create({name:e,providers:[{provide:xd,useValue:"platform"},{provide:SA,useValue:new Set([()=>gu=null])},...i]})}(a,n))}return function A8(i){const e=EA();if(!e)throw new ge(401,!1);return e}()}}function EA(){return gu?.get(XL)??null}let XL=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function T8(i,e){let t;return t="noop"===i?new w8:("zone.js"===i?void 0:i)||new St(e),t}(n?.ngZone,function YL(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:St,useValue:r}];return r.run(()=>{const o=fi.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Oa,null);if(!l)throw new ge(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{Rx(this._modules,a),c.unsubscribe()})}),function ZL(i,e,t){try{const n=t();return k_(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(Tx);return c.runInitializers(),c.donePromise.then(()=>(function SO(i){Qr(i,"Expected localeId to be defined"),"string"==typeof i&&(CO=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(bl,op)||op),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=KL({},n);return function C8(i,e,t){const n=new tA(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(Pd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new ge(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ge(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(SA,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(j(fi))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function KL(i,e){return Array.isArray(e)?e.reduce(KL,i):{...i,...e}}let Pd=(()=>{class i{constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new vn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new vn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{St.assertNotInAngularZone(),yA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{St.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Ms(s,o.pipe(Hm()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const r=t instanceof ub;if(!this._injector.get(Tx).done)throw!r&&function up(i){const e=On(i)||Qi(i)||Oi(i);return null!==e&&e.standalone}(t),new ge(405,false);let o;o=r?t:this._injector.get(sc).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function S8(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Rd),c=o.create(fi.NULL,[],n||o.selector,a),d=c.location.nativeElement,f=c.injector.get(HL,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Rx(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new ge(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;Rx(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(NL,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Rx(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ge(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(j(St),j(hl),j(Oa))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Rx(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let QL=!0,ri=(()=>{class i{}return i.__NG_ELEMENT_ID__=P8,i})();function P8(i){return function k8(i,e,t){if(Gh(i)&&!t){const n=Es(i.index,e);return new T_(n,n)}return 47&i.type?new T_(e[16],e):null}(E(),xe(),16==(16&i))}class rF{constructor(){}supports(e){return R_(e)}create(e){return new U8(e)}}const B8=(i,e)=>e;class U8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||B8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<oF(n,r,s)?t:n,a=oF(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,_=m+p;d<=_&&_<c&&(s[p]=m+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!R_(e))throw new ge(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function g5(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[Ad()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new V8(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new sF),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new sF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class V8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class z8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class sF{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new z8,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function oF(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class aF{constructor(){}supports(e){return e instanceof Map||WD(e)}create(){return new H8}}class H8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||WD(e)))throw new ge(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new G8(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class G8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lF(){return new Ox([new rF])}let Ox=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||lF()),deps:[[i,new ul,new xo]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new ge(901,!1)}}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:lF}),i})();function cF(){return new G_([new aF])}let G_=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||cF()),deps:[[i,new ul,new xo]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new ge(901,!1)}}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:cF}),i})();const j8=jL(null,"core",[]);let q8=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(j(Pd))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();let Lx=null;function xl(){return Lx}const kt=new Se("DocumentToken");let RA=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return function K8(){return j(uF)}()},providedIn:"platform"}),i})();const J8=new Se("Location Initialized");let uF=(()=>{class i extends RA{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xl().getBaseHref(this._doc)}onPopState(t){const n=xl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=xl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,r){dF()?this._history.pushState(t,n,r):this.location.hash=r}replaceState(t,n,r){dF()?this._history.replaceState(t,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:function(){return function Q8(){return new uF(j(kt))}()},providedIn:"platform"}),i})();function dF(){return!!window.history.pushState}function PA(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function hF(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function pc(i){return i&&"?"!==i[0]?"?"+i:i}let Od=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return Hn(pF)},providedIn:"root"}),i})();const fF=new Se("appBaseHref");let pF=(()=>{class i extends Od{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Hn(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return PA(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+pc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+pc(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+pc(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(j(RA),j(fF,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),e6=(()=>{class i extends Od{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=PA(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let o=this.prepareExternalUrl(r+pc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){let o=this.prepareExternalUrl(r+pc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(j(RA),j(fF,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),W_=(()=>{class i{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=hF(mF(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+pc(n))}normalize(t){return i.stripTrailingSlash(function n6(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,mF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pc(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+pc(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=pc,i.joinWithSlash=PA,i.stripTrailingSlash=hF,i.\u0275fac=function(t){return new(t||i)(j(Od))},i.\u0275prov=Pe({token:i,factory:function(){return function t6(){return new W_(j(Od))}()},providedIn:"root"}),i})();function mF(i){return i.replace(/\/index.html$/,"")}var Js=(()=>((Js=Js||{})[Js.Decimal=0]="Decimal",Js[Js.Percent=1]="Percent",Js[Js.Currency=2]="Currency",Js[Js.Scientific=3]="Scientific",Js))(),Mt=(()=>((Mt=Mt||{})[Mt.Decimal=0]="Decimal",Mt[Mt.Group=1]="Group",Mt[Mt.List=2]="List",Mt[Mt.PercentSign=3]="PercentSign",Mt[Mt.PlusSign=4]="PlusSign",Mt[Mt.MinusSign=5]="MinusSign",Mt[Mt.Exponential=6]="Exponential",Mt[Mt.SuperscriptingExponent=7]="SuperscriptingExponent",Mt[Mt.PerMille=8]="PerMille",Mt[Mt.Infinity=9]="Infinity",Mt[Mt.NaN=10]="NaN",Mt[Mt.TimeSeparator=11]="TimeSeparator",Mt[Mt.CurrencyDecimal=12]="CurrencyDecimal",Mt[Mt.CurrencyGroup=13]="CurrencyGroup",Mt))();function la(i,e){const t=Ds(i),n=t[We.NumberSymbols][e];if(typeof n>"u"){if(e===Mt.CurrencyDecimal)return t[We.NumberSymbols][Mt.Decimal];if(e===Mt.CurrencyGroup)return t[We.NumberSymbols][Mt.Group]}return n}const A6=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function VA(i){const e=parseInt(i);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+i);return e}let q_=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(R_(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${qn(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(R(Ox),R(G_),R(Wt),R(ia))},i.\u0275dir=Oe({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class z6{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ha=(()=>{class i{constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new z6(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),EF(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{EF(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(R(Xr),R(Zs),R(Ox))},i.\u0275dir=Oe({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function EF(i,e){i.context.$implicit=e.item}let br=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new G6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){DF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){DF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(R(Xr),R(Zs))},i.\u0275dir=Oe({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class G6{constructor(){this.$implicit=null,this.ngIf=null}}function DF(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${qn(e)}'.`)}class HA{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let fp=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),$x=(()=>{class i{constructor(t,n,r){this.ngSwitch=r,r._addCase(),this._view=new HA(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(R(Xr),R(Zs),R(fp,9))},i.\u0275dir=Oe({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),AF=(()=>{class i{constructor(t,n,r){r._addDefault(new HA(t,n))}}return i.\u0275fac=function(t){return new(t||i)(R(Xr),R(Zs),R(fp,9))},i.\u0275dir=Oe({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),GA=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:ls.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(G_),R(ia))},i.\u0275dir=Oe({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),IF=(()=>{class i{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(t){return new(t||i)(R(Xr))},i.\u0275dir=Oe({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[ii]}),i})();function Ga(i,e){return new ge(2100,!1)}class $6{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}}class j6{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}}const q6=new j6,X6=new $6;let pp=(()=>{class i{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if(k_(t))return q6;if(kk(t))return X6;throw Ga()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(R(ri,16))},i.\u0275pipe=ts({name:"async",type:i,pure:!1,standalone:!0}),i})(),RF=(()=>{class i{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=PF}transform(t,n=PF){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function s$(i,e){return{key:i,value:e}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(t){return new(t||i)(R(G_,16))},i.\u0275pipe=ts({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function PF(i,e){const t=i.key,n=e.key;if(t===n)return 0;if(void 0===t)return 1;if(void 0===n)return-1;if(null===t)return 1;if(null===n)return-1;if("string"==typeof t&&"string"==typeof n)return t<n?-1:1;if("number"==typeof t&&"number"==typeof n)return t-n;if("boolean"==typeof t&&"boolean"==typeof n)return t<n?-1:1;const r=String(t),s=String(n);return r==s?0:r<s?-1:1}let kF=(()=>{class i{constructor(t){this._locale=t}transform(t,n,r){if(!function WA(i){return!(null==i||""===i||i!=i)}(t))return null;r=r||this._locale;try{return function O6(i,e,t){return function BA(i,e,t,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function F6(i){let n,r,s,o,a,e=Math.abs(i)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))n=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(e.charAt(s))}return r>22&&(n=n.splice(0,21),t=r-1,r=1),{digits:n,exponent:t,integerLen:r}}(i);o&&(c=function L6(i){if(0===i.digits[0])return i;const e=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===e?i.digits.push(0,0):1===e&&i.digits.push(0),i.integerLen+=2),i}(c));let d=e.minInt,f=e.minFrac,p=e.maxFrac;if(s){const M=s.match(A6);if(null===M)throw new Error(`${s} is not a valid digit info`);const w=M[1],C=M[3],D=M[5];null!=w&&(d=VA(w)),null!=C&&(f=VA(C)),null!=D?p=VA(D):null!=C&&f>p&&(p=f)}!function N6(i,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let f=o;f<n.length;f++)n[f]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let f=1;f<o;f++)n[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=e+i.integerLen,d=n.reduceRight(function(f,p,m,_){return _[m]=(p+=f)<10?p:p-10,l&&(0===_[m]&&m>=c?_.pop():l=!1),p>=10?1:0},0);d&&(n.unshift(d),i.integerLen++)}(c,f,p);let m=c.digits,_=c.integerLen;const b=c.exponent;let y=[];for(l=m.every(M=>!M);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?y=m.splice(_,m.length):(y=m,m=[0]);const v=[];for(m.length>=e.lgSize&&v.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)v.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&v.unshift(m.join("")),a=v.join(la(t,n)),y.length&&(a+=la(t,r)+y.join("")),b&&(a+=la(t,Mt.Exponential)+"+"+b)}else a=la(t,Mt.Infinity);return a=i<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(i,function UA(i,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(";"),r=n[0],s=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let d=0;d<l.length;d++){const f=l.charAt(d);"0"===f?t.minFrac=t.maxFrac=d+1:"#"===f?t.maxFrac=d+1:t.posSuf+=f}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const d=r.length-t.posPre.length-t.posSuf.length,f=s.indexOf("#");t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function kA(i,e){return Ds(i)[We.NumberFormats][e]}(e,Js.Decimal),la(e,Mt.MinusSign)),e,Mt.Group,Mt.Decimal,t)}(function $A(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(t),r,n)}catch(s){throw Ga()}}}return i.\u0275fac=function(t){return new(t||i)(R(bl,16))},i.\u0275pipe=ts({name:"number",type:i,pure:!0,standalone:!0}),i})();let Wa=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const OF="browser";let f$=(()=>{class i{}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:()=>new p$(j(kt),window)}),i})();class p${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function m$(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=LF(this.window.history)||LF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function LF(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class jA extends class _$ extends class Z8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Y8(i){Lx||(Lx=i)}(new jA)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function v$(){return X_=X_||document.querySelector("base"),X_?X_.getAttribute("href"):null}();return null==t?null:function y$(i){jx=jx||document.createElement("a"),jx.setAttribute("href",i);const e=jx.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){X_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function U6(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let jx,X_=null;const FF=new Se("TRANSITION_ID"),x$=[{provide:Ax,useFactory:function b$(i,e,t){return()=>{t.get(Tx).donePromise.then(()=>{const n=xl(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[FF,kt,fi],multi:!0}];let M$=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const qx=new Se("EventManagerPlugins");let Xx=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(j(qx),j(St))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class NF{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=xl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let BF=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),Y_=(()=>{class i extends BF{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(UF),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(t,r,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(UF))}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();function UF(i){xl().remove(i)}const qA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},XA=/%COMP%/g;function Yx(i,e,t){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?Yx(i,r,t):(r=r.replace(XA,i),t.push(r))}return t}function HF(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Zx=(()=>{class i{constructor(t,n,r){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new YA(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case Hs.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new T$(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(t),r}case 1:case Hs.ShadowDom:return new I$(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const r=Yx(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(j(Xx),j(Y_),j(hp))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class YA{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qA[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(WF(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(WF(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=qA[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=qA[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(ls.DashCase|ls.Important)?e.style.setProperty(t,n,r&ls.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&ls.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,HF(n)):this.eventManager.addEventListener(e,t,HF(n))}}function WF(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class T$ extends YA{constructor(e,t,n,r){super(e),this.component=n;const s=Yx(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=function E$(i){return"_ngcontent-%COMP%".replace(XA,i)}(r+"-"+n.id),this.hostAttr=function D$(i){return"_nghost-%COMP%".replace(XA,i)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class I$ extends YA{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Yx(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let R$=(()=>{class i extends NF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const $F=["alt","control","meta","shift"],k$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},jF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},O$={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let L$=(()=>{class i extends NF{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if($F.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=s,0!=n.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let n="",r=function F$(i){let e=i.key;if(null==e){if(e=i.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===i.location&&jF.hasOwnProperty(e)&&(e=jF[e]))}return k$[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),$F.forEach(s=>{s!=r&&(0,O$[s])(t)&&(n+=s+".")}),n+=r,n}static eventCallback(t,n,r){return s=>{i.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const V$=jL(j8,"browser",[{provide:_A,useValue:OF},{provide:FL,useValue:function N$(){jA.makeCurrent()},multi:!0},{provide:kt,useFactory:function U$(){return function B0(i){Og=i}(document),document},deps:[]}]),XF=new Se(""),YF=[{provide:Ix,useClass:class w${addToWindow(e){Vn.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Vn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Vn.getAllAngularRootElements=()=>e.getAllRootElements(),Vn.frameworkStabilizers||(Vn.frameworkStabilizers=[]),Vn.frameworkStabilizers.push(n=>{const r=Vn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?xl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:HL,useClass:wA,deps:[St,MA,Ix]},{provide:wA,useClass:wA,deps:[St,MA,Ix]}],ZF=[{provide:xd,useValue:"root"},{provide:Oa,useFactory:function B$(){return new Oa},deps:[]},{provide:qx,useClass:R$,multi:!0,deps:[kt,St,_A]},{provide:qx,useClass:L$,multi:!0,deps:[kt]},{provide:Zx,useClass:Zx,deps:[Xx,Y_,hp]},{provide:uu,useExisting:Zx},{provide:BF,useExisting:Y_},{provide:Y_,useClass:Y_,deps:[kt]},{provide:Xx,useClass:Xx,deps:[qx,St]},{provide:class g${},useClass:M$,deps:[]},[]];let KF=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:hp,useValue:t.appId},{provide:FF,useExisting:hp},x$]}}}return i.\u0275fac=function(t){return new(t||i)(j(XF,12))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[...ZF,...YF],imports:[Wa,q8]}),i})(),JF=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:function(t){let n=null;return n=t?new t:function H$(){return new JF(j(kt))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let JA=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(t){let n=null;return n=t?new(t||i):j(tN),n},providedIn:"root"}),i})(),tN=(()=>{class i extends JA{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case Tn.NONE:return n;case Tn.HTML:return ea(n,"HTML")?os(n):Q0(this._doc,String(n)).toString();case Tn.STYLE:return ea(n,"Style")?os(n):n;case Tn.SCRIPT:if(ea(n,"Script"))return os(n);throw new Error("unsafe value used in a script context");case Tn.URL:return ea(n,"URL")?os(n):vd(String(n));case Tn.RESOURCE_URL:if(ea(n,"ResourceURL"))return os(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function H0(i){return new KS(i)}(t)}bypassSecurityTrustStyle(t){return function gd(i){return new JS(i)}(t)}bypassSecurityTrustScript(t){return function Vg(i){return new QS(i)}(t)}bypassSecurityTrustUrl(t){return function G0(i){return new eE(i)}(t)}bypassSecurityTrustResourceUrl(t){return function W0(i){return new z0(i)}(t)}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:function(t){let n=null;return n=t?new t:function Y$(i){return new tN(i.get(kt))}(j(fi)),n},providedIn:"root"}),i})();function tt(...i){return Mi(i,ju(i))}class Nn extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const Z_=B(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:Z$}=Array,{getPrototypeOf:K$,prototype:J$,keys:Q$}=Object;function nN(i){if(1===i.length){const e=i[0];if(Z$(e))return{args:e,keys:null};if(function ej(i){return i&&"object"==typeof i&&K$(i)===J$}(e)){const t=Q$(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:tj}=Array;function QA(i){return Je(e=>function nj(i,e){return tj(e)?i(...e):i(e)}(i,e))}function iN(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function mp(...i){const e=ju(i),t=Vy(i),{args:n,keys:r}=nN(i);if(0===n.length)return Mi([],e);const s=new vn(function ij(i,e,t=Ca){return n=>{rN(e,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)rN(e,()=>{const c=Mi(i[l],e);let d=!1;c.subscribe(Dn(n,f=>{s[l]=f,d||(d=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,r?o=>iN(r,o):Ca));return t?s.pipe(QA(t)):s}function rN(i,e,t){i?Ea(t,i,e):e()}function K_(...i){return function rj(){return Vc(1)}()(Mi(i,ju(i)))}function J_(i){return new vn(e=>{pr(i()).subscribe(e)})}function gp(i,e){const t=Ht(i)?i:()=>i,n=r=>r.error(t());return new vn(e?r=>e.schedule(n,0,r):n)}function e1(){return Pn((i,e)=>{let t=null;i._refCount++;const n=Dn(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class sN extends vn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Cy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zt;const t=this.getSubject();e.add(this.source.subscribe(Dn(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zt.EMPTY)}return e}refCount(){return e1()(this)}}function Ts(i,e){return Pn((t,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();t.subscribe(Dn(n,l=>{r?.unsubscribe();let c=0;const d=s++;pr(i(l,d)).subscribe(r=Dn(n,f=>n.next(e?e(l,f,d,c++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function xi(i){return i<=0?()=>Bs:Pn((e,t)=>{let n=0;e.subscribe(Dn(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function hs(...i){const e=ju(i);return Pn((t,n)=>{(e?K_(i,t,e):K_(i,t)).subscribe(n)})}function Rn(i,e){return Pn((t,n)=>{let r=0;t.subscribe(Dn(n,s=>i.call(e,s,r++)&&n.next(s)))})}function Kx(i){return Pn((e,t)=>{let n=!1;e.subscribe(Dn(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function oN(i=sj){return Pn((e,t)=>{let n=!1;e.subscribe(Dn(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function sj(){return new Z_}function vu(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Rn((r,s)=>i(r,s,n)):Ca,xi(1),t?Kx(e):oN(()=>new Z_))}function yu(i,e){return Ht(e)?Wi(i,e,1):Wi(i,1)}function zi(i,e,t){const n=Ht(i)||e||t?{next:i,error:e,complete:t}:i;return n?Pn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(Dn(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Ca}function gc(i){return Pn((e,t)=>{let s,n=null,r=!1;n=e.subscribe(Dn(t,void 0,void 0,o=>{s=pr(i(o,gc(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function oj(i,e,t,n,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Dn(o,d=>{const f=c++;l=a?i(l,d,f):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function aN(i,e){return Pn(oj(i,e,arguments.length>=2,!0))}function t1(i){return i<=0?()=>Bs:Pn((e,t)=>{let n=[];e.subscribe(Dn(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function lN(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Rn((r,s)=>i(r,s,n)):Ca,t1(1),t?Kx(e):oN(()=>new Z_))}function cN(i,e=!1){return Pn((t,n)=>{let r=0;t.subscribe(Dn(n,s=>{const o=i(s,r++);(o||e)&&n.next(s),!o&&n.complete()}))})}function uN(i){return Je(()=>i)}function Ld(i){return Pn((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const an="primary";class aj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _p(i){return new aj(i)}function lj(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function wl(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!dN(i[r],e[r]))return!1;return!0}function dN(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function hN(i){return Array.prototype.concat.apply([],i)}function fN(i){return i.length>0?i[i.length-1]:null}function Yr(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function _c(i){return jD(i)?i:k_(i)?Mi(Promise.resolve(i)):tt(i)}const dj={exact:function gN(i,e,t){if(!Nd(i.segments,e.segments)||!Jx(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!gN(i.children[n],e.children[n],t))return!1;return!0},subset:_N},pN={exact:function hj(i,e){return wl(i,e)},subset:function fj(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>dN(i[t],e[t]))},ignored:()=>!0};function mN(i,e,t){return dj[t.paths](i.root,e.root,t.matrixParams)&&pN[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function _N(i,e,t){return vN(i,e,e.segments,t)}function vN(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!Nd(r,t)||e.hasChildren()||!Jx(r,t,n))}if(i.segments.length===t.length){if(!Nd(i.segments,t)||!Jx(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!_N(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(Nd(i.segments,r)&&Jx(i.segments,r,n)&&i.children[an])&&vN(i.children[an],e,s,n)}}function Jx(i,e,t){return e.every((n,r)=>pN[t](i[r].parameters,n.parameters))}class Fd{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_p(this.queryParams)),this._queryParamMap}toString(){return gj.serialize(this)}}class dn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yr(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qx(this)}}class Q_{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_p(this.parameters)),this._parameterMap}toString(){return wN(this)}}function Nd(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let yN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return new r1},providedIn:"root"}),i})();class r1{parse(e){const t=new Sj(e);return new Fd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ev(e.root,!0)}`,n=function yj(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${ew(t)}=${ew(r)}`).join("&"):`${ew(t)}=${ew(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function _j(i){return encodeURI(i)}(e.fragment)}`:""}`}}const gj=new r1;function Qx(i){return i.segments.map(e=>wN(e)).join("/")}function ev(i,e){if(!i.hasChildren())return Qx(i);if(e){const t=i.children[an]?ev(i.children[an],!1):"",n=[];return Yr(i.children,(r,s)=>{s!==an&&n.push(`${s}:${ev(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function mj(i,e){let t=[];return Yr(i.children,(n,r)=>{r===an&&(t=t.concat(e(n,r)))}),Yr(i.children,(n,r)=>{r!==an&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===an?[ev(i.children[an],!1)]:[`${r}:${ev(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[an]?`${Qx(i)}/${t[0]}`:`${Qx(i)}/(${t.join("//")})`}}function bN(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ew(i){return bN(i).replace(/%3B/gi,";")}function s1(i){return bN(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function tw(i){return decodeURIComponent(i)}function xN(i){return tw(i.replace(/\+/g,"%20"))}function wN(i){return`${s1(i.path)}${function vj(i){return Object.keys(i).map(e=>`;${s1(e)}=${s1(i[e])}`).join("")}(i.parameters)}`}const bj=/^[^\/()?;=#]+/;function nw(i){const e=i.match(bj);return e?e[0]:""}const xj=/^[^=?&#]+/,Mj=/^[^&#]+/;class Sj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[an]=new dn(e,t)),n}parseSegment(){const e=nw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new ge(4009,!1);return this.capture(e),new Q_(tw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=nw(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=nw(this.remaining);r&&(n=r,this.capture(n))}e[tw(t)]=tw(n)}parseQueryParam(e){const t=function wj(i){const e=i.match(xj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function Cj(i){const e=i.match(Mj);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=xN(t),s=xN(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=nw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new ge(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=an);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[an]:new dn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new ge(4011,!1)}}function o1(i){return i.segments.length>0?new dn([],{[an]:i}):i}function iw(i){const e={};for(const n of Object.keys(i.children)){const s=iw(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function Ej(i){if(1===i.numberOfChildren&&i.children[an]){const e=i.children[an];return new dn(i.segments.concat(e.segments),e.children)}return i}(new dn(i.segments,e))}function Bd(i){return i instanceof Fd}function Tj(i,e,t,n,r){if(0===t.length)return vp(e.root,e.root,e.root,n,r);const s=function SN(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new CN(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Yr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new CN(t,e,n)}(t);return s.toRoot()?vp(e.root,e.root,new dn([],{}),n,r):function o(l){const c=function Rj(i,e,t,n){if(i.isAbsolute)return new yp(e.root,!0,0);if(-1===n)return new yp(t,t===e.root,0);return function EN(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new ge(4005,!1);r=n.segments.length}return new yp(n,!1,r-s)}(t,n+(tv(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,l),d=c.processChildren?iv(c.segmentGroup,c.index,s.commands):l1(c.segmentGroup,c.index,s.commands);return vp(e.root,c.segmentGroup,d,n,r)}(i.snapshot?._lastPathIndex)}function tv(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function nv(i){return"object"==typeof i&&null!=i&&i.outlets}function vp(i,e,t,n,r){let o,s={};n&&Yr(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=i===e?t:MN(i,e,t);const a=o1(iw(o));return new Fd(a,s,r)}function MN(i,e,t){const n={};return Yr(i.children,(r,s)=>{n[s]=r===e?t:MN(r,e,t)}),new dn(i.segments,n)}class CN{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&tv(n[0]))throw new ge(4003,!1);const r=n.find(nv);if(r&&r!==fN(n))throw new ge(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yp{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function l1(i,e,t){if(i||(i=new dn([],{})),0===i.segments.length&&i.hasChildren())return iv(i,e,t);const n=function kj(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const o=i.segments[r],a=t[n];if(nv(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!AN(l,c,o))return s;n+=2}else{if(!AN(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new dn(i.segments.slice(0,n.pathIndex),{});return s.children[an]=new dn(i.segments.slice(n.pathIndex),i.children),iv(s,0,r)}return n.match&&0===r.length?new dn(i.segments,{}):n.match&&!i.hasChildren()?c1(i,e,t):n.match?iv(i,0,r):c1(i,e,t)}function iv(i,e,t){if(0===t.length)return new dn(i.segments,{});{const n=function Pj(i){return nv(i[0])?i[0].outlets:{[an]:i}}(t),r={};return Yr(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=l1(i.children[o],e,s))}),Yr(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new dn(i.segments,r)}}function c1(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(nv(s)){const l=Oj(s.outlets);return new dn(n,l)}if(0===r&&tv(t[0])){n.push(new Q_(i.segments[e].path,DN(t[0]))),r++;continue}const o=nv(s)?s.outlets[an]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&tv(a)?(n.push(new Q_(o,DN(a))),r+=2):(n.push(new Q_(o,{})),r++)}return new dn(n,{})}function Oj(i){const e={};return Yr(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=c1(new dn([],{}),0,t))}),e}function DN(i){const e={};return Yr(i,(t,n)=>e[n]=`${t}`),e}function AN(i,e,t){return i==t.path&&wl(e,t.parameters)}class vc{constructor(e,t){this.id=e,this.url=t}}class u1 extends vc{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ud extends vc{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rw extends vc{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class TN extends vc{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lj extends vc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fj extends vc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nj extends vc{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Bj extends vc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uj extends vc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vj{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zj{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hj{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gj{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wj{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $j{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class IN{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class RN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=d1(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=d1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=h1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return h1(e,this._root).map(t=>t.value)}}function d1(i,e){if(i===e.value)return e;for(const t of e.children){const n=d1(i,t);if(n)return n}return null}function h1(i,e){if(i===e.value)return[e];for(const t of e.children){const n=h1(i,t);if(n.length)return n.unshift(e),n}return[]}class yc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function bp(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class PN extends RN{constructor(e,t){super(e),this.snapshot=t,f1(this,e)}toString(){return this.snapshot.toString()}}function kN(i,e){const t=function qj(i,e){const o=new sw([],{},{},"",{},an,e,null,i.root,-1,{});return new LN("",new yc(o,[]))}(i,e),n=new Nn([new Q_("",{})]),r=new Nn({}),s=new Nn({}),o=new Nn({}),a=new Nn(""),l=new xp(n,r,o,a,s,an,e,t.root);return l.snapshot=t.root,new PN(new yc(l,[]),t)}class xp{constructor(e,t,n,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Je(e=>_p(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Je(e=>_p(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ON(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function Xj(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class sw{constructor(e,t,n,r,s,o,a,l,c,d,f,p){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._correctedLastPathIndex=p??d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_p(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_p(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class LN extends RN{constructor(e,t){super(t),this.url=e,f1(this,t)}toString(){return FN(this._root)}}function f1(i,e){e.value._routerState=i,e.children.forEach(t=>f1(i,t))}function FN(i){const e=i.children.length>0?` { ${i.children.map(FN).join(", ")} } `:"";return`${i.value}${e}`}function p1(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,wl(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),wl(e.params,t.params)||i.params.next(t.params),function cj(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!wl(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),wl(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function m1(i,e){const t=wl(i.params,e.params)&&function pj(i,e){return Nd(i,e)&&i.every((t,n)=>wl(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||m1(i.parent,e.parent))}function rv(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function Zj(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return rv(i,n,r);return rv(i,n)})}(i,e,t);return new yc(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>rv(i,a)),o}}const n=function Kj(i){return new xp(new Nn(i.url),new Nn(i.params),new Nn(i.queryParams),new Nn(i.fragment),new Nn(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>rv(i,s));return new yc(n,r)}}const g1="ngNavigationCancelingError";function NN(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=Bd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=BN(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function BN(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[g1]=!0,n.cancellationCode=e,t&&(n.url=t),n}function UN(i){return VN(i)&&Bd(i.url)}function VN(i){return i&&i[g1]}class Jj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new sv,this.attachRef=null}}let sv=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Jj,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ow=!1;let zN=(()=>{class i{constructor(t,n,r,s,o){this.parentContexts=t,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.name=r||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ge(4012,ow);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ge(4012,ow);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ge(4012,ow);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new ge(4013,ow);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Qj(t,a,r.injector);if(n&&function e9(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(R(sv),R(Xr),Pa("name"),R(ri),R(hl))},i.\u0275dir=Oe({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class Qj{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===xp?this.route:e===sv?this.childContexts:this.parent.get(e,t)}}let HN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){1&t&&Et(0,"router-outlet")},dependencies:[zN],encapsulation:2}),i})();function GN(i,e){return i.providers&&!i._injector&&(i._injector=Mx(i.providers,e,`Route: ${i.path}`)),i._injector??e}function v1(i){const e=i.children&&i.children.map(v1),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=HN),t}function ua(i){return i.outlet||an}function WN(i,e){const t=i.filter(n=>ua(n)===e);return t.push(...i.filter(n=>ua(n)!==e)),t}function $N(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class s9{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),p1(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=bp(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Yr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=bp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=bp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=bp(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new $j(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Gj(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(p1(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),p1(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=$N(r.snapshot),l=a?.get(sc)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class jN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class aw{constructor(e,t){this.component=e,this.route=t}}function o9(i,e,t){const n=i._root;return ov(n,e?e._root:null,t,[n.value])}function lw(i,e,t){return($N(e)??t).get(i)}function ov(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=bp(e);return i.children.forEach(o=>{(function l9(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function c9(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Nd(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Nd(i.url,e.url)||!wl(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!m1(i,e)||!wl(i.queryParams,e.queryParams);default:return!m1(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new jN(n)):(s.data=o.data,s._resolvedData=o._resolvedData),ov(i,e,s.component?a?a.children:null:t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new aw(a.outlet.component,o))}else o&&av(e,a,r),r.canActivateChecks.push(new jN(n)),ov(i,null,s.component?a?a.children:null:t,n,r)})(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Yr(s,(o,a)=>av(o,t.getContext(a),r)),r}function av(i,e,t){const n=bp(i),r=i.value;Yr(n,(s,o)=>{av(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new aw(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function lv(i){return"function"==typeof i}function y1(i){return i instanceof Z_||"EmptyError"===i?.name}const cw=Symbol("INITIAL_VALUE");function wp(){return Ts(i=>mp(i.map(e=>e.pipe(xi(1),hs(cw)))).pipe(Je(e=>{for(const t of e)if(!0!==t){if(t===cw)return cw;if(!1===t||t instanceof Fd)return t}return!0}),Rn(e=>e!==cw),xi(1)))}function qN(i){return function qC(...i){return wy(i)}(zi(e=>{if(Bd(e))throw NN(0,e)}),Je(e=>!0===e))}const b1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XN(i,e,t,n,r){const s=x1(i,e,t);return s.matched?function E9(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?tt(r.map(o=>{const a=i.get(o),l=function m9(i){return i&&lv(i.canMatch)}(a)?a.canMatch(e,t):a(e,t);return _c(l)})).pipe(wp(),qN()):tt(!0)}(n=GN(e,n),e,t).pipe(Je(o=>!0===o?s:{...b1})):tt(s)}function x1(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...b1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||lj)(t,i,e);if(!r)return{...b1};const s={};Yr(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function uw(i,e,t,n,r="corrected"){if(t.length>0&&function T9(i,e,t){return t.some(n=>dw(i,e,n)&&ua(n)!==an)}(i,t,n)){const o=new dn(e,function A9(i,e,t,n){const r={};r[an]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ua(s)!==an){const o=new dn([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,r[ua(s)]=o}return r}(i,e,n,new dn(t,i.children)));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function I9(i,e,t){return t.some(n=>dw(i,e,n))}(i,t,n)){const o=new dn(i.segments,function D9(i,e,t,n,r,s){const o={};for(const a of n)if(dw(i,t,a)&&!r[ua(a)]){const l=new dn([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===s?i.segments.length:e.length,o[ua(a)]=l}return{...r,...o}}(i,e,t,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new dn(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function dw(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function YN(i,e,t,n){return!!(ua(i)===n||n!==an&&dw(e,t,i))&&("**"===i.path||x1(e,i,t).matched)}function ZN(i,e,t){return 0===e.length&&!i.children[t]}const hw=!1;class fw{constructor(e){this.segmentGroup=e||null}}class KN{constructor(e){this.urlTree=e}}function cv(i){return gp(new fw(i))}function JN(i){return gp(new KN(i))}class O9{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=uw(this.urlTree.root,[],[],this.config).segmentGroup,t=new dn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,an).pipe(Je(s=>this.createUrlTree(iw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(gc(s=>{if(s instanceof KN)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof fw?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,an).pipe(Je(r=>this.createUrlTree(iw(r),e.queryParams,e.fragment))).pipe(gc(r=>{throw r instanceof fw?this.noMatchError(r):r}))}noMatchError(e){return new ge(4002,hw)}createUrlTree(e,t,n){const r=o1(e);return new Fd(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Je(s=>new dn([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Mi(r).pipe(yu(s=>{const o=n.children[s],a=WN(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Je(l=>({segment:l,outlet:s})))}),aN((s,o)=>(s[o.outlet]=o.segment,s),{}),lN())}expandSegment(e,t,n,r,s,o){return Mi(n).pipe(yu(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,s,o).pipe(gc(c=>{if(c instanceof fw)return tt(null);throw c}))),vu(a=>!!a),gc((a,l)=>{if(y1(a))return ZN(t,r,s)?tt(new dn([],{})):cv(t);throw a}))}expandSegmentAgainstRoute(e,t,n,r,s,o,a){return YN(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):cv(t):cv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?JN(s):this.lineralizeSegments(n,s).pipe(Wi(o=>{const a=new dn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=x1(t,r,s);if(!a)return cv(t);const f=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?JN(f):this.lineralizeSegments(r,f).pipe(Wi(p=>this.expandSegment(e,t,n,p.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=GN(n,e),n.loadChildren?(n._loadedRoutes?tt({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(Je(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new dn(r,{})))):tt(new dn(r,{}))):XN(t,n,r,e).pipe(Ts(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,r).pipe(Wi(d=>{const f=d.injector??e,p=d.routes,{segmentGroup:m,slicedSegments:_}=uw(t,a,l,p),b=new dn(m.segments,m.children);if(0===_.length&&b.hasChildren())return this.expandChildren(f,p,b).pipe(Je(w=>new dn(a,w)));if(0===p.length&&0===_.length)return tt(new dn(a,{}));const y=ua(n)===s;return this.expandSegment(f,b,p,_,y?an:s,!0).pipe(Je(M=>new dn(a.concat(M.segments),M.children)))})):cv(t)))}getChildConfig(e,t,n){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function S9(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?tt(!0):tt(r.map(o=>{const a=i.get(o),l=function d9(i){return i&&lv(i.canLoad)}(a)?a.canLoad(e,t):a(e,t);return _c(l)})).pipe(wp(),qN())}(e,t,n).pipe(Wi(r=>r?this.configLoader.loadChildren(e,t).pipe(zi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function P9(i){return gp(BN(hw,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return tt(n);if(r.numberOfChildren>1||!r.children[an])return gp(new ge(4e3,hw));r=r.children[an]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Fd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Yr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=t[a]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return Yr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,r)}),new dn(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new ge(4001,hw);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class F9{}class U9{constructor(e,t,n,r,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=uw(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,an).pipe(Je(t=>{if(null===t)return null;const n=new sw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new yc(n,t),s=new LN(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=ON(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return Mi(Object.keys(n.children)).pipe(yu(r=>{const s=n.children[r],o=WN(t,r);return this.processSegmentGroup(e,o,s,r)}),aN((r,s)=>r&&s?(r.push(...s),r):null),cN(r=>null!==r),Kx(null),lN(),Je(r=>{if(null===r)return null;const s=QN(r);return function V9(i){i.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return Mi(t).pipe(yu(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,r,s)),vu(o=>!!o),gc(o=>{if(y1(o))return ZN(n,r,s)?tt([]):tt(null);throw o}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!YN(t,n,r,s))return tt(null);let o;if("**"===t.path){const a=r.length>0?fN(r).parameters:{},l=t2(n)+r.length;o=tt({snapshot:new sw(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,r2(t),ua(t),t.component??t._loadedComponent??null,t,e2(n),l,s2(t),l),consumedSegments:[],remainingSegments:[]})}else o=XN(n,t,r,e).pipe(Je(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const f=t2(n)+l.length;return{snapshot:new sw(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,r2(t),ua(t),t.component??t._loadedComponent??null,t,e2(n),f,s2(t),f),consumedSegments:l,remainingSegments:c}}));return o.pipe(Ts(a=>{if(null===a)return tt(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;e=t._injector??e;const f=t._loadedInjector??e,p=function z9(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:m,slicedSegments:_}=uw(n,c,d,p.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===_.length&&m.hasChildren())return this.processChildren(f,p,m).pipe(Je(y=>null===y?null:[new yc(l,y)]));if(0===p.length&&0===_.length)return tt([new yc(l,[])]);const b=ua(t)===s;return this.processSegment(f,p,m,_,b?an:s).pipe(Je(y=>null===y?null:[new yc(l,y)]))}))}}function H9(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function QN(i){const e=[],t=new Set;for(const n of i){if(!H9(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=QN(n.children);e.push(new yc(n.value,r))}return e.filter(n=>!t.has(n))}function e2(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function t2(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function r2(i){return i.data||{}}function s2(i){return i.resolve||{}}const w1=Symbol("RouteTitle");function o2(i){return"string"==typeof i.title||null===i.title}function M1(i){return Ts(e=>{const t=i(e);return t?Mi(t).pipe(Je(()=>e)):tt(e)})}let a2=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===an);return n}getResolvedTitleForRoute(t){return t.data[w1]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return Hn(l2)},providedIn:"root"}),i})(),l2=(()=>{class i extends a2{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(j(JF))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Z9{}class J9 extends class K9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const C1=new Se("",{providedIn:"root",factory:()=>({})}),S1=new Se("ROUTES");let E1=(()=>{class i{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=_c(t.loadComponent()).pipe(zi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Ld(()=>{this.componentLoaders.delete(t)})),r=new sN(n,()=>new He).pipe(e1());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return tt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Je(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=hN(l.get(S1,[],mt.Self|mt.Optional)));return{routes:c.map(v1),injector:l}}),Ld(()=>{this.childrenLoaders.delete(n)})),o=new sN(s,()=>new He).pipe(e1());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return _c(t()).pipe(Wi(n=>n instanceof ZO||Array.isArray(n)?tt(n):Mi(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)(j(fi),j(vA))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class e7{}class t7{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function n7(i){throw i}function i7(i,e,t){return e.parse("/")}const r7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},s7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function u2(){const i=Hn(yN),e=Hn(sv),t=Hn(W_),n=Hn(fi),r=Hn(vA),s=Hn(S1,{optional:!0})??[],o=Hn(C1,{optional:!0})??{},a=Hn(l2),l=Hn(a2,{optional:!0}),c=Hn(e7,{optional:!0}),d=Hn(Z9,{optional:!0}),f=new Is(null,i,e,t,n,r,hN(s));return c&&(f.urlHandlingStrategy=c),d&&(f.routeReuseStrategy=d),f.titleStrategy=l??a,function o7(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(o,f),f}let Is=(()=>{class i{constructor(t,n,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new He,this.errorHandler=n7,this.malformedUriErrorHandler=i7,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new t7,this.routeReuseStrategy=new J9,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(E1),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new zj(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new Vj(p)),this.ngModule=o.get(Rd),this.console=o.get(d8);const f=o.get(St);this.isNgZoneEnabled=f instanceof St&&St.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function uj(){return new Fd(new dn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=kN(this.currentUrlTree,this.rootComponentType),this.transitions=new Nn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(Rn(r=>0!==r.id),Je(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ts(r=>{let s=!1,o=!1;return tt(r).pipe(zi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ts(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return d2(a.source)&&(this.browserUrlTree=a.extractedUrl),tt(a).pipe(Ts(f=>{const p=this.transitions.getValue();return n.next(new u1(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions.getValue()?Bs:Promise.resolve(f)}),function L9(i,e,t,n){return Ts(r=>function k9(i,e,t,n,r){return new O9(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(Je(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),zi(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},r.urlAfterRedirects=f.urlAfterRedirects}),function W9(i,e,t,n,r,s){return Wi(o=>function B9(i,e,t,n,r,s,o="emptyOnly",a="legacy"){return new U9(i,e,t,n,r,o,a,s).recognize().pipe(Ts(l=>null===l?function N9(i){return new vn(e=>e.error(i))}(new F9):tt(l)))}(i,e,t,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(Je(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),zi(f=>{if(r.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const m=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(m,f)}this.browserUrlTree=f.urlAfterRedirects}const p=new Lj(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);n.next(p)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:m,source:_,restoredState:b,extras:y}=a,v=new u1(p,this.serializeUrl(m),_,b);n.next(v);const M=kN(m,this.rootComponentType).snapshot;return tt(r={...a,targetSnapshot:M,urlAfterRedirects:m,extras:{...y,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Bs}),zi(a=>{const l=new Fj(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Je(a=>r={...a,guards:o9(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function _9(i,e){return Wi(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?tt({...t,guardsResult:!0}):function v9(i,e,t,n){return Mi(i).pipe(Wi(r=>function C9(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?tt(s.map(a=>{const l=lw(a,e,r);return _c(function p9(i){return i&&lv(i.canDeactivate)}(l)?l.canDeactivate(i,e,t,n):l(i,e,t,n)).pipe(vu())})).pipe(wp()):tt(!0)}(r.component,r.route,t,e,n)),vu(r=>!0!==r,!0))}(o,n,r,i).pipe(Wi(a=>a&&function u9(i){return"boolean"==typeof i}(a)?function y9(i,e,t,n){return Mi(e).pipe(yu(r=>K_(function x9(i,e){return null!==i&&e&&e(new Hj(i)),tt(!0)}(r.route.parent,n),function b9(i,e){return null!==i&&e&&e(new Wj(i)),tt(!0)}(r.route,n),function M9(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function a9(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>J_(()=>tt(o.guards.map(l=>{const c=lw(l,o.node,t);return _c(function f9(i){return i&&lv(i.canActivateChild)}(c)?c.canActivateChild(n,i):c(n,i)).pipe(vu())})).pipe(wp())));return tt(s).pipe(wp())}(i,r.path,t),function w9(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return tt(!0);const r=n.map(s=>J_(()=>{const o=lw(s,e,t);return _c(function h9(i){return i&&lv(i.canActivate)}(o)?o.canActivate(e,i):o(e,i)).pipe(vu())}));return tt(r).pipe(wp())}(i,r.route,t))),vu(r=>!0!==r,!0))}(n,s,i,e):tt(a)),Je(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),zi(a=>{if(r.guardsResult=a.guardsResult,Bd(a.guardsResult))throw NN(0,a.guardsResult);const l=new Nj(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Rn(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),M1(a=>{if(a.guards.canActivateChecks.length)return tt(a).pipe(zi(l=>{const c=new Bj(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ts(l=>{let c=!1;return tt(l).pipe(function $9(i,e){return Wi(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return tt(t);let s=0;return Mi(r).pipe(yu(o=>function j9(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!o2(r)&&(s[w1]=r.title),function q9(i,e,t,n){const r=function X9(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return tt({});const s={};return Mi(r).pipe(Wi(o=>function Y9(i,e,t,n){const r=lw(i,e,n);return _c(r.resolve?r.resolve(e,t):r(e,t))}(i[o],e,t,n).pipe(vu(),zi(a=>{s[o]=a}))),t1(1),uN(s),gc(o=>y1(o)?Bs:gp(o)))}(s,i,e,n).pipe(Je(o=>(i._resolvedData=o,i.data=ON(i,t).resolve,r&&o2(r)&&(i.data[w1]=r.title),null)))}(o.route,n,i,e)),zi(()=>s++),t1(1),Wi(o=>s===r.length?tt(t):Bs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),zi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),zi(l=>{const c=new Uj(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),M1(a=>{const l=c=>{const d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(zi(f=>{c.component=f}),Je(()=>{})));for(const f of c.children)d.push(...l(f));return d};return mp(l(a.targetSnapshot.root)).pipe(Kx(),xi(1))}),M1(()=>this.afterPreactivation()),Je(a=>{const l=function Yj(i,e,t){const n=rv(i,e._root,t?t._root:void 0);return new PN(n,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),zi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,e,t)=>Je(n=>(new s9(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),zi({next(){s=!0},complete(){s=!0}}),Ld(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),gc(a=>{if(o=!0,VN(a)){UN(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new rw(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(n.next(l),UN(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||d2(r.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new TN(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);n.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Bs}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(v1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=r||this.routerState.root,d=l?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),Tj(c,this.currentUrlTree,t,f,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=Bd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function a7(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new ge(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...r7}:!1===n?{...s7}:n,Bd(t))return mN(this.currentUrlTree,t,r);const s=this.parseUrl(t);return mN(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ud(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((p,m)=>{a=p,l=m});const d=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:d,targetPageId:f,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n,r){const s=new rw(t.id,this.serializeUrl(t.extractedUrl),n,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){cc()},i.\u0275prov=Pe({token:i,factory:function(){return u2()},providedIn:"root"}),i})();function d2(i){return"imperative"!==i}class h2{}let f2=(()=>{class i{constructor(t,n,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Rn(t=>t instanceof Ud),yu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=Mx(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Mi(r).pipe(Vc())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):tt(null);const s=r.pipe(Wi(o=>null===o?tt(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?Mi([s,this.loader.loadComponent(n)]).pipe(Vc()):s})}}return i.\u0275fac=function(t){return new(t||i)(j(Is),j(vA),j(hl),j(h2),j(E1))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const p2=new Se("");let u7=(()=>{class i{constructor(t,n,r={}){this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof u1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ud&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof IN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new IN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){cc()},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const m2=new Se("ROUTER_FORROOT_GUARD"),g2=new Se(""),d7=[W_,{provide:yN,useClass:r1},{provide:Is,useFactory:u2},sv,{provide:xp,useFactory:function h7(i){return i.routerState.root},deps:[Is]},E1];function f7(){return new WL("Router",Is)}let _2=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[d7,[],v2(t),{provide:m2,useFactory:_7,deps:[[Is,new xo,new ul]]},{provide:C1,useValue:n||{}},n?.useHash?{provide:Od,useClass:e6}:{provide:Od,useClass:pF},{provide:p2,useFactory:()=>{const i=Hn(Is),e=Hn(f$),t=Hn(C1);return t.scrollOffset&&e.setOffset(t.scrollOffset),new u7(i,e,t)}},n?.preloadingStrategy?C7(n.preloadingStrategy):[],{provide:WL,multi:!0,useFactory:f7},n?.initialNavigation?y7(n):[],[{provide:y2,useFactory:v7},{provide:NL,multi:!0,useExisting:y2}]]}}static forChild(t){return{ngModule:i,providers:[v2(t)]}}}return i.\u0275fac=function(t){return new(t||i)(j(m2,8))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();function _7(i){return"guarded"}function v2(i){return[{provide:S1,multi:!0,useValue:i}]}function v7(){const i=Hn(fi);return e=>{const t=i.get(Pd);if(e!==t.components[0])return;const n=i.get(Is),r=i.get(b2);1===i.get(T1)&&n.initialNavigation(),i.get(g2,null,mt.Optional)?.setUpPreloading(),i.get(p2,null,mt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const y2=new Se("");function y7(i){return["disabled"===i.initialNavigation?[{provide:Ax,multi:!0,useFactory:()=>{const i=Hn(Is);return()=>{i.setUpLocationChangeListener()}}},{provide:T1,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:T1,useValue:0},{provide:Ax,multi:!0,deps:[fi],useFactory:i=>{const e=i.get(J8,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(r=>{const s=i.get(Is),o=i.get(b2);(function n(r){i.get(Is).events.pipe(Rn(o=>o instanceof Ud||o instanceof rw||o instanceof TN),Je(o=>o instanceof Ud||o instanceof rw&&(0===o.code||1===o.code)&&null),Rn(o=>null!==o),xi(1)).subscribe(()=>{r()})})(()=>{r(!0),t=!0}),s.afterPreactivation=()=>(r(!0),t||o.closed?tt(void 0):o),s.initialNavigation()}))}}]:[]]}const b2=new Se("",{factory:()=>new He}),T1=new Se("",{providedIn:"root",factory:()=>1});function C7(i){return[f2,{provide:g2,useExisting:f2},{provide:h2,useExisting:i}]}const S7=[];let I1,E7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[_2.forRoot(S7),_2]}),i})();function x2(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function Ri(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){x2(s,n,r,o,a,"next",l)}function a(l){x2(s,n,r,o,a,"throw",l)}o(void 0)})}}try{I1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{I1=!1}let Mp,xr=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function h$(i){return i===OF}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!I1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(j(_A))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const w2=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function M2(){if(Mp)return Mp;if("object"!=typeof document||!document)return Mp=new Set(w2),Mp;let i=document.createElement("input");return Mp=new Set(w2.filter(e=>(i.setAttribute("type",e),i.type===e))),Mp}let uv,Vd,R1;function Cp(i){return function D7(){if(null==uv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>uv=!0}))}finally{uv=uv||!1}return uv}()?i:!!i.capture}function A7(){if(null==Vd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Vd=!1,Vd;if("scrollBehavior"in document.documentElement.style)Vd=!0;else{const i=Element.prototype.scrollTo;Vd=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Vd}function C2(i){if(function T7(){if(null==R1){const i=typeof document<"u"?document.head:null;R1=!(!i||!i.createShadowRoot&&!i.attachShadow)}return R1}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function P1(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function zd(i){return i.composedPath?i.composedPath()[0]:i.target}function k1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function da(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class z7 extends Zt{constructor(e,t){super()}schedule(e,t=0){return this}}const yw={setInterval(i,e,...t){const{delegate:n}=yw;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=yw;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};class L1 extends z7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,n=0){return yw.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&yw.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Lr(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const S2={now:()=>(S2.delegate||Date).now(),delegate:void 0};class pv{constructor(e,t=pv.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}pv.now=S2.now;class F1 extends pv{constructor(e,t=pv.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const bw=new F1(L1),H7=bw;function xw(i,e=bw){return Pn((t,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=e.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}t.subscribe(Dn(n,c=>{s=c,o=e.now(),r||(r=e.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function E2(i){return Rn((e,t)=>i<=t)}function ww(i,e=Ca){return i=i??G7,Pn((t,n)=>{let r,s=!0;t.subscribe(Dn(n,o=>{const a=e(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function G7(i,e){return i===e}function at(i){return Pn((e,t)=>{pr(i).subscribe(Dn(t,()=>t.complete(),Jr)),!t.closed&&e.subscribe(t)})}function Gn(i){return null!=i&&"false"!=`${i}`}function ha(i,e=0){return function W7(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function Mw(i){return Array.isArray(i)?i:[i]}function lr(i){return null==i?"":"string"==typeof i?i:`${i}px`}function bc(i){return i instanceof Wt?i.nativeElement:i}let D2=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$7=(()=>{class i{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,n)=>this._cleanupObserver(n))}observe(t){const n=bc(t);return new vn(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const n=new He,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:n,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:n,stream:r}=this._observedElements.get(t);n&&n.disconnect(),r.complete(),this._observedElements.delete(t)}}}return i.\u0275fac=function(t){return new(t||i)(j(D2))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),j7=(()=>{class i{constructor(t,n,r){this._contentObserver=t,this._elementRef=n,this._ngZone=r,this.event=new et,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=ha(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(xw(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(R($7),R(Wt),R(St))},i.\u0275dir=Oe({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),A2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[D2]}),i})();const T2=new Set;let Dp,q7=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Y7}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function X7(i){if(!T2.has(i))try{Dp||(Dp=document.createElement("style"),Dp.setAttribute("type","text/css"),document.head.appendChild(Dp)),Dp.sheet&&(Dp.sheet.insertRule(`@media ${i} {body{ }}`,0),T2.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(j(xr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Y7(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Cw=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new He}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return I2(Mw(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=mp(I2(Mw(t)).map(o=>this._registerQuery(o).observable));return s=K_(s.pipe(xi(1)),s.pipe(E2(1),xw(0))),s.pipe(Je(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new vn(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(hs(n),Je(({matches:o})=>({query:t,matches:o})),at(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(j(q7),j(St))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function I2(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Sw(i,e){return(i.getAttribute(e)||"").match(/\S+/g)||[]}const k2="cdk-describedby-message",Ew="cdk-describedby-host";let N1=0,J7=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+N1++,this._document=t,this._id=Hn(hp)+"-"+N1++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;const s=B1(n,r);"string"!=typeof n?(O2(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){if(!n||!this._isElementNode(t))return;const s=B1(n,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof n){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${Ew}="${this._id}"]`);for(let n=0;n<t.length;n++)this._removeCdkDescribedByReferenceIds(t[n]),t[n].removeAttribute(Ew);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){const r=this._document.createElement("div");O2(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(B1(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const n=Sw(t,"aria-describedby").filter(r=>0!=r.indexOf(k2));t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){const r=this._messageRegistry.get(n);(function Z7(i,e,t){const n=Sw(i,e);n.some(r=>r.trim()==t.trim())||(n.push(t.trim()),i.setAttribute(e,n.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(Ew,this._id),r.referenceCount++}_removeMessageReference(t,n){const r=this._messageRegistry.get(n);r.referenceCount--,function K7(i,e,t){const r=Sw(i,e).filter(s=>s!=t.trim());r.length?i.setAttribute(e,r.join(" ")):i.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(Ew)}_isElementDescribedByMessage(t,n){const r=Sw(t,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(xr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function B1(i,e){return"string"==typeof i?`${e||""}/${i}`:i}function O2(i,e){i.id||(i.id=`${k2}-${e}-${N1++}`)}class L2{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new He,this._typeaheadSubscription=Zt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new He,this.change=new He,e instanceof lp&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(zi(t=>this._pressedLetters.push(t)),xw(e),Rn(()=>this._pressedLetters.length>0),Je(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||da(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof lp?this._items.toArray():this._items}}class Q7 extends L2{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class F2 extends L2{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let Dw=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function tq(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function eq(i){try{return i.frameElement}catch{return null}}(function cq(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===B2(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=B2(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function aq(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function lq(i){return!function iq(i){return function sq(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function nq(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function rq(i){return function oq(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||N2(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(j(xr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function N2(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function B2(i){if(!N2(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class uq{constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(xi(1)).subscribe(e)}}let U1=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new uq(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(j(Dw),j(St),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function V1(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function z1(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const dq=new Se("cdk-input-modality-detector-options"),hq={ignoreKeys:[18,17,224,91,16]},Ap=Cp({passive:!0,capture:!0});let fq=(()=>{class i{constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Nn(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=zd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(V1(o)?"keyboard":"mouse"),this._mostRecentTarget=zd(o))},this._onTouchstart=o=>{z1(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=zd(o))},this._options={...hq,...s},this.modalityDetected=this._modality.pipe(E2(1)),this.modalityChanged=this.modalityDetected.pipe(ww()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Ap),r.addEventListener("mousedown",this._onMousedown,Ap),r.addEventListener("touchstart",this._onTouchstart,Ap)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ap),document.removeEventListener("mousedown",this._onMousedown,Ap),document.removeEventListener("touchstart",this._onTouchstart,Ap))}}return i.\u0275fac=function(t){return new(t||i)(j(xr),j(St),j(kt),j(dq,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const pq=new Se("liveAnnouncerElement",{providedIn:"root",factory:function mq(){return null}}),gq=new Se("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let H1=(()=>{class i{constructor(t,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(t){return new(t||i)(j(pq,8),j(St),j(kt),j(gq,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _q=new Se("cdk-focus-monitor-default-options"),Aw=Cp({passive:!0,capture:!0});let xc=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new He,this._rootNodeFocusAndBlurListener=a=>{for(let c=zd(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,n=!1){const r=bc(t);if(!this._platform.isBrowser||1!==r.nodeType)return tt(null);const s=C2(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new He,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const n=bc(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=bc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=zd(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Aw),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Aw)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(at(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Aw),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Aw),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)(j(St),j(xr),j(fq),j(kt,8),j(_q,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const V2="cdk-high-contrast-black-on-white",z2="cdk-high-contrast-white-on-black",G1="cdk-high-contrast-active";let H2=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=Hn(Cw).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(G1,V2,z2),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(G1,V2):2===n&&t.add(G1,z2)}}}return i.\u0275fac=function(t){return new(t||i)(j(xr),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),G2=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(j(H2))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[A2]}),i})();const vq=["addListener","removeListener"],yq=["addEventListener","removeEventListener"],bq=["on","off"];function fa(i,e,t,n){if(Ht(t)&&(n=t,t=void 0),n)return fa(i,e,t).pipe(QA(n));const[r,s]=function Mq(i){return Ht(i.addEventListener)&&Ht(i.removeEventListener)}(i)?yq.map(o=>a=>i[o](e,a,t)):function xq(i){return Ht(i.addListener)&&Ht(i.removeListener)}(i)?vq.map(W2(i,e)):function wq(i){return Ht(i.on)&&Ht(i.off)}(i)?bq.map(W2(i,e)):[];if(!r&&$u(i))return Wi(o=>fa(o,e,t))(pr(i));if(!r)throw new TypeError("Invalid event target");return new vn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function W2(i,e){return t=>n=>i[t](e,n)}const mv={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=mv;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const r=e(s=>{t=void 0,i(s)});return new Zt(()=>t?.(r))},requestAnimationFrame(...i){const{delegate:e}=mv;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=mv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},$2=new class Sq extends F1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Cq extends L1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=mv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(mv.cancelAnimationFrame(t),e._scheduled=void 0)}});let W1,Eq=1;const Tw={};function j2(i){return i in Tw&&(delete Tw[i],!0)}const Dq={setImmediate(i){const e=Eq++;return Tw[e]=!0,W1||(W1=Promise.resolve()),W1.then(()=>j2(e)&&i()),e},clearImmediate(i){j2(i)}},{setImmediate:Aq,clearImmediate:Tq}=Dq,Iw={setImmediate(...i){const{delegate:e}=Iw;return(e?.setImmediate||Aq)(...i)},clearImmediate(i){const{delegate:e}=Iw;return(e?.clearImmediate||Tq)(i)},delegate:void 0},$1=new class Rq extends F1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Iq extends L1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=Iw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Iw.clearImmediate(t),e._scheduled=void 0)}});function j1(i=0,e,t=H7){let n=-1;return null!=e&&(Uy(e)?t=e:n=e),new vn(r=>{let s=function kq(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function q1(i,e=bw){return function Pq(i){return Pn((e,t)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(Dn(t,c=>{n=!0,r=c,s||pr(i(c)).subscribe(s=Dn(t,a,l))},()=>{o=!0,(!n||!s||s.closed)&&t.complete()}))})}(()=>j1(i,e))}const Oq=new Se("cdk-dir-doc",{providedIn:"root",factory:function Lq(){return Hn(kt)}}),Fq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let xu=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new et,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Nq(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Fq.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(j(Oq,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})(),q2=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new He,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new vn(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(q1(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):tt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(Rn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=bc(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>fa(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(j(St),j(xr),j(kt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Rw=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new He,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(q1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(j(xr),j(St),j(kt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_v=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})(),X2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[gv,_v,gv,_v]}),i})();class X1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Tp extends X1{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class Ip extends X1{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Vq extends X1{constructor(e){super(),this.element=e instanceof Wt?e.nativeElement:e}}class Pw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Tp?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Ip?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Vq?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class zq extends Pw{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||fi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Rp=(()=>{class i extends Pw{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new et,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=n.createComponent(s,n.length,t.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(R(sc),R(Xr),R(kt))},i.\u0275dir=Oe({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[lt]}),i})(),Pp=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const Y2=A7();class Hq{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=lr(-this._previousScrollPosition.left),e.style.top=lr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Y2&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Y2&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class Gq{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Z2{enable(){}disable(){}attach(){}}function Y1(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function K2(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class Wq{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();Y1(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let $q=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new Z2,this.close=o=>new Gq(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Hq(this._viewportRuler,this._document),this.reposition=o=>new Wq(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(t){return new(t||i)(j(q2),j(Rw),j(St),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class vv{constructor(e){if(this.scrollStrategy=new Z2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class jq{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let J2=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),qq=(()=>{class i extends J2{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(St,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xq=(()=>{class i extends J2{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=zd(s)},this._clickListener=s=>{const o=zd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const f=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(xr),j(St,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),kw=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||k1()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),k1()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(xr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class yv{constructor(e,t,n,r,s,o,a,l,c,d=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new He,this._attachments=new He,this._detachments=new He,this._locationChanges=Zt.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new He,this._outsidePointerEvents=new He,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=lr(this._config.width),e.height=lr(this._config.height),e.minWidth=lr(this._config.minWidth),e.minHeight=lr(this._config.minHeight),e.maxWidth=lr(this._config.maxWidth),e.maxHeight=lr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=Mw(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(at(Ms(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Q2="cdk-overlay-connected-position-bounding-box",Yq=/([A-Za-z%]+)$/;class Zq{constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new He,this._resizeSubscription=Zt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(Q2),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Hd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Q2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==n.originX?o:a}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=t3(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-n.height,_=this._subtractOverflows(s.width,0-o,o+s.width-n.width),b=this._subtractOverflows(s.height,p,m),y=_*b;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,o=e3(this._overlayRef.getConfig().minHeight),a=e3(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=t3(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),c=Math.max(s.left-n.left-e.x,0);let d=0,f=0;return d=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,f=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:d,y:f},{x:e.x+d,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new jq(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,f,p;if("top"===t.overlayY)o=e.y,s=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=n.height-e.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const m=Math.min(n.bottom-e.y+n.top,e.y),_=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=n.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,d=n.right-e.x;else{const m=Math.min(n.right-e.x+n.left,e.x),_=this._lastBoundingBoxSize.width;d=2*m,f=e.x-m,d>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-_/2)}return{top:o,left:f,bottom:a,right:p,width:d,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=lr(n.height),r.top=lr(n.top),r.bottom=lr(n.bottom),r.width=lr(n.width),r.left=lr(n.left),r.right=lr(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=lr(s)),o&&(r.maxWidth=lr(o))}this._lastBoundingBoxSize=n,Hd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Hd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Hd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Hd(n,this._getExactOverlayY(t,e,d)),Hd(n,this._getExactOverlayX(t,e,d))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=lr(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=lr(o.maxWidth):s&&(n.maxWidth="")),Hd(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=lr(s.y),r}_getExactOverlayX(e,t,n){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=lr(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:K2(e,n),isOriginOutsideView:Y1(e,n),isOverlayClipped:K2(t,n),isOverlayOutsideView:Y1(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Mw(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Wt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function Hd(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function e3(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(Yq);return t&&"px"!==t?null:parseFloat(e)}return i||null}function t3(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const n3="cdk-global-overlay-wrapper";class Kq{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(n3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",_="",b="";l?b="flex-start":"center"===d?(b="center",p?_=f:m=f):p?"left"===d||"end"===d?(b="flex-end",m=f):("right"===d||"start"===d)&&(b="flex-start",_=f):"left"===d||"start"===d?(b="flex-start",m=f):("right"===d||"end"===d)&&(b="flex-end",_=f),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":_,t.justifyContent=b,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(n3),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Jq=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new Kq}flexibleConnectedTo(t){return new Zq(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(j(Rw),j(kt),j(xr),j(kw))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Qq=0,Qs=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,f,p,m){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new vv(t);return o.direction=o.direction||this._directionality.value,new yv(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+Qq++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Pd)),new zq(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(j($q),j(kw),j(sc),j(Jq),j(qq),j(fi),j(St),j(kt),j(xu),j(W_),j(Xq),j(Ks,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const eX=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i3=new Se("cdk-connected-overlay-scroll-strategy");let r3=(()=>{class i{constructor(t){this.elementRef=t}}return i.\u0275fac=function(t){return new(t||i)(R(Wt))},i.\u0275dir=Oe({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),s3=(()=>{class i{constructor(t,n,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Zt.EMPTY,this._attachSubscription=Zt.EMPTY,this._detachSubscription=Zt.EMPTY,this._positionSubscription=Zt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new et,this.positionChange=new et,this.attach=new et,this.detach=new et,this.overlayKeydown=new et,this.overlayOutsideClick=new et,this._templatePortal=new Ip(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Gn(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Gn(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Gn(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Gn(t)}get push(){return this._push}set push(t){this._push=Gn(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=eX);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!da(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new vv({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof r3?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(cN(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(R(Qs),R(Zs),R(Xr),R(i3),R(xu,8))},i.\u0275dir=Oe({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[ii]}),i})();const nX={provide:i3,deps:[Qs],useFactory:function tX(i){return()=>i.scrollStrategies.reposition()}};let kp=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[Qs,nX],imports:[gv,Pp,X2,X2]}),i})();function iX(i,e){}class Ow{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let o3=(()=>{class i extends Pw{constructor(t,n,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),f},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),n}attachTemplatePortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let n=null;if("string"==typeof t?n=this._document.querySelector(t):"boolean"==typeof t?n=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(n=t),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=P1(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=P1();return t===n||t.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=P1())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(U1),R(kt,8),R(Ow),R(Dw),R(St),R(yv),R(xc))},i.\u0275cmp=Ct({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,n){if(1&t&&ji(Rp,7),2&t){let r;$t(r=jt())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,n){2&t&&Qt("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[lt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&Ne(0,iX,0,0,"ng-template",0)},dependencies:[Rp],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class Z1{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new He,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!da(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const a3=new Se("DialogScrollStrategy"),rX=new Se("DialogData"),sX=new Se("DefaultDialogConfig"),aX={provide:a3,deps:[Qs],useFactory:function oX(i){return()=>i.scrollStrategies.block()}};let lX=0,l3=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new He,this._afterOpenedAtThisLevel=new He,this._ariaHiddenElements=new Map,this.afterAllClosed=J_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(hs(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,n){(n={...this._defaultOptions||new Ow,...n}).id=n.id||"cdk-dialog-"+lX++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new Z1(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(t,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){K1(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){K1(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),K1(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const n=new vv({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachContainer(t,n,r){const s=r.injector??r.viewContainerRef?.injector,o=[{provide:Ow,useValue:r},{provide:Z1,useValue:n},{provide:yv,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=o3;const l=new Tp(a,r.viewContainerRef,fi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,n,r,s){const o=this._createInjector(s,n,r);if(t instanceof Zs){let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Ip(t,null,a,o))}else{const a=r.attachComponentPortal(new Tp(t,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(t,n,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:rX,useValue:t.data},{provide:Z1,useValue:n}];return t.providers&&("function"==typeof t.providers?o.push(...t.providers(n,t,r)):o.push(...t.providers)),t.direction&&(!s||!s.get(xu,null,mt.Optional))&&o.push({provide:xu,useValue:{value:t.direction,change:tt()}}),fi.create({parent:t.injector||s||this._injector,providers:o})}_removeOpenDialog(t,n){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(fi),j(sX,8),j(i,12),j(kw),j(a3))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();function K1(i,e){let t=i.length;for(;t--;)e(i[t])}let cX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[l3,aX],imports:[kp,Pp,G2,Pp]}),i})();function uX(i,e){if(1&i&&Et(0,"mat-pseudo-checkbox",4),2&i){const t=Le();oe("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function dX(i,e){if(1&i&&(fe(0,"span",5),pt(1),be()),2&i){const t=Le();re(1),ds("(",t.group.label,")")}}const hX=["*"],pX=new Se("mat-sanity-checks",{providedIn:"root",factory:function fX(){return!0}});let wn=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!k1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(j(H2),j(pX,8),j(kt))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[gv,gv]}),i})();function Lw(i){return class extends i{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Gn(e)}}}function bv(i,e){return class extends i{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function xv(i){return class extends i{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Gn(e)}}}function d3(i,e=0){return class extends i{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?ha(t):this.defaultTabIndex}}}function h3(i){return class extends i{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}function mX(i){return class extends i{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new vn(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}let J1=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),_X=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),i})();function wv(i,e,t){i.nativeElement.classList.toggle(e,t)}let f3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,wn]}),i})();class yX{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const p3={enterDuration:225,exitDuration:150},Q1=Cp({passive:!0}),m3=["mousedown","touchstart"],g3=["mouseup","mouseleave","touchend","touchcancel"];class xX{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=bc(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...p3,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function wX(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const f=window.getComputedStyle(d),m=f.transitionDuration,_="none"===f.transitionProperty||"0s"===m||"0s, 0s"===m,b=new yX(this,d,n,_);d.style.transform="scale3d(1, 1, 1)",b.state=0,n.persistent||(this._mostRecentTransientRipple=b);let y=null;return!_&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(b),M=()=>this._destroyRipple(b);d.addEventListener("transitionend",v),d.addEventListener("transitioncancel",M),y={onTransitionEnd:v,onTransitionCancel:M}}),this._activeRipples.set(b,y),(_||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...p3,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=bc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(m3))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(g3),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=V1(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!z1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Q1)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(m3.forEach(e=>{this._triggerElement.removeEventListener(e,this,Q1)}),this._pointerUpEventsRegistered&&g3.forEach(e=>{this._triggerElement.removeEventListener(e,this,Q1)}))}}const MX=new Se("mat-ripple-global-options");let Mv=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new xX(this,n,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(St),R(xr),R(MX,8),R(Ks,8))},i.\u0275dir=Oe({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&li("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Fw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,wn]}),i})(),_3=(()=>{class i{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(t){return new(t||i)(R(Ks,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,n){2&t&&li("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),i})(),eT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn]}),i})();const v3=new Se("MAT_OPTION_PARENT_COMPONENT"),y3=new Se("MatOptgroup");let CX=0;class SX{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let EX=(()=>{class i{constructor(t,n,r,s){this._element=t,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+CX++,this.onSelectionChange=new et,this._stateChanges=new He}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Gn(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!da(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new SX(this,t))}}return i.\u0275fac=function(t){cc()},i.\u0275dir=Oe({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),Nw=(()=>{class i extends EX{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(ri),R(v3,8),R(y3,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,n){1&t&&ct("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&t&&(rp("id",n.id),Qt("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),li("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[lt],ngContentSelectors:hX,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,n){1&t&&(Ys(),Ne(0,uX,1,2,"mat-pseudo-checkbox",0),fe(1,"span",1),Yn(2),be(),Ne(3,dX,2,1,"span",2),Et(4,"div",3)),2&t&&(oe("ngIf",n.multiple),re(3),oe("ngIf",n.group&&n.group._inert),re(1),oe("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[Mv,br,_3],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),i})();function b3(i,e,t){if(t.length){let n=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}let x3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Fw,Wa,wn,eT]}),i})();class w3{}const wc="*";function Ml(i,e){return{type:7,name:i,definitions:e,options:{}}}function eo(i,e=null){return{type:4,styles:e,timings:i}}function M3(i,e=null){return{type:3,steps:i,options:e}}function C3(i,e=null){return{type:2,steps:i,options:e}}function $n(i){return{type:6,styles:i,offset:null}}function fs(i,e,t){return{type:0,name:i,styles:e,options:t}}function Rs(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function tT(i=null){return{type:9,options:i}}function nT(i,e,t=null){return{type:11,selector:i,animation:e,options:t}}function S3(i){Promise.resolve(null).then(i)}class Cv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){S3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class E3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?S3(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function IX(i,e){}const Op={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},RX={dialogContainer:Ml("dialogContainer",[fs("void, exit",$n({opacity:0,transform:"scale(0.7)"})),fs("enter",$n({transform:"none"})),Rs("* => enter",M3([eo("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",$n({transform:"none",opacity:1})),nT("@*",tT(),{optional:!0})]),Op),Rs("* => void, * => exit",M3([eo("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",$n({opacity:0})),nT("@*",tT(),{optional:!0})]),Op)])};class Bw{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Op.params.enterAnimationDuration,this.exitAnimationDuration=Op.params.exitAnimationDuration}}let PX=(()=>{class i extends o3{constructor(t,n,r,s,o,a,l,c){super(t,n,r,s,o,a,l,c),this._animationStateChanged=new et}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(U1),R(kt,8),R(Bw),R(Dw),R(St),R(yv),R(xc))},i.\u0275cmp=Ct({type:i,selectors:[["ng-component"]],features:[lt],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),kX=(()=>{class i extends PX{constructor(t,n,r,s,o,a,l,c,d){super(t,n,r,s,o,a,l,d),this._changeDetectorRef=c,this._state="enter"}_onAnimationDone({toState:t,totalTime:n}){"enter"===t?this._openAnimationDone(n):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:n})}_onAnimationStart({toState:t,totalTime:n}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Op.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Op.params.exitAnimationDuration}}}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(U1),R(kt,8),R(Bw),R(Dw),R(St),R(yv),R(ri),R(xc))},i.\u0275cmp=Ct({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,n){1&t&&gx("@dialogContainer.start",function(s){return n._onAnimationStart(s)})("@dialogContainer.done",function(s){return n._onAnimationDone(s)}),2&t&&(rp("id",n._config.id),Qt("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),vx("@dialogContainer",n._getAnimationState()))},features:[lt],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&Ne(0,IX,0,0,"ng-template",0)},dependencies:[Rp],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[RX.dialogContainer]}}),i})();class Sv{constructor(e,t,n){this._ref=e,this._containerInstance=n,this._afterOpened=new He,this._beforeClosed=new He,this._state=0,this.disableClose=t.disableClose,this.id=e.id,n._animationStateChanged.pipe(Rn(r=>"opened"===r.state),xi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Rn(r=>"closed"===r.state),xi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ms(this.backdropClick(),this.keydownEvents().pipe(Rn(r=>27===r.keyCode&&!this.disableClose&&!da(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),D3(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Rn(t=>"closing"===t.state),xi(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function D3(i,e,t){return i._closeInteractionType=e,i.close(t)}const rT=new Se("MatDialogData"),OX=new Se("mat-dialog-default-options"),A3=new Se("mat-dialog-scroll-strategy"),FX={provide:A3,deps:[Qs],useFactory:function LX(i){return()=>i.scrollStrategies.block()}};let NX=0,BX=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new He,this._afterOpenedAtThisLevel=new He,this._idPrefix="mat-dialog-",this.afterAllClosed=J_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(hs(void 0))),this._scrollStrategy=a,this._dialog=n.get(l3)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,n){let r;(n={...this._defaultOptions||new Bw,...n}).id=n.id||`${this._idPrefix}${NX++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Bw,useValue:n},{provide:Ow,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let n=t.length;for(;n--;)t[n].close()}}return i.\u0275fac=function(t){cc()},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),Uw=(()=>{class i extends BX{constructor(t,n,r,s,o,a,l,c){super(t,n,s,a,l,o,Sv,kX,rT,c)}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(fi),j(W_,8),j(OX,8),j(A3),j(i,12),j(kw),j(Ks,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),UX=0,VX=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=P3(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const n=t._matDialogClose||t._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(t){D3(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(t){return new(t||i)(R(Sv,8),R(Wt),R(Uw))},i.\u0275dir=Oe({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,n){1&t&&ct("click",function(s){return n._onButtonClick(s)}),2&t&&Qt("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[ii]}),i})(),T3=(()=>{class i{constructor(t,n,r){this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-"+UX++}ngOnInit(){this._dialogRef||(this._dialogRef=P3(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(t){return new(t||i)(R(Sv,8),R(Wt),R(Uw))},i.\u0275dir=Oe({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,n){2&t&&rp("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),I3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),i})(),R3=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,n){2&t&&li("mat-dialog-actions-align-center","center"===n.align)("mat-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})();function P3(i,e){let t=i.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(n=>n.id===t.id):null}let zX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[Uw,FX],imports:[cX,kp,Pp,wn,wn]}),i})();const HX=["mat-button",""],GX=["*"],$X=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],jX=bv(Lw(xv(class{constructor(i){this._elementRef=i}})));let Ev=(()=>{class i extends jX{constructor(t,n,r){super(t),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of $X)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,n){t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(xc),R(Ks,8))},i.\u0275cmp=Ct({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,n){if(1&t&&ji(Mv,5),2&t){let r;$t(r=jt())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,n){2&t&&(Qt("disabled",n.disabled||null),li("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[lt],attrs:HX,ngContentSelectors:GX,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,n){1&t&&(Ys(),fe(0,"span",0),Yn(1),be(),Et(2,"span",1)(3,"span",2)),2&t&&(re(2),li("mat-button-ripple-round",n.isRoundButton||n.isIconButton),oe("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[Mv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),sT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Fw,wn,wn]}),i})();const qX=["class","dialog"];let k3=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}}return i.\u0275fac=function(t){return new(t||i)(R(Sv),R(rT))},i.\u0275cmp=Ct({type:i,selectors:[["app-confirm",8,"dialog"]],attrs:qX,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,n){1&t&&(fe(0,"h1",0),pt(1,"Confirmation"),be(),fe(2,"div",1)(3,"p"),pt(4),be()(),fe(5,"div",2)(6,"button",3),ct("click",function(){return n.dialogRef.close()}),pt(7,"Cancel"),be(),fe(8,"button",4),pt(9,"Yes"),be()()),2&t&&(re(4),Ti(n.data.text),re(4),oe("mat-dialog-close",!0))},dependencies:[Ev,VX,T3,I3,R3]}),i})();function oT(i,e){const t="object"==typeof e;return new Promise((n,r)=>{const s=new Go({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{t?n(e.defaultValue):r(new Z_)}});i.subscribe(s)})}function O3(...i){const e=Vy(i),{args:t,keys:n}=nN(i),r=new vn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let f=!1;pr(t[d]).subscribe(Dn(s,p=>{f||(f=!0,c--),a[d]=p},()=>l--,void 0,()=>{(!l||!f)&&(c||s.next(n?iN(n,a):a),s.complete())}))}});return e?r.pipe(QA(e)):r}let L3=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(R(ia),R(Wt))},i.\u0275dir=Oe({type:i}),i})(),Gd=(()=>{class i extends L3{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,features:[lt]}),i})();const $a=new Se("NgValueAccessor"),YX={provide:$a,useExisting:Un(()=>wu),multi:!0},KX=new Se("CompositionEventMode");let wu=(()=>{class i extends L3{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ZX(){const i=xl()?xl().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(R(ia),R(Wt),R(KX,8))},i.\u0275dir=Oe({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&ct("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Fn([YX]),lt]}),i})();function Mu(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function N3(i){return null!=i&&"number"==typeof i.length}const ps=new Se("NgValidators"),Cu=new Se("NgAsyncValidators"),QX=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class aT{static min(e){return B3(e)}static max(e){return U3(e)}static required(e){return function V3(i){return Mu(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function z3(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function H3(i){return Mu(i.value)||QX.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function G3(i){return e=>Mu(e.value)||!N3(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function W3(i){return e=>N3(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function $3(i){if(!i)return Vw;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Mu(n.value))return null;const r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return K3(e)}static composeAsync(e){return J3(e)}}function B3(i){return e=>{if(Mu(e.value)||Mu(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function U3(i){return e=>{if(Mu(e.value)||Mu(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function Vw(i){return null}function j3(i){return null!=i}function q3(i){return k_(i)?Mi(i):i}function X3(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Y3(i,e){return e.map(t=>t(i))}function Z3(i){return i.map(e=>function eY(i){return!i.validate}(e)?e:t=>e.validate(t))}function K3(i){if(!i)return null;const e=i.filter(j3);return 0==e.length?null:function(t){return X3(Y3(t,e))}}function lT(i){return null!=i?K3(Z3(i)):null}function J3(i){if(!i)return null;const e=i.filter(j3);return 0==e.length?null:function(t){return O3(Y3(t,e).map(q3)).pipe(Je(X3))}}function cT(i){return null!=i?J3(Z3(i)):null}function Q3(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function eB(i){return i._rawValidators}function tB(i){return i._rawAsyncValidators}function uT(i){return i?Array.isArray(i)?i:[i]:[]}function zw(i,e){return Array.isArray(i)?i.includes(e):i===e}function nB(i,e){const t=uT(e);return uT(i).forEach(r=>{zw(t,r)||t.push(r)}),t}function iB(i,e){return uT(e).filter(t=>!zw(i,t))}class rB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ps extends rB{get formDirective(){return null}get path(){return null}}class Cl extends rB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class sB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Wd=(()=>{class i extends sB{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Cl,2))},i.\u0275dir=Oe({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&li("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[lt]}),i})(),oB=(()=>{class i extends sB{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Ps,10))},i.\u0275dir=Oe({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){2&t&&li("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[lt]}),i})();const Dv="VALID",Gw="INVALID",Lp="PENDING",Av="DISABLED";function pT(i){return(Ww(i)?i.validators:i)||null}function lB(i){return Array.isArray(i)?lT(i):i||null}function mT(i,e){return(Ww(e)?e.asyncValidators:i)||null}function cB(i){return Array.isArray(i)?cT(i):i||null}function Ww(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function uB(i,e,t){const n=i.controls;if(!(e?Object.keys(n):n).length)throw new ge(1e3,"");if(!n[t])throw new ge(1001,"")}function dB(i,e,t){i._forEachChild((n,r)=>{if(void 0===t[r])throw new ge(1002,"")})}class $w{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=lB(this._rawValidators),this._composedAsyncValidatorFn=cB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Dv}get invalid(){return this.status===Gw}get pending(){return this.status==Lp}get disabled(){return this.status===Av}get enabled(){return this.status!==Av}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=lB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=cB(e)}addValidators(e){this.setValidators(nB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(nB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(iB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(iB(e,this._rawAsyncValidators))}hasValidator(e){return zw(this._rawValidators,e)}hasAsyncValidator(e){return zw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Lp,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Av,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Dv,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Dv||this.status===Lp)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Av:Dv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Lp,this._hasOwnPendingAsyncValidator=!0;const t=q3(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Av:this.errors?Gw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lp)?Lp:this._anyControlsHaveStatus(Gw)?Gw:Dv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ww(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class jw extends $w{constructor(e,t,n){super(pT(t),mT(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){dB(this,0,e),Object.keys(e).forEach(n=>{uB(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{const r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function qw(i,e){return[...e.path,i]}function Tv(i,e){gT(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&e.valueAccessor.setDisabledState?.(!0),function cY(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&hB(i,e)})}(i,e),function dY(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function uY(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&hB(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function lY(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function Xw(i,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Zw(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Yw(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function gT(i,e){const t=eB(i);null!==e.validator?i.setValidators(Q3(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=tB(i);null!==e.asyncValidator?i.setAsyncValidators(Q3(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();Yw(e._rawValidators,r),Yw(e._rawAsyncValidators,r)}function Zw(i,e){let t=!1;if(null!==i){if(null!==e.validator){const r=eB(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=tB(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}const n=()=>{};return Yw(e._rawValidators,n),Yw(e._rawAsyncValidators,n),t}function hB(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function fB(i,e){gT(i,e)}function _T(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function mB(i,e){i._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function vT(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===wu?t=s:function pY(i){return Object.getPrototypeOf(i.constructor)===Gd}(s)?n=s:r=s}),r||n||t||null}const gY={provide:Ps,useExisting:Un(()=>Rv)},Iv=(()=>Promise.resolve(null))();let Rv=(()=>{class i extends Ps{constructor(t,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new et,this.form=new jw({},lT(t),cT(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Iv.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Tv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Iv.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Iv.then(()=>{const n=this._findContainer(t.path),r=new jw({});fB(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Iv.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Iv.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,mB(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return i.\u0275fac=function(t){return new(t||i)(R(ps,10),R(Cu,10))},i.\u0275dir=Oe({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&ct("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fn([gY]),lt]}),i})();function gB(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function _B(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Pv=class extends $w{constructor(e=null,t,n){super(pT(t),mT(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ww(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=_B(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){_B(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},yY={provide:Cl,useExisting:Un(()=>$d)},bB=(()=>Promise.resolve(null))();let $d=(()=>{class i extends Cl{constructor(t,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new Pv,this._registered=!1,this.update=new et,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=vT(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),_T(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Tv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,r=0!==n&&function fc(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);bB.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?qw(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(R(Ps,9),R(ps,10),R(Cu,10),R($a,10),R(ri,8))},i.\u0275dir=Oe({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Fn([yY]),lt,ii]}),i})(),xB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const bY={provide:$a,useExisting:Un(()=>kv),multi:!0};let kv=(()=>{class i extends Gd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=n=>{t(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,n){1&t&&ct("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[Fn([bY]),lt]}),i})(),wB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const yT=new Se("NgModelWithFormControlWarning"),SY={provide:Ps,useExisting:Un(()=>Fp)};let Fp=(()=>{class i extends Ps{constructor(t,n){super(),this.validators=t,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new et,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return Tv(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){Xw(t.control||null,t,!1),function mY(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,mB(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,r=this.form.get(t.path);n!==r&&(Xw(n||null,t),(i=>i instanceof Pv)(r)&&(Tv(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);fB(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function hY(i,e){return Zw(i,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){gT(this.form,this),this._oldForm&&Zw(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(R(ps,10),R(Cu,10))},i.\u0275dir=Oe({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&ct("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Fn([SY]),lt,ii]}),i})();const AY={provide:Cl,useExisting:Un(()=>wT)};let wT=(()=>{class i extends Cl{constructor(t,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new et,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=vT(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),_T(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return qw(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(R(Ps,13),R(ps,10),R(Cu,10),R($a,10),R(yT,8))},i.\u0275dir=Oe({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Fn([AY]),lt,ii]}),i})();function IB(i){return"number"==typeof i?i:parseFloat(i)}let jd=(()=>{class i{constructor(){this._validator=Vw}ngOnChanges(t){if(this.inputName in t){const n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Vw,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,features:[ii]}),i})();const LY={provide:ps,useExisting:Un(()=>ST),multi:!0};let ST=(()=>{class i extends jd{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>IB(t),this.createValidator=t=>U3(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&Qt("max",n._enabled?n.max:null)},inputs:{max:"max"},features:[Fn([LY]),lt]}),i})();const FY={provide:ps,useExisting:Un(()=>ET),multi:!0};let ET=(()=>{class i extends jd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>IB(t),this.createValidator=t=>B3(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&Qt("min",n._enabled?n.min:null)},inputs:{min:"min"},features:[Fn([FY]),lt]}),i})(),FB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wB]}),i})(),GY=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[FB]}),i})(),NB=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:yT,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[FB]}),i})();class BB extends $w{constructor(e,t,n){super(pT(t),mT(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){dB(this,0,e),e.forEach((n,r)=>{uB(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>!!n._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function UB(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let WY=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new i;return t.useNonNullable=!0,t}group(t,n=null){const r=this._reduceControls(t);let s={};return UB(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new jw(r,s)}control(t,n,r){let s={};return this.useNonNullable?(UB(n)?s=n:(s.validators=n,s.asyncValidators=r),new Pv(t,{...s,nonNullable:!0})):new Pv(t,n,r)}array(t,n,r){const s=t.map(o=>this._createControl(o));return new BB(s,n,r)}_reduceControls(t){const n={};return Object.keys(t).forEach(r=>{n[r]=this._createControl(t[r])}),n}_createControl(t){return t instanceof Pv||t instanceof $w?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:NB}),i})();const $Y=["connectionContainer"],jY=["inputContainer"],qY=["label"];function XY(i,e){1&i&&(sa(0),fe(1,"div",14),Et(2,"div",15)(3,"div",16)(4,"div",17),be(),fe(5,"div",18),Et(6,"div",15)(7,"div",16)(8,"div",17),be(),oa())}function YY(i,e){if(1&i){const t=Rr();fe(0,"div",19),ct("cdkObserveContent",function(){return yn(t),An(Le().updateOutlineGap())}),Yn(1,1),be()}2&i&&oe("cdkObserveContentDisabled","outline"!=Le().appearance)}function ZY(i,e){if(1&i&&(sa(0),Yn(1,2),fe(2,"span"),pt(3),be(),oa()),2&i){const t=Le(2);re(3),Ti(t._control.placeholder)}}function KY(i,e){1&i&&Yn(0,3,["*ngSwitchCase","true"])}function JY(i,e){1&i&&(fe(0,"span",23),pt(1," *"),be())}function QY(i,e){if(1&i){const t=Rr();fe(0,"label",20,21),ct("cdkObserveContent",function(){return yn(t),An(Le().updateOutlineGap())}),Ne(2,ZY,4,1,"ng-container",12),Ne(3,KY,1,0,"ng-content",12),Ne(4,JY,2,0,"span",22),be()}if(2&i){const t=Le();li("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),oe("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Qt("for",t._control.id)("aria-owns",t._control.id),re(2),oe("ngSwitchCase",!1),re(1),oe("ngSwitchCase",!0),re(1),oe("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function eZ(i,e){1&i&&(fe(0,"div",24),Yn(1,4),be())}function tZ(i,e){if(1&i&&(fe(0,"div",25),Et(1,"span",26),be()),2&i){const t=Le();re(1),li("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function nZ(i,e){1&i&&(fe(0,"div"),Yn(1,5),be()),2&i&&oe("@transitionMessages",Le()._subscriptAnimationState)}function iZ(i,e){if(1&i&&(fe(0,"div",30),pt(1),be()),2&i){const t=Le(2);oe("id",t._hintLabelId),re(1),Ti(t.hintLabel)}}function rZ(i,e){if(1&i&&(fe(0,"div",27),Ne(1,iZ,2,2,"div",28),Yn(2,6),Et(3,"div",29),Yn(4,7),be()),2&i){const t=Le();oe("@transitionMessages",t._subscriptAnimationState),re(1),oe("ngIf",t.hintLabel)}}const sZ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],oZ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let aZ=0;const VB=new Se("MatError");let lZ=(()=>{class i{constructor(t,n){this.id="mat-error-"+aZ++,t||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(t){return new(t||i)(Pa("aria-live"),R(Wt))},i.\u0275dir=Oe({type:i,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,n){2&t&&Qt("id",n.id)},inputs:{id:"id"},features:[Fn([{provide:VB,useExisting:i}])]}),i})();const cZ={transitionMessages:Ml("transitionMessages",[fs("enter",$n({opacity:1,transform:"translateY(0%)"})),Rs("void => enter",[$n({opacity:0,transform:"translateY(-5px)"}),eo("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Kw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i}),i})();const uZ=new Se("MatHint");let Su=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-label"]]}),i})(),dZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-placeholder"]]}),i})();const hZ=new Se("MatPrefix"),fZ=new Se("MatSuffix");let zB=0;const mZ=bv(class{constructor(i){this._elementRef=i}},"primary"),gZ=new Se("MAT_FORM_FIELD_DEFAULT_OPTIONS"),AT=new Se("MatFormField");let Np=(()=>{class i extends mZ{constructor(t,n,r,s,o,a,l){super(t),this._changeDetectorRef=n,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new He,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+zB++,this._labelId="mat-form-field-label-"+zB++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const n=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&n!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Gn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(hs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(at(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(at(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Ms(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(hs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(hs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(at(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const n=this._control?this._control.ngControl:null;return n&&n[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,fa(this._label.nativeElement,"transitionend").pipe(xi(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const d=n.querySelectorAll(`${r}, ${s}`);for(let f=0;f<d.length;f++)d[f].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=n.querySelectorAll(r),c=n.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const d=n.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const f=this._getStartEnd(d),p=t.children,m=this._getStartEnd(p[0].getBoundingClientRect());let _=0;for(let b=0;b<p.length;b++)_+=p[b].offsetWidth;o=Math.abs(m-f)-5,a=_>0?.75*_+10:0}for(let d=0;d<l.length;d++)l[d].style.width=`${o}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(ri),R(xu,8),R(gZ,8),R(xr),R(St),R(Ks,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,n,r){if(1&t&&(bi(r,Kw,5),bi(r,Kw,7),bi(r,Su,5),bi(r,Su,7),bi(r,dZ,5),bi(r,VB,5),bi(r,uZ,5),bi(r,hZ,5),bi(r,fZ,5)),2&t){let s;$t(s=jt())&&(n._controlNonStatic=s.first),$t(s=jt())&&(n._controlStatic=s.first),$t(s=jt())&&(n._labelChildNonStatic=s.first),$t(s=jt())&&(n._labelChildStatic=s.first),$t(s=jt())&&(n._placeholderChild=s.first),$t(s=jt())&&(n._errorChildren=s),$t(s=jt())&&(n._hintChildren=s),$t(s=jt())&&(n._prefixChildren=s),$t(s=jt())&&(n._suffixChildren=s)}},viewQuery:function(t,n){if(1&t&&(ji($Y,7),ji(jY,5),ji(qY,5)),2&t){let r;$t(r=jt())&&(n._connectionContainerRef=r.first),$t(r=jt())&&(n._inputContainerRef=r.first),$t(r=jt())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,n){2&t&&li("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Fn([{provide:AT,useExisting:i}]),lt],ngContentSelectors:oZ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,n){1&t&&(Ys(sZ),fe(0,"div",0)(1,"div",1,2),ct("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),Ne(3,XY,9,0,"ng-container",3),Ne(4,YY,2,1,"div",4),fe(5,"div",5,6),Yn(7),fe(8,"span",7),Ne(9,QY,5,16,"label",8),be()(),Ne(10,eZ,2,0,"div",9),be(),Ne(11,tZ,2,4,"div",10),fe(12,"div",11),Ne(13,nZ,2,1,"div",12),Ne(14,rZ,5,2,"div",13),be()()),2&t&&(re(3),oe("ngIf","outline"==n.appearance),re(1),oe("ngIf",n._prefixChildren.length),re(5),oe("ngIf",n._hasFloatingLabel()),re(1),oe("ngIf",n._suffixChildren.length),re(1),oe("ngIf","outline"!=n.appearance),re(1),oe("ngSwitch",n._getDisplayedMessages()),re(1),oe("ngSwitchCase","error"),re(1),oe("ngSwitchCase","hint"))},dependencies:[br,fp,$x,j7],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[cZ.transitionMessages]},changeDetection:0}),i})(),Jw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Wa,wn,A2,wn]}),i})();const GB=Cp({passive:!0});let _Z=(()=>{class i{constructor(t,n){this._platform=t,this._ngZone=n,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Bs;const n=bc(t),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new He,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,GB),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,GB)}}),s}stopMonitoring(t){const n=bc(t),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(t){return new(t||i)(j(xr),j(St))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),WB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const vZ=new Se("MAT_INPUT_VALUE_ACCESSOR"),yZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let bZ=0;const xZ=h3(class{constructor(i,e,t,n){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=t,this.ngControl=n,this.stateChanges=new He}});let Ov=(()=>{class i extends xZ{constructor(t,n,r,s,o,a,l,c,d,f){super(a,s,o,r),this._elementRef=t,this._platform=n,this._autofillMonitor=c,this._formField=f,this._uid="mat-input-"+bZ++,this.focused=!1,this.stateChanges=new He,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>M2().has(_)),this._iOSKeyupListener=_=>{const b=_.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Gn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(aT.required)??!1}set required(t){this._required=Gn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&M2().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Gn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,n=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(n!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=n,n?r.setAttribute("placeholder",n):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){yZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(xr),R(Cl,10),R(Rv,8),R(Fp,8),R(J1),R(vZ,10),R(_Z),R(St),R(AT,8))},i.\u0275dir=Oe({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,n){1&t&&ct("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&t&&(rp("disabled",n.disabled)("required",n.required),Qt("id",n.id)("data-placeholder",n.placeholder)("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required),li("mat-input-server",n._isServer)("mat-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Fn([{provide:Kw,useExisting:i}]),lt,ii]}),i})(),wZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[J1],imports:[WB,Jw,wn,WB,Jw]}),i})();const MZ=["class","dialog"];function CZ(i,e){if(1&i&&(fe(0,"mat-form-field",7)(1,"mat-label"),pt(2),be(),Et(3,"input",8),be()),2&i){const t=e.$implicit;re(2),Ti(t.title),re(1),oe("id",t.id)("type",t.type)("formControlName",t.id)}}let SZ=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this.fb=n,this.data=r;const s={};for(const o of r.args)s[o.id]=["",aT.required];this.argsForm=this.fb.group(s)}submit(){const t=this.argsForm.value;for(const n of this.data.args)"number"==n.type&&(t[n.id]=+t[n.id]);this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Sv),R(WY),R(rT))},i.\u0275cmp=Ct({type:i,selectors:[["app-run-custom-action",8,"dialog"]],attrs:MZ,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(t,n){1&t&&(fe(0,"h1",0),pt(1),be(),fe(2,"div",1)(3,"p"),pt(4),be()(),fe(5,"form",2),Ne(6,CZ,4,4,"mat-form-field",3),be(),fe(7,"div",4)(8,"button",5),ct("click",function(){return n.dialogRef.close()}),pt(9,"Cancel"),be(),fe(10,"button",6),ct("click",function(){return n.submit()}),pt(11,"Run"),be()()),2&t&&(re(1),ds('Run action "',n.data.title,'"'),re(3),Ti(n.data.description),re(1),oe("formGroup",n.argsForm),re(1),oe("ngForOf",n.data.args),re(4),oe("disabled",n.argsForm.invalid))},dependencies:[Ha,xB,wu,Wd,oB,Np,Su,Ov,Ev,T3,I3,R3,Fp,wT]}),i})(),Bp=(()=>{class i{constructor(t){this.ngZone=t,this.openedResource$=new Nn(null),this.openedResourcePath$=new Nn(null),eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.on_angular_ready()}wrapHandler(t){return(...n)=>{try{St.assertInAngularZone(),t.bind(this)(...n)}catch{this.ngZone.run(t,this,n)}}}openFile(t,n=!1){var r=this;return Ri(function*(){r.openedResource$.next(null),r.openedResourcePath$.next(null);const s=yield eel.open_file(t,n)();r.openedResource$.next(s),r.openedResourcePath$.next(t)})()}runCustomAction(t,n,r){return Ri(function*(){return eel.run_custom_action(t.block_id,n,r)()})()}saveFile(t){var n=this;return Ri(function*(){return eel.save_file(n.openedResourcePath$.getValue(),t)()})()}serializeResource(t,n={}){return Ri(function*(){return eel.serialize_resource(t,n)()})()}serializeResourceTmp(t,n,r={}){return Ri(function*(){return eel.serialize_resource_tmp(t,n,r)()})()}deserializeResource(t){var n=this;return Ri(function*(){n.openedResource$.next(yield eel.deserialize_resource(t)())})()}}return i.\u0275fac=function(t){return new(t||i)(j(St))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var TT=Or(489);let IT=(()=>{class i{constructor(t){this.eelDelegate=t,this.resourceData$=new Nn(null),this.resourceError$=new Nn(null),this.customActionRunning$=new Nn(!1),this.changedDataBlocks={},this.dataBlockChange$=new He,this.eelDelegate.openedResource$.subscribe(n=>{this.clearUnsavedChanges(),n?n.block_class_mro?(this.resourceData$.next(n),this.resourceError$.next(null)):(this.resourceData$.next(null),this.resourceError$.next(n)):(this.resourceData$.next(null),this.resourceError$.next(null))}),this.dataBlockChange$.subscribe(([n,r])=>{void 0===r?delete this.changedDataBlocks[n]:this.changedDataBlocks[n]=r})}get hasUnsavedChanges(){return Object.keys(this.changedDataBlocks).length>0}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(t=>{delete this.changedDataBlocks[t]})}runCustomAction(t,n,r){var s=this;return Ri(function*(){s.customActionRunning$.next(!0);const o=yield s.eelDelegate.runCustomAction(t,n,r);if(o.error_class)throw s.customActionRunning$.next(!1),o;return TT.merge(t,o),s.changedDataBlocks.__custom_action_performed__=1,s.customActionRunning$.next(!1),o})()}}return i.\u0275fac=function(t){return new(t||i)(j(Bp))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function EZ(i,e){if(1&i){const t=Rr();fe(0,"div",2)(1,"button",3),ct("click",function(){return yn(t),An(Le().action())}),pt(2),be()()}if(2&i){const t=Le();re(2),Ti(t.data.action)}}function DZ(i,e){}const $B=new Se("MatSnackBarData");class Qw{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const AZ=Math.pow(2,31)-1;class RT{constructor(e,t){this._overlayRef=t,this._afterDismissed=new He,this._afterOpened=new He,this._onAction=new He,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,AZ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let TZ=(()=>{class i{constructor(t,n){this.snackBarRef=t,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(t){return new(t||i)(R(RT),R($B))},i.\u0275cmp=Ct({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,n){1&t&&(fe(0,"span",0),pt(1),be(),Ne(2,EZ,3,1,"div",1)),2&t&&(re(1),Ti(n.data.message),re(1),oe("ngIf",n.hasAction))},dependencies:[br,Ev],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),i})();const IZ={snackBarState:Ml("state",[fs("void, hidden",$n({transform:"scale(0.8)",opacity:0})),fs("visible",$n({transform:"scale(1)",opacity:1})),Rs("* => visible",eo("150ms cubic-bezier(0, 0, 0.2, 1)")),Rs("* => void, * => hidden",eo("75ms cubic-bezier(0.4, 0.0, 1, 1)",$n({opacity:0})))])};let RZ=(()=>{class i extends Pw{constructor(t,n,r,s,o){super(),this._ngZone=t,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new He,this._onExit=new He,this._onEnter=new He,this._animationState="void",this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),n}attachTemplatePortal(t){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),n}onAnimationEnd(t){const{fromState:n,toState:r}=t;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(xi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>t.classList.add(r)):t.classList.add(n))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),n.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(t){return new(t||i)(R(St),R(Wt),R(ri),R(xr),R(Qw))},i.\u0275dir=Oe({type:i,viewQuery:function(t,n){if(1&t&&ji(Rp,7),2&t){let r;$t(r=jt())&&(n._portalOutlet=r.first)}},features:[lt]}),i})(),PZ=(()=>{class i extends RZ{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275cmp=Ct({type:i,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,n){1&t&&gx("@state.done",function(s){return n.onAnimationEnd(s)}),2&t&&vx("@state",n._animationState)},features:[lt],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,n){1&t&&(fe(0,"div",0),Ne(1,DZ,0,0,"ng-template",1),be(),Et(2,"div")),2&t&&(re(2),Qt("aria-live",n._live)("role",n._role))},dependencies:[Rp],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[IZ.snackBarState]}}),i})(),jB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[kp,Pp,Wa,sT,wn,wn]}),i})();const qB=new Se("mat-snack-bar-default-options",{providedIn:"root",factory:function kZ(){return new Qw}});let OZ=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,n){return this._attach(t,n)}openFromTemplate(t,n){return this._attach(t,n)}open(t,n="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:n},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,n){const s=fi.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:Qw,useValue:n}]}),o=new Tp(this.snackBarContainerComponent,n.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(t,n){const r={...new Qw,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new RT(o,s);if(t instanceof Zs){const l=new Ip(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new Tp(t,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(at(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,n){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),n.duration&&n.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(n.duration))}_createOverlay(t){const n=new vv;n.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(t,n){return fi.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:RT,useValue:n},{provide:$B,useValue:t.data}]})}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(H1),j(fi),j(Cw),j(i,12),j(qB))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),LZ=(()=>{class i extends OZ{constructor(t,n,r,s,o,a){super(t,n,r,s,o,a),this.simpleSnackBarComponent=TZ,this.snackBarContainerComponent=PZ,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(H1),j(fi),j(Cw),j(i,12),j(qB))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:jB}),i})();const FZ=["*",[["mat-toolbar-row"]]],NZ=["*","mat-toolbar-row"],BZ=bv(class{constructor(i){this._elementRef=i}});let UZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),VZ=(()=>{class i extends BZ{constructor(t,n,r){super(t),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(xr),R(kt))},i.\u0275cmp=Ct({type:i,selectors:[["mat-toolbar"]],contentQueries:function(t,n,r){if(1&t&&bi(r,UZ,5),2&t){let s;$t(s=jt())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,n){2&t&&li("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[lt],ngContentSelectors:NZ,decls:2,vars:0,template:function(t,n){1&t&&(Ys(FZ),Yn(0),Yn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),zZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,wn]}),i})();const HZ=["tooltip"],XB="tooltip-panel",YB=Cp({passive:!0}),ZB=new Se("mat-tooltip-scroll-strategy"),jZ={provide:ZB,deps:[Qs],useFactory:function $Z(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},qZ=new Se("mat-tooltip-default-options",{providedIn:"root",factory:function XZ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let YZ=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,f,p,m){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=f,this._defaultOptions=p,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new He,this._scrollStrategy=d,this._document=m,p&&(p.position&&(this.position=p.position),p.touchGestures&&(this.touchGestures=p.touchGestures)),f.change.pipe(at(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=ha(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=ha(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(at(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,YB)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const n=this._createOverlay();this._detach(),this._portal=this._portal||new Tp(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=n.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(at(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return n.positionChanges.pipe(at(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:`${this._cssClassPrefix}-${XB}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(at(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(at(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(at(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!da(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(xi(1),at(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:r,originY:s}=t;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${XB}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,YB)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,r=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(t){cc()},i.\u0275dir=Oe({type:i,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),PT=(()=>{class i extends YZ{constructor(t,n,r,s,o,a,l,c,d,f,p,m){super(t,n,r,s,o,a,l,c,d,f,p,m),this._tooltipComponent=KZ}}return i.\u0275fac=function(t){return new(t||i)(R(Qs),R(Wt),R(q2),R(Xr),R(St),R(xr),R(J7),R(xc),R(ZB),R(xu,8),R(qZ,8),R(kt))},i.\u0275dir=Oe({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[lt]}),i})(),ZZ=(()=>{class i{constructor(t,n){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new He,this._animationsDisabled="NoopAnimations"===n}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return i.\u0275fac=function(t){return new(t||i)(R(ri),R(Ks,8))},i.\u0275dir=Oe({type:i}),i})(),KZ=(()=>{class i extends ZZ{constructor(t,n,r){super(t,r),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return i.\u0275fac=function(t){return new(t||i)(R(ri),R(Cw),R(Ks,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(t,n){if(1&t&&ji(HZ,7),2&t){let r;$t(r=jt())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,n){1&t&&ct("mouseleave",function(s){return n._handleMouseLeave(s)}),2&t&&dc("zoom",n.isVisible()?1:null)},features:[lt],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,n){if(1&t&&(fe(0,"div",0,1),ct("animationend",function(s){return n._handleAnimationEnd(s)}),Vi(2,"async"),pt(3),be()),2&t){let r;li("mat-tooltip-handset",null==(r=sr(2,4,n._isHandset))?null:r.matches),oe("ngClass",n.tooltipClass),re(3),Ti(n.message)}},dependencies:[q_,pp],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),i})(),KB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[jZ],imports:[G2,Wa,kp,wn,wn,_v]}),i})();class JZ{}class Eu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Eu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Eu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Eu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class QZ{encodeKey(e){return JB(e)}encodeValue(e){return JB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const tK=/%(\d[a-f0-9])/gi,nK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function JB(i){return encodeURIComponent(i).replace(tK,(e,t)=>nK[t]??e)}function eM(i){return`${i}`}class Du{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new QZ,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eK(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(eM):[eM(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Du({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(eM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(eM(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class iK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function QB(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function eU(i){return typeof Blob<"u"&&i instanceof Blob}function tU(i){return typeof FormData<"u"&&i instanceof FormData}class Lv{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function rK(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Eu),this.context||(this.context=new iK),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Du,this.urlWithParams=t}serializeBody(){return null===this.body?null:QB(this.body)||eU(this.body)||tU(this.body)||function sK(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Du?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||tU(this.body)?null:eU(this.body)?this.body.type||null:QB(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Du?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),c)),new Lv(t,n,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var Zr=(()=>((Zr=Zr||{})[Zr.Sent=0]="Sent",Zr[Zr.UploadProgress=1]="UploadProgress",Zr[Zr.ResponseHeader=2]="ResponseHeader",Zr[Zr.DownloadProgress=3]="DownloadProgress",Zr[Zr.Response=4]="Response",Zr[Zr.User=5]="User",Zr))();class kT extends class oK{constructor(e,t=200,n="OK"){this.headers=e.headers||new Eu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Zr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new kT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function OT(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let iU=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof Lv)s=t;else{let l,c;l=r.headers instanceof Eu?r.headers:new Eu(r.headers),r.params&&(c=r.params instanceof Du?r.params:new Du({fromObject:r.params})),s=new Lv(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=tt(s).pipe(yu(l=>this.handler.handle(l)));if(t instanceof Lv||"events"===r.observe)return o;const a=o.pipe(Rn(l=>l instanceof kT));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Je(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Je(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Je(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Je(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Du).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,OT(r,n))}post(t,n,r={}){return this.request("POST",t,OT(r,n))}put(t,n,r={}){return this.request("PUT",t,OT(r,n))}}return i.\u0275fac=function(t){return new(t||i)(j(JZ))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const lK=["*"];let tM;function Fv(i){return function cK(){if(void 0===tM&&(tM=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(tM=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return tM}()?.createHTML(i)||i}function rU(i){return Error(`Unable to find icon with the name "${i}"`)}function sU(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function oU(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class qd{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let nM=(()=>{class i{constructor(t,n,r,s){this._httpClient=t,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,s){return this._addSvgIconConfig(t,n,new qd(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,s){const o=this._sanitizer.sanitize(Tn.HTML,r);if(!o)throw oU(r);const a=Fv(o);return this._addSvgIconConfig(t,n,new qd("",a,s))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new qd(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const s=this._sanitizer.sanitize(Tn.HTML,n);if(!s)throw oU(n);const o=Fv(s);return this._addSvgIconSetConfig(t,new qd("",o,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(Tn.RESOURCE_URL,t);if(!n)throw sU(t);const r=this._cachedIconsByUrl.get(n);return r?tt(iM(r)):this._loadSvgIconFromConfig(new qd(t,null)).pipe(zi(s=>this._cachedIconsByUrl.set(n,s)),Je(s=>iM(s)))}getNamedSvgIcon(t,n=""){const r=aU(n,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):gp(rU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?tt(iM(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Je(n=>iM(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);return r?tt(r):O3(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(gc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Tn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),tt(null)})))).pipe(Je(()=>{const o=this._extractIconWithNameFromAnySet(t,n);if(!o)throw rU(t);return o}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(zi(n=>t.svgText=n),Je(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?tt(null):this._fetchIcon(t).pipe(zi(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const s=t.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Fv("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString(Fv("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){const{url:n,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function uK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Tn.RESOURCE_URL,n);if(!o)throw sU(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Je(c=>Fv(c)),Ld(()=>this._inProgressUrlFetches.delete(o)),Hm());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(aU(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,t);if(s)return hK(s)?new qd(s.url,null,s.options):new qd(s,null)}}}return i.\u0275fac=function(t){return new(t||i)(j(iU,8),j(JA),j(kt,8),j(Oa))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function iM(i){return i.cloneNode(!0)}function aU(i,e){return i+":"+e}function hK(i){return!(!i.url||!i.options)}const fK=bv(class{constructor(i){this._elementRef=i}}),pK=new Se("MAT_ICON_DEFAULT_OPTIONS"),mK=new Se("mat-icon-location",{providedIn:"root",factory:function gK(){const i=Hn(kt),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),lU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],_K=lU.map(i=>`[${i}]`).join(", "),vK=/^url\(['"]?#(.*?)['"]?\)$/;let yK=(()=>{class i extends fK{constructor(t,n,r,s,o,a){super(t),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Zt.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Gn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),n.forEach(r=>t.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(_K),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)lU.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(vK):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(xi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(nM),Pa("aria-hidden"),R(mK),R(Oa),R(pK,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,n){2&t&&(Qt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),li("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[lt],ngContentSelectors:lK,decls:1,vars:0,template:function(t,n){1&t&&(Ys(),Yn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),bK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,wn]}),i})();function cU(i,e){return e?t=>K_(e.pipe(xi(1),function xK(){return Pn((i,e)=>{i.subscribe(Dn(e,Jr))})}()),t.pipe(cU(i))):Wi((t,n)=>pr(i(t,n)).pipe(xi(1),uN(t)))}function uU(i,e=bw){const t=j1(i,e);return cU(()=>t)}const wK=["mat-menu-item",""];function MK(i,e){1&i&&(_o(),fe(0,"svg",2),Et(1,"polygon",3),be())}const dU=["*"];function CK(i,e){if(1&i){const t=Rr();fe(0,"div",0),ct("keydown",function(r){return yn(t),An(Le()._handleKeydown(r))})("click",function(){return yn(t),An(Le().closed.emit("click"))})("@transformMenu.start",function(r){return yn(t),An(Le()._onAnimationStart(r))})("@transformMenu.done",function(r){return yn(t),An(Le()._onAnimationDone(r))}),fe(1,"div",1),Yn(2),be()()}if(2&i){const t=Le();oe("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),Qt("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const rM={transformMenu:Ml("transformMenu",[fs("void",$n({opacity:0,transform:"scale(0.8)"})),Rs("void => enter",eo("120ms cubic-bezier(0, 0, 0.2, 1)",$n({opacity:1,transform:"scale(1)"}))),Rs("* => void",eo("100ms 25ms linear",$n({opacity:0})))]),fadeInItems:Ml("fadeInItems",[fs("showing",$n({opacity:1})),Rs("void => *",[$n({opacity:0}),eo("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},SK=new Se("MatMenuContent"),LT=new Se("MAT_MENU_PANEL"),EK=xv(Lw(class{}));let sM=(()=>{class i extends EK{constructor(t,n,r,s,o){super(),this._elementRef=t,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new He,this._focused=new He,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),n=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(kt),R(xc),R(LT,8),R(ri))},i.\u0275cmp=Ct({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,n){1&t&&ct("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&t&&(Qt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),li("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[lt],attrs:wK,ngContentSelectors:dU,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,n){1&t&&(Ys(),Yn(0),Et(1,"div",0),Ne(2,MK,2,0,"svg",1)),2&t&&(re(1),oe("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),re(1),oe("ngIf",n._triggersSubmenu))},dependencies:[br,Mv],encapsulation:2,changeDetection:0}),i})();const hU=new Se("mat-menu-default-options",{providedIn:"root",factory:function DK(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let AK=0,Nv=(()=>{class i{constructor(t,n,r,s){this._elementRef=t,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new lp,this._tabSubscription=Zt.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new He,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new et,this.close=this.closed,this.panelId="mat-menu-panel-"+AK++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Gn(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Gn(t)}set panelClass(t){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new F2(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(hs(this._directDescendantItems),Ts(t=>Ms(...t.map(n=>n._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(hs(this._directDescendantItems),Ts(n=>Ms(...n.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const n=t.keyCode,r=this._keyManager;switch(n){case 27:da(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const n=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(hs(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(St),R(hU),R(ri))},i.\u0275dir=Oe({type:i,contentQueries:function(t,n,r){if(1&t&&(bi(r,SK,5),bi(r,sM,5),bi(r,sM,4)),2&t){let s;$t(s=jt())&&(n.lazyContent=s.first),$t(s=jt())&&(n._allItems=s),$t(s=jt())&&(n.items=s)}},viewQuery:function(t,n){if(1&t&&ji(Zs,5),2&t){let r;$t(r=jt())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),TK=(()=>{class i extends Nv{constructor(t,n,r,s){super(t,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(St),R(hU),R(ri))},i.\u0275cmp=Ct({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,n){2&t&&Qt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Fn([{provide:LT,useExisting:i}]),lt],ngContentSelectors:dU,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,n){1&t&&(Ys(),Ne(0,CK,3,6,"ng-template"))},dependencies:[q_],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[rM.transformMenu,rM.fadeInItems]},changeDetection:0}),i})();const fU=new Se("mat-menu-scroll-strategy"),RK={provide:fU,deps:[Qs],useFactory:function IK(i){return()=>i.scrollStrategies.reposition()}},pU=Cp({passive:!0});let PK=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d){this._overlay=t,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Zt.EMPTY,this._hoverSubscription=Zt.EMPTY,this._menuCloseSubscription=Zt.EMPTY,this._handleTouchStart=f=>{z1(f)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new et,this.onMenuOpen=this.menuOpened,this.menuClosed=new et,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Nv?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,pU),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,pU),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const n=this._createOverlay(t),r=n.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),n.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Nv&&(t._startAnimation(),t._directDescendantItems.changes.pipe(at(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Nv?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Rn(r=>"void"===r.toState),xi(1),at(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let n=0,r=t.parentMenu;for(;r;)n++,r=r.parentMenu;t.setElevation(n)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const n=this._getOverlayConfig(t);this._subscribeToPositions(t,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new vv({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,n){t.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,n){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[d,f]=[r,s],p=0;if(this.triggersSubmenu()){if(f=r="before"===t.xPosition?"start":"end",s=d="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:p},{originX:s,originY:l,overlayX:f,overlayY:o,offsetY:p},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-p},{originX:s,originY:c,overlayX:f,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return Ms(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:tt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Rn(o=>o!==this._menuItemInstance),Rn(()=>this._menuOpen)):tt(),n)}_handleMousedown(t){V1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const n=t.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Rn(t=>t===this._menuItemInstance&&!t.disabled),uU(0,$1)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Nv&&this.menu._isAnimating?this.menu._animationDone.pipe(xi(1),uU(0,$1),at(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new Ip(t.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(t){return new(t||i)(R(Qs),R(Wt),R(Xr),R(fU),R(LT,8),R(sM,10),R(xu,8),R(xc),R(St))},i.\u0275dir=Oe({type:i,hostVars:3,hostBindings:function(t,n){1&t&&ct("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&t&&Qt("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen||null)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),kK=(()=>{class i extends PK{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275dir=Oe({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[lt]}),i})(),OK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[RK],imports:[Wa,wn,Fw,kp,_v,wn]}),i})(),mU=(()=>{class i{constructor(t){this.viewContainerRef=t}}return i.\u0275fac=function(t){return new(t||i)(R(Xr))},i.\u0275dir=Oe({type:i,selectors:[["","dataBlockUI",""]]}),i})(),LK=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-fallback-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:2,vars:1,template:function(t,n){1&t&&(fe(0,"p"),pt(1),be()),2&t&&(re(1),ds("GUI component for block ",((null==n.resourceData?null:n.resourceData.block_class_mro)||"").split("__")[0]," not implemented :("))},changeDetection:0}),i})();function FK(i,e){if(1&i&&Et(0,"app-editor",1),2&i){const t=e.$implicit,n=Le();oe("resourceData",null==n.resourceData?null:n.resourceData.value[t])("name",t)}}let oM=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}get fieldKeys(){return Object.keys(this.resourceData?.value||{})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-compound-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resourceData","name",4,"ngFor","ngForOf"],[3,"resourceData","name"]],template:function(t,n){1&t&&Ne(0,FK,1,2,"app-editor",0),2&t&&oe("ngForOf",n.fieldKeys)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}"],changeDetection:0}),i})();function NK(i,e){if(1&i){const t=Rr();fe(0,"mat-form-field",1)(1,"mat-label"),pt(2),be(),fe(3,"input",2),ct("ngModelChange",function(r){return yn(t),An(Le().resourceData.value=r)})("change",function(){return yn(t),An(Le().changed.emit())}),be()()}if(2&i){const t=Le();re(2),Ti(t.name),re(1),oe("max",t.resourceData.editor_validators.max_value)("min",t.resourceData.editor_validators.min_value)("step",t.resourceData.editor_validators.value_interval)("disabled",!(null==t.resourceData.block||!t.resourceData.block.required_value))("ngModel",t.resourceData.value)}}let BK=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-integer-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Ne(0,NK,4,6,"mat-form-field",0),2&t&&oe("ngIf",n.resourceData)},dependencies:[br,wu,kv,Wd,ET,ST,$d,Np,Su,Ov],changeDetection:0}),i})();function UK(i,e){if(1&i){const t=Rr();fe(0,"mat-form-field",1)(1,"mat-label"),pt(2),be(),fe(3,"input",2),ct("ngModelChange",function(r){return yn(t),An(Le().resourceData.value=r)})("change",function(){return yn(t),An(Le().changed.emit())}),be()()}if(2&i){const t=Le();re(2),Ti(t.name),re(1),oe("disabled",!(null==t.resourceData.block||!t.resourceData.block.required_value))("ngModel",t.resourceData.value)}}let VK=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-string-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","type","text",3,"disabled","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Ne(0,UK,4,3,"mat-form-field",0),2&t&&oe("ngIf",n.resourceData)},dependencies:[br,wu,Wd,$d,Np,Su,Ov],changeDetection:0}),i})();const Au=function(){return[]};function zK(i,e){if(1&i&&(fe(0,"mat-panel-description"),pt(1," Click to view items ("),fe(2,"b"),pt(3),be(),pt(4,") "),be()),2&i){const t=Le(2);re(3),Ti(((null==t.resourceData?null:t.resourceData.value)||aa(1,Au)).length)}}function HK(i,e){1&i&&(fe(0,"mat-panel-description"),pt(1," Empty array "),be())}function GK(i,e){}function WK(i,e){if(1&i){const t=Rr();fe(0,"mat-expansion-panel",4),ct("opened",function(){return yn(t),An(Le().onContentsTrigger(!0))})("closed",function(){return yn(t),An(Le().onContentsTrigger(!1))}),fe(1,"mat-expansion-panel-header")(2,"mat-panel-title"),pt(3),be(),Ne(4,zK,5,2,"mat-panel-description",1),Ne(5,HK,2,0,"mat-panel-description",1),be(),Ne(6,GK,0,0,"ng-template",5),be()}if(2&i){const t=Le(),n=mu(3);re(3),ds(" ",t.name," "),re(1),oe("ngIf",((null==t.resourceData?null:t.resourceData.value)||aa(4,Au)).length>0),re(1),oe("ngIf",0==((null==t.resourceData?null:t.resourceData.value)||aa(5,Au)).length),re(1),oe("ngTemplateOutlet",n)}}function $K(i,e){}function jK(i,e){if(1&i&&(sa(0),fe(1,"h2"),pt(2),be(),fe(3,"div",6),Ne(4,$K,0,0,"ng-template",5),be(),oa()),2&i){const t=Le(),n=mu(3);re(2),Ti(t.name),re(2),oe("ngTemplateOutlet",n)}}function qK(i,e){}function XK(i,e){if(1&i&&(fe(0,"div",10),Et(1,"mat-divider",11),fe(2,"span",12),pt(3),be(),Et(4,"mat-divider",11),be()),2&i){const t=Le(),n=t.$implicit,r=t.index;re(3),Ti(n.block_id.split("__")[1]||r)}}function YK(i,e){if(1&i&&(sa(0),Ne(1,XK,5,1,"div",8),Et(2,"app-editor",9),oa()),2&i){const t=e.$implicit,n=e.index;re(1),oe("ngIf",-1==(null==t||null==t.block_class_mro?null:t.block_class_mro.indexOf("Atomic"))),re(1),oe("resourceData",t)("name",n.toString())}}function ZK(i,e){}function KK(i,e){1&i&&(fe(0,"p"),pt(1,"Empty array"),be())}function JK(i,e){if(1&i&&(sa(0),Ne(1,qK,0,0,"ng-template",5),Ne(2,YK,3,3,"ng-container",7),Ne(3,ZK,0,0,"ng-template",5),Ne(4,KK,2,0,"p",1),oa()),2&i){const t=Le(2),n=mu(5);re(1),oe("ngTemplateOutlet",n),re(1),oe("ngForOf",t.renderItems),re(1),oe("ngTemplateOutlet",n),re(1),oe("ngIf",0==((null==t.resourceData?null:t.resourceData.value)||aa(4,Au)).length)}}function QK(i,e){if(1&i&&(sa(0),fe(1,"p",13),pt(2),be(),oa()),2&i){const t=Le(2);re(2),ds("[",((null==t.resourceData?null:t.resourceData.value)||aa(1,Au)).join(", "),"]")}}function eJ(i,e){if(1&i&&(Ne(0,JK,5,5,"ng-container",1),Ne(1,QK,3,2,"ng-container",1)),2&i){const t=Le();oe("ngIf",(t.renderContents||!t.showAsCollapsable)&&!(null!=t.resourceData&&null!=t.resourceData.block&&null!=t.resourceData.block.child&&t.resourceData.block.child.simplified)),re(1),oe("ngIf",(t.renderContents||!t.showAsCollapsable)&&(null==t.resourceData||null==t.resourceData.block||null==t.resourceData.block.child?null:t.resourceData.block.child.simplified))}}function tJ(i,e){if(1&i&&(fe(0,"mat-option",21),pt(1),be()),2&i){const t=e.$implicit,n=Le(3);oe("value",t),re(1),L_(" ",t*n.pageSize," - ",(t+1)*n.pageSize-1," ")}}const nJ=function(i){return{hidden:i}};function iJ(i,e){if(1&i){const t=Rr();fe(0,"div",15)(1,"mat-paginator",16),ct("page",function(r){return yn(t),An(Le(2).renderPage(r.pageIndex,r.pageSize))}),be(),fe(2,"div",17)(3,"div",18),pt(4,"Go To: "),be(),fe(5,"mat-form-field")(6,"mat-select",19),ct("ngModelChange",function(r){return yn(t),An(Le(2).goToIndex=r)})("selectionChange",function(){yn(t);const r=Le(2);return An(r.renderPage(r.goToIndex,r.pageSize))}),Ne(7,tJ,2,3,"mat-option",20),be()()()()}if(2&i){const t=Le(2);oe("ngClass",Cx(9,nJ,((null==t.resourceData?null:t.resourceData.value)||aa(8,Au)).length<=t.minPageSize)),re(1),oe("length",((null==t.resourceData?null:t.resourceData.value)||aa(11,Au)).length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",t.pageSizeOptions)("showFirstLastButtons",!0),re(5),oe("ngModel",t.goToIndex),re(1),oe("ngForOf",t.pageIndexes)}}function rJ(i,e){if(1&i&&Ne(0,iJ,8,12,"div",14),2&i){const t=Le();oe("ngIf",((null==t.resourceData?null:t.resourceData.value)||aa(1,Au)).length>0)}}let gU=(()=>{class i{constructor(t){this.cdr=t,this._resourceData=null,this.name="",this.changed=new et,this.showAsCollapsable=!1,this.renderContents=!1,this.minPageSize=10,this.pageIndex=0,this.pageSize=10,this.pageSizeOptions=[10,25,50,100],this.renderItems=[],this.goToIndex=0,this.pageIndexes=[]}get resourceData(){return this._resourceData}set resourceData(t){this._resourceData=t,this.showAsCollapsable=this._resourceData?.value?.length>5,this.updatePageIndexes(),this.renderPage(0,this.minPageSize)}onContentsTrigger(t){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),t?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(t,n){this.goToIndex=this.pageIndex=t,this.pageSize=n,this.renderItems=(this.resourceData?.value||[]).slice(t*n,(t+1)*n).map(r=>r.block?r:{...r,block:this.resourceData?.block.child}),this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let t=0;t<Math.ceil((this.resourceData?.value||[]).length/this.pageSize);t++)this.pageIndexes.push(t)}}return i.\u0275fac=function(t){return new(t||i)(R(ri))},i.\u0275cmp=Ct({type:i,selectors:[["app-array-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:6,vars:2,consts:[[3,"opened","closed",4,"ngIf"],[4,"ngIf"],["contents",""],["paginator",""],[3,"opened","closed"],[3,"ngTemplateOutlet"],[1,"mat-expansion-panel-body"],[4,"ngFor","ngForOf"],["class","divider",4,"ngIf"],[3,"resourceData","name"],[1,"divider"],[2,"width","50%","display","inline-block"],[2,"padding","20px","font-weight","500"],[2,"word-break","break-word","max-width","100%"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(Ne(0,WK,7,6,"mat-expansion-panel",0),Ne(1,jK,5,2,"ng-container",1),Ne(2,eJ,2,2,"ng-template",null,2,dA),Ne(4,rJ,1,2,"ng-template",null,3,dA)),2&t&&(oe("ngIf",n.showAsCollapsable),re(1),oe("ngIf",!n.showAsCollapsable))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0}),i})();function sJ(i,e){if(1&i){const t=Rr();sa(0),fe(1,"input",5),ct("change",function(){return yn(t),An(Le(2).changed.emit())})("ngModelChange",function(r){const o=yn(t).index,a=Le(2);return An((null==a.resourceData?null:a.resourceData.value.unknowns.value[o]).value=r)}),be(),oa()}if(2&i){const t=e.index,n=Le(2);re(1),oe("ngModel",null==n.resourceData?null:n.resourceData.value.unknowns.value[t].value)}}const oJ=function(){return[]};function aJ(i,e){if(1&i&&(fe(0,"div",3),pt(1," Unknowns: "),Ne(2,sJ,2,1,"ng-container",4),Vi(3,"async"),be()),2&i){const t=Le();let n;re(2),oe("ngForOf",aa(3,oJ).constructor(null==(n=sr(3,1,t._resourceData$))?null:n.value.unknowns.value.length))}}function lJ(i,e){1&i&&(Et(0,"img",6),Vi(1,"async")),2&i&&oe("src",sr(1,1,Le().imageUrl$),Df)}function cJ(i,e){if(1&i&&(Et(0,"app-editor",7),Vi(1,"async")),2&i){let n;oe("resourceData",null==(n=sr(1,1,Le()._resourceData$))||null==n.value?null:n.value.palette)}}let _U=(()=>{class i{constructor(t,n){this.eelDelegate=t,this.cdr=n,this._resourceData$=new Nn(null),this.imageUrl$=new Nn(null),this.name="",this.destroyed$=new He,this.changed=new et}set resourceData(t){this._resourceData$.next(t)}get resourceData(){return this._resourceData$.getValue()}ngAfterViewInit(){var t=this;return Ri(function*(){t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var n=Ri(function*(r){if(r){const[s]=yield t.eelDelegate.serializeResource(r.block_id);t.imageUrl$.next(s)}else t.imageUrl$.next(null)});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(Bp),R(ri))},i.\u0275cmp=Ct({type:i,selectors:[["app-bitmap-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:7,vars:11,consts:[["class","number-matrix",4,"ngIf"],[3,"src",4,"ngIf"],[3,"resourceData",4,"ngIf"],[1,"number-matrix"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"ngModel","change","ngModelChange"],[3,"src"],[3,"resourceData"]],template:function(t,n){if(1&t&&(Ne(0,aJ,4,4,"div",0),Vi(1,"async"),Ne(2,lJ,2,3,"img",1),Vi(3,"async"),Ne(4,cJ,2,3,"app-editor",2),Vi(5,"async"),Vi(6,"async")),2&t){let r;oe("ngIf",sr(1,3,n._resourceData$)),re(2),oe("ngIf",sr(3,5,n.imageUrl$)),re(2),oe("ngIf",(null==(r=sr(5,7,n._resourceData$))||null==r.value?null:r.value.palette)&&124!=(null==(r=sr(6,9,n._resourceData$))||null==r.value||null==r.value.palette||null==r.value.palette.value||null==r.value.palette.value.resource_id?null:r.value.palette.value.resource_id.value))}},styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;row-gap:1rem}.number-matrix[_ngcontent-%COMP%]{display:flex;margin:0 0 16px}img[_ngcontent-%COMP%]{min-width:10rem}#actions[_ngcontent-%COMP%]{display:flex;column-gap:1rem}"],changeDetection:0}),i})();function uJ(i,e){if(1&i){const t=Rr();sa(0),fe(1,"input",5),ct("change",function(){return yn(t),An(Le(2).changed.emit())})("ngModelChange",function(r){const o=yn(t).index;return An(Le(2).resourceData.value.unknowns.value[o]=r)}),be(),oa()}if(2&i){const t=e.index,n=Le(2);re(1),oe("ngModel",n.resourceData.value.unknowns.value[t])}}const dJ=function(){return[]};function hJ(i,e){if(1&i&&(fe(0,"div",3),pt(1," Unknowns: "),Ne(2,uJ,2,1,"ng-container",4),be()),2&i){const t=Le();re(2),oe("ngForOf",aa(1,dJ).constructor(t.resourceData.value.unknowns.value.length))}}const fJ=function(i){return{"background-color":i}};function pJ(i,e){if(1&i&&Et(0,"div",6),2&i){const t=e.$implicit,n=e.index,r=Le();oe("ngStyle",Cx(2,fJ,"#"+r.lpad(t.value.toString(16),"0",8)))("matTooltip",n+": #"+t.value.toString(16))}}let mJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}lpad(t,n,r){for(;t.length<r;)t=n+t;return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-palette-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:5,vars:3,consts:[["class","number-matrix",4,"ngIf"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip",4,"ngFor","ngForOf"],[1,"number-matrix"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"ngModel","change","ngModelChange"],[1,"color-box",3,"ngStyle","matTooltip"]],template:function(t,n){1&t&&(fe(0,"h1"),pt(1),be(),Ne(2,hJ,3,2,"div",0),fe(3,"div",1),Ne(4,pJ,1,4,"div",2),be()),2&t&&(re(1),Ti(((null==n.resourceData?null:n.resourceData.block_class_mro)||"").split("__")[0]),re(1),oe("ngIf",n.resourceData),re(2),oe("ngForOf",null==n.resourceData?null:n.resourceData.value.colors.value))},dependencies:[Ha,br,GA,wu,kv,Wd,$d,Ov,PT],styles:[".number-matrix[_ngcontent-%COMP%]{display:flex;margin:0 0 16px}#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0}),i})();const gJ=["editor"];let _J=(()=>{class i{constructor(t){this.cdr=t,this._resourceData=null,this.name="",this.changed=new et,this.editorProps={}}get resourceData(){return this._resourceData}set resourceData(t){this._resourceData=t,this.editor&&(this.editorProps.data=t?new Uint8Array(t.value):void 0,this.editor.$set({props:{data:this.editorProps.data}}),this.cdr.markForCheck())}ngAfterViewInit(){this.resourceData&&(this.editorProps.data=new Uint8Array(this.resourceData.value)),this.editor=new HexEditor({target:this.editorDiv?.nativeElement,props:this.editorProps}),this.cdr.markForCheck()}ngOnDestroy(){this.editor&&this.editor.$destroy()}}return i.\u0275fac=function(t){return new(t||i)(R(ri))},i.\u0275cmp=Ct({type:i,selectors:[["app-binary-block-ui"]],viewQuery:function(t,n){if(1&t&&ji(gJ,5),2&t){let r;$t(r=jt())&&(n.editorDiv=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:4,vars:0,consts:[["editor",""]],template:function(t,n){1&t&&(fe(0,"p"),pt(1,"binary.block-ui works!"),be(),Et(2,"div",null,0))},changeDetection:0}),i})();const vJ=["picker"],yJ=function(i){return{transform:i}};let bJ=(()=>{class i{constructor(t){this.cdr=t,this.resourceData=null,this.name="",this.changed=new et,this.pi=Math.PI,this.dragging=!1}mousedown(t){this.dragging=!0,this.updateRotation(t)}mousemove(t){this.dragging&&this.updateRotation(t)}mouseout(){this.dragging=!1}updateRotation(t){const n=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(t.clientY-n.top-n.height/2,t.clientX-n.left-n.width/2);t.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resourceData.value=r,this.changed.emit(),this.cdr.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(R(ri))},i.\u0275cmp=Ct({type:i,selectors:[["app-angle-block-ui"]],viewQuery:function(t,n){if(1&t&&ji(vJ,5),2&t){let r;$t(r=jt())&&(n.picker=r.first)}},hostBindings:function(t,n){1&t&&ct("mousedown",function(s){return n.mousedown(s)})("mousemove",function(s){return n.mousemove(s)})("mouseup",function(){return n.mouseout()})("mouseleave",function(){return n.mouseout()})},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:14,vars:12,consts:[[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span"]],template:function(t,n){1&t&&(fe(0,"div",0,1)(2,"div",2),Et(3,"div",3)(4,"div",4),be()(),fe(5,"div",5)(6,"mat-label",6),pt(7),be(),fe(8,"mat-label"),pt(9),Vi(10,"number"),be(),fe(11,"mat-label"),pt(12),Vi(13,"number"),be()()),2&t&&(re(2),oe("ngStyle",Cx(10,yJ,"rotate("+((null==n.resourceData?null:n.resourceData.value)||0)+"rad)")),re(5),Ti(n.name),re(2),ds("",iA(10,4,180*(null==n.resourceData?null:n.resourceData.value)/n.pi||0,"1.2-2")," deg"),re(3),ds("",iA(13,7,(null==n.resourceData?null:n.resourceData.value)||0,"1.2-2")," rad"))},dependencies:[GA,Su,kF],styles:["[_nghost-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0}),i})(),vU=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}get resourcesMap(){const t={};for(let n=0;n<this.resourceData?.value.children_descriptions?.value.length;n++){const r=this.resourceData?.value.children_descriptions?.value[n].value.name.value;t[r]=this.resourceData?.value.children?.value[n]}return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-shpi-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:5,vars:3,consts:[["id","top-bar"],[1,"plain-editor",3,"resourceData","name"],[3,"resources"]],template:function(t,n){1&t&&(fe(0,"div",0)(1,"h1"),pt(2,"SHPI archive"),be(),Et(3,"app-editor",1),be(),Et(4,"app-sidenav-res-list",2)),2&t&&(re(3),oe("resourceData",null==n.resourceData||null==n.resourceData.value?null:n.resourceData.value.shpi_directory)("name","shpi_directory"),re(1),oe("resources",n.resourcesMap))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   app-sidenav-res-list[_ngcontent-%COMP%]{height:calc(100% - 4rem)}"],changeDetection:0}),i})();class yU{constructor(){}deepEquals(e,t){if(null===e&&null!==t)return!1;if(null===t&&null!==e)return!1;if(!0===Array.isArray(e)){if(!1===Array.isArray(t))return!1;if(e.length!==t.length)return!1;{const n=new Set,r=new Set,s=new Set,o=new Set;for(const f of e)!0===Array.isArray(f)?n.add(f):"object"==typeof f?r.add(f):"function"==typeof f?o.add(JSON.stringify(""+f)):s.add(f);const a=new Set,l=new Set,c=new Set,d=new Set;for(const f of t)!0===Array.isArray(f)?a.add(f):"object"==typeof f?l.add(f):"function"==typeof f?d.add(JSON.stringify(""+f)):c.add(f);if(s.size!==c.size)return!1;{let f=!0;for(const p of s)if(!1===c.has(p)){f=!1;break}if(!1===f)return!1;if(r.size===l.size){f=!0;for(const p of r){let m=!1;for(const _ of l)if(!0===this.deepEquals(p,_)){m=!0;break}if(!1===m){f=!1;break}}if(!1===f)return!1;if(n.size===a.size){f=!0;for(const p of n){let m=!1;for(const _ of a)if(!0===this.deepEquals(p,_)){m=!0;break}if(!1===m){f=!1;break}}if(!1===f)return!1;if(o.size===d.size){f=!0;for(const p of o)if(!1===d.has(p)){f=!1;break}return!1!==f}return!1}return!1}return!1}}}if("object"==typeof e&&null!==e){if("object"!=typeof t)return!1;{let n=!0;if(Object.keys(e).length===Object.keys(t).length){for(const[r,s]of Object.entries(e))if(n=this.deepEquals(s,t[r]),!1===n)break}else n=!1;return n}}return!0!==Array.isArray(t)&&("object"!=typeof t||null===t)&&("function"==typeof e?"function"==typeof t&&JSON.stringify(""+e)===JSON.stringify(""+t):JSON.stringify(e)===JSON.stringify(t))}}function xJ(i,e){if(1&i&&(fe(0,"mat-list-option",3),pt(1),be()),2&i){const t=e.$implicit,n=Le();oe("value",t)("selected",n.selectedValue==t),re(1),ds(" ",t," ")}}function wJ(i,e){if(1&i&&(fe(0,"mat-card"),Et(1,"app-editor",4),be()),2&i){const t=Le();re(1),oe("name",t.selectedValue)("resourceData",t.resources[t.selectedValue])}}let FT=(()=>{class i{constructor(t){this.deep=t,this._resources={},this._selectedValue=null}get resources(){return this._resources}set resources(t){const n=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(t));this._resources=t,n&&(this.selectedValue=Object.keys(t).length>0?Object.keys(t)[0]:null)}set selectedValue(t){this._selectedValue=t}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}}return i.\u0275fac=function(t){return new(t||i)(R(yU))},i.\u0275cmp=Ct({type:i,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected"],[3,"name","resourceData"]],template:function(t,n){1&t&&(fe(0,"mat-selection-list",0),ct("selectionChange",function(s){return n.selectedValue=s.source.selectedOptions.selected[0].value}),Ne(1,xJ,2,3,"mat-list-option",1),be(),Ne(2,wJ,2,2,"mat-card",2)),2&t&&(oe("multiple",!1),re(1),oe("ngForOf",n.keys),re(1),oe("ngIf",n.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;overflow-y:auto;width:12rem;max-width:33%;flex-shrink:0}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})(),MJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}get resourcesMap(){const t={};for(let n=0;n<this.resourceData?.value.children?.value.length;n++)t[n.toString()]=this.resourceData?.value.children?.value[n];return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-wwww-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:4,vars:1,consts:[["id","top-bar"],[3,"resources"]],template:function(t,n){1&t&&(fe(0,"div",0)(1,"h1"),pt(2,"Wwww archive"),be()(),Et(3,"app-sidenav-res-list",1)),2&t&&(re(3),oe("resources",n.resourcesMap))},dependencies:[FT],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   app-sidenav-res-list[_ngcontent-%COMP%]{height:calc(100% - 4rem)}"],changeDetection:0}),i})();class NT{constructor(e=!1,t,n=!0,r){this._multiple=e,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new He,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,n=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let bU=(()=>{class i{constructor(){this._listeners=[]}notify(t,n){for(let r of this._listeners)r(t,n)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(n=>t!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const CJ=["trigger"],SJ=["panel"];function EJ(i,e){if(1&i&&(fe(0,"span",8),pt(1),be()),2&i){const t=Le();re(1),Ti(t.placeholder)}}function DJ(i,e){if(1&i&&(fe(0,"span",12),pt(1),be()),2&i){const t=Le(2);re(1),Ti(t.triggerValue)}}function AJ(i,e){1&i&&Yn(0,0,["*ngSwitchCase","true"])}function TJ(i,e){1&i&&(fe(0,"span",9),Ne(1,DJ,2,1,"span",10),Ne(2,AJ,1,0,"ng-content",11),be()),2&i&&(oe("ngSwitch",!!Le().customTrigger),re(2),oe("ngSwitchCase",!0))}function IJ(i,e){if(1&i){const t=Rr();fe(0,"div",13)(1,"div",14,15),ct("@transformPanel.done",function(r){return yn(t),An(Le()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return yn(t),An(Le()._handleKeydown(r))}),Yn(3,1),be()()}if(2&i){const t=Le();oe("@transformPanelWrap",void 0),re(1),hO("mat-select-panel ",t._getPanelTheme(),""),dc("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),oe("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),Qt("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const RJ=[[["mat-select-trigger"]],"*"],PJ=["mat-select-trigger","*"],xU={transformPanelWrap:Ml("transformPanelWrap",[Rs("* => void",nT("@transformPanel",[tT()],{optional:!0}))]),transformPanel:Ml("transformPanel",[fs("void",$n({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),fs("showing",$n({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),fs("showing-multiple",$n({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Rs("void => *",eo("120ms cubic-bezier(0, 0, 0.2, 1)")),Rs("* => void",eo("100ms 25ms linear",$n({opacity:0})))])};let wU=0;const CU=new Se("mat-select-scroll-strategy"),FJ=new Se("MAT_SELECT_CONFIG"),NJ={provide:CU,deps:[Qs],useFactory:function LJ(i){return()=>i.scrollStrategies.reposition()}};class BJ{constructor(e,t){this.source=e,this.value=t}}const UJ=xv(d3(Lw(h3(class{constructor(i,e,t,n,r){this._elementRef=i,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new He}})))),VJ=new Se("MatSelectTrigger");let zJ=(()=>{class i extends UJ{constructor(t,n,r,s,o,a,l,c,d,f,p,m,_,b){super(o,s,l,c,f),this._viewportRuler=t,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=_,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(y,v)=>y===v,this._uid="mat-select-"+wU++,this._triggerAriaLabelledBy=null,this._destroy=new He,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+wU++,this._panelDoneAnimatingStream=new He,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=J_(()=>{const y=this.options;return y?y.changes.pipe(hs(y),Ts(()=>Ms(...y.map(v=>v.onSelectionChange)))):this._ngZone.onStable.pipe(xi(1),Ts(()=>this.optionSelectionChanges))}),this.openedChange=new et,this._openedStream=this.openedChange.pipe(Rn(y=>y),Je(()=>{})),this._closedStream=this.openedChange.pipe(Rn(y=>!y),Je(()=>{})),this.selectionChange=new et,this.valueChange=new et,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(aT.required)??!1}set required(t){this._required=Gn(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Gn(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Gn(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=ha(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new NT(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(ww(),at(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(at(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(hs(null),at(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const n=t.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!da(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const n=this._keyManager,r=t.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||da(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(t),this._multiple&&s&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(xi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new Q7(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(at(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Ms(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(at(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ms(...this.options.map(n=>n._stateChanges)).pipe(at(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,n){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(t){return new(t||i)(R(Rw),R(ri),R(St),R(J1),R(Wt),R(xu,8),R(Rv,8),R(Fp,8),R(AT,8),R(Cl,10),Pa("tabindex"),R(CU),R(H1),R(FJ,8))},i.\u0275dir=Oe({type:i,viewQuery:function(t,n){if(1&t&&(ji(CJ,5),ji(SJ,5),ji(s3,5)),2&t){let r;$t(r=jt())&&(n.trigger=r.first),$t(r=jt())&&(n.panel=r.first),$t(r=jt())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[lt,ii]}),i})(),BT=(()=>{class i extends zJ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,n,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-n+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(xi(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const n=b3(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===n?0:function DX(i,e,t,n){return i<t?i:i+e>t+n?Math.max(0,i-n+e):t}((t+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new BJ(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(t.left+o-(r?s:0)),l=t.right+o-n.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,n,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):n-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(t){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*n,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,n){const r=Math.round(t-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,n,r){const s=Math.round(t-n);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*t,256),o=n*t-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=b3(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),n=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=_i(i)))(n||i)}}(),i.\u0275cmp=Ct({type:i,selectors:[["mat-select"]],contentQueries:function(t,n,r){if(1&t&&(bi(r,VJ,5),bi(r,Nw,5),bi(r,y3,5)),2&t){let s;$t(s=jt())&&(n.customTrigger=s.first),$t(s=jt())&&(n.options=s),$t(s=jt())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,n){1&t&&ct("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&t&&(Qt("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),li("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Fn([{provide:Kw,useExisting:i},{provide:v3,useExisting:i}]),lt],ngContentSelectors:PJ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,n){if(1&t&&(Ys(RJ),fe(0,"div",0,1),ct("click",function(){return n.toggle()}),fe(3,"div",2),Ne(4,EJ,2,1,"span",3),Ne(5,TJ,3,2,"span",4),be(),fe(6,"div",5),Et(7,"div",6),be()(),Ne(8,IJ,4,14,"ng-template",7),ct("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&t){const r=mu(1);Qt("aria-owns",n.panelOpen?n.id+"-panel":null),re(3),oe("ngSwitch",n.empty),Qt("id",n._valueId),re(1),oe("ngSwitchCase",!0),re(1),oe("ngSwitchCase",!1),re(3),oe("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},dependencies:[q_,fp,$x,AF,s3,r3],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[xU.transformPanelWrap,xU.transformPanel]},changeDetection:0}),i})(),SU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[NJ],imports:[Wa,kp,x3,wn,_v,Jw,x3,wn]}),i})();function HJ(i,e){if(1&i&&(fe(0,"mat-option",4),pt(1),be()),2&i){const t=e.$implicit;oe("value",t[1]),re(1),ds(" ",t[1]," ")}}function GJ(i,e){if(1&i){const t=Rr();fe(0,"mat-form-field",1)(1,"mat-label"),pt(2),be(),fe(3,"mat-select",2),ct("valueChange",function(r){return yn(t),An(Le().resourceData.value=r)})("selectionChange",function(){return yn(t),An(Le().changed.emit())}),Ne(4,HJ,2,2,"mat-option",3),be()()}if(2&i){const t=Le();re(2),Ti(t.name),re(1),oe("value",t.resourceData.value),re(1),oe("ngForOf",t.resourceData.block.enum_names)}}let WJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-enum-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&Ne(0,GJ,5,3,"mat-form-field",0),2&t&&oe("ngIf",n.resourceData)},dependencies:[Ha,br,Np,Su,BT,Nw],changeDetection:0}),i})(),$J=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Gn(t)}get inset(){return this._inset}set inset(t){this._inset=Gn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,n){2&t&&(Qt("aria-orientation",n.vertical?"vertical":"horizontal"),li("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),EU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,wn]}),i})();const jJ=["*"],XJ=["text"];function YJ(i,e){if(1&i&&Et(0,"mat-pseudo-checkbox",5),2&i){const t=Le();oe("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}const ZJ=["*",[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]]],KJ=["*","[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]"];let JJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),i})(),QJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),i})();const eQ=xv(class{}),tQ=xv(class{}),nQ={provide:$a,useExisting:Un(()=>lM),multi:!0};class iQ{constructor(e,t){this.source=e,this.options=t}}let UT=(()=>{class i extends tQ{constructor(t,n,r){super(),this._element=t,this._changeDetector=n,this.selectionList=r,this._selected=!1,this._disabled=!1,this._hasFocus=!1,this.selectedChange=new et,this.checkboxPosition="after",this._inputsInitialized=!1}get color(){return this._color||this.selectionList.color}set color(t){this._color=t}get value(){return this._value}set value(t){this.selected&&!this.selectionList.compareWith(t,this.value)&&this._inputsInitialized&&(this.selected=!1),this._value=t}get disabled(){return this._disabled||this.selectionList&&this.selectionList.disabled}set disabled(t){const n=Gn(t);n!==this._disabled&&(this._disabled=n,this._changeDetector.markForCheck())}get selected(){return this.selectionList.selectedOptions.isSelected(this)}set selected(t){const n=Gn(t);n!==this._selected&&(this._setSelected(n),(n||this.selectionList.multiple)&&this.selectionList._reportValueChange())}ngOnInit(){const t=this.selectionList;t._value&&t._value.some(r=>t.compareWith(this._value,r))&&this._setSelected(!0);const n=this._selected;Promise.resolve().then(()=>{(this._selected||n)&&(this.selected=!0,this._changeDetector.markForCheck())}),this._inputsInitialized=!0}ngAfterContentInit(){!function vX(i,e,t="mat"){i.changes.pipe(hs(i)).subscribe(({length:n})=>{wv(e,`${t}-2-line`,!1),wv(e,`${t}-3-line`,!1),wv(e,`${t}-multi-line`,!1),2===n||3===n?wv(e,`${t}-${n}-line`,!0):n>3&&wv(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this.selected&&Promise.resolve().then(()=>{this.selected=!1});const t=this._hasFocus,n=this.selectionList._removeOptionFromList(this);t&&n&&n.focus()}toggle(){this.selected=!this.selected}focus(){this._element.nativeElement.focus()}getLabel(){return this._text&&this._text.nativeElement.textContent||""}_isRippleDisabled(){return this.disabled||this.disableRipple||this.selectionList.disableRipple}_handleClick(){!this.disabled&&(this.selectionList.multiple||!this.selected)&&(this.toggle(),this.selectionList._emitChangeEvent([this]))}_handleFocus(){this.selectionList._setFocusedOption(this),this._hasFocus=!0}_handleBlur(){this.selectionList._onTouched(),this._hasFocus=!1}_getHostElement(){return this._element.nativeElement}_setSelected(t){return t!==this._selected&&(this._selected=t,t?this.selectionList.selectedOptions.select(this):this.selectionList.selectedOptions.deselect(this),this.selectedChange.emit(t),this._changeDetector.markForCheck(),!0)}_markForCheck(){this._changeDetector.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(ri),R(Un(()=>lM)))},i.\u0275cmp=Ct({type:i,selectors:[["mat-list-option"]],contentQueries:function(t,n,r){if(1&t&&(bi(r,JJ,5),bi(r,QJ,5),bi(r,_X,5)),2&t){let s;$t(s=jt())&&(n._avatar=s.first),$t(s=jt())&&(n._icon=s.first),$t(s=jt())&&(n._lines=s)}},viewQuery:function(t,n){if(1&t&&ji(XJ,5),2&t){let r;$t(r=jt())&&(n._text=r.first)}},hostAttrs:["role","option",1,"mat-list-item","mat-list-option","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&ct("focus",function(){return n._handleFocus()})("blur",function(){return n._handleBlur()})("click",function(){return n._handleClick()}),2&t&&(Qt("aria-selected",n.selected)("aria-disabled",n.disabled)("tabindex",-1),li("mat-list-item-disabled",n.disabled)("mat-list-item-with-avatar",n._avatar||n._icon)("mat-primary","primary"===n.color)("mat-accent","primary"!==n.color&&"warn"!==n.color)("mat-warn","warn"===n.color)("mat-list-single-selected-option",n.selected&&!n.selectionList.multiple))},inputs:{disableRipple:"disableRipple",checkboxPosition:"checkboxPosition",color:"color",value:"value",disabled:"disabled",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[lt],ngContentSelectors:KJ,decls:7,vars:5,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[3,"state","disabled",4,"ngIf"],[1,"mat-list-text"],["text",""],[3,"state","disabled"]],template:function(t,n){1&t&&(Ys(ZJ),fe(0,"div",0),Et(1,"div",1),Ne(2,YJ,1,2,"mat-pseudo-checkbox",2),fe(3,"div",3,4),Yn(5),be(),Yn(6,1),be()),2&t&&(li("mat-list-item-content-reverse","after"==n.checkboxPosition),re(1),oe("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()),re(1),oe("ngIf",n.selectionList.multiple))},dependencies:[Mv,_3,br],encapsulation:2,changeDetection:0}),i})(),lM=(()=>{class i extends eQ{constructor(t,n,r){super(),this._element=t,this._changeDetector=n,this._focusMonitor=r,this._multiple=!0,this._contentInitialized=!1,this.selectionChange=new et,this.color="accent",this.compareWith=(s,o)=>s===o,this._disabled=!1,this.selectedOptions=new NT(this._multiple),this._tabIndex=-1,this._onChange=s=>{},this._destroyed=new He,this._onTouched=()=>{}}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._markOptionsForCheck()}get multiple(){return this._multiple}set multiple(t){const n=Gn(t);n!==this._multiple&&(this._multiple=n,this.selectedOptions=new NT(this._multiple,this.selectedOptions.selected))}ngAfterContentInit(){this._contentInitialized=!0,this._keyManager=new F2(this.options).withWrap().withTypeAhead().withHomeAndEnd().skipPredicate(()=>!1).withAllowedModifierKeys(["shiftKey"]),this._value&&this._setOptionsFromValues(this._value),this._keyManager.tabOut.pipe(at(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.options.changes.pipe(hs(null),at(this._destroyed)).subscribe(()=>{this._updateTabIndex()}),this.selectedOptions.changed.pipe(at(this._destroyed)).subscribe(t=>{if(t.added)for(let n of t.added)n.selected=!0;if(t.removed)for(let n of t.removed)n.selected=!1}),this._focusMonitor.monitor(this._element).pipe(at(this._destroyed)).subscribe(t=>{if("keyboard"===t||"program"===t){let n=0;for(let r=0;r<this.options.length;r++)if(this.options.get(r)?.selected){n=r;break}this._keyManager.setActiveItem(n)}})}ngOnChanges(t){const n=t.disableRipple,r=t.color;(n&&!n.firstChange||r&&!r.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._element),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(t){this._element.nativeElement.focus(t)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_setFocusedOption(t){this._keyManager.updateActiveItem(t)}_removeOptionFromList(t){const n=this._getOptionIndex(t);return n>-1&&this._keyManager.activeItemIndex===n&&(n>0?this._keyManager.updateActiveItem(n-1):0===n&&this.options.length>1&&this._keyManager.updateActiveItem(Math.min(n+1,this.options.length-1))),this._keyManager.activeItem}_keydown(t){const n=t.keyCode,r=this._keyManager,s=r.activeItemIndex,o=da(t);switch(n){case 32:case 13:!o&&!r.isTyping()&&(this._toggleFocusedOption(),t.preventDefault());break;default:if(65===n&&this.multiple&&da(t,"ctrlKey")&&!r.isTyping()){const a=this.options.some(l=>!l.disabled&&!l.selected);this._setAllOptionsSelected(a,!0,!0),t.preventDefault()}else r.onKeydown(t)}this.multiple&&(38===n||40===n)&&t.shiftKey&&r.activeItemIndex!==s&&this._toggleFocusedOption()}_reportValueChange(){if(this.options&&!this._isDestroyed){const t=this._getSelectedOptionValues();this._onChange(t),this._value=t}}_emitChangeEvent(t){this.selectionChange.emit(new iQ(this,t))}writeValue(t){this._value=t,this.options&&this._setOptionsFromValues(t||[])}setDisabledState(t){this.disabled=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}_setOptionsFromValues(t){this.options.forEach(n=>n._setSelected(!1)),t.forEach(n=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,n));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(t=>t.selected).map(t=>t.value)}_toggleFocusedOption(){let t=this._keyManager.activeItemIndex;if(null!=t&&this._isValidIndex(t)){let n=this.options.toArray()[t];n&&!n.disabled&&(this._multiple||!n.selected)&&(n.toggle(),this._emitChangeEvent([n]))}}_setAllOptionsSelected(t,n,r){const s=[];return this.options.forEach(o=>{(!n||!o.disabled)&&o._setSelected(t)&&s.push(o)}),s.length&&(this._reportValueChange(),r&&this._emitChangeEvent(s)),s}_isValidIndex(t){return t>=0&&t<this.options.length}_getOptionIndex(t){return this.options.toArray().indexOf(t)}_markOptionsForCheck(){this.options&&this.options.forEach(t=>t._markForCheck())}_allowFocusEscape(){this._tabIndex=-1,setTimeout(()=>{this._tabIndex=0,this._changeDetector.markForCheck()})}_updateTabIndex(){this._tabIndex=0===this.options.length?-1:0}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(ri),R(xc))},i.\u0275cmp=Ct({type:i,selectors:[["mat-selection-list"]],contentQueries:function(t,n,r){if(1&t&&bi(r,UT,5),2&t){let s;$t(s=jt())&&(n.options=s)}},hostAttrs:["role","listbox",1,"mat-selection-list","mat-list-base"],hostVars:3,hostBindings:function(t,n){1&t&&ct("keydown",function(s){return n._keydown(s)}),2&t&&Qt("aria-multiselectable",n.multiple)("aria-disabled",n.disabled.toString())("tabindex",n._tabIndex)},inputs:{disableRipple:"disableRipple",color:"color",compareWith:"compareWith",disabled:"disabled",multiple:"multiple"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[Fn([nQ]),lt,ii],ngContentSelectors:jJ,decls:1,vars:0,template:function(t,n){1&t&&(Ys(),Yn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),i})(),rQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[f3,Fw,wn,eT,Wa,f3,wn,eT,EU]}),i})();function sQ(i,e){if(1&i&&(fe(0,"mat-list-option",3),pt(1),be()),2&i){const t=e.$implicit,n=Le(2);oe("value",t.key)("selected",n.resourceData.value[t.key]),re(1),ds(" ",t.key," ")}}function oQ(i,e){if(1&i){const t=Rr();sa(0),fe(1,"mat-label"),pt(2),be(),fe(3,"mat-selection-list",1),ct("selectionChange",function(r){return yn(t),An(Le().onSelection(r))}),Ne(4,sQ,2,3,"mat-list-option",2),Vi(5,"keyvalue"),be(),oa()}if(2&i){const t=Le();re(2),Ti(t.name),re(2),oe("ngForOf",sr(5,2,t.resourceData.value))}}let aQ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}onSelection(t){for(const n of t.options)this.resourceData.value[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Ct({type:i,selectors:[["app-flags-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,n){1&t&&Ne(0,oQ,6,4,"ng-container",0),2&t&&oe("ngIf",n.resourceData)},dependencies:[Ha,br,Su,lM,UT,RF],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0}),i})();var Mc=(()=>{return(i=Mc||(Mc={}))[i.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",i[i.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",i[i.OBJECTS_BINDING=400]="OBJECTS_BINDING",i[i.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",i[i.CONTROLLERS=800]="CONTROLLERS",i[i.RENDERING=1e3]="RENDERING",i[i.POST_RENDERING=1200]="POST_RENDERING",Mc;var i})();let Uv=(()=>{class i{constructor(){this.tick$=new He,this._world=null,this._name="0x"+(i.default_name_counter++).toString(16),this._active=!0,this._children=[],this._onSpawned$=new He,this._onRemoved$=new He}get world(){return this._world}get name(){return this._name}set name(t){this._name=t}get active(){return this._active}set active(t){this._active=t}addChildren(...t){if(this._children.push(...t),this._world)for(const n of t)this._world.addEntity(n)}removeChildren(t,n=!1){if(this._children=this._children.filter(r=>!t.includes(r)),this._world)for(const r of t)this._world.removeEntity(r,n)}onSpawned(t){this._world=t;for(const n of this._children)t.addEntity(n);this._onSpawned$.next()}onRemoved(){const t=this._world;this._world=null;for(const n of this._children)t.removeEntity(n);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const t of this._children)t.dispose()}}return i.default_name_counter=0,i})();const lQ={transparent:!1,background:0,size:"fullscreen",antialias:!0};class cQ extends Uv{constructor(e,t={}){super(),this.canvas=e,this.tickOrder=Mc.RENDERING,this._rendererSize$=new Nn(null),this.rendererOptions=Object.assign(Object.assign({},lQ),t||{}),this.tick$.subscribe(()=>{this.render()})}get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}onSpawned(e){super.onSpawned(e),this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||this.rendererOptions.size instanceof Function?(this.canvas&&(this.canvas.style.position="absolute"),Ms(fa(window,"resize").pipe(q1(100)),fa(window,"orientationchange")).pipe(at(this._onRemoved$),Je(()=>({x:window.innerWidth,y:window.innerHeight})),hs({x:window.innerWidth,y:window.innerHeight})).subscribe(t=>{this._rendererSize$.next(this.rendererOptions.size instanceof Function?this.rendererOptions.size(t):t)})):this.rendererOptions.size instanceof vn||void 0!==!!this.rendererOptions.subscribe&&void 0!==!!this.rendererOptions.pipe?this.rendererOptions.size.pipe(at(this._onRemoved$)).subscribe(t=>{this._rendererSize$.next(t)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(at(this._onRemoved$),ww((t,n)=>t?.x==n?.x&&t?.y==n?.y)).subscribe(t=>{t&&this.resizeRenderer(t)})}dispose(){super.dispose(),this._rendererSize$.complete()}}var VT=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class zT{constructor(){this._running=!1,this.stop$=new He}get running(){return this._running}start(...e){return VT(this,void 0,void 0,function*(){this.running||(yield this.startInternal(...e),this._running=!0)})}stop(...e){return VT(this,void 0,void 0,function*(){!this.running||(this.stop$.next(),yield this.stopInternal(...e),this._running=!1)})}stopInternal(...e){return VT(this,void 0,void 0,function*(){})}}class dQ extends zT{constructor(e,t){super(),this.keyboard=e,this.keymap=t,this._output$=new He}get output$(){return this._output$.asObservable()}startInternal(){return i=this,e=void 0,n=function*(){const e=[[],[],[],[]];this.keymap.includes("wasd")&&(e[0].push("KeyW"),e[1].push("KeyA"),e[2].push("KeyS"),e[3].push("KeyD")),this.keymap.includes("arrows")&&(e[0].push("ArrowUp"),e[1].push("ArrowLeft"),e[2].push("ArrowDown"),e[3].push("ArrowRight")),mp(e.map(t=>this.keyboard.bindMany(...t))).pipe(at(this.stop$),Je(t=>{const n={};if(t.includes(!0)){const[r,s,o,a]=t;r!=o&&(n.upDown=r),s!=a&&(n.leftRight=s)}return n})).subscribe(this._output$)},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}}const HT=new vn(Jr);var DU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class hQ extends zT{constructor(){super(),this.bindings={},this.handleKeys=this.handleKeys.bind(this)}startInternal(){return DU(this,void 0,void 0,function*(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys)})}stopInternal(){return DU(this,void 0,void 0,function*(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys)})}bind(e){this.bindings[e]||(this.bindings[e]=[]);const t=new Nn(!1);return this.bindings[e].push(t),t.pipe(Ld(()=>{this.bindings[e].splice(this.bindings[e].indexOf(t),1),t.complete()}))}bindMany(...e){if(0==e.length)return console.warn("[KeyboardController] bindMany called without any key code"),HT;if(1==e.length)return this.bind(e[0]);const t=[];for(const n of e){this.bindings[n]||(this.bindings[n]=[]);const r=new Nn(!1);this.bindings[n].push(r),t.push(r)}return mp(t).pipe(Ld(()=>{for(let n=0;n<e.length;n++)this.bindings[e[n]].splice(this.bindings[e[n]].indexOf(t[n]),1),t[n].complete()}),Je(n=>n.includes(!0)))}emulateKeyDown(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!0)}emulateKeyUp(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!1)}emulateKeyPress(e){this.emulateKeyDown(e),this.emulateKeyUp(e)}handleKeys(e){if("keydown"!=e.type&&"keyup"!=e.type)return;const t="keydown"==e.type;for(const n of this.bindings[e.code]||[])n.next(t)}}class To{static clone(e){return{x:e.x,y:e.y}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y}}static lenSq(e){return e.x*e.x+e.y*e.y}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static dist(e,t){return To.len(To.sub(e,t))}static norm(e){const t=Math.sqrt(e.x**2+e.y**2);return{x:e.x/t,y:e.y/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t}}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}static angle(e,t){const n=e.x*t.x+e.y*t.y,r=Math.sqrt(e.x**2+e.y**2)*Math.sqrt(t.x**2+t.y**2);return Math.acos(n/r)}}var AU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const pQ={pointerLock:!1};var ms=(()=>{return(i=ms||(ms={}))[i.NONE=0]="NONE",i[i.DRAG=1]="DRAG",i[i.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",i[i.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",i[i.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",ms;var i})();class Vp extends zT{constructor(e={}){super(),this._delta$=new He,this._position$=new Nn({x:0,y:0}),this._multiTouchPositions$=new Nn([]),this._wheel$=new He,this.stopped$=new He,this._state$=new Nn(ms.NONE),this.options=Object.assign(Object.assign({},pQ),e),this.canvasClickListener=this.canvasClickListener.bind(this)}static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$.asObservable()}get isPointerLocked(){return!!document.pointerLockElement}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(Ts(e=>e==ms.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:HT),Je(e=>e.map(t=>({x:t.x,y:t.y}))),function fQ(){return Pn((i,e)=>{let t,n=!1;i.subscribe(Dn(e,r=>{const s=t;t=r,n&&e.next([s,r]),n=!0}))})}(),Rn(([e,t])=>e.length>1&&t.length>1),Je(([e,t])=>({centerPointDelta:To.sub(To.scalarMult(t.reduce((n,r)=>To.add(n,r),{x:0,y:0}),1/t.length),To.scalarMult(e.reduce((n,r)=>To.add(n,r),{x:0,y:0}),1/t.length)),angleDelta:To.angle(t[1],t[0])-To.angle(e[1],e[0]),distanceDelta:To.dist(t[1],t[0])-To.dist(e[1],e[0])})))}get _element(){return this.options.canvas||window}startInternal(){return AU(this,void 0,void 0,function*(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(ms.NONE);const e=[ms.DRAG,ms.DRAG_MIDDLE_BUTTON,ms.DRAG_RIGHT_BUTTON],t=[ms.NONE,ms.DRAG,ms.DRAG_TOUCH_TWO_FINGERS],n=[],r={};fa(this._element,"mousemove").pipe(at(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),fa(this._element,"pointermove").pipe(at(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!Vp.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<n.length;a++)if(n[a].pointerId==o.pointerId){n.splice(a,1);break}0===n.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),this._element.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(t[Math.min(n.length,2)])};fa(this._element,"pointerdown").pipe(at(this.stopped$)).subscribe(o=>{0===n.length&&(this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),this._element.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)),n.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(t[Math.min(n.length,2)])):this._state$.next(e[o.button]||ms.NONE)}),fa(this._element,"contextmenu").pipe(at(this.stopped$)).subscribe(o=>{o.preventDefault()}),fa(this._element,"wheel",{passive:!1}).pipe(at(this.stopped$)).subscribe(o=>{o.preventDefault(),this._wheel$.next(o.deltaY)})})}stopInternal(e=!0){return AU(this,void 0,void 0,function*(){this.stopped$.next(),e&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())})}canvasClickListener(){this.options.canvas.requestPointerLock()}}class Io{static clone(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}static add(e,t){const n=e.w+t.w,r=e.x+t.x,s=e.y+t.y,o=e.z+t.z,a=Math.sqrt(n*n+r*r+s*s+o*o);return{w:n/a,x:r/a,y:s/a,z:o/a}}static mult(e,t){return{w:e.w*t.w-e.x*t.x-e.y*t.y-e.z*t.z,x:e.w*t.x+e.x*t.w+e.y*t.z-e.z*t.y,y:e.w*t.y-e.x*t.z+e.y*t.w+e.z*t.x,z:e.w*t.z+e.x*t.y-e.y*t.x+e.z*t.w}}static combineRotations(...e){let t={w:1,x:0,y:0,z:0};for(const n of e)t=this.mult(t,n);return t}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),z:e.z+n*(t.z-e.z),w:e.w+n*(t.w-e.w)}}static slerp(e,t,n){let s=Math.acos(e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w),o=Math.sin(s),a=e.x*Math.sin((1-n)*s)/o+t.x*Math.sin(n*s)/o,l=e.y*Math.sin((1-n)*s)/o+t.y*Math.sin(n*s)/o,c=e.z*Math.sin((1-n)*s)/o+t.z*Math.sin(n*s)/o,d=e.w*Math.sin((1-n)*s)/o+t.w*Math.sin(n*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(d)?Io.clone(e):{x:a,y:l,z:c,w:d}}static fromAngle(e,t){const n=t/2,r=Math.sin(n);return Object.assign(Object.assign({},zt.scalarMult(e,r)),{w:Math.cos(n)})}static fromMatrix4(e){const t=e[0],n=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],d=e[10],f=t+o+d;if(f>0){const p=.5/Math.sqrt(f+1);return{x:(c-a)*p,y:(r-l)*p,z:(s-n)*p,w:.25/p}}if(t>o&&t>d){const p=2*Math.sqrt(1+t-o-d);return{x:.25*p,y:(n+s)/p,z:(r+l)/p,w:(c-a)/p}}if(o>d){const p=2*Math.sqrt(1+o-t-d);return{x:(n+s)/p,y:.25*p,z:(a+c)/p,w:(r-l)/p}}{const p=2*Math.sqrt(1+d-t-o);return{x:(r+l)/p,y:(a+c)/p,z:.25*p,w:(s-n)/p}}}static fromEuler(e){const t=e.x,n=e.y,r=e.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*n),l=Math.sin(.5*n),c=Math.cos(.5*t),d=Math.sin(.5*t);return{w:c*a*s+d*l*o,x:d*a*s-c*l*o,y:c*l*s+d*a*o,z:c*a*o-d*l*s}}static toEuler(e){const t=e.w,n=e.x,r=e.y,s=e.z,c=2*(t*r-s*n);return{x:Math.atan2(2*(t*n+r*s),1-2*(n*n+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(t*s+n*r),1-2*(r*r+s*s))}}static lookAt(e,t,n){return this.fromMatrix4(class mQ{static lookAt(e,t,n){let r=zt.sub(e,t);r=0===zt.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):zt.norm(r);let s=zt.cross(n,r);0===zt.lenSq(s)&&(r=1===Math.abs(n.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=zt.norm(r),s=zt.cross(n,r)),s=zt.norm(s);let o=zt.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}.lookAt(e,t,n))}static rotAround(e,t,n){const r=Math.sin(n/2),s={w:Math.cos(n/2),x:t.x*r,y:t.y*r,z:t.z*r};return this.mult(s,e)}}class zt{static clone(e){return{x:e.x,y:e.y,z:e.z}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}}static lenSq(e){return e.x*e.x+e.y*e.y+e.z*e.z}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}static dist(e,t){return zt.len(zt.sub(e,t))}static cross(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return{x:r*l-s*a,y:s*o-n*l,z:n*a-r*o}}static norm(e){const t=Math.sqrt(e.x**2+e.y**2+e.z**2);return 0===t?e:{x:e.x/t,y:e.y/t,z:e.z/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),z:e.z+n*(t.z-e.z)}}static angle(e,t){const n=e.x*t.x+e.y*t.y+e.z*t.z,r=Math.sqrt(e.x**2+e.y**2+e.z**2)*Math.sqrt(t.x**2+t.y**2+t.z**2);return Math.acos(n/r)}static rot(e,t){const{x:n,y:r,z:s}=e;return{x:t.w*t.w*n+2*t.y*t.w*s-2*t.z*t.w*r+t.x*t.x*n+2*t.y*t.x*r+2*t.z*t.x*s-t.y*t.y*n-t.z*t.z*n,y:2*t.x*t.y*n+t.y*t.y*r+2*t.z*t.y*s+2*t.w*t.z*n-t.z*t.z*r+t.w*t.w*r-2*t.x*t.w*s-t.x*t.x*r,z:2*t.x*t.z*n+2*t.y*t.z*r+t.z*t.z*s-2*t.w*t.y*n-t.y*t.y*s+2*t.w*t.x*r-t.x*t.x*s+t.w*t.w*s}}static rotAround(e,t,n){return this.rot(e,Io.fromAngle(t,n))}static toSpherical(e){const t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return{radius:t,theta:0==t?0:Math.atan2(e.y,e.x),phi:0==t?0:Math.atan2(Math.sqrt(e.x*e.x+e.y*e.y),e.z)}}static fromSpherical(e){return{x:e.radius*Math.sin(e.phi)*Math.cos(e.theta),y:e.radius*Math.sin(e.phi)*Math.sin(e.theta),z:e.radius*Math.cos(e.phi)}}}class pa{constructor(){this.worlds=[],this.selectedWorld=null,window.gg=this}static get instance(){return pa._instance||(pa._instance=new pa),pa._instance}console(e){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){if(!this.selectedWorld)return"World not selected";const t=e.split("\n");let n=[];for(const r of t){const s=r.split(" ");n.push(yield this.selectedWorld.runConsoleCommand(s.splice(0,1)[0],s))}return n.join("\n")})}}class Vv{constructor(){this.output="\n                  \u2584\u2588\u2588\u2588\u2588   \u2584\u2588\u2588\u2588\u2588     \u2588     \u2588\u2591\u2593\u2588\u2588\u2588\u2588\u2588  \u2584\u2584\u2584\u2584   \n                 \u2588\u2588\u2592 \u2580\u2588\u2592 \u2588\u2588\u2592 \u2580\u2588\u2592   \u2593\u2588\u2591 \u2588 \u2591\u2588\u2591\u2593\u2588   \u2580 \u2593\u2588\u2588\u2588\u2588\u2588\u2584 \n                \u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591\u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591   \u2592\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2588\u2588\u2588   \u2592\u2588\u2588\u2592 \u2584\u2588\u2588\n                \u2591\u2593\u2588  \u2588\u2588\u2593\u2591\u2593\u2588  \u2588\u2588\u2593   \u2591\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2593\u2588  \u2584 \u2592\u2588\u2588\u2591\u2588\u2580  \n                \u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592   \u2591\u2591\u2588\u2588\u2592\u2588\u2588\u2593 \u2591\u2592\u2588\u2588\u2588\u2588\u2592\u2591\u2593\u2588  \u2580\u2588\u2593\n                 \u2591\u2592   \u2592  \u2591\u2592   \u2592    \u2591 \u2593\u2591\u2592 \u2592  \u2591\u2591 \u2592\u2591 \u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\n                  \u2591   \u2591   \u2591   \u2591      \u2592 \u2591 \u2591   \u2591 \u2591  \u2591\u2592\u2591\u2592   \u2591 \n                \u2591 \u2591   \u2591 \u2591 \u2591   \u2591      \u2591   \u2591     \u2591    \u2591    \u2591 \n                      \u2591       \u2591        \u2591       \u2591  \u2591 \u2591      \n                                                         \u2591 \n             >>> https://github.com/AndyGura/gg-web-engine <<<\nWelcome to GG web engine UI console. \nEnter command in input below.\n\nList of available commands: commandslist \n",this.commandHistory=[],this.currentCommandIndex=0,this.elements=null}static get instance(){return this._instance||(this._instance=new Vv),this._instance}get isUIShown(){return!!this.elements}createUI(){if(this.elements)return;const e=document.createElement("div");e.innerHTML='\n  <div id="gg-console-header" style="padding: 10px; cursor: move; z-index: 10; background-color: #054a81; border: 1px solid white; font-size: large;">GG web engine UI console</div>\n  <textarea id="gg-console-output" disabled style="resize: none; flex-grow: 1; background: #555555; border: 1px solid white; color: white; font-family: monospace;" ></textarea>\n  <input id="gg-console-input" style="background: #555555; border: 1px solid white; color: white; font-family: monospace;"/>',e.style.position="absolute",e.style.zIndex="1000",e.style.backgroundColor="#222222",e.style.border="1px solid white",e.style.width="640px",e.style.height="480px",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="stretch",e.style.padding="3px",e.style.rowGap="3px",e.style.fontFamily="monospace",e.style.color="white",document.body.append(e),this.elements={main:e,input:document.getElementById("gg-console-input"),output:document.getElementById("gg-console-output")},this.elements.input.onkeydown=t=>{13===t?.keyCode?(t.preventDefault(),this.onInput().then()):38===t?.keyCode?(t.preventDefault(),this.onUsePreviousCommand()):40===t?.keyCode&&(t.preventDefault(),this.onUseNextCommand())},this.stdout(),this.setupDragging(),setTimeout(()=>this.elements.input.focus(),20)}destroyUI(){!this.elements||(document.body.removeChild(this.elements.main),this.elements=null)}onUsePreviousCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex--,this.currentCommandIndex<0&&(this.currentCommandIndex+=this.commandHistory.length),this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onUseNextCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex++,this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onInput(){return i=this,e=void 0,n=function*(){const e=this.elements.input.value;this.elements.input.value="",this.stdout("\n> "+e),this.stdout("\n"+(yield pa.instance.console(e))),this.commandHistory.push(e),this.currentCommandIndex=this.commandHistory.length},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}stdout(e=""){this.output+=e,this.elements.output.value=this.output,this.elements.output.scrollTop=this.elements.output.scrollHeight}setupDragging(){let e=0,t=0;const r=o=>{o.preventDefault();const a=e-o.clientX,l=t-o.clientY;e=o.clientX,t=o.clientY,this.elements.main.style.left=this.elements.main.offsetLeft-a+"px",this.elements.main.style.top=this.elements.main.offsetTop-l+"px"},s=()=>{document.onmouseup=null,document.onmousemove=null};document.getElementById("gg-console-header").onmousedown=o=>{(o=o||window.event).preventDefault(),e=o.clientX,t=o.clientY,document.onmouseup=s,document.onmousemove=r}}}class vQ extends Uv{constructor(e){super(),this.tickOrder=e}}function TU(i,e=Mc.CONTROLLERS){const t=new vQ(e);return i.addEntity(t),t.tick$.pipe(Ld(()=>{i.removeEntity(t)}))}var yQ=Or(738),bQ=Or.n(yQ);class Xd{constructor(){this.ui=null,this.removed$=new He}static get instance(){return this._instance||(this._instance=new Xd),this._instance}get isUIShown(){return!!this.ui}createUI(){var e;const t=new(bQ());t.dom.style.left="unset",t.dom.style.right="0",t.showPanel(0),document.body.appendChild(t.dom),TU(pa.instance.selectedWorld,-1).pipe(at(this.removed$)).subscribe(()=>{t?.begin()}),TU(pa.instance.selectedWorld,1e4).pipe(at(this.removed$)).subscribe(()=>{t?.end()});const n=document.createElement("div");n.style.cssText="position:fixed;top:48px;right:0;opacity:0.9;z-index:9999;background-color:#333;color:white",n.innerHTML=`<input type="checkbox" name="checkbox" id="physics_debugger_checkbox_id" value="1"${null!==(e=pa.instance.selectedWorld)&&void 0!==e&&e.physicsWorld.physicsDebugViewActive?" checked":""}>\n                                 <label for="physics_debugger_checkbox_id" style="user-select: none;">Show physics bodies in scene</label>`,document.body.appendChild(n),fa(document.getElementById("physics_debugger_checkbox_id"),"change").pipe(at(this.removed$)).subscribe(r=>{pa.instance.console("dr_drawphysics "+r.target.checked).then()}),this.ui={stats:t,customContainer:n}}destroyUI(){this.ui&&(document.body.removeChild(this.ui.stats.dom),document.body.removeChild(this.ui.customContainer),this.ui.stats.end(),this.ui=null),this.removed$.next()}}class GT{constructor(e=!1,t=Yd.instance){this.parentClock=t,this.tickSub=null,this._tick$=new He,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,e&&this.start()}get tick$(){return this._tick$.pipe(Je(([e,t])=>[t,t-e]))}get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get elapsedTime(){return this.isPaused?this.pausedAt-this.startedAt:this.parentClock.elapsedTime-this.startedAt}createChildClock(e){return new GT(e,this)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks())}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(Je(([e,t])=>[this.oldRelativeTime,e-this.startedAt]),zi(([e,t])=>this.oldRelativeTime=t)).subscribe(this._tick$)}stopListeningTicks(){var e;null===(e=this.tickSub)||void 0===e||e.unsubscribe(),this.tickSub=null}}class Yd{constructor(){this._tick$=new He;let e=this.elapsedTime;tt(void 0,$2).pipe(function xQ(i){let t,e=1/0;return null!=i&&("object"==typeof i?({count:e=1/0,delay:t}=i):e=i),e<=0?()=>Bs:Pn((n,r)=>{let o,s=0;const a=()=>{if(o?.unsubscribe(),o=null,null!=t){const c="number"==typeof t?j1(t):pr(t(s)),d=Dn(r,()=>{d.unsubscribe(),l()});c.subscribe(d)}else l()},l=()=>{let c=!1;o=n.subscribe(Dn(r,void 0,()=>{++s<e?o?a():c=!0:r.complete()})),c&&a()};l()})}()).pipe(Je(()=>[e,this.elapsedTime]),zi(([t,n])=>e=n)).subscribe(this._tick$)}static get instance(){return Yd._instance||(Yd._instance=new Yd),Yd._instance}get tick$(){return this._tick$.pipe(Je(([e,t])=>[t,t-e]))}get elapsedTime(){return(typeof performance>"u"?Date:performance).now()}createChildClock(e){return new GT(e,this)}}var zp=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class CQ extends Uv{constructor(){super(),this._position$=new Nn(this.getDefaultPosition()),this._rotation$=new Nn(this.getDefaultRotation()),this._scale$=new Nn(this.getDefaultScale())}get world(){return super.world}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}set position(e){this._position$.next(e)}get rotation(){return this._rotation$.getValue()}get rotation$(){return this._rotation$.asObservable()}set rotation(e){this._rotation$.next(e)}get scale(){return this._scale$.getValue()}get scale$(){return this._scale$.asObservable()}set scale(e){this._scale$.next(e)}onSpawned(e){super.onSpawned(e)}}class SQ extends CQ{getDefaultPosition(){return{x:0,y:0,z:0}}getDefaultRotation(){return{x:0,y:0,z:0,w:1}}getDefaultScale(){return{x:1,y:1,z:1}}get euler$(){return this._rotation$.pipe(Je(e=>Io.toEuler(e)))}get euler(){return Io.toEuler(this._rotation$.getValue())}set euler(e){this._rotation$.next(Io.fromEuler(e))}}class Zd extends SQ{constructor(e,t=null){if(super(),this.object3D=e,this.objectBody=t,this.tickOrder=Mc.OBJECTS_BINDING,t)t.entity=this,this.tick$.subscribe(()=>{this.runTransformBinding(t,e)}),this.runTransformBinding(t,e),this.name=t.name;else{if(!e)throw new Error("Cannot create entity without a mesh and a body");super.position=e.position,super.rotation=e.rotation,super.scale=e.scale,this.name=e.name}}get position(){return super.position}set position(e){this.object3D&&(this.object3D.position=e),this.objectBody&&(this.objectBody.position=e),super.position=e}get rotation(){return super.rotation}set rotation(e){this.object3D&&(this.object3D.rotation=e),this.objectBody&&(this.objectBody.rotation=e),super.rotation=e}get scale(){return super.scale}set scale(e){this.object3D&&(this.object3D.scale=e),this.objectBody&&(this.objectBody.scale=e),super.scale=e}get visible(){var e;return!(null===(e=this.object3D)||void 0===e||!e.visible)}set visible(e){this.object3D&&(this.object3D.visible=e);for(const t of this._children)t instanceof Zd&&(t.visible=e)}runTransformBinding(e,t){const n=e.position,r=e.rotation;t&&(t.position=n,t.rotation=r),this._position$.next(n),this._rotation$.next(r)}onSpawned(e){var t,n;super.onSpawned(e),null===(t=this.object3D)||void 0===t||t.addToWorld(e.visualScene),null===(n=this.objectBody)||void 0===n||n.addToWorld(e.physicsWorld)}onRemoved(){var e,t;null===(e=this.object3D)||void 0===e||e.removeFromWorld(this.world.visualScene),null===(t=this.objectBody)||void 0===t||t.removeFromWorld(this.world.physicsWorld),super.onRemoved()}dispose(){super.dispose(),this.object3D&&this.object3D.dispose(),this.objectBody&&this.objectBody.dispose()}}class EQ extends Zd{constructor(e,t=null){super(e,t),this.object3D=e,this.objectBody=t}get fov(){return this.object3D.fov}set fov(e){this.object3D.fov=e}}var RU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class IQ extends Uv{constructor(e,t,n={keymap:"wasd",movementOptions:{speed:.5},mouseOptions:{}}){super(),this.keyboard=e,this.camera=t,this.options=n,this.tickOrder=Mc.INPUT_CONTROLLERS,this.mouseInput=new Vp(n.mouseOptions),this.directionsInput=new dQ(e,n.keymap)}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return RU(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e);let n={direction:{},rest:[]};const r=["KeyE","KeyQ"];this.camera.object3D.supportsFov&&r.push("KeyZ","KeyC"),this.directionsInput.output$.pipe(at(this._onRemoved$)).subscribe(a=>{n.direction=a}),mp(r.map(a=>this.keyboard.bind(a))).pipe(at(this._onRemoved$)).subscribe(a=>{n.rest=a});let s={x:0,y:0},o=Vp.isTouchDevice();this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>o||this.mouseInput.isPointerLocked)).subscribe(a=>{s=To.add(s,a)}),this.camera.tick$.pipe(at(this._onRemoved$)).subscribe(()=>{let a={x:0,y:0,z:0};const[l,c,d,f]=n.rest;if(void 0!==n.direction.upDown&&(a.z=n.direction.upDown?-1:1),void 0!==n.direction.leftRight&&(a.x=n.direction.leftRight?-1:1),l!=c&&(a.y=c?-1:1),d!=f&&(this.camera.object3D.fov+=d?1:-1),this.camera.position=zt.add(this.camera.position,zt.rot(zt.scalarMult(zt.norm(a),this.options.movementOptions.speed),this.camera.rotation)),0!=s.x||0!=s.y){const p=zt.toSpherical(zt.rot({x:0,y:0,z:-1},this.camera.rotation));p.theta-=s.x/300,p.phi+=s.y/300,p.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,p.phi)),this.camera.rotation=Io.lookAt(this.camera.position,zt.add(this.camera.position,zt.fromSpherical(p)),{x:0,y:0,z:1}),s={x:0,y:0}}}),yield this.mouseInput.start(),yield this.directionsInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return RU(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var PU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const RQ={mouseOptions:{},target:{x:0,y:0,z:0},orbiting:{sensitivityX:1,sensitivityY:1},zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class kU extends Uv{constructor(e,t={}){super(),this.camera=e,this.tickOrder=Mc.INPUT_CONTROLLERS,this.spherical={phi:0,radius:0,theta:0},this.options=Object.assign(Object.assign({},RQ),t),this.mouseInput=new Vp(this.options.mouseOptions)}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return PU(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e),this.spherical=zt.toSpherical(zt.sub(this.camera.position,this.options.target)),this.options.orbiting&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>this.mouseInput.state==ms.DRAG)).subscribe(r=>{this.spherical.theta-=r.x*this.options.orbiting.sensitivityX*Math.PI/900,this.spherical.phi-=r.y*this.options.orbiting.sensitivityY*Math.PI/900,this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.spherical.phi))}),this.options.zooming&&this.mouseInput.wheel$.pipe(at(this._onRemoved$)).subscribe(r=>{0!=r&&(this.spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const n=r=>{const s=zt.fromSpherical(this.spherical),o=zt.rotAround(s,{x:-Math.sin(this.spherical.theta),y:Math.cos(this.spherical.theta),z:0},Math.PI/2),a=zt.rotAround(s,zt.norm(o),Math.PI/2);this.options.target=zt.add(this.options.target,zt.add(zt.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),zt.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>this.mouseInput.state==ms.DRAG_RIGHT_BUTTON)).subscribe(r=>{n(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Rn(()=>this.mouseInput.state==ms.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this.spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),Vp.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(at(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this.spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&n(r.centerPointDelta)}),this.camera.tick$.pipe(at(this._onRemoved$),Je(()=>this.spherical)).subscribe(r=>{this.camera.position=zt.add(this.options.target,zt.fromSpherical(r)),this.camera.rotation=Io.lookAt(this.camera.position,this.options.target,{x:0,y:0,z:1})}),yield this.mouseInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return PU(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class kQ extends cQ{onSpawned(e){super.onSpawned(e),e.addEntity(this.camera)}onRemoved(){var e;super.onRemoved(),null===(e=this.world)||void 0===e||e.removeEntity(this.camera)}}var jT=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Tu=(()=>{return(i=Tu||(Tu={}))[i.Nothing=0]="Nothing",i[i.Files=1]="Files",i[i.Entities=2]="Entities",Tu;var i})();const OU={cachingStrategy:Tu.Nothing,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:1},loadProps:!0},LU=i=>({meta:i.meta,resources:i.resources.map(({object3D:e,body:t})=>({object3D:e&&e.clone(),body:t&&t.clone()}))});class LQ{constructor(e){this.world=e,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(e,t=!1){return jT(this,void 0,void 0,function*(){if(t&&this.filesCache.has(e))return this.filesCache.get(e);const n=Promise.all([fetch(`${e}.glb`).then(s=>s.arrayBuffer()),fetch(`${e}.meta`).then(s=>s.text()).then(s=>JSON.parse(s))]);t&&this.filesCache.set(e,n);const r=yield n;return t&&this.filesCache.set(e,r),r})}loadGgGlbResources(e,t=Tu.Nothing){return jT(this,void 0,void 0,function*(){if(t==Tu.Entities&&this.loadResultCache.has(e)){const l=this.loadResultCache.get(e),c=l instanceof Promise?yield l:l;return LU(c)}const[n,r]=yield this.loadGgGlbFiles(e,t==Tu.Files);if(!n)throw new Error("GLB not found");const[s,o]=yield Promise.all([this.world.visualScene.loader.loadFromGgGlb(n,r),this.world.physicsWorld.loader.loadFromGgGlb(n,r)]),a={resources:[],meta:r};if(!s)return a;if(0==o.length)a.resources.push({object3D:s,body:null});else if(1==o.length)a.resources.push({object3D:s,body:o[0]});else{for(const l of o)a.resources.push({object3D:s.popChild(l.name),body:l});s.isEmpty()||a.resources.push({object3D:s,body:null})}return t==Tu.Entities&&this.loadResultCache.set(e,LU(a)),a})}loadGgGlb(e,t=OU){return jT(this,void 0,void 0,function*(){const n=Object.assign(Object.assign({},OU),t),{resources:r,meta:s}=yield this.loadGgGlbResources(e,n.cachingStrategy),o={entities:r.map(({object3D:a,body:l})=>new Zd(a,l)),meta:s};return n.loadProps&&(o.props=yield Promise.all(s.dummies.filter(a=>a.is_prop||a.is_scene).map(a=>this.loadGgGlb(a.is_prop?(n.propsPath||e.substring(0,e.lastIndexOf("/")+1))+a.prop_id:a.scene_id,{loadProps:!!a.is_scene,position:zt.add(zt.rot(a.position,n.rotation),n.position),rotation:Io.combineRotations(a.rotation,n.rotation)})))),o.entities.forEach(a=>{a.position=zt.add(zt.rot(zt.clone(a.position),n.rotation),n.position),a.rotation=Io.mult(Io.clone(a.rotation),n.rotation)}),o})}}class FU extends class wQ{constructor(e,t,n=!1){this.visualScene=e,this.physicsWorld=t,this.consoleEnabled=n,this.worldClock=Yd.instance.createChildClock(!1),this.keyboardInput=new hQ,this.children=[],this.tickListeners=[],this.commands={},pa.instance.worlds.push(this),pa.instance.selectedWorld=this,this.keyboardInput.start().then(),n&&(this.keyboardInput.bind("Backquote").pipe(Rn(r=>r)).subscribe(()=>{Vv.instance.isUIShown?Vv.instance.destroyUI():Vv.instance.createUI()}),this.registerConsoleCommand("commandslist",()=>zp(this,void 0,void 0,function*(){return Object.entries(this.commands).map(([r,s])=>`${r}${s.doc?"\t// "+s.doc:""}`).sort().join("\n\n")}),"no args; print all available commands"),this.registerConsoleCommand("debugger",(...r)=>zp(this,void 0,void 0,function*(){return["1","true","+"].includes(r[0])!=Xd.instance.isUIShown&&(Xd.instance.isUIShown?Xd.instance.destroyUI():Xd.instance.createUI()),""+Xd.instance.isUIShown}),"args: [0 or 1]; turn on/off debug panel. Default value is 0"),this.registerConsoleCommand("ph_timescale",(...r)=>zp(this,void 0,void 0,function*(){return this.physicsWorld.timeScale=+r[0],JSON.stringify(this.physicsWorld.timeScale)}),"args: [float]; change time scale of physics engine. Default value is 1.0"),this.registerConsoleCommand("dr_drawphysics",(...r)=>zp(this,void 0,void 0,function*(){return["1","true","+"].includes(r[0])!=this.physicsWorld.physicsDebugViewActive&&this.triggerPhysicsDebugView(),""+this.physicsWorld.physicsDebugViewActive}),"args: [0 or 1]; turn on/off physics debug view. Default value is 0"))}init(){return zp(this,void 0,void 0,function*(){yield Promise.all([this.physicsWorld.init(),this.visualScene.init()]),this.worldClock.tick$.subscribe(([e,t])=>{let n=0;for(;n<this.tickListeners.length&&!(this.tickListeners[n].tickOrder>=Mc.PHYSICS_SIMULATION);n++)this.tickListeners[n].active&&this.tickListeners[n].tick$.next([e,t]);for(this.physicsWorld.simulate(t);n<this.tickListeners.length;n++)this.tickListeners[n].active&&this.tickListeners[n].tick$.next([e,t])})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(e){return this.worldClock.createChildClock(e)}dispose(){this.worldClock.stop(),this.keyboardInput.stop().then();for(let e=0;e<this.children.length;e++)this.children[e].onRemoved(),this.children[e].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld.dispose(),this.visualScene.dispose()}addEntity(e){e.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(e),this.tickListeners.push(e),this.tickListeners.sort((t,n)=>t.tickOrder-n.tickOrder),e.onSpawned(this))}removeEntity(e,t=!0){if(e.world){if(e.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(n=>n===e),1),this.tickListeners.splice(this.tickListeners.findIndex(n=>n===e),1),e.onRemoved()}t&&e.dispose()}registerConsoleCommand(e,t,n){if(!this.consoleEnabled)throw new Error("Console not enabled for this world");this.commands[e]={handler:t,doc:n}}runConsoleCommand(e,t){return zp(this,void 0,void 0,function*(){if(!this.consoleEnabled)throw new Error("Console not enabled for this world");return this.commands[e]?this.commands[e].handler(...t):"Unrecognized command: "+e})}triggerPhysicsDebugView(){if(this.physicsWorld.physicsDebugViewActive)this.physicsWorld.stopDebugger(this);else{const e=this.visualScene.debugPhysicsDrawerClass;if(!e)throw new Error("Debug drawer is not available");this.physicsWorld.startDebugger(this,new e)}}}{constructor(e,t,n=!1){super(e,t,n),this.visualScene=e,this.physicsWorld=t,this.consoleEnabled=n,this.loader=new LQ(this),n&&this.registerConsoleCommand("ph_gravity",(...r)=>function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){return 1==r.length&&(r=["0","0",""+-+r[0]]),r.length>0&&(this.physicsWorld.gravity={x:+r[0],y:+r[1],z:+r[2]}),JSON.stringify(this.physicsWorld.gravity)}),'args: [float] or [float float float]; change 3D world gravity vector. 1 argument means {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}addPrimitiveRigidBody(e,t={x:0,y:0,z:0},n={x:0,y:0,z:0,w:1}){const r=new Zd(this.visualScene.factory.createPrimitive(e.shape),this.physicsWorld.factory.createRigidBody(e));return r.position=t,r.rotation=n,this.addEntity(r),r}}const wr=1001,cr=1003,ur=1006,Qd=1008,eh=1009,th=1014,Ru=1015,Wv=1016,Wp=1020,ma=1023,nh=1026,$p=1027,ih=3e3,si=3001,Sl="srgb",$v="srgb-linear",yV="display-p3";class Xp{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],sh=Math.PI/180,Yp=180/Math.PI;function Ro(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(gs[255&i]+gs[i>>8&255]+gs[i>>16&255]+gs[i>>24&255]+"-"+gs[255&e]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[63&t|128]+gs[t>>8&255]+"-"+gs[t>>16&255]+gs[t>>24&255]+gs[255&n]+gs[n>>8&255]+gs[n>>16&255]+gs[n>>24&255]).toLowerCase()}function Hi(i,e,t){return Math.max(e,Math.min(t,i))}function jv(i,e,t){return(1-t)*i+t*e}function aI(i){return 0==(i&i-1)&&0!==i}function MV(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Po(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function rn(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Me{constructor(e=0,t=0){Me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Hi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bn{constructor(){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],f=n[7],p=n[2],m=n[5],_=n[8],b=r[0],y=r[3],v=r[6],M=r[1],w=r[4],C=r[7],D=r[2],I=r[5],N=r[8];return s[0]=o*b+a*M+l*D,s[3]=o*y+a*w+l*I,s[6]=o*v+a*C+l*N,s[1]=c*b+d*M+f*D,s[4]=c*y+d*w+f*I,s[7]=c*v+d*C+f*N,s[2]=p*b+m*M+_*D,s[5]=p*y+m*w+_*I,s[8]=p*v+m*C+_*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,_=t*f+n*p+r*m;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const b=1/_;return e[0]=f*b,e[1]=(r*c-d*n)*b,e[2]=(a*n-r*o)*b,e[3]=p*b,e[4]=(d*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=m*b,e[7]=(n*l-c*t)*b,e[8]=(o*t-n*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(lI.makeScale(e,t)),this}rotate(e){return this.premultiply(lI.makeRotation(-e)),this}translate(e,t){return this.premultiply(lI.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const lI=new bn;function CV(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function qv(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Kp(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function cI(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const qee=(new bn).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Xee=(new bn).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Kee={[$v]:i=>i,[Sl]:i=>i.convertSRGBToLinear(),[yV]:function Yee(i){return i.convertSRGBToLinear().applyMatrix3(Xee)}},Jee={[$v]:i=>i,[Sl]:i=>i.convertLinearToSRGB(),[yV]:function Zee(i){return i.applyMatrix3(qee).convertLinearToSRGB()}},ko={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return $v},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(!1===this.enabled||e===t||!e||!t)return i;const n=Kee[e],r=Jee[t];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let Jp;class SV{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Jp&&(Jp=qv("canvas")),Jp.width=e.width,Jp.height=e.height;const n=Jp.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Jp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Kp(s[o]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Kp(t[n]/255)):Kp(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Qp{constructor(e=null){this.isSource=!0,this.uuid=Ro(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(uI(r[o].isDataTexture?r[o].image:r[o]))}else s=uI(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function uI(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?SV.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Qee=0,Pu=(()=>{class i extends Xp{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=wr,s=wr,o=ur,a=Qd,l=ma,c=eh,d=i.DEFAULT_ANISOTROPY,f=ih){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Qee++}),this.uuid=Ro(),this.name="",this.source=new Qp(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case wr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case wr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class Qn{constructor(e=0,t=0,n=0,r=1){Qn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],_=l[9],b=l[2],y=l[6],v=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-b)<.01&&Math.abs(_-y)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+b)<.1&&Math.abs(_+y)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,C=(m+1)/2,D=(v+1)/2,I=(d+p)/4,N=(f+b)/4,V=(_+y)/4;return w>C&&w>D?w<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(w),r=I/n,s=N/n):C>D?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=I/r,s=V/r):D<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(D),n=N/s,r=V/s),this.set(n,r,s,t),this}let M=Math.sqrt((y-_)*(y-_)+(f-b)*(f-b)+(p-d)*(p-d));return Math.abs(M)<.001&&(M=1),this.x=(y-_)/M,this.y=(f-b)/M,this.z=(p-d)/M,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class oh extends Xp{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Qn(0,0,e,t),this.scissorTest=!1,this.viewport=new Qn(0,0,e,t),this.texture=new Pu({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ur,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Qp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dI extends Pu{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=cr,this.minFilter=cr,this.wrapR=wr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class EV extends Pu{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=cr,this.minFilter=cr,this.wrapR=wr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Oo{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],f=n[r+3];const p=s[o+0],m=s[o+1],_=s[o+2],b=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=d,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=m,e[t+2]=_,void(e[t+3]=b);if(f!==b||l!==p||c!==m||d!==_){let y=1-a;const v=l*p+c*m+d*_+f*b,M=v>=0?1:-1,w=1-v*v;if(w>Number.EPSILON){const D=Math.sqrt(w),I=Math.atan2(D,v*M);y=Math.sin(y*I)/D,a=Math.sin(a*I)/D}const C=a*M;if(l=l*y+p*C,c=c*y+m*C,d=d*y+_*C,f=f*y+b*C,y===1-a){const D=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=D,c*=D,d*=D,f*=D}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],f=s[o],p=s[o+1],m=s[o+2],_=s[o+3];return e[t]=a*_+d*f+l*m-c*p,e[t+1]=l*_+d*p+c*f-a*m,e[t+2]=c*_+d*m+a*p-l*f,e[t+3]=d*_-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),f=a(s/2),p=l(n/2),m=l(r/2),_=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*_,this._y=c*m*f-p*d*_,this._z=c*d*_+p*m*f,this._w=c*d*f-p*m*_;break;case"YXZ":this._x=p*d*f+c*m*_,this._y=c*m*f-p*d*_,this._z=c*d*_-p*m*f,this._w=c*d*f+p*m*_;break;case"ZXY":this._x=p*d*f-c*m*_,this._y=c*m*f+p*d*_,this._z=c*d*_+p*m*f,this._w=c*d*f-p*m*_;break;case"ZYX":this._x=p*d*f-c*m*_,this._y=c*m*f+p*d*_,this._z=c*d*_-p*m*f,this._w=c*d*f+p*m*_;break;case"YZX":this._x=p*d*f+c*m*_,this._y=c*m*f+p*d*_,this._z=c*d*_-p*m*f,this._w=c*d*f-p*m*_;break;case"XZY":this._x=p*d*f-c*m*_,this._y=c*m*f-p*d*_,this._z=c*d*_+p*m*f,this._w=c*d*f+p*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],p=n+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(n>a&&n>f){const m=2*Math.sqrt(1+n-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-n-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-n-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Hi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*n+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*f+this._w*p,this._x=n*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,t=0,n=0){O.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,d=l*n+a*t-s*r,f=l*r+s*n-o*t,p=-s*t-o*n-a*r;return this.x=c*l+p*-s+d*-a-f*-o,this.y=d*l+p*-o+f*-s-c*-a,this.z=f*l+p*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return hI.copy(this).projectOnVector(e),this.sub(hI)}reflect(e){return this.sub(hI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Hi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hI=new O,DV=new Oo;class El{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Dc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Dc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Dc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),em.copy(e.boundingBox),em.applyMatrix4(e.matrixWorld),this.union(em);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Dc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Dc)}else null===r.boundingBox&&r.computeBoundingBox(),em.copy(r.boundingBox),em.applyMatrix4(e.matrixWorld),this.union(em)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Dc),Dc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Xv),bM.subVectors(this.max,Xv),tm.subVectors(e.a,Xv),nm.subVectors(e.b,Xv),im.subVectors(e.c,Xv),ku.subVectors(nm,tm),Ou.subVectors(im,nm),ah.subVectors(tm,im);let t=[0,-ku.z,ku.y,0,-Ou.z,Ou.y,0,-ah.z,ah.y,ku.z,0,-ku.x,Ou.z,0,-Ou.x,ah.z,0,-ah.x,-ku.y,ku.x,0,-Ou.y,Ou.x,0,-ah.y,ah.x,0];return!(!fI(t,tm,nm,im,bM)||(t=[1,0,0,0,1,0,0,0,1],!fI(t,tm,nm,im,bM)))&&(xM.crossVectors(ku,Ou),t=[xM.x,xM.y,xM.z],fI(t,tm,nm,im,bM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Dc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Dc).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Ec[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ec[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ec[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ec[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ec[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ec[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ec[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ec[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ec)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ec=[new O,new O,new O,new O,new O,new O,new O,new O],Dc=new O,em=new El,tm=new O,nm=new O,im=new O,ku=new O,Ou=new O,ah=new O,Xv=new O,bM=new O,xM=new O,lh=new O;function fI(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){lh.fromArray(i,s);const a=r.x*Math.abs(lh.x)+r.y*Math.abs(lh.y)+r.z*Math.abs(lh.z),l=e.dot(lh),c=t.dot(lh),d=n.dot(lh);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const ete=new El,Yv=new O,pI=new O;class Ac{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ete.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Yv.subVectors(e,this.center);const t=Yv.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Yv,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(pI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Yv.copy(e.center).add(pI)),this.expandByPoint(Yv.copy(e.center).sub(pI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Tc=new O,mI=new O,wM=new O,Lu=new O,gI=new O,MM=new O,_I=new O;class CM{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Tc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Tc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Tc.copy(this.origin).addScaledVector(this.direction,t),Tc.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){mI.copy(e).add(t).multiplyScalar(.5),wM.copy(t).sub(e).normalize(),Lu.copy(this.origin).sub(mI);const s=.5*e.distanceTo(t),o=-this.direction.dot(wM),a=Lu.dot(this.direction),l=-Lu.dot(wM),c=Lu.lengthSq(),d=Math.abs(1-o*o);let f,p,m,_;if(d>0)if(f=o*l-a,p=o*a-l,_=s*d,f>=0)if(p>=-_)if(p<=_){const b=1/d;f*=b,p*=b,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-_?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=_?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(mI).addScaledVector(wM,p),m}intersectSphere(e,t){Tc.subVectors(e.center,this.origin);const n=Tc.dot(this.direction),r=Tc.dot(Tc)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(n=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(n=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Tc)}intersectTriangle(e,t,n,r,s){gI.subVectors(t,e),MM.subVectors(n,e),_I.crossVectors(gI,MM);let a,o=this.direction.dot(_I);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Lu.subVectors(this.origin,e);const l=a*this.direction.dot(MM.crossVectors(Lu,MM));if(l<0)return null;const c=a*this.direction.dot(gI.cross(Lu));if(c<0||l+c>o)return null;const d=-a*Lu.dot(_I);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class tn{constructor(){tn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,o,a,l,c,d,f,p,m,_,b,y){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=d,v[10]=f,v[14]=p,v[3]=m,v[7]=_,v[11]=b,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new tn).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/rm.setFromMatrixColumn(e,0).length(),s=1/rm.setFromMatrixColumn(e,1).length(),o=1/rm.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const p=o*d,m=o*f,_=a*d,b=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=m+_*c,t[5]=p-b*c,t[9]=-a*l,t[2]=b-p*c,t[6]=_+m*c,t[10]=o*l}else if("YXZ"===e.order){const p=l*d,m=l*f,_=c*d,b=c*f;t[0]=p+b*a,t[4]=_*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*d,t[9]=-a,t[2]=m*a-_,t[6]=b+p*a,t[10]=o*l}else if("ZXY"===e.order){const p=l*d,m=l*f,_=c*d,b=c*f;t[0]=p-b*a,t[4]=-o*f,t[8]=_+m*a,t[1]=m+_*a,t[5]=o*d,t[9]=b-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const p=o*d,m=o*f,_=a*d,b=a*f;t[0]=l*d,t[4]=_*c-m,t[8]=p*c+b,t[1]=l*f,t[5]=b*c+p,t[9]=m*c-_,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const p=o*l,m=o*c,_=a*l,b=a*c;t[0]=l*d,t[4]=b-p*f,t[8]=_*f+m,t[1]=f,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*f+_,t[10]=p-b*f}else if("XZY"===e.order){const p=o*l,m=o*c,_=a*l,b=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=p*f+b,t[5]=o*d,t[9]=m*f-_,t[2]=_*f-m,t[6]=a*d,t[10]=b*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(tte,e,nte)}lookAt(e,t,n){const r=this.elements;return Lo.subVectors(e,t),0===Lo.lengthSq()&&(Lo.z=1),Lo.normalize(),Fu.crossVectors(n,Lo),0===Fu.lengthSq()&&(1===Math.abs(n.z)?Lo.x+=1e-4:Lo.z+=1e-4,Lo.normalize(),Fu.crossVectors(n,Lo)),Fu.normalize(),SM.crossVectors(Lo,Fu),r[0]=Fu.x,r[4]=SM.x,r[8]=Lo.x,r[1]=Fu.y,r[5]=SM.y,r[9]=Lo.y,r[2]=Fu.z,r[6]=SM.z,r[10]=Lo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],f=n[5],p=n[9],m=n[13],_=n[2],b=n[6],y=n[10],v=n[14],M=n[3],w=n[7],C=n[11],D=n[15],I=r[0],N=r[4],V=r[8],A=r[12],k=r[1],ee=r[5],le=r[9],$=r[13],X=r[2],ne=r[6],q=r[10],Q=r[14],Y=r[3],ae=r[7],we=r[11],qe=r[15];return s[0]=o*I+a*k+l*X+c*Y,s[4]=o*N+a*ee+l*ne+c*ae,s[8]=o*V+a*le+l*q+c*we,s[12]=o*A+a*$+l*Q+c*qe,s[1]=d*I+f*k+p*X+m*Y,s[5]=d*N+f*ee+p*ne+m*ae,s[9]=d*V+f*le+p*q+m*we,s[13]=d*A+f*$+p*Q+m*qe,s[2]=_*I+b*k+y*X+v*Y,s[6]=_*N+b*ee+y*ne+v*ae,s[10]=_*V+b*le+y*q+v*we,s[14]=_*A+b*$+y*Q+v*qe,s[3]=M*I+w*k+C*X+D*Y,s[7]=M*N+w*ee+C*ne+D*ae,s[11]=M*V+w*le+C*q+D*we,s[15]=M*A+w*$+C*Q+D*qe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14];return e[3]*(+s*l*f-r*c*f-s*a*p+n*c*p+r*a*m-n*l*m)+e[7]*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+e[11]*(+t*c*f-t*a*m-s*o*f+n*o*m+s*a*d-n*c*d)+e[15]*(-r*a*d-t*l*f+t*a*p+r*o*f-n*o*p+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],_=e[12],b=e[13],y=e[14],v=e[15],M=f*y*c-b*p*c+b*l*m-a*y*m-f*l*v+a*p*v,w=_*p*c-d*y*c-_*l*m+o*y*m+d*l*v-o*p*v,C=d*b*c-_*f*c+_*a*m-o*b*m-d*a*v+o*f*v,D=_*f*l-d*b*l-_*a*p+o*b*p+d*a*y-o*f*y,I=t*M+n*w+r*C+s*D;if(0===I)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/I;return e[0]=M*N,e[1]=(b*p*s-f*y*s-b*r*m+n*y*m+f*r*v-n*p*v)*N,e[2]=(a*y*s-b*l*s+b*r*c-n*y*c-a*r*v+n*l*v)*N,e[3]=(f*l*s-a*p*s-f*r*c+n*p*c+a*r*m-n*l*m)*N,e[4]=w*N,e[5]=(d*y*s-_*p*s+_*r*m-t*y*m-d*r*v+t*p*v)*N,e[6]=(_*l*s-o*y*s-_*r*c+t*y*c+o*r*v-t*l*v)*N,e[7]=(o*p*s-d*l*s+d*r*c-t*p*c-o*r*m+t*l*m)*N,e[8]=C*N,e[9]=(_*f*s-d*b*s-_*n*m+t*b*m+d*n*v-t*f*v)*N,e[10]=(o*b*s-_*a*s+_*n*c-t*b*c-o*n*v+t*a*v)*N,e[11]=(d*a*s-o*f*s-d*n*c+t*f*c+o*n*m-t*a*m)*N,e[12]=D*N,e[13]=(d*b*r-_*f*r+_*n*p-t*b*p-d*n*y+t*f*y)*N,e[14]=(_*a*r-o*b*r-_*n*l+t*b*l+o*n*y-t*a*y)*N,e[15]=(o*f*r-d*a*r+d*n*l-t*f*l-o*n*p+t*a*p)*N,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,_=s*f,b=o*d,y=o*f,v=a*f,M=l*c,w=l*d,C=l*f,D=n.x,I=n.y,N=n.z;return r[0]=(1-(b+v))*D,r[1]=(m+C)*D,r[2]=(_-w)*D,r[3]=0,r[4]=(m-C)*I,r[5]=(1-(p+v))*I,r[6]=(y+M)*I,r[7]=0,r[8]=(_+w)*N,r[9]=(y-M)*N,r[10]=(1-(p+b))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=rm.set(r[0],r[1],r[2]).length();const o=rm.set(r[4],r[5],r[6]).length(),a=rm.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],qa.copy(this);const c=1/s,d=1/o,f=1/a;return qa.elements[0]*=c,qa.elements[1]*=c,qa.elements[2]*=c,qa.elements[4]*=d,qa.elements[5]*=d,qa.elements[6]*=d,qa.elements[8]*=f,qa.elements[9]*=f,qa.elements[10]*=f,t.setFromRotationMatrix(qa),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){const a=this.elements,c=2*s/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),d=1/(o-s),f=(t+e)*l,p=(n+r)*c,m=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const rm=new O,qa=new tn,tte=new O(0,0,0),nte=new O(1,1,1),Fu=new O,SM=new O,Lo=new O,AV=new tn,TV=new Oo;let ite=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],f=s[9],p=s[2],m=s[6],_=s[10];switch(n){case"XYZ":this._y=Math.asin(Hi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Hi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Hi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Hi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,_),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Hi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-Hi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return AV.makeRotationFromQuaternion(t),this.setFromRotationMatrix(AV,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return TV.setFromEuler(this),this.setFromQuaternion(TV,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class vI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let rte=0;const IV=new O,sm=new Oo,Ic=new tn,EM=new O,Zv=new O,ste=new O,ote=new Oo,RV=new O(1,0,0),PV=new O(0,1,0),kV=new O(0,0,1),ate={type:"added"},OV={type:"removed"};let ks=(()=>{class i extends Xp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rte++}),this.uuid=Ro(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const t=new O,n=new ite,r=new Oo,s=new O(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new tn},normalMatrix:{value:new bn}}),this.matrix=new tn,this.matrixWorld=new tn,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new vI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return sm.setFromAxisAngle(t,n),this.quaternion.multiply(sm),this}rotateOnWorldAxis(t,n){return sm.setFromAxisAngle(t,n),this.quaternion.premultiply(sm),this}rotateX(t){return this.rotateOnAxis(RV,t)}rotateY(t){return this.rotateOnAxis(PV,t)}rotateZ(t){return this.rotateOnAxis(kV,t)}translateOnAxis(t,n){return IV.copy(t).applyQuaternion(this.quaternion),this.position.add(IV.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(RV,t)}translateY(t){return this.translateOnAxis(PV,t)}translateZ(t){return this.translateOnAxis(kV,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ic.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?EM.copy(t):EM.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Zv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ic.lookAt(Zv,EM,this.up):Ic.lookAt(EM,Zv,this.up),this.quaternion.setFromRotationMatrix(Ic),s&&(Ic.extractRotation(s.matrixWorld),sm.setFromRotationMatrix(Ic),this.quaternion.premultiply(sm.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ate)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(OV)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent(OV)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Ic.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),Ic.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ic),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(void 0!==a)return a}}getObjectsByProperty(t,n){let r=[];this[t]===n&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zv,t,ste),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Zv,ote,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,f=c.length;d<f;d++)o(t.shapes,c[d]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(n){const l=a(t.geometries),c=a(t.materials),d=a(t.textures),f=a(t.images),p=a(t.shapes),m=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),_.length>0&&(r.animations=_),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(l){const c=[];for(const d in l){const f=l[d];delete f.metadata,c.push(f)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DEFAULT_UP=new O(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const Xa=new O,Rc=new O,yI=new O,Pc=new O,om=new O,am=new O,LV=new O,bI=new O,xI=new O,wI=new O;let DM=!1;class Fo{constructor(e=new O,t=new O,n=new O){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Xa.subVectors(e,t),r.cross(Xa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Xa.subVectors(r,t),Rc.subVectors(n,t),yI.subVectors(e,t);const o=Xa.dot(Xa),a=Xa.dot(Rc),l=Xa.dot(yI),c=Rc.dot(Rc),d=Rc.dot(yI),f=o*c-a*a;if(0===f)return s.set(-2,-1,-1);const p=1/f,m=(c*l-a*d)*p,_=(o*d-a*l)*p;return s.set(1-m-_,_,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Pc),Pc.x>=0&&Pc.y>=0&&Pc.x+Pc.y<=1}static getUV(e,t,n,r,s,o,a,l){return!1===DM&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),DM=!0),this.getInterpolation(e,t,n,r,s,o,a,l)}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Pc),l.setScalar(0),l.addScaledVector(s,Pc.x),l.addScaledVector(o,Pc.y),l.addScaledVector(a,Pc.z),l}static isFrontFacing(e,t,n,r){return Xa.subVectors(n,t),Rc.subVectors(e,t),Xa.cross(Rc).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xa.subVectors(this.c,this.b),Rc.subVectors(this.a,this.b),.5*Xa.cross(Rc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Fo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Fo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return!1===DM&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),DM=!0),Fo.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return Fo.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Fo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Fo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;om.subVectors(r,n),am.subVectors(s,n),bI.subVectors(e,n);const l=om.dot(bI),c=am.dot(bI);if(l<=0&&c<=0)return t.copy(n);xI.subVectors(e,r);const d=om.dot(xI),f=am.dot(xI);if(d>=0&&f<=d)return t.copy(r);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(n).addScaledVector(om,o);wI.subVectors(e,s);const m=om.dot(wI),_=am.dot(wI);if(_>=0&&m<=_)return t.copy(s);const b=m*c-l*_;if(b<=0&&c>=0&&_<=0)return a=c/(c-_),t.copy(n).addScaledVector(am,a);const y=d*_-m*f;if(y<=0&&f-d>=0&&m-_>=0)return LV.subVectors(s,r),a=(f-d)/(f-d+(m-_)),t.copy(r).addScaledVector(LV,a);const v=1/(y+b+p);return o=b*v,a=p*v,t.copy(n).addScaledVector(om,o).addScaledVector(am,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let lte=0;class Dl extends Xp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:lte++}),this.uuid=Ro(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const FV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ya={h:0,s:0,l:0},AM={h:0,s:0,l:0};function MI(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}class je{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Sl){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ko.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=ko.workingColorSpace){return this.r=e,this.g=t,this.b=n,ko.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=ko.workingColorSpace){if(e=function oI(i,e){return(i%e+e)%e}(e,1),t=Hi(t,0,1),n=Hi(n,0,1),0===t)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=MI(o,s,e+1/3),this.g=MI(o,s,e),this.b=MI(o,s,e-1/3)}return ko.toWorkingColorSpace(this,r),this}setStyle(e,t=Sl){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,ko.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,ko.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return n(s[4]),this.setHSL(l,c,d,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Sl){const n=FV[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Kp(e.r),this.g=Kp(e.g),this.b=Kp(e.b),this}copyLinearToSRGB(e){return this.r=cI(e.r),this.g=cI(e.g),this.b=cI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Sl){return ko.fromWorkingColorSpace(_s.copy(this),e),Hi(255*_s.r,0,255)<<16^Hi(255*_s.g,0,255)<<8^Hi(255*_s.b,0,255)<<0}getHexString(e=Sl){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ko.workingColorSpace){ko.fromWorkingColorSpace(_s.copy(this),t);const n=_s.r,r=_s.g,s=_s.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case n:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-n)/f+2;break;case s:l=(n-r)/f+4}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=ko.workingColorSpace){return ko.fromWorkingColorSpace(_s.copy(this),t),e.r=_s.r,e.g=_s.g,e.b=_s.b,e}getStyle(e=Sl){ko.fromWorkingColorSpace(_s.copy(this),e);const t=_s.r,n=_s.g,r=_s.b;return e!==Sl?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${255*t|0},${255*n|0},${255*r|0})`}offsetHSL(e,t,n){return this.getHSL(Ya),Ya.h+=e,Ya.s+=t,Ya.l+=n,this.setHSL(Ya.h,Ya.s,Ya.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ya),e.getHSL(AM);const n=jv(Ya.h,AM.h,t),r=jv(Ya.s,AM.s,t),s=jv(Ya.l,AM.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _s=new je;je.NAMES=FV;class Al extends Dl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const dr=new O,TM=new Me;class hr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)TM.fromBufferAttribute(this,t),TM.applyMatrix3(e),this.setXY(t,TM.x,TM.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)dr.fromBufferAttribute(this,t),dr.applyMatrix3(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)dr.fromBufferAttribute(this,t),dr.applyMatrix4(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)dr.fromBufferAttribute(this,t),dr.applyNormalMatrix(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)dr.fromBufferAttribute(this,t),dr.transformDirection(e),this.setXYZ(t,dr.x,dr.y,dr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Po(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Po(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Po(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Po(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class NV extends hr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class BV extends hr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ke extends hr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let ute=0;const ga=new tn,CI=new ks,lm=new O,No=new El,Jv=new El,Pr=new O;class sn extends Xp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ute++}),this.uuid=Ro(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(CV(e)?BV:NV)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new bn).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return ga.makeRotationFromQuaternion(e),this.applyMatrix4(ga),this}rotateX(e){return ga.makeRotationX(e),this.applyMatrix4(ga),this}rotateY(e){return ga.makeRotationY(e),this.applyMatrix4(ga),this}rotateZ(e){return ga.makeRotationZ(e),this.applyMatrix4(ga),this}translate(e,t,n){return ga.makeTranslation(e,t,n),this.applyMatrix4(ga),this}scale(e,t,n){return ga.makeScale(e,t,n),this.applyMatrix4(ga),this}lookAt(e){return CI.lookAt(e),CI.updateMatrix(),this.applyMatrix4(CI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(lm).negate(),this.translate(lm.x,lm.y,lm.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ke(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new El);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)No.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Pr.addVectors(this.boundingBox.min,No.min),this.boundingBox.expandByPoint(Pr),Pr.addVectors(this.boundingBox.max,No.max),this.boundingBox.expandByPoint(Pr)):(this.boundingBox.expandByPoint(No.min),this.boundingBox.expandByPoint(No.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ac);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new O,1/0);if(e){const n=this.boundingSphere.center;if(No.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)Jv.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Pr.addVectors(No.min,Jv.min),No.expandByPoint(Pr),Pr.addVectors(No.max,Jv.max),No.expandByPoint(Pr)):(No.expandByPoint(Jv.min),No.expandByPoint(Jv.max));No.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Pr.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Pr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Pr.fromBufferAttribute(a,c),l&&(lm.fromBufferAttribute(e,c),Pr.add(lm)),r=Math.max(r,n.distanceToSquared(Pr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new hr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let k=0;k<a;k++)c[k]=new O,d[k]=new O;const f=new O,p=new O,m=new O,_=new Me,b=new Me,y=new Me,v=new O,M=new O;function w(k,ee,le){f.fromArray(r,3*k),p.fromArray(r,3*ee),m.fromArray(r,3*le),_.fromArray(o,2*k),b.fromArray(o,2*ee),y.fromArray(o,2*le),p.sub(f),m.sub(f),b.sub(_),y.sub(_);const $=1/(b.x*y.y-y.x*b.y);!isFinite($)||(v.copy(p).multiplyScalar(y.y).addScaledVector(m,-b.y).multiplyScalar($),M.copy(m).multiplyScalar(b.x).addScaledVector(p,-y.x).multiplyScalar($),c[k].add(v),c[ee].add(v),c[le].add(v),d[k].add(M),d[ee].add(M),d[le].add(M))}let C=this.groups;0===C.length&&(C=[{start:0,count:n.length}]);for(let k=0,ee=C.length;k<ee;++k){const le=C[k],$=le.start;for(let ne=$,q=$+le.count;ne<q;ne+=3)w(n[ne+0],n[ne+1],n[ne+2])}const D=new O,I=new O,N=new O,V=new O;function A(k){N.fromArray(s,3*k),V.copy(N);const ee=c[k];D.copy(ee),D.sub(N.multiplyScalar(N.dot(ee))).normalize(),I.crossVectors(V,ee);const $=I.dot(d[k])<0?-1:1;l[4*k]=D.x,l[4*k+1]=D.y,l[4*k+2]=D.z,l[4*k+3]=$}for(let k=0,ee=C.length;k<ee;++k){const le=C[k],$=le.start;for(let ne=$,q=$+le.count;ne<q;ne+=3)A(n[ne+0]),A(n[ne+1]),A(n[ne+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new hr(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const r=new O,s=new O,o=new O,a=new O,l=new O,c=new O,d=new O,f=new O;if(e)for(let p=0,m=e.count;p<m;p+=3){const _=e.getX(p+0),b=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,y),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),a.fromBufferAttribute(n,_),l.fromBufferAttribute(n,b),c.fromBufferAttribute(n,y),a.add(d),l.add(d),c.add(d),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),n.setXYZ(p+0,d.x,d.y,d.z),n.setXYZ(p+1,d.x,d.y,d.z),n.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Pr.fromBufferAttribute(e,t),Pr.normalize(),e.setXYZ(t,Pr.x,Pr.y,Pr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,_=0;for(let b=0,y=l.length;b<y;b++){m=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*d;for(let v=0;v<d;v++)p[_++]=c[m++]}return new hr(p,d,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new sn,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const m=e(c[d],n);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++)d.push(c[f].toJSON(e.data));d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UV=new tn,Tl=new CM,IM=new Ac,VV=new O,cm=new O,um=new O,dm=new O,SI=new O,RM=new O,PM=new Me,kM=new Me,OM=new Me,zV=new O,HV=new O,GV=new O,LM=new O,FM=new O;class wi extends ks{constructor(e=new sn,t=new Al){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){RM.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];0!==d&&(SI.fromBufferAttribute(f,e),RM.addScaledVector(o?SI:SI.sub(t),d))}t.add(RM)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),IM.copy(n.boundingSphere),IM.applyMatrix4(s),Tl.copy(e.ray).recast(e.near),!1===IM.containsPoint(Tl.origin)&&(null===Tl.intersectSphere(IM,VV)||Tl.origin.distanceToSquared(VV)>(e.far-e.near)**2))||(UV.copy(s).invert(),Tl.copy(e.ray).applyMatrix4(UV),null!==n.boundingBox&&!1===Tl.intersectsBox(n.boundingBox)))return;let o;const a=n.index,l=n.attributes.position,c=n.attributes.uv,d=n.attributes.uv2,f=n.attributes.normal,p=n.groups,m=n.drawRange;if(null!==a)if(Array.isArray(r))for(let _=0,b=p.length;_<b;_++){const y=p[_],v=r[y.materialIndex];for(let C=Math.max(y.start,m.start),D=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));C<D;C+=3){const I=a.getX(C),N=a.getX(C+1),V=a.getX(C+2);o=NM(this,v,e,Tl,c,d,f,I,N,V),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else for(let y=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);y<v;y+=3){const M=a.getX(y),w=a.getX(y+1),C=a.getX(y+2);o=NM(this,r,e,Tl,c,d,f,M,w,C),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let _=0,b=p.length;_<b;_++){const y=p[_],v=r[y.materialIndex];for(let C=Math.max(y.start,m.start),D=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));C<D;C+=3)o=NM(this,v,e,Tl,c,d,f,C,C+1,C+2),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=y.materialIndex,t.push(o))}else for(let y=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);y<v;y+=3)o=NM(this,r,e,Tl,c,d,f,y,y+1,y+2),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}function NM(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,cm),i.getVertexPosition(l,um),i.getVertexPosition(c,dm);const d=function dte(i,e,t,n,r,s,o,a){let l;if(l=1===e.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;FM.copy(a),FM.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(FM);return c<t.near||c>t.far?null:{distance:c,point:FM.clone(),object:i}}(i,e,t,n,cm,um,dm,LM);if(d){r&&(PM.fromBufferAttribute(r,a),kM.fromBufferAttribute(r,l),OM.fromBufferAttribute(r,c),d.uv=Fo.getInterpolation(LM,cm,um,dm,PM,kM,OM,new Me)),s&&(PM.fromBufferAttribute(s,a),kM.fromBufferAttribute(s,l),OM.fromBufferAttribute(s,c),d.uv2=Fo.getInterpolation(LM,cm,um,dm,PM,kM,OM,new Me)),o&&(zV.fromBufferAttribute(o,a),HV.fromBufferAttribute(o,l),GV.fromBufferAttribute(o,c),d.normal=Fo.getInterpolation(LM,cm,um,dm,zV,HV,GV,new O),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new O,materialIndex:0};Fo.getNormal(cm,um,dm,f.normal),d.face=f}return d}class ch extends sn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;function _(b,y,v,M,w,C,D,I,N,V,A){const k=C/N,ee=D/V,le=C/2,$=D/2,X=I/2,ne=N+1,q=V+1;let Q=0,Y=0;const ae=new O;for(let we=0;we<q;we++){const qe=we*ee-$;for(let ke=0;ke<ne;ke++)ae[b]=(ke*k-le)*M,ae[y]=qe*w,ae[v]=X,c.push(ae.x,ae.y,ae.z),ae[b]=0,ae[y]=0,ae[v]=I>0?1:-1,d.push(ae.x,ae.y,ae.z),f.push(ke/N),f.push(1-we/V),Q+=1}for(let we=0;we<V;we++)for(let qe=0;qe<N;qe++){const se=p+qe+ne*(we+1),ue=p+(qe+1)+ne*(we+1),Fe=p+(qe+1)+ne*we;l.push(p+qe+ne*we,se,Fe),l.push(se,ue,Fe),Y+=6}a.addGroup(m,Y,A),m+=Y,p+=Q}_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,r,o,2),_("x","z","y",1,-1,e,n,-t,r,o,3),_("x","y","z",1,-1,e,t,n,r,s,4),_("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ke(c,3)),this.setAttribute("normal",new Ke(d,3)),this.setAttribute("uv",new Ke(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ch(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function hm(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function Os(i){const e={};for(let t=0;t<i.length;t++){const n=hm(i[t]);for(const r in n)e[r]=n[r]}return e}function WV(i){return null===i.getRenderTarget()&&i.outputEncoding===si?Sl:$v}const fte={clone:hm,merge:Os};class Nu extends Dl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=hm(e.uniforms),this.uniformsGroups=function hte(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class EI extends ks{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tn,this.projectionMatrix=new tn,this.projectionMatrixInverse=new tn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Mr extends EI{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Yp*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*sh*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Yp*Math.atan(Math.tan(.5*sh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*sh*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class gte extends ks{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Mr(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Mr(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Mr(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Mr(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Mr(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new Mr(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,d=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=f,e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class BM extends Pu{constructor(e,t,n,r,s,o,a,l,c,d){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class _te extends oh{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new BM([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:ur}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new ch(5,5,5),s=new Nu({name:"CubemapFromEquirect",uniforms:hm(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new wi(r,s),a=t.minFilter;return t.minFilter===Qd&&(t.minFilter=ur),new gte(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const DI=new O,vte=new O,yte=new bn;class uh{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=DI.subVectors(n,t).cross(vte.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(DI),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||yte.getNormalMatrix(e),r=this.coplanarPoint(DI).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const dh=new Ac,UM=new O;class AI{constructor(e=new uh,t=new uh,n=new uh,r=new uh,s=new uh,o=new uh){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=n[6],f=n[7],p=n[8],m=n[9],_=n[10],b=n[11],y=n[12],v=n[13],M=n[14],w=n[15];return t[0].setComponents(a-r,f-l,b-p,w-y).normalize(),t[1].setComponents(a+r,f+l,b+p,w+y).normalize(),t[2].setComponents(a+s,f+c,b+m,w+v).normalize(),t[3].setComponents(a-s,f-c,b-m,w-v).normalize(),t[4].setComponents(a-o,f-d,b-_,w-M).normalize(),t[5].setComponents(a+o,f+d,b+_,w+M).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),dh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),dh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(dh)}intersectsSprite(e){return dh.center.set(0,0,0),dh.radius=.7071067811865476,dh.applyMatrix4(e.matrixWorld),this.intersectsSphere(dh)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(UM.x=r.normal.x>0?e.max.x:e.min.x,UM.y=r.normal.y>0?e.max.y:e.min.y,UM.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(UM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function $V(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function bte(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);d&&(i.deleteBuffer(d.buffer),n.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const p=n.get(c);return void((!p||p.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const f=n.get(c);void 0===f?n.set(c,function r(c,d){const f=c.array,p=c.usage,m=i.createBuffer();let _;if(i.bindBuffer(d,m),i.bufferData(d,f,p),c.onUploadCallback(),f instanceof Float32Array)_=5126;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=5131}else _=5123;else if(f instanceof Int16Array)_=5122;else if(f instanceof Uint32Array)_=5125;else if(f instanceof Int32Array)_=5124;else if(f instanceof Int8Array)_=5120;else if(f instanceof Uint8Array)_=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);_=5121}return{buffer:m,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}(c,d)):f.version<c.version&&(function s(c,d,f){const p=d.array,m=d.updateRange;i.bindBuffer(f,c),-1===m.count?i.bufferSubData(f,0,p):(t?i.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):i.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}(f.buffer,c,d),f.version=c.version)}}}class VM extends sn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,f=e/a,p=t/l,m=[],_=[],b=[],y=[];for(let v=0;v<d;v++){const M=v*p-o;for(let w=0;w<c;w++)_.push(w*f-s,-M,0),b.push(0,0,1),y.push(w/a),y.push(1-v/l)}for(let v=0;v<l;v++)for(let M=0;M<a;M++){const C=M+c*(v+1),D=M+1+c*(v+1),I=M+1+c*v;m.push(M+c*v,C,I),m.push(C,D,I)}this.setIndex(m),this.setAttribute("position",new Ke(_,3)),this.setAttribute("normal",new Ke(b,3)),this.setAttribute("uv",new Ke(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new VM(e.width,e.height,e.widthSegments,e.heightSegments)}}const ln={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Be={common:{diffuse:{value:new je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new je(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaTest:{value:0}}},Il={basic:{uniforms:Os([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:Os([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new je(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:Os([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new je(0)},specular:{value:new je(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:Os([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:Os([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new je(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:Os([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:Os([Be.points,Be.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:Os([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:Os([Be.common,Be.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:Os([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:Os([Be.sprite,Be.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ln.backgroundCube_vert,fragmentShader:ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:Os([Be.common,Be.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:Os([Be.lights,Be.fog,{color:{value:new je(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};Il.physical={uniforms:Os([Il.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new Me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new je(0)},specularColor:{value:new je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};const zM={r:0,b:0,g:0};function gie(i,e,t,n,r,s,o){const a=new je(0);let c,d,l=!0===s?0:1,f=null,p=0,m=null;function b(y,v){y.getRGB(zM,WV(i)),n.buffers.color.setClear(zM.r,zM.g,zM.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),l=v,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,b(a,l)},render:function _(y,v){let M=!1,w=!0===v.isScene?v.background:null;w&&w.isTexture&&(w=(v.backgroundBlurriness>0?t:e).get(w));const C=i.xr,D=C.getSession&&C.getSession();D&&"additive"===D.environmentBlendMode&&(w=null),null===w?b(a,l):w&&w.isColor&&(b(w,1),M=!0),(i.autoClear||M)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),w&&(w.isCubeTexture||306===w.mapping)?(void 0===d&&(d=new wi(new ch(1,1,1),new Nu({name:"BackgroundCubeMaterial",uniforms:hm(Il.backgroundCube.uniforms),vertexShader:Il.backgroundCube.vertexShader,fragmentShader:Il.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(I,N,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.toneMapped=w.encoding!==si,(f!==w||p!==w.version||m!==i.toneMapping)&&(d.material.needsUpdate=!0,f=w,p=w.version,m=i.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(void 0===c&&(c=new wi(new VM(2,2),new Nu({name:"BackgroundMaterial",uniforms:hm(Il.background.uniforms),vertexShader:Il.background.vertexShader,fragmentShader:Il.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=w.encoding!==si,!0===w.matrixAutoUpdate&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==i.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=i.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}}}function _ie(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=y(null);let c=l,d=!1;function m(X){return n.isWebGL2?i.bindVertexArray(X):s.bindVertexArrayOES(X)}function _(X){return n.isWebGL2?i.deleteVertexArray(X):s.deleteVertexArrayOES(X)}function y(X){const ne=[],q=[],Q=[];for(let Y=0;Y<r;Y++)ne[Y]=0,q[Y]=0,Q[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ne,enabledAttributes:q,attributeDivisors:Q,object:X,attributes:{},index:null}}function w(){const X=c.newAttributes;for(let ne=0,q=X.length;ne<q;ne++)X[ne]=0}function C(X){D(X,0)}function D(X,ne){const Q=c.enabledAttributes,Y=c.attributeDivisors;c.newAttributes[X]=1,0===Q[X]&&(i.enableVertexAttribArray(X),Q[X]=1),Y[X]!==ne&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](X,ne),Y[X]=ne)}function I(){const X=c.newAttributes,ne=c.enabledAttributes;for(let q=0,Q=ne.length;q<Q;q++)ne[q]!==X[q]&&(i.disableVertexAttribArray(q),ne[q]=0)}function N(X,ne,q,Q,Y,ae){!0!==n.isWebGL2||5124!==q&&5125!==q?i.vertexAttribPointer(X,ne,q,Q,Y,ae):i.vertexAttribIPointer(X,ne,q,Y,ae)}function le(){$(),d=!0,c!==l&&(c=l,m(c.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function f(X,ne,q,Q,Y){let ae=!1;if(o){const we=function b(X,ne,q){const Q=!0===q.wireframe;let Y=a[X.id];void 0===Y&&(Y={},a[X.id]=Y);let ae=Y[ne.id];void 0===ae&&(ae={},Y[ne.id]=ae);let we=ae[Q];return void 0===we&&(we=y(function p(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),ae[Q]=we),we}(Q,q,ne);c!==we&&(c=we,m(c.object)),ae=function v(X,ne,q,Q){const Y=c.attributes,ae=ne.attributes;let we=0;const qe=q.getAttributes();for(const ke in qe)if(qe[ke].location>=0){const ue=Y[ke];let Fe=ae[ke];if(void 0===Fe&&("instanceMatrix"===ke&&X.instanceMatrix&&(Fe=X.instanceMatrix),"instanceColor"===ke&&X.instanceColor&&(Fe=X.instanceColor)),void 0===ue||ue.attribute!==Fe||Fe&&ue.data!==Fe.data)return!0;we++}return c.attributesNum!==we||c.index!==Q}(X,Q,q,Y),ae&&function M(X,ne,q,Q){const Y={},ae=ne.attributes;let we=0;const qe=q.getAttributes();for(const ke in qe)if(qe[ke].location>=0){let ue=ae[ke];void 0===ue&&("instanceMatrix"===ke&&X.instanceMatrix&&(ue=X.instanceMatrix),"instanceColor"===ke&&X.instanceColor&&(ue=X.instanceColor));const Fe={};Fe.attribute=ue,ue&&ue.data&&(Fe.data=ue.data),Y[ke]=Fe,we++}c.attributes=Y,c.attributesNum=we,c.index=Q}(X,Q,q,Y)}else{const we=!0===ne.wireframe;(c.geometry!==Q.id||c.program!==q.id||c.wireframe!==we)&&(c.geometry=Q.id,c.program=q.id,c.wireframe=we,ae=!0)}null!==Y&&t.update(Y,34963),(ae||d)&&(d=!1,function V(X,ne,q,Q){if(!1===n.isWebGL2&&(X.isInstancedMesh||Q.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;w();const Y=Q.attributes,ae=q.getAttributes(),we=ne.defaultAttributeValues;for(const qe in ae){const ke=ae[qe];if(ke.location>=0){let se=Y[qe];if(void 0===se&&("instanceMatrix"===qe&&X.instanceMatrix&&(se=X.instanceMatrix),"instanceColor"===qe&&X.instanceColor&&(se=X.instanceColor)),void 0!==se){const ue=se.normalized,Fe=se.itemSize,$e=t.get(se);if(void 0===$e)continue;const Z=$e.buffer,ut=$e.type,rt=$e.bytesPerElement;if(se.isInterleavedBufferAttribute){const Re=se.data,st=Re.stride,Ee=se.offset;if(Re.isInstancedInterleavedBuffer){for(let me=0;me<ke.locationSize;me++)D(ke.location+me,Re.meshPerAttribute);!0!==X.isInstancedMesh&&void 0===Q._maxInstanceCount&&(Q._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let me=0;me<ke.locationSize;me++)C(ke.location+me);i.bindBuffer(34962,Z);for(let me=0;me<ke.locationSize;me++)N(ke.location+me,Fe/ke.locationSize,ut,ue,st*rt,(Ee+Fe/ke.locationSize*me)*rt)}else{if(se.isInstancedBufferAttribute){for(let Re=0;Re<ke.locationSize;Re++)D(ke.location+Re,se.meshPerAttribute);!0!==X.isInstancedMesh&&void 0===Q._maxInstanceCount&&(Q._maxInstanceCount=se.meshPerAttribute*se.count)}else for(let Re=0;Re<ke.locationSize;Re++)C(ke.location+Re);i.bindBuffer(34962,Z);for(let Re=0;Re<ke.locationSize;Re++)N(ke.location+Re,Fe/ke.locationSize,ut,ue,Fe*rt,Fe/ke.locationSize*Re*rt)}}else if(void 0!==we){const ue=we[qe];if(void 0!==ue)switch(ue.length){case 2:i.vertexAttrib2fv(ke.location,ue);break;case 3:i.vertexAttrib3fv(ke.location,ue);break;case 4:i.vertexAttrib4fv(ke.location,ue);break;default:i.vertexAttrib1fv(ke.location,ue)}}}}I()}(X,ne,q,Q),null!==Y&&i.bindBuffer(34963,t.get(Y).buffer))},reset:le,resetDefaultState:$,dispose:function A(){le();for(const X in a){const ne=a[X];for(const q in ne){const Q=ne[q];for(const Y in Q)_(Q[Y].object),delete Q[Y];delete ne[q]}delete a[X]}},releaseStatesOfGeometry:function k(X){if(void 0===a[X.id])return;const ne=a[X.id];for(const q in ne){const Q=ne[q];for(const Y in Q)_(Q[Y].object),delete Q[Y];delete ne[q]}delete a[X.id]},releaseStatesOfProgram:function ee(X){for(const ne in a){const q=a[ne];if(void 0===q[X.id])continue;const Q=q[X.id];for(const Y in Q)_(Q[Y].object),delete Q[Y];delete q[X.id]}},initAttributes:w,enableAttribute:C,disableUnusedAttributes:I}}function vie(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,d){i.drawArrays(s,c,d),t.update(d,s,1)},this.renderInstances=function l(c,d,f){if(0===f)return;let p,m;if(r)p=i,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[m](s,c,d,f),t.update(d,s,f)}}function yie(i,e,t){let n;function s(N){if("highp"===N){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return"mediump"===N&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===i.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=!0===t.logarithmicDepthBuffer,f=i.getParameter(34930),p=i.getParameter(35660),m=i.getParameter(3379),_=i.getParameter(34076),b=i.getParameter(34921),y=i.getParameter(36347),v=i.getParameter(36348),M=i.getParameter(36349),w=p>0,C=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const N=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:M,vertexTextures:w,floatFragmentTextures:C,floatVertexTextures:w&&C,maxSamples:o?i.getParameter(36183):0}}function bie(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new uh,a=new bn,l={value:null,needsUpdate:!1};function d(f,p,m,_){const b=null!==f?f.length:0;let y=null;if(0!==b){if(y=l.value,!0!==_||null===y){const v=m+4*b,M=p.matrixWorldInverse;a.getNormalMatrix(M),(null===y||y.length<v)&&(y=new Float32Array(v));for(let w=0,C=m;w!==b;++w,C+=4)o.copy(f[w]).applyMatrix4(M,a),o.normal.toArray(y,C),y[C+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,y}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=0!==f.length||p||0!==n||r;return r=p,n=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=d(f,p,0)},this.setState=function(f,p,m){const _=f.clippingPlanes,b=f.clipIntersection,y=f.clipShadows,v=i.get(f);if(!r||null===_||0===_.length||s&&!y)s?d(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const M=s?0:n,w=4*M;let C=v.clippingState||null;l.value=C,C=d(_,p,w,m);for(let D=0;D!==w;++D)C[D]=t[D];v.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}}}function xie(i){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new _te(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class TI extends EI{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const jV=[.125,.215,.35,.446,.526,.582],II=new TI,qV=new je;let RI=null;const fh=(1+Math.sqrt(5))/2,gm=1/fh,XV=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,fh,gm),new O(0,fh,-gm),new O(gm,0,fh),new O(-gm,0,fh),new O(fh,gm,0),new O(-fh,gm,0)];class YV{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){RI=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=JV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=KV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(RI),e.scissorTest=!1,HM(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),RI=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:ur,minFilter:ur,generateMipmaps:!1,type:Wv,format:ma,encoding:ih,depthBuffer:!1},r=ZV(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ZV(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function wie(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+jV.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-4?l=jV[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,_=6,b=3,y=2,v=1,M=new Float32Array(b*_*m),w=new Float32Array(y*_*m),C=new Float32Array(v*_*m);for(let I=0;I<m;I++){const N=I%3*2/3-1,V=I>2?0:-1;M.set([N,V,0,N+2/3,V,0,N+2/3,V+1,0,N,V,0,N+2/3,V+1,0,N,V+1,0],b*_*I),w.set(p,y*_*I),C.set([I,I,I,I,I,I],v*_*I)}const D=new sn;D.setAttribute("position",new hr(M,b)),D.setAttribute("uv",new hr(w,y)),D.setAttribute("faceIndex",new hr(C,v)),e.push(D),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function Mie(i,e,t){const n=new Float32Array(20),r=new O(0,1,0);return new Nu({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new wi(this._lodPlanes[0],e);this._renderer.compile(t,II)}_sceneToCubeUV(e,t,n,r){const a=new Mr(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(qV),d.toneMapping=0,d.autoClear=!1;const m=new Al({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new wi(new ch,m);let b=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,b=!0):(m.color.copy(qV),b=!0);for(let v=0;v<6;v++){const M=v%3;0===M?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):1===M?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const w=this._cubeSize;HM(r,M*w,v>2?w:0,w,w),d.setRenderTarget(r),b&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=y}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=JV()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=KV());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new wi(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;HM(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,II)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,XV[(r-1)%XV.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new wi(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,b=s/_,y=isFinite(s)?1+Math.floor(3*b):20;y>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);const v=[];let M=0;for(let N=0;N<20;++N){const V=N/b,A=Math.exp(-V*V/2);v.push(A),0===N?M+=A:N<y&&(M+=2*A)}for(let N=0;N<v.length;N++)v[N]=v[N]/M;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=v,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=_,p.mipInt.value=w-n;const C=this._sizeLods[r];HM(t,3*C*(r>w-4?r-w+4:0),4*(this._cubeSize-C),3*C,2*C),l.setRenderTarget(t),l.render(f,II)}}function ZV(i,e,t){const n=new oh(i,e,t);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function HM(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function KV(){return new Nu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function JV(){return new Nu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Cie(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,d=301===l||302===l;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new YV(i)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||d&&f&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(f)){null===t&&(t=new YV(i));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Sie(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Eie(i,e,t,n){const r={},s=new WeakMap;function o(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),n.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function c(f){const p=[],m=f.index,_=f.attributes.position;let b=0;if(null!==m){const M=m.array;b=m.version;for(let w=0,C=M.length;w<C;w+=3){const D=M[w+0],I=M[w+1],N=M[w+2];p.push(D,I,I,N,N,D)}}else{b=_.version;for(let w=0,C=_.array.length/3-1;w<C;w+=3){const D=w+0,I=w+1,N=w+2;p.push(D,I,I,N,N,D)}}const y=new(CV(p)?BV:NV)(p,1);y.version=b;const v=s.get(f);v&&e.remove(v),s.set(f,y)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function l(f){const p=f.attributes;for(const _ in p)e.update(p[_],34962);const m=f.morphAttributes;for(const _ in m){const b=m[_];for(let y=0,v=b.length;y<v;y++)e.update(b[y],34962)}},getWireframeAttribute:function d(f){const p=s.get(f);if(p){const m=f.index;null!==m&&p.version<m.version&&c(f)}else c(f);return s.get(f)}}}function Die(i,e,t,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(p){s=p},this.setIndex=function c(p){a=p.type,l=p.bytesPerElement},this.render=function d(p,m){i.drawElements(s,m,a,p*l),t.update(m,s,1)},this.renderInstances=function f(p,m,_){if(0===_)return;let b,y;if(r)b=i,y="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",null===b)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[y](s,m,a,p*l,_),t.update(m,s,_)}}function Aie(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Tie(i,e){return i[0]-e[0]}function Iie(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Rie(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new Qn,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,f){const p=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=void 0!==m?m.length:0;let b=s.get(d);if(void 0===b||b.count!==_){let X=function(){le.dispose(),s.delete(d),d.removeEventListener("dispose",X)};void 0!==b&&b.texture.dispose();const M=void 0!==d.morphAttributes.position,w=void 0!==d.morphAttributes.normal,C=void 0!==d.morphAttributes.color,D=d.morphAttributes.position||[],I=d.morphAttributes.normal||[],N=d.morphAttributes.color||[];let V=0;!0===M&&(V=1),!0===w&&(V=2),!0===C&&(V=3);let A=d.attributes.position.count*V,k=1;A>e.maxTextureSize&&(k=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const ee=new Float32Array(A*k*4*_),le=new dI(ee,A,k,_);le.type=Ru,le.needsUpdate=!0;const $=4*V;for(let ne=0;ne<_;ne++){const q=D[ne],Q=I[ne],Y=N[ne],ae=A*k*4*ne;for(let we=0;we<q.count;we++){const qe=we*$;!0===M&&(o.fromBufferAttribute(q,we),ee[ae+qe+0]=o.x,ee[ae+qe+1]=o.y,ee[ae+qe+2]=o.z,ee[ae+qe+3]=0),!0===w&&(o.fromBufferAttribute(Q,we),ee[ae+qe+4]=o.x,ee[ae+qe+5]=o.y,ee[ae+qe+6]=o.z,ee[ae+qe+7]=0),!0===C&&(o.fromBufferAttribute(Y,we),ee[ae+qe+8]=o.x,ee[ae+qe+9]=o.y,ee[ae+qe+10]=o.z,ee[ae+qe+11]=4===Y.itemSize?o.w:1)}}b={count:_,texture:le,size:new Me(A,k)},s.set(d,b),d.addEventListener("dispose",X)}let y=0;for(let M=0;M<p.length;M++)y+=p[M];const v=d.morphTargetsRelative?1:1-y;f.getUniforms().setValue(i,"morphTargetBaseInfluence",v),f.getUniforms().setValue(i,"morphTargetInfluences",p),f.getUniforms().setValue(i,"morphTargetsTexture",b.texture,t),f.getUniforms().setValue(i,"morphTargetsTextureSize",b.size)}else{const m=void 0===p?0:p.length;let _=n[d.id];if(void 0===_||_.length!==m){_=[];for(let w=0;w<m;w++)_[w]=[w,0];n[d.id]=_}for(let w=0;w<m;w++){const C=_[w];C[0]=w,C[1]=p[w]}_.sort(Iie);for(let w=0;w<8;w++)w<m&&_[w][1]?(a[w][0]=_[w][0],a[w][1]=_[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(Tie);const b=d.morphAttributes.position,y=d.morphAttributes.normal;let v=0;for(let w=0;w<8;w++){const C=a[w],D=C[0],I=C[1];D!==Number.MAX_SAFE_INTEGER&&I?(b&&d.getAttribute("morphTarget"+w)!==b[D]&&d.setAttribute("morphTarget"+w,b[D]),y&&d.getAttribute("morphNormal"+w)!==y[D]&&d.setAttribute("morphNormal"+w,y[D]),r[w]=I,v+=I):(b&&!0===d.hasAttribute("morphTarget"+w)&&d.deleteAttribute("morphTarget"+w),y&&!0===d.hasAttribute("morphNormal"+w)&&d.deleteAttribute("morphNormal"+w),r[w]=0)}const M=d.morphTargetsRelative?1:1-v;f.getUniforms().setValue(i,"morphTargetBaseInfluence",M),f.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function Pie(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,f=e.get(l,l.geometry);return r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const QV=new Pu,ez=new dI,tz=new EV,nz=new BM,iz=[],rz=[],sz=new Float32Array(16),oz=new Float32Array(9),az=new Float32Array(4);function _m(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=iz[r];if(void 0===s&&(s=new Float32Array(r),iz[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Cr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Sr(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function GM(i,e){let t=rz[e];void 0===t&&(t=new Int32Array(e),rz[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function kie(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Oie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;i.uniform2fv(this.addr,e),Sr(t,e)}}function Lie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Cr(t,e))return;i.uniform3fv(this.addr,e),Sr(t,e)}}function Fie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;i.uniform4fv(this.addr,e),Sr(t,e)}}function Nie(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Cr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Sr(t,e)}else{if(Cr(t,n))return;az.set(n),i.uniformMatrix2fv(this.addr,!1,az),Sr(t,n)}}function Bie(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Cr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Sr(t,e)}else{if(Cr(t,n))return;oz.set(n),i.uniformMatrix3fv(this.addr,!1,oz),Sr(t,n)}}function Uie(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Cr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Sr(t,e)}else{if(Cr(t,n))return;sz.set(n),i.uniformMatrix4fv(this.addr,!1,sz),Sr(t,n)}}function Vie(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function zie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;i.uniform2iv(this.addr,e),Sr(t,e)}}function Hie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Cr(t,e))return;i.uniform3iv(this.addr,e),Sr(t,e)}}function Gie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;i.uniform4iv(this.addr,e),Sr(t,e)}}function Wie(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function $ie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Cr(t,e))return;i.uniform2uiv(this.addr,e),Sr(t,e)}}function jie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Cr(t,e))return;i.uniform3uiv(this.addr,e),Sr(t,e)}}function qie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Cr(t,e))return;i.uniform4uiv(this.addr,e),Sr(t,e)}}function Xie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||QV,r)}function Yie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||tz,r)}function Zie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||nz,r)}function Kie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||ez,r)}function Qie(i,e){i.uniform1fv(this.addr,e)}function ere(i,e){const t=_m(e,this.size,2);i.uniform2fv(this.addr,t)}function tre(i,e){const t=_m(e,this.size,3);i.uniform3fv(this.addr,t)}function nre(i,e){const t=_m(e,this.size,4);i.uniform4fv(this.addr,t)}function ire(i,e){const t=_m(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function rre(i,e){const t=_m(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function sre(i,e){const t=_m(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function ore(i,e){i.uniform1iv(this.addr,e)}function are(i,e){i.uniform2iv(this.addr,e)}function lre(i,e){i.uniform3iv(this.addr,e)}function cre(i,e){i.uniform4iv(this.addr,e)}function ure(i,e){i.uniform1uiv(this.addr,e)}function dre(i,e){i.uniform2uiv(this.addr,e)}function hre(i,e){i.uniform3uiv(this.addr,e)}function fre(i,e){i.uniform4uiv(this.addr,e)}function pre(i,e,t){const n=this.cache,r=e.length,s=GM(t,r);Cr(n,s)||(i.uniform1iv(this.addr,s),Sr(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||QV,s[o])}function mre(i,e,t){const n=this.cache,r=e.length,s=GM(t,r);Cr(n,s)||(i.uniform1iv(this.addr,s),Sr(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||tz,s[o])}function gre(i,e,t){const n=this.cache,r=e.length,s=GM(t,r);Cr(n,s)||(i.uniform1iv(this.addr,s),Sr(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||nz,s[o])}function _re(i,e,t){const n=this.cache,r=e.length,s=GM(t,r);Cr(n,s)||(i.uniform1iv(this.addr,s),Sr(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||ez,s[o])}class yre{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function Jie(i){switch(i){case 5126:return kie;case 35664:return Oie;case 35665:return Lie;case 35666:return Fie;case 35674:return Nie;case 35675:return Bie;case 35676:return Uie;case 5124:case 35670:return Vie;case 35667:case 35671:return zie;case 35668:case 35672:return Hie;case 35669:case 35673:return Gie;case 5125:return Wie;case 36294:return $ie;case 36295:return jie;case 36296:return qie;case 35678:case 36198:case 36298:case 36306:case 35682:return Xie;case 35679:case 36299:case 36307:return Yie;case 35680:case 36300:case 36308:case 36293:return Zie;case 36289:case 36303:case 36311:case 36292:return Kie}}(t.type)}}class bre{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function vre(i){switch(i){case 5126:return Qie;case 35664:return ere;case 35665:return tre;case 35666:return nre;case 35674:return ire;case 35675:return rre;case 35676:return sre;case 5124:case 35670:return ore;case 35667:case 35671:return are;case 35668:case 35672:return lre;case 35669:case 35673:return cre;case 5125:return ure;case 36294:return dre;case 36295:return hre;case 36296:return fre;case 35678:case 36198:case 36298:case 36306:case 35682:return pre;case 35679:case 36299:case 36307:return mre;case 35680:case 36300:case 36308:case 36293:return gre;case 36289:case 36303:case 36311:case 36292:return _re}}(t.type)}}class xre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const kI=/(\w+)(\])?(\[|\.)?/g;function lz(i,e){i.seq.push(e),i.map[e.id]=e}function wre(i,e,t){const n=i.name,r=n.length;for(kI.lastIndex=0;;){const s=kI.exec(n),o=kI.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){lz(t,void 0===c?new yre(a,i,e):new bre(a,i,e));break}{let f=t.map[a];void 0===f&&(f=new xre(a),lz(t,f)),t=f}}}class WM{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);wre(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function cz(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Mre=0;function uz(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Cre(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join("\n")}(i.getShaderSource(e),o)}return r}function Ere(i,e){const t=function Sre(i){switch(i){case ih:return["Linear","( value )"];case si:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Dre(i,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Qv(i){return""!==i}function dz(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hz(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Rre=/^[ \t]*#include +<([\w\d./]+)>/gm;function OI(i){return i.replace(Rre,Pre)}function Pre(i,e){const t=ln[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return OI(t)}const kre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fz(i){return i.replace(kre,Ore)}function Ore(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function pz(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function Vre(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Lre(i){let e="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Fre(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),d=function Nre(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function Bre(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function Ure(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),m=t.isWebGL2?"":function Are(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Qv).join("\n")}(t),_=function Tre(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),b=r.createProgram();let y,v,M=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(y=[_].filter(Qv).join("\n"),y.length>0&&(y+="\n"),v=[m,_].filter(Qv).join("\n"),v.length>0&&(v+="\n")):(y=[pz(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Qv).join("\n"),v=[m,pz(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?ln.tonemapping_pars_fragment:"",0!==t.toneMapping?Dre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ln.encodings_pars_fragment,Ere("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(Qv).join("\n")),o=OI(o),o=dz(o,t),o=hz(o,t),a=OI(a),a=dz(a,t),a=hz(a,t),o=fz(o),a=fz(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(M="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,v=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const C=M+v+a,D=cz(r,35633,M+y+o),I=cz(r,35632,C);if(r.attachShader(b,D),r.attachShader(b,I),void 0!==t.index0AttributeName?r.bindAttribLocation(b,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),i.debug.checkShaderErrors){const A=r.getProgramInfoLog(b).trim(),k=r.getShaderInfoLog(D).trim(),ee=r.getShaderInfoLog(I).trim();let le=!0,$=!0;if(!1===r.getProgramParameter(b,35714))if(le=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,b,D,I);else{const X=uz(r,D,"vertex"),ne=uz(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+A+"\n"+X+"\n"+ne)}else""!==A?console.warn("THREE.WebGLProgram: Program Info Log:",A):(""===k||""===ee)&&($=!1);$&&(this.diagnostics={runnable:le,programLog:A,vertexShader:{log:k,prefix:y},fragmentShader:{log:ee,prefix:v}})}let N,V;return r.deleteShader(D),r.deleteShader(I),this.getUniforms=function(){return void 0===N&&(N=new WM(r,b)),N},this.getAttributes=function(){return void 0===V&&(V=function Ire(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,b)),V},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.name=t.shaderName,this.id=Mre++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=D,this.fragmentShader=I,this}let zre=0;class Hre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Gre(e),t.set(e,n)),n}}class Gre{constructor(e){this.id=zre++,this.code=e,this.usedTimes=0}}function Wre(i,e,t,n,r,s,o){const a=new vI,l=new Hre,c=[],d=r.isWebGL2,f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(A){return 1===A?"uv2":"uv"}return{getParameters:function y(A,k,ee,le,$){const X=le.fog,ne=$.geometry,Q=(A.isMeshStandardMaterial?t:e).get(A.envMap||(A.isMeshStandardMaterial?le.environment:null)),Y=Q&&306===Q.mapping?Q.image.height:null,ae=_[A.type];null!==A.precision&&(m=r.getMaxPrecision(A.precision),m!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const we=ne.morphAttributes.position||ne.morphAttributes.normal||ne.morphAttributes.color,qe=void 0!==we?we.length:0;let se,ue,Fe,$e,ke=0;if(void 0!==ne.morphAttributes.position&&(ke=1),void 0!==ne.morphAttributes.normal&&(ke=2),void 0!==ne.morphAttributes.color&&(ke=3),ae){const Ze=Il[ae];se=Ze.vertexShader,ue=Ze.fragmentShader}else se=A.vertexShader,ue=A.fragmentShader,l.update(A),Fe=l.getVertexShaderID(A),$e=l.getFragmentShaderID(A);const Z=i.getRenderTarget(),ut=!0===$.isInstancedMesh,rt=!!A.map,st=!!Q,Ee=!!A.aoMap,me=!!A.lightMap,De=!!A.bumpMap,nt=!!A.normalMap,ze=!!A.displacementMap,At=!!A.emissiveMap,Tt=!!A.metalnessMap,bt=!!A.roughnessMap,hn=A.clearcoat>0,Bn=A.iridescence>0,F=A.sheen>0,P=A.transmission>0,ie=hn&&!!A.clearcoatMap,Ae=hn&&!!A.clearcoatNormalMap,Ie=hn&&!!A.clearcoatRoughnessMap,Ge=Bn&&!!A.iridescenceMap,Rt=Bn&&!!A.iridescenceThicknessMap,Qe=F&&!!A.sheenColorMap,pe=F&&!!A.sheenRoughnessMap,ot=!!A.specularMap,xt=!!A.specularColorMap,It=!!A.specularIntensityMap,it=P&&!!A.transmissionMap,dt=P&&!!A.thicknessMap,ei=!!A.alphaMap,H=!!A.extensions,he=!!ne.attributes.uv2;return{isWebGL2:d,shaderID:ae,shaderName:A.type,vertexShader:se,fragmentShader:ue,defines:A.defines,customVertexShaderID:Fe,customFragmentShaderID:$e,isRawShaderMaterial:!0===A.isRawShaderMaterial,glslVersion:A.glslVersion,precision:m,instancing:ut,instancingColor:ut&&null!==$.instanceColor,supportsVertexTextures:p,outputEncoding:null===Z?i.outputEncoding:!0===Z.isXRRenderTarget?Z.texture.encoding:ih,map:rt,matcap:!!A.matcap,envMap:st,envMapMode:st&&Q.mapping,envMapCubeUVHeight:Y,aoMap:Ee,lightMap:me,bumpMap:De,normalMap:nt,displacementMap:p&&ze,emissiveMap:At,normalMapObjectSpace:nt&&1===A.normalMapType,normalMapTangentSpace:nt&&0===A.normalMapType,decodeVideoTexture:rt&&!0===A.map.isVideoTexture&&A.map.encoding===si,metalnessMap:Tt,roughnessMap:bt,clearcoat:hn,clearcoatMap:ie,clearcoatNormalMap:Ae,clearcoatRoughnessMap:Ie,iridescence:Bn,iridescenceMap:Ge,iridescenceThicknessMap:Rt,sheen:F,sheenColorMap:Qe,sheenRoughnessMap:pe,specularMap:ot,specularColorMap:xt,specularIntensityMap:It,transmission:P,transmissionMap:it,thicknessMap:dt,gradientMap:!!A.gradientMap,opaque:!1===A.transparent&&1===A.blending,alphaMap:ei,alphaTest:A.alphaTest>0,combine:A.combine,mapUv:rt&&b(A.map.channel),aoMapUv:Ee&&b(A.aoMap.channel),lightMapUv:me&&b(A.lightMap.channel),bumpMapUv:De&&b(A.bumpMap.channel),normalMapUv:nt&&b(A.normalMap.channel),displacementMapUv:ze&&b(A.displacementMap.channel),emissiveMapUv:At&&b(A.emissiveMap.channel),metalnessMapUv:Tt&&b(A.metalnessMap.channel),roughnessMapUv:bt&&b(A.roughnessMap.channel),clearcoatMapUv:ie&&b(A.clearcoatMap.channel),clearcoatNormalMapUv:Ae&&b(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&b(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&b(A.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&b(A.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&b(A.sheenColorMap.channel),sheenRoughnessMapUv:pe&&b(A.sheenRoughnessMap.channel),specularMapUv:ot&&b(A.specularMap.channel),specularColorMapUv:xt&&b(A.specularColorMap.channel),specularIntensityMapUv:It&&b(A.specularIntensityMap.channel),transmissionMapUv:it&&b(A.transmissionMap.channel),thicknessMapUv:dt&&b(A.thicknessMap.channel),alphaMapUv:ei&&b(A.alphaMap.channel),vertexTangents:nt&&!!ne.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:!0===A.vertexColors&&!!ne.attributes.color&&4===ne.attributes.color.itemSize,vertexUvs2:he,pointsUvs:!0===$.isPoints&&!!ne.attributes.uv&&(rt||ei),fog:!!X,useFog:!0===A.fog,fogExp2:X&&X.isFogExp2,flatShading:!0===A.flatShading,sizeAttenuation:!0===A.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===$.isSkinnedMesh,morphTargets:void 0!==ne.morphAttributes.position,morphNormals:void 0!==ne.morphAttributes.normal,morphColors:void 0!==ne.morphAttributes.color,morphTargetsCount:qe,morphTextureStride:ke,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:i.shadowMap.enabled&&ee.length>0,shadowMapType:i.shadowMap.type,toneMapping:A.toneMapped?i.toneMapping:0,useLegacyLights:i.useLegacyLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:2===A.side,flipSided:1===A.side,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:H&&!0===A.extensions.derivatives,extensionFragDepth:H&&!0===A.extensions.fragDepth,extensionDrawBuffers:H&&!0===A.extensions.drawBuffers,extensionShaderTextureLOD:H&&!0===A.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}},getProgramCacheKey:function v(A){const k=[];if(A.shaderID?k.push(A.shaderID):(k.push(A.customVertexShaderID),k.push(A.customFragmentShaderID)),void 0!==A.defines)for(const ee in A.defines)k.push(ee),k.push(A.defines[ee]);return!1===A.isRawShaderMaterial&&(function M(A,k){A.push(k.precision),A.push(k.outputEncoding),A.push(k.envMapMode),A.push(k.envMapCubeUVHeight),A.push(k.mapUv),A.push(k.alphaMapUv),A.push(k.lightMapUv),A.push(k.aoMapUv),A.push(k.bumpMapUv),A.push(k.normalMapUv),A.push(k.displacementMapUv),A.push(k.emissiveMapUv),A.push(k.metalnessMapUv),A.push(k.roughnessMapUv),A.push(k.clearcoatMapUv),A.push(k.clearcoatNormalMapUv),A.push(k.clearcoatRoughnessMapUv),A.push(k.iridescenceMapUv),A.push(k.iridescenceThicknessMapUv),A.push(k.sheenColorMapUv),A.push(k.sheenRoughnessMapUv),A.push(k.specularMapUv),A.push(k.specularColorMapUv),A.push(k.specularIntensityMapUv),A.push(k.transmissionMapUv),A.push(k.thicknessMapUv),A.push(k.combine),A.push(k.fogExp2),A.push(k.sizeAttenuation),A.push(k.morphTargetsCount),A.push(k.morphAttributeCount),A.push(k.numDirLights),A.push(k.numPointLights),A.push(k.numSpotLights),A.push(k.numSpotLightMaps),A.push(k.numHemiLights),A.push(k.numRectAreaLights),A.push(k.numDirLightShadows),A.push(k.numPointLightShadows),A.push(k.numSpotLightShadows),A.push(k.numSpotLightShadowsWithMaps),A.push(k.shadowMapType),A.push(k.toneMapping),A.push(k.numClippingPlanes),A.push(k.numClipIntersection),A.push(k.depthPacking)}(k,A),function w(A,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUvs2&&a.enable(13),k.vertexTangents&&a.enable(14),A.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.useLegacyLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.decodeVideoTexture&&a.enable(17),k.opaque&&a.enable(18),k.pointsUvs&&a.enable(19),A.push(a.mask)}(k,A),k.push(i.outputEncoding)),k.push(A.customProgramCacheKey),k.join()},getUniforms:function C(A){const k=_[A.type];let ee;return ee=k?fte.clone(Il[k].uniforms):A.uniforms,ee},acquireProgram:function D(A,k){let ee;for(let le=0,$=c.length;le<$;le++){const X=c[le];if(X.cacheKey===k){ee=X,++ee.usedTimes;break}}return void 0===ee&&(ee=new Vre(i,k,A,s),c.push(ee)),ee},releaseProgram:function I(A){if(0==--A.usedTimes){const k=c.indexOf(A);c[k]=c[c.length-1],c.pop(),A.destroy()}},releaseShaderCache:function N(A){l.remove(A)},programs:c,dispose:function V(){l.dispose()}}}function $re(){let i=new WeakMap;return{get:function e(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function t(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function jre(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function mz(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function gz(){const i=[];let e=0;const t=[],n=[],r=[];function o(f,p,m,_,b,y){let v=i[e];return void 0===v?(v={id:f.id,object:f,geometry:p,material:m,groupOrder:_,renderOrder:f.renderOrder,z:b,group:y},i[e]=v):(v.id=f.id,v.object=f,v.geometry=p,v.material=m,v.groupOrder=_,v.renderOrder=f.renderOrder,v.z=b,v.group=y),e++,v}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function a(f,p,m,_,b,y){const v=o(f,p,m,_,b,y);m.transmission>0?n.push(v):!0===m.transparent?r.push(v):t.push(v)},unshift:function l(f,p,m,_,b,y){const v=o(f,p,m,_,b,y);m.transmission>0?n.unshift(v):!0===m.transparent?r.unshift(v):t.unshift(v)},finish:function d(){for(let f=e,p=i.length;f<p;f++){const m=i[f];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(f,p){t.length>1&&t.sort(f||jre),n.length>1&&n.sort(p||mz),r.length>1&&r.sort(p||mz)}}}function qre(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let o;return void 0===s?(o=new gz,i.set(n,[o])):r>=s.length?(o=new gz,s.push(o)):o=s[r],o},dispose:function t(){i=new WeakMap}}}function Xre(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new je};break;case"SpotLight":t={position:new O,direction:new O,color:new je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new je,groundColor:new je};break;case"RectAreaLight":t={color:new je,position:new O,halfWidth:new O,halfHeight:new O}}return i[e.id]=t,t}}}let Zre=0;function Kre(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Jre(i,e){const t=new Xre,n=function Yre(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new O);const s=new O,o=new tn,a=new tn;return{setup:function l(d,f){let p=0,m=0,_=0;for(let ee=0;ee<9;ee++)r.probe[ee].set(0,0,0);let b=0,y=0,v=0,M=0,w=0,C=0,D=0,I=0,N=0,V=0;d.sort(Kre);const A=!0===f?Math.PI:1;for(let ee=0,le=d.length;ee<le;ee++){const $=d[ee],X=$.color,ne=$.intensity,q=$.distance,Q=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)p+=X.r*ne*A,m+=X.g*ne*A,_+=X.b*ne*A;else if($.isLightProbe)for(let Y=0;Y<9;Y++)r.probe[Y].addScaledVector($.sh.coefficients[Y],ne);else if($.isDirectionalLight){const Y=t.get($);if(Y.color.copy($.color).multiplyScalar($.intensity*A),$.castShadow){const ae=$.shadow,we=n.get($);we.shadowBias=ae.bias,we.shadowNormalBias=ae.normalBias,we.shadowRadius=ae.radius,we.shadowMapSize=ae.mapSize,r.directionalShadow[b]=we,r.directionalShadowMap[b]=Q,r.directionalShadowMatrix[b]=$.shadow.matrix,C++}r.directional[b]=Y,b++}else if($.isSpotLight){const Y=t.get($);Y.position.setFromMatrixPosition($.matrixWorld),Y.color.copy(X).multiplyScalar(ne*A),Y.distance=q,Y.coneCos=Math.cos($.angle),Y.penumbraCos=Math.cos($.angle*(1-$.penumbra)),Y.decay=$.decay,r.spot[v]=Y;const ae=$.shadow;if($.map&&(r.spotLightMap[N]=$.map,N++,ae.updateMatrices($),$.castShadow&&V++),r.spotLightMatrix[v]=ae.matrix,$.castShadow){const we=n.get($);we.shadowBias=ae.bias,we.shadowNormalBias=ae.normalBias,we.shadowRadius=ae.radius,we.shadowMapSize=ae.mapSize,r.spotShadow[v]=we,r.spotShadowMap[v]=Q,I++}v++}else if($.isRectAreaLight){const Y=t.get($);Y.color.copy(X).multiplyScalar(ne),Y.halfWidth.set(.5*$.width,0,0),Y.halfHeight.set(0,.5*$.height,0),r.rectArea[M]=Y,M++}else if($.isPointLight){const Y=t.get($);if(Y.color.copy($.color).multiplyScalar($.intensity*A),Y.distance=$.distance,Y.decay=$.decay,$.castShadow){const ae=$.shadow,we=n.get($);we.shadowBias=ae.bias,we.shadowNormalBias=ae.normalBias,we.shadowRadius=ae.radius,we.shadowMapSize=ae.mapSize,we.shadowCameraNear=ae.camera.near,we.shadowCameraFar=ae.camera.far,r.pointShadow[y]=we,r.pointShadowMap[y]=Q,r.pointShadowMatrix[y]=$.shadow.matrix,D++}r.point[y]=Y,y++}else if($.isHemisphereLight){const Y=t.get($);Y.skyColor.copy($.color).multiplyScalar(ne*A),Y.groundColor.copy($.groundColor).multiplyScalar(ne*A),r.hemi[w]=Y,w++}}M>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Be.LTC_FLOAT_1,r.rectAreaLTC2=Be.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Be.LTC_HALF_1,r.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=_;const k=r.hash;(k.directionalLength!==b||k.pointLength!==y||k.spotLength!==v||k.rectAreaLength!==M||k.hemiLength!==w||k.numDirectionalShadows!==C||k.numPointShadows!==D||k.numSpotShadows!==I||k.numSpotMaps!==N)&&(r.directional.length=b,r.spot.length=v,r.rectArea.length=M,r.point.length=y,r.hemi.length=w,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=D,r.pointShadowMap.length=D,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=D,r.spotLightMatrix.length=I+N-V,r.spotLightMap.length=N,r.numSpotLightShadowsWithMaps=V,k.directionalLength=b,k.pointLength=y,k.spotLength=v,k.rectAreaLength=M,k.hemiLength=w,k.numDirectionalShadows=C,k.numPointShadows=D,k.numSpotShadows=I,k.numSpotMaps=N,r.version=Zre++)},setupView:function c(d,f){let p=0,m=0,_=0,b=0,y=0;const v=f.matrixWorldInverse;for(let M=0,w=d.length;M<w;M++){const C=d[M];if(C.isDirectionalLight){const D=r.directional[p];D.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(v),p++}else if(C.isSpotLight){const D=r.spot[_];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(v),D.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(v),_++}else if(C.isRectAreaLight){const D=r.rectArea[b];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(v),a.identity(),o.copy(C.matrixWorld),o.premultiply(v),a.extractRotation(o),D.halfWidth.set(.5*C.width,0,0),D.halfHeight.set(0,.5*C.height,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),b++}else if(C.isPointLight){const D=r.point[m];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(v),m++}else if(C.isHemisphereLight){const D=r.hemi[y];D.direction.setFromMatrixPosition(C.matrixWorld),D.direction.transformDirection(v),y++}}},state:r}}function _z(i,e){const t=new Jre(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function l(f){t.setup(n,f)},setupLightsView:function c(f){t.setupView(n,f)},pushLight:function o(f){n.push(f)},pushShadow:function a(f){r.push(f)}}}function Qre(i,e){let t=new WeakMap;return{get:function n(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new _z(i,e),t.set(s,[l])):o>=a.length?(l=new _z(i,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class vz extends Dl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yz extends Dl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function nse(i,e,t){let n=new AI;const r=new Me,s=new Me,o=new Qn,a=new vz({depthPacking:3201}),l=new yz,c={},d=t.maxTextureSize,f={0:1,1:0,2:2},p=new Nu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const _=new sn;_.setAttribute("position",new hr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new wi(_,p),y=this;function v(C,D){const I=e.update(b);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===C.mapPass&&(C.mapPass=new oh(r.x,r.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,i.setRenderTarget(C.mapPass),i.clear(),i.renderBufferDirect(D,null,I,p,b,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,i.setRenderTarget(C.map),i.clear(),i.renderBufferDirect(D,null,I,m,b,null)}function M(C,D,I,N){let V=null;const A=!0===I.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(void 0!==A)V=A;else if(V=!0===I.isPointLight?l:a,i.localClippingEnabled&&!0===D.clipShadows&&Array.isArray(D.clippingPlanes)&&0!==D.clippingPlanes.length||D.displacementMap&&0!==D.displacementScale||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const k=V.uuid,ee=D.uuid;let le=c[k];void 0===le&&(le={},c[k]=le);let $=le[ee];void 0===$&&($=V.clone(),le[ee]=$),V=$}return V.visible=D.visible,V.wireframe=D.wireframe,V.side=3===N?null!==D.shadowSide?D.shadowSide:D.side:null!==D.shadowSide?D.shadowSide:f[D.side],V.alphaMap=D.alphaMap,V.alphaTest=D.alphaTest,V.map=D.map,V.clipShadows=D.clipShadows,V.clippingPlanes=D.clippingPlanes,V.clipIntersection=D.clipIntersection,V.displacementMap=D.displacementMap,V.displacementScale=D.displacementScale,V.displacementBias=D.displacementBias,V.wireframeLinewidth=D.wireframeLinewidth,V.linewidth=D.linewidth,!0===I.isPointLight&&!0===V.isMeshDistanceMaterial&&(i.properties.get(V).light=I),V}function w(C,D,I,N,V){if(!1===C.visible)return;if(C.layers.test(D.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&3===V)&&(!C.frustumCulled||n.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,C.matrixWorld);const ee=e.update(C),le=C.material;if(Array.isArray(le)){const $=ee.groups;for(let X=0,ne=$.length;X<ne;X++){const q=$[X],Q=le[q.materialIndex];if(Q&&Q.visible){const Y=M(C,Q,N,V);i.renderBufferDirect(I,null,ee,Y,C,q)}}}else if(le.visible){const $=M(C,le,N,V);i.renderBufferDirect(I,null,ee,$,C,null)}}const k=C.children;for(let ee=0,le=k.length;ee<le;ee++)w(k[ee],D,I,N,V)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(C,D,I){if(!1===y.enabled||!1===y.autoUpdate&&!1===y.needsUpdate||0===C.length)return;const N=i.getRenderTarget(),V=i.getActiveCubeFace(),A=i.getActiveMipmapLevel(),k=i.state;k.setBlending(0),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);for(let ee=0,le=C.length;ee<le;ee++){const $=C[ee],X=$.shadow;if(void 0===X){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(!1===X.autoUpdate&&!1===X.needsUpdate)continue;r.copy(X.mapSize);const ne=X.getFrameExtents();r.multiply(ne),s.copy(X.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/ne.x),r.x=s.x*ne.x,X.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/ne.y),r.y=s.y*ne.y,X.mapSize.y=s.y)),null===X.map&&(X.map=new oh(r.x,r.y,3!==this.type?{minFilter:cr,magFilter:cr}:{}),X.map.texture.name=$.name+".shadowMap",X.camera.updateProjectionMatrix()),i.setRenderTarget(X.map),i.clear();const q=X.getViewportCount();for(let Q=0;Q<q;Q++){const Y=X.getViewport(Q);o.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),k.viewport(o),X.updateMatrices($,Q),n=X.getFrustum(),w(D,I,X.camera,$,this.type)}!0!==X.isPointLightShadow&&3===this.type&&v(X,I),X.needsUpdate=!1}y.needsUpdate=!1,i.setRenderTarget(N,V,A)}}function ise(i,e,t){const n=t.isWebGL2,a=new function r(){let H=!1;const he=new Qn;let Te=null;const Ze=new Qn(0,0,0,0);return{setMask:function(ht){Te!==ht&&!H&&(i.colorMask(ht,ht,ht,ht),Te=ht)},setLocked:function(ht){H=ht},setClear:function(ht,mi,ki,vs,Gu){!0===Gu&&(ht*=vs,mi*=vs,ki*=vs),he.set(ht,mi,ki,vs),!1===Ze.equals(he)&&(i.clearColor(ht,mi,ki,vs),Ze.copy(he))},reset:function(){H=!1,Te=null,Ze.set(-1,0,0,0)}}},l=new function s(){let H=!1,he=null,Te=null,Ze=null;return{setTest:function(ht){ht?Z(2929):ut(2929)},setMask:function(ht){he!==ht&&!H&&(i.depthMask(ht),he=ht)},setFunc:function(ht){if(Te!==ht){switch(ht){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}Te=ht}},setLocked:function(ht){H=ht},setClear:function(ht){Ze!==ht&&(i.clearDepth(ht),Ze=ht)},reset:function(){H=!1,he=null,Te=null,Ze=null}}},c=new function o(){let H=!1,he=null,Te=null,Ze=null,ht=null,mi=null,ki=null,vs=null,Gu=null;return{setTest:function(Zi){H||(Zi?Z(2960):ut(2960))},setMask:function(Zi){he!==Zi&&!H&&(i.stencilMask(Zi),he=Zi)},setFunc:function(Zi,xa,Fl){(Te!==Zi||Ze!==xa||ht!==Fl)&&(i.stencilFunc(Zi,xa,Fl),Te=Zi,Ze=xa,ht=Fl)},setOp:function(Zi,xa,Fl){(mi!==Zi||ki!==xa||vs!==Fl)&&(i.stencilOp(Zi,xa,Fl),mi=Zi,ki=xa,vs=Fl)},setLocked:function(Zi){H=Zi},setClear:function(Zi){Gu!==Zi&&(i.clearStencil(Zi),Gu=Zi)},reset:function(){H=!1,he=null,Te=null,Ze=null,ht=null,mi=null,ki=null,vs=null,Gu=null}}},d=new WeakMap,f=new WeakMap;let p={},m={},_=new WeakMap,b=[],y=null,v=!1,M=null,w=null,C=null,D=null,I=null,N=null,V=null,A=!1,k=null,ee=null,le=null,$=null,X=null;const ne=i.getParameter(35661);let q=!1,Q=0;const Y=i.getParameter(7938);-1!==Y.indexOf("WebGL")?(Q=parseFloat(/^WebGL (\d)/.exec(Y)[1]),q=Q>=1):-1!==Y.indexOf("OpenGL ES")&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),q=Q>=2);let ae=null,we={};const qe=i.getParameter(3088),ke=i.getParameter(2978),se=(new Qn).fromArray(qe),ue=(new Qn).fromArray(ke);function Fe(H,he,Te){const Ze=new Uint8Array(4),ht=i.createTexture();i.bindTexture(H,ht),i.texParameteri(H,10241,9728),i.texParameteri(H,10240,9728);for(let mi=0;mi<Te;mi++)i.texImage2D(he+mi,0,6408,1,1,0,6408,5121,Ze);return ht}const $e={};function Z(H){!0!==p[H]&&(i.enable(H),p[H]=!0)}function ut(H){!1!==p[H]&&(i.disable(H),p[H]=!1)}$e[3553]=Fe(3553,3553,1),$e[34067]=Fe(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Z(2929),l.setFunc(3),ze(!1),At(1),Z(2884),De(0);const Ee={100:32774,101:32778,102:32779};if(n)Ee[103]=32775,Ee[104]=32776;else{const H=e.get("EXT_blend_minmax");null!==H&&(Ee[103]=H.MIN_EXT,Ee[104]=H.MAX_EXT)}const me={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function De(H,he,Te,Ze,ht,mi,ki,vs){if(0!==H){if(!1===v&&(Z(3042),v=!0),5===H)ht=ht||he,mi=mi||Te,ki=ki||Ze,(he!==w||ht!==I)&&(i.blendEquationSeparate(Ee[he],Ee[ht]),w=he,I=ht),(Te!==C||Ze!==D||mi!==N||ki!==V)&&(i.blendFuncSeparate(me[Te],me[Ze],me[mi],me[ki]),C=Te,D=Ze,N=mi,V=ki),M=H,A=!1;else if(H!==M||vs!==A){if((100!==w||100!==I)&&(i.blendEquation(32774),w=100,I=100),vs)switch(H){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}else switch(H){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}C=null,D=null,N=null,V=null,M=H,A=vs}}else!0===v&&(ut(3042),v=!1)}function ze(H){k!==H&&(i.frontFace(H?2304:2305),k=H)}function At(H){0!==H?(Z(2884),H!==ee&&i.cullFace(1===H?1029:2===H?1028:1032)):ut(2884),ee=H}function bt(H,he,Te){H?(Z(32823),($!==he||X!==Te)&&(i.polygonOffset(he,Te),$=he,X=Te)):ut(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:Z,disable:ut,bindFramebuffer:function rt(H,he){return m[H]!==he&&(i.bindFramebuffer(H,he),m[H]=he,n&&(36009===H&&(m[36160]=he),36160===H&&(m[36009]=he)),!0)},drawBuffers:function Re(H,he){let Te=b,Ze=!1;if(H)if(Te=_.get(he),void 0===Te&&(Te=[],_.set(he,Te)),H.isWebGLMultipleRenderTargets){const ht=H.texture;if(Te.length!==ht.length||36064!==Te[0]){for(let mi=0,ki=ht.length;mi<ki;mi++)Te[mi]=36064+mi;Te.length=ht.length,Ze=!0}}else 36064!==Te[0]&&(Te[0]=36064,Ze=!0);else 1029!==Te[0]&&(Te[0]=1029,Ze=!0);Ze&&(t.isWebGL2?i.drawBuffers(Te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Te))},useProgram:function st(H){return y!==H&&(i.useProgram(H),y=H,!0)},setBlending:De,setMaterial:function nt(H,he){2===H.side?ut(2884):Z(2884);let Te=1===H.side;he&&(Te=!Te),ze(Te),1===H.blending&&!1===H.transparent?De(0):De(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),l.setFunc(H.depthFunc),l.setTest(H.depthTest),l.setMask(H.depthWrite),a.setMask(H.colorWrite);const Ze=H.stencilWrite;c.setTest(Ze),Ze&&(c.setMask(H.stencilWriteMask),c.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),c.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),bt(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),!0===H.alphaToCoverage?Z(32926):ut(32926)},setFlipSided:ze,setCullFace:At,setLineWidth:function Tt(H){H!==le&&(q&&i.lineWidth(H),le=H)},setPolygonOffset:bt,setScissorTest:function hn(H){H?Z(3089):ut(3089)},activeTexture:function Bn(H){void 0===H&&(H=33984+ne-1),ae!==H&&(i.activeTexture(H),ae=H)},bindTexture:function F(H,he,Te){void 0===Te&&(Te=null===ae?33984+ne-1:ae);let Ze=we[Te];void 0===Ze&&(Ze={type:void 0,texture:void 0},we[Te]=Ze),(Ze.type!==H||Ze.texture!==he)&&(ae!==Te&&(i.activeTexture(Te),ae=Te),i.bindTexture(H,he||$e[H]),Ze.type=H,Ze.texture=he)},unbindTexture:function P(){const H=we[ae];void 0!==H&&void 0!==H.type&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)},compressedTexImage2D:function ie(){try{i.compressedTexImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexImage3D:function Ae(){try{i.compressedTexImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage2D:function xt(){try{i.texImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage3D:function It(){try{i.texImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},updateUBOMapping:function Sn(H,he){let Te=f.get(he);void 0===Te&&(Te=new WeakMap,f.set(he,Te));let Ze=Te.get(H);void 0===Ze&&(Ze=i.getUniformBlockIndex(he,H.name),Te.set(H,Ze))},uniformBlockBinding:function ei(H,he){const Ze=f.get(he).get(H);d.get(he)!==Ze&&(i.uniformBlockBinding(he,Ze,H.__bindingPointIndex),d.set(he,Ze))},texStorage2D:function pe(){try{i.texStorage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texStorage3D:function ot(){try{i.texStorage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage2D:function Ie(){try{i.texSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage3D:function Ge(){try{i.texSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage2D:function Rt(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage3D:function Qe(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},scissor:function it(H){!1===se.equals(H)&&(i.scissor(H.x,H.y,H.z,H.w),se.copy(H))},viewport:function dt(H){!1===ue.equals(H)&&(i.viewport(H.x,H.y,H.z,H.w),ue.copy(H))},reset:function Yi(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},ae=null,we={},m={},_=new WeakMap,b=[],y=null,v=!1,M=null,w=null,C=null,D=null,I=null,N=null,V=null,A=!1,k=null,ee=null,le=null,$=null,X=null,se.set(0,0,i.canvas.width,i.canvas.height),ue.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function rse(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,f=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let b;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function M(F,P){return v?new OffscreenCanvas(F,P):qv("canvas")}function w(F,P,ie,Ae){let Ie=1;if((F.width>Ae||F.height>Ae)&&(Ie=Ae/Math.max(F.width,F.height)),Ie<1||!0===P){if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const Ge=P?MV:Math.floor,Rt=Ge(Ie*F.width),Qe=Ge(Ie*F.height);void 0===b&&(b=M(Rt,Qe));const pe=ie?M(Rt,Qe):b;return pe.width=Rt,pe.height=Qe,pe.getContext("2d").drawImage(F,0,0,Rt,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Rt+"x"+Qe+")."),pe}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F}return F}function C(F){return aI(F.width)&&aI(F.height)}function I(F,P){return F.generateMipmaps&&P&&F.minFilter!==cr&&F.minFilter!==ur}function N(F){i.generateMipmap(F)}function V(F,P,ie,Ae,Ie=!1){if(!1===a)return P;if(null!==F){if(void 0!==i[F])return i[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Ge=P;return 6403===P&&(5126===ie&&(Ge=33326),5131===ie&&(Ge=33325),5121===ie&&(Ge=33321)),33319===P&&(5126===ie&&(Ge=33328),5131===ie&&(Ge=33327),5121===ie&&(Ge=33323)),6408===P&&(5126===ie&&(Ge=34836),5131===ie&&(Ge=34842),5121===ie&&(Ge=Ae===si&&!1===Ie?35907:32856),32819===ie&&(Ge=32854),32820===ie&&(Ge=32855)),(33325===Ge||33326===Ge||33327===Ge||33328===Ge||34842===Ge||34836===Ge)&&e.get("EXT_color_buffer_float"),Ge}function A(F,P,ie){return!0===I(F,ie)||F.isFramebufferTexture&&F.minFilter!==cr&&F.minFilter!==ur?Math.log2(Math.max(P.width,P.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?P.mipmaps.length:1}function k(F){return F===cr||1004===F||1005===F?9728:9729}function ee(F){const P=F.target;P.removeEventListener("dispose",ee),function $(F){const P=n.get(F);if(void 0===P.__webglInit)return;const ie=F.source,Ae=y.get(ie);if(Ae){const Ie=Ae[P.__cacheKey];Ie.usedTimes--,0===Ie.usedTimes&&X(F),0===Object.keys(Ae).length&&y.delete(ie)}n.remove(F)}(P),P.isVideoTexture&&_.delete(P)}function le(F){const P=F.target;P.removeEventListener("dispose",le),function ne(F){const P=F.texture,ie=n.get(F),Ae=n.get(P);if(void 0!==Ae.__webglTexture&&(i.deleteTexture(Ae.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++)i.deleteFramebuffer(ie.__webglFramebuffer[Ie]),ie.__webglDepthbuffer&&i.deleteRenderbuffer(ie.__webglDepthbuffer[Ie]);else{if(i.deleteFramebuffer(ie.__webglFramebuffer),ie.__webglDepthbuffer&&i.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&i.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let Ie=0;Ie<ie.__webglColorRenderbuffer.length;Ie++)ie.__webglColorRenderbuffer[Ie]&&i.deleteRenderbuffer(ie.__webglColorRenderbuffer[Ie]);ie.__webglDepthRenderbuffer&&i.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Ie=0,Ge=P.length;Ie<Ge;Ie++){const Rt=n.get(P[Ie]);Rt.__webglTexture&&(i.deleteTexture(Rt.__webglTexture),o.memory.textures--),n.remove(P[Ie])}n.remove(P),n.remove(F)}(P)}function X(F){const P=n.get(F);i.deleteTexture(P.__webglTexture),delete y.get(F.source)[P.__cacheKey],o.memory.textures--}let q=0;function we(F,P){const ie=n.get(F);if(F.isVideoTexture&&function hn(F){const P=o.render.frame;_.get(F)!==P&&(_.set(F,P),F.update())}(F),!1===F.isRenderTargetTexture&&F.version>0&&ie.__version!==F.version){const Ae=F.image;if(null===Ae)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ae.complete)return void ut(ie,F,P);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,ie.__webglTexture,33984+P)}const ue={1e3:10497,[wr]:33071,1002:33648},Fe={[cr]:9728,1004:9984,1005:9986,[ur]:9729,1007:9985,[Qd]:9987};function $e(F,P,ie){if(ie?(i.texParameteri(F,10242,ue[P.wrapS]),i.texParameteri(F,10243,ue[P.wrapT]),(32879===F||35866===F)&&i.texParameteri(F,32882,ue[P.wrapR]),i.texParameteri(F,10240,Fe[P.magFilter]),i.texParameteri(F,10241,Fe[P.minFilter])):(i.texParameteri(F,10242,33071),i.texParameteri(F,10243,33071),(32879===F||35866===F)&&i.texParameteri(F,32882,33071),(P.wrapS!==wr||P.wrapT!==wr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(F,10240,k(P.magFilter)),i.texParameteri(F,10241,k(P.minFilter)),P.minFilter!==cr&&P.minFilter!==ur&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ae=e.get("EXT_texture_filter_anisotropic");if(P.magFilter===cr||1005!==P.minFilter&&P.minFilter!==Qd||P.type===Ru&&!1===e.has("OES_texture_float_linear")||!1===a&&P.type===Wv&&!1===e.has("OES_texture_half_float_linear"))return;(P.anisotropy>1||n.get(P).__currentAnisotropy)&&(i.texParameterf(F,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,r.getMaxAnisotropy())),n.get(P).__currentAnisotropy=P.anisotropy)}}function Z(F,P){let ie=!1;void 0===F.__webglInit&&(F.__webglInit=!0,P.addEventListener("dispose",ee));const Ae=P.source;let Ie=y.get(Ae);void 0===Ie&&(Ie={},y.set(Ae,Ie));const Ge=function ae(F){const P=[];return P.push(F.wrapS),P.push(F.wrapT),P.push(F.wrapR||0),P.push(F.magFilter),P.push(F.minFilter),P.push(F.anisotropy),P.push(F.internalFormat),P.push(F.format),P.push(F.type),P.push(F.generateMipmaps),P.push(F.premultiplyAlpha),P.push(F.flipY),P.push(F.unpackAlignment),P.push(F.encoding),P.join()}(P);if(Ge!==F.__cacheKey){void 0===Ie[Ge]&&(Ie[Ge]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,ie=!0),Ie[Ge].usedTimes++;const Rt=Ie[F.__cacheKey];void 0!==Rt&&(Ie[F.__cacheKey].usedTimes--,0===Rt.usedTimes&&X(P)),F.__cacheKey=Ge,F.__webglTexture=Ie[Ge].texture}return ie}function ut(F,P,ie){let Ae=3553;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(Ae=35866),P.isData3DTexture&&(Ae=32879);const Ie=Z(F,P),Ge=P.source;t.bindTexture(Ae,F.__webglTexture,33984+ie);const Rt=n.get(Ge);if(Ge.version!==Rt.__version||!0===Ie){t.activeTexture(33984+ie),i.pixelStorei(37440,P.flipY),i.pixelStorei(37441,P.premultiplyAlpha),i.pixelStorei(3317,P.unpackAlignment),i.pixelStorei(37443,0);const Qe=function D(F){return!a&&(F.wrapS!==wr||F.wrapT!==wr||F.minFilter!==cr&&F.minFilter!==ur)}(P)&&!1===C(P.image);let pe=w(P.image,Qe,!1,d);pe=Bn(P,pe);const ot=C(pe)||a,xt=s.convert(P.format,P.encoding);let dt,It=s.convert(P.type),it=V(P.internalFormat,xt,It,P.encoding,P.isVideoTexture);$e(Ae,P,ot);const Sn=P.mipmaps,ei=a&&!0!==P.isVideoTexture,Yi=void 0===Rt.__version||!0===Ie,H=A(P,pe,ot);if(P.isDepthTexture)it=6402,a?it=P.type===Ru?36012:P.type===th?33190:P.type===Wp?35056:33189:P.type===Ru&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===nh&&6402===it&&1012!==P.type&&P.type!==th&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=th,It=s.convert(P.type)),P.format===$p&&6402===it&&(it=34041,P.type!==Wp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=Wp,It=s.convert(P.type))),Yi&&(ei?t.texStorage2D(3553,1,it,pe.width,pe.height):t.texImage2D(3553,0,it,pe.width,pe.height,0,xt,It,null));else if(P.isDataTexture)if(Sn.length>0&&ot){ei&&Yi&&t.texStorage2D(3553,H,it,Sn[0].width,Sn[0].height);for(let he=0,Te=Sn.length;he<Te;he++)dt=Sn[he],ei?t.texSubImage2D(3553,he,0,0,dt.width,dt.height,xt,It,dt.data):t.texImage2D(3553,he,it,dt.width,dt.height,0,xt,It,dt.data);P.generateMipmaps=!1}else ei?(Yi&&t.texStorage2D(3553,H,it,pe.width,pe.height),t.texSubImage2D(3553,0,0,0,pe.width,pe.height,xt,It,pe.data)):t.texImage2D(3553,0,it,pe.width,pe.height,0,xt,It,pe.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){ei&&Yi&&t.texStorage3D(35866,H,it,Sn[0].width,Sn[0].height,pe.depth);for(let he=0,Te=Sn.length;he<Te;he++)dt=Sn[he],P.format!==ma?null!==xt?ei?t.compressedTexSubImage3D(35866,he,0,0,0,dt.width,dt.height,pe.depth,xt,dt.data,0,0):t.compressedTexImage3D(35866,he,it,dt.width,dt.height,pe.depth,0,dt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ei?t.texSubImage3D(35866,he,0,0,0,dt.width,dt.height,pe.depth,xt,It,dt.data):t.texImage3D(35866,he,it,dt.width,dt.height,pe.depth,0,xt,It,dt.data)}else{ei&&Yi&&t.texStorage2D(3553,H,it,Sn[0].width,Sn[0].height);for(let he=0,Te=Sn.length;he<Te;he++)dt=Sn[he],P.format!==ma?null!==xt?ei?t.compressedTexSubImage2D(3553,he,0,0,dt.width,dt.height,xt,dt.data):t.compressedTexImage2D(3553,he,it,dt.width,dt.height,0,dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ei?t.texSubImage2D(3553,he,0,0,dt.width,dt.height,xt,It,dt.data):t.texImage2D(3553,he,it,dt.width,dt.height,0,xt,It,dt.data)}else if(P.isDataArrayTexture)ei?(Yi&&t.texStorage3D(35866,H,it,pe.width,pe.height,pe.depth),t.texSubImage3D(35866,0,0,0,0,pe.width,pe.height,pe.depth,xt,It,pe.data)):t.texImage3D(35866,0,it,pe.width,pe.height,pe.depth,0,xt,It,pe.data);else if(P.isData3DTexture)ei?(Yi&&t.texStorage3D(32879,H,it,pe.width,pe.height,pe.depth),t.texSubImage3D(32879,0,0,0,0,pe.width,pe.height,pe.depth,xt,It,pe.data)):t.texImage3D(32879,0,it,pe.width,pe.height,pe.depth,0,xt,It,pe.data);else if(P.isFramebufferTexture){if(Yi)if(ei)t.texStorage2D(3553,H,it,pe.width,pe.height);else{let he=pe.width,Te=pe.height;for(let Ze=0;Ze<H;Ze++)t.texImage2D(3553,Ze,it,he,Te,0,xt,It,null),he>>=1,Te>>=1}}else if(Sn.length>0&&ot){ei&&Yi&&t.texStorage2D(3553,H,it,Sn[0].width,Sn[0].height);for(let he=0,Te=Sn.length;he<Te;he++)dt=Sn[he],ei?t.texSubImage2D(3553,he,0,0,xt,It,dt):t.texImage2D(3553,he,it,xt,It,dt);P.generateMipmaps=!1}else ei?(Yi&&t.texStorage2D(3553,H,it,pe.width,pe.height),t.texSubImage2D(3553,0,0,0,xt,It,pe)):t.texImage2D(3553,0,it,xt,It,pe);I(P,ot)&&N(Ae),Rt.__version=Ge.version,P.onUpdate&&P.onUpdate(P)}F.__version=P.version}function Re(F,P,ie,Ae,Ie){const Ge=s.convert(ie.format,ie.encoding),Rt=s.convert(ie.type),Qe=V(ie.internalFormat,Ge,Rt,ie.encoding);n.get(P).__hasExternalTextures||(32879===Ie||35866===Ie?t.texImage3D(Ie,0,Qe,P.width,P.height,P.depth,0,Ge,Rt,null):t.texImage2D(Ie,0,Qe,P.width,P.height,0,Ge,Rt,null)),t.bindFramebuffer(36160,F),bt(P)?p.framebufferTexture2DMultisampleEXT(36160,Ae,Ie,n.get(ie).__webglTexture,0,Tt(P)):(3553===Ie||Ie>=34069&&Ie<=34074)&&i.framebufferTexture2D(36160,Ae,Ie,n.get(ie).__webglTexture,0),t.bindFramebuffer(36160,null)}function st(F,P,ie){if(i.bindRenderbuffer(36161,F),P.depthBuffer&&!P.stencilBuffer){let Ae=33189;if(ie||bt(P)){const Ie=P.depthTexture;Ie&&Ie.isDepthTexture&&(Ie.type===Ru?Ae=36012:Ie.type===th&&(Ae=33190));const Ge=Tt(P);bt(P)?p.renderbufferStorageMultisampleEXT(36161,Ge,Ae,P.width,P.height):i.renderbufferStorageMultisample(36161,Ge,Ae,P.width,P.height)}else i.renderbufferStorage(36161,Ae,P.width,P.height);i.framebufferRenderbuffer(36160,36096,36161,F)}else if(P.depthBuffer&&P.stencilBuffer){const Ae=Tt(P);ie&&!1===bt(P)?i.renderbufferStorageMultisample(36161,Ae,35056,P.width,P.height):bt(P)?p.renderbufferStorageMultisampleEXT(36161,Ae,35056,P.width,P.height):i.renderbufferStorage(36161,34041,P.width,P.height),i.framebufferRenderbuffer(36160,33306,36161,F)}else{const Ae=!0===P.isWebGLMultipleRenderTargets?P.texture:[P.texture];for(let Ie=0;Ie<Ae.length;Ie++){const Ge=Ae[Ie],Rt=s.convert(Ge.format,Ge.encoding),Qe=s.convert(Ge.type),pe=V(Ge.internalFormat,Rt,Qe,Ge.encoding),ot=Tt(P);ie&&!1===bt(P)?i.renderbufferStorageMultisample(36161,ot,pe,P.width,P.height):bt(P)?p.renderbufferStorageMultisampleEXT(36161,ot,pe,P.width,P.height):i.renderbufferStorage(36161,pe,P.width,P.height)}}i.bindRenderbuffer(36161,null)}function me(F){const P=n.get(F),ie=!0===F.isWebGLCubeRenderTarget;if(F.depthTexture&&!P.__autoAllocateDepthBuffer){if(ie)throw new Error("target.depthTexture not supported in Cube render targets");!function Ee(F,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,F),!P.depthTexture||!P.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),we(P.depthTexture,0);const Ae=n.get(P.depthTexture).__webglTexture,Ie=Tt(P);if(P.depthTexture.format===nh)bt(P)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ae,0,Ie):i.framebufferTexture2D(36160,36096,3553,Ae,0);else{if(P.depthTexture.format!==$p)throw new Error("Unknown depthTexture format");bt(P)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ae,0,Ie):i.framebufferTexture2D(36160,33306,3553,Ae,0)}}(P.__webglFramebuffer,F)}else if(ie){P.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(36160,P.__webglFramebuffer[Ae]),P.__webglDepthbuffer[Ae]=i.createRenderbuffer(),st(P.__webglDepthbuffer[Ae],F,!1)}else t.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=i.createRenderbuffer(),st(P.__webglDepthbuffer,F,!1);t.bindFramebuffer(36160,null)}function Tt(F){return Math.min(f,F.samples)}function bt(F){const P=n.get(F);return a&&F.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==P.__useRenderToTexture}function Bn(F,P){const ie=F.encoding,Ae=F.format,Ie=F.type;return!0===F.isCompressedTexture||!0===F.isVideoTexture||1035===F.format||ie!==ih&&(ie===si?!1===a?!0===e.has("EXT_sRGB")&&Ae===ma?(F.format=1035,F.minFilter=ur,F.generateMipmaps=!1):P=SV.sRGBToLinear(P):(Ae!==ma||Ie!==eh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ie)),P}this.allocateTextureUnit=function Y(){const F=q;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),q+=1,F},this.resetTextureUnits=function Q(){q=0},this.setTexture2D=we,this.setTexture2DArray=function qe(F,P){const ie=n.get(F);F.version>0&&ie.__version!==F.version?ut(ie,F,P):t.bindTexture(35866,ie.__webglTexture,33984+P)},this.setTexture3D=function ke(F,P){const ie=n.get(F);F.version>0&&ie.__version!==F.version?ut(ie,F,P):t.bindTexture(32879,ie.__webglTexture,33984+P)},this.setTextureCube=function se(F,P){const ie=n.get(F);F.version>0&&ie.__version!==F.version?function rt(F,P,ie){if(6!==P.image.length)return;const Ae=Z(F,P),Ie=P.source;t.bindTexture(34067,F.__webglTexture,33984+ie);const Ge=n.get(Ie);if(Ie.version!==Ge.__version||!0===Ae){t.activeTexture(33984+ie),i.pixelStorei(37440,P.flipY),i.pixelStorei(37441,P.premultiplyAlpha),i.pixelStorei(3317,P.unpackAlignment),i.pixelStorei(37443,0);const Rt=P.isCompressedTexture||P.image[0].isCompressedTexture,Qe=P.image[0]&&P.image[0].isDataTexture,pe=[];for(let he=0;he<6;he++)pe[he]=Rt||Qe?Qe?P.image[he].image:P.image[he]:w(P.image[he],!1,!0,c),pe[he]=Bn(P,pe[he]);const ot=pe[0],xt=C(ot)||a,It=s.convert(P.format,P.encoding),it=s.convert(P.type),dt=V(P.internalFormat,It,it,P.encoding),Sn=a&&!0!==P.isVideoTexture,ei=void 0===Ge.__version||!0===Ae;let H,Yi=A(P,ot,xt);if($e(34067,P,xt),Rt){Sn&&ei&&t.texStorage2D(34067,Yi,dt,ot.width,ot.height);for(let he=0;he<6;he++){H=pe[he].mipmaps;for(let Te=0;Te<H.length;Te++){const Ze=H[Te];P.format!==ma?null!==It?Sn?t.compressedTexSubImage2D(34069+he,Te,0,0,Ze.width,Ze.height,It,Ze.data):t.compressedTexImage2D(34069+he,Te,dt,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Sn?t.texSubImage2D(34069+he,Te,0,0,Ze.width,Ze.height,It,it,Ze.data):t.texImage2D(34069+he,Te,dt,Ze.width,Ze.height,0,It,it,Ze.data)}}}else{H=P.mipmaps,Sn&&ei&&(H.length>0&&Yi++,t.texStorage2D(34067,Yi,dt,pe[0].width,pe[0].height));for(let he=0;he<6;he++)if(Qe){Sn?t.texSubImage2D(34069+he,0,0,0,pe[he].width,pe[he].height,It,it,pe[he].data):t.texImage2D(34069+he,0,dt,pe[he].width,pe[he].height,0,It,it,pe[he].data);for(let Te=0;Te<H.length;Te++){const ht=H[Te].image[he].image;Sn?t.texSubImage2D(34069+he,Te+1,0,0,ht.width,ht.height,It,it,ht.data):t.texImage2D(34069+he,Te+1,dt,ht.width,ht.height,0,It,it,ht.data)}}else{Sn?t.texSubImage2D(34069+he,0,0,0,It,it,pe[he]):t.texImage2D(34069+he,0,dt,It,it,pe[he]);for(let Te=0;Te<H.length;Te++){const Ze=H[Te];Sn?t.texSubImage2D(34069+he,Te+1,0,0,It,it,Ze.image[he]):t.texImage2D(34069+he,Te+1,dt,It,it,Ze.image[he])}}}I(P,xt)&&N(34067),Ge.__version=Ie.version,P.onUpdate&&P.onUpdate(P)}F.__version=P.version}(ie,F,P):t.bindTexture(34067,ie.__webglTexture,33984+P)},this.rebindTextures=function De(F,P,ie){const Ae=n.get(F);void 0!==P&&Re(Ae.__webglFramebuffer,F,F.texture,36064,3553),void 0!==ie&&me(F)},this.setupRenderTarget=function nt(F){const P=F.texture,ie=n.get(F),Ae=n.get(P);F.addEventListener("dispose",le),!0!==F.isWebGLMultipleRenderTargets&&(void 0===Ae.__webglTexture&&(Ae.__webglTexture=i.createTexture()),Ae.__version=P.version,o.memory.textures++);const Ie=!0===F.isWebGLCubeRenderTarget,Ge=!0===F.isWebGLMultipleRenderTargets,Rt=C(F)||a;if(Ie){ie.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)ie.__webglFramebuffer[Qe]=i.createFramebuffer()}else{if(ie.__webglFramebuffer=i.createFramebuffer(),Ge)if(r.drawBuffers){const Qe=F.texture;for(let pe=0,ot=Qe.length;pe<ot;pe++){const xt=n.get(Qe[pe]);void 0===xt.__webglTexture&&(xt.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&!1===bt(F)){const Qe=Ge?P:[P];ie.__webglMultisampledFramebuffer=i.createFramebuffer(),ie.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,ie.__webglMultisampledFramebuffer);for(let pe=0;pe<Qe.length;pe++){const ot=Qe[pe];ie.__webglColorRenderbuffer[pe]=i.createRenderbuffer(),i.bindRenderbuffer(36161,ie.__webglColorRenderbuffer[pe]);const xt=s.convert(ot.format,ot.encoding),It=s.convert(ot.type),it=V(ot.internalFormat,xt,It,ot.encoding,!0===F.isXRRenderTarget),dt=Tt(F);i.renderbufferStorageMultisample(36161,dt,it,F.width,F.height),i.framebufferRenderbuffer(36160,36064+pe,36161,ie.__webglColorRenderbuffer[pe])}i.bindRenderbuffer(36161,null),F.depthBuffer&&(ie.__webglDepthRenderbuffer=i.createRenderbuffer(),st(ie.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(36160,null)}}if(Ie){t.bindTexture(34067,Ae.__webglTexture),$e(34067,P,Rt);for(let Qe=0;Qe<6;Qe++)Re(ie.__webglFramebuffer[Qe],F,P,36064,34069+Qe);I(P,Rt)&&N(34067),t.unbindTexture()}else if(Ge){const Qe=F.texture;for(let pe=0,ot=Qe.length;pe<ot;pe++){const xt=Qe[pe],It=n.get(xt);t.bindTexture(3553,It.__webglTexture),$e(3553,xt,Rt),Re(ie.__webglFramebuffer,F,xt,36064+pe,3553),I(xt,Rt)&&N(3553)}t.unbindTexture()}else{let Qe=3553;(F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Qe=F.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Qe,Ae.__webglTexture),$e(Qe,P,Rt),Re(ie.__webglFramebuffer,F,P,36064,Qe),I(P,Rt)&&N(Qe),t.unbindTexture()}F.depthBuffer&&me(F)},this.updateRenderTargetMipmap=function ze(F){const P=C(F)||a,ie=!0===F.isWebGLMultipleRenderTargets?F.texture:[F.texture];for(let Ae=0,Ie=ie.length;Ae<Ie;Ae++){const Ge=ie[Ae];if(I(Ge,P)){const Rt=F.isWebGLCubeRenderTarget?34067:3553,Qe=n.get(Ge).__webglTexture;t.bindTexture(Rt,Qe),N(Rt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function At(F){if(a&&F.samples>0&&!1===bt(F)){const P=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],ie=F.width,Ae=F.height;let Ie=16384;const Ge=[],Rt=F.stencilBuffer?33306:36096,Qe=n.get(F),pe=!0===F.isWebGLMultipleRenderTargets;if(pe)for(let ot=0;ot<P.length;ot++)t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+ot,36161,null),t.bindFramebuffer(36160,Qe.__webglFramebuffer),i.framebufferTexture2D(36009,36064+ot,3553,null,0);t.bindFramebuffer(36008,Qe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Qe.__webglFramebuffer);for(let ot=0;ot<P.length;ot++){Ge.push(36064+ot),F.depthBuffer&&Ge.push(Rt);const xt=void 0!==Qe.__ignoreDepthValues&&Qe.__ignoreDepthValues;if(!1===xt&&(F.depthBuffer&&(Ie|=256),F.stencilBuffer&&(Ie|=1024)),pe&&i.framebufferRenderbuffer(36008,36064,36161,Qe.__webglColorRenderbuffer[ot]),!0===xt&&(i.invalidateFramebuffer(36008,[Rt]),i.invalidateFramebuffer(36009,[Rt])),pe){const It=n.get(P[ot]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,It,0)}i.blitFramebuffer(0,0,ie,Ae,0,0,ie,Ae,Ie,9728),m&&i.invalidateFramebuffer(36008,Ge)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),pe)for(let ot=0;ot<P.length;ot++){t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+ot,36161,Qe.__webglColorRenderbuffer[ot]);const xt=n.get(P[ot]).__webglTexture;t.bindFramebuffer(36160,Qe.__webglFramebuffer),i.framebufferTexture2D(36009,36064+ot,3553,xt,0)}t.bindFramebuffer(36009,Qe.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=me,this.setupFrameBufferTexture=Re,this.useMultisampledRTT=bt}function sse(i,e,t){const n=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===eh)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===th)return 5125;if(s===Ru)return 5126;if(s===Wv)return n?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===ma)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===nh)return 6402;if(s===$p)return 34041;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===si){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===si?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===si?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===si?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===Wp?n?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class ose extends Mr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Bu extends ks{constructor(){super(),this.isGroup=!0,this.type="Group"}}const ase={type:"move"};class LI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Bu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Bu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Bu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const y=t.getJointPose(b,n),v=this._getHandJoint(c,b);null!==y&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=y.radius),v.visible=null!==y}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,_=.005;c.inputState.pinching&&p>m+_?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-_&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ase)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Bu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class lse extends Pu{constructor(e,t,n,r,s,o,a,l,c,d){if((d=void 0!==d?d:nh)!==nh&&d!==$p)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===nh&&(n=th),void 0===n&&d===$p&&(n=Wp),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:cr,this.minFilter=void 0!==l?l:cr,this.flipY=!1,this.generateMipmaps=!1}}class cse extends Xp{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,_=null;const b=t.getContextAttributes();let y=null,v=null;const M=[],w=[],C=new Set,D=new Map,I=new Mr;I.layers.enable(1),I.viewport=new Qn;const N=new Mr;N.layers.enable(2),N.viewport=new Qn;const V=[I,N],A=new ose;A.layers.enable(1),A.layers.enable(2);let k=null,ee=null;function le(se){const ue=w.indexOf(se.inputSource);if(-1===ue)return;const Fe=M[ue];void 0!==Fe&&Fe.dispatchEvent({type:se.type,data:se.inputSource})}function $(){r.removeEventListener("select",le),r.removeEventListener("selectstart",le),r.removeEventListener("selectend",le),r.removeEventListener("squeeze",le),r.removeEventListener("squeezestart",le),r.removeEventListener("squeezeend",le),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",X);for(let se=0;se<M.length;se++){const ue=w[se];null!==ue&&(w[se]=null,M[se].disconnect(ue))}k=null,ee=null,e.setRenderTarget(y),m=null,p=null,f=null,r=null,v=null,ke.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function X(se){for(let ue=0;ue<se.removed.length;ue++){const Fe=se.removed[ue],$e=w.indexOf(Fe);$e>=0&&(w[$e]=null,M[$e].disconnect(Fe))}for(let ue=0;ue<se.added.length;ue++){const Fe=se.added[ue];let $e=w.indexOf(Fe);if(-1===$e){for(let ut=0;ut<M.length;ut++){if(ut>=w.length){w.push(Fe),$e=ut;break}if(null===w[ut]){w[ut]=Fe,$e=ut;break}}if(-1===$e)break}const Z=M[$e];Z&&Z.connect(Fe)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(se){let ue=M[se];return void 0===ue&&(ue=new LI,M[se]=ue),ue.getTargetRaySpace()},this.getControllerGrip=function(se){let ue=M[se];return void 0===ue&&(ue=new LI,M[se]=ue),ue.getGripSpace()},this.getHand=function(se){let ue=M[se];return void 0===ue&&(ue=new LI,M[se]=ue),ue.getHandSpace()},this.setFramebufferScaleFactor=function(se){s=se,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(se){a=se,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(se){c=se},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return f},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=function(){var se=Ri(function*(ue){if(r=ue,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",le),r.addEventListener("selectstart",le),r.addEventListener("selectend",le),r.addEventListener("squeeze",le),r.addEventListener("squeezestart",le),r.addEventListener("squeezeend",le),r.addEventListener("end",$),r.addEventListener("inputsourceschange",X),!0!==b.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)m=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),v=new oh(m.framebufferWidth,m.framebufferHeight,{format:ma,type:eh,encoding:e.outputEncoding,stencilBuffer:b.stencil});else{let Fe=null,$e=null,Z=null;b.depth&&(Z=b.stencil?35056:33190,Fe=b.stencil?$p:nh,$e=b.stencil?Wp:th);const ut={colorFormat:32856,depthFormat:Z,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(ut),r.updateRenderState({layers:[p]}),v=new oh(p.textureWidth,p.textureHeight,{format:ma,type:eh,depthTexture:new lse(p.textureWidth,p.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,Fe),stencilBuffer:b.stencil,encoding:e.outputEncoding,samples:b.antialias?4:0}),e.properties.get(v).__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),ke.setContext(r),ke.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(ue){return se.apply(this,arguments)}}();const ne=new O,q=new O;function Y(se,ue){null===ue?se.matrixWorld.copy(se.matrix):se.matrixWorld.multiplyMatrices(ue.matrixWorld,se.matrix),se.matrixWorldInverse.copy(se.matrixWorld).invert()}this.updateCamera=function(se){if(null===r)return;A.near=N.near=I.near=se.near,A.far=N.far=I.far=se.far,(k!==A.near||ee!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),k=A.near,ee=A.far);const ue=se.parent,Fe=A.cameras;Y(A,ue);for(let $e=0;$e<Fe.length;$e++)Y(Fe[$e],ue);2===Fe.length?function Q(se,ue,Fe){ne.setFromMatrixPosition(ue.matrixWorld),q.setFromMatrixPosition(Fe.matrixWorld);const $e=ne.distanceTo(q),Z=ue.projectionMatrix.elements,ut=Fe.projectionMatrix.elements,rt=Z[14]/(Z[10]-1),Re=Z[14]/(Z[10]+1),st=(Z[9]+1)/Z[5],Ee=(Z[9]-1)/Z[5],me=(Z[8]-1)/Z[0],De=(ut[8]+1)/ut[0],nt=rt*me,ze=rt*De,At=$e/(-me+De),Tt=At*-me;ue.matrixWorld.decompose(se.position,se.quaternion,se.scale),se.translateX(Tt),se.translateZ(At),se.matrixWorld.compose(se.position,se.quaternion,se.scale),se.matrixWorldInverse.copy(se.matrixWorld).invert();const bt=rt+At,hn=Re+At;se.projectionMatrix.makePerspective(nt-Tt,ze+($e-Tt),st*Re/hn*bt,Ee*Re/hn*bt,bt,hn),se.projectionMatrixInverse.copy(se.projectionMatrix).invert()}(A,I,N):A.projectionMatrix.copy(I.projectionMatrix),function ae(se,ue,Fe){null===Fe?se.matrix.copy(ue.matrixWorld):(se.matrix.copy(Fe.matrixWorld),se.matrix.invert(),se.matrix.multiply(ue.matrixWorld)),se.matrix.decompose(se.position,se.quaternion,se.scale),se.updateMatrixWorld(!0);const $e=se.children;for(let Z=0,ut=$e.length;Z<ut;Z++)$e[Z].updateMatrixWorld(!0);se.projectionMatrix.copy(ue.projectionMatrix),se.projectionMatrixInverse.copy(ue.projectionMatrixInverse),se.isPerspectiveCamera&&(se.fov=2*Yp*Math.atan(1/se.projectionMatrix.elements[5]),se.zoom=1)}(se,A,ue)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(se){l=se,null!==p&&(p.fixedFoveation=se),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=se)},this.getPlanes=function(){return C};let we=null;const ke=new $V;ke.setAnimationLoop(function qe(se,ue){if(d=ue.getViewerPose(c||o),_=ue,null!==d){const Fe=d.views;null!==m&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let $e=!1;Fe.length!==A.cameras.length&&(A.cameras.length=0,$e=!0);for(let Z=0;Z<Fe.length;Z++){const ut=Fe[Z];let rt=null;if(null!==m)rt=m.getViewport(ut);else{const st=f.getViewSubImage(p,ut);rt=st.viewport,0===Z&&(e.setRenderTargetTextures(v,st.colorTexture,p.ignoreDepthValues?void 0:st.depthStencilTexture),e.setRenderTarget(v))}let Re=V[Z];void 0===Re&&(Re=new Mr,Re.layers.enable(Z),Re.viewport=new Qn,V[Z]=Re),Re.matrix.fromArray(ut.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(ut.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(rt.x,rt.y,rt.width,rt.height),0===Z&&(A.matrix.copy(Re.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===$e&&A.cameras.push(Re)}}for(let Fe=0;Fe<M.length;Fe++){const $e=w[Fe],Z=M[Fe];null!==$e&&void 0!==Z&&Z.update($e,ue,c||o)}if(we&&we(se,ue),ue.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:ue.detectedPlanes});let Fe=null;for(const $e of C)ue.detectedPlanes.has($e)||(null===Fe&&(Fe=[]),Fe.push($e));if(null!==Fe)for(const $e of Fe)C.delete($e),D.delete($e),n.dispatchEvent({type:"planeremoved",data:$e});for(const $e of ue.detectedPlanes)if(C.has($e)){const Z=D.get($e);$e.lastChangedTime>Z&&(D.set($e,$e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:$e}))}else C.add($e),D.set($e,ue.lastChangedTime),n.dispatchEvent({type:"planeadded",data:$e})}_=null}),this.setAnimationLoop=function(se){we=se},this.dispose=function(){}}}function use(i,e){function t(y,v){!0===y.matrixAutoUpdate&&y.updateMatrix(),v.value.copy(y.matrix)}function s(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.bumpMap&&(y.bumpMap.value=v.bumpMap,t(v.bumpMap,y.bumpMapTransform),y.bumpScale.value=v.bumpScale,1===v.side&&(y.bumpScale.value*=-1)),v.normalMap&&(y.normalMap.value=v.normalMap,t(v.normalMap,y.normalMapTransform),y.normalScale.value.copy(v.normalScale),1===v.side&&y.normalScale.value.negate()),v.displacementMap&&(y.displacementMap.value=v.displacementMap,t(v.displacementMap,y.displacementMapTransform),y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,y.emissiveMapTransform)),v.specularMap&&(y.specularMap.value=v.specularMap,t(v.specularMap,y.specularMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const M=e.get(v).envMap;if(M&&(y.envMap.value=M,y.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap){y.lightMap.value=v.lightMap;const w=!0===i.useLegacyLights?Math.PI:1;y.lightMapIntensity.value=v.lightMapIntensity*w,t(v.lightMap,y.lightMapTransform)}v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,y.aoMapTransform))}return{refreshFogUniforms:function n(y,v){v.color.getRGB(y.fogColor.value,WV(i)),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)},refreshMaterialUniforms:function r(y,v,M,w,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(y,v):v.isMeshToonMaterial?(s(y,v),function f(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}(y,v)):v.isMeshPhongMaterial?(s(y,v),function d(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}(y,v)):v.isMeshStandardMaterial?(s(y,v),function p(y,v){y.metalness.value=v.metalness,v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,y.metalnessMapTransform)),y.roughness.value=v.roughness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,y.roughnessMapTransform)),e.get(v).envMap&&(y.envMapIntensity.value=v.envMapIntensity)}(y,v),v.isMeshPhysicalMaterial&&function m(y,v,M){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,y.sheenColorMapTransform)),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,y.sheenRoughnessMapTransform))),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,y.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(y.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),1===v.side&&y.clearcoatNormalScale.value.negate())),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,y.iridescenceMapTransform)),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=M.texture,y.transmissionSamplerSize.value.set(M.width,M.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,y.transmissionMapTransform)),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,y.specularColorMapTransform)),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,y.specularIntensityMapTransform))}(y,v,C)):v.isMeshMatcapMaterial?(s(y,v),function _(y,v){v.matcap&&(y.matcap.value=v.matcap)}(y,v)):v.isMeshDepthMaterial?s(y,v):v.isMeshDistanceMaterial?(s(y,v),function b(y,v){const M=e.get(v).light;y.referencePosition.value.setFromMatrixPosition(M.matrixWorld),y.nearDistance.value=M.shadow.camera.near,y.farDistance.value=M.shadow.camera.far}(y,v)):v.isMeshNormalMaterial?s(y,v):v.isLineBasicMaterial?(function o(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform))}(y,v),v.isLineDashedMaterial&&function a(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}(y,v)):v.isPointsMaterial?function l(y,v,M,w){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*M,y.scale.value=.5*w,v.map&&(y.map.value=v.map,t(v.map,y.uvTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v,M,w):v.isSpriteMaterial?function c(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}}}function dse(i,e,t,n){let r={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function m(M,w,C){const D=M.value;if(void 0===C[w]){if("number"==typeof D)C[w]=D;else{const I=Array.isArray(D)?D:[D],N=[];for(let V=0;V<I.length;V++)N.push(I[V].clone());C[w]=N}return!0}if("number"==typeof D){if(C[w]!==D)return C[w]=D,!0}else{const I=Array.isArray(C[w])?C[w]:[C[w]],N=Array.isArray(D)?D:[D];for(let V=0;V<I.length;V++){const A=I[V];if(!1===A.equals(N[V]))return A.copy(N[V]),!0}}return!1}function b(M){const w={boundary:0,storage:0};return"number"==typeof M?(w.boundary=4,w.storage=4):M.isVector2?(w.boundary=8,w.storage=8):M.isVector3||M.isColor?(w.boundary=16,w.storage=12):M.isVector4?(w.boundary=16,w.storage=16):M.isMatrix3?(w.boundary=48,w.storage=48):M.isMatrix4?(w.boundary=64,w.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),w}function y(M){const w=M.target;w.removeEventListener("dispose",y);const C=o.indexOf(w.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}return{bind:function l(M,w){n.uniformBlockBinding(M,w.program)},update:function c(M,w){let C=r[M.id];void 0===C&&(function _(M){const w=M.uniforms;let C=0;let I=0;for(let N=0,V=w.length;N<V;N++){const A=w[N],k={boundary:0,storage:0},ee=Array.isArray(A.value)?A.value:[A.value];for(let le=0,$=ee.length;le<$;le++){const ne=b(ee[le]);k.boundary+=ne.boundary,k.storage+=ne.storage}if(A.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=C,N>0){I=C%16;const le=16-I;0!==I&&le-k.boundary<0&&(C+=16-I,A.__offset=C)}C+=k.storage}I=C%16,I>0&&(C+=16-I),M.__size=C,M.__cache={}}(M),C=function d(M){const w=function f(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=w;const C=i.createBuffer(),D=M.__size,I=M.usage;return i.bindBuffer(35345,C),i.bufferData(35345,D,I),i.bindBuffer(35345,null),i.bindBufferBase(35345,w,C),C}(M),r[M.id]=C,M.addEventListener("dispose",y)),n.updateUBOMapping(M,w.program);const I=e.render.frame;s[M.id]!==I&&(function p(M){const C=M.uniforms,D=M.__cache;i.bindBuffer(35345,r[M.id]);for(let I=0,N=C.length;I<N;I++){const V=C[I];if(!0===m(V,I,D)){const A=V.__offset,k=Array.isArray(V.value)?V.value:[V.value];let ee=0;for(let le=0;le<k.length;le++){const $=k[le],X=b($);"number"==typeof $?(V.__data[0]=$,i.bufferSubData(35345,A+ee,V.__data)):$.isMatrix3?(V.__data[0]=$.elements[0],V.__data[1]=$.elements[1],V.__data[2]=$.elements[2],V.__data[3]=$.elements[0],V.__data[4]=$.elements[3],V.__data[5]=$.elements[4],V.__data[6]=$.elements[5],V.__data[7]=$.elements[0],V.__data[8]=$.elements[6],V.__data[9]=$.elements[7],V.__data[10]=$.elements[8],V.__data[11]=$.elements[0]):($.toArray(V.__data,ee),ee+=X.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,A,V.__data)}}i.bindBuffer(35345,null)}(M),s[M.id]=I)},dispose:function v(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}}}function hse(){const i=qv("canvas");return i.style.display="block",i}class FI{constructor(e={}){const{canvas:t=hse(),context:n=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;let p;this.isWebGLRenderer=!0,p=null!==n?n.getContextAttributes().alpha:o;let m=null,_=null;const b=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=ih,this.useLegacyLights=!0,this.toneMapping=0,this.toneMappingExposure=1;const v=this;let M=!1,w=0,C=0,D=null,I=-1,N=null;const V=new Qn,A=new Qn;let k=null,ee=t.width,le=t.height,$=1,X=null,ne=null;const q=new Qn(0,0,ee,le),Q=new Qn(0,0,ee,le);let Y=!1;const ae=new AI;let we=!1,qe=!1,ke=null;const se=new tn,ue=new O,Fe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $e(){return null===D?$:1}let rt,Re,st,Ee,me,De,nt,ze,At,Tt,bt,hn,Bn,F,P,ie,Ae,Ie,Ge,Rt,Qe,pe,ot,xt,Z=n;function ut(L,J){for(let de=0;de<L.length;de++){const ve=t.getContext(L[de],J);if(null!==ve)return ve}return null}try{const L={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r151"),t.addEventListener("webglcontextlost",dt,!1),t.addEventListener("webglcontextrestored",Sn,!1),t.addEventListener("webglcontextcreationerror",ei,!1),null===Z){const J=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&J.shift(),Z=ut(J,L),null===Z)throw ut(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Z.getShaderPrecisionFormat&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}function It(){rt=new Sie(Z),Re=new yie(Z,rt,e),rt.init(Re),pe=new sse(Z,rt,Re),st=new ise(Z,rt,Re),Ee=new Aie,me=new $re,De=new rse(Z,rt,st,me,Re,pe,Ee),nt=new xie(v),ze=new Cie(v),At=new bte(Z,Re),ot=new _ie(Z,rt,At,Re),Tt=new Eie(Z,At,Ee,ot),bt=new Pie(Z,Tt,At,Ee),Ge=new Rie(Z,Re,De),ie=new bie(me),hn=new Wre(v,nt,ze,rt,Re,ot,ie),Bn=new use(v,me),F=new qre,P=new Qre(rt,Re),Ie=new gie(v,nt,ze,st,bt,p,l),Ae=new nse(v,bt,Re),xt=new dse(Z,Ee,Re,st),Rt=new vie(Z,rt,Ee,Re),Qe=new Die(Z,rt,Ee,Re),Ee.programs=hn.programs,v.capabilities=Re,v.extensions=rt,v.properties=me,v.renderLists=F,v.shadowMap=Ae,v.state=st,v.info=Ee}It();const it=new cse(v,Z);function dt(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function Sn(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const L=Ee.autoReset,J=Ae.enabled,de=Ae.autoUpdate,K=Ae.needsUpdate,ve=Ae.type;It(),Ee.autoReset=L,Ae.enabled=J,Ae.autoUpdate=de,Ae.needsUpdate=K,Ae.type=ve}function ei(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function Yi(L){const J=L.target;J.removeEventListener("dispose",Yi),function H(L){(function he(L){const J=me.get(L).programs;void 0!==J&&(J.forEach(function(de){hn.releaseProgram(de)}),L.isShaderMaterial&&hn.releaseShaderCache(L))})(L),me.remove(L)}(J)}this.xr=it,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const L=rt.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=rt.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(L){void 0!==L&&($=L,this.setSize(ee,le,!1))},this.getSize=function(L){return L.set(ee,le)},this.setSize=function(L,J,de=!0){it.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ee=L,le=J,t.width=Math.floor(L*$),t.height=Math.floor(J*$),!0===de&&(t.style.width=L+"px",t.style.height=J+"px"),this.setViewport(0,0,L,J))},this.getDrawingBufferSize=function(L){return L.set(ee*$,le*$).floor()},this.setDrawingBufferSize=function(L,J,de){ee=L,le=J,$=de,t.width=Math.floor(L*de),t.height=Math.floor(J*de),this.setViewport(0,0,L,J)},this.getCurrentViewport=function(L){return L.copy(V)},this.getViewport=function(L){return L.copy(q)},this.setViewport=function(L,J,de,K){L.isVector4?q.set(L.x,L.y,L.z,L.w):q.set(L,J,de,K),st.viewport(V.copy(q).multiplyScalar($).floor())},this.getScissor=function(L){return L.copy(Q)},this.setScissor=function(L,J,de,K){L.isVector4?Q.set(L.x,L.y,L.z,L.w):Q.set(L,J,de,K),st.scissor(A.copy(Q).multiplyScalar($).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(L){st.setScissorTest(Y=L)},this.setOpaqueSort=function(L){X=L},this.setTransparentSort=function(L){ne=L},this.getClearColor=function(L){return L.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(L=!0,J=!0,de=!0){let K=0;L&&(K|=16384),J&&(K|=256),de&&(K|=1024),Z.clear(K)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",dt,!1),t.removeEventListener("webglcontextrestored",Sn,!1),t.removeEventListener("webglcontextcreationerror",ei,!1),F.dispose(),P.dispose(),me.dispose(),nt.dispose(),ze.dispose(),bt.dispose(),ot.dispose(),xt.dispose(),hn.dispose(),it.dispose(),it.removeEventListener("sessionstart",ht),it.removeEventListener("sessionend",mi),ke&&(ke.dispose(),ke=null),ki.stop()},this.renderBufferDirect=function(L,J,de,K,ve,wt){null===J&&(J=Fe);const Bt=ve.isMesh&&ve.matrixWorld.determinant()<0,qt=function gue(L,J,de,K,ve){!0!==J.isScene&&(J=Fe),De.resetTextureUnits();const wt=J.fog,qt=null===D?v.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:ih,cn=(K.isMeshStandardMaterial?ze:nt).get(K.envMap||(K.isMeshStandardMaterial?J.environment:null)),mn=!0===K.vertexColors&&!!de.attributes.color&&4===de.attributes.color.itemSize,gn=!!K.normalMap&&!!de.attributes.tangent,xn=!!de.morphAttributes.position,ti=!!de.morphAttributes.normal,Fs=!!de.morphAttributes.color,Za=K.toneMapped?v.toneMapping:0,Sh=de.morphAttributes.position||de.morphAttributes.normal||de.morphAttributes.color,fr=void 0!==Sh?Sh.length:0,En=me.get(K),ZR=_.state.lights;!0!==we||!0!==qe&&L===N||ie.setState(K,L,L===N&&K.id===I);let kr=!1;K.version===En.__version?(En.needsLights&&En.lightsStateVersion!==ZR.state.version||En.outputEncoding!==qt||ve.isInstancedMesh&&!1===En.instancing||!ve.isInstancedMesh&&!0===En.instancing||ve.isSkinnedMesh&&!1===En.skinning||!ve.isSkinnedMesh&&!0===En.skinning||En.envMap!==cn||!0===K.fog&&En.fog!==wt||void 0!==En.numClippingPlanes&&(En.numClippingPlanes!==ie.numPlanes||En.numIntersection!==ie.numIntersection)||En.vertexAlphas!==mn||En.vertexTangents!==gn||En.morphTargets!==xn||En.morphNormals!==ti||En.morphColors!==Fs||En.toneMapping!==Za||!0===Re.isWebGL2&&En.morphTargetsCount!==fr)&&(kr=!0):(kr=!0,En.__version=K.version);let Eh=En.currentProgram;!0===kr&&(Eh=WC(K,J,ve));let E4=!1,xy=!1,KR=!1;const Ns=Eh.getUniforms(),Dh=En.uniforms;if(st.useProgram(Eh.program)&&(E4=!0,xy=!0,KR=!0),K.id!==I&&(I=K.id,xy=!0),E4||N!==L){if(Ns.setValue(Z,"projectionMatrix",L.projectionMatrix),Re.logarithmicDepthBuffer&&Ns.setValue(Z,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),N!==L&&(N=L,xy=!0,KR=!0),K.isShaderMaterial||K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshStandardMaterial||K.envMap){const Vo=Ns.map.cameraPosition;void 0!==Vo&&Vo.setValue(Z,ue.setFromMatrixPosition(L.matrixWorld))}(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial)&&Ns.setValue(Z,"isOrthographic",!0===L.isOrthographicCamera),(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial||K.isShadowMaterial||ve.isSkinnedMesh)&&Ns.setValue(Z,"viewMatrix",L.matrixWorldInverse)}if(ve.isSkinnedMesh){Ns.setOptional(Z,ve,"bindMatrix"),Ns.setOptional(Z,ve,"bindMatrixInverse");const Vo=ve.skeleton;Vo&&(Re.floatVertexTextures?(null===Vo.boneTexture&&Vo.computeBoneTexture(),Ns.setValue(Z,"boneTexture",Vo.boneTexture,De),Ns.setValue(Z,"boneTextureSize",Vo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const JR=de.morphAttributes;if((void 0!==JR.position||void 0!==JR.normal||void 0!==JR.color&&!0===Re.isWebGL2)&&Ge.update(ve,de,Eh),(xy||En.receiveShadow!==ve.receiveShadow)&&(En.receiveShadow=ve.receiveShadow,Ns.setValue(Z,"receiveShadow",ve.receiveShadow)),K.isMeshGouraudMaterial&&null!==K.envMap&&(Dh.envMap.value=cn,Dh.flipEnvMap.value=cn.isCubeTexture&&!1===cn.isRenderTargetTexture?-1:1),xy&&(Ns.setValue(Z,"toneMappingExposure",v.toneMappingExposure),En.needsLights&&function _ue(L,J){L.ambientLightColor.needsUpdate=J,L.lightProbe.needsUpdate=J,L.directionalLights.needsUpdate=J,L.directionalLightShadows.needsUpdate=J,L.pointLights.needsUpdate=J,L.pointLightShadows.needsUpdate=J,L.spotLights.needsUpdate=J,L.spotLightShadows.needsUpdate=J,L.rectAreaLights.needsUpdate=J,L.hemisphereLights.needsUpdate=J}(Dh,KR),wt&&!0===K.fog&&Bn.refreshFogUniforms(Dh,wt),Bn.refreshMaterialUniforms(Dh,K,$,le,ke),WM.upload(Z,En.uniformsList,Dh,De)),K.isShaderMaterial&&!0===K.uniformsNeedUpdate&&(WM.upload(Z,En.uniformsList,Dh,De),K.uniformsNeedUpdate=!1),K.isSpriteMaterial&&Ns.setValue(Z,"center",ve.center),Ns.setValue(Z,"modelViewMatrix",ve.modelViewMatrix),Ns.setValue(Z,"normalMatrix",ve.normalMatrix),Ns.setValue(Z,"modelMatrix",ve.matrixWorld),K.isShaderMaterial||K.isRawShaderMaterial){const Vo=K.uniformsGroups;for(let QR=0,yue=Vo.length;QR<yue;QR++)if(Re.isWebGL2){const D4=Vo[QR];xt.update(D4,Eh),xt.bind(D4,Eh)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Eh}(L,J,de,K,ve);st.setMaterial(K,Bt);let cn=de.index,mn=1;!0===K.wireframe&&(cn=Tt.getWireframeAttribute(de),mn=2);const gn=de.drawRange,xn=de.attributes.position;let ti=gn.start*mn,Fs=(gn.start+gn.count)*mn;null!==wt&&(ti=Math.max(ti,wt.start*mn),Fs=Math.min(Fs,(wt.start+wt.count)*mn)),null!==cn?(ti=Math.max(ti,0),Fs=Math.min(Fs,cn.count)):null!=xn&&(ti=Math.max(ti,0),Fs=Math.min(Fs,xn.count));const Za=Fs-ti;if(Za<0||Za===1/0)return;ot.setup(ve,K,qt,de,cn);let Sh,fr=Rt;if(null!==cn&&(Sh=At.get(cn),fr=Qe,fr.setIndex(Sh)),ve.isMesh)!0===K.wireframe?(st.setLineWidth(K.wireframeLinewidth*$e()),fr.setMode(1)):fr.setMode(4);else if(ve.isLine){let En=K.linewidth;void 0===En&&(En=1),st.setLineWidth(En*$e()),fr.setMode(ve.isLineSegments?1:ve.isLineLoop?2:3)}else ve.isPoints?fr.setMode(0):ve.isSprite&&fr.setMode(4);if(ve.isInstancedMesh)fr.renderInstances(ti,Za,ve.count);else if(de.isInstancedBufferGeometry){const ZR=Math.min(de.instanceCount,void 0!==de._maxInstanceCount?de._maxInstanceCount:1/0);fr.renderInstances(ti,Za,ZR)}else fr.render(ti,Za)},this.compile=function(L,J){function de(K,ve,wt){!0===K.transparent&&2===K.side&&!1===K.forceSinglePass?(K.side=1,K.needsUpdate=!0,WC(K,ve,wt),K.side=0,K.needsUpdate=!0,WC(K,ve,wt),K.side=2):WC(K,ve,wt)}_=P.get(L),_.init(),y.push(_),L.traverseVisible(function(K){K.isLight&&K.layers.test(J.layers)&&(_.pushLight(K),K.castShadow&&_.pushShadow(K))}),_.setupLights(v.useLegacyLights),L.traverse(function(K){const ve=K.material;if(ve)if(Array.isArray(ve))for(let wt=0;wt<ve.length;wt++)de(ve[wt],L,K);else de(ve,L,K)}),y.pop(),_=null};let Te=null;function ht(){ki.stop()}function mi(){ki.start()}const ki=new $V;function vs(L,J,de,K){if(!1===L.visible)return;if(L.layers.test(J.layers))if(L.isGroup)de=L.renderOrder;else if(L.isLOD)!0===L.autoUpdate&&L.update(J);else if(L.isLight)_.pushLight(L),L.castShadow&&_.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||ae.intersectsSprite(L)){K&&ue.setFromMatrixPosition(L.matrixWorld).applyMatrix4(se);const Bt=bt.update(L),qt=L.material;qt.visible&&m.push(L,Bt,qt,de,ue.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(L.isSkinnedMesh&&L.skeleton.frame!==Ee.render.frame&&(L.skeleton.update(),L.skeleton.frame=Ee.render.frame),!L.frustumCulled||ae.intersectsObject(L))){K&&ue.setFromMatrixPosition(L.matrixWorld).applyMatrix4(se);const Bt=bt.update(L),qt=L.material;if(Array.isArray(qt)){const cn=Bt.groups;for(let mn=0,gn=cn.length;mn<gn;mn++){const xn=cn[mn],ti=qt[xn.materialIndex];ti&&ti.visible&&m.push(L,Bt,ti,de,ue.z,xn)}}else qt.visible&&m.push(L,Bt,qt,de,ue.z,null)}const wt=L.children;for(let Bt=0,qt=wt.length;Bt<qt;Bt++)vs(wt[Bt],J,de,K)}function Gu(L,J,de,K){const ve=L.opaque,wt=L.transmissive,Bt=L.transparent;_.setupLightsView(de),!0===we&&ie.setGlobalState(v.clippingPlanes,de),wt.length>0&&function Zi(L,J,de,K){if(null===ke){const qt=Re.isWebGL2;ke=new oh(1024,1024,{generateMipmaps:!0,type:rt.has("EXT_color_buffer_half_float")?Wv:eh,minFilter:Qd,samples:qt&&!0===a?4:0})}const ve=v.getRenderTarget();v.setRenderTarget(ke),v.clear();const wt=v.toneMapping;v.toneMapping=0,xa(L,de,K),De.updateMultisampleRenderTarget(ke),De.updateRenderTargetMipmap(ke);let Bt=!1;for(let qt=0,cn=J.length;qt<cn;qt++){const mn=J[qt],gn=mn.object,xn=mn.geometry,ti=mn.material,Fs=mn.group;if(2===ti.side&&gn.layers.test(K.layers)){const Za=ti.side;ti.side=1,ti.needsUpdate=!0,Fl(gn,de,K,xn,ti,Fs),ti.side=Za,ti.needsUpdate=!0,Bt=!0}}!0===Bt&&(De.updateMultisampleRenderTarget(ke),De.updateRenderTargetMipmap(ke)),v.setRenderTarget(ve),v.toneMapping=wt}(ve,wt,J,de),K&&st.viewport(V.copy(K)),ve.length>0&&xa(ve,J,de),wt.length>0&&xa(wt,J,de),Bt.length>0&&xa(Bt,J,de),st.buffers.depth.setTest(!0),st.buffers.depth.setMask(!0),st.buffers.color.setMask(!0),st.setPolygonOffset(!1)}function xa(L,J,de){const K=!0===J.isScene?J.overrideMaterial:null;for(let ve=0,wt=L.length;ve<wt;ve++){const Bt=L[ve],qt=Bt.object,cn=Bt.geometry,mn=null===K?Bt.material:K,gn=Bt.group;qt.layers.test(de.layers)&&Fl(qt,J,de,cn,mn,gn)}}function Fl(L,J,de,K,ve,wt){L.onBeforeRender(v,J,de,K,ve,wt),L.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),ve.onBeforeRender(v,J,de,K,L,wt),!0===ve.transparent&&2===ve.side&&!1===ve.forceSinglePass?(ve.side=1,ve.needsUpdate=!0,v.renderBufferDirect(de,J,K,ve,L,wt),ve.side=0,ve.needsUpdate=!0,v.renderBufferDirect(de,J,K,ve,L,wt),ve.side=2):v.renderBufferDirect(de,J,K,ve,L,wt),L.onAfterRender(v,J,de,K,ve,wt)}function WC(L,J,de){!0!==J.isScene&&(J=Fe);const K=me.get(L),ve=_.state.lights,Bt=ve.state.version,qt=hn.getParameters(L,ve.state,_.state.shadowsArray,J,de),cn=hn.getProgramCacheKey(qt);let mn=K.programs;K.environment=L.isMeshStandardMaterial?J.environment:null,K.fog=J.fog,K.envMap=(L.isMeshStandardMaterial?ze:nt).get(L.envMap||K.environment),void 0===mn&&(L.addEventListener("dispose",Yi),mn=new Map,K.programs=mn);let gn=mn.get(cn);if(void 0!==gn){if(K.currentProgram===gn&&K.lightsStateVersion===Bt)return S4(L,qt),gn}else qt.uniforms=hn.getUniforms(L),L.onBuild(de,qt,v),L.onBeforeCompile(qt,v),gn=hn.acquireProgram(qt,cn),mn.set(cn,gn),K.uniforms=qt.uniforms;const xn=K.uniforms;(!L.isShaderMaterial&&!L.isRawShaderMaterial||!0===L.clipping)&&(xn.clippingPlanes=ie.uniform),S4(L,qt),K.needsLights=function vue(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&!0===L.lights}(L),K.lightsStateVersion=Bt,K.needsLights&&(xn.ambientLightColor.value=ve.state.ambient,xn.lightProbe.value=ve.state.probe,xn.directionalLights.value=ve.state.directional,xn.directionalLightShadows.value=ve.state.directionalShadow,xn.spotLights.value=ve.state.spot,xn.spotLightShadows.value=ve.state.spotShadow,xn.rectAreaLights.value=ve.state.rectArea,xn.ltc_1.value=ve.state.rectAreaLTC1,xn.ltc_2.value=ve.state.rectAreaLTC2,xn.pointLights.value=ve.state.point,xn.pointLightShadows.value=ve.state.pointShadow,xn.hemisphereLights.value=ve.state.hemi,xn.directionalShadowMap.value=ve.state.directionalShadowMap,xn.directionalShadowMatrix.value=ve.state.directionalShadowMatrix,xn.spotShadowMap.value=ve.state.spotShadowMap,xn.spotLightMatrix.value=ve.state.spotLightMatrix,xn.spotLightMap.value=ve.state.spotLightMap,xn.pointShadowMap.value=ve.state.pointShadowMap,xn.pointShadowMatrix.value=ve.state.pointShadowMatrix);const ti=gn.getUniforms(),Fs=WM.seqWithValue(ti.seq,xn);return K.currentProgram=gn,K.uniformsList=Fs,gn}function S4(L,J){const de=me.get(L);de.outputEncoding=J.outputEncoding,de.instancing=J.instancing,de.skinning=J.skinning,de.morphTargets=J.morphTargets,de.morphNormals=J.morphNormals,de.morphColors=J.morphColors,de.morphTargetsCount=J.morphTargetsCount,de.numClippingPlanes=J.numClippingPlanes,de.numIntersection=J.numClipIntersection,de.vertexAlphas=J.vertexAlphas,de.vertexTangents=J.vertexTangents,de.toneMapping=J.toneMapping}ki.setAnimationLoop(function Ze(L){Te&&Te(L)}),typeof self<"u"&&ki.setContext(self),this.setAnimationLoop=function(L){Te=L,it.setAnimationLoop(L),null===L?ki.stop():ki.start()},it.addEventListener("sessionstart",ht),it.addEventListener("sessionend",mi),this.render=function(L,J){if(void 0===J||!0===J.isCamera){if(!0!==M){if(!0===L.matrixWorldAutoUpdate&&L.updateMatrixWorld(),null===J.parent&&!0===J.matrixWorldAutoUpdate&&J.updateMatrixWorld(),!0===it.enabled&&!0===it.isPresenting&&(!0===it.cameraAutoUpdate&&it.updateCamera(J),J=it.getCamera()),!0===L.isScene&&L.onBeforeRender(v,L,J,D),_=P.get(L,y.length),_.init(),y.push(_),se.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ae.setFromProjectionMatrix(se),qe=this.localClippingEnabled,we=ie.init(this.clippingPlanes,qe),m=F.get(L,b.length),m.init(),b.push(m),vs(L,J,0,v.sortObjects),m.finish(),!0===v.sortObjects&&m.sort(X,ne),!0===we&&ie.beginShadows(),Ae.render(_.state.shadowsArray,L,J),!0===we&&ie.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ie.render(m,L),_.setupLights(v.useLegacyLights),J.isArrayCamera){const K=J.cameras;for(let ve=0,wt=K.length;ve<wt;ve++){const Bt=K[ve];Gu(m,L,Bt,Bt.viewport)}}else Gu(m,L,J);null!==D&&(De.updateMultisampleRenderTarget(D),De.updateRenderTargetMipmap(D)),!0===L.isScene&&L.onAfterRender(v,L,J),ot.resetDefaultState(),I=-1,N=null,y.pop(),_=y.length>0?y[y.length-1]:null,b.pop(),m=b.length>0?b[b.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(L,J,de){me.get(L.texture).__webglTexture=J,me.get(L.depthTexture).__webglTexture=de;const K=me.get(L);K.__hasExternalTextures=!0,K.__hasExternalTextures&&(K.__autoAllocateDepthBuffer=void 0===de,K.__autoAllocateDepthBuffer||!0===rt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),K.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(L,J){const de=me.get(L);de.__webglFramebuffer=J,de.__useDefaultFramebuffer=void 0===J},this.setRenderTarget=function(L,J=0,de=0){D=L,w=J,C=de;let K=!0,ve=null,wt=!1,Bt=!1;if(L){const cn=me.get(L);void 0!==cn.__useDefaultFramebuffer?(st.bindFramebuffer(36160,null),K=!1):void 0===cn.__webglFramebuffer?De.setupRenderTarget(L):cn.__hasExternalTextures&&De.rebindTextures(L,me.get(L.texture).__webglTexture,me.get(L.depthTexture).__webglTexture);const mn=L.texture;(mn.isData3DTexture||mn.isDataArrayTexture||mn.isCompressedArrayTexture)&&(Bt=!0);const gn=me.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(ve=gn[J],wt=!0):ve=Re.isWebGL2&&L.samples>0&&!1===De.useMultisampledRTT(L)?me.get(L).__webglMultisampledFramebuffer:gn,V.copy(L.viewport),A.copy(L.scissor),k=L.scissorTest}else V.copy(q).multiplyScalar($).floor(),A.copy(Q).multiplyScalar($).floor(),k=Y;if(st.bindFramebuffer(36160,ve)&&Re.drawBuffers&&K&&st.drawBuffers(L,ve),st.viewport(V),st.scissor(A),st.setScissorTest(k),wt){const cn=me.get(L.texture);Z.framebufferTexture2D(36160,36064,34069+J,cn.__webglTexture,de)}else if(Bt){const cn=me.get(L.texture);Z.framebufferTextureLayer(36160,36064,cn.__webglTexture,de||0,J||0)}I=-1},this.readRenderTargetPixels=function(L,J,de,K,ve,wt,Bt){if(!L||!L.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qt=me.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&void 0!==Bt&&(qt=qt[Bt]),qt){st.bindFramebuffer(36160,qt);try{const cn=L.texture,mn=cn.format,gn=cn.type;if(mn!==ma&&pe.convert(mn)!==Z.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const xn=gn===Wv&&(rt.has("EXT_color_buffer_half_float")||Re.isWebGL2&&rt.has("EXT_color_buffer_float"));if(!(gn===eh||pe.convert(gn)===Z.getParameter(35738)||gn===Ru&&(Re.isWebGL2||rt.has("OES_texture_float")||rt.has("WEBGL_color_buffer_float"))||xn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");J>=0&&J<=L.width-K&&de>=0&&de<=L.height-ve&&Z.readPixels(J,de,K,ve,pe.convert(mn),pe.convert(gn),wt)}finally{const cn=null!==D?me.get(D).__webglFramebuffer:null;st.bindFramebuffer(36160,cn)}}},this.copyFramebufferToTexture=function(L,J,de=0){const K=Math.pow(2,-de),ve=Math.floor(J.image.width*K),wt=Math.floor(J.image.height*K);De.setTexture2D(J,0),Z.copyTexSubImage2D(3553,de,0,0,L.x,L.y,ve,wt),st.unbindTexture()},this.copyTextureToTexture=function(L,J,de,K=0){const ve=J.image.width,wt=J.image.height,Bt=pe.convert(de.format),qt=pe.convert(de.type);De.setTexture2D(de,0),Z.pixelStorei(37440,de.flipY),Z.pixelStorei(37441,de.premultiplyAlpha),Z.pixelStorei(3317,de.unpackAlignment),J.isDataTexture?Z.texSubImage2D(3553,K,L.x,L.y,ve,wt,Bt,qt,J.image.data):J.isCompressedTexture?Z.compressedTexSubImage2D(3553,K,L.x,L.y,J.mipmaps[0].width,J.mipmaps[0].height,Bt,J.mipmaps[0].data):Z.texSubImage2D(3553,K,L.x,L.y,Bt,qt,J.image),0===K&&de.generateMipmaps&&Z.generateMipmap(3553),st.unbindTexture()},this.copyTextureToTexture3D=function(L,J,de,K,ve=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const wt=L.max.x-L.min.x+1,Bt=L.max.y-L.min.y+1,qt=L.max.z-L.min.z+1,cn=pe.convert(K.format),mn=pe.convert(K.type);let gn;if(K.isData3DTexture)De.setTexture3D(K,0),gn=32879;else{if(!K.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");De.setTexture2DArray(K,0),gn=35866}Z.pixelStorei(37440,K.flipY),Z.pixelStorei(37441,K.premultiplyAlpha),Z.pixelStorei(3317,K.unpackAlignment);const xn=Z.getParameter(3314),ti=Z.getParameter(32878),Fs=Z.getParameter(3316),Za=Z.getParameter(3315),Sh=Z.getParameter(32877),fr=de.isCompressedTexture?de.mipmaps[0]:de.image;Z.pixelStorei(3314,fr.width),Z.pixelStorei(32878,fr.height),Z.pixelStorei(3316,L.min.x),Z.pixelStorei(3315,L.min.y),Z.pixelStorei(32877,L.min.z),de.isDataTexture||de.isData3DTexture?Z.texSubImage3D(gn,ve,J.x,J.y,J.z,wt,Bt,qt,cn,mn,fr.data):de.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(gn,ve,J.x,J.y,J.z,wt,Bt,qt,cn,fr.data)):Z.texSubImage3D(gn,ve,J.x,J.y,J.z,wt,Bt,qt,cn,mn,fr),Z.pixelStorei(3314,xn),Z.pixelStorei(32878,ti),Z.pixelStorei(3316,Fs),Z.pixelStorei(3315,Za),Z.pixelStorei(32877,Sh),0===ve&&K.generateMipmaps&&Z.generateMipmap(gn),st.unbindTexture()},this.initTexture=function(L){L.isCubeTexture?De.setTextureCube(L,0):L.isData3DTexture?De.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?De.setTexture2DArray(L,0):De.setTexture2D(L,0),st.unbindTexture()},this.resetState=function(){w=0,C=0,D=null,st.reset(),ot.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}(class fse extends FI{}).prototype.isWebGL1Renderer=!0;class $M extends ks{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Kr extends Dl{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Oz=new O,Lz=new O,Fz=new tn,zI=new CM,KM=new Ac;class ay extends ks{constructor(e=new sn,t=new Kr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Oz.fromBufferAttribute(t,r-1),Lz.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Oz.distanceTo(Lz);e.setAttribute("lineDistance",new Ke(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),KM.copy(n.boundingSphere),KM.applyMatrix4(r),KM.radius+=s,!1===e.ray.intersectsSphere(KM))return;Fz.copy(r).invert(),zI.copy(e.ray).applyMatrix4(Fz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new O,d=new O,f=new O,p=new O,m=this.isLineSegments?2:1,_=n.index,y=n.attributes.position;if(null!==_)for(let w=Math.max(0,o.start),C=Math.min(_.count,o.start+o.count)-1;w<C;w+=m){const D=_.getX(w),I=_.getX(w+1);if(c.fromBufferAttribute(y,D),d.fromBufferAttribute(y,I),zI.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const V=e.ray.origin.distanceTo(p);V<e.near||V>e.far||t.push({distance:V,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}else for(let w=Math.max(0,o.start),C=Math.min(y.count,o.start+o.count)-1;w<C;w+=m){if(c.fromBufferAttribute(y,w),d.fromBufferAttribute(y,w+1),zI.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||t.push({distance:I,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const Nz=new O,Bz=new O;class ly extends ay{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Nz.fromBufferAttribute(t,r),Bz.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Nz.distanceTo(Bz);e.setAttribute("lineDistance",new Ke(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Sm extends Dl{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Uz=new tn,HI=new CM,JM=new Ac,QM=new O;class eC extends ks{constructor(e=new sn,t=new Sm){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),JM.copy(n.boundingSphere),JM.applyMatrix4(r),JM.radius+=s,!1===e.ray.intersectsSphere(JM))return;Uz.copy(r).invert(),HI.copy(e.ray).applyMatrix4(Uz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,f=n.attributes.position;if(null!==c)for(let _=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);_<b;_++){const y=c.getX(_);QM.fromBufferAttribute(f,y),Vz(QM,y,l,r,e,t,this)}else for(let _=Math.max(0,o.start),b=Math.min(f.count,o.start+o.count);_<b;_++)QM.fromBufferAttribute(f,_),Vz(QM,_,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Vz(i,e,t,n,r,s,o){const a=HI.distanceSqToPoint(i);if(a<t){const l=new O;HI.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Rl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;o=t||e*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Me:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new O,r=[],s=[],o=[],a=new O,l=new tn;for(let m=0;m<=e;m++)r[m]=this.getTangentAt(m/e,new O);s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),p<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Hi(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,_))}o[m].crossVectors(r[m],s[m])}if(!0===t){let m=Math.acos(Hi(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let _=1;_<=e;_++)s[_].applyMatrix4(l.makeRotationAxis(r[_],m*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class GI extends Rl{constructor(e=0,t=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new Me,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function WI(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s;return i+e*s+t*o+n*(o*s)}}}const tC=new O,$I=new WI,jI=new WI,qI=new WI;function zz(i,e,t,n,r){const s=.5*(n-e),o=.5*(r-t),a=i*i;return(2*t-2*n+s+o)*(i*a)+(-3*t+3*n-2*s-o)*a+s*i+t}function cy(i,e,t,n){return function Sse(i,e){const t=1-i;return t*t*e}(i,e)+function Ese(i,e){return 2*(1-i)*i*e}(i,t)+function Dse(i,e){return i*i*e}(i,n)}function uy(i,e,t,n,r){return function Ase(i,e){const t=1-i;return t*t*t*e}(i,e)+function Tse(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function Ise(i,e){return 3*(1-i)*i*i*e}(i,n)+function Rse(i,e){return i*i*i*e}(i,r)}class Hz extends Rl{constructor(e=new Me,t=new Me,n=new Me,r=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Me){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(uy(e,r.x,s.x,o.x,a.x),uy(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class XI extends Rl{constructor(e=new Me,t=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Me){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gz extends Rl{constructor(e=new Me,t=new Me,n=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Me){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(cy(e,r.x,s.x,o.x),cy(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $z extends Rl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Me){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return n.set(zz(a,l.x,c.x,d.x,f.x),zz(a,l.y,c.y,d.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new Me).fromArray(r))}return this}}var YI=Object.freeze({__proto__:null,ArcCurve:class Mse extends GI{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class Cse extends Rl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new O){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(tC.subVectors(r[0],r[1]).add(r[0]),c=tC);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(tC.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=tC),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let _=Math.pow(c.distanceToSquared(f),m),b=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);b<1e-4&&(b=1),_<1e-4&&(_=b),y<1e-4&&(y=b),$I.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,_,b,y),jI.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,_,b,y),qI.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,_,b,y)}else"catmullrom"===this.curveType&&($I.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),jI.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),qI.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return n.set($I.calc(l),jI.calc(l),qI.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new O).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Hz,CubicBezierCurve3:class Pse extends Rl{constructor(e=new O,t=new O,n=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new O){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(uy(e,r.x,s.x,o.x,a.x),uy(e,r.y,s.y,o.y,a.y),uy(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:GI,LineCurve:XI,LineCurve3:class kse extends Rl{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new O){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Gz,QuadraticBezierCurve3:class Wz extends Rl{constructor(e=new O,t=new O,n=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new O){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(cy(e,r.x,s.x,o.x),cy(e,r.y,s.y,o.y),cy(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:$z});class Ose extends Rl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new XI(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push((new YI[r.type]).fromJSON(r))}return this}}class nC extends Ose{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new XI(this.currentPoint.clone(),new Me(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new Gz(this.currentPoint.clone(),new Me(e,t),new Me(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new Hz(this.currentPoint.clone(),new Me(e,t),new Me(n,r),new Me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new $z(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new GI(e,t,n,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class iC extends sn{constructor(e=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Hi(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/t,f=new O,p=new Me,m=new O,_=new O,b=new O;let y=0,v=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:y=e[M+1].x-e[M].x,v=e[M+1].y-e[M].y,m.x=1*v,m.y=-y,m.z=0*v,b.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:y=e[M+1].x-e[M].x,v=e[M+1].y-e[M].y,m.x=1*v,m.y=-y,m.z=0*v,_.copy(m),m.x+=b.x,m.y+=b.y,m.z+=b.z,m.normalize(),l.push(m.x,m.y,m.z),b.copy(_)}for(let M=0;M<=t;M++){const w=n+M*d*r,C=Math.sin(w),D=Math.cos(w);for(let I=0;I<=e.length-1;I++)f.x=e[I].x*C,f.y=e[I].y,f.z=e[I].x*D,o.push(f.x,f.y,f.z),p.x=M/t,p.y=I/(e.length-1),a.push(p.x,p.y),c.push(l[3*I+0]*C,l[3*I+1],l[3*I+0]*D)}for(let M=0;M<t;M++)for(let w=0;w<e.length-1;w++){const C=w+M*e.length,I=C+e.length,N=C+e.length+1,V=C+1;s.push(C,I,V),s.push(N,V,I)}this.setIndex(s),this.setAttribute("position",new Ke(o,3)),this.setAttribute("uv",new Ke(a,2)),this.setAttribute("normal",new Ke(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iC(e.points,e.segments,e.phiStart,e.phiLength)}}class rC extends iC{constructor(e=1,t=1,n=4,r=8){const s=new nC;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new rC(e.radius,e.length,e.capSegments,e.radialSegments)}}class Em extends sn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],f=[],p=[],m=[];let _=0;const b=[],y=n/2;let v=0;function w(C){const D=_,I=new Me,N=new O;let V=0;const A=!0===C?e:t,k=!0===C?1:-1;for(let le=1;le<=r;le++)f.push(0,y*k,0),p.push(0,k,0),m.push(.5,.5),_++;const ee=_;for(let le=0;le<=r;le++){const X=le/r*l+a,ne=Math.cos(X),q=Math.sin(X);N.x=A*q,N.y=y*k,N.z=A*ne,f.push(N.x,N.y,N.z),p.push(0,k,0),I.x=.5*ne+.5,I.y=.5*q*k+.5,m.push(I.x,I.y),_++}for(let le=0;le<r;le++){const $=D+le,X=ee+le;!0===C?d.push(X,X+1,$):d.push(X+1,X,$),V+=3}c.addGroup(v,V,!0===C?1:2),v+=V}(function M(){const C=new O,D=new O;let I=0;const N=(t-e)/n;for(let V=0;V<=s;V++){const A=[],k=V/s,ee=k*(t-e)+e;for(let le=0;le<=r;le++){const $=le/r,X=$*l+a,ne=Math.sin(X),q=Math.cos(X);D.x=ee*ne,D.y=-k*n+y,D.z=ee*q,f.push(D.x,D.y,D.z),C.set(ne,N,q).normalize(),p.push(C.x,C.y,C.z),m.push($,1-k),A.push(_++)}b.push(A)}for(let V=0;V<r;V++)for(let A=0;A<s;A++){const ee=b[A+1][V],le=b[A+1][V+1],$=b[A][V+1];d.push(b[A][V],ee,$),d.push(ee,le,$),I+=6}c.addGroup(v,I,0),v+=I})(),!1===o&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new Ke(f,3)),this.setAttribute("normal",new Ke(p,3)),this.setAttribute("uv",new Ke(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Em(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sC extends Em{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new sC(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class py extends sn{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new O,p=new O,m=[],_=[],b=[],y=[];for(let v=0;v<=n;v++){const M=[],w=v/n;let C=0;0===v&&0===o?C=.5/t:v===n&&l===Math.PI&&(C=-.5/t);for(let D=0;D<=t;D++){const I=D/t;f.x=-e*Math.cos(r+I*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(r+I*s)*Math.sin(o+w*a),_.push(f.x,f.y,f.z),p.copy(f).normalize(),b.push(p.x,p.y,p.z),y.push(I+C,1-w),M.push(c++)}d.push(M)}for(let v=0;v<n;v++)for(let M=0;M<t;M++){const w=d[v][M+1],C=d[v][M],D=d[v+1][M],I=d[v+1][M+1];(0!==v||o>0)&&m.push(w,C,I),(v!==n-1||l<Math.PI)&&m.push(C,D,I)}this.setIndex(m),this.setAttribute("position",new Ke(_,3)),this.setAttribute("normal",new Ke(b,3)),this.setAttribute("uv",new Ke(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new py(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cR extends Dl{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new je(16777215),this.specular=new je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function _a(i,e,t){return uR(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)}function gh(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function uR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class fC{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class poe extends fC{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-n;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*n-t;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,_=(n-t)/(r-t),b=_*_,y=b*_,v=-p*y+2*p*b-p*_,M=(1+p)*y+(-1.5-2*p)*b+(-.5+p)*_+1,w=(-1-m)*y+(1.5+m)*b+.5*_,C=m*y-m*b;for(let D=0;D!==a;++D)s[D]=v*o[d+D]+M*o[c+D]+w*o[l+D]+C*o[f+D];return s}}class tH extends fC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(n-t)/(r-t),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class moe extends fC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Pl{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gh(t,this.TimeBufferType),this.values=gh(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:gh(e.times,Array),values:gh(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new moe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new poe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=_a(n,s,o),this.values=_a(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&uR(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=_a(this.times),t=_a(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const f=a*n,p=f-n,m=f+n;for(let _=0;_!==n;++_){const b=t[f+_];if(b!==t[p+_]||b!==t[m+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*n,p=o*n;for(let m=0;m!==n;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=_a(e,0,o),this.values=_a(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=_a(this.times,0),t=_a(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Pl.prototype.TimeBufferType=Float32Array,Pl.prototype.ValueBufferType=Float32Array,Pl.prototype.DefaultInterpolation=2301;class Tm extends Pl{}Tm.prototype.ValueTypeName="bool",Tm.prototype.ValueBufferType=Array,Tm.prototype.DefaultInterpolation=2300,Tm.prototype.InterpolantFactoryMethodLinear=void 0,Tm.prototype.InterpolantFactoryMethodSmooth=void 0;(class nH extends Pl{}).prototype.ValueTypeName="color";(class pC extends Pl{}).prototype.ValueTypeName="number";class goe extends fC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)Oo.slerpFlat(s,0,o,c-a,o,c,l);return s}}class my extends Pl{InterpolantFactoryMethodLinear(e){return new goe(this.times,this.values,this.getValueSize(),e)}}my.prototype.ValueTypeName="quaternion",my.prototype.DefaultInterpolation=2301,my.prototype.InterpolantFactoryMethodSmooth=void 0;class Im extends Pl{}Im.prototype.ValueTypeName="string",Im.prototype.ValueBufferType=Array,Im.prototype.DefaultInterpolation=2300,Im.prototype.InterpolantFactoryMethodLinear=void 0,Im.prototype.InterpolantFactoryMethodSmooth=void 0;(class mC extends Pl{}).prototype.ValueTypeName="vector";const Rm={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class iH{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return-1!==f&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],_=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return _}return null}}}const rH=new iH;class gy{constructor(e){this.manager=void 0!==e?e:rH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Lc={};class yoe extends Error{constructor(e,t){super(e),this.response=t}}class kl extends gy{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Rm.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Lc[e])return void Lc[e].push({onLoad:t,onProgress:n,onError:r});Lc[e]=[],Lc[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=Lc[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,_=0!==m;let b=0;const y=new ReadableStream({start(v){!function M(){f.read().then(({done:w,value:C})=>{if(w)v.close();else{b+=C.byteLength;const D=new ProgressEvent("progress",{lengthComputable:_,loaded:b,total:m});for(let I=0,N=d.length;I<N;I++){const V=d[I];V.onProgress&&V.onProgress(D)}v.enqueue(C),M()}})}()}});return new Response(y)}throw new yoe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(_=>m.decode(_))}}}).then(c=>{Rm.add(e,c);const d=Lc[e];delete Lc[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Lc[e];if(void 0===d)throw this.manager.itemError(e),c;delete Lc[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class _C extends gy{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Rm.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qv("img");function l(){d(),Rm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){d(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class boe extends gy{constructor(e){super(e)}load(e,t,n,r){const s=new Pu,o=new _C(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class xoe extends ks{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class mR extends xoe{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const vR="\\[\\]\\.:\\/",Uoe=new RegExp("["+vR+"]","g"),yR="[^"+vR+"]",Voe="[^"+vR.replace("\\.","")+"]",$oe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",yR)+/(WCOD+)?/.source.replace("WCOD",Voe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",yR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",yR)+"$"),joe=["material","materials","bones","map"];class qoe{constructor(e,t,n){const r=n||pi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let pi=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Uoe,"")}static parseTrackName(t){const n=$oe.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==joe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let d=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===d){d=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==d){if(void 0===t[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[d]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=qoe,i})();pi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},pi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},pi.prototype.GetterByBindingType=[pi.prototype._getValue_direct,pi.prototype._getValue_array,pi.prototype._getValue_arrayElement,pi.prototype._getValue_toArray],pi.prototype.SetterByBindingTypeAndVersioning=[[pi.prototype._setValue_direct,pi.prototype._setValue_direct_setNeedsUpdate,pi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pi.prototype._setValue_array,pi.prototype._setValue_array_setNeedsUpdate,pi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pi.prototype._setValue_arrayElement,pi.prototype._setValue_arrayElement_setNeedsUpdate,pi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pi.prototype._setValue_fromArray,pi.prototype._setValue_fromArray_setNeedsUpdate,pi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"151"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="151");class Fc{constructor(e){this.nativeMesh=e,this.name=""}get position(){return this.nativeMesh.position}set position(e){this.nativeMesh.position.set(e.x,e.y,e.z)}get rotation(){return this.nativeMesh.quaternion}set rotation(e){this.nativeMesh.quaternion.set(e.x,e.y,e.z,e.w)}get scale(){return this.nativeMesh.scale}set scale(e){this.nativeMesh.scale.set(e.x,e.y,e.z)}get visible(){return this.nativeMesh.visible}set visible(e){this.nativeMesh.visible=e}isEmpty(){return(this.nativeMesh instanceof $M||this.nativeMesh instanceof Bu)&&0==this.nativeMesh.children.length}popChild(e){const t=this.nativeMesh.children.find(n=>n.name===e||n.userData.name===e);return t?(t.removeFromParent(),new Fc(t)):null}getBoundings(){return(new El).setFromObject(this.nativeMesh)}clone(){return new Fc(this.nativeMesh.clone())}addToWorld(e){var t;null===(t=e.nativeScene)||void 0===t||t.add(this.nativeMesh)}removeFromWorld(e){var t;null===(t=e.nativeScene)||void 0===t||t.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(e=>{e instanceof wi&&this.disposeMesh(e)}),this.nativeMesh instanceof wi&&this.disposeMesh(this.nativeMesh)}disposeMesh(e){e.geometry.dispose();const t=e.material instanceof Array?e.material:[e.material];for(const n of t)n.dispose()}}class Joe extends class OQ{createBox(e,t){return this.createPrimitive({shape:"BOX",dimensions:e},t)}createCapsule(e,t,n){return this.createPrimitive({shape:"CAPSULE",radius:e,centersDistance:t},n)}createCylinder(e,t,n){return this.createPrimitive({shape:"CYLINDER",radius:e,height:t},n)}createCone(e,t,n){return this.createPrimitive({shape:"CONE",radius:e,height:t},n)}createSphere(e){return this.createPrimitive({shape:"SPHERE",radius:e})}}{getRandomMaterial(){return new Al({color:Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())})}transformPrimitiveZUp(e){e.rotateX(Math.PI/2);const t=new Bu;return t.add(e),t}createPrimitive(e,t=this.getRandomMaterial()){let n=null;switch(e.shape){case"BOX":n=new wi(new ch(e.dimensions.x,e.dimensions.y,e.dimensions.z),t);break;case"CAPSULE":n=this.transformPrimitiveZUp(new wi(new rC(e.radius,e.centersDistance),t));break;case"CYLINDER":n=this.transformPrimitiveZUp(new wi(new Em(e.radius,e.radius,e.height),t));break;case"CONE":n=this.transformPrimitiveZUp(new wi(new sC(e.radius,e.height),t));break;case"SPHERE":n=new wi(new py(e.radius),t)}if(!n)throw new Error(`Primitive with shape "${e.shape}" not implemented`);return new Fc(n)}}class eae{constructor(){this.gltfLoader=null}registerGltfLoaderAddon(e){this.gltfLoader=e}loadFromGgGlb(e,t){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){if(!this.gltfLoader)throw new Error("Three GLTF loader addon not registered! Use loader.registerGltfLoaderAddon(new GLTFLoader()) before trying to load something");const n=yield this.gltfLoader.parseAsync(e,"");return n.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new Fc(n.scene)})}}class tae extends Fc{constructor(){super(new ly(new sn,new Kr({color:16711680,linewidth:.5}))),this.debugBufferSize=3e6,this.index=0,this.lastMaxIndex=0,this.debugVertices=new Float32Array(this.debugBufferSize),this.debugColors=new Float32Array(this.debugBufferSize),this.nativeMesh.geometry.setAttribute("position",new hr(this.debugVertices,3)),this.nativeMesh.geometry.setAttribute("color",new hr(this.debugColors,3)),this.nativeMesh.frustumCulled=!1}drawContactPoint(e,t,n){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,e.x+t.x,e.y+t.y,e.z+t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}drawLine(e,t,n){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,t.x,t.y,t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}update(){this.index<this.lastMaxIndex&&(this.debugVertices.fill(0,this.index,this.lastMaxIndex),this.debugColors.fill(0,this.index,this.lastMaxIndex)),this.lastMaxIndex=this.index,this.index=0,this.nativeMesh.geometry.attributes.position.needsUpdate=!0,this.nativeMesh.geometry.attributes.color.needsUpdate=!0}setXYZ(e,t,n,r,s){e[t*=3]=n,e[t+1]=r,e[t+2]=s}}class DH{constructor(){this._nativeScene=null,this.factory=new Joe,this.loader=new eae,this.debugPhysicsDrawerClass=tae}get nativeScene(){return this._nativeScene}init(){return i=this,e=void 0,n=function*(){this._nativeScene=new $M},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}dispose(){this._nativeScene=new $M}}class iae extends EQ{}class rae extends Fc{constructor(e){super(e),this.nativeCamera=e}get supportsFov(){return this.nativeCamera instanceof Mr||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(e){this.supportsFov&&(this.nativeCamera.fov=e,this.nativeCamera.updateProjectionMatrix())}}class AH extends kQ{constructor(e,t={},n=new iae(new rae(new Mr(75,1,1,1e4)))){super(e,t),this.canvas=e,this.camera=n,this.renderer=new FI({canvas:e,antialias:this.rendererOptions.antialias,preserveDrawingBuffer:!0,alpha:this.rendererOptions.transparent}),this.renderer.useLegacyLights=!1,this.renderer.outputEncoding=si,this.renderer.toneMappingExposure=2,this.renderer.shadowMap.enabled=!0,this.renderer.setClearColor(this.rendererOptions.background),this.renderer.shadowMap.type=2,this.renderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}resizeRenderer(e){this.renderer.setSize(e.x,e.y),(this.camera.object3D.nativeCamera instanceof Mr||"PerspectiveCamera"==this.camera.object3D.nativeCamera.type)&&Math.abs(this.camera.object3D.nativeCamera.aspect-e.x/e.y)>.01&&(this.camera.object3D.nativeCamera.aspect=e.x/e.y,this.camera.object3D.nativeCamera.updateProjectionMatrix())}render(){this.renderer.render(this.world.visualScene.nativeScene,this.camera.object3D.nativeCamera)}dispose(){super.dispose(),this.renderer instanceof FI&&(this.renderer.dispose(),this.renderer.forceContextLoss()),this.renderer.domElement=null}}const sae=/^[og]\s*(.+)?/,oae=/^mtllib /,aae=/^usemtl /,lae=/^usemap /,TH=/\s+/,IH=new O,MR=new O,RH=new O,PH=new O,va=new O,SC=new je;function cae(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,s=this.object.geometry.normals;IH.fromArray(r,e),MR.fromArray(r,t),RH.fromArray(r,n),va.subVectors(RH,MR),PH.subVectors(IH,MR),va.cross(PH),va.normalize(),s.push(va.x,va.y,va.z),s.push(va.x,va.y,va.z),s.push(va.x,va.y,va.z)},addColor:function(e,t,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,o,a,l,c){const d=this.vertices.length;let f=this.parseVertexIndex(e,d),p=this.parseVertexIndex(t,d),m=this.parseVertexIndex(n,d);if(this.addVertex(f,p,m),this.addColor(f,p,m),void 0!==a&&""!==a){const _=this.normals.length;f=this.parseNormalIndex(a,_),p=this.parseNormalIndex(l,_),m=this.parseNormalIndex(c,_),this.addNormal(f,p,m)}else this.addFaceNormal(f,p,m);if(void 0!==r&&""!==r){const _=this.uvs.length;f=this.parseUVIndex(r,_),p=this.parseUVIndex(s,_),m=this.parseUVIndex(o,_),this.addUV(f,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return i.startObject("",!1),i}class kH extends gy{constructor(e){super(e),this.materials=null}load(e,t,n,r){const s=this,o=new kl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new cae;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const d=c.charAt(0);if("#"!==d)if("v"===d){const f=c.split(TH);switch(f[0]){case"v":t.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(SC.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),t.colors.push(SC.r,SC.g,SC.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":t.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===d){const p=c.slice(1).trim().split(TH),m=[];for(let b=0,y=p.length;b<y;b++){const v=p[b];if(v.length>0){const M=v.split("/");m.push(M)}}const _=m[0];for(let b=1,y=m.length-1;b<y;b++){const v=m[b],M=m[b+1];t.addFace(_[0],v[0],M[0],_[1],v[1],M[1],_[2],v[2],M[2])}}else if("l"===d){const f=c.substring(1).trim().split(" ");let p=[];const m=[];if(-1===c.indexOf("/"))p=f;else for(let _=0,b=f.length;_<b;_++){const y=f[_].split("/");""!==y[0]&&p.push(y[0]),""!==y[1]&&m.push(y[1])}t.addLineGeometry(p,m)}else if("p"===d){const p=c.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=sae.exec(c))){const f=(" "+r[0].slice(1).trim()).slice(1);t.startObject(f)}else if(aae.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(oae.test(c))t.materialLibraries.push(c.substring(7).trim());else if(lae.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const f=t.object.currentMaterial();f&&(f.smooth=t.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new Bu;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],d=c.geometry,f=c.materials,p="Line"===d.type,m="Points"===d.type;let _=!1;if(0===d.vertices.length)continue;const b=new sn;b.setAttribute("position",new Ke(d.vertices,3)),d.normals.length>0&&b.setAttribute("normal",new Ke(d.normals,3)),d.colors.length>0&&(_=!0,b.setAttribute("color",new Ke(d.colors,3))),!0===d.hasUVIndices&&b.setAttribute("uv",new Ke(d.uvs,2));const y=[];for(let M=0,w=f.length;M<w;M++){const C=f[M],D=C.name+"_"+C.smooth+"_"+_;let I=t.materials[D];if(null!==this.materials)if(I=this.materials.create(C.name),!p||!I||I instanceof Kr){if(m&&I&&!(I instanceof Sm)){const N=new Sm({size:10,sizeAttenuation:!1});Dl.prototype.copy.call(N,I),N.color.copy(I.color),N.map=I.map,I=N}}else{const N=new Kr;Dl.prototype.copy.call(N,I),N.color.copy(I.color),I=N}void 0===I&&(I=p?new Kr:m?new Sm({size:1,sizeAttenuation:!1}):new cR,I.name=C.name,I.flatShading=!C.smooth,I.vertexColors=_,t.materials[D]=I),y.push(I)}let v;if(y.length>1){for(let M=0,w=f.length;M<w;M++){const C=f[M];b.addGroup(C.groupStart,C.groupCount,M)}v=p?new ly(b,y):m?new eC(b,y):new wi(b,y)}else v=p?new ly(b,y[0]):m?new eC(b,y[0]):new wi(b,y[0]);v.name=c.name,s.add(v)}else if(t.vertices.length>0){const a=new Sm({size:1,sizeAttenuation:!1}),l=new sn;l.setAttribute("position",new Ke(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(l.setAttribute("color",new Ke(t.colors,3)),a.vertexColors=!0);const c=new eC(l,a);s.add(c)}return s}}class OH extends gy{constructor(e){super(e)}load(e,t,n,r){const s=this,o=""===this.path?class _R{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(e):this.path,a=new kl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const n=e.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<n.length;l++){let c=n[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const d=c.indexOf(" ");let f=d>=0?c.substring(0,d):c;f=f.toLowerCase();let p=d>=0?c.substring(d+1):"";if(p=p.trim(),"newmtl"===f)r={name:p},o[p]=r;else if("ka"===f||"kd"===f||"ks"===f||"ke"===f){const m=p.split(s,3);r[f]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else r[f]=p}const a=new uae(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class uae{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:0,this.wrap=void 0!==this.options.wrap?this.options.wrap:1e3}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const n in e){const r=e[n],s={};t[n]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function o(a,l){if(r[a])return;const c=t.getTextureParams(l,r),d=t.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(t.baseUrl,c.url));d.repeat.copy(c.scale),d.offset.copy(c.offset),d.wrapS=t.wrap,d.wrapT=t.wrap,("map"===a||"emissiveMap"===a)&&(d.encoding=si),r[a]=d}for(const a in n){const l=n[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new je).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new je).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new je).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[e]=new cR(r),this.materials[e]}getTextureParams(e,t){const n={scale:new Me(1,1),offset:new Me(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(n.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(n.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),n.url=r.join(" ").trim(),n}loadTexture(e,t,n,r,s){const o=void 0!==this.manager?this.manager:rH;let a=o.getHandler(e);null===a&&(a=new boe(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,n,r,s);return void 0!==t&&(l.mapping=t),l}}const dae=["previewCanvasContainer"],hae=["previewCanvas"];let fae=(()=>{class i{constructor(t){this.eelDelegate=t,this._resourceData$=new Nn(null),this.name="",this.changed=new et,this.destroyed$=new He}set resourceData(t){this._resourceData$.next(t)}ngAfterViewInit(){var t=this;return Ri(function*(){var a;t.world=new FU(new DH,{init:(a=Ri(function*(){}),function(){return a.apply(this,arguments)}),simulate:()=>{}}),yield t.world.init(),t.world.visualScene.nativeScene.add(new mR(16777215,2));let n=new Nn({x:1,y:1});const r=new AH(t.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810});r.camera.position={x:0,y:0,z:2.5},r.camera.rotation=Io.lookAt(r.camera.position,zt.add(r.camera.position,{x:0,y:1,z:0}),{x:0,y:0,z:1}),t.world.addEntity(r);const s=new IQ(t.world.keyboardInput,r.camera,{mouseOptions:{canvas:t.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",movementOptions:{speed:1}});t.world.addEntity(s);const o=()=>{n.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(o).observe(t.previewCanvasContainer.nativeElement),o(),t.world.start(),t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var a=Ri(function*(l){if(l){yield t.eelDelegate.serializeResource(l.block_id.substring(0,l.block_id.indexOf("MISC"))+"ETRACKFM"+l.block_id.substr(l.block_id.indexOf("MISC")+4,4)+"_001.FAM");const c=yield t.eelDelegate.serializeResource(l.block_id,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!1,maps__save_collisions:!1,maps__save_spherical_skybox_texture:!0});console.log(c);const d=c.find(p=>p.endsWith(".obj")),f=c.find(p=>p.endsWith(".mtl"));if(d){const p=new kH,_=yield(new OH).loadAsync(f);_.preload(),p.setMaterials(_);const b=yield p.loadAsync(d);b.traverse(y=>{if(y instanceof wi){const v=y.material instanceof Array?y.material:[y.material];for(const M of v)M.transparent=!0,M.alphaTest=.5,M instanceof Al&&M.map&&(M.map.wrapS=wr,M.map.wrapT=wr,M.map.needsUpdate=!0),M.side=2}}),t.world.addEntity(new Zd(new Fc(b),null))}}else console.log("No oRIP :(")});return function(l){return a.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(Bp))},i.\u0275cmp=Ct({type:i,selectors:[["app-tri-map-block-ui"]],viewQuery:function(t,n){if(1&t&&(ji(dae,5),ji(hae,5)),2&t){let r;$t(r=jt())&&(n.previewCanvasContainer=r.first),$t(r=jt())&&(n.previewCanvas=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:6,vars:3,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],[3,"resourceData"]],template:function(t,n){1&t&&(fe(0,"div",0,1),Et(2,"canvas",2,3),be(),Et(4,"app-compound-block-ui",4),Vi(5,"async")),2&t&&(re(4),oe("resourceData",sr(5,1,n._resourceData$)))},dependencies:[oM,pp],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),i})();function pae(i,e){if(1&i&&(_o(),Et(0,"circle",4)),2&i){const t=Le(),n=mu(1);dc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(n)),Qt("r",t._getCircleRadius())}}function mae(i,e){if(1&i&&(_o(),Et(0,"circle",4)),2&i){const t=Le(),n=mu(1);dc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(n)),Qt("r",t._getCircleRadius())}}const _ae=bv(class{constructor(i){this._elementRef=i}},"primary"),vae=new Se("mat-progress-spinner-default-options",{providedIn:"root",factory:function yae(){return{diameter:100}}});class Ol extends _ae{constructor(e,t,n,r,s,o,a,l){super(e),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=Zt.EMPTY,this.mode="determinate";const c=Ol._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(n.head)||c.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=ha(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=ha(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,ha(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=C2(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,n=Ol._diameters;let r=n.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,n.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Ol._diameters=new WeakMap,Ol.\u0275fac=function(e){return new(e||Ol)(R(Wt),R(xr),R(kt,8),R(Ks,8),R(vae),R(ri),R(Rw),R(St))},Ol.\u0275cmp=Ct({type:Ol,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(Qt("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),dc("width",t.diameter,"px")("height",t.diameter,"px"),li("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[lt],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(_o(),fe(0,"svg",0,1),Ne(2,pae,1,11,"circle",2),Ne(3,mae,1,9,"circle",3),be()),2&e&&(dc("width",t.diameter,"px")("height",t.diameter,"px"),oe("ngSwitch","indeterminate"===t.mode),Qt("viewBox",t._getViewBox()),re(2),oe("ngSwitchCase",!0),re(1),oe("ngSwitchCase",!1))},dependencies:[fp,$x],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let xae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,Wa,wn]}),i})();const wae=["previewCanvasContainer"],Mae=["previewCanvas"];function Cae(i,e){1&i&&Et(0,"mat-spinner",6)}let Sae=(()=>{class i{constructor(t,n,r){this.eelDelegate=t,this.cdr=n,this.mainService=r,this._resourceData$=new Nn(null),this.name="",this.changed=new et,this.destroyed$=new He,this.entity=null}get resourceData(){return this._resourceData$.getValue()}set resourceData(t){this._resourceData$.next(t)}ngAfterViewInit(){var t=this;return Ri(function*(){var s;t.world=new FU(new DH,{init:(s=Ri(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield t.world.init(),t.world.visualScene.nativeScene.add(new mR(16777215,2));let n=new Nn({x:1,y:1});t.renderer=new AH(t.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),t.renderer.camera.position={x:1,y:4,z:1.5},t.renderer.camera.rotation=Io.lookAt(t.renderer.camera.position,{x:0,y:0,z:0},{x:0,y:0,z:1}),t.world.addEntity(t.renderer),t.controller=new kU(t.renderer.camera,{mouseOptions:{canvas:t.previewCanvas.nativeElement}}),t.world.addEntity(t.controller);const r=()=>{n.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var s=Ri(function*(o){const a=yield t.loadPreviewFilePaths(o?.block_id);a&&(yield t.loadPreview(a))});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(at(t.destroyed$),Rn(([s,o])=>!!t.resourceData&&s.startsWith(t.resourceData.block_id)),xw(1500)).subscribe(Ri(function*(){t.unloadPreview();const s=yield t.postTmpUpdates(t.resourceData?.block_id);s&&(yield t.loadPreview(s))}))})()}postTmpUpdates(t){var n=this;return Ri(function*(){if(t){const r=yield n.eelDelegate.serializeResourceTmp(t,Object.entries(n.mainService.changedDataBlocks).filter(([a,l])=>"__custom_action_performed__"!=a&&a.startsWith(t)).map(([a,l])=>({id:a,value:l})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreviewFilePaths(t){var n=this;return Ri(function*(){if(t){const r=yield n.eelDelegate.serializeResource(t,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreview([t,n]){var r=this;return Ri(function*(){r.unloadPreview();const s=new kH,a=yield(new OH).loadAsync(n);a.preload(),s.setMaterials(a);const l=yield s.loadAsync(t);l.traverse(f=>{if(f instanceof wi){const p=f.material instanceof Array?f.material:[f.material];for(const m of p)m.transparent=!0,m.alphaTest=.5,m instanceof Al&&m.map&&(m.map.wrapS=wr,m.map.wrapT=wr,m.map.needsUpdate=!0),m.side=2}}),r.entity=new Zd(new Fc(l),null),r.world.addEntity(r.entity),r.world.removeEntity(r.controller);const c=r.entity.object3D.getBoundings(),d=zt.scalarMult(zt.add(c.min,c.max),.5);r.renderer.camera.position=zt.add(d,zt.scalarMult(zt.norm({x:1,y:-4,z:1.5}),zt.dist(c.min,c.max))),r.controller=new kU(r.renderer.camera,{mouseOptions:{canvas:r.previewCanvas.nativeElement},target:d}),r.world.addEntity(r.controller),r.cdr.markForCheck()})()}unloadPreview(){this.entity&&(this.world.removeEntity(this.entity),this.entity.dispose(),this.entity=null,this.cdr.markForCheck())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(Bp),R(ri),R(IT))},i.\u0275cmp=Ct({type:i,selectors:[["app-orip-geometry-block-ui"]],viewQuery:function(t,n){if(1&t&&(ji(wae,5),ji(Mae,5)),2&t){let r;$t(r=jt())&&(n.previewCanvasContainer=r.first),$t(r=jt())&&(n.previewCanvas=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:7,vars:4,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[3,"resourceData"],["mode","indeterminate"]],template:function(t,n){1&t&&(fe(0,"div",0,1),Et(2,"canvas",2,3),Ne(4,Cae,1,0,"mat-spinner",4),be(),Et(5,"app-compound-block-ui",5),Vi(6,"async")),2&t&&(re(4),oe("ngIf",!n.entity),re(1),oe("resourceData",sr(6,2,n._resourceData$)))},dependencies:[br,Ol,oM,pp],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),i})();function Eae(i,e){if(1&i&&(fe(0,"mat-error"),pt(1),be()),2&i){const t=Le(2);re(1),L_(" ",t.error.error_class,": ",t.error.error_text," ")}}function Dae(i,e){1&i&&Et(0,"mat-spinner",5)}function Aae(i,e){if(1&i&&(fe(0,"div",2),Ne(1,Eae,2,2,"mat-error",3),Ne(2,Dae,1,0,"mat-spinner",4),be()),2&i){const t=Le();re(1),oe("ngIf",t.error),re(1),oe("ngIf",!t.resourceData)}}function Tae(i,e){}let Pm=(()=>{class i{constructor(t){this.mainService=t,this._component=null,this._componentChangedSub=null,this.destroyed$=new He,this._name="",this._resourceData=null}get name(){return this._name}set name(t){this._name=t,this._component?.instance&&(this._component.instance.name=t)}get resourceData(){return this._resourceData}get error(){return this._resourceData?.error_class?this._resourceData:null}set resourceData(t){if(this._resourceData=t,this.dataBlockUiHost.viewContainerRef.clear(),this._resourceData&&this._resourceData.block_class_mro){const n=this._resourceData;let r;for(const s of n.block_class_mro.split("__"))if(r=i.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+n.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._dataSnapshot=(0,TT.cloneDeep)(n.value),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._component.instance.resourceData=n,this._component.instance.name=this._name,this._componentChangedSub=this._component.instance.changed.pipe(at(this.destroyed$)).subscribe(()=>{this.mainService.dataBlockChange$.next([n.block_id,(0,TT.isEqual)(n.value,this._dataSnapshot)?void 0:n.value])})}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.DATA_BLOCK_COMPONENTS_MAP={DataBlock:LK,CompoundBlock:oM,ArrayBlock:gU,IntegerBlock:BK,AngleBlock:bJ,Utf8Block:VK,BytesField:_J,EnumByteBlock:WJ,BitFlagsBlock:aQ,BasePalette:mJ,AnyBitmapBlock:_U,TriMap:fae,ShpiBlock:vU,WwwwBlock:MJ,OripGeometry:Sae},i.\u0275fac=function(t){return new(t||i)(R(IT))},i.\u0275cmp=Ct({type:i,selectors:[["app-editor"]],viewQuery:function(t,n){if(1&t&&ji(mU,7),2&t){let r;$t(r=jt())&&(n.dataBlockUiHost=r.first)}},inputs:{name:"name",resourceData:"resourceData"},decls:2,vars:1,consts:[["id","error-spinner-wrapper",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(t,n){1&t&&(Ne(0,Aae,3,2,"div",0),Ne(1,Tae,0,0,"ng-template",1)),2&t&&oe("ngIf",!n.resourceData||n.error)},dependencies:[br,lZ,Ol,mU],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0}),i})();function Iae(i,e){1&i&&(fe(0,"button",14),Et(1,"mat-icon",15),be()),2&i&&(Le(),oe("matMenuTriggerFor",mu(22)))}function Rae(i,e){if(1&i){const t=Rr();fe(0,"button",16),ct("click",function(){const s=yn(t).$implicit;return An(Le().runCustomAction(s))}),fe(1,"span"),pt(2),be()()}if(2&i){const t=e.$implicit;re(2),Ti(t.title)}}const Pae=function(){return[]};let kae=(()=>{class i{constructor(t,n,r,s,o,a){this.eelDelegate=t,this.mainService=n,this.dialog=r,this.snackBar=s,this.cdr=o,this.appRef=a}saveResource(){var t=this;return Ri(function*(){try{const n=Object.entries(t.mainService.changedDataBlocks).filter(([r,s])=>"__custom_action_performed__"!=r);yield t.eelDelegate.saveFile(n.map(([r,s])=>({id:r,value:s}))),t.mainService.clearUnsavedChanges(),t.snackBar.open("File Saved!","OK",{duration:1500})}catch(n){t.snackBar.open("Error while saving file! "+n.errorText,"OK :(",{duration:5e3})}})()}reloadResource(){var t=this;return Ri(function*(){if(t.mainService.hasUnsavedChanges){let r=t.dialog.open(k3,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield oT(r.afterClosed())))return}const n=t.mainService.eelDelegate.openedResourcePath$.getValue();n&&t.eelDelegate.openFile(n,!0).then(),t.cdr.markForCheck()})()}runCustomAction(t){var n=this;return Ri(function*(){if(n.mainService.hasUnsavedChanges){let o=n.dialog.open(k3,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield oT(o.afterClosed())))return;yield n.saveResource()}let r=n.dialog.open(SZ,{data:t});const s=yield oT(r.afterClosed());if(s)try{yield n.mainService.runCustomAction(n.mainService.resourceData$.getValue(),t,s),n.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){n.mainService.clearUnsavedChanges(),n.reloadResource().then(),n.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}}return i.\u0275fac=function(t){return new(t||i)(R(Bp),R(IT),R(Uw),R(LZ),R(ri),R(Pd))},i.\u0275cmp=Ct({type:i,selectors:[["app-root"]],decls:25,vars:24,consts:[["color","primary"],[1,"flex-spacer"],["mat-icon-button","","matTooltip","Reload file from disk",3,"disabled","click"],["fontIcon","refresh"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[3,"resourceData"],["id","bmac"],["href","https://www.buymeacoffee.com/andygura","target","_blank"],["src","https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png","alt","Buy Me A Coffee",2,"height","60px !important","width","217px !important"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(t,n){if(1&t&&(fe(0,"mat-toolbar",0)(1,"span"),pt(2),Vi(3,"async"),be(),Et(4,"span",1),fe(5,"button",2),ct("click",function(){return n.reloadResource()}),Vi(6,"async"),Et(7,"mat-icon",3),be(),Ne(8,Iae,2,1,"button",4),Vi(9,"async"),fe(10,"button",5),ct("click",function(){return n.saveResource()}),Vi(11,"async"),Et(12,"mat-icon",6),be()(),fe(13,"div",7),Et(14,"app-editor",8),Vi(15,"async"),Vi(16,"async"),Vi(17,"async"),fe(18,"div",9)(19,"a",10),Et(20,"img",11),be()()(),fe(21,"mat-menu",null,12),Ne(23,Rae,3,1,"button",13),Vi(24,"async"),be()),2&t){let r,s,o;re(2),L_("",(null==(r=sr(3,7,n.mainService.resourceData$))?null:r.block_id)||"...","",n.mainService.hasUnsavedChanges?"*":"",""),re(3),oe("disabled",!sr(6,9,n.mainService.eelDelegate.openedResourcePath$)),re(3),oe("ngIf",(null==(s=sr(9,11,n.mainService.resourceData$))||null==s.block.custom_actions?null:s.block.custom_actions.length)>0),re(2),oe("disabled",!sr(11,13,n.mainService.resourceData$)||!n.mainService.hasUnsavedChanges),re(4),oe("resourceData",sr(15,15,n.mainService.customActionRunning$)?null:sr(16,17,n.mainService.resourceData$)||sr(17,19,n.mainService.resourceError$)),re(9),oe("ngForOf",(null==(o=sr(24,21,n.mainService.resourceData$))?null:o.block.custom_actions)||aa(23,Pae))}},dependencies:[Ha,br,VZ,PT,Ev,yK,TK,sM,kK,Pm,pp],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}#content-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem;height:100%}#bmac[_ngcontent-%COMP%]{text-align:end;margin-top:1rem}"],changeDetection:0}),i})();function LH(i){return new ge(3e3,!1)}function ple(){return typeof window<"u"&&typeof window.document<"u"}function SR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Vu(i){switch(i.length){case 0:return new Cv;case 1:return i[0];default:return new E3(i)}}function FH(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const f=d.get("offset"),p=f==l,m=p&&c||new Map;d.forEach((_,b)=>{let y=b,v=_;if("offset"!==b)switch(y=e.normalizePropertyName(y,o),v){case"!":v=r.get(b);break;case wc:v=s.get(b);break;default:v=e.normalizeStyleValue(b,y,v,o)}m.set(y,v)}),p||a.push(m),c=m,l=f}),o.length)throw function nle(i){return new ge(3502,!1)}();return a}function ER(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&DR(t,"start",i)));break;case"done":i.onDone(()=>n(t&&DR(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&DR(t,"destroy",i)))}}function DR(i,e,t){const s=AR(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function AR(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Bo(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function NH(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let TR=(i,e)=>!1,BH=(i,e,t)=>[],UH=null;function IR(i){const e=i.parentNode||i.host;return e===UH?null:e}(SR()||typeof Element<"u")&&(ple()?(UH=(()=>document.documentElement)(),TR=(i,e)=>{for(;e;){if(e===i)return!0;e=IR(e)}return!1}):TR=(i,e)=>i.contains(e),BH=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let wh=null,VH=!1;const zH=TR,HH=BH;let GH=(()=>{class i{validateStyleProperty(t){return function gle(i){wh||(wh=function _le(){return typeof document<"u"?document.body:null}()||{},VH=!!wh.style&&"WebkitAppearance"in wh.style);let e=!0;return wh.style&&!function mle(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in wh.style,!e&&VH&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in wh.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return zH(t,n)}getParentElement(t){return IR(t)}query(t,n,r){return HH(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new Cv(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),RR=(()=>{class i{}return i.NOOP=new GH,i})();const PR="ng-enter",EC="ng-leave",DC="ng-trigger",AC=".ng-trigger",$H="ng-animating",kR=".ng-animating";function zu(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OR(parseFloat(e[1]),e[2])}function OR(i,e){return"s"===e?1e3*i:i}function TC(i,e,t){return i.hasOwnProperty("duration")?i:function ble(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(LH()),{duration:0,delay:0,easing:""};r=OR(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=OR(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Oae(){return new ge(3100,!1)}()),a=!0),s<0&&(e.push(function Lae(){return new ge(3101,!1)}()),a=!0),a&&e.splice(l,0,LH())}return{duration:r,delay:s,easing:o}}(i,e,t)}function vy(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function jH(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function Hu(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function XH(i,e,t){return t?e+":"+t+";":""}function YH(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=XH(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=XH(0,Cle(t),i.style[t]));i.setAttribute("style",e)}function Ll(i,e,t){i.style&&(e.forEach((n,r)=>{const s=FR(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),SR()&&YH(i))}function Mh(i,e){i.style&&(e.forEach((t,n)=>{const r=FR(n);i.style[r]=""}),SR()&&YH(i))}function yy(i){return Array.isArray(i)?1==i.length?i[0]:C3(i):i}const LR=new RegExp("{{\\s*(.+?)\\s*}}","g");function ZH(i){let e=[];if("string"==typeof i){let t;for(;t=LR.exec(i);)e.push(t[1]);LR.lastIndex=0}return e}function IC(i,e,t){const n=i.toString(),r=n.replace(LR,(s,o)=>{let a=e[o];return null==a&&(t.push(function Nae(i){return new ge(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function RC(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const Mle=/-+([a-z0-9])/g;function FR(i){return i.replace(Mle,(...e)=>e[1].toUpperCase())}function Cle(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Uo(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function Bae(i){return new ge(3004,!1)}()}}function KH(i,e){return window.getComputedStyle(i)[e]}function Ile(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function Rle(i,e,t){if(":"==i[0]){const l=function Ple(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function Jae(i){return new ge(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function Kae(i){return new ge(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(JH(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(JH(o,r))}(n,t,e)):t.push(i),t}const LC=new Set(["true","1"]),FC=new Set(["false","0"]);function JH(i,e){const t=LC.has(i)||FC.has(i),n=LC.has(e)||FC.has(e);return(r,s)=>{let o="*"==i||i==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?LC.has(i):FC.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?LC.has(e):FC.has(e)),o&&a}}const kle=new RegExp("s*:selfs*,?","g");function NR(i,e,t,n){return new Ole(i).build(e,t,n)}class Ole{constructor(e){this._driver=e}build(e,t,n){const r=new Nle(t);return this._resetContextStyleTimingState(r),Uo(this,yy(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Vae(){return new ge(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function zae(){return new ge(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{ZH(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(RC(s.values()),t.errors.push(function Hae(i,e){return new ge(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Uo(this,yy(e.animation),t);return{type:1,matchers:Ile(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Ch(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>Uo(this,n,t)),options:Ch(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=Uo(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Ch(e.options)}}visitAnimate(e,t){const n=function Ule(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return BR(TC(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=BR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=TC(t,e);return BR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:$n({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=$n(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===wc?n.push(a):t.errors.push(new ge(3002,!1)):n.push(jH(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l);let f=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(function Wae(i,e,t,n,r){return new ge(3010,!1)}()),f=!1),s=d.startTime),f&&c.set(l,{startTime:s,endTime:r}),t.options&&function wle(i,e,t){const n=e.params||{},r=ZH(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function Fae(i){return new ge(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function $ae(){return new ge(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=e.steps.map(v=>{const M=this._makeStyleAst(v,t);let w=null!=M.offset?M.offset:function Ble(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),C=0;return null!=w&&(s++,C=M.offset=w),l=l||C<0||C>1,a=a||C<c,c=C,o.push(C),M});l&&t.errors.push(function jae(){return new ge(3012,!1)}()),a&&t.errors.push(function qae(){return new ge(3200,!1)}());const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push(function Xae(){return new ge(3202,!1)}()):0==s&&(p=1/(f-1));const m=f-1,_=t.currentTime,b=t.currentAnimateTimings,y=b.duration;return d.forEach((v,M)=>{const w=p>0?M==m?1:p*M:o[M],C=w*y;t.currentTime=_+b.delay+C,b.duration=C,this._validateStyleAst(v,t),v.offset=w,n.styles.push(v)}),n}visitReference(e,t){return{type:8,animation:Uo(this,yy(e.animation),t),options:Ch(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Ch(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Ch(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Lle(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(kle,"")),i=i.replace(/@\*/g,AC).replace(/@\w+/g,t=>AC+"-"+t.slice(1)).replace(/:animating/g,kR),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,Bo(t.collectedStyles,t.currentQuerySelector,new Map);const a=Uo(this,yy(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Ch(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Yae(){return new ge(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:TC(e.timings,t.errors,!0);return{type:12,animation:Uo(this,yy(e.animation),t),timings:n,options:null}}}class Nle{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ch(i){return i?(i=vy(i)).params&&(i.params=function Fle(i){return i?vy(i):null}(i.params)):i={},i}function BR(i,e,t){return{duration:i,delay:e,easing:t}}function UR(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class NC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Hle=new RegExp(":enter","g"),Wle=new RegExp(":leave","g");function VR(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new $le).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class $le{buildKeyframes(e,t,n,r,s,o,a,l,c,d=[]){c=c||new NC;const f=new zR(e,t,c,r,s,d,[]);f.options=l;const p=l.delay?zu(l.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,l),Uo(this,n,f);const m=f.timelines.filter(_=>_.containsAnimation());if(m.length&&a.size){let _;for(let b=m.length-1;b>=0;b--){const y=m[b];if(y.element===t){_=y;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,l)}return m.length?m.map(_=>_.buildKeyframes()):[UR(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?zu(n.duration):null,a=null!=n.delay?zu(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Uo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=BC);const o=zu(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Uo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?zu(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Uo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return TC(t.params?IC(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?zu(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=BC);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const f=t.createSubContext(e.options,c);s&&f.delayNextStep(s),c===t.element&&(l=f.currentTimeline),Uo(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const f=d.currentTime;Uo(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-f+(r.startTime-n.currentTimeline.startTime)}}const BC={};class zR{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=BC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new UC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=zu(n.duration)),null!=n.delay&&(r.delay=zu(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=IC(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new zR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=BC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new jle(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(Hle,"."+this._enterClassName)).replace(Wle,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function Zae(i){return new ge(3014,!1)}()),a}}class UC{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new UC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||wc),this._currentKeyframe.set(t,wc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function qle(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,wc)}else Hu(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=IC(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??wc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Hu(a,new Map,this._backFill);c.forEach((d,f)=>{"!"===d?e.add(f):d===wc&&t.add(f)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?RC(e.values()):[],o=t.size?RC(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return UR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class jle extends UC{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=Hu(e[0]);l.set("offset",0),s.push(l);const c=Hu(e[0]);c.set("offset",t4(a)),s.push(c);const d=e.length-1;for(let f=1;f<=d;f++){let p=Hu(e[f]);const m=p.get("offset");p.set("offset",t4((t+m*n)/o)),s.push(p)}n=o,t=0,r="",e=s}return UR(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function t4(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class HR{}const Xle=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Yle extends HR{normalizePropertyName(e,t){return FR(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(Xle.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Uae(i,e){return new ge(3005,!1)}())}return o+s}}function n4(i,e,t,n,r,s,o,a,l,c,d,f,p){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:f,errors:p}}const GR={};class i4{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function Zle(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,d){const f=[],p=this.ast.options&&this.ast.options.params||GR,_=this.buildStyles(n,a&&a.params||GR,f),b=l&&l.params||GR,y=this.buildStyles(r,b,f),v=new Set,M=new Map,w=new Map,C="void"===r,D={params:Kle(b,p),delay:this.ast.options?.delay},I=d?[]:VR(e,t,this.ast.animation,s,o,_,y,D,c,f);let N=0;if(I.forEach(A=>{N=Math.max(A.duration+A.delay,N)}),f.length)return n4(t,this._triggerName,n,r,C,_,y,[],[],M,w,N,f);I.forEach(A=>{const k=A.element,ee=Bo(M,k,new Set);A.preStyleProps.forEach($=>ee.add($));const le=Bo(w,k,new Set);A.postStyleProps.forEach($=>le.add($)),k!==t&&v.add(k)});const V=RC(v.values());return n4(t,this._triggerName,n,r,C,_,y,I,V,M,w,N)}}function Kle(i,e){const t=vy(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class Jle{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=vy(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=IC(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(l,o)})}),n}}class ece{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new Jle(r.style,r.options&&r.options.params||{},n))}),r4(this.states,"true","1"),r4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new i4(e,r,this.states))}),this.fallbackTransition=function tce(i,e,t){return new i4(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function r4(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const nce=new NC;class ice{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],s=NR(this._driver,t,n,[]);if(n.length)throw function ile(i){return new ge(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=FH(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=VR(this._driver,t,s,PR,EC,new Map,new Map,n,nce,r),o.forEach(d=>{const f=Bo(a,d.element,new Map);d.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function rle(){return new ge(3300,!1)}()),o=[]),r.length)throw function sle(i){return new ge(3504,!1)}();a.forEach((d,f)=>{d.forEach((p,m)=>{d.set(m,this._driver.computeStyle(f,m,wc))})});const c=Vu(o.map(d=>{const f=a.get(d.element);return this._buildPlayer(d,new Map,f)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function ole(i){return new ge(3301,!1)}();return t}listen(e,t,n,r){const s=AR(t,"","","");return ER(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const s4="ng-animate-queued",WR="ng-animate-disabled",lce=[],o4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},cce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ya="__ng_removed";class $R{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function fce(i){return i??null}(n?e.value:e),n){const s=vy(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const by="void",jR=new $R(by);class uce{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,ba(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function ale(i,e){return new ge(3302,!1)}();if(null==n||0==n.length)throw function lle(i){return new ge(3303,!1)}();if(!function pce(i){return"start"==i||"done"==i}(n))throw function cle(i,e){return new ge(3400,!1)}();const s=Bo(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=Bo(this._engine.statesByElement,e,new Map);return a.has(t)||(ba(e,DC),ba(e,DC+"-"+t),a.set(t,jR)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ule(i){return new ge(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new qR(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(ba(e,DC),ba(e,DC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new $R(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=jR),c.value!==by&&l.value===c.value){if(!function _ce(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const b=[],y=s.matchStyles(l.value,l.params,b),v=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Mh(e,y),Ll(e,v)})}return}const p=Bo(this._engine.playersByElement,e,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let m=s.matchTransition(l.value,c.value,e,c.params),_=!1;if(!m){if(!r)return;m=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:_}),_||(ba(e,s4),o.onStart(()=>{km(e,s4)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const y=this._engine.playersByElement.get(e);if(y){let v=y.indexOf(o);v>=0&&y.splice(v,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,AC,!0);n.forEach(r=>{if(r[ya])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(e,c,by,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&Vu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||jR,d=new $R(by),f=new qR(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ya];(!s||s===o4)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){ba(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=AR(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,ER(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class dce{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new uce(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(VC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!VC(t))return;const s=t[ya];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),ba(e,WR)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),km(e,WR))}removeNode(e,t,n,r){if(VC(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[ya]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return VC(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,AC,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,kR,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Vu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ya];if(t&&t.setForRemoval){if(e[ya]=o4,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(WR)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)ba(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?Vu(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function dle(i){return new ge(3402,!1)}()}_flushAnimations(e,t){const n=new NC,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(q=>{d.add(q);const Q=this.driver.query(q,".ng-animate-queued",!0);for(let Y=0;Y<Q.length;Y++)d.add(Q[Y])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=c4(p,this.collectedEnterElements),_=new Map;let b=0;m.forEach((q,Q)=>{const Y=PR+b++;_.set(Q,Y),q.forEach(ae=>ba(ae,Y))});const y=[],v=new Set,M=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){const Q=this.collectedLeaveElements[q],Y=Q[ya];Y&&Y.setForRemoval&&(y.push(Q),v.add(Q),Y.hasAnimation?this.driver.query(Q,".ng-star-inserted",!0).forEach(ae=>v.add(ae)):M.add(Q))}const w=new Map,C=c4(p,Array.from(v));C.forEach((q,Q)=>{const Y=EC+b++;w.set(Q,Y),q.forEach(ae=>ba(ae,Y))}),e.push(()=>{m.forEach((q,Q)=>{const Y=_.get(Q);q.forEach(ae=>km(ae,Y))}),C.forEach((q,Q)=>{const Y=w.get(Q);q.forEach(ae=>km(ae,Y))}),y.forEach(q=>{this.processLeaveNode(q)})});const D=[],I=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(t).forEach(Y=>{const ae=Y.player,we=Y.element;if(D.push(ae),this.collectedEnterElements.length){const Z=we[ya];if(Z&&Z.setForMove){if(Z.previousTriggersValues&&Z.previousTriggersValues.has(Y.triggerName)){const ut=Z.previousTriggersValues.get(Y.triggerName),rt=this.statesByElement.get(Y.element);if(rt&&rt.has(Y.triggerName)){const Re=rt.get(Y.triggerName);Re.value=ut,rt.set(Y.triggerName,Re)}}return void ae.destroy()}}const qe=!f||!this.driver.containsElement(f,we),ke=w.get(we),se=_.get(we),ue=this._buildInstruction(Y,n,se,ke,qe);if(ue.errors&&ue.errors.length)return void I.push(ue);if(qe)return ae.onStart(()=>Mh(we,ue.fromStyles)),ae.onDestroy(()=>Ll(we,ue.toStyles)),void r.push(ae);if(Y.isFallbackTransition)return ae.onStart(()=>Mh(we,ue.fromStyles)),ae.onDestroy(()=>Ll(we,ue.toStyles)),void r.push(ae);const Fe=[];ue.timelines.forEach(Z=>{Z.stretchStartingKeyframe=!0,this.disabledNodes.has(Z.element)||Fe.push(Z)}),ue.timelines=Fe,n.append(we,ue.timelines),o.push({instruction:ue,player:ae,element:we}),ue.queriedElements.forEach(Z=>Bo(a,Z,[]).push(ae)),ue.preStyleProps.forEach((Z,ut)=>{if(Z.size){let rt=l.get(ut);rt||l.set(ut,rt=new Set),Z.forEach((Re,st)=>rt.add(st))}}),ue.postStyleProps.forEach((Z,ut)=>{let rt=c.get(ut);rt||c.set(ut,rt=new Set),Z.forEach((Re,st)=>rt.add(st))})});if(I.length){const q=[];I.forEach(Q=>{q.push(function hle(i,e){return new ge(3505,!1)}())}),D.forEach(Q=>Q.destroy()),this.reportError(q)}const N=new Map,V=new Map;o.forEach(q=>{const Q=q.element;n.has(Q)&&(V.set(Q,Q),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,N))}),r.forEach(q=>{const Q=q.element;this._getPreviousPlayers(Q,!1,q.namespaceId,q.triggerName,null).forEach(ae=>{Bo(N,Q,[]).push(ae),ae.destroy()})});const A=y.filter(q=>d4(q,l,c)),k=new Map;l4(k,this.driver,M,c,wc).forEach(q=>{d4(q,l,c)&&A.push(q)});const le=new Map;m.forEach((q,Q)=>{l4(le,this.driver,new Set(q),l,"!")}),A.forEach(q=>{const Q=k.get(q),Y=le.get(q);k.set(q,new Map([...Array.from(Q?.entries()??[]),...Array.from(Y?.entries()??[])]))});const $=[],X=[],ne={};o.forEach(q=>{const{element:Q,player:Y,instruction:ae}=q;if(n.has(Q)){if(d.has(Q))return Y.onDestroy(()=>Ll(Q,ae.toStyles)),Y.disabled=!0,Y.overrideTotalTime(ae.totalTime),void r.push(Y);let we=ne;if(V.size>1){let ke=Q;const se=[];for(;ke=ke.parentNode;){const ue=V.get(ke);if(ue){we=ue;break}se.push(ke)}se.forEach(ue=>V.set(ue,we))}const qe=this._buildAnimation(Y.namespaceId,ae,N,s,le,k);if(Y.setRealPlayer(qe),we===ne)$.push(Y);else{const ke=this.playersByElement.get(we);ke&&ke.length&&(Y.parentPlayer=Vu(ke)),r.push(Y)}}else Mh(Q,ae.fromStyles),Y.onDestroy(()=>Ll(Q,ae.toStyles)),X.push(Y),d.has(Q)&&r.push(Y)}),X.forEach(q=>{const Q=s.get(q.element);if(Q&&Q.length){const Y=Vu(Q);q.setRealPlayer(Y)}}),r.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<y.length;q++){const Q=y[q],Y=Q[ya];if(km(Q,EC),Y&&Y.hasAnimation)continue;let ae=[];if(a.size){let qe=a.get(Q);qe&&qe.length&&ae.push(...qe);let ke=this.driver.query(Q,kR,!0);for(let se=0;se<ke.length;se++){let ue=a.get(ke[se]);ue&&ue.length&&ae.push(...ue)}}const we=ae.filter(qe=>!qe.destroyed);we.length?mce(this,Q,we):this.processLeaveNode(Q)}return y.length=0,$.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();const Q=this.players.indexOf(q);this.players.splice(Q,1)}),q.play()}),$}elementContainsData(e,t){let n=!1;const r=t[ya];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==by;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==s,f=Bo(n,c,[]);this._getPreviousPlayers(c,d,o,a,t.toState).forEach(m=>{const _=m.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),m.destroy(),f.push(m)})}Mh(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],d=new Set,f=new Set,p=t.timelines.map(_=>{const b=_.element;d.add(b);const y=b[ya];if(y&&y.removedBeforeQueried)return new Cv(_.duration,_.delay);const v=b!==l,M=function gce(i){const e=[];return u4(i,e),e}((n.get(b)||lce).map(N=>N.getRealPlayer())).filter(N=>!!N.element&&N.element===b),w=s.get(b),C=o.get(b),D=FH(0,this._normalizer,0,_.keyframes,w,C),I=this._buildPlayer(_,D,M);if(_.subTimeline&&r&&f.add(b),v){const N=new qR(e,a,b);N.setRealPlayer(I),c.push(N)}return I});c.forEach(_=>{Bo(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function hce(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>ba(_,$H));const m=Vu(p);return m.onDestroy(()=>{d.forEach(_=>km(_,$H)),Ll(l,t.toStyles)}),f.forEach(_=>{Bo(r,_,[]).push(m)}),m}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Cv(e.duration,e.delay)}}class qR{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Cv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>ER(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Bo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function VC(i){return i&&1===i.nodeType}function a4(i,e){const t=i.style.display;return i.style.display=e??"none",t}function l4(i,e,t,n,r){const s=[];t.forEach(l=>s.push(a4(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(f=>{const p=e.computeStyle(c,f,r);d.set(f,p),(!p||0==p.length)&&(c[ya]=cce,o.push(c))}),i.set(c,d)});let a=0;return t.forEach(l=>a4(l,s[a++])),o}function c4(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function ba(i,e){i.classList?.add(e)}function km(i,e){i.classList?.remove(e)}function mce(i,e,t){Vu(t).onDone(()=>i.processLeaveNode(e))}function u4(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof E3?u4(n.players,e):e.push(n)}}function d4(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class zC{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new dce(e,t,n),this._timelineEngine=new ice(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],d=NR(this._driver,s,l,[]);if(l.length)throw function tle(i,e){return new ge(3404,!1)}();a=function Qle(i,e,t){return new ece(i,e,t)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=NH(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=NH(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let yce=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ll(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ll(this._element,this._initialStyles),this._endStyles&&(Ll(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Mh(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Mh(this._element,this._endStyles),this._endStyles=null),Ll(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function XR(i){let e=null;return i.forEach((t,n)=>{(function bce(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class h4{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:KH(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class xce{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return zH(e,t)}getParentElement(e){return IR(e)}query(e,t,n){return HH(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(m=>m instanceof h4);(function Sle(i,e){return 0===i||0===e})(n,r)&&d.forEach(m=>{m.currentSnapshot.forEach((_,b)=>c.set(b,_))});let f=function xle(i){return i.length?i[0]instanceof Map?i:i.map(e=>jH(e)):[]}(t).map(m=>Hu(m));f=function Ele(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,KH(i,a)))}}return e}(e,f,c);const p=function vce(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=XR(e[0]),e.length>1&&(n=XR(e[e.length-1]))):e instanceof Map&&(t=XR(e)),t||n?new yce(i,t,n):null}(e,f);return new h4(e,f,l,p)}}let wce=(()=>{class i extends w3{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:Hs.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?C3(t):t;return f4(this._renderer,null,n,"register",[r]),new Mce(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(j(uu),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class Mce extends class AX{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Cce(this._id,e,t||{},this._renderer)}}class Cce{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return f4(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function f4(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const p4="@.disabled";let Sce=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new m4("",s,this.engine),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return n.data.animation.forEach(l),new Ece(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(j(uu),j(zC),j(St))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class m4{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==p4?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ece extends m4{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==p4?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function Dce(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Ace(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}const g4=[{provide:w3,useClass:wce},{provide:HR,useFactory:function Ice(){return new Yle}},{provide:zC,useClass:(()=>{class i extends zC{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(RR),j(HR),j(Pd))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})()},{provide:uu,useFactory:function Rce(i,e,t){return new Sce(i,e,t)},deps:[Zx,zC,St]}],YR=[{provide:RR,useFactory:()=>new xce},{provide:Ks,useValue:"BrowserAnimations"},...g4],_4=[{provide:RR,useClass:GH},{provide:Ks,useValue:"NoopAnimations"},...g4];let Pce=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?_4:YR}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:YR,imports:[KF]}),i})();const v4=new Se("CdkAccordion");let kce=0,Oce=(()=>{class i{constructor(t,n,r){this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=Zt.EMPTY,this.closed=new et,this.opened=new et,this.destroyed=new et,this.expandedChange=new et,this.id="cdk-accordion-child-"+kce++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Gn(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return i.\u0275fac=function(t){return new(t||i)(R(v4,12),R(ri),R(bU))},i.\u0275dir=Oe({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Fn([{provide:v4,useValue:void 0}])]}),i})(),Lce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const Fce=["body"];function Nce(i,e){}const Bce=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Uce=["mat-expansion-panel-header","*","mat-action-row"];function Vce(i,e){1&i&&Et(0,"span",2),2&i&&oe("@indicatorRotate",Le()._getExpandedState())}const zce=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Hce=["mat-panel-title","mat-panel-description","*"],y4=new Se("MAT_ACCORDION"),b4="225ms cubic-bezier(0.4,0.0,0.2,1)",x4={indicatorRotate:Ml("indicatorRotate",[fs("collapsed, void",$n({transform:"rotate(0deg)"})),fs("expanded",$n({transform:"rotate(180deg)"})),Rs("expanded <=> collapsed, void => collapsed",eo(b4))]),bodyExpansion:Ml("bodyExpansion",[fs("collapsed, void",$n({height:"0px",visibility:"hidden"})),fs("expanded",$n({height:"*",visibility:"visible"})),Rs("expanded <=> collapsed, void => collapsed",eo(b4))])},w4=new Se("MAT_EXPANSION_PANEL");let Gce=(()=>{class i{constructor(t,n){this._template=t,this._expansionPanel=n}}return i.\u0275fac=function(t){return new(t||i)(R(Zs),R(w4,8))},i.\u0275dir=Oe({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),Wce=0;const M4=new Se("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let C4=(()=>{class i extends Oce{constructor(t,n,r,s,o,a,l){super(t,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new et,this.afterCollapse=new et,this._inputChanges=new He,this._headerId="mat-expansion-panel-header-"+Wce++,this._bodyAnimationDone=new He,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(ww((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Gn(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(hs(null),Rn(()=>this.expanded&&!this._portal),xi(1)).subscribe(()=>{this._portal=new Ip(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,n=this._body.nativeElement;return t===n||n.contains(t)}return!1}}return i.\u0275fac=function(t){return new(t||i)(R(y4,12),R(ri),R(bU),R(Xr),R(kt),R(Ks,8),R(M4,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(t,n,r){if(1&t&&bi(r,Gce,5),2&t){let s;$t(s=jt())&&(n._lazyContent=s.first)}},viewQuery:function(t,n){if(1&t&&ji(Fce,5),2&t){let r;$t(r=jt())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,n){2&t&&li("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Fn([{provide:y4,useValue:void 0},{provide:w4,useExisting:i}]),lt,ii],ngContentSelectors:Uce,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,n){1&t&&(Ys(Bce),Yn(0),fe(1,"div",0,1),ct("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),fe(3,"div",2),Yn(4,1),Ne(5,Nce,0,0,"ng-template",3),be(),Yn(6,2),be()),2&t&&(re(1),oe("@bodyExpansion",n._getExpandedState())("id",n.id),Qt("aria-labelledby",n._headerId),re(4),oe("cdkPortalOutlet",n._portal))},dependencies:[Rp],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[x4.bodyExpansion]},changeDetection:0}),i})();class $ce{}const jce=d3($ce);let qce=(()=>{class i extends jce{constructor(t,n,r,s,o,a,l){super(),this.panel=t,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Zt.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Rn(d=>!(!d.hideToggle&&!d.togglePosition))):Bs;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Ms(t.opened,t.closed,c,t._inputChanges.pipe(Rn(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Rn(()=>t._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:da(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,n){t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(t){return new(t||i)(R(C4,1),R(Wt),R(xc),R(ri),R(M4,8),R(Ks,8),Pa("tabindex"))},i.\u0275cmp=Ct({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&ct("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&t&&(Qt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),dc("height",n._getHeaderHeight()),li("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[lt],ngContentSelectors:Hce,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,n){1&t&&(Ys(zce),fe(0,"span",0),Yn(1),Yn(2,1),Yn(3,2),be(),Ne(4,Vce,1,1,"span",1)),2&t&&(re(4),oe("ngIf",n._showToggle()))},dependencies:[br],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[x4.indicatorRotate]},changeDetection:0}),i})(),Xce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),Yce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Oe({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),Zce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Wa,wn,Lce,Pp]}),i})();function Kce(i,e){if(1&i&&(fe(0,"mat-option",19),pt(1),be()),2&i){const t=e.$implicit;oe("value",t),re(1),ds(" ",t," ")}}function Jce(i,e){if(1&i){const t=Rr();fe(0,"mat-form-field",16)(1,"mat-select",17),ct("selectionChange",function(r){return yn(t),An(Le(2)._changePageSize(r.value))}),Ne(2,Kce,2,2,"mat-option",18),be()()}if(2&i){const t=Le(2);oe("appearance",t._formFieldAppearance)("color",t.color),re(1),oe("value",t.pageSize)("disabled",t.disabled)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering)("aria-label",t._intl.itemsPerPageLabel),re(1),oe("ngForOf",t._displayedPageSizeOptions)}}function Qce(i,e){if(1&i&&(fe(0,"div",20),pt(1),be()),2&i){const t=Le(2);re(1),Ti(t.pageSize)}}function eue(i,e){if(1&i&&(fe(0,"div",12)(1,"div",13),pt(2),be(),Ne(3,Jce,3,8,"mat-form-field",14),Ne(4,Qce,2,1,"div",15),be()),2&i){const t=Le();re(2),ds(" ",t._intl.itemsPerPageLabel," "),re(1),oe("ngIf",t._displayedPageSizeOptions.length>1),re(1),oe("ngIf",t._displayedPageSizeOptions.length<=1)}}function tue(i,e){if(1&i){const t=Rr();fe(0,"button",21),ct("click",function(){return yn(t),An(Le().firstPage())}),_o(),fe(1,"svg",7),Et(2,"path",22),be()()}if(2&i){const t=Le();oe("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),Qt("aria-label",t._intl.firstPageLabel)}}function nue(i,e){if(1&i){const t=Rr();_o(),fg(),fe(0,"button",23),ct("click",function(){return yn(t),An(Le().lastPage())}),_o(),fe(1,"svg",7),Et(2,"path",24),be()()}if(2&i){const t=Le();oe("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),Qt("aria-label",t._intl.lastPageLabel)}}let GC=(()=>{class i{constructor(){this.changes=new He,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=t*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const rue={provide:GC,deps:[[new xo,new ul,GC]],useFactory:function iue(i){return i||new GC}},oue=new Se("MAT_PAGINATOR_DEFAULT_OPTIONS"),aue=Lw(mX(class{}));let lue=(()=>{class i extends aue{constructor(t,n,r){if(super(),this._intl=t,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new et,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(ha(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=ha(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(ha(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(n=>ha(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=Gn(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=Gn(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,n)=>t-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(t){cc()},i.\u0275dir=Oe({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[lt]}),i})(),cue=(()=>{class i extends lue{constructor(t,n,r){super(t,n,r),r&&null!=r.formFieldAppearance&&(this._formFieldAppearance=r.formFieldAppearance)}}return i.\u0275fac=function(t){return new(t||i)(R(GC),R(ri),R(oue,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[lt],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,n){1&t&&(fe(0,"div",0)(1,"div",1),Ne(2,eue,5,3,"div",2),fe(3,"div",3)(4,"div",4),pt(5),be(),Ne(6,tue,3,5,"button",5),fe(7,"button",6),ct("click",function(){return n.previousPage()}),_o(),fe(8,"svg",7),Et(9,"path",8),be()(),fg(),fe(10,"button",9),ct("click",function(){return n.nextPage()}),_o(),fe(11,"svg",7),Et(12,"path",10),be()(),Ne(13,nue,3,5,"button",11),be()()()),2&t&&(re(2),oe("ngIf",!n.hidePageSize),re(3),ds(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),re(1),oe("ngIf",n.showFirstLastButtons),re(1),oe("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),Qt("aria-label",n._intl.previousPageLabel),re(3),oe("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),Qt("aria-label",n._intl.nextPageLabel),re(3),oe("ngIf",n.showFirstLastButtons))},dependencies:[Ha,br,Ev,Np,BT,Nw,PT],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),uue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[rue],imports:[Wa,sT,SU,KB,wn]}),i})();const due=["*",[["mat-card-footer"]]],hue=["*","mat-card-footer"];let fue=(()=>{class i{constructor(t){this._animationMode=t}}return i.\u0275fac=function(t){return new(t||i)(R(Ks,8))},i.\u0275cmp=Ct({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,n){2&t&&li("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:hue,decls:2,vars:0,template:function(t,n){1&t&&(Ys(due),Yn(0),Yn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),i})(),pue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[wn,wn]}),i})(),mue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i,bootstrap:[kae]}),i.\u0275inj=Lt({providers:[Bp,yU],imports:[KF,E7,Pce,GY,zZ,Jw,wZ,Zce,jB,EU,KB,sT,bK,uue,rQ,pue,SU,zX,xae,OK,NB]}),i})();zn(oM,[Ha,Pm],[]),zn(gU,[q_,Ha,br,IF,Wd,$d,Np,C4,qce,Yce,Xce,$J,cue,BT,Nw,Pm],[]),zn(_U,[Ha,br,wu,kv,Wd,$d,Ov,Pm],[pp]),zn(FT,[Ha,br,lM,UT,fue,Pm],[]),zn(vU,[Pm,FT],[]),function R8(){QL=!1}(),V$().bootstrapModule(mue).catch(i=>console.error(i))},489:function(io,ys,Or){var Ht;io=Or.nmd(io),function(){var B,_n="Expected a function",wa="__lodash_hash_undefined__",oi="__lodash_placeholder__",vn=1/0,Sa=9007199254740991,Wo=4294967295,Cy=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Pn="[object Arguments]",Dn="[object Array]",Je="[object Boolean]",Bl="[object Date]",Wu="[object Error]",Fm="[object Function]",ZC="[object GeneratorFunction]",$o="[object Map]",Th="[object Number]",el="[object Object]",Nm="[object Promise]",Bc="[object RegExp]",so="[object Set]",Ih="[object String]",Bm="[object Symbol]",oo="[object WeakMap]",Rh="[object ArrayBuffer]",Uc="[object DataView]",Sy="[object Float32Array]",Um="[object Float64Array]",Ey="[object Int8Array]",Dy="[object Int16Array]",Ay="[object Int32Array]",Ty="[object Uint8Array]",Iy="[object Uint8ClampedArray]",$u="[object Uint16Array]",Ph="[object Uint32Array]",Ry=/\b__p \+= '';/g,Py=/\b(__p \+=) '' \+/g,ky=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Oy=/&(?:amp|lt|gt|quot|#39);/g,Vm=/[&<>"']/g,Ly=RegExp(Oy.source),Fy=RegExp(Vm.source),Ny=/<%-([\s\S]+?)%>/g,pr=/<%([\s\S]+?)%>/g,By=/<%=([\s\S]+?)%>/g,QC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eS=/^\w*$/,tS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,kh=/[\\^$.*+?()[\]{}|]/g,nS=RegExp(kh.source),zm=/^\s+/,Ea=/\s/,iS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wi=/\{\n\/\* \[wrapped with (.+)\] \*/,Vc=/,? & /,Bs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,iP=/[()=,{}\[\]\/\s]/,rS=/\\(\\)?/g,Uy=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Oh=/\w*$/,Vy=/^[-+]0x[0-9a-f]+$/i,ju=/^0b[01]+$/i,sS=/^\[object .+?Constructor\]$/,zy=/^0o[0-7]+$/i,Hy=/^(?:0|[1-9]\d*)$/,oS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lh=/($^)/,aS=/['\n\r\u2028\u2029\\]/g,Fh="\\ud800-\\udfff",Mi="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ms="\\u2700-\\u27bf",Hm="a-z\\xdf-\\xf6\\xf8-\\xff",Nh="A-Z\\xc0-\\xd6\\xd8-\\xde",Wy="\\ufe0e\\ufe0f",Un="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",$m="["+Fh+"]",uS="["+Un+"]",ge="["+Mi+"]",qu="\\d+",Ot="["+Ms+"]",Mn="["+Hm+"]",$y="[^"+Fh+Un+qu+Ms+Hm+Nh+"]",jy="\\ud83c[\\udffb-\\udfff]",Xu="[^"+Fh+"]",Fr="(?:\\ud83c[\\udde6-\\uddff]){2}",qy="[\\ud800-\\udbff][\\udc00-\\udfff]",zc="["+Nh+"]",jo="(?:"+Mn+"|"+$y+")",rP="(?:"+zc+"|"+$y+")",fS="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",pS="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",mS="(?:"+ge+"|"+jy+")?",Xy="["+Wy+"]?",Qr=Xy+mS+"(?:\\u200d(?:"+[Xu,Fr,qy].join("|")+")"+Xy+mS+")*",kn="(?:"+[Ot,Fr,qy].join("|")+")"+Qr,aP="(?:"+[Xu+ge+"?",ge,Fr,qy,$m].join("|")+")",lP=RegExp("['\u2019]","g"),cP=RegExp(ge,"g"),Pe=RegExp(jy+"(?="+jy+")|"+aP+Qr,"g"),uP=RegExp([zc+"?"+Mn+"+"+fS+"(?="+[uS,zc,"$"].join("|")+")",rP+"+"+pS+"(?="+[uS,zc+jo,"$"].join("|")+")",zc+"?"+jo+"+"+fS,zc+"+"+pS,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qu,kn].join("|"),"g"),Lt=RegExp("[\\u200d"+Fh+Mi+Wy+"]"),jm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yy=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_S=-1,ni={};ni[Sy]=ni[Um]=ni[Ey]=ni[Dy]=ni[Ay]=ni[Ty]=ni[Iy]=ni[$u]=ni[Ph]=!0,ni[Pn]=ni[Dn]=ni[Rh]=ni[Je]=ni[Uc]=ni[Bl]=ni[Wu]=ni[Fm]=ni[$o]=ni[Th]=ni[el]=ni[Bc]=ni[so]=ni[Ih]=ni[oo]=!1;var Xn={};Xn[Pn]=Xn[Dn]=Xn[Rh]=Xn[Uc]=Xn[Je]=Xn[Bl]=Xn[Sy]=Xn[Um]=Xn[Ey]=Xn[Dy]=Xn[Ay]=Xn[$o]=Xn[Th]=Xn[el]=Xn[Bc]=Xn[so]=Xn[Ih]=Xn[Bm]=Xn[Ty]=Xn[Iy]=Xn[$u]=Xn[Ph]=!0,Xn[Wu]=Xn[Fm]=Xn[oo]=!1;var vS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mt=parseFloat,Xm=parseInt,Ky="object"==typeof global&&global&&global.Object===Object&&global,Us="object"==typeof self&&self&&self.Object===Object&&self,Ji=Ky||Us||Function("return this")(),yS=ys&&!ys.nodeType&&ys,Vs=yS&&io&&!io.nodeType&&io,zs=Vs&&Vs.exports===yS,Jy=zs&&Ky.process,ao=function(){try{return Vs&&Vs.require&&Vs.require("util").types||Jy&&Jy.binding&&Jy.binding("util")}catch{}}(),Hs=ao&&ao.isArrayBuffer,Vn=ao&&ao.isDate,bS=ao&&ao.isMap,xS=ao&&ao.isRegExp,Ul=ao&&ao.isSet,Cn=ao&&ao.isTypedArray;function Dr(G,ce,te){switch(te.length){case 0:return G.call(ce);case 1:return G.call(ce,te[0]);case 2:return G.call(ce,te[0],te[1]);case 3:return G.call(ce,te[0],te[1],te[2])}return G.apply(ce,te)}function Ym(G,ce,te,Ye){for(var Vt=-1,Ln=null==G?0:G.length;++Vt<Ln;){var tr=G[Vt];ce(Ye,tr,te(tr),G)}return Ye}function es(G,ce){for(var te=-1,Ye=null==G?0:G.length;++te<Ye&&!1!==ce(G[te],te,G););return G}function Qy(G,ce){for(var te=null==G?0:G.length;te--&&!1!==ce(G[te],te,G););return G}function qo(G,ce){for(var te=-1,Ye=null==G?0:G.length;++te<Ye;)if(!ce(G[te],te,G))return!1;return!0}function Gs(G,ce){for(var te=-1,Ye=null==G?0:G.length,Vt=0,Ln=[];++te<Ye;){var tr=G[te];ce(tr,te,G)&&(Ln[Vt++]=tr)}return Ln}function Uh(G,ce){return!(null==G||!G.length)&&Oi(G,ce,0)>-1}function Ct(G,ce,te){for(var Ye=-1,Vt=null==G?0:G.length;++Ye<Vt;)if(te(ce,G[Ye]))return!0;return!1}function zn(G,ce){for(var te=-1,Ye=null==G?0:G.length,Vt=Array(Ye);++te<Ye;)Vt[te]=ce(G[te],te,G);return Vt}function Da(G,ce){for(var te=-1,Ye=ce.length,Vt=G.length;++te<Ye;)G[Vt+te]=ce[te];return G}function Vh(G,ce,te,Ye){var Vt=-1,Ln=null==G?0:G.length;for(Ye&&Ln&&(te=G[++Vt]);++Vt<Ln;)te=ce(te,G[Vt],Vt,G);return te}function Ut(G,ce,te,Ye){var Vt=null==G?0:G.length;for(Ye&&Vt&&(te=G[--Vt]);Vt--;)te=ce(te,G[Vt],Vt,G);return te}function Zm(G,ce){for(var te=-1,Ye=null==G?0:G.length;++te<Ye;)if(ce(G[te],te,G))return!0;return!1}var e0=Ft("length");function On(G,ce,te){var Ye;return te(G,function(Vt,Ln,tr){if(ce(Vt,Ln,tr))return Ye=Ln,!1}),Ye}function Qi(G,ce,te,Ye){for(var Vt=G.length,Ln=te+(Ye?1:-1);Ye?Ln--:++Ln<Vt;)if(ce(G[Ln],Ln,G))return Ln;return-1}function Oi(G,ce,te){return ce==ce?function Hh(G,ce,te){for(var Ye=te-1,Vt=G.length;++Ye<Vt;)if(G[Ye]===ce)return Ye;return-1}(G,ce,te):Qi(G,Ss,te)}function Cs(G,ce,te,Ye){for(var Vt=te-1,Ln=G.length;++Vt<Ln;)if(Ye(G[Vt],ce))return Vt;return-1}function Ss(G){return G!=G}function Ue(G,ce){var te=null==G?0:G.length;return te?Li(G,ce)/te:NaN}function Ft(G){return function(ce){return null==ce?B:ce[G]}}function Zn(G){return function(ce){return null==G?B:G[ce]}}function ns(G,ce,te,Ye,Vt){return Vt(G,function(Ln,tr,Jn){te=Ye?(Ye=!1,Ln):ce(te,Ln,tr,Jn)}),te}function Li(G,ce){for(var te,Ye=-1,Vt=G.length;++Ye<Vt;){var Ln=ce(G[Ye]);Ln!==B&&(te=te===B?Ln:te+Ln)}return te}function Aa(G,ce){for(var te=-1,Ye=Array(G);++te<G;)Ye[te]=ce(te);return Ye}function Hc(G){return G&&G.slice(0,Nr(G)+1).replace(zm,"")}function er(G){return function(ce){return G(ce)}}function Gt(G,ce){return zn(ce,function(te){return G[te]})}function tl(G,ce){return G.has(ce)}function zl(G,ce){for(var te=-1,Ye=G.length;++te<Ye&&Oi(ce,G[te],0)>-1;);return te}function zh(G,ce){for(var te=G.length;te--&&Oi(ce,G[te],0)>-1;);return te}function Hl(G,ce){for(var te=G.length,Ye=0;te--;)G[te]===ce&&++Ye;return Ye}var Ar=Zn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Yu=Zn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Gc(G){return"\\"+vS[G]}function co(G){return Lt.test(G)}function Km(G){var ce=-1,te=Array(G.size);return G.forEach(function(Ye,Vt){te[++ce]=[Vt,Ye]}),te}function n0(G,ce){return function(te){return G(ce(te))}}function uo(G,ce){for(var te=-1,Ye=G.length,Vt=0,Ln=[];++te<Ye;){var tr=G[te];(tr===ce||tr===oi)&&(G[te]=oi,Ln[Vt++]=te)}return Ln}function Wc(G){var ce=-1,te=Array(G.size);return G.forEach(function(Ye){te[++ce]=Ye}),te}function Ci(G){return co(G)?function Jm(G){for(var ce=Pe.lastIndex=0;Pe.test(G);)++ce;return ce}(G):e0(G)}function ho(G){return co(G)?function Gh(G){return G.match(Pe)||[]}(G):function Oe(G){return G.split("")}(G)}function Nr(G){for(var ce=G.length;ce--&&Ea.test(G.charAt(ce)););return ce}var fo=Zn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),$h=function G(ce){var u,te=(ce=null==ce?Ji:$h.defaults(Ji.Object(),ce,$h.pick(Ji,Yy))).Array,Ye=ce.Date,Vt=ce.Error,Ln=ce.Function,tr=ce.Math,Jn=ce.Object,r0=ce.RegExp,dP=ce.String,mo=ce.TypeError,Qm=te.prototype,Ku=Jn.prototype,eg=ce["__core-js_shared__"],tg=Ln.prototype.toString,Wn=Ku.hasOwnProperty,s0=0,jh=(u=/[^.]+$/.exec(eg&&eg.keys&&eg.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",ng=Ku.toString,fP=tg.call(Jn),pP=Ji._,Wl=r0("^"+tg.call(Wn).replace(kh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qh=zs?ce.Buffer:B,ii=ce.Symbol,Ju=ce.Uint8Array,o0=qh?qh.allocUnsafe:B,Xh=n0(Jn.getPrototypeOf,Jn),ig=Jn.create,rg=Ku.propertyIsEnumerable,Yh=Qm.splice,Zh=ii?ii.isConcatSpreadable:B,Qu=ii?ii.iterator:B,nr=ii?ii.toStringTag:B,$c=function(){try{var u=nc(Jn,"defineProperty");return u({},"",{}),u}catch{}}(),wS=ce.clearTimeout!==Ji.clearTimeout&&ce.clearTimeout,sg=Ye&&Ye.now!==Ji.Date.now&&Ye.now,MS=ce.setTimeout!==Ji.setTimeout&&ce.setTimeout,og=tr.ceil,ui=tr.floor,ag=Jn.getOwnPropertySymbols,mP=qh?qh.isBuffer:B,ed=ce.isFinite,Ws=Qm.join,CS=n0(Jn.keys,Jn),Si=tr.max,Ei=tr.min,Es=Ye.now,a0=ce.parseInt,td=tr.random,SS=Qm.reverse,Xo=nc(ce,"DataView"),jc=nc(ce,"Map"),nd=nc(ce,"Promise"),vt=nc(ce,"Set"),qc=nc(ce,"WeakMap"),Kh=nc(Jn,"create"),Jh=qc&&new qc,Xc={},ES=ic(Xo),l0=ic(jc),DS=ic(nd),AS=ic(vt),xe=ic(qc),on=ii?ii.prototype:B,yn=on?on.valueOf:B,An=on?on.toString:B;function E(u){if(hi(u)&&!Nt(u)&&!(u instanceof nn)){if(u instanceof Di)return u;if(Wn.call(u,"__wrapped__"))return nE(u)}return new Di(u)}var $l=function(){function u(){}return function(h){if(!vi(h))return{};if(ig)return ig(h);u.prototype=h;var g=new u;return u.prototype=B,g}}();function nl(){}function Di(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=B}function nn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Wo,this.__views__=[]}function Yc(u){var h=-1,g=null==u?0:u.length;for(this.clear();++h<g;){var x=u[h];this.set(x[0],x[1])}}function mr(u){var h=-1,g=null==u?0:u.length;for(this.clear();++h<g;){var x=u[h];this.set(x[0],x[1])}}function go(u){var h=-1,g=null==u?0:u.length;for(this.clear();++h<g;){var x=u[h];this.set(x[0],x[1])}}function il(u){var h=-1,g=null==u?0:u.length;for(this.__data__=new go;++h<g;)this.add(u[h])}function $s(u){var h=this.__data__=new mr(u);this.size=h.size}function di(u,h){var g=Nt(u),x=!g&&ac(u),S=!g&&!x&&fl(u),T=!g&&!x&&!S&&wo(u),U=g||x||S||T,z=U?Aa(u.length,dP):[],W=z.length;for(var _e in u)(h||Wn.call(u,_e))&&(!U||!("length"==_e||S&&("offset"==_e||"parent"==_e)||T&&("buffer"==_e||"byteLength"==_e||"byteOffset"==_e)||ss(_e,W)))&&z.push(_e);return z}function _o(u){var h=u.length;return h?u[ud(0,h-1)]:B}function FS(u,h){return _d(is(u),jl(h,0,u.length))}function fg(u){return _d(is(u))}function pg(u,h,g){(g!==B&&!Wr(u[h],g)||g===B&&!(h in u))&&vo(u,h,g)}function id(u,h,g){var x=u[h];(!Wn.call(u,h)||!Wr(x,g)||g===B&&!(h in u))&&vo(u,h,g)}function ef(u,h){for(var g=u.length;g--;)if(Wr(u[g][0],h))return g;return-1}function tf(u,h,g,x){return Yo(u,function(S,T,U){h(x,S,g(S),U)}),x}function rd(u,h){return u&&Jo(h,Ni(h),u)}function vo(u,h,g){"__proto__"==h&&$c?$c(u,h,{configurable:!0,enumerable:!0,value:g,writable:!0}):u[h]=g}function rf(u,h){for(var g=-1,x=h.length,S=te(x),T=null==u;++g<x;)S[g]=T?B:Vf(u,h[g]);return S}function jl(u,h,g){return u==u&&(g!==B&&(u=u<=g?u:g),h!==B&&(u=u>=h?u:h)),u}function $i(u,h,g,x,S,T){var U,z=1&h,W=2&h,_e=4&h;if(g&&(U=S?g(u,x,S,T):g(u)),U!==B)return U;if(!vi(u))return u;var ye=Nt(u);if(ye){if(U=function Og(u){var h=u.length,g=new u.constructor(h);return h&&"string"==typeof u[0]&&Wn.call(u,"index")&&(g.index=u.index,g.input=u.input),g}(u),!z)return is(u,U)}else{var Ce=_r(u),Ve=Ce==Fm||Ce==ZC;if(fl(u))return Cg(u,z);if(Ce==el||Ce==Pn||Ve&&!S){if(U=W||Ve?{}:B0(u),!z)return W?function pf(u,h){return Jo(u,F0(u),h)}(u,function nf(u,h){return u&&Jo(h,rr(h),u)}(U,u)):function Dg(u,h){return Jo(u,xf(u),h)}(u,rd(U,u))}else{if(!Xn[Ce])return S?u:{};U=function U0(u,h,g){var x=u.constructor;switch(h){case Rh:return zr(u);case Je:case Bl:return new x(+u);case Uc:return function Sg(u,h){var g=h?zr(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.byteLength)}(u,g);case Sy:case Um:case Ey:case Dy:case Ay:case Ty:case Iy:case $u:case Ph:return Eg(u,g);case $o:return new x;case Th:case Ih:return new x(u);case Bc:return function tu(u){var h=new u.constructor(u.source,Oh.exec(u));return h.lastIndex=u.lastIndex,h}(u);case so:return new x;case Bm:return function MP(u){return yn?Jn(yn.call(u)):{}}(u)}}(u,Ce,z)}}T||(T=new $s);var Xe=T.get(u);if(Xe)return Xe;T.set(u,U),Nf(u)?u.forEach(function(gt){U.add($i(gt,h,g,gt,u,T))}):XE(u)&&u.forEach(function(gt,Jt){U.set(Jt,$i(gt,h,g,Jt,u,T))});var Yt=ye?B:(_e?W?Pg:tc:W?rr:Ni)(u);return es(Yt||u,function(gt,Jt){Yt&&(gt=u[Jt=gt]),id(U,Jt,$i(gt,h,g,Jt,u,T))}),U}function m0(u,h,g){var x=g.length;if(null==u)return!x;for(u=Jn(u);x--;){var S=g[x],U=u[S];if(U===B&&!(S in u)||!(0,h[S])(U))return!1}return!0}function g0(u,h,g){if("function"!=typeof u)throw new mo(_n);return gd(function(){u.apply(B,g)},h)}function Ia(u,h,g,x){var S=-1,T=Uh,U=!0,z=u.length,W=[],_e=h.length;if(!z)return W;g&&(h=zn(h,er(g))),x?(T=Ct,U=!1):h.length>=200&&(T=tl,U=!1,h=new il(h));e:for(;++S<z;){var ye=u[S],Ce=null==g?ye:g(ye);if(ye=x||0!==ye?ye:0,U&&Ce==Ce){for(var Ve=_e;Ve--;)if(h[Ve]===Ce)continue e;W.push(ye)}else T(h,Ce,x)||W.push(ye)}return W}E.templateSettings={escape:Ny,evaluate:pr,interpolate:By,variable:"",imports:{_:E}},(E.prototype=nl.prototype).constructor=E,(Di.prototype=$l(nl.prototype)).constructor=Di,(nn.prototype=$l(nl.prototype)).constructor=nn,Yc.prototype.clear=function Qh(){this.__data__=Kh?Kh(null):{},this.size=0},Yc.prototype.delete=function Br(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h},Yc.prototype.get=function Ta(u){var h=this.__data__;if(Kh){var g=h[u];return g===wa?B:g}return Wn.call(h,u)?h[u]:B},Yc.prototype.has=function c0(u){var h=this.__data__;return Kh?h[u]!==B:Wn.call(h,u)},Yc.prototype.set=function Zc(u,h){var g=this.__data__;return this.size+=this.has(u)?0:1,g[u]=Kh&&h===B?wa:h,this},mr.prototype.clear=function IS(){this.__data__=[],this.size=0},mr.prototype.delete=function u0(u){var h=this.__data__,g=ef(h,u);return!(g<0||(g==h.length-1?h.pop():Yh.call(h,g,1),--this.size,0))},mr.prototype.get=function RS(u){var h=this.__data__,g=ef(h,u);return g<0?B:h[g][1]},mr.prototype.has=function PS(u){return ef(this.__data__,u)>-1},mr.prototype.set=function cg(u,h){var g=this.__data__,x=ef(g,u);return x<0?(++this.size,g.push([u,h])):g[x][1]=h,this},go.prototype.clear=function d0(){this.size=0,this.__data__={hash:new Yc,map:new(jc||mr),string:new Yc}},go.prototype.delete=function ug(u){var h=yf(this,u).delete(u);return this.size-=h?1:0,h},go.prototype.get=function kS(u){return yf(this,u).get(u)},go.prototype.has=function h0(u){return yf(this,u).has(u)},go.prototype.set=function dg(u,h){var g=yf(this,u),x=g.size;return g.set(u,h),this.size+=g.size==x?0:1,this},il.prototype.add=il.prototype.push=function f0(u){return this.__data__.set(u,wa),this},il.prototype.has=function p0(u){return this.__data__.has(u)},$s.prototype.clear=function hg(){this.__data__=new mr,this.size=0},$s.prototype.delete=function OS(u){var h=this.__data__,g=h.delete(u);return this.size=h.size,g},$s.prototype.get=function LS(u){return this.__data__.get(u)},$s.prototype.has=function Ur(u){return this.__data__.has(u)},$s.prototype.set=function rl(u,h){var g=this.__data__;if(g instanceof mr){var x=g.__data__;if(!jc||x.length<199)return x.push([u,h]),this.size=++g.size,this;g=this.__data__=new go(x)}return g.set(u,h),this.size=g.size,this};var Yo=mf(yo),_0=mf(af,!0);function NS(u,h){var g=!0;return Yo(u,function(x,S,T){return g=!!h(x,S,T)}),g}function mg(u,h,g){for(var x=-1,S=u.length;++x<S;){var T=u[x],U=h(T);if(null!=U&&(z===B?U==U&&!qs(U):g(U,z)))var z=U,W=T}return W}function od(u,h){var g=[];return Yo(u,function(x,S,T){h(x,S,T)&&g.push(x)}),g}function ir(u,h,g,x,S){var T=-1,U=u.length;for(g||(g=Lg),S||(S=[]);++T<U;){var z=u[T];h>0&&g(z)?h>1?ir(z,h-1,g,x,S):Da(S,z):x||(S[S.length]=z)}return S}var sf=hd(),ad=hd(!0);function yo(u,h){return u&&sf(u,h,Ni)}function af(u,h){return u&&ad(u,h,Ni)}function Ra(u,h){return Gs(h,function(g){return Fa(u[g])})}function ql(u,h){for(var g=0,x=(h=ll(h,u)).length;null!=u&&g<x;)u=u[ta(h[g++])];return g&&g==x?u:B}function Xl(u,h,g){var x=h(u);return Nt(u)?x:Da(x,g(u))}function gr(u){return null==u?u===B?"[object Undefined]":"[object Null]":nr&&nr in Jn(u)?function bf(u){var h=Wn.call(u,nr),g=u[nr];try{u[nr]=B;var x=!0}catch{}var S=ng.call(u);return x&&(h?u[nr]=g:delete u[nr]),S}(u):function eE(u){return ng.call(u)}(u)}function Kc(u,h){return u>h}function vP(u,h){return null!=u&&Wn.call(u,h)}function v0(u,h){return null!=u&&h in Jn(u)}function gg(u,h,g){for(var x=g?Ct:Uh,S=u[0].length,T=u.length,U=T,z=te(T),W=1/0,_e=[];U--;){var ye=u[U];U&&h&&(ye=zn(ye,er(h))),W=Ei(ye.length,W),z[U]=!g&&(h||S>=120&&ye.length>=120)?new il(U&&ye):B}ye=u[0];var Ce=-1,Ve=z[0];e:for(;++Ce<S&&_e.length<W;){var Xe=ye[Ce],ft=h?h(Xe):Xe;if(Xe=g||0!==Xe?Xe:0,!(Ve?tl(Ve,ft):x(_e,ft,g))){for(U=T;--U;){var Yt=z[U];if(!(Yt?tl(Yt,ft):x(u[U],ft,g)))continue e}Ve&&Ve.push(ft),_e.push(Xe)}}return _e}function ld(u,h,g){var x=null==(u=os(u,h=ll(h,u)))?u:u[ta(as(h))];return null==x?B:Dr(x,u,g)}function Jc(u){return hi(u)&&gr(u)==Pn}function sl(u,h,g,x,S){return u===h||(null==u||null==h||!hi(u)&&!hi(h)?u!=u&&h!=h:function lf(u,h,g,x,S,T){var U=Nt(u),z=Nt(h),W=U?Dn:_r(u),_e=z?Dn:_r(h),ye=(W=W==Pn?el:W)==el,Ce=(_e=_e==Pn?el:_e)==el,Ve=W==_e;if(Ve&&fl(u)){if(!fl(h))return!1;U=!0,ye=!1}if(Ve&&!ye)return T||(T=new $s),U||wo(u)?Rg(u,h,g,x,S,T):function XS(u,h,g,x,S,T,U){switch(g){case Uc:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case Rh:return!(u.byteLength!=h.byteLength||!T(new Ju(u),new Ju(h)));case Je:case Bl:case Th:return Wr(+u,+h);case Wu:return u.name==h.name&&u.message==h.message;case Bc:case Ih:return u==h+"";case $o:var z=Km;case so:if(z||(z=Wc),u.size!=h.size&&!(1&x))return!1;var _e=U.get(u);if(_e)return _e==h;x|=2,U.set(u,h);var ye=Rg(z(u),z(h),x,S,T,U);return U.delete(u),ye;case Bm:if(yn)return yn.call(u)==yn.call(h)}return!1}(u,h,W,g,x,S,T);if(!(1&g)){var Xe=ye&&Wn.call(u,"__wrapped__"),ft=Ce&&Wn.call(h,"__wrapped__");if(Xe||ft){var Yt=Xe?u.value():u,gt=ft?h.value():h;return T||(T=new $s),S(Yt,gt,g,x,T)}}return!!Ve&&(T||(T=new $s),function YS(u,h,g,x,S,T){var U=1&g,z=tc(u),W=z.length;if(W!=tc(h).length&&!U)return!1;for(var Ce=W;Ce--;){var Ve=z[Ce];if(!(U?Ve in h:Wn.call(h,Ve)))return!1}var Xe=T.get(u),ft=T.get(h);if(Xe&&ft)return Xe==h&&ft==u;var Yt=!0;T.set(u,h),T.set(h,u);for(var gt=U;++Ce<W;){var Jt=u[Ve=z[Ce]],un=h[Ve];if(x)var jr=U?x(un,Jt,Ve,h,u,T):x(Jt,un,Ve,u,h,T);if(!(jr===B?Jt===un||S(Jt,un,g,x,T):jr)){Yt=!1;break}gt||(gt="constructor"==Ve)}if(Yt&&!gt){var qr=u.constructor,Bi=h.constructor;qr!=Bi&&"constructor"in u&&"constructor"in h&&!("function"==typeof qr&&qr instanceof qr&&"function"==typeof Bi&&Bi instanceof Bi)&&(Yt=!1)}return T.delete(u),T.delete(h),Yt}(u,h,g,x,S,T))}(u,h,g,x,sl,S))}function cf(u,h,g,x){var S=g.length,T=S,U=!x;if(null==u)return!T;for(u=Jn(u);S--;){var z=g[S];if(U&&z[2]?z[1]!==u[z[0]]:!(z[0]in u))return!1}for(;++S<T;){var W=(z=g[S])[0],_e=u[W],ye=z[1];if(U&&z[2]){if(_e===B&&!(W in u))return!1}else{var Ce=new $s;if(x)var Ve=x(_e,ye,W,u,h,Ce);if(!(Ve===B?sl(ye,_e,3,x,Ce):Ve))return!1}}return!0}function yg(u){return!(!vi(u)||function Ng(u){return!!jh&&jh in u}(u))&&(Fa(u)?Wl:sS).test(ic(u))}function cd(u){return"function"==typeof u?u:null==u?cs:"object"==typeof u?Nt(u)?w0(u[0],u[1]):Zl(u):Ed(u)}function Yl(u){if(!au(u))return CS(u);var h=[];for(var g in Jn(u))Wn.call(u,g)&&"constructor"!=g&&h.push(g);return h}function uf(u,h){return u<h}function bg(u,h){var g=-1,x=$r(u)?te(u.length):[];return Yo(u,function(S,T,U){x[++g]=h(S,T,U)}),x}function Zl(u){var h=kg(u);return 1==h.length&&h[0][2]?dl(h[0][0],h[0][1]):function(g){return g===u||cf(g,u,h)}}function w0(u,h){return Fg(u)&&Bg(h)?dl(ta(u),h):function(g){var x=Vf(g,u);return x===B&&x===h?fu(g,u):sl(h,x,3)}}function _i(u,h,g,x,S){u!==h&&sf(h,function(T,U){if(S||(S=new $s),vi(T))!function xg(u,h,g,x,S,T,U){var z=Ug(u,g),W=Ug(h,g),_e=U.get(W);if(_e)pg(u,g,_e);else{var ye=T?T(z,W,g+"",u,h,U):B,Ce=ye===B;if(Ce){var Ve=Nt(W),Xe=!Ve&&fl(W),ft=!Ve&&!Xe&&wo(W);ye=W,Ve||Xe||ft?Nt(z)?ye=z:Ai(z)?ye=is(z):Xe?(Ce=!1,ye=Cg(W,!0)):ft?(Ce=!1,ye=Eg(W,!0)):ye=[]:Cd(W)||ac(W)?(ye=z,ac(z)?ye=u_(z):(!vi(z)||Fa(z))&&(ye=B0(W))):Ce=!1}Ce&&(U.set(W,ye),S(ye,W,x,T,U),U.delete(W)),pg(u,g,ye)}}(u,h,U,g,_i,x,S);else{var z=x?x(Ug(u,U),T,U+"",u,h,S):B;z===B&&(z=T),pg(u,U,z)}},rr)}function M0(u,h){var g=u.length;if(g)return ss(h+=h<0?g:0,g)?u[h]:B}function wg(u,h,g){h=h.length?zn(h,function(T){return Nt(T)?function(U){return ql(U,1===T.length?T[0]:T)}:T}):[cs];var x=-1;return h=zn(h,er(yt())),function Vl(G,ce){var te=G.length;for(G.sort(ce);te--;)G[te]=G[te].value;return G}(bg(u,function(T,U,z){return{criteria:zn(h,function(_e){return _e(T)}),index:++x,value:T}}),function(T,U){return function $S(u,h,g){for(var x=-1,S=u.criteria,T=h.criteria,U=S.length,z=g.length;++x<U;){var W=A0(S[x],T[x]);if(W)return x>=z?W:W*("desc"==g[x]?-1:1)}return u.index-h.index}(T,U,g)})}function Kl(u,h,g){for(var x=-1,S=h.length,T={};++x<S;){var U=h[x],z=ql(u,U);g(z,U)&&df(T,ll(U,u),z)}return T}function ol(u,h,g,x){var S=x?Cs:Oi,T=-1,U=h.length,z=u;for(u===h&&(h=is(h)),g&&(z=zn(u,er(g)));++T<U;)for(var W=0,_e=h[T],ye=g?g(_e):_e;(W=S(z,ye,W,x))>-1;)z!==u&&Yh.call(z,W,1),Yh.call(u,W,1);return u}function Mg(u,h){for(var g=u?h.length:0,x=g-1;g--;){var S=h[g];if(g==x||S!==T){var T=S;ss(S)?Yh.call(u,S,1):E0(u,S)}}return u}function ud(u,h){return u+ui(td()*(h-u+1))}function C0(u,h){var g="";if(!u||h<1||h>Sa)return g;do{h%2&&(g+=u),(h=ui(h/2))&&(u+=u)}while(h);return g}function Kt(u,h){return Vg(z0(u,h,cs),u+"")}function Se(u){return _o(pu(u))}function yP(u,h){var g=pu(u);return _d(g,jl(h,0,g.length))}function df(u,h,g,x){if(!vi(u))return u;for(var S=-1,T=(h=ll(h,u)).length,U=T-1,z=u;null!=z&&++S<T;){var W=ta(h[S]),_e=g;if("__proto__"===W||"constructor"===W||"prototype"===W)return u;if(S!=U){var ye=z[W];(_e=x?x(ye,W,z):B)===B&&(_e=vi(ye)?ye:ss(h[S+1])?[]:{})}id(z,W,_e),z=z[W]}return u}var zS=Jh?function(u,h){return Jh.set(u,h),u}:cs,bP=$c?function(u,h){return $c(u,"toString",{configurable:!0,enumerable:!1,value:y_(h),writable:!0})}:cs;function xP(u){return _d(pu(u))}function bo(u,h,g){var x=-1,S=u.length;h<0&&(h=-h>S?0:S+h),(g=g>S?S:g)<0&&(g+=S),S=h>g?0:g-h>>>0,h>>>=0;for(var T=te(S);++x<S;)T[x]=u[x+h];return T}function wP(u,h){var g;return Yo(u,function(x,S,T){return!(g=h(x,S,T))}),!!g}function al(u,h,g){var x=0,S=null==u?x:u.length;if("number"==typeof h&&h==h&&S<=2147483647){for(;x<S;){var T=x+S>>>1,U=u[T];null!==U&&!qs(U)&&(g?U<=h:U<h)?x=T+1:S=T}return S}return S0(u,h,cs,g)}function S0(u,h,g,x){var S=0,T=null==u?0:u.length;if(0===T)return 0;for(var U=(h=g(h))!=h,z=null===h,W=qs(h),_e=h===B;S<T;){var ye=ui((S+T)/2),Ce=g(u[ye]),Ve=Ce!==B,Xe=null===Ce,ft=Ce==Ce,Yt=qs(Ce);if(U)var gt=x||ft;else gt=_e?ft&&(x||Ve):z?ft&&Ve&&(x||!Xe):W?ft&&Ve&&!Xe&&(x||!Yt):!Xe&&!Yt&&(x?Ce<=h:Ce<h);gt?S=ye+1:T=ye}return Ei(T,4294967294)}function HS(u,h){for(var g=-1,x=u.length,S=0,T=[];++g<x;){var U=u[g],z=h?h(U):U;if(!g||!Wr(z,W)){var W=z;T[S++]=0===U?0:U}}return T}function Fi(u){return"number"==typeof u?u:qs(u)?NaN:+u}function Vr(u){if("string"==typeof u)return u;if(Nt(u))return zn(u,Vr)+"";if(qs(u))return An?An.call(u):"";var h=u+"";return"0"==h&&1/u==-vn?"-0":h}function js(u,h,g){var x=-1,S=Uh,T=u.length,U=!0,z=[],W=z;if(g)U=!1,S=Ct;else if(T>=200){var _e=h?null:O0(u);if(_e)return Wc(_e);U=!1,S=tl,W=new il}else W=h?[]:z;e:for(;++x<T;){var ye=u[x],Ce=h?h(ye):ye;if(ye=g||0!==ye?ye:0,U&&Ce==Ce){for(var Ve=W.length;Ve--;)if(W[Ve]===Ce)continue e;h&&W.push(Ce),z.push(ye)}else S(W,Ce,g)||(W!==z&&W.push(Ce),z.push(ye))}return z}function E0(u,h){return null==(u=os(u,h=ll(h,u)))||delete u[ta(as(h))]}function D0(u,h,g,x){return df(u,h,g(ql(u,h)),x)}function Tr(u,h,g,x){for(var S=u.length,T=x?S:-1;(x?T--:++T<S)&&h(u[T],T,u););return g?bo(u,x?0:T,x?T+1:S):bo(u,x?T+1:0,x?S:T)}function Ko(u,h){var g=u;return g instanceof nn&&(g=g.value()),Vh(h,function(x,S){return S.func.apply(S.thisArg,Da([x],S.args))},g)}function hf(u,h,g){var x=u.length;if(x<2)return x?js(u[0]):[];for(var S=-1,T=te(x);++S<x;)for(var U=u[S],z=-1;++z<x;)z!=S&&(T[S]=Ia(T[S]||U,u[z],h,g));return js(ir(T,1),h,g)}function dd(u,h,g){for(var x=-1,S=u.length,T=h.length,U={};++x<S;)g(U,u[x],x<T?h[x]:B);return U}function Jl(u){return Ai(u)?u:[]}function ff(u){return"function"==typeof u?u:cs}function ll(u,h){return Nt(u)?u:Fg(u,h)?[u]:$0(In(u))}var GS=Kt;function Ql(u,h,g){var x=u.length;return g=g===B?x:g,!h&&g>=x?u:bo(u,h,g)}var WS=wS||function(u){return Ji.clearTimeout(u)};function Cg(u,h){if(h)return u.slice();var g=u.length,x=o0?o0(g):new u.constructor(g);return u.copy(x),x}function zr(u){var h=new u.constructor(u.byteLength);return new Ju(h).set(new Ju(u)),h}function Eg(u,h){var g=h?zr(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.length)}function A0(u,h){if(u!==h){var g=u!==B,x=null===u,S=u==u,T=qs(u),U=h!==B,z=null===h,W=h==h,_e=qs(h);if(!z&&!_e&&!T&&u>h||T&&U&&W&&!z&&!_e||x&&U&&W||!g&&W||!S)return 1;if(!x&&!T&&!_e&&u<h||_e&&g&&S&&!x&&!T||z&&g&&S||!U&&S||!W)return-1}return 0}function T0(u,h,g,x){for(var S=-1,T=u.length,U=g.length,z=-1,W=h.length,_e=Si(T-U,0),ye=te(W+_e),Ce=!x;++z<W;)ye[z]=h[z];for(;++S<U;)(Ce||S<T)&&(ye[g[S]]=u[S]);for(;_e--;)ye[z++]=u[S++];return ye}function I0(u,h,g,x){for(var S=-1,T=u.length,U=-1,z=g.length,W=-1,_e=h.length,ye=Si(T-z,0),Ce=te(ye+_e),Ve=!x;++S<ye;)Ce[S]=u[S];for(var Xe=S;++W<_e;)Ce[Xe+W]=h[W];for(;++U<z;)(Ve||S<T)&&(Ce[Xe+g[U]]=u[S++]);return Ce}function is(u,h){var g=-1,x=u.length;for(h||(h=te(x));++g<x;)h[g]=u[g];return h}function Jo(u,h,g,x){var S=!g;g||(g={});for(var T=-1,U=h.length;++T<U;){var z=h[T],W=x?x(g[z],u[z],z,g,u):B;W===B&&(W=u[z]),S?vo(g,z,W):id(g,z,W)}return g}function Ag(u,h){return function(g,x){var S=Nt(g)?Ym:tf,T=h?h():{};return S(g,u,yt(x,2),T)}}function Qo(u){return Kt(function(h,g){var x=-1,S=g.length,T=S>1?g[S-1]:B,U=S>2?g[2]:B;for(T=u.length>3&&"function"==typeof T?(S--,T):B,U&&Hr(g[0],g[1],U)&&(T=S<3?B:T,S=1),h=Jn(h);++x<S;){var z=g[x];z&&u(h,z,x,T)}return h})}function mf(u,h){return function(g,x){if(null==g)return g;if(!$r(g))return u(g,x);for(var S=g.length,T=h?S:-1,U=Jn(g);(h?T--:++T<S)&&!1!==x(U[T],T,U););return g}}function hd(u){return function(h,g,x){for(var S=-1,T=Jn(h),U=x(h),z=U.length;z--;){var W=U[u?z:++S];if(!1===g(T[W],W,T))break}return h}}function R0(u){return function(h){var g=co(h=In(h))?ho(h):B,x=g?g[0]:h.charAt(0),S=g?Ql(g,1).join(""):h.slice(1);return x[u]()+S}}function nu(u){return function(h){return Vh(Kb(Pt(h).replace(lP,"")),u,"")}}function iu(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var g=$l(u.prototype),x=u.apply(g,h);return vi(x)?x:g}}function ec(u){return function(h,g,x){var S=Jn(h);if(!$r(h)){var T=yt(g,3);h=Ni(h),g=function(z){return T(S[z],z,S)}}var U=u(h,g,x);return U>-1?S[T?h[U]:U]:B}}function P0(u){return rs(function(h){var g=h.length,x=g,S=Di.prototype.thru;for(u&&h.reverse();x--;){var T=h[x];if("function"!=typeof T)throw new mo(_n);if(S&&!U&&"wrapper"==md(T))var U=new Di([],!0)}for(x=U?x:g;++x<g;){var z=md(T=h[x]),W="wrapper"==z?L0(T):B;U=W&&ou(W[0])&&424==W[1]&&!W[4].length&&1==W[9]?U[md(W[0])].apply(U,W[3]):1==T.length&&ou(T)?U[z]():U.thru(T)}return function(){var _e=arguments,ye=_e[0];if(U&&1==_e.length&&Nt(ye))return U.plant(ye).value();for(var Ce=0,Ve=g?h[Ce].apply(this,_e):ye;++Ce<g;)Ve=h[Ce].call(this,Ve);return Ve}})}function j(u,h,g,x,S,T,U,z,W,_e){var ye=128&h,Ce=1&h,Ve=2&h,Xe=24&h,ft=512&h,Yt=Ve?B:iu(u);return function gt(){for(var Jt=arguments.length,un=te(Jt),jr=Jt;jr--;)un[jr]=arguments[jr];if(Xe)var qr=su(gt),Bi=Hl(un,qr);if(x&&(un=T0(un,x,S,Xe)),T&&(un=I0(un,T,U,Xe)),Jt-=Bi,Xe&&Jt<_e){var yi=uo(un,qr);return _f(u,h,j,gt.placeholder,g,un,yi,z,W,_e-Jt)}var Eo=Ce?g:this,Do=Ve?Eo[u]:u;return Jt=un.length,z?un=ea(un,z):ft&&Jt>1&&un.reverse(),ye&&W<Jt&&(un.length=W),this&&this!==Ji&&this instanceof gt&&(Do=Yt||iu(Do)),Do.apply(Eo,un)}}function Tg(u,h){return function(g,x){return function Zo(u,h,g,x){return yo(u,function(S,T,U){h(x,g(S),T,U)}),x}(g,u,h(x),{})}}function Hn(u,h){return function(g,x){var S;if(g===B&&x===B)return h;if(g!==B&&(S=g),x!==B){if(S===B)return x;"string"==typeof g||"string"==typeof x?(g=Vr(g),x=Vr(x)):(g=Fi(g),x=Fi(x)),S=u(g,x)}return S}}function pd(u){return rs(function(h){return h=zn(h,er(yt())),Kt(function(g){var x=this;return u(h,function(S){return Dr(S,x,g)})})})}function cl(u,h){var g=(h=h===B?" ":Vr(h)).length;if(g<2)return g?C0(h,u):h;var x=C0(h,og(u/Ci(h)));return co(h)?Ql(ho(x),0,u).join(""):x.slice(0,u)}function k0(u){return function(h,g,x){return x&&"number"!=typeof x&&Hr(h,g,x)&&(g=x=B),h=Na(h),g===B?(g=h,h=0):g=Na(g),function eu(u,h,g,x){for(var S=-1,T=Si(og((h-u)/(g||1)),0),U=te(T);T--;)U[x?T:++S]=u,u+=g;return U}(h,g,x=x===B?h<g?1:-1:Na(x),u)}}function gf(u){return function(h,g){return"string"==typeof h&&"string"==typeof g||(h=Xs(h),g=Xs(g)),u(h,g)}}function _f(u,h,g,x,S,T,U,z,W,_e){var ye=8&h;h|=ye?32:64,4&(h&=~(ye?64:32))||(h&=-4);var Yt=[u,h,S,ye?T:B,ye?U:B,ye?B:T,ye?B:U,z,W,_e],gt=g.apply(B,Yt);return ou(u)&&H0(gt,Yt),gt.placeholder=x,G0(gt,u,h)}function xo(u){var h=tr[u];return function(g,x){if(g=Xs(g),(x=null==x?0:Ei(Xt(x),292))&&ed(g)){var S=(In(g)+"e").split("e");return+((S=(In(h(S[0]+"e"+(+S[1]+x)))+"e").split("e"))[0]+"e"+(+S[1]-x))}return h(g)}}var O0=vt&&1/Wc(new vt([,-0]))[1]==vn?function(u){return new vt(u)}:w_;function ul(u){return function(h){var g=_r(h);return g==$o?Km(h):g==so?function Zu(G){var ce=-1,te=Array(G.size);return G.forEach(function(Ye){te[++ce]=[Ye,Ye]}),te}(h):function gi(G,ce){return zn(ce,function(te){return[te,G[te]]})}(h,u(h))}}function ka(u,h,g,x,S,T,U,z){var W=2&h;if(!W&&"function"!=typeof u)throw new mo(_n);var _e=x?x.length:0;if(_e||(h&=-97,x=S=B),U=U===B?U:Si(Xt(U),0),z=z===B?z:Xt(z),_e-=S?S.length:0,64&h){var ye=x,Ce=S;x=S=B}var Ve=W?B:L0(u),Xe=[u,h,g,x,S,ye,Ce,T,U,z];if(Ve&&function JS(u,h){var g=u[1],x=h[1],S=g|x;if(!(S<131||(128==x&&8==g||128==x&&256==g&&u[7].length<=h[8]||384==x&&h[7].length<=h[8]&&8==g)))return u;1&x&&(u[2]=h[2],S|=1&g?0:4);var z=h[3];if(z){var W=u[3];u[3]=W?T0(W,z,h[4]):z,u[4]=W?uo(u[3],oi):h[4]}(z=h[5])&&(u[5]=(W=u[5])?I0(W,z,h[6]):z,u[6]=W?uo(u[5],oi):h[6]),(z=h[7])&&(u[7]=z),128&x&&(u[8]=null==u[8]?h[8]:Ei(u[8],h[8])),null==u[9]&&(u[9]=h[9]),u[0]=h[0],u[1]=S}(Xe,Ve),u=Xe[0],h=Xe[1],g=Xe[2],x=Xe[3],S=Xe[4],!(z=Xe[9]=Xe[9]===B?W?0:u.length:Si(Xe[9]-_e,0))&&24&h&&(h&=-25),h&&1!=h)ft=8==h||16==h?function fd(u,h,g){var x=iu(u);return function S(){for(var T=arguments.length,U=te(T),z=T,W=su(S);z--;)U[z]=arguments[z];var _e=T<3&&U[0]!==W&&U[T-1]!==W?[]:uo(U,W);return(T-=_e.length)<g?_f(u,h,j,S.placeholder,B,U,_e,B,B,g-T):Dr(this&&this!==Ji&&this instanceof S?x:u,this,U)}}(u,h,z):32!=h&&33!=h||S.length?j.apply(B,Xe):function qS(u,h,g,x){var S=1&h,T=iu(u);return function U(){for(var z=-1,W=arguments.length,_e=-1,ye=x.length,Ce=te(ye+W),Ve=this&&this!==Ji&&this instanceof U?T:u;++_e<ye;)Ce[_e]=x[_e];for(;W--;)Ce[_e++]=arguments[++z];return Dr(Ve,S?g:this,Ce)}}(u,h,g,x);else var ft=function jS(u,h,g){var x=1&h,S=iu(u);return function T(){return(this&&this!==Ji&&this instanceof T?S:u).apply(x?g:this,arguments)}}(u,h,g);return G0((Ve?zS:H0)(ft,Xe),u,h)}function Ig(u,h,g,x){return u===B||Wr(u,Ku[g])&&!Wn.call(x,g)?h:u}function ru(u,h,g,x,S,T){return vi(u)&&vi(h)&&(T.set(h,u),_i(u,h,B,ru,T),T.delete(h)),u}function vf(u){return Cd(u)?B:u}function Rg(u,h,g,x,S,T){var U=1&g,z=u.length,W=h.length;if(z!=W&&!(U&&W>z))return!1;var _e=T.get(u),ye=T.get(h);if(_e&&ye)return _e==h&&ye==u;var Ce=-1,Ve=!0,Xe=2&g?new il:B;for(T.set(u,h),T.set(h,u);++Ce<z;){var ft=u[Ce],Yt=h[Ce];if(x)var gt=U?x(Yt,ft,Ce,h,u,T):x(ft,Yt,Ce,u,h,T);if(gt!==B){if(gt)continue;Ve=!1;break}if(Xe){if(!Zm(h,function(Jt,un){if(!tl(Xe,un)&&(ft===Jt||S(ft,Jt,g,x,T)))return Xe.push(un)})){Ve=!1;break}}else if(ft!==Yt&&!S(ft,Yt,g,x,T)){Ve=!1;break}}return T.delete(u),T.delete(h),Ve}function rs(u){return Vg(z0(u,B,Sf),u+"")}function tc(u){return Xl(u,Ni,xf)}function Pg(u){return Xl(u,rr,F0)}var L0=Jh?function(u){return Jh.get(u)}:w_;function md(u){for(var h=u.name+"",g=Xc[h],x=Wn.call(Xc,h)?g.length:0;x--;){var S=g[x],T=S.func;if(null==T||T==u)return S.name}return h}function su(u){return(Wn.call(E,"placeholder")?E:u).placeholder}function yt(){var u=E.iteratee||Gf;return u=u===Gf?cd:u,arguments.length?u(arguments[0],arguments[1]):u}function yf(u,h){var g=u.__data__;return function SP(u){var h=typeof u;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==u:null===u}(h)?g["string"==typeof h?"string":"hash"]:g.map}function kg(u){for(var h=Ni(u),g=h.length;g--;){var x=h[g],S=u[x];h[g]=[x,S,Bg(S)]}return h}function nc(u,h){var g=function lo(G,ce){return null==G?B:G[ce]}(u,h);return yg(g)?g:B}var xf=ag?function(u){return null==u?[]:(u=Jn(u),Gs(ag(u),function(h){return rg.call(u,h)}))}:Dd,F0=ag?function(u){for(var h=[];u;)Da(h,xf(u)),u=Xh(u);return h}:Dd,_r=gr;function ZS(u,h,g){for(var x=-1,S=(h=ll(h,u)).length,T=!1;++x<S;){var U=ta(h[x]);if(!(T=null!=u&&g(u,U)))break;u=u[U]}return T||++x!=S?T:!!(S=null==u?0:u.length)&&r_(S)&&ss(U,S)&&(Nt(u)||ac(u))}function B0(u){return"function"!=typeof u.constructor||au(u)?{}:$l(Xh(u))}function Lg(u){return Nt(u)||ac(u)||!!(Zh&&u&&u[Zh])}function ss(u,h){var g=typeof u;return!!(h=h??Sa)&&("number"==g||"symbol"!=g&&Hy.test(u))&&u>-1&&u%1==0&&u<h}function Hr(u,h,g){if(!vi(g))return!1;var x=typeof h;return!!("number"==x?$r(g)&&ss(h,g.length):"string"==x&&h in g)&&Wr(g[h],u)}function Fg(u,h){if(Nt(u))return!1;var g=typeof u;return!("number"!=g&&"symbol"!=g&&"boolean"!=g&&null!=u&&!qs(u))||eS.test(u)||!QC.test(u)||null!=h&&u in Jn(h)}function ou(u){var h=md(u),g=E[h];if("function"!=typeof g||!(h in nn.prototype))return!1;if(u===g)return!0;var x=L0(g);return!!x&&u===x[0]}(Xo&&_r(new Xo(new ArrayBuffer(1)))!=Uc||jc&&_r(new jc)!=$o||nd&&_r(nd.resolve())!=Nm||vt&&_r(new vt)!=so||qc&&_r(new qc)!=oo)&&(_r=function(u){var h=gr(u),g=h==el?u.constructor:B,x=g?ic(g):"";if(x)switch(x){case ES:return Uc;case l0:return $o;case DS:return Nm;case AS:return so;case xe:return oo}return h});var V0=eg?Fa:So;function au(u){var h=u&&u.constructor;return u===("function"==typeof h&&h.prototype||Ku)}function Bg(u){return u==u&&!vi(u)}function dl(u,h){return function(g){return null!=g&&g[u]===h&&(h!==B||u in Jn(g))}}function z0(u,h,g){return h=Si(h===B?u.length-1:h,0),function(){for(var x=arguments,S=-1,T=Si(x.length-h,0),U=te(T);++S<T;)U[S]=x[h+S];S=-1;for(var z=te(h+1);++S<h;)z[S]=x[S];return z[h]=g(U),Dr(u,this,z)}}function os(u,h){return h.length<2?u:ql(u,bo(h,0,-1))}function ea(u,h){for(var g=u.length,x=Ei(h.length,g),S=is(u);x--;){var T=h[x];u[x]=ss(T,g)?S[T]:B}return u}function Ug(u,h){if(("constructor"!==h||"function"!=typeof u[h])&&"__proto__"!=h)return u[h]}var H0=W0(zS),gd=MS||function(u,h){return Ji.setTimeout(u,h)},Vg=W0(bP);function G0(u,h,g){var x=h+"";return Vg(u,function wf(u,h){var g=h.length;if(!g)return u;var x=g-1;return h[x]=(g>1?"& ":"")+h[x],h=h.join(g>2?", ":" "),u.replace(iS,"{\n/* [wrapped with "+h+"] */\n")}(x,function tE(u,h){return es(Cy,function(g){var x="_."+g[0];h&g[1]&&!Uh(u,x)&&u.push(x)}),u.sort()}(function N0(u){var h=u.match(Wi);return h?h[1].split(Vc):[]}(x),g)))}function W0(u){var h=0,g=0;return function(){var x=Es(),S=16-(x-g);if(g=x,S>0){if(++h>=800)return arguments[0]}else h=0;return u.apply(B,arguments)}}function _d(u,h){var g=-1,x=u.length,S=x-1;for(h=h===B?x:h;++g<h;){var T=ud(g,S),U=u[T];u[T]=u[g],u[g]=U}return u.length=h,u}var $0=function KS(u){var h=Lf(u,function(x){return 500===g.size&&g.clear(),x}),g=h.cache;return h}(function(u){var h=[];return 46===u.charCodeAt(0)&&h.push(""),u.replace(tS,function(g,x,S,T){h.push(S?T.replace(rS,"$1"):x||g)}),h});function ta(u){if("string"==typeof u||qs(u))return u;var h=u+"";return"0"==h&&1/u==-vn?"-0":h}function ic(u){if(null!=u){try{return tg.call(u)}catch{}try{return u+""}catch{}}return""}function nE(u){if(u instanceof nn)return u.clone();var h=new Di(u.__wrapped__,u.__chain__);return h.__actions__=is(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}var na=Kt(function(u,h){return Ai(u)?Ia(u,ir(h,1,Ai,!0)):[]}),yd=Kt(function(u,h){var g=as(h);return Ai(g)&&(g=B),Ai(u)?Ia(u,ir(h,1,Ai,!0),yt(g,2)):[]}),q0=Kt(function(u,h){var g=as(h);return Ai(g)&&(g=B),Ai(u)?Ia(u,ir(h,1,Ai,!0),B,g):[]});function Mf(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=null==g?0:Xt(g);return S<0&&(S=Si(x+S,0)),Qi(u,yt(h,3),S)}function Cf(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=x-1;return g!==B&&(S=Xt(g),S=g<0?Si(x+S,0):Ei(S,x-1)),Qi(u,yt(h,3),S,!0)}function Sf(u){return null!=u&&u.length?ir(u,1):[]}function K0(u){return u&&u.length?u[0]:B}var oE=Kt(function(u){var h=zn(u,Jl);return h.length&&h[0]===u[0]?gg(h):[]}),J0=Kt(function(u){var h=as(u),g=zn(u,Jl);return h===as(g)?h=B:g.pop(),g.length&&g[0]===u[0]?gg(g,yt(h,2)):[]}),Ef=Kt(function(u){var h=as(u),g=zn(u,Jl);return(h="function"==typeof h?h:B)&&g.pop(),g.length&&g[0]===u[0]?gg(g,B,h):[]});function as(u){var h=null==u?0:u.length;return h?u[h-1]:B}var lE=Kt(eb);function eb(u,h){return u&&u.length&&h&&h.length?ol(u,h):u}var cE=rs(function(u,h){var g=null==u?0:u.length,x=rf(u,h);return Mg(u,zn(h,function(S){return ss(S,g)?+S:S}).sort(A0)),x});function zg(u){return null==u?u:SS.call(u)}var pE=Kt(function(u){return js(ir(u,1,Ai,!0))}),Wg=Kt(function(u){var h=as(u);return Ai(h)&&(h=B),js(ir(u,1,Ai,!0),yt(h,2))}),ab=Kt(function(u){var h=as(u);return h="function"==typeof h?h:B,js(ir(u,1,Ai,!0),B,h)});function xd(u){if(!u||!u.length)return[];var h=0;return u=Gs(u,function(g){if(Ai(g))return h=Si(g.length,h),!0}),Aa(h,function(g){return zn(u,Ft(g))})}function wd(u,h){if(!u||!u.length)return[];var g=xd(u);return null==h?g:zn(g,function(x){return Dr(h,B,x)})}var gE=Kt(function(u,h){return Ai(u)?Ia(u,h):[]}),$g=Kt(function(u){return hf(Gs(u,Ai))}),Af=Kt(function(u){var h=as(u);return Ai(h)&&(h=B),hf(Gs(u,Ai),yt(h,2))}),hl=Kt(function(u){var h=as(u);return h="function"==typeof h?h:B,hf(Gs(u,Ai),B,h)}),cb=Kt(xd),vE=Kt(function(u){var h=u.length,g=h>1?u[h-1]:B;return g="function"==typeof g?(u.pop(),g):B,wd(u,g)});function qg(u){var h=E(u);return h.__chain__=!0,h}function Tf(u,h){return h(u)}var yE=rs(function(u){var h=u.length,g=h?u[0]:0,x=this.__wrapped__,S=function(T){return rf(T,u)};return!(h>1||this.__actions__.length)&&x instanceof nn&&ss(g)?((x=x.slice(g,+g+(h?1:0))).__actions__.push({func:Tf,args:[S],thisArg:B}),new Di(x,this.__chain__).thru(function(T){return h&&!T.length&&T.push(B),T})):this.thru(S)}),OP=Ag(function(u,h,g){Wn.call(u,g)?++u[g]:vo(u,g,1)}),SE=ec(Mf),cu=ec(Cf);function uu(u,h){return(Nt(u)?es:Yo)(u,yt(h,3))}function ia(u,h){return(Nt(u)?Qy:_0)(u,yt(h,3))}var DE=Ag(function(u,h,g){Wn.call(u,g)?u[g].push(h):vo(u,g,[h])}),oc=Kt(function(u,h,g){var x=-1,S="function"==typeof h,T=$r(u)?te(u.length):[];return Yo(u,function(U){T[++x]=S?Dr(h,U,g):ld(U,h,g)}),T}),TE=Ag(function(u,h,g){vo(u,g,h)});function du(u,h){return(Nt(u)?zn:bg)(u,yt(h,3))}var RE=Ag(function(u,h,g){u[g?0:1].push(h)},function(){return[[],[]]}),HP=Kt(function(u,h){if(null==u)return[];var g=h.length;return g>1&&Hr(u,h[0],h[1])?h=[]:g>2&&Hr(h[0],h[1],h[2])&&(h=[h[0]]),wg(u,ir(h,1),[])}),If=sg||function(){return Ji.Date.now()};function Rf(u,h,g){return h=g?B:h,ka(u,128,B,B,B,B,h=u&&null==h?u.length:h)}function Kg(u,h){var g;if("function"!=typeof h)throw new mo(_n);return u=Xt(u),function(){return--u>0&&(g=h.apply(this,arguments)),u<=1&&(h=B),g}}var Pf=Kt(function(u,h,g){var x=1;if(g.length){var S=uo(g,su(Pf));x|=32}return ka(u,x,h,g,S)}),Jg=Kt(function(u,h,g){var x=3;if(g.length){var S=uo(g,su(Jg));x|=32}return ka(h,x,u,g,S)});function Of(u,h,g){var x,S,T,U,z,W,_e=0,ye=!1,Ce=!1,Ve=!0;if("function"!=typeof u)throw new mo(_n);function Xe(yi){var Eo=x,Do=S;return x=S=B,_e=yi,U=u.apply(Do,Eo)}function ft(yi){return _e=yi,z=gd(Jt,h),ye?Xe(yi):U}function gt(yi){var Eo=yi-W;return W===B||Eo>=h||Eo<0||Ce&&yi-_e>=T}function Jt(){var yi=If();if(gt(yi))return un(yi);z=gd(Jt,function Yt(yi){var lx=h-(yi-W);return Ce?Ei(lx,T-(yi-_e)):lx}(yi))}function un(yi){return z=B,Ve&&x?Xe(yi):(x=S=B,U)}function Bi(){var yi=If(),Eo=gt(yi);if(x=arguments,S=this,W=yi,Eo){if(z===B)return ft(W);if(Ce)return WS(z),z=gd(Jt,h),Xe(W)}return z===B&&(z=gd(Jt,h)),U}return h=Xs(h)||0,vi(g)&&(ye=!!g.leading,T=(Ce="maxWait"in g)?Si(Xs(g.maxWait)||0,h):T,Ve="trailing"in g?!!g.trailing:Ve),Bi.cancel=function jr(){z!==B&&WS(z),_e=0,x=W=S=z=B},Bi.flush=function qr(){return z===B?U:un(If())},Bi}var Oa=Kt(function(u,h){return g0(u,1,h)}),PE=Kt(function(u,h,g){return g0(u,Xs(h)||0,g)});function Lf(u,h){if("function"!=typeof u||null!=h&&"function"!=typeof h)throw new mo(_n);var g=function(){var x=arguments,S=h?h.apply(this,x):x[0],T=g.cache;if(T.has(S))return T.get(S);var U=u.apply(this,x);return g.cache=T.set(S,U)||T,U};return g.cache=new(Lf.Cache||go),g}function Md(u){if("function"!=typeof u)throw new mo(_n);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}Lf.Cache=go;var LE=GS(function(u,h){var g=(h=1==h.length&&Nt(h[0])?zn(h[0],er(yt())):zn(ir(h,1),er(yt()))).length;return Kt(function(x){for(var S=-1,T=Ei(x.length,g);++S<T;)x[S]=h[S].call(this,x[S]);return Dr(u,this,x)})}),Qg=Kt(function(u,h){var g=uo(h,su(Qg));return ka(u,32,B,h,g)}),pb=Kt(function(u,h){var g=uo(h,su(pb));return ka(u,64,B,h,g)}),e_=rs(function(u,h){return ka(u,256,B,B,B,h)});function Wr(u,h){return u===h||u!=u&&h!=h}var i_=gf(Kc),zE=gf(function(u,h){return u>=h}),ac=Jc(function(){return arguments}())?Jc:function(u){return hi(u)&&Wn.call(u,"callee")&&!rg.call(u,"callee")},Nt=te.isArray,HE=Hs?er(Hs):function _g(u){return hi(u)&&gr(u)==Rh};function $r(u){return null!=u&&r_(u.length)&&!Fa(u)}function Ai(u){return hi(u)&&$r(u)}var fl=mP||So,GE=Vn?er(Vn):function vg(u){return hi(u)&&gr(u)==Bl};function pl(u){if(!hi(u))return!1;var h=gr(u);return h==Wu||"[object DOMException]"==h||"string"==typeof u.message&&"string"==typeof u.name&&!Cd(u)}function Fa(u){if(!vi(u))return!1;var h=gr(u);return h==Fm||h==ZC||"[object AsyncFunction]"==h||"[object Proxy]"==h}function vb(u){return"number"==typeof u&&u==Xt(u)}function r_(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Sa}function vi(u){var h=typeof u;return null!=u&&("object"==h||"function"==h)}function hi(u){return null!=u&&"object"==typeof u}var XE=bS?er(bS):function BS(u){return hi(u)&&_r(u)==$o};function hu(u){return"number"==typeof u||hi(u)&&gr(u)==Th}function Cd(u){if(!hi(u)||gr(u)!=el)return!1;var h=Xh(u);if(null===h)return!0;var g=Wn.call(h,"constructor")&&h.constructor;return"function"==typeof g&&g instanceof g&&tg.call(g)==fP}var Ff=xS?er(xS):function b0(u){return hi(u)&&gr(u)==Bc},Nf=Ul?er(Ul):function x0(u){return hi(u)&&_r(u)==so};function Sd(u){return"string"==typeof u||!Nt(u)&&hi(u)&&gr(u)==Ih}function qs(u){return"symbol"==typeof u||hi(u)&&gr(u)==Bm}var wo=Cn?er(Cn):function US(u){return hi(u)&&r_(u.length)&&!!ni[gr(u)]},c_=gf(uf),JE=gf(function(u,h){return u<=h});function xb(u){if(!u)return[];if($r(u))return Sd(u)?ho(u):is(u);if(Qu&&u[Qu])return function Kn(G){for(var ce,te=[];!(ce=G.next()).done;)te.push(ce.value);return te}(u[Qu]());var h=_r(u);return(h==$o?Km:h==so?Wc:pu)(u)}function Na(u){return u?(u=Xs(u))===vn||u===-vn?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Xt(u){var h=Na(u),g=h%1;return h==h?g?h-g:h:0}function wb(u){return u?jl(Xt(u),0,Wo):0}function Xs(u){if("number"==typeof u)return u;if(qs(u))return NaN;if(vi(u)){var h="function"==typeof u.valueOf?u.valueOf():u;u=vi(h)?h+"":h}if("string"!=typeof u)return 0===u?u:+u;u=Hc(u);var g=ju.test(u);return g||zy.test(u)?Xm(u.slice(2),g?2:8):Vy.test(u)?NaN:+u}function u_(u){return Jo(u,rr(u))}function In(u){return null==u?"":Vr(u)}var h_=Qo(function(u,h){if(au(h)||$r(h))Jo(h,Ni(h),u);else for(var g in h)Wn.call(h,g)&&id(u,g,h[g])}),Mb=Qo(function(u,h){Jo(h,rr(h),u)}),Bf=Qo(function(u,h,g,x){Jo(h,rr(h),u,x)}),Cb=Qo(function(u,h,g,x){Jo(h,Ni(h),u,x)}),Sb=rs(rf),Eb=Kt(function(u,h){u=Jn(u);var g=-1,x=h.length,S=x>2?h[2]:B;for(S&&Hr(h[0],h[1],S)&&(x=1);++g<x;)for(var T=h[g],U=rr(T),z=-1,W=U.length;++z<W;){var _e=U[z],ye=u[_e];(ye===B||Wr(ye,Ku[_e])&&!Wn.call(u,_e))&&(u[_e]=T[_e])}return u}),Db=Kt(function(u){return u.push(B,ru),Dr(Ob,B,u)});function Vf(u,h,g){var x=null==u?B:ql(u,h);return x===B?g:x}function fu(u,h){return null!=u&&ZS(u,h,v0)}var Rb=Tg(function(u,h,g){null!=h&&"function"!=typeof h.toString&&(h=ng.call(h)),u[h]=g},y_(cs)),p_=Tg(function(u,h,g){null!=h&&"function"!=typeof h.toString&&(h=ng.call(h)),Wn.call(u,h)?u[h].push(g):u[h]=[g]},yt),Pb=Kt(ld);function Ni(u){return $r(u)?di(u):Yl(u)}function rr(u){return $r(u)?di(u,!0):function VS(u){if(!vi(u))return function QS(u){var h=[];if(null!=u)for(var g in Jn(u))h.push(g);return h}(u);var h=au(u),g=[];for(var x in u)"constructor"==x&&(h||!Wn.call(u,x))||g.push(x);return g}(u)}var nD=Qo(function(u,h,g){_i(u,h,g)}),Ob=Qo(function(u,h,g,x){_i(u,h,g,x)}),Lb=rs(function(u,h){var g={};if(null==u)return g;var x=!1;h=zn(h,function(T){return T=ll(T,u),x||(x=T.length>1),T}),Jo(u,Pg(u),g),x&&(g=$i(g,7,vf));for(var S=h.length;S--;)E0(g,h[S]);return g}),Fb=rs(function(u,h){return null==u?{}:function Pa(u,h){return Kl(u,h,function(g,x){return fu(u,x)})}(u,h)});function iD(u,h){if(null==u)return{};var g=zn(Pg(u),function(x){return[x]});return h=yt(h),Kl(u,g,function(x,S){return h(x,S[0])})}var Ub=ul(Ni),Vb=ul(rr);function pu(u){return null==u?[]:Gt(u,Ni(u))}var uD=nu(function(u,h,g){return h=h.toLowerCase(),u+(g?Gb(h):h)});function Gb(u){return ml(In(u).toLowerCase())}function Pt(u){return(u=In(u))&&u.replace(oS,Ar).replace(cP,"")}var dD=nu(function(u,h,g){return u+(g?"-":"")+h.toLowerCase()}),hD=nu(function(u,h,g){return u+(g?" ":"")+h.toLowerCase()}),jb=R0("toLowerCase"),Yb=nu(function(u,h,g){return u+(g?"_":"")+h.toLowerCase()}),gD=nu(function(u,h,g){return u+(g?" ":"")+ml(h)}),yD=nu(function(u,h,g){return u+(g?" ":"")+h.toUpperCase()}),ml=R0("toUpperCase");function Kb(u,h,g){return u=In(u),(h=g?B:h)===B?function t0(G){return jm.test(G)}(u)?function Wh(G){return G.match(uP)||[]}(u):function ts(G){return G.match(Bs)||[]}(u):u.match(h)||[]}var v_=Kt(function(u,h){try{return Dr(u,B,h)}catch(g){return pl(g)?g:new Vt(g)}}),Hf=rs(function(u,h){return es(h,function(g){g=ta(g),vo(u,g,Pf(u[g],u))}),u});function y_(u){return function(){return u}}var wD=P0(),MD=P0(!0);function cs(u){return u}function Gf(u){return cd("function"==typeof u?u:$i(u,1))}var ex=Kt(function(u,h){return function(g){return ld(g,u,h)}}),b_=Kt(function(u,h){return function(g){return ld(u,g,h)}});function tx(u,h,g){var x=Ni(h),S=Ra(h,x);null==g&&(!vi(h)||!S.length&&x.length)&&(g=h,h=u,u=this,S=Ra(h,Ni(h)));var T=!(vi(g)&&"chain"in g&&!g.chain),U=Fa(u);return es(S,function(z){var W=h[z];u[z]=W,U&&(u.prototype[z]=function(){var _e=this.__chain__;if(T||_e){var ye=u(this.__wrapped__),Ce=ye.__actions__=is(this.__actions__);return Ce.push({func:W,args:arguments,thisArg:u}),ye.__chain__=_e,ye}return W.apply(u,Da([this.value()],arguments))})}),u}function w_(){}var R=pd(zn),cc=pd(qo),nx=pd(Zm);function Ed(u){return Fg(u)?Ft(ta(u)):function Qc(u){return function(h){return ql(h,u)}}(u)}var ix=k0(),SD=k0(!0);function Dd(){return[]}function So(){return!1}var Wf=Hn(function(u,h){return u+h},0),$f=xo("ceil"),S_=Hn(function(u,h){return u/h},1),E_=xo("floor"),ox=Hn(function(u,h){return u*h},1),QP=xo("round"),ID=Hn(function(u,h){return u-h},0);return E.after=function hb(u,h){if("function"!=typeof h)throw new mo(_n);return u=Xt(u),function(){if(--u<1)return h.apply(this,arguments)}},E.ary=Rf,E.assign=h_,E.assignIn=Mb,E.assignInWith=Bf,E.assignWith=Cb,E.at=Sb,E.before=Kg,E.bind=Pf,E.bindAll=Hf,E.bindKey=Jg,E.castArray=function VE(){if(!arguments.length)return[];var u=arguments[0];return Nt(u)?u:[u]},E.chain=qg,E.chunk=function iE(u,h,g){h=(g?Hr(u,h,g):h===B)?1:Si(Xt(h),0);var x=null==u?0:u.length;if(!x||h<1)return[];for(var S=0,T=0,U=te(og(x/h));S<x;)U[T++]=bo(u,S,S+=h);return U},E.compact=function vd(u){for(var h=-1,g=null==u?0:u.length,x=0,S=[];++h<g;){var T=u[h];T&&(S[x++]=T)}return S},E.concat=function j0(){var u=arguments.length;if(!u)return[];for(var h=te(u-1),g=arguments[0],x=u;x--;)h[x-1]=arguments[x];return Da(Nt(g)?is(g):[g],ir(h,1))},E.cond=function bD(u){var h=null==u?0:u.length,g=yt();return u=h?zn(u,function(x){if("function"!=typeof x[1])throw new mo(_n);return[g(x[0]),x[1]]}):[],Kt(function(x){for(var S=-1;++S<h;){var T=u[S];if(Dr(T[0],this,x))return Dr(T[1],this,x)}})},E.conforms=function Jb(u){return function sd(u){var h=Ni(u);return function(g){return m0(g,u,h)}}($i(u,1))},E.constant=y_,E.countBy=OP,E.create=function lc(u,h){var g=$l(u);return null==h?g:rd(g,h)},E.curry=function kf(u,h,g){var x=ka(u,8,B,B,B,B,B,h=g?B:h);return x.placeholder=kf.placeholder,x},E.curryRight=function fb(u,h,g){var x=ka(u,16,B,B,B,B,B,h=g?B:h);return x.placeholder=fb.placeholder,x},E.debounce=Of,E.defaults=Eb,E.defaultsDeep=Db,E.defer=Oa,E.delay=PE,E.difference=na,E.differenceBy=yd,E.differenceWith=q0,E.drop=function X0(u,h,g){var x=null==u?0:u.length;return x?bo(u,(h=g||h===B?1:Xt(h))<0?0:h,x):[]},E.dropRight=function Y0(u,h,g){var x=null==u?0:u.length;return x?bo(u,0,(h=x-(h=g||h===B?1:Xt(h)))<0?0:h):[]},E.dropRightWhile=function EP(u,h){return u&&u.length?Tr(u,yt(h,3),!0,!0):[]},E.dropWhile=function DP(u,h){return u&&u.length?Tr(u,yt(h,3),!0):[]},E.fill=function AP(u,h,g,x){var S=null==u?0:u.length;return S?(g&&"number"!=typeof g&&Hr(u,h,g)&&(g=0,x=S),function _P(u,h,g,x){var S=u.length;for((g=Xt(g))<0&&(g=-g>S?0:S+g),(x=x===B||x>S?S:Xt(x))<0&&(x+=S),x=g>x?0:wb(x);g<x;)u[g++]=h;return u}(u,h,g,x)):[]},E.filter=function sc(u,h){return(Nt(u)?Gs:od)(u,yt(h,3))},E.flatMap=function Wt(u,h){return ir(du(u,h),1)},E.flatMapDeep=function EE(u,h){return ir(du(u,h),vn)},E.flatMapDepth=function LP(u,h,g){return g=g===B?1:Xt(g),ir(du(u,h),g)},E.flatten=Sf,E.flattenDeep=function TP(u){return null!=u&&u.length?ir(u,vn):[]},E.flattenDepth=function IP(u,h){return null!=u&&u.length?ir(u,h=h===B?1:Xt(h)):[]},E.flip=function kE(u){return ka(u,512)},E.flow=wD,E.flowRight=MD,E.fromPairs=function Z0(u){for(var h=-1,g=null==u?0:u.length,x={};++h<g;){var S=u[h];x[S[0]]=S[1]}return x},E.functions=function Ib(u){return null==u?[]:Ra(u,Ni(u))},E.functionsIn=function f_(u){return null==u?[]:Ra(u,rr(u))},E.groupBy=DE,E.initial=function sE(u){return null!=u&&u.length?bo(u,0,-1):[]},E.intersection=oE,E.intersectionBy=J0,E.intersectionWith=Ef,E.invert=Rb,E.invertBy=p_,E.invokeMap=oc,E.iteratee=Gf,E.keyBy=TE,E.keys=Ni,E.keysIn=rr,E.map=du,E.mapKeys=function tD(u,h){var g={};return h=yt(h,3),yo(u,function(x,S,T){vo(g,h(x,S,T),x)}),g},E.mapValues=function kb(u,h){var g={};return h=yt(h,3),yo(u,function(x,S,T){vo(g,S,h(x,S,T))}),g},E.matches=function CD(u){return Zl($i(u,1))},E.matchesProperty=function Qb(u,h){return w0(u,$i(h,1))},E.memoize=Lf,E.merge=nD,E.mergeWith=Ob,E.method=ex,E.methodOf=b_,E.mixin=tx,E.negate=Md,E.nthArg=function YP(u){return u=Xt(u),Kt(function(h){return M0(h,u)})},E.omit=Lb,E.omitBy=function m_(u,h){return iD(u,Md(yt(h)))},E.once=function OE(u){return Kg(2,u)},E.orderBy=function IE(u,h,g,x){return null==u?[]:(Nt(h)||(h=null==h?[]:[h]),Nt(g=x?B:g)||(g=null==g?[]:[g]),wg(u,h,g))},E.over=R,E.overArgs=LE,E.overEvery=cc,E.overSome=nx,E.partial=Qg,E.partialRight=pb,E.partition=RE,E.pick=Fb,E.pickBy=iD,E.property=Ed,E.propertyOf=function Co(u){return function(h){return null==u?B:ql(u,h)}},E.pull=lE,E.pullAll=eb,E.pullAllBy=function Df(u,h,g){return u&&u.length&&h&&h.length?ol(u,h,yt(g,2)):u},E.pullAllWith=function tb(u,h,g){return u&&u.length&&h&&h.length?ol(u,h,B,g):u},E.pullAt=cE,E.range=ix,E.rangeRight=SD,E.rearg=e_,E.reject=function NP(u,h){return(Nt(u)?Gs:od)(u,Md(yt(h,3)))},E.remove=function uE(u,h){var g=[];if(!u||!u.length)return g;var x=-1,S=[],T=u.length;for(h=yt(h,3);++x<T;){var U=u[x];h(U,x,u)&&(g.push(U),S.push(x))}return Mg(u,S),g},E.rest=function FE(u,h){if("function"!=typeof u)throw new mo(_n);return Kt(u,h=h===B?h:Xt(h))},E.reverse=zg,E.sampleSize=function BP(u,h,g){return h=(g?Hr(u,h,g):h===B)?1:Xt(h),(Nt(u)?FS:yP)(u,h)},E.set=function rD(u,h,g){return null==u?u:df(u,h,g)},E.setWith=function Bb(u,h,g,x){return x="function"==typeof x?x:B,null==u?u:df(u,h,g,x)},E.shuffle=function UP(u){return(Nt(u)?fg:xP)(u)},E.slice=function dE(u,h,g){var x=null==u?0:u.length;return x?(g&&"number"!=typeof g&&Hr(u,h,g)?(h=0,g=x):(h=null==h?0:Xt(h),g=g===B?x:Xt(g)),bo(u,h,g)):[]},E.sortBy=HP,E.sortedUniq=function ib(u){return u&&u.length?HS(u):[]},E.sortedUniqBy=function rb(u,h){return u&&u.length?HS(u,yt(h,2)):[]},E.split=function fi(u,h,g){return g&&"number"!=typeof g&&Hr(u,h,g)&&(h=g=B),(g=g===B?Wo:g>>>0)?(u=In(u))&&("string"==typeof h||null!=h&&!Ff(h))&&!(h=Vr(h))&&co(u)?Ql(ho(u),0,g):u.split(h,g):[]},E.spread=function NE(u,h){if("function"!=typeof u)throw new mo(_n);return h=null==h?0:Si(Xt(h),0),Kt(function(g){var x=g[h],S=Ql(g,0,h);return x&&Da(S,x),Dr(u,this,S)})},E.tail=function fE(u){var h=null==u?0:u.length;return h?bo(u,1,h):[]},E.take=function sb(u,h,g){return u&&u.length?bo(u,0,(h=g||h===B?1:Xt(h))<0?0:h):[]},E.takeRight=function ob(u,h,g){var x=null==u?0:u.length;return x?bo(u,(h=x-(h=g||h===B?1:Xt(h)))<0?0:h,x):[]},E.takeRightWhile=function Gg(u,h){return u&&u.length?Tr(u,yt(h,3),!1,!0):[]},E.takeWhile=function kP(u,h){return u&&u.length?Tr(u,yt(h,3)):[]},E.tap=function lu(u,h){return h(u),u},E.throttle=function BE(u,h,g){var x=!0,S=!0;if("function"!=typeof u)throw new mo(_n);return vi(g)&&(x="leading"in g?!!g.leading:x,S="trailing"in g?!!g.trailing:S),Of(u,h,{leading:x,maxWait:h,trailing:S})},E.thru=Tf,E.toArray=xb,E.toPairs=Ub,E.toPairsIn=Vb,E.toPath=function sx(u){return Nt(u)?zn(u,ta):qs(u)?[u]:is($0(In(u)))},E.toPlainObject=u_,E.transform=function Mo(u,h,g){var x=Nt(u),S=x||fl(u)||wo(u);if(h=yt(h,4),null==g){var T=u&&u.constructor;g=S?x?new T:[]:vi(u)&&Fa(T)?$l(Xh(u)):{}}return(S?es:yo)(u,function(U,z,W){return h(g,U,z,W)}),g},E.unary=function mb(u){return Rf(u,1)},E.union=pE,E.unionBy=Wg,E.unionWith=ab,E.uniq=function lb(u){return u&&u.length?js(u):[]},E.uniqBy=function rc(u,h){return u&&u.length?js(u,yt(h,2)):[]},E.uniqWith=function mE(u,h){return h="function"==typeof h?h:B,u&&u.length?js(u,B,h):[]},E.unset=function sD(u,h){return null==u||E0(u,h)},E.unzip=xd,E.unzipWith=wd,E.update=function zb(u,h,g){return null==u?u:D0(u,h,ff(g))},E.updateWith=function oD(u,h,g,x){return x="function"==typeof x?x:B,null==u?u:D0(u,h,ff(g),x)},E.values=pu,E.valuesIn=function aD(u){return null==u?[]:Gt(u,rr(u))},E.without=gE,E.words=Kb,E.wrap=function UE(u,h){return Qg(ff(h),u)},E.xor=$g,E.xorBy=Af,E.xorWith=hl,E.zip=cb,E.zipObject=function jg(u,h){return dd(u||[],h||[],id)},E.zipObjectDeep=function _E(u,h){return dd(u||[],h||[],df)},E.zipWith=vE,E.entries=Ub,E.entriesIn=Vb,E.extend=Mb,E.extendWith=Bf,tx(E,E),E.add=Wf,E.attempt=v_,E.camelCase=uD,E.capitalize=Gb,E.ceil=$f,E.clamp=function lD(u,h,g){return g===B&&(g=h,h=B),g!==B&&(g=(g=Xs(g))==g?g:0),h!==B&&(h=(h=Xs(h))==h?h:0),jl(Xs(u),h,g)},E.clone=function Gr(u){return $i(u,4)},E.cloneDeep=function gb(u){return $i(u,5)},E.cloneDeepWith=function n_(u,h){return $i(u,5,h="function"==typeof h?h:B)},E.cloneWith=function t_(u,h){return $i(u,4,h="function"==typeof h?h:B)},E.conformsTo=function Ir(u,h){return null==h||m0(u,h,Ni(h))},E.deburr=Pt,E.defaultTo=function xD(u,h){return null==u||u!=u?h:u},E.divide=S_,E.endsWith=function re(u,h,g){u=In(u),h=Vr(h);var x=u.length,S=g=g===B?x:jl(Xt(g),0,x);return(g-=h.length)>=0&&u.slice(g,S)==h},E.eq=Wr,E.escape=function Wb(u){return(u=In(u))&&Fy.test(u)?u.replace(Vm,Yu):u},E.escapeRegExp=function $b(u){return(u=In(u))&&nS.test(u)?u.replace(kh,"\\$&"):u},E.every=function CE(u,h,g){var x=Nt(u)?qo:NS;return g&&Hr(u,h,g)&&(h=B),x(u,yt(h,3))},E.find=SE,E.findIndex=Mf,E.findKey=function QE(u,h){return On(u,yt(h,3),yo)},E.findLast=cu,E.findLastIndex=Cf,E.findLastKey=function GP(u,h){return On(u,yt(h,3),af)},E.floor=E_,E.forEach=uu,E.forEachRight=ia,E.forIn=function Uf(u,h){return null==u?u:sf(u,yt(h,3),rr)},E.forInRight=function eD(u,h){return null==u?u:ad(u,yt(h,3),rr)},E.forOwn=function Ab(u,h){return u&&yo(u,yt(h,3))},E.forOwnRight=function Tb(u,h){return u&&af(u,yt(h,3))},E.get=Vf,E.gt=i_,E.gte=zE,E.has=function zf(u,h){return null!=u&&ZS(u,h,vP)},E.hasIn=fu,E.head=K0,E.identity=cs,E.includes=function AE(u,h,g,x){u=$r(u)?u:pu(u),g=g&&!x?Xt(g):0;var S=u.length;return g<0&&(g=Si(S+g,0)),Sd(u)?g<=S&&u.indexOf(h,g)>-1:!!S&&Oi(u,h,g)>-1},E.indexOf=function rE(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=null==g?0:Xt(g);return S<0&&(S=Si(x+S,0)),Oi(u,h,S)},E.inRange=function Hb(u,h,g){return h=Na(h),g===B?(g=h,h=0):g=Na(g),function y0(u,h,g){return u>=Ei(h,g)&&u<Si(h,g)}(u=Xs(u),h,g)},E.invoke=Pb,E.isArguments=ac,E.isArray=Nt,E.isArrayBuffer=HE,E.isArrayLike=$r,E.isArrayLikeObject=Ai,E.isBoolean=function _b(u){return!0===u||!1===u||hi(u)&&gr(u)==Je},E.isBuffer=fl,E.isDate=GE,E.isElement=function WE(u){return hi(u)&&1===u.nodeType&&!Cd(u)},E.isEmpty=function $E(u){if(null==u)return!0;if($r(u)&&(Nt(u)||"string"==typeof u||"function"==typeof u.splice||fl(u)||wo(u)||ac(u)))return!u.length;var h=_r(u);if(h==$o||h==so)return!u.size;if(au(u))return!Yl(u).length;for(var g in u)if(Wn.call(u,g))return!1;return!0},E.isEqual=function jE(u,h){return sl(u,h)},E.isEqualWith=function qE(u,h,g){var x=(g="function"==typeof g?g:B)?g(u,h):B;return x===B?sl(u,h,B,g):!!x},E.isError=pl,E.isFinite=function La(u){return"number"==typeof u&&ed(u)},E.isFunction=Fa,E.isInteger=vb,E.isLength=r_,E.isMap=XE,E.isMatch=function ls(u,h){return u===h||cf(u,h,kg(h))},E.isMatchWith=function s_(u,h,g){return g="function"==typeof g?g:B,cf(u,h,kg(h),g)},E.isNaN=function o_(u){return hu(u)&&u!=+u},E.isNative=function YE(u){if(V0(u))throw new Vt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yg(u)},E.isNil=function ZE(u){return null==u},E.isNull=function yb(u){return null===u},E.isNumber=hu,E.isObject=vi,E.isObjectLike=hi,E.isPlainObject=Cd,E.isRegExp=Ff,E.isSafeInteger=function a_(u){return vb(u)&&u>=-Sa&&u<=Sa},E.isSet=Nf,E.isString=Sd,E.isSymbol=qs,E.isTypedArray=wo,E.isUndefined=function l_(u){return u===B},E.isWeakMap=function bb(u){return hi(u)&&_r(u)==oo},E.isWeakSet=function KE(u){return hi(u)&&"[object WeakSet]"==gr(u)},E.join=function Q0(u,h){return null==u?"":Ws.call(u,h)},E.kebabCase=dD,E.last=as,E.lastIndexOf=function aE(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=x;return g!==B&&(S=(S=Xt(g))<0?Si(x+S,0):Ei(S,x-1)),h==h?function Gl(G,ce,te){for(var Ye=te+1;Ye--;)if(G[Ye]===ce)return Ye;return Ye}(u,h,S):Qi(u,Ss,S,!0)},E.lowerCase=hD,E.lowerFirst=jb,E.lt=c_,E.lte=JE,E.max=function D_(u){return u&&u.length?mg(u,cs,Kc):B},E.maxBy=function JP(u,h){return u&&u.length?mg(u,yt(h,2),Kc):B},E.mean=function ED(u){return Ue(u,cs)},E.meanBy=function DD(u,h){return Ue(u,yt(h,2))},E.min=function AD(u){return u&&u.length?mg(u,cs,uf):B},E.minBy=function TD(u,h){return u&&u.length?mg(u,yt(h,2),uf):B},E.stubArray=Dd,E.stubFalse=So,E.stubObject=function M_(){return{}},E.stubString=function rx(){return""},E.stubTrue=function C_(){return!0},E.multiply=ox,E.nth=function Tn(u,h){return u&&u.length?M0(u,Xt(h)):B},E.noConflict=function x_(){return Ji._===this&&(Ji._=pP),this},E.noop=w_,E.now=If,E.pad=function fD(u,h,g){u=In(u);var x=(h=Xt(h))?Ci(u):0;if(!h||x>=h)return u;var S=(h-x)/2;return cl(ui(S),g)+u+cl(og(S),g)},E.padEnd=function qb(u,h,g){u=In(u);var x=(h=Xt(h))?Ci(u):0;return h&&x<h?u+cl(h-x,g):u},E.padStart=function pD(u,h,g){u=In(u);var x=(h=Xt(h))?Ci(u):0;return h&&x<h?cl(h-x,g)+u:u},E.parseInt=function mD(u,h,g){return g||null==h?h=0:h&&(h=+h),a0(In(u).replace(zm,""),h||0)},E.random=function cD(u,h,g){if(g&&"boolean"!=typeof g&&Hr(u,h,g)&&(h=g=B),g===B&&("boolean"==typeof h?(g=h,h=B):"boolean"==typeof u&&(g=u,u=B)),u===B&&h===B?(u=0,h=1):(u=Na(u),h===B?(h=u,u=0):h=Na(h)),u>h){var x=u;u=h,h=x}if(g||u%1||h%1){var S=td();return Ei(u+S*(h-u+mt("1e-"+((S+"").length-1))),h)}return ud(u,h)},E.reduce=function Yg(u,h,g){var x=Nt(u)?Vh:ns,S=arguments.length<3;return x(u,yt(h,4),g,S,Yo)},E.reduceRight=function FP(u,h,g){var x=Nt(u)?Ut:ns,S=arguments.length<3;return x(u,yt(h,4),g,S,_0)},E.repeat=function WP(u,h,g){return h=(g?Hr(u,h,g):h===B)?1:Xt(h),C0(In(u),h)},E.replace=function Xb(){var u=arguments,h=In(u[0]);return u.length<3?h:h.replace(u[1],u[2])},E.result=function Nb(u,h,g){var x=-1,S=(h=ll(h,u)).length;for(S||(S=1,u=B);++x<S;){var T=null==u?B:u[ta(h[x])];T===B&&(x=S,T=g),u=Fa(T)?T.call(u):T}return u},E.round=QP,E.runInContext=G,E.sample=function Zg(u){return(Nt(u)?_o:Se)(u)},E.size=function VP(u){if(null==u)return 0;if($r(u))return Sd(u)?Ci(u):u.length;var h=_r(u);return h==$o||h==so?u.size:Yl(u).length},E.snakeCase=Yb,E.some=function zP(u,h,g){var x=Nt(u)?Zm:wP;return g&&Hr(u,h,g)&&(h=B),x(u,yt(h,3))},E.sortedIndex=function hE(u,h){return al(u,h)},E.sortedIndexBy=function RP(u,h,g){return S0(u,h,yt(g,2))},E.sortedIndexOf=function PP(u,h){var g=null==u?0:u.length;if(g){var x=al(u,h);if(x<g&&Wr(u[x],h))return x}return-1},E.sortedLastIndex=function bd(u,h){return al(u,h,!0)},E.sortedLastIndexBy=function Hg(u,h,g){return S0(u,h,yt(g,2),!0)},E.sortedLastIndexOf=function nb(u,h){if(null!=u&&u.length){var x=al(u,h,!0)-1;if(Wr(u[x],h))return x}return-1},E.startCase=gD,E.startsWith=function g_(u,h,g){return u=In(u),g=null==g?0:jl(Xt(g),0,u.length),h=Vr(h),u.slice(g,g+h.length)==h},E.subtract=ID,E.sum=function ek(u){return u&&u.length?Li(u,cs):0},E.sumBy=function ax(u,h){return u&&u.length?Li(u,yt(h,2)):0},E.template=function __(u,h,g){var x=E.templateSettings;g&&Hr(u,h,g)&&(h=B),u=In(u),h=Bf({},h,x,Ig);var z,W,S=Bf({},h.imports,x.imports,Ig),T=Ni(S),U=Gt(S,T),_e=0,ye=h.interpolate||Lh,Ce="__p += '",Ve=r0((h.escape||Lh).source+"|"+ye.source+"|"+(ye===By?Uy:Lh).source+"|"+(h.evaluate||Lh).source+"|$","g"),Xe="//# sourceURL="+(Wn.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++_S+"]")+"\n";u.replace(Ve,function(gt,Jt,un,jr,qr,Bi){return un||(un=jr),Ce+=u.slice(_e,Bi).replace(aS,Gc),Jt&&(z=!0,Ce+="' +\n__e("+Jt+") +\n'"),qr&&(W=!0,Ce+="';\n"+qr+";\n__p += '"),un&&(Ce+="' +\n((__t = ("+un+")) == null ? '' : __t) +\n'"),_e=Bi+gt.length,gt}),Ce+="';\n";var ft=Wn.call(h,"variable")&&h.variable;if(ft){if(iP.test(ft))throw new Vt("Invalid `variable` option passed into `_.template`")}else Ce="with (obj) {\n"+Ce+"\n}\n";Ce=(W?Ce.replace(Ry,""):Ce).replace(Py,"$1").replace(ky,"$1;"),Ce="function("+(ft||"obj")+") {\n"+(ft?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(z?", __e = _.escape":"")+(W?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ce+"return __p\n}";var Yt=v_(function(){return Ln(T,Xe+"return "+Ce).apply(B,U)});if(Yt.source=Ce,pl(Yt))throw Yt;return Yt},E.times=function ZP(u,h){if((u=Xt(u))<1||u>Sa)return[];var g=Wo,x=Ei(u,Wo);h=yt(h),u-=Wo;for(var S=Aa(x,h);++g<u;)h(g);return S},E.toFinite=Na,E.toInteger=Xt,E.toLength=wb,E.toLower=function _D(u){return In(u).toLowerCase()},E.toNumber=Xs,E.toSafeInteger=function d_(u){return u?jl(Xt(u),-Sa,Sa):0===u?u:0},E.toString=In,E.toUpper=function $P(u){return In(u).toUpperCase()},E.trim=function jP(u,h,g){if((u=In(u))&&(g||h===B))return Hc(u);if(!u||!(h=Vr(h)))return u;var x=ho(u),S=ho(h);return Ql(x,zl(x,S),zh(x,S)+1).join("")},E.trimEnd=function qP(u,h,g){if((u=In(u))&&(g||h===B))return u.slice(0,Nr(u)+1);if(!u||!(h=Vr(h)))return u;var x=ho(u);return Ql(x,0,zh(x,ho(h))+1).join("")},E.trimStart=function vD(u,h,g){if((u=In(u))&&(g||h===B))return u.replace(zm,"");if(!u||!(h=Vr(h)))return u;var x=ho(u);return Ql(x,zl(x,ho(h))).join("")},E.truncate=function Zb(u,h){var g=30,x="...";if(vi(h)){var S="separator"in h?h.separator:S;g="length"in h?Xt(h.length):g,x="omission"in h?Vr(h.omission):x}var T=(u=In(u)).length;if(co(u)){var U=ho(u);T=U.length}if(g>=T)return u;var z=g-Ci(x);if(z<1)return x;var W=U?Ql(U,0,z).join(""):u.slice(0,z);if(S===B)return W+x;if(U&&(z+=W.length-z),Ff(S)){if(u.slice(z).search(S)){var _e,ye=W;for(S.global||(S=r0(S.source,In(Oh.exec(S))+"g")),S.lastIndex=0;_e=S.exec(ye);)var Ce=_e.index;W=W.slice(0,Ce===B?z:Ce)}}else if(u.indexOf(Vr(S),z)!=z){var Ve=W.lastIndexOf(S);Ve>-1&&(W=W.slice(0,Ve))}return W+x},E.unescape=function XP(u){return(u=In(u))&&Ly.test(u)?u.replace(Oy,fo):u},E.uniqueId=function KP(u){var h=++s0;return In(u)+h},E.upperCase=yD,E.upperFirst=ml,E.each=uu,E.eachRight=ia,E.first=K0,tx(E,function(){var u={};return yo(E,function(h,g){Wn.call(E.prototype,g)||(u[g]=h)}),u}(),{chain:!1}),E.VERSION="4.17.21",es(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){E[u].placeholder=E}),es(["drop","take"],function(u,h){nn.prototype[u]=function(g){g=g===B?1:Si(Xt(g),0);var x=this.__filtered__&&!h?new nn(this):this.clone();return x.__filtered__?x.__takeCount__=Ei(g,x.__takeCount__):x.__views__.push({size:Ei(g,Wo),type:u+(x.__dir__<0?"Right":"")}),x},nn.prototype[u+"Right"]=function(g){return this.reverse()[u](g).reverse()}}),es(["filter","map","takeWhile"],function(u,h){var g=h+1,x=1==g||3==g;nn.prototype[u]=function(S){var T=this.clone();return T.__iteratees__.push({iteratee:yt(S,3),type:g}),T.__filtered__=T.__filtered__||x,T}}),es(["head","last"],function(u,h){var g="take"+(h?"Right":"");nn.prototype[u]=function(){return this[g](1).value()[0]}}),es(["initial","tail"],function(u,h){var g="drop"+(h?"":"Right");nn.prototype[u]=function(){return this.__filtered__?new nn(this):this[g](1)}}),nn.prototype.compact=function(){return this.filter(cs)},nn.prototype.find=function(u){return this.filter(u).head()},nn.prototype.findLast=function(u){return this.reverse().find(u)},nn.prototype.invokeMap=Kt(function(u,h){return"function"==typeof u?new nn(this):this.map(function(g){return ld(g,u,h)})}),nn.prototype.reject=function(u){return this.filter(Md(yt(u)))},nn.prototype.slice=function(u,h){u=Xt(u);var g=this;return g.__filtered__&&(u>0||h<0)?new nn(g):(u<0?g=g.takeRight(-u):u&&(g=g.drop(u)),h!==B&&(g=(h=Xt(h))<0?g.dropRight(-h):g.take(h-u)),g)},nn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},nn.prototype.toArray=function(){return this.take(Wo)},yo(nn.prototype,function(u,h){var g=/^(?:filter|find|map|reject)|While$/.test(h),x=/^(?:head|last)$/.test(h),S=E[x?"take"+("last"==h?"Right":""):h],T=x||/^find/.test(h);!S||(E.prototype[h]=function(){var U=this.__wrapped__,z=x?[1]:arguments,W=U instanceof nn,_e=z[0],ye=W||Nt(U),Ce=function(Jt){var un=S.apply(E,Da([Jt],z));return x&&Ve?un[0]:un};ye&&g&&"function"==typeof _e&&1!=_e.length&&(W=ye=!1);var Ve=this.__chain__,Xe=!!this.__actions__.length,ft=T&&!Ve,Yt=W&&!Xe;if(!T&&ye){U=Yt?U:new nn(this);var gt=u.apply(U,z);return gt.__actions__.push({func:Tf,args:[Ce],thisArg:B}),new Di(gt,Ve)}return ft&&Yt?u.apply(this,z):(gt=this.thru(Ce),ft?x?gt.value()[0]:gt.value():gt)})}),es(["pop","push","shift","sort","splice","unshift"],function(u){var h=Qm[u],g=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",x=/^(?:pop|shift)$/.test(u);E.prototype[u]=function(){var S=arguments;if(x&&!this.__chain__){var T=this.value();return h.apply(Nt(T)?T:[],S)}return this[g](function(U){return h.apply(Nt(U)?U:[],S)})}}),yo(nn.prototype,function(u,h){var g=E[h];if(g){var x=g.name+"";Wn.call(Xc,x)||(Xc[x]=[]),Xc[x].push({name:h,func:g})}}),Xc[j(B,2).name]=[{name:"wrapper",func:B}],nn.prototype.clone=function lg(){var u=new nn(this.__wrapped__);return u.__actions__=is(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=is(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=is(this.__views__),u},nn.prototype.reverse=function gP(){if(this.__filtered__){var u=new nn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},nn.prototype.value=function TS(){var u=this.__wrapped__.value(),h=this.__dir__,g=Nt(u),x=h<0,S=g?u.length:0,T=function CP(u,h,g){for(var x=-1,S=g.length;++x<S;){var T=g[x],U=T.size;switch(T.type){case"drop":u+=U;break;case"dropRight":h-=U;break;case"take":h=Ei(h,u+U);break;case"takeRight":u=Si(u,h-U)}}return{start:u,end:h}}(0,S,this.__views__),U=T.start,z=T.end,W=z-U,_e=x?z:U-1,ye=this.__iteratees__,Ce=ye.length,Ve=0,Xe=Ei(W,this.__takeCount__);if(!g||!x&&S==W&&Xe==W)return Ko(u,this.__actions__);var ft=[];e:for(;W--&&Ve<Xe;){for(var Yt=-1,gt=u[_e+=h];++Yt<Ce;){var Jt=ye[Yt],jr=Jt.type,qr=(0,Jt.iteratee)(gt);if(2==jr)gt=qr;else if(!qr){if(1==jr)continue e;break e}}ft[Ve++]=gt}return ft},E.prototype.at=yE,E.prototype.chain=function bE(){return qg(this)},E.prototype.commit=function xE(){return new Di(this.value(),this.__chain__)},E.prototype.next=function Xg(){this.__values__===B&&(this.__values__=xb(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?B:this.__values__[this.__index__++]}},E.prototype.plant=function ub(u){for(var h,g=this;g instanceof nl;){var x=nE(g);x.__index__=0,x.__values__=B,h?S.__wrapped__=x:h=x;var S=x;g=g.__wrapped__}return S.__wrapped__=u,h},E.prototype.reverse=function ME(){var u=this.__wrapped__;if(u instanceof nn){var h=u;return this.__actions__.length&&(h=new nn(this)),(h=h.reverse()).__actions__.push({func:Tf,args:[zg],thisArg:B}),new Di(h,this.__chain__)}return this.thru(zg)},E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=function db(){return Ko(this.__wrapped__,this.__actions__)},E.prototype.first=E.prototype.head,Qu&&(E.prototype[Qu]=function wE(){return this}),E}();Ji._=$h,(Ht=function(){return $h}.call(ys,Or,ys,io))!==B&&(io.exports=Ht)}.call(this)},738:function(io){var ys;io.exports=((ys=function(){function Or(oi){return Er.appendChild(oi.dom),oi}function Ht(oi){for(var ai=0;ai<Er.children.length;ai++)Er.children[ai].style.display=ai===oi?"block":"none";B=oi}var B=0,Er=document.createElement("div");Er.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",Er.addEventListener("click",function(oi){oi.preventDefault(),Ht(++B%Er.children.length)},!1);var Lr=(performance||Date).now(),Zt=Lr,_n=0,Ka=Or(new ys.Panel("FPS","#0ff","#002")),wa=Or(new ys.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var bs=Or(new ys.Panel("MB","#f08","#201"));return Ht(0),{REVISION:16,dom:Er,addPanel:Or,showPanel:Ht,begin:function(){Lr=(performance||Date).now()},end:function(){_n++;var oi=(performance||Date).now();if(wa.update(oi-Lr,200),oi>Zt+1e3&&(Ka.update(1e3*_n/(oi-Zt),100),Zt=oi,_n=0,bs)){var ai=performance.memory;bs.update(ai.usedJSHeapSize/1048576,ai.jsHeapSizeLimit/1048576)}return oi},update:function(){Lr=this.end()},domElement:Er,setMode:Ht}}).Panel=function(Or,Ht,B){var Er=1/0,Lr=0,Zt=Math.round,_n=Zt(window.devicePixelRatio||1),Ka=80*_n,wa=48*_n,bs=3*_n,oi=2*_n,ai=3*_n,Jr=15*_n,xs=74*_n,ws=30*_n,ro=document.createElement("canvas");ro.width=Ka,ro.height=wa,ro.style.cssText="width:80px;height:48px";var fn=ro.getContext("2d");return fn.font="bold "+9*_n+"px Helvetica,Arial,sans-serif",fn.textBaseline="top",fn.fillStyle=B,fn.fillRect(0,0,Ka,wa),fn.fillStyle=Ht,fn.fillText(Or,bs,oi),fn.fillRect(ai,Jr,xs,ws),fn.fillStyle=B,fn.globalAlpha=.9,fn.fillRect(ai,Jr,xs,ws),{dom:ro,update:function(Ki,Nl){Er=Math.min(Er,Ki),Lr=Math.max(Lr,Ki),fn.fillStyle=B,fn.globalAlpha=1,fn.fillRect(0,0,Ka,Jr),fn.fillStyle=Ht,fn.fillText(Zt(Ki)+" "+Or+" ("+Zt(Er)+"-"+Zt(Lr)+")",bs,oi),fn.drawImage(ro,ai+_n,Jr,xs-_n,ws,ai,Jr,xs-_n,ws),fn.fillRect(ai+xs-_n,Jr,_n,ws),fn.fillStyle=B,fn.globalAlpha=.9,fn.fillRect(ai+xs-_n,Jr,_n,Zt((1-Ki/Nl)*ws))}}},ys)}},io=>{io(io.s=84)}]);