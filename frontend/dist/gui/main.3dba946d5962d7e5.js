(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{36:(zo,Ws,_s)=>{"use strict";function dn(i){return"function"==typeof i}function z(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Br=z(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function Qr(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class Qt{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(dn(n))try{n()}catch(s){t=s instanceof Br?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{qa(s)}catch(o){t=t??[],o instanceof Br?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Br(t)}}add(t){var e;if(t&&t!==this)if(this.closed)qa(t);else{if(t instanceof Qt){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&Qr(e,t)}remove(t){const{_finalizers:e}=this;e&&Qr(e,t),t instanceof Qt&&t._removeParent(this)}}Qt.EMPTY=(()=>{const i=new Qt;return i.closed=!0,i})();const Vn=Qt.EMPTY;function Fl(i){return i instanceof Qt||i&&"closed"in i&&dn(i.remove)&&dn(i.add)&&dn(i.unsubscribe)}function qa(i){dn(i)?i():i.unsubscribe()}const js={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Ci={setTimeout(i,t,...e){const{delegate:n}=Ci;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=Ci;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function Si(i){Ci.setTimeout(()=>{const{onUnhandledError:t}=js;if(!t)throw i;t(i)})}function vs(){}const Ys=On("C",void 0,void 0);function On(i,t,e){return{kind:i,value:t,error:e}}let ur=null;function _c(i){if(js.useDeprecatedSynchronousErrorHandling){const t=!ur;if(t&&(ur={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=ur;if(ur=null,e)throw n}}else i()}class Ll extends Qt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Fl(t)&&t.add(this)):this.destination=EE}static create(t,e,n){return new ga(t,e,n)}next(t){this.isStopped?Kg(function Ho(i){return On("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?Kg(function qs(i){return On("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Kg(Ys,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ma=Function.prototype.bind;function Nl(i,t){return ma.call(i,t)}class Xa{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){vd(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){vd(n)}else vd(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){vd(e)}}}class ga extends Ll{constructor(t,e,n){let r;if(super(),dn(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&js.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&Nl(t.next,s),error:t.error&&Nl(t.error,s),complete:t.complete&&Nl(t.complete,s)}):r=t}this.destination=new Xa(r)}}function vd(i){js.useDeprecatedSynchronousErrorHandling?function pa(i){js.useDeprecatedSynchronousErrorHandling&&ur&&(ur.errorThrown=!0,ur.error=i)}(i):Si(i)}function Kg(i,t){const{onStoppedNotification:e}=js;e&&Ci.setTimeout(()=>e(i,t))}const EE={closed:!0,next:vs,error:function SE(i){throw i},complete:vs},Zg="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ka(i){return i}function c0(i){return 0===i.length?Ka:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let In=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function Lf(i){return i&&i instanceof Ll||function DE(i){return i&&dn(i.next)&&dn(i.error)&&dn(i.complete)}(i)&&Fl(i)}(e)?e:new ga(e,n,r);return _c(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=Za(n))((r,s)=>{const o=new ga({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[Zg](){return this}pipe(...e){return c0(e)(this)}toPromise(e){return new(e=Za(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function Za(i){var t;return null!==(t=i??js.Promise)&&void 0!==t?t:Promise}const _a=z(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Re=(()=>{class i extends In{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new d0(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new _a}next(e){_c(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){_c(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){_c(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?Vn:(this.currentObservers=null,s.push(e),new Qt(()=>{this.currentObservers=null,Qr(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new In;return e.source=this,e}}return i.create=(t,e)=>new d0(t,e),i})();class d0 extends Re{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:Vn}}function u0(i){return dn(i?.lift)}function ni(i){return t=>{if(u0(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Xn(i,t,e,n,r){return new TE(i,t,e,n,r)}class TE extends Ll{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function rt(i,t){return ni((e,n)=>{let r=0;e.subscribe(Xn(n,s=>{n.next(i.call(t,s,r++))}))})}function va(i){return this instanceof va?(this.v=i,this):new va(i)}function Vf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function Qg(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const r_=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function s_(i){return dn(i?.then)}function g0(i){return dn(i[Zg])}function _0(i){return Symbol.asyncIterator&&dn(i?.[Symbol.asyncIterator])}function v0(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const y0=function o_(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function zf(i){return dn(i?.[y0])}function b0(i){return function Uf(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(m){return function(g){return Promise.resolve(g).then(m,h)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(m,g){n[m]&&(r[m]=function(b){return new Promise(function(v,y){s.push([m,b,v,y])>1||l(m,b)})},g&&(r[m]=g(r[m])))}function l(m,g){try{!function c(m){m.value instanceof va?Promise.resolve(m.value.v).then(d,h):p(s[0][2],m)}(n[m](g))}catch(b){p(s[0][3],b)}}function d(m){l("next",m)}function h(m){l("throw",m)}function p(m,g){m(g),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield va(e.read());if(r)return yield va(void 0);yield yield va(n)}}finally{e.releaseLock()}})}function x0(i){return dn(i?.getReader)}function Mr(i){if(i instanceof In)return i;if(null!=i){if(g0(i))return function UE(i){return new In(t=>{const e=i[Zg]();if(dn(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(r_(i))return function VE(i){return new In(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(s_(i))return function zE(i){return new In(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Si)})}(i);if(_0(i))return w0(i);if(zf(i))return function HE(i){return new In(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(x0(i))return function M0(i){return w0(b0(i))}(i)}throw v0(i)}function w0(i){return new In(t=>{(function $E(i,t){var e,n,r,s;return function bd(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=Vf(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function Ja(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function ir(i,t,e=1/0){return dn(t)?ir((n,r)=>rt((s,o)=>t(n,s,r,o))(Mr(i(n,r))),e):("number"==typeof t&&(e=t),ni((n,r)=>function GE(i,t,e,n,r,s,o,a){const l=[];let c=0,d=0,h=!1;const p=()=>{h&&!l.length&&!c&&t.complete()},m=b=>c<n?g(b):l.push(b),g=b=>{s&&t.next(b),c++;let v=!1;Mr(e(b,d++)).subscribe(Xn(t,y=>{r?.(y),s?m(y):t.next(y)},()=>{v=!0},void 0,()=>{if(v)try{for(c--;l.length&&c<n;){const y=l.shift();o?Ja(t,o,()=>g(y)):g(y)}p()}catch(y){t.error(y)}}))};return i.subscribe(Xn(t,m,()=>{h=!0,p()})),()=>{a?.()}}(n,r,i,e)))}function Md(i=1/0){return ir(Ka,i)}const bo=new In(i=>i.complete());function Hu(i){return i&&dn(i.schedule)}function l_(i){return i[i.length-1]}function C0(i){return dn(l_(i))?i.pop():void 0}function $u(i){return Hu(l_(i))?i.pop():void 0}function c_(i,t=0){return ni((e,n)=>{e.subscribe(Xn(n,r=>Ja(n,i,()=>n.next(r),t),()=>Ja(n,i,()=>n.complete(),t),r=>Ja(n,i,()=>n.error(r),t)))})}function d_(i,t=0){return ni((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function u_(i,t){if(!i)throw new Error("Iterable cannot be null");return new In(e=>{Ja(e,t,()=>{const n=i[Symbol.asyncIterator]();Ja(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Ni(i,t){return t?function A0(i,t){if(null!=i){if(g0(i))return function jE(i,t){return Mr(i).pipe(d_(t),c_(t))}(i,t);if(r_(i))return function qE(i,t){return new In(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(s_(i))return function YE(i,t){return Mr(i).pipe(d_(t),c_(t))}(i,t);if(_0(i))return u_(i,t);if(zf(i))return function XE(i,t){return new In(e=>{let n;return Ja(e,t,()=>{n=i[y0](),Ja(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>dn(n?.return)&&n.return()})}(i,t);if(x0(i))return function E0(i,t){return u_(b0(i),t)}(i,t)}throw v0(i)}(i,t):Mr(i)}function Cr(...i){const t=$u(i),e=function S0(i,t){return"number"==typeof l_(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?Mr(n[0]):Md(e)(Ni(n,t)):bo}function Hf(i={}){const{connector:t=(()=>new Re),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,d=!1,h=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,d=h=!1},g=()=>{const b=o;m(),b?.unsubscribe()};return ni((b,v)=>{c++,!h&&!d&&p();const y=l=l??t();v.add(()=>{c--,0===c&&!h&&!d&&(a=Cd(g,r))}),y.subscribe(v),!o&&c>0&&(o=new ga({next:M=>y.next(M),error:M=>{h=!0,p(),a=Cd(m,e,M),y.error(M)},complete:()=>{d=!0,p(),a=Cd(m,n),y.complete()}}),Mr(b).subscribe(o))})(s)}}function Cd(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new ga({next:()=>{n.unsubscribe(),i()}});return Mr(t(...e)).subscribe(n)}function ci(i){for(let t in i)if(i[t]===ci)return t;throw Error("Could not find renamed property on target object.")}function h_(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function gi(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(gi).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function $f(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const f_=ci({__forward_ref__:ci});function Wn(i){return i.__forward_ref__=Wn,i.toString=function(){return gi(this())},i}function Ot(i){return Gu(i)?i():i}function Gu(i){return"function"==typeof i&&i.hasOwnProperty(f_)&&i.__forward_ref__===Wn}function Wu(i){return i&&!!i.\u0275providers}const Yu="https://g.co/ng/security#xss";class pe extends Error{constructor(t,e){super(Gf(t,e)),this.code=t}}function Gf(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}function Jt(i){return"string"==typeof i?i:null==i?"":String(i)}function Wf(i,t){throw new pe(-201,!1)}function Sn(i,t){null==i&&function ii(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Pe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Wt(i){return{providers:i.providers||[],imports:i.imports||[]}}function jf(i){return p_(i,Sd)||p_(i,g_)}function p_(i,t){return i.hasOwnProperty(t)?i[t]:null}function m_(i){return i&&(i.hasOwnProperty(ys)||i.hasOwnProperty(I0))?i[ys]:null}const Sd=ci({\u0275prov:ci}),ys=ci({\u0275inj:ci}),g_=ci({ngInjectableDef:ci}),I0=ci({ngInjectorDef:ci});var Ft=(()=>((Ft=Ft||{})[Ft.Default=0]="Default",Ft[Ft.Host=1]="Host",Ft[Ft.Self=2]="Self",Ft[Ft.SkipSelf=4]="SkipSelf",Ft[Ft.Optional=8]="Optional",Ft))();let Yf;function Ks(i){const t=Yf;return Yf=i,t}function bs(i,t,e){const n=jf(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Ft.Optional?null:void 0!==t?t:void Wf(gi(i))}const Rn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ul={},Xu="__NG_DI_FLAG__",_i="ngTempTokenPath",Vl="ngTokenPath",__=/\n/gm,iA="\u0275",qf="__source";let Ku;function Ed(i){const t=Ku;return Ku=i,t}function rA(i,t=Ft.Default){if(void 0===Ku)throw new pe(-203,!1);return null===Ku?bs(i,void 0,t):Ku.get(i,t&Ft.Optional?null:void 0,t)}function ee(i,t=Ft.Default){return(function R0(){return Yf}()||rA)(Ot(i),t)}function Lt(i,t=Ft.Default){return ee(i,Xf(t))}function Xf(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Kf(i){const t=[];for(let e=0;e<i.length;e++){const n=Ot(i[e]);if(Array.isArray(n)){if(0===n.length)throw new pe(900,!1);let r,s=Ft.Default;for(let o=0;o<n.length;o++){const a=n[o],l=v_(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(ee(r,s))}else t.push(ee(n))}return t}function Ad(i,t){return i[Xu]=t,i.prototype[Xu]=t,i}function v_(i){return i[Xu]}function el(i){return{toString:i}.toString()}var xo=(()=>((xo=xo||{})[xo.OnPush=0]="OnPush",xo[xo.Default=1]="Default",xo))(),Zs=(()=>{return(i=Zs||(Zs={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Zs;var i})();const tl={},jn=[],Ur=ci({\u0275cmp:ci}),Qu=ci({\u0275dir:ci}),xc=ci({\u0275pipe:ci}),b_=ci({\u0275mod:ci}),ya=ci({\u0275fac:ci}),Ju=ci({__NG_ELEMENT_ID__:ci});let sA=0;function st(i){return el(()=>{const t=wo(i),e={...t,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===xo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||Zs.Emulated,id:"c"+sA++,styles:i.styles||jn,_:null,schemas:i.schemas||null,tView:null};x_(e);const n=i.dependencies;return e.directiveDefs=Qf(n,!1),e.pipeDefs=Qf(n,!0),e})}function eh(i,t,e){const n=i.\u0275cmp;n.directiveDefs=Qf(t,!1),n.pipeDefs=Qf(e,!0)}function oA(i){return Gn(i)||Vr(i)}function Dd(i){return null!==i}function en(i){return el(()=>({type:i.type,bootstrap:i.bootstrap||jn,declarations:i.declarations||jn,imports:i.imports||jn,exports:i.exports||jn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Zf(i,t){if(null==i)return tl;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}function ve(i){return el(()=>{const t=wo(i);return x_(t),t})}function Wi(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Gn(i){return i[Ur]||null}function Vr(i){return i[Qu]||null}function xs(i){return i[xc]||null}function hr(i,t){const e=i[b_]||null;if(!e&&!0===t)throw new Error(`Type ${gi(i)} does not have '\u0275mod' property.`);return e}function wo(i){const t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||jn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Zf(i.inputs,t),outputs:Zf(i.outputs)}}function x_(i){i.features?.forEach(t=>t(i))}function Qf(i,t){if(!i)return null;const e=t?xs:oA;return()=>("function"==typeof i?i():i).map(n=>e(n)).filter(Dd)}const nl=0,dt=1,pn=2,Bi=3,ws=4,X=5,he=6,oe=7,ze=8,jt=9,zn=10,xt=11,ai=12,wc=13,P0=14,Er=15,rr=16,th=17,Wo=18,Qs=19,zl=20,ri=21,bi=22,Id=1,O0=2,Jf=7,ep=8,il=9,Ui=10;function Ms(i){return Array.isArray(i)&&"object"==typeof i[Id]}function Cs(i){return Array.isArray(i)&&!0===i[Id]}function tp(i){return 0!=(4&i.flags)}function Rd(i){return i.componentOffset>-1}function Mc(i){return 1==(1&i.flags)}function Mo(i){return!!i.template}function nh(i){return 0!=(256&i[pn])}function rl(i,t){return i.hasOwnProperty(ya)?i[ya]:null}class Pd{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function xi(){return Od}function Od(i){return i.type.prototype.ngOnChanges&&(i.setInput=Fd),rp}function rp(){const i=U0(this),t=i?.current;if(t){const e=i.previous;if(e===tl)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function Fd(i,t,e,n){const r=this.declaredInputs[e],s=U0(i)||function uA(i,t){return i[B0]=t}(i,{previous:tl,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new Pd(l&&l.currentValue,t,a===tl),i[n]=t}xi.ngInherit=!0;const B0="__ngSimpleChanges__";function U0(i){return i[B0]||null}const es=function(i,t,e){},Ld="svg";function I(i){for(;Array.isArray(i);)i=i[nl];return i}function Cc(i,t){return I(t[i])}function Ai(i,t){return I(t[i.index])}function V0(i,t){return i.data[t]}function Bd(i,t){return i[t]}function Ss(i,t){const e=t[i];return Ms(e)?e:e[nl]}function sp(i){return 64==(64&i[pn])}function Hl(i,t){return null==t?null:i[t]}function z0(i){i[Wo]=0}function D_(i,t){i[X]+=t;let e=i,n=i[Bi];for(;null!==n&&(1===t&&1===e[X]||-1===t&&0===e[X]);)n[X]+=t,e=n,n=n[Bi]}const Pt={lFrame:ol(null),bindingsEnabled:!0};function ba(){return Pt.bindingsEnabled}function Se(){return Pt.lFrame.lView}function Hn(){return Pt.lFrame.tView}function Nt(i){return Pt.lFrame.contextLView=i,i[ze]}function St(i){return Pt.lFrame.contextLView=null,i}function Ar(){let i=$0();for(;null!==i&&64===i.type;)i=i.parent;return i}function $0(){return Pt.lFrame.currentTNode}function xa(i,t){const e=Pt.lFrame;e.currentTNode=i,e.isParent=t}function T_(){return Pt.lFrame.isParent}function I_(){Pt.lFrame.isParent=!1}function zr(){const i=Pt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function $l(){return Pt.lFrame.bindingIndex++}function Js(i){const t=Pt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function j0(i,t){const e=Pt.lFrame;e.bindingIndex=e.bindingRootIndex=i,jo(t)}function jo(i){Pt.lFrame.currentDirectiveIndex=i}function ih(i){const t=Pt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function Gl(){return Pt.lFrame.currentQueryIndex}function Es(i){Pt.lFrame.currentQueryIndex=i}function xA(i){const t=i[dt];return 2===t.type?t.declTNode:1===t.type?i[he]:null}function k_(i,t,e){if(e&Ft.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&Ft.Host||(r=xA(s),null===r||(s=s[Er],10&r.type))););if(null===r)return!1;t=r,i=s}const n=Pt.lFrame=Ud();return n.currentTNode=t,n.lView=i,!0}function ap(i){const t=Ud(),e=i[dt];Pt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function Ud(){const i=Pt.lFrame,t=null===i?null:i.child;return null===t?ol(i):t}function ol(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function P_(){const i=Pt.lFrame;return Pt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Y0=P_;function Vd(){const i=P_();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Zn(){return Pt.lFrame.selectedIndex}function al(i){Pt.lFrame.selectedIndex=i}function Di(){const i=Pt.lFrame;return V0(i.tView,i.selectedIndex)}function ki(){Pt.lFrame.currentNamespace=Ld}function wa(){!function Ec(){Pt.lFrame.currentNamespace=null}()}function zd(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks??(i.contentHooks=[])).push(-e,o),a&&((i.contentHooks??(i.contentHooks=[])).push(e,a),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(e,a)),l&&(i.viewHooks??(i.viewHooks=[])).push(-e,l),c&&((i.viewHooks??(i.viewHooks=[])).push(e,c),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(e,c)),null!=d&&(i.destroyHooks??(i.destroyHooks=[])).push(e,d)}}function lp(i,t,e){dp(i,t,3,e)}function cp(i,t,e,n){(3&i[pn])===e&&dp(i,t,e,n)}function F_(i,t){let e=i[pn];(3&e)===t&&(e&=2047,e+=1,i[pn]=e)}function dp(i,t,e,n){const s=n??-1,o=t.length-1;let a=0;for(let l=void 0!==n?65535&i[Wo]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[Wo]+=65536),(a<s||-1==s)&&(MA(i,e,t,l),i[Wo]=(4294901760&i[Wo])+l+2),l++}function MA(i,t,e,n){const r=e[n]<0,s=e[n+1],a=i[r?-e[n]:e[n]];if(r){if(i[pn]>>11<i[Wo]>>16&&(3&i[pn])===t){i[pn]+=2048,es(4,a,s);try{s.call(a)}finally{es(5,a,s)}}}else{es(4,a,s);try{s.call(a)}finally{es(5,a,s)}}}const Ma=-1;class Hd{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function N_(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],a=e[n++];i.setAttribute(t,o,a,s)}else{const s=r,o=e[++n];B_(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function K0(i){return 3===i||4===i||6===i}function B_(i){return 64===i.charCodeAt(0)}function Dc(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||Z0(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function Z0(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function up(i){return i!==Ma}function rh(i){return 32767&i}function sh(i,t){let e=function Q0(i){return i>>16}(i),n=t;for(;e>0;)n=n[Er],e--;return n}let $d=!0;function hp(i){const t=$d;return $d=i,t}const U_=255,J0=5;let ex=0;const Ca={};function oh(i,t){const e=tx(i,t);if(-1!==e)return e;const n=t[dt];n.firstCreatePass&&(i.injectorIndex=t.length,ah(n.data,i),ah(t,null),ah(n.blueprint,null));const r=lh(i,t),s=i.injectorIndex;if(up(r)){const o=rh(r),a=sh(r,t),l=a[dt].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function ah(i,t){i.push(0,0,0,0,0,0,0,0,t)}function tx(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function lh(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=dh(r),null===n)return Ma;if(e++,r=r[Er],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return Ma}function mn(i,t,e){!function V_(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Ju)&&(n=e[Ju]),null==n&&(n=e[Ju]=ex++);const r=n&U_;t.data[i+(r>>J0)]|=1<<r}(i,t,e)}function nx(i,t,e){if(e&Ft.Optional||void 0!==i)return i;Wf()}function Gd(i,t,e,n){if(e&Ft.Optional&&void 0===n&&(n=null),!(e&(Ft.Self|Ft.Host))){const r=i[jt],s=Ks(void 0);try{return r?r.get(t,n,e&Ft.Optional):bs(t,n,e&Ft.Optional)}finally{Ks(s)}}return nx(n,0,e)}function z_(i,t,e,n=Ft.Default,r){if(null!==i){if(1024&t[pn]){const o=function rx(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[pn]&&!(256&o[pn]);){const a=ix(s,o,e,n|Ft.Self,Ca);if(a!==Ca)return a;let l=s.parent;if(!l){const c=o[ri];if(c){const d=c.get(e,Ca,n);if(d!==Ca)return d}l=dh(o),o=o[Er]}s=l}return r}(i,t,e,n,Ca);if(o!==Ca)return o}const s=ix(i,t,e,n,Ca);if(s!==Ca)return s}return Gd(t,e,n,r)}function ix(i,t,e,n,r){const s=function fp(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Ju)?i[Ju]:void 0;return"number"==typeof t?t>=0?t&U_:eo:t}(e);if("function"==typeof s){if(!k_(t,i,n))return n&Ft.Host?nx(r,0,n):Gd(t,e,n,r);try{const o=s(n);if(null!=o||n&Ft.Optional)return o;Wf()}finally{Y0()}}else if("number"==typeof s){let o=null,a=tx(i,t),l=Ma,c=n&Ft.Host?t[rr][he]:null;for((-1===a||n&Ft.SkipSelf)&&(l=-1===a?lh(i,t):t[a+8],l!==Ma&&H_(n,!1)?(o=t[dt],a=rh(l),t=sh(l,t)):a=-1);-1!==a;){const d=t[dt];if(pp(s,a,d.data)){const h=TA(a,t,e,o,n,c);if(h!==Ca)return h}l=t[a+8],l!==Ma&&H_(n,t[dt].data[a+8]===c)&&pp(s,a,t)?(o=d,a=rh(l),t=sh(l,t)):a=-1}}return r}function TA(i,t,e,n,r,s){const o=t[dt],a=o.data[i+8],d=is(a,o,e,null==n?Rd(a)&&$d:n!=o&&0!=(3&a.type),r&Ft.Host&&s===a);return null!==d?Tc(t,o,d,a):Ca}function is(i,t,e,n,r){const s=i.providerIndexes,o=t.data,a=1048575&s,l=i.directiveStart,d=s>>20,p=r?a+d:i.directiveEnd;for(let m=n?a:a+d;m<p;m++){const g=o[m];if(m<l&&e===g||m>=l&&g.type===e)return m}if(r){const m=o[l];if(m&&Mo(m)&&m.type===e)return l}return null}function Tc(i,t,e,n){let r=i[e];const s=t.data;if(function CA(i){return i instanceof Hd}(r)){const o=r;o.resolving&&function D0(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new pe(-200,`Circular dependency in DI detected for ${i}${e}`)}(function Kn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Jt(i)}(s[e]));const a=hp(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ks(o.injectImpl):null;k_(i,n,Ft.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function ns(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=Od(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==l&&Ks(l),hp(a),o.resolving=!1,Y0()}}return r}function pp(i,t,e){return!!(e[t+(i>>J0)]&1<<i)}function H_(i,t){return!(i&Ft.Self||i&Ft.Host&&t)}class Ic{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return z_(this._tNode,this._lView,t,Xf(n),e)}}function eo(){return new Ic(Ar(),Se())}function si(i){return el(()=>{const t=i.prototype.constructor,e=t[ya]||ch(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[ya]||ch(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function ch(i){return Gu(i)?()=>{const t=ch(Ot(i));return t&&t()}:rl(i)}function dh(i){const t=i[dt],e=t.type;return 2===e?t.declTNode:1===e?i[he]:null}function Sa(i){return function DA(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(K0(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(Ar(),i)}const Rc="__parameters__";function Wd(i,t,e){return el(()=>{const n=function Ea(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const h=l.hasOwnProperty(Rc)?l[Rc]:Object.defineProperty(l,Rc,{value:[]})[Rc];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class me{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Pe({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Yl(i,t){i.forEach(e=>Array.isArray(e)?Yl(e,t):t(e))}function G_(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function _p(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function Yd(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function As(i,t,e){let n=Pc(i,t);return n>=0?i[1|n]=e:(n=~n,function PA(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function Xd(i,t){const e=Pc(i,t);if(e>=0)return i[1|e]}function Pc(i,t){return function yp(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const Co=Ad(Wd("Inject",i=>({token:i})),-1),Ds=Ad(Wd("Optional"),8),Aa=Ad(Wd("SkipSelf"),4);var Ts=(()=>((Ts=Ts||{})[Ts.Important=1]="Important",Ts[Ts.DashCase=2]="DashCase",Ts))();const Ap=new Map;let bx=0;const rv="__ngContext__";function $r(i,t){Ms(t)?(i[rv]=t[zl],function xx(i){Ap.set(i[zl],i)}(t)):i[rv]=t}let ov;function av(i,t){return ov(i,t)}function _h(i){const t=i[Bi];return Cs(t)?t[Bi]:t}function lv(i){return Ix(i[wc])}function cv(i){return Ix(i[ws])}function Ix(i){for(;null!==i&&!Cs(i);)i=i[ws];return i}function Ir(i,t,e,n,r){if(null!=n){let s,o=!1;Cs(n)?s=n:Ms(n)&&(o=!0,n=n[nl]);const a=I(n);0===i&&null!==e?null==r?Lx(t,e,a):Lc(t,e,a,r||null,!0):1===i&&null!==e?Lc(t,e,a,r||null,!0):2===i?function gv(i,t,e){const n=Ip(i,t);n&&function t1(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,a,o):3===i&&t.destroyNode(a),null!=s&&function $x(i,t,e,n,r){const s=e[Jf];s!==I(e)&&Ir(t,i,n,s,r);for(let a=Ui;a<e.length;a++){const l=e[a];yh(l[dt],l,i,t,n,s)}}(t,i,s,e,r)}}function Tp(i,t,e){return i.createElement(t,e)}function kx(i,t){const e=i[il],n=e.indexOf(t),r=t[Bi];512&t[pn]&&(t[pn]&=-513,D_(r,-1)),e.splice(n,1)}function hv(i,t){if(i.length<=Ui)return;const e=Ui+t,n=i[e];if(n){const r=n[th];null!==r&&r!==i&&kx(r,n),t>0&&(i[e-1][ws]=n[ws]);const s=_p(i,Ui+t);!function qA(i,t){yh(i,t,t[xt],2,null,null),t[nl]=null,t[he]=null}(n[dt],n);const o=s[Qs];null!==o&&o.detachView(s[dt]),n[Bi]=null,n[ws]=null,n[pn]&=-65}return n}function Px(i,t){if(!(128&t[pn])){const e=t[xt];e.destroyNode&&yh(i,t,e,3,null,null),function ZA(i){let t=i[wc];if(!t)return fv(i[dt],i);for(;t;){let e=null;if(Ms(t))e=t[wc];else{const n=t[Ui];n&&(e=n)}if(!e){for(;t&&!t[ws]&&t!==i;)Ms(t)&&fv(t[dt],t),t=t[Bi];null===t&&(t=i),Ms(t)&&fv(t[dt],t),e=t&&t[ws]}t=e}}(t)}}function fv(i,t){if(!(128&t[pn])){t[pn]&=-65,t[pn]|=128,function e1(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof Hd)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];es(4,a,l);try{l.call(a)}finally{es(5,a,l)}}else{es(4,r,s);try{s.call(r)}finally{es(5,r,s)}}}}}(i,t),function JA(i,t){const e=i.cleanup,n=t[oe];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?n[r=o]():n[r=-o].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[oe]=null}}(i,t),1===t[dt].type&&t[xt].destroy();const e=t[th];if(null!==e&&Cs(t[Bi])){e!==t[Bi]&&kx(e,t);const n=t[Qs];null!==n&&n.detachView(i)}!function Fc(i){Ap.delete(i[zl])}(t)}}function Ox(i,t,e){return function Fx(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[nl];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===Zs.None||s===Zs.Emulated)return null}return Ai(n,e)}}(i,t.parent,e)}function Lc(i,t,e,n,r){i.insertBefore(t,e,n,r)}function Lx(i,t,e){i.appendChild(t,e)}function Nx(i,t,e,n,r){null!==n?Lc(i,t,e,n,r):Lx(i,t,e)}function Ip(i,t){return i.parentNode(t)}function Bx(i,t,e){return Vx(i,t,e)}let pv,Op,yv,Vx=function Ux(i,t,e){return 40&i.type?Ai(i,e):null};function vh(i,t,e,n){const r=Ox(i,n,t),s=t[xt],a=Bx(n.parent||t[he],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)Nx(s,r,e[l],a,!1);else Nx(s,r,e,a,!1);void 0!==pv&&pv(s,n,t,e,r)}function kp(i,t){if(null!==t){const e=t.type;if(3&e)return Ai(t,i);if(4&e)return mv(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return kp(i,n);{const r=i[t.index];return Cs(r)?mv(-1,r):I(r)}}if(32&e)return av(t,i)()||I(i[t.index]);{const n=zx(i,t);return null!==n?Array.isArray(n)?n[0]:kp(_h(i[rr]),n):kp(i,t.next)}}return null}function zx(i,t){return null!==t?i[rr][he].projection[t.projection]:null}function mv(i,t){const e=Ui+i+1;if(e<t.length){const n=t[e],r=n[dt].firstChild;if(null!==r)return kp(n,r)}return t[Jf]}function _v(i,t,e,n,r,s,o){for(;null!=e;){const a=n[e.index],l=e.type;if(o&&0===t&&(a&&$r(I(a),n),e.flags|=2),32!=(32&e.flags))if(8&l)_v(i,t,e.child,n,r,s,!1),Ir(t,i,r,a,s);else if(32&l){const c=av(e,n);let d;for(;d=c();)Ir(t,i,r,d,s);Ir(t,i,r,a,s)}else 16&l?Hx(i,t,n,e,r,s):Ir(t,i,r,a,s);e=o?e.projectionNext:e.next}}function yh(i,t,e,n,r,s){_v(e,n,i.firstChild,t,r,s,!1)}function Hx(i,t,e,n,r,s){const o=e[rr],l=o[he].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Ir(t,i,r,l[c],s);else _v(i,t,l,o[Bi],r,s,!0)}function Gx(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function Wx(i,t,e){const{mergedAttrs:n,classes:r,styles:s}=e;null!==n&&N_(i,t,n),null!==r&&Gx(i,t,r),null!==s&&function Pp(i,t,e){i.setAttribute(t,"style",e)}(i,t,s)}function Kd(i){return function vv(){if(void 0===Op&&(Op=null,Rn.trustedTypes))try{Op=Rn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Op}()?.createHTML(i)||i}class ql{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Yu})`}}class d1 extends ql{getTypeName(){return"HTML"}}class u1 extends ql{getTypeName(){return"Style"}}class h1 extends ql{getTypeName(){return"Script"}}class f1 extends ql{getTypeName(){return"URL"}}class Lp extends ql{getTypeName(){return"ResourceURL"}}function no(i){return i instanceof ql?i.changingThisBreaksApplicationSecurity:i}function Ta(i,t){const e=function p1(i){return i instanceof ql&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${Yu})`)}return e===t}class b1{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Kd(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class x1{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Kd(t),e}}const w1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function bh(i){return(i=String(i)).match(w1)?i:"unsafe:"+i}function Ia(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function Nc(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const wv=Ia("area,br,col,hr,img,wbr"),Mv=Ia("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Cv=Ia("rp,rt"),Sv=Nc(wv,Nc(Mv,Ia("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nc(Cv,Ia("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nc(Cv,Mv)),Zd=Ia("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kx=Nc(Zd,Ia("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ia("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Av=Ia("script,style,template");class Zx{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Sv.hasOwnProperty(e))return this.sanitizedSomething=!0,!Av.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!Kx.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Zd[a]&&(l=bh(l)),this.buf.push(" ",o,'="',Qx(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Sv.hasOwnProperty(e)&&!wv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Qx(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const C1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,S1=/([^\#-~ |!])/g;function Qx(i){return i.replace(/&/g,"&amp;").replace(C1,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(S1,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Bp;function Jx(i,t){let e=null;try{Bp=Bp||function Xx(i){const t=new x1(i);return function Np(){try{return!!(new window.DOMParser).parseFromString(Kd(""),"text/html")}catch{return!1}}()?new b1(t):t}(i);let n=t?String(t):"";e=Bp.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=Bp.getInertBodyElement(n)}while(n!==s);return Kd((new Zx).sanitizeChildren(Dv(e)||e))}finally{if(e){const n=Dv(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function Dv(i){return"content"in i&&function E1(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Qn=(()=>((Qn=Qn||{})[Qn.NONE=0]="NONE",Qn[Qn.HTML=1]="HTML",Qn[Qn.STYLE=2]="STYLE",Qn[Qn.SCRIPT=3]="SCRIPT",Qn[Qn.URL=4]="URL",Qn[Qn.RESOURCE_URL=5]="RESOURCE_URL",Qn))();function Up(i){const t=function wi(){const i=Se();return i&&i[ai]}();return t?t.sanitize(Qn.URL,i)||"":Ta(i,"URL")?no(i):bh(Jt(i))}const Vp=new me("ENVIRONMENT_INITIALIZER"),dl=new me("INJECTOR",-1),tw=new me("INJECTOR_DEF_TYPES");class nw{get(t,e=Ul){if(e===Ul){const n=new Error(`NullInjectorError: No provider for ${gi(t)}!`);throw n.name="NullInjectorError",n}return e}}function R1(...i){return{\u0275providers:iw(0,i),\u0275fromNgModule:!0}}function iw(i,...t){const e=[],n=new Set;let r;return Yl(t,s=>{const o=s;Tv(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&zp(r,e),e}function zp(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];Hp(r,s=>{t.push(s)})}}function Tv(i,t,e,n){if(!(i=Ot(i)))return!1;let r=null,s=m_(i);const o=!s&&Gn(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=m_(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)Tv(c,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{Yl(s.imports,d=>{Tv(d,t,e,n)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&zp(c,t)}if(!a){const c=rl(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:jn},{provide:tw,useValue:r,multi:!0},{provide:Vp,useValue:()=>ee(r),multi:!0})}const l=s.providers;null==l||a||Hp(l,d=>{t.push(d)})}}return r!==i&&void 0!==i.providers}function Hp(i,t){for(let e of i)Wu(e)&&(e=e.\u0275providers),Array.isArray(e)?Hp(e,t):t(e)}const $p=ci({provide:String,useValue:ci});function Mi(i){return null!==i&&"object"==typeof i&&$p in i}function Uc(i){return"function"==typeof i}const Rv=new me("Set Injector scope."),Gp={},P1={};let kv;function xh(){return void 0===kv&&(kv=new nw),kv}class ro{}class Wp extends ro{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ov(t,o=>this.processProvider(o)),this.records.set(dl,Xo(void 0,this)),r.has("environment")&&this.records.set(ro,Xo(void 0,this));const s=this.records.get(Rv);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(tw.multi,jn,Ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=Ed(this),n=Ks(void 0);try{return t()}finally{Ed(e),Ks(n)}}get(t,e=Ul,n=Ft.Default){this.assertNotDestroyed(),n=Xf(n);const r=Ed(this),s=Ks(void 0);try{if(!(n&Ft.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function L1(i){return"function"==typeof i||"object"==typeof i&&i instanceof me}(t)&&jf(t);a=l&&this.injectableDefInScope(l)?Xo(Pv(t),Gp):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&Ft.Self?xh():this.parent).get(t,e=n&Ft.Optional&&e===Ul?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[_i]=o[_i]||[]).unshift(gi(t)),r)throw o;return function y_(i,t,e,n){const r=i[_i];throw t[qf]&&r.unshift(t[qf]),i.message=function k0(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==iA?i.slice(2):i;let r=gi(t);if(Array.isArray(t))r=t.map(gi).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):gi(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(__,"\n  ")}`}("\n"+i.message,r,e,n),i[Vl]=r,i[_i]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{Ks(s),Ed(r)}}resolveInjectorInitializers(){const t=Ed(this),e=Ks(void 0);try{const n=this.get(Vp.multi,jn,Ft.Self);for(const r of n)r()}finally{Ed(t),Ks(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(gi(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pe(205,!1)}processProvider(t){let e=Uc(t=Ot(t))?t:Ot(t&&t.provide);const n=function jp(i){return Mi(i)?Xo(void 0,i.useValue):Xo(Is(i),Gp)}(t);if(Uc(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Xo(void 0,Gp,!0),r.factory=()=>Kf(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===Gp&&(e.value=P1,e.value=e.factory()),"object"==typeof e.value&&e.value&&function F1(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Ot(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function Pv(i){const t=jf(i),e=null!==t?t.factory:rl(i);if(null!==e)return e;if(i instanceof me)throw new pe(204,!1);if(i instanceof Function)return function rw(i){const t=i.length;if(t>0)throw Yd(t,"?"),new pe(204,!1);const e=function qu(i){return i&&(i[Sd]||i[g_])||null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new pe(204,!1)}function Is(i,t,e){let n;if(Uc(i)){const r=Ot(i);return rl(r)||Pv(r)}if(Mi(i))n=()=>Ot(i.useValue);else if(function Iv(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Kf(i.deps||[]));else if(function Pi(i){return!(!i||!i.useExisting)}(i))n=()=>ee(Ot(i.useExisting));else{const r=Ot(i&&(i.useClass||i.provide));if(!function O1(i){return!!i.deps}(i))return rl(r)||Pv(r);n=()=>new r(...Kf(i.deps))}return n}function Xo(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function Ov(i,t){for(const e of i)Array.isArray(e)?Ov(e,t):e&&Wu(e)?Ov(e.\u0275providers,t):t(e)}class N1{}class Fv{}class Eo{resolveComponentFactory(t){throw function ul(i){const t=Error(`No component factory found for ${gi(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let Kl=(()=>{class i{}return i.NULL=new Eo,i})();function U1(){return Fn(Ar(),Se())}function Fn(i,t){return new vt(Ai(i,t))}let vt=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=U1,i})();function sw(i){return i instanceof vt?i.nativeElement:i}class Zl{}let hl=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function V1(){const i=Se(),e=Ss(Ar().index,i);return(Ms(e)?e:i)[xt]}(),i})(),z1=(()=>{class i{}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:()=>null}),i})();class Vc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const H1=new Vc("15.2.10"),Lv={},Nv="ngOriginalError";function Bv(i){return i[Nv]}class fl{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&Bv(t);for(;e&&Bv(e);)e=Bv(e);return e||null}}function pl(i){return i instanceof Function?i():i}function aw(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const lw="ng-template";function K1(i,t,e){let n=0,r=!0;for(;n<i.length;){let s=i[n++];if("string"==typeof s&&r){const o=i[n++];if(e&&"class"===s&&-1!==aw(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;n<i.length&&"string"==typeof(s=i[n++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function zv(i){return 4===i.type&&i.value!==lw}function Z1(i,t,e){return t===(4!==i.type||e?i.value:lw)}function Q1(i,t,e){let n=4;const r=i.attrs||[],s=function eD(i){for(let t=0;t<i.length;t++)if(K0(i[t]))return t;return i.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!Z1(i,l,e)||""===l&&1===t.length){if(Ko(n))return!1;o=!0}}else{const c=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!K1(i.attrs,c,e)){if(Ko(n))return!1;o=!0}continue}const h=cw(8&n?"class":l,r,zv(i),e);if(-1===h){if(Ko(n))return!1;o=!0;continue}if(""!==c){let p;p=h>s?"":r[h+1].toLowerCase();const m=8&n?p:null;if(m&&-1!==aw(m,c,0)||2&n&&c!==p){if(Ko(n))return!1;o=!0}}}}else{if(!o&&!Ko(n)&&!Ko(l))return!1;if(o&&Ko(l))continue;o=!1,n=l|1&n}}return Ko(n)||o}function Ko(i){return 0==(1&i)}function cw(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function tD(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function Hv(i,t,e=!1){for(let n=0;n<t.length;n++)if(Q1(i,t[n],e))return!0;return!1}function nD(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function zc(i,t){return i?":not("+t.trim()+")":t}function iD(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Ko(o)&&(t+=zc(s,r),r=""),n=o,s=s||!Ko(n);e++}return""!==r&&(t+=zc(s,r)),t}const on={};function V(i){$v(Hn(),Se(),Zn()+i,!1)}function $v(i,t,e,n){if(!n)if(3==(3&t[pn])){const s=i.preOrderCheckHooks;null!==s&&lp(t,s,e)}else{const s=i.preOrderHooks;null!==s&&cp(t,s,0,e)}al(e)}function hw(i,t=null,e=null,n){const r=fw(i,t,e,n);return r.resolveInjectorInitializers(),r}function fw(i,t=null,e=null,n,r=new Set){const s=[e||jn,R1(i)];return n=n||("object"==typeof i?void 0:gi(i)),new Wp(s,t||xh(),n||null,r)}let ji=(()=>{class i{static create(e,n){if(Array.isArray(e))return hw({name:""},n,e,"");{const r=e.name??"";return hw({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=Ul,i.NULL=new nw,i.\u0275prov=Pe({token:i,providedIn:"any",factory:()=>ee(dl)}),i.__NG_ELEMENT_ID__=-1,i})();function E(i,t=Ft.Default){const e=Se();return null===e?ee(i,t):z_(Ar(),e,Ot(i),t)}function Ao(){throw new Error("invalid")}function yw(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const s=e[n+1];if(-1!==s){const o=i.data[s];Es(e[n]),o.contentQueries(2,t[s],s)}}}function wh(i,t,e,n,r,s,o,a,l,c,d){const h=t.blueprint.slice();return h[nl]=r,h[pn]=76|n,(null!==d||i&&1024&i[pn])&&(h[pn]|=1024),z0(h),h[Bi]=h[Er]=i,h[ze]=e,h[zn]=o||i&&i[zn],h[xt]=a||i&&i[xt],h[ai]=l||i&&i[ai]||null,h[jt]=c||i&&i[jt]||null,h[he]=s,h[zl]=function Dp(){return bx++}(),h[ri]=d,h[rr]=2==t.type?i[rr]:h,h}function tu(i,t,e,n,r){let s=i.data[t];if(null===s)s=function Zv(i,t,e,n,r){const s=$0(),o=T_(),l=i.data[t]=function AD(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(i,t,e,n,r),function op(){return Pt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function ts(){const i=Pt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return xa(s,!0),s}function Mh(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function Ch(i,t,e){ap(t);try{const n=i.viewQuery;null!==n&&OD(1,n,e);const r=i.template;null!==r&&bw(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&yw(i,t),i.staticViewQueries&&OD(2,i.viewQuery,e);const s=i.components;null!==s&&function CD(i,t){for(let e=0;e<t.length;e++)as(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[pn]&=-5,Vd()}}function nu(i,t,e,n){const r=t[pn];if(128!=(128&r)){ap(t);try{z0(t),function G0(i){return Pt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&bw(i,t,e,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&lp(t,c,null)}else{const c=i.preOrderHooks;null!==c&&cp(t,c,0,null),F_(t,0)}if(function En(i){for(let t=lv(i);null!==t;t=cv(t)){if(!t[O0])continue;const e=t[il];for(let n=0;n<e.length;n++){const r=e[n];512&r[pn]||D_(r[Bi],1),r[pn]|=512}}}(t),function Ht(i){for(let t=lv(i);null!==t;t=cv(t))for(let e=Ui;e<t.length;e++){const n=t[e],r=n[dt];sp(n)&&nu(r,n,r.template,n[ze])}}(t),null!==i.contentQueries&&yw(i,t),o){const c=i.contentCheckHooks;null!==c&&lp(t,c)}else{const c=i.contentHooks;null!==c&&cp(t,c,1),F_(t,1)}!function wD(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)al(~r);else{const s=r,o=e[++n],a=e[++n];j0(o,s),a(2,t[s])}}}finally{al(-1)}}(i,t);const a=i.components;null!==a&&function MD(i,t){for(let e=0;e<t.length;e++)Ln(i,t[e])}(t,a);const l=i.viewQuery;if(null!==l&&OD(2,l,n),o){const c=i.viewCheckHooks;null!==c&&lp(t,c)}else{const c=i.viewHooks;null!==c&&cp(t,c,2),F_(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[pn]&=-41,512&t[pn]&&(t[pn]&=-513,D_(t[Bi],-1))}finally{Vd()}}}function bw(i,t,e,n,r){const s=Zn(),o=2&n;try{al(-1),o&&t.length>bi&&$v(i,t,bi,!1),es(o?2:0,r),e(n,r)}finally{al(s),es(o?3:1,r)}}function Qv(i,t,e){if(tp(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function Jv(i,t,e){ba()&&(function f(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;Rd(e)&&function ye(i,t,e){const n=Ai(t,i),r=xw(e),s=i[zn],o=Ti(i,wh(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||oh(e,t),$r(n,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=Tc(t,i,a,e);$r(c,t),null!==o&&bt(0,a-r,c,l,0,o),Mo(l)&&(Ss(e.index,t)[ze]=Tc(t,i,a,e))}}(i,t,e,Ai(e,t)),64==(64&e.flags)&&_(i,t,e))}function ey(i,t,e=Ai){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?e(t,i):i[o];i[r++]=a}}}function xw(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=ty(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function ty(i,t,e,n,r,s,o,a,l,c){const d=bi+n,h=d+r,p=function SD(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:on);return e}(d,h),m="function"==typeof c?c():c;return p[dt]={type:i,blueprint:p,template:e,queries:null,viewQuery:a,declTNode:t,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function ww(i,t,e,n){const r=KF(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&ZF(i).push(n,r.length-1))}function Mw(i,t,e,n){for(let r in i)if(i.hasOwnProperty(r)){e=null===e?{}:e;const s=i[r];null===n?Cw(e,t,r,s):n.hasOwnProperty(r)&&Cw(e,t,n[r],s)}return e}function Cw(i,t,e,n){i.hasOwnProperty(e)?i[e].push(t,n):i[e]=[t,n]}function so(i,t,e,n,r,s,o,a){const l=Ai(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[n])?(FD(i,e,d,n,r),Rd(t)&&function ID(i,t){const e=Ss(t,i);16&e[pn]||(e[pn]|=32)}(e,t.index)):3&t.type&&(n=function TD(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(l,n,r))}function ny(i,t,e,n){if(ba()){const r=null===n?null:{"":-1},s=function S(i,t){const e=i.directiveRegistry;let n=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(Hv(t,o.selectors,!1))if(n||(n=[]),Mo(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o),P(i,t,a.length)}else n.unshift(o),P(i,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&Sw(i,t,e,o,r,a),r&&function G(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new pe(-301,!1);n.push(t[r],s)}}}(e,n,r)}e.mergedAttrs=Dc(e.mergedAttrs,e.attrs)}function Sw(i,t,e,n,r,s){for(let c=0;c<n.length;c++)mn(oh(e,t),i,n[c].type);!function Q(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}(e,i.data.length,n.length);for(let c=0;c<n.length;c++){const d=n[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=Mh(i,t,n.length,null);for(let c=0;c<n.length;c++){const d=n[c];e.mergedAttrs=Dc(e.mergedAttrs,d.hostAttrs),_e(i,e,t,l,d),Y(l,d,r),null!==d.contentQueries&&(e.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=64);const h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(e.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function DD(i,t,e){const r=t.directiveEnd,s=i.data,o=t.attrs,a=[];let l=null,c=null;for(let d=t.directiveStart;d<r;d++){const h=s[d],p=e?e.get(h):null,g=p?p.outputs:null;l=Mw(h.inputs,d,l,p?p.inputs:null),c=Mw(h.outputs,d,c,g);const b=null===l||null===o||zv(t)?null:zt(l,d,o);a.push(b)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(i,e,s)}function _(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function bA(){return Pt.lFrame.currentDirectiveIndex}();try{al(s);for(let a=n;a<r;a++){const l=i.data[a],c=t[a];jo(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&w(l,c)}}finally{al(-1),jo(o)}}function w(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function P(i,t,e){t.componentOffset=e,(i.components??(i.components=[])).push(t.index)}function Y(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Mo(t)&&(e[""]=i)}}function _e(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=rl(r.type)),o=new Hd(s,Mo(r),E);i.blueprint[n]=o,e[n]=o,function kD(i,t,e,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const a=~t.index;(function u(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,n,s)}}(i,t,n,Mh(i,e,r.hostVars,on),r)}function be(i,t,e,n,r,s){const o=Ai(i,t);!function Qe(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const a=null==o?Jt(s):o(s,n||"",r);i.setAttribute(t,r,a,e)}}(t[xt],o,s,i.value,e,n,r)}function bt(i,t,e,n,r,s){const o=s[t];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],h=o[l++];null!==a?n.setInput(e,h,c,d):e[d]=h}}}function zt(i,t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){n.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function gn(i,t,e,n){return[i,!0,!1,t,null,0,n,e,null,null]}function Ln(i,t){const e=Ss(t,i);if(sp(e)){const n=e[dt];48&e[pn]?nu(n,e,n.template,e[ze]):e[X]>0&&os(e)}}function os(i){for(let n=lv(i);null!==n;n=cv(n))for(let r=Ui;r<n.length;r++){const s=n[r];if(sp(s))if(512&s[pn]){const o=s[dt];nu(o,s,o.template,s[ze])}else s[X]>0&&os(s)}const e=i[dt].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Ss(e[n],i);sp(r)&&r[X]>0&&os(r)}}function as(i,t){const e=Ss(t,i),n=e[dt];(function oo(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),Ch(n,e,e[ze])}function Ti(i,t){return i[wc]?i[P0][ws]=t:i[wc]=t,i[P0]=t,t}function ks(i){for(;i;){i[pn]|=32;const t=_h(i);if(nh(i)&&!t)return i;i=t}return null}function Do(i,t,e,n=!0){const r=t[zn];r.begin&&r.begin();try{nu(i,t,i.template,e)}catch(o){throw n&&JF(t,o),o}finally{r.end&&r.end()}}function OD(i,t,e){Es(0),t(i,e)}function KF(i){return i[oe]||(i[oe]=[])}function ZF(i){return i.cleanup||(i.cleanup=[])}function QF(i,t,e){return(null===i||Mo(i))&&(e=function Nd(i){for(;Array.isArray(i);){if("object"==typeof i[Id])return i;i=i[nl]}return null}(e[t.index])),e[xt]}function JF(i,t){const e=i[jt],n=e?e.get(fl,null):null;n&&n.handleError(t)}function FD(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function Hc(i,t,e){const n=Cc(t,i);!function Rx(i,t,e){i.setValue(t,e)}(i[xt],n,e)}function Ew(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=$f(r,a):2==s&&(n=$f(n,a+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function Aw(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(I(s)),Cs(s))for(let a=Ui;a<s.length;a++){const l=s[a],c=l[dt].firstChild;null!==c&&Aw(l[dt],l,c,n)}const o=e.type;if(8&o)Aw(i,t,e.child,n);else if(32&o){const a=av(e,t);let l;for(;l=a();)n.push(l)}else if(16&o){const a=zx(t,e);if(Array.isArray(a))n.push(...a);else{const l=_h(t[rr]);Aw(l[dt],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}class iy{get rootNodes(){const t=this._lView,e=t[dt];return Aw(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ze]}set context(t){this._lView[ze]=t}get destroyed(){return 128==(128&this._lView[pn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Bi];if(Cs(t)){const e=t[ep],n=e?e.indexOf(this):-1;n>-1&&(hv(t,n),_p(e,n))}this._attachedToViewContainer=!1}Px(this._lView[dt],this._lView)}onDestroy(t){ww(this._lView[dt],this._lView,null,t)}markForCheck(){ks(this._cdRefInjectingView||this._lView)}detach(){this._lView[pn]&=-65}reattach(){this._lView[pn]|=64}detectChanges(){Do(this._lView[dt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function KA(i,t){yh(i,t,t[xt],2,null,null)}(this._lView[dt],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pe(902,!1);this._appRef=t}}class M8 extends iy{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;Do(t[dt],t,t[ze],!1)}checkNoChanges(){}get context(){return null}}class eL extends Kl{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Gn(t);return new ry(e,this.ngModule)}}function tL(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class S8{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=Xf(n);const r=this.injector.get(t,Lv,n);return r!==Lv||e===Lv?r:this.parentInjector.get(t,e,n)}}class ry extends Fv{get inputs(){return tL(this.componentDef.inputs)}get outputs(){return tL(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function rD(i){return i.map(iD).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof ro?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new S8(t,s):t,a=o.get(Zl,null);if(null===a)throw new pe(407,!1);const l=o.get(z1,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",h=n?function ED(i,t,e){return i.selectRootElement(t,e===Zs.ShadowDom)}(c,n,this.componentDef.encapsulation):Tp(c,d,function C8(i){const t=i.toLowerCase();return"svg"===t?Ld:"math"===t?"math":null}(d)),p=this.componentDef.onPush?288:272,m=ty(0,null,null,1,0,null,null,null,null,null),g=wh(null,m,null,p,null,null,a,c,l,o,null);let b,v;ap(g);try{const y=this.componentDef;let M,x=null;y.findHostDirectiveDefs?(M=[],x=new Map,y.findHostDirectiveDefs(y,M,x),M.push(y)):M=[y];const C=function A8(i,t){const e=i[dt],n=bi;return i[n]=t,tu(e,n,2,"#host",null)}(g,h),F=function D8(i,t,e,n,r,s,o,a){const l=r[dt];!function T8(i,t,e,n){for(const r of i)t.mergedAttrs=Dc(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(Ew(t,t.mergedAttrs,!0),null!==e&&Wx(n,e,t))}(n,i,t,o);const c=s.createRenderer(t,e),d=wh(r,xw(e),null,e.onPush?32:16,r[i.index],i,s,c,a||null,null,null);return l.firstCreatePass&&P(l,i,n.length-1),Ti(r,d),r[i.index]=d}(C,h,y,M,g,a,c);v=V0(m,bi),h&&function R8(i,t,e,n){if(n)N_(i,e,["ng-version",H1.full]);else{const{attrs:r,classes:s}=function sD(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!Ko(r))break;r=s}n++}return{attrs:t,classes:e}}(t.selectors[0]);r&&N_(i,e,r),s&&s.length>0&&Gx(i,e,s.join(" "))}}(c,y,h,n),void 0!==e&&function k8(i,t,e){const n=i.projection=[];for(let r=0;r<t.length;r++){const s=e[r];n.push(null!=s?Array.from(s):null)}}(v,this.ngContentSelectors,e),b=function I8(i,t,e,n,r,s){const o=Ar(),a=r[dt],l=Ai(o,r);Sw(a,r,o,e,null,n);for(let d=0;d<e.length;d++)$r(Tc(r,a,o.directiveStart+d,o),r);_(a,r,o),l&&$r(l,r);const c=Tc(r,a,o.directiveStart+o.componentOffset,o);if(i[ze]=r[ze]=c,null!==s)for(const d of s)d(c,t);return Qv(a,o,i),c}(F,y,M,x,g,[P8]),Ch(m,g,null)}finally{Vd()}return new E8(this.componentType,b,Fn(v,g),g,v)}}class E8 extends N1{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new M8(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;FD(s[dt],s,r,t,e),ks(Ss(this._tNode.index,s))}}get injector(){return new Ic(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function P8(){const i=Ar();zd(Se()[dt],i)}function ut(i){let t=function nL(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Mo(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new pe(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=LD(i.inputs),o.declaredInputs=LD(i.declaredInputs),o.outputs=LD(i.outputs);const a=r.hostBindings;a&&N8(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&F8(i,l),c&&L8(i,c),h_(i.inputs,r.inputs),h_(i.declaredInputs,r.declaredInputs),h_(i.outputs,r.outputs),Mo(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===ut&&(e=!1)}}t=Object.getPrototypeOf(t)}!function O8(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=Dc(r.hostAttrs,e=Dc(e,r.hostAttrs))}}(n)}function LD(i){return i===tl?{}:i===jn?[]:i}function F8(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function L8(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function N8(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}function Dw(i){return!!ND(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function ND(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Ql(i,t,e){return i[t]=e}function Ps(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function Sh(i,t,e,n){const r=Ps(i,t,e);return Ps(i,t+1,n)||r}function It(i,t,e,n){const r=Se();return Ps(r,$l(),t)&&(Hn(),be(Di(),r,i,t,e,n)),It}function Xp(i,t,e,n){return Ps(i,$l(),e)?t+Jt(e)+n:on}function Kp(i,t,e,n,r,s){const a=Sh(i,function sl(){return Pt.lFrame.bindingIndex}(),e,r);return Js(2),a?t+Jt(e)+n+Jt(r)+s:on}function fe(i,t,e,n,r,s,o,a){const l=Se(),c=Hn(),d=i+bi,h=c.firstCreatePass?function Y8(i,t,e,n,r,s,o,a,l){const c=t.consts,d=tu(t,i,4,o||null,Hl(c,a));ny(t,e,d,Hl(c,l)),zd(t,d);const h=d.tView=ty(2,d,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),h.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,e,n,r,s,o):c.data[d];xa(h,!1);const p=l[xt].createComment("");vh(c,l,p,h),$r(p,l),Ti(l,l[d]=gn(p,l,p,h)),Mc(h)&&Jv(c,l,h),null!=o&&ey(l,h,a)}function sr(i){return Bd(function yA(){return Pt.lFrame.contextLView}(),bi+i)}function U(i,t,e){const n=Se();return Ps(n,$l(),t)&&so(Hn(),Di(),n,i,t,n[xt],e,!1),U}function BD(i,t,e,n,r){const o=r?"class":"style";FD(i,e,t.inputs[o],o,n)}function $(i,t,e,n){const r=Se(),s=Hn(),o=bi+i,a=r[xt],l=s.firstCreatePass?function X8(i,t,e,n,r,s){const o=t.consts,l=tu(t,i,2,n,Hl(o,r));return ny(t,e,l,Hl(o,s)),null!==l.attrs&&Ew(l,l.attrs,!1),null!==l.mergedAttrs&&Ew(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,n):s.data[o],c=r[o]=Tp(a,t,function X0(){return Pt.lFrame.currentNamespace}()),d=Mc(l);return xa(l,!0),Wx(a,c,l),32!=(32&l.flags)&&vh(s,r,c,l),0===function pA(){return Pt.lFrame.elementDepthCount}()&&$r(c,r),function mA(){Pt.lFrame.elementDepthCount++}(),d&&(Jv(s,r,l),Qv(s,l,r)),null!==n&&ey(r,l),$}function W(){let i=Ar();T_()?I_():(i=i.parent,xa(i,!1));const t=i;!function gA(){Pt.lFrame.elementDepthCount--}();const e=Hn();return e.firstCreatePass&&(zd(e,i),tp(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function SA(i){return 0!=(8&i.flags)}(t)&&BD(e,t,Se(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function L_(i){return 0!=(16&i.flags)}(t)&&BD(e,t,Se(),t.stylesWithoutHost,!1),W}function Ee(i,t,e,n){return $(i,t,e,n),W(),Ee}function Gr(i,t,e){const n=Se(),r=Hn(),s=i+bi,o=r.firstCreatePass?function K8(i,t,e,n,r){const s=t.consts,o=Hl(s,n),a=tu(t,i,8,"ng-container",o);return null!==o&&Ew(a,o,!0),ny(t,e,a,Hl(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,n,t,e):r.data[s];xa(o,!0);const a=n[s]=n[xt].createComment("");return vh(r,n,a,o),$r(a,n),Mc(o)&&(Jv(r,n,o),Qv(r,o,n)),null!=e&&ey(n,o),Gr}function Wr(){let i=Ar();const t=Hn();return T_()?I_():(i=i.parent,xa(i,!1)),t.firstCreatePass&&(zd(t,i),tp(i)&&t.queries.elementEnd(i)),Wr}function oy(i,t,e){return Gr(i,t,e),Wr(),oy}function $n(){return Se()}function ay(i){return!!i&&"function"==typeof i.then}function mL(i){return!!i&&"function"==typeof i.subscribe}const UD=mL;function De(i,t,e,n){const r=Se(),s=Hn(),o=Ar();return gL(s,r,r[xt],o,i,t,n),De}function VD(i,t){const e=Ar(),n=Se(),r=Hn();return gL(r,n,QF(ih(r.data),e,n),e,i,t),VD}function gL(i,t,e,n,r,s,o){const a=Mc(n),c=i.firstCreatePass&&ZF(i),d=t[ze],h=KF(t);let p=!0;if(3&n.type||o){const b=Ai(n,t),v=o?o(b):b,y=h.length,M=o?C=>o(I(C[n.index])):n.index;let x=null;if(!o&&a&&(x=function Z8(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const a=t[oe],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==x)(x.__ngLastListenerFn__||x).__ngNextListenerFn__=s,x.__ngLastListenerFn__=s,p=!1;else{s=vL(n,t,d,s,!1);const C=e.listen(v,r,s);h.push(s,C),c&&c.push(r,M,y,y+1)}}else s=vL(n,t,d,s,!1);const m=n.outputs;let g;if(p&&null!==m&&(g=m[r])){const b=g.length;if(b)for(let v=0;v<b;v+=2){const F=t[g[v]][g[v+1]].subscribe(s),D=h.length;h.push(s,F),c&&c.push(r,n.index,D,-(D+1))}}}function _L(i,t,e,n){try{return es(6,t,e),!1!==e(n)}catch(r){return JF(i,r),!1}finally{es(7,t,e)}}function vL(i,t,e,n,r){return function s(o){if(o===Function)return n;ks(i.componentOffset>-1?Ss(i.index,t):t);let l=_L(t,e,n,o),c=s.__ngNextListenerFn__;for(;c;)l=_L(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ae(i=1){return function wA(i){return(Pt.lFrame.contextLView=function q0(i,t){for(;i>0;)t=t[Er],i--;return t}(i,Pt.lFrame.contextLView))[ze]}(i)}function Q8(i,t){let e=null;const n=function J1(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?Hv(i,s,!0):nD(n,s))return r}else e=r}return e}function or(i){const t=Se()[rr][he];if(!t.projection){const n=t.projection=Yd(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?Q8(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Yt(i,t=0,e){const n=Se(),r=Hn(),s=tu(r,bi+i,16,null,e||null);null===s.projection&&(s.projection=t),I_(),32!=(32&s.flags)&&function r1(i,t,e){Hx(t[xt],0,t,e,Ox(i,e,t),Bx(e.parent||t[he],e,t))}(r,n,s)}function zD(i,t,e){return HD(i,"",t,"",e),zD}function HD(i,t,e,n,r){const s=Se(),o=Xp(s,t,e,n);return o!==on&&so(Hn(),Di(),s,i,o,s[xt],r,!1),HD}function Iw(i,t){return i<<17|t<<2}function iu(i){return i>>17&32767}function $D(i){return 2|i}function Eh(i){return(131068&i)>>2}function GD(i,t){return-131069&i|t<<2}function WD(i){return 1|i}function AL(i,t,e,n,r){const s=i[e+1],o=null===t;let a=n?iu(s):Eh(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];rW(i[a],t)&&(l=!0,i[a+1]=n?WD(d):$D(d)),a=n?iu(d):Eh(d)}l&&(i[e+1]=n?$D(s):WD(s))}function rW(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Pc(i,t)>=0}const Rr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function DL(i){return i.substring(Rr.key,Rr.keyEnd)}function TL(i,t){const e=Rr.textEnd;return e===t?-1:(t=Rr.keyEnd=function lW(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,Rr.key=t,e),im(i,t,e))}function im(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Zo(i,t,e){return ml(i,t,e,!1),Zo}function ln(i,t){return ml(i,t,null,!0),ln}function ec(i,t){for(let e=function oW(i){return function RL(i){Rr.key=0,Rr.keyEnd=0,Rr.value=0,Rr.valueEnd=0,Rr.textEnd=i.length}(i),TL(i,im(i,0,Rr.textEnd))}(t);e>=0;e=TL(t,e))As(i,DL(t),!0)}function ml(i,t,e,n){const r=Se(),s=Hn(),o=Js(2);s.firstUpdatePass&&FL(s,i,o,n),t!==on&&Ps(r,o,t)&&NL(s,s.data[Zn()],r,r[xt],i,r[o+1]=function bW(i,t){return null==i||""===i||("string"==typeof t?i+=t:"object"==typeof i&&(i=gi(no(i)))),i}(t,e),n,o)}function OL(i,t){return t>=i.expandoStartIndex}function FL(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[Zn()],o=OL(i,e);UL(s,n)&&null===t&&!o&&(t=!1),t=function fW(i,t,e,n){const r=ih(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=ly(e=jD(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=jD(r,i,t,e,n),null===s){let l=function pW(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==Eh(n))return i[iu(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=jD(null,i,t,l[1],n),l=ly(l,t.attrs,n),function mW(i,t,e,n){i[iu(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else s=function gW(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=ly(n,i[s].hostAttrs,e);return ly(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function nW(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=iu(o),l=Eh(o);i[n]=e;let d,c=!1;if(Array.isArray(e)?(d=e[1],(null===d||Pc(e,d)>0)&&(c=!0)):d=e,r)if(0!==l){const p=iu(i[a+1]);i[n+1]=Iw(p,a),0!==p&&(i[p+1]=GD(i[p+1],n)),i[a+1]=function eW(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=Iw(a,0),0!==a&&(i[a+1]=GD(i[a+1],n)),a=n;else i[n+1]=Iw(l,0),0===a?a=n:i[l+1]=GD(i[l+1],n),l=n;c&&(i[n+1]=$D(i[n+1])),AL(i,d,n,!0),AL(i,d,n,!1),function iW(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Pc(s,t)>=0&&(e[n+1]=WD(e[n+1]))}(t,d,i,n,s),o=Iw(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function jD(i,t,e,n,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],n=ly(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function ly(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),As(i,o,!!e||t[++s]))}return void 0===i?null:i}function NL(i,t,e,n,r,s,o,a){if(!(3&t.type))return;const l=i.data,c=l[a+1],d=function tW(i){return 1==(1&i)}(c)?BL(l,t,e,r,Eh(c),o):void 0;Rw(d)||(Rw(s)||function J8(i){return 2==(2&i)}(c)&&(s=BL(l,null,e,r,a,o)),function s1(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:Ts.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ts.Important),i.setStyle(e,n,r,s))}}(n,o,Cc(Zn(),e),r,s))}function BL(i,t,e,n,r,s){const o=null===t;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,h=null===d;let p=e[r+1];p===on&&(p=h?jn:void 0);let m=h?Xd(p,n):d===n?p:void 0;if(c&&!Rw(m)&&(m=Xd(l,n)),Rw(m)&&(a=m,o))return a;const g=i[r+1];r=o?iu(g):Eh(g)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=Xd(l,n))}return a}function Rw(i){return void 0!==i}function UL(i,t){return 0!=(i.flags&(t?8:16))}function Oe(i,t=""){const e=Se(),n=Hn(),r=i+bi,s=n.firstCreatePass?tu(n,r,1,t,null):n.data[r],o=e[r]=function dv(i,t){return i.createText(t)}(e[xt],t);vh(n,e,o,s),xa(s,!1)}function ui(i){return Vi("",i,""),ui}function Vi(i,t,e){const n=Se(),r=Xp(n,i,t,e);return r!==on&&Hc(n,Zn(),r),Vi}function Ah(i,t,e,n,r){const s=Se(),o=Kp(s,i,t,e,n,r);return o!==on&&Hc(s,Zn(),o),Ah}function YL(i,t,e){!function gl(i,t,e,n){const r=Hn(),s=Js(2);r.firstUpdatePass&&FL(r,null,s,n);const o=Se();if(e!==on&&Ps(o,s,e)){const a=r.data[Zn()];if(UL(a,n)&&!OL(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=$f(l,e||"")),BD(r,a,o,e,n)}else!function yW(i,t,e,n,r,s,o,a){r===on&&(r=jn);let l=0,c=0,d=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==d||null!==h;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let b,g=null;d===h?(l+=2,c+=2,p!==m&&(g=h,b=m)):null===h||null!==d&&d<h?(l+=2,g=d):(c+=2,g=h,b=m),null!==g&&NL(i,t,e,n,g,b,o,a),d=l<r.length?r[l]:null,h=c<s.length?s[c]:null}}(r,a,o,o[xt],o[s+1],o[s+1]=function _W(i,t,e){if(null==e||""===e)return jn;const n=[],r=no(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}(As,ec,Xp(Se(),i,t,e),!0)}function tc(i,t,e){const n=Se();return Ps(n,$l(),t)&&so(Hn(),Di(),n,i,t,n[xt],e,!0),tc}function kw(i,t,e){const n=Se();if(Ps(n,$l(),t)){const s=Hn(),o=Di();so(s,o,n,i,t,QF(ih(s.data),o,n),e,!0)}return kw}const Dh=void 0;var UW=["en",[["a","p"],["AM","PM"],Dh],[["AM","PM"],Dh,Dh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Dh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Dh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Dh,"{1} 'at' {0}",Dh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function BW(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let rm={};function ao(i){const t=function VW(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=s2(t);if(e)return e;const n=t.split("-")[0];if(e=s2(n),e)return e;if("en"===n)return UW;throw new pe(701,!1)}function s2(i){return i in rm||(rm[i]=Rn.ng&&Rn.ng.common&&Rn.ng.common.locales&&Rn.ng.common.locales[i]),rm[i]}var lt=(()=>((lt=lt||{})[lt.LocaleId=0]="LocaleId",lt[lt.DayPeriodsFormat=1]="DayPeriodsFormat",lt[lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",lt[lt.DaysFormat=3]="DaysFormat",lt[lt.DaysStandalone=4]="DaysStandalone",lt[lt.MonthsFormat=5]="MonthsFormat",lt[lt.MonthsStandalone=6]="MonthsStandalone",lt[lt.Eras=7]="Eras",lt[lt.FirstDayOfWeek=8]="FirstDayOfWeek",lt[lt.WeekendRange=9]="WeekendRange",lt[lt.DateFormat=10]="DateFormat",lt[lt.TimeFormat=11]="TimeFormat",lt[lt.DateTimeFormat=12]="DateTimeFormat",lt[lt.NumberSymbols=13]="NumberSymbols",lt[lt.NumberFormats=14]="NumberFormats",lt[lt.CurrencyCode=15]="CurrencyCode",lt[lt.CurrencySymbol=16]="CurrencySymbol",lt[lt.CurrencyName=17]="CurrencyName",lt[lt.Currencies=18]="Currencies",lt[lt.Directionality=19]="Directionality",lt[lt.PluralCase=20]="PluralCase",lt[lt.ExtraData=21]="ExtraData",lt))();const sm="en-US";let o2=sm;function XD(i,t,e,n,r){if(i=Ot(i),Array.isArray(i))for(let s=0;s<i.length;s++)XD(i[s],t,e,n,r);else{const s=Hn(),o=Se();let a=Uc(i)?i:Ot(i.provide),l=Is(i);const c=Ar(),d=1048575&c.providerIndexes,h=c.directiveStart,p=c.providerIndexes>>20;if(Uc(i)||!i.multi){const m=new Hd(l,r,E),g=ZD(a,t,r?d:d+p,h);-1===g?(mn(oh(c,o),s,a),KD(s,i,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(m),o.push(m)):(e[g]=m,o[g]=m)}else{const m=ZD(a,t,d+p,h),g=ZD(a,t,d,d+p),v=g>=0&&e[g];if(r&&!v||!r&&!(m>=0&&e[m])){mn(oh(c,o),s,a);const y=function Nj(i,t,e,n,r){const s=new Hd(i,e,E);return s.multi=[],s.index=t,s.componentProviders=0,R2(s,r,n&&!e),s}(r?Lj:Fj,e.length,r,n,l);!r&&v&&(e[g].providerFactory=y),KD(s,i,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(y),o.push(y)}else KD(s,i,m>-1?m:g,R2(e[r?g:m],l,!r&&n));!r&&n&&v&&e[g].componentProviders++}}}function KD(i,t,e,n){const r=Uc(t),s=function k1(i){return!!i.useClass}(t);if(r||s){const l=(s?Ot(t.useClass):t).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const d=c.indexOf(e);-1===d?c.push(e,[n,l]):c[d+1].push(n,l)}else c.push(e,l)}}}function R2(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function ZD(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function Fj(i,t,e,n){return QD(this.multi,[])}function Lj(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Tc(e,e[dt],this.providerFactory.index,n);s=a.slice(0,o),QD(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],QD(r,s);return s}function QD(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function An(i,t=[]){return e=>{e.providersResolver=(n,r)=>function Oj(i,t,e){const n=Hn();if(n.firstCreatePass){const r=Mo(i);XD(e,n.data,n.blueprint,r,!0),XD(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class om{}class k2{}class P2 extends om{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new eL(this);const n=hr(t);this._bootstrapComponents=pl(n.bootstrap),this._r3Injector=fw(t,e,[{provide:om,useValue:this},{provide:Kl,useValue:this.componentFactoryResolver}],gi(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class JD extends k2{constructor(t){super(),this.moduleType=t}create(t){return new P2(this.moduleType,t)}}class Uj extends om{constructor(t,e,n){super(),this.componentFactoryResolver=new eL(this),this.instance=null;const r=new Wp([...t,{provide:om,useValue:this},{provide:Kl,useValue:this.componentFactoryResolver}],e||xh(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Nw(i,t,e=null){return new Uj(i,t,e).injector}let Vj=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const n=iw(0,e.type),r=n.length>0?Nw([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Pe({token:i,providedIn:"environment",factory:()=>new i(ee(ro))}),i})();function Bw(i){i.getStandaloneInjector=t=>t.get(Vj).getOrCreateStandaloneInjector(i)}function jr(i,t,e){const n=zr()+i,r=Se();return r[n]===on?Ql(r,n,e?t.call(e):t()):function sy(i,t){return i[t]}(r,n)}function am(i,t,e,n){return z2(Se(),zr(),i,t,e,n)}function V2(i,t,e,n,r,s,o){return function G2(i,t,e,n,r,s,o,a,l){const c=t+e;return function Ra(i,t,e,n,r,s){const o=Sh(i,t,e,n);return Sh(i,t+2,r,s)||o}(i,c,r,s,o,a)?Ql(i,c+4,l?n.call(l,r,s,o,a):n(r,s,o,a)):py(i,c+4)}(Se(),zr(),i,t,e,n,r,s,o)}function py(i,t){const e=i[t];return e===on?void 0:e}function z2(i,t,e,n,r,s){const o=t+e;return Ps(i,o,r)?Ql(i,o+1,s?n.call(s,r):n(r)):py(i,o+1)}function Xe(i,t){const e=Hn();let n;const r=i+bi;e.firstCreatePass?(n=function n6(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=rl(n.type)),o=Ks(E);try{const a=hp(!1),l=s();return hp(a),function q8(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,Se(),r,l),l}finally{Ks(o)}}function Je(i,t,e){const n=i+bi,r=Se(),s=Bd(r,n);return my(r,n)?z2(r,zr(),t,s.transform,e,s):s.transform(e)}function tT(i,t,e,n){const r=i+bi,s=Se(),o=Bd(s,r);return my(s,r)?function H2(i,t,e,n,r,s,o){const a=t+e;return Sh(i,a,r,s)?Ql(i,a+2,o?n.call(o,r,s):n(r,s)):py(i,a+2)}(s,zr(),t,o.transform,e,n,o):o.transform(e,n)}function my(i,t){return i[dt].data[t].pure}function nT(i){return t=>{setTimeout(i,void 0,t)}}const He=class a6 extends Re{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=nT(s),r&&(r=nT(r)),o&&(o=nT(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof Qt&&t.add(a),a}};function l6(){return this._results[Symbol.iterator]()}class lm{get changes(){return this._changes||(this._changes=new He)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=lm.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=l6)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=function Dr(i){return i.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function gp(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let To=(()=>{class i{}return i.__NG_ELEMENT_ID__=u6,i})();const c6=To,d6=class extends c6{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tView,r=wh(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[th]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Qs];return null!==o&&(r[Qs]=o.createEmbeddedView(n)),Ch(n,r,t),new iy(r)}};function u6(){return Uw(Ar(),Se())}function Uw(i,t){return 4&i.type?new d6(t,i,Fn(i,t)):null}let Yr=(()=>{class i{}return i.__NG_ELEMENT_ID__=h6,i})();function h6(){return q2(Ar(),Se())}const f6=Yr,j2=class extends f6{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Fn(this._hostTNode,this._hostLView)}get injector(){return new Ic(this._hostTNode,this._hostLView)}get parentInjector(){const t=lh(this._hostTNode,this._hostLView);if(up(t)){const e=sh(t,this._hostLView),n=rh(t);return new Ic(e[dt].data[n+8],e)}return new Ic(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Y2(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Ui}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function uh(i){return"function"==typeof i}(t);let a;if(o)a=e;else{const h=e||{};a=h.index,n=h.injector,r=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}const l=o?t:new ry(Gn(t)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const p=(o?c:this.parentInjector).get(ro,null);p&&(s=p)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(t,e){const n=t._lView,r=n[dt];if(function fA(i){return Cs(i[Bi])}(n)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const h=n[Bi],p=new j2(h,h[he],h[Bi]);p.detach(p.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function uv(i,t,e,n){const r=Ui+n,s=e.length;n>0&&(e[r-1][ws]=t),n<s-Ui?(t[ws]=e[r],G_(e,Ui+n,t)):(e.push(t),t[ws]=null),t[Bi]=e;const o=t[th];null!==o&&e!==o&&function QA(i,t){const e=i[il];t[rr]!==t[Bi][Bi][rr]&&(i[O0]=!0),null===e?i[il]=[t]:e.push(t)}(o,t);const a=t[Qs];null!==a&&a.insertView(i),t[pn]|=64}(r,n,o,s);const a=mv(s,o),l=n[xt],c=Ip(l,o[Jf]);return null!==c&&function XA(i,t,e,n,r,s){n[nl]=r,n[he]=t,yh(i,n,e,1,r,s)}(r,o[he],l,n,c,a),t.attachToViewContainerRef(),G_(iT(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Y2(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=hv(this._lContainer,e);n&&(_p(iT(this._lContainer),e),Px(n[dt],n))}detach(t){const e=this._adjustIndex(t,-1),n=hv(this._lContainer,e);return n&&null!=_p(iT(this._lContainer),e)?new iy(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function Y2(i){return i[ep]}function iT(i){return i[ep]||(i[ep]=[])}function q2(i,t){let e;const n=t[i.index];if(Cs(n))e=n;else{let r;if(8&i.type)r=I(n);else{const s=t[xt];r=s.createComment("");const o=Ai(i,t);Lc(s,Ip(s,o),r,function n1(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=gn(n,t,r,i),Ti(t,e)}return new j2(e,i,t)}class rT{constructor(t){this.queryList=t,this.matches=null}clone(){return new rT(this.queryList)}setDirty(){this.queryList.setDirty()}}class sT{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new sT(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==J2(t,e).matches&&this.queries[e].setDirty()}}class X2{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class oT{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new oT(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class aT{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new aT(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,p6(e,s)),this.matchTNodeWithReadOption(t,e,is(e,t,s,!1,!1))}else n===To?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,is(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===vt||r===Yr||r===To&&4&e.type)this.addMatch(e.index,-2);else{const s=is(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function p6(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function g6(i,t,e,n){return-1===e?function m6(i,t){return 11&i.type?Fn(i,t):4&i.type?Uw(i,t):null}(t,i):-2===e?function _6(i,t,e){return e===vt?Fn(t,i):e===To?Uw(t,i):e===Yr?q2(t,i):void 0}(i,t,n):Tc(i,i[dt],e,t)}function K2(i,t,e,n){const r=t[Qs].queries[n];if(null===r.matches){const s=i.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:g6(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function lT(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=K2(i,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=t[-l];for(let h=Ui;h<d.length;h++){const p=d[h];p[th]===p[Bi]&&lT(p[dt],p,c,n)}if(null!==d[il]){const h=d[il];for(let p=0;p<h.length;p++){const m=h[p];lT(m[dt],m,c,n)}}}}}return n}function Et(i){const t=Se(),e=Hn(),n=Gl();Es(n+1);const r=J2(e,n);if(i.dirty&&function Sc(i){return 4==(4&i[pn])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?lT(e,t,n,[]):K2(e,t,r,n);i.reset(s,sw),i.notifyOnChanges()}return!0}return!1}function Nn(i,t,e){const n=Hn();n.firstCreatePass&&(Q2(n,new X2(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),Z2(n,Se(),t)}function Yi(i,t,e,n){const r=Hn();if(r.firstCreatePass){const s=Ar();Q2(r,new X2(t,e,n),s.index),function y6(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}Z2(r,Se(),e)}function At(){return function v6(i,t){return i[Qs].queries[t].queryList}(Se(),Gl())}function Z2(i,t,e){const n=new lm(4==(4&e));ww(i,t,n,n.destroy),null===t[Qs]&&(t[Qs]=new sT),t[Qs].queries.push(new rT(n))}function Q2(i,t,e){null===i.queries&&(i.queries=new oT),i.queries.track(new aT(t,e))}function J2(i,t){return i.queries.getByIndex(t)}function ru(i,t){return Uw(i,t)}function zw(...i){}const Hw=new me("Application Initializer");let $w=(()=>{class i{constructor(e){this.appInits=e,this.resolve=zw,this.reject=zw,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(ay(s))e.push(s);else if(UD(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(ee(Hw,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const um=new me("AppId",{providedIn:"root",factory:function _N(){return`${pT()}${pT()}${pT()}`}});function pT(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vN=new me("Platform Initializer"),mT=new me("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kr=new me("AnimationModuleType");let U6=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const nc=new me("LocaleId",{providedIn:"root",factory:()=>Lt(nc,Ft.Optional|Ft.SkipSelf)||function V6(){return typeof $localize<"u"&&$localize.locale||sm}()});class H6{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let yN=(()=>{class i{compileModuleSync(e){return new JD(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=pl(hr(e).declarations).reduce((o,a)=>{const l=Gn(a);return l&&o.push(new ry(l)),o},[]);return new H6(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const W6=(()=>Promise.resolve(0))();function gT(i){typeof Zone>"u"?W6.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class gt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new He(!1),this.onMicrotaskEmpty=new He(!1),this.onStable=new He(!1),this.onError=new He(!1),typeof Zone>"u")throw new pe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function j6(){let i=Rn.requestAnimationFrame,t=Rn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function X6(i){const t=()=>{!function q6(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Rn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,vT(i),i.isCheckStableRunning=!0,_T(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),vT(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,a)=>{try{return wN(i),e.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),MN(i)}},onInvoke:(e,n,r,s,o,a,l)=>{try{return wN(i),e.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),MN(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,vT(i),_T(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!gt.isInAngularZone())throw new pe(909,!1)}static assertNotInAngularZone(){if(gt.isInAngularZone())throw new pe(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,Y6,zw,zw);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Y6={};function _T(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function vT(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function wN(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function MN(i){i._nesting--,_T(i)}class K6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new He,this.onMicrotaskEmpty=new He,this.onStable=new He,this.onError=new He}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const CN=new me(""),Gw=new me("");let xT,yT=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,xT||(function Z6(i){xT=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{gt.assertNotInAngularZone(),gT(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())gT(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(ee(gt),ee(bT),ee(Gw))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),bT=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return xT?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const $c=!1;let su=null;const SN=new me("AllowMultipleToken"),wT=new me("PlatformDestroyListeners"),EN=new me("appBootstrapListener");class AN{constructor(t,e){this.name=t,this.token=e}}function TN(i,t,e=[]){const n=`Platform: ${t}`,r=new me(n);return(s=[])=>{let o=MT();if(!o||o.injector.get(SN,!1)){const a=[...e,...s,{provide:r,useValue:!0}];i?i(a):function e9(i){if(su&&!su.get(SN,!1))throw new pe(400,!1);su=i;const t=i.get(RN);(function DN(i){const t=i.get(vN,null);t&&t.forEach(e=>e())})(i)}(function IN(i=[],t){return ji.create({name:t,providers:[{provide:Rv,useValue:"platform"},{provide:wT,useValue:new Set([()=>su=null])},...i]})}(a,n))}return function n9(i){const t=MT();if(!t)throw new pe(401,!1);return t}()}}function MT(){return su?.get(RN)??null}let RN=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function PN(i,t){let e;return e="noop"===i?new K6:("zone.js"===i?void 0:i)||new gt(t),e}(n?.ngZone,function kN(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:gt,useValue:r}];return r.run(()=>{const o=ji.create({providers:s,parent:this.injector,name:e.moduleType.name}),a=e.create(o),l=a.injector.get(fl,null);if(!l)throw new pe(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{Ww(this._modules,a),c.unsubscribe()})}),function ON(i,t,e){try{const n=e();return ay(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get($w);return c.runInitializers(),c.donePromise.then(()=>(function a2(i){Sn(i,"Expected localeId to be defined"),"string"==typeof i&&(o2=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(nc,sm)||sm),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,n=[]){const r=FN({},n);return function Q6(i,t,e){const n=new JD(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(hm);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new pe(-403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pe(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(wT,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(ee(ji))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function FN(i,t){return Array.isArray(t)?t.reduce(FN,i):{...i,...t}}let hm=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new In(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new In(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{gt.assertNotInAngularZone(),gT(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{gt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Cr(s,o.pipe(Hf()))}bootstrap(e,n){const r=e instanceof Fv;if(!this._injector.get($w).done){!r&&function Td(i){const t=Gn(i)||Vr(i)||xs(i);return null!==t&&t.standalone}(e);throw new pe(405,$c)}let o;o=r?e:this._injector.get(Kl).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function J6(i){return i.isBoundToModule}(o)?void 0:this._injector.get(om),c=o.create(ji.NULL,[],n||o.selector,a),d=c.location.nativeElement,h=c.injector.get(CN,null);return h?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Ww(this.components,c),h?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new pe(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Ww(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const n=this._injector.get(EN,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Ww(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new pe(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(ee(gt),ee(ro),ee(fl))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Ww(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let Yn=(()=>{class i{}return i.__NG_ELEMENT_ID__=s9,i})();function s9(i){return function o9(i,t,e){if(Rd(i)&&!e){const n=Ss(i.index,t);return new iy(n,n)}return 47&i.type?new iy(t[rr],t):null}(Ar(),Se(),16==(16&i))}class VN{constructor(){}supports(t){return Dw(t)}create(t){return new h9(t)}}const u9=(i,t)=>t;class h9{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||u9}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<HN(n,r,s)?e:n,a=HN(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,g=m+p;d<=g&&g<c&&(s[p]=m+1)}s[o.previousIndex]=d-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Dw(t))throw new pe(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),n=!0),e=e._next}else r=0,function G8(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Symbol.iterator]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new f9(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new zN),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new zN),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class f9{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class p9{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class zN{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new p9,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HN(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class $N{constructor(){}supports(t){return t instanceof Map||ND(t)}create(){return new m9}}class m9{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||ND(t)))throw new pe(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new g9(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class g9{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GN(){return new qw([new VN])}let qw=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||GN()),deps:[[i,new Aa,new Ds]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new pe(901,!1)}}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:GN}),i})();function WN(){return new _y([new $N])}let _y=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||WN()),deps:[[i,new Aa,new Ds]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new pe(901,!1)}}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:WN}),i})();const y9=TN(null,"core",[]);let b9=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(ee(hm))},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();let DT=null;function Gc(){return DT}class M9{}const qt=new me("DocumentToken");let TT=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(){return function C9(){return ee(jN)}()},providedIn:"platform"}),i})();const S9=new me("Location Initialized");let jN=(()=>{class i extends TT{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Gc().getBaseHref(this._doc)}onPopState(e){const n=Gc().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Gc().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){YN()?this._history.pushState(e,n,r):this._location.hash=r}replaceState(e,n,r){YN()?this._history.replaceState(e,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:function(){return function E9(){return new jN(ee(qt))}()},providedIn:"platform"}),i})();function YN(){return!!window.history.pushState}function IT(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function qN(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Wc(i){return i&&"?"!==i[0]?"?"+i:i}let Ih=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(){return Lt(KN)},providedIn:"root"}),i})();const XN=new me("appBaseHref");let KN=(()=>{class i extends Ih{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Lt(qt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return IT(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Wc(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Wc(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Wc(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(TT),ee(XN,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),A9=(()=>{class i extends Ih{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=IT(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Wc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Wc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(TT),ee(XN,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),vy=(()=>{class i{constructor(e){this._subject=new He,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function I9(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(qN(ZN(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Wc(n))}normalize(e){return i.stripTrailingSlash(function T9(i,t){if(!i||!t.startsWith(i))return t;const e=t.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,ZN(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wc(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Wc(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Wc,i.joinWithSlash=IT,i.stripTrailingSlash=qN,i.\u0275fac=function(e){return new(e||i)(ee(Ih))},i.\u0275prov=Pe({token:i,factory:function(){return function D9(){return new vy(ee(Ih))}()},providedIn:"root"}),i})();function ZN(i){return i.replace(/\/index.html$/,"")}var Io=(()=>((Io=Io||{})[Io.Decimal=0]="Decimal",Io[Io.Percent=1]="Percent",Io[Io.Currency=2]="Currency",Io[Io.Scientific=3]="Scientific",Io))(),$t=(()=>(($t=$t||{})[$t.Decimal=0]="Decimal",$t[$t.Group=1]="Group",$t[$t.List=2]="List",$t[$t.PercentSign=3]="PercentSign",$t[$t.PlusSign=4]="PlusSign",$t[$t.MinusSign=5]="MinusSign",$t[$t.Exponential=6]="Exponential",$t[$t.SuperscriptingExponent=7]="SuperscriptingExponent",$t[$t.PerMille=8]="PerMille",$t[$t.Infinity=9]="Infinity",$t[$t.NaN=10]="NaN",$t[$t.TimeSeparator=11]="TimeSeparator",$t[$t.CurrencyDecimal=12]="CurrencyDecimal",$t[$t.CurrencyGroup=13]="CurrencyGroup",$t))();function ka(i,t){const e=ao(i),n=e[lt.NumberSymbols][t];if(typeof n>"u"){if(t===$t.CurrencyDecimal)return e[lt.NumberSymbols][$t.Decimal];if(t===$t.CurrencyGroup)return e[lt.NumberSymbols][$t.Group]}return n}const n7=/^(\d+)?\.((\d+)(-(\d+))?)?$/,iB=22,iM=".",by="0",i7=";",r7=",",FT="#";function BT(i){const t=parseInt(i);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+i);return t}const VT=/\s+/,oB=[];let pm=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this.initialClasses=oB,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(VT):oB}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(VT):e}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const n of e)this._updateState(n,!0);else if(null!=e)for(const n of Object.keys(e))this._updateState(n,Boolean(e[n]));this._applyStateDiff()}_updateState(e,n){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const n=e[0],r=e[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(e,n){(e=e.trim()).length>0&&e.split(VT).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(E(qw),E(_y),E(vt),E(hl))},i.\u0275dir=ve({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class m7{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Os=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new m7(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),cB(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{cB(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(E(Yr),E(To),E(qw))},i.\u0275dir=ve({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function cB(i,t){i.context.$implicit=t.item}let hi=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new _7,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){dB("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){dB("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(E(Yr),E(To))},i.\u0275dir=ve({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class _7{constructor(){this.$implicit=null,this.ngIf=null}}function dB(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${gi(t)}'.`)}class zT{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let xy=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const n of this._defaultViews)n.enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),HT=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new zT(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(E(Yr),E(To),E(xy,9))},i.\u0275dir=ve({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),uB=(()=>{class i{constructor(e,n,r){r._addDefault(new zT(e,n))}}return i.\u0275fac=function(e){return new(e||i)(E(Yr),E(To),E(xy,9))},i.\u0275dir=ve({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),rM=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:Ts.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(_y),E(hl))},i.\u0275dir=ve({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),wy=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(E(Yr))},i.\u0275dir=ve({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[xi]}),i})();function yl(i,t){return new pe(2100,!1)}class y7{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}}class b7{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}}const x7=new b7,w7=new y7;let co=(()=>{class i{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(ay(e))return x7;if(mL(e))return w7;throw yl()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(E(Yn,16))},i.\u0275pipe=Wi({name:"async",type:i,pure:!1,standalone:!0}),i})(),fB=(()=>{class i{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=pB}transform(e,n=pB){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const r=this.differ.diff(e),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function F7(i,t){return{key:i,value:t}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(e){return new(e||i)(E(_y,16))},i.\u0275pipe=Wi({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function pB(i,t){const e=i.key,n=t.key;if(e===n)return 0;if(void 0===e)return 1;if(void 0===n)return-1;if(null===e)return 1;if(null===n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const r=String(e),s=String(n);return r==s?0:r<s?-1:1}let mB=(()=>{class i{constructor(e){this._locale=e}transform(e,n,r){if(!function $T(i){return!(null==i||""===i||i!=i)}(e))return null;r=r||this._locale;try{return function l7(i,t,e){return function LT(i,t,e,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function d7(i){let n,r,s,o,a,t=Math.abs(i)+"",e=0;for((r=t.indexOf(iM))>-1&&(t=t.replace(iM,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===by;s++);if(s===(a=t.length))n=[0],r=1;else{for(a--;t.charAt(a)===by;)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(t.charAt(s))}return r>iB&&(n=n.splice(0,iB-1),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(i);o&&(c=function c7(i){if(0===i.digits[0])return i;const t=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===t?i.digits.push(0,0):1===t&&i.digits.push(0),i.integerLen+=2),i}(c));let d=t.minInt,h=t.minFrac,p=t.maxFrac;if(s){const M=s.match(n7);if(null===M)throw new Error(`${s} is not a valid digit info`);const x=M[1],C=M[3],F=M[5];null!=x&&(d=BT(x)),null!=C&&(h=BT(C)),null!=F?p=BT(F):null!=C&&h>p&&(p=h)}!function u7(i,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(t,r),e);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let h=o;h<n.length;h++)n[h]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let h=1;h<o;h++)n[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=t+i.integerLen,d=n.reduceRight(function(h,p,m,g){return g[m]=(p+=h)<10?p:p-10,l&&(0===g[m]&&m>=c?g.pop():l=!1),p>=10?1:0},0);d&&(n.unshift(d),i.integerLen++)}(c,h,p);let m=c.digits,g=c.integerLen;const b=c.exponent;let v=[];for(l=m.every(M=>!M);g<d;g++)m.unshift(0);for(;g<0;g++)m.unshift(0);g>0?v=m.splice(g,m.length):(v=m,m=[0]);const y=[];for(m.length>=t.lgSize&&y.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)y.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&y.unshift(m.join("")),a=y.join(ka(e,n)),v.length&&(a+=ka(e,r)+v.join("")),b&&(a+=ka(e,$t.Exponential)+"+"+b)}else a=ka(e,$t.Infinity);return a=i<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(i,function NT(i,t="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(i7),r=n[0],s=n[1],o=-1!==r.indexOf(iM)?r.split(iM):[r.substring(0,r.lastIndexOf(by)+1),r.substring(r.lastIndexOf(by)+1)],a=o[0],l=o[1]||"";e.posPre=a.substring(0,a.indexOf(FT));for(let d=0;d<l.length;d++){const h=l.charAt(d);h===by?e.minFrac=e.maxFrac=d+1:h===FT?e.maxFrac=d+1:e.posSuf+=h}const c=a.split(r7);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const d=r.length-e.posPre.length-e.posSuf.length,h=s.indexOf(FT);e.negPre=s.substring(0,h).replace(/'/g,""),e.negSuf=s.slice(h+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}(function RT(i,t){return ao(i)[lt.NumberFormats][t]}(t,Io.Decimal),ka(t,$t.MinusSign)),t,$t.Group,$t.Decimal,e)}(function GT(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(e),r,n)}catch(s){throw yl()}}}return i.\u0275fac=function(e){return new(e||i)(E(nc,16))},i.\u0275pipe=Wi({name:"number",type:i,pure:!0,standalone:!0}),i})();let uo=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();const gB="browser";let H7=(()=>{class i{}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:()=>new $7(ee(qt),window)}),i})();class $7{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function G7(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=_B(this.window.history)||_B(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _B(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class vY extends M9{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class YT extends vY{static makeCurrent(){!function w9(i){DT||(DT=i)}(new YT)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function yY(){return Cy=Cy||document.querySelector("base"),Cy?Cy.getAttribute("href"):null}();return null==e?null:function bY(i){aM=aM||document.createElement("a"),aM.setAttribute("href",i);const t=aM.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Cy=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function f7(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let aM,Cy=null;const wB=new me("TRANSITION_ID"),wY=[{provide:Hw,useFactory:function xY(i,t,e){return()=>{e.get($w).donePromise.then(()=>{const n=Gc(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[wB,qt,ji],multi:!0}];let CY=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const lM=new me("EventManagerPlugins");let cM=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(ee(lM),ee(gt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class MB{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Gc().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let CB=(()=>{class i{constructor(){this.usageCount=new Map}addStyles(e){for(const n of e)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(e){for(const n of e)0===this.changeUsageCount(n,-1)&&this.onStyleRemoved(n)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,n){const r=this.usageCount;let s=r.get(e)??0;return s+=n,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),Sy=(()=>{class i extends CB{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){const n=this.styleRef;n.get(e)?.forEach(s=>s.remove()),n.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,n){const r=this.doc.createElement("style");r.textContent=n,e.appendChild(r);const s=this.styleRef.get(n);s?s.push(r):this.styleRef.set(n,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const qT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},XT=/%COMP%/g,AB=new me("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function DB(i,t){return t.flat(100).map(e=>e.replace(XT,i))}function TB(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let dM=(()=>{class i{constructor(e,n,r,s){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new KT(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,n);return r instanceof kB?r.applyToHost(e):r instanceof ZT&&r.applyStyles(),r}getOrCreateRenderer(e,n){const r=this.rendererByCompId;let s=r.get(n.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(n.encapsulation){case Zs.Emulated:s=new kB(o,a,n,this.appId,l);break;case Zs.ShadowDom:return new RY(o,a,e,n);default:s=new ZT(o,a,n,l)}s.onDestroy=()=>r.delete(n.id),r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(ee(cM),ee(Sy),ee(um),ee(AB))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class KT{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(qT[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(RB(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(RB(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=qT[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=qT[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Ts.DashCase|Ts.Important)?t.style.setProperty(e,n,r&Ts.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Ts.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,TB(n)):this.eventManager.addEventListener(t,e,TB(n))}}function RB(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class RY extends KT{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=DB(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ZT extends KT{constructor(t,e,n,r,s=n.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=DB(s,n.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class kB extends ZT{constructor(t,e,n,r,s){const o=r+"-"+n.id;super(t,e,n,s,o),this.contentAttr=function DY(i){return"_ngcontent-%COMP%".replace(XT,i)}(o),this.hostAttr=function TY(i){return"_nghost-%COMP%".replace(XT,i)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}let kY=(()=>{class i extends MB{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const PB=["alt","control","meta","shift"],PY={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OY={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let FY=(()=>{class i extends MB{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gc().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),PB.forEach(c=>{const d=n.indexOf(c);d>-1&&(n.splice(d,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=PY[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),PB.forEach(o=>{o!==r&&(0,OY[o])(e)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const UY=TN(y9,"browser",[{provide:mT,useValue:gB},{provide:vN,useValue:function LY(){YT.makeCurrent()},multi:!0},{provide:qt,useFactory:function BY(){return function c1(i){yv=i}(document),document},deps:[]}]),LB=new me(""),NB=[{provide:Gw,useClass:class MY{addToWindow(t){Rn.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Rn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Rn.getAllAngularRootElements=()=>t.getAllRootElements(),Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(n=>{const r=Rn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Gc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:CN,useClass:yT,deps:[gt,bT,Gw]},{provide:yT,useClass:yT,deps:[gt,bT,Gw]}],BB=[{provide:Rv,useValue:"root"},{provide:fl,useFactory:function NY(){return new fl},deps:[]},{provide:lM,useClass:kY,multi:!0,deps:[qt,gt,mT]},{provide:lM,useClass:FY,multi:!0,deps:[qt]},{provide:dM,useClass:dM,deps:[cM,Sy,um,AB]},{provide:Zl,useExisting:dM},{provide:CB,useExisting:Sy},{provide:Sy,useClass:Sy,deps:[qt]},{provide:cM,useClass:cM,deps:[lM,gt]},{provide:class W7{},useClass:CY,deps:[]},[]];let UB=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:um,useValue:e.appId},{provide:wB,useExisting:um},wY]}}}return i.\u0275fac=function(e){return new(e||i)(ee(LB,12))},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[...BB,...NB],imports:[uo,b9]}),i})(),VB=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:function(e){let n=null;return n=e?new e:function zY(){return new VB(ee(qt))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let eI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(e){let n=null;return n=e?new(e||i):ee($B),n},providedIn:"root"}),i})(),$B=(()=>{class i extends eI{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case Qn.NONE:return n;case Qn.HTML:return Ta(n,"HTML")?no(n):Jx(this._doc,String(n)).toString();case Qn.STYLE:return Ta(n,"Style")?no(n):n;case Qn.SCRIPT:if(Ta(n,"Script"))return no(n);throw new Error("unsafe value used in a script context");case Qn.URL:return Ta(n,"URL")?no(n):bh(String(n));case Qn.RESOURCE_URL:if(Ta(n,"ResourceURL"))return no(n);throw new Error(`unsafe value used in a resource URL context (see ${Yu})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${Yu})`)}}bypassSecurityTrustHtml(e){return function m1(i){return new d1(i)}(e)}bypassSecurityTrustStyle(e){return function g1(i){return new u1(i)}(e)}bypassSecurityTrustScript(e){return function _1(i){return new h1(i)}(e)}bypassSecurityTrustUrl(e){return function v1(i){return new f1(i)}(e)}bypassSecurityTrustResourceUrl(e){return function y1(i){return new Lp(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:function(e){let n=null;return n=e?new e:function jY(i){return new $B(i.get(qt))}(ee(ji)),n},providedIn:"root"}),i})();function mt(...i){return Ni(i,$u(i))}class $e extends Re{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const mm=z(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:YY}=Array,{getPrototypeOf:qY,prototype:XY,keys:KY}=Object;function GB(i){if(1===i.length){const t=i[0];if(YY(t))return{args:t,keys:null};if(function ZY(i){return i&&"object"==typeof i&&qY(i)===XY}(t)){const e=KY(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:QY}=Array;function tI(i){return rt(t=>function JY(i,t){return QY(t)?i(...t):i(t)}(i,t))}function WB(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function Qo(...i){const t=$u(i),e=C0(i),{args:n,keys:r}=GB(i);if(0===n.length)return Ni([],t);const s=new In(function eq(i,t,e=Ka){return n=>{jB(t,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)jB(t,()=>{const c=Ni(i[l],t);let d=!1;c.subscribe(Xn(n,h=>{s[l]=h,d||(d=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>WB(r,o):Ka));return e?s.pipe(tI(e)):s}function jB(i,t,e){i?Ja(e,i,t):t()}function Ey(...i){return function tq(){return Md(1)}()(Ni(i,$u(i)))}function Ay(i){return new In(t=>{Mr(i()).subscribe(t)})}function gm(i,t){const e=dn(i)?i:()=>i,n=r=>r.error(e());return new In(t?r=>t.schedule(n,0,r):n)}function nI(){return ni((i,t)=>{let e=null;i._refCount++;const n=Xn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class YB extends In{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,u0(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Qt;const e=this.getSubject();t.add(this.source.subscribe(Xn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Qt.EMPTY)}return t}refCount(){return nI()(this)}}function Fs(i,t){return ni((e,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();e.subscribe(Xn(n,l=>{r?.unsubscribe();let c=0;const d=s++;Mr(i(l,d)).subscribe(r=Xn(n,h=>n.next(t?t(l,h,d,c++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Oi(i){return i<=0?()=>bo:ni((t,e)=>{let n=0;t.subscribe(Xn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function Ro(...i){const t=$u(i);return ni((e,n)=>{(t?Ey(i,e,t):Ey(i,e)).subscribe(n)})}function hn(i,t){return ni((e,n)=>{let r=0;e.subscribe(Xn(n,s=>i.call(t,s,r++)&&n.next(s)))})}function uM(i){return ni((t,e)=>{let n=!1;t.subscribe(Xn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function qB(i=nq){return ni((t,e)=>{let n=!1;t.subscribe(Xn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function nq(){return new mm}function au(i,t){const e=arguments.length>=2;return n=>n.pipe(i?hn((r,s)=>i(r,s,n)):Ka,Oi(1),e?uM(t):qB(()=>new mm))}function lu(i,t){return dn(t)?ir(i,t,1):ir(i,1)}function zi(i,t,e){const n=dn(i)||t||e?{next:i,error:t,complete:e}:i;return n?ni((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(Xn(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Ka}function Yc(i){return ni((t,e)=>{let s,n=null,r=!1;n=t.subscribe(Xn(e,void 0,void 0,o=>{s=Mr(i(o,Yc(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function iI(i,t){return ni(function iq(i,t,e,n,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Xn(o,d=>{const h=c++;l=a?i(l,d,h):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(i,t,arguments.length>=2,!0))}function rI(i){return i<=0?()=>bo:ni((t,e)=>{let n=[];t.subscribe(Xn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function XB(i,t){const e=arguments.length>=2;return n=>n.pipe(i?hn((r,s)=>i(r,s,n)):Ka,rI(1),e?uM(t):qB(()=>new mm))}function KB(i,t=!1){return ni((e,n)=>{let r=0;e.subscribe(Xn(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}function ZB(i){return rt(()=>i)}function cu(i){return ni((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const _n="primary",Dy=Symbol("RouteTitle");class rq{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function _m(i){return new rq(i)}function sq(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function ic(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!QB(i[r],t[r]))return!1;return!0}function QB(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function JB(i){return Array.prototype.concat.apply([],i)}function e3(i){return i.length>0?i[i.length-1]:null}function ls(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function du(i){return UD(i)?i:ay(i)?Ni(Promise.resolve(i)):mt(i)}const hM=!1,aq={exact:function r3(i,t,e){if(!Rh(i.segments,t.segments)||!fM(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!r3(i.children[n],t.children[n],e))return!1;return!0},subset:s3},t3={exact:function lq(i,t){return ic(i,t)},subset:function cq(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>QB(i[e],t[e]))},ignored:()=>!0};function n3(i,t,e){return aq[e.paths](i.root,t.root,e.matrixParams)&&t3[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function s3(i,t,e){return o3(i,t,t.segments,e)}function o3(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!Rh(r,e)||t.hasChildren()||!fM(r,e,n))}if(i.segments.length===e.length){if(!Rh(i.segments,e)||!fM(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!s3(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(Rh(i.segments,r)&&fM(i.segments,r,n)&&i.children[_n])&&o3(i.children[_n],t,s,n)}}function fM(i,t,e){return t.every((n,r)=>t3[e](i[r].parameters,n.parameters))}class uu{constructor(t=new Dn([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_m(this.queryParams)),this._queryParamMap}toString(){return hq.serialize(this)}}class Dn{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ls(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pM(this)}}class Ty{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=_m(this.parameters)),this._parameterMap}toString(){return c3(this)}}function Rh(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let Iy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(){return new sI},providedIn:"root"}),i})();class sI{parse(t){const e=new xq(t);return new uu(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Ry(t.root,!0)}`,n=function mq(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${mM(e)}=${mM(r)}`).join("&"):`${mM(e)}=${mM(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function fq(i){return encodeURI(i)}(t.fragment)}`:""}`}}const hq=new sI;function pM(i){return i.segments.map(t=>c3(t)).join("/")}function Ry(i,t){if(!i.hasChildren())return pM(i);if(t){const e=i.children[_n]?Ry(i.children[_n],!1):"",n=[];return ls(i.children,(r,s)=>{s!==_n&&n.push(`${s}:${Ry(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function uq(i,t){let e=[];return ls(i.children,(n,r)=>{r===_n&&(e=e.concat(t(n,r)))}),ls(i.children,(n,r)=>{r!==_n&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===_n?[Ry(i.children[_n],!1)]:[`${r}:${Ry(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[_n]?`${pM(i)}/${e[0]}`:`${pM(i)}/(${e.join("//")})`}}function a3(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mM(i){return a3(i).replace(/%3B/gi,";")}function oI(i){return a3(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gM(i){return decodeURIComponent(i)}function l3(i){return gM(i.replace(/\+/g,"%20"))}function c3(i){return`${oI(i.path)}${function pq(i){return Object.keys(i).map(t=>`;${oI(t)}=${oI(i[t])}`).join("")}(i.parameters)}`}const gq=/^[^\/()?;=#]+/;function _M(i){const t=i.match(gq);return t?t[0]:""}const _q=/^[^=?&#]+/,yq=/^[^&#]+/;class xq{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Dn([],{}):new Dn([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[_n]=new Dn(t,e)),n}parseSegment(){const t=_M(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new pe(4009,hM);return this.capture(t),new Ty(gM(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=_M(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=_M(this.remaining);r&&(n=r,this.capture(n))}t[gM(e)]=gM(n)}parseQueryParam(t){const e=function vq(i){const t=i.match(_q);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function bq(i){const t=i.match(yq);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=l3(e),s=l3(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=_M(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new pe(4010,hM);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=_n);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[_n]:new Dn([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new pe(4011,hM)}}function aI(i){return i.segments.length>0?new Dn([],{[_n]:i}):i}function vM(i){const t={};for(const n of Object.keys(i.children)){const s=vM(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function wq(i){if(1===i.numberOfChildren&&i.children[_n]){const t=i.children[_n];return new Dn(i.segments.concat(t.segments),t.children)}return i}(new Dn(i.segments,t))}function kh(i){return i instanceof uu}const lI=!1;function Mq(i,t,e,n,r){if(0===e.length)return vm(t.root,t.root,t.root,n,r);const s=function p3(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new f3(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return ls(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new f3(e,t,n)}(e);return s.toRoot()?vm(t.root,t.root,new Dn([],{}),n,r):function o(l){const c=function Sq(i,t,e,n){if(i.isAbsolute)return new ym(t.root,!0,0);if(-1===n)return new ym(e,e===t.root,0);return function m3(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new pe(4005,lI&&"Invalid number of '../'");r=n.segments.length}return new ym(n,!1,r-s)}(e,n+(ky(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,l),d=c.processChildren?bm(c.segmentGroup,c.index,s.commands):cI(c.segmentGroup,c.index,s.commands);return vm(t.root,c.segmentGroup,d,n,r)}(i.snapshot?._lastPathIndex)}function ky(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Py(i){return"object"==typeof i&&null!=i&&i.outlets}function vm(i,t,e,n,r){let o,s={};n&&ls(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=i===t?e:h3(i,t,e);const a=aI(vM(o));return new uu(a,s,r)}function h3(i,t,e){const n={};return ls(i.children,(r,s)=>{n[s]=r===t?e:h3(r,t,e)}),new Dn(i.segments,n)}class f3{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ky(n[0]))throw new pe(4003,lI&&"Root segment cannot have matrix parameters");const r=n.find(Py);if(r&&r!==e3(n))throw new pe(4004,lI&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ym{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function cI(i,t,e){if(i||(i=new Dn([],{})),0===i.segments.length&&i.hasChildren())return bm(i,t,e);const n=function Aq(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],a=e[n];if(Py(a))break;const l=`${a}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!_3(l,c,o))return s;n+=2}else{if(!_3(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Dn(i.segments.slice(0,n.pathIndex),{});return s.children[_n]=new Dn(i.segments.slice(n.pathIndex),i.children),bm(s,0,r)}return n.match&&0===r.length?new Dn(i.segments,{}):n.match&&!i.hasChildren()?dI(i,t,e):n.match?bm(i,0,r):dI(i,t,e)}function bm(i,t,e){if(0===e.length)return new Dn(i.segments,{});{const n=function Eq(i){return Py(i[0])?i[0].outlets:{[_n]:i}}(e),r={};if(!n[_n]&&i.children[_n]&&1===i.numberOfChildren&&0===i.children[_n].segments.length){const s=bm(i.children[_n],t,e);return new Dn(i.segments,s.children)}return ls(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=cI(i.children[o],t,s))}),ls(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new Dn(i.segments,r)}}function dI(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Py(s)){const l=Dq(s.outlets);return new Dn(n,l)}if(0===r&&ky(e[0])){n.push(new Ty(i.segments[t].path,g3(e[0]))),r++;continue}const o=Py(s)?s.outlets[_n]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&ky(a)?(n.push(new Ty(o,g3(a))),r+=2):(n.push(new Ty(o,{})),r++)}return new Dn(n,{})}function Dq(i){const t={};return ls(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=dI(new Dn([],{}),0,e))}),t}function g3(i){const t={};return ls(i,(e,n)=>t[n]=`${e}`),t}function _3(i,t,e){return i==e.path&&ic(t,e.parameters)}const Oy="imperative";class rc{constructor(t,e){this.id=t,this.url=e}}class uI extends rc{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ph extends rc{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class yM extends rc{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class bM extends rc{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=16}}class hI extends rc{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tq extends rc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Iq extends rc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rq extends rc{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class kq extends rc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pq extends rc{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oq{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Fq{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lq{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Nq{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bq{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uq{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class v3{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let Hq=(()=>{class i{createUrlTree(e,n,r,s,o,a){return Mq(e||n.root,r,s,o,a)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),Gq=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(t){return Hq.\u0275fac(t)},providedIn:"root"}),i})();class y3{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=fI(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=fI(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=pI(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return pI(t,this._root).map(e=>e.value)}}function fI(i,t){if(i===t.value)return t;for(const e of t.children){const n=fI(i,e);if(n)return n}return null}function pI(i,t){if(i===t.value)return[t];for(const e of t.children){const n=pI(i,e);if(n.length)return n.unshift(t),n}return[]}class qc{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function xm(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class b3 extends y3{constructor(t,e){super(t),this.snapshot=e,mI(this,t)}toString(){return this.snapshot.toString()}}function x3(i,t){const e=function Wq(i,t){const o=new xM([],{},{},"",{},_n,t,null,i.root,-1,{});return new M3("",new qc(o,[]))}(i,t),n=new $e([new Ty("",{})]),r=new $e({}),s=new $e({}),o=new $e({}),a=new $e(""),l=new wm(n,r,o,a,s,_n,t,e.root);return l.snapshot=e.root,new b3(new qc(l,[]),e)}class wm{constructor(t,e,n,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(rt(c=>c[Dy]))??mt(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(rt(t=>_m(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(rt(t=>_m(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function w3(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function jq(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class xM{get title(){return this.data?.[Dy]}constructor(t,e,n,r,s,o,a,l,c,d,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_m(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_m(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class M3 extends y3{constructor(t,e){super(e),this.url=t,mI(this,e)}toString(){return C3(this._root)}}function mI(i,t){t.value._routerState=i,t.children.forEach(e=>mI(i,e))}function C3(i){const t=i.children.length>0?` { ${i.children.map(C3).join(", ")} } `:"";return`${i.value}${t}`}function gI(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ic(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),ic(t.params,e.params)||i.params.next(e.params),function oq(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!ic(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),ic(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function _I(i,t){const e=ic(i.params,t.params)&&function dq(i,t){return Rh(i,t)&&i.every((e,n)=>ic(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||_I(i.parent,t.parent))}function Fy(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function qq(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Fy(i,n,r);return Fy(i,n)})}(i,t,e);return new qc(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Fy(i,a)),o}}const n=function Xq(i){return new wm(new $e(i.url),new $e(i.params),new $e(i.queryParams),new $e(i.fragment),new $e(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Fy(i,s));return new qc(n,r)}}const vI="ngNavigationCancelingError";function S3(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=kh(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=E3(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function E3(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[vI]=!0,n.cancellationCode=t,e&&(n.url=e),n}function A3(i){return D3(i)&&kh(i.url)}function D3(i){return i&&i[vI]}class Kq{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ly,this.attachRef=null}}let Ly=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new Kq,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const wM=!1;let T3=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=_n,this.activateEvents=new He,this.deactivateEvents=new He,this.attachEvents=new He,this.detachEvents=new He,this.parentContexts=Lt(Ly),this.location=Lt(Yr),this.changeDetector=Lt(Yn),this.environmentInjector=Lt(ro)}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pe(4012,wM);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pe(4012,wM);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pe(4012,wM);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new pe(4013,wM);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Zq(e,a,r.injector);if(n&&function Qq(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[xi]}),i})();class Zq{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===wm?this.route:t===Ly?this.childContexts:this.parent.get(t,e)}}let yI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["ng-component"]],standalone:!0,features:[Bw],decls:1,vars:0,template:function(e,n){1&e&&Ee(0,"router-outlet")},dependencies:[T3],encapsulation:2}),i})();function I3(i,t){return i.providers&&!i._injector&&(i._injector=Nw(i.providers,t,`Route: ${i.path}`)),i._injector??t}function xI(i){const t=i.children&&i.children.map(xI),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==_n&&(e.component=yI),e}function Oa(i){return i.outlet||_n}function R3(i,t){const e=i.filter(n=>Oa(n)===t);return e.push(...i.filter(n=>Oa(n)!==t)),e}function Ny(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class iX{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),gI(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=xm(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),ls(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=xm(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=xm(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=xm(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new Uq(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Nq(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(gI(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),gI(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=Ny(r.snapshot),l=a?.get(Kl)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class k3{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class MM{constructor(t,e){this.component=t,this.route=e}}function rX(i,t,e){const n=i._root;return By(n,t?t._root:null,e,[n.value])}function Mm(i,t){const e=Symbol(),n=t.get(i,e);return n===e?"function"!=typeof i||function Sr(i){return null!==jf(i)}(i)?t.get(i):i:n}function By(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=xm(t);return i.children.forEach(o=>{(function oX(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function aX(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!Rh(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Rh(i.url,t.url)||!ic(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_I(i,t)||!ic(i.queryParams,t.queryParams);default:return!_I(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new k3(n)):(s.data=o.data,s._resolvedData=o._resolvedData),By(i,t,s.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new MM(a.outlet.component,o))}else o&&Uy(t,a,r),r.canActivateChecks.push(new k3(n)),By(i,null,s.component?a?a.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),ls(s,(o,a)=>Uy(o,e.getContext(a),r)),r}function Uy(i,t,e){const n=xm(i),r=i.value;ls(n,(s,o)=>{Uy(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new MM(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function Vy(i){return"function"==typeof i}function wI(i){return i instanceof mm||"EmptyError"===i?.name}const CM=Symbol("INITIAL_VALUE");function Cm(){return Fs(i=>Qo(i.map(t=>t.pipe(Oi(1),Ro(CM)))).pipe(rt(t=>{for(const e of t)if(!0!==e){if(e===CM)return CM;if(!1===e||e instanceof uu)return e}return!0}),hn(t=>t!==CM),Oi(1)))}function P3(i){return function AE(...i){return c0(i)}(zi(t=>{if(kh(t))throw S3(0,t)}),rt(t=>!0===t))}const MI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function O3(i,t,e,n,r){const s=CI(i,t,e);return s.matched?function CX(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?mt(r.map(o=>{const a=Mm(o,i);return du(function fX(i){return i&&Vy(i.canMatch)}(a)?a.canMatch(t,e):i.runInContext(()=>a(t,e)))})).pipe(Cm(),P3()):mt(!0)}(n=I3(t,n),t,e).pipe(rt(o=>!0===o?s:{...MI})):mt(s)}function CI(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...MI}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||sq)(e,i,t);if(!r)return{...MI};const s={};ls(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function SM(i,t,e,n){if(e.length>0&&function AX(i,t,e){return e.some(n=>EM(i,t,n)&&Oa(n)!==_n)}(i,e,n)){const s=new Dn(t,function EX(i,t,e,n){const r={};r[_n]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&Oa(s)!==_n){const o=new Dn([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[Oa(s)]=o}return r}(i,t,n,new Dn(e,i.children)));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function DX(i,t,e){return e.some(n=>EM(i,t,n))}(i,e,n)){const s=new Dn(i.segments,function SX(i,t,e,n,r){const s={};for(const o of n)if(EM(i,e,o)&&!r[Oa(o)]){const a=new Dn([],{});a._sourceSegment=i,a._segmentIndexShift=t.length,s[Oa(o)]=a}return{...r,...s}}(i,t,e,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new Dn(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function EM(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function F3(i,t,e,n){return!!(Oa(i)===n||n!==_n&&EM(t,e,i))&&("**"===i.path||CI(t,i,e).matched)}function L3(i,t,e){return 0===t.length&&!i.children[e]}const AM=!1;class DM{constructor(t){this.segmentGroup=t||null}}class N3{constructor(t){this.urlTree=t}}function zy(i){return gm(new DM(i))}function B3(i){return gm(new N3(i))}class kX{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=SM(this.urlTree.root,[],[],this.config).segmentGroup,e=new Dn(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,_n).pipe(rt(s=>this.createUrlTree(vM(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Yc(s=>{if(s instanceof N3)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof DM?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,_n).pipe(rt(r=>this.createUrlTree(vM(r),t.queryParams,t.fragment))).pipe(Yc(r=>{throw r instanceof DM?this.noMatchError(r):r}))}noMatchError(t){return new pe(4002,AM)}createUrlTree(t,e,n){const r=aI(t);return new uu(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(rt(s=>new Dn([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Ni(r).pipe(lu(s=>{const o=n.children[s],a=R3(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(rt(l=>({segment:l,outlet:s})))}),iI((s,o)=>(s[o.outlet]=o.segment,s),{}),XB())}expandSegment(t,e,n,r,s,o){return Ni(n).pipe(lu(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,s,o).pipe(Yc(c=>{if(c instanceof DM)return mt(null);throw c}))),au(a=>!!a),Yc((a,l)=>{if(wI(a))return L3(e,r,s)?mt(new Dn([],{})):zy(e);throw a}))}expandSegmentAgainstRoute(t,e,n,r,s,o,a){return F3(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):zy(e):zy(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?B3(s):this.lineralizeSegments(n,s).pipe(ir(o=>{const a=new Dn(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=CI(e,r,s);if(!a)return zy(e);const h=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?B3(h):this.lineralizeSegments(r,h).pipe(ir(p=>this.expandSegment(t,e,n,p.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=I3(n,t),n.loadChildren?(n._loadedRoutes?mt({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(rt(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new Dn(r,{})))):mt(new Dn(r,{}))):O3(e,n,r,t).pipe(Fs(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(ir(d=>{const h=d.injector??t,p=d.routes,{segmentGroup:m,slicedSegments:g}=SM(e,a,l,p),b=new Dn(m.segments,m.children);if(0===g.length&&b.hasChildren())return this.expandChildren(h,p,b).pipe(rt(x=>new Dn(a,x)));if(0===p.length&&0===g.length)return mt(new Dn(a,{}));const v=Oa(n)===s;return this.expandSegment(h,b,p,g,v?_n:s,!0).pipe(rt(M=>new Dn(a.concat(M.segments),M.children)))})):zy(e)))}getChildConfig(t,e,n){return e.children?mt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?mt({routes:e._loadedRoutes,injector:e._loadedInjector}):function MX(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?mt(!0):mt(r.map(o=>{const a=Mm(o,i);return du(function cX(i){return i&&Vy(i.canLoad)}(a)?a.canLoad(t,e):i.runInContext(()=>a(t,e)))})).pipe(Cm(),P3())}(t,e,n).pipe(ir(r=>r?this.configLoader.loadChildren(t,e).pipe(zi(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function IX(i){return gm(E3(AM,3))}())):mt({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return mt(n);if(r.numberOfChildren>1||!r.children[_n])return t.redirectTo,gm(new pe(4e3,AM));r=r.children[_n]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new uu(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ls(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=e[a]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return ls(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,n,r)}),new Dn(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new pe(4001,AM);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class OX{}class NX{constructor(t,e,n,r,s,o,a){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=SM(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,_n).pipe(rt(e=>{if(null===e)return null;const n=new xM([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},_n,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new qc(n,e),s=new M3(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=w3(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return Ni(Object.keys(n.children)).pipe(lu(r=>{const s=n.children[r],o=R3(e,r);return this.processSegmentGroup(t,o,s,r)}),iI((r,s)=>r&&s?(r.push(...s),r):null),KB(r=>null!==r),uM(null),XB(),rt(r=>{if(null===r)return null;const s=V3(r);return function BX(i){i.sort((t,e)=>t.value.outlet===_n?-1:e.value.outlet===_n?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return Ni(e).pipe(lu(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),au(o=>!!o),Yc(o=>{if(wI(o))return L3(n,r,s)?mt([]):mt(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!F3(e,n,r,s))return mt(null);let o;if("**"===e.path){const a=r.length>0?e3(r).parameters:{},l=H3(n)+r.length;o=mt({snapshot:new xM(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$3(e),Oa(e),e.component??e._loadedComponent??null,e,z3(n),l,G3(e)),consumedSegments:[],remainingSegments:[]})}else o=O3(n,e,r,t).pipe(rt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const h=H3(n)+l.length;return{snapshot:new xM(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,$3(e),Oa(e),e.component??e._loadedComponent??null,e,z3(n),h,G3(e)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Fs(a=>{if(null===a)return mt(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;t=e._injector??t;const h=e._loadedInjector??t,p=function UX(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:m,slicedSegments:g}=SM(n,c,d,p.filter(v=>void 0===v.redirectTo));if(0===g.length&&m.hasChildren())return this.processChildren(h,p,m).pipe(rt(v=>null===v?null:[new qc(l,v)]));if(0===p.length&&0===g.length)return mt([new qc(l,[])]);const b=Oa(e)===s;return this.processSegment(h,p,m,g,b?_n:s).pipe(rt(v=>null===v?null:[new qc(l,v)]))}))}}function VX(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function V3(i){const t=[],e=new Set;for(const n of i){if(!VX(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=V3(n.children);t.push(new qc(n.value,r))}return t.filter(n=>!e.has(n))}function z3(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function H3(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function $3(i){return i.data||{}}function G3(i){return i.resolve||{}}function W3(i){return"string"==typeof i.title||null===i.title}function SI(i){return Fs(t=>{const e=i(t);return e?Ni(e).pipe(rt(()=>t)):mt(t)})}const Sm=new me("ROUTES");let EI=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Lt(yN)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return mt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=du(e.loadComponent()).pipe(rt(Y3),zi(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),cu(()=>{this.componentLoaders.delete(e)})),r=new YB(n,()=>new Re).pipe(nI());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return mt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(rt(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=JB(l.get(Sm,[],Ft.Self|Ft.Optional)));return{routes:c.map(xI),injector:l}}),cu(()=>{this.childrenLoaders.delete(n)})),o=new YB(s,()=>new Re).pipe(nI());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return du(e()).pipe(rt(Y3),ir(n=>n instanceof k2||Array.isArray(n)?mt(n):Ni(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Y3(i){return function qX(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let IM=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Re,this.configLoader=Lt(EI),this.environmentInjector=Lt(ro),this.urlSerializer=Lt(Iy),this.rootContexts=Lt(Ly),this.navigationId=0,this.afterPreactivation=()=>mt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new Fq(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new Oq(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e){return this.transitions=new $e({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Oy,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hn(n=>0!==n.id),rt(n=>({...n,extractedUrl:e.urlHandlingStrategy.extract(n.rawUrl)})),Fs(n=>{let r=!1,s=!1;return mt(n).pipe(zi(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Fs(o=>{const a=e.browserUrlTree.toString(),l=!e.navigated||o.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const d="";return this.events.next(new bM(o.id,e.serializeUrl(n.rawUrl),d,0)),e.rawUrlTree=o.rawUrl,o.resolve(null),bo}if(e.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return q3(o.source)&&(e.browserUrlTree=o.extractedUrl),mt(o).pipe(Fs(d=>{const h=this.transitions?.getValue();return this.events.next(new uI(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions?.getValue()?bo:Promise.resolve(d)}),function PX(i,t,e,n){return Fs(r=>function RX(i,t,e,n,r){return new kX(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(rt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),zi(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},n.urlAfterRedirects=d.urlAfterRedirects}),function HX(i,t,e,n,r){return ir(s=>function LX(i,t,e,n,r,s,o="emptyOnly"){return new NX(i,t,e,n,r,o,s).recognize().pipe(Fs(a=>null===a?function FX(i){return new In(t=>t.error(i))}(new OX):mt(a)))}(i,t,e,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(rt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),zi(d=>{if(n.targetSnapshot=d.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!d.extras.skipLocationChange){const p=e.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);e.setBrowserUrl(p,d)}e.browserUrlTree=d.urlAfterRedirects}const h=new Tq(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:d,extractedUrl:h,source:p,restoredState:m,extras:g}=o,b=new uI(d,this.urlSerializer.serialize(h),p,m);this.events.next(b);const v=x3(h,this.rootComponentType).snapshot;return mt(n={...o,targetSnapshot:v,urlAfterRedirects:h,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new bM(o.id,e.serializeUrl(n.extractedUrl),d,1)),e.rawUrlTree=o.rawUrl,o.resolve(null),bo}}),zi(o=>{const a=new Iq(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),rt(o=>n={...o,guards:rX(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function mX(i,t){return ir(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?mt({...e,guardsResult:!0}):function gX(i,t,e,n){return Ni(i).pipe(ir(r=>function wX(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?mt(s.map(a=>{const l=Ny(t)??r,c=Mm(a,l);return du(function hX(i){return i&&Vy(i.canDeactivate)}(c)?c.canDeactivate(i,t,e,n):l.runInContext(()=>c(i,t,e,n))).pipe(au())})).pipe(Cm()):mt(!0)}(r.component,r.route,e,t,n)),au(r=>!0!==r,!0))}(o,n,r,i).pipe(ir(a=>a&&function lX(i){return"boolean"==typeof i}(a)?function _X(i,t,e,n){return Ni(t).pipe(lu(r=>Ey(function yX(i,t){return null!==i&&t&&t(new Lq(i)),mt(!0)}(r.route.parent,n),function vX(i,t){return null!==i&&t&&t(new Bq(i)),mt(!0)}(r.route,n),function xX(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function sX(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>Ay(()=>mt(o.guards.map(l=>{const c=Ny(o.node)??e,d=Mm(l,c);return du(function uX(i){return i&&Vy(i.canActivateChild)}(d)?d.canActivateChild(n,i):c.runInContext(()=>d(n,i))).pipe(au())})).pipe(Cm())));return mt(s).pipe(Cm())}(i,r.path,e),function bX(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return mt(!0);const r=n.map(s=>Ay(()=>{const o=Ny(t)??e,a=Mm(s,o);return du(function dX(i){return i&&Vy(i.canActivate)}(a)?a.canActivate(t,i):o.runInContext(()=>a(t,i))).pipe(au())}));return mt(r).pipe(Cm())}(i,r.route,e))),au(r=>!0!==r,!0))}(n,s,i,t):mt(a)),rt(a=>({...e,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),zi(o=>{if(n.guardsResult=o.guardsResult,kh(o.guardsResult))throw S3(0,o.guardsResult);const a=new Rq(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),hn(o=>!!o.guardsResult||(e.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),SI(o=>{if(o.guards.canActivateChecks.length)return mt(o).pipe(zi(a=>{const l=new kq(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Fs(a=>{let l=!1;return mt(a).pipe(function $X(i,t){return ir(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return mt(e);let s=0;return Ni(r).pipe(lu(o=>function GX(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!W3(r)&&(s[Dy]=r.title),function WX(i,t,e,n){const r=function jX(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return mt({});const s={};return Ni(r).pipe(ir(o=>function YX(i,t,e,n){const r=Ny(t)??n,s=Mm(i,r);return du(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(i[o],t,e,n).pipe(au(),zi(a=>{s[o]=a}))),rI(1),ZB(s),Yc(o=>wI(o)?bo:gm(o)))}(s,i,t,n).pipe(rt(o=>(i._resolvedData=o,i.data=w3(i,e).resolve,r&&W3(r)&&(i.data[Dy]=r.title),null)))}(o.route,n,i,t)),zi(()=>s++),rI(1),ir(o=>s===r.length?mt(e):bo))})}(e.paramsInheritanceStrategy,this.environmentInjector),zi({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),zi(a=>{const l=new Pq(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),SI(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(zi(d=>{l.component=d}),rt(()=>{})));for(const d of l.children)c.push(...a(d));return c};return Qo(a(o.targetSnapshot.root)).pipe(uM(),Oi(1))}),SI(()=>this.afterPreactivation()),rt(o=>{const a=function Yq(i,t,e){const n=Fy(i,t._root,e?e._root:void 0);return new b3(n,t)}(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return n={...o,targetRouterState:a}}),zi(o=>{e.currentUrlTree=o.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),e.routerState=o.targetRouterState,"deferred"===e.urlUpdateStrategy&&(o.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,o),e.browserUrlTree=o.urlAfterRedirects)}),((i,t,e)=>rt(n=>(new iX(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o)),Oi(1),zi({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new Ph(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),cu(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),Yc(o=>{if(s=!0,D3(o)){A3(o)||(e.navigated=!0,e.restoreHistory(n,!0));const a=new yM(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),A3(o)){const l=e.urlHandlingStrategy.merge(o.url,e.rawUrlTree),c={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||q3(n.source)};e.scheduleNavigation(l,Oy,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{e.restoreHistory(n,!0);const a=new hI(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);this.events.next(a);try{n.resolve(e.errorHandler(o))}catch(l){n.reject(l)}}return bo}))}))}cancelNavigationTransition(e,n,r){const s=new yM(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function q3(i){return i!==Oy}let X3=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===_n);return n}getResolvedTitleForRoute(e){return e.data[Dy]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(){return Lt(XX)},providedIn:"root"}),i})(),XX=(()=>{class i extends X3{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(ee(VB))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),KX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(){return Lt(QX)},providedIn:"root"}),i})();class ZX{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let QX=(()=>{class i extends ZX{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const RM=new me("",{providedIn:"root",factory:()=>({})});let eK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:function(){return Lt(tK)},providedIn:"root"}),i})(),tK=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function nK(i){throw i}function iK(i,t,e){return t.parse("/")}const rK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sK={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Jo=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Lt(U6),this.isNgZoneEnabled=!1,this.options=Lt(RM,{optional:!0})||{},this.errorHandler=this.options.errorHandler||nK,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iK,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Lt(eK),this.routeReuseStrategy=Lt(KX),this.urlCreationStrategy=Lt(Gq),this.titleStrategy=Lt(X3),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=JB(Lt(Sm,{optional:!0})??[]),this.navigationTransitions=Lt(IM),this.urlSerializer=Lt(Iy),this.location=Lt(vy),this.isNgZoneEnabled=Lt(gt)instanceof gt&&gt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new uu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=x3(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Oy,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,n,e.state)},0)}))}navigateToSyncWithBrowser(e,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map(xI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,d,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=kh(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Oy,null,n)}navigate(e,n={skipLocationChange:!1}){return function oK(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new pe(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...rK}:!1===n?{...sK}:n,kh(e))return n3(this.currentUrlTree,e,r);const s=this.parseUrl(e);return n3(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,d;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,p)=>{a=h,l=p}),d="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:d,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.go(r,"",s)}}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class K3{}let cK=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(hn(e=>e instanceof Ph),lu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=Nw(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ni(r).pipe(Md())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):mt(null);const s=r.pipe(ir(o=>null===o?mt(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?Ni([s,this.loader.loadComponent(n)]).pipe(Md()):s})}}return i.\u0275fac=function(e){return new(e||i)(ee(Jo),ee(yN),ee(ro),ee(K3),ee(EI))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const TI=new me("");let Z3=(()=>{class i{constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof uI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Ph&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof v3&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new v3(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(e){Ao()},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();var ea=(()=>((ea=ea||{})[ea.COMPLETE=0]="COMPLETE",ea[ea.FAILED=1]="FAILED",ea[ea.REDIRECTING=2]="REDIRECTING",ea))();const Em=!1;function hu(i,t){return{\u0275kind:i,\u0275providers:t}}const II=new me("",{providedIn:"root",factory:()=>!1});function J3(){const i=Lt(ji);return t=>{const e=i.get(hm);if(t!==e.components[0])return;const n=i.get(Jo),r=i.get(eU);1===i.get(RI)&&n.initialNavigation(),i.get(tU,null,Ft.Optional)?.setUpPreloading(),i.get(TI,null,Ft.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const eU=new me(Em?"bootstrap done indicator":"",{factory:()=>new Re}),RI=new me(Em?"initial navigation":"",{providedIn:"root",factory:()=>1});function pK(){let i=[];return i=Em?[{provide:Vp,multi:!0,useFactory:()=>{const t=Lt(Jo);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function Vq(i){if(!("type"in i))return`Unknown Router Event: ${i.constructor.name}`;switch(i.type){case 14:return`ActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state}, shouldActivate: ${i.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 2:return`NavigationCancel(id: ${i.id}, url: '${i.url}')`;case 16:return`NavigationSkipped(id: ${i.id}, url: '${i.url}')`;case 1:return`NavigationEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${i.id}, url: '${i.url}', error: ${i.error})`;case 0:return`NavigationStart(id: ${i.id}, url: '${i.url}')`;case 6:return`ResolveEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 5:return`ResolveStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 10:return`RouteConfigLoadEnd(path: ${i.route.path})`;case 9:return`RouteConfigLoadStart(path: ${i.route.path})`;case 4:return`RoutesRecognized(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 15:return`Scroll(anchor: '${i.anchor}', position: '${i.position?`${i.position[0]}, ${i.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],hu(1,i)}const tU=new me(Em?"router preloader":"");function mK(i){return hu(0,[{provide:tU,useExisting:cK},{provide:K3,useExisting:i}])}const Hy=!1,nU=new me(Hy?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),gK=[vy,{provide:Iy,useClass:sI},Jo,Ly,{provide:wm,useFactory:function Q3(i){return i.routerState.root},deps:[Jo]},EI,Hy?{provide:II,useValue:!0}:[]];function _K(){return new AN("Router",Jo)}let iU=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[gK,Hy&&n?.enableTracing?pK().\u0275providers:[],{provide:Sm,multi:!0,useValue:e},{provide:nU,useFactory:xK,deps:[[Jo,new Ds,new Aa]]},{provide:RM,useValue:n||{}},n?.useHash?{provide:Ih,useClass:A9}:{provide:Ih,useClass:KN},{provide:TI,useFactory:()=>{const i=Lt(H7),t=Lt(gt),e=Lt(RM),n=Lt(IM),r=Lt(Iy);return e.scrollOffset&&i.setOffset(e.scrollOffset),new Z3(r,n,i,t,e)}},n?.preloadingStrategy?mK(n.preloadingStrategy).\u0275providers:[],{provide:AN,multi:!0,useFactory:_K},n?.initialNavigation?wK(n):[],[{provide:rU,useFactory:J3},{provide:EN,multi:!0,useExisting:rU}]]}}static forChild(e){return{ngModule:i,providers:[{provide:Sm,multi:!0,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(ee(nU,8))},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[yI]}),i})();function xK(i){if(Hy&&i)throw new pe(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function wK(i){return["disabled"===i.initialNavigation?hu(3,[{provide:Hw,multi:!0,useFactory:()=>{const t=Lt(Jo);return()=>{t.setUpLocationChangeListener()}}},{provide:RI,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?hu(2,[{provide:RI,useValue:0},{provide:Hw,multi:!0,deps:[ji],useFactory:t=>{const e=t.get(S9,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const r=t.get(Jo),s=t.get(eU);(function dK(i,t){i.events.pipe(hn(e=>e instanceof Ph||e instanceof yM||e instanceof hI||e instanceof bM),rt(e=>e instanceof Ph||e instanceof bM?ea.COMPLETE:e instanceof yM&&(0===e.code||1===e.code)?ea.REDIRECTING:ea.FAILED),hn(e=>e!==ea.REDIRECTING),Oi(1)).subscribe(()=>{t()})})(r,()=>{n(!0)}),t.get(IM).afterPreactivation=()=>(n(!0),s.closed?mt(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const rU=new me(Hy?"Router Initializer":""),CK=[];let SK=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[iU.forRoot(CK),iU]}),i})();function sU(i,t,e,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(n,r)}function je(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(l){sU(s,n,r,o,a,"next",l)}function a(l){sU(s,n,r,o,a,"throw",l)}o(void 0)})}}function tn(i){return null!=i&&"false"!=`${i}`}function Ls(i,t=0){return function EK(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function kM(i){return Array.isArray(i)?i:[i]}function _r(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Xc(i){return i instanceof vt?i.nativeElement:i}const AK=["addListener","removeListener"],DK=["addEventListener","removeEventListener"],TK=["on","off"];function ko(i,t,e,n){if(dn(e)&&(n=e,e=void 0),n)return ko(i,t,e).pipe(tI(n));const[r,s]=function kK(i){return dn(i.addEventListener)&&dn(i.removeEventListener)}(i)?DK.map(o=>a=>i[o](t,a,e)):function IK(i){return dn(i.addListener)&&dn(i.removeListener)}(i)?AK.map(oU(i,t)):function RK(i){return dn(i.on)&&dn(i.off)}(i)?TK.map(oU(i,t)):[];if(!r&&r_(i))return ir(o=>ko(o,t,e))(Mr(i));if(!r)throw new TypeError("Invalid event target");return new In(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function oU(i,t){return e=>n=>i[e](t,n)}class PK extends Qt{constructor(t,e){super()}schedule(t,e=0){return this}}const PM={setInterval(i,t,...e){const{delegate:n}=PM;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=PM;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class kI extends PK{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return PM.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&PM.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,Qr(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const $y={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=$y;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new Qt(()=>e?.(r))},requestAnimationFrame(...i){const{delegate:t}=$y;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=$y;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},aU={now:()=>(aU.delegate||Date).now(),delegate:void 0};class Gy{constructor(t,e=Gy.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}Gy.now=aU.now;class PI extends Gy{constructor(t,e=Gy.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const LK=new class FK extends PI{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class OK extends kI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=$y.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&($y.cancelAnimationFrame(e),t._scheduled=void 0)}});let OI,NK=1;const OM={};function lU(i){return i in OM&&(delete OM[i],!0)}const BK={setImmediate(i){const t=NK++;return OM[t]=!0,OI||(OI=Promise.resolve()),OI.then(()=>lU(t)&&i()),t},clearImmediate(i){lU(i)}},{setImmediate:UK,clearImmediate:VK}=BK,FM={setImmediate(...i){const{delegate:t}=FM;return(t?.setImmediate||UK)(...i)},clearImmediate(i){const{delegate:t}=FM;return(t?.clearImmediate||VK)(i)},delegate:void 0},FI=new class HK extends PI{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class zK extends kI{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=FM.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(FM.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}}),Wy=new PI(kI),$K=Wy;function LI(i=0,t,e=$K){let n=-1;return null!=t&&(Hu(t)?e=t:n=t),new In(r=>{let s=function WK(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function jy(i,t=Wy){return function GK(i){return ni((t,e)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Xn(e,c=>{n=!0,r=c,s||Mr(i(c)).subscribe(s=Xn(e,a,l))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>LI(i,t))}function Le(i){return ni((t,e)=>{Mr(i).subscribe(Xn(e,()=>e.complete(),vs)),!e.closed&&t.subscribe(e)})}let NI;try{NI=typeof Intl<"u"&&Intl.v8BreakIterator}catch{NI=!1}let Am,Hi=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function z7(i){return i===gB}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!NI)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(ee(mT))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function dU(){if(Am)return Am;if("object"!=typeof document||!document)return Am=new Set(cU),Am;let i=document.createElement("input");return Am=new Set(cU.filter(t=>(i.setAttribute("type",t),i.type===t))),Am}let Yy,LM,Fh,BI;function Oh(i){return function jK(){if(null==Yy&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Yy=!0}))}finally{Yy=Yy||!1}return Yy}()?i:!!i.capture}function uU(){if(null==Fh){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Fh=!1,Fh;if("scrollBehavior"in document.documentElement.style)Fh=!0;else{const i=Element.prototype.scrollTo;Fh=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Fh}function qy(){if("object"!=typeof document||!document)return 0;if(null==LM){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),LM=0,0===i.scrollLeft&&(i.scrollLeft=1,LM=0===i.scrollLeft?1:2),i.remove()}return LM}function NM(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function fu(i){return i.composedPath?i.composedPath()[0]:i.target}function UI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const XK=new me("cdk-dir-doc",{providedIn:"root",factory:function KK(){return Lt(qt)}}),ZK=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Fa=(()=>{class i{constructor(e){this.value="ltr",this.change=new He,e&&(this.value=function QK(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?ZK.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(ee(XK,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();const JK=["contentWrapper"],eZ=["*"],tZ=new me("VIRTUAL_SCROLL_STRATEGY");let Ky=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new Re,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new In(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(jy(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(hn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Xc(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>ko(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(ee(gt),ee(Hi),ee(qt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hU=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new Re,this._elementScrolled=new In(o=>this.ngZone.runOutsideAngular(()=>ko(this.elementRef.nativeElement,"scroll").pipe(Le(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&0!=qy()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==qy()?e.left=e.right:1==qy()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;uU()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&2==qy()?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==qy()?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Ky),E(gt),E(Fa,8))},i.\u0275dir=ve({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),BM=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new Re,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(jy(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(ee(Hi),ee(gt),ee(qt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fU=new me("VIRTUAL_SCROLLABLE");let rZ=(()=>{class i extends hU{constructor(e,n,r,s){super(e,n,r,s)}measureViewportSize(e){const n=this.elementRef.nativeElement;return"horizontal"===e?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Ky),E(gt),E(Fa,8))},i.\u0275dir=ve({type:i,features:[ut]}),i})();const oZ=typeof requestAnimationFrame<"u"?LK:FI;let aZ=(()=>{class i extends rZ{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=tn(e)}constructor(e,n,r,s,o,a,l,c){super(e,a,r,o),this.elementRef=e,this._changeDetectorRef=n,this._scrollStrategy=s,this.scrollable=c,this._platform=Lt(Hi),this._detachedSubject=new Re,this._renderedRangeSubject=new Re,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new In(d=>this._scrollStrategy.scrolledIndexChange.subscribe(h=>Promise.resolve().then(()=>this.ngZone.run(()=>d.next(h))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Qt.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(Ro(null),jy(0,oZ)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(Le(this._detachedSubject)).subscribe(n=>{const r=n.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function sZ(i,t){return i.start==t.start&&i.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,n="to-start"){e=this.appendOnly&&"to-start"===n?0:e;const s="horizontal"==this.orientation,o=s?"X":"Y";let l=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===n&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,n="auto"){const r={behavior:n};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,n="auto"){this._scrollStrategy.scrollToIndex(e,n)}measureScrollOffset(e){let n;return n=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,n(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let n;const r="left",s="right",o="rtl"==this.dir?.value;n="start"==e?o?s:r:"end"==e?o?r:s:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of e)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Yn),E(gt),E(tZ,8),E(Fa,8),E(Ky),E(BM),E(fU,8))},i.\u0275cmp=st({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,n){if(1&e&&Nn(JK,7),2&e){let r;Et(r=At())&&(n._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,n){2&e&&ln("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[An([{provide:hU,useFactory:(t,e)=>t||e,deps:[[new Ds,new Co(fU)],i]}]),ut,Bw],ngContentSelectors:eZ,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,n){1&e&&(or(),$(0,"div",0,1),Yt(2),W(),Ee(3,"div",2)),2&e&&(V(3),Zo("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})(),Zy=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})(),pU=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Xy,Zy,aZ,Xy,Zy]}),i})();class VI{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Lh extends VI{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class Dm extends VI{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class lZ extends VI{constructor(t){super(),this.element=t instanceof vt?t.nativeElement:t}}class UM{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Lh?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Dm?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof lZ?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class cZ extends UM{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||ji.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Tm=(()=>{class i extends UM{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new He,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(E(Kl),E(Yr),E(qt))},i.\u0275dir=ve({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ut]}),i})(),Nh=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();function ta(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}const mU=uU();class MZ{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=_r(-this._previousScrollPosition.left),t.style.top=_r(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),mU&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),mU&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class CZ{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(hn(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class gU{enable(){}disable(){}attach(){}}function HI(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function _U(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class SZ{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();HI(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let EZ=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new gU,this.close=o=>new CZ(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new MZ(this._viewportRuler,this._document),this.reposition=o=>new SZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(e){return new(e||i)(ee(Ky),ee(BM),ee(gt),ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Om{constructor(t){if(this.scrollStrategy=new gU,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class AZ{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let vU=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),DZ=(()=>{class i extends vU{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(ee(qt),ee(gt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),TZ=(()=>{class i extends vU{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=fu(s)},this._clickListener=s=>{const o=fu(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(s)):h.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(ee(qt),ee(Hi),ee(gt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),HM=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||UI()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),UI()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(ee(qt),ee(Hi))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Jy{constructor(t,e,n,r,s,o,a,l,c,d=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Re,this._attachments=new Re,this._detachments=new Re,this._locationChanges=Qt.EMPTY,this._backdropClickHandler=h=>this._backdropClick.next(h),this._backdropTransitionendHandler=h=>{this._disposeBackdrop(h.target)},this._keydownEvents=new Re,this._outsidePointerEvents=new Re,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Oi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=_r(this._config.width),t.height=_r(this._config.height),t.minWidth=_r(this._config.minWidth),t.minHeight=_r(this._config.minHeight),t.maxWidth=_r(this._config.maxWidth),t.maxHeight=_r(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const r=kM(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Le(Cr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const yU="cdk-overlay-connected-position-bounding-box",IZ=/([A-Za-z%]+)$/;class RZ{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Re,this._resizeSubscription=Qt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(yU),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Bh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(yU),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?o:a}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=xU(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-n.height,g=this._subtractOverflows(s.width,0-o,o+s.width-n.width),b=this._subtractOverflows(s.height,p,m),v=g*b;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:g==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=bU(this._overlayRef.getConfig().minHeight),a=bU(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=xU(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0);let d=0,h=0;return d=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,h=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:d,y:h},{x:t.x+d,y:t.y+h}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new AZ(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,h,p;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const m=Math.min(n.bottom-t.y+n.top,t.y),g=this._lastBoundingBoxSize.height;s=2*m,o=t.y-m,s>g&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-g/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)p=n.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)h=t.x,d=n.right-t.x;else{const m=Math.min(n.right-t.x+n.left,t.x),g=this._lastBoundingBoxSize.width;d=2*m,h=t.x-m,d>g&&!this._isInitialRender&&!this._growAfterOpen&&(h=t.x-g/2)}return{top:o,left:h,bottom:a,right:p,width:d,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=_r(n.height),r.top=_r(n.top),r.bottom=_r(n.bottom),r.width=_r(n.width),r.left=_r(n.left),r.right=_r(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=_r(s)),o&&(r.maxWidth=_r(o))}this._lastBoundingBoxSize=n,Bh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Bh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Bh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Bh(n,this._getExactOverlayY(e,t,d)),Bh(n,this._getExactOverlayX(e,t,d))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=_r(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=_r(o.maxWidth):s&&(n.maxWidth="")),Bh(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=_r(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=_r(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:_U(t,n),isOriginOutsideView:HI(t,n),isOverlayClipped:_U(e,n),isOverlayOutsideView:HI(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&kM(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof vt)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function Bh(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function bU(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(IZ);return e&&"px"!==e?null:parseFloat(t)}return i||null}function xU(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const wU="cdk-global-overlay-wrapper";class MU{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(wU),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,h=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",g="",b="";l?b="flex-start":"center"===d?(b="center",p?g=h:m=h):p?"left"===d||"end"===d?(b="flex-end",m=h):("right"===d||"start"===d)&&(b="flex-start",g=h):"left"===d||"start"===d?(b="flex-start",m=h):("right"===d||"end"===d)&&(b="flex-end",g=h),t.position=this._cssPosition,t.marginLeft=l?"0":m,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":g,e.justifyContent=b,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(wU),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let kZ=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new MU}flexibleConnectedTo(e){return new RZ(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(ee(BM),ee(qt),ee(Hi),ee(HM))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),PZ=0,cs=(()=>{class i{constructor(e,n,r,s,o,a,l,c,d,h,p,m){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=h,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Om(e);return o.direction=o.direction||this._directionality.value,new Jy(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+PZ++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(hm)),new cZ(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(ee(EZ),ee(HM),ee(Kl),ee(kZ),ee(DZ),ee(ji),ee(gt),ee(qt),ee(Fa),ee(vy),ee(TZ),ee(kr,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const OZ=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],CU=new me("cdk-connected-overlay-scroll-strategy");let $I=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(E(vt))},i.\u0275dir=ve({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),i})(),SU=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=tn(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=tn(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=tn(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=tn(e)}get push(){return this._push}set push(e){this._push=tn(e)}constructor(e,n,r,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Qt.EMPTY,this._attachSubscription=Qt.EMPTY,this._detachSubscription=Qt.EMPTY,this._positionSubscription=Qt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new He,this.positionChange=new He,this.attach=new He,this.detach=new He,this.overlayKeydown=new He,this.overlayOutsideClick=new He,this._templatePortal=new Dm(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=OZ);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!ta(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Om({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof $I?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(KB(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(E(cs),E(To),E(Yr),E(CU),E(Fa,8))},i.\u0275dir=ve({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[xi]}),i})();const LZ={provide:CU,deps:[cs],useFactory:function FZ(i){return()=>i.scrollStrategies.reposition()}};let Fm=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[cs,LZ],imports:[Xy,Nh,pU,pU]}),i})();function na(i,t=Wy){return ni((e,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=t.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}e.subscribe(Xn(n,c=>{s=c,o=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function EU(i){return hn((t,e)=>i<=e)}function bl(i,t=Ka){return i=i??NZ,ni((e,n)=>{let r,s=!0;e.subscribe(Xn(n,o=>{const a=t(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function NZ(i,t){return i===t}let AU=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),BZ=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=Xc(e);return new In(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new Re,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(ee(AU))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),DU=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=tn(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Ls(e),this._subscribe()}constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new He,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(na(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(E(BZ),E(vt),E(gt))},i.\u0275dir=ve({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),GI=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[AU]}),i})();const TU=new Set;let Lm,UZ=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):zZ}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function VZ(i){if(!TU.has(i))try{Lm||(Lm=document.createElement("style"),Lm.setAttribute("type","text/css"),document.head.appendChild(Lm)),Lm.sheet&&(Lm.sheet.insertRule(`@media ${i} {body{ }}`,0),TU.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(ee(Hi))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function zZ(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let WI=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new Re}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return IU(kM(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Qo(IU(kM(e)).map(o=>this._registerQuery(o).observable));return s=Ey(s.pipe(Oi(1)),s.pipe(EU(1),na(0))),s.pipe(rt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),s={observable:new In(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(Ro(n),rt(({matches:o})=>({query:e,matches:o})),Le(this._destroySubject)),mql:n};return this._queries.set(e,s),s}}return i.\u0275fac=function(e){return new(e||i)(ee(UZ),ee(gt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function IU(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function $M(i,t){return(i.getAttribute(t)||"").match(/\S+/g)||[]}const kU="cdk-describedby-message",GM="cdk-describedby-host";let jI=0,WZ=(()=>{class i{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+jI++,this._document=e,this._id=Lt(um)+"-"+jI++}describe(e,n,r){if(!this._canBeDescribed(e,n))return;const s=YI(n,r);"string"!=typeof n?(PU(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,n,r){if(!n||!this._isElementNode(e))return;const s=YI(n,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof n){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${GM}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(GM);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){const r=this._document.createElement("div");PU(r,this._id),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(YI(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const n=$M(e,"aria-describedby").filter(r=>0!=r.indexOf(kU));e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){const r=this._messageRegistry.get(n);(function $Z(i,t,e){const n=$M(i,t);n.some(r=>r.trim()==e.trim())||(n.push(e.trim()),i.setAttribute(t,n.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(GM,this._id),r.referenceCount++}_removeMessageReference(e,n){const r=this._messageRegistry.get(n);r.referenceCount--,function GZ(i,t,e){const r=$M(i,t).filter(s=>s!=e.trim());r.length?i.setAttribute(t,r.join(" ")):i.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(GM)}_isElementDescribedByMessage(e,n){const r=$M(e,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=e.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(e){return new(e||i)(ee(qt),ee(Hi))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function YI(i,t){return"string"==typeof i?`${t||""}/${i}`:i}function PU(i,t){i.id||(i.id=`${kU}-${t}-${jI++}`)}class OU{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Re,this._typeaheadSubscription=Qt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new Re,this.change=new Re,t instanceof lm&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(zi(e=>this._pressedLetters.push(e)),na(t),hn(()=>this._pressedLetters.length>0),rt(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||ta(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t);this._activeItem=e[n]??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof lm?this._items.toArray():this._items}}class jZ extends OU{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class FU extends OU{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let WM=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function qZ(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function YZ(i){try{return i.frameElement}catch{return null}}(function nQ(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===NU(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=NU(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function eQ(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function tQ(i){return!function KZ(i){return function QZ(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function XZ(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function ZZ(i){return function JZ(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||LU(i))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(ee(Hi))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function LU(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function NU(i){if(!LU(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class iQ{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Oi(1)).subscribe(t)}}let qI=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new iQ(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(ee(WM),ee(gt),ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function XI(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function KI(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const rQ=new me("cdk-input-modality-detector-options"),sQ={ignoreKeys:[18,17,224,91,16]},Nm=Oh({passive:!0,capture:!0});let oQ=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new $e(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=fu(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(XI(o)?"keyboard":"mouse"),this._mostRecentTarget=fu(o))},this._onTouchstart=o=>{KI(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=fu(o))},this._options={...sQ,...s},this.modalityDetected=this._modality.pipe(EU(1)),this.modalityChanged=this.modalityDetected.pipe(bl()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Nm),r.addEventListener("mousedown",this._onMousedown,Nm),r.addEventListener("touchstart",this._onTouchstart,Nm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Nm),document.removeEventListener("mousedown",this._onMousedown,Nm),document.removeEventListener("touchstart",this._onTouchstart,Nm))}}return i.\u0275fac=function(e){return new(e||i)(ee(Hi),ee(gt),ee(qt),ee(rQ,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const aQ=new me("liveAnnouncerElement",{providedIn:"root",factory:function lQ(){return null}}),cQ=new me("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let dQ=0,ZI=(()=>{class i{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+dQ++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const s=n[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(e)&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}}return i.\u0275fac=function(e){return new(e||i)(ee(aQ,8),ee(gt),ee(qt),ee(cQ,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const uQ=new me("cdk-focus-monitor-default-options"),jM=Oh({passive:!0,capture:!0});let Kc=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Re,this._rootNodeFocusAndBlurListener=a=>{for(let c=fu(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,n=!1){const r=Xc(e);if(!this._platform.isBrowser||1!==r.nodeType)return mt(null);const s=function qK(i){if(function YK(){if(null==BI){const i=typeof document<"u"?document.head:null;BI=!(!i||!i.createShadowRoot&&!i.attachShadow)}return BI}()){const t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new Re,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=Xc(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=Xc(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=fu(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,jM),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,jM)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Le(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,jM),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,jM),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(e){return new(e||i)(ee(gt),ee(Hi),ee(oQ),ee(qt,8),ee(uQ,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const UU="cdk-high-contrast-black-on-white",VU="cdk-high-contrast-white-on-black",QI="cdk-high-contrast-active";let zU=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=Lt(WI).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(QI,UU,VU),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?e.add(QI,UU):2===n&&e.add(QI,VU)}}}return i.\u0275fac=function(e){return new(e||i)(ee(Hi),ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),HU=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(ee(zU))},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[GI]}),i})();function hQ(i,t){}class YM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let $U=(()=>{class i extends UM{constructor(e,n,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let n=null;if("string"==typeof e?n=this._document.querySelector(e):"boolean"==typeof e?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=NM(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=NM();return e===n||e.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=NM())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(qI),E(qt,8),E(YM),E(WM),E(gt),E(Jy),E(Kc))},i.\u0275cmp=st({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(e,n){if(1&e&&Nn(Tm,7),2&e){let r;Et(r=At())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,n){2&e&&It("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[ut],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&fe(0,hQ,0,0,"ng-template",0)},dependencies:[Tm],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class JI{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new Re,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!ta(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(t),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const GU=new me("DialogScrollStrategy"),fQ=new me("DialogData"),pQ=new me("DefaultDialogConfig"),gQ={provide:GU,deps:[cs],useFactory:function mQ(i){return()=>i.scrollStrategies.block()}};let _Q=0,WU=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,n,r,s,o,a){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Re,this._afterOpenedAtThisLevel=new Re,this._ariaHiddenElements=new Map,this.afterAllClosed=Ay(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ro(void 0))),this._scrollStrategy=a}open(e,n){(n={...this._defaultOptions||new YM,...n}).id=n.id||"cdk-dialog-"+_Q++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new JI(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(e,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){eR(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){eR(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),eR(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const n=new Om({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:YM,useValue:r},{provide:JI,useValue:n},{provide:Jy,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=$U;const l=new Lh(a,r.viewContainerRef,ji.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,s){if(e instanceof To){const o=this._createInjector(s,n,r,void 0);let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Dm(e,null,a,o))}else{const o=this._createInjector(s,n,r,this._injector),a=r.attachComponentPortal(new Lh(e,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(e,n,r,s){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:fQ,useValue:e.data},{provide:JI,useValue:n}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(n,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Fa,null,{optional:!0}))&&a.push({provide:Fa,useValue:{value:e.direction,change:mt()}}),ji.create({parent:o||s,providers:a})}_removeOpenDialog(e,n){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(e){return new(e||i)(ee(cs),ee(ji),ee(pQ,8),ee(i,12),ee(HM),ee(GU))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();function eR(i,t){let e=i.length;for(;e--;)t(i[e])}let vQ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[WU,gQ],imports:[Fm,Nh,HU,Nh]}),i})();const yQ=["text"];function bQ(i,t){if(1&i&&Ee(0,"mat-pseudo-checkbox",6),2&i){const e=ae();U("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function xQ(i,t){1&i&&Ee(0,"mat-pseudo-checkbox",7),2&i&&U("disabled",ae().disabled)}function wQ(i,t){if(1&i&&($(0,"span",8),Oe(1),W()),2&i){const e=ae();V(1),Vi("(",e.group.label,")")}}const MQ=[[["mat-icon"]],"*"],CQ=["mat-icon","*"],EQ=new me("mat-sanity-checks",{providedIn:"root",factory:function SQ(){return!0}});let Jn=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!UI()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(ee(zU),ee(EQ,8),ee(qt))},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Xy,Xy]}),i})();function qM(i){return class extends i{get disabled(){return this._disabled}set disabled(t){this._disabled=tn(t)}constructor(...t){super(...t),this._disabled=!1}}}function eb(i,t){return class extends i{get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function XM(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=tn(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function tR(i,t=0){return class extends i{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Ls(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}}}function qU(i){return class extends i{updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}function AQ(i){return class extends i{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new In(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}let KU=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class TQ{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const ZU=Oh({passive:!0,capture:!0});class IQ{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=fu(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){const s=this._events.get(e);if(s){const o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,ZU)})}removeHandler(t,e,n){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(n),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,ZU)))}}const QU={enterDuration:225,exitDuration:150},JU=Oh({passive:!0,capture:!0}),eV=["mousedown","touchstart"],tV=["mouseup","mouseleave","touchend","touchcancel"];class Bm{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Xc(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...QU,...n.animation};n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function kQ(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const h=window.getComputedStyle(d),m=h.transitionDuration,g="none"===h.transitionProperty||"0s"===m||"0s, 0s"===m||0===r.width&&0===r.height,b=new TQ(this,d,n,g);d.style.transform="scale3d(1, 1, 1)",b.state=0,n.persistent||(this._mostRecentTransientRipple=b);let v=null;return!g&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const y=()=>this._finishRippleTransition(b),M=()=>this._destroyRipple(b);d.addEventListener("transitionend",y),d.addEventListener("transitioncancel",M),v={onTransitionEnd:y,onTransitionCancel:M}}),this._activeRipples.set(b,v),(g||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,n={...QU,...t.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Xc(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,eV.forEach(n=>{Bm._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{tV.forEach(e=>{this._triggerElement.addEventListener(e,this,JU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=1,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=XI(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!KI(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(eV.forEach(e=>Bm._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&tV.forEach(e=>t.removeEventListener(e,this,JU)))}}Bm._eventManager=new IQ;const nR=new me("mat-ripple-global-options");let Uh=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Bm(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt),E(Hi),E(nR,8),E(kr,8))},i.\u0275dir=ve({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&ln("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),nb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,Jn]}),i})(),PQ=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return i.\u0275fac=function(e){return new(e||i)(E(kr,8))},i.\u0275cmp=st({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,n){2&e&&ln("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("mat-pseudo-checkbox-minimal","minimal"===n.appearance)("mat-pseudo-checkbox-full","full"===n.appearance)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,n){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),i})(),nV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn]}),i})();const iV=new me("MAT_OPTION_PARENT_COMPONENT"),rV=new me("MatOptgroup");let OQ=0;class FQ{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let LQ=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=tn(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+OQ++,this.onSelectionChange=new He,this._stateChanges=new Re}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!ta(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new FQ(this,e))}}return i.\u0275fac=function(e){Ao()},i.\u0275dir=ve({type:i,viewQuery:function(e,n){if(1&e&&Nn(yQ,7),2&e){let r;Et(r=At())&&(n._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),Um=(()=>{class i extends LQ{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Yn),E(iV,8),E(rV,8))},i.\u0275cmp=st({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(e,n){1&e&&De("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&e&&(tc("id",n.id),It("aria-selected",n.selected)("aria-disabled",n.disabled.toString()),ln("mdc-list-item--selected",n.selected)("mat-mdc-option-multiple",n.multiple)("mat-mdc-option-active",n.active)("mdc-list-item--disabled",n.disabled))},exportAs:["matOption"],features:[ut],ngContentSelectors:CQ,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(e,n){1&e&&(or(MQ),fe(0,bQ,1,2,"mat-pseudo-checkbox",0),Yt(1),$(2,"span",1,2),Yt(4,1),W(),fe(5,xQ,1,1,"mat-pseudo-checkbox",3),fe(6,wQ,2,1,"span",4),Ee(7,"div",5)),2&e&&(U("ngIf",n.multiple),V(5),U("ngIf",!n.multiple&&n.selected&&!n.hideSingleSelectionIndicator),V(1),U("ngIf",n.group&&n.group._inert),V(1),U("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[Uh,hi,PQ],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})(),iR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[nb,uo,Jn,nV]}),i})();class sV{}class UQ{}const Zc="*";function La(i,t){return{type:7,name:i,definitions:t,options:{}}}function qr(i,t=null){return{type:4,styles:t,timings:i}}function aV(i,t=null){return{type:2,steps:i,options:t}}function oi(i){return{type:6,styles:i,offset:null}}function Ns(i,t,e){return{type:0,name:i,styles:t,options:e}}function lV(i){return{type:5,steps:i}}function Or(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function rR(i=null){return{type:9,options:i}}function sR(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function cV(i){Promise.resolve().then(i)}class ib{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){cV(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class dV{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?cV(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const oR="!";function VQ(i,t){}class KM{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const aR="mdc-dialog--open",uV="mdc-dialog--opening",hV="mdc-dialog--closing";let $Q=(()=>{class i extends $U{constructor(e,n,r,s,o,a,l,c){super(e,n,r,s,o,a,l,c),this._animationStateChanged=new He}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(qI),E(qt,8),E(KM),E(WM),E(gt),E(Jy),E(Kc))},i.\u0275cmp=st({type:i,selectors:[["ng-component"]],features:[ut],decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})();const fV="--mat-dialog-transition-duration";function pV(i){return null==i?null:"number"==typeof i?i:i.endsWith("ms")?Ls(i.substring(0,i.length-2)):i.endsWith("s")?1e3*Ls(i.substring(0,i.length-1)):"0"===i?0:null}let GQ=(()=>{class i extends $Q{constructor(e,n,r,s,o,a,l,c,d){super(e,n,r,s,o,a,l,d),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?pV(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?pV(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(fV,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(uV,aR)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(aR),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(aR),this._animationsEnabled?(this._hostElement.style.setProperty(fV,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(hV)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(uV,hV)}_waitForAnimationToComplete(e,n){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(qI),E(qt,8),E(KM),E(WM),E(gt),E(Jy),E(kr,8),E(Kc))},i.\u0275cmp=st({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(e,n){2&e&&(tc("id",n._config.id),It("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),ln("_mat-animation-noopable",!n._animationsEnabled))},features:[ut],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1),fe(2,VQ,0,0,"ng-template",2),W()())},dependencies:[Tm],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),i})();class rb{constructor(t,e,n){this._ref=t,this._containerInstance=n,this._afterOpened=new Re,this._beforeClosed=new Re,this._state=0,this.disableClose=e.disableClose,this.id=t.id,n._animationStateChanged.pipe(hn(r=>"opened"===r.state),Oi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(hn(r=>"closed"===r.state),Oi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Cr(this.backdropClick(),this.keydownEvents().pipe(hn(r=>27===r.keyCode&&!this.disableClose&&!ta(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),mV(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(hn(e=>"closing"===e.state),Oi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function mV(i,t,e){return i._closeInteractionType=t,i.close(e)}const lR=new me("MatMdcDialogData"),WQ=new me("mat-mdc-dialog-default-options"),gV=new me("mat-mdc-dialog-scroll-strategy"),YQ={provide:gV,deps:[cs],useFactory:function jQ(i){return()=>i.scrollStrategies.block()}};let qQ=0,XQ=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,n,r,s,o,a,l,c,d,h){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Re,this._afterOpenedAtThisLevel=new Re,this._idPrefix="mat-dialog-",this.dialogConfigClass=KM,this.afterAllClosed=Ay(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Ro(void 0))),this._scrollStrategy=a,this._dialog=n.get(WU)}open(e,n){let r;(n={...this._defaultOptions||new KM,...n}).id=n.id||`${this._idPrefix}${qQ++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:YM,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return i.\u0275fac=function(e){Ao()},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),Vm=(()=>{class i extends XQ{constructor(e,n,r,s,o,a,l,c){super(e,n,s,a,l,o,rb,GQ,lR,c),this._idPrefix="mat-mdc-dialog-"}}return i.\u0275fac=function(e){return new(e||i)(ee(cs),ee(ji),ee(vy,8),ee(WQ,8),ee(gV),ee(i,12),ee(HM),ee(kr,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),KQ=0,ZQ=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=bV(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){mV(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(e){return new(e||i)(E(rb,8),E(vt),E(Vm))},i.\u0275dir=ve({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,n){1&e&&De("click",function(s){return n._onButtonClick(s)}),2&e&&It("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[xi]}),i})(),_V=(()=>{class i{constructor(e,n,r){this._dialogRef=e,this._elementRef=n,this._dialog=r,this.id="mat-mdc-dialog-title-"+KQ++}ngOnInit(){this._dialogRef||(this._dialogRef=bV(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(e){return new(e||i)(E(rb,8),E(vt),E(Vm))},i.\u0275dir=ve({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(e,n){2&e&&tc("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),vV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),i})(),yV=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(e,n){2&e&&ln("mat-mdc-dialog-actions-align-center","center"===n.align)("mat-mdc-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})();function bV(i,t){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(n=>n.id===e.id):null}let xV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[Vm,YQ],imports:[vQ,Fm,Nh,Jn,Jn]}),i})();const QQ=["mat-button",""],MV=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],CV=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],eJ=["mat-mini-fab",""],nJ=["mat-icon-button",""],iJ=["*"],rJ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],sJ=eb(qM(XM(class{constructor(i){this._elementRef=i}})));let cR=(()=>{class i extends sJ{constructor(e,n,r,s){super(e),this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=Lt(Kc),this._isFab=!1;const o=e.nativeElement.classList;for(const a of rJ)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...e){return e.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return i.\u0275fac=function(e){Ao()},i.\u0275dir=ve({type:i,viewQuery:function(e,n){if(1&e&&Nn(Uh,5),2&e){let r;Et(r=At())&&(n.ripple=r.first)}},features:[ut]}),i})(),Vh=(()=>{class i extends cR{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Hi),E(gt),E(kr,8))},i.\u0275cmp=st({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,n){2&e&&(It("disabled",n.disabled||null),ln("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ut],attrs:QQ,ngContentSelectors:CV,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(or(MV),Ee(0,"span",0),Yt(1),$(2,"span",1),Yt(3,1),W(),Yt(4,2),Ee(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(ln("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),V(6),U("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Uh],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})();const aJ=new me("mat-mdc-fab-default-options",{providedIn:"root",factory:SV});function SV(){return{color:"accent"}}const EV=SV();let AV=(()=>{class i extends cR{constructor(e,n,r,s,o){super(e,n,r,s),this._options=o,this._isFab=!0,this._options=this._options||EV,this.color=this.defaultColor=this._options.color||EV.color}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Hi),E(gt),E(kr,8),E(aJ,8))},i.\u0275cmp=st({type:i,selectors:[["button","mat-mini-fab",""]],hostVars:7,hostBindings:function(e,n){2&e&&(It("disabled",n.disabled||null),ln("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ut],attrs:eJ,ngContentSelectors:CV,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(or(MV),Ee(0,"span",0),Yt(1),$(2,"span",1),Yt(3,1),W(),Yt(4,2),Ee(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(ln("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),V(6),U("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Uh],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),i})(),ZM=(()=>{class i extends cR{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Hi),E(gt),E(kr,8))},i.\u0275cmp=st({type:i,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,n){2&e&&(It("disabled",n.disabled||null),ln("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ut],attrs:nJ,ngContentSelectors:iJ,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(or(),Ee(0,"span",0),Yt(1),Ee(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(V(3),U("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Uh],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),sb=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,nb,Jn]}),i})();const lJ=["class","dialog"];let DV=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n}}return i.\u0275fac=function(e){return new(e||i)(E(rb),E(lR))},i.\u0275cmp=st({type:i,selectors:[["app-confirm",8,"dialog"]],attrs:lJ,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(e,n){1&e&&($(0,"h1",0),Oe(1,"Confirmation"),W(),$(2,"div",1)(3,"p"),Oe(4),W()(),$(5,"div",2)(6,"button",3),De("click",function(){return n.dialogRef.close()}),Oe(7,"Cancel"),W(),$(8,"button",4),Oe(9,"Yes"),W()()),2&e&&(V(4),ui(n.data.text),V(4),U("mat-dialog-close",!0))},dependencies:[Vh,ZQ,_V,vV,yV]}),i})();function dR(i,t){const e="object"==typeof t;return new Promise((n,r)=>{const s=new ga({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{e?n(t.defaultValue):r(new mm)}});i.subscribe(s)})}let xl=(()=>{class i{constructor(e){this.ngZone=e,this.openedResource$=new $e(null),this.openedResourcePath$=new $e(null),eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.on_angular_ready(),setTimeout(je(function*(){for(;;){if(eel._websocket){eel._websocket.onclose=()=>window.close();break}yield new Promise(n=>setTimeout(n,0))}}),0)}wrapHandler(e){return(...n)=>{try{gt.assertInAngularZone(),e.bind(this)(...n)}catch{this.ngZone.run(e,this,n)}}}openFile(e,n=!1){var r=this;return je(function*(){r.openedResource$.next(null),r.openedResourcePath$.next(null);const s=yield eel.open_file(e,n)();r.openedResource$.next({...s,id:s.name}),r.openedResourcePath$.next(e)})()}openFileWithSystemApp(e){return je(function*(){yield eel.open_file_with_system_app(e)()})()}retrieveValue(e){return je(function*(){return yield eel.retrieve_value(e)()})()}runCustomAction(e,n,r){return je(function*(){return eel.run_custom_action(e,n,r)()})()}saveFile(e){var n=this;return je(function*(){const r=n.openedResource$.getValue();if(!r)return;const s=yield eel.save_file(n.openedResourcePath$.getValue(),e)();n.openedResource$.next({id:r.id,name:r.name,schema:r.schema,data:s})})()}serializeResource(e,n={}){return je(function*(){return eel.serialize_resource(e,n)()})()}serializeResourceTmp(e,n,r={}){return je(function*(){return eel.serialize_resource_tmp(e,n,r)()})()}serializeReversible(e,n){return je(function*(){return eel.serialize_reversible(e,n)()})()}deserializeResource(e){return je(function*(){return eel.deserialize_resource(e)()})()}}return i.\u0275fac=function(e){return new(e||i)(ee(gt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var uR=_s(489);const TV=i=>!(!i||"object"!=typeof i),IV=(i={},t,e,n=[])=>{const r=[];if(TV(i)){const s=Object.entries(i);for(let o=0;o<s.length;o+=1){const[a,l]=s[o];if(a===t&&l===e)r.push([i,n]);else if(TV(l)){const c=IV(l,t,e,[...n,a]);r.push(...c)}}}return r};let ho=(()=>{class i{constructor(e){var n=this;this.eelDelegate=e,this._hasUnsavedChanges$=new $e(!1),this.resource$=new $e(null),this.error$=new $e(null),this.customActionRunning$=new $e(!1),this.changedDataBlocks={},this.dataBlockChange$=new Re,this.hideHiddenFields$=new $e(!0),this.eelDelegate.openedResource$.subscribe(r=>{if(this.clearUnsavedChanges(),r?.data.error_class)this.error$.next(r),this.resource$.next(null);else if(r?.schema){const s=IV(r.schema,"is_recursive_ref",!0);for(const[o,a]of s){const l=o.block_class_mro;let c=r.schema,d=c.block_class_mro===l?c:void 0;for(const h of a.slice(0,a.length-1))!d&&c[h]?.block_class_mro===l&&(d=c[h]),c=c[h];c[a[a.length-1]]=d}this.resource$.next(r),this.error$.next(null)}else this.resource$.next(null),this.error$.next(null)}),this.dataBlockChange$.subscribe(function(){var r=je(function*([s,o]){n.changedDataBlocks[s]=o,n.updateUnsavedChanges();const a=yield n.eelDelegate.retrieveValue(s);n.changedDataBlocks[s]==o&&((0,uR.isNumber)(o)?Math.abs(o-a)<1e-10:(0,uR.isEqual)(o,a))&&(delete n.changedDataBlocks[s],n.updateUnsavedChanges())});return function(s){return r.apply(this,arguments)}}())}updateUnsavedChanges(){this._hasUnsavedChanges$.next(Object.keys(this.changedDataBlocks).length>0)}get hasUnsavedChanges$(){return this._hasUnsavedChanges$.asObservable()}get hasUnsavedChanges(){return this._hasUnsavedChanges$.getValue()}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(e=>{delete this.changedDataBlocks[e]}),this.updateUnsavedChanges()}processExternalChanges(e,n){var r=this;return je(function*(){r.customActionRunning$.next(!0);const s=yield n();if(s.error_class)throw r.customActionRunning$.next(!1),s;if(r.resource$.getValue().id===e)r.resource$.getValue().data=s;else{let o=e.substring(r.resource$.getValue().id.length).replace("__","/").split("/").filter(c=>c),a=r.resource$.getValue().data;for(const c of o.slice(0,o.length-1))a=a[c]||a[+c];let l=o[o.length-1];void 0===a[l]&&void 0!==a[+l]&&(l=+l),a[l]=s}r.clearUnsavedChanges(),r.changedDataBlocks.__has_external_changes__=1,r.updateUnsavedChanges(),r.customActionRunning$.next(!1)})()}runCustomAction(e,n,r){var s=this;return je(function*(){return s.processExternalChanges(e,()=>s.eelDelegate.runCustomAction(e,n,r))})()}deserializeResource(e){var n=this;return je(function*(){return n.processExternalChanges(e,()=>n.eelDelegate.deserializeResource(e))})()}reloadResource(){var e=this;return je(function*(){const n=e.eelDelegate.openedResourcePath$.getValue();n&&e.eelDelegate.openFile(n,!0).then()})()}saveResource(){var e=this;return je(function*(){const n=Object.entries(e.changedDataBlocks).filter(([r,s])=>"__has_external_changes__"!=r);yield e.eelDelegate.saveFile(n.map(([r,s])=>({id:r,value:s}))),e.clearUnsavedChanges()})()}}return i.\u0275fac=function(e){return new(e||i)(ee(xl))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Po=(i,t)=>i+(i.includes("__")?"/":"__")+t,RV={ArrayBlock:(i,t)=>({id:Po(i.id,t),name:""+t,data:i.data[t],schema:i.schema.child_schema}),CompoundBlock:(i,t)=>({id:Po(i.id,t),name:""+t,data:i.data[t],schema:i.schema.fields.find(e=>e.name==t).schema}),DelegateBlock:(i,t)=>{if("data"!=t)throw new Error(`Trying to get child with key ${t} from DelegateBlock`);return{id:Po(i.id,"data"),name:"",data:i.data.data,schema:i.schema.possible_resource_schemas[i.data.choice_index]}}},cJ=(i,t)=>{for(const e of i.schema.block_class_mro.split("__"))if(RV[e])return RV[e](i,t);throw new Error(`Cannot get child resource from block class ${i.schema.block_class_mro}`)};let QM=(()=>{class i{constructor(e){this.main=e,this.navigationPath$=new $e([]),this.resourceToRender$=new $e(null),this.main.resource$.subscribe(n=>{this.navigationPath$.next([])}),Qo([this.main.resource$,this.navigationPath$]).subscribe(([n,r])=>{let s=n;for(const o of r)s&&(s=cJ(s,o));this.resourceToRender$.next(s)})}navigateToId(e){this.navigationPath$.next(e.substring(e.indexOf("__")+2).split("/"))}navigateBack(e){this.navigationPath$.next(this.navigationPath$.value.slice(0,this.navigationPath$.value.length-e))}}return i.\u0275fac=function(e){return new(e||i)(ee(ho))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dJ(i,t){if(1&i){const e=$n();$(0,"div",2)(1,"button",3),De("click",function(){return Nt(e),St(ae().action())}),Oe(2),W()()}if(2&i){const e=ae();V(2),Vi(" ",e.data.action," ")}}const uJ=["label"];function hJ(i,t){}const fJ=Math.pow(2,31)-1;class hR{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Re,this._afterOpened=new Re,this._onAction=new Re,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,fJ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const kV=new me("MatSnackBarData");class JM{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let pJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),i})(),mJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),i})(),gJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),i})(),_J=(()=>{class i{constructor(e,n){this.snackBarRef=e,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(e){return new(e||i)(E(hR),E(kV))},i.\u0275cmp=st({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,n){1&e&&($(0,"div",0),Oe(1),W(),fe(2,dJ,3,1,"div",1)),2&e&&(V(1),Vi(" ",n.data.message,"\n"),V(1),U("ngIf",n.hasAction))},dependencies:[hi,Vh,pJ,mJ,gJ],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),i})();const vJ={snackBarState:La("state",[Ns("void, hidden",oi({transform:"scale(0.8)",opacity:0})),Ns("visible",oi({transform:"scale(1)",opacity:1})),Or("* => visible",qr("150ms cubic-bezier(0, 0, 0.2, 1)")),Or("* => void, * => hidden",qr("75ms cubic-bezier(0.4, 0.0, 1, 1)",oi({opacity:0})))])};let yJ=0,bJ=(()=>{class i extends UM{constructor(e,n,r,s,o){super(),this._ngZone=e,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._document=Lt(qt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Re,this._onExit=new Re,this._onEnter=new Re,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+yJ++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}onAnimationEnd(e){const{fromState:n,toState:r}=e;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Oi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>e.classList.add(r)):e.classList.add(n)),this._exposeToModals()}_exposeToModals(){const e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const s=n[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?-1===o.indexOf(e)&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const n=e.getAttribute("aria-owns");if(n){const r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),n.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(e){return new(e||i)(E(gt),E(vt),E(Yn),E(Hi),E(JM))},i.\u0275dir=ve({type:i,viewQuery:function(e,n){if(1&e&&Nn(Tm,7),2&e){let r;Et(r=At())&&(n._portalOutlet=r.first)}},features:[ut]}),i})(),xJ=(()=>{class i extends bJ{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,n="mdc-snackbar__label";e.classList.toggle(n,!e.querySelector(`.${n}`))}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275cmp=st({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,n){if(1&e&&Nn(uJ,7),2&e){let r;Et(r=At())&&(n._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,n){1&e&&VD("@state.done",function(s){return n.onAnimationEnd(s)}),2&e&&kw("@state",n._animationState)},features:[ut],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1,2)(3,"div",3),fe(4,hJ,0,0,"ng-template",4),W(),Ee(5,"div"),W()()),2&e&&(V(5),It("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[Tm],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px));height:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[vJ.snackBarState]}}),i})(),PV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Fm,Nh,uo,sb,Jn,Jn]}),i})();const OV=new me("mat-snack-bar-default-options",{providedIn:"root",factory:function wJ(){return new JM}});let MJ=(()=>{class i{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,n,r,s,o,a){this._overlay=e,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){const s={...this._defaultConfig,...r};return s.data={message:e,action:n},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){const s=ji.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:JM,useValue:n}]}),o=new Lh(this.snackBarContainerComponent,n.viewContainerRef,s),a=e.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(e,n){const r={...new JM,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new hR(o,s);if(e instanceof To){const l=new Dm(e,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new Lh(e,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(Le(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration))}_createOverlay(e){const n=new Om;n.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,a=!o&&"center"!==e.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){return ji.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:hR,useValue:n},{provide:kV,useValue:e.data}]})}}return i.\u0275fac=function(e){return new(e||i)(ee(cs),ee(ZI),ee(ji),ee(WI),ee(i,12),ee(OV))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),FV=(()=>{class i extends MJ{constructor(e,n,r,s,o,a){super(e,n,r,s,o,a),this.simpleSnackBarComponent=_J,this.snackBarContainerComponent=xJ,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return i.\u0275fac=function(e){return new(e||i)(ee(cs),ee(ZI),ee(ji),ee(WI),ee(i,12),ee(OV))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:PV}),i})();const CJ=["*",[["mat-toolbar-row"]]],SJ=["*","mat-toolbar-row"],EJ=eb(class{constructor(i){this._elementRef=i}});let AJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),DJ=(()=>{class i extends EJ{constructor(e,n,r){super(e),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Hi),E(qt))},i.\u0275cmp=st({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,n,r){if(1&e&&Yi(r,AJ,5),2&e){let s;Et(s=At())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&ln("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ut],ngContentSelectors:SJ,decls:2,vars:0,template:function(e,n){1&e&&(or(CJ),Yt(0),Yt(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),TJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,Jn]}),i})(),LV=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=tn(e)}get inset(){return this._inset}set inset(e){this._inset=tn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(It("aria-orientation",n.vertical?"vertical":"horizontal"),ln("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),fR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,Jn]}),i})();const IJ=["tooltip"],NV=new me("mat-tooltip-scroll-strategy"),PJ={provide:NV,deps:[cs],useFactory:function kJ(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},FJ=new me("mat-tooltip-default-options",{providedIn:"root",factory:function OJ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),BV="tooltip-panel",UV=Oh({passive:!0});let zJ=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=tn(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=tn(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Ls(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Ls(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,r,s,o,a,l,c,d,h,p,m){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=h,this._defaultOptions=p,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Re,this._scrollStrategy=d,this._document=m,p&&(p.position&&(this.position=p.position),p.positionAtOrigin&&(this.positionAtOrigin=p.positionAtOrigin),p.touchGestures&&(this.touchGestures=p.touchGestures)),h.change.pipe(Le(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Le(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,UV)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(n);this._detach(),this._portal=this._portal||new Lh(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(Le(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(e)}hide(e=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof vt)return this._overlayRef;this._detach()}const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Le(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${BV}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Le(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Le(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Le(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!ta(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const n=e.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Oi(1),Le(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){const{overlayY:n,originX:r,originY:s}=e;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${BV}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let n;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(n=e),this.show(void 0,n)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const n=e.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,UV)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const n=this._elementRef.nativeElement,r=n.style;("on"===e||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(e){Ao()},i.\u0275dir=ve({type:i,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Bs=(()=>{class i extends zJ{constructor(e,n,r,s,o,a,l,c,d,h,p,m){super(e,n,r,s,o,a,l,c,d,h,p,m),this._tooltipComponent=$J,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const r=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=r?-8:8:"end"===e.originX&&(e.offsetX=r?8:-8),e}}return i.\u0275fac=function(e){return new(e||i)(E(cs),E(vt),E(Ky),E(Yr),E(gt),E(Hi),E(WZ),E(Kc),E(NV),E(Fa,8),E(FJ,8),E(qt))},i.\u0275dir=ve({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[ut]}),i})(),HJ=(()=>{class i{constructor(e,n){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Re,this._animationsDisabled="NoopAnimations"===n}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(e?s:r),n.classList.add(e?r:s),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return i.\u0275fac=function(e){return new(e||i)(E(Yn),E(kr,8))},i.\u0275dir=ve({type:i}),i})(),$J=(()=>{class i extends HJ{constructor(e,n,r){super(e,r),this._elementRef=n,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}}return i.\u0275fac=function(e){return new(e||i)(E(Yn),E(vt),E(kr,8))},i.\u0275cmp=st({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(e,n){if(1&e&&Nn(IJ,7),2&e){let r;Et(r=At())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,n){1&e&&De("mouseleave",function(s){return n._handleMouseLeave(s)}),2&e&&Zo("zoom",n.isVisible()?1:null)},features:[ut],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(e,n){1&e&&($(0,"div",0,1),De("animationend",function(s){return n._handleAnimationEnd(s)}),$(2,"div",2),Oe(3),W()()),2&e&&(ln("mdc-tooltip--multiline",n._isMultiline),U("ngClass",n.tooltipClass),V(3),ui(n.message))},dependencies:[pm],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),i})(),VV=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[PJ],imports:[HU,uo,Fm,Jn,Jn,Zy]}),i})();function zV(...i){const t=C0(i),{args:e,keys:n}=GB(i),r=new In(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let h=!1;Mr(e[d]).subscribe(Xn(s,p=>{h||(h=!0,c--),a[d]=p},()=>l--,void 0,()=>{(!l||!h)&&(c||s.next(n?WB(n,a):a),s.complete())}))}});return t?r.pipe(tI(t)):r}class pR{}class mu{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{let r;if(r="string"==typeof n?[n]:"number"==typeof n?[n.toString()]:n.map(s=>s.toString()),r.length>0){const s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof mu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new mu;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof mu?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class GJ{encodeKey(t){return $V(t)}encodeValue(t){return $V(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const jJ=/%(\d[a-f0-9])/gi,YJ={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $V(i){return encodeURIComponent(i).replace(jJ,(t,e)=>YJ[e]??t)}function eC(i){return`${i}`}class gu{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new GJ,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function WJ(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(eC):[eC(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new gu({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(eC(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(eC(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class qJ{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function GV(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function WV(i){return typeof Blob<"u"&&i instanceof Blob}function jV(i){return typeof FormData<"u"&&i instanceof FormData}class ob{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function XJ(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new mu),this.context||(this.context=new qJ),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new gu,this.urlWithParams=e}serializeBody(){return null===this.body?null:GV(this.body)||WV(this.body)||jV(this.body)||function KJ(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gu?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||jV(this.body)?null:WV(this.body)?this.body.type||null:GV(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gu?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const d=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((h,p)=>h.set(p,t.setHeaders[p]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((h,p)=>h.set(p,t.setParams[p]),c)),new ob(e,n,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var ds=(()=>((ds=ds||{})[ds.Sent=0]="Sent",ds[ds.UploadProgress=1]="UploadProgress",ds[ds.ResponseHeader=2]="ResponseHeader",ds[ds.DownloadProgress=3]="DownloadProgress",ds[ds.Response=4]="Response",ds[ds.User=5]="User",ds))();class ZJ{constructor(t,e=200,n="OK"){this.headers=t.headers||new mu,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class mR extends ZJ{constructor(t={}){super(t),this.type=ds.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new mR({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function gR(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let _R=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof ob)s=e;else{let l,c;l=r.headers instanceof mu?r.headers:new mu(r.headers),r.params&&(c=r.params instanceof gu?r.params:new gu({fromObject:r.params})),s=new ob(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=mt(s).pipe(lu(l=>this.handler.handle(l)));if(e instanceof ob||"events"===r.observe)return o;const a=o.pipe(hn(l=>l instanceof mR));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(rt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(rt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(rt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(rt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new gu).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,gR(r,n))}post(e,n,r={}){return this.request("POST",e,gR(r,n))}put(e,n,r={}){return this.request("PUT",e,gR(r,n))}}return i.\u0275fac=function(e){return new(e||i)(ee(pR))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const dee=["*"];let nC;function ab(i){return function uee(){if(void 0===nC&&(nC=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(nC=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return nC}()?.createHTML(i)||i}function ez(i){return Error(`Unable to find icon with the name "${i}"`)}function tz(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function nz(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class zh{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let iC=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new zh(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const o=this._sanitizer.sanitize(Qn.HTML,r);if(!o)throw nz(r);const a=ab(o);return this._addSvgIconConfig(e,n,new zh("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new zh(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(Qn.HTML,n);if(!s)throw nz(n);const o=ab(s);return this._addSvgIconSetConfig(e,new zh("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(Qn.RESOURCE_URL,e);if(!n)throw tz(e);const r=this._cachedIconsByUrl.get(n);return r?mt(rC(r)):this._loadSvgIconFromConfig(new zh(e,null)).pipe(zi(s=>this._cachedIconsByUrl.set(n,s)),rt(s=>rC(s)))}getNamedSvgIcon(e,n=""){const r=iz(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):gm(ez(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?mt(rC(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(rt(n=>rC(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?mt(r):zV(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Yc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Qn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),mt(null)})))).pipe(rt(()=>{const o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw ez(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(zi(n=>e.svgText=n),rt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?mt(null):this._fetchIcon(e).pipe(zi(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(ab("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(ab("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function hee(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Qn.RESOURCE_URL,n);if(!o)throw tz(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(rt(c=>ab(c)),cu(()=>this._inProgressUrlFetches.delete(o)),Hf());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(iz(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return pee(s)?new zh(s.url,null,s.options):new zh(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(ee(_R,8),ee(eI),ee(qt,8),ee(fl))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function rC(i){return i.cloneNode(!0)}function iz(i,t){return i+":"+t}function pee(i){return!(!i.url||!i.options)}const mee=eb(class{constructor(i){this._elementRef=i}}),gee=new me("MAT_ICON_DEFAULT_OPTIONS"),_ee=new me("mat-icon-location",{providedIn:"root",factory:function vee(){const i=Lt(qt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),rz=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],yee=rz.map(i=>`[${i}]`).join(", "),bee=/^url\(['"]?#(.*?)['"]?\)$/;let yR=(()=>{class i extends mee{get inline(){return this._inline}set inline(e){this._inline=tn(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,s,o,a){super(e),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Qt.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(yee),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)rz.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(bee):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Oi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(iC),Sa("aria-hidden"),E(_ee),E(fl),E(gee,8))},i.\u0275cmp=st({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,n){2&e&&(It("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),ln("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ut],ngContentSelectors:dee,decls:1,vars:0,template:function(e,n){1&e&&(or(),Yt(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),sz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,Jn]}),i})();function xee(i,t){if(1&i){const e=$n();Gr(0),Ee(1,"mat-divider",3),$(2,"span"),Oe(3,"/"),W(),$(4,"button",4),De("click",function(){const s=Nt(e).index;return St(ae().navigate(s+1))}),Oe(5),W(),Wr()}if(2&i){const e=t.$implicit;V(5),Vi(" ",e," ")}}const wee=function(){return[]};let oz=(()=>{class i{constructor(e,n){this.navigation=e,this.main=n,this.rootName$=new $e("/")}ngAfterViewInit(){this.main.resource$.subscribe(e=>{let n=e?.id;if(n){const r=n.substring(n.lastIndexOf("/")+1);this.rootName$.next(r)}else this.rootName$.next("/")})}navigate(e){this.navigation.navigateBack(this.navigation.navigationPath$.value.length-e)}}return i.\u0275fac=function(e){return new(e||i)(E(QM),E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-navigation-bar"]],standalone:!0,features:[Bw],decls:6,vars:7,consts:[[1,"flex","items-center","space-x-1","py-2","px-4","bg-surface","shadow-sm","rounded-md"],["mat-button","",1,"font-medium","text-primary",3,"click"],[4,"ngFor","ngForOf"],["vertical",""],["mat-button","",1,"font-medium","text-secondary",3,"click"]],template:function(e,n){1&e&&($(0,"nav",0)(1,"button",1),De("click",function(){return n.navigate(0)}),Oe(2),Xe(3,"async"),W(),fe(4,xee,6,1,"ng-container",2),Xe(5,"async"),W()),2&e&&(V(2),Vi(" ",Je(3,2,n.rootName$)," "),V(2),U("ngForOf",Je(5,4,n.navigation.navigationPath$)||jr(6,wee)))},dependencies:[sb,Vh,fR,LV,Os,co],styles:["nav[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--mat-background);border-radius:4px}button[_ngcontent-%COMP%]{text-transform:none}"],changeDetection:0}),i})(),az=(()=>{class i{constructor(e){this.viewContainerRef=e}}return i.\u0275fac=function(e){return new(e||i)(E(Yr))},i.\u0275dir=ve({type:i,selectors:[["","dataBlockUI",""]]}),i})(),Mee=(()=>{class i{constructor(){this.resource=null,this.name="",this.resourceDescription="",this.changed=new He}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-fallback-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:2,vars:3,consts:[["matTooltipPosition","above",3,"matTooltip"]],template:function(e,n){1&e&&($(0,"p",0),Oe(1),W()),2&e&&(U("matTooltip",n.resourceDescription),V(1),Ah("",null==n.resource?null:n.resource.name,"> GUI component for block ",((null==n.resource||null==n.resource.schema?null:n.resource.schema.block_class_mro)||"").split("__")[0]," not implemented :(\n"))},dependencies:[Bs],changeDetection:0}),i})();function Cee(i,t){if(1&i){const e=$n();$(0,"h2",4),De("click",function(){Nt(e);const r=ae();return St(r.navigation.navigateToId(r.resource.id))}),Oe(1),W()}if(2&i){const e=ae();U("matTooltip",e.resourceDescription),V(1),ui(e.name)}}function See(i,t){1&i&&Ee(0,"app-block-actions",5),2&i&&U("resource",ae().resource)}const Eee=function(i,t,e,n){return{id:i,name:t,data:e,schema:n}};function Aee(i,t){if(1&i&&Ee(0,"app-editor",7),2&i){const e=ae().$implicit,n=ae();U("resource",V2(3,Eee,n.joinId(n.resource.id,e.key),e.key,null==n.data?null:n.data[e.key],null==n.schema?null:n.schema.fields[e.index].schema))("resourceDescription",(null==n.schema?null:n.schema.fields[e.index].description)||"")("disabled",n.disabled||!(null==n.schema||!n.schema.fields[e.index].is_programmatic))}}function Dee(i,t){if(1&i&&(Gr(0),fe(1,Aee,1,8,"app-editor",6),Xe(2,"async"),Wr()),2&i){const e=t.$implicit,n=ae();V(1),U("ngIf",!(Je(2,1,n.main.hideHiddenFields$)&&(null!=n.schema&&n.schema.fields[e.index].is_unknown||void 0!==(null==n.schema?null:n.schema.fields[e.index].schema.required_value)||null!=n.schema&&n.schema.fields[e.index].is_programmatic)))}}let wl=(()=>{class i{constructor(e,n){this.main=e,this.navigation=n,this.resource=null,this.resourceDescription="",this.hideBlockActions=!1,this.disabled=!1,this.fieldWhitelist=null,this.fieldBlacklist=null,this.changed=new He,this.destroyed$=new Re,this.joinId=Po}get name(){return this.resource&&this.resource.name}get data(){return this.resource&&this.resource.data}get schema(){return this.resource&&this.resource.schema}get fieldKeys(){let e=this.schema?.fields.map((n,r)=>({index:r,key:n.name}))||[];return this.fieldWhitelist?e=e.filter(({key:n})=>this.fieldWhitelist?.includes(n)):this.fieldBlacklist&&(e=e.filter(({key:n})=>!this.fieldBlacklist?.includes(n))),e}fieldTrackBy(e,n){return n.index}ngAfterViewInit(){var e=this;this.main.dataBlockChange$.pipe(Le(this.destroyed$),hn(([n,r])=>!!this.resource&&n.startsWith(this.resource.id)&&!n.substring(this.resource.id.length+1).includes("/"))).subscribe(function(){var n=je(function*([r,s]){const o=r.substring(e.resource.id.length+1);e.data[o]=s});return function(r){return n.apply(this,arguments)}}())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(ho),E(QM))},i.\u0275cmp=st({type:i,selectors:[["app-compound-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled",fieldWhitelist:"fieldWhitelist",fieldBlacklist:"fieldBlacklist"},outputs:{changed:"changed"},decls:5,vars:6,consts:[["id","title","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"resource",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf","ngForTrackBy"],["id","title","matTooltipPosition","above",3,"matTooltip","click"],[3,"resource"],[3,"resource","resourceDescription","disabled",4,"ngIf"],[3,"resource","resourceDescription","disabled"]],template:function(e,n){if(1&e&&(fe(0,Cee,2,2,"h2",0),Xe(1,"async"),fe(2,See,1,1,"app-block-actions",1),$(3,"div",2),fe(4,Dee,3,3,"ng-container",3),W()),2&e){let r;U("ngIf",n.name&&n.name!=(null==(r=Je(1,4,n.main.resource$))?null:r.name)),V(2),U("ngIf",!n.hideBlockActions),V(2),U("ngForOf",n.fieldKeys)("ngForTrackBy",n.fieldTrackBy)}},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}#title[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),i})(),lz=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(E(hl),E(vt))},i.\u0275dir=ve({type:i}),i})(),Hh=(()=>{class i extends lz{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,features:[ut]}),i})();const Oo=new me("NgValueAccessor"),Iee={provide:Oo,useExisting:Wn(()=>Na),multi:!0},kee=new me("CompositionEventMode");let Na=(()=>{class i extends lz{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ree(){const i=Gc()?Gc().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(E(hl),E(vt),E(kee,8))},i.\u0275dir=ve({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&De("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[An([Iee]),ut]}),i})();const Pee=!1;function _u(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function dz(i){return null!=i&&"number"==typeof i.length}const Xr=new me("NgValidators"),vu=new me("NgAsyncValidators"),Oee=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ml{static min(t){return uz(t)}static max(t){return hz(t)}static required(t){return function fz(i){return _u(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function pz(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function mz(i){return _u(i.value)||Oee.test(i.value)?null:{email:!0}}(t)}static minLength(t){return gz(t)}static maxLength(t){return _z(t)}static pattern(t){return function vz(i){if(!i)return sC;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(_u(n.value))return null;const r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Cz(t)}static composeAsync(t){return Sz(t)}}function uz(i){return t=>{if(_u(t.value)||_u(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function hz(i){return t=>{if(_u(t.value)||_u(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function gz(i){return t=>_u(t.value)||!dz(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function _z(i){return t=>dz(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function sC(i){return null}function yz(i){return null!=i}function bz(i){const t=ay(i)?Ni(i):i;if(Pee&&!UD(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof i&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new pe(-1101,e)}return t}function xz(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function wz(i,t){return t.map(e=>e(i))}function Mz(i){return i.map(t=>function Fee(i){return!i.validate}(t)?t:e=>t.validate(e))}function Cz(i){if(!i)return null;const t=i.filter(yz);return 0==t.length?null:function(e){return xz(wz(e,t))}}function bR(i){return null!=i?Cz(Mz(i)):null}function Sz(i){if(!i)return null;const t=i.filter(yz);return 0==t.length?null:function(e){return zV(wz(e,t).map(bz)).pipe(rt(xz))}}function xR(i){return null!=i?Sz(Mz(i)):null}function Ez(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function Az(i){return i._rawValidators}function Dz(i){return i._rawAsyncValidators}function wR(i){return i?Array.isArray(i)?i:[i]:[]}function oC(i,t){return Array.isArray(i)?i.includes(t):i===t}function Tz(i,t){const e=wR(t);return wR(i).forEach(r=>{oC(e,r)||e.push(r)}),e}function Iz(i,t){return wR(t).filter(e=>!oC(i,e))}class Rz{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=bR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=xR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class fo extends Rz{get formDirective(){return null}get path(){return null}}class sc extends Rz{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class kz{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Cl=(()=>{class i extends kz{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(E(sc,2))},i.\u0275dir=ve({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&ln("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[ut]}),i})(),MR=(()=>{class i extends kz{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(E(fo,10))},i.\u0275dir=ve({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&ln("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[ut]}),i})();function Pz(i,t){return i?`with name: '${t}'`:`at index: ${t}`}const ER=!1,lb="VALID",lC="INVALID",$m="PENDING",cb="DISABLED";function AR(i){return(cC(i)?i.validators:i)||null}function DR(i,t){return(cC(t)?t.asyncValidators:i)||null}function cC(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function Oz(i,t,e){const n=i.controls;if(!(t?Object.keys(n):n).length)throw new pe(1e3,ER?function Uee(i){return`\n    There are no form controls registered with this ${i?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!n[e])throw new pe(1001,ER?function Vee(i,t){return`Cannot find form control ${Pz(i,t)}`}(t,e):"")}function Fz(i,t,e){i._forEachChild((n,r)=>{if(void 0===e[r])throw new pe(1002,ER?function zee(i,t){return`Must supply a value for form control ${Pz(i,t)}`}(t,r):"")})}class dC{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===lb}get invalid(){return this.status===lC}get pending(){return this.status==$m}get disabled(){return this.status===cb}get enabled(){return this.status!==cb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Tz(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Tz(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Iz(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Iz(t,this._rawAsyncValidators))}hasValidator(t){return oC(this._rawValidators,t)}hasAsyncValidator(t){return oC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=$m,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=cb,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=lb,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===lb||this.status===$m)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cb:lb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=$m,this._hasOwnPendingAsyncValidator=!0;const e=bz(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new He,this.statusChanges=new He}_calculateStatus(){return this._allControlsDisabled()?cb:this.errors?lC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($m)?$m:this._anyControlsHaveStatus(lC)?lC:lb}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){cC(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function Hee(i){return Array.isArray(i)?bR(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function $ee(i){return Array.isArray(i)?xR(i):i||null}(this._rawAsyncValidators)}}class Gm extends dC{constructor(t,e,n){super(AR(e),DR(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Fz(this,!0,t),Object.keys(t).forEach(n=>{Oz(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{const r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class Lz extends Gm{}const $h=new me("CallSetDisabledState",{providedIn:"root",factory:()=>db}),db="always";function uC(i,t){return[...t.path,i]}function ub(i,t,e=db){TR(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function Wee(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&Nz(i,t)})}(i,t),function Yee(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function jee(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&Nz(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function Gee(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function hC(i,t,e=!0){const n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),pC(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function fC(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function TR(i,t){const e=Az(i);null!==t.validator?i.setValidators(Ez(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=Dz(i);null!==t.asyncValidator?i.setAsyncValidators(Ez(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();fC(t._rawValidators,r),fC(t._rawAsyncValidators,r)}function pC(i,t){let e=!1;if(null!==i){if(null!==t.validator){const r=Az(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(null!==t.asyncValidator){const r=Dz(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}const n=()=>{};return fC(t._rawValidators,n),fC(t._rawAsyncValidators,n),e}function Nz(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Bz(i,t){TR(i,t)}function RR(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function Uz(i,t){i._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function kR(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===Na?e=s:function Kee(i){return Object.getPrototypeOf(i.constructor)===Hh}(s)?n=s:r=s}),r||n||e||null}const Qee={provide:fo,useExisting:Wn(()=>fb)},hb=(()=>Promise.resolve())();let fb=(()=>{class i extends fo{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new He,this.form=new Gm({},bR(e),xR(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){hb.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ub(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){hb.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){hb.then(()=>{const n=this._findContainer(e.path),r=new Gm({});Bz(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){hb.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){hb.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Uz(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(E(Xr,10),E(vu,10),E($h,8))},i.\u0275dir=ve({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&De("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([Qee]),ut]}),i})();function Vz(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function zz(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const oc=class extends dC{constructor(t=null,e,n){super(AR(e),DR(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cC(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=zz(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Vz(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Vz(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){zz(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},tte={provide:sc,useExisting:Wn(()=>ac)},Gz=(()=>Promise.resolve())();let ac=(()=>{class i extends sc{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new oc,this._registered=!1,this.update=new He,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=kR(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),RR(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ub(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){Gz.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&function fm(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);Gz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?uC(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(E(fo,9),E(Xr,10),E(vu,10),E(Oo,10),E(Yn,8),E($h,8))},i.\u0275dir=ve({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[An([tte]),ut,xi]}),i})(),PR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const nte={provide:Oo,useExisting:Wn(()=>Qc),multi:!0};let Qc=(()=>{class i extends Hh{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&De("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[An([nte]),ut]}),i})(),Wz=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();const OR=new me("NgModelWithFormControlWarning"),ate={provide:fo,useExisting:Wn(()=>Gh)};let Gh=(()=>{class i extends fo{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new He,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return ub(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){hC(e.control||null,e,!1),function Zee(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,Uz(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(hC(n||null,e),(i=>i instanceof oc)(r)&&(ub(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);Bz(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function qee(i,t){return pC(i,t)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){TR(this.form,this),this._oldForm&&pC(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(E(Xr,10),E(vu,10),E($h,8))},i.\u0275dir=ve({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&De("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[An([ate]),ut,xi]}),i})();const dte={provide:sc,useExisting:Wn(()=>mC)};let mC=(()=>{class i extends sc{set isDisabled(e){}constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new He,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=kR(0,s)}ngOnChanges(e){this._added||this._setUpControl(),RR(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return uC(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(E(fo,13),E(Xr,10),E(vu,10),E(Oo,10),E(OR,8))},i.\u0275dir=ve({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[An([dte]),ut,xi]}),i})();function Qz(i){return"number"==typeof i?i:parseInt(i,10)}function Jz(i){return"number"==typeof i?i:parseFloat(i)}let Wh=(()=>{class i{constructor(){this._validator=sC}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):sC,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,features:[xi]}),i})();const _te={provide:Xr,useExisting:Wn(()=>Jc),multi:!0};let Jc=(()=>{class i extends Wh{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>Jz(e),this.createValidator=e=>hz(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&It("max",n._enabled?n.max:null)},inputs:{max:"max"},features:[An([_te]),ut]}),i})();const vte={provide:Xr,useExisting:Wn(()=>ed),multi:!0};let ed=(()=>{class i extends Wh{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>Jz(e),this.createValidator=e=>uz(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&It("min",n._enabled?n.min:null)},inputs:{min:"min"},features:[An([vte]),ut]}),i})();const wte={provide:Xr,useExisting:Wn(()=>VR),multi:!0};let VR=(()=>{class i extends Wh{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>Qz(e),this.createValidator=e=>gz(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&It("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[An([wte]),ut]}),i})();const Mte={provide:Xr,useExisting:Wn(()=>zR),multi:!0};let zR=(()=>{class i extends Wh{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>Qz(e),this.createValidator=e=>_z(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&It("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[An([Mte]),ut]}),i})(),iH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Wz]}),i})();class rH extends dC{constructor(t,e,n){super(AR(e),DR(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Fz(this,!1,t),t.forEach((n,r)=>{Oz(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function sH(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let Ste=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new i;return e.useNonNullable=!0,e}group(e,n=null){const r=this._reduceControls(e);let s={};return sH(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Gm(r,s)}record(e,n=null){const r=this._reduceControls(e);return new Lz(r,n)}control(e,n,r){let s={};return this.useNonNullable?(sH(n)?s=n:(s.validators=n,s.asyncValidators=r),new oc(e,{...s,nonNullable:!0})):new oc(e,n,r)}array(e,n,r){const s=e.map(o=>this._createControl(o));return new rH(s,n,r)}_reduceControls(e){const n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){return e instanceof oc||e instanceof dC?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oH=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:$h,useValue:e.callSetDisabledState??db}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[iH]}),i})(),aH=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:OR,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:$h,useValue:e.callSetDisabledState??db}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[iH]}),i})();const Ete=["matFormFieldNotchedOutline",""],Ate=["*"],Dte=["textField"],Tte=["iconPrefixContainer"],Ite=["textPrefixContainer"];function Rte(i,t){1&i&&Ee(0,"span",19)}function kte(i,t){if(1&i){const e=$n();$(0,"label",17),De("cdkObserveContent",function(){return Nt(e),St(ae(2)._refreshOutlineNotchWidth())}),Yt(1,1),fe(2,Rte,1,0,"span",18),W()}if(2&i){const e=ae(2);U("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),It("for",e._control.id)("aria-owns",e._control.id),V(2),U("ngIf",!e.hideRequiredMarker&&e._control.required)}}function Pte(i,t){1&i&&fe(0,kte,3,6,"label",16),2&i&&U("ngIf",ae()._hasFloatingLabel())}function Ote(i,t){1&i&&Ee(0,"div",20)}function Fte(i,t){}function Lte(i,t){1&i&&fe(0,Fte,0,0,"ng-template",22),2&i&&(ae(2),U("ngTemplateOutlet",sr(1)))}function Nte(i,t){if(1&i&&($(0,"div",21),fe(1,Lte,1,1,"ng-template",9),W()),2&i){const e=ae();U("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),V(1),U("ngIf",!e._forceDisplayInfixLabel())}}function Bte(i,t){1&i&&($(0,"div",23,24),Yt(2,2),W())}function Ute(i,t){1&i&&($(0,"div",25,26),Yt(2,3),W())}function Vte(i,t){}function zte(i,t){1&i&&fe(0,Vte,0,0,"ng-template",22),2&i&&(ae(),U("ngTemplateOutlet",sr(1)))}function Hte(i,t){1&i&&($(0,"div",27),Yt(1,4),W())}function $te(i,t){1&i&&($(0,"div",28),Yt(1,5),W())}function Gte(i,t){1&i&&Ee(0,"div",29)}function Wte(i,t){1&i&&($(0,"div",30),Yt(1,6),W()),2&i&&U("@transitionMessages",ae()._subscriptAnimationState)}function jte(i,t){if(1&i&&($(0,"mat-hint",34),Oe(1),W()),2&i){const e=ae(2);U("id",e._hintLabelId),V(1),ui(e.hintLabel)}}function Yte(i,t){if(1&i&&($(0,"div",31),fe(1,jte,2,2,"mat-hint",32),Yt(2,7),Ee(3,"div",33),Yt(4,8),W()),2&i){const e=ae();U("@transitionMessages",e._subscriptAnimationState),V(1),U("ngIf",e.hintLabel)}}const qte=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Xte=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let po=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["mat-label"]]}),i})(),Kte=0;const lH=new me("MatError");let Zte=(()=>{class i{constructor(e,n){this.id="mat-mdc-error-"+Kte++,e||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(e){return new(e||i)(Sa("aria-live"),E(vt))},i.\u0275dir=ve({type:i,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(e,n){2&e&&tc("id",n.id)},inputs:{id:"id"},features:[An([{provide:lH,useExisting:i}])]}),i})(),Qte=0,cH=(()=>{class i{constructor(){this.align="start",this.id="mat-mdc-hint-"+Qte++}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,n){2&e&&(tc("id",n.id),It("align",null),ln("mat-mdc-form-field-hint-end","end"===n.align))},inputs:{align:"align",id:"id"}}),i})();const dH=new me("MatPrefix");let Jte=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:["matTextPrefix","_isTextSelector"]},features:[An([{provide:dH,useExisting:i}])]}),i})();const uH=new me("MatSuffix");let ene=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[An([{provide:uH,useExisting:i}])]}),i})(),hH=(()=>{class i{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function tne(i){if(null!==i.offsetParent)return i.scrollWidth;const e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const n=e.scrollWidth;return e.remove(),n}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return i.\u0275fac=function(e){return new(e||i)(E(vt))},i.\u0275dir=ve({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,n){2&e&&ln("mdc-floating-label--float-above",n.floating)},inputs:{floating:"floating"}}),i})();const fH="mdc-line-ripple--active",gC="mdc-line-ripple--deactivating";let pH=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(gC);"opacity"===r.propertyName&&o&&s.remove(fH,gC)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(gC),e.add(fH)}deactivate(){this._elementRef.nativeElement.classList.add(gC)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt))},i.\u0275dir=ve({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),i})(),mH=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt))},i.\u0275cmp=st({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,n){2&e&&ln("mdc-notched-outline--notched",n.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Ete,ngContentSelectors:Ate,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,n){1&e&&(or(),Ee(0,"div",0),$(1,"div",1),Yt(2),W(),Ee(3,"div",2)),2&e&&(V(1),Zo("width",n._getNotchWidth()))},encapsulation:2,changeDetection:0}),i})();const nne={transitionMessages:La("transitionMessages",[Ns("enter",oi({opacity:1,transform:"translateY(0%)"})),Or("void => enter",[oi({opacity:0,transform:"translateY(-5px)"}),qr("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let HR=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i}),i})();const _C=new me("MatFormField"),ine=new me("MAT_FORM_FIELD_DEFAULT_OPTIONS");let gH=0,Ba=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=tn(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==n&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._document=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+gH++,this._hintLabelId="mat-mdc-hint-"+gH++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new Re,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Le(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),Cr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Le(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Le(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Yn),E(gt),E(Fa),E(Hi),E(ine,8),E(kr,8),E(qt))},i.\u0275cmp=st({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,n,r){if(1&e&&(Yi(r,po,5),Yi(r,po,7),Yi(r,HR,5),Yi(r,dH,5),Yi(r,uH,5),Yi(r,lH,5),Yi(r,cH,5)),2&e){let s;Et(s=At())&&(n._labelChildNonStatic=s.first),Et(s=At())&&(n._labelChildStatic=s.first),Et(s=At())&&(n._formFieldControl=s.first),Et(s=At())&&(n._prefixChildren=s),Et(s=At())&&(n._suffixChildren=s),Et(s=At())&&(n._errorChildren=s),Et(s=At())&&(n._hintChildren=s)}},viewQuery:function(e,n){if(1&e&&(Nn(Dte,5),Nn(Tte,5),Nn(Ite,5),Nn(hH,5),Nn(mH,5),Nn(pH,5)),2&e){let r;Et(r=At())&&(n._textField=r.first),Et(r=At())&&(n._iconPrefixContainer=r.first),Et(r=At())&&(n._textPrefixContainer=r.first),Et(r=At())&&(n._floatingLabel=r.first),Et(r=At())&&(n._notchedOutline=r.first),Et(r=At())&&(n._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,n){2&e&&ln("mat-mdc-form-field-label-always-float",n._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",n._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",n._hasIconSuffix)("mat-form-field-invalid",n._control.errorState)("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===n._animationMode)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-hide-placeholder",n._hasFloatingLabel()&&!n._shouldLabelFloat())("mat-focused",n._control.focused)("mat-primary","accent"!==n.color&&"warn"!==n.color)("mat-accent","accent"===n.color)("mat-warn","warn"===n.color)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[An([{provide:_C,useExisting:i}])],ngContentSelectors:Xte,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,n){1&e&&(or(qte),fe(0,Pte,1,1,"ng-template",null,0,ru),$(2,"div",1,2),De("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),fe(4,Ote,1,0,"div",3),$(5,"div",4),fe(6,Nte,2,3,"div",5),fe(7,Bte,3,0,"div",6),fe(8,Ute,3,0,"div",7),$(9,"div",8),fe(10,zte,1,1,"ng-template",9),Yt(11),W(),fe(12,Hte,2,0,"div",10),fe(13,$te,2,0,"div",11),W(),fe(14,Gte,1,0,"div",12),W(),$(15,"div",13),fe(16,Wte,2,1,"div",14),fe(17,Yte,5,2,"div",15),W()),2&e&&(V(2),ln("mdc-text-field--filled",!n._hasOutline())("mdc-text-field--outlined",n._hasOutline())("mdc-text-field--no-label",!n._hasFloatingLabel())("mdc-text-field--disabled",n._control.disabled)("mdc-text-field--invalid",n._control.errorState),V(2),U("ngIf",!n._hasOutline()&&!n._control.disabled),V(2),U("ngIf",n._hasOutline()),V(1),U("ngIf",n._hasIconPrefix),V(1),U("ngIf",n._hasTextPrefix),V(2),U("ngIf",!n._hasOutline()||n._forceDisplayInfixLabel()),V(2),U("ngIf",n._hasTextSuffix),V(1),U("ngIf",n._hasIconSuffix),V(1),U("ngIf",!n._hasOutline()),V(1),ln("mat-mdc-form-field-subscript-dynamic-size","dynamic"===n.subscriptSizing),U("ngSwitch",n._getDisplayedMessages()),V(1),U("ngSwitchCase","error"),V(1),U("ngSwitchCase","hint"))},dependencies:[hi,wy,xy,HT,DU,cH,hH,mH,pH],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[nne.transitionMessages]},changeDetection:0}),i})(),vC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,uo,GI,Jn]}),i})();const yH=Oh({passive:!0});let one=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return bo;const n=Xc(e),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new Re,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,yH),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,yH)}}),s}stopMonitoring(e){const n=Xc(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(e){return new(e||i)(ee(Hi),ee(gt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ane=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();const $R=new me("MAT_INPUT_VALUE_ACCESSOR"),lne=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let cne=0;const dne=qU(class{constructor(i,t,e,n){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=e,this.ngControl=n,this.stateChanges=new Re}});let Sl=(()=>{class i extends dne{get disabled(){return this._disabled}set disabled(e){this._disabled=tn(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Ml.required)??!1}set required(e){this._required=tn(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&dU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=tn(e)}constructor(e,n,r,s,o,a,l,c,d,h){super(a,s,o,r),this._elementRef=e,this._platform=n,this._autofillMonitor=c,this._formField=h,this._uid="mat-input-"+cne++,this.focused=!1,this.stateChanges=new Re,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(g=>dU().has(g)),this._iOSKeyupListener=g=>{const b=g.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!h,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){lne.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Hi),E(sc,10),E(fb,8),E(Gh,8),E(KU),E($R,10),E(one),E(gt),E(_C,8))},i.\u0275dir=ve({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,n){1&e&&De("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&e&&(tc("id",n.id)("disabled",n.disabled)("required",n.required),It("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),ln("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[An([{provide:HR,useExisting:i}]),ut,xi]}),i})(),bH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,vC,vC,ane,Jn]}),i})();function une(i,t){if(1&i&&($(0,"mat-label"),Oe(1),W()),2&i){const e=ae(2);V(1),ui(e.resource.name)}}function hne(i,t){if(1&i){const e=$n();$(0,"mat-form-field",1),fe(1,une,2,1,"mat-label",2),$(2,"input",3),De("ngModelChange",function(r){return Nt(e),St(ae().resource.data=r)})("change",function(){return Nt(e),St(ae().changed.emit())}),W()()}if(2&i){const e=ae();U("matTooltip",e.resourceDescription),V(1),U("ngIf",e.resource.name),V(1),U("max",e.resource.schema.max_value)("min",e.resource.schema.min_value)("step",e.resource.schema.value_interval)("disabled",e.disabled||void 0!==e.resource.schema.required_value)("ngModel",e.resource.data)}}let xH=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-number-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(e,n){1&e&&fe(0,hne,3,7,"mat-form-field",0),2&e&&U("ngIf",n.resource)},dependencies:[hi,Na,Qc,Cl,ed,Jc,ac,Ba,po,Sl,Bs],changeDetection:0}),i})();function fne(i,t){if(1&i&&($(0,"mat-label"),Oe(1),W()),2&i){const e=ae(2);V(1),ui(e.resource.name)}}function pne(i,t){if(1&i){const e=$n();$(0,"mat-form-field",1),fe(1,fne,2,1,"mat-label",2),$(2,"input",3),De("ngModelChange",function(r){return Nt(e),St(ae().resource.data=r)})("change",function(){return Nt(e),St(ae().changed.emit())}),W()()}if(2&i){const e=ae();U("matTooltip",e.resourceDescription),V(1),U("ngIf",e.resource.name),V(1),U("disabled",e.disabled||void 0!==e.resource.schema.required_value)("maxlength",e.maxLength)("minlength",e.minLength)("ngModel",e.resource.data)}}let wH=(()=>{class i{constructor(){this._resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He,this.minLength=null,this.maxLength=null}get resource(){return this._resource}set resource(e){this._resource=e,isNaN(+this._resource?.schema.length)||(this.minLength=this.maxLength=+this._resource?.schema.length)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-string-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["matInput","","type","text",3,"disabled","maxlength","minlength","ngModel","ngModelChange","change"]],template:function(e,n){1&e&&fe(0,pne,3,6,"mat-form-field",0),2&e&&U("ngIf",n.resource)},dependencies:[hi,Na,Cl,VR,zR,ac,Ba,po,Sl,Bs],changeDetection:0}),i})();const jh=function(){return[]};function mne(i,t){if(1&i&&($(0,"mat-panel-description"),Oe(1," Click to view items ("),$(2,"b"),Oe(3),W(),Oe(4,") "),W()),2&i){const e=ae();V(3),ui((e.resourceData||jr(1,jh)).length)}}function gne(i,t){1&i&&($(0,"mat-panel-description"),Oe(1," Empty array "),W())}function _ne(i,t){}function vne(i,t){if(1&i&&Ee(0,"app-editor",8),2&i){const e=ae().$implicit,n=ae(2);U("resource",n.children[n.pageIndex*n.pageSize+e])("disabled",n.disabled)}}function yne(i,t){if(1&i&&(Gr(0),fe(1,vne,1,2,"app-editor",7),Wr()),2&i){const e=t.$implicit,n=ae(2);V(1),U("ngIf",n.pageIndex*n.pageSize+e<n.children.length)}}function bne(i,t){}function xne(i,t){1&i&&($(0,"p"),Oe(1,"Empty array"),W())}function wne(i,t){if(1&i&&(Gr(0),fe(1,_ne,0,0,"ng-template",5),fe(2,yne,2,1,"ng-container",6),fe(3,bne,0,0,"ng-template",5),fe(4,xne,2,0,"p",3),Wr()),2&i){const e=ae(),n=sr(10);V(1),U("ngTemplateOutlet",n),V(1),U("ngForOf",e.renderIndexes),V(1),U("ngTemplateOutlet",n),V(1),U("ngIf",0==(e.resourceData||jr(4,jh)).length)}}function Mne(i,t){if(1&i&&($(0,"mat-option",16),Oe(1),W()),2&i){const e=t.$implicit,n=ae(3);U("value",e),V(1),Ah(" ",e*n.pageSize," - ",(e+1)*n.pageSize-1," ")}}const Cne=function(i){return{hidden:i}};function Sne(i,t){if(1&i){const e=$n();$(0,"div",10)(1,"mat-paginator",11),De("page",function(r){return Nt(e),St(ae(2).renderPage(r.pageIndex,r.pageSize))}),W(),$(2,"div",12)(3,"div",13),Oe(4,"Go To:"),W(),$(5,"mat-form-field")(6,"mat-select",14),De("ngModelChange",function(r){return Nt(e),St(ae(2).goToIndex=r)})("selectionChange",function(){Nt(e);const r=ae(2);return St(r.renderPage(r.goToIndex,r.pageSize))}),fe(7,Mne,2,3,"mat-option",15),W()()()()}if(2&i){const e=ae(2);U("ngClass",am(9,Cne,(e.resourceData||jr(8,jh)).length<=e.minPageSize)),V(1),U("length",(e.resourceData||jr(11,jh)).length)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",!0),V(5),U("ngModel",e.goToIndex),V(1),U("ngForOf",e.pageIndexes)}}function Ene(i,t){1&i&&fe(0,Sne,8,12,"div",9),2&i&&U("ngIf",(ae().resourceData||jr(1,jh)).length>0)}let GR=(()=>{class i{constructor(e,n,r){this.main=e,this.cdr=n,this.navigation=r,this._resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He,this.renderContents=!1,this.minPageSize=10,this.pageIndex=0,this.pageSize=0,this.pageSizeOptions=[10,25,50,100],this.children=[],this.renderIndexes=[],this.goToIndex=0,this.pageIndexes=[],this.destroyed$=new Re}set resource(e){this._resource=e,this.buildChildren(),this.renderPage(0,this.minPageSize),this.updatePageIndexes()}get resource(){return this._resource}get resourceData(){return this._resource?.data}buildChildren(){this.children=(this.resourceData||[]).map((e,n)=>({id:Po(this._resource.id,n),name:""+n,data:e,schema:this._resource.schema.child_schema}))}get schema(){return this._resource?.schema}get name(){return this._resource?.name||null}ngAfterViewInit(){var e=this;this.main.dataBlockChange$.pipe(Le(this.destroyed$),hn(([n,r])=>!!this.resource&&n.startsWith(this.resource.id)&&!n.substring(this.resource.id.length+1).includes("/"))).subscribe(function(){var n=je(function*([r,s]){const o=r.substring(e.resource.id.length+1);e.resourceData[+o]=s});return function(r){return n.apply(this,arguments)}}())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onContentsTrigger(e){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),e?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(e,n){this.pageSize!==n&&(this.renderIndexes=new Array(n).fill(null).map((r,s)=>s)),this.goToIndex=this.pageIndex=e,this.pageSize=n,this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let e=0;e<Math.ceil((this.resourceData||[]).length/this.pageSize);e++)this.pageIndexes.push(e)}}return i.\u0275fac=function(e){return new(e||i)(E(ho),E(Yn),E(QM))},i.\u0275cmp=st({type:i,selectors:[["app-array-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:11,vars:9,consts:[["id","title","matTooltipPosition","above",3,"matTooltip","click"],[3,"opened","closed"],["matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["paginator",""],[3,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[3,"resource","disabled",4,"ngIf"],[3,"resource","disabled"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,n){1&e&&($(0,"h2",0),De("click",function(){return n.navigation.navigateToId(n.resource.id)}),Oe(1),W(),$(2,"mat-expansion-panel",1),De("opened",function(){return n.onContentsTrigger(!0)})("closed",function(){return n.onContentsTrigger(!1)}),$(3,"mat-expansion-panel-header",2)(4,"mat-panel-title"),Oe(5),W(),fe(6,mne,5,2,"mat-panel-description",3),fe(7,gne,2,0,"mat-panel-description",3),W(),fe(8,wne,5,5,"ng-container",3),W(),fe(9,Ene,1,2,"ng-template",null,4,ru)),2&e&&(U("matTooltip",n.resourceDescription),V(1),ui(n.name),V(2),U("matTooltip",n.resourceDescription),V(2),Vi(" ",n.name," "),V(1),U("ngIf",(n.resourceData||jr(7,jh)).length>0),V(1),U("ngIf",0==(n.resourceData||jr(8,jh)).length),V(1),U("ngIf",n.renderContents))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#title[_ngcontent-%COMP%]{cursor:pointer}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0}),i})();function Ane(i,t){1&i&&(Ee(0,"img",2),Xe(1,"async")),2&i&&U("src",Je(1,1,ae().imageUrl$),Up)}const Dne=function(){return["bitmap","palette"]};let Tne=(()=>{class i{constructor(e,n){this.eelDelegate=e,this.main=n,this._resource$=new $e(null),this.imageUrl$=new $e(null),this.destroyed$=new Re,this.changed=new He}set resource(e){this._resource$.next(e)}get resource(){return this._resource$.getValue()}ngAfterViewInit(){var e=this;return je(function*(){e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var n=je(function*(r){if(r){const s=yield e.eelDelegate.serializeResource(r.id);e.imageUrl$.next(s.find(o=>o.endsWith(".png"))||null)}else e.imageUrl$.next(null)});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-bitmap-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:8,consts:[[3,"resource","fieldBlacklist"],[3,"src",4,"ngIf"],[3,"src"]],template:function(e,n){1&e&&(Ee(0,"app-compound-block-ui",0),Xe(1,"async"),fe(2,Ane,2,3,"img",1),Xe(3,"async")),2&e&&(U("resource",Je(1,3,n._resource$))("fieldBlacklist",jr(7,Dne)),V(2),U("ngIf",Je(3,5,n.imageUrl$)))},dependencies:[hi,wl,co],styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;row-gap:1rem}img[_ngcontent-%COMP%]{min-width:10rem;max-width:100%;max-height:25rem;object-fit:contain;background-image:linear-gradient(45deg,#808080 25%,transparent 25%),linear-gradient(-45deg,#808080 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#808080 75%),linear-gradient(-45deg,transparent 75%,#808080 75%);background-size:16px 16px;background-color:#aaa}"],changeDetection:0}),i})();const Ine=["*"],Fne=new me("MAT_CARD_CONFIG");let MH=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}}return i.\u0275fac=function(e){return new(e||i)(E(Fne,8))},i.\u0275cmp=st({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,n){2&e&&ln("mat-mdc-card-outlined","outlined"===n.appearance)("mdc-card--outlined","outlined"===n.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:Ine,decls:1,vars:0,template:function(e,n){1&e&&(or(),Yt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),i})(),CH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,uo,Jn]}),i})();class WR{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Re,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,n=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(t){if(this.compareWith){for(let e of this._selection)if(this.compareWith(t,e))return e;return t}return t}}let jR=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),oie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[Jn,uo,nb,Jn]}),i})();const IH={transformPanel:La("transformPanel",[Or("void => enter-dropdown",qr("120ms cubic-bezier(0, 0, 0.2, 1)",lV([oi({opacity:0,transform:"scale(1, 0.8)"}),oi({opacity:1,transform:"scale(1, 1)"})]))),Or("void => enter-dialog",qr("150ms cubic-bezier(0, 0, 0.2, 1)",lV([oi({opacity:0,transform:"scale(0.7)"}),oi({transform:"none",opacity:1})]))),Or("* => void",qr("100ms linear",oi({opacity:0})))]),fadeInCalendar:La("fadeInCalendar",[Ns("void",oi({opacity:0})),Ns("enter",oi({opacity:1})),Or("void => *",qr("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},PH=function(i){return{active:i}};function Cie(i,t){if(1&i){const e=$n();$(0,"button",2),De("click",function(){const s=Nt(e).$implicit;return St(ae().select(s))}),W()}if(2&i){const e=t.$implicit,n=ae();Zo("background-color",e),U("ngClass",am(3,PH,n.selectedColor===e))}}function Sie(i,t){if(1&i){const e=$n();$(0,"button",2),De("click",function(){const s=Nt(e).$implicit;return St(ae().select(s))}),W()}if(2&i){const e=t.$implicit,n=ae();Zo("background-color",e),U("ngClass",am(3,PH,n.selectedColor===e))}}const Eie=["button"],Aie=/^\s+/,Die=/\s+$/,jm=Math.round,Tie=(Math,Math,Math,/[^0-9]/g),OH=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function FH(i,t,e){const n=i.getImageData(t,e,1,1).data;return{r:n[0],g:n[1],b:n[2]}}function Yh(i){return 1==i.length?"0"+i:""+i}function Rie(i){return Math.round(255*parseFloat(i)).toString(16)}function LH(i){return ia(i)/255}function ia(i){return parseInt(i,16)}function NH(i,t,e,n){var r=[Yh(jm(i).toString(16)),Yh(jm(t).toString(16)),Yh(jm(e).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}const yu="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",XR="[\\s|\\(]+("+yu+")[,|\\s]+("+yu+")[,|\\s]+("+yu+")\\s*\\)?",KR="[\\s|\\(]+("+yu+")[,|\\s]+("+yu+")[,|\\s]+("+yu+")[,|\\s]+("+yu+")\\s*\\)?",qh={CSS_UNIT:new RegExp(yu),rgb:new RegExp("rgb"+XR),rgba:new RegExp("rgba"+KR),hsl:new RegExp("hsl"+XR),hsla:new RegExp("hsla"+KR),hsv:new RegExp("hsv"+XR),hsva:new RegExp("hsva"+KR),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function ZR(i){let t;return i=i.replace(Aie,"").replace(Die,"").toLowerCase(),(t=qh.rgb.exec(i))?{r:t[1],g:t[2],b:t[3],a:1}:(t=qh.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=qh.hex8.exec(i))?{r:ia(t[1]),g:ia(t[2]),b:ia(t[3]),a:LH(t[4])}:(t=qh.hex6.exec(i))?{r:ia(t[1]),g:ia(t[2]),b:ia(t[3]),a:1}:(t=qh.hex4.exec(i))?{r:ia(t[1]+""+t[1]),g:ia(t[2]+""+t[2]),b:ia(t[3]+""+t[3]),a:LH(t[4]+""+t[4])}:(t=qh.hex3.exec(i))?{r:ia(t[1]+""+t[1]),g:ia(t[2]+""+t[2]),b:ia(t[3]+""+t[3]),a:1}:null}class Xh{constructor(t,e,n,r){this.r=t>255?255:t,this.g=e>255?255:e,this.b=n>255?255:n,this.a=null!=r?r>1?1:r:1,this.roundA=Math.round(this.a),this.hex=NH(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(t){return NH(this.r,this.g,this.b,t)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(t){return"#"+this.toHex(t)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(t){return function Iie(i,t,e,n,r){var s=[Yh(jm(i).toString(16)),Yh(jm(t).toString(16)),Yh(jm(e).toString(16)),Yh(Rie(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this.r,this.g,this.b,this.a,t)}toHex8String(t){return"#"+this.toHex8(t)}toString(t){let n;return t||!(this.a<1&&this.a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t?("rgb"===t&&(n=this.toRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),n||this.toHexString()):this.toRgbString()}}let BH=(()=>{class i{constructor(e,n){this.zone=e,this.colorChanged=new He,this.x=0,this.y=0,this.drag=!1,this._destroyed=new Re,this.elementId=n}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(e){this.drag=!0,this.changeColor(e),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(e){this.drag&&this.zone.run(()=>{this.changeColor(e)})}onMouseup(e){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(e){this.colorChanged.emit(e)}}return i.\u0275fac=function(e){Ao()},i.\u0275dir=ve({type:i,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),i})(),Oie=(()=>{class i extends BH{constructor(e){super(e,"color-strip"),this.zone=e}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"rgba(255, 0, 0, 1)"),e.addColorStop(.17,"rgba(255, 255, 0, 1)"),e.addColorStop(.34,"rgba(0, 255, 0, 1)"),e.addColorStop(.51,"rgba(0, 255, 255, 1)"),e.addColorStop(.68,"rgba(0, 0, 255, 1)"),e.addColorStop(.85,"rgba(255, 0, 255, 1)"),e.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=e,this.ctx.fill()}redrawIndicator(e,n){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,n,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(e){this.x=e.offsetX,this.y=e.offsetY,this.draw();const{r:n,g:r,b:s}=FH(this.ctx,e.offsetX,e.offsetY);this.emitChange(new Xh(n,r,s))}}return i.\u0275fac=function(e){return new(e||i)(E(gt))},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-slider"]],features:[ut],decls:1,vars:0,consts:[["id","color-strip","width","15","height","234",1,"zone-strip",3,"mousedown","mouseup"]],template:function(e,n){1&e&&($(0,"canvas",0),De("mousedown",function(s){return n.onMousedown(s)})("mouseup",function(s){return n.onMouseup(s)}),W())}}),i})(),Fie=(()=>{class i{constructor(){}onInput(e){this._formatInput(e.target)}_formatInput(e){let n=Number(e.value.replace(Tie,""));n=isNaN(n)?0:n,e.value=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(e,n){1&e&&De("input",function(s){return n.onInput(s)})}}),i})(),Nie=(()=>{class i extends BH{constructor(e){super(e,"color-block"),this.zone=e,this._resetBaseColor=!0,this.formGroup=new Gm({r:new oc(null,[Ml.required]),g:new oc(null,[Ml.required]),b:new oc(null,[Ml.required]),a:new oc(null,[Ml.required]),hex:new oc(null,[Ml.required,Ml.pattern(qh.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){Cr(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(Le(this._destroyed),na(400)).subscribe(r=>{const s=new Xh(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(s)}),this.hexCtrl.valueChanges.pipe(Le(this._destroyed),na(400),bl()).subscribe(r=>{const s=ZR(r);if(null!=s){const o=new Xh(s.r,s.g,s.b,s.a);this.emitChange(o)}})}ngOnChanges(e){e.color&&e.color.currentValue&&(this.updateForm(e.color.currentValue),this._resetBaseColor&&(this._baseColor=e.color.currentValue),this._resetBaseColor=!0,e.color.firstChange||this.draw())}updateForm(e){const n={emitEvent:!1};this.rCtrl.setValue(e.r,n),this.gCtrl.setValue(e.g,n),this.bCtrl.setValue(e.b,n),this.aCtrl.setValue(e.a,n),this.hexCtrl.setValue(e.hex,n)}redrawIndicator(e,n){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(e,n,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const e=this.ctx.createLinearGradient(0,0,this.width,0);e.addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height);const n=this.ctx.createLinearGradient(0,0,0,this.height);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(e){this._baseColor=e,this.color=e,this.fillGradient(),this.emitChange(e)}changeColor(e){this.x=e.offsetX,this.y=e.offsetY,this._resetBaseColor=!1,this.draw();const{r:n,g:r,b:s}=FH(this.ctx,e.offsetX,e.offsetY);this.emitChange(new Xh(n,r,s))}}return i.\u0275fac=function(e){return new(e||i)(E(gt))},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[ut,xi],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","235",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],[1,"input-opacity"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(e,n){1&e&&($(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),De("mousedown",function(s){return n.onMousedown(s)})("mouseup",function(s){return n.onMouseup(s)}),W(),$(4,"ngx-mat-color-slider",4),De("colorChanged",function(s){return n.onSliderColorChanged(s)}),W()(),$(5,"div",5)(6,"mat-form-field")(7,"mat-label"),Oe(8,"R"),W(),Ee(9,"input",6),W(),$(10,"mat-form-field")(11,"mat-label"),Oe(12,"G"),W(),Ee(13,"input",7),W(),$(14,"mat-form-field")(15,"mat-label"),Oe(16,"B"),W(),Ee(17,"input",8),W()()(),$(18,"div",1),Ee(19,"button",9),$(20,"mat-form-field")(21,"mat-label"),Oe(22,"HEX6"),W(),$(23,"mat-label",10),Oe(24,"#\xa0"),W(),Ee(25,"input",11),W(),$(26,"mat-form-field",12)(27,"mat-label"),Oe(28,"A"),W(),Ee(29,"input",13),W()()()),2&e&&(U("formGroup",n.formGroup),V(19),Zo("background-color",(null==n.color?null:n.color.rgba)||"transparent"))},dependencies:[Sl,Ba,po,Jte,AV,PR,Na,Qc,Cl,MR,ed,Jc,Gh,mC,Oie,Fie],styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:235px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:235px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:60px;height:235px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type .symbol{font-weight:700;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type{width:60px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type .mat-mdc-text-field-wrapper{padding:0 8px}.ngx-mat-color-canvas .mat-mdc-form-field-label{font-weight:700}.ngx-mat-color-canvas .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent}\n"],encapsulation:2}),i})(),Bie=(()=>{class i{constructor(){this.colorChanged=new He,this.colors1=OH.slice(0,8),this.colors2=OH.slice(8,16)}set color(e){e&&(this.selectedColor=e.toHexString())}ngOnInit(){}select(e){this.selectedColor=e;const{r:n,g:r,b:s,a:o}=ZR(e);this.colorChanged.emit(new Xh(n,r,s,o))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(e,n){1&e&&($(0,"div",0),fe(1,Cie,1,5,"button",1),W(),$(2,"div",0),fe(3,Sie,1,5,"button",1),W()),2&e&&(V(1),U("ngForOf",n.colors1),V(2),U("ngForOf",n.colors2))},dependencies:[pm,Os,AV],styles:[".ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}\n"],encapsulation:2}),i})(),UH=(()=>{class i{constructor(){this.colorChanged=new He}ngOnInit(){}handleColorChanged(e){this.colorChanged.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(e,n){1&e&&($(0,"ngx-mat-color-canvas",0),De("colorChanged",function(s){return n.handleColorChanged(s)}),W(),$(1,"ngx-mat-color-collection",0),De("colorChanged",function(s){return n.handleColorChanged(s)}),W()),2&e&&(U("color",n.color),V(1),U("color",n.color))},dependencies:[Nie,Bie],styles:[".ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:60px;flex-direction:column}\n"],encapsulation:2}),i})(),QR=(()=>{class i{constructor(){}sameColor(e,n){return null==e&&null==n||null!=e&&null!=n&&e.rgba===n.rgba}format(e,n){return e.toString(n)}parse(e){const n=ZR(e);return n?new Xh(n.r,n.g,n.b,n.a):null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const Uie={display:{colorInput:"hex"}},VH=new me("mat-color-formats"),zH=new me("ngx-mat-colorpicker-scroll-strategy"),zie={provide:zH,deps:[cs],useFactory:function Vie(i){return()=>i.scrollStrategies.reposition()}},Hie=eb(class{constructor(i){this._elementRef=i}});let HH=(()=>{class i extends Hie{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(E(vt))},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(e,n){if(1&e&&Nn(UH,5),2&e){let r;Et(r=At())&&(n._palette=r.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(e,n){2&e&&(kw("@transformPanel","enter"),ln("ngx-mat-colorpicker-content-touch",n.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[ut],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(e,n){1&e&&($(0,"ngx-mat-color-palette",0),De("colorChanged",function(s){return n.picker.select(s)}),W()),2&e&&U("color",n.picker._selected)},dependencies:[UH],styles:[".ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[IH.transformPanel,IH.fadeInCalendar]},changeDetection:0}),i})(),$H=(()=>{class i{constructor(e,n,r,s,o,a,l,c){this._dialog=e,this._overlay=n,this._zone=r,this._adapter=s,this._dir=o,this._document=l,this._viewContainerRef=c,this.openedStream=new He,this.closedStream=new He,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new Re,this._focusedElementBeforeOpen=null,this._inputSubscription=Qt.EMPTY,this._selectedChanged=new Re,this._scrollStrategy=a}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(e){const n=tn(e);n!==this._disabled&&(this._disabled=n,this._disabledChange.next(n))}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=tn(e)}get opened(){return this._opened}set opened(e){e?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(e){this._defaultColor=e}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(e){this._color=e}get _selected(){return this._validSelected}set _selected(e){this._validSelected=e}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(e){let n=this._selected;this._selected=e,this._adapter.sameColor(n,this._selected)||this._selectedChanged.next(e)}registerInput(e){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=e,this._inputSubscription=this._pickerInput._valueChange.subscribe(n=>this._selected=n)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(HH,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new Lh(HH,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(Oi(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const e=new Om({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(e),this._popupRef.overlayElement.setAttribute("role","dialog"),Cr(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(hn(n=>27===n.keyCode||this._pickerInput&&n.altKey&&38===n.keyCode))).subscribe(n=>{n&&n.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_setColor(){const e=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=e),this._dialogRef&&(this._dialogRef.componentInstance.color=e)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return i.\u0275fac=function(e){return new(e||i)(E(Vm),E(cs),E(gt),E(QR),E(Fa,8),E(zH),E(qt,8),E(Yr))},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),i})();class xC{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}const $ie={provide:Oo,useExisting:Wn(()=>wC),multi:!0},Gie={provide:Xr,useExisting:Wn(()=>wC),multi:!0};let wC=(()=>{class i{constructor(e,n,r,s){if(this._elementRef=e,this._formField=n,this._colorFormats=r,this._adapter=s,this.colorChange=new He,this.colorInput=new He,this._disabledChange=new He,this._valueChange=new He,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=Qt.EMPTY,this._validator=Ml.compose([]),this._lastValueValid=!1,!this._colorFormats)throw function Pie(i){return Error(`NgxMatColorPicker: No provider found for ${i}. You must define MAT_COLOR_FORMATS in your module`)}("MAT_COLOR_FORMATS")}set ngxMatColorPicker(e){e&&(this._picker=e,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(n=>{this.value=n,this._cvaOnChange(n),this._onTouched(),this.colorInput.emit(new xC(this,this._elementRef.nativeElement)),this.colorChange.emit(new xC(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(e){const n=tn(e),r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this._disabledChange.emit(n)),n&&r.blur&&r.blur()}get value(){return this._value}set value(e){const n=this.value;this._value=e,this._formatValue(e),this._adapter.sameColor(n,e)||this._valueChange.emit(e)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(e){this.value=e}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onChange(){this.colorChange.emit(new xC(this,this._elementRef.nativeElement))}_onKeydown(e){this._picker&&e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),e.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._adapter.format(e,this._colorFormats.display.colorInput):""}_onInput(e){const n=this._lastValueValid,r=this._adapter.parse(e);this._adapter.sameColor(r,this._value)?n!==this._lastValueValid&&this._validatorOnChange():(this._value=r,this._cvaOnChange(r),this._valueChange.emit(r),this.colorInput.emit(new xC(this,this._elementRef.nativeElement)))}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(Ba,8),E(VH,8),E(QR))},i.\u0275dir=ve({type:i,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(e,n){1&e&&De("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)}),2&e&&(tc("disabled",n.disabled),It("aria-haspopup",n._picker?"dialog":null)("aria-owns",(null==n._picker?null:n._picker.opened)&&n._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[An([$ie,Gie,{provide:$R,useExisting:i}])]}),i})(),Wie=(()=>{class i{constructor(e){this._cd=e,this._stateChanges=Qt.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(e){this._disabled=e}ngOnInit(){}ngOnChanges(e){e.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(e){this.picker&&!this.disabled&&(this.picker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.picker?this.picker._disabledChange:mt(),n=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:mt(),r=this.picker?Cr(this.picker.openedStream,this.picker.closedStream):mt();this._stateChanges.unsubscribe(),this._stateChanges=Cr(e,n,r).subscribe(()=>this._cd.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(E(Yn))},i.\u0275cmp=st({type:i,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(e,n){if(1&e&&Nn(Eie,5),2&e){let r;Et(r=At())&&(n._button=r.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(e,n){1&e&&De("focus",function(){return n._button.focus()}),2&e&&(It("tabindex",-1),ln("ngx-mat-color-toggle-active",n.picker&&n.picker.opened)("mat-accent",n.picker&&"accent"===n.picker.color)("mat-warn",n.picker&&"warn"===n.picker.color))},inputs:{picker:["for","picker"],tabIndex:"tabIndex",disabled:"disabled"},exportAs:["ngxMatColorPickerToggle"],features:[xi],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(e,n){1&e&&($(0,"button",0,1),De("click",function(s){return n.open(s)}),$(2,"mat-icon"),Oe(3,"palette"),W()()),2&e&&(U("disabled",n.disabled),It("aria-haspopup",n.picker?"dialog":null)("tabindex",n.disabled?-1:n.tabIndex),V(2),Zo("color",null==n.picker||null==n.picker._selected?null:n.picker._selected.rgba))},dependencies:[ZM,yR],styles:[".mat-form-field-appearance .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}\n"],encapsulation:2}),i})(),jie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[QR,zie],imports:[uo,bH,sb,CH,oie,oH,aH,xV,Nh,sz]}),i})();const Yie=["picker"],qie=function(i){return{"background-color":i}};function Xie(i,t){if(1&i){const e=$n();$(0,"div",5),De("click",function(r){const o=Nt(e).index;return St(ae().onColorClicked(r.currentTarget,o))}),W()}if(2&i){const e=t.$implicit,n=t.index,r=ae();U("ngStyle",am(2,qie,"#"+r.lpad(e.toString(16),"0",8)))("matTooltip",n+": #"+e.toString(16))}}const Kie=function(){return["colors"]};let Zie=(()=>{class i{constructor(){this.resource=null,this.changed=new He,this.selectedIndex=null}get resourceData(){return this.resource?.data}lpad(e,n,r){for(;e.length<r;)e=n+e;return e}onColorClicked(e,n){if(!this.resourceData)return void(this.selectedIndex=null);this.selectedIndex=n;const r=this.resourceData.colors[n]||0;this.picker.select(new Xh((4278190080&r)>>>24,(16711680&r)>>>16,(65280&r)>>>8,255&r)),this.picker.open();const s=new MU;s.top(Math.min(e.offsetTop,window.innerHeight-450)+"px"),s.left(Math.min(e.offsetLeft,window.innerWidth-380)+"px"),this.picker._popupRef.updatePositionStrategy(s),s.apply()}onColorChange(e){this.resourceData?null!==this.selectedIndex&&(this.resourceData.colors[this.selectedIndex]=e?parseInt(e.toHex8String().substring(1),16):0,this.changed.emit()):this.selectedIndex=null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-palette-block-ui"]],viewQuery:function(e,n){if(1&e&&Nn(Yie,5),2&e){let r;Et(r=At())&&(n.picker=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:6,vars:5,consts:[[3,"resource","fieldBlacklist"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip","click",4,"ngFor","ngForOf"],["matInput","",1,"hidden",3,"ngxMatColorPicker","colorChange"],["picker",""],[1,"color-box",3,"ngStyle","matTooltip","click"]],template:function(e,n){if(1&e&&(Ee(0,"app-compound-block-ui",0),$(1,"div",1),fe(2,Xie,1,4,"div",2),W(),$(3,"input",3),De("colorChange",function(s){return n.onColorChange(s.value)}),W(),Ee(4,"ngx-mat-color-picker",null,4)),2&e){const r=sr(5);U("resource",n.resource)("fieldBlacklist",jr(4,Kie)),V(2),U("ngForOf",null==n.resourceData?null:n.resourceData.colors),V(1),U("ngxMatColorPicker",r)}},dependencies:[Os,rM,Sl,Bs,wC,$H,wl],styles:["#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0}),i})();const Qie=["editorBody"];function Jie(i,t){if(1&i&&($(0,"div",11),Oe(1),W()),2&i){const e=ae().$implicit;V(1),ui(e.offset)}}function ere(i,t){if(1&i){const e=$n();$(0,"input",12),De("input",function(r){const o=Nt(e).index,a=ae().index;return St(ae().onHexInput(r,a,o))})("focus",function(r){const o=Nt(e).index;return St(ae(2).onHexFocus(r,o))})("blur",function(r){return Nt(e),St(ae(2).onHexBlur(r))}),W()}if(2&i){const e=t.$implicit,n=t.index;U("id","hex_input__"+ae().index+"__"+n)("value",e[0])("disabled",null===e[0])}}function tre(i,t){1&i&&Ee(0,"div",3)}function nre(i,t){if(1&i){const e=$n();$(0,"span",15),De("click",function(){const s=Nt(e).index,o=ae(2).index;return St(ae().blurInput(o,s))}),Oe(1),W()}if(2&i){const e=t.$implicit,n=t.index;U("id","utf_char__"+ae(2).index+"__"+n),V(1),ui(e[1])}}function ire(i,t){if(1&i&&($(0,"div",13),fe(1,nre,2,2,"span",14),W()),2&i){const e=ae().$implicit,n=ae();V(1),U("ngForOf",e.values)("ngForTrackBy",n.trackByIndex)}}function rre(i,t){if(1&i&&($(0,"div",5),fe(1,Jie,2,1,"div",6),Xe(2,"async"),$(3,"div",7),fe(4,ere,1,3,"input",8),W(),fe(5,tre,1,0,"div",9),Xe(6,"async"),Xe(7,"async"),fe(8,ire,2,2,"div",10),Xe(9,"async"),W()),2&i){const e=t.$implicit,n=t.index,r=ae();ln("gray",n%2!=0),V(1),U("ngIf",Je(2,7,r._showOffsets$)),V(3),U("ngForOf",e.values)("ngForTrackBy",r.trackByIndex),V(1),U("ngIf",Je(6,9,r._showOffsets$)||Je(7,11,r._showUtf8$)),V(3),U("ngIf",Je(9,13,r._showUtf8$))}}function sre(i,t){if(1&i){const e=$n();$(0,"div",16)(1,"button",17),De("click",function(){return Nt(e),St(ae().changePage(-1))}),Xe(2,"async"),Oe(3,"Previous"),W(),$(4,"span"),Oe(5),Xe(6,"async"),Xe(7,"async"),W(),$(8,"button",17),De("click",function(){return Nt(e),St(ae().changePage(1))}),Xe(9,"async"),Xe(10,"async"),Oe(11," Next "),W()()}if(2&i){const e=ae();V(1),U("disabled",0===Je(2,4,e.currentPage$)),V(4),Ah("Page ",(Je(6,6,e.currentPage$)||0)+1," of ",Je(7,8,e.totalPages$),""),V(3),U("disabled",(Je(9,10,e.currentPage$)||0)>=(Je(10,12,e.totalPages$)||0)-1)}}let ore=(()=>{class i{set maxColumns(e){this._maxColumns$.next(e)}set maxRows(e){this._maxRows$.next(e)}set showOffsets(e){this._showOffsets$.next(e)}set showUtf8(e){this._showUtf8$.next(e)}set data(e){if(e!==this._data$.value){if(e.length===this._data$.value.length){for(let n=0;n<e.length&&e[n]===this._data$.value[n];n++);return}this._data$.next(e)}}get data(){return this._data$.value}constructor(e){this.cdr=e,this._maxColumns$=new $e(0),this._maxRows$=new $e(0),this._showOffsets$=new $e(!0),this._showUtf8$=new $e(!0),this._data$=new $e(new Uint8Array),this.readOnly=!1,this.dataChange=new He,this.currentPage$=new $e(0),this.totalPages$=new $e(1),this.pageSize$=new $e([0,0]),this.renderedRows$=new $e([]),this.viewportSize$=new $e([0,0]),this.destroyed$=new Re}renderValue(e){return null==e?[null,"\u2205"]:[e.toString(16).padStart(2,"0").toUpperCase(),e>=32&&e<=126?String.fromCharCode(e):"."]}ngAfterViewInit(){new ResizeObserver(e=>{for(const n of e)this.viewportSize$.next([n.contentRect.width,n.contentRect.height])}).observe(this.editorBody.nativeElement),Qo([this.viewportSize$,this._maxColumns$,this._maxRows$,this._showOffsets$,this._showUtf8$]).pipe(Le(this.destroyed$),jy(50)).subscribe(([[e,n],r,s,o,a])=>{let l=e-8;o&&(l-=68);let c=34;a&&(l-=8,c+=10);let h=Math.floor(l/c);r>0&&h>r&&(h=r);let p=this.pageSize$.value[0];h===p+1&&l/c%1<.5&&(h=p),h=Math.max(1,h);let m=Math.floor(n/28);s>0&&m>s&&(m=s),m=Math.max(1,m),(h!=this.pageSize$.value[0]||m!==this.pageSize$.value[1])&&this.pageSize$.next([h,m])}),Qo([this._data$,this.currentPage$,this.pageSize$]).pipe(Le(this.destroyed$)).subscribe(([e,n,r])=>{if(0===r[0]||0===r[1])return;let s=Math.max(1,Math.ceil(Math.ceil(e.length/r[0])/r[1]));if(this.totalPages$.value!==s&&this.totalPages$.next(s),n>=s)return void this.currentPage$.next(n=s-1);const o=[];for(let a=n*r[0]*r[1];a<Math.min(e.length,(n+1)*r[0]*r[1]);a+=r[0]){const l=[];for(let c=0;c<r[0];c++)l.push(this.renderValue(e[a+c]));o.push({values:l,offset:a.toString(16).padStart(8,"0").toUpperCase()})}this.renderedRows$.next(o),this.cdr.detectChanges()})}changePage(e){let n=Math.min(Math.max(this.currentPage$.value+e,0),this.totalPages$.value-1);this.currentPage$.value!==n&&(this.currentPage$.next(n),this.cdr.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByIndex(e){return e}blurInput(e,n){const r=this.editorBody.nativeElement.querySelector(`#hex_input__${e}__${n}`);return!!r&&(r.focus(),!0)}goToNextInput(e){const[n,r,s]=e.split("__");this.blurInput(+r,+s+1)||this.blurInput(+r+1,0)||this.currentPage$.value<this.totalPages$.value-1&&(this.changePage(1),this.blurInput(0,0))}onHexInput(e,n,r){const s=e.target;if(this.readOnly)return void(s.value=this.renderedRows$.value[n].values[r][0]);const o=s.value.replace(/[^0-9a-fA-F]/g,"");if(s.value=o.toUpperCase(),2===o.length){const a=parseInt(o,16);!isNaN(a)&&a>=0&&a<=255&&(this.data[(this.currentPage$.value*this.pageSize$.value[1]+n)*this.pageSize$.value[0]+r]=a,this.renderedRows$.value[n].values[r]=this.renderValue(a),this.cdr.detectChanges(),this.dataChange.emit(this.data),this.goToNextInput(s.id))}}onHexFocus(e,n){const r=e.target,s=r.closest(".row");s&&s.querySelectorAll(".utf8-values span").forEach((a,l)=>{a.classList.toggle("highlight",l===n)}),r.select()}onHexBlur(e){const r=e.target.closest(".row");r&&r.querySelectorAll(".utf8-values span").forEach(o=>{o.classList.remove("highlight")})}}return i.\u0275fac=function(e){return new(e||i)(E(Yn))},i.\u0275cmp=st({type:i,selectors:[["hex-editor"]],viewQuery:function(e,n){if(1&e&&Nn(Qie,5),2&e){let r;Et(r=At())&&(n.editorBody=r.first)}},inputs:{maxColumns:"maxColumns",maxRows:"maxRows",showOffsets:"showOffsets",showUtf8:"showUtf8",data:"data",readOnly:"readOnly"},outputs:{dataChange:"dataChange"},decls:7,vars:7,consts:[[1,"editor-body"],["editorBody",""],["class","row",3,"gray",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex-spacer"],["class","pagination",4,"ngIf"],[1,"row"],["class","offset",4,"ngIf"],[1,"hex-values"],["maxlength","2",3,"id","value","disabled","input","focus","blur",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex-spacer",4,"ngIf"],["class","utf8-values",4,"ngIf"],[1,"offset"],["maxlength","2",3,"id","value","disabled","input","focus","blur"],[1,"utf8-values"],[3,"id","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","click"],[1,"pagination"],[3,"disabled","click"]],template:function(e,n){1&e&&($(0,"div",0,1),fe(2,rre,10,15,"div",2),Xe(3,"async"),Ee(4,"div",3),W(),fe(5,sre,12,14,"div",4),Xe(6,"async")),2&e&&(V(2),U("ngForOf",Je(3,3,n.renderedRows$))("ngForTrackBy",n.trackByIndex),V(3),U("ngIf",(Je(6,5,n.totalPages$)||0)>1))},dependencies:[Os,hi,co],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;font-family:monospace}.editor-body[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;overflow-y:hidden}.row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:24px;margin-bottom:4px}.row.gray[_ngcontent-%COMP%]{background-color:#d3d3d3}.offset[_ngcontent-%COMP%]{width:60px;text-align:left;margin-right:8px}.hex-values[_ngcontent-%COMP%]{display:flex;gap:2px;flex-shrink:1;overflow-x:clip}.hex-values[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:32px;text-align:center;box-sizing:border-box}.utf8-values[_ngcontent-%COMP%]{margin-left:8px}.utf8-values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:8px;margin-left:2px;color:#000}.utf8-values[_ngcontent-%COMP%]   span.highlight[_ngcontent-%COMP%]{background-color:#ff0}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1em}.flex-spacer[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),i})(),are=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[uo]}),i})();const lre=["editor"];let cre=(()=>{class i{constructor(){this._resource=null,this.empty=new Uint8Array,this.data$=new $e(new Uint8Array),this.resourceDescription="",this.disabled=!1,this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.data$.next(new Uint8Array(e?e.data:0))}onDataChange(e){this._resource.data=Array.from(e),this.changed.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-binary-block-ui"]],viewQuery:function(e,n){if(1&e&&Nn(lre,5),2&e){let r;Et(r=At())&&(n.editorDiv=r.first)}},inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:5,vars:10,consts:[["matTooltipPosition","above",3,"matTooltip"],[3,"data","maxColumns","showOffsets","readOnly","dataChange"]],template:function(e,n){1&e&&($(0,"h2",0),Oe(1),W(),$(2,"hex-editor",1),De("dataChange",function(s){return n.onDataChange(s)}),Xe(3,"async"),Xe(4,"async"),W()),2&e&&(U("matTooltip",n.resourceDescription),V(1),ui(null==n.resource?null:n.resource.name),V(1),U("data",Je(3,6,n.data$)||n.empty)("maxColumns",8)("showOffsets",(Je(4,8,n.data$)||n.empty).length>16)("readOnly",n.disabled))},dependencies:[Bs,ore,co],styles:["hex-editor[_ngcontent-%COMP%]{min-height:20rem}"],changeDetection:0}),i})();const dre=["picker"];function ure(i,t){if(1&i&&($(0,"mat-label",8),Oe(1),W()),2&i){const e=ae();V(1),ui(null==e.resource?null:e.resource.name)}}const hre=function(i){return{transform:i}};let fre=(()=>{class i{constructor(e){this.cdr=e,this.resource=null,this.resourceDescription="",this.changed=new He,this.pi=Math.PI,this.dragging=!1}mousedown(e){this.dragging=!0,this.updateRotation(e)}mousemove(e){this.dragging&&this.updateRotation(e)}mouseout(){this.dragging=!1}updateRotation(e){const n=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(e.clientY-n.top-n.height/2,e.clientX-n.left-n.width/2);e.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resource.data=r,this.changed.emit(),this.cdr.markForCheck()}}return i.\u0275fac=function(e){return new(e||i)(E(Yn))},i.\u0275cmp=st({type:i,selectors:[["app-angle-block-ui"]],viewQuery:function(e,n){if(1&e&&Nn(dre,5),2&e){let r;Et(r=At())&&(n.picker=r.first)}},hostBindings:function(e,n){1&e&&De("mousedown",function(s){return n.mousedown(s)})("mousemove",function(s){return n.mousemove(s)})("mouseup",function(){return n.mouseout()})("mouseleave",function(){return n.mouseout()})},inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:14,vars:13,consts:[["id","wrapper","matTooltipPosition","above",3,"matTooltip"],[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span",4,"ngIf"],["id","name-span"]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1,2)(3,"div",3),Ee(4,"div",4)(5,"div",5),W()(),$(6,"div",6),fe(7,ure,2,1,"mat-label",7),$(8,"mat-label"),Oe(9),Xe(10,"number"),W(),$(11,"mat-label"),Oe(12),Xe(13,"number"),W()()()),2&e&&(U("matTooltip",n.resourceDescription),V(3),U("ngStyle",am(11,hre,"rotate("+((null==n.resource?null:n.resource.data)||0)+"rad)")),V(4),U("ngIf",null==n.resource?null:n.resource.name),V(2),Vi("",tT(10,5,180*(null==n.resource?null:n.resource.data)/n.pi||0,"1.2-2")," deg"),V(3),Vi("",tT(13,8,(null==n.resource?null:n.resource.data)||0,"1.2-2")," rad"))},dependencies:[hi,rM,po,Bs,mB],styles:["#wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0}),i})();class JR{constructor(){}deepEquals(t,e){if(null===t&&null!==e)return!1;if(null===e&&null!==t)return!1;if(!0===Array.isArray(t)){if(!1===Array.isArray(e))return!1;if(t.length!==e.length)return!1;{const n=new Set,r=new Set,s=new Set,o=new Set;for(const h of t)!0===Array.isArray(h)?n.add(h):"object"==typeof h?r.add(h):"function"==typeof h?o.add(JSON.stringify(""+h)):s.add(h);const a=new Set,l=new Set,c=new Set,d=new Set;for(const h of e)!0===Array.isArray(h)?a.add(h):"object"==typeof h?l.add(h):"function"==typeof h?d.add(JSON.stringify(""+h)):c.add(h);if(s.size!==c.size)return!1;{let h=!0;for(const p of s)if(!1===c.has(p)){h=!1;break}if(!1===h)return!1;if(r.size===l.size){h=!0;for(const p of r){let m=!1;for(const g of l)if(!0===this.deepEquals(p,g)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(n.size===a.size){h=!0;for(const p of n){let m=!1;for(const g of a)if(!0===this.deepEquals(p,g)){m=!0;break}if(!1===m){h=!1;break}}if(!1===h)return!1;if(o.size===d.size){h=!0;for(const p of o)if(!1===d.has(p)){h=!1;break}return!1!==h}return!1}return!1}return!1}}}if("object"==typeof t&&null!==t){if("object"!=typeof e)return!1;{let n=!0;if(Object.keys(t).length===Object.keys(e).length){for(const[r,s]of Object.entries(t))if(n=this.deepEquals(s,e[r]),!1===n)break}else n=!1;return n}}return!0!==Array.isArray(e)&&("object"!=typeof e||null===e)&&("function"==typeof t?"function"==typeof e&&JSON.stringify(""+t)===JSON.stringify(""+e):JSON.stringify(t)===JSON.stringify(e))}}function pre(i,t){if(1&i&&($(0,"mat-list-option",3),Oe(1),W()),2&i){const e=t.$implicit,n=ae();U("value",e)("selected",n.selectedValue==e),V(1),Vi(" ",e," ")}}function mre(i,t){if(1&i&&($(0,"mat-card"),Ee(1,"app-editor",4),W()),2&i){const e=ae();V(1),U("resource",e.resources[e.selectedValue])}}let MC=(()=>{class i{constructor(e){this.deep=e,this._resources={},this._selectedValue=null}get resources(){return this._resources}set resources(e){const n=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(e));this._resources=e,n&&(this.selectedValue=Object.keys(e).length>0?Object.keys(e)[0]:null)}set selectedValue(e){this._selectedValue=e}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}}return i.\u0275fac=function(e){return new(e||i)(E(JR))},i.\u0275cmp=st({type:i,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected"],[3,"resource"]],template:function(e,n){1&e&&($(0,"mat-selection-list",0),De("selectionChange",function(s){return n.selectedValue=s.source.selectedOptions.selected[0].value}),fe(1,pre,2,3,"mat-list-option",1),W(),fe(2,mre,2,1,"mat-card",2)),2&e&&(U("multiple",!1),V(1),U("ngForOf",n.keys),V(1),U("ngIf",n.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit;scroll-snap-align:start;scroll-margin:.5rem}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;max-height:calc(100vh - 54px - 1rem);overflow-y:auto;max-width:33%;flex-shrink:0;padding:0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]{background-color:#e0e0e0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]:focus{background-color:unset}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]     .mdc-radio{display:none}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%;padding:1rem}"],changeDetection:0}),i})(),gre=(()=>{class i{constructor(){this._resource=null,this.resourceMap={},this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(r=>"children"===r.name)?.schema.child_schema;if(n)for(let r=0;r<this.resourceData.children.length;r++)this.resourceMap[r.toString()]={id:Po(this._resource?.id||"",`children/${r}`),data:this.resourceData.children[r],schema:n,name:""}}get resourceData(){return this._resource?.data}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-wwww-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(e,n){1&e&&Ee(0,"app-sidenav-res-list",0),2&e&&U("resources",n.resourceMap)},dependencies:[MC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0}),i})();const _re=["trigger"],vre=["panel"];function yre(i,t){if(1&i&&($(0,"span",10),Oe(1),W()),2&i){const e=ae();V(1),ui(e.placeholder)}}function bre(i,t){if(1&i&&($(0,"span",14),Oe(1),W()),2&i){const e=ae(2);V(1),ui(e.triggerValue)}}function xre(i,t){1&i&&Yt(0,0,["*ngSwitchCase","true"])}function wre(i,t){1&i&&($(0,"span",11),fe(1,bre,2,1,"span",12),fe(2,xre,1,0,"ng-content",13),W()),2&i&&(U("ngSwitch",!!ae().customTrigger),V(2),U("ngSwitchCase",!0))}function Mre(i,t){if(1&i){const e=$n();ki(),wa(),$(0,"div",15,16),De("@transformPanel.done",function(r){return Nt(e),St(ae()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return Nt(e),St(ae()._handleKeydown(r))}),Yt(2,1),W()}if(2&i){const e=ae();YL("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),U("ngClass",e.panelClass)("@transformPanel","showing"),It("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Cre=[[["mat-select-trigger"]],"*"],Sre=["mat-select-trigger","*"],Ere={transformPanelWrap:La("transformPanelWrap",[Or("* => void",sR("@transformPanel",[rR()],{optional:!0}))]),transformPanel:La("transformPanel",[Ns("void",oi({opacity:0,transform:"scale(1, 0.8)"})),Or("void => showing",qr("120ms cubic-bezier(0, 0, 0.2, 1)",oi({opacity:1,transform:"scale(1, 1)"}))),Or("* => void",qr("100ms linear",oi({opacity:0})))])};let GH=0;const WH=new me("mat-select-scroll-strategy"),Dre=new me("MAT_SELECT_CONFIG"),Tre={provide:WH,deps:[cs],useFactory:function Are(i){return()=>i.scrollStrategies.reposition()}},Ire=new me("MatSelectTrigger");class Rre{constructor(t,e){this.source=t,this.value=e}}const kre=XM(tR(qM(qU(class{constructor(i,t,e,n,r){this._elementRef=i,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new Re}}))));let Pre=(()=>{class i extends kre{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Ml.required)??!1}set required(e){this._required=tn(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=tn(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=tn(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Ls(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,n,r,s,o,a,l,c,d,h,p,m,g,b){super(o,s,l,c,h),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=g,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(v,y)=>v===y,this._uid="mat-select-"+GH++,this._triggerAriaLabelledBy=null,this._destroy=new Re,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+GH++,this._panelDoneAnimatingStream=new Re,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=Ay(()=>{const v=this.options;return v?v.changes.pipe(Ro(v),Fs(()=>Cr(...v.map(y=>y.onSelectionChange)))):this._ngZone.onStable.pipe(Oi(1),Fs(()=>this.optionSelectionChanges))}),this.openedChange=new He,this._openedStream=this.openedChange.pipe(hn(v=>v),rt(()=>{})),this._closedStream=this.openedChange.pipe(hn(v=>!v),rt(()=>{})),this.selectionChange=new He,this.valueChange=new He,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}ngOnInit(){this._selectionModel=new WR(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(bl(),Le(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Le(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(Ro(null),Le(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!ta(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||ta(e))if(!o&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Oi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new jZ(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Cr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Le(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Cr(...this.options.map(n=>n._stateChanges)).pipe(Le(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(E(BM),E(Yn),E(gt),E(KU),E(vt),E(Fa,8),E(fb,8),E(Gh,8),E(_C,8),E(sc,10),Sa("tabindex"),E(WH),E(ZI),E(Dre,8))},i.\u0275dir=ve({type:i,viewQuery:function(e,n){if(1&e&&(Nn(_re,5),Nn(vre,5),Nn(SU,5)),2&e){let r;Et(r=At())&&(n.trigger=r.first),Et(r=At())&&(n.panel=r.first),Et(r=At())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[ut,xi]}),i})(),mb=(()=>{class i extends Pre{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Le(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const n=this.options.toArray()[e];if(n){const r=this.panel.nativeElement,s=function NQ(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}(e,this.options,this.optionGroups),o=n._getHostElement();r.scrollTop=0===e&&1===s?0:function BQ(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new Rre(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof $I?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=tn(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275cmp=st({type:i,selectors:[["mat-select"]],contentQueries:function(e,n,r){if(1&e&&(Yi(r,Ire,5),Yi(r,Um,5),Yi(r,rV,5)),2&e){let s;Et(s=At())&&(n.customTrigger=s.first),Et(s=At())&&(n.options=s),Et(s=At())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,n){1&e&&De("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&e&&(It("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),ln("mat-mdc-select-disabled",n.disabled)("mat-mdc-select-invalid",n.errorState)("mat-mdc-select-required",n.required)("mat-mdc-select-empty",n.empty)("mat-mdc-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[An([{provide:HR,useExisting:i},{provide:iV,useExisting:i}]),ut],ngContentSelectors:Sre,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,n){if(1&e&&(or(Cre),$(0,"div",0,1),De("click",function(){return n.toggle()}),$(3,"div",2),fe(4,yre,2,1,"span",3),fe(5,wre,3,2,"span",4),W(),$(6,"div",5)(7,"div",6),ki(),$(8,"svg",7),Ee(9,"path",8),W()()()(),fe(10,Mre,3,9,"ng-template",9),De("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&e){const r=sr(1);It("aria-owns",n.panelOpen?n.id+"-panel":null),V(3),U("ngSwitch",n.empty),It("id",n._valueId),V(1),U("ngSwitchCase",!0),V(1),U("ngSwitchCase",!1),V(5),U("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",n._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayWidth",n._overlayWidth)}},dependencies:[pm,xy,HT,uB,SU,$I],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[Ere.transformPanel]},changeDetection:0}),i})(),jH=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[Tre],imports:[uo,Fm,iR,Jn,Zy,vC,iR,Jn]}),i})();function Ore(i,t){if(1&i&&($(0,"mat-label"),Oe(1),W()),2&i){const e=ae(3);V(1),ui(e.resource.name)}}function Fre(i,t){if(1&i&&($(0,"mat-option",6),Oe(1),W()),2&i){const e=t.$implicit,n=ae(3);U("value",e[1])("disabled",n.disabled),V(1),Vi(" ",e[1]," ")}}function Lre(i,t){if(1&i){const e=$n();$(0,"mat-form-field",3),fe(1,Ore,2,1,"mat-label",0),$(2,"mat-select",4),De("valueChange",function(r){return Nt(e),St(ae(2).resource.data=r)})("selectionChange",function(){return Nt(e),St(ae(2).changed.emit())}),fe(3,Fre,2,3,"mat-option",5),W()()}if(2&i){const e=ae(2);U("matTooltip",e.resourceDescription),V(1),U("ngIf",e.resource.name),V(1),U("value",e.resource.data)("disabled",e.disabled),V(1),U("ngForOf",e.resource.schema.enum_names)}}function Nre(i,t){if(1&i&&($(0,"mat-label"),Oe(1),W()),2&i){const e=ae(3);V(1),ui(e.resource.name)}}function Bre(i,t){if(1&i){const e=$n();$(0,"mat-form-field",3),fe(1,Nre,2,1,"mat-label",0),$(2,"input",7),De("ngModelChange",function(r){return Nt(e),St(ae(2).resource.data=r)})("change",function(){return Nt(e),St(ae(2).changed.emit())}),W()()}if(2&i){const e=ae(2);U("matTooltip",e.resourceDescription),V(1),U("ngIf",e.resource.name),V(1),U("min",0)("max",256*(e.resource.schema.length||1)-1)("ngModel",e.resource.data)}}function Ure(i,t){if(1&i&&(Gr(0),fe(1,Lre,4,5,"mat-form-field",1),fe(2,Bre,3,5,"ng-template",null,2,ru),Wr()),2&i){const e=sr(3),n=ae();V(1),U("ngIf",n.isKnownEnumValue(n.resource.data))("ngIfElse",e)}}let Vre=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He}isKnownEnumValue(e){return!!this.resource?.schema.enum_names.find(([n,r])=>r==e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-enum-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf","ngIfElse"],["unknownEnum",""],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[3,"value","disabled","valueChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange","change"]],template:function(e,n){1&e&&fe(0,Ure,4,2,"ng-container",0),2&e&&U("ngIf",n.resource)},dependencies:[Os,hi,Na,Qc,Cl,ed,Jc,ac,Ba,po,Sl,Bs,mb,Um],changeDetection:0}),i})();const zre=["*"],$re=["unscopedContent"];function Gre(i,t){1&i&&Yt(0,4)}function Wre(i,t){if(1&i&&($(0,"div",11),Ee(1,"input",12),$(2,"div",13),ki(),$(3,"svg",14),Ee(4,"path",15),W(),wa(),Ee(5,"div",16),W()()),2&i){const e=ae();ln("mdc-checkbox--disabled",e.disabled),V(1),U("checked",e.selected)("disabled",e.disabled)}}function jre(i,t){if(1&i&&($(0,"div",17),Ee(1,"input",18),$(2,"div",19),Ee(3,"div",20)(4,"div",21),W()()),2&i){const e=ae();ln("mdc-radio--disabled",e.disabled),V(1),U("checked",e.selected)("disabled",e.disabled)}}function Yre(i,t){}function qre(i,t){if(1&i&&($(0,"span",22),fe(1,Yre,0,0,"ng-template",23),W()),2&i){ae();const e=sr(3);V(1),U("ngTemplateOutlet",e)}}function Xre(i,t){}function Kre(i,t){if(1&i&&($(0,"span",24),fe(1,Xre,0,0,"ng-template",23),W()),2&i){ae();const e=sr(5);V(1),U("ngTemplateOutlet",e)}}function Zre(i,t){}function Qre(i,t){1&i&&fe(0,Zre,0,0,"ng-template",23),2&i&&(ae(),U("ngTemplateOutlet",sr(1)))}function Jre(i,t){}function ese(i,t){if(1&i&&($(0,"span",25),fe(1,Jre,0,0,"ng-template",23),W()),2&i){ae();const e=sr(3);V(1),U("ngTemplateOutlet",e)}}function tse(i,t){}function nse(i,t){if(1&i&&($(0,"span",25),fe(1,tse,0,0,"ng-template",23),W()),2&i){ae();const e=sr(5);V(1),U("ngTemplateOutlet",e)}}function ise(i,t){}function rse(i,t){1&i&&fe(0,ise,0,0,"ng-template",23),2&i&&(ae(),U("ngTemplateOutlet",sr(1)))}const sse=[[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["mat-divider"]],[["","matListItemAvatar",""],["","matListItemIcon",""]]],ose=["[matListItemTitle]","[matListItemLine]","*","mat-divider","[matListItemAvatar],[matListItemIcon]"],YH=new me("ListOption");let ase=(()=>{class i{constructor(e){this._elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(E(vt))},i.\u0275dir=ve({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),i})(),lse=(()=>{class i{constructor(e){this._elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(E(vt))},i.\u0275dir=ve({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),i})(),qH=(()=>{class i{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return i.\u0275fac=function(e){return new(e||i)(E(YH,8))},i.\u0275dir=ve({type:i,hostVars:4,hostBindings:function(e,n){2&e&&ln("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}}),i})(),cse=(()=>{class i extends qH{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[ut]}),i})(),dse=(()=>{class i extends qH{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[ut]}),i})();const use=new me("MAT_LIST_CONFIG");let ek=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=Lt(use,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=tn(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=tn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,hostVars:1,hostBindings:function(e,n){2&e&&It("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),i})(),XH=(()=>{class i{set lines(e){this._explicitLines=Ls(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=tn(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=tn(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,r,s,o,a){this._elementRef=e,this._ngZone=n,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new Qt,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===a,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Bm(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(Cr(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();const n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===n),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===n),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===n;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!(!e.textContent||!e.textContent.trim()))}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt),E(ek,8),E(Hi),E(nR,8),E(kr,8))},i.\u0275dir=ve({type:i,contentQueries:function(e,n,r){if(1&e&&(Yi(r,cse,4),Yi(r,dse,4)),2&e){let s;Et(s=At())&&(n._avatars=s),Et(s=At())&&(n._icons=s)}},hostVars:4,hostBindings:function(e,n){2&e&&(It("aria-disabled",n.disabled)("disabled",n._isButtonElement&&n.disabled||null),ln("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),i})();const KH=new me("SelectionList");let CC=(()=>{class i extends XH{get checkboxPosition(){return this.togglePosition}set checkboxPosition(e){this.togglePosition=e}get color(){return this._color||this._selectionList.color}set color(e){this._color=e}get value(){return this._value}set value(e){this.selected&&e!==this.value&&this._inputsInitialized&&(this.selected=!1),this._value=e}get selected(){return this._selectionList.selectedOptions.isSelected(this)}set selected(e){const n=tn(e);n!==this._selected&&(this._setSelected(n),(n||this._selectionList.multiple)&&this._selectionList._reportValueChange())}constructor(e,n,r,s,o,a,l){super(e,n,r,s,a,l),this._selectionList=r,this._changeDetectorRef=o,this.selectedChange=new He,this.togglePosition="after",this._selected=!1,this._inputsInitialized=!1}ngOnInit(){const e=this._selectionList;e._value&&e._value.some(r=>e.compareWith(this._value,r))&&this._setSelected(!0);const n=this._selected;Promise.resolve().then(()=>{(this._selected||n)&&(this.selected=!0,this._changeDetectorRef.markForCheck())}),this._inputsInitialized=!0}ngOnDestroy(){super.ngOnDestroy(),this.selected&&Promise.resolve().then(()=>{this.selected=!1})}toggle(){this.selected=!this.selected}focus(){this._hostElement.focus()}getLabel(){return(this._titles?.get(0)?._elementRef.nativeElement||this._unscopedContent?.nativeElement)?.textContent||""}_hasCheckboxAt(e){return this._selectionList.multiple&&this._getTogglePosition()===e}_hasRadioAt(e){return!this._selectionList.multiple&&this._getTogglePosition()===e&&!this._selectionList.hideSingleSelectionIndicator}_hasIconsOrAvatarsAt(e){return this._hasProjected("icons",e)||this._hasProjected("avatars",e)}_hasProjected(e,n){return this._getTogglePosition()!==n&&("avatars"===e?0!==this._avatars.length:0!==this._icons.length)}_handleBlur(){this._selectionList._onTouched()}_getTogglePosition(){return this.togglePosition||"after"}_setSelected(e){return e!==this._selected&&(this._selected=e,e?this._selectionList.selectedOptions.select(this):this._selectionList.selectedOptions.deselect(this),this.selectedChange.emit(e),this._changeDetectorRef.markForCheck(),!0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_toggleOnInteraction(){this.disabled||(this._selectionList.multiple?(this.selected=!this.selected,this._selectionList._emitChangeEvent([this])):this.selected||(this.selected=!0,this._selectionList._emitChangeEvent([this])))}_setTabindex(e){this._hostElement.setAttribute("tabindex",e+"")}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt),E(KH),E(Hi),E(Yn),E(nR,8),E(kr,8))},i.\u0275cmp=st({type:i,selectors:[["mat-list-option"]],contentQueries:function(e,n,r){if(1&e&&(Yi(r,lse,5),Yi(r,ase,5)),2&e){let s;Et(s=At())&&(n._lines=s),Et(s=At())&&(n._titles=s)}},viewQuery:function(e,n){if(1&e&&Nn($re,5),2&e){let r;Et(r=At())&&(n._unscopedContent=r.first)}},hostAttrs:["role","option",1,"mat-mdc-list-item","mat-mdc-list-option","mdc-list-item"],hostVars:25,hostBindings:function(e,n){1&e&&De("blur",function(){return n._handleBlur()})("click",function(){return n._toggleOnInteraction()}),2&e&&(It("aria-selected",n.selected),ln("mdc-list-item--selected",n.selected&&!n._selectionList.multiple&&n._selectionList.hideSingleSelectionIndicator)("mdc-list-item--with-leading-avatar",n._hasProjected("avatars","before"))("mdc-list-item--with-leading-icon",n._hasProjected("icons","before"))("mdc-list-item--with-trailing-icon",n._hasProjected("icons","after"))("mat-mdc-list-option-with-trailing-avatar",n._hasProjected("avatars","after"))("mdc-list-item--with-leading-checkbox",n._hasCheckboxAt("before"))("mdc-list-item--with-trailing-checkbox",n._hasCheckboxAt("after"))("mdc-list-item--with-leading-radio",n._hasRadioAt("before"))("mdc-list-item--with-trailing-radio",n._hasRadioAt("after"))("mat-accent","primary"!==n.color&&"warn"!==n.color)("mat-warn","warn"===n.color)("_mat-animation-noopable",n._noopAnimations))},inputs:{togglePosition:"togglePosition",checkboxPosition:"checkboxPosition",color:"color",value:"value",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[An([{provide:XH,useExisting:i},{provide:YH,useExisting:i}]),ut],ngContentSelectors:ose,decls:20,vars:6,consts:[["icons",""],["checkbox",""],["radio",""],["class","mdc-list-item__start mat-mdc-list-option-checkbox-before",4,"ngIf"],["class","mdc-list-item__start mat-mdc-list-option-radio-before",4,"ngIf"],[3,"ngIf"],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],["class","mdc-list-item__end",4,"ngIf"],[1,"mat-mdc-focus-indicator"],[1,"mdc-checkbox"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","disabled"],[1,"mdc-checkbox__background"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],[1,"mdc-radio"],["type","radio",1,"mdc-radio__native-control",3,"checked","disabled"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],[1,"mdc-list-item__start","mat-mdc-list-option-checkbox-before"],[3,"ngTemplateOutlet"],[1,"mdc-list-item__start","mat-mdc-list-option-radio-before"],[1,"mdc-list-item__end"]],template:function(e,n){1&e&&(or(sse),fe(0,Gre,1,0,"ng-template",null,0,ru),fe(2,Wre,6,4,"ng-template",null,1,ru),fe(4,jre,5,4,"ng-template",null,2,ru),fe(6,qre,2,1,"span",3),fe(7,Kre,2,1,"span",4),fe(8,Qre,1,1,"ng-template",5),$(9,"span",6),Yt(10),Yt(11,1),$(12,"span",7,8),De("cdkObserveContent",function(){return n._updateItemLines(!0)}),Yt(14,2),W()(),fe(15,ese,2,1,"span",9),fe(16,nse,2,1,"span",9),fe(17,rse,1,1,"ng-template",5),Yt(18,3),Ee(19,"div",10)),2&e&&(V(6),U("ngIf",n._hasCheckboxAt("before")),V(1),U("ngIf",n._hasRadioAt("before")),V(1),U("ngIf",n._hasIconsOrAvatarsAt("before")),V(7),U("ngIf",n._hasCheckboxAt("after")),V(1),U("ngIf",n._hasRadioAt("after")),V(1),U("ngIf",n._hasIconsOrAvatarsAt("after")))},dependencies:[DU,hi,wy],styles:['.mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item,.mat-mdc-list-option-with-trailing-avatar.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end,.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-touch-target-wrapper{display:inline}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mat-mdc-list-option .mdc-checkbox[hidden]{display:none}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0}.mdc-checkbox--upgraded .mat-mdc-list-option .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__checkmark-path{stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mat-mdc-list-option .mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mat-mdc-list-option .mdc-radio[hidden]{display:none}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:""}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mat-mdc-list-option .mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mat-mdc-list-option .mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background,.mat-mdc-list-option [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__background{transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__mixedmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:focus+.mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox{padding:calc((40px - 18px) / 2);padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((40px - 40px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.38);border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:rgba(0, 0, 0, 0.38);background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__background{top:calc((40px - 18px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((40px - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-checkbox-state-layer-size, 40px);height:40px;height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio{padding:calc((40px - 20px) / 2);padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio .mdc-radio__background::before{top:calc(-1 * (40px - 20px) / 2);top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (40px - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}'],encapsulation:2,changeDetection:0}),i})();const hse={provide:Oo,useExisting:Wn(()=>SC),multi:!0};class fse{constructor(t,e){this.source=t,this.options=e}}let SC=(()=>{class i extends ek{get multiple(){return this._multiple}set multiple(e){const n=tn(e);n!==this._multiple&&(this._multiple=n,this.selectedOptions=new WR(this._multiple,this.selectedOptions.selected))}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=tn(e)}constructor(e,n){super(),this._element=e,this._ngZone=n,this._initialized=!1,this._destroyed=new Re,this._onChange=r=>{},this.selectionChange=new He,this.color="accent",this.compareWith=(r,s)=>r===s,this._multiple=!0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this.selectedOptions=new WR(this._multiple),this._onTouched=()=>{},this._selectionListDisabled=!1,this._handleFocusout=()=>{setTimeout(()=>{this._containsFocus()||this._resetActiveOption()})},this._handleFocusin=r=>{if(this.disabled)return;const s=this._items.toArray().findIndex(o=>o._elementRef.nativeElement.contains(r.target));s>-1?this._setActiveOption(s):this._resetActiveOption()},this._isNonInteractive=!1}ngAfterViewInit(){this._initialized=!0,this._setupRovingTabindex(),this._ngZone.runOutsideAngular(()=>{this._element.nativeElement.addEventListener("focusin",this._handleFocusin),this._element.nativeElement.addEventListener("focusout",this._handleFocusout)}),this._value&&this._setOptionsFromValues(this._value),this._watchForSelectionChange()}ngOnChanges(e){const n=e.disabled,r=e.disableRipple,s=e.hideSingleSelectionIndicator;(r&&!r.firstChange||n&&!n.firstChange||s&&!s.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._keyManager?.destroy(),this._element.nativeElement.removeEventListener("focusin",this._handleFocusin),this._element.nativeElement.removeEventListener("focusout",this._handleFocusout),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(e){this._element.nativeElement.focus(e)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_reportValueChange(){if(this.options&&!this._isDestroyed){const e=this._getSelectedOptionValues();this._onChange(e),this._value=e}}_emitChangeEvent(e){this.selectionChange.emit(new fse(this,e))}writeValue(e){this._value=e,this.options&&this._setOptionsFromValues(e||[])}setDisabledState(e){this.disabled=e}get disabled(){return this._selectionListDisabled}set disabled(e){this._selectionListDisabled=tn(e),this._selectionListDisabled&&this._keyManager?.setActiveItem(-1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}_watchForSelectionChange(){this.selectedOptions.changed.pipe(Le(this._destroyed)).subscribe(e=>{for(let n of e.added)n.selected=!0;for(let n of e.removed)n.selected=!1;this._containsFocus()||this._resetActiveOption()})}_setOptionsFromValues(e){this.options.forEach(n=>n._setSelected(!1)),e.forEach(n=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,n));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(e=>e.selected).map(e=>e.value)}_markOptionsForCheck(){this.options&&this.options.forEach(e=>e._markForCheck())}_setAllOptionsSelected(e,n){const r=[];return this.options.forEach(s=>{(!n||!s.disabled)&&s._setSelected(e)&&r.push(s)}),r.length&&this._reportValueChange(),r}get options(){return this._items}_handleKeydown(e){const n=this._keyManager.activeItem;if(13!==e.keyCode&&32!==e.keyCode||this._keyManager.isTyping()||!n||n.disabled)if(65===e.keyCode&&this.multiple&&!this._keyManager.isTyping()&&ta(e,"ctrlKey")){const r=this.options.some(s=>!s.disabled&&!s.selected);e.preventDefault(),this._emitChangeEvent(this._setAllOptionsSelected(r,!0))}else this._keyManager.onKeydown(e);else e.preventDefault(),n._toggleOnInteraction()}_setupRovingTabindex(){this._keyManager=new FU(this._items).withHomeAndEnd().withTypeAhead().withWrap().skipPredicate(()=>this.disabled),this._resetActiveOption(),this._keyManager.change.subscribe(e=>this._setActiveOption(e)),this._items.changes.pipe(Le(this._destroyed)).subscribe(()=>{const e=this._keyManager.activeItem;(!e||!this._items.toArray().indexOf(e))&&this._resetActiveOption()})}_setActiveOption(e){this._items.forEach((n,r)=>n._setTabindex(r===e?0:-1)),this._keyManager.updateActiveItem(e)}_resetActiveOption(){if(this.disabled)return void this._setActiveOption(-1);const e=this._items.find(n=>n.selected&&!n.disabled)||this._items.first;this._setActiveOption(e?this._items.toArray().indexOf(e):-1)}_containsFocus(){const e=NM();return e&&this._element.nativeElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt))},i.\u0275cmp=st({type:i,selectors:[["mat-selection-list"]],contentQueries:function(e,n,r){if(1&e&&Yi(r,CC,5),2&e){let s;Et(s=At())&&(n._items=s)}},hostAttrs:["role","listbox",1,"mat-mdc-selection-list","mat-mdc-list-base","mdc-list"],hostVars:1,hostBindings:function(e,n){1&e&&De("keydown",function(s){return n._handleKeydown(s)}),2&e&&It("aria-multiselectable",n.multiple)},inputs:{color:"color",compareWith:"compareWith",multiple:"multiple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator",disabled:"disabled"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[An([hse,{provide:ek,useExisting:i},{provide:KH,useExisting:i}]),ut,xi],ngContentSelectors:zre,decls:1,vars:0,template:function(e,n){1&e&&(or(),Yt(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0}),i})(),pse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[GI,uo,Jn,nb,nV,fR]}),i})();function mse(i,t){if(1&i&&($(0,"mat-label"),Oe(1),W()),2&i){const e=ae(2);V(1),ui(e.resource.name)}}function gse(i,t){if(1&i&&($(0,"mat-list-option",5),Oe(1),W()),2&i){const e=t.$implicit,n=ae(2);U("value",e.key)("selected",n.resource.data[e.key])("disabled",n.disabled),V(1),Vi(" ",e.key," ")}}function _se(i,t){if(1&i){const e=$n();Gr(0,1),fe(1,mse,2,1,"mat-label",2),$(2,"mat-selection-list",3),De("selectionChange",function(r){return Nt(e),St(ae().onSelection(r))}),fe(3,gse,2,4,"mat-list-option",4),Xe(4,"keyvalue"),W(),Wr()}if(2&i){const e=ae();U("matTooltip",e.resourceDescription),V(1),U("ngIf",e.resource.name),V(1),U("disabled",e.disabled),V(1),U("ngForOf",Je(4,4,e.resource.data))}}let vse=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.disabled=!1,this.changed=new He}onSelection(e){for(const n of e.options)this.resource.data[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-flags-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],[3,"disabled","selectionChange"],[3,"value","selected","disabled",4,"ngFor","ngForOf"],[3,"value","selected","disabled"]],template:function(e,n){1&e&&fe(0,_se,5,6,"ng-container",0),2&e&&U("ngIf",n.resource)},dependencies:[Os,hi,po,Bs,SC,CC,fB],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0}),i})();class ZH{get tick$(){return this._tick$.asObservable()}get children(){return[...this._children]}constructor(t){this.parent=t,this._tick$=new Re,this._children=[],t&&t.addChild(this)}addChild(t){if(t.parent!==this)throw new Error("Incorrect child clock");this._children.includes(t)||this._children.push(t)}removeChild(t){if(t.parent!==this)throw new Error("Incorrect child clock");this._children=this._children.filter(e=>e!==t)}dispose(){this.parent&&this.parent.removeChild(this);for(const t of this._children)t.dispose();this._tick$.complete()}}const bse=typeof performance>"u"?()=>Date.now():()=>performance.now();class qm extends ZH{static get instance(){return qm._instance||(qm._instance=new qm),qm._instance}get elapsedTime(){return bse()}constructor(){super(null);let t=this.elapsedTime;const e=()=>{requestAnimationFrame(e);const n=t,r=this.elapsedTime;t=r,this._tick$.next([n,r-n])};requestAnimationFrame(e)}dispose(){throw new Error("Cannot dispose global clock")}}class QH extends ZH{get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get isStopped(){return-1===this.startedAt}get timeScale(){return this._timeScale}set timeScale(t){if(t!==this._timeScale||this.pausedByTimescale&&0!==t){if(0===t)return void(this.isPaused||(this.pause(),this.pausedByTimescale=!0));if(this.isPaused&&this.pausedByTimescale&&(this.resume(),this.pausedByTimescale=!1),!this.isStopped){const e=this.isPaused?this.pausedAt:this.parentClock.elapsedTime;this.startedAt=e-(e-this.startedAt)*this.timeScale/t}this._timeScale=t}}get elapsedTime(){return this.isStopped?this.lastStopElapsed:this.isPaused?this._timeScale*(this.pausedAt-this.startedAt):this._timeScale*(this.parentClock.elapsedTime-this.startedAt)}constructor(t=!1,e=qm.instance){super(e),this.parentClock=e,this.tickSub=null,this._internalTick$=new Re,this.tickRateLimit=0,this.paused$=new Re,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,this.lastStopElapsed=0,this._timeScale=1,this.pausedByTimescale=!1,this.lastFiredTickElapsed=0,t&&this.start(),this._internalTick$.pipe(rt(([n,r])=>[r,r-this.lastFiredTickElapsed]),hn(([n])=>!this.tickRateLimit||Math.floor(this.lastFiredTickElapsed*this.tickRateLimit/1e3)<Math.floor(n*this.tickRateLimit/1e3)),zi(([n])=>this.lastFiredTickElapsed=n)).subscribe(this._tick$)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.lastStopElapsed=this.elapsedTime,this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime,this.pausedByTimescale=!1,this.paused$.next(!0)}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks(),this.paused$.next(!1))}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(rt(([t,e])=>[this.oldRelativeTime,this.oldRelativeTime+e*this.timeScale]),zi(([t,e])=>this.oldRelativeTime=e)).subscribe(this._internalTick$)}stopListeningTicks(){var t;null===(t=this.tickSub)||void 0===t||t.unsubscribe(),this.tickSub=null}dispose(){this.stopListeningTicks(),this._internalTick$.complete(),super.dispose()}}const xse={transparent:!1,background:0,size:"fullscreen",antialias:!0};class wse{constructor(t,e,n={}){this.scene=t,this.canvas=e,this.entity=null,this.rendererOptions=Object.assign(Object.assign({},xse),n||{})}}class gb{static fromArray(t,e=!1){const n=new gb(t[0]);let r=n;for(let s=1;s<t.length;s++){const o=new gb(t[s]);r.addAdjacent(o),r=o}return e&&r.addAdjacent(n),n}static fromSquareGrid(t){const e=t.map(n=>n.map(r=>new gb(r)));for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)r>0&&e[n][r].addAdjacent(e[n][r-1]),n>0&&e[n][r].addAdjacent(e[n-1][r]);return e[0][0]}constructor(t){this.data=t,this.adjacent=new Set}addAdjacent(t){return!this.adjacent.has(t)&&(this.adjacent.add(t),t.adjacent.add(this),!0)}removeAdjacent(t){return!!this.adjacent.has(t)&&(this.adjacent.delete(t),t.adjacent.delete(this),!0)}addEdge(t,e){return!!this.removeAdjacent(e)&&(this.addAdjacent(t),t.addAdjacent(e),!0)}removeEdge(t,e){return!(!t.adjacent.has(this)||!t.adjacent.has(e))&&(t.removeAdjacent(this),t.removeAdjacent(e),this.addAdjacent(e))}walkRead(t){const e=new Set,n=[[this,t]];for(e.add(this);n.length;){const r=n.shift(),[s,o]=r;if(0!==o){const a=Array.from(s.adjacent).filter(l=>!e.has(l));for(const l of a)e.add(l),n.push([l,o-1])}}return e}walkReadPreserveDepth(t){const e=new Set,n=[],r=[[this,t]];for(e.add(this);r.length;){const s=r.shift(),[o,a]=s,l=t-a;if(n[l]||(n[l]=new Set),n[l].add(o),0!==a){const c=Array.from(o.adjacent).filter(d=>!e.has(d));for(const d of c)e.add(d),r.push([d,a-1])}}return n}nodes(){return Array.from(this.walkRead(-1))}}var lc=(()=>{return(i=lc||(lc={}))[i.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",i[i.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",i[i.OBJECTS_BINDING=400]="OBJECTS_BINDING",i[i.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",i[i.CONTROLLERS=800]="CONTROLLERS",i[i.RENDERING=1e3]="RENDERING",i[i.POST_RENDERING=1200]="POST_RENDERING",lc;var i})();let Kh=(()=>{class i{constructor(){this.tick$=new Re,this._world=null,this._name="e0x"+(i.default_name_counter++).toString(16),this._selfActive=!0,this.parent=null,this._children=[],this._components=[],this._onSpawned$=new Re,this._onRemoved$=new Re}get world(){return this._world}get name(){return this._name}set name(e){this._name=e}get active(){return this._selfActive&&(!this.parent||this.parent.active)}set active(e){this._selfActive=e}get children(){return[...this._children]}addChildren(...e){for(const n of e)n.parent&&n.parent.removeChildren([n]),n.parent=this;if(this._children.push(...e),this._world)for(const n of e)this._world.addEntity(n)}removeChildren(e,n=!1){this._children=this._children.filter(r=>!e.includes(r));for(const r of e)r.parent=null,this._world&&this._world.removeEntity(r,n)}get components(){return[...this._components]}addComponents(...e){for(const n of e)n.entity&&n.entity.removeComponents([n]),n.entity=this;if(this._components.push(...e),this._world)for(const n of e)n.addToWorld(this._world)}removeComponents(e,n=!1){this._components=this._components.filter(r=>!e.includes(r));for(const r of e)r.entity=null,this._world&&r.removeFromWorld(this._world,n)}get onSpawned$(){return this._onSpawned$.asObservable()}get onRemoved$(){return this._onRemoved$.asObservable()}onSpawned(e){this._world=e;for(const n of this._components)n.addToWorld(e);for(const n of this._children)e.addEntity(n);this._onSpawned$.next()}onRemoved(){const e=this._world;this._world=null;for(const n of this._children)e.removeEntity(n);for(const n of this._components)n.removeFromWorld(e,!1);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this,!1),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const e of this._children)e.dispose();for(const e of this._components)e.dispose()}}return i.default_name_counter=0,i})();class Mse extends Kh{constructor(t){super(),this.tickOrder=t}}function Zh(i,t=lc.CONTROLLERS,e){const n=new Mse(t);return e&&(n.name=e),i.addEntity(n),n.tick$.pipe(cu(()=>{i.removeEntity(n,!0)}))}class tk extends Kh{get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}get rendererOptions(){return this.renderer.rendererOptions}get physicsDebugViewActive(){return this.renderer.physicsDebugViewActive}set physicsDebugViewActive(t){this.renderer.physicsDebugViewActive=t}constructor(t){super(),this.renderer=t,this.tickOrder=lc.RENDERING,this._rendererSize$=new $e(null),this.addComponents(t),this.tick$.subscribe(()=>{this.renderer.render()})}onSpawned(t){this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||"function"==typeof this.rendererOptions.size?(this.renderer.canvas&&(this.renderer.canvas.style.position="absolute"),Cr(ko(window,"resize").pipe(jy(100)),ko(window,"orientationchange")).pipe(Le(this._onRemoved$),rt(()=>({x:window.innerWidth,y:window.innerHeight})),Ro({x:window.innerWidth,y:window.innerHeight})).subscribe(e=>{this._rendererSize$.next("function"==typeof this.rendererOptions.size?this.rendererOptions.size(e):e)})):this.rendererOptions.size instanceof In||void 0!==this.rendererOptions.size.subscribe&&void 0!==this.rendererOptions.size.pipe?this.rendererOptions.size.pipe(Le(this._onRemoved$)).subscribe(e=>{this._rendererSize$.next(e)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(Le(this._onRemoved$),bl((e,n)=>e?.x==n?.x&&e?.y==n?.y)).subscribe(e=>{e&&this.renderer.resizeRenderer(e)}),super.onSpawned(t)}dispose(){super.dispose(),this._rendererSize$.complete()}}const nk=i=>{i.updateVisibility?i.updateVisibility():JH(i)},JH=i=>{for(const t of i.children)nk(t)};class Cse extends Kh{constructor(){super(...arguments),this._visible=!0}get visible(){return this._visible}get worldVisible(){let t=this;for(;;){if(!1===t.visible)return!1;if(!t.parent)break;t=t.parent}return!0}set visible(t){this._visible=t,this.updateVisibility()}updateVisibility(){JH(this)}addChildren(...t){super.addChildren(...t);for(const e of t)nk(e)}removeChildren(t,e=!1){if(super.removeChildren(t,e),!e)for(const n of t)nk(n)}}class ik{constructor(){this._running=!1,this.stop$=new Re}get running(){return this._running}start(...t){this.running||(this.startInternal(...t),this._running=!0)}stop(...t){this.running&&(this.stop$.next(),this.stopInternal(...t),this._running=!1)}stopInternal(...t){}}class Sse extends ik{get output$(){return this._output$.asObservable()}constructor(t,e){super(),this.keyboard=t,this.keymap=e,this._output$=new Re}startInternal(){const t=[[],[],[],[]];this.keymap.includes("wasd")&&(t[0].push("KeyW"),t[1].push("KeyA"),t[2].push("KeyS"),t[3].push("KeyD")),this.keymap.includes("arrows")&&(t[0].push("ArrowUp"),t[1].push("ArrowLeft"),t[2].push("ArrowDown"),t[3].push("ArrowRight")),Qo(t.map(e=>this.keyboard.bindMany(...e))).pipe(Le(this.stop$),rt(e=>{const n={};if(e.includes(!0)){const[r,s,o,a]=e;r!=o&&(n.upDown=r),s!=a&&(n.leftRight=s)}return n})).subscribe(e=>this._output$.next(e))}}const rk=new In(vs);class EC extends ik{constructor(){super(),this.bindings={},this.skipKeyDownsOnExternalFocus=!0,this.handleKeys=this.handleKeys.bind(this),this.resetAllKeys=this.resetAllKeys.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this)}startInternal(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys),window.addEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange)}stopInternal(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange),this.resetAllKeys()}bind(t){this.bindings[t]||(this.bindings[t]=[]);const e=new $e(!1);return this.bindings[t].push(e),e.pipe(bl(),cu(()=>{this.bindings[t].splice(this.bindings[t].indexOf(e),1),e.complete()}))}bindMany(...t){if(0==t.length)return console.warn("[KeyboardController] bindMany called without any key code"),rk;if(1==t.length)return this.bind(t[0]);const e=[];for(const n of t){this.bindings[n]||(this.bindings[n]=[]);const r=new $e(!1);this.bindings[n].push(r),e.push(r)}return Qo(e).pipe(cu(()=>{for(let n=0;n<t.length;n++)this.bindings[t[n]].splice(this.bindings[t[n]].indexOf(e[n]),1),e[n].complete()}),rt(n=>n.includes(!0)),bl())}emulateKeyDown(t){if(this.running)for(const e of this.bindings[t]||[])e.next(!0)}emulateKeyUp(t){if(this.running)for(const e of this.bindings[t]||[])e.next(!1)}emulateKeyPress(t){this.emulateKeyDown(t),this.emulateKeyUp(t)}handleKeys(t){if("keydown"!=t.type&&"keyup"!=t.type)return;const e="keydown"==t.type;if(e&&this.skipKeyDownsOnExternalFocus&&document.activeElement)for(const n of EC.externalFocusBlacklist)if(document.activeElement instanceof n)return;for(const n of this.bindings[t.code]||[])n.next(e)}onPointerLockChange(){document.pointerLockElement||this.resetAllKeys()}resetAllKeys(){for(const t in this.bindings)for(const e of this.bindings[t]||[])e.next(!1)}}EC.externalFocusBlacklist=[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement,HTMLButtonElement];class yi{static get O(){return{x:0,y:0}}static get X(){return{x:1,y:0}}static get Y(){return{x:0,y:1}}static get nX(){return{x:-1,y:0}}static get nY(){return{x:0,y:-1}}static clone(t){return{x:t.x,y:t.y}}static spr(t){return[t.x,t.y]}static neg(t){return{x:-t.x,y:-t.y}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y}}static scale(t,e){return{x:t.x*e.x,y:t.y*e.y}}static avg(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}static round(t){return{x:Math.round(t.x),y:Math.round(t.y)}}static lenSq(t){return t.x*t.x+t.y*t.y}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static dist(t,e){return yi.len(yi.sub(t,e))}static norm(t){const e=yi.len(t);return{x:t.x/e,y:t.y/e}}static scalarMult(t,e){return{x:t.x*e,y:t.y*e}}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}static angle(t,e){const n=t.x*e.x+t.y*e.y,r=Math.sqrt(t.x**2+t.y**2)*Math.sqrt(e.x**2+e.y**2);return Math.acos(n/r)}static rot(t,e){const n=Math.cos(e),r=Math.sin(e);return{x:t.x*n-t.y*r,y:t.x*r+t.y*n}}static rotAround(t,e,n){const r=Math.cos(n),s=Math.sin(n),o_x=t.x-e.x,o_y=t.y-e.y;return{x:o_x*r-o_y*s+e.x,y:o_x*s+o_y*r+e.y}}}const Ase={pointerLock:!1};var Us=(()=>{return(i=Us||(Us={}))[i.NONE=0]="NONE",i[i.DRAG=1]="DRAG",i[i.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",i[i.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",i[i.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",Us;var i})();class Xm extends ik{static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$||(this._wheel$=ko(this._element,"wheel",{passive:!1}).pipe(Le(this.stopped$),cu(()=>this._wheel$=null),zi(t=>t.preventDefault()),rt(t=>t.deltaY),Hf())),this._wheel$}get isPointerLocked(){return!!document.pointerLockElement}get isPointerLocked$(){return ko(document,"pointerlockchange").pipe(rt(()=>this.isPointerLocked))}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(Fs(t=>t==Us.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:rk),rt(t=>t.map(e=>({x:e.x,y:e.y}))),function Ese(){return ni((i,t)=>{let e,n=!1;i.subscribe(Xn(t,r=>{const s=e;e=r,n&&t.next([s,r]),n=!0}))})}(),hn(([t,e])=>t.length>1&&e.length>1),rt(([t,e])=>({centerPointDelta:yi.sub(yi.scalarMult(e.reduce((n,r)=>yi.add(n,r),yi.O),1/e.length),yi.scalarMult(t.reduce((n,r)=>yi.add(n,r),yi.O),1/e.length)),angleDelta:yi.angle(e[1],e[0])-yi.angle(t[1],t[0]),distanceDelta:yi.dist(e[1],e[0])-yi.dist(t[1],t[0])})))}get _element(){return this.options.canvas||window}constructor(t={}){super(),this._wheel$=null,this._delta$=new Re,this._position$=new $e(yi.O),this._multiTouchPositions$=new $e([]),this.stopped$=new Re,this._state$=new $e(Us.NONE),this.options=Object.assign(Object.assign({},Ase),t),this.canvasClickListener=this.canvasClickListener.bind(this)}startInternal(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(Us.NONE);const t=[Us.DRAG,Us.DRAG_MIDDLE_BUTTON,Us.DRAG_RIGHT_BUTTON],e=[Us.NONE,Us.DRAG,Us.DRAG_TOUCH_TWO_FINGERS],n=[],r={};ko(this._element,"mousemove").pipe(Le(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),ko(this._element,"pointermove").pipe(Le(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!Xm.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<n.length;a++)if(n[a].pointerId==o.pointerId){n.splice(a,1);break}0===n.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),window.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(e[Math.min(n.length,2)])};ko(this._element,"pointerdown").pipe(Le(this.stopped$)).subscribe(o=>{if(0===n.length)try{this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),window.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)}catch(a){console.error(a)}n.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(e[Math.min(n.length,2)])):this._state$.next(t[o.button]||Us.NONE)}),ko(this._element,"contextmenu").pipe(Le(this.stopped$)).subscribe(o=>{o.preventDefault()})}stopInternal(t=!0){this.stopped$.next(),t&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())}canvasClickListener(){this.options.canvas.requestPointerLock()}}class Dse{static lookAt(t,e,n){let r=Te.sub(t,e);r=0===Te.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):Te.norm(r);let s=Te.cross(n,r);0===Te.lenSq(s)&&(r=1===Math.abs(n.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=Te.norm(r),s=Te.cross(n,r)),s=Te.norm(s);let o=Te.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}class $i{static get O(){return{x:0,y:0,z:0,w:1}}static clone(t){return{x:t.x,y:t.y,z:t.z,w:t.w}}static spr(t){return[t.x,t.y,t.z,t.w]}static add(t,e){const n=t.w+e.w,r=t.x+e.x,s=t.y+e.y,o=t.z+e.z,a=Math.sqrt(n*n+r*r+s*s+o*o);return{w:n/a,x:r/a,y:s/a,z:o/a}}static mult(t,e){return{w:t.w*e.w-t.x*e.x-t.y*e.y-t.z*e.z,x:t.w*e.x+t.x*e.w+t.y*e.z-t.z*e.y,y:t.w*e.y-t.x*e.z+t.y*e.w+t.z*e.x,z:t.w*e.z+t.x*e.y-t.y*e.x+t.z*e.w}}static conjugate(t){return{x:-t.x,y:-t.y,z:-t.z,w:t.w}}static opposite(t){return{x:-t.x,y:-t.y,z:-t.z,w:-t.w}}static combineRotations(...t){let e={w:1,x:0,y:0,z:0};for(const n of t)e=this.mult(e,n);return e}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y),z:t.z+n*(e.z-t.z),w:t.w+n*(e.w-t.w)}}static slerp(t,e,n){let s=Math.acos(t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w),o=Math.sin(s),a=t.x*Math.sin((1-n)*s)/o+e.x*Math.sin(n*s)/o,l=t.y*Math.sin((1-n)*s)/o+e.y*Math.sin(n*s)/o,c=t.z*Math.sin((1-n)*s)/o+e.z*Math.sin(n*s)/o,d=t.w*Math.sin((1-n)*s)/o+e.w*Math.sin(n*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(d)?$i.clone(t):{x:a,y:l,z:c,w:d}}static fromAngle(t,e){const n=e/2,r=Math.sin(n);return Object.assign(Object.assign({},Te.scalarMult(t,r)),{w:Math.cos(n)})}static fromMatrix4(t){const e=t[0],n=t[4],r=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],d=t[10],h=e+o+d;if(h>0){const p=.5/Math.sqrt(h+1);return{x:(c-a)*p,y:(r-l)*p,z:(s-n)*p,w:.25/p}}if(e>o&&e>d){const p=2*Math.sqrt(1+e-o-d);return{x:.25*p,y:(n+s)/p,z:(r+l)/p,w:(c-a)/p}}if(o>d){const p=2*Math.sqrt(1+o-e-d);return{x:(n+s)/p,y:.25*p,z:(a+c)/p,w:(r-l)/p}}{const p=2*Math.sqrt(1+d-e-o);return{x:(r+l)/p,y:(a+c)/p,z:.25*p,w:(s-n)/p}}}static fromMatrix3(t){const e=t[0][0]+t[1][1]+t[2][2];let n,r,s,o;if(e>0){const a=.5/Math.sqrt(e+1);n=.25/a,r=(t[2][1]-t[1][2])*a,s=(t[0][2]-t[2][0])*a,o=(t[1][0]-t[0][1])*a}else if(t[0][0]>t[1][1]&&t[0][0]>t[2][2]){const a=2*Math.sqrt(1+t[0][0]-t[1][1]-t[2][2]);n=(t[2][1]-t[1][2])/a,r=.25*a,s=(t[0][1]+t[1][0])/a,o=(t[0][2]+t[2][0])/a}else if(t[1][1]>t[2][2]){const a=2*Math.sqrt(1+t[1][1]-t[0][0]-t[2][2]);n=(t[0][2]-t[2][0])/a,r=(t[0][1]+t[1][0])/a,s=.25*a,o=(t[1][2]+t[2][1])/a}else{const a=2*Math.sqrt(1+t[2][2]-t[0][0]-t[1][1]);n=(t[1][0]-t[0][1])/a,r=(t[0][2]+t[2][0])/a,s=(t[1][2]+t[2][1])/a,o=.25*a}return{w:n,x:r,y:s,z:o}}static fromEuler(t){const e=t.x,n=t.y,r=t.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*n),l=Math.sin(.5*n),c=Math.cos(.5*e),d=Math.sin(.5*e);return{w:c*a*s+d*l*o,x:d*a*s-c*l*o,y:c*l*s+d*a*o,z:c*a*o-d*l*s}}static toEuler(t){const e=t.w,n=t.x,r=t.y,s=t.z,c=2*(e*r-s*n);return{x:Math.atan2(2*(e*n+r*s),1-2*(n*n+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(e*s+n*r),1-2*(r*r+s*s))}}static lookAt(t,e,n=Te.Z){return this.fromMatrix4(Dse.lookAt(t,e,n))}static rotAround(t,e,n){const r=Math.sin(n/2),s={w:Math.cos(n/2),x:e.x*r,y:e.y*r,z:e.z*r};return this.mult(s,t)}}class Te{static get O(){return{x:0,y:0,z:0}}static get X(){return{x:1,y:0,z:0}}static get Y(){return{x:0,y:1,z:0}}static get Z(){return{x:0,y:0,z:1}}static get nX(){return{x:-1,y:0,z:0}}static get nY(){return{x:0,y:-1,z:0}}static get nZ(){return{x:0,y:0,z:-1}}static clone(t){return{x:t.x,y:t.y,z:t.z}}static spr(t){return[t.x,t.y,t.z]}static neg(t){return{x:-t.x,y:-t.y,z:-t.z}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}}static scale(t,e){return{x:t.x*e.x,y:t.y*e.y,z:t.z*e.z}}static avg(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2,z:(t.z+e.z)/2}}static round(t){return{x:Math.round(t.x),y:Math.round(t.y),z:Math.round(t.z)}}static lenSq(t){return t.x*t.x+t.y*t.y+t.z*t.z}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static dist(t,e){return Te.len(Te.sub(t,e))}static cross(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return{x:r*l-s*a,y:s*o-n*l,z:n*a-r*o}}static norm(t){const e=Te.len(t);return 0===e?t:{x:t.x/e,y:t.y/e,z:t.z/e}}static scalarMult(t,e){return{x:t.x*e,y:t.y*e,z:t.z*e}}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y),z:t.z+n*(e.z-t.z)}}static angle(t,e){const n=t.x*e.x+t.y*e.y+t.z*e.z,r=Math.sqrt(t.x**2+t.y**2+t.z**2)*Math.sqrt(e.x**2+e.y**2+e.z**2);return Math.acos(n/r)}static rot(t,e){const{x:n,y:r,z:s}=t;return{x:e.w*e.w*n+2*e.y*e.w*s-2*e.z*e.w*r+e.x*e.x*n+2*e.y*e.x*r+2*e.z*e.x*s-e.y*e.y*n-e.z*e.z*n,y:2*e.x*e.y*n+e.y*e.y*r+2*e.z*e.y*s+2*e.w*e.z*n-e.z*e.z*r+e.w*e.w*r-2*e.x*e.w*s-e.x*e.x*r,z:2*e.x*e.z*n+2*e.y*e.z*r+e.z*e.z*s-2*e.w*e.y*n-e.y*e.y*s+2*e.w*e.x*r-e.x*e.x*s+e.w*e.w*s}}static rotAround(t,e,n){return this.rot(t,$i.fromAngle(e,n))}static toSpherical(t){const e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return{radius:e,theta:0==e?0:Math.atan2(t.y,t.x),phi:0==e?0:Math.atan2(Math.sqrt(t.x*t.x+t.y*t.y),t.z)}}static fromSpherical(t){return{x:t.radius*Math.sin(t.phi)*Math.cos(t.theta),y:t.radius*Math.sin(t.phi)*Math.sin(t.theta),z:t.radius*Math.cos(t.phi)}}}function sk(i,t,e,n){return r=>r.pipe(iI((s,o)=>{var a;return{targetValue:o,currentValue:null!==(a=s.currentValue)&&void 0!==a?a:o,hasReachedTarget:!1}},{targetValue:null,currentValue:null,hasReachedTarget:!1}),Fs(s=>i.pipe(rt(([o,a])=>{if(null===s.targetValue||null===s.currentValue)return s.currentValue;if(s.hasReachedTarget)return;const l=1-Math.exp(-a/t),c=e(s.currentValue,s.targetValue,l);return s.currentValue=c,n(c,s.targetValue)?(s.hasReachedTarget=!0,s.targetValue):c}))),rt(s=>void 0!==s?s:null),hn(s=>null!==s))}_s(738);class Rse extends Kh{get avgReport(){return this._avgReport}get peakReport(){return this._peakReport}constructor(t=60,e=15){super(),this.maxSamples=t,this.maxRows=e,this.tickOrder=Number.MAX_SAFE_INTEGER,this.sampleIndex=0,this.collectedData=new Map,this._avgReport={totalTime:0,entries:[]},this._peakReport={totalTime:0,entries:[]}}onSpawned(t){super.onSpawned(t),this.sampleIndex=0;const e=()=>(typeof performance>"u"?Date:performance).now();this.world.tickForwardTo$.pipe(Le(this.onRemoved$)).subscribe(n=>{n!==this&&(this.collectedData.has(n)?this.collectedData.get(n).push([this.sampleIndex,e(),0]):this.collectedData.set(n,[[this.sampleIndex,e(),0]]))}),this.world.tickForwardedTo$.pipe(Le(this.onRemoved$)).subscribe(n=>{if(n===this)return;const r=this.collectedData.get(n);r[r.length-1][2]=e()}),this.tick$.pipe(Le(this.onRemoved$)).subscribe(()=>{this.sampleIndex++;const n=Array.from(this.collectedData.entries());for(const[h,p]of n){for(;p.length>0&&p[0][0]<this.sampleIndex-this.maxSamples;)p.shift();0===p.length&&this.collectedData.delete(h)}const r=h=>h instanceof Kh?""===h.name?h.constructor.name:h.name:"PHYSICS_WORLD"===h?"Physics simulation":h,s=h=>{let p=0,m=0;for(;m<h.length-2;m++){if(this.maxRows>h.length-m+1){m--;break}p+=h[h.length-m-1][1]}return m>1&&(h=h.slice(0,h.length-m)).push([`Rest (${m})`,p]),h};let o=0,a=Array.from(this.collectedData.entries()).map(([h,p])=>{const m=p.reduce((g,[b,v,y])=>g+y-v,0)/this.maxSamples;return o+=m,[r(h),m]}).sort((h,p)=>p[1]-h[1]);a=s(a),this._avgReport={totalTime:o,entries:a};let l=new Map,c=Array.from(this.collectedData.entries()).map(([h,p])=>{let m=0;for(const[g,b,v]of p){const y=v-b;m=Math.max(m,y),l.set(g,y+(l.get(g)||0))}return[r(h),m]}).sort((h,p)=>p[1]-h[1]);c=s(c);let d=Array.from(l.values()).reduce((h,p)=>Math.max(h,p),0);this._peakReport={totalTime:d,entries:c}})}onRemoved(){super.onRemoved(),this.collectedData=new Map,this._avgReport={totalTime:0,entries:[]},this._peakReport={totalTime:0,entries:[]}}}var Km=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};class El{static get documentWorlds(){return[...El._documentWorlds]}constructor(t,e){this.visualScene=t,this.physicsWorld=e,this.worldClock=new QH(!1),this.keyboardInput=new EC,this.name="w0x"+(El.default_name_counter++).toString(16),this.children=[],this.tickListeners=[],this.tickStarted$=new Re,this.tickForwardTo$=new Re,this.tickForwardedTo$=new Re,this.paused$=new Re,this.disposed$=new Re,this.keyboardInput.start(),window.ggstatic?this.registerConsoleCommands(window.ggstatic):(this.onGgStaticInitialized=this.onGgStaticInitialized.bind(this),window.addEventListener("ggstatic_added",this.onGgStaticInitialized)),this.worldClock.paused$.subscribe(this.paused$),El._documentWorlds.push(this),El.worldCreated$.next(this)}init(){return Km(this,void 0,void 0,function*(){yield Promise.all([this.physicsWorld.init(),this.visualScene.init()]);const t=(e,n,r)=>{e.active&&(this.tickForwardTo$.next(e),e.tick$.next([n,r]),this.tickForwardedTo$.next(e))};this.worldClock.tick$.subscribe(([e,n])=>{this.tickStarted$.next();let r=0;for(;r<this.tickListeners.length&&!(this.tickListeners[r].tickOrder>=lc.PHYSICS_SIMULATION);r++)t(this.tickListeners[r],e,n);for(this.tickForwardTo$.next("PHYSICS_WORLD"),this.physicsWorld.simulate(n),this.tickForwardedTo$.next("PHYSICS_WORLD");r<this.tickListeners.length;r++)t(this.tickListeners[r],e,n)})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(t){return new QH(t,this.worldClock)}dispose(){window.ggstatic?window.ggstatic.deregisterWorldCommands(this):window.removeEventListener("ggstatic_added",this.onGgStaticInitialized),this.worldClock.stop(),this.keyboardInput.stop(),this.tickStarted$.complete(),this.tickForwardTo$.complete(),this.tickForwardedTo$.complete();for(let t=0;t<this.children.length;t++)this.children[t].onRemoved(),this.children[t].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld.dispose(),this.visualScene.dispose(),El._documentWorlds.splice(El._documentWorlds.indexOf(this),1),this.disposed$.next(),this.disposed$.complete()}addEntity(t){t.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(t),this.tickListeners.push(t),this.tickListeners.sort((e,n)=>e.tickOrder-n.tickOrder),t.onSpawned(this))}removeEntity(t,e=!1){if(t.world){if(t.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(n=>n===t),1),this.tickListeners.splice(this.tickListeners.findIndex(n=>n===t),1),t.onRemoved()}e&&t.dispose()}onGgStaticInitialized(){window.removeEventListener("ggstatic_added",this.onGgStaticInitialized),this.registerConsoleCommands(window.ggstatic)}registerConsoleCommands(t){t.registerConsoleCommand(this,"timescale",(...e)=>Km(this,void 0,void 0,function*(){return isNaN(+e[0])||(this.worldClock.timeScale=+e[0]),this.worldClock.timeScale.toString()}),"args: [ float? ]; Get current time scale of selected world clock or set it. Default value is 1.0 (no time scale applied)"),t.registerConsoleCommand(this,"fps_limit",(...e)=>Km(this,void 0,void 0,function*(){return isNaN(+e[0])||(this.worldClock.tickRateLimit=+e[0]),this.worldClock.tickRateLimit.toString()}),"args: [ int? ]; Get current tick rate limit of selected world clock or set it. 0 means no limit applied"),t.registerConsoleCommand(this,"renderers",()=>Km(this,void 0,void 0,function*(){return this.children.filter(e=>e instanceof tk).map(e=>e.name).join("\n")}),"no args; Print all renderers in selected world"),t.registerConsoleCommand(this,"debug_view",(...e)=>Km(this,void 0,void 0,function*(){let r,n="toggle";for(let o of e)["1","0"].includes(o)?n="1"===o:r=o;let s=this.children.find(o=>o instanceof tk&&(!r||o.name===r));if(s)return s.physicsDebugViewActive="toggle"===n?!s.physicsDebugViewActive:n,s.physicsDebugViewActive?"1":"0";throw r?new Error(`Renderer with name "${r}" not found`):new Error("No renderer found")}),'args: [ 0|1?, string? ]; Turn on/off physics debug view, skip first argument to toggle value. Second argument expects renderer name, if not provided first renderer will be picked. Use "renderers" to get list of renderers in the world'),t.registerConsoleCommand(this,"performance",(...e)=>Km(this,void 0,void 0,function*(){let n="avg",r=20;for(let d of e)["avg","peak"].includes(d)?n=d:isNaN(+d)||(r=+d);const s=new Rse(r,250);this.addEntity(s),yield function Tse(i,t){const e="object"==typeof t;return new Promise((n,r)=>{let o,s=!1;i.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?n(o):e?n(t.defaultValue):r(new mm)}})})}(this.worldClock.tick$.pipe(Oi(r)));const o="avg"===n?s.avgReport:s.peakReport;this.removeEntity(s);const a=o.entries.map(([d,h])=>`<span style='color:lightgray;'>${d}:</span>`+new Array(Math.max(0,26-d.length)).join("&nbsp;")+`${h.toFixed(2)} ms`+("avg"===n?` (${(100*h/o.totalTime).toFixed(2)}%)`:""));let l="lightgreen";o.totalTime>12&&(l=o.totalTime<16?"yellow":"red");const c=("avg"===n?"Average":"Peak")+" Frame time";return a.unshift(c+":"+new Array(Math.max(0,26-c.length)).join("&nbsp;")+`<span style='color:${l};'>${o.totalTime.toFixed(2)} ms</span>`),a.unshift(`Performance report (${r} samples)`),a.join("\n")}),'args: [ int?, avg|peak? ]; Measure how much time was spent per entity in world. Arguments are samples amount (20 by default) and "peak" or "avg" choice, both arguments are optional. "avg" report sorts entities by average time consumed, "peak" records highest value for each entity')}}El.default_name_counter=0,El._documentWorlds=[],El.worldCreated$=new Re;class Fse extends wse{}class t4 extends Cse{constructor(){super(...arguments),this._world=null}get world(){return this._world}}class Fo extends t4{get position(){return this._position}set position(t){this.object3D&&(this.object3D.position=t),this.objectBody&&(this.objectBody.position=t),this._position=t}get rotation(){return this._rotation}set rotation(t){this.object3D&&(this.object3D.rotation=t),this.objectBody&&(this.objectBody.rotation=t),this._rotation=t}updateVisibility(){this.object3D&&(this.object3D.visible=this.worldVisible),super.updateVisibility()}runTransformBinding(t,e){const n=t.position,r=t.rotation;e&&(e.position=n,e.rotation=r),this._position=n,this._rotation=r}constructor(t){super(),this.tickOrder=lc.OBJECTS_BINDING,this._position=Te.O,this._rotation=$i.O,this.object3D=null,this.objectBody=null,t.objectBody&&(this.objectBody=t.objectBody,this.name=this.objectBody.name,this.addComponents(this.objectBody)),t.object3D&&(this.object3D=t.object3D,t.objectBody||(this._position=this.object3D.position,this._rotation=this.object3D.rotation,this.name=this.object3D.name),this.addComponents(this.object3D)),this.objectBody&&(this.tick$.subscribe(()=>{this.runTransformBinding(this.objectBody,this.object3D)}),this.runTransformBinding(this.objectBody,this.object3D))}}class Qh extends gb{static fromMapArray(t,e=!1){const n=new Qh(t[0]);let r=n;for(let s=1;s<t.length;s++){const o=new Qh(t[s]);r.addAdjacent(o),r=o}return e&&r.addAdjacent(n),n}static fromMapSquareGrid(t){const e=t.map(n=>n.map(r=>new Qh(r)));for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)r>0&&e[n][r].addAdjacent(e[n][r-1]),n>0&&e[n][r].addAdjacent(e[n-1][r]);return e[0][0]}getNearestDummy(t,e){let n=1/0,r=this;return t.forEach(s=>{let o=Math.sqrt(Math.pow(e.x-s.data.position.x,2)+Math.pow(e.y-s.data.position.y,2)+Math.pow(e.z-s.data.position.z,2));o<n&&(n=o,r=s)}),r}nodes(){return Array.from(this.walkRead(-1))}}const Nse={loadDepth:5,inertia:0,maxNodesLoadingPerTick:1};class lk extends t4{get initialLoadComplete$(){return this._initialLoadComplete$.asObservable()}get nearestDummy(){return this._nearestDummy$.getValue()}get chunkLoaded$(){return this._chunkLoaded$.asObservable()}get loadRateLimit(){return this._loadRateLimit}set loadRateLimit(t){this._loadRateLimit=t,this.loadClock&&(this.loadClock.tickRateLimit=t)}constructor(t,e={}){super(),this.mapGraph=t,this.tickOrder=lc.POST_RENDERING,this.loaderCursor$=new $e(Te.O),this.loaded=new Map,this._initialLoadComplete$=new $e(!1),this._nearestDummy$=new $e(null),this._chunkLoaded$=new Re,this.loadClock=null,this._loadRateLimit=1,this.options=Object.assign(Object.assign({},Nse),e),this.mapGraphNodes=t.nodes()}onSpawned(t){super.onSpawned(t),this.loadClock=t.createClock(!0),this.loadClock.tickRateLimit=this._loadRateLimit;let e=[],n=[];this.loadClock.tick$.pipe(Ro(null),Le(this._onRemoved$),rt(()=>this.mapGraph.getNearestDummy(this.mapGraphNodes,this.loaderCursor$.getValue())),bl(),zi(r=>this._nearestDummy$.next(r))).subscribe(r=>{let o,s=new Set;if(this.options.inertia>0){o=new Set;const a=r.walkReadPreserveDepth(this.options.loadDepth+this.options.inertia);for(let l=0;l<a.length;l++)a[l].forEach(c=>o.add(c.data)),l<=this.options.loadDepth&&a[l].forEach(c=>s.add(c.data))}else r.walkRead(this.options.loadDepth).forEach(a=>s.add(a.data)),o=s;for(const a of this.loaded.keys())o.has(a)?s.delete(a):n.includes(a)||n.push(a);for(let a of Array.from(s.keys()))e.includes(a)||e.push(a)}),this.tick$.pipe(Ro(null),Le(this._onRemoved$)).subscribe(()=>{if(n.length){for(const r of n)this.disposeChunk(r);n=[]}if(e.length)if(this._initialLoadComplete$.value&&e.length>this.options.maxNodesLoadingPerTick){let r=e.slice(0,this.options.maxNodesLoadingPerTick);e=e.slice(this.options.maxNodesLoadingPerTick),Promise.all(r.map(s=>this.loadChunk(s))).then()}else Promise.all(e.map(r=>this.loadChunk(r))).then(()=>{this._initialLoadComplete$.value||this._initialLoadComplete$.next(!0)}),e=[]})}onRemoved(){super.onRemoved(),this.loadClock&&(this.loadClock.stop(),this.loadClock=null),this.loaderCursor$.next(Te.O)}loadChunk(t){return function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){const e=yield this.world.loader.loadGgGlb(t.path,Object.assign({position:t.position,rotation:t.rotation||$i.O},t.loadOptions)),n=[...e.entities,...(e.props||[]).map(r=>r.entities).reduce((r,s)=>(r.push(...s),r),[])];return this.loaded.set(t,n),this.addChildren(...n),this._chunkLoaded$.next([e,{position:t.position,rotation:t.rotation||$i.O}]),[n,e]})}disposeChunk(t){this.loaded.has(t)&&(this.removeChildren(this.loaded.get(t),!0),this.loaded.delete(t))}}class Bse extends tk{get position(){return this.renderer.camera.position}set position(t){this.renderer.camera.position=t}get rotation(){return this.renderer.camera.rotation}set rotation(t){this.renderer.camera.rotation=t}get camera(){return this.renderer.camera}}var s4=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};const o4={keymap:"wasd",cameraLinearSpeed:20,cameraMovementElasticity:0,cameraBoostMultiplier:2.5,cameraRotationSensitivity:1,cameraRotationElasticity:0,mouseOptions:{},ignoreMouseUnlessPointerLocked:!1,ignoreKeyboardUnlessPointerLocked:!1};class ck extends Kh{get active(){return super.active}set active(t){!super.active&&t&&this.reset(),super.active=t}get spherical(){return this._spherical}set spherical(t){this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,t.phi)),this._spherical.theta=t.theta,this.resetMotion$.next()}constructor(t,e,n={}){super(),this.keyboard=t,this.camera=e,this.tickOrder=lc.INPUT_CONTROLLERS,this._spherical={phi:0,radius:1,theta:0},this.resetMotion$=new Re,this.options=Object.assign(Object.assign({},o4),n),n.mouseOptions&&(this.options.mouseOptions=Object.assign(Object.assign({},o4.mouseOptions),n.mouseOptions)),this.mouseInput=new Xm(this.options.mouseOptions),this.directionsInput=new Sse(t,this.options.keymap)}reset(){this._spherical=Te.toSpherical(Te.rot({x:0,y:0,z:-1},this.camera.rotation)),this.resetMotion$.next()}onSpawned(t){const e=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return s4(this,void 0,void 0,function*(){yield e.onSpawned.call(this,t),this._spherical=Te.toSpherical(Te.rot({x:0,y:0,z:-1},this.camera.rotation));const n=["KeyE","KeyQ"];this.camera.camera.supportsFov&&n.push("KeyZ","KeyC"),n.push("ShiftLeft");let r=Qo([this.directionsInput.output$,...n.map(c=>this.keyboard.bind(c))]).pipe(Le(this._onRemoved$),rt(([c,...d])=>{let h={direction:{},rest:[]};(!this.options.ignoreKeyboardUnlessPointerLocked||this.mouseInput.isPointerLocked)&&(h={direction:c,rest:d});let p=Object.assign({},Te.O);const[m,g,b,v,y]=h.rest;void 0!==h.direction.upDown&&(p.z=h.direction.upDown?-1:1),void 0!==h.direction.leftRight&&(p.x=h.direction.leftRight?-1:1),m!=g&&(p.y=g?-1:1);let M=0;return b!=v&&(M=b?1:-1),p=Te.norm(p),y&&(p=Te.scalarMult(p,this.options.cameraBoostMultiplier)),[p,M]}));this.options.cameraMovementElasticity>0&&(r=r.pipe(sk(this.camera.tick$,this.options.cameraMovementElasticity,([c,d],[h,p],m)=>[Te.lerp(c,h,m),p],([c,d],[h,p])=>d==p&&Te.dist(c,h)<.001)));let s=Te.O,o=0;r.subscribe(([c,d])=>{s=c,o=d});let a=Xm.isTouchDevice(),l=this.mouseInput.delta$.pipe(Le(this._onRemoved$),hn(()=>this.active&&(a||!this.options.ignoreMouseUnlessPointerLocked||this.mouseInput.isPointerLocked)));if(this.options.cameraRotationElasticity>0){const c=new $e(this._spherical);l.subscribe(h=>{const p=c.getValue();c.next({phi:Math.max(1e-6,Math.min(Math.PI-1e-6,p.phi+h.y*this.options.cameraRotationSensitivity/1e3)),theta:p.theta-h.x*this.options.cameraRotationSensitivity/1e3,radius:1})});const d=()=>{c.pipe(Le(this._onRemoved$),sk(this.tick$,this.options.cameraRotationElasticity,(h,p,m)=>({phi:h.phi+m*(p.phi-h.phi),theta:h.theta+m*(p.theta-h.theta),radius:1}),(h,p)=>yi.dist({x:h.phi,y:h.theta},{x:p.phi,y:p.theta})<1e-4),Le(this.resetMotion$)).subscribe(h=>{this._spherical.theta=h.theta,this._spherical.phi=h.phi})};this.resetMotion$.pipe(Le(this._onRemoved$)).subscribe(()=>{c.next(this._spherical),d()}),d()}else l.subscribe(c=>{this._spherical.theta-=c.x*this.options.cameraRotationSensitivity/1e3,this._spherical.phi+=c.y*this.options.cameraRotationSensitivity/1e3,this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this._spherical.phi))});this.camera.tick$.pipe(Le(this._onRemoved$),hn(()=>this.active)).subscribe(([c,d])=>{this.camera.camera.fov+=o,this.camera.position=Te.add(this.camera.position,Te.rot(Te.scalarMult(s,this.options.cameraLinearSpeed*d/1e3),this.camera.rotation)),this.camera.rotation=$i.lookAt(this.camera.position,Te.add(this.camera.position,Te.fromSpherical(this._spherical)))}),this.mouseInput.start(),this.directionsInput.start()})}onRemoved(){const t=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return s4(this,void 0,void 0,function*(){yield t.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var a4=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};const Vse={mouseOptions:{},orbiting:{sensitivityX:1,sensitivityY:1},orbitingElasticity:0,zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class zse extends Kh{get active(){return super.active}set active(t){!super.active&&t&&this.reset(),super.active=t}get spherical(){return this._spherical}set spherical(t){this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,t.phi)),this._spherical.theta=t.theta,this._spherical.radius=t.radius,this.resetMotion$.next()}constructor(t,e={}){super(),this.camera=t,this.tickOrder=lc.INPUT_CONTROLLERS,this._spherical={phi:0,radius:10,theta:0},this.target=Te.O,this.resetMotion$=new Re,this.options=Object.assign(Object.assign({},Vse),e),this.mouseInput=new Xm(this.options.mouseOptions)}reset(){let t=Te.dist(this.target,this.camera.position);this.target=Te.add(this.camera.position,Te.rot({x:0,y:0,z:-t},this.camera.rotation)),this._spherical=Te.toSpherical(Te.sub(this.camera.position,this.target)),this.resetMotion$.next()}onSpawned(t){const e=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return a4(this,void 0,void 0,function*(){if(yield e.onSpawned.call(this,t),this._spherical=Te.toSpherical(Te.sub(this.camera.position,this.target)),this.options.orbiting){let r=this.mouseInput.delta$.pipe(Le(this._onRemoved$),hn(()=>this.active&&this.mouseInput.state==Us.DRAG));if(this.options.orbitingElasticity>0){const s=new $e(this._spherical);r.subscribe(a=>{const l=s.getValue();s.next({phi:Math.max(1e-6,Math.min(Math.PI-1e-6,l.phi-a.y*this.options.orbiting.sensitivityY/1e3)),theta:l.theta-a.x*this.options.orbiting.sensitivityX/1e3,radius:1})});const o=()=>{s.pipe(Le(this._onRemoved$),sk(this.tick$,this.options.orbitingElasticity,(a,l,c)=>({phi:a.phi+c*(l.phi-a.phi),theta:a.theta+c*(l.theta-a.theta),radius:1}),(a,l)=>yi.dist({x:a.phi,y:a.theta},{x:l.phi,y:l.theta})<1e-4),Le(this.resetMotion$)).subscribe(a=>{this._spherical.theta=a.theta,this._spherical.phi=a.phi})};this.resetMotion$.pipe(Le(this._onRemoved$)).subscribe(()=>{s.next(this._spherical),o()}),o()}else r.subscribe(s=>{this._spherical.theta-=s.x*this.options.orbiting.sensitivityX/1e3,this._spherical.phi-=s.y*this.options.orbiting.sensitivityY/1e3,this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this._spherical.phi))})}this.options.zooming&&this.mouseInput.wheel$.pipe(Le(this._onRemoved$)).subscribe(r=>{0!=r&&(this._spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const n=r=>{const s=Te.fromSpherical(this._spherical),o=Te.rotAround(s,{x:-Math.sin(this._spherical.theta),y:Math.cos(this._spherical.theta),z:0},Math.PI/2),a=Te.rotAround(s,Te.norm(o),Math.PI/2);this.target=Te.add(this.target,Te.add(Te.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),Te.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(Le(this._onRemoved$),hn(()=>this.mouseInput.state==Us.DRAG_RIGHT_BUTTON)).subscribe(r=>{n(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(Le(this._onRemoved$),hn(()=>this.mouseInput.state==Us.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this._spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),Xm.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(Le(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this._spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&n(r.centerPointDelta)}),this.camera.tick$.pipe(Le(this._onRemoved$),hn(()=>this.active),rt(()=>this._spherical)).subscribe(r=>{this.camera.position=Te.add(this.target,Te.fromSpherical(r)),this.camera.rotation=$i.lookAt(this.camera.position,this.target)}),yield this.mouseInput.start()})}onRemoved(){const t=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return a4(this,void 0,void 0,function*(){yield t.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class $se{randomColor(){return Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())}createPlane(t={}){return this.createPrimitive({shape:"PLANE"},t)}createBox(t,e={}){return this.createPrimitive({shape:"BOX",dimensions:t},e)}createCapsule(t,e,n={}){return this.createPrimitive({shape:"CAPSULE",radius:t,centersDistance:e},n)}createCylinder(t,e,n={}){return this.createPrimitive({shape:"CYLINDER",radius:t,height:e},n)}createCone(t,e,n={}){return this.createPrimitive({shape:"CONE",radius:t,height:e},n)}createSphere(t,e={}){return this.createPrimitive({shape:"SPHERE",radius:t},e)}}var dk=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})},bu=(()=>{return(i=bu||(bu={}))[i.Nothing=0]="Nothing",i[i.Files=1]="Files",i[i.Entities=2]="Entities",bu;var i})();const l4={cachingStrategy:bu.Nothing,position:Te.O,rotation:$i.O,loadProps:!0},c4=i=>({meta:i.meta,resources:i.resources.map(({object3D:t,body:e})=>({object3D:t&&t.clone(),body:e&&e.clone()}))});class Gse{constructor(t){this.world=t,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(t){return dk(this,arguments,void 0,function*(e,n=!1){if(n&&this.filesCache.has(e))return this.filesCache.get(e);const r=Promise.all([fetch(`${e}.glb`).then(o=>o.arrayBuffer()),fetch(`${e}.meta`).then(o=>o.text()).then(o=>JSON.parse(o))]);n&&this.filesCache.set(e,r);const s=yield r;return n&&this.filesCache.set(e,s),s})}loadGgGlbResources(t){return dk(this,arguments,void 0,function*(e,n=bu.Nothing){if(n==bu.Entities&&this.loadResultCache.has(e)){const c=this.loadResultCache.get(e),d=c instanceof Promise?yield c:c;return c4(d)}const[r,s]=yield this.loadGgGlbFiles(e,n==bu.Files);if(!r)throw new Error("GLB not found");const[o,a]=yield Promise.all([this.world.visualScene.loader.loadFromGgGlb(r,s),this.world.physicsWorld.loader.loadFromGgGlb(r,s)]),l={resources:[],meta:s};if(!o)return l;if(0==a.length)l.resources.push({object3D:o,body:null});else if(1==a.length)l.resources.push({object3D:o,body:a[0]});else{for(const c of a)l.resources.push({object3D:o.popChild(c.name),body:c});o.isEmpty()||l.resources.push({object3D:o,body:null})}return n==bu.Entities&&this.loadResultCache.set(e,c4(l)),l})}loadGgGlb(t){return dk(this,arguments,void 0,function*(e,n=l4){const r=Object.assign(Object.assign({},l4),n),{resources:s,meta:o}=yield this.loadGgGlbResources(e,r.cachingStrategy),a={entities:s.map(l=>new Fo({object3D:l.object3D,objectBody:l.body})),meta:o};return r.loadProps&&(a.props=yield Promise.all(o.dummies.filter(l=>l.is_prop||l.is_scene).map(l=>this.loadGgGlb(l.is_prop?(r.propsPath||e.substring(0,e.lastIndexOf("/")+1))+l.prop_id:l.scene_id,{loadProps:!!l.is_scene,position:Te.add(Te.rot(l.position,r.rotation),r.position),rotation:$i.combineRotations(l.rotation,r.rotation)})))),a.entities.forEach(l=>{l.position=Te.add(Te.rot(Te.clone(l.position),r.rotation),r.position),l.rotation=$i.mult($i.clone(l.rotation),r.rotation)}),a})}}class AC extends El{constructor(t,e){super(t,e),this.visualScene=t,this.physicsWorld=e,this.loader=new Gse(this)}addPrimitiveRigidBody(t,e=Te.O,n=$i.O,r={}){const s=new Fo({object3D:this.visualScene.factory.createPrimitive(t.shape,r),objectBody:this.physicsWorld.factory.createRigidBody(t)});return s.position=e,s.rotation=n,this.addEntity(s),s}addRenderer(t,e,n){const r=new Bse(this.visualScene.createRenderer(t,e,n));return this.addEntity(r),r}registerConsoleCommands(t){super.registerConsoleCommands(t),t.registerConsoleCommand(this,"gravity",(...e)=>function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){if(1==e.length&&(e=["0","0",""+-+e[0]]),e.length>0){if(isNaN(+e[0])||isNaN(+e[1])||isNaN(+e[2]))throw new Error("Wrong arguments");this.physicsWorld.gravity={x:+e[0],y:+e[1],z:+e[2]}}return JSON.stringify(this.physicsWorld.gravity)}),'args: [ ?float, ?float, ?float ]; Get or set 3D world gravity vector. 1 argument sets vector {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}}window.gg_version="0.0.56";const qse=0,d4=1,Xse=2,u4=1,h4=2,td=3,dc=0,Lo=1,us=2,nd=0,Zm=1,f4=2,p4=3,m4=4,Kse=5,Jh=100,Zse=101,Qse=102,Jse=103,eoe=104,toe=200,noe=201,ioe=202,roe=203,hk=204,fk=205,soe=206,ooe=207,aoe=208,loe=209,coe=210,doe=211,uoe=212,hoe=213,foe=214,poe=0,moe=1,goe=2,DC=3,_oe=4,voe=5,yoe=6,boe=7,TC=0,xoe=1,woe=2,xu=0,Moe=1,Coe=2,Soe=3,Eoe=4,Aoe=5,Doe=6,Toe=7,g4="attached",Al=301,ef=302,IC=303,RC=304,_b=306,Kr=1e3,Qi=1001,vb=1002,vr=1003,mk=1004,Qm=1005,cr=1006,yb=1007,Dl=1008,id=1009,_4=1010,v4=1011,bb=1012,gk=1013,wu=1014,ra=1015,Jm=1016,_k=1017,vk=1018,eg=1020,y4=35902,b4=1021,x4=1022,No=1023,w4=1024,M4=1025,tg=1026,ng=1027,yk=1028,kC=1029,C4=1030,bk=1031,xk=1033,PC=33776,OC=33777,FC=33778,LC=33779,wk=35840,Mk=35841,Ck=35842,Sk=35843,Ek=36196,Ak=37492,Dk=37496,Tk=37808,Ik=37809,Rk=37810,kk=37811,Pk=37812,Ok=37813,Fk=37814,Lk=37815,Nk=37816,Bk=37817,Uk=37818,Vk=37819,zk=37820,Hk=37821,NC=36492,$k=36494,Gk=36495,S4=36283,Wk=36284,jk=36285,Yk=36286,xb=2300,wb=2301,Ooe=0,A4=1,Kk=2,Loe=3201,tf=0,Noe=1,Mu="",hs="srgb",fs="srgb-linear",Zk="display-p3",UC="display-p3-linear",VC="linear",Fi="srgb",zC="rec709",HC="p3",sg=7680,Boe=512,Uoe=513,Voe=514,T4=515,zoe=516,Hoe=517,$oe=518,Goe=519,I4="300 es",rd=2e3;class og{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Vs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const nf=Math.PI/180,ag=180/Math.PI;function sa(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Vs[255&i]+Vs[i>>8&255]+Vs[i>>16&255]+Vs[i>>24&255]+"-"+Vs[255&t]+Vs[t>>8&255]+"-"+Vs[t>>16&15|64]+Vs[t>>24&255]+"-"+Vs[63&e|128]+Vs[e>>8&255]+"-"+Vs[e>>16&255]+Vs[e>>24&255]+Vs[255&n]+Vs[n>>8&255]+Vs[n>>16&255]+Vs[n>>24&255]).toLowerCase()}function Ji(i,t,e){return Math.max(t,Math.min(e,i))}function Qk(i,t){return(i%t+t)%t}function Mb(i,t,e){return(1-e)*i+e*t}function mo(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function yn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(4294967295*i);case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int32Array:return Math.round(2147483647*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const aae_radToDeg=function nae(i){return i*ag};class xe{constructor(t=0,e=0){xe.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ji(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wn{constructor(t,e,n,r,s,o,a,l,c){wn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c)}set(t,e,n,r,s,o,a,l,c){const d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],h=n[7],p=n[2],m=n[5],g=n[8],b=r[0],v=r[3],y=r[6],M=r[1],x=r[4],C=r[7],F=r[2],D=r[5],k=r[8];return s[0]=o*b+a*M+l*F,s[3]=o*v+a*x+l*D,s[6]=o*y+a*C+l*k,s[1]=c*b+d*M+h*F,s[4]=c*v+d*x+h*D,s[7]=c*y+d*C+h*k,s[2]=p*b+m*M+g*F,s[5]=p*v+m*x+g*D,s[8]=p*y+m*C+g*k,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return e*o*d-e*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=d*o-a*c,p=a*l-d*s,m=c*s-o*l,g=e*h+n*p+r*m;if(0===g)return this.set(0,0,0,0,0,0,0,0,0);const b=1/g;return t[0]=h*b,t[1]=(r*c-d*n)*b,t[2]=(a*n-r*o)*b,t[3]=p*b,t[4]=(d*e-r*l)*b,t[5]=(r*s-a*e)*b,t[6]=m*b,t[7]=(n*l-c*e)*b,t[8]=(o*e-n*s)*b,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(Jk.makeScale(t,e)),this}rotate(t){return this.premultiply(Jk.makeRotation(-t)),this}translate(t,e){return this.premultiply(Jk.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const Jk=new wn;function k4(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function Cb(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function cae(){const i=Cb("canvas");return i.style.display="block",i}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const P4={};function cg(i){i in P4||(P4[i]=!0,console.warn(i))}const O4=(new wn).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),F4=(new wn).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Sb={[fs]:{transfer:VC,primaries:zC,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[hs]:{transfer:Fi,primaries:zC,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[UC]:{transfer:VC,primaries:HC,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(F4),fromReference:i=>i.applyMatrix3(O4)},[Zk]:{transfer:Fi,primaries:HC,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(F4),fromReference:i=>i.applyMatrix3(O4).convertLinearToSRGB()}},uae=new Set([fs,UC]),ei={enabled:!0,_workingColorSpace:fs,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!uae.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,t,e){return!1!==this.enabled&&t!==e&&t&&e?(0,Sb[e].fromReference)((0,Sb[t].toReference)(i)):i},fromWorkingColorSpace:function(i,t){return this.convert(i,this._workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this._workingColorSpace)},getPrimaries:function(i){return Sb[i].primaries},getTransfer:function(i){return i===Mu?VC:Sb[i].transfer},getLuminanceCoefficients:function(i,t=this._workingColorSpace){return i.fromArray(Sb[t].luminanceCoefficients)}};function dg(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function eP(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let ug;class hae{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===ug&&(ug=Cb("canvas")),ug.width=t.width,ug.height=t.height;const n=ug.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=ug}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Cb("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*dg(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*dg(e[n]/255)):dg(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let fae=0;class hg{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:fae++}),this.uuid=sa(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(tP(r[o].isDataTexture?r[o].image:r[o]))}else s=tP(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function tP(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?hae.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pae=0,Bo=(()=>{class i extends og{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=Qi,s=Qi,o=cr,a=Dl,l=No,c=id,d=i.DEFAULT_ANISOTROPY,h=Mu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pae++}),this.uuid=sa(),this.name="",this.source=new hg(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new xe(0,0),this.repeat=new xe(1,1),this.center=new xe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kr:e.x=e.x-Math.floor(e.x);break;case Qi:e.x=e.x<0?0:1;break;case vb:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Kr:e.y=e.y-Math.floor(e.y);break;case Qi:e.y=e.y<0?0:1;break;case vb:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class vi{constructor(t=0,e=0,n=0,r=1){vi.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const l=t.elements,c=l[0],d=l[4],h=l[8],p=l[1],m=l[5],g=l[9],b=l[2],v=l[6],y=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-b)<.01&&Math.abs(g-v)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+b)<.1&&Math.abs(g+v)<.1&&Math.abs(c+m+y-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const x=(c+1)/2,C=(m+1)/2,F=(y+1)/2,D=(d+p)/4,k=(h+b)/4,B=(g+v)/4;return x>C&&x>F?x<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(x),r=D/n,s=k/n):C>F?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=D/r,s=B/r):F<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(F),n=k/s,r=B/s),this.set(n,r,s,e),this}let M=Math.sqrt((v-g)*(v-g)+(h-b)*(h-b)+(p-d)*(p-d));return Math.abs(M)<.001&&(M=1),this.x=(v-g)/M,this.y=(h-b)/M,this.z=(p-d)/M,this.w=Math.acos((c+m+y-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class mae extends og{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new vi(0,0,t,e),this.scissorTest=!1,this.viewport=new vi(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:cr,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Bo(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new hg(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Cu extends mae{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class nP extends Bo{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=vr,this.minFilter=vr,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class L4 extends Bo{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=vr,this.minFilter=vr,this.wrapR=Qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class go{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],h=n[r+3];const p=s[o+0],m=s[o+1],g=s[o+2],b=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=d,void(t[e+3]=h);if(1===a)return t[e+0]=p,t[e+1]=m,t[e+2]=g,void(t[e+3]=b);if(h!==b||l!==p||c!==m||d!==g){let v=1-a;const y=l*p+c*m+d*g+h*b,M=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const F=Math.sqrt(x),D=Math.atan2(F,y*M);v=Math.sin(v*D)/F,a=Math.sin(a*D)/F}const C=a*M;if(l=l*v+p*C,c=c*v+m*C,d=d*v+g*C,h=h*v+b*C,v===1-a){const F=1/Math.sqrt(l*l+c*c+d*d+h*h);l*=F,c*=F,d*=F,h*=F}}t[e]=l,t[e+1]=c,t[e+2]=d,t[e+3]=h}static multiplyQuaternionsFlat(t,e,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],h=s[o],p=s[o+1],m=s[o+2],g=s[o+3];return t[e]=a*g+d*h+l*m-c*p,t[e+1]=l*g+d*p+c*h-a*m,t[e+2]=c*g+d*m+a*p-l*h,t[e+3]=d*g-a*h-l*p-c*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),h=a(s/2),p=l(n/2),m=l(r/2),g=l(s/2);switch(o){case"XYZ":this._x=p*d*h+c*m*g,this._y=c*m*h-p*d*g,this._z=c*d*g+p*m*h,this._w=c*d*h-p*m*g;break;case"YXZ":this._x=p*d*h+c*m*g,this._y=c*m*h-p*d*g,this._z=c*d*g-p*m*h,this._w=c*d*h+p*m*g;break;case"ZXY":this._x=p*d*h-c*m*g,this._y=c*m*h+p*d*g,this._z=c*d*g+p*m*h,this._w=c*d*h-p*m*g;break;case"ZYX":this._x=p*d*h-c*m*g,this._y=c*m*h+p*d*g,this._z=c*d*g-p*m*h,this._w=c*d*h+p*m*g;break;case"YZX":this._x=p*d*h+c*m*g,this._y=c*m*h+p*d*g,this._z=c*d*g-p*m*h,this._w=c*d*h-p*m*g;break;case"XZY":this._x=p*d*h-c*m*g,this._y=c*m*h-p*d*g,this._z=c*d*g+p*m*h,this._w=c*d*h+p*m*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],d=e[6],h=e[10],p=n+a+h;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(n>a&&n>h){const m=2*Math.sqrt(1+n-a-h);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>h){const m=2*Math.sqrt(1+a-n-h);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+h-n-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ji(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,d=e._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-e;return this._w=m*o+e*this._w,this._x=m*n+e*this._x,this._y=m*r+e*this._y,this._z=m*s+e*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),h=Math.sin((1-e)*d)/c,p=Math.sin(e*d)/c;return this._w=o*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(t=0,e=0,n=0){O.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(N4.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(N4.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=2*(o*r-a*n),d=2*(a*e-s*r),h=2*(s*n-o*e);return this.x=e+l*c+o*h-a*d,this.y=n+l*d+a*c-s*h,this.z=r+l*h+s*d-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return iP.copy(this).projectOnVector(t),this.sub(iP)}reflect(t){return this.sub(iP.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ji(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const iP=new O,N4=new go;class zs{constructor(t=new O(1/0,1/0,1/0),e=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Tl.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Tl.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Tl.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const s=n.getAttribute("position");if(!0===e&&void 0!==s&&!0!==t.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===t.isMesh?t.getVertexPosition(o,Tl):Tl.fromBufferAttribute(s,o),Tl.applyMatrix4(t.matrixWorld),this.expandByPoint(Tl);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),WC.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),WC.copy(n.boundingBox)),WC.applyMatrix4(t.matrixWorld),this.union(WC)}const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Tl),Tl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Eb),jC.subVectors(this.max,Eb),fg.subVectors(t.a,Eb),pg.subVectors(t.b,Eb),mg.subVectors(t.c,Eb),Su.subVectors(pg,fg),Eu.subVectors(mg,pg),rf.subVectors(fg,mg);let e=[0,-Su.z,Su.y,0,-Eu.z,Eu.y,0,-rf.z,rf.y,Su.z,0,-Su.x,Eu.z,0,-Eu.x,rf.z,0,-rf.x,-Su.y,Su.x,0,-Eu.y,Eu.x,0,-rf.y,rf.x,0];return!(!rP(e,fg,pg,mg,jC)||(e=[1,0,0,0,1,0,0,0,1],!rP(e,fg,pg,mg,jC)))&&(YC.crossVectors(Su,Eu),e=[YC.x,YC.y,YC.z],rP(e,fg,pg,mg,jC))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Tl).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Tl).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(sd[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),sd[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),sd[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),sd[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),sd[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),sd[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),sd[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),sd[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(sd)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const sd=[new O,new O,new O,new O,new O,new O,new O,new O],Tl=new O,WC=new zs,fg=new O,pg=new O,mg=new O,Su=new O,Eu=new O,rf=new O,Eb=new O,jC=new O,YC=new O,sf=new O;function rP(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){sf.fromArray(i,s);const a=r.x*Math.abs(sf.x)+r.y*Math.abs(sf.y)+r.z*Math.abs(sf.z),l=t.dot(sf),c=e.dot(sf),d=n.dot(sf);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const gae=new zs,Ab=new O,sP=new O;class Hs{constructor(t=new O,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):gae.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Ab.subVectors(t,this.center);const e=Ab.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(Ab,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(sP.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Ab.copy(t.center).add(sP)),this.expandByPoint(Ab.copy(t.center).sub(sP))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const od=new O,oP=new O,qC=new O,Au=new O,aP=new O,XC=new O,lP=new O;class Db{constructor(t=new O,e=new O(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,od)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=od.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(od.copy(this.origin).addScaledVector(this.direction,e),od.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){oP.copy(t).add(e).multiplyScalar(.5),qC.copy(e).sub(t).normalize(),Au.copy(this.origin).sub(oP);const s=.5*t.distanceTo(e),o=-this.direction.dot(qC),a=Au.dot(this.direction),l=-Au.dot(qC),c=Au.lengthSq(),d=Math.abs(1-o*o);let h,p,m,g;if(d>0)if(h=o*l-a,p=o*a-l,g=s*d,h>=0)if(p>=-g)if(p<=g){const b=1/d;h*=b,p*=b,m=h*(h+o*p+2*a)+p*(o*h+p+2*l)+c}else p=s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p=-s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;else p<=-g?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c):p<=g?(h=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+p*(p+2*l)+c);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),m=-h*h+p*(p+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(oP).addScaledVector(qC,p),m}intersectSphere(t,e){od.subVectors(t.center,this.origin);const n=od.dot(this.direction),r=od.dot(od)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return c>=0?(n=(t.min.x-p.x)*c,r=(t.max.x-p.x)*c):(n=(t.max.x-p.x)*c,r=(t.min.x-p.x)*c),d>=0?(s=(t.min.y-p.y)*d,o=(t.max.y-p.y)*d):(s=(t.max.y-p.y)*d,o=(t.min.y-p.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(t.min.z-p.z)*h,l=(t.max.z-p.z)*h):(a=(t.max.z-p.z)*h,l=(t.min.z-p.z)*h),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,od)}intersectTriangle(t,e,n,r,s){aP.subVectors(e,t),XC.subVectors(n,t),lP.crossVectors(aP,XC);let a,o=this.direction.dot(lP);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Au.subVectors(this.origin,t);const l=a*this.direction.dot(XC.crossVectors(Au,XC));if(l<0)return null;const c=a*this.direction.dot(aP.cross(Au));if(c<0||l+c>o)return null;const d=-a*Au.dot(lP);return d<0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Ut{constructor(t,e,n,r,s,o,a,l,c,d,h,p,m,g,b,v){Ut.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c,d,h,p,m,g,b,v)}set(t,e,n,r,s,o,a,l,c,d,h,p,m,g,b,v){const y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=c,y[6]=d,y[10]=h,y[14]=p,y[3]=m,y[7]=g,y[11]=b,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Ut).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/gg.setFromMatrixColumn(t,0).length(),s=1/gg.setFromMatrixColumn(t,1).length(),o=1/gg.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),h=Math.sin(s);if("XYZ"===t.order){const p=o*d,m=o*h,g=a*d,b=a*h;e[0]=l*d,e[4]=-l*h,e[8]=c,e[1]=m+g*c,e[5]=p-b*c,e[9]=-a*l,e[2]=b-p*c,e[6]=g+m*c,e[10]=o*l}else if("YXZ"===t.order){const p=l*d,m=l*h,g=c*d,b=c*h;e[0]=p+b*a,e[4]=g*a-m,e[8]=o*c,e[1]=o*h,e[5]=o*d,e[9]=-a,e[2]=m*a-g,e[6]=b+p*a,e[10]=o*l}else if("ZXY"===t.order){const p=l*d,m=l*h,g=c*d,b=c*h;e[0]=p-b*a,e[4]=-o*h,e[8]=g+m*a,e[1]=m+g*a,e[5]=o*d,e[9]=b-p*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const p=o*d,m=o*h,g=a*d,b=a*h;e[0]=l*d,e[4]=g*c-m,e[8]=p*c+b,e[1]=l*h,e[5]=b*c+p,e[9]=m*c-g,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const p=o*l,m=o*c,g=a*l,b=a*c;e[0]=l*d,e[4]=b-p*h,e[8]=g*h+m,e[1]=h,e[5]=o*d,e[9]=-a*d,e[2]=-c*d,e[6]=m*h+g,e[10]=p-b*h}else if("XZY"===t.order){const p=o*l,m=o*c,g=a*l,b=a*c;e[0]=l*d,e[4]=-h,e[8]=c*d,e[1]=p*h+b,e[5]=o*d,e[9]=m*h-g,e[2]=g*h-m,e[6]=a*d,e[10]=b*h+p}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(_ae,t,vae)}lookAt(t,e,n){const r=this.elements;return oa.subVectors(t,e),0===oa.lengthSq()&&(oa.z=1),oa.normalize(),Du.crossVectors(n,oa),0===Du.lengthSq()&&(1===Math.abs(n.z)?oa.x+=1e-4:oa.z+=1e-4,oa.normalize(),Du.crossVectors(n,oa)),Du.normalize(),KC.crossVectors(oa,Du),r[0]=Du.x,r[4]=KC.x,r[8]=oa.x,r[1]=Du.y,r[5]=KC.y,r[9]=oa.y,r[2]=Du.z,r[6]=KC.z,r[10]=oa.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],h=n[5],p=n[9],m=n[13],g=n[2],b=n[6],v=n[10],y=n[14],M=n[3],x=n[7],C=n[11],F=n[15],D=r[0],k=r[4],B=r[8],T=r[12],A=r[1],j=r[5],ie=r[9],ne=r[13],se=r[2],ge=r[6],q=r[10],re=r[14],J=r[3],we=r[7],Ve=r[11],Ke=r[15];return s[0]=o*D+a*A+l*se+c*J,s[4]=o*k+a*j+l*ge+c*we,s[8]=o*B+a*ie+l*q+c*Ve,s[12]=o*T+a*ne+l*re+c*Ke,s[1]=d*D+h*A+p*se+m*J,s[5]=d*k+h*j+p*ge+m*we,s[9]=d*B+h*ie+p*q+m*Ve,s[13]=d*T+h*ne+p*re+m*Ke,s[2]=g*D+b*A+v*se+y*J,s[6]=g*k+b*j+v*ge+y*we,s[10]=g*B+b*ie+v*q+y*Ve,s[14]=g*T+b*ne+v*re+y*Ke,s[3]=M*D+x*A+C*se+F*J,s[7]=M*k+x*j+C*ge+F*we,s[11]=M*B+x*ie+C*q+F*Ve,s[15]=M*T+x*ne+C*re+F*Ke,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],d=t[2],h=t[6],p=t[10],m=t[14];return t[3]*(+s*l*h-r*c*h-s*a*p+n*c*p+r*a*m-n*l*m)+t[7]*(+e*l*m-e*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+t[11]*(+e*c*h-e*a*m-s*o*h+n*o*m+s*a*d-n*c*d)+t[15]*(-r*a*d-e*l*h+e*a*p+r*o*h-n*o*p+n*l*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],h=t[9],p=t[10],m=t[11],g=t[12],b=t[13],v=t[14],y=t[15],M=h*v*c-b*p*c+b*l*m-a*v*m-h*l*y+a*p*y,x=g*p*c-d*v*c-g*l*m+o*v*m+d*l*y-o*p*y,C=d*b*c-g*h*c+g*a*m-o*b*m-d*a*y+o*h*y,F=g*h*l-d*b*l-g*a*p+o*b*p+d*a*v-o*h*v,D=e*M+n*x+r*C+s*F;if(0===D)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const k=1/D;return t[0]=M*k,t[1]=(b*p*s-h*v*s-b*r*m+n*v*m+h*r*y-n*p*y)*k,t[2]=(a*v*s-b*l*s+b*r*c-n*v*c-a*r*y+n*l*y)*k,t[3]=(h*l*s-a*p*s-h*r*c+n*p*c+a*r*m-n*l*m)*k,t[4]=x*k,t[5]=(d*v*s-g*p*s+g*r*m-e*v*m-d*r*y+e*p*y)*k,t[6]=(g*l*s-o*v*s-g*r*c+e*v*c+o*r*y-e*l*y)*k,t[7]=(o*p*s-d*l*s+d*r*c-e*p*c-o*r*m+e*l*m)*k,t[8]=C*k,t[9]=(g*h*s-d*b*s-g*n*m+e*b*m+d*n*y-e*h*y)*k,t[10]=(o*b*s-g*a*s+g*n*c-e*b*c-o*n*y+e*a*y)*k,t[11]=(d*a*s-o*h*s-d*n*c+e*h*c+o*n*m-e*a*m)*k,t[12]=F*k,t[13]=(d*b*r-g*h*r+g*n*p-e*b*p-d*n*v+e*h*v)*k,t[14]=(g*a*r-o*b*r-g*n*l+e*b*l+o*n*v-e*a*v)*k,t[15]=(o*h*r-d*a*r+d*n*l-e*h*l-o*n*p+e*a*p)*k,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,a=t.y,l=t.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,d=o+o,h=a+a,p=s*c,m=s*d,g=s*h,b=o*d,v=o*h,y=a*h,M=l*c,x=l*d,C=l*h,F=n.x,D=n.y,k=n.z;return r[0]=(1-(b+y))*F,r[1]=(m+C)*F,r[2]=(g-x)*F,r[3]=0,r[4]=(m-C)*D,r[5]=(1-(p+y))*D,r[6]=(v+M)*D,r[7]=0,r[8]=(g+x)*k,r[9]=(v-M)*k,r[10]=(1-(p+b))*k,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=gg.set(r[0],r[1],r[2]).length();const o=gg.set(r[4],r[5],r[6]).length(),a=gg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Il.copy(this);const c=1/s,d=1/o,h=1/a;return Il.elements[0]*=c,Il.elements[1]*=c,Il.elements[2]*=c,Il.elements[4]*=d,Il.elements[5]*=d,Il.elements[6]*=d,Il.elements[8]*=h,Il.elements[9]*=h,Il.elements[10]*=h,e.setFromRotationMatrix(Il),n.x=s,n.y=o,n.z=a,this}makePerspective(t,e,n,r,s,o,a=rd){const l=this.elements,c=2*s/(e-t),d=2*s/(n-r),h=(e+t)/(e-t),p=(n+r)/(n-r);let m,g;if(a===rd)m=-(o+s)/(o-s),g=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);m=-o/(o-s),g=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=g,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o,a=rd){const l=this.elements,c=1/(e-t),d=1/(n-r),h=1/(o-s),p=(e+t)*c,m=(n+r)*d;let g,b;if(a===rd)g=(o+s)*h,b=-2*h;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);g=s*h,b=-1*h}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=b,l[14]=-g,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const gg=new O,Il=new Ut,_ae=new O(0,0,0),vae=new O(1,1,1),Du=new O,KC=new O,oa=new O,B4=new Ut,U4=new go;let ad=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],h=s[9],p=s[2],m=s[6],g=s[10];switch(n){case"XYZ":this._y=Math.asin(Ji(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,g),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Ji(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ji(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Ji(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Ji(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-Ji(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-h,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return B4.makeRotationFromQuaternion(e),this.setFromRotationMatrix(B4,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return U4.setFromEuler(this),this.setFromQuaternion(U4,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class cP{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let yae=0;const V4=new O,_g=new go,ld=new Ut,ZC=new O,Tb=new O,bae=new O,xae=new go,z4=new O(1,0,0),H4=new O(0,1,0),$4=new O(0,0,1),G4={type:"added"},wae={type:"removed"},vg={type:"childadded",child:null},dP={type:"childremoved",child:null};let Fr=(()=>{class i extends og{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:yae++}),this.uuid=sa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const e=new O,n=new ad,r=new go,s=new O(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Ut},normalMatrix:{value:new wn}}),this.matrix=new Ut,this.matrixWorld=new Ut,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new cP,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return _g.setFromAxisAngle(e,n),this.quaternion.multiply(_g),this}rotateOnWorldAxis(e,n){return _g.setFromAxisAngle(e,n),this.quaternion.premultiply(_g),this}rotateX(e){return this.rotateOnAxis(z4,e)}rotateY(e){return this.rotateOnAxis(H4,e)}rotateZ(e){return this.rotateOnAxis($4,e)}translateOnAxis(e,n){return V4.copy(e).applyQuaternion(this.quaternion),this.position.add(V4.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(z4,e)}translateY(e){return this.translateOnAxis(H4,e)}translateZ(e){return this.translateOnAxis($4,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ld.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?ZC.copy(e):ZC.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Tb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ld.lookAt(Tb,ZC,this.up):ld.lookAt(ZC,Tb,this.up),this.quaternion.setFromRotationMatrix(ld),s&&(ld.extractRotation(s.matrixWorld),_g.setFromRotationMatrix(ld),this.quaternion.premultiply(_g.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(G4),vg.child=e,this.dispatchEvent(vg),vg.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(wae),dP.child=e,this.dispatchEvent(dP),dP.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),ld.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ld.multiply(e.parent.matrixWorld)),e.applyMatrix4(ld),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(G4),vg.child=e,this.dispatchEvent(vg),vg.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(e,n);if(void 0!==a)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tb,e,bae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Tb,xae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,h=c.length;d<h;d++)o(e.shapes,c[d]);else o(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(e.materials,this.material[c]));s.material=l}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(e.animations,this.animations[l]))}if(n){const l=a(e.geometries),c=a(e.materials),d=a(e.textures),h=a(e.images),p=a(e.shapes),m=a(e.skeletons),g=a(e.animations),b=a(e.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),h.length>0&&(r.images=h),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),g.length>0&&(r.animations=g),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(l){const c=[];for(const d in l){const h=l[d];delete h.metadata,c.push(h)}return c}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DEFAULT_UP=new O(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const Rl=new O,cd=new O,uP=new O,dd=new O,yg=new O,bg=new O,W4=new O,hP=new O,fP=new O,pP=new O;class Ua{constructor(t=new O,e=new O,n=new O){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Rl.subVectors(t,e),r.cross(Rl);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){Rl.subVectors(r,e),cd.subVectors(n,e),uP.subVectors(t,e);const o=Rl.dot(Rl),a=Rl.dot(cd),l=Rl.dot(uP),c=cd.dot(cd),d=cd.dot(uP),h=o*c-a*a;if(0===h)return s.set(0,0,0),null;const p=1/h,m=(c*l-a*d)*p,g=(o*d-a*l)*p;return s.set(1-m-g,g,m)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,dd)&&dd.x>=0&&dd.y>=0&&dd.x+dd.y<=1}static getInterpolation(t,e,n,r,s,o,a,l){return null===this.getBarycoord(t,e,n,r,dd)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,dd.x),l.addScaledVector(o,dd.y),l.addScaledVector(a,dd.z),l)}static isFrontFacing(t,e,n,r){return Rl.subVectors(n,e),cd.subVectors(t,e),Rl.cross(cd).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Rl.subVectors(this.c,this.b),cd.subVectors(this.a,this.b),.5*Rl.cross(cd).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Ua.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Ua.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,s){return Ua.getInterpolation(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return Ua.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Ua.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,a;yg.subVectors(r,n),bg.subVectors(s,n),hP.subVectors(t,n);const l=yg.dot(hP),c=bg.dot(hP);if(l<=0&&c<=0)return e.copy(n);fP.subVectors(t,r);const d=yg.dot(fP),h=bg.dot(fP);if(d>=0&&h<=d)return e.copy(r);const p=l*h-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(yg,o);pP.subVectors(t,s);const m=yg.dot(pP),g=bg.dot(pP);if(g>=0&&m<=g)return e.copy(s);const b=m*c-l*g;if(b<=0&&c>=0&&g<=0)return a=c/(c-g),e.copy(n).addScaledVector(bg,a);const v=d*g-m*h;if(v<=0&&h-d>=0&&m-g>=0)return W4.subVectors(s,r),a=(h-d)/(h-d+(m-g)),e.copy(r).addScaledVector(W4,a);const y=1/(v+b+p);return o=b*y,a=p*y,e.copy(n).addScaledVector(yg,o).addScaledVector(bg,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const j4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Tu={h:0,s:0,l:0},QC={h:0,s:0,l:0};function mP(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}class Ze{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const r=t;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=hs){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,ei.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=ei.workingColorSpace){return this.r=t,this.g=e,this.b=n,ei.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=ei.workingColorSpace){if(t=Qk(t,1),e=Ji(e,0,1),n=Ji(n,0,1),0===e)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+e):n+e-n*e,o=2*n-s;this.r=mP(o,s,t+1/3),this.g=mP(o,s,t),this.b=mP(o,s,t-1/3)}return ei.toWorkingColorSpace(this,r),this}setStyle(t,e=hs){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(6===o)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=hs){const n=j4[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=dg(t.r),this.g=dg(t.g),this.b=dg(t.b),this}copyLinearToSRGB(t){return this.r=eP(t.r),this.g=eP(t.g),this.b=eP(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=hs){return ei.fromWorkingColorSpace($s.copy(this),t),65536*Math.round(Ji(255*$s.r,0,255))+256*Math.round(Ji(255*$s.g,0,255))+Math.round(Ji(255*$s.b,0,255))}getHexString(t=hs){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=ei.workingColorSpace){ei.fromWorkingColorSpace($s.copy(this),e);const n=$s.r,r=$s.g,s=$s.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=d<=.5?h/(o+a):h/(2-o-a),o){case n:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-n)/h+2;break;case s:l=(n-r)/h+4}l/=6}return t.h=l,t.s=c,t.l=d,t}getRGB(t,e=ei.workingColorSpace){return ei.fromWorkingColorSpace($s.copy(this),e),t.r=$s.r,t.g=$s.g,t.b=$s.b,t}getStyle(t=hs){ei.fromWorkingColorSpace($s.copy(this),t);const e=$s.r,n=$s.g,r=$s.b;return t!==hs?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(Tu),this.setHSL(Tu.h+t,Tu.s+e,Tu.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Tu),t.getHSL(QC);const n=Mb(Tu.h,QC.h,e),r=Mb(Tu.s,QC.s,e),s=Mb(Tu.l,QC.l,e);return this.setHSL(n,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*n+s[6]*r,this.g=s[1]*e+s[4]*n+s[7]*r,this.b=s[2]*e+s[5]*n+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $s=new Ze;Ze.NAMES=j4;let Mae=0;class Uo extends og{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Mae++}),this.uuid=sa(),this.name="",this.type="Material",this.blending=Zm,this.side=dc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=hk,this.blendDst=fk,this.blendEquation=Jh,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ze(0,0,0),this.blendAlpha=0,this.depthFunc=DC,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=sg,this.stencilZFail=sg,this.stencilZPass=sg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Zm&&(n.blending=this.blending),this.side!==dc&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==hk&&(n.blendSrc=this.blendSrc),this.blendDst!==fk&&(n.blendDst=this.blendDst),this.blendEquation!==Jh&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==DC&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==sg&&(n.stencilFail=this.stencilFail),this.stencilZFail!==sg&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==sg&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class er extends Uo{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ad,this.combine=TC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const yr=new O,JC=new xe;class Gi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ra,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return cg("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)JC.fromBufferAttribute(this,e),JC.applyMatrix3(t),this.setXY(e,JC.x,JC.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)yr.fromBufferAttribute(this,e),yr.applyMatrix3(t),this.setXYZ(e,yr.x,yr.y,yr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)yr.fromBufferAttribute(this,e),yr.applyMatrix4(t),this.setXYZ(e,yr.x,yr.y,yr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)yr.fromBufferAttribute(this,e),yr.applyNormalMatrix(t),this.setXYZ(e,yr.x,yr.y,yr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)yr.fromBufferAttribute(this,e),yr.transformDirection(t),this.setXYZ(e,yr.x,yr.y,yr.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=mo(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=yn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=mo(e,this.array)),e}setX(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=mo(e,this.array)),e}setY(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=mo(e,this.array)),e}setZ(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=mo(e,this.array)),e}setW(t,e){return this.normalized&&(e=yn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),r=yn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),r=yn(r,this.array),s=yn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class Y4 extends Gi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class q4 extends Gi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ht extends Gi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Sae=0;const Va=new Ut,gP=new Fr,xg=new O,aa=new zs,Rb=new zs,Zr=new O;class fn extends og{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sae++}),this.uuid=sa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(k4(t)?q4:Y4)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new wn).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return Va.makeRotationFromQuaternion(t),this.applyMatrix4(Va),this}rotateX(t){return Va.makeRotationX(t),this.applyMatrix4(Va),this}rotateY(t){return Va.makeRotationY(t),this.applyMatrix4(Va),this}rotateZ(t){return Va.makeRotationZ(t),this.applyMatrix4(Va),this}translate(t,e,n){return Va.makeTranslation(t,e,n),this.applyMatrix4(Va),this}scale(t,e,n){return Va.makeScale(t,e,n),this.applyMatrix4(Va),this}lookAt(t){return gP.lookAt(t),gP.updateMatrix(),this.applyMatrix4(gP.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xg).negate(),this.translate(xg.x,xg.y,xg.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ht(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new zs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)aa.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(Zr.addVectors(this.boundingBox.min,aa.min),this.boundingBox.expandByPoint(Zr),Zr.addVectors(this.boundingBox.max,aa.max),this.boundingBox.expandByPoint(Zr)):(this.boundingBox.expandByPoint(aa.min),this.boundingBox.expandByPoint(aa.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Hs);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new O,1/0);if(t){const n=this.boundingSphere.center;if(aa.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)Rb.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(Zr.addVectors(aa.min,Rb.min),aa.expandByPoint(Zr),Zr.addVectors(aa.max,Rb.max),aa.expandByPoint(Zr)):(aa.expandByPoint(Rb.min),aa.expandByPoint(Rb.max));aa.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)Zr.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Zr));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Zr.fromBufferAttribute(a,c),l&&(xg.fromBufferAttribute(t,c),Zr.add(xg)),r=Math.max(r,n.distanceToSquared(Zr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Gi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<n.count;B++)a[B]=new O,l[B]=new O;const c=new O,d=new O,h=new O,p=new xe,m=new xe,g=new xe,b=new O,v=new O;function y(B,T,A){c.fromBufferAttribute(n,B),d.fromBufferAttribute(n,T),h.fromBufferAttribute(n,A),p.fromBufferAttribute(s,B),m.fromBufferAttribute(s,T),g.fromBufferAttribute(s,A),d.sub(c),h.sub(c),m.sub(p),g.sub(p);const j=1/(m.x*g.y-g.x*m.y);isFinite(j)&&(b.copy(d).multiplyScalar(g.y).addScaledVector(h,-m.y).multiplyScalar(j),v.copy(h).multiplyScalar(m.x).addScaledVector(d,-g.x).multiplyScalar(j),a[B].add(b),a[T].add(b),a[A].add(b),l[B].add(v),l[T].add(v),l[A].add(v))}let M=this.groups;0===M.length&&(M=[{start:0,count:t.count}]);for(let B=0,T=M.length;B<T;++B){const A=M[B],j=A.start;for(let ne=j,se=j+A.count;ne<se;ne+=3)y(t.getX(ne+0),t.getX(ne+1),t.getX(ne+2))}const x=new O,C=new O,F=new O,D=new O;function k(B){F.fromBufferAttribute(r,B),D.copy(F);const T=a[B];x.copy(T),x.sub(F.multiplyScalar(F.dot(T))).normalize(),C.crossVectors(D,T);const j=C.dot(l[B])<0?-1:1;o.setXYZW(B,x.x,x.y,x.z,j)}for(let B=0,T=M.length;B<T;++B){const A=M[B],j=A.start;for(let ne=j,se=j+A.count;ne<se;ne+=3)k(t.getX(ne+0)),k(t.getX(ne+1)),k(t.getX(ne+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Gi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const r=new O,s=new O,o=new O,a=new O,l=new O,c=new O,d=new O,h=new O;if(t)for(let p=0,m=t.count;p<m;p+=3){const g=t.getX(p+0),b=t.getX(p+1),v=t.getX(p+2);r.fromBufferAttribute(e,g),s.fromBufferAttribute(e,b),o.fromBufferAttribute(e,v),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,b),c.fromBufferAttribute(n,v),a.add(d),l.add(d),c.add(d),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(v,c.x,c.y,c.z)}else for(let p=0,m=e.count;p<m;p+=3)r.fromBufferAttribute(e,p+0),s.fromBufferAttribute(e,p+1),o.fromBufferAttribute(e,p+2),d.subVectors(o,s),h.subVectors(r,s),d.cross(h),n.setXYZ(p+0,d.x,d.y,d.z),n.setXYZ(p+1,d.x,d.y,d.z),n.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Zr.fromBufferAttribute(t,e),Zr.normalize(),t.setXYZ(e,Zr.x,Zr.y,Zr.z)}toNonIndexed(){function t(a,l){const c=a.array,d=a.itemSize,h=a.normalized,p=new c.constructor(l.length*d);let m=0,g=0;for(let b=0,v=l.length;b<v;b++){m=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*d;for(let y=0;y<d;y++)p[g++]=c[m++]}return new Gi(p,d,h)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new fn,n=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],n);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,h=c.length;d<h;d++){const m=t(c[d],n);l.push(m)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let h=0,p=c.length;h<p;h++)d.push(c[h].toJSON(t.data));d.length>0&&(r[l]=d,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const d=[],h=s[c];for(let p=0,m=h.length;p<m;p++)d.push(h[p].clone(e));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,d=o.length;c<d;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const X4=new Ut,af=new Db,eS=new Hs,K4=new O,wg=new O,Mg=new O,Cg=new O,_P=new O,tS=new O,nS=new xe,iS=new xe,rS=new xe,Z4=new O,Q4=new O,J4=new O,sS=new O,oS=new O;class Tn extends Fr{constructor(t=new fn,e=new er){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(n.attributes.position,t);const a=this.morphTargetInfluences;if(s&&a){tS.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l];0!==d&&(_P.fromBufferAttribute(s[l],t),tS.addScaledVector(o?_P:_P.sub(e),d))}e.add(tS)}return e}raycast(t,e){const n=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),eS.copy(n.boundingSphere),eS.applyMatrix4(s),af.copy(t.ray).recast(t.near),(!1!==eS.containsPoint(af.origin)||!(null===af.intersectSphere(eS,K4)||af.origin.distanceToSquared(K4)>(t.far-t.near)**2))&&(X4.copy(s).invert(),af.copy(t.ray).applyMatrix4(X4),(null===n.boundingBox||!1!==af.intersectsBox(n.boundingBox))&&this._computeIntersections(t,e,af)))}_computeIntersections(t,e,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,h=s.attributes.normal,p=s.groups,m=s.drawRange;if(null!==a)if(Array.isArray(o))for(let g=0,b=p.length;g<b;g++){const v=p[g],y=o[v.materialIndex];for(let C=Math.max(v.start,m.start),F=Math.min(a.count,Math.min(v.start+v.count,m.start+m.count));C<F;C+=3)r=aS(this,y,t,n,c,d,h,a.getX(C),a.getX(C+1),a.getX(C+2)),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=v.materialIndex,e.push(r))}else for(let v=Math.max(0,m.start),y=Math.min(a.count,m.start+m.count);v<y;v+=3)r=aS(this,o,t,n,c,d,h,a.getX(v),a.getX(v+1),a.getX(v+2)),r&&(r.faceIndex=Math.floor(v/3),e.push(r));else if(void 0!==l)if(Array.isArray(o))for(let g=0,b=p.length;g<b;g++){const v=p[g],y=o[v.materialIndex];for(let C=Math.max(v.start,m.start),F=Math.min(l.count,Math.min(v.start+v.count,m.start+m.count));C<F;C+=3)r=aS(this,y,t,n,c,d,h,C,C+1,C+2),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=v.materialIndex,e.push(r))}else for(let v=Math.max(0,m.start),y=Math.min(l.count,m.start+m.count);v<y;v+=3)r=aS(this,o,t,n,c,d,h,v,v+1,v+2),r&&(r.faceIndex=Math.floor(v/3),e.push(r))}}function aS(i,t,e,n,r,s,o,a,l,c){i.getVertexPosition(a,wg),i.getVertexPosition(l,Mg),i.getVertexPosition(c,Cg);const d=function Eae(i,t,e,n,r,s,o,a){let l;if(l=t.side===Lo?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,t.side===dc,a),null===l)return null;oS.copy(a),oS.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(oS);return c<e.near||c>e.far?null:{distance:c,point:oS.clone(),object:i}}(i,t,e,n,wg,Mg,Cg,sS);if(d){r&&(nS.fromBufferAttribute(r,a),iS.fromBufferAttribute(r,l),rS.fromBufferAttribute(r,c),d.uv=Ua.getInterpolation(sS,wg,Mg,Cg,nS,iS,rS,new xe)),s&&(nS.fromBufferAttribute(s,a),iS.fromBufferAttribute(s,l),rS.fromBufferAttribute(s,c),d.uv1=Ua.getInterpolation(sS,wg,Mg,Cg,nS,iS,rS,new xe)),o&&(Z4.fromBufferAttribute(o,a),Q4.fromBufferAttribute(o,l),J4.fromBufferAttribute(o,c),d.normal=Ua.getInterpolation(sS,wg,Mg,Cg,Z4,Q4,J4,new O),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:l,c,normal:new O,materialIndex:0};Ua.getNormal(wg,Mg,Cg,h.normal),d.face=h}return d}class lf extends fn{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],h=[];let p=0,m=0;function g(b,v,y,M,x,C,F,D,k,B,T){const A=C/k,j=F/B,ie=C/2,ne=F/2,se=D/2,ge=k+1,q=B+1;let re=0,J=0;const we=new O;for(let Ve=0;Ve<q;Ve++){const Ke=Ve*j-ne;for(let Rt=0;Rt<ge;Rt++)we[b]=(Rt*A-ie)*M,we[v]=Ke*x,we[y]=se,c.push(we.x,we.y,we.z),we[b]=0,we[v]=0,we[y]=D>0?1:-1,d.push(we.x,we.y,we.z),h.push(Rt/k),h.push(1-Ve/B),re+=1}for(let Ve=0;Ve<B;Ve++)for(let Ke=0;Ke<k;Ke++){const nn=p+Ke+ge*(Ve+1),le=p+(Ke+1)+ge*(Ve+1),Ne=p+(Ke+1)+ge*Ve;l.push(p+Ke+ge*Ve,nn,Ne),l.push(nn,le,Ne),J+=6}a.addGroup(m,J,T),m+=J,p+=re}g("z","y","x",-1,-1,n,e,t,o,s,0),g("z","y","x",1,-1,n,e,-t,o,s,1),g("x","z","y",1,1,t,n,e,r,o,2),g("x","z","y",1,-1,t,n,-e,r,o,3),g("x","y","z",1,-1,t,e,n,r,s,4),g("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new ht(c,3)),this.setAttribute("normal",new ht(d,3)),this.setAttribute("uv",new ht(h,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new lf(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Sg(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=r.clone():t[e][n]=Array.isArray(r)?r.slice():r}}return t}function _o(i){const t={};for(let e=0;e<i.length;e++){const n=Sg(i[e]);for(const r in n)t[r]=n[r]}return t}function e5(i){const t=i.getRenderTarget();return null===t?i.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:ei.workingColorSpace}const t5={clone:Sg,merge:_o};class kl extends Uo{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Sg(t.uniforms),this.uniformsGroups=function Aae(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class vP extends Fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Ut,this.projectionMatrix=new Ut,this.projectionMatrixInverse=new Ut,this.coordinateSystem=rd}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Iu=new O,n5=new xe,r5=new xe;class br extends vP{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*ag*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*nf*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*ag*Math.atan(Math.tan(.5*nf*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Iu.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Iu.x,Iu.y).multiplyScalar(-t/Iu.z),Iu.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Iu.x,Iu.y).multiplyScalar(-t/Iu.z)}getViewSize(t,e){return this.getViewBounds(t,n5,r5),e.subVectors(r5,n5)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*nf*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Iae extends Fr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new br(-90,1,t,e);r.layers=this.layers,this.add(r);const s=new br(-90,1,t,e);s.layers=this.layers,this.add(s);const o=new br(-90,1,t,e);o.layers=this.layers,this.add(o);const a=new br(-90,1,t,e);a.layers=this.layers,this.add(a);const l=new br(-90,1,t,e);l.layers=this.layers,this.add(l);const c=new br(-90,1,t,e);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,s,o,a,l]=e;for(const c of e)this.remove(c);if(t===rd)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of e)this.add(c),c.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,h=t.getRenderTarget(),p=t.getActiveCubeFace(),m=t.getActiveMipmapLevel(),g=t.xr.enabled;t.xr.enabled=!1;const b=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,s),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,l),t.setRenderTarget(n,4,r),t.render(e,c),n.texture.generateMipmaps=b,t.setRenderTarget(n,5,r),t.render(e,d),t.setRenderTarget(h,p,m),t.xr.enabled=g,n.texture.needsPMREMUpdate=!0}}class lS extends Bo{constructor(t,e,n,r,s,o,a,l,c,d){super(t=void 0!==t?t:[],e=void 0!==e?e:Al,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Rae extends Cu{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new lS([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:cr}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new lf(5,5,5),s=new kl({name:"CubemapFromEquirect",uniforms:Sg(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:Lo,blending:nd});s.uniforms.tEquirect.value=e;const o=new Tn(r,s),a=e.minFilter;return e.minFilter===Dl&&(e.minFilter=cr),new Iae(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const yP=new O,kae=new O,Pae=new wn;class cf{constructor(t=new O(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=yP.subVectors(n,e).cross(kae.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(yP),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(n,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Pae.getNormalMatrix(t),r=this.coplanarPoint(yP).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const df=new Hs,cS=new O;class dS{constructor(t=new cf,e=new cf,n=new cf,r=new cf,s=new cf,o=new cf){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=rd){const n=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],h=r[6],p=r[7],m=r[8],g=r[9],b=r[10],v=r[11],y=r[12],M=r[13],x=r[14],C=r[15];if(n[0].setComponents(l-s,p-c,v-m,C-y).normalize(),n[1].setComponents(l+s,p+c,v+m,C+y).normalize(),n[2].setComponents(l+o,p+d,v+g,C+M).normalize(),n[3].setComponents(l-o,p-d,v-g,C-M).normalize(),n[4].setComponents(l-a,p-h,v-b,C-x).normalize(),e===rd)n[5].setComponents(l+a,p+h,v+b,C+x).normalize();else{if(2001!==e)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,h,b,x).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),df.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),df.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(df)}intersectsSprite(t){return df.center.set(0,0,0),df.radius=.7071067811865476,df.applyMatrix4(t.matrixWorld),this.intersectsSphere(df)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(cS.x=r.normal.x>0?t.max.x:t.min.x,cS.y=r.normal.y>0?t.max.y:t.min.y,cS.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(cS)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function s5(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Oae(i){const t=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(i.deleteBuffer(l.buffer),t.delete(a))},update:function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const d=t.get(a);return void((!d||d.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const c=t.get(a);if(void 0===c)t.set(a,function e(a,l){const c=a.array,d=a.usage,h=c.byteLength,p=i.createBuffer();let m;if(i.bindBuffer(l,p),i.bufferData(l,c,d),a.onUploadCallback(),c instanceof Float32Array)m=i.FLOAT;else if(c instanceof Uint16Array)m=a.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(c instanceof Int16Array)m=i.SHORT;else if(c instanceof Uint32Array)m=i.UNSIGNED_INT;else if(c instanceof Int32Array)m=i.INT;else if(c instanceof Int8Array)m=i.BYTE;else if(c instanceof Uint8Array)m=i.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);m=i.UNSIGNED_BYTE}return{buffer:p,type:m,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(a,l,c){const d=l.array,h=l._updateRange,p=l.updateRanges;if(i.bindBuffer(c,a),-1===h.count&&0===p.length&&i.bufferSubData(c,0,d),0!==p.length){for(let m=0,g=p.length;m<g;m++){const b=p[m];i.bufferSubData(c,b.start*d.BYTES_PER_ELEMENT,d,b.start,b.count)}l.clearUpdateRanges()}-1!==h.count&&(i.bufferSubData(c,h.offset*d.BYTES_PER_ELEMENT,d,h.offset,h.count),h.count=-1),l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}class uf extends fn{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,h=t/a,p=e/l,m=[],g=[],b=[],v=[];for(let y=0;y<d;y++){const M=y*p-o;for(let x=0;x<c;x++)g.push(x*h-s,-M,0),b.push(0,0,1),v.push(x/a),v.push(1-y/l)}for(let y=0;y<l;y++)for(let M=0;M<a;M++){const C=M+c*(y+1),F=M+1+c*(y+1),D=M+1+c*y;m.push(M+c*y,C,D),m.push(C,F,D)}this.setIndex(m),this.setAttribute("position",new ht(g,3)),this.setAttribute("normal",new ht(b,3)),this.setAttribute("uv",new ht(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new uf(t.width,t.height,t.widthSegments,t.heightSegments)}}const Mn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},nt={common:{diffuse:{value:new Ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wn},alphaMap:{value:null},alphaMapTransform:{value:new wn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wn}},envmap:{envMap:{value:null},envMapRotation:{value:new wn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wn},normalScale:{value:new xe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wn},alphaTest:{value:0},uvTransform:{value:new wn}},sprite:{diffuse:{value:new Ze(16777215)},opacity:{value:1},center:{value:new xe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wn},alphaMap:{value:null},alphaMapTransform:{value:new wn},alphaTest:{value:0}}},uc={basic:{uniforms:_o([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.fog]),vertexShader:Mn.meshbasic_vert,fragmentShader:Mn.meshbasic_frag},lambert:{uniforms:_o([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new Ze(0)}}]),vertexShader:Mn.meshlambert_vert,fragmentShader:Mn.meshlambert_frag},phong:{uniforms:_o([nt.common,nt.specularmap,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,nt.lights,{emissive:{value:new Ze(0)},specular:{value:new Ze(1118481)},shininess:{value:30}}]),vertexShader:Mn.meshphong_vert,fragmentShader:Mn.meshphong_frag},standard:{uniforms:_o([nt.common,nt.envmap,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.roughnessmap,nt.metalnessmap,nt.fog,nt.lights,{emissive:{value:new Ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag},toon:{uniforms:_o([nt.common,nt.aomap,nt.lightmap,nt.emissivemap,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.gradientmap,nt.fog,nt.lights,{emissive:{value:new Ze(0)}}]),vertexShader:Mn.meshtoon_vert,fragmentShader:Mn.meshtoon_frag},matcap:{uniforms:_o([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,nt.fog,{matcap:{value:null}}]),vertexShader:Mn.meshmatcap_vert,fragmentShader:Mn.meshmatcap_frag},points:{uniforms:_o([nt.points,nt.fog]),vertexShader:Mn.points_vert,fragmentShader:Mn.points_frag},dashed:{uniforms:_o([nt.common,nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Mn.linedashed_vert,fragmentShader:Mn.linedashed_frag},depth:{uniforms:_o([nt.common,nt.displacementmap]),vertexShader:Mn.depth_vert,fragmentShader:Mn.depth_frag},normal:{uniforms:_o([nt.common,nt.bumpmap,nt.normalmap,nt.displacementmap,{opacity:{value:1}}]),vertexShader:Mn.meshnormal_vert,fragmentShader:Mn.meshnormal_frag},sprite:{uniforms:_o([nt.sprite,nt.fog]),vertexShader:Mn.sprite_vert,fragmentShader:Mn.sprite_frag},background:{uniforms:{uvTransform:{value:new wn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Mn.background_vert,fragmentShader:Mn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new wn}},vertexShader:Mn.backgroundCube_vert,fragmentShader:Mn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Mn.cube_vert,fragmentShader:Mn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Mn.equirect_vert,fragmentShader:Mn.equirect_frag},distanceRGBA:{uniforms:_o([nt.common,nt.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Mn.distanceRGBA_vert,fragmentShader:Mn.distanceRGBA_frag},shadow:{uniforms:_o([nt.lights,nt.fog,{color:{value:new Ze(0)},opacity:{value:1}}]),vertexShader:Mn.shadow_vert,fragmentShader:Mn.shadow_frag}};uc.physical={uniforms:_o([uc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wn},clearcoatNormalScale:{value:new xe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wn},sheen:{value:0},sheenColor:{value:new Ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wn},transmissionSamplerSize:{value:new xe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wn},attenuationDistance:{value:0},attenuationColor:{value:new Ze(0)},specularColor:{value:new Ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wn},anisotropyVector:{value:new xe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wn}}]),vertexShader:Mn.meshphysical_vert,fragmentShader:Mn.meshphysical_frag};const uS={r:0,b:0,g:0},hf=new ad,Oce=new Ut;function Fce(i,t,e,n,r,s,o){const a=new Ze(0);let c,d,l=!0===s?0:1,h=null,p=0,m=null;function g(M){let x=!0===M.isScene?M.background:null;return x&&x.isTexture&&(x=(M.backgroundBlurriness>0?e:t).get(x)),x}function y(M,x){M.getRGB(uS,e5(i)),n.buffers.color.setClear(uS.r,uS.g,uS.b,x,o)}return{getClearColor:function(){return a},setClearColor:function(M,x=1){a.set(M),l=x,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(M){l=M,y(a,l)},render:function b(M){let x=!1;const C=g(M);null===C?y(a,l):C&&C.isColor&&(y(C,1),x=!0);const F=i.xr.getEnvironmentBlendMode();"additive"===F?n.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===F&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||x)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))},addToRenderList:function v(M,x){const C=g(x);C&&(C.isCubeTexture||C.mapping===_b)?(void 0===d&&(d=new Tn(new lf(1,1,1),new kl({name:"BackgroundCubeMaterial",uniforms:Sg(uc.backgroundCube.uniforms),vertexShader:uc.backgroundCube.vertexShader,fragmentShader:uc.backgroundCube.fragmentShader,side:Lo,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(F,D,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),hf.copy(x.backgroundRotation),hf.x*=-1,hf.y*=-1,hf.z*=-1,C.isCubeTexture&&!1===C.isRenderTargetTexture&&(hf.y*=-1,hf.z*=-1),d.material.uniforms.envMap.value=C,d.material.uniforms.flipEnvMap.value=C.isCubeTexture&&!1===C.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Oce.makeRotationFromEuler(hf)),d.material.toneMapped=ei.getTransfer(C.colorSpace)!==Fi,(h!==C||p!==C.version||m!==i.toneMapping)&&(d.material.needsUpdate=!0,h=C,p=C.version,m=i.toneMapping),d.layers.enableAll(),M.unshift(d,d.geometry,d.material,0,0,null)):C&&C.isTexture&&(void 0===c&&(c=new Tn(new uf(2,2),new kl({name:"BackgroundMaterial",uniforms:Sg(uc.background.uniforms),vertexShader:uc.background.vertexShader,fragmentShader:uc.background.fragmentShader,side:dc,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,c.material.toneMapped=ei.getTransfer(C.colorSpace)!==Fi,!0===C.matrixAutoUpdate&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(h!==C||p!==C.version||m!==i.toneMapping)&&(c.material.needsUpdate=!0,h=C,p=C.version,m=i.toneMapping),c.layers.enableAll(),M.unshift(c,c.geometry,c.material,0,0,null))}}}function Lce(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=p(null);let s=r,o=!1;function c(A){return i.bindVertexArray(A)}function d(A){return i.deleteVertexArray(A)}function p(A){const j=[],ie=[],ne=[];for(let se=0;se<e;se++)j[se]=0,ie[se]=0,ne[se]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:ie,attributeDivisors:ne,object:A,attributes:{},index:null}}function b(){const A=s.newAttributes;for(let j=0,ie=A.length;j<ie;j++)A[j]=0}function v(A){y(A,0)}function y(A,j){const ne=s.enabledAttributes,se=s.attributeDivisors;s.newAttributes[A]=1,0===ne[A]&&(i.enableVertexAttribArray(A),ne[A]=1),se[A]!==j&&(i.vertexAttribDivisor(A,j),se[A]=j)}function M(){const A=s.newAttributes,j=s.enabledAttributes;for(let ie=0,ne=j.length;ie<ne;ie++)j[ie]!==A[ie]&&(i.disableVertexAttribArray(ie),j[ie]=0)}function x(A,j,ie,ne,se,ge,q){!0===q?i.vertexAttribIPointer(A,j,ie,se,ge):i.vertexAttribPointer(A,j,ie,ne,se,ge)}function B(){T(),o=!0,s!==r&&(s=r,c(s.object))}function T(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(A,j,ie,ne,se){let ge=!1;const q=function h(A,j,ie){const ne=!0===ie.wireframe;let se=n[A.id];void 0===se&&(se={},n[A.id]=se);let ge=se[j.id];void 0===ge&&(ge={},se[j.id]=ge);let q=ge[ne];return void 0===q&&(q=p(function l(){return i.createVertexArray()}()),ge[ne]=q),q}(ne,ie,j);s!==q&&(s=q,c(s.object)),ge=function m(A,j,ie,ne){const se=s.attributes,ge=j.attributes;let q=0;const re=ie.getAttributes();for(const J in re)if(re[J].location>=0){const Ve=se[J];let Ke=ge[J];if(void 0===Ke&&("instanceMatrix"===J&&A.instanceMatrix&&(Ke=A.instanceMatrix),"instanceColor"===J&&A.instanceColor&&(Ke=A.instanceColor)),void 0===Ve||Ve.attribute!==Ke||Ke&&Ve.data!==Ke.data)return!0;q++}return s.attributesNum!==q||s.index!==ne}(A,ne,ie,se),ge&&function g(A,j,ie,ne){const se={},ge=j.attributes;let q=0;const re=ie.getAttributes();for(const J in re)if(re[J].location>=0){let Ve=ge[J];void 0===Ve&&("instanceMatrix"===J&&A.instanceMatrix&&(Ve=A.instanceMatrix),"instanceColor"===J&&A.instanceColor&&(Ve=A.instanceColor));const Ke={};Ke.attribute=Ve,Ve&&Ve.data&&(Ke.data=Ve.data),se[J]=Ke,q++}s.attributes=se,s.attributesNum=q,s.index=ne}(A,ne,ie,se),null!==se&&t.update(se,i.ELEMENT_ARRAY_BUFFER),(ge||o)&&(o=!1,function C(A,j,ie,ne){b();const se=ne.attributes,ge=ie.getAttributes(),q=j.defaultAttributeValues;for(const re in ge){const J=ge[re];if(J.location>=0){let we=se[re];if(void 0===we&&("instanceMatrix"===re&&A.instanceMatrix&&(we=A.instanceMatrix),"instanceColor"===re&&A.instanceColor&&(we=A.instanceColor)),void 0!==we){const Ve=we.normalized,Ke=we.itemSize,Rt=t.get(we);if(void 0===Rt)continue;const nn=Rt.buffer,le=Rt.type,Ne=Rt.bytesPerElement,tt=le===i.INT||le===i.UNSIGNED_INT||we.gpuType===gk;if(we.isInterleavedBufferAttribute){const Be=we.data,wt=Be.stride,Tt=we.offset;if(Be.isInstancedInterleavedBuffer){for(let Dt=0;Dt<J.locationSize;Dt++)y(J.location+Dt,Be.meshPerAttribute);!0!==A.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=Be.meshPerAttribute*Be.count)}else for(let Dt=0;Dt<J.locationSize;Dt++)v(J.location+Dt);i.bindBuffer(i.ARRAY_BUFFER,nn);for(let Dt=0;Dt<J.locationSize;Dt++)x(J.location+Dt,Ke/J.locationSize,le,Ve,wt*Ne,(Tt+Ke/J.locationSize*Dt)*Ne,tt)}else{if(we.isInstancedBufferAttribute){for(let Be=0;Be<J.locationSize;Be++)y(J.location+Be,we.meshPerAttribute);!0!==A.isInstancedMesh&&void 0===ne._maxInstanceCount&&(ne._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let Be=0;Be<J.locationSize;Be++)v(J.location+Be);i.bindBuffer(i.ARRAY_BUFFER,nn);for(let Be=0;Be<J.locationSize;Be++)x(J.location+Be,Ke/J.locationSize,le,Ve,Ke*Ne,Ke/J.locationSize*Be*Ne,tt)}}else if(void 0!==q){const Ve=q[re];if(void 0!==Ve)switch(Ve.length){case 2:i.vertexAttrib2fv(J.location,Ve);break;case 3:i.vertexAttrib3fv(J.location,Ve);break;case 4:i.vertexAttrib4fv(J.location,Ve);break;default:i.vertexAttrib1fv(J.location,Ve)}}}}M()}(A,j,ie,ne),null!==se&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(se).buffer))},reset:B,resetDefaultState:T,dispose:function F(){B();for(const A in n){const j=n[A];for(const ie in j){const ne=j[ie];for(const se in ne)d(ne[se].object),delete ne[se];delete j[ie]}delete n[A]}},releaseStatesOfGeometry:function D(A){if(void 0===n[A.id])return;const j=n[A.id];for(const ie in j){const ne=j[ie];for(const se in ne)d(ne[se].object),delete ne[se];delete j[ie]}delete n[A.id]},releaseStatesOfProgram:function k(A){for(const j in n){const ie=n[j];if(void 0===ie[A.id])continue;const ne=ie[A.id];for(const se in ne)d(ne[se].object),delete ne[se];delete ie[A.id]}},initAttributes:b,enableAttribute:v,disableUnusedAttributes:M}}function Nce(i,t,e){let n;function o(c,d,h){0!==h&&(i.drawArraysInstanced(n,c,d,h),e.update(d,n,h))}this.setMode=function r(c){n=c},this.render=function s(c,d){i.drawArrays(n,c,d),e.update(d,n,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,d,h){if(0===h)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,d,0,h);let m=0;for(let g=0;g<h;g++)m+=d[g];e.update(m,n,1)},this.renderMultiDrawInstances=function l(c,d,h,p){if(0===h)return;const m=t.get("WEBGL_multi_draw");if(null===m)for(let g=0;g<c.length;g++)o(c[g],d[g],p[g]);else{m.multiDrawArraysInstancedWEBGL(n,c,0,d,0,p,0,h);let g=0;for(let b=0;b<h;b++)g+=d[b];for(let b=0;b<p.length;b++)e.update(g,n,p[b])}}}function Bce(i,t,e,n){let r;function l(D){if("highp"===D){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return"mediump"===D&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==e.precision?e.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const h=!0===e.logarithmicDepthBuffer,p=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),m=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const D=t.get("EXT_texture_filter_anisotropic");r=i.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(D){return!(D!==No&&n.convert(D)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(D){const k=D===Jm&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(D!==id&&n.convert(D)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&D!==ra&&!k)},precision:c,logarithmicDepthBuffer:h,maxTextures:p,maxVertexTextures:m,maxTextureSize:i.getParameter(i.MAX_TEXTURE_SIZE),maxCubemapSize:i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:i.getParameter(i.MAX_VERTEX_ATTRIBS),maxVertexUniforms:i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:i.getParameter(i.MAX_VARYING_VECTORS),maxFragmentUniforms:i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:m>0,maxSamples:i.getParameter(i.MAX_SAMPLES)}}function Uce(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new cf,a=new wn,l={value:null,needsUpdate:!1};function d(h,p,m,g){const b=null!==h?h.length:0;let v=null;if(0!==b){if(v=l.value,!0!==g||null===v){const y=m+4*b,M=p.matrixWorldInverse;a.getNormalMatrix(M),(null===v||v.length<y)&&(v=new Float32Array(y));for(let x=0,C=m;x!==b;++x,C+=4)o.copy(h[x]).applyMatrix4(M,a),o.normal.toArray(v,C),v[C+3]=o.constant}l.value=v,l.needsUpdate=!0}return t.numPlanes=b,t.numIntersection=0,v}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const m=0!==h.length||p||0!==n||r;return r=p,n=h.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){e=d(h,p,0)},this.setState=function(h,p,m){const g=h.clippingPlanes,b=h.clipIntersection,v=h.clipShadows,y=i.get(h);if(!r||null===g||0===g.length||s&&!v)s?d(null):function c(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}();else{const M=s?0:n,x=4*M;let C=y.clippingState||null;l.value=C,C=d(g,p,x,m);for(let F=0;F!==x;++F)C[F]=e[F];y.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}}}function Vce(i){let t=new WeakMap;function e(o,a){return a===IC?o.mapping=Al:a===RC&&(o.mapping=ef),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===IC||a===RC){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new Rae(l.height);return c.fromEquirectangularTexture(i,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}class kb extends vP{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const o5=[.125,.215,.35,.446,.526,.582],bP=new kb,a5=new Ze;let xP=null,wP=0,MP=0,CP=!1;const pf=(1+Math.sqrt(5))/2,Tg=1/pf,l5=[new O(-pf,Tg,0),new O(pf,Tg,0),new O(-Tg,0,pf),new O(Tg,0,pf),new O(0,pf,-Tg),new O(0,pf,Tg),new O(-1,1,-1),new O(1,1,-1),new O(-1,1,1),new O(1,1,1)];class c5{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){xP=this._renderer.getRenderTarget(),wP=this._renderer.getActiveCubeFace(),MP=this._renderer.getActiveMipmapLevel(),CP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=h5(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=u5(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(xP,wP,MP),this._renderer.xr.enabled=CP,t.scissorTest=!1,hS(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(t.mapping===Al||t.mapping===ef?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),xP=this._renderer.getRenderTarget(),wP=this._renderer.getActiveCubeFace(),MP=this._renderer.getActiveMipmapLevel(),CP=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:cr,minFilter:cr,generateMipmaps:!1,type:Jm,format:No,colorSpace:fs,depthBuffer:!1},r=d5(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=d5(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function zce(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+o5.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>i-4?l=o5[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,h=1+c,p=[d,d,h,d,h,h,d,d,h,h,d,h],m=6,g=6,b=3,v=2,y=1,M=new Float32Array(b*g*m),x=new Float32Array(v*g*m),C=new Float32Array(y*g*m);for(let D=0;D<m;D++){const k=D%3*2/3-1,B=D>2?0:-1;M.set([k,B,0,k+2/3,B,0,k+2/3,B+1,0,k,B,0,k+2/3,B+1,0,k,B+1,0],b*g*D),x.set(p,v*g*D),C.set([D,D,D,D,D,D],y*g*D)}const F=new fn;F.setAttribute("position",new Gi(M,b)),F.setAttribute("uv",new Gi(x,v)),F.setAttribute("faceIndex",new Gi(C,y)),t.push(F),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function Hce(i,t,e){const n=new Float32Array(20),r=new O(0,1,0);return new kl({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:nd,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new Tn(this._lodPlanes[0],t);this._renderer.compile(e,bP)}_sceneToCubeUV(t,e,n,r){const a=new br(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(a5),d.toneMapping=xu,d.autoClear=!1;const m=new er({name:"PMREM.Background",side:Lo,depthWrite:!1,depthTest:!1}),g=new Tn(new lf,m);let b=!1;const v=t.background;v?v.isColor&&(m.color.copy(v),t.background=null,b=!0):(m.color.copy(a5),b=!0);for(let y=0;y<6;y++){const M=y%3;0===M?(a.up.set(0,l[y],0),a.lookAt(c[y],0,0)):1===M?(a.up.set(0,0,l[y]),a.lookAt(0,c[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,c[y]));const x=this._cubeSize;hS(r,M*x,y>2?x:0,x,x),d.setRenderTarget(r),b&&d.render(g,a),d.render(t,a)}g.geometry.dispose(),g.material.dispose(),d.toneMapping=p,d.autoClear=h,t.background=v}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===Al||t.mapping===ef;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=h5()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=u5());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Tn(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;hS(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,bP)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(t,s-1,s,o,l5[(r-s-1)%l5.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const h=new Tn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[n]-1,g=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,b=s/g,v=isFinite(s)?1+Math.floor(3*b):20;v>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${v} samples when the maximum is set to 20`);const y=[];let M=0;for(let k=0;k<20;++k){const B=k/b,T=Math.exp(-B*B/2);y.push(T),0===k?M+=T:k<v&&(M+=2*T)}for(let k=0;k<y.length;k++)y[k]=y[k]/M;p.envMap.value=t.texture,p.samples.value=v,p.weights.value=y,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:x}=this;p.dTheta.value=g,p.mipInt.value=x-n;const C=this._sizeLods[r];hS(e,3*C*(r>x-4?r-x+4:0),4*(this._cubeSize-C),3*C,2*C),l.setRenderTarget(e),l.render(h,bP)}}function d5(i,t,e){const n=new Cu(i,t,e);return n.texture.mapping=_b,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hS(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function u5(){return new kl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:nd,depthTest:!1,depthWrite:!1})}function h5(){return new kl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:nd,depthTest:!1,depthWrite:!1})}function $ce(i){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===IC||l===RC,d=l===Al||l===ef;if(c||d){let h=t.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==h?h.texture.pmremVersion:0))return null===e&&(e=new c5(i)),h=c?e.fromEquirectangular(a,h):e.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),h.texture;if(void 0!==h)return h.texture;{const m=a.image;return c&&m&&m.height>0||d&&m&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(m)?(null===e&&(e=new c5(i)),h=c?e.fromEquirectangular(a):e.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,t.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function Gce(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const r=e(n);return null===r&&cg("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Wce(i,t,e,n){const r={},s=new WeakMap;function o(h){const p=h.target;null!==p.index&&t.remove(p.index);for(const g in p.attributes)t.remove(p.attributes[g]);for(const g in p.morphAttributes){const b=p.morphAttributes[g];for(let v=0,y=b.length;v<y;v++)t.remove(b[v])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(t.remove(m),s.delete(p)),n.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,e.memory.geometries--}function c(h){const p=[],m=h.index,g=h.attributes.position;let b=0;if(null!==m){const M=m.array;b=m.version;for(let x=0,C=M.length;x<C;x+=3){const F=M[x+0],D=M[x+1],k=M[x+2];p.push(F,D,D,k,k,F)}}else{if(void 0===g)return;b=g.version;for(let x=0,C=g.array.length/3-1;x<C;x+=3){const F=x+0,D=x+1,k=x+2;p.push(F,D,D,k,k,F)}}const v=new(k4(p)?q4:Y4)(p,1);v.version=b;const y=s.get(h);y&&t.remove(y),s.set(h,v)}return{get:function a(h,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,e.memory.geometries++),p},update:function l(h){const p=h.attributes;for(const g in p)t.update(p[g],i.ARRAY_BUFFER);const m=h.morphAttributes;for(const g in m){const b=m[g];for(let v=0,y=b.length;v<y;v++)t.update(b[v],i.ARRAY_BUFFER)}},getWireframeAttribute:function d(h){const p=s.get(h);if(p){const m=h.index;null!==m&&p.version<m.version&&c(h)}else c(h);return s.get(h)}}}function jce(i,t,e){let n,s,o;function c(p,m,g){0!==g&&(i.drawElementsInstanced(n,m,s,p*o,g),e.update(m,n,g))}this.setMode=function r(p){n=p},this.setIndex=function a(p){s=p.type,o=p.bytesPerElement},this.render=function l(p,m){i.drawElements(n,m,s,p*o),e.update(m,n,1)},this.renderInstances=c,this.renderMultiDraw=function d(p,m,g){if(0===g)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,m,0,s,p,0,g);let v=0;for(let y=0;y<g;y++)v+=m[y];e.update(v,n,1)},this.renderMultiDrawInstances=function h(p,m,g,b){if(0===g)return;const v=t.get("WEBGL_multi_draw");if(null===v)for(let y=0;y<p.length;y++)c(p[y]/o,m[y],b[y]);else{v.multiDrawElementsInstancedWEBGL(n,m,0,s,p,0,b,0,g);let y=0;for(let M=0;M<g;M++)y+=m[M];for(let M=0;M<b.length;M++)e.update(y,n,b[M])}}}function Yce(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,a){switch(e.calls++,o){case i.TRIANGLES:e.triangles+=a*(s/3);break;case i.LINES:e.lines+=a*(s/2);break;case i.LINE_STRIP:e.lines+=a*(s-1);break;case i.LINE_LOOP:e.lines+=a*s;break;case i.POINTS:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function qce(i,t,e){const n=new WeakMap,r=new vi;return{update:function s(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=void 0!==d?d.length:0;let p=n.get(a);if(void 0===p||p.count!==h){let T=function(){k.dispose(),n.delete(a),a.removeEventListener("dispose",T)};void 0!==p&&p.texture.dispose();const m=void 0!==a.morphAttributes.position,g=void 0!==a.morphAttributes.normal,b=void 0!==a.morphAttributes.color,v=a.morphAttributes.position||[],y=a.morphAttributes.normal||[],M=a.morphAttributes.color||[];let x=0;!0===m&&(x=1),!0===g&&(x=2),!0===b&&(x=3);let C=a.attributes.position.count*x,F=1;C>t.maxTextureSize&&(F=Math.ceil(C/t.maxTextureSize),C=t.maxTextureSize);const D=new Float32Array(C*F*4*h),k=new nP(D,C,F,h);k.type=ra,k.needsUpdate=!0;const B=4*x;for(let A=0;A<h;A++){const j=v[A],ie=y[A],ne=M[A],se=C*F*4*A;for(let ge=0;ge<j.count;ge++){const q=ge*B;!0===m&&(r.fromBufferAttribute(j,ge),D[se+q+0]=r.x,D[se+q+1]=r.y,D[se+q+2]=r.z,D[se+q+3]=0),!0===g&&(r.fromBufferAttribute(ie,ge),D[se+q+4]=r.x,D[se+q+5]=r.y,D[se+q+6]=r.z,D[se+q+7]=0),!0===b&&(r.fromBufferAttribute(ne,ge),D[se+q+8]=r.x,D[se+q+9]=r.y,D[se+q+10]=r.z,D[se+q+11]=4===ne.itemSize?r.w:1)}}p={count:h,texture:k,size:new xe(C,F)},n.set(a,p),a.addEventListener("dispose",T)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,e);else{let m=0;for(let b=0;b<c.length;b++)m+=c[b];const g=a.morphTargetsRelative?1:1-m;l.getUniforms().setValue(i,"morphTargetBaseInfluence",g),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",p.texture,e),l.getUniforms().setValue(i,"morphTargetsTextureSize",p.size)}}}function Xce(i,t,e,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,h=t.get(l,l.geometry);if(r.get(h)!==c&&(t.update(h),r.set(h,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(e.update(l.instanceMatrix,i.ARRAY_BUFFER),null!==l.instanceColor&&e.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return h},dispose:function o(){r=new WeakMap}}}class f5 extends Bo{constructor(t,e,n,r,s,o,a,l,c,d=tg){if(d!==tg&&d!==ng)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===tg&&(n=wu),void 0===n&&d===ng&&(n=eg),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:vr,this.minFilter=void 0!==l?l:vr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const p5=new Bo,m5=new f5(1,1),g5=new nP,_5=new L4,v5=new lS,y5=[],b5=[],x5=new Float32Array(16),w5=new Float32Array(9),M5=new Float32Array(4);function Ig(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=y5[r];if(void 0===s&&(s=new Float32Array(r),y5[r]=s),0!==t){n.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,i[o].toArray(s,a)}return s}function Lr(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Nr(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function fS(i,t){let e=b5[t];void 0===e&&(e=new Int32Array(t),b5[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function Kce(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function Zce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Lr(e,t))return;i.uniform2fv(this.addr,t),Nr(e,t)}}function Qce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Lr(e,t))return;i.uniform3fv(this.addr,t),Nr(e,t)}}function Jce(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Lr(e,t))return;i.uniform4fv(this.addr,t),Nr(e,t)}}function ede(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Lr(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Nr(e,t)}else{if(Lr(e,n))return;M5.set(n),i.uniformMatrix2fv(this.addr,!1,M5),Nr(e,n)}}function tde(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Lr(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Nr(e,t)}else{if(Lr(e,n))return;w5.set(n),i.uniformMatrix3fv(this.addr,!1,w5),Nr(e,n)}}function nde(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(Lr(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Nr(e,t)}else{if(Lr(e,n))return;x5.set(n),i.uniformMatrix4fv(this.addr,!1,x5),Nr(e,n)}}function ide(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function rde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Lr(e,t))return;i.uniform2iv(this.addr,t),Nr(e,t)}}function sde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Lr(e,t))return;i.uniform3iv(this.addr,t),Nr(e,t)}}function ode(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Lr(e,t))return;i.uniform4iv(this.addr,t),Nr(e,t)}}function ade(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function lde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Lr(e,t))return;i.uniform2uiv(this.addr,t),Nr(e,t)}}function cde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Lr(e,t))return;i.uniform3uiv(this.addr,t),Nr(e,t)}}function dde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Lr(e,t))return;i.uniform4uiv(this.addr,t),Nr(e,t)}}function ude(i,t,e){const n=this.cache,r=e.allocateTextureUnit();let s;n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),this.type===i.SAMPLER_2D_SHADOW?(m5.compareFunction=T4,s=m5):s=p5,e.setTexture2D(t||s,r)}function hde(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||_5,r)}function fde(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||v5,r)}function pde(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||g5,r)}function gde(i,t){i.uniform1fv(this.addr,t)}function _de(i,t){const e=Ig(t,this.size,2);i.uniform2fv(this.addr,e)}function vde(i,t){const e=Ig(t,this.size,3);i.uniform3fv(this.addr,e)}function yde(i,t){const e=Ig(t,this.size,4);i.uniform4fv(this.addr,e)}function bde(i,t){const e=Ig(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function xde(i,t){const e=Ig(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function wde(i,t){const e=Ig(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Mde(i,t){i.uniform1iv(this.addr,t)}function Cde(i,t){i.uniform2iv(this.addr,t)}function Sde(i,t){i.uniform3iv(this.addr,t)}function Ede(i,t){i.uniform4iv(this.addr,t)}function Ade(i,t){i.uniform1uiv(this.addr,t)}function Dde(i,t){i.uniform2uiv(this.addr,t)}function Tde(i,t){i.uniform3uiv(this.addr,t)}function Ide(i,t){i.uniform4uiv(this.addr,t)}function Rde(i,t,e){const n=this.cache,r=t.length,s=fS(e,r);Lr(n,s)||(i.uniform1iv(this.addr,s),Nr(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||p5,s[o])}function kde(i,t,e){const n=this.cache,r=t.length,s=fS(e,r);Lr(n,s)||(i.uniform1iv(this.addr,s),Nr(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||_5,s[o])}function Pde(i,t,e){const n=this.cache,r=t.length,s=fS(e,r);Lr(n,s)||(i.uniform1iv(this.addr,s),Nr(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||v5,s[o])}function Ode(i,t,e){const n=this.cache,r=t.length,s=fS(e,r);Lr(n,s)||(i.uniform1iv(this.addr,s),Nr(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||g5,s[o])}class Lde{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function mde(i){switch(i){case 5126:return Kce;case 35664:return Zce;case 35665:return Qce;case 35666:return Jce;case 35674:return ede;case 35675:return tde;case 35676:return nde;case 5124:case 35670:return ide;case 35667:case 35671:return rde;case 35668:case 35672:return sde;case 35669:case 35673:return ode;case 5125:return ade;case 36294:return lde;case 36295:return cde;case 36296:return dde;case 35678:case 36198:case 36298:case 36306:case 35682:return ude;case 35679:case 36299:case 36307:return hde;case 35680:case 36300:case 36308:case 36293:return fde;case 36289:case 36303:case 36311:case 36292:return pde}}(e.type)}}class Nde{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function Fde(i){switch(i){case 5126:return gde;case 35664:return _de;case 35665:return vde;case 35666:return yde;case 35674:return bde;case 35675:return xde;case 35676:return wde;case 5124:case 35670:return Mde;case 35667:case 35671:return Cde;case 35668:case 35672:return Sde;case 35669:case 35673:return Ede;case 5125:return Ade;case 36294:return Dde;case 36295:return Tde;case 36296:return Ide;case 35678:case 36198:case 36298:case 36306:case 35682:return Rde;case 35679:case 36299:case 36307:return kde;case 35680:case 36300:case 36308:case 36293:return Pde;case 36289:case 36303:case 36311:case 36292:return Ode}}(e.type)}}class Bde{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(t,e[a.id],n)}}}const EP=/(\w+)(\])?(\[|\.)?/g;function C5(i,t){i.seq.push(t),i.map[t.id]=t}function Ude(i,t,e){const n=i.name,r=n.length;for(EP.lastIndex=0;;){const s=EP.exec(n);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&EP.lastIndex+2===r){C5(e,void 0===c?new Lde(a,i,t):new Nde(a,i,t));break}{let h=e.map[a];void 0===h&&(h=new Bde(a),C5(e,h)),e=h}}}class pS{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);Ude(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const a=e[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function S5(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const Vde=37297;let zde=0;function E5(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function Hde(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function Gde(i,t){const e=function $de(i){const t=ei.getPrimaries(ei.workingColorSpace),e=ei.getPrimaries(i);let n;switch(t===e?n="":t===HC&&e===zC?n="LinearDisplayP3ToLinearSRGB":t===zC&&e===HC&&(n="LinearSRGBToLinearDisplayP3"),i){case fs:case UC:return[n,"LinearTransferOETF"];case hs:case Zk:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}(t);return`vec4 ${i}( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`}function Wde(i,t){let e;switch(t){case Moe:e="Linear";break;case Coe:e="Reinhard";break;case Soe:e="OptimizedCineon";break;case Eoe:e="ACESFilmic";break;case Doe:e="AgX";break;case Toe:e="Neutral";break;case Aoe:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const mS=new O;function Pb(i){return""!==i}function A5(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function D5(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Kde=/^[ \t]*#include +<([\w\d./]+)>/gm;function AP(i){return i.replace(Kde,Qde)}const Zde=new Map;function Qde(i,t){let e=Mn[t];if(void 0===e){const n=Zde.get(t);if(void 0===n)throw new Error("Can not resolve #include <"+t+">");e=Mn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n)}return AP(e)}const Jde=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function T5(i){return i.replace(Jde,eue)}function eue(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function I5(i){let t=`precision ${i.precision} float;\n\tprecision ${i.precision} int;\n\tprecision ${i.precision} sampler2D;\n\tprecision ${i.precision} samplerCube;\n\tprecision ${i.precision} sampler3D;\n\tprecision ${i.precision} sampler2DArray;\n\tprecision ${i.precision} sampler2DShadow;\n\tprecision ${i.precision} samplerCubeShadow;\n\tprecision ${i.precision} sampler2DArrayShadow;\n\tprecision ${i.precision} isampler2D;\n\tprecision ${i.precision} isampler3D;\n\tprecision ${i.precision} isamplerCube;\n\tprecision ${i.precision} isampler2DArray;\n\tprecision ${i.precision} usampler2D;\n\tprecision ${i.precision} usampler3D;\n\tprecision ${i.precision} usamplerCube;\n\tprecision ${i.precision} usampler2DArray;\n\t`;return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function oue(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function tue(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===u4?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===h4?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===td&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function nue(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Al:case ef:t="ENVMAP_TYPE_CUBE";break;case _b:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),d=function iue(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===ef&&(t="ENVMAP_MODE_REFRACTION"),t}(e),h=function rue(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case TC:t="ENVMAP_BLENDING_MULTIPLY";break;case xoe:t="ENVMAP_BLENDING_MIX";break;case woe:t="ENVMAP_BLENDING_ADD"}return t}(e),p=function sue(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),m=function Yde(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Pb).join("\n")}(e),g=function qde(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),b=r.createProgram();let v,y,M=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(v=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g].filter(Pb).join("\n"),v.length>0&&(v+="\n"),y=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g].filter(Pb).join("\n"),y.length>0&&(y+="\n")):(v=[I5(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Pb).join("\n"),y=[I5(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,g,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+d:"",e.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==xu?"#define TONE_MAPPING":"",e.toneMapping!==xu?Mn.tonemapping_pars_fragment:"",e.toneMapping!==xu?Wde("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",Mn.colorspace_pars_fragment,Gde("linearToOutputTexel",e.outputColorSpace),(ei.getLuminanceCoefficients(mS),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${mS.x.toFixed(4)}, ${mS.y.toFixed(4)}, ${mS.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(Pb).join("\n")),o=AP(o),o=A5(o,e),o=D5(o,e),a=AP(a),a=A5(a,e),a=D5(a,e),o=T5(o),a=T5(a),!0!==e.isRawShaderMaterial&&(M="#version 300 es\n",v=[m,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["#define varying in",e.glslVersion===I4?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===I4?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const C=M+y+a,F=S5(r,r.VERTEX_SHADER,M+v+o),D=S5(r,r.FRAGMENT_SHADER,C);function k(j){if(i.debug.checkShaderErrors){const ie=r.getProgramInfoLog(b).trim(),ne=r.getShaderInfoLog(F).trim(),se=r.getShaderInfoLog(D).trim();let ge=!0,q=!0;if(!1===r.getProgramParameter(b,r.LINK_STATUS))if(ge=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,b,F,D);else{const re=E5(r,F,"vertex"),J=E5(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+j.name+"\nMaterial Type: "+j.type+"\n\nProgram Info Log: "+ie+"\n"+re+"\n"+J)}else""!==ie?console.warn("THREE.WebGLProgram: Program Info Log:",ie):(""===ne||""===se)&&(q=!1);q&&(j.diagnostics={runnable:ge,programLog:ie,vertexShader:{log:ne,prefix:v},fragmentShader:{log:se,prefix:y}})}r.deleteShader(F),r.deleteShader(D),B=new pS(r,b),T=function Xde(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:a}}return e}(r,b)}let B,T;r.attachShader(b,F),r.attachShader(b,D),void 0!==e.index0AttributeName?r.bindAttribLocation(b,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),this.getUniforms=function(){return void 0===B&&k(this),B},this.getAttributes=function(){return void 0===T&&k(this),T};let A=!1===e.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===A&&(A=r.getProgramParameter(b,Vde)),A},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=zde++,this.cacheKey=t,this.usedTimes=1,this.program=b,this.vertexShader=F,this.fragmentShader=D,this}let aue=0;class lue{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new cue(t),e.set(t,n)),n}}class cue{constructor(t){this.id=aue++,this.code=t,this.usedTimes=0}}function due(i,t,e,n,r,s,o){const a=new cP,l=new lue,c=new Set,d=[],h=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(T){return c.add(T),0===T?"uv":`uv${T}`}return{getParameters:function v(T,A,j,ie,ne){const se=ie.fog,ge=ne.geometry,re=(T.isMeshStandardMaterial?e:t).get(T.envMap||(T.isMeshStandardMaterial?ie.environment:null)),J=re&&re.mapping===_b?re.image.height:null,we=g[T.type];null!==T.precision&&(m=r.getMaxPrecision(T.precision),m!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));const Ve=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,Ke=void 0!==Ve?Ve.length:0;let nn,le,Ne,tt,Rt=0;if(void 0!==ge.morphAttributes.position&&(Rt=1),void 0!==ge.morphAttributes.normal&&(Rt=2),void 0!==ge.morphAttributes.color&&(Rt=3),we){const fi=uc[we];nn=fi.vertexShader,le=fi.fragmentShader}else nn=T.vertexShader,le=T.fragmentShader,l.update(T),Ne=l.getVertexShaderID(T),tt=l.getFragmentShaderID(T);const Be=i.getRenderTarget(),wt=!0===ne.isInstancedMesh,Tt=!0===ne.isBatchedMesh,Dt=!!T.map,N=!!re,We=!!T.aoMap,Ue=!!T.lightMap,ot=!!T.bumpMap,Me=!!T.normalMap,Gt=!!T.displacementMap,at=!!T.emissiveMap,_t=!!T.metalnessMap,H=!!T.roughnessMap,R=T.anisotropy>0,de=T.clearcoat>0,ke=T.iridescence>0,Ie=T.sheen>0,Vt=T.transmission>0,it=R&&!!T.anisotropyMap,pt=de&&!!T.clearcoatMap,bn=de&&!!T.clearcoatNormalMap,Ge=de&&!!T.clearcoatRoughnessMap,ft=ke&&!!T.iridescenceMap,qn=ke&&!!T.iridescenceThicknessMap,cn=Ie&&!!T.sheenColorMap,yt=Ie&&!!T.sheenRoughnessMap,vn=!!T.specularMap,Pn=!!T.specularColorMap,Ki=!!T.specularIntensityMap,Z=Vt&&!!T.transmissionMap,Ye=Vt&&!!T.thicknessMap,Ae=!!T.alphaMap,ti=!!T.extensions;let xr=xu;T.toneMapped&&(null===Be||!0===Be.isXRRenderTarget)&&(xr=i.toneMapping);const ms={shaderID:we,shaderType:T.type,shaderName:T.name,vertexShader:nn,fragmentShader:le,defines:T.defines,customVertexShaderID:Ne,customFragmentShaderID:tt,isRawShaderMaterial:!0===T.isRawShaderMaterial,glslVersion:T.glslVersion,precision:m,batching:Tt,batchingColor:Tt&&null!==ne._colorsTexture,instancing:wt,instancingColor:wt&&null!==ne.instanceColor,instancingMorph:wt&&null!==ne.morphTexture,supportsVertexTextures:p,outputColorSpace:null===Be?i.outputColorSpace:!0===Be.isXRRenderTarget?Be.texture.colorSpace:fs,alphaToCoverage:!!T.alphaToCoverage,map:Dt,matcap:!!T.matcap,envMap:N,envMapMode:N&&re.mapping,envMapCubeUVHeight:J,aoMap:We,lightMap:Ue,bumpMap:ot,normalMap:Me,displacementMap:p&&Gt,emissiveMap:at,normalMapObjectSpace:Me&&T.normalMapType===Noe,normalMapTangentSpace:Me&&T.normalMapType===tf,metalnessMap:_t,roughnessMap:H,anisotropy:R,anisotropyMap:it,clearcoat:de,clearcoatMap:pt,clearcoatNormalMap:bn,clearcoatRoughnessMap:Ge,dispersion:T.dispersion>0,iridescence:ke,iridescenceMap:ft,iridescenceThicknessMap:qn,sheen:Ie,sheenColorMap:cn,sheenRoughnessMap:yt,specularMap:vn,specularColorMap:Pn,specularIntensityMap:Ki,transmission:Vt,transmissionMap:Z,thicknessMap:Ye,gradientMap:!!T.gradientMap,opaque:!1===T.transparent&&T.blending===Zm&&!1===T.alphaToCoverage,alphaMap:Ae,alphaTest:T.alphaTest>0,alphaHash:!!T.alphaHash,combine:T.combine,mapUv:Dt&&b(T.map.channel),aoMapUv:We&&b(T.aoMap.channel),lightMapUv:Ue&&b(T.lightMap.channel),bumpMapUv:ot&&b(T.bumpMap.channel),normalMapUv:Me&&b(T.normalMap.channel),displacementMapUv:Gt&&b(T.displacementMap.channel),emissiveMapUv:at&&b(T.emissiveMap.channel),metalnessMapUv:_t&&b(T.metalnessMap.channel),roughnessMapUv:H&&b(T.roughnessMap.channel),anisotropyMapUv:it&&b(T.anisotropyMap.channel),clearcoatMapUv:pt&&b(T.clearcoatMap.channel),clearcoatNormalMapUv:bn&&b(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ge&&b(T.clearcoatRoughnessMap.channel),iridescenceMapUv:ft&&b(T.iridescenceMap.channel),iridescenceThicknessMapUv:qn&&b(T.iridescenceThicknessMap.channel),sheenColorMapUv:cn&&b(T.sheenColorMap.channel),sheenRoughnessMapUv:yt&&b(T.sheenRoughnessMap.channel),specularMapUv:vn&&b(T.specularMap.channel),specularColorMapUv:Pn&&b(T.specularColorMap.channel),specularIntensityMapUv:Ki&&b(T.specularIntensityMap.channel),transmissionMapUv:Z&&b(T.transmissionMap.channel),thicknessMapUv:Ye&&b(T.thicknessMap.channel),alphaMapUv:Ae&&b(T.alphaMap.channel),vertexTangents:!!ge.attributes.tangent&&(Me||R),vertexColors:T.vertexColors,vertexAlphas:!0===T.vertexColors&&!!ge.attributes.color&&4===ge.attributes.color.itemSize,pointsUvs:!0===ne.isPoints&&!!ge.attributes.uv&&(Dt||Ae),fog:!!se,useFog:!0===T.fog,fogExp2:!!se&&se.isFogExp2,flatShading:!0===T.flatShading,sizeAttenuation:!0===T.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===ne.isSkinnedMesh,morphTargets:void 0!==ge.morphAttributes.position,morphNormals:void 0!==ge.morphAttributes.normal,morphColors:void 0!==ge.morphAttributes.color,morphTargetsCount:Ke,morphTextureStride:Rt,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:xr,decodeVideoTexture:Dt&&!0===T.map.isVideoTexture&&ei.getTransfer(T.map.colorSpace)===Fi,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===us,flipSided:T.side===Lo,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:ti&&!0===T.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ti&&!0===T.extensions.multiDraw||Tt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return ms.vertexUv1s=c.has(1),ms.vertexUv2s=c.has(2),ms.vertexUv3s=c.has(3),c.clear(),ms},getProgramCacheKey:function y(T){const A=[];if(T.shaderID?A.push(T.shaderID):(A.push(T.customVertexShaderID),A.push(T.customFragmentShaderID)),void 0!==T.defines)for(const j in T.defines)A.push(j),A.push(T.defines[j]);return!1===T.isRawShaderMaterial&&(function M(T,A){T.push(A.precision),T.push(A.outputColorSpace),T.push(A.envMapMode),T.push(A.envMapCubeUVHeight),T.push(A.mapUv),T.push(A.alphaMapUv),T.push(A.lightMapUv),T.push(A.aoMapUv),T.push(A.bumpMapUv),T.push(A.normalMapUv),T.push(A.displacementMapUv),T.push(A.emissiveMapUv),T.push(A.metalnessMapUv),T.push(A.roughnessMapUv),T.push(A.anisotropyMapUv),T.push(A.clearcoatMapUv),T.push(A.clearcoatNormalMapUv),T.push(A.clearcoatRoughnessMapUv),T.push(A.iridescenceMapUv),T.push(A.iridescenceThicknessMapUv),T.push(A.sheenColorMapUv),T.push(A.sheenRoughnessMapUv),T.push(A.specularMapUv),T.push(A.specularColorMapUv),T.push(A.specularIntensityMapUv),T.push(A.transmissionMapUv),T.push(A.thicknessMapUv),T.push(A.combine),T.push(A.fogExp2),T.push(A.sizeAttenuation),T.push(A.morphTargetsCount),T.push(A.morphAttributeCount),T.push(A.numDirLights),T.push(A.numPointLights),T.push(A.numSpotLights),T.push(A.numSpotLightMaps),T.push(A.numHemiLights),T.push(A.numRectAreaLights),T.push(A.numDirLightShadows),T.push(A.numPointLightShadows),T.push(A.numSpotLightShadows),T.push(A.numSpotLightShadowsWithMaps),T.push(A.numLightProbes),T.push(A.shadowMapType),T.push(A.toneMapping),T.push(A.numClippingPlanes),T.push(A.numClipIntersection),T.push(A.depthPacking)}(A,T),function x(T,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),T.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.skinning&&a.enable(4),A.morphTargets&&a.enable(5),A.morphNormals&&a.enable(6),A.morphColors&&a.enable(7),A.premultipliedAlpha&&a.enable(8),A.shadowMapEnabled&&a.enable(9),A.doubleSided&&a.enable(10),A.flipSided&&a.enable(11),A.useDepthPacking&&a.enable(12),A.dithering&&a.enable(13),A.transmission&&a.enable(14),A.sheen&&a.enable(15),A.opaque&&a.enable(16),A.pointsUvs&&a.enable(17),A.decodeVideoTexture&&a.enable(18),A.alphaToCoverage&&a.enable(19),T.push(a.mask)}(A,T),A.push(i.outputColorSpace)),A.push(T.customProgramCacheKey),A.join()},getUniforms:function C(T){const A=g[T.type];let j;return j=A?t5.clone(uc[A].uniforms):T.uniforms,j},acquireProgram:function F(T,A){let j;for(let ie=0,ne=d.length;ie<ne;ie++){const se=d[ie];if(se.cacheKey===A){j=se,++j.usedTimes;break}}return void 0===j&&(j=new oue(i,A,T,s),d.push(j)),j},releaseProgram:function D(T){if(0==--T.usedTimes){const A=d.indexOf(T);d[A]=d[d.length-1],d.pop(),T.destroy()}},releaseShaderCache:function k(T){l.remove(T)},programs:d,dispose:function B(){l.dispose()}}}function uue(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function hue(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function R5(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function k5(){const i=[];let t=0;const e=[],n=[],r=[];function o(h,p,m,g,b,v){let y=i[t];return void 0===y?(y={id:h.id,object:h,geometry:p,material:m,groupOrder:g,renderOrder:h.renderOrder,z:b,group:v},i[t]=y):(y.id=h.id,y.object=h,y.geometry=p,y.material=m,y.groupOrder=g,y.renderOrder=h.renderOrder,y.z=b,y.group=v),t++,y}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function a(h,p,m,g,b,v){const y=o(h,p,m,g,b,v);m.transmission>0?n.push(y):!0===m.transparent?r.push(y):e.push(y)},unshift:function l(h,p,m,g,b,v){const y=o(h,p,m,g,b,v);m.transmission>0?n.unshift(y):!0===m.transparent?r.unshift(y):e.unshift(y)},finish:function d(){for(let h=t,p=i.length;h<p;h++){const m=i[h];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(h,p){e.length>1&&e.sort(h||hue),n.length>1&&n.sort(p||R5),r.length>1&&r.sort(p||R5)}}}function fue(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new k5,i.set(n,[o])):r>=s.length?(o=new k5,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function pue(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new O,color:new Ze};break;case"SpotLight":e={position:new O,direction:new O,color:new Ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new O,color:new Ze,distance:0,decay:0};break;case"HemisphereLight":e={direction:new O,skyColor:new Ze,groundColor:new Ze};break;case"RectAreaLight":e={color:new Ze,position:new O,halfWidth:new O,halfHeight:new O}}return i[t.id]=e,e}}}let gue=0;function _ue(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function vue(i){const t=new pue,e=function mue(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xe,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new O);const r=new O,s=new Ut,o=new Ut;return{setup:function a(c){let d=0,h=0,p=0;for(let T=0;T<9;T++)n.probe[T].set(0,0,0);let m=0,g=0,b=0,v=0,y=0,M=0,x=0,C=0,F=0,D=0,k=0;c.sort(_ue);for(let T=0,A=c.length;T<A;T++){const j=c[T],ie=j.color,ne=j.intensity,se=j.distance,ge=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)d+=ie.r*ne,h+=ie.g*ne,p+=ie.b*ne;else if(j.isLightProbe){for(let q=0;q<9;q++)n.probe[q].addScaledVector(j.sh.coefficients[q],ne);k++}else if(j.isDirectionalLight){const q=t.get(j);if(q.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const re=j.shadow,J=e.get(j);J.shadowIntensity=re.intensity,J.shadowBias=re.bias,J.shadowNormalBias=re.normalBias,J.shadowRadius=re.radius,J.shadowMapSize=re.mapSize,n.directionalShadow[m]=J,n.directionalShadowMap[m]=ge,n.directionalShadowMatrix[m]=j.shadow.matrix,M++}n.directional[m]=q,m++}else if(j.isSpotLight){const q=t.get(j);q.position.setFromMatrixPosition(j.matrixWorld),q.color.copy(ie).multiplyScalar(ne),q.distance=se,q.coneCos=Math.cos(j.angle),q.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),q.decay=j.decay,n.spot[b]=q;const re=j.shadow;if(j.map&&(n.spotLightMap[F]=j.map,F++,re.updateMatrices(j),j.castShadow&&D++),n.spotLightMatrix[b]=re.matrix,j.castShadow){const J=e.get(j);J.shadowIntensity=re.intensity,J.shadowBias=re.bias,J.shadowNormalBias=re.normalBias,J.shadowRadius=re.radius,J.shadowMapSize=re.mapSize,n.spotShadow[b]=J,n.spotShadowMap[b]=ge,C++}b++}else if(j.isRectAreaLight){const q=t.get(j);q.color.copy(ie).multiplyScalar(ne),q.halfWidth.set(.5*j.width,0,0),q.halfHeight.set(0,.5*j.height,0),n.rectArea[v]=q,v++}else if(j.isPointLight){const q=t.get(j);if(q.color.copy(j.color).multiplyScalar(j.intensity),q.distance=j.distance,q.decay=j.decay,j.castShadow){const re=j.shadow,J=e.get(j);J.shadowIntensity=re.intensity,J.shadowBias=re.bias,J.shadowNormalBias=re.normalBias,J.shadowRadius=re.radius,J.shadowMapSize=re.mapSize,J.shadowCameraNear=re.camera.near,J.shadowCameraFar=re.camera.far,n.pointShadow[g]=J,n.pointShadowMap[g]=ge,n.pointShadowMatrix[g]=j.shadow.matrix,x++}n.point[g]=q,g++}else if(j.isHemisphereLight){const q=t.get(j);q.skyColor.copy(j.color).multiplyScalar(ne),q.groundColor.copy(j.groundColor).multiplyScalar(ne),n.hemi[y]=q,y++}}v>0&&(!0===i.has("OES_texture_float_linear")?(n.rectAreaLTC1=nt.LTC_FLOAT_1,n.rectAreaLTC2=nt.LTC_FLOAT_2):(n.rectAreaLTC1=nt.LTC_HALF_1,n.rectAreaLTC2=nt.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=h,n.ambient[2]=p;const B=n.hash;(B.directionalLength!==m||B.pointLength!==g||B.spotLength!==b||B.rectAreaLength!==v||B.hemiLength!==y||B.numDirectionalShadows!==M||B.numPointShadows!==x||B.numSpotShadows!==C||B.numSpotMaps!==F||B.numLightProbes!==k)&&(n.directional.length=m,n.spot.length=b,n.rectArea.length=v,n.point.length=g,n.hemi.length=y,n.directionalShadow.length=M,n.directionalShadowMap.length=M,n.pointShadow.length=x,n.pointShadowMap.length=x,n.spotShadow.length=C,n.spotShadowMap.length=C,n.directionalShadowMatrix.length=M,n.pointShadowMatrix.length=x,n.spotLightMatrix.length=C+F-D,n.spotLightMap.length=F,n.numSpotLightShadowsWithMaps=D,n.numLightProbes=k,B.directionalLength=m,B.pointLength=g,B.spotLength=b,B.rectAreaLength=v,B.hemiLength=y,B.numDirectionalShadows=M,B.numPointShadows=x,B.numSpotShadows=C,B.numSpotMaps=F,B.numLightProbes=k,n.version=gue++)},setupView:function l(c,d){let h=0,p=0,m=0,g=0,b=0;const v=d.matrixWorldInverse;for(let y=0,M=c.length;y<M;y++){const x=c[y];if(x.isDirectionalLight){const C=n.directional[h];C.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(v),h++}else if(x.isSpotLight){const C=n.spot[m];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(v),C.direction.setFromMatrixPosition(x.matrixWorld),r.setFromMatrixPosition(x.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(v),m++}else if(x.isRectAreaLight){const C=n.rectArea[g];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(v),o.identity(),s.copy(x.matrixWorld),s.premultiply(v),o.extractRotation(s),C.halfWidth.set(.5*x.width,0,0),C.halfHeight.set(0,.5*x.height,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),g++}else if(x.isPointLight){const C=n.point[p];C.position.setFromMatrixPosition(x.matrixWorld),C.position.applyMatrix4(v),p++}else if(x.isHemisphereLight){const C=n.hemi[b];C.direction.setFromMatrixPosition(x.matrixWorld),C.direction.transformDirection(v),b++}}},state:n}}function P5(i){const t=new vue(i),e=[],n=[],c={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function r(d){c.camera=d,e.length=0,n.length=0},state:c,setupLights:function a(){t.setup(e)},setupLightsView:function l(d){t.setupView(e,d)},pushLight:function s(d){e.push(d)},pushShadow:function o(d){n.push(d)}}}function yue(i){let t=new WeakMap;return{get:function e(r,s=0){const o=t.get(r);let a;return void 0===o?(a=new P5(i),t.set(r,[a])):s>=o.length?(a=new P5(i),o.push(a)):a=o[s],a},dispose:function n(){t=new WeakMap}}}class O5 extends Uo{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class F5 extends Uo{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const bue="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",xue="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function wue(i,t,e){let n=new dS;const r=new xe,s=new xe,o=new vi,a=new O5({depthPacking:Loe}),l=new F5,c={},d=e.maxTextureSize,h={[dc]:Lo,[Lo]:dc,[us]:us},p=new kl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xe},radius:{value:4}},vertexShader:bue,fragmentShader:xue}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new fn;g.setAttribute("position",new Gi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Tn(g,p),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u4;let y=this.type;function M(D,k){const B=t.update(b);p.defines.VSM_SAMPLES!==D.blurSamples&&(p.defines.VSM_SAMPLES=D.blurSamples,m.defines.VSM_SAMPLES=D.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===D.mapPass&&(D.mapPass=new Cu(r.x,r.y)),p.uniforms.shadow_pass.value=D.map.texture,p.uniforms.resolution.value=D.mapSize,p.uniforms.radius.value=D.radius,i.setRenderTarget(D.mapPass),i.clear(),i.renderBufferDirect(k,null,B,p,b,null),m.uniforms.shadow_pass.value=D.mapPass.texture,m.uniforms.resolution.value=D.mapSize,m.uniforms.radius.value=D.radius,i.setRenderTarget(D.map),i.clear(),i.renderBufferDirect(k,null,B,m,b,null)}function x(D,k,B,T){let A=null;const j=!0===B.isPointLight?D.customDistanceMaterial:D.customDepthMaterial;if(void 0!==j)A=j;else if(A=!0===B.isPointLight?l:a,i.localClippingEnabled&&!0===k.clipShadows&&Array.isArray(k.clippingPlanes)&&0!==k.clippingPlanes.length||k.displacementMap&&0!==k.displacementScale||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const ie=A.uuid,ne=k.uuid;let se=c[ie];void 0===se&&(se={},c[ie]=se);let ge=se[ne];void 0===ge&&(ge=A.clone(),se[ne]=ge,k.addEventListener("dispose",F)),A=ge}return A.visible=k.visible,A.wireframe=k.wireframe,A.side=T===td?null!==k.shadowSide?k.shadowSide:k.side:null!==k.shadowSide?k.shadowSide:h[k.side],A.alphaMap=k.alphaMap,A.alphaTest=k.alphaTest,A.map=k.map,A.clipShadows=k.clipShadows,A.clippingPlanes=k.clippingPlanes,A.clipIntersection=k.clipIntersection,A.displacementMap=k.displacementMap,A.displacementScale=k.displacementScale,A.displacementBias=k.displacementBias,A.wireframeLinewidth=k.wireframeLinewidth,A.linewidth=k.linewidth,!0===B.isPointLight&&!0===A.isMeshDistanceMaterial&&(i.properties.get(A).light=B),A}function C(D,k,B,T,A){if(!1===D.visible)return;if(D.layers.test(k.layers)&&(D.isMesh||D.isLine||D.isPoints)&&(D.castShadow||D.receiveShadow&&A===td)&&(!D.frustumCulled||n.intersectsObject(D))){D.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,D.matrixWorld);const ne=t.update(D),se=D.material;if(Array.isArray(se)){const ge=ne.groups;for(let q=0,re=ge.length;q<re;q++){const J=ge[q],we=se[J.materialIndex];if(we&&we.visible){const Ve=x(D,we,T,A);D.onBeforeShadow(i,D,k,B,ne,Ve,J),i.renderBufferDirect(B,null,ne,Ve,D,J),D.onAfterShadow(i,D,k,B,ne,Ve,J)}}}else if(se.visible){const ge=x(D,se,T,A);D.onBeforeShadow(i,D,k,B,ne,ge,null),i.renderBufferDirect(B,null,ne,ge,D,null),D.onAfterShadow(i,D,k,B,ne,ge,null)}}const ie=D.children;for(let ne=0,se=ie.length;ne<se;ne++)C(ie[ne],k,B,T,A)}function F(D){D.target.removeEventListener("dispose",F);for(const B in c){const T=c[B],A=D.target.uuid;A in T&&(T[A].dispose(),delete T[A])}}this.render=function(D,k,B){if(!1===v.enabled||!1===v.autoUpdate&&!1===v.needsUpdate||0===D.length)return;const T=i.getRenderTarget(),A=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),ie=i.state;ie.setBlending(nd),ie.buffers.color.setClear(1,1,1,1),ie.buffers.depth.setTest(!0),ie.setScissorTest(!1);const ne=y!==td&&this.type===td,se=y===td&&this.type!==td;for(let ge=0,q=D.length;ge<q;ge++){const re=D[ge],J=re.shadow;if(void 0===J){console.warn("THREE.WebGLShadowMap:",re,"has no shadow.");continue}if(!1===J.autoUpdate&&!1===J.needsUpdate)continue;r.copy(J.mapSize);const we=J.getFrameExtents();if(r.multiply(we),s.copy(J.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/we.x),r.x=s.x*we.x,J.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/we.y),r.y=s.y*we.y,J.mapSize.y=s.y)),null===J.map||!0===ne||!0===se){const Ke=this.type!==td?{minFilter:vr,magFilter:vr}:{};null!==J.map&&J.map.dispose(),J.map=new Cu(r.x,r.y,Ke),J.map.texture.name=re.name+".shadowMap",J.camera.updateProjectionMatrix()}i.setRenderTarget(J.map),i.clear();const Ve=J.getViewportCount();for(let Ke=0;Ke<Ve;Ke++){const Rt=J.getViewport(Ke);o.set(s.x*Rt.x,s.y*Rt.y,s.x*Rt.z,s.y*Rt.w),ie.viewport(o),J.updateMatrices(re,Ke),n=J.getFrustum(),C(k,B,J.camera,re,this.type)}!0!==J.isPointLightShadow&&this.type===td&&M(J,B),J.needsUpdate=!1}y=this.type,v.needsUpdate=!1,i.setRenderTarget(T,A,j)}}function Mue(i){const r=new function t(){let Z=!1;const Ye=new vi;let Ce=null;const Ae=new vi(0,0,0,0);return{setMask:function(et){Ce!==et&&!Z&&(i.colorMask(et,et,et,et),Ce=et)},setLocked:function(et){Z=et},setClear:function(et,rn,ti,xr,ms){!0===ms&&(et*=xr,rn*=xr,ti*=xr),Ye.set(et,rn,ti,xr),!1===Ae.equals(Ye)&&(i.clearColor(et,rn,ti,xr),Ae.copy(Ye))},reset:function(){Z=!1,Ce=null,Ae.set(-1,0,0,0)}}},s=new function e(){let Z=!1,Ye=null,Ce=null,Ae=null;return{setTest:function(et){et?tt(i.DEPTH_TEST):Be(i.DEPTH_TEST)},setMask:function(et){Ye!==et&&!Z&&(i.depthMask(et),Ye=et)},setFunc:function(et){if(Ce!==et){switch(et){case poe:i.depthFunc(i.NEVER);break;case moe:i.depthFunc(i.ALWAYS);break;case goe:i.depthFunc(i.LESS);break;case DC:i.depthFunc(i.LEQUAL);break;case _oe:i.depthFunc(i.EQUAL);break;case voe:i.depthFunc(i.GEQUAL);break;case yoe:i.depthFunc(i.GREATER);break;case boe:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ce=et}},setLocked:function(et){Z=et},setClear:function(et){Ae!==et&&(i.clearDepth(et),Ae=et)},reset:function(){Z=!1,Ye=null,Ce=null,Ae=null}}},o=new function n(){let Z=!1,Ye=null,Ce=null,Ae=null,et=null,rn=null,ti=null,xr=null,ms=null;return{setTest:function(fi){Z||(fi?tt(i.STENCIL_TEST):Be(i.STENCIL_TEST))},setMask:function(fi){Ye!==fi&&!Z&&(i.stencilMask(fi),Ye=fi)},setFunc:function(fi,_d,gc){(Ce!==fi||Ae!==_d||et!==gc)&&(i.stencilFunc(fi,_d,gc),Ce=fi,Ae=_d,et=gc)},setOp:function(fi,_d,gc){(rn!==fi||ti!==_d||xr!==gc)&&(i.stencilOp(fi,_d,gc),rn=fi,ti=_d,xr=gc)},setLocked:function(fi){Z=fi},setClear:function(fi){ms!==fi&&(i.clearStencil(fi),ms=fi)},reset:function(){Z=!1,Ye=null,Ce=null,Ae=null,et=null,rn=null,ti=null,xr=null,ms=null}}},a=new WeakMap,l=new WeakMap;let c={},d={},h=new WeakMap,p=[],m=null,g=!1,b=null,v=null,y=null,M=null,x=null,C=null,F=null,D=new Ze(0,0,0),k=0,B=!1,T=null,A=null,j=null,ie=null,ne=null;const se=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ge=!1,q=0;const re=i.getParameter(i.VERSION);-1!==re.indexOf("WebGL")?(q=parseFloat(/^WebGL (\d)/.exec(re)[1]),ge=q>=1):-1!==re.indexOf("OpenGL ES")&&(q=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),ge=q>=2);let J=null,we={};const Ve=i.getParameter(i.SCISSOR_BOX),Ke=i.getParameter(i.VIEWPORT),Rt=(new vi).fromArray(Ve),nn=(new vi).fromArray(Ke);function le(Z,Ye,Ce,Ae){const et=new Uint8Array(4),rn=i.createTexture();i.bindTexture(Z,rn),i.texParameteri(Z,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Z,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let ti=0;ti<Ce;ti++)Z===i.TEXTURE_3D||Z===i.TEXTURE_2D_ARRAY?i.texImage3D(Ye,0,i.RGBA,1,1,Ae,0,i.RGBA,i.UNSIGNED_BYTE,et):i.texImage2D(Ye+ti,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,et);return rn}const Ne={};function tt(Z){!0!==c[Z]&&(i.enable(Z),c[Z]=!0)}function Be(Z){!1!==c[Z]&&(i.disable(Z),c[Z]=!1)}Ne[i.TEXTURE_2D]=le(i.TEXTURE_2D,i.TEXTURE_2D,1),Ne[i.TEXTURE_CUBE_MAP]=le(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ne[i.TEXTURE_2D_ARRAY]=le(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ne[i.TEXTURE_3D]=le(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),tt(i.DEPTH_TEST),s.setFunc(DC),ot(!1),Me(d4),tt(i.CULL_FACE),We(nd);const Cn={[Jh]:i.FUNC_ADD,[Zse]:i.FUNC_SUBTRACT,[Qse]:i.FUNC_REVERSE_SUBTRACT};Cn[Jse]=i.MIN,Cn[eoe]=i.MAX;const N={[toe]:i.ZERO,[noe]:i.ONE,[ioe]:i.SRC_COLOR,[hk]:i.SRC_ALPHA,[coe]:i.SRC_ALPHA_SATURATE,[aoe]:i.DST_COLOR,[soe]:i.DST_ALPHA,[roe]:i.ONE_MINUS_SRC_COLOR,[fk]:i.ONE_MINUS_SRC_ALPHA,[loe]:i.ONE_MINUS_DST_COLOR,[ooe]:i.ONE_MINUS_DST_ALPHA,[doe]:i.CONSTANT_COLOR,[uoe]:i.ONE_MINUS_CONSTANT_COLOR,[hoe]:i.CONSTANT_ALPHA,[foe]:i.ONE_MINUS_CONSTANT_ALPHA};function We(Z,Ye,Ce,Ae,et,rn,ti,xr,ms,fi){if(Z!==nd){if(!1===g&&(tt(i.BLEND),g=!0),Z===Kse)et=et||Ye,rn=rn||Ce,ti=ti||Ae,(Ye!==v||et!==x)&&(i.blendEquationSeparate(Cn[Ye],Cn[et]),v=Ye,x=et),(Ce!==y||Ae!==M||rn!==C||ti!==F)&&(i.blendFuncSeparate(N[Ce],N[Ae],N[rn],N[ti]),y=Ce,M=Ae,C=rn,F=ti),(!1===xr.equals(D)||ms!==k)&&(i.blendColor(xr.r,xr.g,xr.b,ms),D.copy(xr),k=ms),b=Z,B=!1;else if(Z!==b||fi!==B){if((v!==Jh||x!==Jh)&&(i.blendEquation(i.FUNC_ADD),v=Jh,x=Jh),fi)switch(Z){case Zm:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case f4:i.blendFunc(i.ONE,i.ONE);break;case p4:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case m4:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z)}else switch(Z){case Zm:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case f4:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case p4:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case m4:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z)}y=null,M=null,C=null,F=null,D.set(0,0,0),k=0,b=Z,B=fi}}else!0===g&&(Be(i.BLEND),g=!1)}function ot(Z){T!==Z&&(i.frontFace(Z?i.CW:i.CCW),T=Z)}function Me(Z){Z!==qse?(tt(i.CULL_FACE),Z!==A&&i.cullFace(Z===d4?i.BACK:Z===Xse?i.FRONT:i.FRONT_AND_BACK)):Be(i.CULL_FACE),A=Z}function at(Z,Ye,Ce){Z?(tt(i.POLYGON_OFFSET_FILL),(ie!==Ye||ne!==Ce)&&(i.polygonOffset(Ye,Ce),ie=Ye,ne=Ce)):Be(i.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:o},enable:tt,disable:Be,bindFramebuffer:function wt(Z,Ye){return d[Z]!==Ye&&(i.bindFramebuffer(Z,Ye),d[Z]=Ye,Z===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=Ye),Z===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=Ye),!0)},drawBuffers:function Tt(Z,Ye){let Ce=p,Ae=!1;if(Z){Ce=h.get(Ye),void 0===Ce&&(Ce=[],h.set(Ye,Ce));const et=Z.textures;if(Ce.length!==et.length||Ce[0]!==i.COLOR_ATTACHMENT0){for(let rn=0,ti=et.length;rn<ti;rn++)Ce[rn]=i.COLOR_ATTACHMENT0+rn;Ce.length=et.length,Ae=!0}}else Ce[0]!==i.BACK&&(Ce[0]=i.BACK,Ae=!0);Ae&&i.drawBuffers(Ce)},useProgram:function Dt(Z){return m!==Z&&(i.useProgram(Z),m=Z,!0)},setBlending:We,setMaterial:function Ue(Z,Ye){Z.side===us?Be(i.CULL_FACE):tt(i.CULL_FACE);let Ce=Z.side===Lo;Ye&&(Ce=!Ce),ot(Ce),Z.blending===Zm&&!1===Z.transparent?We(nd):We(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),s.setFunc(Z.depthFunc),s.setTest(Z.depthTest),s.setMask(Z.depthWrite),r.setMask(Z.colorWrite);const Ae=Z.stencilWrite;o.setTest(Ae),Ae&&(o.setMask(Z.stencilWriteMask),o.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),o.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),at(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),!0===Z.alphaToCoverage?tt(i.SAMPLE_ALPHA_TO_COVERAGE):Be(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ot,setCullFace:Me,setLineWidth:function Gt(Z){Z!==j&&(ge&&i.lineWidth(Z),j=Z)},setPolygonOffset:at,setScissorTest:function _t(Z){Z?tt(i.SCISSOR_TEST):Be(i.SCISSOR_TEST)},activeTexture:function H(Z){void 0===Z&&(Z=i.TEXTURE0+se-1),J!==Z&&(i.activeTexture(Z),J=Z)},bindTexture:function R(Z,Ye,Ce){void 0===Ce&&(Ce=null===J?i.TEXTURE0+se-1:J);let Ae=we[Ce];void 0===Ae&&(Ae={type:void 0,texture:void 0},we[Ce]=Ae),(Ae.type!==Z||Ae.texture!==Ye)&&(J!==Ce&&(i.activeTexture(Ce),J=Ce),i.bindTexture(Z,Ye||Ne[Z]),Ae.type=Z,Ae.texture=Ye)},unbindTexture:function de(){const Z=we[J];void 0!==Z&&void 0!==Z.type&&(i.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)},compressedTexImage2D:function Fe(){try{i.compressedTexImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},compressedTexImage3D:function ke(){try{i.compressedTexImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texImage2D:function ft(){try{i.texImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texImage3D:function qn(){try{i.texImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},updateUBOMapping:function vn(Z,Ye){let Ce=l.get(Ye);void 0===Ce&&(Ce=new WeakMap,l.set(Ye,Ce));let Ae=Ce.get(Z);void 0===Ae&&(Ae=i.getUniformBlockIndex(Ye,Z.name),Ce.set(Z,Ae))},uniformBlockBinding:function Pn(Z,Ye){const Ae=l.get(Ye).get(Z);a.get(Ye)!==Ae&&(i.uniformBlockBinding(Ye,Ae,Z.__bindingPointIndex),a.set(Ye,Ae))},texStorage2D:function bn(){try{i.texStorage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texStorage3D:function Ge(){try{i.texStorage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texSubImage2D:function Ie(){try{i.texSubImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},texSubImage3D:function Vt(){try{i.texSubImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},compressedTexSubImage2D:function it(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},compressedTexSubImage3D:function pt(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}},scissor:function cn(Z){!1===Rt.equals(Z)&&(i.scissor(Z.x,Z.y,Z.z,Z.w),Rt.copy(Z))},viewport:function yt(Z){!1===nn.equals(Z)&&(i.viewport(Z.x,Z.y,Z.z,Z.w),nn.copy(Z))},reset:function Ki(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},J=null,we={},d={},h=new WeakMap,p=[],m=null,g=!1,b=null,v=null,y=null,M=null,x=null,C=null,F=null,D=new Ze(0,0,0),k=0,B=!1,T=null,A=null,j=null,ie=null,ne=null,Rt.set(0,0,i.canvas.width,i.canvas.height),nn.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),o.reset()}}}function DP(i,t,e,n){const r=function Aue(i){switch(i){case id:case _4:return{byteLength:1,components:1};case bb:case v4:case Jm:return{byteLength:2,components:1};case _k:case vk:return{byteLength:2,components:4};case wu:case gk:case ra:return{byteLength:4,components:1};case y4:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}(n);switch(e){case b4:case w4:return i*t;case M4:return i*t*2;case yk:case kC:return i*t/r.components*r.byteLength;case C4:case bk:return i*t*2/r.components*r.byteLength;case x4:return i*t*3/r.components*r.byteLength;case No:case xk:return i*t*4/r.components*r.byteLength;case PC:case OC:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case FC:case LC:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case Mk:case Sk:return Math.max(i,16)*Math.max(t,8)/4;case wk:case Ck:return Math.max(i,8)*Math.max(t,8)/2;case Ek:case Ak:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case Dk:case Tk:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case Ik:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case Rk:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case kk:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case Pk:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case Ok:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case Fk:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case Lk:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case Nk:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case Bk:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case Uk:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case Vk:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case zk:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case Hk:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case NC:case $k:case Gk:return Math.ceil(i/4)*Math.ceil(t/4)*16;case S4:case Wk:return Math.ceil(i/4)*Math.ceil(t/4)*8;case jk:case Yk:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Due(i,t,e,n,r,s,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new xe,d=new WeakMap;let h;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function g(H,R){return m?new OffscreenCanvas(H,R):Cb("canvas")}function b(H,R,de){let Fe=1;const ke=_t(H);if((ke.width>de||ke.height>de)&&(Fe=de/Math.max(ke.width,ke.height)),Fe<1){if(typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&H instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&H instanceof ImageBitmap||typeof VideoFrame<"u"&&H instanceof VideoFrame){const Ie=Math.floor(Fe*ke.width),Vt=Math.floor(Fe*ke.height);void 0===h&&(h=g(Ie,Vt));const it=R?g(Ie,Vt):h;return it.width=Ie,it.height=Vt,it.getContext("2d").drawImage(H,0,0,Ie,Vt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ke.width+"x"+ke.height+") to ("+Ie+"x"+Vt+")."),it}return"data"in H&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ke.width+"x"+ke.height+")."),H}return H}function v(H){return H.generateMipmaps&&H.minFilter!==vr&&H.minFilter!==cr}function y(H){i.generateMipmap(H)}function M(H,R,de,Fe,ke=!1){if(null!==H){if(void 0!==i[H])return i[H];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+H+"'")}let Ie=R;if(R===i.RED&&(de===i.FLOAT&&(Ie=i.R32F),de===i.HALF_FLOAT&&(Ie=i.R16F),de===i.UNSIGNED_BYTE&&(Ie=i.R8)),R===i.RED_INTEGER&&(de===i.UNSIGNED_BYTE&&(Ie=i.R8UI),de===i.UNSIGNED_SHORT&&(Ie=i.R16UI),de===i.UNSIGNED_INT&&(Ie=i.R32UI),de===i.BYTE&&(Ie=i.R8I),de===i.SHORT&&(Ie=i.R16I),de===i.INT&&(Ie=i.R32I)),R===i.RG&&(de===i.FLOAT&&(Ie=i.RG32F),de===i.HALF_FLOAT&&(Ie=i.RG16F),de===i.UNSIGNED_BYTE&&(Ie=i.RG8)),R===i.RG_INTEGER&&(de===i.UNSIGNED_BYTE&&(Ie=i.RG8UI),de===i.UNSIGNED_SHORT&&(Ie=i.RG16UI),de===i.UNSIGNED_INT&&(Ie=i.RG32UI),de===i.BYTE&&(Ie=i.RG8I),de===i.SHORT&&(Ie=i.RG16I),de===i.INT&&(Ie=i.RG32I)),R===i.RGB&&de===i.UNSIGNED_INT_5_9_9_9_REV&&(Ie=i.RGB9_E5),R===i.RGBA){const Vt=ke?VC:ei.getTransfer(Fe);de===i.FLOAT&&(Ie=i.RGBA32F),de===i.HALF_FLOAT&&(Ie=i.RGBA16F),de===i.UNSIGNED_BYTE&&(Ie=Vt===Fi?i.SRGB8_ALPHA8:i.RGBA8),de===i.UNSIGNED_SHORT_4_4_4_4&&(Ie=i.RGBA4),de===i.UNSIGNED_SHORT_5_5_5_1&&(Ie=i.RGB5_A1)}return(Ie===i.R16F||Ie===i.R32F||Ie===i.RG16F||Ie===i.RG32F||Ie===i.RGBA16F||Ie===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ie}function x(H,R){let de;return H?null===R||R===wu||R===eg?de=i.DEPTH24_STENCIL8:R===ra?de=i.DEPTH32F_STENCIL8:R===bb&&(de=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===R||R===wu||R===eg?de=i.DEPTH_COMPONENT24:R===ra?de=i.DEPTH_COMPONENT32F:R===bb&&(de=i.DEPTH_COMPONENT16),de}function C(H,R){return!0===v(H)||H.isFramebufferTexture&&H.minFilter!==vr&&H.minFilter!==cr?Math.log2(Math.max(R.width,R.height))+1:void 0!==H.mipmaps&&H.mipmaps.length>0?H.mipmaps.length:H.isCompressedTexture&&Array.isArray(H.image)?R.mipmaps.length:1}function F(H){const R=H.target;R.removeEventListener("dispose",F),function k(H){const R=n.get(H);if(void 0===R.__webglInit)return;const de=H.source,Fe=p.get(de);if(Fe){const ke=Fe[R.__cacheKey];ke.usedTimes--,0===ke.usedTimes&&B(H),0===Object.keys(Fe).length&&p.delete(de)}n.remove(H)}(R),R.isVideoTexture&&d.delete(R)}function D(H){const R=H.target;R.removeEventListener("dispose",D),function T(H){const R=n.get(H);if(H.depthTexture&&H.depthTexture.dispose(),H.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++){if(Array.isArray(R.__webglFramebuffer[Fe]))for(let ke=0;ke<R.__webglFramebuffer[Fe].length;ke++)i.deleteFramebuffer(R.__webglFramebuffer[Fe][ke]);else i.deleteFramebuffer(R.__webglFramebuffer[Fe]);R.__webglDepthbuffer&&i.deleteRenderbuffer(R.__webglDepthbuffer[Fe])}else{if(Array.isArray(R.__webglFramebuffer))for(let Fe=0;Fe<R.__webglFramebuffer.length;Fe++)i.deleteFramebuffer(R.__webglFramebuffer[Fe]);else i.deleteFramebuffer(R.__webglFramebuffer);if(R.__webglDepthbuffer&&i.deleteRenderbuffer(R.__webglDepthbuffer),R.__webglMultisampledFramebuffer&&i.deleteFramebuffer(R.__webglMultisampledFramebuffer),R.__webglColorRenderbuffer)for(let Fe=0;Fe<R.__webglColorRenderbuffer.length;Fe++)R.__webglColorRenderbuffer[Fe]&&i.deleteRenderbuffer(R.__webglColorRenderbuffer[Fe]);R.__webglDepthRenderbuffer&&i.deleteRenderbuffer(R.__webglDepthRenderbuffer)}const de=H.textures;for(let Fe=0,ke=de.length;Fe<ke;Fe++){const Ie=n.get(de[Fe]);Ie.__webglTexture&&(i.deleteTexture(Ie.__webglTexture),o.memory.textures--),n.remove(de[Fe])}n.remove(H)}(R)}function B(H){const R=n.get(H);i.deleteTexture(R.__webglTexture),delete p.get(H.source)[R.__cacheKey],o.memory.textures--}let A=0;function se(H,R){const de=n.get(H);if(H.isVideoTexture&&function Gt(H){const R=o.render.frame;d.get(H)!==R&&(d.set(H,R),H.update())}(H),!1===H.isRenderTargetTexture&&H.version>0&&de.__version!==H.version){const Fe=H.image;if(null===Fe)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Fe.complete)return void nn(de,H,R);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(i.TEXTURE_2D,de.__webglTexture,i.TEXTURE0+R)}const J={[Kr]:i.REPEAT,[Qi]:i.CLAMP_TO_EDGE,[vb]:i.MIRRORED_REPEAT},we={[vr]:i.NEAREST,[mk]:i.NEAREST_MIPMAP_NEAREST,[Qm]:i.NEAREST_MIPMAP_LINEAR,[cr]:i.LINEAR,[yb]:i.LINEAR_MIPMAP_NEAREST,[Dl]:i.LINEAR_MIPMAP_LINEAR},Ve={[Boe]:i.NEVER,[Goe]:i.ALWAYS,[Uoe]:i.LESS,[T4]:i.LEQUAL,[Voe]:i.EQUAL,[$oe]:i.GEQUAL,[zoe]:i.GREATER,[Hoe]:i.NOTEQUAL};function Ke(H,R){if(R.type===ra&&!1===t.has("OES_texture_float_linear")&&(R.magFilter===cr||R.magFilter===yb||R.magFilter===Qm||R.magFilter===Dl||R.minFilter===cr||R.minFilter===yb||R.minFilter===Qm||R.minFilter===Dl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(H,i.TEXTURE_WRAP_S,J[R.wrapS]),i.texParameteri(H,i.TEXTURE_WRAP_T,J[R.wrapT]),(H===i.TEXTURE_3D||H===i.TEXTURE_2D_ARRAY)&&i.texParameteri(H,i.TEXTURE_WRAP_R,J[R.wrapR]),i.texParameteri(H,i.TEXTURE_MAG_FILTER,we[R.magFilter]),i.texParameteri(H,i.TEXTURE_MIN_FILTER,we[R.minFilter]),R.compareFunction&&(i.texParameteri(H,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(H,i.TEXTURE_COMPARE_FUNC,Ve[R.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(R.magFilter===vr||R.minFilter!==Qm&&R.minFilter!==Dl||R.type===ra&&!1===t.has("OES_texture_float_linear"))return;if(R.anisotropy>1||n.get(R).__currentAnisotropy){const de=t.get("EXT_texture_filter_anisotropic");i.texParameterf(H,de.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(R.anisotropy,r.getMaxAnisotropy())),n.get(R).__currentAnisotropy=R.anisotropy}}}function Rt(H,R){let de=!1;void 0===H.__webglInit&&(H.__webglInit=!0,R.addEventListener("dispose",F));const Fe=R.source;let ke=p.get(Fe);void 0===ke&&(ke={},p.set(Fe,ke));const Ie=function ne(H){const R=[];return R.push(H.wrapS),R.push(H.wrapT),R.push(H.wrapR||0),R.push(H.magFilter),R.push(H.minFilter),R.push(H.anisotropy),R.push(H.internalFormat),R.push(H.format),R.push(H.type),R.push(H.generateMipmaps),R.push(H.premultiplyAlpha),R.push(H.flipY),R.push(H.unpackAlignment),R.push(H.colorSpace),R.join()}(R);if(Ie!==H.__cacheKey){void 0===ke[Ie]&&(ke[Ie]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,de=!0),ke[Ie].usedTimes++;const Vt=ke[H.__cacheKey];void 0!==Vt&&(ke[H.__cacheKey].usedTimes--,0===Vt.usedTimes&&B(R)),H.__cacheKey=Ie,H.__webglTexture=ke[Ie].texture}return de}function nn(H,R,de){let Fe=i.TEXTURE_2D;(R.isDataArrayTexture||R.isCompressedArrayTexture)&&(Fe=i.TEXTURE_2D_ARRAY),R.isData3DTexture&&(Fe=i.TEXTURE_3D);const ke=Rt(H,R),Ie=R.source;e.bindTexture(Fe,H.__webglTexture,i.TEXTURE0+de);const Vt=n.get(Ie);if(Ie.version!==Vt.__version||!0===ke){e.activeTexture(i.TEXTURE0+de);const it=ei.getPrimaries(ei.workingColorSpace),pt=R.colorSpace===Mu?null:ei.getPrimaries(R.colorSpace),bn=R.colorSpace===Mu||it===pt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,R.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,R.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,bn);let Ge=b(R.image,!1,r.maxTextureSize);Ge=at(R,Ge);const ft=s.convert(R.format,R.colorSpace),qn=s.convert(R.type);let yt,cn=M(R.internalFormat,ft,qn,R.colorSpace,R.isVideoTexture);Ke(Fe,R);const vn=R.mipmaps,Pn=!0!==R.isVideoTexture,Ki=void 0===Vt.__version||!0===ke,Z=Ie.dataReady,Ye=C(R,Ge);if(R.isDepthTexture)cn=x(R.format===ng,R.type),Ki&&(Pn?e.texStorage2D(i.TEXTURE_2D,1,cn,Ge.width,Ge.height):e.texImage2D(i.TEXTURE_2D,0,cn,Ge.width,Ge.height,0,ft,qn,null));else if(R.isDataTexture)if(vn.length>0){Pn&&Ki&&e.texStorage2D(i.TEXTURE_2D,Ye,cn,vn[0].width,vn[0].height);for(let Ce=0,Ae=vn.length;Ce<Ae;Ce++)yt=vn[Ce],Pn?Z&&e.texSubImage2D(i.TEXTURE_2D,Ce,0,0,yt.width,yt.height,ft,qn,yt.data):e.texImage2D(i.TEXTURE_2D,Ce,cn,yt.width,yt.height,0,ft,qn,yt.data);R.generateMipmaps=!1}else Pn?(Ki&&e.texStorage2D(i.TEXTURE_2D,Ye,cn,Ge.width,Ge.height),Z&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Ge.width,Ge.height,ft,qn,Ge.data)):e.texImage2D(i.TEXTURE_2D,0,cn,Ge.width,Ge.height,0,ft,qn,Ge.data);else if(R.isCompressedTexture)if(R.isCompressedArrayTexture){Pn&&Ki&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ye,cn,vn[0].width,vn[0].height,Ge.depth);for(let Ce=0,Ae=vn.length;Ce<Ae;Ce++)if(yt=vn[Ce],R.format!==No)if(null!==ft)if(Pn){if(Z)if(R.layerUpdates.size>0){const et=DP(yt.width,yt.height,R.format,R.type);for(const rn of R.layerUpdates){const ti=yt.data.subarray(rn*et/yt.data.BYTES_PER_ELEMENT,(rn+1)*et/yt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ce,0,0,rn,yt.width,yt.height,1,ft,ti,0,0)}R.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ce,0,0,0,yt.width,yt.height,Ge.depth,ft,yt.data,0,0)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ce,cn,yt.width,yt.height,Ge.depth,0,yt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Pn?Z&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Ce,0,0,0,yt.width,yt.height,Ge.depth,ft,qn,yt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Ce,cn,yt.width,yt.height,Ge.depth,0,ft,qn,yt.data)}else{Pn&&Ki&&e.texStorage2D(i.TEXTURE_2D,Ye,cn,vn[0].width,vn[0].height);for(let Ce=0,Ae=vn.length;Ce<Ae;Ce++)yt=vn[Ce],R.format!==No?null!==ft?Pn?Z&&e.compressedTexSubImage2D(i.TEXTURE_2D,Ce,0,0,yt.width,yt.height,ft,yt.data):e.compressedTexImage2D(i.TEXTURE_2D,Ce,cn,yt.width,yt.height,0,yt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Pn?Z&&e.texSubImage2D(i.TEXTURE_2D,Ce,0,0,yt.width,yt.height,ft,qn,yt.data):e.texImage2D(i.TEXTURE_2D,Ce,cn,yt.width,yt.height,0,ft,qn,yt.data)}else if(R.isDataArrayTexture)if(Pn){if(Ki&&e.texStorage3D(i.TEXTURE_2D_ARRAY,Ye,cn,Ge.width,Ge.height,Ge.depth),Z)if(R.layerUpdates.size>0){const Ce=DP(Ge.width,Ge.height,R.format,R.type);for(const Ae of R.layerUpdates){const et=Ge.data.subarray(Ae*Ce/Ge.data.BYTES_PER_ELEMENT,(Ae+1)*Ce/Ge.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ae,Ge.width,Ge.height,1,ft,qn,et)}R.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ge.width,Ge.height,Ge.depth,ft,qn,Ge.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,cn,Ge.width,Ge.height,Ge.depth,0,ft,qn,Ge.data);else if(R.isData3DTexture)Pn?(Ki&&e.texStorage3D(i.TEXTURE_3D,Ye,cn,Ge.width,Ge.height,Ge.depth),Z&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ge.width,Ge.height,Ge.depth,ft,qn,Ge.data)):e.texImage3D(i.TEXTURE_3D,0,cn,Ge.width,Ge.height,Ge.depth,0,ft,qn,Ge.data);else if(R.isFramebufferTexture){if(Ki)if(Pn)e.texStorage2D(i.TEXTURE_2D,Ye,cn,Ge.width,Ge.height);else{let Ce=Ge.width,Ae=Ge.height;for(let et=0;et<Ye;et++)e.texImage2D(i.TEXTURE_2D,et,cn,Ce,Ae,0,ft,qn,null),Ce>>=1,Ae>>=1}}else if(vn.length>0){if(Pn&&Ki){const Ce=_t(vn[0]);e.texStorage2D(i.TEXTURE_2D,Ye,cn,Ce.width,Ce.height)}for(let Ce=0,Ae=vn.length;Ce<Ae;Ce++)yt=vn[Ce],Pn?Z&&e.texSubImage2D(i.TEXTURE_2D,Ce,0,0,ft,qn,yt):e.texImage2D(i.TEXTURE_2D,Ce,cn,ft,qn,yt);R.generateMipmaps=!1}else if(Pn){if(Ki){const Ce=_t(Ge);e.texStorage2D(i.TEXTURE_2D,Ye,cn,Ce.width,Ce.height)}Z&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,ft,qn,Ge)}else e.texImage2D(i.TEXTURE_2D,0,cn,ft,qn,Ge);v(R)&&y(Fe),Vt.__version=Ie.version,R.onUpdate&&R.onUpdate(R)}H.__version=R.version}function Ne(H,R,de,Fe,ke,Ie){const Vt=s.convert(de.format,de.colorSpace),it=s.convert(de.type),pt=M(de.internalFormat,Vt,it,de.colorSpace);if(!n.get(R).__hasExternalTextures){const Ge=Math.max(1,R.width>>Ie),ft=Math.max(1,R.height>>Ie);ke===i.TEXTURE_3D||ke===i.TEXTURE_2D_ARRAY?e.texImage3D(ke,Ie,pt,Ge,ft,R.depth,0,Vt,it,null):e.texImage2D(ke,Ie,pt,Ge,ft,0,Vt,it,null)}e.bindFramebuffer(i.FRAMEBUFFER,H),Me(R)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Fe,ke,n.get(de).__webglTexture,0,ot(R)):(ke===i.TEXTURE_2D||ke>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ke<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Fe,ke,n.get(de).__webglTexture,Ie),e.bindFramebuffer(i.FRAMEBUFFER,null)}function tt(H,R,de){if(i.bindRenderbuffer(i.RENDERBUFFER,H),R.depthBuffer){const Fe=R.depthTexture,Ie=x(R.stencilBuffer,Fe&&Fe.isDepthTexture?Fe.type:null),Vt=R.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,it=ot(R);Me(R)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,it,Ie,R.width,R.height):de?i.renderbufferStorageMultisample(i.RENDERBUFFER,it,Ie,R.width,R.height):i.renderbufferStorage(i.RENDERBUFFER,Ie,R.width,R.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Vt,i.RENDERBUFFER,H)}else{const Fe=R.textures;for(let ke=0;ke<Fe.length;ke++){const Ie=Fe[ke],Vt=s.convert(Ie.format,Ie.colorSpace),it=s.convert(Ie.type),pt=M(Ie.internalFormat,Vt,it,Ie.colorSpace),bn=ot(R);de&&!1===Me(R)?i.renderbufferStorageMultisample(i.RENDERBUFFER,bn,pt,R.width,R.height):Me(R)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,bn,pt,R.width,R.height):i.renderbufferStorage(i.RENDERBUFFER,pt,R.width,R.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function wt(H){const R=n.get(H),de=!0===H.isWebGLCubeRenderTarget;if(H.depthTexture&&!R.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");!function Be(H,R){if(R&&R.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,H),!R.depthTexture||!R.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(R.depthTexture).__webglTexture||R.depthTexture.image.width!==R.width||R.depthTexture.image.height!==R.height)&&(R.depthTexture.image.width=R.width,R.depthTexture.image.height=R.height,R.depthTexture.needsUpdate=!0),se(R.depthTexture,0);const Fe=n.get(R.depthTexture).__webglTexture,ke=ot(R);if(R.depthTexture.format===tg)Me(R)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Fe,0,ke):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Fe,0);else{if(R.depthTexture.format!==ng)throw new Error("Unknown depthTexture format");Me(R)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Fe,0,ke):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Fe,0)}}(R.__webglFramebuffer,H)}else if(de){R.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)e.bindFramebuffer(i.FRAMEBUFFER,R.__webglFramebuffer[Fe]),R.__webglDepthbuffer[Fe]=i.createRenderbuffer(),tt(R.__webglDepthbuffer[Fe],H,!1)}else e.bindFramebuffer(i.FRAMEBUFFER,R.__webglFramebuffer),R.__webglDepthbuffer=i.createRenderbuffer(),tt(R.__webglDepthbuffer,H,!1);e.bindFramebuffer(i.FRAMEBUFFER,null)}const N=[],We=[];function ot(H){return Math.min(r.maxSamples,H.samples)}function Me(H){const R=n.get(H);return H.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==R.__useRenderToTexture}function at(H,R){const de=H.colorSpace,Fe=H.format,ke=H.type;return!0===H.isCompressedTexture||!0===H.isVideoTexture||de!==fs&&de!==Mu&&(ei.getTransfer(de)===Fi?(Fe!==No||ke!==id)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",de)),R}function _t(H){return typeof HTMLImageElement<"u"&&H instanceof HTMLImageElement?(c.width=H.naturalWidth||H.width,c.height=H.naturalHeight||H.height):typeof VideoFrame<"u"&&H instanceof VideoFrame?(c.width=H.displayWidth,c.height=H.displayHeight):(c.width=H.width,c.height=H.height),c}this.allocateTextureUnit=function ie(){const H=A;return H>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+H+" texture units while this GPU supports only "+r.maxTextures),A+=1,H},this.resetTextureUnits=function j(){A=0},this.setTexture2D=se,this.setTexture2DArray=function ge(H,R){const de=n.get(H);H.version>0&&de.__version!==H.version?nn(de,H,R):e.bindTexture(i.TEXTURE_2D_ARRAY,de.__webglTexture,i.TEXTURE0+R)},this.setTexture3D=function q(H,R){const de=n.get(H);H.version>0&&de.__version!==H.version?nn(de,H,R):e.bindTexture(i.TEXTURE_3D,de.__webglTexture,i.TEXTURE0+R)},this.setTextureCube=function re(H,R){const de=n.get(H);H.version>0&&de.__version!==H.version?function le(H,R,de){if(6!==R.image.length)return;const Fe=Rt(H,R),ke=R.source;e.bindTexture(i.TEXTURE_CUBE_MAP,H.__webglTexture,i.TEXTURE0+de);const Ie=n.get(ke);if(ke.version!==Ie.__version||!0===Fe){e.activeTexture(i.TEXTURE0+de);const Vt=ei.getPrimaries(ei.workingColorSpace),it=R.colorSpace===Mu?null:ei.getPrimaries(R.colorSpace),pt=R.colorSpace===Mu||Vt===it?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,R.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,R.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,R.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);const bn=R.isCompressedTexture||R.image[0].isCompressedTexture,Ge=R.image[0]&&R.image[0].isDataTexture,ft=[];for(let Ae=0;Ae<6;Ae++)ft[Ae]=bn||Ge?Ge?R.image[Ae].image:R.image[Ae]:b(R.image[Ae],!0,r.maxCubemapSize),ft[Ae]=at(R,ft[Ae]);const qn=ft[0],cn=s.convert(R.format,R.colorSpace),yt=s.convert(R.type),vn=M(R.internalFormat,cn,yt,R.colorSpace),Pn=!0!==R.isVideoTexture,Ki=void 0===Ie.__version||!0===Fe,Z=ke.dataReady;let Ce,Ye=C(R,qn);if(Ke(i.TEXTURE_CUBE_MAP,R),bn){Pn&&Ki&&e.texStorage2D(i.TEXTURE_CUBE_MAP,Ye,vn,qn.width,qn.height);for(let Ae=0;Ae<6;Ae++){Ce=ft[Ae].mipmaps;for(let et=0;et<Ce.length;et++){const rn=Ce[et];R.format!==No?null!==cn?Pn?Z&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et,0,0,rn.width,rn.height,cn,rn.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et,vn,rn.width,rn.height,0,rn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pn?Z&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et,0,0,rn.width,rn.height,cn,yt,rn.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et,vn,rn.width,rn.height,0,cn,yt,rn.data)}}}else{if(Ce=R.mipmaps,Pn&&Ki){Ce.length>0&&Ye++;const Ae=_t(ft[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,Ye,vn,Ae.width,Ae.height)}for(let Ae=0;Ae<6;Ae++)if(Ge){Pn?Z&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,ft[Ae].width,ft[Ae].height,cn,yt,ft[Ae].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,vn,ft[Ae].width,ft[Ae].height,0,cn,yt,ft[Ae].data);for(let et=0;et<Ce.length;et++){const ti=Ce[et].image[Ae].image;Pn?Z&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et+1,0,0,ti.width,ti.height,cn,yt,ti.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et+1,vn,ti.width,ti.height,0,cn,yt,ti.data)}}else{Pn?Z&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,0,0,cn,yt,ft[Ae]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,0,vn,cn,yt,ft[Ae]);for(let et=0;et<Ce.length;et++){const rn=Ce[et];Pn?Z&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et+1,0,0,cn,yt,rn.image[Ae]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ae,et+1,vn,cn,yt,rn.image[Ae])}}}v(R)&&y(i.TEXTURE_CUBE_MAP),Ie.__version=ke.version,R.onUpdate&&R.onUpdate(R)}H.__version=R.version}(de,H,R):e.bindTexture(i.TEXTURE_CUBE_MAP,de.__webglTexture,i.TEXTURE0+R)},this.rebindTextures=function Tt(H,R,de){const Fe=n.get(H);void 0!==R&&Ne(Fe.__webglFramebuffer,H,H.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),void 0!==de&&wt(H)},this.setupRenderTarget=function Dt(H){const R=H.texture,de=n.get(H),Fe=n.get(R);H.addEventListener("dispose",D);const ke=H.textures,Ie=!0===H.isWebGLCubeRenderTarget,Vt=ke.length>1;if(Vt||(void 0===Fe.__webglTexture&&(Fe.__webglTexture=i.createTexture()),Fe.__version=R.version,o.memory.textures++),Ie){de.__webglFramebuffer=[];for(let it=0;it<6;it++)if(R.mipmaps&&R.mipmaps.length>0){de.__webglFramebuffer[it]=[];for(let pt=0;pt<R.mipmaps.length;pt++)de.__webglFramebuffer[it][pt]=i.createFramebuffer()}else de.__webglFramebuffer[it]=i.createFramebuffer()}else{if(R.mipmaps&&R.mipmaps.length>0){de.__webglFramebuffer=[];for(let it=0;it<R.mipmaps.length;it++)de.__webglFramebuffer[it]=i.createFramebuffer()}else de.__webglFramebuffer=i.createFramebuffer();if(Vt)for(let it=0,pt=ke.length;it<pt;it++){const bn=n.get(ke[it]);void 0===bn.__webglTexture&&(bn.__webglTexture=i.createTexture(),o.memory.textures++)}if(H.samples>0&&!1===Me(H)){de.__webglMultisampledFramebuffer=i.createFramebuffer(),de.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,de.__webglMultisampledFramebuffer);for(let it=0;it<ke.length;it++){const pt=ke[it];de.__webglColorRenderbuffer[it]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,de.__webglColorRenderbuffer[it]);const bn=s.convert(pt.format,pt.colorSpace),Ge=s.convert(pt.type),ft=M(pt.internalFormat,bn,Ge,pt.colorSpace,!0===H.isXRRenderTarget),qn=ot(H);i.renderbufferStorageMultisample(i.RENDERBUFFER,qn,ft,H.width,H.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+it,i.RENDERBUFFER,de.__webglColorRenderbuffer[it])}i.bindRenderbuffer(i.RENDERBUFFER,null),H.depthBuffer&&(de.__webglDepthRenderbuffer=i.createRenderbuffer(),tt(de.__webglDepthRenderbuffer,H,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ie){e.bindTexture(i.TEXTURE_CUBE_MAP,Fe.__webglTexture),Ke(i.TEXTURE_CUBE_MAP,R);for(let it=0;it<6;it++)if(R.mipmaps&&R.mipmaps.length>0)for(let pt=0;pt<R.mipmaps.length;pt++)Ne(de.__webglFramebuffer[it][pt],H,R,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+it,pt);else Ne(de.__webglFramebuffer[it],H,R,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+it,0);v(R)&&y(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(Vt){for(let it=0,pt=ke.length;it<pt;it++){const bn=ke[it],Ge=n.get(bn);e.bindTexture(i.TEXTURE_2D,Ge.__webglTexture),Ke(i.TEXTURE_2D,bn),Ne(de.__webglFramebuffer,H,bn,i.COLOR_ATTACHMENT0+it,i.TEXTURE_2D,0),v(bn)&&y(i.TEXTURE_2D)}e.unbindTexture()}else{let it=i.TEXTURE_2D;if((H.isWebGL3DRenderTarget||H.isWebGLArrayRenderTarget)&&(it=H.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(it,Fe.__webglTexture),Ke(it,R),R.mipmaps&&R.mipmaps.length>0)for(let pt=0;pt<R.mipmaps.length;pt++)Ne(de.__webglFramebuffer[pt],H,R,i.COLOR_ATTACHMENT0,it,pt);else Ne(de.__webglFramebuffer,H,R,i.COLOR_ATTACHMENT0,it,0);v(R)&&y(it),e.unbindTexture()}H.depthBuffer&&wt(H)},this.updateRenderTargetMipmap=function Cn(H){const R=H.textures;for(let de=0,Fe=R.length;de<Fe;de++){const ke=R[de];if(v(ke)){const Ie=H.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Vt=n.get(ke).__webglTexture;e.bindTexture(Ie,Vt),y(Ie),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ue(H){if(H.samples>0)if(!1===Me(H)){const R=H.textures,de=H.width,Fe=H.height;let ke=i.COLOR_BUFFER_BIT;const Ie=H.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Vt=n.get(H),it=R.length>1;if(it)for(let pt=0;pt<R.length;pt++)e.bindFramebuffer(i.FRAMEBUFFER,Vt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+pt,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,Vt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+pt,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,Vt.__webglMultisampledFramebuffer),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Vt.__webglFramebuffer);for(let pt=0;pt<R.length;pt++){if(H.resolveDepthBuffer&&(H.depthBuffer&&(ke|=i.DEPTH_BUFFER_BIT),H.stencilBuffer&&H.resolveStencilBuffer&&(ke|=i.STENCIL_BUFFER_BIT)),it){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Vt.__webglColorRenderbuffer[pt]);const bn=n.get(R[pt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,bn,0)}i.blitFramebuffer(0,0,de,Fe,0,0,de,Fe,ke,i.NEAREST),!0===l&&(N.length=0,We.length=0,N.push(i.COLOR_ATTACHMENT0+pt),H.depthBuffer&&!1===H.resolveDepthBuffer&&(N.push(Ie),We.push(Ie),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,We)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,N))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),it)for(let pt=0;pt<R.length;pt++){e.bindFramebuffer(i.FRAMEBUFFER,Vt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+pt,i.RENDERBUFFER,Vt.__webglColorRenderbuffer[pt]);const bn=n.get(R[pt]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,Vt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+pt,i.TEXTURE_2D,bn,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Vt.__webglMultisampledFramebuffer)}else H.depthBuffer&&!1===H.resolveDepthBuffer&&l&&i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[H.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=wt,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=Me}function Tue(i,t){return{convert:function e(n,r=Mu){let s;const o=ei.getTransfer(r);if(n===id)return i.UNSIGNED_BYTE;if(n===_k)return i.UNSIGNED_SHORT_4_4_4_4;if(n===vk)return i.UNSIGNED_SHORT_5_5_5_1;if(n===y4)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===_4)return i.BYTE;if(n===v4)return i.SHORT;if(n===bb)return i.UNSIGNED_SHORT;if(n===gk)return i.INT;if(n===wu)return i.UNSIGNED_INT;if(n===ra)return i.FLOAT;if(n===Jm)return i.HALF_FLOAT;if(n===b4)return i.ALPHA;if(n===x4)return i.RGB;if(n===No)return i.RGBA;if(n===w4)return i.LUMINANCE;if(n===M4)return i.LUMINANCE_ALPHA;if(n===tg)return i.DEPTH_COMPONENT;if(n===ng)return i.DEPTH_STENCIL;if(n===yk)return i.RED;if(n===kC)return i.RED_INTEGER;if(n===C4)return i.RG;if(n===bk)return i.RG_INTEGER;if(n===xk)return i.RGBA_INTEGER;if(n===PC||n===OC||n===FC||n===LC)if(o===Fi){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===PC)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===OC)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===FC)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===LC)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===PC)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===OC)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===FC)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===LC)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===wk||n===Mk||n===Ck||n===Sk){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===wk)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Mk)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Ck)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Sk)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Ek||n===Ak||n===Dk){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===Ek||n===Ak)return o===Fi?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===Dk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===Tk||n===Ik||n===Rk||n===kk||n===Pk||n===Ok||n===Fk||n===Lk||n===Nk||n===Bk||n===Uk||n===Vk||n===zk||n===Hk){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===Tk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ik)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Rk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===kk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Pk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Ok)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===Fk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===Lk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===Nk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===Bk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===Uk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===Vk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===zk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===Hk)return o===Fi?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===NC||n===$k||n===Gk){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===NC)return o===Fi?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===$k)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===Gk)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===S4||n===Wk||n===jk||n===Yk){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===NC)return s.COMPRESSED_RED_RGTC1_EXT;if(n===Wk)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===jk)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Yk)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===eg?i.UNSIGNED_INT_24_8:void 0!==i[n]?i[n]:null}}}class Iue extends br{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class la extends Fr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Rue={type:"move"};class TP{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new la,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new la,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new la,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const b of t.hand.values()){const v=e.getJointPose(b,n),y=this._getHandJoint(c,b);null!==v&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=null!==v}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,g=.005;c.inputState.pinching&&p>m+g?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&p<=m-g&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Rue)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new la;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Oue{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new Bo;t.properties.get(r).__webglTexture=e.texture,(e.depthNear!=n.depthNear||e.depthFar!=n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new kl({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new Tn(new uf(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Fue extends og{constructor(t,e){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,h=null,p=null,m=null,g=null;const b=new Oue,v=e.getContextAttributes();let y=null,M=null;const x=[],C=[],F=new xe;let D=null;const k=new br;k.layers.enable(1),k.viewport=new vi;const B=new br;B.layers.enable(2),B.viewport=new vi;const T=[k,B],A=new Iue;A.layers.enable(1),A.layers.enable(2);let j=null,ie=null;function ne(le){const Ne=C.indexOf(le.inputSource);if(-1===Ne)return;const tt=x[Ne];void 0!==tt&&(tt.update(le.inputSource,le.frame,c||o),tt.dispatchEvent({type:le.type,data:le.inputSource}))}function se(){r.removeEventListener("select",ne),r.removeEventListener("selectstart",ne),r.removeEventListener("selectend",ne),r.removeEventListener("squeeze",ne),r.removeEventListener("squeezestart",ne),r.removeEventListener("squeezeend",ne),r.removeEventListener("end",se),r.removeEventListener("inputsourceschange",ge);for(let le=0;le<x.length;le++){const Ne=C[le];null!==Ne&&(C[le]=null,x[le].disconnect(Ne))}j=null,ie=null,b.reset(),t.setRenderTarget(y),m=null,p=null,h=null,r=null,M=null,nn.stop(),n.isPresenting=!1,t.setPixelRatio(D),t.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}function ge(le){for(let Ne=0;Ne<le.removed.length;Ne++){const tt=le.removed[Ne],Be=C.indexOf(tt);Be>=0&&(C[Be]=null,x[Be].disconnect(tt))}for(let Ne=0;Ne<le.added.length;Ne++){const tt=le.added[Ne];let Be=C.indexOf(tt);if(-1===Be){for(let Tt=0;Tt<x.length;Tt++){if(Tt>=C.length){C.push(tt),Be=Tt;break}if(null===C[Tt]){C[Tt]=tt,Be=Tt;break}}if(-1===Be)break}const wt=x[Be];wt&&wt.connect(tt)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let Ne=x[le];return void 0===Ne&&(Ne=new TP,x[le]=Ne),Ne.getTargetRaySpace()},this.getControllerGrip=function(le){let Ne=x[le];return void 0===Ne&&(Ne=new TP,x[le]=Ne),Ne.getGripSpace()},this.getHand=function(le){let Ne=x[le];return void 0===Ne&&(Ne=new TP,x[le]=Ne),Ne.getHandSpace()},this.setFramebufferScaleFactor=function(le){s=le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(le){c=le},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return h},this.getFrame=function(){return g},this.getSession=function(){return r},this.setSession=function(){var le=je(function*(Ne){if(r=Ne,null!==r){if(y=t.getRenderTarget(),r.addEventListener("select",ne),r.addEventListener("selectstart",ne),r.addEventListener("selectend",ne),r.addEventListener("squeeze",ne),r.addEventListener("squeezestart",ne),r.addEventListener("squeezeend",ne),r.addEventListener("end",se),r.addEventListener("inputsourceschange",ge),!0!==v.xrCompatible&&(yield e.makeXRCompatible()),D=t.getPixelRatio(),t.getSize(F),void 0===r.renderState.layers)m=new XRWebGLLayer(r,e,{antialias:v.antialias,alpha:!0,depth:v.depth,stencil:v.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),t.setPixelRatio(1),t.setSize(m.framebufferWidth,m.framebufferHeight,!1),M=new Cu(m.framebufferWidth,m.framebufferHeight,{format:No,type:id,colorSpace:t.outputColorSpace,stencilBuffer:v.stencil});else{let tt=null,Be=null,wt=null;v.depth&&(wt=v.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,tt=v.stencil?ng:tg,Be=v.stencil?eg:wu);const Tt={colorFormat:e.RGBA8,depthFormat:wt,scaleFactor:s};h=new XRWebGLBinding(r,e),p=h.createProjectionLayer(Tt),r.updateRenderState({layers:[p]}),t.setPixelRatio(1),t.setSize(p.textureWidth,p.textureHeight,!1),M=new Cu(p.textureWidth,p.textureHeight,{format:No,type:id,depthTexture:new f5(p.textureWidth,p.textureHeight,Be,void 0,void 0,void 0,void 0,void 0,void 0,tt),stencilBuffer:v.stencil,colorSpace:t.outputColorSpace,samples:v.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues})}M.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),nn.setContext(r),nn.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Ne){return le.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};const q=new O,re=new O;function we(le,Ne){null===Ne?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(Ne.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(null===r)return;null!==b.texture&&(le.near=b.depthNear,le.far=b.depthFar),A.near=B.near=k.near=le.near,A.far=B.far=k.far=le.far,(j!==A.near||ie!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),j=A.near,ie=A.far,k.near=j,k.far=ie,B.near=j,B.far=ie,k.updateProjectionMatrix(),B.updateProjectionMatrix(),le.updateProjectionMatrix());const Ne=le.parent,tt=A.cameras;we(A,Ne);for(let Be=0;Be<tt.length;Be++)we(tt[Be],Ne);2===tt.length?function J(le,Ne,tt){q.setFromMatrixPosition(Ne.matrixWorld),re.setFromMatrixPosition(tt.matrixWorld);const Be=q.distanceTo(re),wt=Ne.projectionMatrix.elements,Tt=tt.projectionMatrix.elements,Dt=wt[14]/(wt[10]-1),Cn=wt[14]/(wt[10]+1),N=(wt[9]+1)/wt[5],We=(wt[9]-1)/wt[5],Ue=(wt[8]-1)/wt[0],ot=(Tt[8]+1)/Tt[0],Me=Dt*Ue,Gt=Dt*ot,at=Be/(-Ue+ot),_t=at*-Ue;Ne.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(_t),le.translateZ(at),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert();const H=Dt+at,R=Cn+at;le.projectionMatrix.makePerspective(Me-_t,Gt+(Be-_t),N*Cn/R*H,We*Cn/R*H,H,R),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}(A,k,B):A.projectionMatrix.copy(k.projectionMatrix),function Ve(le,Ne,tt){null===tt?le.matrix.copy(Ne.matrixWorld):(le.matrix.copy(tt.matrixWorld),le.matrix.invert(),le.matrix.multiply(Ne.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(Ne.projectionMatrix),le.projectionMatrixInverse.copy(Ne.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=2*ag*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}(le,A,Ne)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(le){l=le,null!==p&&(p.fixedFoveation=le),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=le)},this.hasDepthSensing=function(){return null!==b.texture},this.getDepthSensingMesh=function(){return b.getMesh(A)};let Ke=null;const nn=new s5;nn.setAnimationLoop(function Rt(le,Ne){if(d=Ne.getViewerPose(c||o),g=Ne,null!==d){const tt=d.views;null!==m&&(t.setRenderTargetFramebuffer(M,m.framebuffer),t.setRenderTarget(M));let Be=!1;tt.length!==A.cameras.length&&(A.cameras.length=0,Be=!0);for(let Tt=0;Tt<tt.length;Tt++){const Dt=tt[Tt];let Cn=null;if(null!==m)Cn=m.getViewport(Dt);else{const We=h.getViewSubImage(p,Dt);Cn=We.viewport,0===Tt&&(t.setRenderTargetTextures(M,We.colorTexture,p.ignoreDepthValues?void 0:We.depthStencilTexture),t.setRenderTarget(M))}let N=T[Tt];void 0===N&&(N=new br,N.layers.enable(Tt),N.viewport=new vi,T[Tt]=N),N.matrix.fromArray(Dt.transform.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale),N.projectionMatrix.fromArray(Dt.projectionMatrix),N.projectionMatrixInverse.copy(N.projectionMatrix).invert(),N.viewport.set(Cn.x,Cn.y,Cn.width,Cn.height),0===Tt&&(A.matrix.copy(N.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===Be&&A.cameras.push(N)}const wt=r.enabledFeatures;if(wt&&wt.includes("depth-sensing")){const Tt=h.getDepthInformation(tt[0]);Tt&&Tt.isValid&&Tt.texture&&b.init(t,Tt,r.renderState)}}for(let tt=0;tt<x.length;tt++){const Be=C[tt],wt=x[tt];null!==Be&&void 0!==wt&&wt.update(Be,Ne,c||o)}Ke&&Ke(le,Ne),Ne.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ne}),g=null}),this.setAnimationLoop=function(le){Ke=le},this.dispose=function(){}}}const mf=new ad,Lue=new Ut;function Nue(i,t){function e(v,y){!0===v.matrixAutoUpdate&&v.updateMatrix(),y.value.copy(v.matrix)}function s(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,e(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,e(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,e(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,y.side===Lo&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,e(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),y.side===Lo&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,e(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,e(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,e(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const M=t.get(y),x=M.envMap,C=M.envMapRotation;x&&(v.envMap.value=x,mf.copy(C),mf.x*=-1,mf.y*=-1,mf.z*=-1,x.isCubeTexture&&!1===x.isRenderTargetTexture&&(mf.y*=-1,mf.z*=-1),v.envMapRotation.value.setFromMatrix4(Lue.makeRotationFromEuler(mf)),v.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap&&(v.lightMap.value=y.lightMap,v.lightMapIntensity.value=y.lightMapIntensity,e(y.lightMap,v.lightMapTransform)),y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,e(y.aoMap,v.aoMapTransform))}return{refreshFogUniforms:function n(v,y){y.color.getRGB(v.fogColor.value,e5(i)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)},refreshMaterialUniforms:function r(v,y,M,x,C){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(v,y):y.isMeshToonMaterial?(s(v,y),function h(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}(v,y)):y.isMeshPhongMaterial?(s(v,y),function d(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}(v,y)):y.isMeshStandardMaterial?(s(v,y),function p(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,e(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,e(y.roughnessMap,v.roughnessMapTransform)),y.envMap&&(v.envMapIntensity.value=y.envMapIntensity)}(v,y),y.isMeshPhysicalMaterial&&function m(v,y,M){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,e(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,e(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,e(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,e(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,e(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Lo&&v.clearcoatNormalScale.value.negate())),y.dispersion>0&&(v.dispersion.value=y.dispersion),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,e(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,e(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=M.texture,v.transmissionSamplerSize.value.set(M.width,M.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,e(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,e(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,e(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,e(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,e(y.specularIntensityMap,v.specularIntensityMapTransform))}(v,y,C)):y.isMeshMatcapMaterial?(s(v,y),function g(v,y){y.matcap&&(v.matcap.value=y.matcap)}(v,y)):y.isMeshDepthMaterial?s(v,y):y.isMeshDistanceMaterial?(s(v,y),function b(v,y){const M=t.get(y).light;v.referencePosition.value.setFromMatrixPosition(M.matrixWorld),v.nearDistance.value=M.shadow.camera.near,v.farDistance.value=M.shadow.camera.far}(v,y)):y.isMeshNormalMaterial?s(v,y):y.isLineBasicMaterial?(function o(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,e(y.map,v.mapTransform))}(v,y),y.isLineDashedMaterial&&function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}(v,y)):y.isPointsMaterial?function l(v,y,M,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*M,v.scale.value=.5*x,y.map&&(v.map.value=y.map,e(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,e(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y,M,x):y.isSpriteMaterial?function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,e(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,e(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}}}function Bue(i,t,e,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function m(M,x,C,F){const D=M.value,k=x+"_"+C;if(void 0===F[k])return F[k]="number"==typeof D||"boolean"==typeof D?D:D.clone(),!0;{const B=F[k];if("number"==typeof D||"boolean"==typeof D){if(B!==D)return F[k]=D,!0}else if(!1===B.equals(D))return B.copy(D),!0}return!1}function b(M){const x={boundary:0,storage:0};return"number"==typeof M||"boolean"==typeof M?(x.boundary=4,x.storage=4):M.isVector2?(x.boundary=8,x.storage=8):M.isVector3||M.isColor?(x.boundary=16,x.storage=12):M.isVector4?(x.boundary=16,x.storage=16):M.isMatrix3?(x.boundary=48,x.storage=48):M.isMatrix4?(x.boundary=64,x.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),x}function v(M){const x=M.target;x.removeEventListener("dispose",v);const C=o.indexOf(x.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}return{bind:function l(M,x){n.uniformBlockBinding(M,x.program)},update:function c(M,x){let C=r[M.id];void 0===C&&(function g(M){const x=M.uniforms;let C=0;for(let k=0,B=x.length;k<B;k++){const T=Array.isArray(x[k])?x[k]:[x[k]];for(let A=0,j=T.length;A<j;A++){const ie=T[A],ne=Array.isArray(ie.value)?ie.value:[ie.value];for(let se=0,ge=ne.length;se<ge;se++){const re=b(ne[se]),J=C%16,we=J%re.boundary,Ve=J+we;C+=we,0!==Ve&&16-Ve<re.storage&&(C+=16-Ve),ie.__data=new Float32Array(re.storage/Float32Array.BYTES_PER_ELEMENT),ie.__offset=C,C+=re.storage}}}const D=C%16;D>0&&(C+=16-D),M.__size=C,M.__cache={}}(M),C=function d(M){const x=function h(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=x;const C=i.createBuffer(),F=M.__size,D=M.usage;return i.bindBuffer(i.UNIFORM_BUFFER,C),i.bufferData(i.UNIFORM_BUFFER,F,D),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,x,C),C}(M),r[M.id]=C,M.addEventListener("dispose",v)),n.updateUBOMapping(M,x.program);const D=t.render.frame;s[M.id]!==D&&(function p(M){const C=M.uniforms,F=M.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[M.id]);for(let D=0,k=C.length;D<k;D++){const B=Array.isArray(C[D])?C[D]:[C[D]];for(let T=0,A=B.length;T<A;T++){const j=B[T];if(!0===m(j,D,T,F)){const ie=j.__offset,ne=Array.isArray(j.value)?j.value:[j.value];let se=0;for(let ge=0;ge<ne.length;ge++){const q=ne[ge],re=b(q);"number"==typeof q||"boolean"==typeof q?(j.__data[0]=q,i.bufferSubData(i.UNIFORM_BUFFER,ie+se,j.__data)):q.isMatrix3?(j.__data[0]=q.elements[0],j.__data[1]=q.elements[1],j.__data[2]=q.elements[2],j.__data[3]=0,j.__data[4]=q.elements[3],j.__data[5]=q.elements[4],j.__data[6]=q.elements[5],j.__data[7]=0,j.__data[8]=q.elements[6],j.__data[9]=q.elements[7],j.__data[10]=q.elements[8],j.__data[11]=0):(q.toArray(j.__data,se),se+=re.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ie,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(M),s[M.id]=D)},dispose:function y(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}}}class Uue{constructor(t={}){const{canvas:e=cae(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=t;let p;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=o;const m=new Uint32Array(4),g=new Int32Array(4);let b=null,v=null;const y=[],M=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=hs,this.toneMapping=xu,this.toneMappingExposure=1;const x=this;let C=!1,F=0,D=0,k=null,B=-1,T=null;const A=new vi,j=new vi;let ie=null;const ne=new Ze(0);let se=0,ge=e.width,q=e.height,re=1,J=null,we=null;const Ve=new vi(0,0,ge,q),Ke=new vi(0,0,ge,q);let Rt=!1;const nn=new dS;let le=!1,Ne=!1;const tt=new Ut,Be=new O,wt=new vi,Tt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Dt=!1;function Cn(){return null===k?re:1}let Ue,ot,Me,Gt,at,_t,H,R,de,Fe,ke,Ie,Vt,it,pt,bn,Ge,ft,qn,cn,yt,vn,Pn,Ki,N=n;function We(L,K){return e.getContext(L,K)}try{const L={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r167"),e.addEventListener("webglcontextlost",Ce,!1),e.addEventListener("webglcontextrestored",Ae,!1),e.addEventListener("webglcontextcreationerror",et,!1),null===N){const K="webgl2";if(N=We(K,L),null===N)throw We(K)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}function Z(){Ue=new Gce(N),Ue.init(),vn=new Tue(N,Ue),ot=new Bce(N,Ue,t,vn),Me=new Mue(N),Gt=new Yce(N),at=new uue,_t=new Due(N,Ue,Me,at,ot,vn,Gt),H=new Vce(x),R=new $ce(x),de=new Oae(N),Pn=new Lce(N,de),Fe=new Wce(N,de,Gt,Pn),ke=new Xce(N,Fe,de,Gt),qn=new qce(N,ot,_t),bn=new Uce(at),Ie=new due(x,H,R,Ue,ot,Pn,bn),Vt=new Nue(x,at),it=new fue,pt=new yue(Ue),ft=new Fce(x,H,R,Me,ke,p,l),Ge=new wue(x,ke,ot),Ki=new Bue(N,Gt,ot,Me),cn=new Nce(N,Ue,Gt),yt=new jce(N,Ue,Gt),Gt.programs=Ie.programs,x.capabilities=ot,x.extensions=Ue,x.properties=at,x.renderLists=it,x.shadowMap=Ge,x.state=Me,x.info=Gt}Z();const Ye=new Fue(x,N);function Ce(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Ae(){console.log("THREE.WebGLRenderer: Context Restored."),C=!1;const L=Gt.autoReset,K=Ge.enabled,ce=Ge.autoUpdate,ue=Ge.needsUpdate,te=Ge.type;Z(),Gt.autoReset=L,Ge.enabled=K,Ge.autoUpdate=ce,Ge.needsUpdate=ue,Ge.type=te}function et(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function rn(L){const K=L.target;K.removeEventListener("dispose",rn),function ti(L){(function xr(L){const K=at.get(L).programs;void 0!==K&&(K.forEach(function(ce){Ie.releaseProgram(ce)}),L.isShaderMaterial&&Ie.releaseShaderCache(L))})(L),at.remove(L)}(K)}function ms(L,K,ce){!0===L.transparent&&L.side===us&&!1===L.forceSinglePass?(L.side=Lo,L.needsUpdate=!0,CE(L,K,ce),L.side=dc,L.needsUpdate=!0,CE(L,K,ce),L.side=us):CE(L,K,ce)}this.xr=Ye,this.getContext=function(){return N},this.getContextAttributes=function(){return N.getContextAttributes()},this.forceContextLoss=function(){const L=Ue.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=Ue.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(L){void 0!==L&&(re=L,this.setSize(ge,q,!1))},this.getSize=function(L){return L.set(ge,q)},this.setSize=function(L,K,ce=!0){Ye.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ge=L,q=K,e.width=Math.floor(L*re),e.height=Math.floor(K*re),!0===ce&&(e.style.width=L+"px",e.style.height=K+"px"),this.setViewport(0,0,L,K))},this.getDrawingBufferSize=function(L){return L.set(ge*re,q*re).floor()},this.setDrawingBufferSize=function(L,K,ce){ge=L,q=K,re=ce,e.width=Math.floor(L*ce),e.height=Math.floor(K*ce),this.setViewport(0,0,L,K)},this.getCurrentViewport=function(L){return L.copy(A)},this.getViewport=function(L){return L.copy(Ve)},this.setViewport=function(L,K,ce,ue){L.isVector4?Ve.set(L.x,L.y,L.z,L.w):Ve.set(L,K,ce,ue),Me.viewport(A.copy(Ve).multiplyScalar(re).round())},this.getScissor=function(L){return L.copy(Ke)},this.setScissor=function(L,K,ce,ue){L.isVector4?Ke.set(L.x,L.y,L.z,L.w):Ke.set(L,K,ce,ue),Me.scissor(j.copy(Ke).multiplyScalar(re).round())},this.getScissorTest=function(){return Rt},this.setScissorTest=function(L){Me.setScissorTest(Rt=L)},this.setOpaqueSort=function(L){J=L},this.setTransparentSort=function(L){we=L},this.getClearColor=function(L){return L.copy(ft.getClearColor())},this.setClearColor=function(){ft.setClearColor.apply(ft,arguments)},this.getClearAlpha=function(){return ft.getClearAlpha()},this.setClearAlpha=function(){ft.setClearAlpha.apply(ft,arguments)},this.clear=function(L=!0,K=!0,ce=!0){let ue=0;if(L){let te=!1;if(null!==k){const qe=k.texture.format;te=qe===xk||qe===bk||qe===kC}if(te){const qe=k.texture.type,ct=qe===id||qe===wu||qe===bb||qe===eg||qe===_k||qe===vk,Mt=ft.getClearColor(),Ct=ft.getClearAlpha(),Kt=Mt.r,an=Mt.g,Zt=Mt.b;ct?(m[0]=Kt,m[1]=an,m[2]=Zt,m[3]=Ct,N.clearBufferuiv(N.COLOR,0,m)):(g[0]=Kt,g[1]=an,g[2]=Zt,g[3]=Ct,N.clearBufferiv(N.COLOR,0,g))}else ue|=N.COLOR_BUFFER_BIT}K&&(ue|=N.DEPTH_BUFFER_BIT),ce&&(ue|=N.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),N.clear(ue)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Ce,!1),e.removeEventListener("webglcontextrestored",Ae,!1),e.removeEventListener("webglcontextcreationerror",et,!1),it.dispose(),pt.dispose(),at.dispose(),H.dispose(),R.dispose(),ke.dispose(),Pn.dispose(),Ki.dispose(),Ie.dispose(),Ye.dispose(),Ye.removeEventListener("sessionstart",gc),Ye.removeEventListener("sessionend",g8),Ff.stop()},this.renderBufferDirect=function(L,K,ce,ue,te,qe){null===K&&(K=Tt);const ct=te.isMesh&&te.matrixWorld.determinant()<0,Mt=function Zve(L,K,ce,ue,te){!0!==K.isScene&&(K=Tt),_t.resetTextureUnits();const qe=K.fog,Mt=null===k?x.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:fs,Ct=(ue.isMeshStandardMaterial?R:H).get(ue.envMap||(ue.isMeshStandardMaterial?K.environment:null)),Kt=!0===ue.vertexColors&&!!ce.attributes.color&&4===ce.attributes.color.itemSize,an=!!ce.attributes.tangent&&(!!ue.normalMap||ue.anisotropy>0),Zt=!!ce.morphAttributes.position,li=!!ce.morphAttributes.normal,Li=!!ce.morphAttributes.color;let nr=xu;ue.toneMapped&&(null===k||!0===k.isXRRenderTarget)&&(nr=x.toneMapping);const ha=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,pi=void 0!==ha?ha.length:0,kt=at.get(ue),gs=v.state.lights;!0!==le||!0!==Ne&&L===T||bn.setState(ue,L,L===T&&ue.id===B);let mi=!1;ue.version===kt.__version?(kt.needsLights&&kt.lightsStateVersion!==gs.state.version||kt.outputColorSpace!==Mt||te.isBatchedMesh&&!1===kt.batching||!te.isBatchedMesh&&!0===kt.batching||te.isBatchedMesh&&!0===kt.batchingColor&&null===te.colorTexture||te.isBatchedMesh&&!1===kt.batchingColor&&null!==te.colorTexture||te.isInstancedMesh&&!1===kt.instancing||!te.isInstancedMesh&&!0===kt.instancing||te.isSkinnedMesh&&!1===kt.skinning||!te.isSkinnedMesh&&!0===kt.skinning||te.isInstancedMesh&&!0===kt.instancingColor&&null===te.instanceColor||te.isInstancedMesh&&!1===kt.instancingColor&&null!==te.instanceColor||te.isInstancedMesh&&!0===kt.instancingMorph&&null===te.morphTexture||te.isInstancedMesh&&!1===kt.instancingMorph&&null!==te.morphTexture||kt.envMap!==Ct||!0===ue.fog&&kt.fog!==qe||void 0!==kt.numClippingPlanes&&(kt.numClippingPlanes!==bn.numPlanes||kt.numIntersection!==bn.numIntersection)||kt.vertexAlphas!==Kt||kt.vertexTangents!==an||kt.morphTargets!==Zt||kt.morphNormals!==li||kt.morphColors!==Li||kt.toneMapping!==nr||kt.morphTargetsCount!==pi)&&(mi=!0):(mi=!0,kt.__version=ue.version);let Ol=kt.currentProgram;!0===mi&&(Ol=CE(ue,K,te));let Xg=!1,fa=!1,QO=!1;const wr=Ol.getUniforms(),Bu=kt.uniforms;if(Me.useProgram(Ol.program)&&(Xg=!0,fa=!0,QO=!0),ue.id!==B&&(B=ue.id,fa=!0),Xg||T!==L){wr.setValue(N,"projectionMatrix",L.projectionMatrix),wr.setValue(N,"viewMatrix",L.matrixWorldInverse);const Ya=wr.map.cameraPosition;void 0!==Ya&&Ya.setValue(N,Be.setFromMatrixPosition(L.matrixWorld)),ot.logarithmicDepthBuffer&&wr.setValue(N,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(ue.isMeshPhongMaterial||ue.isMeshToonMaterial||ue.isMeshLambertMaterial||ue.isMeshBasicMaterial||ue.isMeshStandardMaterial||ue.isShaderMaterial)&&wr.setValue(N,"isOrthographic",!0===L.isOrthographicCamera),T!==L&&(T=L,fa=!0,QO=!0)}if(te.isSkinnedMesh){wr.setOptional(N,te,"bindMatrix"),wr.setOptional(N,te,"bindMatrixInverse");const Ya=te.skeleton;Ya&&(null===Ya.boneTexture&&Ya.computeBoneTexture(),wr.setValue(N,"boneTexture",Ya.boneTexture,_t))}te.isBatchedMesh&&(wr.setOptional(N,te,"batchingTexture"),wr.setValue(N,"batchingTexture",te._matricesTexture,_t),wr.setOptional(N,te,"batchingIdTexture"),wr.setValue(N,"batchingIdTexture",te._indirectTexture,_t),wr.setOptional(N,te,"batchingColorTexture"),null!==te._colorsTexture&&wr.setValue(N,"batchingColorTexture",te._colorsTexture,_t));const JO=ce.morphAttributes;if((void 0!==JO.position||void 0!==JO.normal||void 0!==JO.color)&&qn.update(te,ce,Ol),(fa||kt.receiveShadow!==te.receiveShadow)&&(kt.receiveShadow=te.receiveShadow,wr.setValue(N,"receiveShadow",te.receiveShadow)),ue.isMeshGouraudMaterial&&null!==ue.envMap&&(Bu.envMap.value=Ct,Bu.flipEnvMap.value=Ct.isCubeTexture&&!1===Ct.isRenderTargetTexture?-1:1),ue.isMeshStandardMaterial&&null===ue.envMap&&null!==K.environment&&(Bu.envMapIntensity.value=K.environmentIntensity),fa&&(wr.setValue(N,"toneMappingExposure",x.toneMappingExposure),kt.needsLights&&function Qve(L,K){L.ambientLightColor.needsUpdate=K,L.lightProbe.needsUpdate=K,L.directionalLights.needsUpdate=K,L.directionalLightShadows.needsUpdate=K,L.pointLights.needsUpdate=K,L.pointLightShadows.needsUpdate=K,L.spotLights.needsUpdate=K,L.spotLightShadows.needsUpdate=K,L.rectAreaLights.needsUpdate=K,L.hemisphereLights.needsUpdate=K}(Bu,QO),qe&&!0===ue.fog&&Vt.refreshFogUniforms(Bu,qe),Vt.refreshMaterialUniforms(Bu,ue,re,q,v.state.transmissionRenderTarget[L.id]),pS.upload(N,b8(kt),Bu,_t)),ue.isShaderMaterial&&!0===ue.uniformsNeedUpdate&&(pS.upload(N,b8(kt),Bu,_t),ue.uniformsNeedUpdate=!1),ue.isSpriteMaterial&&wr.setValue(N,"center",te.center),wr.setValue(N,"modelViewMatrix",te.modelViewMatrix),wr.setValue(N,"normalMatrix",te.normalMatrix),wr.setValue(N,"modelMatrix",te.matrixWorld),ue.isShaderMaterial||ue.isRawShaderMaterial){const Ya=ue.uniformsGroups;for(let eF=0,eye=Ya.length;eF<eye;eF++){const w8=Ya[eF];Ki.update(w8,Ol),Ki.bind(w8,Ol)}}return Ol}(L,K,ce,ue,te);Me.setMaterial(ue,ct);let Ct=ce.index,Kt=1;if(!0===ue.wireframe){if(Ct=Fe.getWireframeAttribute(ce),void 0===Ct)return;Kt=2}const an=ce.drawRange,Zt=ce.attributes.position;let li=an.start*Kt,Li=(an.start+an.count)*Kt;null!==qe&&(li=Math.max(li,qe.start*Kt),Li=Math.min(Li,(qe.start+qe.count)*Kt)),null!==Ct?(li=Math.max(li,0),Li=Math.min(Li,Ct.count)):null!=Zt&&(li=Math.max(li,0),Li=Math.min(Li,Zt.count));const nr=Li-li;if(nr<0||nr===1/0)return;Pn.setup(te,ue,Mt,ce,Ct);let ha,pi=cn;if(null!==Ct&&(ha=de.get(Ct),pi=yt,pi.setIndex(ha)),te.isMesh)!0===ue.wireframe?(Me.setLineWidth(ue.wireframeLinewidth*Cn()),pi.setMode(N.LINES)):pi.setMode(N.TRIANGLES);else if(te.isLine){let kt=ue.linewidth;void 0===kt&&(kt=1),Me.setLineWidth(kt*Cn()),pi.setMode(te.isLineSegments?N.LINES:te.isLineLoop?N.LINE_LOOP:N.LINE_STRIP)}else te.isPoints?pi.setMode(N.POINTS):te.isSprite&&pi.setMode(N.TRIANGLES);if(te.isBatchedMesh)if(null!==te._multiDrawInstances)pi.renderMultiDrawInstances(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount,te._multiDrawInstances);else if(Ue.get("WEBGL_multi_draw"))pi.renderMultiDraw(te._multiDrawStarts,te._multiDrawCounts,te._multiDrawCount);else{const kt=te._multiDrawStarts,gs=te._multiDrawCounts,mi=te._multiDrawCount,Ol=Ct?de.get(Ct).bytesPerElement:1,Xg=at.get(ue).currentProgram.getUniforms();for(let fa=0;fa<mi;fa++)Xg.setValue(N,"_gl_DrawID",fa),pi.render(kt[fa]/Ol,gs[fa])}else if(te.isInstancedMesh)pi.renderInstances(li,nr,te.count);else if(ce.isInstancedBufferGeometry){const gs=Math.min(ce.instanceCount,void 0!==ce._maxInstanceCount?ce._maxInstanceCount:1/0);pi.renderInstances(li,nr,gs)}else pi.render(li,nr)},this.compile=function(L,K,ce=null){null===ce&&(ce=L),v=pt.get(ce),v.init(K),M.push(v),ce.traverseVisible(function(te){te.isLight&&te.layers.test(K.layers)&&(v.pushLight(te),te.castShadow&&v.pushShadow(te))}),L!==ce&&L.traverseVisible(function(te){te.isLight&&te.layers.test(K.layers)&&(v.pushLight(te),te.castShadow&&v.pushShadow(te))}),v.setupLights();const ue=new Set;return L.traverse(function(te){const qe=te.material;if(qe)if(Array.isArray(qe))for(let ct=0;ct<qe.length;ct++){const Mt=qe[ct];ms(Mt,ce,te),ue.add(Mt)}else ms(qe,ce,te),ue.add(qe)}),M.pop(),v=null,ue},this.compileAsync=function(L,K,ce=null){const ue=this.compile(L,K,ce);return new Promise(te=>{function qe(){ue.forEach(function(ct){at.get(ct).currentProgram.isReady()&&ue.delete(ct)}),0!==ue.size?setTimeout(qe,10):te(L)}null!==Ue.get("KHR_parallel_shader_compile")?qe():setTimeout(qe,10)})};let fi=null;function gc(){Ff.stop()}function g8(){Ff.start()}const Ff=new s5;function ZO(L,K,ce,ue){if(!1===L.visible)return;if(L.layers.test(K.layers))if(L.isGroup)ce=L.renderOrder;else if(L.isLOD)!0===L.autoUpdate&&L.update(K);else if(L.isLight)v.pushLight(L),L.castShadow&&v.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||nn.intersectsSprite(L)){ue&&wt.setFromMatrixPosition(L.matrixWorld).applyMatrix4(tt);const ct=ke.update(L),Mt=L.material;Mt.visible&&b.push(L,ct,Mt,ce,wt.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||nn.intersectsObject(L))){const ct=ke.update(L),Mt=L.material;if(ue&&(void 0!==L.boundingSphere?(null===L.boundingSphere&&L.computeBoundingSphere(),wt.copy(L.boundingSphere.center)):(null===ct.boundingSphere&&ct.computeBoundingSphere(),wt.copy(ct.boundingSphere.center)),wt.applyMatrix4(L.matrixWorld).applyMatrix4(tt)),Array.isArray(Mt)){const Ct=ct.groups;for(let Kt=0,an=Ct.length;Kt<an;Kt++){const Zt=Ct[Kt],li=Mt[Zt.materialIndex];li&&li.visible&&b.push(L,ct,li,ce,wt.z,Zt)}}else Mt.visible&&b.push(L,ct,Mt,ce,wt.z,null)}const qe=L.children;for(let ct=0,Mt=qe.length;ct<Mt;ct++)ZO(qe[ct],K,ce,ue)}function _8(L,K,ce,ue){const te=L.opaque,qe=L.transmissive,ct=L.transparent;v.setupLightsView(ce),!0===le&&bn.setGlobalState(x.clippingPlanes,ce),ue&&Me.viewport(A.copy(ue)),te.length>0&&ME(te,K,ce),qe.length>0&&ME(qe,K,ce),ct.length>0&&ME(ct,K,ce),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function v8(L,K,ce,ue){if(null!==(!0===ce.isScene?ce.overrideMaterial:null))return;void 0===v.state.transmissionRenderTarget[ue.id]&&(v.state.transmissionRenderTarget[ue.id]=new Cu(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")||Ue.has("EXT_color_buffer_float")?Jm:id,minFilter:Dl,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ei.workingColorSpace}));const qe=v.state.transmissionRenderTarget[ue.id],ct=ue.viewport||A;qe.setSize(ct.z,ct.w);const Mt=x.getRenderTarget();x.setRenderTarget(qe),x.getClearColor(ne),se=x.getClearAlpha(),se<1&&x.setClearColor(16777215,.5),x.clear(),Dt&&ft.render(ce);const Ct=x.toneMapping;x.toneMapping=xu;const Kt=ue.viewport;if(void 0!==ue.viewport&&(ue.viewport=void 0),v.setupLightsView(ue),!0===le&&bn.setGlobalState(x.clippingPlanes,ue),ME(L,ce,ue),_t.updateMultisampleRenderTarget(qe),_t.updateRenderTargetMipmap(qe),!1===Ue.has("WEBGL_multisampled_render_to_texture")){let an=!1;for(let Zt=0,li=K.length;Zt<li;Zt++){const Li=K[Zt],nr=Li.object,ha=Li.geometry,pi=Li.material,kt=Li.group;if(pi.side===us&&nr.layers.test(ue.layers)){const gs=pi.side;pi.side=Lo,pi.needsUpdate=!0,y8(nr,ce,ue,ha,pi,kt),pi.side=gs,pi.needsUpdate=!0,an=!0}}!0===an&&(_t.updateMultisampleRenderTarget(qe),_t.updateRenderTargetMipmap(qe))}x.setRenderTarget(Mt),x.setClearColor(ne,se),void 0!==Kt&&(ue.viewport=Kt),x.toneMapping=Ct}function ME(L,K,ce){const ue=!0===K.isScene?K.overrideMaterial:null;for(let te=0,qe=L.length;te<qe;te++){const ct=L[te],Mt=ct.object,Ct=ct.geometry,Kt=null===ue?ct.material:ue,an=ct.group;Mt.layers.test(ce.layers)&&y8(Mt,K,ce,Ct,Kt,an)}}function y8(L,K,ce,ue,te,qe){L.onBeforeRender(x,K,ce,ue,te,qe),L.modelViewMatrix.multiplyMatrices(ce.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),!0===te.transparent&&te.side===us&&!1===te.forceSinglePass?(te.side=Lo,te.needsUpdate=!0,x.renderBufferDirect(ce,K,ue,te,L,qe),te.side=dc,te.needsUpdate=!0,x.renderBufferDirect(ce,K,ue,te,L,qe),te.side=us):x.renderBufferDirect(ce,K,ue,te,L,qe),L.onAfterRender(x,K,ce,ue,te,qe)}function CE(L,K,ce){!0!==K.isScene&&(K=Tt);const ue=at.get(L),te=v.state.lights,ct=te.state.version,Mt=Ie.getParameters(L,te.state,v.state.shadowsArray,K,ce),Ct=Ie.getProgramCacheKey(Mt);let Kt=ue.programs;ue.environment=L.isMeshStandardMaterial?K.environment:null,ue.fog=K.fog,ue.envMap=(L.isMeshStandardMaterial?R:H).get(L.envMap||ue.environment),ue.envMapRotation=null!==ue.environment&&null===L.envMap?K.environmentRotation:L.envMapRotation,void 0===Kt&&(L.addEventListener("dispose",rn),Kt=new Map,ue.programs=Kt);let an=Kt.get(Ct);if(void 0!==an){if(ue.currentProgram===an&&ue.lightsStateVersion===ct)return x8(L,Mt),an}else Mt.uniforms=Ie.getUniforms(L),L.onBeforeCompile(Mt,x),an=Ie.acquireProgram(Mt,Ct),Kt.set(Ct,an),ue.uniforms=Mt.uniforms;const Zt=ue.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||!0===L.clipping)&&(Zt.clippingPlanes=bn.uniform),x8(L,Mt),ue.needsLights=function Jve(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&!0===L.lights}(L),ue.lightsStateVersion=ct,ue.needsLights&&(Zt.ambientLightColor.value=te.state.ambient,Zt.lightProbe.value=te.state.probe,Zt.directionalLights.value=te.state.directional,Zt.directionalLightShadows.value=te.state.directionalShadow,Zt.spotLights.value=te.state.spot,Zt.spotLightShadows.value=te.state.spotShadow,Zt.rectAreaLights.value=te.state.rectArea,Zt.ltc_1.value=te.state.rectAreaLTC1,Zt.ltc_2.value=te.state.rectAreaLTC2,Zt.pointLights.value=te.state.point,Zt.pointLightShadows.value=te.state.pointShadow,Zt.hemisphereLights.value=te.state.hemi,Zt.directionalShadowMap.value=te.state.directionalShadowMap,Zt.directionalShadowMatrix.value=te.state.directionalShadowMatrix,Zt.spotShadowMap.value=te.state.spotShadowMap,Zt.spotLightMatrix.value=te.state.spotLightMatrix,Zt.spotLightMap.value=te.state.spotLightMap,Zt.pointShadowMap.value=te.state.pointShadowMap,Zt.pointShadowMatrix.value=te.state.pointShadowMatrix),ue.currentProgram=an,ue.uniformsList=null,an}function b8(L){if(null===L.uniformsList){const K=L.currentProgram.getUniforms();L.uniformsList=pS.seqWithValue(K.seq,L.uniforms)}return L.uniformsList}function x8(L,K){const ce=at.get(L);ce.outputColorSpace=K.outputColorSpace,ce.batching=K.batching,ce.batchingColor=K.batchingColor,ce.instancing=K.instancing,ce.instancingColor=K.instancingColor,ce.instancingMorph=K.instancingMorph,ce.skinning=K.skinning,ce.morphTargets=K.morphTargets,ce.morphNormals=K.morphNormals,ce.morphColors=K.morphColors,ce.morphTargetsCount=K.morphTargetsCount,ce.numClippingPlanes=K.numClippingPlanes,ce.numIntersection=K.numClipIntersection,ce.vertexAlphas=K.vertexAlphas,ce.vertexTangents=K.vertexTangents,ce.toneMapping=K.toneMapping}Ff.setAnimationLoop(function _d(L){fi&&fi(L)}),typeof self<"u"&&Ff.setContext(self),this.setAnimationLoop=function(L){fi=L,Ye.setAnimationLoop(L),null===L?Ff.stop():Ff.start()},Ye.addEventListener("sessionstart",gc),Ye.addEventListener("sessionend",g8),this.render=function(L,K){if(void 0!==K&&!0!==K.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===C)return;if(!0===L.matrixWorldAutoUpdate&&L.updateMatrixWorld(),null===K.parent&&!0===K.matrixWorldAutoUpdate&&K.updateMatrixWorld(),!0===Ye.enabled&&!0===Ye.isPresenting&&(!0===Ye.cameraAutoUpdate&&Ye.updateCamera(K),K=Ye.getCamera()),!0===L.isScene&&L.onBeforeRender(x,L,K,k),v=pt.get(L,M.length),v.init(K),M.push(v),tt.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse),nn.setFromProjectionMatrix(tt),Ne=this.localClippingEnabled,le=bn.init(this.clippingPlanes,Ne),b=it.get(L,y.length),b.init(),y.push(b),!0===Ye.enabled&&!0===Ye.isPresenting){const qe=x.xr.getDepthSensingMesh();null!==qe&&ZO(qe,K,-1/0,x.sortObjects)}ZO(L,K,0,x.sortObjects),b.finish(),!0===x.sortObjects&&b.sort(J,we),Dt=!1===Ye.enabled||!1===Ye.isPresenting||!1===Ye.hasDepthSensing(),Dt&&ft.addToRenderList(b,L),this.info.render.frame++,!0===le&&bn.beginShadows(),Ge.render(v.state.shadowsArray,L,K),!0===le&&bn.endShadows(),!0===this.info.autoReset&&this.info.reset();const ue=b.opaque,te=b.transmissive;if(v.setupLights(),K.isArrayCamera){const qe=K.cameras;if(te.length>0)for(let ct=0,Mt=qe.length;ct<Mt;ct++)v8(ue,te,L,qe[ct]);Dt&&ft.render(L);for(let ct=0,Mt=qe.length;ct<Mt;ct++){const Ct=qe[ct];_8(b,L,Ct,Ct.viewport)}}else te.length>0&&v8(ue,te,L,K),Dt&&ft.render(L),_8(b,L,K);null!==k&&(_t.updateMultisampleRenderTarget(k),_t.updateRenderTargetMipmap(k)),!0===L.isScene&&L.onAfterRender(x,L,K),Pn.resetDefaultState(),B=-1,T=null,M.pop(),M.length>0?(v=M[M.length-1],!0===le&&bn.setGlobalState(x.clippingPlanes,v.state.camera)):v=null,y.pop(),b=y.length>0?y[y.length-1]:null},this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return D},this.getRenderTarget=function(){return k},this.setRenderTargetTextures=function(L,K,ce){at.get(L.texture).__webglTexture=K,at.get(L.depthTexture).__webglTexture=ce;const ue=at.get(L);ue.__hasExternalTextures=!0,ue.__autoAllocateDepthBuffer=void 0===ce,ue.__autoAllocateDepthBuffer||!0===Ue.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ue.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(L,K){const ce=at.get(L);ce.__webglFramebuffer=K,ce.__useDefaultFramebuffer=void 0===K},this.setRenderTarget=function(L,K=0,ce=0){k=L,F=K,D=ce;let ue=!0,te=null,qe=!1,ct=!1;if(L){const Ct=at.get(L);void 0!==Ct.__useDefaultFramebuffer?(Me.bindFramebuffer(N.FRAMEBUFFER,null),ue=!1):void 0===Ct.__webglFramebuffer?_t.setupRenderTarget(L):Ct.__hasExternalTextures&&_t.rebindTextures(L,at.get(L.texture).__webglTexture,at.get(L.depthTexture).__webglTexture);const Kt=L.texture;(Kt.isData3DTexture||Kt.isDataArrayTexture||Kt.isCompressedArrayTexture)&&(ct=!0);const an=at.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(te=Array.isArray(an[K])?an[K][ce]:an[K],qe=!0):te=L.samples>0&&!1===_t.useMultisampledRTT(L)?at.get(L).__webglMultisampledFramebuffer:Array.isArray(an)?an[ce]:an,A.copy(L.viewport),j.copy(L.scissor),ie=L.scissorTest}else A.copy(Ve).multiplyScalar(re).floor(),j.copy(Ke).multiplyScalar(re).floor(),ie=Rt;if(Me.bindFramebuffer(N.FRAMEBUFFER,te)&&ue&&Me.drawBuffers(L,te),Me.viewport(A),Me.scissor(j),Me.setScissorTest(ie),qe){const Ct=at.get(L.texture);N.framebufferTexture2D(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,N.TEXTURE_CUBE_MAP_POSITIVE_X+K,Ct.__webglTexture,ce)}else if(ct){const Ct=at.get(L.texture);N.framebufferTextureLayer(N.FRAMEBUFFER,N.COLOR_ATTACHMENT0,Ct.__webglTexture,ce||0,K||0)}B=-1},this.readRenderTargetPixels=function(L,K,ce,ue,te,qe,ct){if(!L||!L.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Mt=at.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&void 0!==ct&&(Mt=Mt[ct]),Mt){Me.bindFramebuffer(N.FRAMEBUFFER,Mt);try{const Ct=L.texture,Kt=Ct.format,an=Ct.type;if(!ot.textureFormatReadable(Kt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ot.textureTypeReadable(an))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");K>=0&&K<=L.width-ue&&ce>=0&&ce<=L.height-te&&N.readPixels(K,ce,ue,te,vn.convert(Kt),vn.convert(an),qe)}finally{const Ct=null!==k?at.get(k).__webglFramebuffer:null;Me.bindFramebuffer(N.FRAMEBUFFER,Ct)}}},this.readRenderTargetPixelsAsync=function(){var L=je(function*(K,ce,ue,te,qe,ct,Mt){if(!K||!K.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ct=at.get(K).__webglFramebuffer;if(K.isWebGLCubeRenderTarget&&void 0!==Mt&&(Ct=Ct[Mt]),Ct){Me.bindFramebuffer(N.FRAMEBUFFER,Ct);try{const Kt=K.texture,an=Kt.format,Zt=Kt.type;if(!ot.textureFormatReadable(an))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ot.textureTypeReadable(Zt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ce>=0&&ce<=K.width-te&&ue>=0&&ue<=K.height-qe){const li=N.createBuffer();N.bindBuffer(N.PIXEL_PACK_BUFFER,li),N.bufferData(N.PIXEL_PACK_BUFFER,ct.byteLength,N.STREAM_READ),N.readPixels(ce,ue,te,qe,vn.convert(an),vn.convert(Zt),0),N.flush();const Li=N.fenceSync(N.SYNC_GPU_COMMANDS_COMPLETE,0);yield function dae(i,t,e){return new Promise(function(n,r){setTimeout(function s(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:n()}},e)})}(N,Li,4);try{N.bindBuffer(N.PIXEL_PACK_BUFFER,li),N.getBufferSubData(N.PIXEL_PACK_BUFFER,0,ct)}finally{N.deleteBuffer(li),N.deleteSync(Li)}return ct}}finally{const Kt=null!==k?at.get(k).__webglFramebuffer:null;Me.bindFramebuffer(N.FRAMEBUFFER,Kt)}}});return function(K,ce,ue,te,qe,ct,Mt){return L.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(L,K=null,ce=0){!0!==L.isTexture&&(cg("WebGLRenderer: copyFramebufferToTexture function signature has changed."),K=arguments[0]||null,L=arguments[1]);const ue=Math.pow(2,-ce),te=Math.floor(L.image.width*ue),qe=Math.floor(L.image.height*ue),ct=null!==K?K.x:0,Mt=null!==K?K.y:0;_t.setTexture2D(L,0),N.copyTexSubImage2D(N.TEXTURE_2D,ce,0,0,ct,Mt,te,qe),Me.unbindTexture()},this.copyTextureToTexture=function(L,K,ce=null,ue=null,te=0){let qe,ct,Mt,Ct,Kt,an;!0!==L.isTexture&&(cg("WebGLRenderer: copyTextureToTexture function signature has changed."),ue=arguments[0]||null,L=arguments[1],K=arguments[2],te=arguments[3]||0,ce=null),null!==ce?(qe=ce.max.x-ce.min.x,ct=ce.max.y-ce.min.y,Mt=ce.min.x,Ct=ce.min.y):(qe=L.image.width,ct=L.image.height,Mt=0,Ct=0),null!==ue?(Kt=ue.x,an=ue.y):(Kt=0,an=0);const Zt=vn.convert(K.format),li=vn.convert(K.type);_t.setTexture2D(K,0),N.pixelStorei(N.UNPACK_FLIP_Y_WEBGL,K.flipY),N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),N.pixelStorei(N.UNPACK_ALIGNMENT,K.unpackAlignment);const Li=N.getParameter(N.UNPACK_ROW_LENGTH),nr=N.getParameter(N.UNPACK_IMAGE_HEIGHT),ha=N.getParameter(N.UNPACK_SKIP_PIXELS),pi=N.getParameter(N.UNPACK_SKIP_ROWS),kt=N.getParameter(N.UNPACK_SKIP_IMAGES),gs=L.isCompressedTexture?L.mipmaps[te]:L.image;N.pixelStorei(N.UNPACK_ROW_LENGTH,gs.width),N.pixelStorei(N.UNPACK_IMAGE_HEIGHT,gs.height),N.pixelStorei(N.UNPACK_SKIP_PIXELS,Mt),N.pixelStorei(N.UNPACK_SKIP_ROWS,Ct),L.isDataTexture?N.texSubImage2D(N.TEXTURE_2D,te,Kt,an,qe,ct,Zt,li,gs.data):L.isCompressedTexture?N.compressedTexSubImage2D(N.TEXTURE_2D,te,Kt,an,gs.width,gs.height,Zt,gs.data):N.texSubImage2D(N.TEXTURE_2D,te,Kt,an,qe,ct,Zt,li,gs),N.pixelStorei(N.UNPACK_ROW_LENGTH,Li),N.pixelStorei(N.UNPACK_IMAGE_HEIGHT,nr),N.pixelStorei(N.UNPACK_SKIP_PIXELS,ha),N.pixelStorei(N.UNPACK_SKIP_ROWS,pi),N.pixelStorei(N.UNPACK_SKIP_IMAGES,kt),0===te&&K.generateMipmaps&&N.generateMipmap(N.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(L,K,ce=null,ue=null,te=0){let qe,ct,Mt,Ct,Kt,an,Zt,li,Li;!0!==L.isTexture&&(cg("WebGLRenderer: copyTextureToTexture3D function signature has changed."),ce=arguments[0]||null,ue=arguments[1]||null,L=arguments[2],K=arguments[3],te=arguments[4]||0);const nr=L.isCompressedTexture?L.mipmaps[te]:L.image;null!==ce?(qe=ce.max.x-ce.min.x,ct=ce.max.y-ce.min.y,Mt=ce.max.z-ce.min.z,Ct=ce.min.x,Kt=ce.min.y,an=ce.min.z):(qe=nr.width,ct=nr.height,Mt=nr.depth,Ct=0,Kt=0,an=0),null!==ue?(Zt=ue.x,li=ue.y,Li=ue.z):(Zt=0,li=0,Li=0);const ha=vn.convert(K.format),pi=vn.convert(K.type);let kt;if(K.isData3DTexture)_t.setTexture3D(K,0),kt=N.TEXTURE_3D;else{if(!K.isDataArrayTexture&&!K.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");_t.setTexture2DArray(K,0),kt=N.TEXTURE_2D_ARRAY}N.pixelStorei(N.UNPACK_FLIP_Y_WEBGL,K.flipY),N.pixelStorei(N.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K.premultiplyAlpha),N.pixelStorei(N.UNPACK_ALIGNMENT,K.unpackAlignment);const gs=N.getParameter(N.UNPACK_ROW_LENGTH),mi=N.getParameter(N.UNPACK_IMAGE_HEIGHT),Ol=N.getParameter(N.UNPACK_SKIP_PIXELS),Xg=N.getParameter(N.UNPACK_SKIP_ROWS),fa=N.getParameter(N.UNPACK_SKIP_IMAGES);N.pixelStorei(N.UNPACK_ROW_LENGTH,nr.width),N.pixelStorei(N.UNPACK_IMAGE_HEIGHT,nr.height),N.pixelStorei(N.UNPACK_SKIP_PIXELS,Ct),N.pixelStorei(N.UNPACK_SKIP_ROWS,Kt),N.pixelStorei(N.UNPACK_SKIP_IMAGES,an),L.isDataTexture||L.isData3DTexture?N.texSubImage3D(kt,te,Zt,li,Li,qe,ct,Mt,ha,pi,nr.data):K.isCompressedArrayTexture?N.compressedTexSubImage3D(kt,te,Zt,li,Li,qe,ct,Mt,ha,nr.data):N.texSubImage3D(kt,te,Zt,li,Li,qe,ct,Mt,ha,pi,nr),N.pixelStorei(N.UNPACK_ROW_LENGTH,gs),N.pixelStorei(N.UNPACK_IMAGE_HEIGHT,mi),N.pixelStorei(N.UNPACK_SKIP_PIXELS,Ol),N.pixelStorei(N.UNPACK_SKIP_ROWS,Xg),N.pixelStorei(N.UNPACK_SKIP_IMAGES,fa),0===te&&K.generateMipmaps&&N.generateMipmap(kt),Me.unbindTexture()},this.initRenderTarget=function(L){void 0===at.get(L).__webglFramebuffer&&_t.setupRenderTarget(L)},this.initTexture=function(L){L.isCubeTexture?_t.setTextureCube(L,0):L.isData3DTexture?_t.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?_t.setTexture2DArray(L,0):_t.setTexture2D(L,0),Me.unbindTexture()},this.resetState=function(){F=0,D=0,k=null,Me.reset(),Pn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return rd}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===Zk?"display-p3":"srgb",e.unpackColorSpace=ei.workingColorSpace===UC?"display-p3":"srgb"}}class Ob extends Fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ad,this.environmentIntensity=1,this.environmentRotation=new ad,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class kP{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=sa()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return cg("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sa()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sa()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const vo=new O;class gf{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)vo.fromBufferAttribute(this,e),vo.applyMatrix4(t),this.setXYZ(e,vo.x,vo.y,vo.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)vo.fromBufferAttribute(this,e),vo.applyNormalMatrix(t),this.setXYZ(e,vo.x,vo.y,vo.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)vo.fromBufferAttribute(this,e),vo.transformDirection(t),this.setXYZ(e,vo.x,vo.y,vo.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=mo(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=yn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=yn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=mo(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=mo(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=mo(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=mo(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),r=yn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=yn(e,this.array),n=yn(n,this.array),r=yn(r,this.array),s=yn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new Gi(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new gf(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const z5=new O,H5=new vi,$5=new vi,Hue=new O,G5=new Ut,bS=new O,OP=new Hs,W5=new Ut,FP=new Db;class j5 extends Tn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=g4,this.bindMatrix=new Ut,this.bindMatrixInverse=new Ut,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new zs),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,bS),this.boundingBox.expandByPoint(bS)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Hs),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,bS),this.boundingSphere.expandByPoint(bS)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),OP.copy(this.boundingSphere),OP.applyMatrix4(r),!1!==t.ray.intersectsSphere(OP)&&(W5.copy(r).invert(),FP.copy(t.ray).applyMatrix4(W5),(null===this.boundingBox||!1!==FP.intersectsBox(this.boundingBox))&&this._computeIntersections(t,e,FP)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new vi,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===g4?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;H5.fromBufferAttribute(r.attributes.skinIndex,t),$5.fromBufferAttribute(r.attributes.skinWeight,t),z5.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=$5.getComponent(s);if(0!==o){const a=H5.getComponent(s);G5.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(Hue.copy(z5).applyMatrix4(G5),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class LP extends Fr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class hd extends Bo{constructor(t=null,e=1,n=1,r,s,o,a,l,c=vr,d=vr,h,p){super(null,o,a,l,c,d,r,s,h,p),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Y5=new Ut,$ue=new Ut;class xS{constructor(t=[],e=[]){this.uuid=sa(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Ut)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Ut;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)Y5.multiplyMatrices(t[s]?t[s].matrixWorld:$ue,e[s]),Y5.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new xS(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new hd(e,t,t,No,ra);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const s=t.bones[n];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new LP),this.bones.push(o),this.boneInverses.push((new Ut).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}}class Fg extends Gi{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Lg=new Ut,q5=new Ut,wS=[],X5=new zs,Gue=new Ut,Bb=new Tn,Ub=new Hs;class K5 extends Tn{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Fg(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Gue)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new zs),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Lg),X5.copy(t.boundingBox).applyMatrix4(Lg),this.boundingBox.union(X5)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new Hs),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Lg),Ub.copy(t.boundingSphere).applyMatrix4(Lg),this.boundingSphere.union(Ub)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=t*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(Bb.geometry=this.geometry,Bb.material=this.material,void 0!==Bb.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Ub.copy(this.boundingSphere),Ub.applyMatrix4(n),!1!==t.ray.intersectsSphere(Ub)))for(let s=0;s<r;s++){this.getMatrixAt(s,Lg),q5.multiplyMatrices(n,Lg),Bb.matrixWorld=q5,Bb.raycast(t,wS);for(let o=0,a=wS.length;o<a;o++){const l=wS[o];l.instanceId=s,l.object=this,e.push(l)}wS.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Fg(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new hd(new Float32Array(r*this.count),r,this.count,yk,ra));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const l=r*t;s[l]=this.geometry.morphTargetsRelative?1:1-o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class ps extends Uo{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const SS=new O,ES=new O,J5=new Ut,zb=new Db,AS=new Hs,VP=new O,e$=new O;class vf extends Fr{constructor(t=new fn,e=new ps){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)SS.fromBufferAttribute(e,r-1),ES.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=SS.distanceTo(ES);t.setAttribute("lineDistance",new ht(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),AS.copy(n.boundingSphere),AS.applyMatrix4(r),AS.radius+=s,!1===t.ray.intersectsSphere(AS))return;J5.copy(r).invert(),zb.copy(t.ray).applyMatrix4(J5);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=n.index,p=n.attributes.position;if(null!==d){const m=Math.max(0,o.start),g=Math.min(d.count,o.start+o.count);for(let b=m,v=g-1;b<v;b+=c){const y=d.getX(b),M=d.getX(b+1),x=DS(this,t,zb,l,y,M);x&&e.push(x)}if(this.isLineLoop){const b=d.getX(g-1),v=d.getX(m),y=DS(this,t,zb,l,b,v);y&&e.push(y)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let b=m,v=g-1;b<v;b+=c){const y=DS(this,t,zb,l,b,b+1);y&&e.push(y)}if(this.isLineLoop){const b=DS(this,t,zb,l,g-1,m);b&&e.push(b)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function DS(i,t,e,n,r,s){const o=i.geometry.attributes.position;if(SS.fromBufferAttribute(o,r),ES.fromBufferAttribute(o,s),e.distanceSqToSegment(SS,ES,VP,e$)>n)return;VP.applyMatrix4(i.matrixWorld);const l=t.ray.origin.distanceTo(VP);return l<t.near||l>t.far?void 0:{distance:l,point:e$.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,object:i}}const t$=new O,n$=new O;class Ng extends vf{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let r=0,s=e.count;r<s;r+=2)t$.fromBufferAttribute(e,r),n$.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+t$.distanceTo(n$);t.setAttribute("lineDistance",new ht(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class i$ extends vf{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class yf extends Uo{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const r$=new Ut,zP=new Db,TS=new Hs,IS=new O;class Hb extends Fr{constructor(t=new fn,e=new yf){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),TS.copy(n.boundingSphere),TS.applyMatrix4(r),TS.radius+=s,!1===t.ray.intersectsSphere(TS))return;r$.copy(r).invert(),zP.copy(t.ray).applyMatrix4(r$);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,h=n.attributes.position;if(null!==c)for(let g=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);g<b;g++){const v=c.getX(g);IS.fromBufferAttribute(h,v),s$(IS,v,l,r,t,e,this)}else for(let g=Math.max(0,o.start),b=Math.min(h.count,o.start+o.count);g<b;g++)IS.fromBufferAttribute(h,g),s$(IS,g,l,r,t,e,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function s$(i,t,e,n,r,s,o){const a=zP.distanceSqToPoint(i);if(a<e){const l=new O;zP.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}class hc{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new xe:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new O,r=[],s=[],o=[],a=new O,l=new Ut;for(let m=0;m<=t;m++)r[m]=this.getTangentAt(m/t,new O);s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),h=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),h<=c&&(c=h,n.set(0,1,0)),p<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=t;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const g=Math.acos(Ji(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,g))}o[m].crossVectors(r[m],s[m])}if(!0===e){let m=Math.acos(Ji(s[0].dot(s[t]),-1,1));m/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(m=-m);for(let g=1;g<=t;g++)s[g].applyMatrix4(l.makeRotationAxis(r[g],m*g)),o[g].crossVectors(r[g],s[g])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class HP extends hc{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e=new xe){const n=e,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*h+this.aX,c=p*h+m*d+this.aY}return n.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function $P(){let i=0,t=0,e=0,n=0;function r(s,o,a,l){i=s,t=a,e=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,h){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const RS=new O,GP=new $P,WP=new $P,jP=new $P;function o$(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),a=i*i;return(2*e-2*n+s+o)*(i*a)+(-3*e+3*n-2*s-o)*a+s*i+e}function $b(i,t,e,n){return function nhe(i,t){const e=1-i;return e*e*t}(i,t)+function ihe(i,t){return 2*(1-i)*i*t}(i,e)+function rhe(i,t){return i*i*t}(i,n)}function Gb(i,t,e,n,r){return function she(i,t){const e=1-i;return e*e*e*t}(i,t)+function ohe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function ahe(i,t){return 3*(1-i)*i*i*t}(i,n)+function lhe(i,t){return i*i*i*t}(i,r)}class a$ extends hc{constructor(t=new xe,e=new xe,n=new xe,r=new xe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new xe){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Gb(t,r.x,s.x,o.x,a.x),Gb(t,r.y,s.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class l$ extends hc{constructor(t=new xe,e=new xe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new xe){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new xe){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class c$ extends hc{constructor(t=new xe,e=new xe,n=new xe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new xe){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set($b(t,r.x,s.x,o.x),$b(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class u$ extends hc{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new xe){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return n.set(o$(a,l.x,c.x,d.x,h.x),o$(a,l.y,c.y,d.y,h.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new xe).fromArray(r))}return this}}var kS=Object.freeze({__proto__:null,ArcCurve:class ehe extends HP{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class the extends hc{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new O){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(RS.subVectors(r[0],r[1]).add(r[0]),c=RS);const h=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(RS.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=RS),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let g=Math.pow(c.distanceToSquared(h),m),b=Math.pow(h.distanceToSquared(p),m),v=Math.pow(p.distanceToSquared(d),m);b<1e-4&&(b=1),g<1e-4&&(g=b),v<1e-4&&(v=b),GP.initNonuniformCatmullRom(c.x,h.x,p.x,d.x,g,b,v),WP.initNonuniformCatmullRom(c.y,h.y,p.y,d.y,g,b,v),jP.initNonuniformCatmullRom(c.z,h.z,p.z,d.z,g,b,v)}else"catmullrom"===this.curveType&&(GP.initCatmullRom(c.x,h.x,p.x,d.x,this.tension),WP.initCatmullRom(c.y,h.y,p.y,d.y,this.tension),jP.initCatmullRom(c.z,h.z,p.z,d.z,this.tension));return n.set(GP.calc(l),WP.calc(l),jP.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new O).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:a$,CubicBezierCurve3:class che extends hc{constructor(t=new O,e=new O,n=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new O){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Gb(t,r.x,s.x,o.x,a.x),Gb(t,r.y,s.y,o.y,a.y),Gb(t,r.z,s.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:HP,LineCurve:l$,LineCurve3:class dhe extends hc{constructor(t=new O,e=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new O){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new O){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:c$,QuadraticBezierCurve3:class d$ extends hc{constructor(t=new O,e=new O,n=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new O){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set($b(t,r.x,s.x,o.x),$b(t,r.y,s.y,o.y),$b(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:u$});class uhe extends hc{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new kS[!0===t.isVector2?"LineCurve":"LineCurve3"](e,t)),this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new kS[r.type]).fromJSON(r))}return this}}class PS extends uhe{constructor(t){super(),this.type="Path",this.currentPoint=new xe,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new l$(this.currentPoint.clone(),new xe(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new c$(this.currentPoint.clone(),new xe(t,e),new xe(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const a=new a$(this.currentPoint.clone(),new xe(t,e),new xe(n,r),new xe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new u$(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(t,e,n,r,s,o,a,l){const c=new HP(t,e,n,r,s,o,a,l);if(this.curves.length>0){const h=c.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class OS extends fn{constructor(t=[new xe(0,-.5),new xe(.5,0),new xe(0,.5)],e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=Ji(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/e,h=new O,p=new xe,m=new O,g=new O,b=new O;let v=0,y=0;for(let M=0;M<=t.length-1;M++)switch(M){case 0:v=t[M+1].x-t[M].x,y=t[M+1].y-t[M].y,m.x=1*y,m.y=-v,m.z=0*y,b.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case t.length-1:l.push(b.x,b.y,b.z);break;default:v=t[M+1].x-t[M].x,y=t[M+1].y-t[M].y,m.x=1*y,m.y=-v,m.z=0*y,g.copy(m),m.x+=b.x,m.y+=b.y,m.z+=b.z,m.normalize(),l.push(m.x,m.y,m.z),b.copy(g)}for(let M=0;M<=e;M++){const x=n+M*d*r,C=Math.sin(x),F=Math.cos(x);for(let D=0;D<=t.length-1;D++)h.x=t[D].x*C,h.y=t[D].y,h.z=t[D].x*F,o.push(h.x,h.y,h.z),p.x=M/e,p.y=D/(t.length-1),a.push(p.x,p.y),c.push(l[3*D+0]*C,l[3*D+1],l[3*D+0]*F)}for(let M=0;M<e;M++)for(let x=0;x<t.length-1;x++){const C=x+M*t.length,D=C+t.length,k=C+t.length+1,B=C+1;s.push(C,D,B),s.push(k,B,D)}this.setIndex(s),this.setAttribute("position",new ht(o,3)),this.setAttribute("uv",new ht(a,2)),this.setAttribute("normal",new ht(c,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new OS(t.points,t.segments,t.phiStart,t.phiLength)}}class FS extends OS{constructor(t=1,e=1,n=4,r=8){const s=new PS;s.absarc(0,-e/2,t,1.5*Math.PI,0),s.absarc(0,e/2,t,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new FS(t.radius,t.length,t.capSegments,t.radialSegments)}}class Bg extends fn{constructor(t=1,e=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],h=[],p=[],m=[];let g=0;const b=[],v=n/2;let y=0;function x(C){const F=g,D=new xe,k=new O;let B=0;const T=!0===C?t:e,A=!0===C?1:-1;for(let ie=1;ie<=r;ie++)h.push(0,v*A,0),p.push(0,A,0),m.push(.5,.5),g++;const j=g;for(let ie=0;ie<=r;ie++){const se=ie/r*l+a,ge=Math.cos(se),q=Math.sin(se);k.x=T*q,k.y=v*A,k.z=T*ge,h.push(k.x,k.y,k.z),p.push(0,A,0),D.x=.5*ge+.5,D.y=.5*q*A+.5,m.push(D.x,D.y),g++}for(let ie=0;ie<r;ie++){const ne=F+ie,se=j+ie;!0===C?d.push(se,se+1,ne):d.push(se+1,se,ne),B+=3}c.addGroup(y,B,!0===C?1:2),y+=B}(function M(){const C=new O,F=new O;let D=0;const k=(e-t)/n;for(let B=0;B<=s;B++){const T=[],A=B/s,j=A*(e-t)+t;for(let ie=0;ie<=r;ie++){const ne=ie/r,se=ne*l+a,ge=Math.sin(se),q=Math.cos(se);F.x=j*ge,F.y=-A*n+v,F.z=j*q,h.push(F.x,F.y,F.z),C.set(ge,k,q).normalize(),p.push(C.x,C.y,C.z),m.push(ne,1-A),T.push(g++)}b.push(T)}for(let B=0;B<r;B++)for(let T=0;T<s;T++){const j=b[T+1][B],ie=b[T+1][B+1],ne=b[T][B+1];d.push(b[T][B],j,ne),d.push(j,ie,ne),D+=6}c.addGroup(y,D,0),y+=D})(),!1===o&&(t>0&&x(!0),e>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new ht(h,3)),this.setAttribute("normal",new ht(p,3)),this.setAttribute("uv",new ht(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Bg(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class LS extends Bg{constructor(t=1,e=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(t){return new LS(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class qb extends fn{constructor(t=1,e=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],h=new O,p=new O,m=[],g=[],b=[],v=[];for(let y=0;y<=n;y++){const M=[],x=y/n;let C=0;0===y&&0===o?C=.5/e:y===n&&l===Math.PI&&(C=-.5/e);for(let F=0;F<=e;F++){const D=F/e;h.x=-t*Math.cos(r+D*s)*Math.sin(o+x*a),h.y=t*Math.cos(o+x*a),h.z=t*Math.sin(r+D*s)*Math.sin(o+x*a),g.push(h.x,h.y,h.z),p.copy(h).normalize(),b.push(p.x,p.y,p.z),v.push(D+C,1-x),M.push(c++)}d.push(M)}for(let y=0;y<n;y++)for(let M=0;M<e;M++){const C=d[y][M],F=d[y+1][M],D=d[y+1][M+1];(0!==y||o>0)&&m.push(d[y][M+1],C,D),(y!==n-1||l<Math.PI)&&m.push(C,F,D)}this.setIndex(m),this.setAttribute("position",new ht(g,3)),this.setAttribute("normal",new ht(b,3)),this.setAttribute("uv",new ht(v,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new qb(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Xb extends Uo{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ad,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Pl extends Xb{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ji(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class GS extends Uo{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ze(16777215),this.specular=new Ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=tf,this.normalScale=new xe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ad,this.combine=TC,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function wf(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function x$(i){const e=i.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function t(r,s){return i[r]-i[s]}),n}function oO(i,t,e){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=i[a+l]}return r}function aO(i,t,e,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(t.push(s.time),e.push(o)),s=i[r++]}while(void 0!==s)}class Kb{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;t<e[a]?o=a:n=a+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class $he extends Kb{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=t,a=2*e-n;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=t,l=2*n-e;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(n-e),d=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,m=this._weightNext,g=(n-e)/(r-e),b=g*g,v=b*g,y=-p*v+2*p*b-p*g,M=(1+p)*v+(-1.5-2*p)*b+(-.5+p)*g+1,x=(-1-m)*v+(1.5+m)*b+.5*g,C=m*v-m*b;for(let F=0;F!==a;++F)s[F]=y*o[d+F]+M*o[c+F]+x*o[l+F]+C*o[h+F];return s}}class w$ extends Kb{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=(n-e)/(r-e),h=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*h+o[l+p]*d;return s}}class Ghe extends Kb{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class fc{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=wf(e,this.TimeBufferType),this.values=wf(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:wf(t.times,Array),values:wf(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Ghe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new w$(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new $he(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case xb:e=this.InterpolantFactoryMethodDiscrete;break;case wb:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xb;case this.InterpolantFactoryMethodLinear:return wb;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&function b$(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const h=a*n,p=h-n,m=h+n;for(let g=0;g!==n;++g){const b=e[h+g];if(b!==e[p+g]||b!==e[m+g]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const h=a*n,p=o*n;for(let m=0;m!==n;++m)e[p+m]=e[h+m]}++o}}if(s>0){t[o]=t[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}fc.prototype.TimeBufferType=Float32Array,fc.prototype.ValueBufferType=Float32Array,fc.prototype.DefaultInterpolation=wb;class zg extends fc{constructor(t,e,n){super(t,e,n)}}zg.prototype.ValueTypeName="bool",zg.prototype.ValueBufferType=Array,zg.prototype.DefaultInterpolation=xb,zg.prototype.InterpolantFactoryMethodLinear=void 0,zg.prototype.InterpolantFactoryMethodSmooth=void 0;class M$ extends fc{}M$.prototype.ValueTypeName="color";class Hg extends fc{}Hg.prototype.ValueTypeName="number";class Whe extends Kb{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let c=t*a;for(let d=c+a;c!==d;c+=4)go.slerpFlat(s,0,o,c-a,o,c,l);return s}}class $g extends fc{InterpolantFactoryMethodLinear(t){return new Whe(this.times,this.values,this.getValueSize(),t)}}$g.prototype.ValueTypeName="quaternion",$g.prototype.InterpolantFactoryMethodSmooth=void 0;class Gg extends fc{constructor(t,e,n){super(t,e,n)}}Gg.prototype.ValueTypeName="string",Gg.prototype.ValueBufferType=Array,Gg.prototype.DefaultInterpolation=xb,Gg.prototype.InterpolantFactoryMethodLinear=void 0,Gg.prototype.InterpolantFactoryMethodSmooth=void 0;class Wg extends fc{}Wg.prototype.ValueTypeName="vector";class Zb{constructor(t="",e=-1,n=[],r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=sa(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(Yhe(n[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=n.length;s!==o;++s)e.push(fc.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=x$(l);l=oO(l,1,d),c=oO(c,1,d),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new Hg(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],d=c.name.match(s);if(d&&d.length>1){const h=d[1];let p=r[h];p||(r[h]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(h,p,m,g,b){if(0!==m.length){const v=[],y=[];aO(m,v,y,g),0!==v.length&&b.push(new h(p,v,y))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let h=0;h<c.length;h++){const p=c[h].keys;if(p&&0!==p.length)if(p[0].morphTargets){const m={};let g;for(g=0;g<p.length;g++)if(p[g].morphTargets)for(let b=0;b<p[g].morphTargets.length;b++)m[p[g].morphTargets[b]]=-1;for(const b in m){const v=[],y=[];for(let M=0;M!==p[g].morphTargets.length;++M){const x=p[g];v.push(x.time),y.push(x.morphTarget===b?1:0)}r.push(new Hg(".morphTargetInfluence["+b+"]",v,y))}l=m.length*o}else{const m=".bones["+e[h].name+"]";n(Wg,m+".position",p,"pos",r),n($g,m+".quaternion",p,"rot",r),n(Wg,m+".scale",p,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Yhe(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function jhe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Hg;case"vector":case"vector2":case"vector3":case"vector4":return Wg;case"color":return M$;case"quaternion":return $g;case"bool":case"boolean":return zg;case"string":return Gg}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const e=[],n=[];aO(i.keys,e,n,"value"),i.times=e,i.values=n}return void 0!==t.parse?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const ku={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class C${constructor(t,e,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return c.push(d,h),this},this.removeHandler=function(d){const h=c.indexOf(d);return-1!==h&&c.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=c.length;h<p;h+=2){const m=c[h],g=c[h+1];if(m.global&&(m.lastIndex=0),m.test(d))return g}return null}}}const S$=new C$;let Mf=(()=>{class i{constructor(e){this.manager=void 0!==e?e:S$,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(s,o){r.load(e,s,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})();const pd={};class qhe extends Error{constructor(t,e){super(t),this.response=e}}class za extends Mf{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=ku.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==pd[t])return void pd[t].push({onLoad:e,onProgress:n,onError:r});pd[t]=[],pd[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=pd[t],h=c.body.getReader(),p=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),m=p?parseInt(p):0,g=0!==m;let b=0;const v=new ReadableStream({start(y){!function M(){h.read().then(({done:x,value:C})=>{if(x)y.close();else{b+=C.byteLength;const F=new ProgressEvent("progress",{lengthComputable:g,loaded:b,total:m});for(let D=0,k=d.length;D<k;D++){const B=d[D];B.onProgress&&B.onProgress(F)}y.enqueue(C),M()}},x=>{y.error(x)})}()}});return new Response(v)}throw new qhe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(g=>m.decode(g))}}}).then(c=>{ku.add(t,c);const d=pd[t];delete pd[t];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=pd[t];if(void 0===d)throw this.manager.itemError(t),c;delete pd[t];for(let h=0,p=d.length;h<p;h++){const m=d[h];m.onError&&m.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class WS extends Mf{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=ku.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=Cb("img");function l(){d(),ku.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(h){d(),r&&r(h),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class pc extends Mf{constructor(t){super(t)}load(t,e,n,r){const s=new Bo,o=new WS(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s}}class jS extends Fr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ze(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(e.object.target=this.target.uuid),e}}const lO=new Ut,E$=new O,A$=new O;class cO{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xe(512,512),this.map=null,this.mapPass=null,this.matrix=new Ut,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new dS,this._frameExtents=new xe(1,1),this._viewportCount=1,this._viewports=[new vi(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;E$.setFromMatrixPosition(t.matrixWorld),e.position.copy(E$),A$.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(A$),e.updateMatrixWorld(),lO.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lO),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(lO)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Khe extends cO{constructor(){super(new br(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*ag*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class D$ extends jS{constructor(t,e,n=0,r=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Khe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const T$=new Ut,Qb=new O,dO=new O;class Zhe extends cO{constructor(){super(new br(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new xe(4,2),this._viewportCount=6,this._viewports=[new vi(2,1,1,1),new vi(0,1,1,1),new vi(3,1,1,1),new vi(1,1,1,1),new vi(3,0,1,1),new vi(1,0,1,1)],this._cubeDirections=[new O(1,0,0),new O(-1,0,0),new O(0,0,1),new O(0,0,-1),new O(0,1,0),new O(0,-1,0)],this._cubeUps=[new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,1,0),new O(0,0,1),new O(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),Qb.setFromMatrixPosition(t.matrixWorld),n.position.copy(Qb),dO.copy(n.position),dO.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(dO),n.updateMatrixWorld(),r.makeTranslation(-Qb.x,-Qb.y,-Qb.z),T$.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(T$)}}class I$ extends jS{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Zhe}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Qhe extends cO{constructor(){super(new kb(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class R$ extends jS{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Fr.DEFAULT_UP),this.updateMatrix(),this.target=new Fr,this.shadow=new Qhe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Jb extends jS{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class Pu{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class sfe extends Mf{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=ku.get(t);if(void 0!==o)return s.manager.itemStart(t),o.then?void o.then(c=>{e&&e(c),s.manager.itemEnd(t)}).catch(c=>{r&&r(c)}):(setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(t,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return ku.add(t,c),e&&e(c),s.manager.itemEnd(t),c}).catch(function(c){r&&r(c),ku.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});ku.add(t,l),s.manager.itemStart(t)}}class N${constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=B$(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=B$();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function B$(){return(typeof performance>"u"?Date:performance).now()}const hO="\\[\\]\\.:\\/",cfe=new RegExp("["+hO+"]","g"),fO="[^"+hO+"]",dfe="[^"+hO.replace("\\.","")+"]",mfe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",fO)+/(WCOD+)?/.source.replace("WCOD",dfe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fO)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fO)+"$"),gfe=["material","materials","bones","map"];class _fe{constructor(t,e,n){const r=n||Ri.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let Ri=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(cfe,"")}static parseTrackName(e){const n=mfe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==gfe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===d){d=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==d){if(void 0===e[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[d]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=_fe,i})();Ri.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Ri.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Ri.prototype.GetterByBindingType=[Ri.prototype._getValue_direct,Ri.prototype._getValue_array,Ri.prototype._getValue_arrayElement,Ri.prototype._getValue_toArray],Ri.prototype.SetterByBindingTypeAndVersioning=[[Ri.prototype._setValue_direct,Ri.prototype._setValue_direct_setNeedsUpdate,Ri.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ri.prototype._setValue_array,Ri.prototype._setValue_array_setNeedsUpdate,Ri.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ri.prototype._setValue_arrayElement,Ri.prototype._setValue_arrayElement_setNeedsUpdate,Ri.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ri.prototype._setValue_fromArray,Ri.prototype._setValue_fromArray_setNeedsUpdate,Ri.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"167"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="167");class Ha{constructor(t){this.nativeMesh=t,this.entity=null}get position(){return Te.clone(this.nativeMesh.position)}set position(t){this.nativeMesh.position.set(t.x,t.y,t.z)}get rotation(){return $i.clone(this.nativeMesh.quaternion)}set rotation(t){this.nativeMesh.quaternion.set(t.x,t.y,t.z,t.w)}get scale(){return Te.clone(this.nativeMesh.scale)}set scale(t){this.nativeMesh.scale.set(t.x,t.y,t.z)}get visible(){return this.nativeMesh.visible}set visible(t){this.nativeMesh.visible=t}get name(){return this.nativeMesh.name||this.nativeMesh.uuid}set name(t){this.nativeMesh.name=t}isEmpty(){return(this.nativeMesh instanceof Ob||this.nativeMesh instanceof la)&&0==this.nativeMesh.children.length}popChild(t){const e=this.nativeMesh.children.find(n=>n.name===t||n.userData.name===t);return e?(e.removeFromParent(),new Ha(e)):null}getBoundings(){return(new zs).setFromObject(this.nativeMesh)}clone(){return new Ha(this.nativeMesh.clone())}addToWorld(t){var e;null===(e=t.visualScene.nativeScene)||void 0===e||e.add(this.nativeMesh)}removeFromWorld(t){var e;null===(e=t.visualScene.nativeScene)||void 0===e||e.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(t=>{t instanceof Tn&&this.disposeMesh(t)}),this.nativeMesh instanceof Tn&&this.disposeMesh(this.nativeMesh)}disposeMesh(t){t.geometry.dispose();const e=t.material instanceof Array?t.material:[t.material];for(const n of e)n.dispose()}}class wfe extends Ha{get supportsFov(){return this.nativeCamera instanceof br||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(t){this.supportsFov&&(this.nativeCamera.fov=t,this.nativeCamera.updateProjectionMatrix())}constructor(t){super(t),this.nativeCamera=t}}class Mfe extends $se{createMaterial(t){let e={};t.color?e={color:t.color}:t.diffuse||(e={color:super.randomColor()});let n=t.shading||"unlit";switch(n){case"unlit":return new er(Object.assign(Object.assign({},e),{map:t.diffuse||null}));case"standart":return new Xb(Object.assign(Object.assign({},e),{map:t.diffuse||null}));case"phong":return new GS(Object.assign(Object.assign({},e),{map:t.diffuse||null}));case"wireframe":return new er(Object.assign(Object.assign({},e),{wireframe:!0}));default:throw new Error(`"${n}" shading not implemented for three.js`)}}transformPrimitiveZUp(t){t.geometry.rotateX(Math.PI/2)}createPrimitive(t,e={}){var n,r,s,o;let a=null,l=this.createMaterial(e);switch(t.shape){case"PLANE":a=new Tn(new uf((null===(n=t.dimensions)||void 0===n?void 0:n.x)||1e4,(null===(r=t.dimensions)||void 0===r?void 0:r.y)||1e4,null===(s=t.segments)||void 0===s?void 0:s.x,null===(o=t.segments)||void 0===o?void 0:o.y),l);break;case"BOX":a=new Tn(new lf(...Te.spr(t.dimensions),...t.segments?Te.spr(t.segments):[]),l);break;case"CAPSULE":a=new Tn(new FS(t.radius,t.centersDistance,t.capSegments,t.radialSegments),l),this.transformPrimitiveZUp(a);break;case"CYLINDER":a=new Tn(new Bg(t.radius,t.radius,t.height,t.radialSegments,t.heightSegments),l),this.transformPrimitiveZUp(a);break;case"CONE":a=new Tn(new LS(t.radius,t.height,t.radialSegments,t.heightSegments),l),this.transformPrimitiveZUp(a);break;case"SPHERE":a=new Tn(new qb(t.radius,t.widthSegments,t.heightSegments),l),this.transformPrimitiveZUp(a);break;case"COMPOUND":a=new la;for(const{position:d,rotation:h,shape:p}of t.children){const m=this.createPrimitive(p,e).nativeMesh;d&&m.position.set(...Te.spr(d)),h&&m.quaternion.set(...$i.spr(h)),a.add(m)}break;case"MESH":const c=new fn;c.setFromPoints(t.vertices.map(d=>new O(...Te.spr(d)))),c.setIndex(t.faces.reduce((d,h)=>(d.push(...h),d),[])),a=new Tn(c,l)}if(!a)throw new Error(`Primitive with shape "${t.shape}" not implemented`);return void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),new Ha(a)}createPerspectiveCamera(t={}){return new wfe(new br(t.fov||75,t.aspectRatio||1,t.frustrum?t.frustrum.near:1,t.frustrum?t.frustrum.far:1e4))}}function tG(i,t){if(t===Ooe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===Kk||t===A4){let e=i.getIndex();if(null===e){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),e=i.getIndex()}const n=e.count-2,r=[];if(t===Kk)for(let o=1;o<=n;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}class Cfe extends Mf{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Tfe(e)}),this.register(function(e){return new Ife(e)}),this.register(function(e){return new Ufe(e)}),this.register(function(e){return new Vfe(e)}),this.register(function(e){return new zfe(e)}),this.register(function(e){return new kfe(e)}),this.register(function(e){return new Pfe(e)}),this.register(function(e){return new Ofe(e)}),this.register(function(e){return new Ffe(e)}),this.register(function(e){return new Dfe(e)}),this.register(function(e){return new Lfe(e)}),this.register(function(e){return new Rfe(e)}),this.register(function(e){return new Bfe(e)}),this.register(function(e){return new Nfe(e)}),this.register(function(e){return new Efe(e)}),this.register(function(e){return new Hfe(e)}),this.register(function(e){return new $fe(e)})}load(t,e,n,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=Pu.extractUrlBase(t);o=Pu.resolveURL(c,this.path)}else o=Pu.extractUrlBase(t);this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new za(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(d){e(d),s.manager.itemEnd(t)},a)}catch(d){a(d)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof t)s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===nG){try{o[Un.KHR_BINARY_GLTF]=new Gfe(t)}catch(h){return void(r&&r(h))}s=JSON.parse(o[Un.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(t));else s=t;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new ipe(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const h=this.pluginCallbacks[d](c);h.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[h.name]=h,o[h.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const h=s.extensionsUsed[d],p=s.extensionsRequired||[];switch(h){case Un.KHR_MATERIALS_UNLIT:o[h]=new Afe;break;case Un.KHR_DRACO_MESH_COMPRESSION:o[h]=new Wfe(s,this.dracoLoader);break;case Un.KHR_TEXTURE_TRANSFORM:o[h]=new jfe;break;case Un.KHR_MESH_QUANTIZATION:o[h]=new Yfe;break;default:p.indexOf(h)>=0&&void 0===a[h]&&console.warn('THREE.GLTFLoader: Unknown extension "'+h+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise(function(r,s){n.parse(t,e,r,s)})}}function Sfe(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const Un={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Efe{constructor(t){this.parser=t,this.name=Un.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const d=new Ze(16777215);void 0!==l.color&&d.setRGB(l.color[0],l.color[1],l.color[2],fs);const h=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new R$(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new I$(d),c.distance=h;break;case"spot":c=new D$(d),c.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,md(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(e.cache,a,l)})}}class Afe{constructor(){this.name=Un.KHR_MATERIALS_UNLIT}getMaterialType(){return er}extendParams(t,e,n){const r=[];t.color=new Ze(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],fs),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(t,"map",s.baseColorTexture,hs))}return Promise.all(r)}}class Dfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(e.emissiveIntensity=s),Promise.resolve()}}class Tfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new xe(a,a)}return Promise.all(s)}}class Ife{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class Rfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(e.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(e.iridescenceIOR=o.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class kfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Ze(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],fs)}return void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,hs)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Pfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Ofe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=(new Ze).setRGB(a[0],a[1],a[2],fs),Promise.all(s)}}class Ffe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Lfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=(new Ze).setRGB(a[0],a[1],a[2],fs),void 0!==o.specularColorTexture&&s.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,hs)),Promise.all(s)}}class Nfe{constructor(t){this.parser=t,this.name=Un.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return e.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(n.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Bfe{constructor(t){this.parser=t,this.name=Un.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?Pl:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(e.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(e.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(n.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class Ufe{constructor(t){this.parser=t,this.name=Un.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class Vfe{constructor(t){this.parser=t,this.name=Un.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class zfe{constructor(t){this.parser=t,this.name=Un.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class Hfe{constructor(t){this.name=Un.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const d=r.count,h=r.byteStride,p=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,h,p,r.mode,r.filter).then(function(m){return m.buffer}):o.ready.then(function(){const m=new ArrayBuffer(d*h);return o.decodeGltfBuffer(new Uint8Array(m),d,h,p,r.mode,r.filter),m})})}return null}}class $fe{constructor(t){this.name=Un.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=e.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==$a.TRIANGLES&&c.mode!==$a.TRIANGLE_STRIP&&c.mode!==$a.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(c=>{const d=c.pop(),h=d.isGroup?d.children:[d],p=c[0].count,m=[];for(const g of h){const b=new Ut,v=new O,y=new go,M=new O(1,1,1),x=new K5(g.geometry,g.material,p);for(let C=0;C<p;C++)l.TRANSLATION&&v.fromBufferAttribute(l.TRANSLATION,C),l.ROTATION&&y.fromBufferAttribute(l.ROTATION,C),l.SCALE&&M.fromBufferAttribute(l.SCALE,C),x.setMatrixAt(C,b.compose(v,y,M));for(const C in l)if("_COLOR_0"===C){const F=l[C];x.instanceColor=new Fg(F.array,F.itemSize,F.normalized)}else"TRANSLATION"!==C&&"ROTATION"!==C&&"SCALE"!==C&&g.geometry.setAttribute(C,l[C]);Fr.prototype.copy.call(x,g),this.parser.assignFinalMaterial(x),m.push(x)}return d.isGroup?(d.clear(),d.add(...m),d):m[0]}))}}const nG="glTF";class Gfe{constructor(t){this.name=Un.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==nG)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(t,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(t,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=t.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Wfe{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Un.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const h=yO[d]||d.toLowerCase();a[h]=o[d]}for(const d in t.attributes){const h=yO[d]||d.toLowerCase();if(void 0!==o[d]){const p=n.accessors[t.attributes[d]];c[h]=jg[p.componentType].name,l[h]=!0===p.normalized}}return e.getDependency("bufferView",s).then(function(d){return new Promise(function(h,p){r.decodeDracoFile(d,function(m){for(const g in m.attributes){const v=l[g];void 0!==v&&(m.attributes[g].normalized=v)}h(m)},a,c,fs,p)})})}}class jfe{constructor(){this.name=Un.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(void 0===e.texCoord||e.texCoord===t.channel)&&void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class Yfe{constructor(){this.name=Un.KHR_MESH_QUANTIZATION}}class rG extends Kb{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=n[s+o];return e}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,d=r-e,h=(n-e)/d,p=h*h,m=p*h,g=t*c,b=g-c,v=-2*m+3*p,y=m-p,M=1-v,x=y-p+h;for(let C=0;C!==a;C++)s[C]=M*o[b+C+a]+x*(o[b+C+l]*d)+v*o[g+C+a]+y*(o[g+C]*d);return s}}const qfe=new go;class Xfe extends rG{interpolate_(t,e,n,r){const s=super.interpolate_(t,e,n,r);return qfe.fromArray(s).normalize().toArray(s),s}}const $a={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},jg={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},sG={9728:vr,9729:cr,9984:mk,9985:yb,9986:Qm,9987:Dl},oG={33071:Qi,33648:vb,10497:Kr},vO={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},yO={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Fu={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Kfe={CUBICSPLINE:void 0,LINEAR:wb,STEP:xb};function Tf(i,t,e){for(const n in e.extensions)void 0===i[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function md(i,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Jfe(i,t){if(i.updateMorphTargets(),void 0!==t.weights)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,r=e.length;n<r;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function epe(i){let t;const e=i.extensions&&i.extensions[Un.KHR_DRACO_MESH_COMPRESSION];if(t=e?"draco:"+e.bufferView+":"+e.indices+":"+xO(e.attributes):i.indices+":"+xO(i.attributes)+":"+i.mode,void 0!==i.targets)for(let n=0,r=i.targets.length;n<r;n++)t+=":"+xO(i.targets[n]);return t}function xO(i){let t="";const e=Object.keys(i).sort();for(let n=0,r=e.length;n<r;n++)t+=e[n]+":"+i[e[n]]+";";return t}function wO(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const npe=new Ut;class ipe{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Sfe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(a);const l=a.match(/Version\/(\d+)/);r=n&&l?parseInt(l[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||n&&r<17||s&&o<98?new pc(this.options.manager):new sfe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new za(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return Tf(s,a,r),md(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[Un.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load(Pu.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteOffset||0;return n.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse){const o=vO[r.type],l=!0===r.normalized,c=new(0,jg[r.componentType])(r.count*o);return Promise.resolve(new Gi(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=vO[r.type],c=jg[r.componentType],d=c.BYTES_PER_ELEMENT,p=r.byteOffset||0,m=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,g=!0===r.normalized;let b,v;if(m&&m!==d*l){const y=Math.floor(p/m),M="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+y+":"+r.count;let x=e.cache.get(M);x||(b=new c(a,y*m,r.count*m/d),x=new kP(b,m/d),e.cache.add(M,x)),v=new gf(x,l,p%m/d,g)}else b=null===a?new c(r.count*l):new c(a,p,r.count*l),v=new Gi(b,l,g);if(void 0!==r.sparse){const C=r.sparse.values.byteOffset||0,F=new(0,jg[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*vO.SCALAR),D=new c(o[2],C,r.sparse.count*l);null!==a&&(v=new Gi(v.array.slice(),v.itemSize,v.normalized));for(let k=0,B=F.length;k<B;k++){const T=F[k];if(v.setX(T,D[k*l]),l>=2&&v.setY(T,D[k*l+1]),l>=3&&v.setZ(T,D[k*l+2]),l>=4&&v.setW(T,D[k*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,n){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,n).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",""===d.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(d.name=a.uri);const p=(s.samplers||{})[o.sampler]||{};return d.magFilter=sG[p.magFilter]||cr,d.minFilter=sG[p.minFilter]||Dl,d.wrapS=oG[p.wrapS]||Kr,d.wrapT=oG[p.wrapT]||Kr,r.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(h=>h.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(h){c=!0;const p=new Blob([h],{type:o.mimeType});return l=a.createObjectURL(p),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(h){return new Promise(function(p,m){let g=p;!0===e.isImageBitmapLoader&&(g=function(b){const v=new Bo(b);v.needsUpdate=!0,p(v)}),e.load(Pu.resolveURL(h,s.path),g,void 0,m)})}).then(function(h){return!0===c&&a.revokeObjectURL(l),md(h,o),h.userData.mimeType=o.mimeType||function tpe(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[t]=d,d}assignTexture(t,e,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[Un.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[Un.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Un.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new yf,Uo.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new ps,Uo.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}t.material=n}getMaterialType(){return Xb}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},c=[];if((s.extensions||{})[Un.KHR_MATERIALS_UNLIT]){const h=r[Un.KHR_MATERIALS_UNLIT];o=h.getMaterialType(),c.push(h.extendParams(a,s,e))}else{const h=s.pbrMetallicRoughness||{};if(a.color=new Ze(1,1,1),a.opacity=1,Array.isArray(h.baseColorFactor)){const p=h.baseColorFactor;a.color.setRGB(p[0],p[1],p[2],fs),a.opacity=p[3]}void 0!==h.baseColorTexture&&c.push(e.assignTexture(a,"map",h.baseColorTexture,hs)),a.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,a.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",h.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",h.metallicRoughnessTexture))),o=this._invokeOne(function(p){return p.getMaterialType&&p.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(p){return p.extendMaterialParams&&p.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=us);const d=s.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==er&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new xe(1,1),void 0!==s.normalTexture.scale)){const h=s.normalTexture.scale;a.normalScale.set(h,h)}if(void 0!==s.occlusionTexture&&o!==er&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==er){const h=s.emissiveFactor;a.emissive=(new Ze).setRGB(h[0],h[1],h[2],fs)}return void 0!==s.emissiveTexture&&o!==er&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,hs)),Promise.all(c).then(function(){const h=new o(a);return s.name&&(h.name=s.name),md(h,s),e.associations.set(h,{materials:t}),s.extensions&&Tf(r,h,s),h})}createUniqueName(t){const e=Ri.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[Un.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return aG(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],d=epe(c),h=r[d];if(h)o.push(h.promise);else{let p;p=c.extensions&&c.extensions[Un.KHR_DRACO_MESH_COMPRESSION]?s(c):aG(new fn,c,e),r[d]={primitive:c,promise:p},o.push(p)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new Xb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:dc})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var i;return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],h=[];for(let m=0,g=d.length;m<g;m++){const b=d[m],v=o[m];let y;const M=c[m];if(v.mode===$a.TRIANGLES||v.mode===$a.TRIANGLE_STRIP||v.mode===$a.TRIANGLE_FAN||void 0===v.mode)y=!0===s.isSkinnedMesh?new j5(b,M):new Tn(b,M),!0===y.isSkinnedMesh&&y.normalizeSkinWeights(),v.mode===$a.TRIANGLE_STRIP?y.geometry=tG(y.geometry,A4):v.mode===$a.TRIANGLE_FAN&&(y.geometry=tG(y.geometry,Kk));else if(v.mode===$a.LINES)y=new Ng(b,M);else if(v.mode===$a.LINE_STRIP)y=new vf(b,M);else if(v.mode===$a.LINE_LOOP)y=new i$(b,M);else{if(v.mode!==$a.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);y=new Hb(b,M)}Object.keys(y.geometry.morphAttributes).length>0&&Jfe(y,s),y.name=e.createUniqueName(s.name||"mesh_"+t),md(y,s),v.extensions&&Tf(r,y,v),e.assignFinalMaterial(y),h.push(y)}for(let m=0,g=h.length;m<g;m++)e.associations.set(h[m],{meshes:t,primitives:m});if(1===h.length)return s.extensions&&Tf(r,h[0],s),h[0];const p=new la;s.extensions&&Tf(r,p,s),e.associations.set(p,{meshes:t});for(let m=0,g=h.length;m<g;m++)p.add(h[m]);return p})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new br(aae_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new kb(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),md(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let r=0,s=e.joints.length;r<s;r++)n.push(this._loadNodeShallow(e.joints[r]));return n.push(void 0!==e.inverseBindMatrices?this.getDependency("accessor",e.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const h=o[c];if(h){a.push(h);const p=new Ut;null!==s&&p.fromArray(s.array,16*c),l.push(p)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[c])}return new xS(a,l)})}loadAnimation(t){const n=this,r=this.json.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],l=[],c=[],d=[];for(let h=0,p=r.channels.length;h<p;h++){const m=r.channels[h],g=r.samplers[m.sampler],b=m.target,y=void 0!==r.parameters?r.parameters[g.input]:g.input,M=void 0!==r.parameters?r.parameters[g.output]:g.output;void 0!==b.node&&(o.push(this.getDependency("node",b.node)),a.push(this.getDependency("accessor",y)),l.push(this.getDependency("accessor",M)),c.push(g),d.push(b))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(h){const p=h[0],m=h[1],g=h[2],b=h[3],v=h[4],y=[];for(let M=0,x=p.length;M<x;M++){const C=p[M],F=m[M],D=g[M],k=b[M],B=v[M];if(void 0===C)continue;C.updateMatrix&&C.updateMatrix();const T=n._createAnimationTracks(C,F,D,k,B);if(T)for(let A=0;A<T.length;A++)y.push(T[A])}return new Zb(s,void 0,y)})}createNodeMesh(t){const n=this,r=this.json.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const n=this,r=this.json.nodes[t],s=n._loadNodeShallow(t),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],h=c[1],p=c[2];null!==p&&d.traverse(function(m){m.isSkinnedMesh&&m.bind(p,npe)});for(let m=0,g=h.length;m<g;m++)d.add(h[m]);return d})}_loadNodeShallow(t){const n=this.extensions,r=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),this.nodeCache[t]=Promise.all(a).then(function(c){let d;if(d=!0===s.isBone?new LP:c.length>1?new la:1===c.length?c[0]:new Fr,d!==c[0])for(let h=0,p=c.length;h<p;h++)d.add(c[h]);if(s.name&&(d.userData.name=s.name,d.name=o),md(d,s),s.extensions&&Tf(n,d,s),void 0!==s.matrix){const h=new Ut;h.fromArray(s.matrix),d.applyMatrix4(h)}else void 0!==s.translation&&d.position.fromArray(s.translation),void 0!==s.rotation&&d.quaternion.fromArray(s.rotation),void 0!==s.scale&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],r=this,s=new la;n.name&&(s.name=r.createUniqueName(n.name)),md(s,n),n.extensions&&Tf(e,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,h=l.length;d<h;d++)s.add(l[d]);return r.associations=(d=>{const h=new Map;for(const[p,m]of r.associations)(p instanceof Uo||p instanceof Bo)&&h.set(p,m);return d.traverse(p=>{const m=r.associations.get(p);null!=m&&h.set(p,m)}),h})(s),s})}_createAnimationTracks(t,e,n,r,s){const o=[],a=t.name?t.name:t.uuid,l=[];let c;switch(Fu[s.path]===Fu.weights?t.traverse(function(p){p.morphTargetInfluences&&l.push(p.name?p.name:p.uuid)}):l.push(a),Fu[s.path]){case Fu.weights:c=Hg;break;case Fu.rotation:c=$g;break;case Fu.position:case Fu.scale:c=Wg;break;default:c=1===n.itemSize?Hg:Wg}const d=void 0!==r.interpolation?Kfe[r.interpolation]:wb,h=this._getArrayFromAccessor(n);for(let p=0,m=l.length;p<m;p++){const g=new c(l[p]+"."+Fu[s.path],e.array,h,d);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(g),o.push(g)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=wO(e.constructor),r=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)r[s]=e[s]*n;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){return new(this instanceof $g?Xfe:rG)(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function aG(i,t,e){const n=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=yO[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==t.indices&&!i.index){const o=e.getDependency("accessor",t.indices).then(function(a){i.setIndex(a)});r.push(o)}return ei.workingColorSpace!==fs&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ei.workingColorSpace}" not supported.`),md(i,t),function rpe(i,t,e){const n=t.attributes,r=new zs;if(void 0===n.POSITION)return;{const a=e.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new O(l[0],l[1],l[2]),new O(c[0],c[1],c[2])),a.normalized){const d=wO(jg[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const s=t.targets;if(void 0!==s){const a=new O,l=new O;for(let c=0,d=s.length;c<d;c++){const h=s[c];if(void 0!==h.POSITION){const p=e.json.accessors[h.POSITION],m=p.min,g=p.max;if(void 0!==m&&void 0!==g){if(l.setX(Math.max(Math.abs(m[0]),Math.abs(g[0]))),l.setY(Math.max(Math.abs(m[1]),Math.abs(g[1]))),l.setZ(Math.max(Math.abs(m[2]),Math.abs(g[2]))),p.normalized){const b=wO(jg[p.componentType]);l.multiplyScalar(b)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new Hs;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function Qfe(i,t,e){let n=!1,r=!1,s=!1;for(let c=0,d=t.length;c<d;c++){const h=t[c];if(void 0!==h.POSITION&&(n=!0),void 0!==h.NORMAL&&(r=!0),void 0!==h.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const h=t[c];if(n){const p=void 0!==h.POSITION?e.getDependency("accessor",h.POSITION):i.attributes.position;o.push(p)}if(r){const p=void 0!==h.NORMAL?e.getDependency("accessor",h.NORMAL):i.attributes.normal;a.push(p)}if(s){const p=void 0!==h.COLOR_0?e.getDependency("accessor",h.COLOR_0):i.attributes.color;l.push(p)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const h=c[1],p=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=h),s&&(i.morphAttributes.color=p),i.morphTargetsRelative=!0,i})}(i,t.targets,e):i})}class ope{constructor(){this.gltfLoader=new Cfe}loadFromGgGlb(t,e){return function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){const n=yield this.gltfLoader.parseAsync(t,"");return n.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new Ha(n.scene)})}}const yo=(i,t)=>Array(i).fill(null).map((e,n)=>t(n));class If{static startDebugView(t,e){let n=this.activeDebugViews.get(t);return n?n.renderers.includes(e)||n.renderers.push(e):(n={view:new If(t),renderers:[e]},this.activeDebugViews.set(t,n)),n.view}static stopDebugView(t,e){const n=t.world,r=this.activeDebugViews.get(n);r&&(r.renderers=r.renderers.filter(s=>s!==e),0===r.renderers.length&&(r.view.dispose(),this.activeDebugViews.delete(n)))}constructor(t){this.world=t,this.debugScene=null,this.aSub=null,this.rSub=null,this.syncMap=new Map,this.debugScene=new Ob;const e=n=>{var r,s;const o=n.debugBodySettings;let c,l=this.lineSegmentPointsForShape(o.shape);c=l?new Ng((new fn).setFromPoints(l)):null===(r=this.world)||void 0===r?void 0:r.visualScene.factory.createPrimitive(o.shape,{shading:"wireframe",color:0}).nativeMesh,this.syncMap.set(n,c),null===(s=this.debugScene)||void 0===s||s.add(c)};for(const n of this.world.physicsWorld.children)e(n);this.aSub=this.world.physicsWorld.added$.subscribe(n=>e(n)),this.rSub=this.world.physicsWorld.removed$.subscribe(n=>{var r;const s=this.syncMap.get(n);s&&(this.syncMap.delete(n),null===(r=this.debugScene)||void 0===r||r.remove(s))})}get scene(){return this.debugScene}render(t,e){for(const[r,s]of this.syncMap.entries()){const o=r.debugBodySettings;if(o.ignoreTransform||(s.position.set(...Te.spr(r.position)),s.quaternion.set(...$i.spr(r.rotation))),s.material){let a=16777215;switch(o.type){case"RIGID_DYNAMIC":a=o.sleeping?255:16711680;break;case"RIGID_STATIC":a=65280;break;case"TRIGGER":a=16776960}s.material.color.set(a),s.material.needsUpdate=!0}}const n=t.autoClearColor;n&&(t.autoClearColor=!1),t.render(this.debugScene,e),n&&(t.autoClearColor=!0)}lineSegmentPointsForShape(t){if("BOX"===t.shape){const e=Te.scalarMult(t.dimensions,.5);return[...yo(8,n=>new O(n<4?e.x:-e.x,n%4<2?e.y:-e.y,n%2?e.z:-e.z)),...yo(8,n=>new O(n%2?e.x:-e.x,n<4?e.y:-e.y,n%4<2?e.z:-e.z)),...yo(8,n=>new O(n%4<2?e.x:-e.x,n%2?e.y:-e.y,n<4?e.z:-e.z))]}if("CYLINDER"===t.shape)return[...yo(32,e=>new O(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),-t.height/2)),...yo(32,e=>new O(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),t.height/2)),...yo(8,e=>new O(Math.floor(e/2)%2?0:e<4?t.radius:-t.radius,Math.floor(e/2)%2?e<4?t.radius:-t.radius:0,e%2?t.height/2:-t.height/2)),new O(0,0,-t.height/2),new O(0,0,t.height/2)];if("CONE"===t.shape)return[...yo(32,e=>new O(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),-t.height/2)),...yo(8,e=>new O(e%2||Math.floor(e/2)%2?0:e<4?t.radius:-t.radius,e%2?0:Math.floor(e/2)%2?e<4?t.radius:-t.radius:0,e%2?t.height/2:-t.height/2)),new O(0,0,-t.height/2),new O(0,0,t.height/2)];if("SPHERE"===t.shape)return[...yo(32,e=>new O(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),0)),...yo(32,e=>new O(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),0,t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8))),...yo(32,e=>new O(0,t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8)))];if("CAPSULE"===t.shape)return[...this.lineSegmentPointsForShape({shape:"CYLINDER",radius:t.radius,height:t.centersDistance}),...yo(16,e=>new O(t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),0,t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)+t.centersDistance/2)),...yo(16,e=>new O(t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),0,-t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)-t.centersDistance/2)),...yo(16,e=>new O(0,t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)+t.centersDistance/2)),...yo(16,e=>new O(0,t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),-t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)-t.centersDistance/2))];if("CONVEX_HULL"===t.shape)return[...t.vertices.map(n=>[new O(n.x-.05,n.y,n.z),new O(n.x+.05,n.y,n.z),new O(n.x,n.y-.05,n.z),new O(n.x,n.y+.05,n.z),new O(n.x,n.y,n.z-.05),new O(n.x,n.y,n.z+.05)]).reduce((n,r)=>(n.push(...r),n),[])];if("COMPOUND"===t.shape){const e=[];for(const{position:n,shape:r,rotation:s}of t.children){let o=this.lineSegmentPointsForShape(r);if(!o)return null;e.push(...o.map(a=>new O(...Te.spr(Te.add(n||Te.O,Te.rot(a,s||$i.O))))))}return e}return null}dispose(){var t,e;this.debugScene=null,null===(t=this.aSub)||void 0===t||t.unsubscribe(),null===(e=this.rSub)||void 0===e||e.unsubscribe(),this.syncMap=new Map}}If.activeDebugViews=new Map;class lG extends Fse{get physicsDebugViewActive(){return this._physicsDebugViewActive}set physicsDebugViewActive(t){this._physicsDebugViewActive!=t&&(this._physicsDebugViewActive=t,this.world&&(t?this.debugView=If.startDebugView(this.world,this):(If.stopDebugView(this.debugView,this),this.debugView=null)))}constructor(t,e,n,r={}){super(t,n,r),this.scene=t,this.camera=e,this.canvas=n,this.world=null,this.debugView=null,this._physicsDebugViewActive=!1,this.nativeRenderer=new Uue(Object.assign({canvas:n,alpha:this.rendererOptions.transparent},this.rendererOptions)),this.nativeRenderer.shadowMap.enabled=!0,this.nativeRenderer.setClearColor(this.rendererOptions.background),this.nativeRenderer.shadowMap.type=h4,this.nativeRenderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}addToWorld(t){this.world=t,this.physicsDebugViewActive&&(this.debugView=If.startDebugView(this.world,this))}removeFromWorld(t){this.physicsDebugViewActive&&(If.stopDebugView(this.debugView,this),this.debugView=null),this.world=null}resizeRenderer(t){this.nativeRenderer.setSize(t.x,t.y),(this.camera.nativeCamera instanceof br||"PerspectiveCamera"==this.camera.nativeCamera.type)&&Math.abs(this.camera.nativeCamera.aspect-t.x/t.y)>.01&&(this.camera.nativeCamera.aspect=t.x/t.y,this.camera.nativeCamera.updateProjectionMatrix())}render(){this.nativeRenderer.render(this.scene.nativeScene,this.camera.nativeCamera),this.physicsDebugViewActive&&this.debugView.render(this.nativeRenderer,this.camera.nativeCamera)}dispose(){this.camera.dispose(),this.nativeRenderer.clear(),this.nativeRenderer.dispose(),this.nativeRenderer.domElement=null}}const ape={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class eE{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const lpe=new kb(-1,1,1,-1,0,1),dpe=new class cpe extends fn{constructor(){super(),this.setAttribute("position",new ht([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ht([0,2,0,0,2,0],2))}};class upe{constructor(t){this._mesh=new Tn(dpe,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,lpe)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class hpe extends eE{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof kl?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=t5.clone(t.uniforms),this.material=new kl({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new upe(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class cG extends eE{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),s=t.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class fpe extends eE{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class ppe{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new xe);this._width=n.width,this._height=n.height,(e=new Cu(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Jm})).texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new hpe(ape),this.copyPass.material.blending=nd,this.clock=new N$}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==cG&&(o instanceof cG?n=!0:o instanceof fpe&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new xe);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class mpe extends eE{constructor(t,e,n=null,r=null,s=null){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ze}render(t,e,n){const r=t.autoClear;let s,o;t.autoClear=!1,null!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),null!==this.clearAlpha&&(s=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),null!==this.clearColor&&t.setClearColor(this._oldClearColor),null!==this.clearAlpha&&t.setClearAlpha(s),null!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}class gpe extends lG{constructor(t,e,n,r={}){super(t,e,n,r),this.nativeComposer=new ppe(this.nativeRenderer)}addToWorld(t){super.addToWorld(t);const e=new mpe(this.scene.nativeScene,this.camera.nativeCamera);this.nativeComposer.insertPass(e,0)}resizeRenderer(t){super.resizeRenderer(t),this.nativeComposer.setSize(t.x,t.y)}render(){this.nativeComposer.render(),this.physicsDebugViewActive&&this.debugView.render(this.nativeRenderer,this.camera.nativeCamera)}dispose(){super.dispose(),this.nativeComposer.dispose()}}class tE{constructor(){this._nativeScene=null,this.factory=new Mfe,this.loader=new ope}get nativeScene(){return this._nativeScene}init(){return i=this,t=void 0,n=function*(){this._nativeScene=new Ob},new((e=void 0)||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(h){o(h)}}function l(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())});var i,t,e,n}createRenderer(t,e,n){return new lG(this,t,e,n)}createComposerRenderer(t,e,n){return new gpe(this,t,e,n)}dispose(){this._nativeScene=new Ob}}const vpe=/^[og]\s*(.+)?/,ype=/^mtllib /,bpe=/^usemtl /,xpe=/^usemap /,dG=/\s+/,uG=new O,MO=new O,hG=new O,fG=new O,Ga=new O,nE=new Ze;function wpe(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){const n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[t+0],r[t+1],r[t+2]),s.push(r[e+0],r[e+1],r[e+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[t+0],r[t+1],r[t+2]),s.push(r[e+0],r[e+1],r[e+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(t,e,n){const r=this.vertices,s=this.object.geometry.normals;uG.fromArray(r,t),MO.fromArray(r,e),hG.fromArray(r,n),Ga.subVectors(hG,MO),fG.subVectors(uG,MO),Ga.cross(fG),Ga.normalize(),s.push(Ga.x,Ga.y,Ga.z),s.push(Ga.x,Ga.y,Ga.z),s.push(Ga.x,Ga.y,Ga.z)},addColor:function(t,e,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,e,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[t+0],r[t+1]),s.push(r[e+0],r[e+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,r,s,o,a,l,c){const d=this.vertices.length;let h=this.parseVertexIndex(t,d),p=this.parseVertexIndex(e,d),m=this.parseVertexIndex(n,d);if(this.addVertex(h,p,m),this.addColor(h,p,m),void 0!==a&&""!==a){const g=this.normals.length;h=this.parseNormalIndex(a,g),p=this.parseNormalIndex(l,g),m=this.parseNormalIndex(c,g),this.addNormal(h,p,m)}else this.addFaceNormal(h,p,m);if(void 0!==r&&""!==r){const g=this.uvs.length;h=this.parseUVIndex(r,g),p=this.parseUVIndex(s,g),m=this.parseUVIndex(o,g),this.addUV(h,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,r=t.length;n<r;n++){const s=this.parseVertexIndex(t[n],e);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=t.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(t[s],n));for(let s=0,o=e.length;s<o;s++)this.addUVLine(this.parseUVIndex(e[s],r))}};return i.startObject("",!1),i}class t0 extends Mf{constructor(t){super(t),this.materials=null}load(t,e,n,r){const s=this,o=new za(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{e(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}setMaterials(t){return this.materials=t,this}parse(t){const e=new wpe;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const d=c.charAt(0);if("#"!==d)if("v"===d){const h=c.split(dG);switch(h[0]){case"v":e.vertices.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),h.length>=7?(nE.setRGB(parseFloat(h[4]),parseFloat(h[5]),parseFloat(h[6])).convertSRGBToLinear(),e.colors.push(nE.r,nE.g,nE.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]));break;case"vt":e.uvs.push(parseFloat(h[1]),parseFloat(h[2]))}}else if("f"===d){const p=c.slice(1).trim().split(dG),m=[];for(let b=0,v=p.length;b<v;b++){const y=p[b];if(y.length>0){const M=y.split("/");m.push(M)}}const g=m[0];for(let b=1,v=m.length-1;b<v;b++){const y=m[b],M=m[b+1];e.addFace(g[0],y[0],M[0],g[1],y[1],M[1],g[2],y[2],M[2])}}else if("l"===d){const h=c.substring(1).trim().split(" ");let p=[];const m=[];if(-1===c.indexOf("/"))p=h;else for(let g=0,b=h.length;g<b;g++){const v=h[g].split("/");""!==v[0]&&p.push(v[0]),""!==v[1]&&m.push(v[1])}e.addLineGeometry(p,m)}else if("p"===d){const p=c.slice(1).trim().split(" ");e.addPointGeometry(p)}else if(null!==(r=vpe.exec(c))){const h=(" "+r[0].slice(1).trim()).slice(1);e.startObject(h)}else if(bpe.test(c))e.object.startMaterial(c.substring(7).trim(),e.materialLibraries);else if(ype.test(c))e.materialLibraries.push(c.substring(7).trim());else if(xpe.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();e.object.smooth="0"!==p&&"off"!==p}else e.object.smooth=!0;const h=e.object.currentMaterial();h&&(h.smooth=e.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}e.finalize();const s=new la;if(s.materialLibraries=[].concat(e.materialLibraries),1==!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let a=0,l=e.objects.length;a<l;a++){const c=e.objects[a],d=c.geometry,h=c.materials,p="Line"===d.type,m="Points"===d.type;let g=!1;if(0===d.vertices.length)continue;const b=new fn;b.setAttribute("position",new ht(d.vertices,3)),d.normals.length>0&&b.setAttribute("normal",new ht(d.normals,3)),d.colors.length>0&&(g=!0,b.setAttribute("color",new ht(d.colors,3))),!0===d.hasUVIndices&&b.setAttribute("uv",new ht(d.uvs,2));const v=[];for(let M=0,x=h.length;M<x;M++){const C=h[M],F=C.name+"_"+C.smooth+"_"+g;let D=e.materials[F];if(null!==this.materials)if(D=this.materials.create(C.name),!p||!D||D instanceof ps){if(m&&D&&!(D instanceof yf)){const k=new yf({size:10,sizeAttenuation:!1});Uo.prototype.copy.call(k,D),k.color.copy(D.color),k.map=D.map,D=k}}else{const k=new ps;Uo.prototype.copy.call(k,D),k.color.copy(D.color),D=k}void 0===D&&(D=p?new ps:m?new yf({size:1,sizeAttenuation:!1}):new GS,D.name=C.name,D.flatShading=!C.smooth,D.vertexColors=g,e.materials[F]=D),v.push(D)}let y;if(v.length>1){for(let M=0,x=h.length;M<x;M++){const C=h[M];b.addGroup(C.groupStart,C.groupCount,M)}y=p?new Ng(b,v):m?new Hb(b,v):new Tn(b,v)}else y=p?new Ng(b,v[0]):m?new Hb(b,v[0]):new Tn(b,v[0]);y.name=c.name,s.add(y)}else if(e.vertices.length>0){const a=new yf({size:1,sizeAttenuation:!1}),l=new fn;l.setAttribute("position",new ht(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(l.setAttribute("color",new ht(e.colors,3)),a.vertexColors=!0);const c=new Hb(l,a);s.add(c)}return s}}class pG extends Mf{constructor(t){super(t)}load(t,e,n,r){const s=this,o=""===this.path?Pu.extractUrlBase(t):this.path,a=new za(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},n,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,e){const n=t.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<n.length;l++){let c=n[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const d=c.indexOf(" ");let h=d>=0?c.substring(0,d):c;h=h.toLowerCase();let p=d>=0?c.substring(d+1):"";if(p=p.trim(),"newmtl"===h)r={name:p},o[p]=r;else if("ka"===h||"kd"===h||"ks"===h||"ke"===h){const m=p.split(s,3);r[h]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else r[h]=p}const a=new Mpe(this.resourcePath||e,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class Mpe{constructor(t="",e={}){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:dc,this.wrap=void 0!==this.options.wrap?this.options.wrap:Kr}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const e={};for(const n in t){const r=t[n],s={};e[n]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return e}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray}create(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const e=this,n=this.materialsInfo[t],r={name:t,side:this.side};function o(a,l){if(r[a])return;const c=e.getTextureParams(l,r),d=e.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(e.baseUrl,c.url));d.repeat.copy(c.scale),d.offset.copy(c.offset),d.wrapS=e.wrap,d.wrapT=e.wrap,("map"===a||"emissiveMap"===a)&&(d.colorSpace=hs),r[a]=d}for(const a in n){const l=n[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new Ze).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new Ze).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new Ze).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[t]=new GS(r),this.materials[t]}getTextureParams(t,e){const n={scale:new xe(1,1),offset:new xe(0,0)},r=t.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(e.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(n.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(n.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),n.url=r.join(" ").trim(),n}loadTexture(t,e,n,r,s){const o=void 0!==this.manager?this.manager:S$;let a=o.getHandler(t);null===a&&(a=new pc(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(t,n,r,s);return void 0!==e&&(l.mapping=e),l}}const Cpe=["determinateSpinner"];function Spe(i,t){if(1&i&&(ki(),$(0,"svg",11),Ee(1,"circle",12),W()),2&i){const e=ae();It("viewBox",e._viewBox()),V(1),Zo("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),It("r",e._circleRadius())}}const Epe=eb(class{constructor(i){this._elementRef=i}},"primary"),Ape=new me("mat-progress-spinner-default-options",{providedIn:"root",factory:function Dpe(){return{diameter:mG}}}),mG=100;let Yg=(()=>{class i extends Epe{constructor(e,n,r){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=mG,this._noopAnimations="NoopAnimations"===n&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,Ls(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=Ls(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=Ls(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(kr,8),E(Ape))},i.\u0275cmp=st({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,n){if(1&e&&Nn(Cpe,5),2&e){let r;Et(r=At())&&(n._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,n){2&e&&(It("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===n.mode?n.value:null)("mode",n.mode),Zo("width",n.diameter,"px")("height",n.diameter,"px"),ln("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===n.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[ut],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,n){if(1&e&&(fe(0,Spe,2,8,"ng-template",null,0,ru),$(2,"div",1,2),ki(),$(4,"svg",3),Ee(5,"circle",4),W()(),wa(),$(6,"div",5)(7,"div",6)(8,"div",7),oy(9,8),W(),$(10,"div",9),oy(11,8),W(),$(12,"div",10),oy(13,8),W()()()),2&e){const r=sr(1);V(4),It("viewBox",n._viewBox()),V(1),Zo("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),It("r",n._circleRadius()),V(4),U("ngTemplateOutlet",r),V(2),U("ngTemplateOutlet",r),V(2),U("ngTemplateOutlet",r)}},dependencies:[wy],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),Ipe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[uo,Jn]}),i})();const Rpe=["previewCanvasContainer"],kpe=["previewCanvas"];function Ppe(i,t){if(1&i){const e=$n();Gr(0),$(1,"label",11),Oe(2),W(),$(3,"input",12),De("change",function(r){Nt(e);const s=ae().$implicit;return s.value=r.currentTarget.checked,St(s.change(s.value))}),W(),Wr()}if(2&i){const e=ae(),n=e.index,r=e.$implicit,s=ae().index;V(1),U("for","custom_control_"+s+"_"+n),V(1),ui(r.label),V(1),U("id","custom_control_"+s+"_"+n)("type",r.type)("checked",r.value)}}function Ope(i,t){if(1&i){const e=$n();$(0,"div",9)(1,"label",11),Oe(2),W(),$(3,"input",14),De("change",function(){const s=Nt(e).$implicit,o=ae(2).$implicit;return o.value=s,St(o.change(o.value))}),W()()}if(2&i){const e=t.$implicit,n=ae(2),r=n.index,s=n.$implicit,o=ae().index;V(1),U("for","custom_control_"+o+"_"+r+"_"+e),V(1),ui(e),V(1),U("id","custom_control_"+o+"_"+r+"_"+e)("checked",s.value===e)}}function Fpe(i,t){if(1&i&&($(0,"div",13)(1,"label"),Oe(2),W(),fe(3,Ope,4,4,"div",8),W()),2&i){const e=ae().$implicit;V(2),ui(e.label),V(1),U("ngForOf",e.options)}}function Lpe(i,t){if(1&i){const e=$n();Gr(0),$(1,"label",11),Oe(2),W(),$(3,"input",15),De("colorChange",function(r){Nt(e);const s=ae().$implicit,o=ae(2);return s.value=o.toRGB(r.value),St(s.change(s.value))}),W(),Ee(4,"ngx-mat-color-toggle",16)(5,"ngx-mat-color-picker",null,17),Wr()}if(2&i){const e=sr(6),n=ae(),r=n.index,s=n.$implicit,o=ae().index;V(1),U("for","custom_control_"+o+"_"+r),V(1),ui(s.label),V(1),U("ngxMatColorPicker",e),V(1),U("for",e)}}function Npe(i,t){if(1&i){const e=$n();Gr(0),$(1,"label",11),Oe(2),W(),$(3,"input",18),De("change",function(r){Nt(e);const s=ae().$implicit;return s.value=r.currentTarget.value,St(s.change(s.value))}),W(),Wr()}if(2&i){const e=ae(),n=e.index,r=e.$implicit,s=ae().index;V(1),U("for","custom_control_"+s+"_"+n),V(1),ui(r.label),V(1),U("id","custom_control_"+s+"_"+n)("min",r.minValue)("max",r.maxValue)("step",r.valueStep)("value",r.value)}}function Bpe(i,t){if(1&i&&($(0,"div",9),fe(1,Ppe,4,5,"ng-container",6),fe(2,Fpe,4,2,"div",10),fe(3,Lpe,7,4,"ng-container",6),fe(4,Npe,4,7,"ng-container",6),W()),2&i){const e=t.$implicit;V(1),U("ngIf","checkbox"===e.type),V(1),U("ngIf","radio"===e.type),V(1),U("ngIf","color"===e.type),V(1),U("ngIf","slider"===e.type)}}function Upe(i,t){if(1&i&&(Gr(0),$(1,"h4"),Oe(2),W(),fe(3,Bpe,5,4,"div",8),Wr()),2&i){const e=t.$implicit;V(2),ui(e.title),V(1),U("ngForOf",e.controls)}}function Vpe(i,t){if(1&i){const e=$n();$(0,"div",9)(1,"label",11),Oe(2),W(),$(3,"input",19),De("change",function(r){return St(Nt(e).$implicit.visible=r.currentTarget.checked)}),W()()}if(2&i){const e=t.$implicit;V(1),U("for","visibility_"+e.name),V(1),ui(e.name),V(1),U("id","visibility_"+e.name)("checked",e.visible)}}function zpe(i,t){if(1&i&&(Gr(0),$(1,"h4"),Oe(2,"Objects visibility"),W(),fe(3,Vpe,4,4,"div",8),Wr()),2&i){const e=ae();V(3),U("ngForOf",e.meshes)}}function Hpe(i,t){1&i&&Ee(0,"mat-spinner",20)}const ca=i=>{i.colorSpace="srgb",i.anisotropy=8,i.magFilter=vr,i.minFilter=vr};let gG=(()=>{class i{constructor(e){this.cdr=e,this.visibilityControls=!0,this.groupFunction=null,this.customControls=[],this.onObjectLoaded=new He,this._paths$=new $e(null),this.destroyed$=new Re,this.entity=null,this.meshes=[]}get paths(){return this._paths$.getValue()}set paths(e){this._paths$.next(e)}ngAfterViewInit(){var e=this;return je(function*(){var s;e.world=new AC(new tE,{init:(s=je(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield e.world.init(),e.world.visualScene.nativeScene.add(new Jb(16777215,2));let n=new $e({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera({frustrum:{near:.01,far:1e4}}),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.controller=new zse(e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement},orbiting:{sensitivityX:2,sensitivityY:2},orbitingElasticity:30}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._paths$.pipe(Le(e.destroyed$)).subscribe(function(){var s=je(function*(o){if(e.entity&&(e.world.removeEntity(e.entity),e.entity.dispose(),e.entity=null,e.meshes=[],e.cdr.markForCheck()),o){const[a,l]=o,c=new t0,h=yield(new pG).loadAsync(l);h.preload(),c.setMaterials(h);const p=yield c.loadAsync(a);if(e.groupFunction){const b={};for(const v of p.children){const y=e.groupFunction(v.name);b[y]||(b[y]=[]),b[y].push(v)}for(const v of Object.keys(b)){const y=new la;y.add(...b[v]),y.name=v,p.remove(...b[v]),p.add(y)}}e.meshes=p.children,e.meshes.sort((b,v)=>b.name>v.name?1:-1),p.traverse(b=>{if(b instanceof Tn){const v=b.material instanceof Array?b.material:[b.material];for(const y of v)y.transparent=!0,y.alphaTest=.5,y instanceof er&&y.map&&(y.map.wrapS=Qi,y.map.wrapT=Qi,ca(y.map),y.map.needsUpdate=!0)}}),e.onObjectLoaded.next(p),e.entity=new Fo({object3D:new Ha(p)}),e.world.addEntity(e.entity);let m={min:{x:-5,y:-5,z:-5},max:{x:5,y:5,z:5}};const g=e.entity.object3D.getBoundings();!isNaN(g.min.x)&&!isNaN(g.max.x)&&(m=g),e.controller.target=Te.scalarMult(Te.add(m.min,m.max),.5),e.controller.spherical={phi:1.22,theta:-1.32,radius:Te.dist(m.min,m.max)},e.cdr.markForCheck()}});return function(o){return s.apply(this,arguments)}}())})()}toRGB(e){return(e?.r||0)<<16|(e?.g||0)<<8|(e?.b||0)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(Yn))},i.\u0275cmp=st({type:i,selectors:[["app-obj-viewer"]],viewQuery:function(e,n){if(1&e&&(Nn(Rpe,5),Nn(kpe,5)),2&e){let r;Et(r=At())&&(n.previewCanvasContainer=r.first),Et(r=At())&&(n.previewCanvas=r.first)}},inputs:{paths:"paths",visibilityControls:"visibilityControls",groupFunction:"groupFunction",customControls:"customControls"},outputs:{onObjectLoaded:"onObjectLoaded"},decls:8,vars:3,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["id","controls"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["class","controls-list",4,"ngFor","ngForOf"],[1,"controls-list"],["style","width: 100%",4,"ngIf"],[3,"for"],[3,"id","type","checked","change"],[2,"width","100%"],["type","radio",3,"id","checked","change"],["matInput","",1,"hidden",3,"ngxMatColorPicker","colorChange"],["matSuffix","",3,"for"],["picker",""],["type","range",3,"id","min","max","step","value","change"],["type","checkbox",3,"id","checked","change"],["mode","indeterminate"]],template:function(e,n){1&e&&($(0,"div",0,1),Ee(2,"canvas",2,3),$(4,"div",4),fe(5,Upe,4,2,"ng-container",5),fe(6,zpe,4,1,"ng-container",6),W(),fe(7,Hpe,1,0,"mat-spinner",7),W()),2&e&&(V(5),U("ngForOf",n.customControls),V(1),U("ngIf",n.visibilityControls),V(1),U("ngIf",!n.entity))},dependencies:[Os,hi,ene,Sl,Yg,Wie,wC,$H],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]{position:absolute;right:0;top:0;padding:5px;display:flex;flex-direction:column;row-gap:10px;background-color:#333;color:#fff;max-height:calc(100% - 8px);overflow-y:auto}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]:empty{display:none}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin:0}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%]{width:100%;display:flex;-webkit-user-select:none;user-select:none;align-items:center}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex-grow:1}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),i})();function $pe(i,t){if(1&i){const e=$n();ki(),$(0,"circle",5),De("mousedown",function(r){return Nt(e),St(ae().startDrag(r))}),Xe(1,"async"),Xe(2,"async"),W()}if(2&i){const e=ae();let n,r;It("cx",(null==(n=Je(1,3,e.mapPointer$))?null:n.x)||0)("cy",(null==(r=Je(2,5,e.mapPointer$))?null:r.y)||0)("r",10)}}const Gpe=function(){return{"stroke-width":3}};let CO=(()=>{class i{constructor(e){this.ref=e,this._roadSpline$=new $e([]),this._pointer$=new $e(null),this._projection$=new $e("nz"),this._roadSplineProjected$=new $e([]),this._pointerProjected$=new $e(yi.O),this.splineClosed=!1,this.pointerChange=new He,this.svgSize$=new $e({x:100,y:100}),this.scalingSquare$=new $e({x:0,y:0,width:100,height:100}),this.mapPolyline$=new $e(""),this.mapPointer$=new $e(null),this.isShiftPressed=!1,this.destroyed$=new Re,this.isDragging=!1}set roadSpline(e){this._roadSpline$.next(e)}set pointer(e){this._pointer$.next(e)}set projection(e){this._projection$.next(e)}get trackLength$(){return this._roadSpline$.pipe(rt(e=>{let n=0;for(let r=1;r<e.length;r++)n+=Te.dist(e[r],e[r-1]);return n}))}projectionKeys(){switch(this._projection$.getValue()){case"nz":return["x","y","z",!1];case"z":return["x","y","z",!0];case"ny":return["x","z","y",!1];case"y":return["x","z","y",!0];case"nx":return["y","z","x",!1];case"x":return["y","z","x",!0]}}unproject(e,n){let[r,s,o,a]=this.projectionKeys(),l={x:0,y:0,z:0};return l[r]=e.x,l[s]=a?-e.y:e.y,l[o]=a?-n:n,l}projectionZ(e){let[n,r,s,o]=this.projectionKeys();return o?-e[s]:e[s]}project(e){let[n,r,s,o]=this.projectionKeys();return{x:e[n],y:o?-e[r]:e[r]}}ngAfterViewInit(){ko(window,"keydown").pipe(Le(this.destroyed$)).subscribe(n=>{"Shift"===n.key&&(this.isShiftPressed=!0)}),ko(window,"keyup").pipe(Le(this.destroyed$)).subscribe(n=>{"Shift"===n.key&&(this.isShiftPressed=!1)}),Qo([this._roadSpline$,this._projection$]).pipe(Le(this.destroyed$)).subscribe(([n,r])=>{this._roadSplineProjected$.next(n.map(s=>this.project(s)))}),Qo([this._pointer$,this._projection$]).pipe(Le(this.destroyed$)).subscribe(([n,r])=>{this._pointerProjected$.next(this.project(n||Te.O))}),this._roadSplineProjected$.pipe(Le(this.destroyed$),rt(n=>{let r={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},s={x:Number.MIN_SAFE_INTEGER,y:Number.MIN_SAFE_INTEGER};n.forEach(a=>{r={x:Math.min(r.x,a.x),y:Math.min(r.y,a.y)},s={x:Math.max(s.x,a.x),y:Math.max(s.y,a.y)}});const o_x=s.x-r.x,o_y=s.y-r.y;return{x:r.x-.1*o_x,y:r.y-.1*o_y,width:1.2*o_x,height:1.2*o_y}})).subscribe(this.scalingSquare$),Qo([this._roadSplineProjected$,this.scalingSquare$,this.svgSize$]).pipe(Le(this.destroyed$),rt(([n,r,s])=>{const o=n.map(a=>({x:(a.x-r.x)*s.x/r.width,y:(r.y-a.y)*s.y/r.height+s.y}));return this.splineClosed&&o.length&&o.push(o[0]),o.map(a=>Math.round(a.x)+","+Math.round(a.y)).join(" ")})).subscribe(this.mapPolyline$),Qo([this._pointerProjected$,this.scalingSquare$.asObservable(),this.svgSize$]).pipe(Le(this.destroyed$),rt(([n,r,s])=>n?{x:(n.x-r.x)*s.x/r.width,y:(r.y-n.y)*s.y/r.height+s.y}:null)).subscribe(this.mapPointer$);const e=()=>{this.svgSize$.next({x:this.ref.nativeElement.clientWidth,y:this.ref.nativeElement.clientHeight})};new ResizeObserver(e).observe(this.ref.nativeElement),e()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}startDrag(e){this.isDragging=!0,this.updatePointer(e)}drag(e){this.isDragging&&this.updatePointer(e)}endDrag(){this.isDragging=!1}getClosestProjectedLineIndex(e){const n=this._roadSplineProjected$.getValue();let r=-1,s=Number.MAX_SAFE_INTEGER;for(let d=1;d<n.length;d++){const h=n[d-1],p=yi.sub(n[d],n[d-1]),m=Math.max(0,Math.min(1,((e.x-h.x)*p.x+(e.y-h.y)*p.y)/yi.lenSq(p))),v=Math.hypot(e.x-(h.x+m*p.x),e.y-(h.y+m*p.y));v<s&&(s=v,r=d-1)}if(-1==r)return[-1,0];const o=n[r],l=yi.sub(n[r+1],o);return[r,Math.max(0,Math.min(1,((e.x-o.x)*l.x+(e.y-o.y)*l.y)/yi.lenSq(l)))]}getRoadSplineProjectionZ(e){const[n,r]=this.getClosestProjectedLineIndex(e);if(-1==n)return 0;const s=this._roadSpline$.getValue();return this.projectionZ(s[n])+r*(this.projectionZ(s[n+1])-this.projectionZ(s[n]))}updatePointer(e){const n=this.ref.nativeElement.querySelector("svg")?.getBoundingClientRect();if(n){const r={x:e.clientX-n.left,y:n.height-e.clientY+n.top},s=this.scalingSquare$.getValue(),o=this.svgSize$.getValue(),a=this._pointerProjected$.getValue()||yi.O;let l={x:r.x*(s.width/o.x)+s.x,y:r.y*(s.height/o.y)+s.y};if(this.isShiftPressed){const d=this._roadSplineProjected$.getValue(),[h,p]=this.getClosestProjectedLineIndex(a),[m,g]=this.getClosestProjectedLineIndex(l);if(-1!==h&&-1!==m){const b=yi.sub(a,yi.lerp(d[h],d[h+1],p));l=yi.add(b,yi.lerp(d[m],d[m+1],g))}}const c=this.projectionZ(this._pointer$.getValue()||Te.O)-this.getRoadSplineProjectionZ(a);this.pointerChange.emit(this.unproject(l,c+this.getRoadSplineProjectionZ(l)))}}}return i.\u0275fac=function(e){return new(e||i)(E(vt))},i.\u0275cmp=st({type:i,selectors:[["app-minimap"]],inputs:{roadSpline:"roadSpline",pointer:"pointer",projection:"projection",splineClosed:"splineClosed"},outputs:{pointerChange:"pointerChange"},decls:12,vars:16,consts:[[1,"container"],["shape-rendering","geometricPrecision",3,"mousemove","mouseup","mouseleave"],[2,"fill","none","stroke","#333333",3,"ngStyle"],["fill","#e30","stroke","black","stroke-width","3","style","cursor: pointer;",3,"mousedown",4,"ngIf"],[1,"info_div"],["fill","#e30","stroke","black","stroke-width","3",2,"cursor","pointer",3,"mousedown"]],template:function(e,n){if(1&e&&($(0,"div",0),ki(),$(1,"svg",1),De("mousemove",function(s){return n.drag(s)})("mouseup",function(){return n.endDrag()})("mouseleave",function(){return n.endDrag()}),Xe(2,"async"),Xe(3,"async"),Ee(4,"polyline",2),Xe(5,"async"),fe(6,$pe,3,7,"circle",3),Xe(7,"async"),W(),wa(),$(8,"div",4)(9,"span"),Oe(10),Xe(11,"async"),W()()()),2&e){let r,s;V(1),It("viewBox","0 0 "+(null==(r=Je(2,5,n.svgSize$))?null:r.x)+" "+(null==(r=Je(3,7,n.svgSize$))?null:r.y)),V(3),U("ngStyle",jr(15,Gpe)),It("points",Je(5,9,n.mapPolyline$)),V(2),U("ngIf",Je(7,11,n.mapPointer$)),V(4),Vi("Track length (m): ",null==(s=Je(11,13,n.trackLength$))?null:s.toFixed(2),"")}},dependencies:[hi,rM,co],styles:["[_nghost-%COMP%]{overflow:auto}.container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.container[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]{color:#838383}"],changeDetection:0}),i})();const Wpe=["previewCanvasContainer"],jpe=["previewCanvas"];function Ype(i,t){if(1&i&&($(0,"mat-option",19),Oe(1),W()),2&i){const e=t.$implicit;U("value",e),V(1),Vi(" ",e," ")}}function qpe(i,t){if(1&i){const e=$n();Gr(0),$(1,"mat-form-field",1)(2,"mat-label"),Oe(3,"Custom FAM path"),W(),Ee(4,"input",20,21),Xe(6,"async"),W(),$(7,"button",22),De("click",function(){Nt(e);const r=sr(5);return St(ae().onFamSelected(r.value))}),Oe(8,"LOAD"),W(),Wr()}if(2&i){const e=ae();V(4),U("value",Je(6,1,e.previewFamLocation$))}}function Xpe(i,t){1&i&&Ee(0,"mat-spinner",23),2&i&&U("diameter",40)}function Kpe(i,t){1&i&&Ee(0,"mat-spinner",24)}const Zpe=function(){return["loop_chunk","num_chunks","unk0","unk1","position","unknowns0","chunks_size","rail_tex_id","num_prop_descr","num_props","unk2","unk3","prop_descr","props"]};var Rf=(()=>{return(i=Rf||(Rf={})).ThreeModel="model",i.Bitmap="bitmap",i.TwoSidedBitmap="two_sided_bitmap",Rf;var i})();class Qpe extends lk{constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.famPath=e,this.hideUnknownEntities$=n,this.textureLoader=new pc,this.terrainMaterials={},this.objLoader=new t0,this.resource=null,this.isOpenedTrack=!1,this._placeholder=null,this._placeholderPromise=null,this.unknownEntities=new Set,this._placeholderTerrain=null,this._placeholderTerrainPromise=null}onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe(bl(),Le(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return je(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}getPlaceholderTerrainTexture(){var t=this;return je(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=Kr,e.wrapT=Qi,ca(e),e.flipY=!0,e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return je(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(l=>{l instanceof Tn&&(l.material=e.getTerrainMaterial((l.userData.name||l.name).substr((l.userData.name||l.name).lastIndexOf("_")+1).split(".")[0]))});let r=+t.path.split("_")[t.path.split("_").length-1],s=(e.resource.data.props||[]).filter(l=>l.road_point_idx>=4*r&&l.road_point_idx<4*(r+1)).map(l=>({...l,...e.resource.data.prop_descr[l.prop_descr_idx],position:Te.add({x:l.position.x,y:l.position.z,z:l.position.y},{x:e.resource.data.road_spline[l.road_point_idx].position.x,y:e.resource.data.road_spline[l.road_point_idx].position.z,z:e.resource.data.road_spline[l.road_point_idx].position.y}),rotation:$i.fromAngle(Te.nZ,l.rotation+e.resource.data.road_spline[l.road_point_idx].orientation)}));const o=(yield Promise.all(s.map(l=>e.loadPropInternal(l)))).filter(l=>!!l),a=new Fo({object3D:new Ha(n)});return e.addChildren(a,...o),e.loaded.set(t,[a,...o]),[[a,...o],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new er({side:us,transparent:!0,visible:!1}),this.famPath?this.textureLoader.loadAsync(`${this.famPath}/${t}.png`).then(e=>{e.wrapS=Kr,e.wrapT=Qi,ca(e),e.flipY=!0,this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}loadPropInternal(t){var e=this;return je(function*(){let n=!1;if(t.type==Rf.ThreeModel){let r;try{if(!e.famPath)throw new Error;const o=new pG,a=new t0,l=yield o.loadAsync(`${e.famPath}/props/${t.data.data.resource_id}/0/material.mtl`);l.preload(),a.setMaterials(l),r=new Ha(yield a.loadAsync(`${e.famPath}/props/${t.data.data.resource_id}/0/geometry.obj`))}catch{n=!0,r=e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:5},{diffuse:yield e.getPlaceholderTexture()})}r.nativeMesh.traverse(o=>{if(o instanceof Tn){const a=o.material instanceof Array?o.material:[o.material];for(const l of a)l.transparent=!0,l.alphaTest=.5,l instanceof er&&l.map&&(l.map.wrapS=Qi,l.map.wrapT=Qi,ca(l.map),l.map.needsUpdate=!0)}});const s=new Fo({object3D:r});return s.position=t.position,s.rotation=t.rotation,n&&(e.unknownEntities.add(s),s.visible=!e.hideUnknownEntities$.getValue()),e.world.addEntity(s),s}if(t.type==Rf.Bitmap||t.type==Rf.TwoSidedBitmap){const r=(c,d)=>new Array(d).fill(null).map((h,p)=>e.isOpenedTrack?`${Math.floor(c/4)+p}/0000`:`0/${(Math.floor(c/4)+p).toString().padStart(2,"0")}00`).join(";"),s=new la,[o,a]=yield e.loadTexturePlaneProp(r(t.data.data.resource_id,t.flags.is_animated?t.data.data.frame_count:1),{x:t.data.data.width,y:t.data.data.height},t.data.data.animation_interval);if(s.add(o),t.type==Rf.TwoSidedBitmap){const[c,d]=yield e.loadTexturePlaneProp(r(t.data.data.resource_id_2,1),{x:t.data.data.width_2,y:t.data.data.height},t.data.data.animation_interval);c.rotateY(Math.PI/2),c.position.x=t.data.data.width/2,c.position.y=t.data.data.width_2/2,s.add(c)}const l=new Fo({object3D:new Ha(s)});return l.position=t.position,l.rotation=t.rotation,a&&(e.unknownEntities.add(l),l.visible=!e.hideUnknownEntities$.getValue()),l}return null})()}loadTexturePlaneProp(t,e,n){var r=this;return je(function*(){const s=t.split(";"),o=yield r.getPlaceholderTexture();let a=!1,l=[];r.famPath?l=yield Promise.all(s.map(h=>r.textureLoader.loadAsync(`${r.famPath}/foreground/${h}.png`).catch(()=>(a=!0,o)))):(a=!0,l=s.map(()=>o));const c=l.map(h=>(ca(h),new er({map:h,alphaTest:.5,transparent:!0,side:us}))),d=new Tn(new uf(e.x,e.y),c[0]);if(d.rotateX(Math.PI/2),d.position.set(0,0,e.y/2),c.length>1){let h=-1;Zh(r.world).pipe(function Yse(i,t=Wy,e){const n=LI(i,t);return function jse(i,t){return ni((e,n)=>{const{leading:r=!0,trailing:s=!1}=t??{};let o=!1,a=null,l=null,c=!1;const d=()=>{l?.unsubscribe(),l=null,s&&(m(),c&&n.complete())},h=()=>{l=null,c&&n.complete()},p=g=>l=Mr(i(g)).subscribe(Xn(n,d,h)),m=()=>{if(o){o=!1;const g=a;a=null,n.next(g),!c&&p(g)}};e.subscribe(Xn(n,g=>{o=!0,a=g,(!l||l.closed)&&(r?m():p(g))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&n.complete()}))})}(()=>n,e)}(n&&!isNaN(+n)?1e3*+n:250)).subscribe(()=>{h=(h+1)%c.length,d.material=c[h]})}return[d,a]})()}}let Jpe=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r,this._resource$=new $e(null),this.changed=new He,this.previewLoading$=new $e(!0),this.previewFamLocation$=new $e(null),this.previewFamLoading$=new $e(!1),this.pointer$=new $e(null),this.selectedSplineIndex$=new $e(0),this.selectedSplineItem$=new $e(null),this.selectedAiInfoItem$=new $e(null),this.selectedTerrainItem$=new $e(null),this.famPath=null,this.name="",this.renderer=null,this.map=null,this.isOpenedTrack=!0,this.roadPath=null,this.destroyed$=new Re}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}get previewFamPossibleLocations(){const e=this.resource?.id;return e?[e.substring(0,e.indexOf("MISC"))+"ETRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_001.FAM",e.substring(0,e.indexOf("MISC"))+"GTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_001.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_M01.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_R01.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_T01.FAM"]:[]}get roadSpline(){return(this.resource?.data.road_spline||[]).filter((e,n)=>n<(4*this.resource?.data.num_chunks||0)).map(e=>({x:e.position.x,y:e.position.z,z:e.position.y}))||[]}ngAfterViewInit(){var e=this;return je(function*(){var s;e.world=new AC(new tE,{init:(s=je(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{},loader:{loadFromGgGlb:function(){var s=je(function*(...o){return[]});return function(){return s.apply(this,arguments)}}()}}),yield e.world.init(),e.skySphere=new Fo({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})}),e.skySphere.object3D.nativeMesh.material.side=us,e.world.addEntity(e.skySphere),e.selectionSphere=new Fo({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})}),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new Jb(16777215,2));let n=new $e({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=$i.lookAt(e.renderer.camera.position,Te.add(e.renderer.camera.position,Te.Y),Te.Z),Zh(e.world).pipe(Le(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new ck(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",cameraLinearSpeed:40,cameraBoostMultiplier:4,cameraMovementElasticity:100,cameraRotationElasticity:30,ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var s=je(function*(o){e.previewLoading$.next(!0),yield e.loadTerrainChunks(o?.id),yield e.loadPreview(),e.previewFamPossibleLocations[0]&&(e.previewFamLocation$.next(e.previewFamPossibleLocations[0]),yield e.onFamSelected(e.previewFamPossibleLocations[0])),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Le(e.destroyed$),hn(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),na(3e3)).subscribe(je(function*(){e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(Le(e.destroyed$),na(250)).subscribe(s=>{if(e.resource){const o=e.resource.data.road_spline[s];if(!o)return;const a={x:o.position.x,y:o.position.z,z:o.position.y};e.selectionSphere.position=a,e.renderer&&(e.renderer.position=Te.add(a,Te.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-e.resource.data.road_spline[s].orientation)),e.renderer.rotation=$i.lookAt(e.renderer.position,a,{x:0,y:0,z:1}),e.controller.reset())}e.selectedSplineItem$.next({id:Po(e.resource.id,`road_spline/${s}`),data:e.resource.data.road_spline[s],schema:(e.resource.schema.fields||[]).find(o=>"road_spline"===o.name)?.schema.child_schema,name:""}),e.selectedAiInfoItem$.next({id:Po(e.resource.id,`ai_info/${Math.floor(s/4)}`),data:e.resource.data.ai_info[Math.floor(s/4)],schema:(e.resource.schema.fields||[]).find(o=>"ai_info"===o.name)?.schema.child_schema,name:""}),e.selectedTerrainItem$.next({id:Po(e.resource.id,`terrain/${Math.floor(s/4)}`),data:e.resource.data.terrain[Math.floor(s/4)],schema:(e.resource.schema.fields||[]).find(o=>"terrain"===o.name)?.schema.child_schema,name:""})})})()}onFamSelected(e){var n=this;return je(function*(){if("custom"!=e&&n.famPath!=e){n.previewFamLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}),s=new pc,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=Al,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.famPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.famPath=null}finally{n.previewFamLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return je(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}onPointerChange(e){this.renderer&&(this.renderer.position=e)}loadPreview(){var e=this;return je(function*(){if(e.roadPath=e.resource?.data.road_spline.map(r=>({x:r.position.x,y:r.position.z,z:r.position.y})).filter((r,s)=>s%4==0).slice(0,e.resource.data.num_chunks)||null,e.isOpenedTrack=0===e.resource?.data.loop_chunk,!e.terrainChunksObjLocation||!e.roadPath)return;const n=Qh.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!e.isOpenedTrack);e.unloadPreview(),e.map=new Qpe(n,e.famPath&&"resources/"+e.famPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=e.isOpenedTrack,Zh(e.world).pipe(Le(e.destroyed$)).subscribe(()=>{e.map&&e.renderer&&e.map.loaderCursor$.next(e.renderer.position)}),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(Yn),E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-tri-map-block-ui"]],viewQuery:function(e,n){if(1&e&&(Nn(Wpe,5),Nn(jpe,5)),2&e){let r;Et(r=At())&&(n.previewCanvasContainer=r.first),Et(r=At())&&(n.previewCanvas=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:49,vars:44,consts:[[1,"famSelector"],["appearance","fill"],[3,"value","valueChange"],["famSelect",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],[4,"ngIf"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed","projection","pointerChange"],[3,"resource","hideBlockActions"],[3,"resource","hideBlockActions","fieldWhitelist"],[3,"value"],["matInput","","type","text",3,"value"],["customFamInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(e,n){if(1&e&&($(0,"div",0)(1,"h4"),Oe(2,"Preview *.FAM file"),W(),$(3,"mat-form-field",1)(4,"mat-label"),Oe(5,"Current preview FAM"),W(),$(6,"mat-select",2,3),De("valueChange",function(s){return n.onFamSelected(s)}),Xe(8,"async"),Xe(9,"async"),fe(10,Ype,2,2,"mat-option",4),$(11,"mat-option",5),Oe(12,"custom"),W()()(),fe(13,qpe,9,3,"ng-container",6),fe(14,Xpe,1,1,"mat-spinner",7),Xe(15,"async"),W(),$(16,"div",8)(17,"div",9,10),Ee(19,"canvas",11,12),fe(21,Kpe,1,0,"mat-spinner",13),Xe(22,"async"),W(),$(23,"div",14,10)(25,"mat-form-field",1)(26,"mat-label"),Oe(27,"Spline item"),W(),$(28,"input",15),De("ngModelChange",function(s){return n.selectedSplineIndex$.next(s)}),Xe(29,"async"),Xe(30,"async"),W()(),$(31,"app-minimap",16),De("pointerChange",function(s){return n.onPointerChange(s)}),Xe(32,"async"),W()()(),$(33,"h4"),Oe(34,"Road spline item"),W(),Ee(35,"app-compound-block-ui",17),Xe(36,"async"),$(37,"h4"),Oe(38,"AI info (block for 4 spline items)"),W(),Ee(39,"app-compound-block-ui",17),Xe(40,"async"),$(41,"h4"),Oe(42,"Terrain (block for 4 spline items)"),W(),Ee(43,"app-compound-block-ui",17),Xe(44,"async"),$(45,"h4"),Oe(46,"Common"),W(),Ee(47,"app-compound-block-ui",18),Xe(48,"async")),2&e){const r=sr(7);let s;V(6),U("value",n.previewFamPossibleLocations.includes(Je(8,21,n.previewFamLocation$))?Je(9,23,n.previewFamLocation$):"custom"),V(4),U("ngForOf",n.previewFamPossibleLocations),V(3),U("ngIf","custom"==r.value),V(1),U("ngIf",Je(15,25,n.previewFamLoading$)),V(7),U("ngIf",Je(22,27,n.previewLoading$)),V(7),U("min",0)("max",4*(null==(s=Je(29,29,n._resource$))?null:s.data.num_chunks)-1)("ngModel",Je(30,31,n.selectedSplineIndex$)),V(3),U("roadSpline",n.roadSpline)("pointer",Je(32,33,n.pointer$))("splineClosed",!n.isOpenedTrack)("projection","nz"),V(4),U("resource",Je(36,35,n.selectedSplineItem$))("hideBlockActions",!0),V(4),U("resource",Je(40,37,n.selectedAiInfoItem$))("hideBlockActions",!0),V(4),U("resource",Je(44,39,n.selectedTerrainItem$))("hideBlockActions",!0),V(4),U("resource",Je(48,41,n._resource$))("hideBlockActions",!0)("fieldWhitelist",jr(43,Zpe))}},dependencies:[Os,hi,Na,Qc,Cl,ed,Jc,ac,Ba,po,Sl,Vh,mb,Um,Yg,wl,CO,co],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.famSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.famSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.famSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.famSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .famSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),i})();const _G=i=>new Promise(t=>setTimeout(t,i)),vG=(i,t,e=null)=>{const n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0}),s=i.width,o=i.height;n.width=s,n.height=o,r.drawImage(i,0,0,s,o);const a=r.getImageData(0,0,s,o);for(let l=0;l<a.data.length;l+=4)t(a.data,l);r.putImageData(a,0,0),(e||i).src=n.toDataURL("image/png"),n.remove()};class tme{constructor(t,e,n){this.mesh=t,this.tailLightsTexColor=e,this.assetsPath=n,this.originalTexWithTailLights=null,this.tyreMaterial=null,this.texWithTailLightsImg=null,this.texWithTailLights=null,this.tailLightColors=[0,0],this.tyreTextures=[],this.tyreTextureUpdateTimer=void 0,this.wheels=[],this.wheelIdlePositions=[],this.frontWheels=[],this._tailLightsOn=!1,this._speed="idle",this._steeringAngle=0;const r=[];if(this.wheels=[null,null,null,null],this.frontWheels=[null,null],t.traverse(o=>{if(!(o instanceof Tn))return;let a=-1;if(o.name.startsWith("lbl__rt_frnt")?a=0:o.name.startsWith("lbl__lt_frnt")?a=1:o.name.startsWith("lbl__rt_rear")?a=2:o.name.startsWith("lbl__lt_rear")&&(a=3),a>-1){this.wheels[a]=o,a<2&&(this.frontWheels[a]=o),o.geometry.boundingBox||o.geometry.computeBoundingBox();const l=Te.avg(o.geometry.boundingBox.min,o.geometry.boundingBox.max);o.geometry.translate(...Te.spr(Te.neg(l))),o.position.set(...Te.spr(l)),this.wheelIdlePositions[a]=l}(o.name.includes("rsid")||o.name.includes("lite"))&&(r.push(o),this.originalTexWithTailLights=o.material.map)}),!this.originalTexWithTailLights)throw new Error("Not a driveable NFS1 car");this.tailLightColors=n.includes("TRAFFC.CFM")?[9509903,16711680]:[3212546,16258068],this.texWithTailLightsImg=document.createElement("img"),this.texWithTailLights=new Bo(this.texWithTailLightsImg),this.texWithTailLights.flipY=this.originalTexWithTailLights.flipY,ca(this.texWithTailLights),this.recolorTailLights(this.tailLightColors[0]).then();for(const o of r)o.material.map=this.texWithTailLights;const s=new pc;this.tyreTextures=[1,2,3,4].map(o=>s.load(`${n}/tyr${o}.png`));for(const o of this.tyreTextures)ca(o);this.tyreMaterial=new er({map:this.tyreTextures[0]}),this.tyreMaterial.transparent=!0,this.tyreMaterial.alphaTest=.5,this.tyreMaterial.map.wrapS=Qi,this.tyreMaterial.map.wrapT=Qi,this.tyreMaterial.polygonOffset=!0,this.tyreMaterial.polygonOffsetFactor=-4;for(const o of this.wheels)o.material=this.tyreMaterial}get tailLightsOn(){return this._tailLightsOn}set tailLightsOn(t){t!==this._tailLightsOn&&(this._tailLightsOn=t,this.recolorTailLights(this.tailLightColors[t?1:0]))}get speed(){return this._speed}set speed(t){if(t!==this._speed){switch(this._speed=t,this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),t){case"idle":this.tyreMaterial.map=this.tyreTextures[0];break;case"slow":let e=!0;this.tyreTextureUpdateTimer=setInterval(()=>{this.tyreMaterial.map=this.tyreTextures[e?1:2],this.tyreMaterial.needsUpdate=!0,e=!e},16);break;case"fast":this.tyreMaterial.map=this.tyreTextures[3]}this.tyreMaterial.needsUpdate=!0}}get steeringAngle(){return this._steeringAngle}set steeringAngle(t){if(t!==this._steeringAngle){this._steeringAngle=t;for(const e of this.frontWheels)e.rotation.set(0,0,t)}}recolorTailLights(t){var e=this;return je(function*(){if(e.originalTexWithTailLights&&e.texWithTailLights&&e.texWithTailLightsImg){for(let n=100;n>0&&!e.originalTexWithTailLights.source.data;n--)yield _G(50);((i,t,e,n=null)=>{const[r,s,o]=[t>>16,t>>8&255,255&t],[a,l,c]=[e>>16,e>>8&255,255&e];vG(i,(d,h)=>{d[h]==r&&d[h+1]==s&&d[h+2]==o&&(d[h]=a,d[h+1]=l,d[h+2]=c)},n)})(e.originalTexWithTailLights.source.data,e.tailLightsTexColor,t,e.texWithTailLightsImg),e.texWithTailLights.needsUpdate=!0}})()}dispose(){this.texWithTailLightsImg&&(this.texWithTailLightsImg.remove(),this.texWithTailLightsImg=null),this.texWithTailLights&&(this.texWithTailLights.dispose(),this.texWithTailLights=null),this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),this.tyreMaterial&&(this.tyreMaterial.dispose(),this.tyreMaterial=null)}}let nme=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.mainService=n,this.cdr=r,this._resource$=new $e(null),this.changed=new He,this.previewPaths$=new $e(null),this.destroyed$=new Re,this.customControls=[],this.serializerSettings={geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}ngAfterViewInit(){var e=this;return je(function*(){e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var n=je(function*(r){e.previewPaths$.next(yield e.loadPreviewFilePaths(r?.id))});return function(r){return n.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Le(e.destroyed$),hn(([n,r])=>!!e.resource&&n.startsWith(e.resource.id)),na(1500)).subscribe(je(function*(){e.previewPaths$.next(null),e.previewPaths$.next(yield e.postTmpUpdates(e.resource?.id))}))})()}onObjectLoaded(e){var n=this;return je(function*(){if((n._resource$.value?.id||"").includes(".CFM__"))try{const r=n.resource?.id.split("/");r.pop(),r[r.length-1]=""+(+r[r.length-1]+1);const s=yield n.eelDelegate.retrieveValue(r.join("/")+"/data"),o=s.children_aliases.findIndex(l=>"!PAL"===l);if(-1==o)throw new Error("Not a car");const a=new tme(e,s.children[o].data.colors[254]>>>8,n.previewPaths$.value[0].substring(0,n.previewPaths$.value[0].lastIndexOf("/"))+"/assets");n.customControls=[{title:"TNFS car features",controls:[{label:"Brake lights on",type:"checkbox",value:!1,change:l=>{a.tailLightsOn=l}},{label:"Car speed",type:"radio",options:["idle","slow","fast"],value:"idle",change:l=>{a.speed=l}},{label:"Steering angle",type:"slider",minValue:-.7,maxValue:.7,valueStep:.05,value:0,change:l=>{a.steeringAngle=l}}]}],n.cdr.markForCheck()}catch{}})()}postTmpUpdates(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}loadPreviewFilePaths(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResource(e,n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(ho),E(Yn))},i.\u0275cmp=st({type:i,selectors:[["app-orip-geometry-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:7,consts:[[3,"paths","customControls","onObjectLoaded"],[3,"resource"]],template:function(e,n){1&e&&($(0,"app-obj-viewer",0),De("onObjectLoaded",function(s){return n.onObjectLoaded(s)}),Xe(1,"async"),W(),Ee(2,"app-compound-block-ui",1),Xe(3,"async")),2&e&&(U("paths",Je(1,3,n.previewPaths$))("customControls",n.customControls),V(2),U("resource",Je(3,5,n._resource$)))},dependencies:[wl,gG,co],changeDetection:0}),i})();const yG=i=>{let t=i.block_class_mro.split("__")[0];return"ArrayBlock"===t?yG(i.child_schema)+"[]":t},ime=["class","block-ui"];function rme(i,t){if(1&i&&($(0,"mat-label",7),Oe(1),W()),2&i){const e=ae(2);U("matTooltip",e.resourceDescription),V(1),Vi("",null==e.resource?null:e.resource.name," ")}}function sme(i,t){if(1&i&&($(0,"mat-option",8),Oe(1),W()),2&i){const e=t.$implicit,n=t.index,r=ae(2);U("value",n)("disabled",r.disabled),V(1),Vi(" ",r.blockClassStr(e)," ")}}function ome(i,t){if(1&i){const e=$n();Gr(0),fe(1,rme,2,2,"mat-label",1),Xe(2,"async"),$(3,"div",2)(4,"mat-label"),Oe(5,"Resource type:"),W(),$(6,"mat-select",3),De("selectionChange",function(r){return Nt(e),St(ae().setChoiceIndex(r.value))}),fe(7,sme,2,3,"mat-option",4),W(),Ee(8,"app-block-actions",5),W(),Ee(9,"app-editor",6),Wr()}if(2&i){const e=ae();let n;V(1),U("ngIf",(null==e.resource?null:e.resource.name)&&(null==e.resource?null:e.resource.name)!=(null==(n=Je(2,8,e.main.resource$))?null:n.name)),V(5),U("value",e.resourceData.choice_index)("disabled",e.disabled),V(1),U("ngForOf",e.resource.schema.possible_resource_schemas),V(1),U("resource",e.childResource),V(1),U("resource",e.childResource)("hideBlockActions",!0)("disabled",e.disabled)}}let bG=(()=>{class i{constructor(e){this.main=e,this._resource=null,this.resourceDescription="",this.hideBlockActions=!1,this.disabled=!1,this.childResource=null,this.choiceDataCaches=[],this.changed=new He,this.blockClassStr=yG}get resource(){return this._resource}set resource(e){const n=!this._resource||!e||this._resource.id!==e.id;this._resource=e,n&&(this.choiceDataCaches=new Array(this._resource?.schema.possible_resource_schemas||0).fill(null),this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this._resource.data.data)),this.updateChild()}get resourceData(){return this._resource?.data||null}setChoiceIndex(e){this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this.childResource.data,this._resource.data.choice_index=e,this._resource.data.data=this.choiceDataCaches[e],this.updateChild(),this.changed.emit())}updateChild(){this.childResource=this._resource?{...this._resource,id:Po(this._resource.id,"data"),data:this.choiceDataCaches[this._resource.data.choice_index],name:"",schema:this._resource.schema.possible_resource_schemas[this._resource.data.choice_index]}:null}}return i.\u0275fac=function(e){return new(e||i)(E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-delegate",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled"},outputs:{changed:"changed"},attrs:ime,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["id","resource-type-container"],[3,"value","disabled","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"resource"],[3,"resource","hideBlockActions","disabled"],["matTooltipPosition","above",3,"matTooltip"],[3,"value","disabled"]],template:function(e,n){1&e&&fe(0,ome,10,10,"ng-container",0),2&e&&U("ngIf",n.resourceData)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;row-gap:1rem}#resource-type-container[_ngcontent-%COMP%]{display:flex;column-gap:.5rem;align-items:center}#resource-type-container[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{flex-shrink:0}"],changeDetection:0}),i})();const ame=["class","block-ui"];function lme(i,t){if(1&i&&($(0,"mat-label",7),Oe(1),W()),2&i){const e=ae(2);U("matTooltip",e.resourceDescription),V(1),Vi(" ",e.resource.name," ")}}function cme(i,t){if(1&i){const e=$n();Gr(0),fe(1,lme,2,2,"mat-label",1),$(2,"mat-selection-list",2),De("selectionChange",function(r){return Nt(e),St(ae().onSelection(r))}),$(3,"mat-list-option",3),Oe(4," Left "),W(),$(5,"mat-list-option",4),Oe(6," Right "),W()(),$(7,"mat-form-field",5)(8,"mat-label"),Oe(9,"Texture ID"),W(),$(10,"input",6),De("ngModelChange",function(r){return Nt(e),St(ae().resource.data.texture_id=r)})("change",function(){return Nt(e),St(ae().changed.emit())}),W()(),Wr()}if(2&i){const e=ae();V(1),U("ngIf",e.resource.name),V(2),U("selected",e.resource.data.has_left_fence),V(2),U("selected",e.resource.data.has_right_fence),V(5),U("max",63)("min",0)("step",1)("ngModel",e.resource.data.texture_id)}}let dme=(()=>{class i{constructor(){this.resource=null,this.resourceDescription="",this.changed=new He}onSelection(e){for(const n of e.options)this.resource.data[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-fence-type",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},attrs:ame,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"selectionChange"],["value","has_left_fence",3,"selected"],["value","has_right_fence",3,"selected"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","ngModel","ngModelChange","change"],["matTooltipPosition","above",3,"matTooltip"]],template:function(e,n){1&e&&fe(0,cme,11,7,"ng-container",0),2&e&&U("ngIf",n.resource)},dependencies:[hi,Na,Qc,Cl,ed,Jc,ac,Ba,po,Sl,Bs,SC,CC],changeDetection:0}),i})(),ume=(()=>{class i{constructor(){this._resource=null,this.resourceMap={},this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!n)return;let r=this.resourceData.items_descr.map((s,o)=>[s,o]).filter(([s,o])=>s>0).map(([s,o])=>o);for(let s=0;s<this.resourceData.children.length;s++)this.resourceMap["0x"+r[s].toString(16)]={id:Po(this._resource?.id||"",`children/${s}`),data:this.resourceData.children[s],schema:n,name:""}}get resourceData(){return this._resource?.data}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-soundbank-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(e,n){1&e&&Ee(0,"app-sidenav-res-list",0),2&e&&U("resources",n.resourceMap)},dependencies:[MC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0}),i})();const hme=["class","dialog"];function fme(i,t){if(1&i&&($(0,"mat-form-field",7)(1,"mat-label"),Oe(2),W(),Ee(3,"input",8),W()),2&i){const e=t.$implicit;V(2),ui(e.title),V(1),U("id",e.id)("type",e.type)("formControlName",e.id)}}let pme=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this.fb=n,this.data=r;const s={};for(const o of r.args)s[o.id]=["",Ml.required];this.argsForm=this.fb.group(s)}submit(){const e=this.argsForm.value;for(const n of this.data.args)"number"==n.type&&(e[n.id]=+e[n.id]);this.dialogRef.close(e)}}return i.\u0275fac=function(e){return new(e||i)(E(rb),E(Ste),E(lR))},i.\u0275cmp=st({type:i,selectors:[["app-run-custom-action",8,"dialog"]],attrs:hme,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(e,n){1&e&&($(0,"h1",0),Oe(1),W(),$(2,"div",1)(3,"p"),Oe(4),W()(),$(5,"form",2),fe(6,fme,4,4,"mat-form-field",3),W(),$(7,"div",4)(8,"button",5),De("click",function(){return n.dialogRef.close()}),Oe(9,"Cancel"),W(),$(10,"button",6),De("click",function(){return n.submit()}),Oe(11,"Run"),W()()),2&e&&(V(1),Vi('Run action "',n.data.title,'"'),V(3),ui(n.data.description),V(1),U("formGroup",n.argsForm),V(1),U("ngForOf",n.data.args),V(4),U("disabled",n.argsForm.invalid))},dependencies:[Os,PR,Na,Cl,MR,Ba,po,Sl,Vh,_V,vV,yV,Gh,mC],styles:["form[_ngcontent-%COMP%]{padding:0 24px}"]}),i})();function xG(i,t){return t?e=>Ey(t.pipe(Oi(1),function mme(){return ni((i,t)=>{i.subscribe(Xn(t,vs))})}()),e.pipe(xG(i))):ir((e,n)=>Mr(i(e,n)).pipe(Oi(1),ZB(e)))}function wG(i,t=Wy){const e=LI(i,t);return xG(()=>e)}const gme=["mat-menu-item",""];function _me(i,t){1&i&&(ki(),$(0,"svg",3),Ee(1,"polygon",4),W())}const vme=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],yme=["mat-icon, [matMenuItemIcon]","*"];function bme(i,t){if(1&i){const e=$n();$(0,"div",0),De("keydown",function(r){return Nt(e),St(ae()._handleKeydown(r))})("click",function(){return Nt(e),St(ae().closed.emit("click"))})("@transformMenu.start",function(r){return Nt(e),St(ae()._onAnimationStart(r))})("@transformMenu.done",function(r){return Nt(e),St(ae()._onAnimationDone(r))}),$(1,"div",1),Yt(2),W()()}if(2&i){const e=ae();U("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),It("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const xme=["*"],SO=new me("MAT_MENU_PANEL"),wme=XM(qM(class{}));let iE=(()=>{class i extends wme{constructor(e,n,r,s,o){super(),this._elementRef=e,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new Re,this._focused=new Re,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),n=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(qt),E(Kc),E(SO,8),E(Yn))},i.\u0275cmp=st({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,n){1&e&&De("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&e&&(It("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),ln("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ut],attrs:gme,ngContentSelectors:yme,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){1&e&&(or(vme),Yt(0),$(1,"span",0),Yt(2,1),W(),Ee(3,"div",1),fe(4,_me,2,0,"svg",2)),2&e&&(V(3),U("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),V(1),U("ngIf",n._triggersSubmenu))},dependencies:[hi,Uh],encapsulation:2,changeDetection:0}),i})();const Mme=new me("MatMenuContent"),rE={transformMenu:La("transformMenu",[Ns("void",oi({opacity:0,transform:"scale(0.8)"})),Or("void => enter",qr("120ms cubic-bezier(0, 0, 0.2, 1)",oi({opacity:1,transform:"scale(1)"}))),Or("* => void",qr("100ms 25ms linear",oi({opacity:0})))]),fadeInItems:La("fadeInItems",[Ns("showing",oi({opacity:1})),Or("void => *",[oi({opacity:0}),qr("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Cme=0;const MG=new me("mat-menu-default-options",{providedIn:"root",factory:function Sme(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let n0=(()=>{class i{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=tn(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=tn(e)}set panelClass(e){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,n,r,s){this._elementRef=e,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new lm,this._classList={},this._panelAnimationState="void",this._animationDone=new Re,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new He,this.close=this.closed,this.panelId="mat-menu-panel-"+Cme++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new FU(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Ro(this._directDescendantItems),Fs(e=>Cr(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=e.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(Ro(this._directDescendantItems),Fs(n=>Cr(...n.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,r=this._keyManager;switch(n){case 27:ta(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Oi(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const n=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===e,r["mat-menu-after"]="after"===e,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Ro(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt),E(MG),E(Yn))},i.\u0275dir=ve({type:i,contentQueries:function(e,n,r){if(1&e&&(Yi(r,Mme,5),Yi(r,iE,5),Yi(r,iE,4)),2&e){let s;Et(s=At())&&(n.lazyContent=s.first),Et(s=At())&&(n._allItems=s),Et(s=At())&&(n.items=s)}},viewQuery:function(e,n){if(1&e&&Nn(To,5),2&e){let r;Et(r=At())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),Eme=(()=>{class i extends n0{constructor(e,n,r,s){super(e,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return i.\u0275fac=function(e){return new(e||i)(E(vt),E(gt),E(MG),E(Yn))},i.\u0275cmp=st({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,n){2&e&&It("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[An([{provide:SO,useExisting:i}]),ut],ngContentSelectors:xme,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,n){1&e&&(or(),fe(0,bme,3,6,"ng-template"))},dependencies:[pm],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[rE.transformMenu,rE.fadeInItems]},changeDetection:0}),i})();const CG=new me("mat-menu-scroll-strategy"),Dme={provide:CG,deps:[cs],useFactory:function Ame(i){return()=>i.scrollStrategies.reposition()}},SG=Oh({passive:!0});let Tme=(()=>{class i{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,n,r,s,o,a,l,c,d){this._overlay=e,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Qt.EMPTY,this._hoverSubscription=Qt.EMPTY,this._menuCloseSubscription=Qt.EMPTY,this._changeDetectorRef=Lt(Yn),this._handleTouchStart=h=>{KI(h)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new He,this.onMenuOpen=this.menuOpened,this.menuClosed=new He,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof n0?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,SG)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,SG),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const n=this._createOverlay(e),r=n.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,n.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof n0&&(e._startAnimation(),e._directDescendantItems.changes.pipe(Le(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof n0?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(hn(r=>"void"===r.toState),Oi(1),Le(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let n=0,r=e.parentMenu;for(;r;)n++,r=r.parentMenu;e.setElevation(n)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const n=this._getOverlayConfig(e);this._subscribeToPositions(e,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Om({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,n){e.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,o)):e.setPositionClasses(s,o)})}_setPosition(e,n){let[r,s]="before"===e.xPosition?["end","start"]:["start","end"],[o,a]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[d,h]=[r,s],p=0;if(this.triggersSubmenu()){if(h=r="before"===e.xPosition?"start":"end",s=d="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:p},{originX:s,originY:l,overlayX:h,overlayY:o,offsetY:p},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-p},{originX:s,originY:c,overlayX:h,overlayY:a,offsetY:-p}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return Cr(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:mt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(hn(o=>o!==this._menuItemInstance),hn(()=>this._menuOpen)):mt(),n)}_handleMousedown(e){XI(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(hn(e=>e===this._menuItemInstance&&!e.disabled),wG(0,FI)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof n0&&this.menu._isAnimating?this.menu._animationDone.pipe(Oi(1),wG(0,FI),Le(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Dm(e.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(e){return new(e||i)(E(cs),E(vt),E(Yr),E(CG),E(SO,8),E(iE,10),E(Fa,8),E(Kc),E(gt))},i.\u0275dir=ve({type:i,hostVars:3,hostBindings:function(e,n){1&e&&De("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&e&&It("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),Ime=(()=>{class i extends Tme{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=si(i)))(n||i)}}(),i.\u0275dir=ve({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[ut]}),i})(),Rme=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[Dme],imports:[uo,nb,Jn,Fm,Zy,Jn]}),i})();function kme(i,t){if(1&i){const e=$n();$(0,"button",7),De("click",function(){return Nt(e),St(ae(2).deserialize())}),Ee(1,"mat-icon",8),W()}}function Pme(i,t){if(1&i){const e=$n();Gr(0),fe(1,kme,2,0,"button",4),$(2,"button",5),De("click",function(){return Nt(e),St(ae().serializeBlockReversible())}),Ee(3,"mat-icon",6),W(),Wr()}if(2&i){const e=ae();V(1),U("ngIf",e.isInReversibleSerializationState),V(1),U("disabled",e.isInReversibleSerializationState)}}function Ome(i,t){1&i&&($(0,"button",9),Ee(1,"mat-icon",10),W()),2&i&&(ae(),U("matMenuTriggerFor",sr(3)))}function Fme(i,t){if(1&i){const e=$n();$(0,"button",11),De("click",function(){const s=Nt(e).$implicit;return St(ae().runCustomAction(s))}),$(1,"span"),Oe(2),W()()}if(2&i){const e=t.$implicit;V(2),ui(e.title)}}const Lme=function(){return[]};let sE=(()=>{class i{constructor(e,n,r,s,o){this.mainService=e,this.eelDelegate=n,this.cdr=r,this.dialog=s,this.snackBar=o,this.resource=null,this.isInReversibleSerializationState=!1}serializeBlockReversible(){var e=this;return je(function*(){if(!e.resource)return;const[n,r]=yield e.eelDelegate.serializeReversible(e.resource.id,[]),s=n.reduce((o,a)=>{let l=0;for(;l<o.length&&l<a.length&&o[l]===a[l];)l++;return o.substring(0,l)});yield e.eelDelegate.openFileWithSystemApp(s),e.isInReversibleSerializationState=r,e.cdr.markForCheck()})()}deserialize(){var e=this;return je(function*(){e.resource&&(yield e.mainService.deserializeResource(e.resource.id),e.isInReversibleSerializationState=!1,e.cdr.markForCheck())})()}runCustomAction(e){var n=this;return je(function*(){if(n.mainService.hasUnsavedChanges){let o=n.dialog.open(DV,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield dR(o.afterClosed())))return;try{yield n.mainService.saveResource(),n.snackBar.open("File Saved!","OK",{duration:1500})}catch(a){n.snackBar.open("Error while saving file! "+a.errorText,"OK :(",{duration:5e3})}}let r=n.dialog.open(pme,{data:e});const s=yield dR(r.afterClosed());if(s)try{yield n.mainService.runCustomAction(n.resource.id,e,s),n.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){n.mainService.clearUnsavedChanges(),n.mainService.reloadResource().then(()=>n.cdr.markForCheck()),n.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}}return i.\u0275fac=function(e){return new(e||i)(E(ho),E(xl),E(Yn),E(Vm),E(FV))},i.\u0275cmp=st({type:i,selectors:[["app-block-actions"]],inputs:{resource:"resource"},decls:5,vars:4,consts:[[4,"ngIf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(e,n){1&e&&(fe(0,Pme,4,2,"ng-container",0),fe(1,Ome,2,1,"button",1),$(2,"mat-menu",null,2),fe(4,Fme,3,1,"button",3),W()),2&e&&(U("ngIf",null==n.resource||null==n.resource.schema?null:n.resource.schema.serializable_to_disc),V(1),U("ngIf",(null==n.resource||null==n.resource.schema.custom_actions?null:n.resource.schema.custom_actions.length)>0),V(3),U("ngForOf",(null==n.resource?null:n.resource.schema.custom_actions)||jr(3,Lme)))},dependencies:[Os,hi,Bs,ZM,yR,Eme,iE,Ime],styles:["[_nghost-%COMP%]{display:flex}"]}),i})();const Nme=["class","block-ui"];function Bme(i,t){if(1&i&&($(0,"mat-label",7),Oe(1),W()),2&i){const e=ae();U("matTooltip",e.resourceDescription),V(1),Vi("",null==e.resource?null:e.resource.name," ")}}function Ume(i,t){if(1&i&&($(0,"audio",8),Ee(1,"source",9),Xe(2,"async"),Oe(3," Your browser does not support the audio element. "),W()),2&i){const e=ae();V(1),U("src",Je(2,1,e.audioUrl$),Up)}}function Vme(i,t){1&i&&Ee(0,"mat-spinner",10)}function zme(i,t){1&i&&Ee(0,"app-block-actions",11),2&i&&U("resource",ae().resource)}const Hme=function(){return["wave_data"]};let $me=(()=>{class i{constructor(e,n){this.eelDelegate=e,this.main=n,this._resource$=new $e(null),this.audioUrl$=new $e(null),this.resourceDescription="",this.hideBlockActions=!1,this.destroyed$=new Re,this.changed=new He}set resource(e){this._resource$.next(e)}get resource(){return this._resource$.getValue()}ngAfterViewInit(){var e=this;return je(function*(){e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var n=je(function*(r){if(e.audioUrl$.next(null),r){const s=yield e.eelDelegate.serializeResource(r.id);e.audioUrl$.next(s.find(o=>o.endsWith(".wav"))||null)}});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-eacs-audio",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions"},outputs:{changed:"changed"},attrs:Nme,decls:11,vars:16,consts:[["id","header"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["controls","",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"flex-spacer"],[3,"resource",4,"ngIf"],[3,"resource","hideBlockActions","fieldBlacklist"],["matTooltipPosition","above",3,"matTooltip"],["controls",""],[3,"src"],["mode","indeterminate"],[3,"resource"]],template:function(e,n){if(1&e&&($(0,"div",0),fe(1,Bme,2,2,"mat-label",1),Xe(2,"async"),fe(3,Ume,4,3,"audio",2),Xe(4,"async"),fe(5,Vme,1,0,"mat-spinner",3),Xe(6,"async"),Ee(7,"div",4),fe(8,zme,1,1,"app-block-actions",5),W(),Ee(9,"app-compound-block-ui",6),Xe(10,"async")),2&e){let r;V(1),U("ngIf",(null==n.resource?null:n.resource.name)&&(null==n.resource?null:n.resource.name)!=(null==(r=Je(2,7,n.main.resource$))?null:r.name)),V(2),U("ngIf",Je(4,9,n.audioUrl$)),V(2),U("ngIf",n.resource&&!Je(6,11,n.audioUrl$)),V(3),U("ngIf",!n.hideBlockActions),V(1),U("resource",Je(10,13,n._resource$))("hideBlockActions",!0)("fieldBlacklist",jr(15,Hme))}},dependencies:[hi,po,Bs,Yg,wl,sE,co],styles:["#header[_ngcontent-%COMP%]{display:flex}"]}),i})();class Gme{constructor(t,e){this.mesh=t,this.assetsPath=e,this.textures=[],this.tyreTextureUpdateTimer=void 0,this.tyreMaterial=null,this.tyreTextures=[],this._color=65280,this._speed="idle",this._steeringAngle=0,this.wheels=[],this.wheelIdlePositions=[],this.frontWheels=[];let n=new Set;if(t.traverse(r=>{if(!(r instanceof Tn))return;let s=-1;if(r.name.startsWith("part_hp_12")?s=0:r.name.startsWith("part_hp_14")?s=1:r.name.startsWith("part_hp_16")?s=2:r.name.startsWith("part_hp_18")&&(s=3),s>-1){r.geometry.boundingBox||r.geometry.computeBoundingBox();let a=Te.avg(r.geometry.boundingBox.min,r.geometry.boundingBox.max);return(0==s||2==s)&&(a={x:a.x,y:a.y,z:a.z+1.5}),r.geometry.translate(...Te.spr(Te.neg(a))),r.position.set(...Te.spr(a)),this.wheelIdlePositions[s]=a,this.wheels.push(r),void(s<2&&this.frontWheels.push(r))}const o=r.material.map;o&&n.add(o)}),this.textures=Array.from(n).map(r=>{const s=new Bo(document.createElement("img"));return s.flipY=r.flipY,ca(s),[r,s]}),t.traverse(r=>{if(!(r instanceof Tn))return;const s=r.material.map;if(s){const o=this.textures.find(([a,l])=>a===s);o&&(r.material.map=o[1])}}),this.hasWheels){const r=new pc;this.tyreTextures=[0,1,2,3].map(s=>r.load(`${e}/m${s}00.png`));for(const s of this.tyreTextures)ca(s);this.tyreMaterial=new er({map:this.tyreTextures[0]}),this.tyreMaterial.transparent=!0,this.tyreMaterial.alphaTest=.5,this.tyreMaterial.map.wrapS=Qi,this.tyreMaterial.map.wrapT=Qi,this.tyreMaterial.polygonOffset=!0,this.tyreMaterial.polygonOffsetFactor=-4;for(const s of this.wheels)s.material=this.tyreMaterial}this.color=65280,this.recolorCar().then()}get color(){return this._color}set color(t){t!==this._color&&(this._color=t,this.recolorCar().then())}get speed(){return this._speed}set speed(t){if(t!==this._speed){switch(this._speed=t,this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),t){case"idle":this.tyreMaterial.map=this.tyreTextures[0];break;case"slow":let e=!0;this.tyreTextureUpdateTimer=setInterval(()=>{this.tyreMaterial.map=this.tyreTextures[e?1:2],this.tyreMaterial.needsUpdate=!0,e=!e},16);break;case"fast":this.tyreMaterial.map=this.tyreTextures[3]}this.tyreMaterial.needsUpdate=!0}}get steeringAngle(){return this._steeringAngle}set steeringAngle(t){if(t!==this._steeringAngle){this._steeringAngle=t;for(const e of this.frontWheels)e.rotation.set(0,0,t)}}get hasWheels(){return this.wheels.length>0}recolorCar(){var t=this;return je(function*(){const[e,n,r]=[t.color>>16,t.color>>8&255,255&t.color];for(const[s,o]of t.textures){for(let a=100;a>0&&!s.source.data;a--)yield _G(50);vG(s.source.data,(a,l)=>{if(a[l]+a[l+2]<a[l+1]){const c=a[l+1];a[l]=Math.min(255,Math.round(e*c/255)+a[l]),a[l+1]=Math.round(n*c/255),a[l+2]=Math.min(Math.round(r*c/255)+a[l+2])}},o.source.data),o.needsUpdate=!0}})()}dispose(){}}const Wme=["class","block-ui"];function jme(i,t){1&i&&(Ee(0,"app-compound-block-ui",2),Xe(1,"async")),2&i&&U("resource",Je(1,1,ae()._resource$))}let Yme=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.main=n,this.cdr=r,this._resource$=new $e(null),this.changed=new He,this.customControls=[],this.previewPaths$=new $e(null),this.destroyed$=new Re,this.serializerSettings={geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}ngAfterViewInit(){var e=this;return je(function*(){e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var n=je(function*(r){e.previewPaths$.next(yield e.loadPreviewFilePaths(r?.id))});return function(r){return n.apply(this,arguments)}}()),e.main.dataBlockChange$.pipe(Le(e.destroyed$),hn(([n,r])=>!!e.resource&&n.startsWith(e.resource.id)),na(1500)).subscribe(je(function*(){e.previewPaths$.next(null),e.previewPaths$.next(yield e.postTmpUpdates(e.resource?.id))}))})()}onObjectLoaded(e){var n=this;return je(function*(){try{const r=new Gme(e,n.previewPaths$.value[0].substring(0,n.previewPaths$.value[0].lastIndexOf("/"))+"/assets");let s=null;const o=a=>{s&&clearTimeout(s),s=setTimeout(()=>r.color=a,50)};n.customControls=[{title:"NFS2 car features",controls:[{label:"Car color",type:"color",value:65280,change:a=>o(a)}]}],r.hasWheels&&n.customControls[0].controls.push({label:"Car speed",type:"radio",options:["idle","slow","fast"],value:"idle",change:a=>{r.speed=a}},{label:"Steering angle",type:"slider",minValue:-.7,maxValue:.7,valueStep:.05,value:0,change:a=>{r.steeringAngle=a}}),n.cdr.markForCheck()}catch(r){console.error(r)}})()}postTmpUpdates(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.main.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}loadPreviewFilePaths(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResource(e,n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}previewObjectGroupFunc(e){return e.startsWith("part_hp")?"High-poly":e.startsWith("part_mp")?"Medium-poly":e.startsWith("part_lp")?"Low-poly":e.startsWith("part_res")?"Reserved":e}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(ho),E(Yn))},i.\u0275cmp=st({type:i,selectors:[["app-geo-geometry",8,"block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},attrs:Wme,decls:4,vars:8,consts:[[3,"paths","groupFunction","customControls","onObjectLoaded"],[3,"resource",4,"ngIf"],[3,"resource"]],template:function(e,n){1&e&&($(0,"app-obj-viewer",0),De("onObjectLoaded",function(s){return n.onObjectLoaded(s)}),Xe(1,"async"),W(),fe(2,jme,2,3,"app-compound-block-ui",1),Xe(3,"async")),2&e&&(U("paths",Je(1,4,n.previewPaths$))("groupFunction",n.previewObjectGroupFunc)("customControls",n.customControls),V(2),U("ngIf",!Je(3,6,n.main.hideHiddenFields$)))},dependencies:[hi,wl,gG,co],changeDetection:0}),i})();const qme=function(){return["children","items_descr"]};let Xme=(()=>{class i{constructor(){this._resource=null,this.hideBlockActions=!1,this.resourceMap={},this.changed=new He}get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!n)return;let r=0;for(const[s,o]of this.resourceData.children_aliases.entries()){let a=o||"__"+r++;this.resourceMap[a]={id:Po(this._resource?.id||"",`children/${s}`),data:this.resourceData?.children[s],schema:n,name:""}}}get resourceData(){return this._resource?.data}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-base-archive-block-ui"]],inputs:{resource:"resource",hideBlockActions:"hideBlockActions"},outputs:{changed:"changed"},decls:2,vars:5,consts:[[3,"resource","hideBlockActions","fieldBlacklist"],[3,"resources"]],template:function(e,n){1&e&&Ee(0,"app-compound-block-ui",0)(1,"app-sidenav-res-list",1),2&e&&(U("resource",n.resource)("hideBlockActions",n.hideBlockActions)("fieldBlacklist",jr(4,qme)),V(1),U("resources",n.resourceMap))},dependencies:[wl,MC],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 16px}"],changeDetection:0}),i})();const Kme=["previewCanvasContainer"],Zme=["previewCanvas"];function Qme(i,t){1&i&&Ee(0,"mat-spinner",16),2&i&&U("diameter",40)}function Jme(i,t){1&i&&Ee(0,"mat-spinner",17)}const ege=function(){return[]};class tge extends lk{constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.qfsPath=e,this.hideUnknownEntities$=n,this.textureLoader=new pc,this.terrainMaterials={},this.objLoader=new t0,this.resource=null,this.isOpenedTrack=!1,this._placeholder=null,this._placeholderPromise=null,this.unknownEntities=new Set,this._placeholderTerrain=null,this._placeholderTerrainPromise=null}onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe(bl(),Le(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return je(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}getPlaceholderTerrainTexture(){var t=this;return je(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=Kr,e.wrapT=Kr,ca(e),e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return je(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(s=>{s instanceof Tn&&(s.material=e.getTerrainMaterial((s.userData.name||s.name).substr((s.userData.name||s.name).lastIndexOf("_")+1).split(".")[0]))});const r=new Fo({object3D:new Ha(n)});return e.addChildren(r),e.loaded.set(t,[r]),[[r],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new er({side:us,transparent:!0,visible:!1}),this.qfsPath?this.textureLoader.loadAsync(`${this.qfsPath}/${t}.png`).then(e=>{e.wrapS=Kr,e.wrapT=Kr,ca(e),this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}}let nge=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r,this._resource$=new $e(null),this.changed=new He,this.previewLoading$=new $e(!0),this.previewQfsLocation$=new $e(null),this.previewQfsLoading$=new $e(!1),this.pointer$=new $e(null),this.selectedSplineIndex$=new $e(0),this.qfsPath=null,this.name="",this.renderer=null,this.map=null,this.roadPath=null,this.destroyed$=new Re}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}ngAfterViewInit(){var e=this;return je(function*(){var s;e.world=new AC(new tE,{init:(s=je(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{},loader:{loadFromGgGlb:function(){var s=je(function*(...o){return[]});return function(){return s.apply(this,arguments)}}()}}),yield e.world.init(),e.skySphere=new Fo({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})}),e.skySphere.object3D.nativeMesh.material.side=us,e.world.addEntity(e.skySphere),e.selectionSphere=new Fo({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})}),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new Jb(16777215,2));let n=new $e({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=$i.lookAt(e.renderer.camera.position,Te.add(e.renderer.camera.position,Te.Y),Te.Z),Zh(e.world).pipe(Le(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new ck(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",cameraLinearSpeed:40,cameraBoostMultiplier:4,cameraMovementElasticity:100,cameraRotationElasticity:30,ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var s=je(function*(o){e.roadPath=e.resource?.data.block_positions.map(a=>({x:a.x,y:a.z,z:a.y})),e.previewLoading$.next(!0),o?(e.previewQfsLocation$.next(o.id.substring(0,o.id.indexOf(".TRK"))+"0.QFS"),yield e.loadTerrainChunks(o.id),yield e.onQfsSelected(e.previewQfsLocation$.value)):(yield e.loadTerrainChunks(),yield e.loadPreview()),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Le(e.destroyed$),hn(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),na(3e3)).subscribe(je(function*(){e.roadPath=e.resource?.data.block_positions.map(s=>({x:s.x,y:s.z,z:s.y})),e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(Le(e.destroyed$),na(250)).subscribe(s=>{if(e.resource){let o=e.resource.data.block_positions[s];if(!o)return;o={x:o.x,y:o.z,z:o.y},e.selectionSphere.position=o,e.renderer&&(e.renderer.position=Te.add(o,Te.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-0)),e.renderer.rotation=$i.lookAt(e.renderer.position,o,{x:0,y:0,z:1}),e.controller.reset())}})})()}onQfsSelected(e){var n=this;return je(function*(){if(n.qfsPath!=e){n.previewQfsLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e),s=new pc,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=Al,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=null}finally{n.previewQfsLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return je(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}onPointerChange(e){this.renderer&&(this.renderer.position=e)}loadPreview(){var e=this;return je(function*(){if(!e.terrainChunksObjLocation||!e.roadPath)return;const n=Qh.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!0);e.unloadPreview(),e.map=new tge(n,e.qfsPath&&"resources/"+e.qfsPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=!1,Zh(e.world).pipe(Le(e.destroyed$)).subscribe(()=>{e.map&&e.renderer&&e.map.loaderCursor$.next(e.renderer.position)}),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(Yn),E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-trk-map-block-ui"]],viewQuery:function(e,n){if(1&e&&(Nn(Kme,5),Nn(Zme,5)),2&e){let r;Et(r=At())&&(n.previewCanvasContainer=r.first),Et(r=At())&&(n.previewCanvas=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:32,vars:26,consts:[[1,"qfsSelector"],["appearance","fill"],["matInput","","type","text",3,"value"],["customQfsInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed","projection","pointerChange"],[3,"resource"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(e,n){if(1&e){const r=$n();$(0,"div",0)(1,"h4"),Oe(2,"Preview QFS file"),W(),$(3,"mat-form-field",1)(4,"mat-label"),Oe(5,"Custom QFS path"),W(),Ee(6,"input",2,3),Xe(8,"async"),W(),$(9,"button",4),De("click",function(){Nt(r);const o=sr(7);return St(n.onQfsSelected(o.value))}),Oe(10,"LOAD"),W(),fe(11,Qme,1,1,"mat-spinner",5),Xe(12,"async"),W(),$(13,"div",6)(14,"div",7,8),Ee(16,"canvas",9,10),fe(18,Jme,1,0,"mat-spinner",11),Xe(19,"async"),W(),$(20,"div",12,8)(22,"mat-form-field",1)(23,"mat-label"),Oe(24,"Spline item"),W(),$(25,"input",13),De("ngModelChange",function(o){return n.selectedSplineIndex$.next(o)}),Xe(26,"async"),Xe(27,"async"),W()(),$(28,"app-minimap",14),De("pointerChange",function(o){return n.onPointerChange(o)}),Xe(29,"async"),W()()(),Ee(30,"app-compound-block-ui",15),Xe(31,"async")}if(2&e){let r;V(6),U("value",Je(8,11,n.previewQfsLocation$)),V(5),U("ngIf",Je(12,13,n.previewQfsLoading$)),V(7),U("ngIf",Je(19,15,n.previewLoading$)),V(7),U("min",0)("max",4*(null==(r=Je(26,17,n._resource$))?null:r.data.num_blocks)-1)("ngModel",Je(27,19,n.selectedSplineIndex$)),V(3),U("roadSpline",n.roadPath||jr(25,ege))("pointer",Je(29,21,n.pointer$))("splineClosed",!0)("projection","nz"),V(2),U("resource",Je(31,23,n._resource$))}},dependencies:[hi,Na,Qc,Cl,ed,Jc,ac,Ba,po,Sl,Vh,Yg,wl,CO,co],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.qfsSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.qfsSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.qfsSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.qfsSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .qfsSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),i})(),ige=(()=>{class i{constructor(){this.resource=null,this.name="",this.resourceDescription="",this.changed=new He}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=st({type:i,selectors:[["app-skip-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),i})();const rge=["previewCanvasContainer"],sge=["previewCanvas"];function oge(i,t){1&i&&Ee(0,"mat-spinner",16),2&i&&U("diameter",40)}function age(i,t){1&i&&Ee(0,"mat-spinner",17)}const lge=function(){return[]};class cge extends lk{constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.qfsPath=e,this.hideUnknownEntities$=n,this.textureLoader=new pc,this.terrainMaterials={},this.objLoader=new t0,this.resource=null,this.isOpenedTrack=!1,this._placeholder=null,this._placeholderPromise=null,this.unknownEntities=new Set,this._placeholderTerrain=null,this._placeholderTerrainPromise=null}onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe(bl(),Le(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return je(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}getPlaceholderTerrainTexture(){var t=this;return je(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=Kr,e.wrapT=Kr,ca(e),e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return je(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(s=>{s instanceof Tn&&(s.material=e.getTerrainMaterial((s.userData.name||s.name).substr((s.userData.name||s.name).lastIndexOf("_")+1).split(".")[0]))});const r=new Fo({object3D:new Ha(n)});return e.addChildren(r),e.loaded.set(t,[r]),[[r],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new er({side:us,transparent:!0,visible:!1}),this.qfsPath?this.textureLoader.loadAsync(`${this.qfsPath}/${t}.png`).then(e=>{e.wrapS=Kr,e.wrapT=Kr,ca(e),this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}}let dge=(()=>{class i{constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r,this._resource$=new $e(null),this.changed=new He,this.previewLoading$=new $e(!0),this.previewQfsLocation$=new $e(null),this.previewQfsLoading$=new $e(!1),this.pointer$=new $e(null),this.selectedSplineIndex$=new $e(0),this.qfsPath=null,this.name="",this.renderer=null,this.map=null,this.roadPath=null,this.destroyed$=new Re}get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}ngAfterViewInit(){var e=this;return je(function*(){var s;e.world=new AC(new tE,{init:(s=je(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{},loader:{loadFromGgGlb:function(){var s=je(function*(...o){return[]});return function(){return s.apply(this,arguments)}}()}}),yield e.world.init(),e.skySphere=new Fo({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})}),e.skySphere.object3D.nativeMesh.material.side=us,e.world.addEntity(e.skySphere),e.selectionSphere=new Fo({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})}),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new Jb(16777215,2));let n=new $e({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=$i.lookAt(e.renderer.camera.position,Te.add(e.renderer.camera.position,Te.Y),Te.Z),Zh(e.world).pipe(Le(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new ck(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",cameraLinearSpeed:40,cameraBoostMultiplier:4,cameraMovementElasticity:100,cameraRotationElasticity:30,ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(Le(e.destroyed$)).subscribe(function(){var s=je(function*(o){e.roadPath=e.resource?.data.blocks.map(a=>({x:a.position.x,y:a.position.z,z:a.position.y})),e.previewLoading$.next(!0),o?(e.previewQfsLocation$.next(o.id.substring(0,o.id.indexOf(".FRD"))+"0.QFS"),yield e.loadTerrainChunks(o.id),yield e.onQfsSelected(e.previewQfsLocation$.value)):(yield e.loadTerrainChunks(),yield e.loadPreview()),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(Le(e.destroyed$),hn(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),na(3e3)).subscribe(je(function*(){e.roadPath=e.resource?.data.data.blocks.map(s=>({x:s.position.x,y:s.position.z,z:s.position.y})),e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(Le(e.destroyed$),na(250)).subscribe(s=>{if(e.resource){let o=e.resource.data.blocks[s].position;if(!o)return;o={x:o.x,y:o.z,z:o.y},e.selectionSphere.position=o,e.renderer&&(e.renderer.position=Te.add(o,Te.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-0)),e.renderer.rotation=$i.lookAt(e.renderer.position,o,{x:0,y:0,z:1}),e.controller.reset())}})})()}onQfsSelected(e){var n=this;return je(function*(){if(n.qfsPath!=e){n.previewQfsLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e),s=new pc,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=Al,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=null}finally{n.previewQfsLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return je(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}onPointerChange(e){this.renderer&&(this.renderer.position=e)}loadPreview(){var e=this;return je(function*(){if(!e.terrainChunksObjLocation||!e.roadPath)return;const n=Qh.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!0);e.unloadPreview(),e.map=new cge(n,e.qfsPath&&"resources/"+e.qfsPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=!1,Zh(e.world).pipe(Le(e.destroyed$)).subscribe(()=>{e.map&&e.renderer&&e.map.loaderCursor$.next(e.renderer.position)}),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return je(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(Yn),E(ho))},i.\u0275cmp=st({type:i,selectors:[["app-frd-map-block-ui"]],viewQuery:function(e,n){if(1&e&&(Nn(rge,5),Nn(sge,5)),2&e){let r;Et(r=At())&&(n.previewCanvasContainer=r.first),Et(r=At())&&(n.previewCanvas=r.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:32,vars:26,consts:[[1,"qfsSelector"],["appearance","fill"],["matInput","","type","text",3,"value"],["customQfsInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed","projection","pointerChange"],[3,"resource"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(e,n){if(1&e){const r=$n();$(0,"div",0)(1,"h4"),Oe(2,"Preview QFS file"),W(),$(3,"mat-form-field",1)(4,"mat-label"),Oe(5,"Custom QFS path"),W(),Ee(6,"input",2,3),Xe(8,"async"),W(),$(9,"button",4),De("click",function(){Nt(r);const o=sr(7);return St(n.onQfsSelected(o.value))}),Oe(10,"LOAD"),W(),fe(11,oge,1,1,"mat-spinner",5),Xe(12,"async"),W(),$(13,"div",6)(14,"div",7,8),Ee(16,"canvas",9,10),fe(18,age,1,0,"mat-spinner",11),Xe(19,"async"),W(),$(20,"div",12,8)(22,"mat-form-field",1)(23,"mat-label"),Oe(24,"Spline item"),W(),$(25,"input",13),De("ngModelChange",function(o){return n.selectedSplineIndex$.next(o)}),Xe(26,"async"),Xe(27,"async"),W()(),$(28,"app-minimap",14),De("pointerChange",function(o){return n.onPointerChange(o)}),Xe(29,"async"),W()()(),Ee(30,"app-compound-block-ui",15),Xe(31,"async")}if(2&e){let r;V(6),U("value",Je(8,11,n.previewQfsLocation$)),V(5),U("ngIf",Je(12,13,n.previewQfsLoading$)),V(7),U("ngIf",Je(19,15,n.previewLoading$)),V(7),U("min",0)("max",4*(null==(r=Je(26,17,n._resource$))?null:r.data.num_blocks)-1)("ngModel",Je(27,19,n.selectedSplineIndex$)),V(3),U("roadSpline",n.roadPath||jr(25,lge))("pointer",Je(29,21,n.pointer$))("splineClosed",!0)("projection","nz"),V(2),U("resource",Je(31,23,n._resource$))}},dependencies:[hi,Na,Qc,Cl,ed,Jc,ac,Ba,po,Sl,Vh,Yg,wl,CO,co],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.qfsSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.qfsSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.qfsSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.qfsSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .qfsSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),i})();function uge(i,t){if(1&i&&($(0,"mat-error"),Oe(1),W()),2&i){const e=ae(2);V(1),Ah(" ",e.resourceError.data.error_class,": ",e.resourceError.data.error_text," ")}}function hge(i,t){1&i&&Ee(0,"mat-spinner",5)}function fge(i,t){if(1&i&&($(0,"div",2),fe(1,uge,2,2,"mat-error",3),fe(2,hge,1,0,"mat-spinner",4),W()),2&i){const e=ae();V(1),U("ngIf",e.resourceError),V(1),U("ngIf",!e.resourceError)}}function pge(i,t){}let r0=(()=>{class i{constructor(e,n){this.mainService=e,this.deep=n,this._component=null,this._componentChangedSub=null,this.destroyed$=new Re,this.resourceSet$=new Re,this._resource=null,this._resourceError=null,this._resourceDescription="",this._hideBlockActions=!1,this._disabled=!1}get resource(){return this._resource}get resourceError(){return this._resourceError}set resourceDescription(e){this._resourceDescription=e,this._component&&(this._component.instance.resourceDescription=e)}set hideBlockActions(e){this._hideBlockActions=e,this._component&&(this._component.instance.hideBlockActions=e)}set disabled(e){this._disabled=e,this._component&&(this._component.instance.disabled=e)}resourceEqual(e,n){return e&&n?e.id===n.id&&this.deep.deepEquals(e.data,n.data):!e==!n}set resource(e){if(!this.resourceEqual(e,this._resourceError||this._resource)&&(this.resourceSet$.next(),e?e.data?.error_class?(this._resourceError=e,this._resource=null):(this._resource=e,this._resourceError=null):(this._resource=null,this._resourceError=null),this.dataBlockUiHost.viewContainerRef.clear(),this._resource&&this._resource.schema.block_class_mro)){{let r;for(const s of this._resource.schema.block_class_mro.split("__"))if(r=i.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+this._resource.schema.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._componentChangedSub=this._component.instance.changed.pipe(Le(this.destroyed$),Le(this.resourceSet$)).subscribe(()=>{const s=this._resource.id,o=this._resource.data;if(o instanceof Array)if(this._resource.schema.block_class_mro.startsWith("BytesBlock"))this.mainService.dataBlockChange$.next([s,o]);else for(let a=0;a<o.length;a++)this.mainService.dataBlockChange$.next([Po(s,a),o[a]]);else if((0,uR.isObject)(o))for(const a in o)this.mainService.dataBlockChange$.next([Po(s,a),o[a]]);else this.mainService.dataBlockChange$.next([s,o])})}this._component.instance.resource=this._resource,this._component.instance.resourceDescription=this._resourceDescription,this._component.instance.hideBlockActions=this._hideBlockActions,this._component.instance.disabled=this._disabled}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.DATA_BLOCK_COMPONENTS_MAP={ArrayBlock:GR,SubByteArrayBlock:GR,BitFlagsBlock:vse,BytesBlock:cre,CompoundBlock:wl,DataBlock:Mee,DelegateBlock:bG,EnumByteBlock:Vre,IntegerBlock:xH,DecimalBlock:xH,UTF8Block:wH,NullTerminatedUTF8Block:wH,SkipBlock:ige,AngleBlock:fre,AnyBitmapBlock:Tne,BasePalette:Zie,OripGeometry:nme,BaseArchiveBlock:Xme,TriMap:Jpe,WwwwBlock:gre,FenceType:dme,SoundBank:ume,EacsAudioFile:$me,GeoGeometry:Yme,TrkMap:nge,FrdMap:dge},i.\u0275fac=function(e){return new(e||i)(E(ho),E(JR))},i.\u0275cmp=st({type:i,selectors:[["app-editor"]],viewQuery:function(e,n){if(1&e&&Nn(az,7),2&e){let r;Et(r=At())&&(n.dataBlockUiHost=r.first)}},inputs:{resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled",resource:"resource"},decls:2,vars:1,consts:[["id","error-spinner-wrapper",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(e,n){1&e&&(fe(0,fge,3,2,"div",0),fe(1,pge,0,0,"ng-template",1)),2&e&&U("ngIf",!n.resource||n.resourceError)},dependencies:[hi,Zte,Yg,az],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0}),i})();function mge(i,t){1&i&&Ee(0,"mat-icon",17)}function gge(i,t){1&i&&Ee(0,"mat-icon",18)}let _ge=(()=>{class i{constructor(e,n,r,s,o,a){this.eelDelegate=e,this.mainService=n,this.dialog=r,this.navigation=s,this.snackBar=o,this.cdr=a}saveResource(){var e=this;return je(function*(){try{yield e.mainService.saveResource(),e.snackBar.open("File Saved!","OK",{duration:1500})}catch(n){e.snackBar.open("Error while saving file! "+n.errorText,"OK :(",{duration:5e3})}})()}toggleUnknownsVisibility(){this.mainService.hideHiddenFields$.next(!this.mainService.hideHiddenFields$.getValue())}reloadResource(){var e=this;return je(function*(){if(e.mainService.hasUnsavedChanges){let n=e.dialog.open(DV,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield dR(n.afterClosed())))return}yield e.mainService.reloadResource(),e.cdr.markForCheck()})()}}return i.\u0275fac=function(e){return new(e||i)(E(xl),E(ho),E(Vm),E(QM),E(FV),E(Yn))},i.\u0275cmp=st({type:i,selectors:[["app-root"]],decls:35,vars:35,consts:[["color","primary"],[1,"flex-spacer"],["mat-icon-button","","matTooltip","Show/hide hidden fields",3,"click"],["fontIcon","visibility_off",4,"ngIf"],["fontIcon","visibility_on",4,"ngIf"],["vertical",""],[3,"resource"],["mat-icon-button","","matTooltip","Reload file from disk",3,"disabled","click"],["fontIcon","refresh"],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[1,"scroll-bounds-snapper"],[3,"resource","hideBlockActions"],["id","bmac"],["href","https://www.buymeacoffee.com/andygura","target","_blank"],["src","https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png","alt","Buy Me A Coffee",2,"height","60px !important","width","217px !important"],["fontIcon","visibility_off"],["fontIcon","visibility_on"]],template:function(e,n){if(1&e&&($(0,"mat-toolbar",0)(1,"span"),Oe(2),Xe(3,"async"),Xe(4,"async"),W(),Ee(5,"span",1),$(6,"button",2),De("click",function(){return n.toggleUnknownsVisibility()}),fe(7,mge,1,0,"mat-icon",3),Xe(8,"async"),fe(9,gge,1,0,"mat-icon",4),Xe(10,"async"),W(),Ee(11,"mat-divider",5)(12,"app-block-actions",6),Xe(13,"async"),$(14,"button",7),De("click",function(){return n.reloadResource()}),Xe(15,"async"),Ee(16,"mat-icon",8),W(),Ee(17,"mat-divider",5),$(18,"button",9),De("click",function(){return n.saveResource()}),Xe(19,"async"),Xe(20,"async"),Ee(21,"mat-icon",10),W()(),Ee(22,"app-navigation-bar"),$(23,"div",11),Ee(24,"div",12)(25,"app-editor",13),Xe(26,"async"),Xe(27,"async"),Xe(28,"async"),Xe(29,"async"),Xe(30,"async"),$(31,"div",14)(32,"a",15),Ee(33,"img",16),W()(),Ee(34,"div",12),W()),2&e){let r,s;V(2),Ah("",(null==(r=Je(3,9,n.mainService.resource$))?null:r.name)||"...","",Je(4,11,n.mainService.hasUnsavedChanges$)?"*":"",""),V(5),U("ngIf",Je(8,13,n.mainService.hideHiddenFields$)),V(2),U("ngIf",!Je(10,15,n.mainService.hideHiddenFields$)),V(3),U("resource",Je(13,17,n.mainService.resource$)),V(2),U("disabled",!Je(15,19,n.mainService.eelDelegate.openedResourcePath$)),V(4),U("disabled",!Je(19,21,n.mainService.resource$)||!Je(20,23,n.mainService.hasUnsavedChanges$)),V(7),U("resource",Je(26,25,n.mainService.customActionRunning$)?null:Je(27,27,n.navigation.resourceToRender$)||Je(28,29,n.mainService.resource$)||Je(29,31,n.mainService.error$))("hideBlockActions",0==(null==(s=Je(30,33,n.navigation.navigationPath$))?null:s.length))}},dependencies:[hi,DJ,LV,Bs,ZM,yR,oz,r0,sE,co],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}#content-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem;height:100%;scroll-snap-type:y proximity}#content-wrapper[_ngcontent-%COMP%]   .scroll-bounds-snapper[_ngcontent-%COMP%]{height:0;width:100%;scroll-snap-align:start;scroll-margin:1rem}#bmac[_ngcontent-%COMP%]{text-align:end;margin-top:1rem}mat-divider[_ngcontent-%COMP%]{height:100%;margin:0 16px}"],changeDetection:0}),i})();function EG(i){return new pe(3e3,!1)}function Qge(){return typeof window<"u"&&typeof window.document<"u"}function EO(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Lu(i){switch(i.length){case 0:return new ib;case 1:return i[0];default:return new dV(i)}}function AG(i,t,e,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const h=d.get("offset"),p=h==l,m=p&&c||new Map;d.forEach((g,b)=>{let v=b,y=g;if("offset"!==b)switch(v=t.normalizePropertyName(v,o),y){case oR:y=r.get(b);break;case Zc:y=s.get(b);break;default:y=t.normalizeStyleValue(b,v,y,o)}m.set(v,y)}),p||a.push(m),c=m,l=h}),o.length)throw function Vge(i){return new pe(3502,!1)}();return a}function AO(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&DO(e,"start",i)));break;case"done":i.onDone(()=>n(e&&DO(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&DO(e,"destroy",i)))}}function DO(i,t,e){const s=TO(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function TO(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function da(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function DG(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let IO=(i,t)=>!1,TG=(i,t,e)=>[],IG=null;function RO(i){const t=i.parentNode||i.host;return t===IG?null:t}(EO()||typeof Element<"u")&&(Qge()?(IG=(()=>document.documentElement)(),IO=(i,t)=>{for(;t;){if(t===i)return!0;t=RO(t)}return!1}):IO=(i,t)=>i.contains(t),TG=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let kf=null,RG=!1;const kG=IO,PG=TG;let OG=(()=>{class i{validateStyleProperty(e){return function e_e(i){kf||(kf=function t_e(){return typeof document<"u"?document.body:null}()||{},RG=!!kf.style&&"WebkitAppearance"in kf.style);let t=!0;return kf.style&&!function Jge(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in kf.style,!t&&RG&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in kf.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return kG(e,n)}getParentElement(e){return RO(e)}query(e,n,r){return PG(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],l){return new ib(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),kO=(()=>{class i{}return i.NOOP=new OG,i})();const n_e=1e3,PO="ng-enter",oE="ng-leave",aE="ng-trigger",lE=".ng-trigger",LG="ng-animating",OO=".ng-animating";function gd(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:FO(parseFloat(t[1]),t[2])}function FO(i,t){return"s"===t?i*n_e:i}function cE(i,t,e){return i.hasOwnProperty("duration")?i:function r_e(i,t,e){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(EG()),{duration:0,delay:0,easing:""};r=FO(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=FO(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function vge(){return new pe(3100,!1)}()),a=!0),s<0&&(t.push(function yge(){return new pe(3101,!1)}()),a=!0),a&&t.splice(l,0,EG())}return{duration:r,delay:s,easing:o}}(i,t,e)}function s0(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function NG(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function Nu(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function UG(i,t,e){return e?t+":"+e+";":""}function VG(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=UG(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=UG(0,l_e(e),i.style[e]));i.setAttribute("style",t)}function mc(i,t,e){i.style&&(t.forEach((n,r)=>{const s=NO(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),EO()&&VG(i))}function Pf(i,t){i.style&&(t.forEach((e,n)=>{const r=NO(n);i.style[r]=""}),EO()&&VG(i))}function o0(i){return Array.isArray(i)?1==i.length?i[0]:aV(i):i}const LO=new RegExp("{{\\s*(.+?)\\s*}}","g");function zG(i){let t=[];if("string"==typeof i){let e;for(;e=LO.exec(i);)t.push(e[1]);LO.lastIndex=0}return t}function a0(i,t,e){const n=i.toString(),r=n.replace(LO,(s,o)=>{let a=t[o];return null==a&&(e.push(function xge(i){return new pe(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function dE(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const a_e=/-+([a-z0-9])/g;function NO(i){return i.replace(a_e,(...t)=>t[1].toUpperCase())}function l_e(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ua(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function wge(i){return new pe(3004,!1)}()}}function HG(i,t){return window.getComputedStyle(i)[t]}const fE="*";function p_e(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function m_e(i,t,e){if(":"==i[0]){const l=function g_e(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function Lge(i){return new pe(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function Fge(i){return new pe(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push($G(r,o));"<"==s[0]&&!(r==fE&&o==fE)&&t.push($G(o,r))}(n,e,t)):e.push(i),e}const pE=new Set(["true","1"]),mE=new Set(["false","0"]);function $G(i,t){const e=pE.has(i)||mE.has(i),n=pE.has(t)||mE.has(t);return(r,s)=>{let o=i==fE||i==r,a=t==fE||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?pE.has(i):mE.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?pE.has(t):mE.has(t)),o&&a}}const __e=new RegExp("s*:selfs*,?","g");function BO(i,t,e,n){return new v_e(i).build(t,e,n)}class v_e{constructor(t){this._driver=t}build(t,e,n){const r=new x_e(e);return this._resetContextStyleTimingState(r),ua(this,o0(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function Cge(){return new pe(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function Sge(){return new pe(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{zG(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(dE(s.values()),e.errors.push(function Ege(i,t){return new pe(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=ua(this,o0(t.animation),e);return{type:1,matchers:p_e(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:Of(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>ua(this,n,e)),options:Of(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const a=ua(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:Of(t.options)}}visitAnimate(t,e){const n=function M_e(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return UO(cE(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=UO(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=cE(e,t);return UO(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:oi({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=oi(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Zc?n.push(a):e.errors.push(new pe(3002,!1)):n.push(NG(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l);let h=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(e.errors.push(function Dge(i,t,e,n,r){return new pe(3010,!1)}()),h=!1),s=d.startTime),h&&c.set(l,{startTime:s,endTime:r}),e.options&&function o_e(i,t,e){const n=t.params||{},r=zG(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function bge(i){return new pe(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function Tge(){return new pe(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=t.steps.map(y=>{const M=this._makeStyleAst(y,e);let x=null!=M.offset?M.offset:function w_e(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(M.styles),C=0;return null!=x&&(s++,C=M.offset=x),l=l||C<0||C>1,a=a||C<c,c=C,o.push(C),M});l&&e.errors.push(function Ige(){return new pe(3012,!1)}()),a&&e.errors.push(function Rge(){return new pe(3200,!1)}());const h=t.steps.length;let p=0;s>0&&s<h?e.errors.push(function kge(){return new pe(3202,!1)}()):0==s&&(p=1/(h-1));const m=h-1,g=e.currentTime,b=e.currentAnimateTimings,v=b.duration;return d.forEach((y,M)=>{const x=p>0?M==m?1:p*M:o[M],C=x*v;e.currentTime=g+b.delay+C,b.duration=C,this._validateStyleAst(y,e),y.offset=x,n.styles.push(y)}),n}visitReference(t,e){return{type:8,animation:ua(this,o0(t.animation),e),options:Of(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Of(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Of(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function y_e(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(__e,"")),i=i.replace(/@\*/g,lE).replace(/@\w+/g,e=>lE+"-"+e.slice(1)).replace(/:animating/g,OO),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,da(e.collectedStyles,e.currentQuerySelector,new Map);const a=ua(this,o0(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:Of(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function Pge(){return new pe(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:cE(t.timings,e.errors,!0);return{type:12,animation:ua(this,o0(t.animation),e),timings:n,options:null}}}class x_e{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Of(i){return i?(i=s0(i)).params&&(i.params=function b_e(i){return i?s0(i):null}(i.params)):i={},i}function UO(i,t,e){return{duration:i,delay:t,easing:e}}function VO(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class gE{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const E_e=new RegExp(":enter","g"),D_e=new RegExp(":leave","g");function zO(i,t,e,n,r,s=new Map,o=new Map,a,l,c=[]){return(new T_e).buildKeyframes(i,t,e,n,r,s,o,a,l,c)}class T_e{buildKeyframes(t,e,n,r,s,o,a,l,c,d=[]){c=c||new gE;const h=new HO(t,e,c,r,s,d,[]);h.options=l;const p=l.delay?gd(l.delay):0;h.currentTimeline.delayNextStep(p),h.currentTimeline.setStyles([o],null,h.errors,l),ua(this,n,h);const m=h.timelines.filter(g=>g.containsAnimation());if(m.length&&a.size){let g;for(let b=m.length-1;b>=0;b--){const v=m[b];if(v.element===e){g=v;break}}g&&!g.allowOnlyTimelineStyles()&&g.setStyles([a],null,h.errors,l)}return m.length?m.map(g=>g.buildKeyframes()):[VO(e,[],[],[],0,p,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:gd(a0(s,r?.params??{},e.errors));n.delayNextStep(o)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?gd(n.duration):null,a=null!=n.delay?gd(n.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),ua(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=_E);const o=gd(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>ua(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?gd(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),ua(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return cE(e.params?a0(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?gd(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=_E);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const h=e.createSubContext(t.options,c);s&&h.delayNextStep(s),c===e.element&&(l=h.currentTimeline),ua(this,t.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const h=d.currentTime;ua(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-h+(r.startTime-n.currentTimeline.startTime)}}const _E={};class HO{constructor(t,e,n,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=_E,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new vE(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=gd(n.duration)),null!=n.delay&&(r.delay=gd(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=a0(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new HO(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=_E,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new I_e(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(E_e,"."+this._enterClassName)).replace(D_e,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function Oge(i){return new pe(3014,!1)}()),a}}class vE{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new vE(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||Zc),this._currentKeyframe.set(e,Zc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function R_e(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,Zc)}else Nu(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=a0(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Zc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Nu(a,new Map,this._backFill);c.forEach((d,h)=>{d===oR?t.add(h):d===Zc&&e.add(h)}),n||c.set("offset",l/this.duration),r.push(c)});const s=t.size?dE(t.values()):[],o=e.size?dE(e.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return VO(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class I_e extends vE{constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,a=e/o,l=Nu(t[0]);l.set("offset",0),s.push(l);const c=Nu(t[0]);c.set("offset",jG(a)),s.push(c);const d=t.length-1;for(let h=1;h<=d;h++){let p=Nu(t[h]);const m=p.get("offset");p.set("offset",jG((e+m*n)/o)),s.push(p)}n=o,e=0,r="",t=s}return VO(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function jG(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class $O{}const k_e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class P_e extends $O{normalizePropertyName(t,e){return NO(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(k_e.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Mge(i,t){return new pe(3005,!1)}())}return o+s}}function YG(i,t,e,n,r,s,o,a,l,c,d,h,p){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:h,errors:p}}const GO={};class qG{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function O_e(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,a,l,c,d){const h=[],p=this.ast.options&&this.ast.options.params||GO,g=this.buildStyles(n,a&&a.params||GO,h),b=l&&l.params||GO,v=this.buildStyles(r,b,h),y=new Set,M=new Map,x=new Map,C="void"===r,F={params:F_e(b,p),delay:this.ast.options?.delay},D=d?[]:zO(t,e,this.ast.animation,s,o,g,v,F,c,h);let k=0;if(D.forEach(T=>{k=Math.max(T.duration+T.delay,k)}),h.length)return YG(e,this._triggerName,n,r,C,g,v,[],[],M,x,k,h);D.forEach(T=>{const A=T.element,j=da(M,A,new Set);T.preStyleProps.forEach(ne=>j.add(ne));const ie=da(x,A,new Set);T.postStyleProps.forEach(ne=>ie.add(ne)),A!==e&&y.add(A)});const B=dE(y.values());return YG(e,this._triggerName,n,r,C,g,v,D,B,M,x,k)}}function F_e(i,t){const e=s0(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class L_e{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=s0(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=a0(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),n.set(a,o)})}),n}}class B_e{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new L_e(r.style,r.options&&r.options.params||{},n))}),XG(this.states,"true","1"),XG(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new qG(t,r,this.states))}),this.fallbackTransition=function U_e(i,t,e){return new qG(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function XG(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const V_e=new gE;class z_e{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],r=[],s=BO(this._driver,e,n,r);if(n.length)throw function zge(i){return new pe(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=AG(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=zO(this._driver,e,s,PO,oE,new Map,new Map,n,V_e,r),o.forEach(d=>{const h=da(a,d.element,new Map);d.postStyleProps.forEach(p=>h.set(p,null))})):(r.push(function Hge(){return new pe(3300,!1)}()),o=[]),r.length)throw function $ge(i){return new pe(3504,!1)}();a.forEach((d,h)=>{d.forEach((p,m)=>{d.set(m,this._driver.computeStyle(h,m,Zc))})});const c=Lu(o.map(d=>{const h=a.get(d.element);return this._buildPlayer(d,new Map,h)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Gge(i){return new pe(3301,!1)}();return e}listen(t,e,n,r){const s=TO(e,"","","");return AO(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const KG="ng-animate-queued",WO="ng-animate-disabled",j_e=[],ZG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Y_e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Wa="__ng_removed";class jO{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function Z_e(i){return i??null}(n?t.value:t),n){const s=s0(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const l0="void",YO=new jO(l0);class q_e{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,ja(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function Wge(i,t){return new pe(3302,!1)}();if(null==n||0==n.length)throw function jge(i){return new pe(3303,!1)}();if(!function Q_e(i){return"start"==i||"done"==i}(n))throw function Yge(i,t){return new pe(3400,!1)}();const s=da(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=da(this._engine.statesByElement,t,new Map);return a.has(e)||(ja(t,aE),ja(t,aE+"-"+e),a.set(e,YO)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function qge(i){return new pe(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new qO(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(ja(t,aE),ja(t,aE+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new jO(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=YO),c.value!==l0&&l.value===c.value){if(!function tve(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(l.params,c.params)){const b=[],v=s.matchStyles(l.value,l.params,b),y=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Pf(t,v),mc(t,y)})}return}const p=da(this._engine.playersByElement,t,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==e&&b.queued&&b.destroy()});let m=s.matchTransition(l.value,c.value,t,c.params),g=!1;if(!m){if(!r)return;m=s.fallbackTransition,g=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:g}),g||(ja(t,KG),o.onStart(()=>{qg(t,KG)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const v=this._engine.playersByElement.get(t);if(v){let y=v.indexOf(o);y>=0&&v.splice(y,1)}}),this.players.push(o),p.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,lE,!0);n.forEach(r=>{if(r[Wa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(t,c,l0,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&Lu(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||YO,d=new jO(l0),h=new qO(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:h,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[Wa];(!s||s===ZG)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){ja(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=TO(s,n.triggerName,n.fromState.value,n.toState.value);l._data=t,AO(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class X_e{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new q_e(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(yE(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!yE(e))return;const s=e[Wa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),ja(t,WO)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),qg(t,WO))}removeNode(t,e,n,r){if(yE(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[Wa]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return yE(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,lE,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,OO,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Lu(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Wa];if(e&&e.setForRemoval){if(t[Wa]=ZG,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(WO)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)ja(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Lu(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function Xge(i){return new pe(3402,!1)}()}_flushAnimations(t,e){const n=new gE,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(q=>{d.add(q);const re=this.driver.query(q,".ng-animate-queued",!0);for(let J=0;J<re.length;J++)d.add(re[J])});const h=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=e8(p,this.collectedEnterElements),g=new Map;let b=0;m.forEach((q,re)=>{const J=PO+b++;g.set(re,J),q.forEach(we=>ja(we,J))});const v=[],y=new Set,M=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){const re=this.collectedLeaveElements[q],J=re[Wa];J&&J.setForRemoval&&(v.push(re),y.add(re),J.hasAnimation?this.driver.query(re,".ng-star-inserted",!0).forEach(we=>y.add(we)):M.add(re))}const x=new Map,C=e8(p,Array.from(y));C.forEach((q,re)=>{const J=oE+b++;x.set(re,J),q.forEach(we=>ja(we,J))}),t.push(()=>{m.forEach((q,re)=>{const J=g.get(re);q.forEach(we=>qg(we,J))}),C.forEach((q,re)=>{const J=x.get(re);q.forEach(we=>qg(we,J))}),v.forEach(q=>{this.processLeaveNode(q)})});const F=[],D=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(e).forEach(J=>{const we=J.player,Ve=J.element;if(F.push(we),this.collectedEnterElements.length){const Be=Ve[Wa];if(Be&&Be.setForMove){if(Be.previousTriggersValues&&Be.previousTriggersValues.has(J.triggerName)){const wt=Be.previousTriggersValues.get(J.triggerName),Tt=this.statesByElement.get(J.element);if(Tt&&Tt.has(J.triggerName)){const Dt=Tt.get(J.triggerName);Dt.value=wt,Tt.set(J.triggerName,Dt)}}return void we.destroy()}}const Ke=!h||!this.driver.containsElement(h,Ve),Rt=x.get(Ve),nn=g.get(Ve),le=this._buildInstruction(J,n,nn,Rt,Ke);if(le.errors&&le.errors.length)return void D.push(le);if(Ke)return we.onStart(()=>Pf(Ve,le.fromStyles)),we.onDestroy(()=>mc(Ve,le.toStyles)),void r.push(we);if(J.isFallbackTransition)return we.onStart(()=>Pf(Ve,le.fromStyles)),we.onDestroy(()=>mc(Ve,le.toStyles)),void r.push(we);const Ne=[];le.timelines.forEach(Be=>{Be.stretchStartingKeyframe=!0,this.disabledNodes.has(Be.element)||Ne.push(Be)}),le.timelines=Ne,n.append(Ve,le.timelines),o.push({instruction:le,player:we,element:Ve}),le.queriedElements.forEach(Be=>da(a,Be,[]).push(we)),le.preStyleProps.forEach((Be,wt)=>{if(Be.size){let Tt=l.get(wt);Tt||l.set(wt,Tt=new Set),Be.forEach((Dt,Cn)=>Tt.add(Cn))}}),le.postStyleProps.forEach((Be,wt)=>{let Tt=c.get(wt);Tt||c.set(wt,Tt=new Set),Be.forEach((Dt,Cn)=>Tt.add(Cn))})});if(D.length){const q=[];D.forEach(re=>{q.push(function Kge(i,t){return new pe(3505,!1)}())}),F.forEach(re=>re.destroy()),this.reportError(q)}const k=new Map,B=new Map;o.forEach(q=>{const re=q.element;n.has(re)&&(B.set(re,re),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,k))}),r.forEach(q=>{const re=q.element;this._getPreviousPlayers(re,!1,q.namespaceId,q.triggerName,null).forEach(we=>{da(k,re,[]).push(we),we.destroy()})});const T=v.filter(q=>n8(q,l,c)),A=new Map;JG(A,this.driver,M,c,Zc).forEach(q=>{n8(q,l,c)&&T.push(q)});const ie=new Map;m.forEach((q,re)=>{JG(ie,this.driver,new Set(q),l,oR)}),T.forEach(q=>{const re=A.get(q),J=ie.get(q);A.set(q,new Map([...Array.from(re?.entries()??[]),...Array.from(J?.entries()??[])]))});const ne=[],se=[],ge={};o.forEach(q=>{const{element:re,player:J,instruction:we}=q;if(n.has(re)){if(d.has(re))return J.onDestroy(()=>mc(re,we.toStyles)),J.disabled=!0,J.overrideTotalTime(we.totalTime),void r.push(J);let Ve=ge;if(B.size>1){let Rt=re;const nn=[];for(;Rt=Rt.parentNode;){const le=B.get(Rt);if(le){Ve=le;break}nn.push(Rt)}nn.forEach(le=>B.set(le,Ve))}const Ke=this._buildAnimation(J.namespaceId,we,k,s,ie,A);if(J.setRealPlayer(Ke),Ve===ge)ne.push(J);else{const Rt=this.playersByElement.get(Ve);Rt&&Rt.length&&(J.parentPlayer=Lu(Rt)),r.push(J)}}else Pf(re,we.fromStyles),J.onDestroy(()=>mc(re,we.toStyles)),se.push(J),d.has(re)&&r.push(J)}),se.forEach(q=>{const re=s.get(q.element);if(re&&re.length){const J=Lu(re);q.setRealPlayer(J)}}),r.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<v.length;q++){const re=v[q],J=re[Wa];if(qg(re,oE),J&&J.hasAnimation)continue;let we=[];if(a.size){let Ke=a.get(re);Ke&&Ke.length&&we.push(...Ke);let Rt=this.driver.query(re,OO,!0);for(let nn=0;nn<Rt.length;nn++){let le=a.get(Rt[nn]);le&&le.length&&we.push(...le)}}const Ve=we.filter(Ke=>!Ke.destroyed);Ve.length?J_e(this,re,Ve):this.processLeaveNode(re)}return v.length=0,ne.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();const re=this.players.indexOf(q);this.players.splice(re,1)}),q.play()}),ne}elementContainsData(t,e){let n=!1;const r=e[Wa];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==l0;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==s,h=da(n,c,[]);this._getPreviousPlayers(c,d,o,a,e.toState).forEach(m=>{const g=m.getRealPlayer();g.beforeDestroy&&g.beforeDestroy(),m.destroy(),h.push(m)})}Pf(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const a=e.triggerName,l=e.element,c=[],d=new Set,h=new Set,p=e.timelines.map(g=>{const b=g.element;d.add(b);const v=b[Wa];if(v&&v.removedBeforeQueried)return new ib(g.duration,g.delay);const y=b!==l,M=function eve(i){const t=[];return t8(i,t),t}((n.get(b)||j_e).map(k=>k.getRealPlayer())).filter(k=>!!k.element&&k.element===b),x=s.get(b),C=o.get(b),F=AG(0,this._normalizer,0,g.keyframes,x,C),D=this._buildPlayer(g,F,M);if(g.subTimeline&&r&&h.add(b),y){const k=new qO(t,a,b);k.setRealPlayer(D),c.push(k)}return D});c.forEach(g=>{da(this.playersByQueriedElement,g.element,[]).push(g),g.onDone(()=>function K_e(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,g.element,g))}),d.forEach(g=>ja(g,LG));const m=Lu(p);return m.onDestroy(()=>{d.forEach(g=>qg(g,LG)),mc(l,e.toStyles)}),h.forEach(g=>{da(r,g,[]).push(m)}),m}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new ib(t.duration,t.delay)}}class qO{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new ib,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>AO(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){da(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function yE(i){return i&&1===i.nodeType}function QG(i,t){const e=i.style.display;return i.style.display=t??"none",e}function JG(i,t,e,n,r){const s=[];e.forEach(l=>s.push(QG(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(h=>{const p=t.computeStyle(c,h,r);d.set(h,p),(!p||0==p.length)&&(c[Wa]=Y_e,o.push(c))}),i.set(c,d)});let a=0;return e.forEach(l=>QG(l,s[a++])),o}function e8(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const n=1,r=new Set(t),s=new Map;function o(a){if(!a)return n;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?n:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);l!==n&&e.get(l).push(a)}),e}function ja(i,t){i.classList?.add(t)}function qg(i,t){i.classList?.remove(t)}function J_e(i,t,e){Lu(e).onDone(()=>i.processLeaveNode(t))}function t8(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof dV?t8(n.players,t):t.push(n)}}function n8(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class bE{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new X_e(t,e,n),this._timelineEngine=new z_e(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],d=BO(this._driver,s,l,c);if(l.length)throw function Uge(i,t){return new pe(3404,!1)}();a=function N_e(i,t,e){return new B_e(i,t,e)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=DG(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,a]=DG(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let ive=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&mc(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(mc(this._element,this._initialStyles),this._endStyles&&(mc(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Pf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pf(this._element,this._endStyles),this._endStyles=null),mc(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function XO(i){let t=null;return i.forEach((e,n)=>{(function rve(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class i8{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:HG(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class sve{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return kG(t,e)}getParentElement(t){return RO(t)}query(t,e,n){return PG(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(m=>m instanceof i8);(function c_e(i,t){return 0===i||0===t})(n,r)&&d.forEach(m=>{m.currentSnapshot.forEach((g,b)=>c.set(b,g))});let h=function s_e(i){return i.length?i[0]instanceof Map?i:i.map(t=>NG(t)):[]}(e).map(m=>Nu(m));h=function d_e(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,HG(i,a)))}}return t}(t,h,c);const p=function nve(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=XO(t[0]),t.length>1&&(n=XO(t[t.length-1]))):t instanceof Map&&(e=XO(t)),e||n?new ive(i,e,n):null}(t,h);return new i8(t,h,l,p)}}let ove=(()=>{class i extends sV{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:Zs.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?aV(e):e;return r8(this._renderer,null,n,"register",[r]),new ave(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(ee(Zl),ee(qt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class ave extends UQ{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new lve(this._id,t,e||{},this._renderer)}}class lve{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return r8(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function r8(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const s8="@.disabled";let cve=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new o8("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,e,d.name,d)};return n.data.animation.forEach(l),new dve(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(ee(Zl),ee(bE),ee(gt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class o8{constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==s8?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class dve extends o8{constructor(t,e,n,r,s){super(e,n,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==s8?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function uve(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function hve(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}const a8=[{provide:sV,useClass:ove},{provide:$O,useFactory:function pve(){return new P_e}},{provide:bE,useClass:(()=>{class i extends bE{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(ee(qt),ee(kO),ee($O),ee(hm))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})()},{provide:Zl,useFactory:function mve(i,t,e){return new cve(i,t,e)},deps:[dM,bE,gt]}],KO=[{provide:kO,useFactory:()=>new sve},{provide:kr,useValue:"BrowserAnimations"},...a8],l8=[{provide:kO,useClass:OG},{provide:kr,useValue:"NoopAnimations"},...a8];let gve=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?l8:KO}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:KO,imports:[UB]}),i})();const c8=new me("CdkAccordion");let _ve=0,vve=(()=>{class i{get expanded(){return this._expanded}set expanded(e){e=tn(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=tn(e)}constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=Qt.EMPTY,this.closed=new He,this.opened=new He,this.destroyed=new He,this.expandedChange=new He,this.id="cdk-accordion-child-"+_ve++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(E(c8,12),E(Yn),E(jR))},i.\u0275dir=ve({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[An([{provide:c8,useValue:void 0}])]}),i})(),yve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({}),i})();const bve=["body"];function xve(i,t){}const wve=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Mve=["mat-expansion-panel-header","*","mat-action-row"];function Cve(i,t){1&i&&Ee(0,"span",2),2&i&&U("@indicatorRotate",ae()._getExpandedState())}const Sve=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],Eve=["mat-panel-title","mat-panel-description","*"],d8=new me("MAT_ACCORDION"),u8="225ms cubic-bezier(0.4,0.0,0.2,1)",h8={indicatorRotate:La("indicatorRotate",[Ns("collapsed, void",oi({transform:"rotate(0deg)"})),Ns("expanded",oi({transform:"rotate(180deg)"})),Or("expanded <=> collapsed, void => collapsed",qr(u8))]),bodyExpansion:La("bodyExpansion",[Ns("collapsed, void",oi({height:"0px",visibility:"hidden"})),Ns("expanded",oi({height:"*",visibility:"visible"})),Or("expanded <=> collapsed, void => collapsed",qr(u8))])},f8=new me("MAT_EXPANSION_PANEL");let Ave=(()=>{class i{constructor(e,n){this._template=e,this._expansionPanel=n}}return i.\u0275fac=function(e){return new(e||i)(E(To),E(f8,8))},i.\u0275dir=ve({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),Dve=0;const p8=new me("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let m8=(()=>{class i extends vve{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=tn(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,n,r,s,o,a,l){super(e,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new He,this.afterCollapse=new He,this._inputChanges=new Re,this._headerId="mat-expansion-panel-header-"+Dve++,this._bodyAnimationDone=new Re,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(bl((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Ro(null),hn(()=>this.expanded&&!this._portal),Oi(1)).subscribe(()=>{this._portal=new Dm(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(E(d8,12),E(Yn),E(jR),E(Yr),E(qt),E(kr,8),E(p8,8))},i.\u0275cmp=st({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,r){if(1&e&&Yi(r,Ave,5),2&e){let s;Et(s=At())&&(n._lazyContent=s.first)}},viewQuery:function(e,n){if(1&e&&Nn(bve,5),2&e){let r;Et(r=At())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&ln("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[An([{provide:d8,useValue:void 0},{provide:f8,useExisting:i}]),ut,xi],ngContentSelectors:Mve,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(or(wve),Yt(0),$(1,"div",0,1),De("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),$(3,"div",2),Yt(4,1),fe(5,xve,0,0,"ng-template",3),W(),Yt(6,2),W()),2&e&&(V(1),U("@bodyExpansion",n._getExpandedState())("id",n.id),It("aria-labelledby",n._headerId),V(4),U("cdkPortalOutlet",n._portal))},dependencies:[Tm],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[h8.bodyExpansion]},changeDetection:0}),i})();class Tve{}const Ive=tR(Tve);let Rve=(()=>{class i extends Ive{constructor(e,n,r,s,o,a,l){super(),this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Qt.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe(hn(d=>!(!d.hideToggle&&!d.togglePosition))):bo;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Cr(e.opened,e.closed,c,e._inputChanges.pipe(hn(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(hn(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:ta(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(E(m8,1),E(vt),E(Kc),E(Yn),E(p8,8),E(kr,8),Sa("tabindex"))},i.\u0275cmp=st({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&De("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&e&&(It("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),Zo("height",n._getHeaderHeight()),ln("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ut],ngContentSelectors:Eve,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(or(Sve),$(0,"span",0),Yt(1),Yt(2,1),Yt(3,2),W(),fe(4,Cve,1,1,"span",1)),2&e&&(ln("mat-content-hide-toggle",!n._showToggle()),V(4),U("ngIf",n._showToggle()))},dependencies:[hi],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[h8.indicatorRotate]},changeDetection:0}),i})(),kve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),Pve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ve({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),Ove=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({imports:[uo,Jn,yve,Nh]}),i})();function Fve(i,t){if(1&i&&($(0,"mat-option",19),Oe(1),W()),2&i){const e=t.$implicit;U("value",e),V(1),Vi(" ",e," ")}}function Lve(i,t){if(1&i){const e=$n();$(0,"mat-form-field",16)(1,"mat-select",17),De("selectionChange",function(r){return Nt(e),St(ae(2)._changePageSize(r.value))}),fe(2,Fve,2,2,"mat-option",18),W()()}if(2&i){const e=ae(2);U("appearance",e._formFieldAppearance)("color",e.color),V(1),U("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),V(1),U("ngForOf",e._displayedPageSizeOptions)}}function Nve(i,t){if(1&i&&($(0,"div",20),Oe(1),W()),2&i){const e=ae(2);V(1),ui(e.pageSize)}}function Bve(i,t){if(1&i&&($(0,"div",12)(1,"div",13),Oe(2),W(),fe(3,Lve,3,8,"mat-form-field",14),fe(4,Nve,2,1,"div",15),W()),2&i){const e=ae();V(1),zD("id",e._pageSizeLabelId),V(1),Vi(" ",e._intl.itemsPerPageLabel," "),V(1),U("ngIf",e._displayedPageSizeOptions.length>1),V(1),U("ngIf",e._displayedPageSizeOptions.length<=1)}}function Uve(i,t){if(1&i){const e=$n();$(0,"button",21),De("click",function(){return Nt(e),St(ae().firstPage())}),ki(),$(1,"svg",7),Ee(2,"path",22),W()()}if(2&i){const e=ae();U("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),It("aria-label",e._intl.firstPageLabel)}}function Vve(i,t){if(1&i){const e=$n();ki(),wa(),$(0,"button",23),De("click",function(){return Nt(e),St(ae().lastPage())}),ki(),$(1,"svg",7),Ee(2,"path",24),W()()}if(2&i){const e=ae();U("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),It("aria-label",e._intl.lastPageLabel)}}let wE=(()=>{class i{constructor(){this.changes=new Re,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=e*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Hve={provide:wE,deps:[[new Ds,new Aa,wE]],useFactory:function zve(i){return i||new wE}},Gve=new me("MAT_PAGINATOR_DEFAULT_OPTIONS"),Wve=qM(AQ(class{}));let jve=(()=>{class i extends Wve{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(Ls(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=Ls(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(Ls(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(n=>Ls(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=tn(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=tn(e)}constructor(e,n,r){if(super(),this._intl=e,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new He,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,n)=>e-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(e){Ao()},i.\u0275dir=ve({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[ut]}),i})(),Yve=0,qve=(()=>{class i extends jve{constructor(e,n,r){super(e,n,r),this._pageSizeLabelId="mat-paginator-page-size-label-"+Yve++,this._formFieldAppearance=r?.formFieldAppearance||"outline"}}return i.\u0275fac=function(e){return new(e||i)(E(wE),E(Yn),E(Gve,8))},i.\u0275cmp=st({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[ut],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,n){1&e&&($(0,"div",0)(1,"div",1),fe(2,Bve,5,4,"div",2),$(3,"div",3)(4,"div",4),Oe(5),W(),fe(6,Uve,3,5,"button",5),$(7,"button",6),De("click",function(){return n.previousPage()}),ki(),$(8,"svg",7),Ee(9,"path",8),W()(),wa(),$(10,"button",9),De("click",function(){return n.nextPage()}),ki(),$(11,"svg",7),Ee(12,"path",10),W()(),fe(13,Vve,3,5,"button",11),W()()()),2&e&&(V(2),U("ngIf",!n.hidePageSize),V(3),Vi(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),V(1),U("ngIf",n.showFirstLastButtons),V(1),U("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),It("aria-label",n._intl.previousPageLabel),V(3),U("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),It("aria-label",n._intl.nextPageLabel),V(3),U("ngIf",n.showFirstLastButtons))},dependencies:[Os,hi,ZM,Ba,mb,Um,Bs],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),Xve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i}),i.\u0275inj=Wt({providers:[Hve],imports:[uo,sb,jH,VV]}),i})(),Kve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=en({type:i,bootstrap:[_ge]}),i.\u0275inj=Wt({providers:[xl,JR,{provide:VH,useValue:Uie}],imports:[UB,SK,gve,oH,TJ,vC,bH,Ove,PV,fR,VV,sb,sz,Xve,pse,CH,jH,xV,Ipe,Rme,aH,iR,jie,are,oz]}),i})();eh(wl,[Os,hi,Bs,r0,sE],[co]),eh(GR,[pm,Os,hi,wy,Cl,ac,Ba,m8,Rve,Pve,kve,Bs,qve,mb,Um,r0],[]),eh(MC,[Os,hi,SC,CC,MH,r0],[]),eh(bG,[Os,hi,po,Bs,mb,Um,r0,sE],[co]),UY().bootstrapModule(Kve).catch(i=>console.error(i))},489:function(zo,Ws,_s){var dn;zo=_s.nmd(zo),function(){var z,Qr=200,Vn="Expected a function",qa="__lodash_hash_undefined__",Ci="__lodash_placeholder__",Si=1,vs=2,Ys=4,qs=1,Ho=2,On=1,ur=2,_c=4,pa=8,Ll=16,ma=32,Nl=64,Xa=128,ga=256,vd=512,EE=800,Zg=16,In=1/0,Za=9007199254740991,DE=17976931348623157e292,Lf=NaN,_a=4294967295,Re=_a-1,d0=_a>>>1,u0=[["ary",Xa],["bind",On],["bindKey",ur],["curry",pa],["curryRight",Ll],["flip",vd],["partial",ma],["partialRight",Nl],["rearg",ga]],ni="[object Arguments]",Xn="[object Array]",TE="[object AsyncFunction]",rt="[object Boolean]",vc="[object Date]",IE="[object DOMException]",yd="[object Error]",Nf="[object Function]",h0="[object GeneratorFunction]",$o="[object Map]",Uu="[object Number]",RE="[object Null]",Qa="[object Object]",f0="[object Promise]",kE="[object Proxy]",bd="[object RegExp]",Go="[object Set]",yc="[object String]",Bf="[object Symbol]",Qg="[object Undefined]",xd="[object WeakMap]",Vu="[object ArrayBuffer]",wd="[object DataView]",va="[object Float32Array]",Uf="[object Float64Array]",Jg="[object Int8Array]",Vf="[object Int16Array]",e_="[object Int32Array]",t_="[object Uint8Array]",zu="[object Uint8ClampedArray]",n_="[object Uint16Array]",i_="[object Uint32Array]",OE=/\b__p \+= '';/g,FE=/\b(__p \+=) '' \+/g,LE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,p0=/&(?:amp|lt|gt|quot|#39);/g,m0=/[&<>"']/g,NE=RegExp(p0.source),BE=RegExp(m0.source),tF=/<%-([\s\S]+?)%>/g,r_=/<%([\s\S]+?)%>/g,s_=/<%=([\s\S]+?)%>/g,g0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_0=/^\w*$/,v0=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o_=/[\\^$.*+?()[\]{}|]/g,y0=RegExp(o_.source),zf=/^\s+/,b0=/\s/,x0=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mr=/\{\n\/\* \[wrapped with (.+)\] \*/,UE=/,? & /,VE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zE=/[()=,{}\[\]\/\s]/,HE=/\\(\\)?/g,w0=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,M0=/\w*$/,$E=/^[-+]0x[0-9a-f]+$/i,Ja=/^0b[01]+$/i,GE=/^\[object .+?Constructor\]$/,ir=/^0o[0-7]+$/i,Md=/^(?:0|[1-9]\d*)$/,bo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a_=/($^)/,WE=/['\n\r\u2028\u2029\\]/g,Hu="\\ud800-\\udfff",S0="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",c_="\\u2700-\\u27bf",d_="a-z\\xdf-\\xf6\\xf8-\\xff",u_="A-Z\\xc0-\\xd6\\xd8-\\xde",E0="\\ufe0e\\ufe0f",A0="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Cr="["+Hu+"]",Hf="["+A0+"]",Cd="["+S0+"]",ci="\\d+",h_="["+c_+"]",gi="["+d_+"]",$f="[^"+Hu+A0+ci+c_+d_+u_+"]",f_="\\ud83c[\\udffb-\\udfff]",Ot="[^"+Hu+"]",Gu="(?:\\ud83c[\\udde6-\\uddff]){2}",Wu="[\\ud800-\\udbff][\\udc00-\\udfff]",ju="["+u_+"]",pe="(?:"+gi+"|"+$f+")",Gf="(?:"+ju+"|"+$f+")",Jt="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",Kn="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",D0="(?:"+Cd+"|"+f_+")?",KE="["+E0+"]?",QE=KE+D0+"(?:\\u200d(?:"+[Ot,Gu,Wu].join("|")+")"+KE+D0+")*",JE="(?:"+[h_,Gu,Wu].join("|")+")"+QE,nF="(?:"+[Ot+Cd+"?",Cd,Gu,Wu,Cr].join("|")+")",Bl=RegExp("['\u2019]","g"),iF=RegExp(Cd,"g"),T0=RegExp(f_+"(?="+f_+")|"+nF+QE,"g"),rF=RegExp([ju+"?"+gi+"+"+Jt+"(?="+[Hf,ju,"$"].join("|")+")",Gf+"+"+Kn+"(?="+[Hf,ju+pe,"$"].join("|")+")",ju+"?"+pe+"+"+Jt,ju+"+"+Kn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ci,JE].join("|"),"g"),sF=RegExp("[\\u200d"+Hu+S0+E0+"]"),eA=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,oF=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tA=-1,Ei={};Ei[va]=Ei[Uf]=Ei[Jg]=Ei[Vf]=Ei[e_]=Ei[t_]=Ei[zu]=Ei[n_]=Ei[i_]=!0,Ei[ni]=Ei[Xn]=Ei[Vu]=Ei[rt]=Ei[wd]=Ei[vc]=Ei[yd]=Ei[Nf]=Ei[$o]=Ei[Uu]=Ei[Qa]=Ei[bd]=Ei[Go]=Ei[yc]=Ei[xd]=!1;var Sn={};Sn[ni]=Sn[Xn]=Sn[Vu]=Sn[wd]=Sn[rt]=Sn[vc]=Sn[va]=Sn[Uf]=Sn[Jg]=Sn[Vf]=Sn[e_]=Sn[$o]=Sn[Uu]=Sn[Qa]=Sn[bd]=Sn[Go]=Sn[yc]=Sn[Bf]=Sn[t_]=Sn[zu]=Sn[n_]=Sn[i_]=!0,Sn[yd]=Sn[Nf]=Sn[xd]=!1;var cF={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pe=parseFloat,dF=parseInt,Wt="object"==typeof global&&global&&global.Object===Object&&global,jf="object"==typeof self&&self&&self.Object===Object&&self,Sr=Wt||jf||Function("return this")(),p_=Ws&&!Ws.nodeType&&Ws,qu=p_&&zo&&!zo.nodeType&&zo,m_=qu&&qu.exports===p_,Sd=m_&&Wt.process,ys=function(){try{return qu&&qu.require&&qu.require("util").types||Sd&&Sd.binding&&Sd.binding("util")}catch{}}(),g_=ys&&ys.isArrayBuffer,I0=ys&&ys.isDate,Ft=ys&&ys.isMap,Yf=ys&&ys.isRegExp,R0=ys&&ys.isSet,Ks=ys&&ys.isTypedArray;function bs(X,he,oe){switch(oe.length){case 0:return X.call(he);case 1:return X.call(he,oe[0]);case 2:return X.call(he,oe[0],oe[1]);case 3:return X.call(he,oe[0],oe[1],oe[2])}return X.apply(he,oe)}function uF(X,he,oe,ze){for(var jt=-1,zn=null==X?0:X.length;++jt<zn;){var xt=X[jt];he(ze,xt,oe(xt),X)}return ze}function Rn(X,he){for(var oe=-1,ze=null==X?0:X.length;++oe<ze&&!1!==he(X[oe],oe,X););return X}function hF(X,he){for(var oe=null==X?0:X.length;oe--&&!1!==he(X[oe],oe,X););return X}function nA(X,he){for(var oe=-1,ze=null==X?0:X.length;++oe<ze;)if(!he(X[oe],oe,X))return!1;return!0}function bc(X,he){for(var oe=-1,ze=null==X?0:X.length,jt=0,zn=[];++oe<ze;){var xt=X[oe];he(xt,oe,X)&&(zn[jt++]=xt)}return zn}function Ul(X,he){return!(null==X||!X.length)&&Lt(X,he,0)>-1}function Xu(X,he,oe){for(var ze=-1,jt=null==X?0:X.length;++ze<jt;)if(oe(he,X[ze]))return!0;return!1}function _i(X,he){for(var oe=-1,ze=null==X?0:X.length,jt=Array(ze);++oe<ze;)jt[oe]=he(X[oe],oe,X);return jt}function Vl(X,he){for(var oe=-1,ze=he.length,jt=X.length;++oe<ze;)X[jt+oe]=he[oe];return X}function __(X,he,oe,ze){var jt=-1,zn=null==X?0:X.length;for(ze&&zn&&(oe=X[++jt]);++jt<zn;)oe=he(oe,X[jt],jt,X);return oe}function iA(X,he,oe,ze){var jt=null==X?0:X.length;for(ze&&jt&&(oe=X[--jt]);jt--;)oe=he(oe,X[jt],jt,X);return oe}function qf(X,he){for(var oe=-1,ze=null==X?0:X.length;++oe<ze;)if(he(X[oe],oe,X))return!0;return!1}var Ku=v_("length");function ee(X,he,oe){var ze;return oe(X,function(jt,zn,xt){if(he(jt,zn,xt))return ze=zn,!1}),ze}function Zu(X,he,oe,ze){for(var jt=X.length,zn=oe+(ze?1:-1);ze?zn--:++zn<jt;)if(he(X[zn],zn,X))return zn;return-1}function Lt(X,he,oe){return he==he?function xs(X,he,oe){for(var ze=oe-1,jt=X.length;++ze<jt;)if(X[ze]===he)return ze;return-1}(X,he,oe):Zu(X,Kf,oe)}function Xf(X,he,oe,ze){for(var jt=oe-1,zn=X.length;++jt<zn;)if(ze(X[jt],he))return jt;return-1}function Kf(X){return X!=X}function Ad(X,he){var oe=null==X?0:X.length;return oe?xo(X,he)/oe:Lf}function v_(X){return function(he){return null==he?z:he[X]}}function y_(X){return function(he){return null==X?z:X[he]}}function k0(X,he,oe,ze,jt){return jt(X,function(zn,xt,ai){oe=ze?(ze=!1,zn):he(oe,zn,xt,ai)}),oe}function xo(X,he){for(var oe,ze=-1,jt=X.length;++ze<jt;){var zn=he(X[ze]);zn!==z&&(oe=oe===z?zn:oe+zn)}return oe}function Zs(X,he){for(var oe=-1,ze=Array(X);++oe<X;)ze[oe]=he(oe);return ze}function jn(X){return X&&X.slice(0,x_(X)+1).replace(zf,"")}function Ur(X){return function(he){return X(he)}}function Qu(X,he){return _i(he,function(oe){return X[oe]})}function xc(X,he){return X.has(he)}function b_(X,he){for(var oe=-1,ze=X.length;++oe<ze&&Lt(he,X[oe],0)>-1;);return oe}function ya(X,he){for(var oe=X.length;oe--&&Lt(he,X[oe],0)>-1;);return oe}var sA=y_({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),st=y_({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function eh(X){return"\\"+cF[X]}function Dd(X){return sF.test(X)}function Zf(X){var he=-1,oe=Array(X.size);return X.forEach(function(ze,jt){oe[++he]=[jt,ze]}),oe}function ve(X,he){return function(oe){return X(he(oe))}}function Wi(X,he){for(var oe=-1,ze=X.length,jt=0,zn=[];++oe<ze;){var xt=X[oe];(xt===he||xt===Ci)&&(X[oe]=Ci,zn[jt++]=oe)}return zn}function Gn(X){var he=-1,oe=Array(X.size);return X.forEach(function(ze){oe[++he]=ze}),oe}function hr(X){return Dd(X)?function nl(X){for(var he=T0.lastIndex=0;T0.test(X);)++he;return he}(X):Ku(X)}function wo(X){return Dd(X)?function dt(X){return X.match(T0)||[]}(X):function Ed(X){return X.split("")}(X)}function x_(X){for(var he=X.length;he--&&b0.test(X.charAt(he)););return he}var Qf=y_({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),ws=function X(he){var u,oe=(he=null==he?Sr:ws.defaults(Sr.Object(),he,ws.pick(Sr,oF))).Array,ze=he.Date,jt=he.Error,zn=he.Function,xt=he.Math,ai=he.Object,wc=he.RegExp,P0=he.String,Er=he.TypeError,rr=oe.prototype,Wo=ai.prototype,Qs=he["__core-js_shared__"],zl=zn.prototype.toString,ri=Wo.hasOwnProperty,bi=0,lA=(u=/[^.]+$/.exec(Qs&&Qs.keys&&Qs.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",Id=Wo.toString,O0=zl.call(ai),Jf=Sr._,ep=wc("^"+zl.call(ri).replace(o_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),il=m_?he.Buffer:z,Ui=he.Symbol,w_=he.Uint8Array,Ms=il?il.allocUnsafe:z,Cs=ve(ai.getPrototypeOf,ai),tp=ai.create,Rd=Wo.propertyIsEnumerable,Mc=rr.splice,Mo=Ui?Ui.isConcatSpreadable:z,nh=Ui?Ui.iterator:z,kd=Ui?Ui.toStringTag:z,np=function(){try{var u=Oc(ai,"defineProperty");return u({},"",{}),u}catch{}}(),cA=he.clearTimeout!==Sr.clearTimeout&&he.clearTimeout,fF=ze&&ze.now!==Sr.Date.now&&ze.now,pF=he.setTimeout!==Sr.setTimeout&&he.setTimeout,M_=xt.ceil,C_=xt.floor,F0=ai.getOwnPropertySymbols,mF=il?il.isBuffer:z,dA=he.isFinite,gF=rr.join,_F=ve(ai.keys,ai),fr=xt.max,Jr=xt.min,vF=ze.now,L0=he.parseInt,S_=xt.random,yF=rr.reverse,N0=Oc(he,"DataView"),ip=Oc(he,"Map"),rl=Oc(he,"Promise"),Pd=Oc(he,"Set"),xi=Oc(he,"WeakMap"),Od=Oc(ai,"create"),rp=xi&&new xi,Fd={},B0=Fc(N0),U0=Fc(ip),uA=Fc(rl),E_=Fc(Pd),hA=Fc(xi),es=Ui?Ui.prototype:z,Ld=es?es.valueOf:z,A_=es?es.toString:z;function I(u){if(Pi(u)&&!sn(u)&&!(u instanceof kn)){if(u instanceof Ai)return u;if(ri.call(u,"__wrapped__"))return rs(u)}return new Ai(u)}var Nd=function(){function u(){}return function(f){if(!Mi(f))return{};if(tp)return tp(f);u.prototype=f;var _=new u;return u.prototype=z,_}}();function Cc(){}function Ai(u,f){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!f,this.__index__=0,this.__values__=z}function kn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_a,this.__views__=[]}function Sc(u){var f=-1,_=null==u?0:u.length;for(this.clear();++f<_;){var w=u[f];this.set(w[0],w[1])}}function Pt(u){var f=-1,_=null==u?0:u.length;for(this.clear();++f<_;){var w=u[f];this.set(w[0],w[1])}}function ba(u){var f=-1,_=null==u?0:u.length;for(this.clear();++f<_;){var w=u[f];this.set(w[0],w[1])}}function St(u){var f=-1,_=null==u?0:u.length;for(this.__data__=new ba;++f<_;)this.add(u[f])}function ts(u){var f=this.__data__=new Pt(u);this.size=f.size}function R_(u,f){var _=sn(u),w=!_&&Bc(u),S=!_&&!w&&dl(u),P=!_&&!w&&!S&&Xo(u),G=_||w||S||P,Y=G?Zs(u.length,P0):[],Q=Y.length;for(var _e in u)(f||ri.call(u,_e))&&(!G||!("length"==_e||S&&("offset"==_e||"parent"==_e)||P&&("buffer"==_e||"byteLength"==_e||"byteOffset"==_e)||cl(_e,Q)))&&Y.push(_e);return Y}function zr(u){var f=u.length;return f?u[ah(0,f-1)]:z}function sl(u,f){return Dp(to(u),Gl(f,0,u.length))}function G0(u){return Dp(to(u))}function $l(u,f,_){(_!==z&&!qo(u[f],_)||_===z&&!(f in u))&&jo(u,f,_)}function Js(u,f,_){var w=u[f];(!ri.call(u,f)||!qo(w,_)||_===z&&!(f in u))&&jo(u,f,_)}function op(u,f){for(var _=u.length;_--;)if(qo(u[_][0],f))return _;return-1}function W0(u,f,_,w){return ol(u,function(S,P,G){f(w,S,_(S),G)}),w}function j0(u,f){return u&&di(f,pr(f),u)}function jo(u,f,_){"__proto__"==f&&np?np(u,f,{configurable:!0,enumerable:!0,value:_,writable:!0}):u[f]=_}function ih(u,f){for(var _=-1,w=f.length,S=oe(w),P=null==u;++_<w;)S[_]=P?z:Uv(u,f[_]);return S}function Gl(u,f,_){return u==u&&(_!==z&&(u=u<=_?u:_),f!==z&&(u=u>=f?u:f)),u}function Es(u,f,_,w,S,P){var G,Y=f&Si,Q=f&vs,_e=f&Ys;if(_&&(G=S?_(u,w,S,P):_(u)),G!==z)return G;if(!Mi(u))return u;var ye=sn(u);if(ye){if(G=function px(u){var f=u.length,_=new u.constructor(f);return f&&"string"==typeof u[0]&&ri.call(u,"index")&&(_.index=u.index,_.input=u.input),_}(u),!Y)return to(u,G)}else{var be=Hr(u),Qe=be==Nf||be==h0;if(dl(u))return me(u,Y);if(be==Qa||be==ni||Qe&&!S){if(G=Q||Qe?{}:LA(u),!Y)return Q?function uh(u,f){return di(u,ux(u),f)}(u,function bA(u,f){return u&&di(f,Rs(f),u)}(G,u)):function $_(u,f){return di(u,Q_(u),f)}(u,j0(G,u))}else{if(!Sn[be])return S?u:{};G=function mx(u,f,_){var w=u.constructor;switch(f){case Vu:return ox(u);case rt:case vc:return new w(+u);case wd:return function SF(u,f){var _=f?ox(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.byteLength)}(u,_);case va:case Uf:case Jg:case Vf:case e_:case t_:case zu:case n_:case i_:return IA(u,_);case $o:return new w;case Uu:case yc:return new w(u);case bd:return function EF(u){var f=new u.constructor(u.source,M0.exec(u));return f.lastIndex=u.lastIndex,f}(u);case Go:return new w;case Bf:return function AF(u){return Ld?ai(Ld.call(u)):{}}(u)}}(u,be,Y)}}P||(P=new ts);var bt=P.get(u);if(bt)return bt;P.set(u,G),rw(u)?u.forEach(function(Ht){G.add(Es(Ht,f,_,Ht,u,P))}):Iv(u)&&u.forEach(function(Ht,En){G.set(En,Es(Ht,f,_,En,u,P))});var gn=ye?z:(_e?Q?X_:wp:Q?Rs:pr)(u);return Rn(gn||u,function(Ht,En){gn&&(Ht=u[En=Ht]),Js(G,En,Es(Ht,f,_,En,u,P))}),G}function k_(u,f,_){var w=_.length;if(null==u)return!w;for(u=ai(u);w--;){var S=_[w],G=u[S];if(G===z&&!(S in u)||!(0,f[S])(G))return!1}return!0}function ap(u,f,_){if("function"!=typeof u)throw new Er(Vn);return mh(function(){u.apply(z,_)},f)}function Ud(u,f,_,w){var S=-1,P=Ul,G=!0,Y=u.length,Q=[],_e=f.length;if(!Y)return Q;_&&(f=_i(f,Ur(_))),w?(P=Xu,G=!1):f.length>=Qr&&(P=xc,G=!1,f=new St(f));e:for(;++S<Y;){var ye=u[S],be=null==_?ye:_(ye);if(ye=w||0!==ye?ye:0,G&&be==be){for(var Qe=_e;Qe--;)if(f[Qe]===be)continue e;Q.push(ye)}else P(f,be,w)||Q.push(ye)}return Q}I.templateSettings={escape:tF,evaluate:r_,interpolate:s_,variable:"",imports:{_:I}},(I.prototype=Cc.prototype).constructor=I,(Ai.prototype=Nd(Cc.prototype)).constructor=Ai,(kn.prototype=Nd(Cc.prototype)).constructor=kn,Sc.prototype.clear=function sp(){this.__data__=Od?Od(null):{},this.size=0},Sc.prototype.delete=function fA(u){var f=this.has(u)&&delete this.__data__[u];return this.size-=f?1:0,f},Sc.prototype.get=function Hl(u){var f=this.__data__;if(Od){var _=f[u];return _===qa?z:_}return ri.call(f,u)?f[u]:z},Sc.prototype.has=function z0(u){var f=this.__data__;return Od?f[u]!==z:ri.call(f,u)},Sc.prototype.set=function D_(u,f){var _=this.__data__;return this.size+=this.has(u)?0:1,_[u]=Od&&f===z?qa:f,this},Pt.prototype.clear=function H0(){this.__data__=[],this.size=0},Pt.prototype.delete=function bF(u){var f=this.__data__,_=op(f,u);return!(_<0||(_==f.length-1?f.pop():Mc.call(f,_,1),--this.size,0))},Pt.prototype.get=function pA(u){var f=this.__data__,_=op(f,u);return _<0?z:f[_][1]},Pt.prototype.has=function mA(u){return op(this.__data__,u)>-1},Pt.prototype.set=function gA(u,f){var _=this.__data__,w=op(_,u);return w<0?(++this.size,_.push([u,f])):_[w][1]=f,this},ba.prototype.clear=function _A(){this.size=0,this.__data__={hash:new Sc,map:new(ip||Pt),string:new Sc}},ba.prototype.delete=function vA(u){var f=Z_(this,u).delete(u);return this.size-=f?1:0,f},ba.prototype.get=function Se(u){return Z_(this,u).get(u)},ba.prototype.has=function Hn(u){return Z_(this,u).has(u)},ba.prototype.set=function Nt(u,f){var _=Z_(this,u),w=_.size;return _.set(u,f),this.size+=_.size==w?0:1,this},St.prototype.add=St.prototype.push=function Ar(u){return this.__data__.set(u,qa),this},St.prototype.has=function $0(u){return this.__data__.has(u)},ts.prototype.clear=function xa(){this.__data__=new Pt,this.size=0},ts.prototype.delete=function T_(u){var f=this.__data__,_=f.delete(u);return this.size=f.size,_},ts.prototype.get=function I_(u){return this.__data__.get(u)},ts.prototype.has=function yA(u){return this.__data__.has(u)},ts.prototype.set=function xF(u,f){var _=this.__data__;if(_ instanceof Pt){var w=_.__data__;if(!ip||w.length<Qr-1)return w.push([u,f]),this.size=++_.size,this;_=this.__data__=new ba(w)}return _.set(u,f),this.size=_.size,this};var ol=Yl(ki),P_=Yl(O_,!0);function Y0(u,f){var _=!0;return ol(u,function(w,S,P){return _=!!f(w,S,P)}),_}function Vd(u,f,_){for(var w=-1,S=u.length;++w<S;){var P=u[w],G=f(P);if(null!=G&&(Y===z?G==G&&!Is(G):_(G,Y)))var Y=G,Q=P}return Q}function q0(u,f){var _=[];return ol(u,function(w,S,P){f(w,S,P)&&_.push(w)}),_}function Zn(u,f,_,w,S){var P=-1,G=u.length;for(_||(_=NA),S||(S=[]);++P<G;){var Y=u[P];f>0&&_(Y)?f>1?Zn(Y,f-1,_,w,S):Vl(S,Y):w||(S[S.length]=Y)}return S}var al=G_(),Di=G_(!0);function ki(u,f){return u&&al(u,f,pr)}function O_(u,f){return u&&Di(u,f,pr)}function wa(u,f){return bc(f,function(_){return Xl(u[_])})}function Ec(u,f){for(var _=0,w=(f=Ea(f,u)).length;null!=u&&_<w;)u=u[Yo(f[_++])];return _&&_==w?u:z}function X0(u,f,_){var w=f(u);return sn(u)?w:Vl(w,_(u))}function ns(u){return null==u?u===z?Qg:RE:kd&&kd in ai(u)?function TF(u){var f=ri.call(u,kd),_=u[kd];try{u[kd]=z;var w=!0}catch{}var S=Id.call(u);return w&&(f?u[kd]=_:delete u[kd]),S}(u):function vx(u){return Id.call(u)}(u)}function zd(u,f){return u>f}function lp(u,f){return null!=u&&ri.call(u,f)}function cp(u,f){return null!=u&&f in ai(u)}function dp(u,f,_){for(var w=_?Xu:Ul,S=u[0].length,P=u.length,G=P,Y=oe(P),Q=1/0,_e=[];G--;){var ye=u[G];G&&f&&(ye=_i(ye,Ur(f))),Q=Jr(ye.length,Q),Y[G]=!_&&(f||S>=120&&ye.length>=120)?new St(G&&ye):z}ye=u[0];var be=-1,Qe=Y[0];e:for(;++be<S&&_e.length<Q;){var bt=ye[be],zt=f?f(bt):bt;if(bt=_||0!==bt?bt:0,!(Qe?xc(Qe,zt):w(_e,zt,_))){for(G=P;--G;){var gn=Y[G];if(!(gn?xc(gn,zt):w(u[G],zt,_)))continue e}Qe&&Qe.push(zt),_e.push(bt)}}return _e}function Ma(u,f,_){var w=null==(u=tv(u,f=Ea(f,u)))?u:u[Yo(Ir(f))];return null==w?z:bs(w,u,_)}function Hd(u){return Pi(u)&&ns(u)==ni}function Ac(u,f,_,w,S){return u===f||(null==u||null==f||!Pi(u)&&!Pi(f)?u!=u&&f!=f:function MF(u,f,_,w,S,P){var G=sn(u),Y=sn(f),Q=G?Xn:Hr(u),_e=Y?Xn:Hr(f),ye=(Q=Q==ni?Qa:Q)==Qa,be=(_e=_e==ni?Qa:_e)==Qa,Qe=Q==_e;if(Qe&&dl(u)){if(!dl(f))return!1;G=!0,ye=!1}if(Qe&&!ye)return P||(P=new ts),G||Xo(u)?cx(u,f,_,w,S,P):function dx(u,f,_,w,S,P,G){switch(_){case wd:if(u.byteLength!=f.byteLength||u.byteOffset!=f.byteOffset)return!1;u=u.buffer,f=f.buffer;case Vu:return!(u.byteLength!=f.byteLength||!P(new w_(u),new w_(f)));case rt:case vc:case Uu:return qo(+u,+f);case yd:return u.name==f.name&&u.message==f.message;case bd:case yc:return u==f+"";case $o:var Y=Zf;case Go:if(Y||(Y=Gn),u.size!=f.size&&!(w&qs))return!1;var _e=G.get(u);if(_e)return _e==f;w|=Ho,G.set(u,f);var ye=cx(Y(u),Y(f),w,S,P,G);return G.delete(u),ye;case Bf:if(Ld)return Ld.call(u)==Ld.call(f)}return!1}(u,f,Q,_,w,S,P);if(!(_&qs)){var bt=ye&&ri.call(u,"__wrapped__"),zt=be&&ri.call(f,"__wrapped__");if(bt||zt){var gn=bt?u.value():u,Ht=zt?f.value():f;return P||(P=new ts),S(gn,Ht,_,w,P)}}return!!Qe&&(P||(P=new ts),function fh(u,f,_,w,S,P){var G=_&qs,Y=wp(u),Q=Y.length;if(Q!=wp(f).length&&!G)return!1;for(var be=Q;be--;){var Qe=Y[be];if(!(G?Qe in f:ri.call(f,Qe)))return!1}var bt=P.get(u),zt=P.get(f);if(bt&&zt)return bt==f&&zt==u;var gn=!0;P.set(u,f),P.set(f,u);for(var Ht=G;++be<Q;){var En=u[Qe=Y[be]],Ln=f[Qe];if(w)var os=G?w(Ln,En,Qe,f,u,P):w(En,Ln,Qe,u,f,P);if(!(os===z?En===Ln||S(En,Ln,_,w,P):os)){gn=!1;break}Ht||(Ht="constructor"==Qe)}if(gn&&!Ht){var as=u.constructor,oo=f.constructor;as!=oo&&"constructor"in u&&"constructor"in f&&!("function"==typeof as&&as instanceof as&&"function"==typeof oo&&oo instanceof oo)&&(gn=!1)}return P.delete(u),P.delete(f),gn}(u,f,_,w,S,P))}(u,f,_,w,Ac,S))}function L_(u,f,_,w){var S=_.length,P=S,G=!w;if(null==u)return!P;for(u=ai(u);S--;){var Y=_[S];if(G&&Y[2]?Y[1]!==u[Y[0]]:!(Y[0]in u))return!1}for(;++S<P;){var Q=(Y=_[S])[0],_e=u[Q],ye=Y[1];if(G&&Y[2]){if(_e===z&&!(Q in u))return!1}else{var be=new ts;if(w)var Qe=w(_e,ye,Q,u,f,be);if(!(Qe===z?Ac(ye,_e,qs|Ho,w,be):Qe))return!1}}return!0}function EA(u){return!(!Mi(u)||function kF(u){return!!lA&&lA in u}(u))&&(Xl(u)?ep:GE).test(Fc(u))}function B_(u){return"function"==typeof u?u:null==u?ss:"object"==typeof u?sn(u)?sh(u[0],u[1]):Q0(u):wh(u)}function Dc(u){if(!Sp(u))return _F(u);var f=[];for(var _ in ai(u))ri.call(u,_)&&"constructor"!=_&&f.push(_);return f}function up(u,f){return u<f}function rh(u,f){var _=-1,w=io(u)?oe(u.length):[];return ol(u,function(S,P,G){w[++_]=f(S,P,G)}),w}function Q0(u){var f=Mp(u);return 1==f.length&&f[0][2]?UA(f[0][0],f[0][1]):function(_){return _===u||L_(_,u,f)}}function sh(u,f){return gx(u)&&BA(f)?UA(Yo(u),f):function(_){var w=Uv(_,u);return w===z&&w===f?Vv(_,u):Ac(f,w,qs|Ho)}}function $d(u,f,_,w,S){u!==f&&al(f,function(P,G){if(S||(S=new ts),Mi(P))!function hp(u,f,_,w,S,P,G){var Y=nv(u,_),Q=nv(f,_),_e=G.get(Q);if(_e)$l(u,_,_e);else{var ye=P?P(Y,Q,_+"",u,f,G):z,be=ye===z;if(be){var Qe=sn(Q),bt=!Qe&&dl(Q),zt=!Qe&&!bt&&Xo(Q);ye=Q,Qe||bt||zt?sn(Y)?ye=Y:wi(Y)?ye=to(Y):bt?(be=!1,ye=me(Q,!0)):zt?(be=!1,ye=IA(Q,!0)):ye=[]:ro(Q)||Bc(Q)?(ye=Y,Bc(Y)?ye=Kl(Y):(!Mi(Y)||Xl(Y))&&(ye=LA(Q))):be=!1}be&&(G.set(Q,ye),S(ye,Q,w,P,G),G.delete(Q)),$l(u,_,ye)}}(u,f,G,_,$d,w,S);else{var Y=w?w(nv(u,G),P,G+"",u,f,S):z;Y===z&&(Y=P),$l(u,G,Y)}},Rs)}function AA(u,f){var _=u.length;if(_)return cl(f+=f<0?_:0,_)?u[f]:z}function U_(u,f,_){f=f.length?_i(f,function(P){return sn(P)?function(G){return Ec(G,1===P.length?P[0]:P)}:P}):[ss];var w=-1;return f=_i(f,Ur(Bt())),function el(X,he){var oe=X.length;for(X.sort(he);oe--;)X[oe]=X[oe].value;return X}(rh(u,function(P,G,Y){return{criteria:_i(f,function(_e){return _e(P)}),index:++w,value:P}}),function(P,G){return function DF(u,f,_){for(var w=-1,S=u.criteria,P=f.criteria,G=S.length,Y=_.length;++w<G;){var Q=RA(S[w],P[w]);if(Q)return w>=Y?Q:Q*("desc"==_[w]?-1:1)}return u.index-f.index}(P,G,_)})}function ex(u,f,_){for(var w=-1,S=f.length,P={};++w<S;){var G=f[w],Y=Ec(u,G);_(Y,G)&&Gd(P,Ea(G,u),Y)}return P}function V_(u,f,_,w){var S=w?Xf:Lt,P=-1,G=f.length,Y=u;for(u===f&&(f=to(f)),_&&(Y=_i(u,Ur(_)));++P<G;)for(var Q=0,_e=f[P],ye=_?_(_e):_e;(Q=S(Y,ye,Q,w))>-1;)Y!==u&&Mc.call(Y,Q,1),Mc.call(u,Q,1);return u}function oh(u,f){for(var _=u?f.length:0,w=_-1;_--;){var S=f[_];if(_==w||S!==P){var P=S;cl(S)?Mc.call(u,S,1):ch(u,S)}}return u}function ah(u,f){return u+C_(S_()*(f-u+1))}function lh(u,f){var _="";if(!u||f<1||f>Za)return _;do{f%2&&(_+=u),(f=C_(f/2))&&(u+=u)}while(f);return _}function mn(u,f){return Ep(ev(u,f,ss),u+"")}function DA(u){return zr(zc(u))}function nx(u,f){var _=zc(u);return Dp(_,Gl(f,0,_.length))}function Gd(u,f,_,w){if(!Mi(u))return u;for(var S=-1,P=(f=Ea(f,u)).length,G=P-1,Y=u;null!=Y&&++S<P;){var Q=Yo(f[S]),_e=_;if("__proto__"===Q||"constructor"===Q||"prototype"===Q)return u;if(S!=G){var ye=Y[Q];(_e=w?w(ye,Q,Y):z)===z&&(_e=Mi(ye)?ye:cl(f[S+1])?[]:{})}Js(Y,Q,_e),Y=Y[Q]}return u}var z_=rp?function(u,f){return rp.set(u,f),u}:ss,ix=np?function(u,f){return np(u,"toString",{configurable:!0,enumerable:!1,value:qv(f),writable:!0})}:ss;function TA(u){return Dp(zc(u))}function is(u,f,_){var w=-1,S=u.length;f<0&&(f=-f>S?0:S+f),(_=_>S?S:_)<0&&(_+=S),S=f>_?0:_-f>>>0,f>>>=0;for(var P=oe(S);++w<S;)P[w]=u[w+f];return P}function Tc(u,f){var _;return ol(u,function(w,S,P){return!(_=f(w,S,P))}),!!_}function fp(u,f,_){var w=0,S=null==u?w:u.length;if("number"==typeof f&&f==f&&S<=d0){for(;w<S;){var P=w+S>>>1,G=u[P];null!==G&&!Is(G)&&(_?G<=f:G<f)?w=P+1:S=P}return S}return pp(u,f,ss,_)}function pp(u,f,_,w){var S=0,P=null==u?0:u.length;if(0===P)return 0;for(var G=(f=_(f))!=f,Y=null===f,Q=Is(f),_e=f===z;S<P;){var ye=C_((S+P)/2),be=_(u[ye]),Qe=be!==z,bt=null===be,zt=be==be,gn=Is(be);if(G)var Ht=w||zt;else Ht=_e?zt&&(w||Qe):Y?zt&&Qe&&(w||!bt):Q?zt&&Qe&&!bt&&(w||!gn):!bt&&!gn&&(w?be<=f:be<f);Ht?S=ye+1:P=ye}return Jr(P,Re)}function H_(u,f){for(var _=-1,w=u.length,S=0,P=[];++_<w;){var G=u[_],Y=f?f(G):G;if(!_||!qo(Y,Q)){var Q=Y;P[S++]=0===G?0:G}}return P}function Ic(u){return"number"==typeof u?u:Is(u)?Lf:+u}function eo(u){if("string"==typeof u)return u;if(sn(u))return _i(u,eo)+"";if(Is(u))return A_?A_.call(u):"";var f=u+"";return"0"==f&&1/u==-In?"-0":f}function si(u,f,_){var w=-1,S=Ul,P=u.length,G=!0,Y=[],Q=Y;if(_)G=!1,S=Xu;else if(P>=Qr){var _e=f?null:Y_(u);if(_e)return Gn(_e);G=!1,S=xc,Q=new St}else Q=f?[]:Y;e:for(;++w<P;){var ye=u[w],be=f?f(ye):ye;if(ye=_||0!==ye?ye:0,G&&be==be){for(var Qe=Q.length;Qe--;)if(Q[Qe]===be)continue e;f&&Q.push(be),Y.push(ye)}else S(Q,be,_)||(Q!==Y&&Q.push(be),Y.push(ye))}return Y}function ch(u,f){return null==(u=tv(u,f=Ea(f,u)))||delete u[Yo(Ir(f))]}function rx(u,f,_,w){return Gd(u,f,_(Ec(u,f)),w)}function dh(u,f,_,w){for(var S=u.length,P=w?S:-1;(w?P--:++P<S)&&f(u[P],P,u););return _?is(u,w?0:P,w?P+1:S):is(u,w?P+1:0,w?S:P)}function Sa(u,f){var _=u;return _ instanceof kn&&(_=_.value()),__(f,function(w,S){return S.func.apply(S.thisArg,Vl([w],S.args))},_)}function Wl(u,f,_){var w=u.length;if(w<2)return w?si(u[0]):[];for(var S=-1,P=oe(w);++S<w;)for(var G=u[S],Y=-1;++Y<w;)Y!=S&&(P[S]=Ud(P[S]||G,u[Y],f,_));return si(Zn(P,1),f,_)}function Rc(u,f,_){for(var w=-1,S=u.length,P=f.length,G={};++w<S;)_(G,u[w],w<P?f[w]:z);return G}function jl(u){return wi(u)?u:[]}function mp(u){return"function"==typeof u?u:ss}function Ea(u,f){return sn(u)?u:gx(u,f)?[u]:xx(Fn(u))}var Wd=mn;function kc(u,f,_){var w=u.length;return _=_===z?w:_,!f&&_>=w?u:is(u,f,_)}var sx=cA||function(u){return Sr.clearTimeout(u)};function me(u,f){if(f)return u.slice();var _=u.length,w=Ms?Ms(_):new u.constructor(_);return u.copy(w),w}function ox(u){var f=new u.constructor(u.byteLength);return new w_(f).set(new w_(u)),f}function IA(u,f){var _=f?ox(u.buffer):u.buffer;return new u.constructor(_,u.byteOffset,u.length)}function RA(u,f){if(u!==f){var _=u!==z,w=null===u,S=u==u,P=Is(u),G=f!==z,Y=null===f,Q=f==f,_e=Is(f);if(!Y&&!_e&&!P&&u>f||P&&G&&Q&&!Y&&!_e||w&&G&&Q||!_&&Q||!S)return 1;if(!w&&!P&&!_e&&u<f||_e&&_&&S&&!w&&!P||Y&&_&&S||!G&&S||!Q)return-1}return 0}function jd(u,f,_,w){for(var S=-1,P=u.length,G=_.length,Y=-1,Q=f.length,_e=fr(P-G,0),ye=oe(Q+_e),be=!w;++Y<Q;)ye[Y]=f[Y];for(;++S<G;)(be||S<P)&&(ye[_[S]]=u[S]);for(;_e--;)ye[Y++]=u[S++];return ye}function kA(u,f,_,w){for(var S=-1,P=u.length,G=-1,Y=_.length,Q=-1,_e=f.length,ye=fr(P-Y,0),be=oe(ye+_e),Qe=!w;++S<ye;)be[S]=u[S];for(var bt=S;++Q<_e;)be[bt+Q]=f[Q];for(;++G<Y;)(Qe||S<P)&&(be[bt+_[G]]=u[S++]);return be}function to(u,f){var _=-1,w=u.length;for(f||(f=oe(w));++_<w;)f[_]=u[_];return f}function di(u,f,_,w){var S=!_;_||(_={});for(var P=-1,G=f.length;++P<G;){var Y=f[P],Q=w?w(_[Y],u[Y],Y,_,u):z;Q===z&&(Q=u[Y]),S?jo(_,Y,Q):Js(_,Y,Q)}return _}function gp(u,f){return function(_,w){var S=sn(_)?uF:W0,P=f?f():{};return S(_,u,Bt(w,2),P)}}function Dr(u){return mn(function(f,_){var w=-1,S=_.length,P=S>1?_[S-1]:z,G=S>2?_[2]:z;for(P=u.length>3&&"function"==typeof P?(S--,P):z,G&&Tr(_[0],_[1],G)&&(P=S<3?z:P,S=1),f=ai(f);++w<S;){var Y=_[w];Y&&u(f,Y,w,P)}return f})}function Yl(u,f){return function(_,w){if(null==_)return _;if(!io(_))return u(_,w);for(var S=_.length,P=f?S:-1,G=ai(_);(f?P--:++P<S)&&!1!==w(G[P],P,G););return _}}function G_(u){return function(f,_,w){for(var S=-1,P=ai(f),G=w(f),Y=G.length;Y--;){var Q=G[u?Y:++S];if(!1===_(P[Q],Q,P))break}return f}}function Yd(u){return function(f){var _=Dd(f=Fn(f))?wo(f):z,w=_?_[0]:f.charAt(0),S=_?kc(_,1).join(""):f.slice(1);return w[u]()+S}}function qd(u){return function(f){return __(gw(Gv(f).replace(Bl,"")),u,"")}}function vp(u){return function(){var f=arguments;switch(f.length){case 0:return new u;case 1:return new u(f[0]);case 2:return new u(f[0],f[1]);case 3:return new u(f[0],f[1],f[2]);case 4:return new u(f[0],f[1],f[2],f[3]);case 5:return new u(f[0],f[1],f[2],f[3],f[4]);case 6:return new u(f[0],f[1],f[2],f[3],f[4],f[5]);case 7:return new u(f[0],f[1],f[2],f[3],f[4],f[5],f[6])}var _=Nd(u.prototype),w=u.apply(_,f);return Mi(w)?w:_}}function OA(u){return function(f,_,w){var S=ai(f);if(!io(f)){var P=Bt(_,3);f=pr(f),_=function(Y){return P(S[Y],Y,S)}}var G=u(f,_,w);return G>-1?S[P?f[G]:G]:z}}function As(u){return So(function(f){var _=f.length,w=_,S=Ai.prototype.thru;for(u&&f.reverse();w--;){var P=f[w];if("function"!=typeof P)throw new Er(Vn);if(S&&!G&&"wrapper"==ll(P))var G=new Ai([],!0)}for(w=G?w:_;++w<_;){var Y=ll(P=f[w]),Q="wrapper"==Y?K_(P):z;G=Q&&ph(Q[0])&&Q[1]==(Xa|pa|ma|ga)&&!Q[4].length&&1==Q[9]?G[ll(Q[0])].apply(G,Q[3]):1==P.length&&ph(P)?G[Y]():G.thru(P)}return function(){var _e=arguments,ye=_e[0];if(G&&1==_e.length&&sn(ye))return G.plant(ye).value();for(var be=0,Qe=_?f[be].apply(this,_e):ye;++be<_;)Qe=f[be].call(this,Qe);return Qe}})}function Xd(u,f,_,w,S,P,G,Y,Q,_e){var ye=f&Xa,be=f&On,Qe=f&ur,bt=f&(pa|Ll),zt=f&vd,gn=Qe?z:vp(u);return function Ht(){for(var En=arguments.length,Ln=oe(En),os=En;os--;)Ln[os]=arguments[os];if(bt)var as=Da(Ht),oo=function Ju(X,he){for(var oe=X.length,ze=0;oe--;)X[oe]===he&&++ze;return ze}(Ln,as);if(w&&(Ln=jd(Ln,w,S,bt)),P&&(Ln=kA(Ln,P,G,bt)),En-=oo,bt&&En<_e){var Ti=Wi(Ln,as);return lx(u,f,Xd,Ht.placeholder,_,Ln,Ti,Y,Q,_e-En)}var ks=be?_:this,Do=Qe?ks[u]:u;return En=Ln.length,Y?Ln=function Ts(u,f){for(var _=u.length,w=Jr(f.length,_),S=to(u);w--;){var P=f[w];u[w]=cl(P,_)?S[P]:z}return u}(Ln,Y):zt&&En>1&&Ln.reverse(),ye&&Q<En&&(Ln.length=Q),this&&this!==Sr&&this instanceof Ht&&(Do=gn||vp(Do)),Do.apply(ks,Ln)}}function Pc(u,f){return function(_,w){return function MA(u,f,_,w){return ki(u,function(S,P,G){f(w,_(S),P,G)}),w}(_,u,f(w),{})}}function W_(u,f){return function(_,w){var S;if(_===z&&w===z)return f;if(_!==z&&(S=_),w!==z){if(S===z)return w;"string"==typeof _||"string"==typeof w?(_=eo(_),w=eo(w)):(_=Ic(_),w=Ic(w)),S=u(_,w)}return S}}function yp(u){return So(function(f){return f=_i(f,Ur(Bt())),mn(function(_){var w=this;return u(f,function(S){return bs(S,w,_)})})})}function bp(u,f){var _=(f=f===z?" ":eo(f)).length;if(_<2)return _?lh(f,u):f;var w=lh(f,M_(u/hr(f)));return Dd(f)?kc(wo(w),0,u).join(""):w.slice(0,u)}function ax(u){return function(f,_,w){return w&&"number"!=typeof w&&Tr(f,_,w)&&(_=w=z),f=ul(f),_===z?(_=f,f=0):_=ul(_),function tx(u,f,_,w){for(var S=-1,P=fr(M_((f-u)/(_||1)),0),G=oe(P);P--;)G[w?P:++S]=u,u+=_;return G}(f,_,w=w===z?f<_?1:-1:ul(w),u)}}function xp(u){return function(f,_){return"string"==typeof f&&"string"==typeof _||(f=Eo(f),_=Eo(_)),u(f,_)}}function lx(u,f,_,w,S,P,G,Y,Q,_e){var ye=f&pa;f|=ye?ma:Nl,(f&=~(ye?Nl:ma))&_c||(f&=~(On|ur));var gn=[u,f,S,ye?P:z,ye?G:z,ye?z:P,ye?z:G,Y,Q,_e],Ht=_.apply(z,gn);return ph(u)&&yx(Ht,gn),Ht.placeholder=w,Ap(Ht,u,f)}function j_(u){var f=xt[u];return function(_,w){if(_=Eo(_),(w=null==w?0:Jr(un(w),292))&&dA(_)){var S=(Fn(_)+"e").split("e");return+((S=(Fn(f(S[0]+"e"+(+S[1]+w)))+"e").split("e"))[0]+"e"+(+S[1]-w))}return f(_)}}var Y_=Pd&&1/Gn(new Pd([,-0]))[1]==In?function(u){return new Pd(u)}:Ao;function hh(u){return function(f){var _=Hr(f);return _==$o?Zf(f):_==Go?function Vr(X){var he=-1,oe=Array(X.size);return X.forEach(function(ze){oe[++he]=[ze,ze]}),oe}(f):function tl(X,he){return _i(he,function(oe){return[oe,X[oe]]})}(f,u(f))}}function Co(u,f,_,w,S,P,G,Y){var Q=f&ur;if(!Q&&"function"!=typeof u)throw new Er(Vn);var _e=w?w.length:0;if(_e||(f&=~(ma|Nl),w=S=z),G=G===z?G:fr(un(G),0),Y=Y===z?Y:un(Y),_e-=S?S.length:0,f&Nl){var ye=w,be=S;w=S=z}var Qe=Q?z:K_(u),bt=[u,f,_,w,S,ye,be,P,G,Y];if(Qe&&function _x(u,f){var _=u[1],w=f[1],S=_|w;if(!(S<(On|ur|Xa))&&!(w==Xa&&_==pa||w==Xa&&_==ga&&u[7].length<=f[8]||w==(Xa|ga)&&f[7].length<=f[8]&&_==pa))return u;w&On&&(u[2]=f[2],S|=_&On?0:_c);var Y=f[3];if(Y){var Q=u[3];u[3]=Q?jd(Q,Y,f[4]):Y,u[4]=Q?Wi(u[3],Ci):f[4]}(Y=f[5])&&(u[5]=(Q=u[5])?kA(Q,Y,f[6]):Y,u[6]=Q?Wi(u[5],Ci):f[6]),(Y=f[7])&&(u[7]=Y),w&Xa&&(u[8]=null==u[8]?f[8]:Jr(u[8],f[8])),null==u[9]&&(u[9]=f[9]),u[0]=f[0],u[1]=S}(bt,Qe),u=bt[0],f=bt[1],_=bt[2],w=bt[3],S=bt[4],!(Y=bt[9]=bt[9]===z?Q?0:u.length:fr(bt[9]-_e,0))&&f&(pa|Ll)&&(f&=~(pa|Ll)),f&&f!=On)zt=f==pa||f==Ll?function PA(u,f,_){var w=vp(u);return function S(){for(var P=arguments.length,G=oe(P),Y=P,Q=Da(S);Y--;)G[Y]=arguments[Y];var _e=P<3&&G[0]!==Q&&G[P-1]!==Q?[]:Wi(G,Q);return(P-=_e.length)<_?lx(u,f,Xd,S.placeholder,z,G,_e,z,z,_-P):bs(this&&this!==Sr&&this instanceof S?w:u,this,G)}}(u,f,Y):f!=ma&&f!=(On|ma)||S.length?Xd.apply(z,bt):function FA(u,f,_,w){var S=f&On,P=vp(u);return function G(){for(var Y=-1,Q=arguments.length,_e=-1,ye=w.length,be=oe(ye+Q),Qe=this&&this!==Sr&&this instanceof G?P:u;++_e<ye;)be[_e]=w[_e];for(;Q--;)be[_e++]=arguments[++Y];return bs(Qe,S?_:this,be)}}(u,f,_,w);else var zt=function _p(u,f,_){var w=f&On,S=vp(u);return function P(){return(this&&this!==Sr&&this instanceof P?S:u).apply(w?_:this,arguments)}}(u,f,_);return Ap((Qe?z_:yx)(zt,bt),u,f)}function Ds(u,f,_,w){return u===z||qo(u,Wo[_])&&!ri.call(w,_)?f:u}function q_(u,f,_,w,S,P){return Mi(u)&&Mi(f)&&(P.set(f,u),$d(u,f,z,q_,P),P.delete(f)),u}function Aa(u){return ro(u)?z:u}function cx(u,f,_,w,S,P){var G=_&qs,Y=u.length,Q=f.length;if(Y!=Q&&!(G&&Q>Y))return!1;var _e=P.get(u),ye=P.get(f);if(_e&&ye)return _e==f&&ye==u;var be=-1,Qe=!0,bt=_&Ho?new St:z;for(P.set(u,f),P.set(f,u);++be<Y;){var zt=u[be],gn=f[be];if(w)var Ht=G?w(gn,zt,be,f,u,P):w(zt,gn,be,u,f,P);if(Ht!==z){if(Ht)continue;Qe=!1;break}if(bt){if(!qf(f,function(En,Ln){if(!xc(bt,Ln)&&(zt===En||S(zt,En,_,w,P)))return bt.push(Ln)})){Qe=!1;break}}else if(zt!==gn&&!S(zt,gn,_,w,P)){Qe=!1;break}}return P.delete(u),P.delete(f),Qe}function So(u){return Ep(ev(u,z,Dx),u+"")}function wp(u){return X0(u,pr,Q_)}function X_(u){return X0(u,Rs,ux)}var K_=rp?function(u){return rp.get(u)}:Ao;function ll(u){for(var f=u.name+"",_=Fd[f],w=ri.call(Fd,f)?_.length:0;w--;){var S=_[w],P=S.func;if(null==P||P==u)return S.name}return f}function Da(u){return(ri.call(I,"placeholder")?I:u).placeholder}function Bt(){var u=I.iteratee||Yp;return u=u===Yp?B_:u,arguments.length?u(arguments[0],arguments[1]):u}function Z_(u,f){var _=u.__data__;return function RF(u){var f=typeof u;return"string"==f||"number"==f||"symbol"==f||"boolean"==f?"__proto__"!==u:null===u}(f)?_["string"==typeof f?"string":"hash"]:_.map}function Mp(u){for(var f=pr(u),_=f.length;_--;){var w=f[_],S=u[w];f[_]=[w,S,BA(S)]}return f}function Oc(u,f){var _=function oA(X,he){return null==X?z:X[he]}(u,f);return EA(_)?_:z}var Q_=F0?function(u){return null==u?[]:(u=ai(u),bc(F0(u),function(f){return Rd.call(u,f)}))}:Ch,ux=F0?function(u){for(var f=[];u;)Vl(f,Q_(u)),u=Cs(u);return f}:Ch,Hr=ns;function fx(u,f,_){for(var w=-1,S=(f=Ea(f,u)).length,P=!1;++w<S;){var G=Yo(f[w]);if(!(P=null!=u&&_(u,G)))break;u=u[G]}return P||++w!=S?P:!!(S=null==u?0:u.length)&&$p(S)&&cl(G,S)&&(sn(u)||Bc(u))}function LA(u){return"function"!=typeof u.constructor||Sp(u)?{}:Nd(Cs(u))}function NA(u){return sn(u)||Bc(u)||!!(Mo&&u&&u[Mo])}function cl(u,f){var _=typeof u;return!!(f=f??Za)&&("number"==_||"symbol"!=_&&Md.test(u))&&u>-1&&u%1==0&&u<f}function Tr(u,f,_){if(!Mi(_))return!1;var w=typeof f;return!!("number"==w?io(_)&&cl(f,_.length):"string"==w&&f in _)&&qo(_[f],u)}function gx(u,f){if(sn(u))return!1;var _=typeof u;return!("number"!=_&&"symbol"!=_&&"boolean"!=_&&null!=u&&!Is(u))||_0.test(u)||!g0.test(u)||null!=f&&u in ai(f)}function ph(u){var f=ll(u),_=I[f];if("function"!=typeof _||!(f in kn.prototype))return!1;if(u===_)return!0;var w=K_(_);return!!w&&u===w[0]}(N0&&Hr(new N0(new ArrayBuffer(1)))!=wd||ip&&Hr(new ip)!=$o||rl&&Hr(rl.resolve())!=f0||Pd&&Hr(new Pd)!=Go||xi&&Hr(new xi)!=xd)&&(Hr=function(u){var f=ns(u),_=f==Qa?u.constructor:z,w=_?Fc(_):"";if(w)switch(w){case B0:return wd;case U0:return $o;case uA:return f0;case E_:return Go;case hA:return xd}return f});var PF=Qs?Xl:nu;function Sp(u){var f=u&&u.constructor;return u===("function"==typeof f&&f.prototype||Wo)}function BA(u){return u==u&&!Mi(u)}function UA(u,f){return function(_){return null!=_&&_[u]===f&&(f!==z||u in ai(_))}}function ev(u,f,_){return f=fr(f===z?u.length-1:f,0),function(){for(var w=arguments,S=-1,P=fr(w.length-f,0),G=oe(P);++S<P;)G[S]=w[f+S];S=-1;for(var Y=oe(f+1);++S<f;)Y[S]=w[S];return Y[f]=_(G),bs(u,this,Y)}}function tv(u,f){return f.length<2?u:Ec(u,is(f,0,-1))}function nv(u,f){if(("constructor"!==f||"function"!=typeof u[f])&&"__proto__"!=f)return u[f]}var yx=bx(z_),mh=pF||function(u,f){return Sr.setTimeout(u,f)},Ep=bx(ix);function Ap(u,f,_){var w=f+"";return Ep(u,function IF(u,f){var _=f.length;if(!_)return u;var w=_-1;return f[w]=(_>1?"& ":"")+f[w],f=f.join(_>2?", ":" "),u.replace(x0,"{\n/* [wrapped with "+f+"] */\n")}(w,function zA(u,f){return Rn(u0,function(_){var w="_."+_[0];f&_[1]&&!Ul(u,w)&&u.push(w)}),u.sort()}(function hx(u){var f=u.match(Mr);return f?f[1].split(UE):[]}(w),_)))}function bx(u){var f=0,_=0;return function(){var w=vF(),S=Zg-(w-_);if(_=w,S>0){if(++f>=EE)return arguments[0]}else f=0;return u.apply(z,arguments)}}function Dp(u,f){var _=-1,w=u.length,S=w-1;for(f=f===z?w:f;++_<f;){var P=ah(_,S),G=u[P];u[P]=u[_],u[_]=G}return u.length=f,u}var xx=function VA(u){var f=Zd(u,function(w){return 500===_.size&&_.clear(),w}),_=f.cache;return f}(function(u){var f=[];return 46===u.charCodeAt(0)&&f.push(""),u.replace(v0,function(_,w,S,P){f.push(S?P.replace(HE,"$1"):w||_)}),f});function Yo(u){if("string"==typeof u||Is(u))return u;var f=u+"";return"0"==f&&1/u==-In?"-0":f}function Fc(u){if(null!=u){try{return zl.call(u)}catch{}try{return u+""}catch{}}return""}function rs(u){if(u instanceof kn)return u.clone();var f=new Ai(u.__wrapped__,u.__chain__);return f.__actions__=to(u.__actions__),f.__index__=u.__index__,f.__values__=u.__values__,f}var $r=mn(function(u,f){return wi(u)?Ud(u,Zn(f,1,wi,!0)):[]}),gh=mn(function(u,f){var _=Ir(f);return wi(_)&&(_=z),wi(u)?Ud(u,Zn(f,1,wi,!0),Bt(_,2)):[]}),Mx=mn(function(u,f){var _=Ir(f);return wi(_)&&(_=z),wi(u)?Ud(u,Zn(f,1,wi,!0),z,_):[]});function Ax(u,f,_){var w=null==u?0:u.length;if(!w)return-1;var S=null==_?0:un(_);return S<0&&(S=fr(w+S,0)),Zu(u,Bt(f,3),S)}function sv(u,f,_){var w=null==u?0:u.length;if(!w)return-1;var S=w-1;return _!==z&&(S=un(_),S=_<0?fr(w+S,0):Jr(S,w-1)),Zu(u,Bt(f,3),S,!0)}function Dx(u){return null!=u&&u.length?Zn(u,1):[]}function Tx(u){return u&&u.length?u[0]:z}var jA=mn(function(u){var f=_i(u,jl);return f.length&&f[0]===u[0]?dp(f):[]}),lv=mn(function(u){var f=Ir(u),_=_i(u,jl);return f===Ir(_)?f=z:_.pop(),_.length&&_[0]===u[0]?dp(_,Bt(f,2)):[]}),cv=mn(function(u){var f=Ir(u),_=_i(u,jl);return(f="function"==typeof f?f:z)&&_.pop(),_.length&&_[0]===u[0]?dp(_,z,f):[]});function Ir(u){var f=null==u?0:u.length;return f?u[f-1]:z}var YA=mn(Tp);function Tp(u,f){return u&&u.length&&f&&f.length?V_(u,f):u}var KA=So(function(u,f){var _=null==u?0:u.length,w=ih(u,f);return oh(u,_i(f,function(S){return cl(S,_)?+S:S}).sort(RA)),w});function uv(u){return null==u?u:yF.call(u)}var Ip=mn(function(u){return si(Zn(u,1,wi,!0))}),n1=mn(function(u){var f=Ir(u);return wi(f)&&(f=z),si(Zn(u,1,wi,!0),Bt(f,2))}),Bx=mn(function(u){var f=Ir(u);return f="function"==typeof f?f:z,si(Zn(u,1,wi,!0),z,f)});function Rp(u){if(!u||!u.length)return[];var f=0;return u=bc(u,function(_){if(wi(_))return f=fr(_.length,f),!0}),Zs(f,function(_){return _i(u,v_(_))})}function vh(u,f){if(!u||!u.length)return[];var _=Rp(u);return null==f?_:_i(_,function(w){return bs(f,z,w)})}var kp=mn(function(u,f){return wi(u)?Ud(u,f):[]}),zx=mn(function(u){return Wl(bc(u,wi))}),mv=mn(function(u){var f=Ir(u);return wi(f)&&(f=z),Wl(bc(u,wi),Bt(f,2))}),gv=mn(function(u){var f=Ir(u);return f="function"==typeof f?f:z,Wl(bc(u,wi),z,f)}),_v=mn(Rp),Hx=mn(function(u){var f=u.length,_=f>1?u[f-1]:z;return _="function"==typeof _?(u.pop(),_):z,vh(u,_)});function $x(u){var f=I(u);return f.__chain__=!0,f}function Pp(u,f){return f(u)}var Gx=So(function(u){var f=u.length,_=f?u[0]:0,w=this.__wrapped__,S=function(P){return ih(P,u)};return!(f>1||this.__actions__.length)&&w instanceof kn&&cl(_)?((w=w.slice(_,+_+(f?1:0))).__actions__.push({func:Pp,args:[S],thisArg:z}),new Ai(w,this.__chain__).thru(function(P){return f&&!P.length&&P.push(z),P})):this.thru(S)}),l1=gp(function(u,f,_){ri.call(u,_)?++u[_]:jo(u,_,1)}),jx=OA(Ax),Fp=OA(sv);function xv(u,f){return(sn(u)?Rn:ol)(u,Bt(f,3))}function ql(u,f){return(sn(u)?hF:P_)(u,Bt(f,3))}var d1=gp(function(u,f,_){ri.call(u,_)?u[_].push(f):jo(u,_,[f])}),h1=mn(function(u,f,_){var w=-1,S="function"==typeof f,P=io(u)?oe(u.length):[];return ol(u,function(G){P[++w]=S?bs(f,G,_):Ma(G,f,_)}),P}),f1=gp(function(u,f,_){jo(u,_,f)});function Lp(u,f){return(sn(u)?_i:rh)(u,Bt(f,3))}var Ta=gp(function(u,f,_){u[_?0:1].push(f)},function(){return[[],[]]}),x1=mn(function(u,f){if(null==u)return[];var _=f.length;return _>1&&Tr(u,f[0],f[1])?f=[]:_>2&&Tr(f[0],f[1],f[2])&&(f=[f[0]]),U_(u,Zn(f,1),[])}),Np=fF||function(){return Sr.Date.now()};function bh(u,f,_){return f=_?z:f,Co(u,Xa,z,z,z,z,f=u&&null==f?u.length:f)}function Ia(u,f){var _;if("function"!=typeof f)throw new Er(Vn);return u=un(u),function(){return--u>0&&(_=f.apply(this,arguments)),u<=1&&(f=z),_}}var Nc=mn(function(u,f,_){var w=On;if(_.length){var S=Wi(_,Da(Nc));w|=ma}return Co(u,w,f,_,S)}),wv=mn(function(u,f,_){var w=On|ur;if(_.length){var S=Wi(_,Da(wv));w|=ma}return Co(f,w,u,_,S)});function M1(u,f,_){var w,S,P,G,Y,Q,_e=0,ye=!1,be=!1,Qe=!0;if("function"!=typeof u)throw new Er(Vn);function bt(Ti){var ks=w,Do=S;return w=S=z,_e=Ti,G=u.apply(Do,ks)}function Ht(Ti){var ks=Ti-Q;return Q===z||ks>=f||ks<0||be&&Ti-_e>=P}function En(){var Ti=Np();if(Ht(Ti))return Ln(Ti);Y=mh(En,function gn(Ti){var PD=f-(Ti-Q);return be?Jr(PD,P-(Ti-_e)):PD}(Ti))}function Ln(Ti){return Y=z,Qe&&w?bt(Ti):(w=S=z,G)}function oo(){var Ti=Np(),ks=Ht(Ti);if(w=arguments,S=this,Q=Ti,ks){if(Y===z)return function zt(Ti){return _e=Ti,Y=mh(En,f),ye?bt(Ti):G}(Q);if(be)return sx(Y),Y=mh(En,f),bt(Q)}return Y===z&&(Y=mh(En,f)),G}return f=Eo(f)||0,Mi(_)&&(ye=!!_.leading,P=(be="maxWait"in _)?fr(Eo(_.maxWait)||0,f):P,Qe="trailing"in _?!!_.trailing:Qe),oo.cancel=function os(){Y!==z&&sx(Y),_e=0,w=Q=S=Y=z},oo.flush=function as(){return Y===z?G:Ln(Np())},oo}var LF=mn(function(u,f){return ap(u,1,f)}),NF=mn(function(u,f,_){return ap(u,Eo(f)||0,_)});function Zd(u,f){if("function"!=typeof u||null!=f&&"function"!=typeof f)throw new Er(Vn);var _=function(){var w=arguments,S=f?f.apply(this,w):w[0],P=_.cache;if(P.has(S))return P.get(S);var G=u.apply(this,w);return _.cache=P.set(S,G)||P,G};return _.cache=new(Zd.Cache||ba),_}function Ev(u){if("function"!=typeof u)throw new Er(Vn);return function(){var f=arguments;switch(f.length){case 0:return!u.call(this);case 1:return!u.call(this,f[0]);case 2:return!u.call(this,f[0],f[1]);case 3:return!u.call(this,f[0],f[1],f[2])}return!u.apply(this,f)}}Zd.Cache=ba;var Kx=Wd(function(u,f){var _=(f=1==f.length&&sn(f[0])?_i(f[0],Ur(Bt())):_i(Zn(f,1),Ur(Bt()))).length;return mn(function(w){for(var S=-1,P=Jr(w.length,_);++S<P;)w[S]=f[S].call(this,w[S]);return bs(u,this,w)})}),Av=mn(function(u,f){var _=Wi(f,Da(Av));return Co(u,ma,z,f,_)}),Zx=mn(function(u,f){var _=Wi(f,Da(Zx));return Co(u,Nl,z,f,_)}),C1=So(function(u,f){return Co(u,ga,z,z,z,f)});function qo(u,f){return u===f||u!=u&&f!=f}var T1=xp(zd),I1=xp(function(u,f){return u>=f}),Bc=Hd(function(){return arguments}())?Hd:function(u){return Pi(u)&&ri.call(u,"callee")&&!Rd.call(u,"callee")},sn=oe.isArray,UF=g_?Ur(g_):function CA(u){return Pi(u)&&ns(u)==Vu};function io(u){return null!=u&&$p(u.length)&&!Xl(u)}function wi(u){return Pi(u)&&io(u)}var dl=mF||nu,tw=I0?Ur(I0):function wF(u){return Pi(u)&&ns(u)==vc};function zp(u){if(!Pi(u))return!1;var f=ns(u);return f==yd||f==IE||"string"==typeof u.message&&"string"==typeof u.name&&!ro(u)}function Xl(u){if(!Mi(u))return!1;var f=ns(u);return f==Nf||f==h0||f==TE||f==kE}function Hp(u){return"number"==typeof u&&u==un(u)}function $p(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Za}function Mi(u){var f=typeof u;return null!=u&&("object"==f||"function"==f)}function Pi(u){return null!=u&&"object"==typeof u}var Iv=Ft?Ur(Ft):function SA(u){return Pi(u)&&Hr(u)==$o};function xh(u){return"number"==typeof u||Pi(u)&&ns(u)==Uu}function ro(u){if(!Pi(u)||ns(u)!=Qa)return!1;var f=Cs(u);if(null===f)return!0;var _=ri.call(f,"constructor")&&f.constructor;return"function"==typeof _&&_ instanceof _&&zl.call(_)==O0}var Wp=Yf?Ur(Yf):function CF(u){return Pi(u)&&ns(u)==bd},rw=R0?Ur(R0):function N_(u){return Pi(u)&&Hr(u)==Go};function jp(u){return"string"==typeof u||!sn(u)&&Pi(u)&&ns(u)==yc}function Is(u){return"symbol"==typeof u||Pi(u)&&ns(u)==Bf}var Xo=Ks?Ur(Ks):function K0(u){return Pi(u)&&$p(u.length)&&!!Ei[ns(u)]},Ov=xp(up),N1=xp(function(u,f){return u<=f});function Fv(u){if(!u)return[];if(io(u))return jp(u)?wo(u):to(u);if(nh&&u[nh])return function aA(X){for(var he,oe=[];!(he=X.next()).done;)oe.push(he.value);return oe}(u[nh]());var f=Hr(u);return(f==$o?Zf:f==Go?Gn:zc)(u)}function ul(u){return u?(u=Eo(u))===In||u===-In?(u<0?-1:1)*DE:u==u?u:0:0===u?u:0}function un(u){var f=ul(u),_=f%1;return f==f?_?f-_:f:0}function B1(u){return u?Gl(un(u),0,_a):0}function Eo(u){if("number"==typeof u)return u;if(Is(u))return Lf;if(Mi(u)){var f="function"==typeof u.valueOf?u.valueOf():u;u=Mi(f)?f+"":f}if("string"!=typeof u)return 0===u?u:+u;u=jn(u);var _=Ja.test(u);return _||ir.test(u)?dF(u.slice(2),_?2:8):$E.test(u)?Lf:+u}function Kl(u){return di(u,Rs(u))}function Fn(u){return null==u?"":eo(u)}var vt=Dr(function(u,f){if(Sp(f)||io(f))di(f,pr(f),u);else for(var _ in f)ri.call(f,_)&&Js(u,_,f[_])}),sw=Dr(function(u,f){di(f,Rs(f),u)}),Zl=Dr(function(u,f,_,w){di(f,Rs(f),u,w)}),hl=Dr(function(u,f,_,w){di(f,pr(f),u,w)}),V1=So(ih),Vc=mn(function(u,f){u=ai(u);var _=-1,w=f.length,S=w>2?f[2]:z;for(S&&Tr(f[0],f[1],S)&&(w=1);++_<w;)for(var P=f[_],G=Rs(P),Y=-1,Q=G.length;++Y<Q;){var _e=G[Y],ye=u[_e];(ye===z||qo(ye,Wo[_e])&&!ri.call(u,_e))&&(u[_e]=P[_e])}return u}),H1=mn(function(u){return u.push(z,q_),bs(X1,z,u)});function Uv(u,f,_){var w=null==u?z:Ec(u,f);return w===z?_:w}function Vv(u,f){return null!=u&&fx(u,f,cp)}var q1=Pc(function(u,f,_){null!=f&&"function"!=typeof f.toString&&(f=Id.call(f)),u[f]=_},qv(ss)),Qd=Pc(function(u,f,_){null!=f&&"function"!=typeof f.toString&&(f=Id.call(f)),ri.call(u,f)?u[f].push(_):u[f]=[_]},Bt),pl=mn(Ma);function pr(u){return io(u)?R_(u):Dc(u)}function Rs(u){return io(u)?R_(u,!0):function Z0(u){if(!Mi(u))return function J_(u){var f=[];if(null!=u)for(var _ in ai(u))f.push(_);return f}(u);var f=Sp(u),_=[];for(var w in u)"constructor"==w&&(f||!ri.call(u,w))||_.push(w);return _}(u)}var ow=Dr(function(u,f,_){$d(u,f,_)}),X1=Dr(function(u,f,_,w){$d(u,f,_,w)}),aw=So(function(u,f){var _={};if(null==u)return _;var w=!1;f=_i(f,function(P){return P=Ea(P,u),w||(w=P.length>1),P}),di(u,X_(u),_),w&&(_=Es(_,Si|vs|Ys,Aa));for(var S=f.length;S--;)ch(_,f[S]);return _}),K1=So(function(u,f){return null==u?{}:function J0(u,f){return ex(u,f,function(_,w){return Vv(u,w)})}(u,f)});function zv(u,f){if(null==u)return{};var _=_i(X_(u),function(w){return[w]});return f=Bt(f),ex(u,_,function(w,S){return f(w,S[0])})}var cw=hh(pr),Hv=hh(Rs);function zc(u){return null==u?[]:Qu(u,pr(u))}var V=qd(function(u,f,_){return f=f.toLowerCase(),u+(_?$v(f):f)});function $v(u){return eu(Fn(u).toLowerCase())}function Gv(u){return(u=Fn(u))&&u.replace(bo,sA).replace(iF,"")}var lD=qd(function(u,f,_){return u+(_?"-":"")+f.toLowerCase()}),uw=qd(function(u,f,_){return u+(_?" ":"")+f.toLowerCase()}),cD=Yd("toLowerCase"),Wv=qd(function(u,f,_){return u+(_?"_":"")+f.toLowerCase()}),hD=qd(function(u,f,_){return u+(_?" ":"")+eu(f)}),mw=qd(function(u,f,_){return u+(_?" ":"")+f.toUpperCase()}),eu=Yd("toUpperCase");function gw(u,f,_){return u=Fn(u),(f=_?z:f)===z?function en(X){return eA.test(X)}(u)?function pn(X){return X.match(rF)||[]}(u):function rA(X){return X.match(VE)||[]}(u):u.match(f)||[]}var Yv=mn(function(u,f){try{return bs(u,z,f)}catch(_){return zp(_)?_:new jt(_)}}),gD=So(function(u,f){return Rn(f,function(_){_=Yo(_),jo(u,_,Nc(u[_],u))}),u});function qv(u){return function(){return u}}var _w=As(),bD=As(!0);function ss(u){return u}function Yp(u){return B_("function"==typeof u?u:Es(u,Si))}var Kv=mn(function(u,f){return function(_){return Ma(_,u,f)}}),xD=mn(function(u,f){return function(_){return Ma(u,_,f)}});function vw(u,f,_){var w=pr(f),S=wa(f,w);null==_&&(!Mi(f)||!S.length&&w.length)&&(_=f,f=u,u=this,S=wa(f,pr(f)));var P=!(Mi(_)&&"chain"in _&&!_.chain),G=Xl(u);return Rn(S,function(Y){var Q=f[Y];u[Y]=Q,G&&(u.prototype[Y]=function(){var _e=this.__chain__;if(P||_e){var ye=u(this.__wrapped__);return(ye.__actions__=to(this.__actions__)).push({func:Q,args:arguments,thisArg:u}),ye.__chain__=_e,ye}return Q.apply(u,Vl([this.value()],arguments))})}),u}function Ao(){}var yw=yp(_i),MD=yp(nA),CD=yp(qf);function wh(u){return gx(u)?v_(Yo(u)):function Ca(u){return function(f){return Ec(f,u)}}(u)}var Zv=ax(),Mh=ax(!0);function Ch(){return[]}function nu(){return!1}var SD=W_(function(u,f){return u+f},0),ED=j_("ceil"),ww=W_(function(u,f){return u/f},1),AD=j_("floor"),RD=W_(function(u,f){return u*f},1),XF=j_("round"),ny=W_(function(u,f){return u-f},0);return I.after=function w1(u,f){if("function"!=typeof f)throw new Er(Vn);return u=un(u),function(){if(--u<1)return f.apply(this,arguments)}},I.ary=bh,I.assign=vt,I.assignIn=sw,I.assignInWith=Zl,I.assignWith=hl,I.at=V1,I.before=Ia,I.bind=Nc,I.bindAll=gD,I.bindKey=wv,I.castArray=function E1(){if(!arguments.length)return[];var u=arguments[0];return sn(u)?u:[u]},I.chain=$x,I.chunk=function iv(u,f,_){f=(_?Tr(u,f,_):f===z)?1:fr(un(f),0);var w=null==u?0:u.length;if(!w||f<1)return[];for(var S=0,P=0,G=oe(M_(w/f));S<w;)G[P++]=is(u,S,S+=f);return G},I.compact=function wx(u){for(var f=-1,_=null==u?0:u.length,w=0,S=[];++f<_;){var P=u[f];P&&(S[w++]=P)}return S},I.concat=function rv(){var u=arguments.length;if(!u)return[];for(var f=oe(u-1),_=arguments[0],w=u;w--;)f[w-1]=arguments[w];return Vl(sn(_)?to(_):[_],Zn(f,1))},I.cond=function _D(u){var f=null==u?0:u.length,_=Bt();return u=f?_i(u,function(w){if("function"!=typeof w[1])throw new Er(Vn);return[_(w[0]),w[1]]}):[],mn(function(w){for(var S=-1;++S<f;){var P=u[S];if(bs(P[0],this,w))return bs(P[1],this,w)}})},I.conforms=function vD(u){return function xA(u){var f=pr(u);return function(_){return k_(_,u,f)}}(Es(u,Si))},I.constant=qv,I.countBy=l1,I.create=function z1(u,f){var _=Nd(u);return null==f?_:j0(_,f)},I.curry=function Mv(u,f,_){var w=Co(u,pa,z,z,z,z,z,f=_?z:f);return w.placeholder=Mv.placeholder,w},I.curryRight=function Cv(u,f,_){var w=Co(u,Ll,z,z,z,z,z,f=_?z:f);return w.placeholder=Cv.placeholder,w},I.debounce=M1,I.defaults=Vc,I.defaultsDeep=H1,I.defer=LF,I.delay=NF,I.difference=$r,I.differenceBy=gh,I.differenceWith=Mx,I.drop=function Cx(u,f,_){var w=null==u?0:u.length;return w?is(u,(f=_||f===z?1:un(f))<0?0:f,w):[]},I.dropRight=function HA(u,f,_){var w=null==u?0:u.length;return w?is(u,0,(f=w-(f=_||f===z?1:un(f)))<0?0:f):[]},I.dropRightWhile=function Sx(u,f){return u&&u.length?dh(u,Bt(f,3),!0,!0):[]},I.dropWhile=function $A(u,f){return u&&u.length?dh(u,Bt(f,3),!0):[]},I.fill=function Ex(u,f,_,w){var S=null==u?0:u.length;return S?(_&&"number"!=typeof _&&Tr(u,f,_)&&(_=0,w=S),function wA(u,f,_,w){var S=u.length;for((_=un(_))<0&&(_=-_>S?0:S+_),(w=w===z||w>S?S:un(w))<0&&(w+=S),w=_>w?0:B1(w);_<w;)u[_++]=f;return u}(u,f,_,w)):[]},I.filter=function c1(u,f){return(sn(u)?bc:q0)(u,Bt(f,3))},I.flatMap=function bv(u,f){return Zn(Lp(u,f),1)},I.flatMapDeep=function Yx(u,f){return Zn(Lp(u,f),In)},I.flatMapDepth=function qx(u,f,_){return _=_===z?1:un(_),Zn(Lp(u,f),_)},I.flatten=Dx,I.flattenDeep=function GA(u){return null!=u&&u.length?Zn(u,In):[]},I.flattenDepth=function ov(u,f){return null!=u&&u.length?Zn(u,f=f===z?1:un(f)):[]},I.flip=function Sv(u){return Co(u,vd)},I.flow=_w,I.flowRight=bD,I.fromPairs=function av(u){for(var f=-1,_=null==u?0:u.length,w={};++f<_;){var S=u[f];w[S[0]]=S[1]}return w},I.functions=function W1(u){return null==u?[]:wa(u,pr(u))},I.functionsIn=function j1(u){return null==u?[]:wa(u,Rs(u))},I.groupBy=d1,I.initial=function WA(u){return null!=u&&u.length?is(u,0,-1):[]},I.intersection=jA,I.intersectionBy=lv,I.intersectionWith=cv,I.invert=q1,I.invertBy=Qd,I.invokeMap=h1,I.iteratee=Yp,I.keyBy=f1,I.keys=pr,I.keysIn=Rs,I.map=Lp,I.mapKeys=function zF(u,f){var _={};return f=Bt(f,3),ki(u,function(w,S,P){jo(_,f(w,S,P),w)}),_},I.mapValues=function HF(u,f){var _={};return f=Bt(f,3),ki(u,function(w,S,P){jo(_,S,f(w,S,P))}),_},I.matches=function Xv(u){return Q0(Es(u,Si))},I.matchesProperty=function qF(u,f){return sh(u,Es(f,Si))},I.memoize=Zd,I.merge=ow,I.mergeWith=X1,I.method=Kv,I.methodOf=xD,I.mixin=vw,I.negate=Ev,I.nthArg=function wD(u){return u=un(u),mn(function(f){return AA(f,u)})},I.omit=aw,I.omitBy=function lw(u,f){return zv(u,Ev(Bt(f)))},I.once=function BF(u){return Ia(2,u)},I.orderBy=function no(u,f,_,w){return null==u?[]:(sn(f)||(f=null==f?[]:[f]),sn(_=w?z:_)||(_=null==_?[]:[_]),U_(u,f,_))},I.over=yw,I.overArgs=Kx,I.overEvery=MD,I.overSome=CD,I.partial=Av,I.partialRight=Zx,I.partition=Ta,I.pick=K1,I.pickBy=zv,I.property=wh,I.propertyOf=function tu(u){return function(f){return null==u?z:Ec(u,f)}},I.pull=YA,I.pullAll=Tp,I.pullAllBy=function qA(u,f,_){return u&&u.length&&f&&f.length?V_(u,f,Bt(_,2)):u},I.pullAllWith=function XA(u,f,_){return u&&u.length&&f&&f.length?V_(u,f,z,_):u},I.pullAt=KA,I.range=Zv,I.rangeRight=Mh,I.rearg=C1,I.reject=function g1(u,f){return(sn(u)?bc:q0)(u,Ev(Bt(f,3)))},I.remove=function ZA(u,f){var _=[];if(!u||!u.length)return _;var w=-1,S=[],P=u.length;for(f=Bt(f,3);++w<P;){var G=u[w];f(G,w,u)&&(_.push(G),S.push(w))}return oh(u,S),_},I.rest=function S1(u,f){if("function"!=typeof u)throw new Er(Vn);return mn(u,f=f===z?f:un(f))},I.reverse=uv,I.sampleSize=function v1(u,f,_){return f=(_?Tr(u,f,_):f===z)?1:un(f),(sn(u)?sl:nx)(u,f)},I.set=function Q1(u,f,_){return null==u?u:Gd(u,f,_)},I.setWith=function Ko(u,f,_,w){return w="function"==typeof w?w:z,null==u?u:Gd(u,f,_,w)},I.shuffle=function y1(u){return(sn(u)?G0:TA)(u)},I.slice=function QA(u,f,_){var w=null==u?0:u.length;return w?(_&&"number"!=typeof _&&Tr(u,f,_)?(f=0,_=w):(f=null==f?0:un(f),_=_===z?w:un(_)),is(u,f,_)):[]},I.sortBy=x1,I.sortedUniq=function Ox(u){return u&&u.length?H_(u):[]},I.sortedUniqBy=function Fx(u,f){return u&&u.length?H_(u,Bt(f,2)):[]},I.split=function jv(u,f,_){return _&&"number"!=typeof _&&Tr(u,f,_)&&(f=_=z),(_=_===z?_a:_>>>0)?(u=Fn(u))&&("string"==typeof f||null!=f&&!Wp(f))&&!(f=eo(f))&&Dd(u)?kc(wo(u),0,_):u.split(f,_):[]},I.spread=function Qx(u,f){if("function"!=typeof u)throw new Er(Vn);return f=null==f?0:fr(un(f),0),mn(function(_){var w=_[f],S=kc(_,0,f);return w&&Vl(S,w),bs(u,this,S)})},I.tail=function Lc(u){var f=null==u?0:u.length;return f?is(u,1,f):[]},I.take=function Lx(u,f,_){return u&&u.length?is(u,0,(f=_||f===z?1:un(f))<0?0:f):[]},I.takeRight=function Nx(u,f,_){var w=null==u?0:u.length;return w?is(u,(f=w-(f=_||f===z?1:un(f)))<0?0:f,w):[]},I.takeRightWhile=function t1(u,f){return u&&u.length?dh(u,Bt(f,3),!1,!0):[]},I.takeWhile=function OF(u,f){return u&&u.length?dh(u,Bt(f,3)):[]},I.tap=function s1(u,f){return f(u),u},I.throttle=function Bp(u,f,_){var w=!0,S=!0;if("function"!=typeof u)throw new Er(Vn);return Mi(_)&&(w="leading"in _?!!_.leading:w,S="trailing"in _?!!_.trailing:S),M1(u,f,{leading:w,maxWait:f,trailing:S})},I.thru=Pp,I.toArray=Fv,I.toPairs=cw,I.toPairsIn=Hv,I.toPath=function xw(u){return sn(u)?_i(u,Yo):Is(u)?[u]:to(xx(Fn(u)))},I.toPlainObject=Kl,I.transform=function J1(u,f,_){var w=sn(u),S=w||dl(u)||Xo(u);if(f=Bt(f,4),null==_){var P=u&&u.constructor;_=S?w?new P:[]:Mi(u)&&Xl(P)?Nd(Cs(u)):{}}return(S?Rn:ki)(u,function(G,Y,Q){return f(_,G,Y,Q)}),_},I.unary=function Jx(u){return bh(u,1)},I.union=Ip,I.unionBy=n1,I.unionWith=Bx,I.uniq=function Ux(u){return u&&u.length?si(u):[]},I.uniqBy=function Vx(u,f){return u&&u.length?si(u,Bt(f,2)):[]},I.uniqWith=function pv(u,f){return f="function"==typeof f?f:z,u&&u.length?si(u,z,f):[]},I.unset=function eD(u,f){return null==u||ch(u,f)},I.unzip=Rp,I.unzipWith=vh,I.update=function tD(u,f,_){return null==u?u:rx(u,f,mp(_))},I.updateWith=function nD(u,f,_,w){return w="function"==typeof w?w:z,null==u?u:rx(u,f,mp(_),w)},I.values=zc,I.valuesIn=function iD(u){return null==u?[]:Qu(u,Rs(u))},I.without=kp,I.words=gw,I.wrap=function Dv(u,f){return Av(mp(f),u)},I.xor=zx,I.xorBy=mv,I.xorWith=gv,I.zip=_v,I.zipObject=function yh(u,f){return Rc(u||[],f||[],Js)},I.zipObjectDeep=function r1(u,f){return Rc(u||[],f||[],Gd)},I.zipWith=Hx,I.entries=cw,I.entriesIn=Hv,I.extend=sw,I.extendWith=Zl,vw(I,I),I.add=SD,I.attempt=Yv,I.camelCase=V,I.capitalize=$v,I.ceil=ED,I.clamp=function rD(u,f,_){return _===z&&(_=f,f=z),_!==z&&(_=(_=Eo(_))==_?_:0),f!==z&&(f=(f=Eo(f))==f?f:0),Gl(Eo(u),f,_)},I.clone=function Qn(u){return Es(u,Ys)},I.cloneDeep=function D1(u){return Es(u,Si|Ys)},I.cloneDeepWith=function Up(u,f){return Es(u,Si|Ys,f="function"==typeof f?f:z)},I.cloneWith=function A1(u,f){return Es(u,Ys,f="function"==typeof f?f:z)},I.conformsTo=function ew(u,f){return null==f||k_(u,f,pr(f))},I.deburr=Gv,I.defaultTo=function yD(u,f){return null==u||u!=u?f:u},I.divide=ww,I.endsWith=function oD(u,f,_){u=Fn(u),f=eo(f);var w=u.length,S=_=_===z?w:Gl(un(_),0,w);return(_-=f.length)>=0&&u.slice(_,S)==f},I.eq=qo,I.escape=function aD(u){return(u=Fn(u))&&BE.test(u)?u.replace(m0,st):u},I.escapeRegExp=function dw(u){return(u=Fn(u))&&y0.test(u)?u.replace(o_,"\\$&"):u},I.every=function yv(u,f,_){var w=sn(u)?nA:Y0;return _&&Tr(u,f,_)&&(f=z),w(u,Bt(f,3))},I.find=jx,I.findIndex=Ax,I.findKey=function Lv(u,f){return ee(u,Bt(f,3),ki)},I.findLast=Fp,I.findLastIndex=sv,I.findLastKey=function Nv(u,f){return ee(u,Bt(f,3),O_)},I.floor=AD,I.forEach=xv,I.forEachRight=ql,I.forIn=function $1(u,f){return null==u?u:al(u,Bt(f,3),Rs)},I.forInRight=function Bv(u,f){return null==u?u:Di(u,Bt(f,3),Rs)},I.forOwn=function fl(u,f){return u&&ki(u,Bt(f,3))},I.forOwnRight=function G1(u,f){return u&&O_(u,Bt(f,3))},I.get=Uv,I.gt=T1,I.gte=I1,I.has=function Y1(u,f){return null!=u&&fx(u,f,lp)},I.hasIn=Vv,I.head=Tx,I.identity=ss,I.includes=function u1(u,f,_,w){u=io(u)?u:zc(u),_=_&&!w?un(_):0;var S=u.length;return _<0&&(_=fr(S+_,0)),jp(u)?_<=S&&u.indexOf(f,_)>-1:!!S&&Lt(u,f,_)>-1},I.indexOf=function _h(u,f,_){var w=null==u?0:u.length;if(!w)return-1;var S=null==_?0:un(_);return S<0&&(S=fr(w+S,0)),Lt(u,f,S)},I.inRange=function sD(u,f,_){return f=ul(f),_===z?(_=f,f=0):_=ul(_),function F_(u,f,_){return u>=Jr(f,_)&&u<fr(f,_)}(u=Eo(u),f,_)},I.invoke=pl,I.isArguments=Bc,I.isArray=sn,I.isArrayBuffer=UF,I.isArrayLike=io,I.isArrayLikeObject=wi,I.isBoolean=function Vp(u){return!0===u||!1===u||Pi(u)&&ns(u)==rt},I.isBuffer=dl,I.isDate=tw,I.isElement=function nw(u){return Pi(u)&&1===u.nodeType&&!ro(u)},I.isEmpty=function VF(u){if(null==u)return!0;if(io(u)&&(sn(u)||"string"==typeof u||"function"==typeof u.splice||dl(u)||Xo(u)||Bc(u)))return!u.length;var f=Hr(u);if(f==$o||f==Go)return!u.size;if(Sp(u))return!Dc(u).length;for(var _ in u)if(ri.call(u,_))return!1;return!0},I.isEqual=function R1(u,f){return Ac(u,f)},I.isEqualWith=function iw(u,f,_){var w=(_="function"==typeof _?_:z)?_(u,f):z;return w===z?Ac(u,f,z,_):!!w},I.isError=zp,I.isFinite=function Tv(u){return"number"==typeof u&&dA(u)},I.isFunction=Xl,I.isInteger=Hp,I.isLength=$p,I.isMap=Iv,I.isMatch=function Uc(u,f){return u===f||L_(u,f,Mp(f))},I.isMatchWith=function k1(u,f,_){return _="function"==typeof _?_:z,L_(u,f,Mp(f),_)},I.isNaN=function Rv(u){return xh(u)&&u!=+u},I.isNative=function Gp(u){if(PF(u))throw new jt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return EA(u)},I.isNil=function kv(u){return null==u},I.isNull=function P1(u){return null===u},I.isNumber=xh,I.isObject=Mi,I.isObjectLike=Pi,I.isPlainObject=ro,I.isRegExp=Wp,I.isSafeInteger=function Pv(u){return Hp(u)&&u>=-Za&&u<=Za},I.isSet=rw,I.isString=jp,I.isSymbol=Is,I.isTypedArray=Xo,I.isUndefined=function O1(u){return u===z},I.isWeakMap=function F1(u){return Pi(u)&&Hr(u)==xd},I.isWeakSet=function L1(u){return Pi(u)&&"[object WeakSet]"==ns(u)},I.join=function Ix(u,f){return null==u?"":gF.call(u,f)},I.kebabCase=lD,I.last=Ir,I.lastIndexOf=function dv(u,f,_){var w=null==u?0:u.length;if(!w)return-1;var S=w;return _!==z&&(S=(S=un(_))<0?fr(w+S,0):Jr(S,w-1)),f==f?function Td(X,he,oe){for(var ze=oe+1;ze--;)if(X[ze]===he)return ze;return ze}(u,f,S):Zu(u,Kf,S,!0)},I.lowerCase=uw,I.lowerFirst=cD,I.lt=Ov,I.lte=N1,I.max=function Mw(u){return u&&u.length?Vd(u,ss,zd):z},I.maxBy=function Cw(u,f){return u&&u.length?Vd(u,Bt(f,2),zd):z},I.mean=function DD(u){return Ad(u,ss)},I.meanBy=function TD(u,f){return Ad(u,Bt(f,2))},I.min=function so(u){return u&&u.length?Vd(u,ss,up):z},I.minBy=function ID(u,f){return u&&u.length?Vd(u,Bt(f,2),up):z},I.stubArray=Ch,I.stubFalse=nu,I.stubObject=function bw(){return{}},I.stubString=function Qv(){return""},I.stubTrue=function Jv(){return!0},I.multiply=RD,I.nth=function Rx(u,f){return u&&u.length?AA(u,un(f)):z},I.noConflict=function E(){return Sr._===this&&(Sr._=Jf),this},I.noop=Ao,I.now=Np,I.pad=function dD(u,f,_){u=Fn(u);var w=(f=un(f))?hr(u):0;if(!f||w>=f)return u;var S=(f-w)/2;return bp(C_(S),_)+u+bp(M_(S),_)},I.padEnd=function $F(u,f,_){u=Fn(u);var w=(f=un(f))?hr(u):0;return f&&w<f?u+bp(f-w,_):u},I.padStart=function hw(u,f,_){u=Fn(u);var w=(f=un(f))?hr(u):0;return f&&w<f?bp(f-w,_)+u:u},I.parseInt=function fw(u,f,_){return _||null==f?f=0:f&&(f=+f),L0(Fn(u).replace(zf,""),f||0)},I.random=function on(u,f,_){if(_&&"boolean"!=typeof _&&Tr(u,f,_)&&(f=_=z),_===z&&("boolean"==typeof f?(_=f,f=z):"boolean"==typeof u&&(_=u,u=z)),u===z&&f===z?(u=0,f=1):(u=ul(u),f===z?(f=u,u=0):f=ul(f)),u>f){var w=u;u=f,f=w}if(_||u%1||f%1){var S=S_();return Jr(u+S*(f-u+Pe("1e-"+((S+"").length-1))),f)}return ah(u,f)},I.reduce=function p1(u,f,_){var w=sn(u)?__:k0,S=arguments.length<3;return w(u,Bt(f,4),_,S,ol)},I.reduceRight=function m1(u,f,_){var w=sn(u)?iA:k0,S=arguments.length<3;return w(u,Bt(f,4),_,S,P_)},I.repeat=function ji(u,f,_){return f=(_?Tr(u,f,_):f===z)?1:un(f),lh(Fn(u),f)},I.replace=function uD(){var u=arguments,f=Fn(u[0]);return u.length<3?f:f.replace(u[1],u[2])},I.result=function Z1(u,f,_){var w=-1,S=(f=Ea(f,u)).length;for(S||(S=1,u=z);++w<S;){var P=null==u?z:u[Yo(f[w])];P===z&&(w=S,P=_),u=Xl(P)?P.call(u):P}return u},I.round=XF,I.runInContext=X,I.sample=function _1(u){return(sn(u)?zr:DA)(u)},I.size=function Xx(u){if(null==u)return 0;if(io(u))return jp(u)?hr(u):u.length;var f=Hr(u);return f==$o||f==Go?u.size:Dc(u).length},I.snakeCase=Wv,I.some=function b1(u,f,_){var w=sn(u)?qf:Tc;return _&&Tr(u,f,_)&&(f=z),w(u,Bt(f,3))},I.sortedIndex=function kx(u,f){return fp(u,f)},I.sortedIndexBy=function hv(u,f,_){return pp(u,f,Bt(_,2))},I.sortedIndexOf=function Px(u,f){var _=null==u?0:u.length;if(_){var w=fp(u,f);if(w<_&&qo(u[w],f))return w}return-1},I.sortedLastIndex=function fv(u,f){return fp(u,f,!0)},I.sortedLastIndexBy=function JA(u,f,_){return pp(u,f,Bt(_,2),!0)},I.sortedLastIndexOf=function e1(u,f){if(null!=u&&u.length){var w=fp(u,f,!0)-1;if(qo(u[w],f))return w}return-1},I.startCase=hD,I.startsWith=function GF(u,f,_){return u=Fn(u),_=null==_?0:Gl(un(_),0,u.length),f=eo(f),u.slice(_,_+f.length)==f},I.subtract=ny,I.sum=function Sw(u){return u&&u.length?xo(u,ss):0},I.sumBy=function kD(u,f){return u&&u.length?xo(u,Bt(f,2)):0},I.template=function WF(u,f,_){var w=I.templateSettings;_&&Tr(u,f,_)&&(f=z),u=Fn(u),f=Zl({},f,w,Ds);var Y,Q,S=Zl({},f.imports,w.imports,Ds),P=pr(S),G=Qu(S,P),_e=0,ye=f.interpolate||a_,be="__p += '",Qe=wc((f.escape||a_).source+"|"+ye.source+"|"+(ye===s_?w0:a_).source+"|"+(f.evaluate||a_).source+"|$","g"),bt="//# sourceURL="+(ri.call(f,"sourceURL")?(f.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tA+"]")+"\n";u.replace(Qe,function(Ht,En,Ln,os,as,oo){return Ln||(Ln=os),be+=u.slice(_e,oo).replace(WE,eh),En&&(Y=!0,be+="' +\n__e("+En+") +\n'"),as&&(Q=!0,be+="';\n"+as+";\n__p += '"),Ln&&(be+="' +\n((__t = ("+Ln+")) == null ? '' : __t) +\n'"),_e=oo+Ht.length,Ht}),be+="';\n";var zt=ri.call(f,"variable")&&f.variable;if(zt){if(zE.test(zt))throw new jt("Invalid `variable` option passed into `_.template`")}else be="with (obj) {\n"+be+"\n}\n";be=(Q?be.replace(OE,""):be).replace(FE,"$1").replace(LE,"$1;"),be="function("+(zt||"obj")+") {\n"+(zt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(Q?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+be+"return __p\n}";var gn=Yv(function(){return zn(P,bt+"return "+be).apply(z,G)});if(gn.source=be,zp(gn))throw gn;return gn},I.times=function ey(u,f){if((u=un(u))<1||u>Za)return[];var _=_a,w=Jr(u,_a);f=Bt(f),u-=_a;for(var S=Zs(w,f);++_<u;)f(_);return S},I.toFinite=ul,I.toInteger=un,I.toLength=B1,I.toLower=function jF(u){return Fn(u).toLowerCase()},I.toNumber=Eo,I.toSafeInteger=function U1(u){return u?Gl(un(u),-Za,Za):0===u?u:0},I.toString=Fn,I.toUpper=function fD(u){return Fn(u).toUpperCase()},I.trim=function pw(u,f,_){if((u=Fn(u))&&(_||f===z))return jn(u);if(!u||!(f=eo(f)))return u;var w=wo(u),S=wo(f);return kc(w,b_(w,S),ya(w,S)+1).join("")},I.trimEnd=function YF(u,f,_){if((u=Fn(u))&&(_||f===z))return u.slice(0,x_(u)+1);if(!u||!(f=eo(f)))return u;var w=wo(u);return kc(w,0,ya(w,wo(f))+1).join("")},I.trimStart=function pD(u,f,_){if((u=Fn(u))&&(_||f===z))return u.replace(zf,"");if(!u||!(f=eo(f)))return u;var w=wo(u);return kc(w,b_(w,wo(f))).join("")},I.truncate=function Jd(u,f){var _=30,w="...";if(Mi(f)){var S="separator"in f?f.separator:S;_="length"in f?un(f.length):_,w="omission"in f?eo(f.omission):w}var P=(u=Fn(u)).length;if(Dd(u)){var G=wo(u);P=G.length}if(_>=P)return u;var Y=_-hr(w);if(Y<1)return w;var Q=G?kc(G,0,Y).join(""):u.slice(0,Y);if(S===z)return Q+w;if(G&&(Y+=Q.length-Y),Wp(S)){if(u.slice(Y).search(S)){var _e,ye=Q;for(S.global||(S=wc(S.source,Fn(M0.exec(S))+"g")),S.lastIndex=0;_e=S.exec(ye);)var be=_e.index;Q=Q.slice(0,be===z?Y:be)}}else if(u.indexOf(eo(S),Y)!=Y){var Qe=Q.lastIndexOf(S);Qe>-1&&(Q=Q.slice(0,Qe))}return Q+w},I.unescape=function mD(u){return(u=Fn(u))&&NE.test(u)?u.replace(p0,Qf):u},I.uniqueId=function ty(u){var f=++bi;return Fn(u)+f},I.upperCase=mw,I.upperFirst=eu,I.each=xv,I.eachRight=ql,I.first=Tx,vw(I,function(){var u={};return ki(I,function(f,_){ri.call(I.prototype,_)||(u[_]=f)}),u}(),{chain:!1}),I.VERSION="4.17.21",Rn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){I[u].placeholder=I}),Rn(["drop","take"],function(u,f){kn.prototype[u]=function(_){_=_===z?1:fr(un(_),0);var w=this.__filtered__&&!f?new kn(this):this.clone();return w.__filtered__?w.__takeCount__=Jr(_,w.__takeCount__):w.__views__.push({size:Jr(_,_a),type:u+(w.__dir__<0?"Right":"")}),w},kn.prototype[u+"Right"]=function(_){return this.reverse()[u](_).reverse()}}),Rn(["filter","map","takeWhile"],function(u,f){var _=f+1,w=1==_||3==_;kn.prototype[u]=function(S){var P=this.clone();return P.__iteratees__.push({iteratee:Bt(S,3),type:_}),P.__filtered__=P.__filtered__||w,P}}),Rn(["head","last"],function(u,f){var _="take"+(f?"Right":"");kn.prototype[u]=function(){return this[_](1).value()[0]}}),Rn(["initial","tail"],function(u,f){var _="drop"+(f?"":"Right");kn.prototype[u]=function(){return this.__filtered__?new kn(this):this[_](1)}}),kn.prototype.compact=function(){return this.filter(ss)},kn.prototype.find=function(u){return this.filter(u).head()},kn.prototype.findLast=function(u){return this.reverse().find(u)},kn.prototype.invokeMap=mn(function(u,f){return"function"==typeof u?new kn(this):this.map(function(_){return Ma(_,u,f)})}),kn.prototype.reject=function(u){return this.filter(Ev(Bt(u)))},kn.prototype.slice=function(u,f){u=un(u);var _=this;return _.__filtered__&&(u>0||f<0)?new kn(_):(u<0?_=_.takeRight(-u):u&&(_=_.drop(u)),f!==z&&(_=(f=un(f))<0?_.dropRight(-f):_.take(f-u)),_)},kn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},kn.prototype.toArray=function(){return this.take(_a)},ki(kn.prototype,function(u,f){var _=/^(?:filter|find|map|reject)|While$/.test(f),w=/^(?:head|last)$/.test(f),S=I[w?"take"+("last"==f?"Right":""):f],P=w||/^find/.test(f);S&&(I.prototype[f]=function(){var G=this.__wrapped__,Y=w?[1]:arguments,Q=G instanceof kn,_e=Y[0],ye=Q||sn(G),be=function(En){var Ln=S.apply(I,Vl([En],Y));return w&&Qe?Ln[0]:Ln};ye&&_&&"function"==typeof _e&&1!=_e.length&&(Q=ye=!1);var Qe=this.__chain__,zt=P&&!Qe,gn=Q&&!this.__actions__.length;if(!P&&ye){G=gn?G:new kn(this);var Ht=u.apply(G,Y);return Ht.__actions__.push({func:Pp,args:[be],thisArg:z}),new Ai(Ht,Qe)}return zt&&gn?u.apply(this,Y):(Ht=this.thru(be),zt?w?Ht.value()[0]:Ht.value():Ht)})}),Rn(["pop","push","shift","sort","splice","unshift"],function(u){var f=rr[u],_=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",w=/^(?:pop|shift)$/.test(u);I.prototype[u]=function(){var S=arguments;if(w&&!this.__chain__){var P=this.value();return f.apply(sn(P)?P:[],S)}return this[_](function(G){return f.apply(sn(G)?G:[],S)})}}),ki(kn.prototype,function(u,f){var _=I[f];if(_){var w=_.name+"";ri.call(Fd,w)||(Fd[w]=[]),Fd[w].push({name:f,func:_})}}),Fd[Xd(z,ur).name]=[{name:"wrapper",func:z}],kn.prototype.clone=function V0(){var u=new kn(this.__wrapped__);return u.__actions__=to(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=to(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=to(this.__views__),u},kn.prototype.reverse=function Bd(){if(this.__filtered__){var u=new kn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},kn.prototype.value=function Ss(){var u=this.__wrapped__.value(),f=this.__dir__,_=sn(u),w=f<0,S=_?u.length:0,P=function Cp(u,f,_){for(var w=-1,S=_.length;++w<S;){var P=_[w],G=P.size;switch(P.type){case"drop":u+=G;break;case"dropRight":f-=G;break;case"take":f=Jr(f,u+G);break;case"takeRight":u=fr(u,f-G)}}return{start:u,end:f}}(0,S,this.__views__),G=P.start,Y=P.end,Q=Y-G,_e=w?Y:G-1,ye=this.__iteratees__,be=ye.length,Qe=0,bt=Jr(Q,this.__takeCount__);if(!_||!w&&S==Q&&bt==Q)return Sa(u,this.__actions__);var zt=[];e:for(;Q--&&Qe<bt;){for(var gn=-1,Ht=u[_e+=f];++gn<be;){var En=ye[gn],os=En.type,as=(0,En.iteratee)(Ht);if(2==os)Ht=as;else if(!as){if(1==os)continue e;break e}}zt[Qe++]=Ht}return zt},I.prototype.at=Gx,I.prototype.chain=function Wx(){return $x(this)},I.prototype.commit=function Op(){return new Ai(this.value(),this.__chain__)},I.prototype.next=function vv(){this.__values__===z&&(this.__values__=Fv(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?z:this.__values__[this.__index__++]}},I.prototype.plant=function o1(u){for(var f,_=this;_ instanceof Cc;){var w=rs(_);w.__index__=0,w.__values__=z,f?S.__wrapped__=w:f=w;var S=w;_=_.__wrapped__}return S.__wrapped__=u,f},I.prototype.reverse=function a1(){var u=this.__wrapped__;if(u instanceof kn){var f=u;return this.__actions__.length&&(f=new kn(this)),(f=f.reverse()).__actions__.push({func:Pp,args:[uv],thisArg:z}),new Ai(f,this.__chain__)}return this.thru(uv)},I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=function FF(){return Sa(this.__wrapped__,this.__actions__)},I.prototype.first=I.prototype.head,nh&&(I.prototype[nh]=function Kd(){return this}),I}();Sr._=ws,(dn=function(){return ws}.call(Ws,_s,Ws,zo))!==z&&(zo.exports=dn)}.call(this)},738:function(zo){var Ws;zo.exports=((Ws=function(){function _s(Ci){return Br.appendChild(Ci.dom),Ci}function dn(Ci){for(var Si=0;Si<Br.children.length;Si++)Br.children[Si].style.display=Si===Ci?"block":"none";z=Ci}var z=0,Br=document.createElement("div");Br.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",Br.addEventListener("click",function(Ci){Ci.preventDefault(),dn(++z%Br.children.length)},!1);var Qr=(performance||Date).now(),Qt=Qr,Vn=0,Fl=_s(new Ws.Panel("FPS","#0ff","#002")),qa=_s(new Ws.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var js=_s(new Ws.Panel("MB","#f08","#201"));return dn(0),{REVISION:16,dom:Br,addPanel:_s,showPanel:dn,begin:function(){Qr=(performance||Date).now()},end:function(){Vn++;var Ci=(performance||Date).now();if(qa.update(Ci-Qr,200),Ci>Qt+1e3&&(Fl.update(1e3*Vn/(Ci-Qt),100),Qt=Ci,Vn=0,js)){var Si=performance.memory;js.update(Si.usedJSHeapSize/1048576,Si.jsHeapSizeLimit/1048576)}return Ci},update:function(){Qr=this.end()},domElement:Br,setMode:dn}}).Panel=function(_s,dn,z){var Br=1/0,Qr=0,Qt=Math.round,Vn=Qt(window.devicePixelRatio||1),Fl=80*Vn,qa=48*Vn,js=3*Vn,Ci=2*Vn,Si=3*Vn,vs=15*Vn,Ys=74*Vn,qs=30*Vn,Ho=document.createElement("canvas");Ho.width=Fl,Ho.height=qa,Ho.style.cssText="width:80px;height:48px";var On=Ho.getContext("2d");return On.font="bold "+9*Vn+"px Helvetica,Arial,sans-serif",On.textBaseline="top",On.fillStyle=z,On.fillRect(0,0,Fl,qa),On.fillStyle=dn,On.fillText(_s,js,Ci),On.fillRect(Si,vs,Ys,qs),On.fillStyle=z,On.globalAlpha=.9,On.fillRect(Si,vs,Ys,qs),{dom:Ho,update:function(ur,_c){Br=Math.min(Br,ur),Qr=Math.max(Qr,ur),On.fillStyle=z,On.globalAlpha=1,On.fillRect(0,0,Fl,vs),On.fillStyle=dn,On.fillText(Qt(ur)+" "+_s+" ("+Qt(Br)+"-"+Qt(Qr)+")",js,Ci),On.drawImage(Ho,Si+Vn,vs,Ys-Vn,qs,Si,vs,Ys-Vn,qs),On.fillRect(Si+Ys-Vn,vs,Vn,qs),On.fillStyle=z,On.globalAlpha=.9,On.fillRect(Si+Ys-Vn,vs,Vn,Qt((1-ur/_c)*qs))}}},Ws)}},zo=>{zo(zo.s=36)}]);