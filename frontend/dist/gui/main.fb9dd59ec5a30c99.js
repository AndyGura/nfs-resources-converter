(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{5673:(z,ae,O)=>{"use strict";function B(i){return"function"==typeof i}function W(i){const e=i(n=>{Error.call(n),n.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}const Q=W(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e});function le(i,t){if(i){const e=i.indexOf(t);0<=e&&i.splice(e,1)}}class J{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(const s of e)s.remove(this);else e.remove(this);const{initialTeardown:n}=this;if(B(n))try{n()}catch(s){t=s instanceof Q?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{je(s)}catch(o){t=t??[],o instanceof Q?t=[...t,...o.errors]:t.push(o)}}if(t)throw new Q(t)}}add(t){var e;if(t&&t!==this)if(this.closed)je(t);else{if(t instanceof J){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(e=this._finalizers)&&void 0!==e?e:[]).push(t)}}_hasParent(t){const{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){const{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){const{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&le(e,t)}remove(t){const{_finalizers:e}=this;e&&le(e,t),t instanceof J&&t._removeParent(this)}}J.EMPTY=(()=>{const i=new J;return i.closed=!0,i})();const ce=J.EMPTY;function me(i){return i instanceof J||i&&"closed"in i&&B(i.remove)&&B(i.add)&&B(i.unsubscribe)}function je(i){B(i)?i():i.unsubscribe()}const St={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gt={setTimeout(i,t,...e){const{delegate:n}=gt;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){const{delegate:t}=gt;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function Wt(i){gt.setTimeout(()=>{const{onUnhandledError:t}=St;if(!t)throw i;t(i)})}function Nt(){}const In=Bt("C",void 0,void 0);function Bt(i,t,e){return{kind:i,value:t,error:e}}let un=null;function Sn(i){if(St.useDeprecatedSynchronousErrorHandling){const t=!un;if(t&&(un={errorThrown:!1,error:null}),i(),t){const{errorThrown:e,error:n}=un;if(un=null,e)throw n}}else i()}class _i extends J{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,me(t)&&t.add(this)):this.destination=En}static create(t,e,n){return new gn(t,e,n)}next(t){this.isStopped?as(function di(i){return Bt("N",i,void 0)}(t),this):this._next(t)}error(t){this.isStopped?as(function Un(i){return Bt("E",void 0,i)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?as(In,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Rn=Function.prototype.bind;function vi(i,t){return Rn.call(i,t)}class Pn{constructor(t){this.partialObserver=t}next(t){const{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Vi(n)}}error(t){const{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Vi(n)}else Vi(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Vi(e)}}}class gn extends _i{constructor(t,e,n){let r;if(super(),B(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let s;this&&St.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&vi(t.next,s),error:t.error&&vi(t.error,s),complete:t.complete&&vi(t.complete,s)}):r=t}this.destination=new Pn(r)}}function Vi(i){St.useDeprecatedSynchronousErrorHandling?function Mn(i){St.useDeprecatedSynchronousErrorHandling&&un&&(un.errorThrown=!0,un.error=i)}(i):Wt(i)}function as(i,t){const{onStoppedNotification:e}=St;e&&gt.setTimeout(()=>e(i,t))}const En={closed:!0,next:Nt,error:function Tr(i){throw i},complete:Nt},As="function"==typeof Symbol&&Symbol.observable||"@@observable";function zi(i){return i}function ql(i){return 0===i.length?zi:1===i.length?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}let Nn=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){const n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){const s=function rz(i){return i&&i instanceof _i||function iz(i){return i&&B(i.next)&&B(i.error)&&B(i.complete)}(i)&&me(i)}(e)?e:new gn(e,n,r);return Sn(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return new(n=D1(n))((r,s)=>{const o=new gn({next:a=>{try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(e){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(e)}[As](){return this}pipe(...e){return ql(e)(this)}toPromise(e){return new(e=D1(e))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=t=>new i(t),i})();function D1(i){var t;return null!==(t=i??St.Promise)&&void 0!==t?t:Promise}const sz=W(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let De=(()=>{class i extends Nn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const n=new T1(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new sz}next(e){Sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(e)}})}error(e){Sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){Sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:n,isStopped:r,observers:s}=this;return n||r?ce:(this.currentObservers=null,s.push(e),new J(()=>{this.currentObservers=null,le(s,e)}))}_checkFinalizedStatuses(e){const{hasError:n,thrownError:r,isStopped:s}=this;n?e.error(r):s&&e.complete()}asObservable(){const e=new Nn;return e.source=this,e}}return i.create=(t,e)=>new T1(t,e),i})();class T1 extends De{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)}error(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)}complete(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)}_subscribe(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:ce}}function k1(i){return B(i?.lift)}function ii(i){return t=>{if(k1(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zn(i,t,e,n,r){return new oz(i,t,e,n,r)}class oz extends _i{constructor(t,e,n,r,s,o){super(t),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=e?function(a){try{e(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:e}=this;super.unsubscribe(),!e&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function rt(i,t){return ii((e,n)=>{let r=0;e.subscribe(Zn(n,s=>{n.next(i.call(t,s,r++))}))})}function al(i){return this instanceof al?(this.v=i,this):new al(i)}function O1(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=function yy(i){var t="function"==typeof Symbol&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(s){e[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const wy=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function F1(i){return B(i?.then)}function L1(i){return B(i[As])}function N1(i){return Symbol.asyncIterator&&B(i?.[Symbol.asyncIterator])}function B1(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const U1=function Pz(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function V1(i){return B(i?.[U1])}function z1(i){return function P1(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=e.apply(i,t||[]),s=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function o(p){return function(f){return Promise.resolve(f).then(p,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function a(p,f){n[p]&&(r[p]=function(g){return new Promise(function(m,_){s.push([p,g,m,_])>1||l(p,g)})},f&&(r[p]=f(r[p])))}function l(p,f){try{!function c(p){p.value instanceof al?Promise.resolve(p.value.v).then(d,u):h(s[0][2],p)}(n[p](f))}catch(g){h(s[0][3],g)}}function d(p){l("next",p)}function u(p){l("throw",p)}function h(p,f){p(f),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const e=i.getReader();try{for(;;){const{value:n,done:r}=yield al(e.read());if(r)return yield al(void 0);yield yield al(n)}}finally{e.releaseLock()}})}function H1(i){return B(i?.getReader)}function mr(i){if(i instanceof Nn)return i;if(null!=i){if(L1(i))return function Oz(i){return new Nn(t=>{const e=i[As]();if(B(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(wy(i))return function Fz(i){return new Nn(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}(i);if(F1(i))return function Lz(i){return new Nn(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Wt)})}(i);if(N1(i))return $1(i);if(V1(i))return function Nz(i){return new Nn(t=>{for(const e of i)if(t.next(e),t.closed)return;t.complete()})}(i);if(H1(i))return function Bz(i){return $1(z1(i))}(i)}throw B1(i)}function $1(i){return new Nn(t=>{(function Uz(i,t){var e,n,r,s;return function I1(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){try{for(e=O1(i);!(n=yield e.next()).done;)if(t.next(n.value),t.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=e.return)&&(yield s.call(e))}finally{if(r)throw r.error}}t.complete()})})(i,t).catch(e=>t.error(e))})}function va(i,t,e,n=0,r=!1){const s=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function Qi(i,t,e=1/0){return B(t)?Qi((n,r)=>rt((s,o)=>t(n,s,r,o))(mr(i(n,r))),e):("number"==typeof t&&(e=t),ii((n,r)=>function Vz(i,t,e,n,r,s,o,a){const l=[];let c=0,d=0,u=!1;const h=()=>{u&&!l.length&&!c&&t.complete()},p=g=>c<n?f(g):l.push(g),f=g=>{s&&t.next(g),c++;let m=!1;mr(e(g,d++)).subscribe(Zn(t,_=>{r?.(_),s?p(_):t.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(c--;l.length&&c<n;){const _=l.shift();o?va(t,o,()=>f(_)):f(_)}h()}catch(_){t.error(_)}}))};return i.subscribe(Zn(t,p,()=>{u=!0,h()})),()=>{a?.()}}(n,r,i,e)))}function xd(i=1/0){return Qi(zi,i)}const Js=new Nn(i=>i.complete());function G1(i){return i&&B(i.schedule)}function My(i){return i[i.length-1]}function j1(i){return B(My(i))?i.pop():void 0}function qh(i){return G1(My(i))?i.pop():void 0}function W1(i,t=0){return ii((e,n)=>{e.subscribe(Zn(n,r=>va(n,i,()=>n.next(r),t),()=>va(n,i,()=>n.complete(),t),r=>va(n,i,()=>n.error(r),t)))})}function Y1(i,t=0){return ii((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function X1(i,t){if(!i)throw new Error("Iterable cannot be null");return new Nn(e=>{va(e,t,()=>{const n=i[Symbol.asyncIterator]();va(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function Hi(i,t){return t?function Xz(i,t){if(null!=i){if(L1(i))return function $z(i,t){return mr(i).pipe(Y1(t),W1(t))}(i,t);if(wy(i))return function jz(i,t){return new Nn(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}(i,t);if(F1(i))return function Gz(i,t){return mr(i).pipe(Y1(t),W1(t))}(i,t);if(N1(i))return X1(i,t);if(V1(i))return function Wz(i,t){return new Nn(e=>{let n;return va(e,t,()=>{n=i[U1](),va(e,t,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void e.error(o)}s?e.complete():e.next(r)},0,!0)}),()=>B(n?.return)&&n.return()})}(i,t);if(H1(i))return function Yz(i,t){return X1(z1(i),t)}(i,t)}throw B1(i)}(i,t):mr(i)}function gr(...i){const t=qh(i),e=function Hz(i,t){return"number"==typeof My(i)?i.pop():t}(i,1/0),n=i;return n.length?1===n.length?mr(n[0]):xd(e)(Hi(n,t)):Js}function Cy(i={}){const{connector:t=(()=>new De),resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,d=!1,u=!1;const h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),o=l=void 0,d=u=!1},f=()=>{const g=o;p(),g?.unsubscribe()};return ii((g,m)=>{c++,!u&&!d&&h();const _=l=l??t();m.add(()=>{c--,0===c&&!u&&!d&&(a=Sy(f,r))}),_.subscribe(m),!o&&c>0&&(o=new gn({next:b=>_.next(b),error:b=>{u=!0,h(),a=Sy(p,e,b),_.error(b)},complete:()=>{d=!0,h(),a=Sy(p,n),_.complete()}}),mr(g).subscribe(o))})(s)}}function Sy(i,t,...e){if(!0===t)return void i();if(!1===t)return;const n=new gn({next:()=>{n.unsubscribe(),i()}});return mr(t(...e)).subscribe(n)}function Qn(i){for(let t in i)if(i[t]===Qn)return t;throw Error("Could not find renamed property on target object.")}function Ey(i,t){for(const e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function Jn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Jn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const t=i.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Ay(i,t){return null==i||""===i?null===t?"":t:null==t||""===t?i:i+" "+t}const qz=Qn({__forward_ref__:Qn});function An(i){return i.__forward_ref__=An,i.toString=function(){return Jn(this())},i}function Rt(i){return Dy(i)?i():i}function Dy(i){return"function"==typeof i&&i.hasOwnProperty(qz)&&i.__forward_ref__===An}function Ty(i){return i&&!!i.\u0275providers}const km="https://g.co/ng/security#xss";class he extends Error{constructor(t,e){super(Im(t,e)),this.code=t}}function Im(i,t){return`NG0${Math.abs(i)}${t?": "+t.trim():""}`}function qt(i){return"string"==typeof i?i:null==i?"":String(i)}function Rm(i,t){throw new he(-201,!1)}function eo(i,t){null==i&&function jn(i,t,e,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${e} ${n} ${t} <=Actual]`))}(t,i,null,"!=")}function Te(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Dt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Pm(i){return q1(i,Om)||q1(i,Z1)}function q1(i,t){return i.hasOwnProperty(t)?i[t]:null}function K1(i){return i&&(i.hasOwnProperty(ky)||i.hasOwnProperty(i4))?i[ky]:null}const Om=Qn({\u0275prov:Qn}),ky=Qn({\u0275inj:Qn}),Z1=Qn({ngInjectableDef:Qn}),i4=Qn({ngInjectorDef:Qn});var Pt=(()=>((Pt=Pt||{})[Pt.Default=0]="Default",Pt[Pt.Host=1]="Host",Pt[Pt.Self=2]="Self",Pt[Pt.SkipSelf=4]="SkipSelf",Pt[Pt.Optional=8]="Optional",Pt))();let Iy;function to(i){const t=Iy;return Iy=i,t}function Q1(i,t,e){const n=Pm(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:e&Pt.Optional?null:void 0!==t?t:void Rm(Jn(i))}const ri=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Kh={},Ry="__NG_DI_FLAG__",Fm="ngTempTokenPath",s4="ngTokenPath",o4=/\n/gm,a4="\u0275",J1="__source";let Zh;function wd(i){const t=Zh;return Zh=i,t}function l4(i,t=Pt.Default){if(void 0===Zh)throw new he(-203,!1);return null===Zh?Q1(i,void 0,t):Zh.get(i,t&Pt.Optional?null:void 0,t)}function K(i,t=Pt.Default){return(function r4(){return Iy}()||l4)(Rt(i),t)}function $t(i,t=Pt.Default){return K(i,Lm(t))}function Lm(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Py(i){const t=[];for(let e=0;e<i.length;e++){const n=Rt(i[e]);if(Array.isArray(n)){if(0===n.length)throw new he(900,!1);let r,s=Pt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=c4(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}t.push(K(r,s))}else t.push(K(n))}return t}function Qh(i,t){return i[Ry]=t,i.prototype[Ry]=t,i}function c4(i){return i[Ry]}function ba(i){return{toString:i}.toString()}var jo=(()=>((jo=jo||{})[jo.OnPush=0]="OnPush",jo[jo.Default=1]="Default",jo))(),xo=(()=>{return(i=xo||(xo={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",xo;var i})();const ya={},Vn=[],Nm=Qn({\u0275cmp:Qn}),Oy=Qn({\u0275dir:Qn}),Fy=Qn({\u0275pipe:Qn}),tA=Qn({\u0275mod:Qn}),xa=Qn({\u0275fac:Qn}),Jh=Qn({__NG_ELEMENT_ID__:Qn});let h4=0;function Xe(i){return ba(()=>{const t=iA(i),e={...t,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===jo.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||xo.Emulated,id:"c"+h4++,styles:i.styles||Vn,_:null,schemas:i.schemas||null,tView:null};rA(e);const n=i.dependencies;return e.directiveDefs=Bm(n,!1),e.pipeDefs=Bm(n,!0),e})}function ep(i,t,e){const n=i.\u0275cmp;n.directiveDefs=Bm(t,!1),n.pipeDefs=Bm(e,!0)}function p4(i){return Wn(i)||kr(i)}function f4(i){return null!==i}function Ot(i){return ba(()=>({type:i.type,bootstrap:i.bootstrap||Vn,declarations:i.declarations||Vn,imports:i.imports||Vn,exports:i.exports||Vn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function nA(i,t){if(null==i)return ya;const e={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),e[r]=n,t&&(t[r]=s)}return e}function ge(i){return ba(()=>{const t=iA(i);return rA(t),t})}function ls(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Wn(i){return i[Nm]||null}function kr(i){return i[Oy]||null}function cs(i){return i[Fy]||null}function Ts(i,t){const e=i[tA]||null;if(!e&&!0===t)throw new Error(`Type ${Jn(i)} does not have '\u0275mod' property.`);return e}function iA(i){const t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||Vn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nA(i.inputs,t),outputs:nA(i.outputs)}}function rA(i){i.features?.forEach(t=>t(i))}function Bm(i,t){if(!i)return null;const e=t?cs:p4;return()=>("function"==typeof i?i():i).map(n=>e(n)).filter(f4)}const wa=0,st=1,an=2,Ci=3,wo=4,Kl=5,Ir=6,Cd=7,Ri=8,Um=9,Vm=10,hn=11,Ly=12,tp=13,sA=14,Sd=15,Rr=16,np=17,Ed=18,Wo=19,ip=20,oA=21,si=22,Ny=1,aA=2,zm=7,Hm=8,Ad=9,Gr=10;function ks(i){return Array.isArray(i)&&"object"==typeof i[Ny]}function Mo(i){return Array.isArray(i)&&!0===i[Ny]}function By(i){return 0!=(4&i.flags)}function rp(i){return i.componentOffset>-1}function $m(i){return 1==(1&i.flags)}function Co(i){return!!i.template}function g4(i){return 0!=(256&i[an])}function Zl(i,t){return i.hasOwnProperty(xa)?i[xa]:null}class b4{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Pi(){return dA}function dA(i){return i.type.prototype.ngOnChanges&&(i.setInput=x4),y4}function y4(){const i=hA(this),t=i?.current;if(t){const e=i.previous;if(e===ya)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function x4(i,t,e,n){const r=this.declaredInputs[e],s=hA(i)||function w4(i,t){return i[uA]=t}(i,{previous:ya,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new b4(l&&l.currentValue,t,a===ya),i[n]=t}Pi.ngInherit=!0;const uA="__ngSimpleChanges__";function hA(i){return i[uA]||null}const no=function(i,t,e){},pA="svg";function _r(i){for(;Array.isArray(i);)i=i[wa];return i}function Gm(i,t){return _r(t[i])}function Is(i,t){return _r(t[i.index])}function mA(i,t){return i.data[t]}function Dd(i,t){return i[t]}function ds(i,t){const e=t[i];return ks(e)?e:e[wa]}function jm(i){return 64==(64&i[an])}function cl(i,t){return null==t?null:i[t]}function gA(i){i[Ed]=0}function Vy(i,t){i[Kl]+=t;let e=i,n=i[Ci];for(;null!==n&&(1===t&&1===e[Kl]||-1===t&&0===e[Kl]);)n[Kl]+=t,e=n,n=n[Ci]}const Kt={lFrame:EA(null),bindingsEnabled:!0};function vA(){return Kt.bindingsEnabled}function we(){return Kt.lFrame.lView}function Dn(){return Kt.lFrame.tView}function nt(i){return Kt.lFrame.contextLView=i,i[Ri]}function it(i){return Kt.lFrame.contextLView=null,i}function vr(){let i=bA();for(;null!==i&&64===i.type;)i=i.parent;return i}function bA(){return Kt.lFrame.currentTNode}function Yo(i,t){const e=Kt.lFrame;e.currentTNode=i,e.isParent=t}function zy(){return Kt.lFrame.isParent}function Hy(){Kt.lFrame.isParent=!1}function jr(){const i=Kt.lFrame;let t=i.bindingRootIndex;return-1===t&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function Td(){return Kt.lFrame.bindingIndex++}function Ca(i){const t=Kt.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function F4(i,t){const e=Kt.lFrame;e.bindingIndex=e.bindingRootIndex=i,$y(t)}function $y(i){Kt.lFrame.currentDirectiveIndex=i}function Gy(i){const t=Kt.lFrame.currentDirectiveIndex;return-1===t?null:i[t]}function MA(){return Kt.lFrame.currentQueryIndex}function jy(i){Kt.lFrame.currentQueryIndex=i}function N4(i){const t=i[st];return 2===t.type?t.declTNode:1===t.type?i[Ir]:null}function CA(i,t,e){if(e&Pt.SkipSelf){let r=t,s=i;for(;!(r=r.parent,null!==r||e&Pt.Host||(r=N4(s),null===r||(s=s[Sd],10&r.type))););if(null===r)return!1;t=r,i=s}const n=Kt.lFrame=SA();return n.currentTNode=t,n.lView=i,!0}function Wy(i){const t=SA(),e=i[st];Kt.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function SA(){const i=Kt.lFrame,t=null===i?null:i.child;return null===t?EA(i):t}function EA(i){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=t),t}function AA(){const i=Kt.lFrame;return Kt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const DA=AA;function Yy(){const i=AA();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wr(){return Kt.lFrame.selectedIndex}function Ql(i){Kt.lFrame.selectedIndex=i}function bi(){const i=Kt.lFrame;return mA(i.tView,i.selectedIndex)}function Yr(){Kt.lFrame.currentNamespace=pA}function dl(){!function z4(){Kt.lFrame.currentNamespace=null}()}function Wm(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){const s=i.data[e].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks??(i.contentHooks=[])).push(-e,o),a&&((i.contentHooks??(i.contentHooks=[])).push(e,a),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(e,a)),l&&(i.viewHooks??(i.viewHooks=[])).push(-e,l),c&&((i.viewHooks??(i.viewHooks=[])).push(e,c),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(e,c)),null!=d&&(i.destroyHooks??(i.destroyHooks=[])).push(e,d)}}function Ym(i,t,e){TA(i,t,3,e)}function Xm(i,t,e,n){(3&i[an])===e&&TA(i,t,e,n)}function Xy(i,t){let e=i[an];(3&e)===t&&(e&=2047,e+=1,i[an]=e)}function TA(i,t,e,n){const s=n??-1,o=t.length-1;let a=0;for(let l=void 0!==n?65535&i[Ed]:0;l<o;l++)if("number"==typeof t[l+1]){if(a=t[l],null!=n&&a>=n)break}else t[l]<0&&(i[Ed]+=65536),(a<s||-1==s)&&(G4(i,e,t,l),i[Ed]=(4294901760&i[Ed])+l+2),l++}function G4(i,t,e,n){const r=e[n]<0,s=e[n+1],a=i[r?-e[n]:e[n]];if(r){if(i[an]>>11<i[Ed]>>16&&(3&i[an])===t){i[an]+=2048,no(4,a,s);try{s.call(a)}finally{no(5,a,s)}}}else{no(4,a,s);try{s.call(a)}finally{no(5,a,s)}}}const kd=-1;class op{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ky(i,t,e){let n=0;for(;n<e.length;){const r=e[n];if("number"==typeof r){if(0!==r)break;n++;const s=e[n++],o=e[n++],a=e[n++];i.setAttribute(t,o,a,s)}else{const s=r,o=e[++n];IA(s)?i.setProperty(t,s,o):i.setAttribute(t,s,o),n++}}return n}function kA(i){return 3===i||4===i||6===i}function IA(i){return 64===i.charCodeAt(0)}function ap(i,t){if(null!==t&&0!==t.length)if(null===i||0===i.length)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){const r=t[n];"number"==typeof r?e=r:0===e||RA(i,e,r,null,-1===e||2===e?t[++n]:null)}}return i}function RA(i,t,e,n,r){let s=0,o=i.length;if(-1===t)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===t){o=-1;break}if(a>t){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===e){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,t),s=o+1),i.splice(s++,0,e),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function PA(i){return i!==kd}function qm(i){return 32767&i}function Km(i,t){let e=function X4(i){return i>>16}(i),n=t;for(;e>0;)n=n[Sd],e--;return n}let Zy=!0;function Zm(i){const t=Zy;return Zy=i,t}const OA=255,FA=5;let q4=0;const Xo={};function Qm(i,t){const e=LA(i,t);if(-1!==e)return e;const n=t[st];n.firstCreatePass&&(i.injectorIndex=t.length,Qy(n.data,i),Qy(t,null),Qy(n.blueprint,null));const r=Jy(i,t),s=i.injectorIndex;if(PA(r)){const o=qm(r),a=Km(r,t),l=a[st].data;for(let c=0;c<8;c++)t[s+c]=a[o+c]|l[o+c]}return t[s+8]=r,s}function Qy(i,t){i.push(0,0,0,0,0,0,0,0,t)}function LA(i,t){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===t[i.injectorIndex+8]?-1:i.injectorIndex}function Jy(i,t){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;null!==r;){if(n=$A(r),null===n)return kd;if(e++,r=r[Sd],-1!==n.injectorIndex)return n.injectorIndex|e<<16}return kd}function e0(i,t,e){!function K4(i,t,e){let n;"string"==typeof e?n=e.charCodeAt(0)||0:e.hasOwnProperty(Jh)&&(n=e[Jh]),null==n&&(n=e[Jh]=q4++);const r=n&OA;t.data[i+(r>>FA)]|=1<<r}(i,t,e)}function NA(i,t,e){if(e&Pt.Optional||void 0!==i)return i;Rm()}function BA(i,t,e,n){if(e&Pt.Optional&&void 0===n&&(n=null),!(e&(Pt.Self|Pt.Host))){const r=i[Um],s=to(void 0);try{return r?r.get(t,n,e&Pt.Optional):Q1(t,n,e&Pt.Optional)}finally{to(s)}}return NA(n,0,e)}function UA(i,t,e,n=Pt.Default,r){if(null!==i){if(1024&t[an]){const o=function tH(i,t,e,n,r){let s=i,o=t;for(;null!==s&&null!==o&&1024&o[an]&&!(256&o[an]);){const a=VA(s,o,e,n|Pt.Self,Xo);if(a!==Xo)return a;let l=s.parent;if(!l){const c=o[oA];if(c){const d=c.get(e,Xo,n);if(d!==Xo)return d}l=$A(o),o=o[Sd]}s=l}return r}(i,t,e,n,Xo);if(o!==Xo)return o}const s=VA(i,t,e,n,Xo);if(s!==Xo)return s}return BA(t,e,n,r)}function VA(i,t,e,n,r){const s=function J4(i){if("string"==typeof i)return i.charCodeAt(0)||0;const t=i.hasOwnProperty(Jh)?i[Jh]:void 0;return"number"==typeof t?t>=0?t&OA:eH:t}(e);if("function"==typeof s){if(!CA(t,i,n))return n&Pt.Host?NA(r,0,n):BA(t,e,n,r);try{const o=s(n);if(null!=o||n&Pt.Optional)return o;Rm()}finally{DA()}}else if("number"==typeof s){let o=null,a=LA(i,t),l=kd,c=n&Pt.Host?t[Rr][Ir]:null;for((-1===a||n&Pt.SkipSelf)&&(l=-1===a?Jy(i,t):t[a+8],l!==kd&&HA(n,!1)?(o=t[st],a=qm(l),t=Km(l,t)):a=-1);-1!==a;){const d=t[st];if(zA(s,a,d.data)){const u=Q4(a,t,e,o,n,c);if(u!==Xo)return u}l=t[a+8],l!==kd&&HA(n,t[st].data[a+8]===c)&&zA(s,a,t)?(o=d,a=qm(l),t=Km(l,t)):a=-1}}return r}function Q4(i,t,e,n,r,s){const o=t[st],a=o.data[i+8],d=Jm(a,o,e,null==n?rp(a)&&Zy:n!=o&&0!=(3&a.type),r&Pt.Host&&s===a);return null!==d?Jl(t,o,d,a):Xo}function Jm(i,t,e,n,r){const s=i.providerIndexes,o=t.data,a=1048575&s,l=i.directiveStart,d=s>>20,h=r?a+d:i.directiveEnd;for(let p=n?a:a+d;p<h;p++){const f=o[p];if(p<l&&e===f||p>=l&&f.type===e)return p}if(r){const p=o[l];if(p&&Co(p)&&p.type===e)return l}return null}function Jl(i,t,e,n){let r=i[e];const s=t.data;if(function j4(i){return i instanceof op}(r)){const o=r;o.resolving&&function Kz(i,t){const e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new he(-200,`Circular dependency in DI detected for ${i}${e}`)}(function Gn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():qt(i)}(s[e]));const a=Zm(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?to(o.injectImpl):null;CA(i,n,Pt.Default);try{r=i[e]=o.factory(void 0,s,i,n),t.firstCreatePass&&e>=n.directiveStart&&function $4(i,t,e){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=t.type.prototype;if(n){const o=dA(t);(e.preOrderHooks??(e.preOrderHooks=[])).push(i,o),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(i,o)}r&&(e.preOrderHooks??(e.preOrderHooks=[])).push(0-i,r),s&&((e.preOrderHooks??(e.preOrderHooks=[])).push(i,s),(e.preOrderCheckHooks??(e.preOrderCheckHooks=[])).push(i,s))}(e,s[e],t)}finally{null!==l&&to(l),Zm(a),o.resolving=!1,DA()}}return r}function zA(i,t,e){return!!(e[t+(i>>FA)]&1<<i)}function HA(i,t){return!(i&Pt.Self||i&Pt.Host&&t)}class Id{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return UA(this._tNode,this._lView,t,Lm(n),e)}}function eH(){return new Id(vr(),we())}function ui(i){return ba(()=>{const t=i.prototype.constructor,e=t[xa]||t0(t),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[xa]||t0(r);if(s&&s!==e)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function t0(i){return Dy(i)?()=>{const t=t0(Rt(i));return t&&t()}:Zl(i)}function $A(i){const t=i[st],e=t.type;return 2===e?t.declTNode:1===e?i[Ir]:null}function qo(i){return function Z4(i,t){if("class"===t)return i.classes;if("style"===t)return i.styles;const e=i.attrs;if(e){const n=e.length;let r=0;for(;r<n;){const s=e[r];if(kA(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof e[r];)r++;else{if(s===t)return e[r+1];r+=2}}}return null}(vr(),i)}const Pd="__parameters__";function Fd(i,t,e){return ba(()=>{const n=function n0(i){return function(...e){if(i){const n=i(...e);for(const r in n)this[r]=n[r]}}}(t);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const u=l.hasOwnProperty(Pd)?l[Pd]:Object.defineProperty(l,Pd,{value:[]})[Pd];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(o),l}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class ue{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=Te({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function ec(i,t){i.forEach(e=>Array.isArray(e)?ec(e,t):t(e))}function jA(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function eg(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function dp(i,t){const e=[];for(let n=0;n<i;n++)e.push(t);return e}function Rs(i,t,e){let n=Ld(i,t);return n>=0?i[1|n]=e:(n=~n,function sH(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(1===r)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;)i[r]=i[r-2],r--;i[t]=e,i[t+1]=n}}(i,n,t,e)),n}function s0(i,t){const e=Ld(i,t);if(e>=0)return i[1|e]}function Ld(i,t){return function WA(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<e];if(t===o)return s<<e;o>t?r=s:n=s+1}return~(r<<e)}(i,t,1)}const ng=Qh(Fd("Inject",i=>({token:i})),-1),Ps=Qh(Fd("Optional"),8),Ko=Qh(Fd("SkipSelf"),4);var us=(()=>((us=us||{})[us.Important=1]="Important",us[us.DashCase=2]="DashCase",us))();const d0=new Map;let AH=0;const h0="__ngContext__";function Pr(i,t){ks(t)?(i[h0]=t[ip],function TH(i){d0.set(i[ip],i)}(t)):i[h0]=t}let p0;function f0(i,t){return p0(i,t)}function fp(i){const t=i[Ci];return Mo(t)?t[Ci]:t}function m0(i){return hD(i[tp])}function g0(i){return hD(i[wo])}function hD(i){for(;null!==i&&!Mo(i);)i=i[wo];return i}function Bd(i,t,e,n,r){if(null!=n){let s,o=!1;Mo(n)?s=n:ks(n)&&(o=!0,n=n[wa]);const a=_r(n);0===i&&null!==e?null==r?vD(t,e,a):tc(t,e,a,r||null,!0):1===i&&null!==e?tc(t,e,a,r||null,!0):2===i?function M0(i,t,e){const n=sg(i,t);n&&function qH(i,t,e,n){i.removeChild(t,e,n)}(i,n,t,e)}(t,a,o):3===i&&t.destroyNode(a),null!=s&&function QH(i,t,e,n,r){const s=e[zm];s!==_r(e)&&Bd(t,i,n,s,r);for(let a=Gr;a<e.length;a++){const l=e[a];mp(l[st],l,i,t,n,s)}}(t,i,s,e,r)}}function v0(i,t,e){return i.createElement(t,e)}function fD(i,t){const e=i[Ad],n=e.indexOf(t),r=t[Ci];512&t[an]&&(t[an]&=-513,Vy(r,-1)),e.splice(n,1)}function b0(i,t){if(i.length<=Gr)return;const e=Gr+t,n=i[e];if(n){const r=n[np];null!==r&&r!==i&&fD(r,n),t>0&&(i[e-1][wo]=n[wo]);const s=eg(i,Gr+t);!function zH(i,t){mp(i,t,t[hn],2,null,null),t[wa]=null,t[Ir]=null}(n[st],n);const o=s[Wo];null!==o&&o.detachView(s[st]),n[Ci]=null,n[wo]=null,n[an]&=-65}return n}function mD(i,t){if(!(128&t[an])){const e=t[hn];e.destroyNode&&mp(i,t,e,3,null,null),function GH(i){let t=i[tp];if(!t)return y0(i[st],i);for(;t;){let e=null;if(ks(t))e=t[tp];else{const n=t[Gr];n&&(e=n)}if(!e){for(;t&&!t[wo]&&t!==i;)ks(t)&&y0(t[st],t),t=t[Ci];null===t&&(t=i),ks(t)&&y0(t[st],t),e=t&&t[wo]}t=e}}(t)}}function y0(i,t){if(!(128&t[an])){t[an]&=-65,t[an]|=128,function XH(i,t){let e;if(null!=i&&null!=(e=i.destroyHooks))for(let n=0;n<e.length;n+=2){const r=t[e[n]];if(!(r instanceof op)){const s=e[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];no(4,a,l);try{l.call(a)}finally{no(5,a,l)}}else{no(4,r,s);try{s.call(r)}finally{no(5,r,s)}}}}}(i,t),function YH(i,t){const e=i.cleanup,n=t[Cd];let r=-1;if(null!==e)for(let s=0;s<e.length-1;s+=2)if("string"==typeof e[s]){const o=e[s+3];o>=0?n[r=o]():n[r=-o].unsubscribe(),s+=2}else{const o=n[r=e[s+1]];e[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();t[Cd]=null}}(i,t),1===t[st].type&&t[hn].destroy();const e=t[np];if(null!==e&&Mo(t[Ci])){e!==t[Ci]&&fD(e,t);const n=t[Wo];null!==n&&n.detachView(i)}!function kH(i){d0.delete(i[ip])}(t)}}function gD(i,t,e){return function _D(i,t,e){let n=t;for(;null!==n&&40&n.type;)n=(t=n).parent;if(null===n)return e[wa];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===xo.None||s===xo.Emulated)return null}return Is(n,e)}}(i,t.parent,e)}function tc(i,t,e,n,r){i.insertBefore(t,e,n,r)}function vD(i,t,e){i.appendChild(t,e)}function bD(i,t,e,n,r){null!==n?tc(i,t,e,n,r):vD(i,t,e)}function sg(i,t){return i.parentNode(t)}function yD(i,t,e){return wD(i,t,e)}let x0,lg,E0,wD=function xD(i,t,e){return 40&i.type?Is(i,e):null};function og(i,t,e,n){const r=gD(i,n,t),s=t[hn],a=yD(n.parent||t[Ir],n,t);if(null!=r)if(Array.isArray(e))for(let l=0;l<e.length;l++)bD(s,r,e[l],a,!1);else bD(s,r,e,a,!1);void 0!==x0&&x0(s,n,t,e,r)}function ag(i,t){if(null!==t){const e=t.type;if(3&e)return Is(t,i);if(4&e)return w0(-1,i[t.index]);if(8&e){const n=t.child;if(null!==n)return ag(i,n);{const r=i[t.index];return Mo(r)?w0(-1,r):_r(r)}}if(32&e)return f0(t,i)()||_r(i[t.index]);{const n=CD(i,t);return null!==n?Array.isArray(n)?n[0]:ag(fp(i[Rr]),n):ag(i,t.next)}}return null}function CD(i,t){return null!==t?i[Rr][Ir].projection[t.projection]:null}function w0(i,t){const e=Gr+i+1;if(e<t.length){const n=t[e],r=n[st].firstChild;if(null!==r)return ag(n,r)}return t[zm]}function C0(i,t,e,n,r,s,o){for(;null!=e;){const a=n[e.index],l=e.type;if(o&&0===t&&(a&&Pr(_r(a),n),e.flags|=2),32!=(32&e.flags))if(8&l)C0(i,t,e.child,n,r,s,!1),Bd(t,i,r,a,s);else if(32&l){const c=f0(e,n);let d;for(;d=c();)Bd(t,i,r,d,s);Bd(t,i,r,a,s)}else 16&l?SD(i,t,n,e,r,s):Bd(t,i,r,a,s);e=o?e.projectionNext:e.next}}function mp(i,t,e,n,r,s){C0(e,n,i.firstChild,t,r,s,!1)}function SD(i,t,e,n,r,s){const o=e[Rr],l=o[Ir].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Bd(t,i,r,l[c],s);else C0(i,t,l,o[Ci],r,s,!0)}function ED(i,t,e){""===e?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function AD(i,t,e){const{mergedAttrs:n,classes:r,styles:s}=e;null!==n&&Ky(i,t,n),null!==r&&ED(i,t,r),null!==s&&function e5(i,t,e){i.setAttribute(t,"style",e)}(i,t,s)}function Ud(i){return function S0(){if(void 0===lg&&(lg=null,ri.trustedTypes))try{lg=ri.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return lg}()?.createHTML(i)||i}class nc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${km})`}}class o5 extends nc{getTypeName(){return"HTML"}}class a5 extends nc{getTypeName(){return"Style"}}class l5 extends nc{getTypeName(){return"Script"}}class c5 extends nc{getTypeName(){return"URL"}}class d5 extends nc{getTypeName(){return"ResourceURL"}}function Os(i){return i instanceof nc?i.changingThisBreaksApplicationSecurity:i}function Zo(i,t){const e=function u5(i){return i instanceof nc&&i.getTypeName()||null}(i);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${km})`)}return e===t}class _5{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Ud(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}}class v5{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){const e=this.inertDocument.createElement("template");return e.innerHTML=Ud(t),e}}const y5=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function dg(i){return(i=String(i)).match(y5)?i:"unsafe:"+i}function Sa(i){const t={};for(const e of i.split(","))t[e]=!0;return t}function gp(...i){const t={};for(const e of i)for(const n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}const PD=Sa("area,br,col,hr,img,wbr"),OD=Sa("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),FD=Sa("rp,rt"),D0=gp(PD,gp(OD,Sa("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gp(FD,Sa("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gp(FD,OD)),T0=Sa("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),LD=gp(T0,Sa("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Sa("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),x5=Sa("script,style,template");class w5{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let r=this.checkClobberedElement(e,e.nextSibling);if(r){e=r;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!D0.hasOwnProperty(e))return this.sanitizedSomething=!0,!x5.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!LD.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;T0[a]&&(l=dg(l)),this.buf.push(" ",o,'="',ND(l),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();D0.hasOwnProperty(e)&&!PD.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(ND(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const M5=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C5=/([^\#-~ |!])/g;function ND(i){return i.replace(/&/g,"&amp;").replace(M5,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(C5,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ug;function BD(i,t){let e=null;try{ug=ug||function RD(i){const t=new v5(i);return function b5(){try{return!!(new window.DOMParser).parseFromString(Ud(""),"text/html")}catch{return!1}}()?new _5(t):t}(i);let n=t?String(t):"";e=ug.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=e.innerHTML,e=ug.getInertBodyElement(n)}while(n!==s);return Ud((new w5).sanitizeChildren(k0(e)||e))}finally{if(e){const n=k0(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function k0(i){return"content"in i&&function S5(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var zn=(()=>((zn=zn||{})[zn.NONE=0]="NONE",zn[zn.HTML=1]="HTML",zn[zn.STYLE=2]="STYLE",zn[zn.SCRIPT=3]="SCRIPT",zn[zn.URL=4]="URL",zn[zn.RESOURCE_URL=5]="RESOURCE_URL",zn))();function hg(i){const t=function _p(){const i=we();return i&&i[Ly]}();return t?t.sanitize(zn.URL,i)||"":Zo(i,"URL")?Os(i):dg(qt(i))}const pg=new ue("ENVIRONMENT_INITIALIZER"),zD=new ue("INJECTOR",-1),HD=new ue("INJECTOR_DEF_TYPES");class $D{get(t,e=Kh){if(e===Kh){const n=new Error(`NullInjectorError: No provider for ${Jn(t)}!`);throw n.name="NullInjectorError",n}return e}}function R5(...i){return{\u0275providers:GD(0,i),\u0275fromNgModule:!0}}function GD(i,...t){const e=[],n=new Set;let r;return ec(t,s=>{const o=s;I0(o,e,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&jD(r,e),e}function jD(i,t){for(let e=0;e<i.length;e++){const{providers:r}=i[e];R0(r,s=>{t.push(s)})}}function I0(i,t,e,n){if(!(i=Rt(i)))return!1;let r=null,s=K1(i);const o=!s&&Wn(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=K1(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)I0(c,t,e,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{ec(s.imports,d=>{I0(d,t,e,n)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&jD(c,t)}if(!a){const c=Zl(r)||(()=>new r);t.push({provide:r,useFactory:c,deps:Vn},{provide:HD,useValue:r,multi:!0},{provide:pg,useValue:()=>K(r),multi:!0})}const l=s.providers;null==l||a||R0(l,d=>{t.push(d)})}}return r!==i&&void 0!==i.providers}function R0(i,t){for(let e of i)Ty(e)&&(e=e.\u0275providers),Array.isArray(e)?R0(e,t):t(e)}const P5=Qn({provide:String,useValue:Qn});function P0(i){return null!==i&&"object"==typeof i&&P5 in i}function ic(i){return"function"==typeof i}const O0=new ue("Set Injector scope."),fg={},F5={};let F0;function mg(){return void 0===F0&&(F0=new $D),F0}class Ea{}class XD extends Ea{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,N0(t,o=>this.processProvider(o)),this.records.set(zD,Vd(void 0,this)),r.has("environment")&&this.records.set(Ea,Vd(void 0,this));const s=this.records.get(O0);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(HD.multi,Vn,Pt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();for(const t of this._onDestroyHooks)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(t){this._onDestroyHooks.push(t)}runInContext(t){this.assertNotDestroyed();const e=wd(this),n=to(void 0);try{return t()}finally{wd(e),to(n)}}get(t,e=Kh,n=Pt.Default){this.assertNotDestroyed(),n=Lm(n);const r=wd(this),s=to(void 0);try{if(!(n&Pt.SkipSelf)){let a=this.records.get(t);if(void 0===a){const l=function V5(i){return"function"==typeof i||"object"==typeof i&&i instanceof ue}(t)&&Pm(t);a=l&&this.injectableDefInScope(l)?Vd(L0(t),fg):null,this.records.set(t,a)}if(null!=a)return this.hydrate(t,a)}return(n&Pt.Self?mg():this.parent).get(t,e=n&Pt.Optional&&e===Kh?null:e)}catch(o){if("NullInjectorError"===o.name){if((o[Fm]=o[Fm]||[]).unshift(Jn(t)),r)throw o;return function d4(i,t,e,n){const r=i[Fm];throw t[J1]&&r.unshift(t[J1]),i.message=function u4(i,t,e,n=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==a4?i.slice(2):i;let r=Jn(t);if(Array.isArray(t))r=t.map(Jn).join(" -> ");else if("object"==typeof t){let s=[];for(let o in t)if(t.hasOwnProperty(o)){let a=t[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Jn(a)))}r=`{${s.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(o4,"\n  ")}`}("\n"+i.message,r,e,n),i[s4]=r,i[Fm]=null,i}(o,t,"R3InjectorError",this.source)}throw o}finally{to(s),wd(r)}}resolveInjectorInitializers(){const t=wd(this),e=to(void 0);try{const n=this.get(pg.multi,Vn,Pt.Self);for(const r of n)r()}finally{wd(t),to(e)}}toString(){const t=[],e=this.records;for(const n of e.keys())t.push(Jn(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new he(205,!1)}processProvider(t){let e=ic(t=Rt(t))?t:Rt(t&&t.provide);const n=function N5(i){return P0(i)?Vd(void 0,i.useValue):Vd(qD(i),fg)}(t);if(ic(t)||!0!==t.multi)this.records.get(e);else{let r=this.records.get(e);r||(r=Vd(void 0,fg,!0),r.factory=()=>Py(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){return e.value===fg&&(e.value=F5,e.value=e.factory()),"object"==typeof e.value&&e.value&&function U5(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Rt(t.providedIn);return"string"==typeof e?"any"===e||this.scopes.has(e):this.injectorDefTypes.has(e)}}function L0(i){const t=Pm(i),e=null!==t?t.factory:Zl(i);if(null!==e)return e;if(i instanceof ue)throw new he(204,!1);if(i instanceof Function)return function L5(i){const t=i.length;if(t>0)throw dp(t,"?"),new he(204,!1);const e=function n4(i){return i&&(i[Om]||i[Z1])||null}(i);return null!==e?()=>e.factory(i):()=>new i}(i);throw new he(204,!1)}function qD(i,t,e){let n;if(ic(i)){const r=Rt(i);return Zl(r)||L0(r)}if(P0(i))n=()=>Rt(i.useValue);else if(function YD(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...Py(i.deps||[]));else if(function WD(i){return!(!i||!i.useExisting)}(i))n=()=>K(Rt(i.useExisting));else{const r=Rt(i&&(i.useClass||i.provide));if(!function B5(i){return!!i.deps}(i))return Zl(r)||L0(r);n=()=>new r(...Py(i.deps))}return n}function Vd(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function N0(i,t){for(const e of i)Array.isArray(e)?N0(e,t):e&&Ty(e)?N0(e.\u0275providers,t):t(e)}class z5{}class KD{}class $5{resolveComponentFactory(t){throw function H5(i){const t=Error(`No component factory found for ${Jn(i)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=i,t}(t)}}let rc=(()=>{class i{}return i.NULL=new $5,i})();function G5(){return zd(vr(),we())}function zd(i,t){return new ht(Is(i,t))}let ht=(()=>{class i{constructor(e){this.nativeElement=e}}return i.__NG_ELEMENT_ID__=G5,i})();function j5(i){return i instanceof ht?i.nativeElement:i}class vp{}let Aa=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function W5(){const i=we(),e=ds(vr().index,i);return(ks(e)?e:i)[hn]}(),i})(),Y5=(()=>{class i{}return i.\u0275prov=Te({token:i,providedIn:"root",factory:()=>null}),i})();class sc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const X5=new sc("15.2.10"),B0={},U0="ngOriginalError";function V0(i){return i[U0]}class Da{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&V0(t);for(;e&&V0(e);)e=V0(e);return e||null}}function Ta(i){return i instanceof Function?i():i}function JD(i,t,e){let n=i.length;for(;;){const r=i.indexOf(t,e);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=t.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}e=r+1}}const eT="ng-template";function s8(i,t,e){let n=0,r=!0;for(;n<i.length;){let s=i[n++];if("string"==typeof s&&r){const o=i[n++];if(e&&"class"===s&&-1!==JD(o.toLowerCase(),t,0))return!0}else{if(1===s){for(;n<i.length&&"string"==typeof(s=i[n++]);)if(s.toLowerCase()===t)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function tT(i){return 4===i.type&&i.value!==eT}function o8(i,t,e){return t===(4!==i.type||e?i.value:eT)}function a8(i,t,e){let n=4;const r=i.attrs||[],s=function d8(i){for(let t=0;t<i.length;t++)if(kA(i[t]))return t;return i.length}(r);let o=!1;for(let a=0;a<t.length;a++){const l=t[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!o8(i,l,e)||""===l&&1===t.length){if(So(n))return!1;o=!0}}else{const c=8&n?l:t[++a];if(8&n&&null!==i.attrs){if(!s8(i.attrs,c,e)){if(So(n))return!1;o=!0}continue}const u=l8(8&n?"class":l,r,tT(i),e);if(-1===u){if(So(n))return!1;o=!0;continue}if(""!==c){let h;h=u>s?"":r[u+1].toLowerCase();const p=8&n?h:null;if(p&&-1!==JD(p,c,0)||2&n&&c!==h){if(So(n))return!1;o=!0}}}}else{if(!o&&!So(n)&&!So(l))return!1;if(o&&So(l))continue;o=!1,n=l|1&n}}return So(n)||o}function So(i){return 0==(1&i)}function l8(i,t,e,n){if(null===t)return-1;let r=0;if(n||!e){let s=!1;for(;r<t.length;){const o=t[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=t[++r];for(;"string"==typeof a;)a=t[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function u8(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){const n=i[e];if("number"==typeof n)return-1;if(n===t)return e;e++}return-1}(t,i)}function nT(i,t,e=!1){for(let n=0;n<t.length;n++)if(a8(i,t[n],e))return!0;return!1}function h8(i,t){e:for(let e=0;e<t.length;e++){const n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function iT(i,t){return i?":not("+t.trim()+")":t}function p8(i){let t=i[0],e=1,n=2,r="",s=!1;for(;e<i.length;){let o=i[e];if("string"==typeof o)if(2&n){const a=i[++e];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!So(o)&&(t+=iT(s,r),r=""),n=o,s=s||!So(n);e++}return""!==r&&(t+=iT(s,r)),t}const Zt={};function k(i){rT(Dn(),we(),Wr()+i,!1)}function rT(i,t,e,n){if(!n)if(3==(3&t[an])){const s=i.preOrderCheckHooks;null!==s&&Ym(t,s,e)}else{const s=i.preOrderHooks;null!==s&&Xm(t,s,0,e)}Ql(e)}function lT(i,t=null,e=null,n){const r=cT(i,t,e,n);return r.resolveInjectorInitializers(),r}function cT(i,t=null,e=null,n,r=new Set){const s=[e||Vn,R5(i)];return n=n||("object"==typeof i?void 0:Jn(i)),new XD(s,t||mg(),n||null,r)}let Oi=(()=>{class i{static create(e,n){if(Array.isArray(e))return lT({name:""},n,e,"");{const r=e.name??"";return lT({name:r},e.parent,e.providers,r)}}}return i.THROW_IF_NOT_FOUND=Kh,i.NULL=new $D,i.\u0275prov=Te({token:i,providedIn:"any",factory:()=>K(zD)}),i.__NG_ELEMENT_ID__=-1,i})();function x(i,t=Pt.Default){const e=we();return null===e?K(i,t):UA(vr(),e,Rt(i),t)}function Eo(){throw new Error("invalid")}function gT(i,t){const e=i.contentQueries;if(null!==e)for(let n=0;n<e.length;n+=2){const s=e[n+1];if(-1!==s){const o=i.data[s];jy(e[n]),o.contentQueries(2,t[s],s)}}}function _g(i,t,e,n,r,s,o,a,l,c,d){const u=t.blueprint.slice();return u[wa]=r,u[an]=76|n,(null!==d||i&&1024&i[an])&&(u[an]|=1024),gA(u),u[Ci]=u[Sd]=i,u[Ri]=e,u[Vm]=o||i&&i[Vm],u[hn]=a||i&&i[hn],u[Ly]=l||i&&i[Ly]||null,u[Um]=c||i&&i[Um]||null,u[Ir]=s,u[ip]=function DH(){return AH++}(),u[oA]=d,u[Rr]=2==t.type?i[Rr]:u,u}function Gd(i,t,e,n,r){let s=i.data[t];if(null===s)s=function j0(i,t,e,n,r){const s=bA(),o=zy(),l=i.data[t]=function U8(i,t,e,n,r,s){return{type:e,index:n,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,e,t,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(i,t,e,n,r),function O4(){return Kt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=e,s.value=n,s.attrs=r;const o=function sp(){const i=Kt.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Yo(s,!0),s}function bp(i,t,e,n){if(0===e)return-1;const r=t.length;for(let s=0;s<e;s++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function W0(i,t,e){Wy(t);try{const n=i.viewQuery;null!==n&&tx(1,n,e);const r=i.template;null!==r&&_T(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&gT(i,t),i.staticViewQueries&&tx(2,i.viewQuery,e);const s=i.components;null!==s&&function L8(i,t){for(let e=0;e<t.length;e++)s$(i,t[e])}(t,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[an]&=-5,Yy()}}function vg(i,t,e,n){const r=t[an];if(128!=(128&r)){Wy(t);try{gA(t),function xA(i){return Kt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==e&&_T(i,t,e,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&Ym(t,c,null)}else{const c=i.preOrderHooks;null!==c&&Xm(t,c,0,null),Xy(t,0)}if(function i$(i){for(let t=m0(i);null!==t;t=g0(t)){if(!t[aA])continue;const e=t[Ad];for(let n=0;n<e.length;n++){const r=e[n];512&r[an]||Vy(r[Ci],1),r[an]|=512}}}(t),function n$(i){for(let t=m0(i);null!==t;t=g0(t))for(let e=Gr;e<t.length;e++){const n=t[e],r=n[st];jm(n)&&vg(r,n,r.template,n[Ri])}}(t),null!==i.contentQueries&&gT(i,t),o){const c=i.contentCheckHooks;null!==c&&Ym(t,c)}else{const c=i.contentHooks;null!==c&&Xm(t,c,1),Xy(t,1)}!function O8(i,t){const e=i.hostBindingOpCodes;if(null!==e)try{for(let n=0;n<e.length;n++){const r=e[n];if(r<0)Ql(~r);else{const s=r,o=e[++n],a=e[++n];F4(o,s),a(2,t[s])}}}finally{Ql(-1)}}(i,t);const a=i.components;null!==a&&function F8(i,t){for(let e=0;e<t.length;e++)r$(i,t[e])}(t,a);const l=i.viewQuery;if(null!==l&&tx(2,l,n),o){const c=i.viewCheckHooks;null!==c&&Ym(t,c)}else{const c=i.viewHooks;null!==c&&Xm(t,c,2),Xy(t,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),t[an]&=-41,512&t[an]&&(t[an]&=-513,Vy(t[Ci],-1))}finally{Yy()}}}function _T(i,t,e,n,r){const s=Wr(),o=2&n;try{Ql(-1),o&&t.length>si&&rT(i,t,si,!1),no(o?2:0,r),e(n,r)}finally{Ql(s),no(o?3:1,r)}}function Y0(i,t,e){if(By(t)){const r=t.directiveEnd;for(let s=t.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,e[s],s)}}}function X0(i,t,e){vA()&&(function W8(i,t,e,n){const r=e.directiveStart,s=e.directiveEnd;rp(e)&&function J8(i,t,e){const n=Is(t,i),r=vT(e),s=i[Vm],o=bg(i,_g(i,r,null,e.onPush?32:16,n,t,s,s.createRenderer(n,e),null,null,null));i[t.index]=o}(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||Qm(e,t),Pr(n,t);const o=e.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=Jl(t,i,a,e);Pr(c,t),null!==o&&e$(0,a-r,c,l,0,o),Co(l)&&(ds(e.index,t)[Ri]=Jl(t,i,a,e))}}(i,t,e,Is(e,t)),64==(64&e.flags)&&MT(i,t,e))}function q0(i,t,e=Is){const n=t.localNames;if(null!==n){let r=t.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?e(t,i):i[o];i[r++]=a}}}function vT(i){const t=i.tView;return null===t||t.incompleteFirstPass?i.tView=K0(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):t}function K0(i,t,e,n,r,s,o,a,l,c){const d=si+n,u=d+r,h=function N8(i,t){const e=[];for(let n=0;n<t;n++)e.push(n<i?null:Zt);return e}(d,u),p="function"==typeof c?c():c;return h[st]={type:i,blueprint:h,template:e,queries:null,viewQuery:a,declTNode:t,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1}}function bT(i,t,e,n){const r=ST(t);null===e?r.push(n):(r.push(e),i.firstCreatePass&&ET(i).push(n,r.length-1))}function yT(i,t,e,n){for(let r in i)if(i.hasOwnProperty(r)){e=null===e?{}:e;const s=i[r];null===n?xT(e,t,r,s):n.hasOwnProperty(r)&&xT(e,t,n[r],s)}return e}function xT(i,t,e,n){i.hasOwnProperty(e)?i[e].push(t,n):i[e]=[t,n]}function Fs(i,t,e,n,r,s,o,a){const l=Is(t,e);let d,c=t.inputs;!a&&null!=c&&(d=c[n])?(nx(i,e,d,n,r),rp(t)&&function H8(i,t){const e=ds(t,i);16&e[an]||(e[an]|=32)}(e,t.index)):3&t.type&&(n=function z8(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,t.value||"",n):r,s.setProperty(l,n,r))}function Z0(i,t,e,n){if(vA()){const r=null===n?null:{"":-1},s=function X8(i,t){const e=i.directiveRegistry;let n=null,r=null;if(e)for(let s=0;s<e.length;s++){const o=e[s];if(nT(t,o.selectors,!1))if(n||(n=[]),Co(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),n.unshift(...a,o),Q0(i,t,a.length)}else n.unshift(o),Q0(i,t,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,n,r),n.push(o)}return null===n?null:[n,r]}(i,e);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&wT(i,t,e,o,r,a),r&&function q8(i,t,e){if(t){const n=i.localNames=[];for(let r=0;r<t.length;r+=2){const s=e[t[r+1]];if(null==s)throw new he(-301,!1);n.push(t[r],s)}}}(e,n,r)}e.mergedAttrs=ap(e.mergedAttrs,e.attrs)}function wT(i,t,e,n,r,s){for(let c=0;c<n.length;c++)e0(Qm(e,t),i,n[c].type);!function Z8(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}(e,i.data.length,n.length);for(let c=0;c<n.length;c++){const d=n[c];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,l=bp(i,t,n.length,null);for(let c=0;c<n.length;c++){const d=n[c];e.mergedAttrs=ap(e.mergedAttrs,d.hostAttrs),Q8(i,e,t,l,d),K8(l,d,r),null!==d.contentQueries&&(e.flags|=4),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(e.flags|=64);const u=d.type.prototype;!o&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(e.index),o=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(e.index),a=!0),l++}!function V8(i,t,e){const r=t.directiveEnd,s=i.data,o=t.attrs,a=[];let l=null,c=null;for(let d=t.directiveStart;d<r;d++){const u=s[d],h=e?e.get(u):null,f=h?h.outputs:null;l=yT(u.inputs,d,l,h?h.inputs:null),c=yT(u.outputs,d,c,f);const g=null===l||null===o||tT(t)?null:t$(l,d,o);a.push(g)}null!==l&&(l.hasOwnProperty("class")&&(t.flags|=8),l.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=l,t.outputs=c}(i,e,s)}function MT(i,t,e){const n=e.directiveStart,r=e.directiveEnd,s=e.index,o=function L4(){return Kt.lFrame.currentDirectiveIndex}();try{Ql(s);for(let a=n;a<r;a++){const l=i.data[a],c=t[a];$y(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Y8(l,c)}}finally{Ql(-1),$y(o)}}function Y8(i,t){null!==i.hostBindings&&i.hostBindings(1,t)}function Q0(i,t,e){t.componentOffset=e,(i.components??(i.components=[])).push(t.index)}function K8(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Co(t)&&(e[""]=i)}}function Q8(i,t,e,n,r){i.data[n]=r;const s=r.factory||(r.factory=Zl(r.type)),o=new op(s,Co(r),x);i.blueprint[n]=o,e[n]=o,function G8(i,t,e,n,r){const s=r.hostBindings;if(s){let o=i.hostBindingOpCodes;null===o&&(o=i.hostBindingOpCodes=[]);const a=~t.index;(function j8(i){let t=i.length;for(;t>0;){const e=i[--t];if("number"==typeof e&&e<0)return e}return 0})(o)!=a&&o.push(a),o.push(e,n,s)}}(i,t,n,bp(i,e,r.hostVars,Zt),r)}function Qo(i,t,e,n,r,s){const o=Is(i,t);!function J0(i,t,e,n,r,s,o){if(null==s)i.removeAttribute(t,r,e);else{const a=null==o?qt(s):o(s,n||"",r);i.setAttribute(t,r,a,e)}}(t[hn],o,s,i.value,e,n,r)}function e$(i,t,e,n,r,s){const o=s[t];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],u=o[l++];null!==a?n.setInput(e,u,c,d):e[d]=u}}}function t$(i,t,e){let n=null,r=0;for(;r<e.length;){const s=e[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const o=i[s];for(let a=0;a<o.length;a+=2)if(o[a]===t){n.push(s,o[a+1],e[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function CT(i,t,e,n){return[i,!0,!1,t,null,0,n,e,null,null]}function r$(i,t){const e=ds(t,i);if(jm(e)){const n=e[st];48&e[an]?vg(n,e,n.template,e[Ri]):e[Kl]>0&&ex(e)}}function ex(i){for(let n=m0(i);null!==n;n=g0(n))for(let r=Gr;r<n.length;r++){const s=n[r];if(jm(s))if(512&s[an]){const o=s[st];vg(o,s,o.template,s[Ri])}else s[Kl]>0&&ex(s)}const e=i[st].components;if(null!==e)for(let n=0;n<e.length;n++){const r=ds(e[n],i);jm(r)&&r[Kl]>0&&ex(r)}}function s$(i,t){const e=ds(t,i),n=e[st];(function o$(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])})(n,e),W0(n,e,e[Ri])}function bg(i,t){return i[tp]?i[sA][wo]=t:i[tp]=t,i[sA]=t,t}function yg(i){for(;i;){i[an]|=32;const t=fp(i);if(g4(i)&&!t)return i;i=t}return null}function xg(i,t,e,n=!0){const r=t[Vm];r.begin&&r.begin();try{vg(i,t,i.template,e)}catch(o){throw n&&DT(t,o),o}finally{r.end&&r.end()}}function tx(i,t,e){jy(0),t(i,e)}function ST(i){return i[Cd]||(i[Cd]=[])}function ET(i){return i.cleanup||(i.cleanup=[])}function AT(i,t,e){return(null===i||Co(i))&&(e=function C4(i){for(;Array.isArray(i);){if("object"==typeof i[Ny])return i;i=i[wa]}return null}(e[t.index])),e[hn]}function DT(i,t){const e=i[Um],n=e?e.get(Da,null):null;n&&n.handleError(t)}function nx(i,t,e,n,r){for(let s=0;s<e.length;){const o=e[s++],a=e[s++],l=t[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function ka(i,t,e){const n=Gm(t,i);!function pD(i,t,e){i.setValue(t,e)}(i[hn],n,e)}function wg(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const a=t[o];"number"==typeof a?s=a:1==s?r=Ay(r,a):2==s&&(n=Ay(n,a+": "+t[++o]+";"))}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}function Mg(i,t,e,n,r=!1){for(;null!==e;){const s=t[e.index];if(null!==s&&n.push(_r(s)),Mo(s))for(let a=Gr;a<s.length;a++){const l=s[a],c=l[st].firstChild;null!==c&&Mg(l[st],l,c,n)}const o=e.type;if(8&o)Mg(i,t,e.child,n);else if(32&o){const a=f0(e,t);let l;for(;l=a();)n.push(l)}else if(16&o){const a=CD(t,e);if(Array.isArray(a))n.push(...a);else{const l=fp(t[Rr]);Mg(l[st],l,a,n,!0)}}e=r?e.projectionNext:e.next}return n}class yp{get rootNodes(){const t=this._lView,e=t[st];return Mg(e,t,e.firstChild,[])}constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ri]}set context(t){this._lView[Ri]=t}get destroyed(){return 128==(128&this._lView[an])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[Ci];if(Mo(t)){const e=t[Hm],n=e?e.indexOf(this):-1;n>-1&&(b0(t,n),eg(e,n))}this._attachedToViewContainer=!1}mD(this._lView[st],this._lView)}onDestroy(t){bT(this._lView[st],this._lView,null,t)}markForCheck(){yg(this._cdRefInjectingView||this._lView)}detach(){this._lView[an]&=-65}reattach(){this._lView[an]|=64}detectChanges(){xg(this._lView[st],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new he(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $H(i,t){mp(i,t,t[hn],2,null,null)}(this._lView[st],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new he(902,!1);this._appRef=t}}class a$ extends yp{constructor(t){super(t),this._view=t}detectChanges(){const t=this._view;xg(t[st],t,t[Ri],!1)}checkNoChanges(){}get context(){return null}}class TT extends rc{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Wn(t);return new xp(e,this.ngModule)}}function kT(i){const t=[];for(let e in i)i.hasOwnProperty(e)&&t.push({propName:i[e],templateName:e});return t}class c${constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=Lm(n);const r=this.injector.get(t,B0,n);return r!==B0||e===B0?r:this.parentInjector.get(t,e,n)}}class xp extends KD{get inputs(){return kT(this.componentDef.inputs)}get outputs(){return kT(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function f8(i){return i.map(p8).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let s=(r=r||this.ngModule)instanceof Ea?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new c$(t,s):t,a=o.get(vp,null);if(null===a)throw new he(407,!1);const l=o.get(Y5,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",u=n?function B8(i,t,e){return i.selectRootElement(t,e===xo.ShadowDom)}(c,n,this.componentDef.encapsulation):v0(c,d,function l$(i){const t=i.toLowerCase();return"svg"===t?pA:"math"===t?"math":null}(d)),h=this.componentDef.onPush?288:272,p=K0(0,null,null,1,0,null,null,null,null,null),f=_g(null,p,null,h,null,null,a,c,l,o,null);let g,m;Wy(f);try{const _=this.componentDef;let b,v=null;_.findHostDirectiveDefs?(b=[],v=new Map,_.findHostDirectiveDefs(_,b,v),b.push(_)):b=[_];const y=function u$(i,t){const e=i[st],n=si;return i[n]=t,Gd(e,n,2,"#host",null)}(f,u),R=function h$(i,t,e,n,r,s,o,a){const l=r[st];!function p$(i,t,e,n){for(const r of i)t.mergedAttrs=ap(t.mergedAttrs,r.hostAttrs);null!==t.mergedAttrs&&(wg(t,t.mergedAttrs,!0),null!==e&&AD(n,e,t))}(n,i,t,o);const c=s.createRenderer(t,e),d=_g(r,vT(e),null,e.onPush?32:16,r[i.index],i,s,c,a||null,null,null);return l.firstCreatePass&&Q0(l,i,n.length-1),bg(r,d),r[i.index]=d}(y,u,_,b,f,a,c);m=mA(p,si),u&&function m$(i,t,e,n){if(n)Ky(i,e,["ng-version",X5.full]);else{const{attrs:r,classes:s}=function m8(i){const t=[],e=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&t.push(s,i[++n]):8===r&&e.push(s);else{if(!So(r))break;r=s}n++}return{attrs:t,classes:e}}(t.selectors[0]);r&&Ky(i,e,r),s&&s.length>0&&ED(i,e,s.join(" "))}}(c,_,u,n),void 0!==e&&function g$(i,t,e){const n=i.projection=[];for(let r=0;r<t.length;r++){const s=e[r];n.push(null!=s?Array.from(s):null)}}(m,this.ngContentSelectors,e),g=function f$(i,t,e,n,r,s){const o=vr(),a=r[st],l=Is(o,r);wT(a,r,o,e,null,n);for(let d=0;d<e.length;d++)Pr(Jl(r,a,o.directiveStart+d,o),r);MT(a,r,o),l&&Pr(l,r);const c=Jl(r,a,o.directiveStart+o.componentOffset,o);if(i[Ri]=r[Ri]=c,null!==s)for(const d of s)d(c,t);return Y0(a,o,i),c}(R,_,b,v,f,[_$]),W0(p,f,null)}finally{Yy()}return new d$(this.componentType,g,zd(m,f),f,m)}}class d$ extends z5{constructor(t,e,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=e,this.hostView=this.changeDetectorRef=new a$(r),this.componentType=t}setInput(t,e){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[t])){const s=this._rootLView;nx(s[st],s,r,t,e),yg(ds(this._tNode.index,s))}}get injector(){return new Id(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}function _$(){const i=vr();Wm(we()[st],i)}function Je(i){let t=function IT(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),e=!0;const n=[i];for(;t;){let r;if(Co(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new he(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);const o=i;o.inputs=ix(i.inputs),o.declaredInputs=ix(i.declaredInputs),o.outputs=ix(i.outputs);const a=r.hostBindings;a&&x$(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&b$(i,l),c&&y$(i,c),Ey(i.inputs,r.inputs),Ey(i.declaredInputs,r.declaredInputs),Ey(i.outputs,r.outputs),Co(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===Je&&(e=!1)}}t=Object.getPrototypeOf(t)}!function v$(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=ap(r.hostAttrs,e=ap(e,r.hostAttrs))}}(n)}function ix(i){return i===ya?{}:i===Vn?[]:i}function b$(i,t){const e=i.viewQuery;i.viewQuery=e?(n,r)=>{t(n,r),e(n,r)}:t}function y$(i,t){const e=i.contentQueries;i.contentQueries=e?(n,r,s)=>{t(n,r,s),e(n,r,s)}:t}function x$(i,t){const e=i.hostBindings;i.hostBindings=e?(n,r)=>{t(n,r),e(n,r)}:t}function Cg(i){return!!rx(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function rx(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Jo(i,t,e){return i[t]=e}function Or(i,t,e){return!Object.is(i[t],e)&&(i[t]=e,!0)}function oc(i,t,e,n){const r=Or(i,t,e);return Or(i,t+1,n)||r}function xt(i,t,e,n){const r=we();return Or(r,Td(),t)&&(Dn(),Qo(bi(),r,i,t,e,n)),xt}function Wd(i,t,e,n){return Or(i,Td(),e)?t+qt(e)+n:Zt}function Yd(i,t,e,n,r,s){const a=oc(i,function Ma(){return Kt.lFrame.bindingIndex}(),e,r);return Ca(2),a?t+qt(e)+n+qt(r)+s:Zt}function Z(i,t,e,n,r,s,o,a){const l=we(),c=Dn(),d=i+si,u=c.firstCreatePass?function I$(i,t,e,n,r,s,o,a,l){const c=t.consts,d=Gd(t,i,4,o||null,cl(c,a));Z0(t,e,d,cl(c,l)),Wm(t,d);const u=d.tView=K0(2,d,n,r,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,d),u.queries=t.queries.embeddedTView(d)),d}(d,c,l,t,e,n,r,s,o):c.data[d];Yo(u,!1);const h=l[hn].createComment("");og(c,l,h,u),Pr(h,l),bg(l,l[d]=CT(h,l,h,u)),$m(u)&&X0(c,l,u),null!=o&&q0(l,u,a)}function Hn(i){return Dd(function P4(){return Kt.lFrame.contextLView}(),si+i)}function T(i,t,e){const n=we();return Or(n,Td(),t)&&Fs(Dn(),bi(),n,i,t,n[hn],e,!1),T}function sx(i,t,e,n,r){const o=r?"class":"style";nx(i,e,t.inputs[o],o,n)}function S(i,t,e,n){const r=we(),s=Dn(),o=si+i,a=r[hn],l=s.firstCreatePass?function P$(i,t,e,n,r,s){const o=t.consts,l=Gd(t,i,2,n,cl(o,r));return Z0(t,e,l,cl(o,s)),null!==l.attrs&&wg(l,l.attrs,!1),null!==l.mergedAttrs&&wg(l,l.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,l),l}(o,s,r,t,e,n):s.data[o],c=r[o]=v0(a,t,function H4(){return Kt.lFrame.currentNamespace}()),d=$m(l);return Yo(l,!0),AD(a,c,l),32!=(32&l.flags)&&og(s,r,c,l),0===function D4(){return Kt.lFrame.elementDepthCount}()&&Pr(c,r),function T4(){Kt.lFrame.elementDepthCount++}(),d&&(X0(s,r,l),Y0(s,l,r)),null!==n&&q0(r,l),S}function A(){let i=vr();zy()?Hy():(i=i.parent,Yo(i,!1));const t=i;!function k4(){Kt.lFrame.elementDepthCount--}();const e=Dn();return e.firstCreatePass&&(Wm(e,i),By(i)&&e.queries.elementEnd(i)),null!=t.classesWithoutHost&&function W4(i){return 0!=(8&i.flags)}(t)&&sx(e,t,we(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Y4(i){return 0!=(16&i.flags)}(t)&&sx(e,t,we(),t.stylesWithoutHost,!1),A}function pe(i,t,e,n){return S(i,t,e,n),A(),pe}function Si(i,t,e){const n=we(),r=Dn(),s=i+si,o=r.firstCreatePass?function O$(i,t,e,n,r){const s=t.consts,o=cl(s,n),a=Gd(t,i,8,"ng-container",o);return null!==o&&wg(a,o,!0),Z0(t,e,a,cl(s,r)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,r,n,t,e):r.data[s];Yo(o,!0);const a=n[s]=n[hn].createComment("");return og(r,n,a,o),Pr(a,n),$m(o)&&(X0(r,n,o),Y0(r,o,n)),null!=e&&q0(n,o),Si}function Ei(){let i=vr();const t=Dn();return zy()?Hy():(i=i.parent,Yo(i,!1)),t.firstCreatePass&&(Wm(t,i),By(i)&&t.queries.elementEnd(i)),Ei}function ac(i,t,e){return Si(i,t,e),Ei(),ac}function en(){return we()}function Mp(i){return!!i&&"function"==typeof i.then}function GT(i){return!!i&&"function"==typeof i.subscribe}const ox=GT;function de(i,t,e,n){const r=we(),s=Dn(),o=vr();return jT(s,r,r[hn],o,i,t,n),de}function ax(i,t){const e=vr(),n=we(),r=Dn();return jT(r,n,AT(Gy(r.data),e,n),e,i,t),ax}function jT(i,t,e,n,r,s,o){const a=$m(n),c=i.firstCreatePass&&ET(i),d=t[Ri],u=ST(t);let h=!0;if(3&n.type||o){const g=Is(n,t),m=o?o(g):g,_=u.length,b=o?y=>o(_r(y[n.index])):n.index;let v=null;if(!o&&a&&(v=function F$(i,t,e,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===e&&r[s+1]===n){const a=t[Cd],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,t,r,n.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=s,v.__ngLastListenerFn__=s,h=!1;else{s=YT(n,t,d,s,!1);const y=e.listen(m,r,s);u.push(s,y),c&&c.push(r,b,_,_+1)}}else s=YT(n,t,d,s,!1);const p=n.outputs;let f;if(h&&null!==p&&(f=p[r])){const g=f.length;if(g)for(let m=0;m<g;m+=2){const R=t[f[m]][f[m+1]].subscribe(s),M=u.length;u.push(s,R),c&&c.push(r,n.index,M,-(M+1))}}}function WT(i,t,e,n){try{return no(6,t,e),!1!==e(n)}catch(r){return DT(i,r),!1}finally{no(7,t,e)}}function YT(i,t,e,n,r){return function s(o){if(o===Function)return n;yg(i.componentOffset>-1?ds(i.index,t):t);let l=WT(t,e,n,o),c=s.__ngNextListenerFn__;for(;c;)l=WT(t,e,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function $(i=1){return function B4(i){return(Kt.lFrame.contextLView=function U4(i,t){for(;i>0;)t=t[Sd],i--;return t}(i,Kt.lFrame.contextLView))[Ri]}(i)}function L$(i,t){let e=null;const n=function c8(i){const t=i.attrs;if(null!=t){const e=t.indexOf(5);if(!(1&e))return t[e+1]}return null}(i);for(let r=0;r<t.length;r++){const s=t[r];if("*"!==s){if(null===n?nT(i,s,!0):h8(n,s))return r}else e=r}return e}function Ai(i){const t=we()[Rr][Ir];if(!t.projection){const n=t.projection=dp(i?i.length:1,null),r=n.slice();let s=t.child;for(;null!==s;){const o=i?L$(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Ft(i,t=0,e){const n=we(),r=Dn(),s=Gd(r,si+i,16,null,e||null);null===s.projection&&(s.projection=t),Hy(),32!=(32&s.flags)&&function ZH(i,t,e){SD(t[hn],0,t,e,gD(i,e,t),yD(e.parent||t[Ir],e,t))}(r,n,s)}function lx(i,t,e){return cx(i,"",t,"",e),lx}function cx(i,t,e,n,r){const s=we(),o=Wd(s,t,e,n);return o!==Zt&&Fs(Dn(),bi(),s,i,o,s[hn],r,!1),cx}function Eg(i,t){return i<<17|t<<2}function ul(i){return i>>17&32767}function dx(i){return 2|i}function lc(i){return(131068&i)>>2}function ux(i,t){return-131069&i|t<<2}function hx(i){return 1|i}function nk(i,t,e,n,r){const s=i[e+1],o=null===t;let a=n?ul(s):lc(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];H$(i[a],t)&&(l=!0,i[a+1]=n?hx(d):dx(d)),a=n?ul(d):lc(d)}l&&(i[e+1]=n?dx(s):hx(s))}function H$(i,t){return null===i||null==t||(Array.isArray(i)?i[1]:i)===t||!(!Array.isArray(i)||"string"!=typeof t)&&Ld(i,t)>=0}const er={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ik(i){return i.substring(er.key,er.keyEnd)}function rk(i,t){const e=er.textEnd;return e===t?-1:(t=er.keyEnd=function W$(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}(i,er.key=t,e),eu(i,t,e))}function eu(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function Xr(i,t,e){return Ao(i,t,e,!1),Xr}function Ut(i,t){return Ao(i,t,null,!0),Ut}function ta(i,t){for(let e=function G$(i){return function ok(i){er.key=0,er.keyEnd=0,er.value=0,er.valueEnd=0,er.textEnd=i.length}(i),rk(i,eu(i,0,er.textEnd))}(t);e>=0;e=rk(t,e))Rs(i,ik(t),!0)}function Ao(i,t,e,n){const r=we(),s=Dn(),o=Ca(2);s.firstUpdatePass&&dk(s,i,o,n),t!==Zt&&Or(r,o,t)&&hk(s,s.data[Wr()],r,r[hn],i,r[o+1]=function rG(i,t){return null==i||""===i||("string"==typeof t?i+=t:"object"==typeof i&&(i=Jn(Os(i)))),i}(t,e),n,o)}function ck(i,t){return t>=i.expandoStartIndex}function dk(i,t,e,n){const r=i.data;if(null===r[e+1]){const s=r[Wr()],o=ck(i,e);fk(s,n)&&null===t&&!o&&(t=!1),t=function Z$(i,t,e,n){const r=Gy(i);let s=n?t.residualClasses:t.residualStyles;if(null===r)0===(n?t.classBindings:t.styleBindings)&&(e=Cp(e=px(null,i,t,e,n),t.attrs,n),s=null);else{const o=t.directiveStylingLast;if(-1===o||i[o]!==r)if(e=px(r,i,t,e,n),null===s){let l=function Q$(i,t,e){const n=e?t.classBindings:t.styleBindings;if(0!==lc(n))return i[ul(n)]}(i,t,n);void 0!==l&&Array.isArray(l)&&(l=px(null,i,t,l[1],n),l=Cp(l,t.attrs,n),function J$(i,t,e,n){i[ul(e?t.classBindings:t.styleBindings)]=n}(i,t,n,l))}else s=function eG(i,t,e){let n;const r=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<r;s++)n=Cp(n,i[s].hostAttrs,e);return Cp(n,t.attrs,e)}(i,t,n)}return void 0!==s&&(n?t.residualClasses=s:t.residualStyles=s),e}(r,s,t,n),function V$(i,t,e,n,r,s){let o=s?t.classBindings:t.styleBindings,a=ul(o),l=lc(o);i[n]=e;let d,c=!1;if(Array.isArray(e)?(d=e[1],(null===d||Ld(e,d)>0)&&(c=!0)):d=e,r)if(0!==l){const h=ul(i[a+1]);i[n+1]=Eg(h,a),0!==h&&(i[h+1]=ux(i[h+1],n)),i[a+1]=function B$(i,t){return 131071&i|t<<17}(i[a+1],n)}else i[n+1]=Eg(a,0),0!==a&&(i[a+1]=ux(i[a+1],n)),a=n;else i[n+1]=Eg(l,0),0===a?a=n:i[l+1]=ux(i[l+1],n),l=n;c&&(i[n+1]=dx(i[n+1])),nk(i,d,n,!0),nk(i,d,n,!1),function z$(i,t,e,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof t&&Ld(s,t)>=0&&(e[n+1]=hx(e[n+1]))}(t,d,i,n,s),o=Eg(a,l),s?t.classBindings=o:t.styleBindings=o}(r,s,t,e,o,n)}}function px(i,t,e,n,r){let s=null;const o=e.directiveEnd;let a=e.directiveStylingLast;for(-1===a?a=e.directiveStart:a++;a<o&&(s=t[a],n=Cp(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(e.directiveStylingLast=a),n}function Cp(i,t,e){const n=e?1:2;let r=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Rs(i,o,!!e||t[++s]))}return void 0===i?null:i}function hk(i,t,e,n,r,s,o,a){if(!(3&t.type))return;const l=i.data,c=l[a+1],d=function U$(i){return 1==(1&i)}(c)?pk(l,t,e,r,lc(c),o):void 0;Ag(d)||(Ag(s)||function N$(i){return 2==(2&i)}(c)&&(s=pk(l,null,e,r,a,o)),function JH(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let s=-1===n.indexOf("-")?void 0:us.DashCase;null==r?i.removeStyle(e,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=us.Important),i.setStyle(e,n,r,s))}}(n,o,Gm(Wr(),e),r,s))}function pk(i,t,e,n,r,s){const o=null===t;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,u=null===d;let h=e[r+1];h===Zt&&(h=u?Vn:void 0);let p=u?s0(h,n):d===n?h:void 0;if(c&&!Ag(p)&&(p=s0(l,n)),Ag(p)&&(a=p,o))return a;const f=i[r+1];r=o?ul(f):lc(f)}if(null!==t){let l=s?t.residualClasses:t.residualStyles;null!=l&&(a=s0(l,n))}return a}function Ag(i){return void 0!==i}function fk(i,t){return 0!=(i.flags&(t?8:16))}function H(i,t=""){const e=we(),n=Dn(),r=i+si,s=n.firstCreatePass?Gd(n,r,1,t,null):n.data[r],o=e[r]=function _0(i,t){return i.createText(t)}(e[hn],t);og(n,e,o,s),Yo(s,!1)}function bn(i){return hi("",i,""),bn}function hi(i,t,e){const n=we(),r=Wd(n,i,t,e);return r!==Zt&&ka(n,Wr(),r),hi}function cc(i,t,e,n,r){const s=we(),o=Yd(s,i,t,e,n,r);return o!==Zt&&ka(s,Wr(),o),cc}function wk(i,t,e){!function Do(i,t,e,n){const r=Dn(),s=Ca(2);r.firstUpdatePass&&dk(r,null,s,n);const o=we();if(e!==Zt&&Or(o,s,e)){const a=r.data[Wr()];if(fk(a,n)&&!ck(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(e=Ay(l,e||"")),sx(r,a,o,e,n)}else!function iG(i,t,e,n,r,s,o,a){r===Zt&&(r=Vn);let l=0,c=0,d=0<r.length?r[0]:null,u=0<s.length?s[0]:null;for(;null!==d||null!==u;){const h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0;let g,f=null;d===u?(l+=2,c+=2,h!==p&&(f=u,g=p)):null===u||null!==d&&d<u?(l+=2,f=d):(c+=2,f=u,g=p),null!==f&&hk(i,t,e,n,f,g,o,a),d=l<r.length?r[l]:null,u=c<s.length?s[c]:null}}(r,a,o,o[hn],o[s+1],o[s+1]=function tG(i,t,e){if(null==e||""===e)return Vn;const n=[],r=Os(e);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&t(n,r);return n}(i,t,e),n,s)}}(Rs,ta,Wd(we(),i,t,e),!0)}function To(i,t,e){const n=we();return Or(n,Td(),t)&&Fs(Dn(),bi(),n,i,t,n[hn],e,!0),To}function Dg(i,t,e){const n=we();if(Or(n,Td(),t)){const s=Dn(),o=bi();Fs(s,o,n,i,t,AT(Gy(s.data),o,n),e,!0)}return Dg}const dc=void 0;var MG=["en",[["a","p"],["AM","PM"],dc],[["AM","PM"],dc,dc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],dc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],dc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",dc,"{1} 'at' {0}",dc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wG(i){const e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let tu={};function qr(i){const t=function CG(i){return i.toLowerCase().replace(/_/g,"-")}(i);let e=Pk(t);if(e)return e;const n=t.split("-")[0];if(e=Pk(n),e)return e;if("en"===n)return MG;throw new he(701,!1)}function Pk(i){return i in tu||(tu[i]=ri.ng&&ri.ng.common&&ri.ng.common.locales&&ri.ng.common.locales[i]),tu[i]}var et=(()=>((et=et||{})[et.LocaleId=0]="LocaleId",et[et.DayPeriodsFormat=1]="DayPeriodsFormat",et[et.DayPeriodsStandalone=2]="DayPeriodsStandalone",et[et.DaysFormat=3]="DaysFormat",et[et.DaysStandalone=4]="DaysStandalone",et[et.MonthsFormat=5]="MonthsFormat",et[et.MonthsStandalone=6]="MonthsStandalone",et[et.Eras=7]="Eras",et[et.FirstDayOfWeek=8]="FirstDayOfWeek",et[et.WeekendRange=9]="WeekendRange",et[et.DateFormat=10]="DateFormat",et[et.TimeFormat=11]="TimeFormat",et[et.DateTimeFormat=12]="DateTimeFormat",et[et.NumberSymbols=13]="NumberSymbols",et[et.NumberFormats=14]="NumberFormats",et[et.CurrencyCode=15]="CurrencyCode",et[et.CurrencySymbol=16]="CurrencySymbol",et[et.CurrencyName=17]="CurrencyName",et[et.Currencies=18]="Currencies",et[et.Directionality=19]="Directionality",et[et.PluralCase=20]="PluralCase",et[et.ExtraData=21]="ExtraData",et))();const nu="en-US";let Ok=nu;function gx(i,t,e,n,r){if(i=Rt(i),Array.isArray(i))for(let s=0;s<i.length;s++)gx(i[s],t,e,n,r);else{const s=Dn(),o=we();let a=ic(i)?i:Rt(i.provide),l=qD(i);const c=vr(),d=1048575&c.providerIndexes,u=c.directiveStart,h=c.providerIndexes>>20;if(ic(i)||!i.multi){const p=new op(l,r,x),f=vx(a,t,r?d:d+h,u);-1===f?(e0(Qm(c,o),s,a),_x(s,i,t.length),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(p),o.push(p)):(e[f]=p,o[f]=p)}else{const p=vx(a,t,d+h,u),f=vx(a,t,d,d+h),m=f>=0&&e[f];if(r&&!m||!r&&!(p>=0&&e[p])){e0(Qm(c,o),s,a);const _=function xj(i,t,e,n,r){const s=new op(i,e,x);return s.multi=[],s.index=t,s.componentProviders=0,sI(s,r,n&&!e),s}(r?yj:bj,e.length,r,n,l);!r&&m&&(e[f].providerFactory=_),_x(s,i,t.length,0),t.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),e.push(_),o.push(_)}else _x(s,i,p>-1?p:f,sI(e[r?f:p],l,!r&&n));!r&&n&&m&&e[f].componentProviders++}}}function _x(i,t,e,n){const r=ic(t),s=function O5(i){return!!i.useClass}(t);if(r||s){const l=(s?Rt(t.useClass):t).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){const d=c.indexOf(e);-1===d?c.push(e,[n,l]):c[d+1].push(n,l)}else c.push(e,l)}}}function sI(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function vx(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function bj(i,t,e,n){return bx(this.multi,[])}function yj(i,t,e,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Jl(e,e[st],this.providerFactory.index,n);s=a.slice(0,o),bx(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],bx(r,s);return s}function bx(i,t){for(let e=0;e<i.length;e++)t.push((0,i[e])());return t}function ln(i,t=[]){return e=>{e.providersResolver=(n,r)=>function vj(i,t,e){const n=Dn();if(n.firstCreatePass){const r=Co(i);gx(e,n.data,n.blueprint,r,!0),gx(t,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,t)}}class iu{}class oI{}class aI extends iu{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new TT(this);const n=Ts(t);this._bootstrapComponents=Ta(n.bootstrap),this._r3Injector=cT(t,e,[{provide:iu,useValue:this},{provide:rc,useValue:this.componentFactoryResolver}],Jn(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class yx extends oI{constructor(t){super(),this.moduleType=t}create(t){return new aI(this.moduleType,t)}}class Mj extends iu{constructor(t,e,n){super(),this.componentFactoryResolver=new TT(this),this.instance=null;const r=new XD([...t,{provide:iu,useValue:this},{provide:rc,useValue:this.componentFactoryResolver}],e||mg(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}}function Pg(i,t,e=null){return new Mj(i,t,e).injector}let Cj=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e.id)){const n=GD(0,e.type),r=n.length>0?Pg([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e.id,r)}return this.cachedInjectors.get(e.id)}ngOnDestroy(){try{for(const e of this.cachedInjectors.values())null!==e&&e.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Te({token:i,providedIn:"environment",factory:()=>new i(K(Ea))}),i})();function ru(i){i.getStandaloneInjector=t=>t.get(Cj).getOrCreateStandaloneInjector(i)}function $i(i,t,e){const n=jr()+i,r=we();return r[n]===Zt?Jo(r,n,e?t.call(e):t()):function wp(i,t){return i[t]}(r,n)}function su(i,t,e,n){return mI(we(),jr(),i,t,e,n)}function wx(i,t,e,n,r){return gI(we(),jr(),i,t,e,n,r)}function fI(i,t,e,n,r,s,o){return function vI(i,t,e,n,r,s,o,a,l){const c=t+e;return function ro(i,t,e,n,r,s){const o=oc(i,t,e,n);return oc(i,t+2,r,s)||o}(i,c,r,s,o,a)?Jo(i,c+4,l?n.call(l,r,s,o,a):n(r,s,o,a)):kp(i,c+4)}(we(),jr(),i,t,e,n,r,s,o)}function kp(i,t){const e=i[t];return e===Zt?void 0:e}function mI(i,t,e,n,r,s){const o=t+e;return Or(i,o,r)?Jo(i,o+1,s?n.call(s,r):n(r)):kp(i,o+1)}function gI(i,t,e,n,r,s,o){const a=t+e;return oc(i,a,r,s)?Jo(i,a+2,o?n.call(o,r,s):n(r,s)):kp(i,a+2)}function Oe(i,t){const e=Dn();let n;const r=i+si;e.firstCreatePass?(n=function Uj(i,t){if(t)for(let e=t.length-1;e>=0;e--){const n=t[e];if(i===n.name)return n}}(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks??(e.destroyHooks=[])).push(r,n.onDestroy)):n=e.data[r];const s=n.factory||(n.factory=Zl(n.type)),o=to(x);try{const a=Zm(!1),l=s();return Zm(a),function R$(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}(e,we(),r,l),l}finally{to(o)}}function Ne(i,t,e){const n=i+si,r=we(),s=Dd(r,n);return Ip(r,n)?mI(r,jr(),t,s.transform,e,s):s.transform(e)}function Mx(i,t,e,n){const r=i+si,s=we(),o=Dd(s,r);return Ip(s,r)?gI(s,jr(),t,o.transform,e,n,o):o.transform(e,n)}function Ip(i,t){return i[st].data[t].pure}function Cx(i){return t=>{setTimeout(i,void 0,t)}}const Fe=class $j extends De{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r=t,s=e||(()=>null),o=n;if(t&&"object"==typeof t){const l=t;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Cx(s),r&&(r=Cx(r)),o&&(o=Cx(o)));const a=super.subscribe({next:r,error:s,complete:o});return t instanceof J&&t.add(a),a}};function Gj(){return this._results[Symbol.iterator]()}class ou{get changes(){return this._changes||(this._changes=new Fe)}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=ou.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=Gj)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=function io(i){return i.flat(Number.POSITIVE_INFINITY)}(t);(this._changesDetected=!function iH(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=t[n];if(e&&(r=e(r),s=e(s)),s!==r)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ps=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yj,i})();const jj=ps,Wj=class extends jj{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t,e){const n=this._declarationTContainer.tView,r=_g(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null,e||null);r[np]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[Wo];return null!==o&&(r[Wo]=o.createEmbeddedView(n)),W0(n,r,t),new yp(r)}};function Yj(){return Og(vr(),we())}function Og(i,t){return 4&i.type?new Wj(t,i,zd(i,t)):null}let lr=(()=>{class i{}return i.__NG_ELEMENT_ID__=Xj,i})();function Xj(){return wI(vr(),we())}const qj=lr,yI=class extends qj{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return zd(this._hostTNode,this._hostLView)}get injector(){return new Id(this._hostTNode,this._hostLView)}get parentInjector(){const t=Jy(this._hostTNode,this._hostLView);if(PA(t)){const e=Km(t,this._hostLView),n=qm(t);return new Id(e[st].data[n+8],e)}return new Id(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=xI(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Gr}createEmbeddedView(t,e,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=t.createEmbeddedView(e||{},s);return this.insert(o,r),o}createComponent(t,e,n,r,s){const o=t&&!function cp(i){return"function"==typeof i}(t);let a;if(o)a=e;else{const u=e||{};a=u.index,n=u.injector,r=u.projectableNodes,s=u.environmentInjector||u.ngModuleRef}const l=o?t:new xp(Wn(t)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?c:this.parentInjector).get(Ea,null);h&&(s=h)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(t,e){const n=t._lView,r=n[st];if(function A4(i){return Mo(i[Ci])}(n)){const d=this.indexOf(t);if(-1!==d)this.detach(d);else{const u=n[Ci],h=new yI(u,u[Ir],u[Ci]);h.detach(h.indexOf(t))}}const s=this._adjustIndex(e),o=this._lContainer;!function jH(i,t,e,n){const r=Gr+n,s=e.length;n>0&&(e[r-1][wo]=t),n<s-Gr?(t[wo]=e[r],jA(e,Gr+n,t)):(e.push(t),t[wo]=null),t[Ci]=e;const o=t[np];null!==o&&e!==o&&function WH(i,t){const e=i[Ad];t[Rr]!==t[Ci][Ci][Rr]&&(i[aA]=!0),null===e?i[Ad]=[t]:e.push(t)}(o,t);const a=t[Wo];null!==a&&a.insertView(i),t[an]|=64}(r,n,o,s);const a=w0(s,o),l=n[hn],c=sg(l,o[zm]);return null!==c&&function HH(i,t,e,n,r,s){n[wa]=r,n[Ir]=t,mp(i,n,e,1,r,s)}(r,o[Ir],l,n,c,a),t.attachToViewContainerRef(),jA(Sx(o),s,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=xI(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=b0(this._lContainer,e);n&&(eg(Sx(this._lContainer),e),mD(n[st],n))}detach(t){const e=this._adjustIndex(t,-1),n=b0(this._lContainer,e);return n&&null!=eg(Sx(this._lContainer),e)?new yp(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function xI(i){return i[Hm]}function Sx(i){return i[Hm]||(i[Hm]=[])}function wI(i,t){let e;const n=t[i.index];if(Mo(n))e=n;else{let r;if(8&i.type)r=_r(n);else{const s=t[hn];r=s.createComment("");const o=Is(i,t);tc(s,sg(s,o),r,function KH(i,t){return i.nextSibling(t)}(s,o),!1)}t[i.index]=e=CT(n,t,r,i),bg(t,e)}return new yI(e,i,t)}class Ex{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ex(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ax{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let s=0;s<n;s++){const o=e.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new Ax(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==AI(t,e).matches&&this.queries[e].setDirty()}}class MI{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Dx{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,s=this.getByIndex(n).embeddedTView(t,r);s&&(s.indexInDeclarationView=n,null!==e?e.push(s):e=[s])}return null!==e?new Dx(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Tx{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Tx(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(t,e,Kj(e,s)),this.matchTNodeWithReadOption(t,e,Jm(e,t,s,!1,!1))}else n===ps?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Jm(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ht||r===lr||r===ps&&4&e.type)this.addMatch(e.index,-2);else{const s=Jm(e,t,r,!1,!1);null!==s&&this.addMatch(e.index,s)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Kj(i,t){const e=i.localNames;if(null!==e)for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1];return null}function Qj(i,t,e,n){return-1===e?function Zj(i,t){return 11&i.type?zd(i,t):4&i.type?Og(i,t):null}(t,i):-2===e?function Jj(i,t,e){return e===ht?zd(t,i):e===ps?Og(t,i):e===lr?wI(t,i):void 0}(i,t,n):Jl(i,i[st],e,t)}function CI(i,t,e,n){const r=t[Wo].queries[n];if(null===r.matches){const s=i.data,o=e.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:Qj(t,s[c],o[l+1],e.metadata.read))}r.matches=a}return r.matches}function kx(i,t,e,n){const r=i.queries.getByIndex(e),s=r.matches;if(null!==s){const o=CI(i,t,r,e);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=t[-l];for(let u=Gr;u<d.length;u++){const h=d[u];h[np]===h[Ci]&&kx(h[st],h,c,n)}if(null!==d[Ad]){const u=d[Ad];for(let h=0;h<u.length;h++){const p=u[h];kx(p[st],p,c,n)}}}}}return n}function ft(i){const t=we(),e=Dn(),n=MA();jy(n+1);const r=AI(e,n);if(i.dirty&&function E4(i){return 4==(4&i[an])}(t)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?kx(e,t,n,[]):CI(e,t,r,n);i.reset(s,j5),i.notifyOnChanges()}return!0}return!1}function pn(i,t,e){const n=Dn();n.firstCreatePass&&(EI(n,new MI(i,t,e),-1),2==(2&t)&&(n.staticViewQueries=!0)),SI(n,we(),t)}function yi(i,t,e,n){const r=Dn();if(r.firstCreatePass){const s=vr();EI(r,new MI(t,e,n),s.index),function t6(i,t){const e=i.contentQueries||(i.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(i.queries.length-1,t)}(r,i),2==(2&e)&&(r.staticContentQueries=!0)}SI(r,we(),e)}function mt(){return function e6(i,t){return i[Wo].queries[t].queryList}(we(),MA())}function SI(i,t,e){const n=new ou(4==(4&e));bT(i,t,n,n.destroy),null===t[Wo]&&(t[Wo]=new Ax),t[Wo].queries.push(new Ex(n))}function EI(i,t,e){null===i.queries&&(i.queries=new Dx),i.queries.track(new Tx(t,e))}function AI(i,t){return i.queries.getByIndex(t)}function so(i,t){return Og(i,t)}function Lg(...i){}const Ng=new ue("Application Initializer");let Bg=(()=>{class i{constructor(e){this.appInits=e,this.resolve=Lg,this.reject=Lg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const e=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(Mp(s))e.push(s);else if(ox(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});e.push(o)}}Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),0===e.length&&n(),this.initialized=!0}}return i.\u0275fac=function(e){return new(e||i)(K(Ng,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const cu=new ue("AppId",{providedIn:"root",factory:function jI(){return`${Lx()}${Lx()}${Lx()}`}});function Lx(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const WI=new ue("Platform Initializer"),Nx=new ue("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Fi=new ue("AnimationModuleType");let w6=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const na=new ue("LocaleId",{providedIn:"root",factory:()=>$t(na,Pt.Optional|Pt.SkipSelf)||function M6(){return typeof $localize<"u"&&$localize.locale||nu}()});class S6{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}let YI=(()=>{class i{compileModuleSync(e){return new yx(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){const n=this.compileModuleSync(e),s=Ta(Ts(e).declarations).reduce((o,a)=>{const l=Wn(a);return l&&o.push(new xp(l)),o},[]);return new S6(n,s)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const D6=(()=>Promise.resolve(0))();function Bx(i){typeof Zone>"u"?D6.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class lt{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fe(!1),this.onMicrotaskEmpty=new Fe(!1),this.onStable=new Fe(!1),this.onError=new Fe(!1),typeof Zone>"u")throw new he(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function T6(){let i=ri.requestAnimationFrame,t=ri.cancelAnimationFrame;if(typeof Zone<"u"&&i&&t){const e=i[Zone.__symbol__("OriginalDelegate")];e&&(i=e);const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function R6(i){const t=()=>{!function I6(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ri,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Vx(i),i.isCheckStableRunning=!0,Ux(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Vx(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,s,o,a)=>{try{return KI(i),e.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&t(),ZI(i)}},onInvoke:(e,n,r,s,o,a,l)=>{try{return KI(i),e.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&t(),ZI(i)}},onHasTask:(e,n,r,s)=>{e.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,Vx(i),Ux(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(e,n,r,s)=>(e.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!lt.isInAngularZone())throw new he(909,!1)}static assertNotInAngularZone(){if(lt.isInAngularZone())throw new he(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,t,k6,Lg,Lg);try{return s.runTask(o,e,n)}finally{s.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const k6={};function Ux(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Vx(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function KI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function ZI(i){i._nesting--,Ux(i)}class P6{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fe,this.onMicrotaskEmpty=new Fe,this.onStable=new Fe,this.onError=new Fe}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}const QI=new ue(""),Ug=new ue("");let $x,zx=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,$x||(function O6(i){$x=i}(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{lt.assertNotInAngularZone(),Bx(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Bx(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(e)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),e(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:e,timeoutId:s,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}}return i.\u0275fac=function(e){return new(e||i)(K(lt),K(Hx),K(Ug))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),Hx=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return $x?.findTestabilityInTree(this,e,n)??null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ia=!1;let hl=null;const JI=new ue("AllowMultipleToken"),Gx=new ue("PlatformDestroyListeners"),eR=new ue("appBootstrapListener");class tR{constructor(t,e){this.name=t,this.token=e}}function iR(i,t,e=[]){const n=`Platform: ${t}`,r=new ue(n);return(s=[])=>{let o=jx();if(!o||o.injector.get(JI,!1)){const a=[...e,...s,{provide:r,useValue:!0}];i?i(a):function N6(i){if(hl&&!hl.get(JI,!1))throw new he(400,!1);hl=i;const t=i.get(sR);(function nR(i){const t=i.get(WI,null);t&&t.forEach(e=>e())})(i)}(function rR(i=[],t){return Oi.create({name:t,providers:[{provide:O0,useValue:"platform"},{provide:Gx,useValue:new Set([()=>hl=null])},...i]})}(a,n))}return function U6(i){const t=jx();if(!t)throw new he(401,!1);return t}()}}function jx(){return hl?.get(sR)??null}let sR=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){const r=function aR(i,t){let e;return e="noop"===i?new P6:("zone.js"===i?void 0:i)||new lt(t),e}(n?.ngZone,function oR(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:lt,useValue:r}];return r.run(()=>{const o=Oi.create({providers:s,parent:this.injector,name:e.moduleType.name}),a=e.create(o),l=a.injector.get(Da,null);if(!l)throw new he(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{Vg(this._modules,a),c.unsubscribe()})}),function lR(i,t,e){try{const n=e();return Mp(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(Bg);return c.runInitializers(),c.donePromise.then(()=>(function Fk(i){eo(i,"Expected localeId to be defined"),"string"==typeof i&&(Ok=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(na,nu)||nu),this._moduleDoBootstrap(a),a))})})}bootstrapModule(e,n=[]){const r=cR({},n);return function F6(i,t,e){const n=new yx(e);return Promise.resolve(n)}(0,0,e).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(e){const n=e.injector.get(du);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!e.instance.ngDoBootstrap)throw new he(-403,!1);e.instance.ngDoBootstrap(n)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new he(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const e=this._injector.get(Gx,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(e){return new(e||i)(K(Oi))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function cR(i,t){return Array.isArray(t)?t.reduce(cR,i):{...i,...t}}let du=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(e,n,r){this._zone=e,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new Nn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new Nn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{lt.assertNotInAngularZone(),Bx(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{lt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=gr(s,o.pipe(Cy()))}bootstrap(e,n){const r=e instanceof KD;if(!this._injector.get(Bg).done){!r&&function Md(i){const t=Wn(i)||kr(i)||cs(i);return null!==t&&t.standalone}(e);throw new he(405,Ia)}let o;o=r?e:this._injector.get(rc).resolveComponentFactory(e),this.componentTypes.push(o.componentType);const a=function L6(i){return i.isBoundToModule}(o)?void 0:this._injector.get(iu),c=o.create(Oi.NULL,[],n||o.selector,a),d=c.location.nativeElement,u=c.injector.get(QI,null);return u?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),Vg(this.components,c),u?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new he(101,!1);try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){const n=e;Vg(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);const n=this._injector.get(eR,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>Vg(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new he(406,!1);const e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(e){return new(e||i)(K(lt),K(Ea),K(Da))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Vg(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}let yn=(()=>{class i{}return i.__NG_ELEMENT_ID__=z6,i})();function z6(i){return function H6(i,t,e){if(rp(i)&&!e){const n=ds(i.index,t);return new yp(n,n)}return 47&i.type?new yp(t[Rr],t):null}(vr(),we(),16==(16&i))}class fR{constructor(){}supports(t){return Cg(t)}create(t){return new X6(t)}}const Y6=(i,t)=>t;class X6{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Y6}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,s=null;for(;e||n;){const o=!n||e&&e.currentIndex<gR(n,r,s)?e:n,a=gR(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let h=0;h<c;h++){const p=h<s.length?s[h]:s[h]=0,f=p+h;d<=f&&f<c&&(s[h]=p+1)}s[o.previousIndex]=d-c}}a!==l&&t(o,a,l)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Cg(t))throw new he(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let r,s,o,e=this._itHead,n=!1;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)s=t[a],o=this._trackByFn(a,s),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,s,o,a)),Object.is(e.item,s)||this._addIdentityChange(e,s)):(e=this._mismatch(e,s,o,a),n=!0),e=e._next}else r=0,function D$(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{const e=i[Symbol.iterator]();let n;for(;!(n=e.next()).done;)t(n.value)}}(t,a=>{o=this._trackByFn(r,a),null!==e&&Object.is(e.trackById,o)?(n&&(e=this._verifyReinsertion(e,a,o,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)):(e=this._mismatch(e,a,o,r),n=!0),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let s;return null===t?s=this._itTail:(s=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,s,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,s,r)):t=this._addAfter(new q6(e,n),s,r),t}_verifyReinsertion(t,e,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?t=this._reinsertAfter(s,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,s=t._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new mR),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new mR),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class q6{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class K6{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class mR{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new K6,this.map.set(e,n)),n.add(t)}get(t,e){const r=this.map.get(t);return r?r.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function gR(i,t,e){const n=i.previousIndex;if(null===n)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}class _R{constructor(){}supports(t){return t instanceof Map||rx(t)}create(){return new Z6}}class Z6{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||rx(t)))throw new he(900,!1)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(n,r)=>{if(e&&e.key===r)this._maybeAddToChanges(e,n),this._appendAfter=e,e=e._next;else{const s=this._getOrCreateRecordForKey(r,n);e=this._insertBeforeOrAppend(e,s)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let n=e;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const r=this._records.get(t);this._maybeAddToChanges(r,e);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new Q6(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Q6{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function vR(){return new $g([new fR])}let $g=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(null!=n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||vR()),deps:[[i,new Ko,new Ps]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(null!=n)return n;throw new he(901,!1)}}return i.\u0275prov=Te({token:i,providedIn:"root",factory:vR}),i})();function bR(){return new Pp([new _R])}let Pp=(()=>{class i{constructor(e){this.factories=e}static create(e,n){if(n){const r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||bR()),deps:[[i,new Ko,new Ps]]}}find(e){const n=this.factories.find(r=>r.supports(e));if(n)return n;throw new he(901,!1)}}return i.\u0275prov=Te({token:i,providedIn:"root",factory:bR}),i})();const tW=iR(null,"core",[]);let nW=(()=>{class i{constructor(e){}}return i.\u0275fac=function(e){return new(e||i)(K(du))},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();let Kx=null;function Ra(){return Kx}class sW{}const Lt=new ue("DocumentToken");let Zx=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(){return function oW(){return K(yR)}()},providedIn:"platform"}),i})();const aW=new ue("Location Initialized");let yR=(()=>{class i extends Zx{constructor(e){super(),this._doc=e,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ra().getBaseHref(this._doc)}onPopState(e){const n=Ra().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){const n=Ra().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){xR()?this._history.pushState(e,n,r):this._location.hash=r}replaceState(e,n,r){xR()?this._history.replaceState(e,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:function(){return function lW(){return new yR(K(Lt))}()},providedIn:"platform"}),i})();function xR(){return!!window.history.pushState}function Qx(i,t){if(0==i.length)return t;if(0==t.length)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?i+t.substring(1):1==e?i+t:i+"/"+t}function wR(i){const t=i.match(/#|\?|$/),e=t&&t.index||i.length;return i.slice(0,e-("/"===i[e-1]?1:0))+i.slice(e)}function Pa(i){return i&&"?"!==i[0]?"?"+i:i}let hc=(()=>{class i{historyGo(e){throw new Error("Not implemented")}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(){return $t(CR)},providedIn:"root"}),i})();const MR=new ue("appBaseHref");let CR=(()=>{class i extends hc{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??$t(Lt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Qx(this._baseHref,e)}path(e=!1){const n=this._platformLocation.pathname+Pa(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,s){const o=this.prepareExternalUrl(r+Pa(s));this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){const o=this.prepareExternalUrl(r+Pa(s));this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(K(Zx),K(MR,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),cW=(()=>{class i extends hc{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(e){const n=Qx(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,s){let o=this.prepareExternalUrl(r+Pa(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(e,n,o)}replaceState(e,n,r,s){let o=this.prepareExternalUrl(r+Pa(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}}return i.\u0275fac=function(e){return new(e||i)(K(Zx),K(MR,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),Op=(()=>{class i{constructor(e){this._subject=new Fe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;const n=this._locationStrategy.getBaseHref();this._basePath=function hW(i){if(new RegExp("^(https?:)?//").test(i)){const[,e]=i.split(/\/\/[^\/]+/);return e}return i}(wR(SR(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+Pa(n))}normalize(e){return i.stripTrailingSlash(function uW(i,t){if(!i||!t.startsWith(i))return t;const e=t.substring(i.length);return""===e||["/",";","?","#"].includes(e[0])?e:t}(this._basePath,SR(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pa(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Pa(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}}return i.normalizeQueryParams=Pa,i.joinWithSlash=Qx,i.stripTrailingSlash=wR,i.\u0275fac=function(e){return new(e||i)(K(hc))},i.\u0275prov=Te({token:i,factory:function(){return function dW(){return new Op(K(hc))}()},providedIn:"root"}),i})();function SR(i){return i.replace(/\/index.html$/,"")}var fs=(()=>((fs=fs||{})[fs.Decimal=0]="Decimal",fs[fs.Percent=1]="Percent",fs[fs.Currency=2]="Currency",fs[fs.Scientific=3]="Scientific",fs))(),Tt=(()=>((Tt=Tt||{})[Tt.Decimal=0]="Decimal",Tt[Tt.Group=1]="Group",Tt[Tt.List=2]="List",Tt[Tt.PercentSign=3]="PercentSign",Tt[Tt.PlusSign=4]="PlusSign",Tt[Tt.MinusSign=5]="MinusSign",Tt[Tt.Exponential=6]="Exponential",Tt[Tt.SuperscriptingExponent=7]="SuperscriptingExponent",Tt[Tt.PerMille=8]="PerMille",Tt[Tt.Infinity=9]="Infinity",Tt[Tt.NaN=10]="NaN",Tt[Tt.TimeSeparator=11]="TimeSeparator",Tt[Tt.CurrencyDecimal=12]="CurrencyDecimal",Tt[Tt.CurrencyGroup=13]="CurrencyGroup",Tt))();function oo(i,t){const e=qr(i),n=e[et.NumberSymbols][t];if(typeof n>"u"){if(t===Tt.CurrencyDecimal)return e[et.NumberSymbols][Tt.Decimal];if(t===Tt.CurrencyGroup)return e[et.NumberSymbols][Tt.Group]}return n}const BW=/^(\d+)?\.((\d+)(-(\d+))?)?$/,IR=22,Qg=".",Lp="0",UW=";",VW=",",iw="#";function ow(i){const t=parseInt(i);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+i);return t}const lw=/\s+/,OR=[];let pc=(()=>{class i{constructor(e,n,r,s){this._iterableDiffers=e,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this.initialClasses=OR,this.stateMap=new Map}set klass(e){this.initialClasses=null!=e?e.trim().split(lw):OR}set ngClass(e){this.rawClass="string"==typeof e?e.trim().split(lw):e}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(const n of e)this._updateState(n,!0);else if(null!=e)for(const n of Object.keys(e))this._updateState(n,Boolean(e[n]));this._applyStateDiff()}_updateState(e,n){const r=this.stateMap.get(e);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const e of this.stateMap){const n=e[0],r=e[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(e,n){(e=e.trim()).length>0&&e.split(lw).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(e){return new(e||i)(x($g),x(Pp),x(ht),x(Aa))},i.\u0275dir=ge({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class ZW{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let cr=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const n=this._viewContainer;e.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new ZW(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),NR(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{NR(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(x(lr),x(ps),x($g))},i.\u0275dir=ge({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function NR(i,t){i.context.$implicit=t.item}let On=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new JW,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){BR("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){BR("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}}return i.\u0275fac=function(e){return new(e||i)(x(lr),x(ps))},i.\u0275dir=ge({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class JW{constructor(){this.$implicit=null,this.ngIf=null}}function BR(i,t){if(t&&!t.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${Jn(t)}'.`)}class cw{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Np=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews.push(e)}_matchCase(e){const n=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(e){if(this._defaultViews.length>0&&e!==this._defaultUsed){this._defaultUsed=e;for(const n of this._defaultViews)n.enforceState(e)}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),dw=(()=>{class i{constructor(e,n,r){this.ngSwitch=r,r._addCase(),this._view=new cw(e,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(e){return new(e||i)(x(lr),x(ps),x(Np,9))},i.\u0275dir=ge({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),UR=(()=>{class i{constructor(e,n,r){r._addDefault(new cw(e,n))}}return i.\u0275fac=function(e){return new(e||i)(x(lr),x(ps),x(Np,9))},i.\u0275dir=ge({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),Jg=(()=>{class i{constructor(e,n,r){this._ngEl=e,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,n){const[r,s]=e.split("."),o=-1===r.indexOf("-")?void 0:us.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(e){e.forEachRemovedItem(n=>this._setStyle(n.key,null)),e.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),e.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(Pp),x(Aa))},i.\u0275dir=ge({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),hu=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(e.ngTemplateOutlet||e.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(e){return new(e||i)(x(lr))},i.\u0275dir=ge({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Pi]}),i})();function Ro(i,t){return new he(2100,!1)}class t9{createSubscription(t,e){return t.subscribe({next:e,error:n=>{throw n}})}dispose(t){t.unsubscribe()}}class n9{createSubscription(t,e){return t.then(e,n=>{throw n})}dispose(t){}}const r9=new n9,s9=new t9;let Fr=(()=>{class i{constructor(e){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=e}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,n=>this._updateLatestValue(e,n))}_selectStrategy(e){if(Mp(e))return r9;if(GT(e))return s9;throw Ro()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,n){e===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(x(yn,16))},i.\u0275pipe=ls({name:"async",type:i,pure:!1,standalone:!0}),i})(),zR=(()=>{class i{constructor(e){this.differs=e,this.keyValues=[],this.compareFn=HR}transform(e,n=HR){if(!e||!(e instanceof Map)&&"object"!=typeof e)return null;this.differ||(this.differ=this.differs.find(e).create());const r=this.differ.diff(e),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function v9(i,t){return{key:i,value:t}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(e){return new(e||i)(x(Pp,16))},i.\u0275pipe=ls({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function HR(i,t){const e=i.key,n=t.key;if(e===n)return 0;if(void 0===e)return 1;if(void 0===n)return-1;if(null===e)return 1;if(null===n)return-1;if("string"==typeof e&&"string"==typeof n)return e<n?-1:1;if("number"==typeof e&&"number"==typeof n)return e-n;if("boolean"==typeof e&&"boolean"==typeof n)return e<n?-1:1;const r=String(e),s=String(n);return r==s?0:r<s?-1:1}let $R=(()=>{class i{constructor(e){this._locale=e}transform(e,n,r){if(!function uw(i){return!(null==i||""===i||i!=i)}(e))return null;r=r||this._locale;try{return function GW(i,t,e){return function rw(i,t,e,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function WW(i){let n,r,s,o,a,t=Math.abs(i)+"",e=0;for((r=t.indexOf(Qg))>-1&&(t=t.replace(Qg,"")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charAt(s)===Lp;s++);if(s===(a=t.length))n=[0],r=1;else{for(a--;t.charAt(a)===Lp;)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(t.charAt(s))}return r>IR&&(n=n.splice(0,IR-1),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}(i);o&&(c=function jW(i){if(0===i.digits[0])return i;const t=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===t?i.digits.push(0,0):1===t&&i.digits.push(0),i.integerLen+=2),i}(c));let d=t.minInt,u=t.minFrac,h=t.maxFrac;if(s){const b=s.match(BW);if(null===b)throw new Error(`${s} is not a valid digit info`);const v=b[1],y=b[3],R=b[5];null!=v&&(d=ow(v)),null!=y&&(u=ow(y)),null!=R?h=ow(R):null!=y&&u>h&&(h=u)}!function YW(i,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(t,r),e);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let u=o;u<n.length;u++)n[u]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let u=1;u<o;u++)n[u]=0}if(a>=5)if(o-1<0){for(let u=0;u>o;u--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=t+i.integerLen,d=n.reduceRight(function(u,h,p,f){return f[p]=(h+=u)<10?h:h-10,l&&(0===f[p]&&p>=c?f.pop():l=!1),h>=10?1:0},0);d&&(n.unshift(d),i.integerLen++)}(c,u,h);let p=c.digits,f=c.integerLen;const g=c.exponent;let m=[];for(l=p.every(b=>!b);f<d;f++)p.unshift(0);for(;f<0;f++)p.unshift(0);f>0?m=p.splice(f,p.length):(m=p,p=[0]);const _=[];for(p.length>=t.lgSize&&_.unshift(p.splice(-t.lgSize,p.length).join(""));p.length>t.gSize;)_.unshift(p.splice(-t.gSize,p.length).join(""));p.length&&_.unshift(p.join("")),a=_.join(oo(e,n)),m.length&&(a+=oo(e,r)+m.join("")),g&&(a+=oo(e,Tt.Exponential)+"+"+g)}else a=oo(e,Tt.Infinity);return a=i<0&&!l?t.negPre+a+t.negSuf:t.posPre+a+t.posSuf,a}(i,function sw(i,t="-"){const e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(UW),r=n[0],s=n[1],o=-1!==r.indexOf(Qg)?r.split(Qg):[r.substring(0,r.lastIndexOf(Lp)+1),r.substring(r.lastIndexOf(Lp)+1)],a=o[0],l=o[1]||"";e.posPre=a.substring(0,a.indexOf(iw));for(let d=0;d<l.length;d++){const u=l.charAt(d);u===Lp?e.minFrac=e.maxFrac=d+1:u===iw?e.maxFrac=d+1:e.posSuf+=u}const c=a.split(VW);if(e.gSize=c[1]?c[1].length:0,e.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const d=r.length-e.posPre.length-e.posSuf.length,u=s.indexOf(iw);e.negPre=s.substring(0,u).replace(/'/g,""),e.negSuf=s.slice(u+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}(function Jx(i,t){return qr(i)[et.NumberFormats][t]}(t,fs.Decimal),oo(t,Tt.MinusSign)),t,Tt.Group,Tt.Decimal,e)}(function hw(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(e),r,n)}catch(s){throw Ro()}}}return i.\u0275fac=function(e){return new(e||i)(x(na,16))},i.\u0275pipe=ls({name:"number",type:i,pure:!0,standalone:!0}),i})();let nr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();const GR="browser";let S9=(()=>{class i{}return i.\u0275prov=Te({token:i,providedIn:"root",factory:()=>new E9(K(Lt),window)}),i})();class E9{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function A9(i,t){const e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=jR(this.window.history)||jR(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function jR(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class t7 extends sW{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class mw extends t7{static makeCurrent(){!function rW(i){Kx||(Kx=i)}(new mw)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function n7(){return Up=Up||document.querySelector("base"),Up?Up.getAttribute("href"):null}();return null==e?null:function i7(i){n_=n_||document.createElement("a"),n_.setAttribute("href",i);const t=n_.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){Up=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function qW(i,t){t=encodeURIComponent(t);for(const e of i.split(";")){const n=e.indexOf("="),[r,s]=-1==n?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}(document.cookie,t)}}let n_,Up=null;const KR=new ue("TRANSITION_ID"),s7=[{provide:Ng,useFactory:function r7(i,t,e){return()=>{e.get(Bg).donePromise.then(()=>{const n=Ra(),r=t.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[KR,Lt,Oi],multi:!0}];let a7=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();const i_=new ue("EventManagerPlugins");let r_=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}addGlobalEventListener(e,n,r){return this._findPluginFor(n).addGlobalEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){const n=this._eventNameToPlugin.get(e);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(e))return this._eventNameToPlugin.set(e,o),o}throw new Error(`No event manager plugin found for event ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(K(i_),K(lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();class ZR{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Ra().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let QR=(()=>{class i{constructor(){this.usageCount=new Map}addStyles(e){for(const n of e)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(e){for(const n of e)0===this.changeUsageCount(n,-1)&&this.onStyleRemoved(n)}onStyleRemoved(e){}onStyleAdded(e){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(e,n){const r=this.usageCount;let s=r.get(e)??0;return s+=n,s>0?r.set(e,s):r.delete(e),s}ngOnDestroy(){for(const e of this.getAllStyles())this.onStyleRemoved(e);this.usageCount.clear()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),Vp=(()=>{class i extends QR{constructor(e){super(),this.doc=e,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(e){for(const n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){const n=this.styleRef;n.get(e)?.forEach(s=>s.remove()),n.delete(e)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(const n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}addStyleToHost(e,n){const r=this.doc.createElement("style");r.textContent=n,e.appendChild(r);const s=this.styleRef.get(n);s?s.push(r):this.styleRef.set(n,[r])}resetHostNodes(){const e=this.hostNodes;e.clear(),e.add(this.doc.head)}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();const gw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},_w=/%COMP%/g,tP=new ue("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function nP(i,t){return t.flat(100).map(e=>e.replace(_w,i))}function iP(i){return t=>{if("__ngUnwrap__"===t)return i;!1===i(t)&&(t.preventDefault(),t.returnValue=!1)}}let s_=(()=>{class i{constructor(e,n,r,s){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new vw(e)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;const r=this.getOrCreateRenderer(e,n);return r instanceof oP?r.applyToHost(e):r instanceof bw&&r.applyStyles(),r}getOrCreateRenderer(e,n){const r=this.rendererByCompId;let s=r.get(n.id);if(!s){const o=this.eventManager,a=this.sharedStylesHost,l=this.removeStylesOnCompDestory;switch(n.encapsulation){case xo.Emulated:s=new oP(o,a,n,this.appId,l);break;case xo.ShadowDom:return new f7(o,a,e,n);default:s=new bw(o,a,n,l)}s.onDestroy=()=>r.delete(n.id),r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return i.\u0275fac=function(e){return new(e||i)(K(r_),K(Vp),K(cu),K(tP))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();class vw{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(gw[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){(sP(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(sP(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const s=gw[r];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=gw[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(us.DashCase|us.Important)?t.style.setProperty(e,n,r&us.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&us.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,iP(n)):this.eventManager.addEventListener(t,e,iP(n))}}function sP(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class f7 extends vw{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=nP(r.id,r.styles);for(const o of s){const a=document.createElement("style");a.textContent=o,this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class bw extends vw{constructor(t,e,n,r,s=n.id){super(t),this.sharedStylesHost=e,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=nP(s,n.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class oP extends bw{constructor(t,e,n,r,s){const o=r+"-"+n.id;super(t,e,n,s,o),this.contentAttr=function u7(i){return"_ngcontent-%COMP%".replace(_w,i)}(o),this.hostAttr=function h7(i){return"_nghost-%COMP%".replace(_w,i)}(o)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}let m7=(()=>{class i extends ZR{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();const aP=["alt","control","meta","shift"],g7={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},_7={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let v7=(()=>{class i extends ZR{constructor(e){super(e)}supports(e){return null!=i.parseEventName(e)}addEventListener(e,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ra().onAndCancel(e,s.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),aP.forEach(c=>{const d=n.indexOf(c);d>-1&&(n.splice(d,1),o+=c+".")}),o+=s,0!=n.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let r=g7[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(r=e.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),aP.forEach(o=>{o!==r&&(0,_7[o])(e)&&(s+=o+".")}),s+=r,s===n)}static eventCallback(e,n,r){return s=>{i.matchEventFullKeyCode(s,e)&&r.runGuarded(()=>n(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();const w7=iR(tW,"browser",[{provide:Nx,useValue:GR},{provide:WI,useValue:function b7(){mw.makeCurrent()},multi:!0},{provide:Lt,useFactory:function x7(){return function s5(i){E0=i}(document),document},deps:[]}]),dP=new ue(""),uP=[{provide:Ug,useClass:class o7{addToWindow(t){ri.getAngularTestability=(n,r=!0)=>{const s=t.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},ri.getAllAngularTestabilities=()=>t.getAllTestabilities(),ri.getAllAngularRootElements=()=>t.getAllRootElements(),ri.frameworkStabilizers||(ri.frameworkStabilizers=[]),ri.frameworkStabilizers.push(n=>{const r=ri.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(t,e,n){return null==e?null:t.getTestability(e)??(n?Ra().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},deps:[]},{provide:QI,useClass:zx,deps:[lt,Hx,Ug]},{provide:zx,useClass:zx,deps:[lt,Hx,Ug]}],hP=[{provide:O0,useValue:"root"},{provide:Da,useFactory:function y7(){return new Da},deps:[]},{provide:i_,useClass:m7,multi:!0,deps:[Lt,lt,Nx]},{provide:i_,useClass:v7,multi:!0,deps:[Lt]},{provide:s_,useClass:s_,deps:[r_,Vp,cu,tP]},{provide:vp,useExisting:s_},{provide:QR,useExisting:Vp},{provide:Vp,useClass:Vp,deps:[Lt]},{provide:r_,useClass:r_,deps:[i_,lt]},{provide:class D9{},useClass:a7,deps:[]},[]];let pP=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:cu,useValue:e.appId},{provide:KR,useExisting:cu},s7]}}}return i.\u0275fac=function(e){return new(e||i)(K(dP,12))},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[...hP,...uP],imports:[nr,nW]}),i})(),fP=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:function(e){let n=null;return n=e?new e:function C7(){return new fP(K(Lt))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let ww=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(e){let n=null;return n=e?new(e||i):K(_P),n},providedIn:"root"}),i})(),_P=(()=>{class i extends ww{constructor(e){super(),this._doc=e}sanitize(e,n){if(null==n)return null;switch(e){case zn.NONE:return n;case zn.HTML:return Zo(n,"HTML")?Os(n):BD(this._doc,String(n)).toString();case zn.STYLE:return Zo(n,"Style")?Os(n):n;case zn.SCRIPT:if(Zo(n,"Script"))return Os(n);throw new Error("unsafe value used in a script context");case zn.URL:return Zo(n,"URL")?Os(n):dg(String(n));case zn.RESOURCE_URL:if(Zo(n,"ResourceURL"))return Os(n);throw new Error(`unsafe value used in a resource URL context (see ${km})`);default:throw new Error(`Unexpected SecurityContext ${e} (see ${km})`)}}bypassSecurityTrustHtml(e){return function h5(i){return new o5(i)}(e)}bypassSecurityTrustStyle(e){return function p5(i){return new a5(i)}(e)}bypassSecurityTrustScript(e){return function f5(i){return new l5(i)}(e)}bypassSecurityTrustUrl(e){return function m5(i){return new c5(i)}(e)}bypassSecurityTrustResourceUrl(e){return function g5(i){return new d5(i)}(e)}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:function(e){let n=null;return n=e?new e:function T7(i){return new _P(i.get(Lt))}(K(Oi)),n},providedIn:"root"}),i})();function dt(...i){return Hi(i,qh(i))}class Be extends De{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}}const pu=W(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:k7}=Array,{getPrototypeOf:I7,prototype:R7,keys:P7}=Object;function vP(i){if(1===i.length){const t=i[0];if(k7(t))return{args:t,keys:null};if(function O7(i){return i&&"object"==typeof i&&I7(i)===R7}(t)){const e=P7(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}const{isArray:F7}=Array;function Mw(i){return rt(t=>function L7(i,t){return F7(t)?i(...t):i(t)}(i,t))}function bP(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function Ls(...i){const t=qh(i),e=j1(i),{args:n,keys:r}=vP(i);if(0===n.length)return Hi([],t);const s=new Nn(function N7(i,t,e=zi){return n=>{yP(t,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)yP(t,()=>{const c=Hi(i[l],t);let d=!1;c.subscribe(Zn(n,u=>{s[l]=u,d||(d=!0,a--),a||n.next(e(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,t,r?o=>bP(r,o):zi));return e?s.pipe(Mw(e)):s}function yP(i,t,e){i?va(e,i,t):t()}function zp(...i){return function B7(){return xd(1)}()(Hi(i,qh(i)))}function Hp(i){return new Nn(t=>{mr(i()).subscribe(t)})}function fu(i,t){const e=B(i)?i:()=>i,n=r=>r.error(e());return new Nn(t?r=>t.schedule(n,0,r):n)}function Cw(){return ii((i,t)=>{let e=null;i._refCount++;const n=Zn(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(e=null);const r=i._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}class xP extends Nn{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,k1(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new J;const e=this.getSubject();t.add(this.source.subscribe(Zn(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=J.EMPTY)}return t}refCount(){return Cw()(this)}}function Lr(i,t){return ii((e,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();e.subscribe(Zn(n,l=>{r?.unsubscribe();let c=0;const d=s++;mr(i(l,d)).subscribe(r=Zn(n,u=>n.next(t?t(l,u,d,c++):u),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function oi(i){return i<=0?()=>Js:ii((t,e)=>{let n=0;t.subscribe(Zn(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function ms(...i){const t=qh(i);return ii((e,n)=>{(t?zp(i,e,t):zp(i,e)).subscribe(n)})}function Qt(i,t){return ii((e,n)=>{let r=0;e.subscribe(Zn(n,s=>i.call(t,s,r++)&&n.next(s)))})}function o_(i){return ii((t,e)=>{let n=!1;t.subscribe(Zn(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function wP(i=U7){return ii((t,e)=>{let n=!1;t.subscribe(Zn(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function U7(){return new pu}function fl(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Qt((r,s)=>i(r,s,n)):zi,oi(1),e?o_(t):wP(()=>new pu))}function ml(i,t){return B(t)?Qi(i,t,1):Qi(i,1)}function pi(i,t,e){const n=B(i)||t||e?{next:i,error:t,complete:e}:i;return n?ii((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(Zn(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):zi}function Fa(i){return ii((t,e)=>{let s,n=null,r=!1;n=t.subscribe(Zn(e,void 0,void 0,o=>{s=mr(i(o,Fa(i)(t))),n?(n.unsubscribe(),n=null,s.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(e))})}function Sw(i,t){return ii(function V7(i,t,e,n,r){return(s,o)=>{let a=e,l=t,c=0;s.subscribe(Zn(o,d=>{const u=c++;l=a?i(l,d,u):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}(i,t,arguments.length>=2,!0))}function Ew(i){return i<=0?()=>Js:ii((t,e)=>{let n=[];t.subscribe(Zn(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function MP(i,t){const e=arguments.length>=2;return n=>n.pipe(i?Qt((r,s)=>i(r,s,n)):zi,Ew(1),e?o_(t):wP(()=>new pu))}function CP(i,t=!1){return ii((e,n)=>{let r=0;e.subscribe(Zn(n,s=>{const o=i(s,r++);(o||t)&&n.next(s),!o&&n.complete()}))})}function SP(i){return rt(()=>i)}function gl(i){return ii((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}const tn="primary",$p=Symbol("RouteTitle");class z7{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function mu(i){return new z7(i)}function H7(i,t,e){const n=e.path.split("/");if(n.length>i.length||"full"===e.pathMatch&&(t.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function ia(i,t){const e=i?Object.keys(i):void 0,n=t?Object.keys(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!EP(i[r],t[r]))return!1;return!0}function EP(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;const e=[...i].sort(),n=[...t].sort();return e.every((r,s)=>n[s]===r)}return i===t}function AP(i){return Array.prototype.concat.apply([],i)}function DP(i){return i.length>0?i[i.length-1]:null}function br(i,t){for(const e in i)i.hasOwnProperty(e)&&t(i[e],e)}function _l(i){return ox(i)?i:Mp(i)?Hi(Promise.resolve(i)):dt(i)}const a_=!1,G7={exact:function IP(i,t,e){if(!fc(i.segments,t.segments)||!l_(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(const n in t.children)if(!i.children[n]||!IP(i.children[n],t.children[n],e))return!1;return!0},subset:RP},TP={exact:function j7(i,t){return ia(i,t)},subset:function W7(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>EP(i[e],t[e]))},ignored:()=>!0};function kP(i,t,e){return G7[e.paths](i.root,t.root,e.matrixParams)&&TP[e.queryParams](i.queryParams,t.queryParams)&&!("exact"===e.fragment&&i.fragment!==t.fragment)}function RP(i,t,e){return PP(i,t,t.segments,e)}function PP(i,t,e,n){if(i.segments.length>e.length){const r=i.segments.slice(0,e.length);return!(!fc(r,e)||t.hasChildren()||!l_(r,e,n))}if(i.segments.length===e.length){if(!fc(i.segments,e)||!l_(i.segments,e,n))return!1;for(const r in t.children)if(!i.children[r]||!RP(i.children[r],t.children[r],n))return!1;return!0}{const r=e.slice(0,i.segments.length),s=e.slice(i.segments.length);return!!(fc(i.segments,r)&&l_(i.segments,r,n)&&i.children[tn])&&PP(i.children[tn],t,s,n)}}function l_(i,t,e){return t.every((n,r)=>TP[e](i[r].parameters,n.parameters))}class vl{constructor(t=new _n([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mu(this.queryParams)),this._queryParamMap}toString(){return q7.serialize(this)}}class _n{constructor(t,e){this.segments=t,this.children=e,this.parent=null,br(e,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return c_(this)}}class Gp{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=mu(this.parameters)),this._parameterMap}toString(){return LP(this)}}function fc(i,t){return i.length===t.length&&i.every((e,n)=>e.path===t[n].path)}let jp=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(){return new Aw},providedIn:"root"}),i})();class Aw{parse(t){const e=new rY(t);return new vl(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Wp(t.root,!0)}`,n=function Q7(i){const t=Object.keys(i).map(e=>{const n=i[e];return Array.isArray(n)?n.map(r=>`${d_(e)}=${d_(r)}`).join("&"):`${d_(e)}=${d_(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${n}${"string"==typeof t.fragment?`#${function K7(i){return encodeURI(i)}(t.fragment)}`:""}`}}const q7=new Aw;function c_(i){return i.segments.map(t=>LP(t)).join("/")}function Wp(i,t){if(!i.hasChildren())return c_(i);if(t){const e=i.children[tn]?Wp(i.children[tn],!1):"",n=[];return br(i.children,(r,s)=>{s!==tn&&n.push(`${s}:${Wp(r,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function X7(i,t){let e=[];return br(i.children,(n,r)=>{r===tn&&(e=e.concat(t(n,r)))}),br(i.children,(n,r)=>{r!==tn&&(e=e.concat(t(n,r)))}),e}(i,(n,r)=>r===tn?[Wp(i.children[tn],!1)]:[`${r}:${Wp(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[tn]?`${c_(i)}/${e[0]}`:`${c_(i)}/(${e.join("//")})`}}function OP(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function d_(i){return OP(i).replace(/%3B/gi,";")}function Dw(i){return OP(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function u_(i){return decodeURIComponent(i)}function FP(i){return u_(i.replace(/\+/g,"%20"))}function LP(i){return`${Dw(i.path)}${function Z7(i){return Object.keys(i).map(t=>`;${Dw(t)}=${Dw(i[t])}`).join("")}(i.parameters)}`}const J7=/^[^\/()?;=#]+/;function h_(i){const t=i.match(J7);return t?t[0]:""}const eY=/^[^=?&#]+/,nY=/^[^&#]+/;class rY{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _n([],{}):new _n([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[tn]=new _n(t,e)),n}parseSegment(){const t=h_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new he(4009,a_);return this.capture(t),new Gp(u_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=h_(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const r=h_(this.remaining);r&&(n=r,this.capture(n))}t[u_(e)]=u_(n)}parseQueryParam(t){const e=function tY(i){const t=i.match(eY);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const o=function iY(i){const t=i.match(nY);return t?t[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=FP(e),s=FP(n);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=h_(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new he(4010,a_);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=tn);const o=this.parseChildren();e[s]=1===Object.keys(o).length?o[tn]:new _n([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new he(4011,a_)}}function Tw(i){return i.segments.length>0?new _n([],{[tn]:i}):i}function p_(i){const t={};for(const n of Object.keys(i.children)){const s=p_(i.children[n]);(s.segments.length>0||s.hasChildren())&&(t[n]=s)}return function sY(i){if(1===i.numberOfChildren&&i.children[tn]){const t=i.children[tn];return new _n(i.segments.concat(t.segments),t.children)}return i}(new _n(i.segments,t))}function mc(i){return i instanceof vl}const kw=!1;function oY(i,t,e,n,r){if(0===e.length)return gu(t.root,t.root,t.root,n,r);const s=function zP(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new VP(!0,0,i);let t=0,e=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return br(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?e=!0:".."===a?t++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new VP(e,t,n)}(e);return s.toRoot()?gu(t.root,t.root,new _n([],{}),n,r):function o(l){const c=function lY(i,t,e,n){if(i.isAbsolute)return new _u(t.root,!0,0);if(-1===n)return new _u(e,e===t.root,0);return function HP(i,t,e){let n=i,r=t,s=e;for(;s>r;){if(s-=r,n=n.parent,!n)throw new he(4005,kw&&"Invalid number of '../'");r=n.segments.length}return new _u(n,!1,r-s)}(e,n+(Yp(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,t,i.snapshot?._urlSegment,l),d=c.processChildren?vu(c.segmentGroup,c.index,s.commands):Iw(c.segmentGroup,c.index,s.commands);return gu(t.root,c.segmentGroup,d,n,r)}(i.snapshot?._lastPathIndex)}function Yp(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function Xp(i){return"object"==typeof i&&null!=i&&i.outlets}function gu(i,t,e,n,r){let o,s={};n&&br(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=i===t?e:UP(i,t,e);const a=Tw(p_(o));return new vl(a,s,r)}function UP(i,t,e){const n={};return br(i.children,(r,s)=>{n[s]=r===t?e:UP(r,t,e)}),new _n(i.segments,n)}class VP{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Yp(n[0]))throw new he(4003,kw&&"Root segment cannot have matrix parameters");const r=n.find(Xp);if(r&&r!==DP(n))throw new he(4004,kw&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class _u{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Iw(i,t,e){if(i||(i=new _n([],{})),0===i.segments.length&&i.hasChildren())return vu(i,t,e);const n=function dY(i,t,e){let n=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return s;const o=i.segments[r],a=e[n];if(Xp(a))break;const l=`${a}`,c=n<e.length-1?e[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!GP(l,c,o))return s;n+=2}else{if(!GP(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new _n(i.segments.slice(0,n.pathIndex),{});return s.children[tn]=new _n(i.segments.slice(n.pathIndex),i.children),vu(s,0,r)}return n.match&&0===r.length?new _n(i.segments,{}):n.match&&!i.hasChildren()?Rw(i,t,e):n.match?vu(i,0,r):Rw(i,t,e)}function vu(i,t,e){if(0===e.length)return new _n(i.segments,{});{const n=function cY(i){return Xp(i[0])?i[0].outlets:{[tn]:i}}(e),r={};if(!n[tn]&&i.children[tn]&&1===i.numberOfChildren&&0===i.children[tn].segments.length){const s=vu(i.children[tn],t,e);return new _n(i.segments,s.children)}return br(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=Iw(i.children[o],t,s))}),br(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new _n(i.segments,r)}}function Rw(i,t,e){const n=i.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Xp(s)){const l=uY(s.outlets);return new _n(n,l)}if(0===r&&Yp(e[0])){n.push(new Gp(i.segments[t].path,$P(e[0]))),r++;continue}const o=Xp(s)?s.outlets[tn]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Yp(a)?(n.push(new Gp(o,$P(a))),r+=2):(n.push(new Gp(o,{})),r++)}return new _n(n,{})}function uY(i){const t={};return br(i,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Rw(new _n([],{}),0,e))}),t}function $P(i){const t={};return br(i,(e,n)=>t[n]=`${e}`),t}function GP(i,t,e){return i==e.path&&ia(t,e.parameters)}const qp="imperative";class ra{constructor(t,e){this.id=t,this.url=e}}class Pw extends ra{constructor(t,e,n="imperative",r=null){super(t,e),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gc extends ra{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class f_ extends ra{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class m_ extends ra{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=16}}class Ow extends ra{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class hY extends ra{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pY extends ra{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fY extends ra{constructor(t,e,n,r,s){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class mY extends ra{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gY extends ra{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _Y{constructor(t){this.route=t,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class vY{constructor(t){this.route=t,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bY{constructor(t){this.snapshot=t,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yY{constructor(t){this.snapshot=t,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xY{constructor(t){this.snapshot=t,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wY{constructor(t){this.snapshot=t,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jP{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let SY=(()=>{class i{createUrlTree(e,n,r,s,o,a){return oY(e||n.root,r,s,o,a)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),AY=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(t){return SY.\u0275fac(t)},providedIn:"root"}),i})();class WP{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Fw(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){const e=Fw(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Lw(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Lw(t,this._root).map(e=>e.value)}}function Fw(i,t){if(i===t.value)return t;for(const e of t.children){const n=Fw(i,e);if(n)return n}return null}function Lw(i,t){if(i===t.value)return[t];for(const e of t.children){const n=Lw(i,e);if(n.length)return n.unshift(t),n}return[]}class La{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function bu(i){const t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}class YP extends WP{constructor(t,e){super(t),this.snapshot=e,Nw(this,t)}toString(){return this.snapshot.toString()}}function XP(i,t){const e=function DY(i,t){const o=new g_([],{},{},"",{},tn,t,null,i.root,-1,{});return new KP("",new La(o,[]))}(i,t),n=new Be([new Gp("",{})]),r=new Be({}),s=new Be({}),o=new Be({}),a=new Be(""),l=new yu(n,r,o,a,s,tn,t,e.root);return l.snapshot=e.root,new YP(new La(l,[]),e)}class yu{constructor(t,e,n,r,s,o,a,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(rt(c=>c[$p]))??dt(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(rt(t=>mu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(rt(t=>mu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qP(i,t="emptyOnly"){const e=i.pathFromRoot;let n=0;if("always"!==t)for(n=e.length-1;n>=1;){const r=e[n],s=e[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function TY(i){return i.reduce((t,e)=>({params:{...t.params,...e.params},data:{...t.data,...e.data},resolve:{...e.data,...t.resolve,...e.routeConfig?.data,...e._resolvedData}}),{params:{},data:{},resolve:{}})}(e.slice(n))}class g_{get title(){return this.data?.[$p]}constructor(t,e,n,r,s,o,a,l,c,d,u){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KP extends WP{constructor(t,e){super(e),this.url=t,Nw(this,e)}toString(){return ZP(this._root)}}function Nw(i,t){t.value._routerState=i,t.children.forEach(e=>Nw(i,e))}function ZP(i){const t=i.children.length>0?` { ${i.children.map(ZP).join(", ")} } `:"";return`${i.value}${t}`}function Bw(i){if(i.snapshot){const t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,ia(t.queryParams,e.queryParams)||i.queryParams.next(e.queryParams),t.fragment!==e.fragment&&i.fragment.next(e.fragment),ia(t.params,e.params)||i.params.next(e.params),function $7(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!ia(i[e],t[e]))return!1;return!0}(t.url,e.url)||i.url.next(e.url),ia(t.data,e.data)||i.data.next(e.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function Uw(i,t){const e=ia(i.params,t.params)&&function Y7(i,t){return fc(i,t)&&i.every((e,n)=>ia(e.parameters,t[n].parameters))}(i.url,t.url);return e&&!(!i.parent!=!t.parent)&&(!i.parent||Uw(i.parent,t.parent))}function Kp(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){const n=e.value;n._futureSnapshot=t.value;const r=function IY(i,t,e){return t.children.map(n=>{for(const r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Kp(i,n,r);return Kp(i,n)})}(i,t,e);return new La(n,r)}{if(i.shouldAttach(t.value)){const s=i.retrieve(t.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>Kp(i,a)),o}}const n=function RY(i){return new yu(new Be(i.url),new Be(i.params),new Be(i.queryParams),new Be(i.fragment),new Be(i.data),i.outlet,i.component,i)}(t.value),r=t.children.map(s=>Kp(i,s));return new La(n,r)}}const Vw="ngNavigationCancelingError";function QP(i,t){const{redirectTo:e,navigationBehaviorOptions:n}=mc(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=JP(!1,0,t);return r.url=e,r.navigationBehaviorOptions=n,r}function JP(i,t,e){const n=new Error("NavigationCancelingError: "+(i||""));return n[Vw]=!0,n.cancellationCode=t,e&&(n.url=e),n}function eO(i){return tO(i)&&mc(i.url)}function tO(i){return i&&i[Vw]}class PY{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zp,this.attachRef=null}}let Zp=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new PY,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const __=!1;let nO=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=tn,this.activateEvents=new Fe,this.deactivateEvents=new Fe,this.attachEvents=new Fe,this.detachEvents=new Fe,this.parentContexts=$t(Zp),this.location=$t(lr),this.changeDetector=$t(yn),this.environmentInjector=$t(Ea)}ngOnChanges(e){if(e.name){const{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,__);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,__);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,__);this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new he(4013,__);this._activatedRoute=e;const r=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new OY(e,a,r.injector);if(n&&function FY(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pi]}),i})();class OY{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===yu?this.route:t===Zp?this.childContexts:this.parent.get(t,e)}}let zw=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Xe({type:i,selectors:[["ng-component"]],standalone:!0,features:[ru],decls:1,vars:0,template:function(e,n){1&e&&pe(0,"router-outlet")},dependencies:[nO],encapsulation:2}),i})();function iO(i,t){return i.providers&&!i._injector&&(i._injector=Pg(i.providers,t,`Route: ${i.path}`)),i._injector??t}function $w(i){const t=i.children&&i.children.map($w),e=t?{...i,children:t}:{...i};return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==tn&&(e.component=zw),e}function lo(i){return i.outlet||tn}function rO(i,t){const e=i.filter(n=>lo(n)===t);return e.push(...i.filter(n=>lo(n)!==t)),e}function Qp(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){const e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}class VY{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Bw(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=bu(e);t.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),br(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=bu(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,s=bu(t);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=bu(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new wY(s.value.snapshot))}),t.children.length&&this.forwardEvent(new yY(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,s=e?e.value:null;if(Bw(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Bw(a.route.value),this.activateChildRoutes(t,null,o.children)}else{const a=Qp(r.snapshot),l=a?.get(rc)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}}class sO{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class v_{constructor(t,e){this.component=t,this.route=e}}function zY(i,t,e){const n=i._root;return Jp(n,t?t._root:null,e,[n.value])}function xu(i,t){const e=Symbol(),n=t.get(i,e);return n===e?"function"!=typeof i||function t4(i){return null!==Pm(i)}(i)?t.get(i):i:n}function Jp(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=bu(t);return i.children.forEach(o=>{(function $Y(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function GY(i,t,e){if("function"==typeof e)return e(i,t);switch(e){case"pathParamsChange":return!fc(i.url,t.url);case"pathParamsOrQueryParamsChange":return!fc(i.url,t.url)||!ia(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uw(i,t)||!ia(i.queryParams,t.queryParams);default:return!Uw(i,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new sO(n)):(s.data=o.data,s._resolvedData=o._resolvedData),Jp(i,t,s.component?a?a.children:null:e,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new v_(a.outlet.component,o))}else o&&ef(t,a,r),r.canActivateChecks.push(new sO(n)),Jp(i,null,s.component?a?a.children:null:e,n,r)})(o,s[o.value.outlet],e,n.concat([o.value]),r),delete s[o.value.outlet]}),br(s,(o,a)=>ef(o,e.getContext(a),r)),r}function ef(i,t,e){const n=bu(i),r=i.value;br(n,(s,o)=>{ef(s,r.component?t?t.children.getContext(o):null:t,e)}),e.canDeactivateChecks.push(new v_(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}function tf(i){return"function"==typeof i}function Gw(i){return i instanceof pu||"EmptyError"===i?.name}const b_=Symbol("INITIAL_VALUE");function wu(){return Lr(i=>Ls(i.map(t=>t.pipe(oi(1),ms(b_)))).pipe(rt(t=>{for(const e of t)if(!0!==e){if(e===b_)return b_;if(!1===e||e instanceof vl)return e}return!0}),Qt(t=>t!==b_),oi(1)))}function oO(i){return function Xh(...i){return ql(i)}(pi(t=>{if(mc(t))throw QP(0,t)}),rt(t=>!0===t))}const jw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function aO(i,t,e,n,r){const s=Ww(i,t,e);return s.matched?function aX(i,t,e,n){const r=t.canMatch;return r&&0!==r.length?dt(r.map(o=>{const a=xu(o,i);return _l(function KY(i){return i&&tf(i.canMatch)}(a)?a.canMatch(t,e):i.runInContext(()=>a(t,e)))})).pipe(wu(),oO()):dt(!0)}(n=iO(t,n),t,e).pipe(rt(o=>!0===o?s:{...jw})):dt(s)}function Ww(i,t,e){if(""===t.path)return"full"===t.pathMatch&&(i.hasChildren()||e.length>0)?{...jw}:{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const r=(t.matcher||H7)(e,i,t);if(!r)return{...jw};const s={};br(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function y_(i,t,e,n){if(e.length>0&&function dX(i,t,e){return e.some(n=>x_(i,t,n)&&lo(n)!==tn)}(i,e,n)){const s=new _n(t,function cX(i,t,e,n){const r={};r[tn]=n,n._sourceSegment=i,n._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&lo(s)!==tn){const o=new _n([],{});o._sourceSegment=i,o._segmentIndexShift=t.length,r[lo(s)]=o}return r}(i,t,n,new _n(e,i.children)));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:[]}}if(0===e.length&&function uX(i,t,e){return e.some(n=>x_(i,t,n))}(i,e,n)){const s=new _n(i.segments,function lX(i,t,e,n,r){const s={};for(const o of n)if(x_(i,e,o)&&!r[lo(o)]){const a=new _n([],{});a._sourceSegment=i,a._segmentIndexShift=t.length,s[lo(o)]=a}return{...r,...s}}(i,t,e,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}const r=new _n(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=t.length,{segmentGroup:r,slicedSegments:e}}function x_(i,t,e){return(!(i.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function lO(i,t,e,n){return!!(lo(i)===n||n!==tn&&x_(t,e,i))&&("**"===i.path||Ww(t,i,e).matched)}function cO(i,t,e){return 0===t.length&&!i.children[e]}const w_=!1;class M_{constructor(t){this.segmentGroup=t||null}}class dO{constructor(t){this.urlTree=t}}function nf(i){return fu(new M_(i))}function uO(i){return fu(new dO(i))}class mX{constructor(t,e,n,r,s){this.injector=t,this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const t=y_(this.urlTree.root,[],[],this.config).segmentGroup,e=new _n(t.segments,t.children);return this.expandSegmentGroup(this.injector,this.config,e,tn).pipe(rt(s=>this.createUrlTree(p_(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Fa(s=>{if(s instanceof dO)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof M_?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.injector,this.config,t.root,tn).pipe(rt(r=>this.createUrlTree(p_(r),t.queryParams,t.fragment))).pipe(Fa(r=>{throw r instanceof M_?this.noMatchError(r):r}))}noMatchError(t){return new he(4002,w_)}createUrlTree(t,e,n){const r=Tw(t);return new vl(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(rt(s=>new _n([],s))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Hi(r).pipe(ml(s=>{const o=n.children[s],a=rO(e,s);return this.expandSegmentGroup(t,a,o,s).pipe(rt(l=>({segment:l,outlet:s})))}),Sw((s,o)=>(s[o.outlet]=o.segment,s),{}),MP())}expandSegment(t,e,n,r,s,o){return Hi(n).pipe(ml(a=>this.expandSegmentAgainstRoute(t,e,n,a,r,s,o).pipe(Fa(c=>{if(c instanceof M_)return dt(null);throw c}))),fl(a=>!!a),Fa((a,l)=>{if(Gw(a))return cO(e,r,s)?dt(new _n([],{})):nf(e);throw a}))}expandSegmentAgainstRoute(t,e,n,r,s,o,a){return lO(r,e,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o):nf(e):nf(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?uO(s):this.lineralizeSegments(n,s).pipe(Qi(o=>{const a=new _n(o,{});return this.expandSegment(t,a,e,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=Ww(e,r,s);if(!a)return nf(e);const u=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?uO(u):this.lineralizeSegments(r,u).pipe(Qi(h=>this.expandSegment(t,e,n,h.concat(c),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,s){return"**"===n.path?(t=iO(n,t),n.loadChildren?(n._loadedRoutes?dt({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(t,n)).pipe(rt(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new _n(r,{})))):dt(new _n(r,{}))):aO(e,n,r,t).pipe(Lr(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(t=n._injector??t,n,r).pipe(Qi(d=>{const u=d.injector??t,h=d.routes,{segmentGroup:p,slicedSegments:f}=y_(e,a,l,h),g=new _n(p.segments,p.children);if(0===f.length&&g.hasChildren())return this.expandChildren(u,h,g).pipe(rt(v=>new _n(a,v)));if(0===h.length&&0===f.length)return dt(new _n(a,{}));const m=lo(n)===s;return this.expandSegment(u,g,h,f,m?tn:s,!0).pipe(rt(b=>new _n(a.concat(b.segments),b.children)))})):nf(e)))}getChildConfig(t,e,n){return e.children?dt({routes:e.children,injector:t}):e.loadChildren?void 0!==e._loadedRoutes?dt({routes:e._loadedRoutes,injector:e._loadedInjector}):function oX(i,t,e,n){const r=t.canLoad;return void 0===r||0===r.length?dt(!0):dt(r.map(o=>{const a=xu(o,i);return _l(function WY(i){return i&&tf(i.canLoad)}(a)?a.canLoad(t,e):i.runInContext(()=>a(t,e)))})).pipe(wu(),oO())}(t,e,n).pipe(Qi(r=>r?this.configLoader.loadChildren(t,e).pipe(pi(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):function pX(i){return fu(JP(w_,3))}())):dt({routes:[],injector:t})}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return dt(n);if(r.numberOfChildren>1||!r.children[tn])return t.redirectTo,fu(new he(4e3,w_));r=r.children[tn]}}applyRedirectCommands(t,e,n){return this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreateUrlTree(t,e,n,r){const s=this.createSegmentGroup(t,e.root,n,r);return new vl(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return br(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=e[a]}else n[s]=r}),n}createSegmentGroup(t,e,n,r){const s=this.createSegments(t,e.segments,n,r);let o={};return br(e.children,(a,l)=>{o[l]=this.createSegmentGroup(t,a,n,r)}),new _n(s,o)}createSegments(t,e,n,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new he(4001,w_);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}class _X{}class yX{constructor(t,e,n,r,s,o,a){this.injector=t,this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const t=y_(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,t,tn).pipe(rt(e=>{if(null===e)return null;const n=new g_([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},tn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new La(n,e),s=new KP(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(t){const e=t.value,n=qP(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r)}processChildren(t,e,n){return Hi(Object.keys(n.children)).pipe(ml(r=>{const s=n.children[r],o=rO(e,r);return this.processSegmentGroup(t,o,s,r)}),Sw((r,s)=>r&&s?(r.push(...s),r):null),CP(r=>null!==r),o_(null),MP(),rt(r=>{if(null===r)return null;const s=pO(r);return function xX(i){i.sort((t,e)=>t.value.outlet===tn?-1:e.value.outlet===tn?1:t.value.outlet.localeCompare(e.value.outlet))}(s),s}))}processSegment(t,e,n,r,s){return Hi(e).pipe(ml(o=>this.processSegmentAgainstRoute(o._injector??t,o,n,r,s)),fl(o=>!!o),Fa(o=>{if(Gw(o))return cO(n,r,s)?dt([]):dt(null);throw o}))}processSegmentAgainstRoute(t,e,n,r,s){if(e.redirectTo||!lO(e,n,r,s))return dt(null);let o;if("**"===e.path){const a=r.length>0?DP(r).parameters:{},l=mO(n)+r.length;o=dt({snapshot:new g_(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gO(e),lo(e),e.component??e._loadedComponent??null,e,fO(n),l,_O(e)),consumedSegments:[],remainingSegments:[]})}else o=aO(n,e,r,t).pipe(rt(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const u=mO(n)+l.length;return{snapshot:new g_(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gO(e),lo(e),e.component??e._loadedComponent??null,e,fO(n),u,_O(e)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Lr(a=>{if(null===a)return dt(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;t=e._injector??t;const u=e._loadedInjector??t,h=function wX(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(e),{segmentGroup:p,slicedSegments:f}=y_(n,c,d,h.filter(m=>void 0===m.redirectTo));if(0===f.length&&p.hasChildren())return this.processChildren(u,h,p).pipe(rt(m=>null===m?null:[new La(l,m)]));if(0===h.length&&0===f.length)return dt([new La(l,[])]);const g=lo(e)===s;return this.processSegment(u,h,p,f,g?tn:s).pipe(rt(m=>null===m?null:[new La(l,m)]))}))}}function MX(i){const t=i.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function pO(i){const t=[],e=new Set;for(const n of i){if(!MX(n)){t.push(n);continue}const r=t.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),e.add(r)):t.push(n)}for(const n of e){const r=pO(n.children);t.push(new La(n.value,r))}return t.filter(n=>!e.has(n))}function fO(i){let t=i;for(;t._sourceSegment;)t=t._sourceSegment;return t}function mO(i){let t=i,e=t._segmentIndexShift??0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift??0;return e-1}function gO(i){return i.data||{}}function _O(i){return i.resolve||{}}function vO(i){return"string"==typeof i.title||null===i.title}function Yw(i){return Lr(t=>{const e=i(t);return e?Hi(e).pipe(rt(()=>t)):dt(t)})}const Mu=new ue("ROUTES");let Xw=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=$t(YI)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return dt(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);const n=_l(e.loadComponent()).pipe(rt(yO),pi(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),gl(()=>{this.componentLoaders.delete(e)})),r=new xP(n,()=>new De).pipe(Cw());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return dt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(rt(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(e).injector,c=AP(l.get(Mu,[],Pt.Self|Pt.Optional)));return{routes:c.map($w),injector:l}}),gl(()=>{this.childrenLoaders.delete(n)})),o=new xP(s,()=>new De).pipe(Cw());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(e){return _l(e()).pipe(rt(yO),Qi(n=>n instanceof oI||Array.isArray(n)?dt(n):Hi(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function yO(i){return function IX(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let S_=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new De,this.configLoader=$t(Xw),this.environmentInjector=$t(Ea),this.urlSerializer=$t(jp),this.rootContexts=$t(Zp),this.navigationId=0,this.afterPreactivation=()=>dt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new vY(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new _Y(r))}complete(){this.transitions?.complete()}handleNavigationRequest(e){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...e,id:n})}setupNavigations(e){return this.transitions=new Be({id:0,targetPageId:0,currentUrlTree:e.currentUrlTree,currentRawUrl:e.currentUrlTree,extractedUrl:e.urlHandlingStrategy.extract(e.currentUrlTree),urlAfterRedirects:e.urlHandlingStrategy.extract(e.currentUrlTree),rawUrl:e.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:qp,restoredState:null,currentSnapshot:e.routerState.snapshot,targetSnapshot:null,currentRouterState:e.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qt(n=>0!==n.id),rt(n=>({...n,extractedUrl:e.urlHandlingStrategy.extract(n.rawUrl)})),Lr(n=>{let r=!1,s=!1;return dt(n).pipe(pi(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Lr(o=>{const a=e.browserUrlTree.toString(),l=!e.navigated||o.extractedUrl.toString()!==a||a!==e.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??e.onSameUrlNavigation)){const d="";return this.events.next(new m_(o.id,e.serializeUrl(n.rawUrl),d,0)),e.rawUrlTree=o.rawUrl,o.resolve(null),Js}if(e.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return xO(o.source)&&(e.browserUrlTree=o.extractedUrl),dt(o).pipe(Lr(d=>{const u=this.transitions?.getValue();return this.events.next(new Pw(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),u!==this.transitions?.getValue()?Js:Promise.resolve(d)}),function gX(i,t,e,n){return Lr(r=>function fX(i,t,e,n,r){return new mX(i,t,e,n,r).apply()}(i,t,e,r.extractedUrl,n).pipe(rt(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,e.config),pi(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects},n.urlAfterRedirects=d.urlAfterRedirects}),function SX(i,t,e,n,r){return Qi(s=>function bX(i,t,e,n,r,s,o="emptyOnly"){return new yX(i,t,e,n,r,o,s).recognize().pipe(Lr(a=>null===a?function vX(i){return new Nn(t=>t.error(i))}(new _X):dt(a)))}(i,t,e,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(rt(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,this.rootComponentType,e.config,this.urlSerializer,e.paramsInheritanceStrategy),pi(d=>{if(n.targetSnapshot=d.targetSnapshot,"eager"===e.urlUpdateStrategy){if(!d.extras.skipLocationChange){const h=e.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);e.setBrowserUrl(h,d)}e.browserUrlTree=d.urlAfterRedirects}const u=new hY(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(u)}));if(l&&e.urlHandlingStrategy.shouldProcessUrl(e.rawUrlTree)){const{id:d,extractedUrl:u,source:h,restoredState:p,extras:f}=o,g=new Pw(d,this.urlSerializer.serialize(u),h,p);this.events.next(g);const m=XP(u,this.rootComponentType).snapshot;return dt(n={...o,targetSnapshot:m,urlAfterRedirects:u,extras:{...f,skipLocationChange:!1,replaceUrl:!1}})}{const d="";return this.events.next(new m_(o.id,e.serializeUrl(n.extractedUrl),d,1)),e.rawUrlTree=o.rawUrl,o.resolve(null),Js}}),pi(o=>{const a=new pY(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),rt(o=>n={...o,guards:zY(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function QY(i,t){return Qi(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return 0===o.length&&0===s.length?dt({...e,guardsResult:!0}):function JY(i,t,e,n){return Hi(i).pipe(Qi(r=>function sX(i,t,e,n,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?dt(s.map(a=>{const l=Qp(t)??r,c=xu(a,l);return _l(function qY(i){return i&&tf(i.canDeactivate)}(c)?c.canDeactivate(i,t,e,n):l.runInContext(()=>c(i,t,e,n))).pipe(fl())})).pipe(wu()):dt(!0)}(r.component,r.route,e,t,n)),fl(r=>!0!==r,!0))}(o,n,r,i).pipe(Qi(a=>a&&function jY(i){return"boolean"==typeof i}(a)?function eX(i,t,e,n){return Hi(t).pipe(ml(r=>zp(function nX(i,t){return null!==i&&t&&t(new bY(i)),dt(!0)}(r.route.parent,n),function tX(i,t){return null!==i&&t&&t(new xY(i)),dt(!0)}(r.route,n),function rX(i,t,e){const n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>function HY(i){const t=i.routeConfig?i.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:i,guards:t}:null}(o)).filter(o=>null!==o).map(o=>Hp(()=>dt(o.guards.map(l=>{const c=Qp(o.node)??e,d=xu(l,c);return _l(function XY(i){return i&&tf(i.canActivateChild)}(d)?d.canActivateChild(n,i):c.runInContext(()=>d(n,i))).pipe(fl())})).pipe(wu())));return dt(s).pipe(wu())}(i,r.path,e),function iX(i,t,e){const n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||0===n.length)return dt(!0);const r=n.map(s=>Hp(()=>{const o=Qp(t)??e,a=xu(s,o);return _l(function YY(i){return i&&tf(i.canActivate)}(a)?a.canActivate(t,i):o.runInContext(()=>a(t,i))).pipe(fl())}));return dt(r).pipe(wu())}(i,r.route,e))),fl(r=>!0!==r,!0))}(n,s,i,t):dt(a)),rt(a=>({...e,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),pi(o=>{if(n.guardsResult=o.guardsResult,mc(o.guardsResult))throw QP(0,o.guardsResult);const a=new fY(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),Qt(o=>!!o.guardsResult||(e.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),Yw(o=>{if(o.guards.canActivateChecks.length)return dt(o).pipe(pi(a=>{const l=new mY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Lr(a=>{let l=!1;return dt(a).pipe(function EX(i,t){return Qi(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return dt(e);let s=0;return Hi(r).pipe(ml(o=>function AX(i,t,e,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!vO(r)&&(s[$p]=r.title),function DX(i,t,e,n){const r=function TX(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return dt({});const s={};return Hi(r).pipe(Qi(o=>function kX(i,t,e,n){const r=Qp(t)??n,s=xu(i,r);return _l(s.resolve?s.resolve(t,e):r.runInContext(()=>s(t,e)))}(i[o],t,e,n).pipe(fl(),pi(a=>{s[o]=a}))),Ew(1),SP(s),Fa(o=>Gw(o)?Js:fu(o)))}(s,i,t,n).pipe(rt(o=>(i._resolvedData=o,i.data=qP(i,e).resolve,r&&vO(r)&&(i.data[$p]=r.title),null)))}(o.route,n,i,t)),pi(()=>s++),Ew(1),Qi(o=>s===r.length?dt(e):Js))})}(e.paramsInheritanceStrategy,this.environmentInjector),pi({next:()=>l=!0,complete:()=>{l||(e.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),pi(a=>{const l=new gY(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Yw(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(pi(d=>{l.component=d}),rt(()=>{})));for(const d of l.children)c.push(...a(d));return c};return Ls(a(o.targetSnapshot.root)).pipe(o_(),oi(1))}),Yw(()=>this.afterPreactivation()),rt(o=>{const a=function kY(i,t,e){const n=Kp(i,t._root,e?e._root:void 0);return new YP(n,t)}(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return n={...o,targetRouterState:a}}),pi(o=>{e.currentUrlTree=o.urlAfterRedirects,e.rawUrlTree=e.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),e.routerState=o.targetRouterState,"deferred"===e.urlUpdateStrategy&&(o.extras.skipLocationChange||e.setBrowserUrl(e.rawUrlTree,o),e.browserUrlTree=o.urlAfterRedirects)}),((i,t,e)=>rt(n=>(new VY(t,n.targetRouterState,n.currentRouterState,e).activate(i),n)))(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o)),oi(1),pi({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,e.navigated=!0,this.events.next(new gc(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(e.currentUrlTree))),e.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),gl(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),Fa(o=>{if(s=!0,tO(o)){eO(o)||(e.navigated=!0,e.restoreHistory(n,!0));const a=new f_(n.id,this.urlSerializer.serialize(n.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),eO(o)){const l=e.urlHandlingStrategy.merge(o.url,e.rawUrlTree),c={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===e.urlUpdateStrategy||xO(n.source)};e.scheduleNavigation(l,qp,null,c,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{e.restoreHistory(n,!0);const a=new Ow(n.id,this.urlSerializer.serialize(n.extractedUrl),o,n.targetSnapshot??void 0);this.events.next(a);try{n.resolve(e.errorHandler(o))}catch(l){n.reject(l)}}return Js}))}))}cancelNavigationTransition(e,n,r){const s=new f_(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(s),e.resolve(!1)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function xO(i){return i!==qp}let wO=(()=>{class i{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===tn);return n}getResolvedTitleForRoute(e){return e.data[$p]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(){return $t(RX)},providedIn:"root"}),i})(),RX=(()=>{class i extends wO{constructor(e){super(),this.title=e}updateTitle(e){const n=this.buildTitle(e);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(e){return new(e||i)(K(fP))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),PX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(){return $t(FX)},providedIn:"root"}),i})();class OX{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let FX=(()=>{class i extends OX{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const E_=new ue("",{providedIn:"root",factory:()=>({})});let NX=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:function(){return $t(BX)},providedIn:"root"}),i})(),BX=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function UX(i){throw i}function VX(i,t,e){return t.parse("/")}const zX={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HX={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ns=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=$t(w6),this.isNgZoneEnabled=!1,this.options=$t(E_,{optional:!0})||{},this.errorHandler=this.options.errorHandler||UX,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||VX,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=$t(NX),this.routeReuseStrategy=$t(PX),this.urlCreationStrategy=$t(AY),this.titleStrategy=$t(wO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=AP($t(Mu,{optional:!0})??[]),this.navigationTransitions=$t(S_),this.urlSerializer=$t(jp),this.location=$t(Op),this.isNgZoneEnabled=$t(lt)instanceof lt&&lt.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new vl,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=XP(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(e=>{this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId??0},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const e=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),qp,e)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const n="popstate"===e.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(e.url,n,e.state)},0)}))}navigateToSyncWithBrowser(e,n,r){const s={replaceUrl:!0},o=r?.navigationId?r:null;if(r){const l={...r};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(e){this.config=e.map($w),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,e,d,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){const r=mc(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,qp,null,n)}navigate(e,n={skipLocationChange:!1}){return function $X(i){for(let t=0;t<i.length;t++){const e=i[t];if(null==e)throw new he(4008,false)}}(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let n;try{n=this.urlSerializer.parse(e)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return n}isActive(e,n){let r;if(r=!0===n?{...zX}:!1===n?{...HX}:n,mc(e))return kP(this.currentUrlTree,e,r);const s=this.parseUrl(e);return kP(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((n,r)=>{const s=e[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(e,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,d;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((u,h)=>{a=u,l=h}),d="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:d,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(u=>Promise.reject(u))}setBrowserUrl(e,n){const r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const o={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",o)}else{const s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.go(r,"",s)}}restoreHistory(e,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class MO{}let WX=(()=>{class i{constructor(e,n,r,s,o){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Qt(e=>e instanceof gc),ml(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=Pg(s.providers,e,`Route: ${s.path}`));const o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Hi(r).pipe(xd())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(e,n):dt(null);const s=r.pipe(Qi(o=>null===o?dt(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));return n.loadComponent&&!n._loadedComponent?Hi([s,this.loader.loadComponent(n)]).pipe(xd()):s})}}return i.\u0275fac=function(e){return new(e||i)(K(Ns),K(YI),K(Ea),K(MO),K(Xw))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Zw=new ue("");let CO=(()=>{class i{constructor(e,n,r,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Pw?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof gc&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof jP&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new jP(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(e){Eo()},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();var Bs=(()=>((Bs=Bs||{})[Bs.COMPLETE=0]="COMPLETE",Bs[Bs.FAILED=1]="FAILED",Bs[Bs.REDIRECTING=2]="REDIRECTING",Bs))();const Cu=!1;function bl(i,t){return{\u0275kind:i,\u0275providers:t}}const Qw=new ue("",{providedIn:"root",factory:()=>!1});function EO(){const i=$t(Oi);return t=>{const e=i.get(du);if(t!==e.components[0])return;const n=i.get(Ns),r=i.get(AO);1===i.get(Jw)&&n.initialNavigation(),i.get(DO,null,Pt.Optional)?.setUpPreloading(),i.get(Zw,null,Pt.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const AO=new ue(Cu?"bootstrap done indicator":"",{factory:()=>new De}),Jw=new ue(Cu?"initial navigation":"",{providedIn:"root",factory:()=>1});function ZX(){let i=[];return i=Cu?[{provide:pg,multi:!0,useFactory:()=>{const t=$t(Ns);return()=>t.events.subscribe(e=>{console.group?.(`Router Event: ${e.constructor.name}`),console.log(function MY(i){if(!("type"in i))return`Unknown Router Event: ${i.constructor.name}`;switch(i.type){case 14:return`ActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state}, shouldActivate: ${i.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 2:return`NavigationCancel(id: ${i.id}, url: '${i.url}')`;case 16:return`NavigationSkipped(id: ${i.id}, url: '${i.url}')`;case 1:return`NavigationEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${i.id}, url: '${i.url}', error: ${i.error})`;case 0:return`NavigationStart(id: ${i.id}, url: '${i.url}')`;case 6:return`ResolveEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 5:return`ResolveStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 10:return`RouteConfigLoadEnd(path: ${i.route.path})`;case 9:return`RouteConfigLoadStart(path: ${i.route.path})`;case 4:return`RoutesRecognized(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 15:return`Scroll(anchor: '${i.anchor}', position: '${i.position?`${i.position[0]}, ${i.position[1]}`:null}')`}}(e)),console.log(e),console.groupEnd?.()})}}]:[],bl(1,i)}const DO=new ue(Cu?"router preloader":"");function QX(i){return bl(0,[{provide:DO,useExisting:WX},{provide:MO,useExisting:i}])}const rf=!1,TO=new ue(rf?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),JX=[Op,{provide:jp,useClass:Aw},Ns,Zp,{provide:yu,useFactory:function SO(i){return i.routerState.root},deps:[Ns]},Xw,rf?{provide:Qw,useValue:!0}:[]];function eq(){return new tR("Router",Ns)}let kO=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[JX,rf&&n?.enableTracing?ZX().\u0275providers:[],{provide:Mu,multi:!0,useValue:e},{provide:TO,useFactory:rq,deps:[[Ns,new Ps,new Ko]]},{provide:E_,useValue:n||{}},n?.useHash?{provide:hc,useClass:cW}:{provide:hc,useClass:CR},{provide:Zw,useFactory:()=>{const i=$t(S9),t=$t(lt),e=$t(E_),n=$t(S_),r=$t(jp);return e.scrollOffset&&i.setOffset(e.scrollOffset),new CO(r,n,i,t,e)}},n?.preloadingStrategy?QX(n.preloadingStrategy).\u0275providers:[],{provide:tR,multi:!0,useFactory:eq},n?.initialNavigation?sq(n):[],[{provide:IO,useFactory:EO},{provide:eR,multi:!0,useExisting:IO}]]}}static forChild(e){return{ngModule:i,providers:[{provide:Mu,multi:!0,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(K(TO,8))},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[zw]}),i})();function rq(i){if(rf&&i)throw new he(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function sq(i){return["disabled"===i.initialNavigation?bl(3,[{provide:Ng,multi:!0,useFactory:()=>{const t=$t(Ns);return()=>{t.setUpLocationChangeListener()}}},{provide:Jw,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?bl(2,[{provide:Jw,useValue:0},{provide:Ng,multi:!0,deps:[Oi],useFactory:t=>{const e=t.get(aW,Promise.resolve());return()=>e.then(()=>new Promise(n=>{const r=t.get(Ns),s=t.get(AO);(function YX(i,t){i.events.pipe(Qt(e=>e instanceof gc||e instanceof f_||e instanceof Ow||e instanceof m_),rt(e=>e instanceof gc||e instanceof m_?Bs.COMPLETE:e instanceof f_&&(0===e.code||1===e.code)?Bs.REDIRECTING:Bs.FAILED),Qt(e=>e!==Bs.REDIRECTING),oi(1)).subscribe(()=>{t()})})(r,()=>{n(!0)}),t.get(S_).afterPreactivation=()=>(n(!0),s.closed?dt(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const IO=new ue(rf?"Router Initializer":""),aq=[];let lq=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ot({type:i});static \u0275inj=Dt({imports:[kO.forRoot(aq),kO]})}return i})();function RO(i,t,e,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void e(c)}a.done?t(l):Promise.resolve(l).then(n,r)}function Se(i){return function(){var t=this,e=arguments;return new Promise(function(n,r){var s=i.apply(t,e);function o(l){RO(s,n,r,o,a,"next",l)}function a(l){RO(s,n,r,o,a,"throw",l)}o(void 0)})}}function kt(i){return null!=i&&"false"!=`${i}`}function dr(i,t=0){return function cq(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):t}function A_(i){return Array.isArray(i)?i:[i]}function Wi(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Na(i){return i instanceof ht?i.nativeElement:i}const dq=["addListener","removeListener"],uq=["addEventListener","removeEventListener"],hq=["on","off"];function gs(i,t,e,n){if(B(e)&&(n=e,e=void 0),n)return gs(i,t,e).pipe(Mw(n));const[r,s]=function mq(i){return B(i.addEventListener)&&B(i.removeEventListener)}(i)?uq.map(o=>a=>i[o](t,a,e)):function pq(i){return B(i.addListener)&&B(i.removeListener)}(i)?dq.map(PO(i,t)):function fq(i){return B(i.on)&&B(i.off)}(i)?hq.map(PO(i,t)):[];if(!r&&wy(i))return Qi(o=>gs(o,t,e))(mr(i));if(!r)throw new TypeError("Invalid event target");return new Nn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function PO(i,t){return e=>n=>i[e](t,n)}class gq extends J{constructor(t,e){super()}schedule(t,e=0){return this}}const D_={setInterval(i,t,...e){const{delegate:n}=D_;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){const{delegate:t}=D_;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};class eM extends gq{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,e),this}requestAsyncId(t,e,n=0){return D_.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&D_.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let r,n=!1;try{this.work(t)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,le(n,this),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}}const sf={schedule(i){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:n}=sf;n&&(t=n.requestAnimationFrame,e=n.cancelAnimationFrame);const r=t(s=>{e=void 0,i(s)});return new J(()=>e?.(r))},requestAnimationFrame(...i){const{delegate:t}=sf;return(t?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:t}=sf;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},OO={now:()=>(OO.delegate||Date).now(),delegate:void 0};class af{constructor(t,e=af.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}}af.now=OO.now;class tM extends af{constructor(t,e=af.now){super(t,e),this.actions=[],this._active=!1}flush(t){const{actions:e}=this;if(this._active)return void e.push(t);let n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const bq=new class vq extends tM{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class _q extends eM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=sf.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(sf.cancelAnimationFrame(e),t._scheduled=void 0)}});let nM,yq=1;const T_={};function FO(i){return i in T_&&(delete T_[i],!0)}const xq={setImmediate(i){const t=yq++;return T_[t]=!0,nM||(nM=Promise.resolve()),nM.then(()=>FO(t)&&i()),t},clearImmediate(i){FO(i)}},{setImmediate:wq,clearImmediate:Mq}=xq,k_={setImmediate(...i){const{delegate:t}=k_;return(t?.setImmediate||wq)(...i)},clearImmediate(i){const{delegate:t}=k_;return(t?.clearImmediate||Mq)(i)},delegate:void 0},iM=new class Sq extends tM{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;t=t||n.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=n[0])&&t.id===e&&n.shift());if(this._active=!1,r){for(;(t=n[0])&&t.id===e&&n.shift();)t.unsubscribe();throw r}}}(class Cq extends eM{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t._scheduled||(t._scheduled=k_.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(t,e,n);const{actions:s}=t;null!=e&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==e&&(k_.clearImmediate(e),t._scheduled===e&&(t._scheduled=void 0))}}),lf=new tM(eM),Eq=lf;function rM(i=0,t,e=Eq){let n=-1;return null!=t&&(G1(t)?e=t:n=t),new Nn(r=>{let s=function Dq(i){return i instanceof Date&&!isNaN(i)}(i)?+i-e.now():i;s<0&&(s=0);let o=0;return e.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function cf(i,t=lf){return function Aq(i){return ii((t,e)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,e.next(c)}o&&e.complete()},l=()=>{s=null,o&&e.complete()};t.subscribe(Zn(e,c=>{n=!0,r=c,s||mr(i(c)).subscribe(s=Zn(e,a,l))},()=>{o=!0,(!n||!s||s.closed)&&e.complete()}))})}(()=>rM(i,t))}function ke(i){return ii((t,e)=>{mr(i).subscribe(Zn(e,()=>e.complete(),Nt)),!e.closed&&t.subscribe(e)})}let sM;try{sM=typeof Intl<"u"&&Intl.v8BreakIterator}catch{sM=!1}let Su,fi=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function C9(i){return i===GR}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!sM)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(e){return new(e||i)(K(Nx))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const LO=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function NO(){if(Su)return Su;if("object"!=typeof document||!document)return Su=new Set(LO),Su;let i=document.createElement("input");return Su=new Set(LO.filter(t=>(i.setAttribute("type",t),i.type===t))),Su}let df,I_,vc,oM;function _c(i){return function Tq(){if(null==df&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>df=!0}))}finally{df=df||!1}return df}()?i:!!i.capture}function BO(){if(null==vc){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return vc=!1,vc;if("scrollBehavior"in document.documentElement.style)vc=!0;else{const i=Element.prototype.scrollTo;vc=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return vc}function uf(){if("object"!=typeof document||!document)return 0;if(null==I_){const i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),I_=0,0===i.scrollLeft&&(i.scrollLeft=1,I_=0===i.scrollLeft?1:2),i.remove()}return I_}function R_(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function yl(i){return i.composedPath?i.composedPath()[0]:i.target}function aM(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}const Rq=new ue("cdk-dir-doc",{providedIn:"root",factory:function Pq(){return $t(Lt)}}),Oq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let co=(()=>{class i{constructor(e){this.value="ltr",this.change=new Fe,e&&(this.value=function Fq(i){const t=i?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?Oq.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||(e.documentElement?e.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(e){return new(e||i)(K(Rq,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();const Lq=["contentWrapper"],Nq=["*"],Bq=new ue("VIRTUAL_SCROLL_STRATEGY");let pf=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new De,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Nn(n=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(cf(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){const r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Qt(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=Na(n),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>gs(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(e){return new(e||i)(K(lt),K(fi),K(Lt,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),UO=(()=>{class i{constructor(e,n,r,s){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new De,this._elementScrolled=new Nn(o=>this.ngZone.runOutsideAngular(()=>gs(this.elementRef.nativeElement,"scroll").pipe(ke(this._destroyed)).subscribe(o)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=r?e.end:e.start),null==e.right&&(e.right=r?e.start:e.end),null!=e.bottom&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&0!=uf()?(null!=e.left&&(e.right=n.scrollWidth-n.clientWidth-e.left),2==uf()?e.left=e.right:1==uf()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const n=this.elementRef.nativeElement;BO()?n.scrollTo(e):(null!=e.top&&(n.scrollTop=e.top),null!=e.left&&(n.scrollLeft=e.left))}measureScrollOffset(e){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==e)return s.scrollTop;if("bottom"==e)return s.scrollHeight-s.clientHeight-s.scrollTop;const o=this.dir&&"rtl"==this.dir.value;return"start"==e?e=o?r:n:"end"==e&&(e=o?n:r),o&&2==uf()?e==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:o&&1==uf()?e==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:e==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(pf),x(lt),x(co,8))},i.\u0275dir=ge({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),P_=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new De,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(cf(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(e){return new(e||i)(K(fi),K(lt),K(Lt,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const VO=new ue("VIRTUAL_SCROLLABLE");let zq=(()=>{class i extends UO{constructor(e,n,r,s){super(e,n,r,s)}measureViewportSize(e){const n=this.elementRef.nativeElement;return"horizontal"===e?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(pf),x(lt),x(co,8))},i.\u0275dir=ge({type:i,features:[Je]}),i})();const $q=typeof requestAnimationFrame<"u"?bq:iM;let Gq=(()=>{class i extends zq{get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(e){this._appendOnly=kt(e)}constructor(e,n,r,s,o,a,l,c){super(e,a,r,o),this.elementRef=e,this._changeDetectorRef=n,this._scrollStrategy=s,this.scrollable=c,this._platform=$t(fi),this._detachedSubject=new De,this._renderedRangeSubject=new De,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new Nn(d=>this._scrollStrategy.scrolledIndexChange.subscribe(u=>Promise.resolve().then(()=>this.ngZone.run(()=>d.next(u))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=J.EMPTY,this._viewportChanges=l.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(ms(null),cf(0,$q)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(e){this.ngZone.runOutsideAngular(()=>{this._forOf=e,this._forOf.dataStream.pipe(ke(this._detachedSubject)).subscribe(n=>{const r=n.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(e){return this.getElementRef().nativeElement.getBoundingClientRect()[e]}setTotalContentSize(e){this._totalContentSize!==e&&(this._totalContentSize=e,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(e){(function Hq(i,t){return i.start==t.start&&i.end==t.end})(this._renderedRange,e)||(this.appendOnly&&(e={start:0,end:Math.max(this._renderedRange.end,e.end)}),this._renderedRangeSubject.next(this._renderedRange=e),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(e,n="to-start"){e=this.appendOnly&&"to-start"===n?0:e;const s="horizontal"==this.orientation,o=s?"X":"Y";let l=`translate${o}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*e)}px)`;this._renderedContentOffset=e,"to-end"===n&&(l+=` translate${o}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=l&&(this._renderedContentTransform=l,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(e,n="auto"){const r={behavior:n};"horizontal"===this.orientation?r.start=e:r.top=e,this.scrollable.scrollTo(r)}scrollToIndex(e,n="auto"){this._scrollStrategy.scrollToIndex(e,n)}measureScrollOffset(e){let n;return n=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,n(e??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(e){let n;const r="left",s="right",o="rtl"==this.dir?.value;n="start"==e?o?s:r:"end"==e?o?r:s:e||("horizontal"===this.orientation?"left":"top");const a=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-a}measureRenderedContentSize(){const e=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?e.offsetWidth:e.offsetHeight}measureRangeSize(e){return this._forOf?this._forOf.measureRangeSize(e,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(e){e&&this._runAfterChangeDetection.push(e),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const e=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of e)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(yn),x(lt),x(Bq,8),x(co,8),x(pf),x(P_),x(VO,8))},i.\u0275cmp=Xe({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(e,n){if(1&e&&pn(Lq,7),2&e){let r;ft(r=mt())&&(n._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(e,n){2&e&&Ut("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[ln([{provide:UO,useFactory:(t,e)=>t||e,deps:[[new Ps,new ng(VO)],i]}]),Je,ru],ngContentSelectors:Nq,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(e,n){1&e&&(Ai(),S(0,"div",0,1),Ft(2),A(),pe(3,"div",2)),2&e&&(k(3),Xr("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})(),ff=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})(),zO=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[hf,ff,Gq,hf,ff]}),i})();class lM{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class bc extends lM{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class Eu extends lM{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class jq extends lM{constructor(t){super(),this.element=t instanceof ht?t.nativeElement:t}}class O_{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof bc?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Eu?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof jq?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Wq extends O_{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){const n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Oi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);-1!==r&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Au=(()=>{class i extends O_{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Fe,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);const n=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return i.\u0275fac=function(e){return new(e||i)(x(rc),x(lr),x(Lt))},i.\u0275dir=ge({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Je]}),i})(),yc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();function Us(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}const HO=BO();class oK{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=Wi(-this._previousScrollPosition.left),t.style.top=Wi(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,n=t.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),HO&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),HO&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}}class aK{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0).pipe(Qt(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class $O{enable(){}disable(){}attach(){}}function dM(i,t){return t.some(e=>i.bottom<e.top||i.top>e.bottom||i.right<e.left||i.left>e.right)}function GO(i,t){return t.some(e=>i.top<e.top||i.bottom>e.bottom||i.left<e.left||i.right>e.right)}class lK{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();dM(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let cK=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new $O,this.close=o=>new aK(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new oK(this._viewportRuler,this._document),this.reposition=o=>new lK(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(e){return new(e||i)(K(pf),K(P_),K(lt),K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Ru{constructor(t){if(this.scrollStrategy=new $O,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class dK{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let jO=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(e){return new(e||i)(K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),uK=(()=>{class i extends jO{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(e){return new(e||i)(K(Lt),K(lt,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),hK=(()=>{class i extends jO{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=yl(s)},this._clickListener=s=>{const o=yl(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s)}}}add(e){if(super.add(e),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(e){return new(e||i)(K(Lt),K(fi),K(lt,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),N_=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||aM()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(e),aM()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(e){return new(e||i)(K(Lt),K(fi))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class gf{constructor(t,e,n,r,s,o,a,l,c,d=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new De,this._attachments=new De,this._detachments=new De,this._locationChanges=J.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new De,this._outsidePointerEvents=new De,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(oi(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=Wi(this._config.width),t.height=Wi(this._config.height),t.minWidth=Wi(this._config.minWidth),t.minHeight=Wi(this._config.minHeight),t.maxWidth=Wi(this._config.maxWidth),t.maxHeight=Wi(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){const r=A_(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(ke(gr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const WO="cdk-overlay-connected-position-bounding-box",pK=/([A-Za-z%]+)$/;class fK{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new De,this._resizeSubscription=J.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._validatePositions(),t.hostElement.classList.add(WO),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&xc(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(WO),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r,s;if("center"==n.originX)r=t.left+t.width/2;else{const o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r="start"==n.originX?o:a}return e.left<0&&(r-=e.left),s="center"==n.originY?t.top+t.height/2:"top"==n.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r,s;return r="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){const s=XO(e);let{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let h=0-a,p=a+s.height-n.height,f=this._subtractOverflows(s.width,0-o,o+s.width-n.width),g=this._subtractOverflows(s.height,h,p),m=f*g;return{visibleArea:m,isCompletelyWithinViewport:s.width*s.height===m,fitsInViewportVertically:g===s.height,fitsInViewportHorizontally:f==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const r=n.bottom-e.y,s=n.right-e.x,o=YO(this._overlayRef.getConfig().minHeight),a=YO(this._overlayRef.getConfig().minWidth);return(t.fitsInViewportVertically||null!=o&&o<=r)&&(t.fitsInViewportHorizontally||null!=a&&a<=s)}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=XO(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0);let d=0,u=0;return d=r.width<=s.width?c||-o:t.x<this._viewportMargin?s.left-n.left-t.x:0,u=r.height<=s.height?l||-a:t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new dK(t,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,u,h;if("top"===e.overlayY)o=t.y,s=n.height-o+this._viewportMargin;else if("bottom"===e.overlayY)a=n.height-t.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const p=Math.min(n.bottom-t.y+n.top,t.y),f=this._lastBoundingBoxSize.height;s=2*p,o=t.y-p,s>f&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-f/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)h=n.width-t.x+this._viewportMargin,d=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,d=n.right-t.x;else{const p=Math.min(n.right-t.x+n.left,t.x),f=this._lastBoundingBoxSize.width;d=2*p,u=t.x-p,d>f&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-f/2)}return{top:o,left:u,bottom:a,right:h,width:d,height:s}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=Wi(n.height),r.top=Wi(n.top),r.bottom=Wi(n.bottom),r.width=Wi(n.width),r.left=Wi(n.left),r.right=Wi(n.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=Wi(s)),o&&(r.maxWidth=Wi(o))}this._lastBoundingBoxSize=n,xc(this._boundingBox.style,r)}_resetBoundingBoxStyles(){xc(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){xc(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();xc(n,this._getExactOverlayY(e,t,d)),xc(n,this._getExactOverlayX(e,t,d))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=Wi(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=Wi(o.maxWidth):s&&(n.maxWidth="")),xc(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=Wi(s.y),r}_getExactOverlayX(t,e,n){let o,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=Wi(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:GO(t,n),isOriginOutsideView:dM(t,n),isOverlayClipped:GO(e,n),isOverlayOutsideView:dM(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&A_(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ht)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function xc(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function YO(i){if("number"!=typeof i&&null!=i){const[t,e]=i.split(pK);return e&&"px"!==e?null:parseFloat(t)}return i||null}function XO(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const qO="cdk-global-overlay-wrapper";class KO{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(qO),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,u=this._xOffset,h="rtl"===this._overlayRef.getConfig().direction;let p="",f="",g="";l?g="flex-start":"center"===d?(g="center",h?f=u:p=u):h?"left"===d||"end"===d?(g="flex-end",p=u):("right"===d||"start"===d)&&(g="flex-start",f=u):"left"===d||"start"===d?(g="flex-start",p=u):("right"===d||"end"===d)&&(g="flex-end",f=u),t.position=this._cssPosition,t.marginLeft=l?"0":p,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":f,e.justifyContent=g,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(qO),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let mK=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new KO}flexibleConnectedTo(e){return new fK(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(e){return new(e||i)(K(P_),K(Lt),K(fi),K(N_))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gK=0,yr=(()=>{class i{constructor(e,n,r,s,o,a,l,c,d,u,h,p){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=p}create(e){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new Ru(e);return o.direction=o.direction||this._directionality.value,new gf(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const n=this._document.createElement("div");return n.id="cdk-overlay-"+gK++,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(du)),new Wq(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(e){return new(e||i)(K(cK),K(N_),K(rc),K(mK),K(uK),K(Oi),K(lt),K(Lt),K(co),K(Op),K(hK),K(Fi,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _K=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],ZO=new ue("cdk-connected-overlay-scroll-strategy");let uM=(()=>{class i{constructor(e){this.elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(x(ht))},i.\u0275dir=ge({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0}),i})(),QO=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=kt(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=kt(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=kt(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=kt(e)}get push(){return this._push}set push(e){this._push=kt(e)}constructor(e,n,r,s,o){this._overlay=e,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=J.EMPTY,this._attachSubscription=J.EMPTY,this._detachSubscription=J.EMPTY,this._positionSubscription=J.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Fe,this.positionChange=new Fe,this.attach=new Fe,this.detach=new Fe,this.overlayKeydown=new Fe,this.overlayOutsideClick=new Fe,this._templatePortal=new Eu(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=_K);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!Us(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new Ru({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(e),e}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof uM?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(CP(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(x(yr),x(ps),x(lr),x(ZO),x(co,8))},i.\u0275dir=ge({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Pi]}),i})();const bK={provide:ZO,deps:[yr],useFactory:function vK(i){return()=>i.scrollStrategies.reposition()}};let Pu=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[yr,bK],imports:[hf,yc,zO,zO]}),i})();function Vs(i,t=lf){return ii((e,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=t.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}e.subscribe(Zn(n,c=>{s=c,o=t.now(),r||(r=t.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function JO(i){return Qt((t,e)=>i<=e)}function Po(i,t=zi){return i=i??yK,ii((e,n)=>{let r,s=!0;e.subscribe(Zn(n,o=>{const a=t(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function yK(i,t){return i===t}let e2=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xK=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){const n=Na(e);return new Nn(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const n=new De,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}}return i.\u0275fac=function(e){return new(e||i)(K(e2))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),t2=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=kt(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=dr(e),this._subscribe()}constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new Fe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Vs(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(e){return new(e||i)(x(xK),x(ht),x(lt))},i.\u0275dir=ge({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),hM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[e2]}),i})();const n2=new Set;let Ou,wK=(()=>{class i{constructor(e){this._platform=e,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):CK}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&function MK(i){if(!n2.has(i))try{Ou||(Ou=document.createElement("style"),Ou.setAttribute("type","text/css"),document.head.appendChild(Ou)),Ou.sheet&&(Ou.sheet.insertRule(`@media ${i} {body{ }}`,0),n2.add(i))}catch(t){console.error(t)}}(e),this._matchMedia(e)}}return i.\u0275fac=function(e){return new(e||i)(K(fi))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function CK(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let pM=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new De}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return r2(A_(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let s=Ls(r2(A_(e)).map(o=>this._registerQuery(o).observable));return s=zp(s.pipe(oi(1)),s.pipe(JO(1),Vs(0))),s.pipe(rt(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);const n=this._mediaMatcher.matchMedia(e),s={observable:new Nn(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(ms(n),rt(({matches:o})=>({query:e,matches:o})),ke(this._destroySubject)),mql:n};return this._queries.set(e,s),s}}return i.\u0275fac=function(e){return new(e||i)(K(wK),K(lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function r2(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function B_(i,t){return(i.getAttribute(t)||"").match(/\S+/g)||[]}const o2="cdk-describedby-message",U_="cdk-describedby-host";let fM=0,DK=(()=>{class i{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+fM++,this._document=e,this._id=$t(cu)+"-"+fM++}describe(e,n,r){if(!this._canBeDescribed(e,n))return;const s=mM(n,r);"string"!=typeof n?(a2(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,s)||this._addMessageReference(e,s)}removeDescription(e,n,r){if(!n||!this._isElementNode(e))return;const s=mM(n,r);if(this._isElementDescribedByMessage(e,s)&&this._removeMessageReference(e,s),"string"==typeof n){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const e=this._document.querySelectorAll(`[${U_}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(U_);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){const r=this._document.createElement("div");a2(r,this._id),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(mM(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;const e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){const n=B_(e,"aria-describedby").filter(r=>0!=r.indexOf(o2));e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){const r=this._messageRegistry.get(n);(function EK(i,t,e){const n=B_(i,t);n.some(r=>r.trim()==e.trim())||(n.push(e.trim()),i.setAttribute(t,n.join(" ")))})(e,"aria-describedby",r.messageElement.id),e.setAttribute(U_,this._id),r.referenceCount++}_removeMessageReference(e,n){const r=this._messageRegistry.get(n);r.referenceCount--,function AK(i,t,e){const r=B_(i,t).filter(s=>s!=e.trim());r.length?i.setAttribute(t,r.join(" ")):i.removeAttribute(t)}(e,"aria-describedby",r.messageElement.id),e.removeAttribute(U_)}_isElementDescribedByMessage(e,n){const r=B_(e,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=e.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(e){return new(e||i)(K(Lt),K(fi))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mM(i,t){return"string"==typeof i?`${t||""}/${i}`:i}function a2(i,t){i.id||(i.id=`${o2}-${t}-${fM++}`)}class l2{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new De,this._typeaheadSubscription=J.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new De,this.change=new De,t instanceof ou&&(this._itemChangesSubscription=t.changes.subscribe(e=>{if(this._activeItem){const r=e.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(pi(e=>this._pressedLetters.push(e)),Vs(t),Qt(()=>this._pressedLetters.length>0),rt(()=>this._pressedLetters.join(""))).subscribe(e=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}return;default:return void((r||Us(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t);this._activeItem=e[n]??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const r=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof ou?this._items.toArray():this._items}}class TK extends l2{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class c2 extends l2{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let V_=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function IK(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const n=function kK(i){try{return i.frameElement}catch{return null}}(function UK(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(e));if(n&&(-1===u2(n)||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=u2(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function NK(i){let t=i.nodeName.toLowerCase(),e="input"===t&&i.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,n){return function BK(i){return!function PK(i){return function FK(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function RK(i){let t=i.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(i)||function OK(i){return function LK(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||d2(i))}(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}}return i.\u0275fac=function(e){return new(e||i)(K(fi))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function d2(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let t=i.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function u2(i){if(!d2(i))return null;const t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class VK{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=0;n<e.length;n++){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let n=e.length-1;n>=0;n--){const r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(oi(1)).subscribe(t)}}let gM=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new VK(e,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(e){return new(e||i)(K(V_),K(lt),K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function _M(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function vM(i){const t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const zK=new ue("cdk-input-modality-detector-options"),HK={ignoreKeys:[18,17,224,91,16]},Fu=_c({passive:!0,capture:!0});let $K=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Be(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=yl(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(_M(o)?"keyboard":"mouse"),this._mostRecentTarget=yl(o))},this._onTouchstart=o=>{vM(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=yl(o))},this._options={...HK,...s},this.modalityDetected=this._modality.pipe(JO(1)),this.modalityChanged=this.modalityDetected.pipe(Po()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Fu),r.addEventListener("mousedown",this._onMousedown,Fu),r.addEventListener("touchstart",this._onTouchstart,Fu)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Fu),document.removeEventListener("mousedown",this._onMousedown,Fu),document.removeEventListener("touchstart",this._onTouchstart,Fu))}}return i.\u0275fac=function(e){return new(e||i)(K(fi),K(lt),K(Lt),K(zK,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const GK=new ue("liveAnnouncerElement",{providedIn:"root",factory:function jK(){return null}}),WK=new ue("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let YK=0,bM=(()=>{class i{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id="cdk-live-announcer-"+YK++,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){const n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const s=n[r],o=s.getAttribute("aria-owns");o?-1===o.indexOf(e)&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}}return i.\u0275fac=function(e){return new(e||i)(K(GK,8),K(lt),K(Lt),K(WK,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const XK=new ue("cdk-focus-monitor-default-options"),z_=_c({passive:!0,capture:!0});let Ba=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new De,this._rootNodeFocusAndBlurListener=a=>{for(let c=yl(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(e,n=!1){const r=Na(e);if(!this._platform.isBrowser||1!==r.nodeType)return dt(null);const s=function Iq(i){if(function kq(){if(null==oM){const i=typeof document<"u"?document.head:null;oM=!(!i||!i.createShadowRoot&&!i.attachShadow)}return oM}()){const t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new De,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){const n=Na(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){const s=Na(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused","touch"===n),e.classList.toggle("cdk-keyboard-focused","keyboard"===n),e.classList.toggle("cdk-mouse-focused","mouse"===n),e.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,n){const r=this._elementInfo.get(n),s=yl(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,z_),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,z_)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ke(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,z_),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,z_),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){const n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===e||"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName||e.disabled)return!1;const s=e.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(e){return new(e||i)(K(lt),K(fi),K($K),K(Lt,8),K(XK,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const p2="cdk-high-contrast-black-on-white",f2="cdk-high-contrast-white-on-black",yM="cdk-high-contrast-active";let m2=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=$t(pM).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(yM,p2,f2),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?e.add(yM,p2):2===n&&e.add(yM,f2)}}}return i.\u0275fac=function(e){return new(e||i)(K(fi),K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),g2=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(e){return new(e||i)(K(m2))},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[hM]}),i})();function qK(i,t){}class H_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let _2=(()=>{class i extends O_{constructor(e,n,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const u=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),u},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._config.restoreFocus;let n=null;if("string"==typeof e?n=this._document.querySelector(e):"boolean"==typeof e?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=R_(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,n=R_();return e===n||e.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=R_())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(gM),x(Lt,8),x(H_),x(V_),x(lt),x(gf),x(Ba))},i.\u0275cmp=Xe({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(e,n){if(1&e&&pn(Au,7),2&e){let r;ft(r=mt())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(e,n){2&e&&xt("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[Je],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,n){1&e&&Z(0,qK,0,0,"ng-template",0)},dependencies:[Au],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class xM{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new De,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!Us(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{!1!==e.closeOnOverlayDetachments&&this.close()})}close(t,e){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(t),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}}const v2=new ue("DialogScrollStrategy"),KK=new ue("DialogData"),ZK=new ue("DefaultDialogConfig"),JK={provide:v2,deps:[yr],useFactory:function QK(i){return()=>i.scrollStrategies.block()}};let eZ=0,b2=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,n,r,s,o,a){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new De,this._afterOpenedAtThisLevel=new De,this._ariaHiddenElements=new Map,this.afterAllClosed=Hp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ms(void 0))),this._scrollStrategy=a}open(e,n){(n={...this._defaultOptions||new H_,...n}).id=n.id||"cdk-dialog-"+eZ++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new xM(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(e,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){wM(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){wM(this._openDialogsAtThisLevel,e=>{!1===e.config.closeOnDestroy&&this._removeOpenDialog(e,!1)}),wM(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){const n=new Ru({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,r){const s=r.injector||r.viewContainerRef?.injector,o=[{provide:H_,useValue:r},{provide:xM,useValue:n},{provide:gf,useValue:e}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=_2;const l=new bc(a,r.viewContainerRef,Oi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,s){if(e instanceof ps){const o=this._createInjector(s,n,r,void 0);let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Eu(e,null,a,o))}else{const o=this._createInjector(s,n,r,this._injector),a=r.attachComponentPortal(new bc(e,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(e,n,r,s){const o=e.injector||e.viewContainerRef?.injector,a=[{provide:KK,useValue:e.data},{provide:xM,useValue:n}];return e.providers&&("function"==typeof e.providers?a.push(...e.providers(n,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(co,null,{optional:!0}))&&a.push({provide:co,useValue:{value:e.direction,change:dt()}}),Oi.create({parent:o||s,providers:a})}_removeOpenDialog(e,n){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(e){return new(e||i)(K(yr),K(Oi),K(ZK,8),K(i,12),K(N_),K(v2))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();function wM(i,t){let e=i.length;for(;e--;)t(i[e])}let tZ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[b2,JK],imports:[Pu,yc,g2,yc]}),i})();const nZ=["text"];function iZ(i,t){if(1&i&&pe(0,"mat-pseudo-checkbox",6),2&i){const e=$();T("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function rZ(i,t){1&i&&pe(0,"mat-pseudo-checkbox",7),2&i&&T("disabled",$().disabled)}function sZ(i,t){if(1&i&&(S(0,"span",8),H(1),A()),2&i){const e=$();k(1),hi("(",e.group.label,")")}}const oZ=[[["mat-icon"]],"*"],aZ=["mat-icon","*"],cZ=new ue("mat-sanity-checks",{providedIn:"root",factory:function lZ(){return!0}});let Cn=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!aM()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return i.\u0275fac=function(e){return new(e||i)(K(m2),K(cZ,8),K(Lt))},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[hf,hf]}),i})();function _f(i){return class extends i{get disabled(){return this._disabled}set disabled(t){this._disabled=kt(t)}constructor(...t){super(...t),this._disabled=!1}}}function wc(i,t){return class extends i{get color(){return this._color}set color(e){const n=e||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...e){super(...e),this.defaultColor=t,this.color=t}}}function vf(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=kt(t)}constructor(...t){super(...t),this._disableRipple=!1}}}function $_(i,t=0){return class extends i{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?dr(e):this.defaultTabIndex}constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}}}function w2(i){return class extends i{updateErrorState(){const t=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==t&&(this.errorState=s,this.stateChanges.next())}constructor(...t){super(...t),this.errorState=!1}}}function dZ(i){return class extends i{constructor(...t){super(...t),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Nn(e=>{this._isInitialized?this._notifySubscriber(e):this._pendingSubscribers.push(e)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(t){t.next(),t.complete()}}}let C2=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class hZ{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const S2=_c({passive:!0,capture:!0});class pZ{constructor(){this._events=new Map,this._delegateEventHandler=t=>{const e=yl(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){const s=this._events.get(e);if(s){const o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,S2)})}removeHandler(t,e,n){const r=this._events.get(t);if(!r)return;const s=r.get(e);s&&(s.delete(n),0===s.size&&r.delete(e),0===r.size&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,S2)))}}const E2={enterDuration:225,exitDuration:150},A2=_c({passive:!0,capture:!0}),D2=["mousedown","touchstart"],T2=["mouseup","mouseleave","touchend","touchcancel"];class Lu{constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Na(n))}fadeInRipple(t,e,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...E2,...n.animation};n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const o=n.radius||function mZ(i,t,e){const n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const u=window.getComputedStyle(d),p=u.transitionDuration,f="none"===u.transitionProperty||"0s"===p||"0s, 0s"===p||0===r.width&&0===r.height,g=new hZ(this,d,n,f);d.style.transform="scale3d(1, 1, 1)",g.state=0,n.persistent||(this._mostRecentTransientRipple=g);let m=null;return!f&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const _=()=>this._finishRippleTransition(g),b=()=>this._destroyRipple(g);d.addEventListener("transitionend",_),d.addEventListener("transitioncancel",b),m={onTransitionEnd:_,onTransitionCancel:b}}),this._activeRipples.set(g,m),(f||!c)&&this._finishRippleTransition(g),g}fadeOutRipple(t){if(2===t.state||3===t.state)return;const e=t.element,n={...E2,...t.config.animation};e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=2,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Na(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,D2.forEach(n=>{Lu._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{T2.forEach(e=>{this._triggerElement.addEventListener(e,this,A2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){0===t.state?this._startFadeOutTransition(t):2===t.state&&this._destroyRipple(t)}_startFadeOutTransition(t){const e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=1,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){const e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=3,null!==e&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){const e=_M(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!vM(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const t=this._triggerElement;t&&(D2.forEach(e=>Lu._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&T2.forEach(e=>t.removeEventListener(e,this,A2)))}}Lu._eventManager=new pZ;const MM=new ue("mat-ripple-global-options");let Ua=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Lu(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...e})}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt),x(fi),x(MM,8),x(Fi,8))},i.\u0275dir=ge({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,n){2&e&&Ut("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Nu=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Cn]}),i})(),gZ=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}}return i.\u0275fac=function(e){return new(e||i)(x(Fi,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(e,n){2&e&&Ut("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("mat-pseudo-checkbox-minimal","minimal"===n.appearance)("mat-pseudo-checkbox-full","full"===n.appearance)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(e,n){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-full{border:2px solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0}),i})(),k2=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn]}),i})();const I2=new ue("MAT_OPTION_PARENT_COMPONENT"),R2=new ue("MatOptgroup");let _Z=0;class vZ{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let bZ=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=kt(e)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!(!this._parent||!this._parent.hideSingleSelectionIndicator)}constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+_Z++,this.onSelectionChange=new Fe,this._stateChanges=new De}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!Us(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new vZ(this,e))}}return i.\u0275fac=function(e){Eo()},i.\u0275dir=ge({type:i,viewQuery:function(e,n){if(1&e&&pn(nZ,7),2&e){let r;ft(r=mt())&&(n._text=r.first)}},inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),wl=(()=>{class i extends bZ{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(yn),x(I2,8),x(R2,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(e,n){1&e&&de("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&e&&(To("id",n.id),xt("aria-selected",n.selected)("aria-disabled",n.disabled.toString()),Ut("mdc-list-item--selected",n.selected)("mat-mdc-option-multiple",n.multiple)("mat-mdc-option-active",n.active)("mdc-list-item--disabled",n.disabled))},exportAs:["matOption"],features:[Je],ngContentSelectors:aZ,decls:8,vars:5,consts:[["class","mat-mdc-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mdc-list-item__primary-text"],["text",""],["class","mat-mdc-option-pseudo-checkbox","state","checked","appearance","minimal",3,"disabled",4,"ngIf"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-mdc-option-pseudo-checkbox",3,"state","disabled"],["state","checked","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"]],template:function(e,n){1&e&&(Ai(oZ),Z(0,iZ,1,2,"mat-pseudo-checkbox",0),Ft(1),S(2,"span",1,2),Ft(4,1),A(),Z(5,rZ,1,1,"mat-pseudo-checkbox",3),Z(6,sZ,2,1,"span",4),pe(7,"div",5)),2&e&&(T("ngIf",n.multiple),k(5),T("ngIf",!n.multiple&&n.selected&&!n.hideSingleSelectionIndicator),k(1),T("ngIf",n.group&&n.group._inert),k(1),T("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[Ua,On,gZ],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option.mdc-list-item{align-items:center}.mat-mdc-option.mdc-list-item--disabled{opacity:.38;cursor:default}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})(),CM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Nu,nr,Cn,k2]}),i})();class P2{}class wZ{}const Va="*";function uo(i,t){return{type:7,name:i,definitions:t,options:{}}}function ur(i,t=null){return{type:4,styles:t,timings:i}}function F2(i,t=null){return{type:2,steps:i,options:t}}function Bn(i){return{type:6,styles:i,offset:null}}function Nr(i,t,e){return{type:0,name:i,styles:t,options:e}}function L2(i){return{type:5,steps:i}}function ir(i,t,e=null){return{type:1,expr:i,animation:t,options:e}}function SM(i=null){return{type:9,options:i}}function EM(i,t,e=null){return{type:11,selector:i,animation:t,options:e}}function N2(i){Promise.resolve().then(i)}class yf{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){N2(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class B2{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0;const s=this.players.length;0==s?N2(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++e==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){const t=this.players.reduce((e,n)=>null===e||n.totalTime>e.totalTime?n:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}const AM="!";function MZ(i,t){}class G_{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const DM="mdc-dialog--open",U2="mdc-dialog--opening",V2="mdc-dialog--closing";let EZ=(()=>{class i extends _2{constructor(e,n,r,s,o,a,l,c){super(e,n,r,s,o,a,l,c),this._animationStateChanged=new Fe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(gM),x(Lt,8),x(G_),x(V_),x(lt),x(gf),x(Ba))},i.\u0275cmp=Xe({type:i,selectors:[["ng-component"]],features:[Je],decls:0,vars:0,template:function(e,n){},encapsulation:2}),i})();const z2="--mat-dialog-transition-duration";function H2(i){return null==i?null:"number"==typeof i?i:i.endsWith("ms")?dr(i.substring(0,i.length-2)):i.endsWith("s")?1e3*dr(i.substring(0,i.length-1)):"0"===i?0:null}let AZ=(()=>{class i extends EZ{constructor(e,n,r,s,o,a,l,c,d){super(e,n,r,s,o,a,l,d),this._animationMode=c,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?H2(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?H2(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(z2,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(U2,DM)),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(DM),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(DM),this._animationsEnabled?(this._hostElement.style.setProperty(z2,`${this._openAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(V2)),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(U2,V2)}_waitForAnimationToComplete(e,n){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(e):e()})}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(gM),x(Lt,8),x(G_),x(V_),x(lt),x(gf),x(Fi,8),x(Ba))},i.\u0275cmp=Xe({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(e,n){2&e&&(To("id",n._config.id),xt("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Ut("_mat-animation-noopable",!n._animationsEnabled))},features:[Je],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&(S(0,"div",0)(1,"div",1),Z(2,MZ,0,0,"ng-template",2),A()())},dependencies:[Au],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),i})();class Mc{constructor(t,e,n){this._ref=t,this._containerInstance=n,this._afterOpened=new De,this._beforeClosed=new De,this._state=0,this.disableClose=e.disableClose,this.id=t.id,n._animationStateChanged.pipe(Qt(r=>"opened"===r.state),oi(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Qt(r=>"closed"===r.state),oi(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),gr(this.backdropClick(),this.keydownEvents().pipe(Qt(r=>27===r.keyCode&&!this.disableClose&&!Us(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),$2(this,"keydown"===r.type?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Qt(e=>"closing"===e.state),oi(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function $2(i,t,e){return i._closeInteractionType=t,i.close(e)}const TM=new ue("MatMdcDialogData"),DZ=new ue("mat-mdc-dialog-default-options"),G2=new ue("mat-mdc-dialog-scroll-strategy"),kZ={provide:G2,deps:[yr],useFactory:function TZ(i){return()=>i.scrollStrategies.block()}};let IZ=0,RZ=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,n,r,s,o,a,l,c,d,u){this._overlay=e,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new De,this._afterOpenedAtThisLevel=new De,this._idPrefix="mat-dialog-",this.dialogConfigClass=G_,this.afterAllClosed=Hp(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ms(void 0))),this._scrollStrategy=a,this._dialog=n.get(b2)}open(e,n){let r;(n={...this._defaultOptions||new G_,...n}).id=n.id||`${this._idPrefix}${IZ++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(e,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:H_,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}}return i.\u0275fac=function(e){Eo()},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),Cc=(()=>{class i extends RZ{constructor(e,n,r,s,o,a,l,c){super(e,n,s,a,l,o,Mc,AZ,TM,c),this._idPrefix="mat-mdc-dialog-"}}return i.\u0275fac=function(e){return new(e||i)(K(yr),K(Oi),K(Op,8),K(DZ,8),K(G2),K(i,12),K(N_),K(Fi,8))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),PZ=0,OZ=(()=>{class i{constructor(e,n,r){this.dialogRef=e,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=j2(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const n=e._matDialogClose||e._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(e){$2(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(e){return new(e||i)(x(Mc,8),x(ht),x(Cc))},i.\u0275dir=ge({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,n){1&e&&de("click",function(s){return n._onButtonClick(s)}),2&e&&xt("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[Pi]}),i})(),kM=(()=>{class i{constructor(e,n,r){this._dialogRef=e,this._elementRef=n,this._dialog=r,this.id="mat-mdc-dialog-title-"+PZ++}ngOnInit(){this._dialogRef||(this._dialogRef=j2(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(e){return new(e||i)(x(Mc,8),x(ht),x(Cc))},i.\u0275dir=ge({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(e,n){2&e&&To("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),IM=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),i})(),RM=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(e,n){2&e&&Ut("mat-mdc-dialog-actions-align-center","center"===n.align)("mat-mdc-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})();function j2(i,t){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(n=>n.id===e.id):null}let xf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[Cc,kZ],imports:[tZ,Pu,yc,Cn,Cn]}),i})();const FZ=["mat-button",""],Y2=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],X2=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],NZ=["mat-mini-fab",""],UZ=["mat-icon-button",""],VZ=["*"],zZ=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],HZ=wc(_f(vf(class{constructor(i){this._elementRef=i}})));let PM=(()=>{class i extends HZ{constructor(e,n,r,s){super(e),this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=$t(Ba),this._isFab=!1;const o=e.nativeElement.classList;for(const a of zZ)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...e){return e.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return i.\u0275fac=function(e){Eo()},i.\u0275dir=ge({type:i,viewQuery:function(e,n){if(1&e&&pn(Ua,5),2&e){let r;ft(r=mt())&&(n.ripple=r.first)}},features:[Je]}),i})(),Oo=(()=>{class i extends PM{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(fi),x(lt),x(Fi,8))},i.\u0275cmp=Xe({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(e,n){2&e&&(xt("disabled",n.disabled||null),Ut("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Je],attrs:FZ,ngContentSelectors:X2,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(Ai(Y2),pe(0,"span",0),Ft(1),S(2,"span",1),Ft(3,1),A(),Ft(4,2),pe(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Ut("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),k(6),T("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Ua],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})();const GZ=new ue("mat-mdc-fab-default-options",{providedIn:"root",factory:q2});function q2(){return{color:"accent"}}const K2=q2();let Z2=(()=>{class i extends PM{constructor(e,n,r,s,o){super(e,n,r,s),this._options=o,this._isFab=!0,this._options=this._options||K2,this.color=this.defaultColor=this._options.color||K2.color}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(fi),x(lt),x(Fi,8),x(GZ,8))},i.\u0275cmp=Xe({type:i,selectors:[["button","mat-mini-fab",""]],hostVars:7,hostBindings:function(e,n){2&e&&(xt("disabled",n.disabled||null),Ut("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Je],attrs:NZ,ngContentSelectors:X2,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(Ai(Y2),pe(0,"span",0),Ft(1),S(2,"span",1),Ft(3,1),A(),Ft(4,2),pe(5,"span",2)(6,"span",3)(7,"span",4)),2&e&&(Ut("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),k(6),T("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Ua],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    )}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab .mdc-fab__icon{width:24px;height:24px;font-size:24px}.mdc-fab:not(.mdc-fab--extended){border-radius:50%}.mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:50%}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);background-color:var(--mdc-fab-container-color, transparent);box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12);color:var(--mat-mdc-fab-color, inherit);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-fab .mat-ripple-element,.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab .mat-mdc-button-touch-target,.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(:disabled) .mdc-fab__icon,.mat-mdc-mini-fab:not(:disabled) .mdc-fab__icon{color:var(--mdc-fab-icon-color, inherit)}.mat-mdc-fab:not(.mdc-fab--extended),.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple,.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape, 50%)}.mat-mdc-fab:hover,.mat-mdc-fab:focus,.mat-mdc-mini-fab:hover,.mat-mdc-mini-fab:focus{box-shadow:0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active,.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:0px 7px 8px -4px rgba(0, 0, 0, 0.2), 0px 12px 17px 2px rgba(0, 0, 0, 0.14), 0px 5px 22px 4px rgba(0, 0, 0, 0.12)}.mat-mdc-fab[disabled],.mat-mdc-mini-fab[disabled]{cursor:default;pointer-events:none;box-shadow:0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-extended-fab{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:24px}.mat-mdc-extended-fab .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon,.mat-mdc-extended-fab .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}'],encapsulation:2,changeDetection:0}),i})(),j_=(()=>{class i extends PM{constructor(e,n,r,s){super(e,n,r,s)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(fi),x(lt),x(Fi,8))},i.\u0275cmp=Xe({type:i,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(e,n){2&e&&(xt("disabled",n.disabled||null),Ut("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Je],attrs:UZ,ngContentSelectors:VZ,decls:5,vars:3,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(e,n){1&e&&(Ai(),pe(0,"span",0),Ft(1),pe(2,"span",1)(3,"span",2)(4,"span",3)),2&e&&(k(3),T("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0)("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[Ua],styles:['.mdc-icon-button{font-size:24px;width:48px;height:48px;padding:12px}.mdc-icon-button .mdc-icon-button__focus-ring{max-height:48px;max-width:48px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__ripple{width:40px;height:40px;margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-icon-button.mdc-icon-button--reduced-size .mdc-icon-button__focus-ring{max-height:40px;max-width:40px}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-icon-button svg,.mdc-icon-button img{width:24px;height:24px}.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size, 48px);width:var(--mdc-icon-button-state-layer-size, 48px);color:var(--mdc-icon-button-icon-color, inherit);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size, 24px);height:var(--mdc-icon-button-icon-size, 24px)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity, 0.38)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color, #000)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),Ml=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Nu,Cn]}),i})();const jZ=["class","dialog"];let Q2=(()=>{class i{dialogRef;data;constructor(e,n){this.dialogRef=e,this.data=n}static \u0275fac=function(n){return new(n||i)(x(Mc),x(TM))};static \u0275cmp=Xe({type:i,selectors:[["app-confirm",8,"dialog"]],attrs:jZ,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(n,r){1&n&&(S(0,"h1",0),H(1,"Confirmation"),A(),S(2,"div",1)(3,"p"),H(4),A()(),S(5,"div",2)(6,"button",3),de("click",function(){return r.dialogRef.close()}),H(7,"Cancel"),A(),S(8,"button",4),H(9,"Yes"),A()()),2&n&&(k(4),bn(r.data.text),k(4),T("mat-dialog-close",!0))},dependencies:[Oo,OZ,kM,IM,RM]})}return i})();function W_(i,t){const e="object"==typeof t;return new Promise((n,r)=>{const s=new gn({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{e?n(t.defaultValue):r(new pu)}});i.subscribe(s)})}function J2(...i){const t=j1(i),{args:e,keys:n}=vP(i),r=new Nn(s=>{const{length:o}=e;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let u=!1;mr(e[d]).subscribe(Zn(s,h=>{u||(u=!0,c--),a[d]=h},()=>l--,void 0,()=>{(!l||!u)&&(c||s.next(n?bP(n,a):a),s.complete())}))}});return t?r.pipe(Mw(t)):r}let eF=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return i.\u0275fac=function(e){return new(e||i)(x(Aa),x(ht))},i.\u0275dir=ge({type:i}),i})(),Sc=(()=>{class i extends eF{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,features:[Je]}),i})();const Zr=new ue("NgValueAccessor"),YZ={provide:Zr,useExisting:An(()=>_s),multi:!0},qZ=new ue("CompositionEventMode");let _s=(()=>{class i extends eF{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function XZ(){const i=Ra()?Ra().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(e){this.setProperty("value",e??"")}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return i.\u0275fac=function(e){return new(e||i)(x(Aa),x(ht),x(qZ,8))},i.\u0275dir=ge({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,n){1&e&&de("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[ln([YZ]),Je]}),i})();const KZ=!1;function Cl(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function nF(i){return null!=i&&"number"==typeof i.length}const rr=new ue("NgValidators"),Sl=new ue("NgAsyncValidators"),ZZ=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class zs{static min(t){return iF(t)}static max(t){return rF(t)}static required(t){return function sF(i){return Cl(i.value)?{required:!0}:null}(t)}static requiredTrue(t){return function oF(i){return!0===i.value?null:{required:!0}}(t)}static email(t){return function aF(i){return Cl(i.value)||ZZ.test(i.value)?null:{email:!0}}(t)}static minLength(t){return lF(t)}static maxLength(t){return cF(t)}static pattern(t){return function dF(i){if(!i)return Y_;let t,e;return"string"==typeof i?(e="","^"!==i.charAt(0)&&(e+="^"),e+=i,"$"!==i.charAt(i.length-1)&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(Cl(n.value))return null;const r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return gF(t)}static composeAsync(t){return _F(t)}}function iF(i){return t=>{if(Cl(t.value)||Cl(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function rF(i){return t=>{if(Cl(t.value)||Cl(i))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function lF(i){return t=>Cl(t.value)||!nF(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function cF(i){return t=>nF(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function Y_(i){return null}function uF(i){return null!=i}function hF(i){const t=Mp(i)?Hi(i):i;if(KZ&&!ox(t)){let e="Expected async validator to return Promise or Observable.";throw"object"==typeof i&&(e+=" Are you using a synchronous validator where an async validator is expected?"),new he(-1101,e)}return t}function pF(i){let t={};return i.forEach(e=>{t=null!=e?{...t,...e}:t}),0===Object.keys(t).length?null:t}function fF(i,t){return t.map(e=>e(i))}function mF(i){return i.map(t=>function QZ(i){return!i.validate}(t)?t:e=>t.validate(e))}function gF(i){if(!i)return null;const t=i.filter(uF);return 0==t.length?null:function(e){return pF(fF(e,t))}}function OM(i){return null!=i?gF(mF(i)):null}function _F(i){if(!i)return null;const t=i.filter(uF);return 0==t.length?null:function(e){return J2(fF(e,t).map(hF)).pipe(rt(pF))}}function FM(i){return null!=i?_F(mF(i)):null}function vF(i,t){return null===i?[t]:Array.isArray(i)?[...i,t]:[i,t]}function bF(i){return i._rawValidators}function yF(i){return i._rawAsyncValidators}function LM(i){return i?Array.isArray(i)?i:[i]:[]}function X_(i,t){return Array.isArray(i)?i.includes(t):i===t}function xF(i,t){const e=LM(t);return LM(i).forEach(r=>{X_(e,r)||e.push(r)}),e}function wF(i,t){return LM(t).filter(e=>!X_(i,e))}class MF{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=OM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=FM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class Qr extends MF{get formDirective(){return null}get path(){return null}}class sa extends MF{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class CF{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Hs=(()=>{class i extends CF{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(x(sa,2))},i.\u0275dir=ge({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,n){2&e&&Ut("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[Je]}),i})(),wf=(()=>{class i extends CF{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(x(Qr,10))},i.\u0275dir=ge({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,n){2&e&&Ut("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[Je]}),i})();function SF(i,t){return i?`with name: '${t}'`:`at index: ${t}`}const UM=!1,Mf="VALID",K_="INVALID",Bu="PENDING",Cf="DISABLED";function VM(i){return(Z_(i)?i.validators:i)||null}function zM(i,t){return(Z_(t)?t.asyncValidators:i)||null}function Z_(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function EF(i,t,e){const n=i.controls;if(!(t?Object.keys(n):n).length)throw new he(1e3,UM?function nQ(i){return`\n    There are no form controls registered with this ${i?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(t):"");if(!n[e])throw new he(1001,UM?function iQ(i,t){return`Cannot find form control ${SF(i,t)}`}(t,e):"")}function AF(i,t,e){i._forEachChild((n,r)=>{if(void 0===e[r])throw new he(1002,UM?function rQ(i,t){return`Must supply a value for form control ${SF(i,t)}`}(t,r):"")})}class Q_{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Mf}get invalid(){return this.status===K_}get pending(){return this.status==Bu}get disabled(){return this.status===Cf}get enabled(){return this.status!==Cf}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(xF(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(xF(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(wF(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(wF(t,this._rawAsyncValidators))}hasValidator(t){return X_(this._rawValidators,t)}hasAsyncValidator(t){return X_(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Bu,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Cf,this.errors=null,this._forEachChild(n=>{n.disable({...t,onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=Mf,this._forEachChild(n=>{n.enable({...t,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors({...t,skipPristineCheck:e}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mf||this.status===Bu)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cf:Mf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Bu,this._hasOwnPendingAsyncValidator=!0;const e=hF(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){let e=t;return null==e||(Array.isArray(e)||(e=e.split(".")),0===e.length)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Fe,this.statusChanges=new Fe}_calculateStatus(){return this._allControlsDisabled()?Cf:this.errors?K_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Bu)?Bu:this._anyControlsHaveStatus(K_)?K_:Mf}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Z_(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=function sQ(i){return Array.isArray(i)?OM(i):i||null}(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=function oQ(i){return Array.isArray(i)?FM(i):i||null}(this._rawAsyncValidators)}}class Uu extends Q_{constructor(t,e,n){super(VM(e),zM(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){AF(this,!0,t),Object.keys(t).forEach(n=>{EF(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{const r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>!!n._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}}class DF extends Uu{}const Ec=new ue("CallSetDisabledState",{providedIn:"root",factory:()=>Sf}),Sf="always";function J_(i,t){return[...t.path,i]}function Ef(i,t,e=Sf){HM(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||"always"===e)&&t.valueAccessor.setDisabledState?.(i.disabled),function lQ(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&TF(i,t)})}(i,t),function dQ(i,t){const e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}(i,t),function cQ(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&TF(i,t),"submit"!==i.updateOn&&i.markAsTouched()})}(i,t),function aQ(i,t){if(t.valueAccessor.setDisabledState){const e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}(i,t)}function ev(i,t,e=!0){const n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),nv(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function tv(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function HM(i,t){const e=bF(i);null!==t.validator?i.setValidators(vF(e,t.validator)):"function"==typeof e&&i.setValidators([e]);const n=yF(i);null!==t.asyncValidator?i.setAsyncValidators(vF(n,t.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();tv(t._rawValidators,r),tv(t._rawAsyncValidators,r)}function nv(i,t){let e=!1;if(null!==i){if(null!==t.validator){const r=bF(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(null!==t.asyncValidator){const r=yF(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}const n=()=>{};return tv(t._rawValidators,n),tv(t._rawAsyncValidators,n),e}function TF(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function kF(i,t){HM(i,t)}function GM(i,t){if(!i.hasOwnProperty("model"))return!1;const e=i.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function IF(i,t){i._syncPendingControls(),t.forEach(e=>{const n=e.control;"submit"===n.updateOn&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function jM(i,t){if(!t)return null;let e,n,r;return Array.isArray(t),t.forEach(s=>{s.constructor===_s?e=s:function pQ(i){return Object.getPrototypeOf(i.constructor)===Sc}(s)?n=s:r=s}),r||n||e||null}const mQ={provide:Qr,useExisting:An(()=>Df)},Af=(()=>Promise.resolve())();let Df=(()=>{class i extends Qr{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Fe,this.form=new Uu({},OM(e),FM(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Af.then(()=>{const n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Ef(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Af.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Af.then(()=>{const n=this._findContainer(e.path),r=new Uu({});kF(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Af.then(()=>{const n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Af.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,IF(this.form,this._directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return i.\u0275fac=function(e){return new(e||i)(x(rr,10),x(Sl,10),x(Ec,8))},i.\u0275dir=ge({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,n){1&e&&de("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ln([mQ]),Je]}),i})();function RF(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}function PF(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const oa=class extends Q_{constructor(t=null,e,n){super(VM(e),zM(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Z_(e)&&(e.nonNullable||e.initialValueIsDefault)&&(this.defaultValue=PF(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){RF(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){RF(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){PF(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},vQ={provide:sa,useExisting:An(()=>aa)},LF=(()=>Promise.resolve())();let aa=(()=>{class i extends sa{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new oa,this._registered=!1,this.update=new Fe,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=jM(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),GM(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ef(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){LF.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){const n=e.isDisabled.currentValue,r=0!==n&&function uu(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);LF.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?J_(e,this._parent):[e]}}return i.\u0275fac=function(e){return new(e||i)(x(Qr,9),x(rr,10),x(Sl,10),x(Zr,10),x(yn,8),x(Ec,8))},i.\u0275dir=ge({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ln([vQ]),Je,Pi]}),i})(),Tf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const bQ={provide:Zr,useExisting:An(()=>la),multi:!0};let la=(()=>{class i extends Sc{writeValue(e){this.setProperty("value",e??"")}registerOnChange(e){this.onChange=n=>{e(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(e,n){1&e&&de("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[ln([bQ]),Je]}),i})(),NF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();const WM=new ue("NgModelWithFormControlWarning"),CQ={provide:Qr,useExisting:An(()=>za)};let za=(()=>{class i extends Qr{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Fe,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(nv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const n=this.form.get(e.path);return Ef(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){ev(e.control||null,e,!1),function fQ(i,t){const e=i.indexOf(t);e>-1&&i.splice(e,1)}(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,IF(this.form,this.directives),this.ngSubmit.emit(e),"dialog"===e?.target?.method}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const n=e.control,r=this.form.get(e.path);n!==r&&(ev(n||null,e),(i=>i instanceof oa)(r)&&(Ef(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const n=this.form.get(e.path);kF(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const n=this.form.get(e.path);n&&function uQ(i,t){return nv(i,t)}(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){HM(this.form,this),this._oldForm&&nv(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(e){return new(e||i)(x(rr,10),x(Sl,10),x(Ec,8))},i.\u0275dir=ge({type:i,selectors:[["","formGroup",""]],hostBindings:function(e,n){1&e&&de("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ln([CQ]),Je,Pi]}),i})();const AQ={provide:sa,useExisting:An(()=>Vu)};let Vu=(()=>{class i extends sa{set isDisabled(e){}constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new Fe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=jM(0,s)}ngOnChanges(e){this._added||this._setUpControl(),GM(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return J_(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(e){return new(e||i)(x(Qr,13),x(rr,10),x(Sl,10),x(Zr,10),x(WM,8))},i.\u0275dir=ge({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[ln([AQ]),Je,Pi]}),i})();function GF(i){return"number"==typeof i?i:parseInt(i,10)}function jF(i){return"number"==typeof i?i:parseFloat(i)}let Ac=(()=>{class i{constructor(){this._validator=Y_}ngOnChanges(e){if(this.inputName in e){const n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Y_,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return null!=e}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,features:[Pi]}),i})();const OQ={provide:rr,useExisting:An(()=>Ha),multi:!0};let Ha=(()=>{class i extends Ac{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>jF(e),this.createValidator=e=>rF(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&xt("max",n._enabled?n.max:null)},inputs:{max:"max"},features:[ln([OQ]),Je]}),i})();const FQ={provide:rr,useExisting:An(()=>$a),multi:!0};let $a=(()=>{class i extends Ac{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>jF(e),this.createValidator=e=>iF(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&xt("min",n._enabled?n.min:null)},inputs:{min:"min"},features:[ln([FQ]),Je]}),i})();const UQ={provide:rr,useExisting:An(()=>JM),multi:!0};let JM=(()=>{class i extends Ac{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=e=>GF(e),this.createValidator=e=>lF(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&xt("minlength",n._enabled?n.minlength:null)},inputs:{minlength:"minlength"},features:[ln([UQ]),Je]}),i})();const VQ={provide:rr,useExisting:An(()=>eC),multi:!0};let eC=(()=>{class i extends Ac{constructor(){super(...arguments),this.inputName="maxlength",this.normalizeInput=e=>GF(e),this.createValidator=e=>cF(e)}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,n){2&e&&xt("maxlength",n._enabled?n.maxlength:null)},inputs:{maxlength:"maxlength"},features:[ln([VQ]),Je]}),i})(),XF=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[NF]}),i})();class qF extends Q_{constructor(t,e,n){super(VM(e),zM(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){AF(this,!1,t),t.forEach((n,r)=>{EF(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>!!n._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}}function KF(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let tC=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const e=new i;return e.useNonNullable=!0,e}group(e,n=null){const r=this._reduceControls(e);let s={};return KF(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Uu(r,s)}record(e,n=null){const r=this._reduceControls(e);return new DF(r,n)}control(e,n,r){let s={};return this.useNonNullable?(KF(n)?s=n:(s.validators=n,s.asyncValidators=r),new oa(e,{...s,nonNullable:!0})):new oa(e,n,r)}array(e,n,r){const s=e.map(o=>this._createControl(o));return new qF(s,n,r)}_reduceControls(e){const n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){return e instanceof oa||e instanceof Q_?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ZF=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:Ec,useValue:e.callSetDisabledState??Sf}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[XF]}),i})(),kf=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:WM,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Ec,useValue:e.callSetDisabledState??Sf}]}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[XF]}),i})();const HQ=["matFormFieldNotchedOutline",""],$Q=["*"],GQ=["textField"],jQ=["iconPrefixContainer"],WQ=["textPrefixContainer"];function YQ(i,t){1&i&&pe(0,"span",19)}function XQ(i,t){if(1&i){const e=en();S(0,"label",17),de("cdkObserveContent",function(){return nt(e),it($(2)._refreshOutlineNotchWidth())}),Ft(1,1),Z(2,YQ,1,0,"span",18),A()}if(2&i){const e=$(2);T("floating",e._shouldLabelFloat())("cdkObserveContentDisabled",!e._hasOutline())("id",e._labelId),xt("for",e._control.id)("aria-owns",e._control.id),k(2),T("ngIf",!e.hideRequiredMarker&&e._control.required)}}function qQ(i,t){1&i&&Z(0,XQ,3,6,"label",16),2&i&&T("ngIf",$()._hasFloatingLabel())}function KQ(i,t){1&i&&pe(0,"div",20)}function ZQ(i,t){}function QQ(i,t){1&i&&Z(0,ZQ,0,0,"ng-template",22),2&i&&($(2),T("ngTemplateOutlet",Hn(1)))}function JQ(i,t){if(1&i&&(S(0,"div",21),Z(1,QQ,1,1,"ng-template",9),A()),2&i){const e=$();T("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat())("matFormFieldNotchedOutlineLabelWidth",e._labelWidth),k(1),T("ngIf",!e._forceDisplayInfixLabel())}}function eJ(i,t){1&i&&(S(0,"div",23,24),Ft(2,2),A())}function tJ(i,t){1&i&&(S(0,"div",25,26),Ft(2,3),A())}function nJ(i,t){}function iJ(i,t){1&i&&Z(0,nJ,0,0,"ng-template",22),2&i&&($(),T("ngTemplateOutlet",Hn(1)))}function rJ(i,t){1&i&&(S(0,"div",27),Ft(1,4),A())}function sJ(i,t){1&i&&(S(0,"div",28),Ft(1,5),A())}function oJ(i,t){1&i&&pe(0,"div",29)}function aJ(i,t){1&i&&(S(0,"div",30),Ft(1,6),A()),2&i&&T("@transitionMessages",$()._subscriptAnimationState)}function lJ(i,t){if(1&i&&(S(0,"mat-hint",34),H(1),A()),2&i){const e=$(2);T("id",e._hintLabelId),k(1),bn(e.hintLabel)}}function cJ(i,t){if(1&i&&(S(0,"div",31),Z(1,lJ,2,2,"mat-hint",32),Ft(2,7),pe(3,"div",33),Ft(4,8),A()),2&i){const e=$();T("@transitionMessages",e._subscriptAnimationState),k(1),T("ngIf",e.hintLabel)}}const dJ=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],uJ=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let xr=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["mat-label"]]}),i})(),hJ=0;const QF=new ue("MatError");let JF=(()=>{class i{constructor(e,n){this.id="mat-mdc-error-"+hJ++,e||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(e){return new(e||i)(qo("aria-live"),x(ht))},i.\u0275dir=ge({type:i,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(e,n){2&e&&To("id",n.id)},inputs:{id:"id"},features:[ln([{provide:QF,useExisting:i}])]}),i})(),pJ=0,nC=(()=>{class i{constructor(){this.align="start",this.id="mat-mdc-hint-"+pJ++}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(e,n){2&e&&(To("id",n.id),xt("align",null),Ut("mat-mdc-form-field-hint-end","end"===n.align))},inputs:{align:"align",id:"id"}}),i})();const eL=new ue("MatPrefix");let fJ=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:["matTextPrefix","_isTextSelector"]},features:[ln([{provide:eL,useExisting:i}])]}),i})();const tL=new ue("MatSuffix");let mJ=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[ln([{provide:tL,useExisting:i}])]}),i})(),nL=(()=>{class i{constructor(e){this._elementRef=e,this.floating=!1}getWidth(){return function gJ(i){if(null!==i.offsetParent)return i.scrollWidth;const e=i.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);const n=e.scrollWidth;return e.remove(),n}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}}return i.\u0275fac=function(e){return new(e||i)(x(ht))},i.\u0275dir=ge({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(e,n){2&e&&Ut("mdc-floating-label--float-above",n.floating)},inputs:{floating:"floating"}}),i})();const iL="mdc-line-ripple--active",iv="mdc-line-ripple--deactivating";let rL=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{const s=this._elementRef.nativeElement.classList,o=s.contains(iv);"opacity"===r.propertyName&&o&&s.remove(iL,iv)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const e=this._elementRef.nativeElement.classList;e.remove(iv),e.add(iL)}deactivate(){this._elementRef.nativeElement.classList.add(iv)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt))},i.\u0275dir=ge({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),i})(),sL=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.labelWidth=0,this.open=!1}ngAfterViewInit(){const e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_getNotchWidth(){return this.open?this.labelWidth>0?`calc(${this.labelWidth}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:"0px":null}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt))},i.\u0275cmp=Xe({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(e,n){2&e&&Ut("mdc-notched-outline--notched",n.open)},inputs:{labelWidth:["matFormFieldNotchedOutlineLabelWidth","labelWidth"],open:["matFormFieldNotchedOutlineOpen","open"]},attrs:HQ,ngContentSelectors:$Q,decls:4,vars:2,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(e,n){1&e&&(Ai(),pe(0,"div",0),S(1,"div",1),Ft(2),A(),pe(3,"div",2)),2&e&&(k(1),Xr("width",n._getNotchWidth()))},encapsulation:2,changeDetection:0}),i})();const _J={transitionMessages:uo("transitionMessages",[Nr("enter",Bn({opacity:1,transform:"translateY(0%)"})),ir("void => enter",[Bn({opacity:0,transform:"translateY(-5px)"}),ur("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let iC=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i}),i})();const rv=new ue("MatFormField"),vJ=new ue("MAT_FORM_FIELD_DEFAULT_OPTIONS");let oL=0,vs=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=kt(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){const n=this._appearance;this._appearance=e||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==n&&(this._refreshOutlineNotchWidth(),this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._document=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+oL++,this._hintLabelId="mat-mdc-hint-"+oL++,this._subscriptAnimationState="",this._labelWidth=0,this._destroyed=new De,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=Boolean(a?.hideRequiredMarker),a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._refreshOutlineNotchWidth(),this._document?.fonts?.ready?this._document.fonts.ready.then(()=>{this._refreshOutlineNotchWidth(),this._changeDetectorRef.markForCheck()}):setTimeout(()=>this._refreshOutlineNotchWidth(),100),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(ke(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),gr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ke(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(ke(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){const n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||(this._labelWidth=this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const e=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(e.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0;e.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const e=this._elementRef.nativeElement;if(e.getRootNode){const n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(yn),x(lt),x(co),x(fi),x(vJ,8),x(Fi,8),x(Lt))},i.\u0275cmp=Xe({type:i,selectors:[["mat-form-field"]],contentQueries:function(e,n,r){if(1&e&&(yi(r,xr,5),yi(r,xr,7),yi(r,iC,5),yi(r,eL,5),yi(r,tL,5),yi(r,QF,5),yi(r,nC,5)),2&e){let s;ft(s=mt())&&(n._labelChildNonStatic=s.first),ft(s=mt())&&(n._labelChildStatic=s.first),ft(s=mt())&&(n._formFieldControl=s.first),ft(s=mt())&&(n._prefixChildren=s),ft(s=mt())&&(n._suffixChildren=s),ft(s=mt())&&(n._errorChildren=s),ft(s=mt())&&(n._hintChildren=s)}},viewQuery:function(e,n){if(1&e&&(pn(GQ,5),pn(jQ,5),pn(WQ,5),pn(nL,5),pn(sL,5),pn(rL,5)),2&e){let r;ft(r=mt())&&(n._textField=r.first),ft(r=mt())&&(n._iconPrefixContainer=r.first),ft(r=mt())&&(n._textPrefixContainer=r.first),ft(r=mt())&&(n._floatingLabel=r.first),ft(r=mt())&&(n._notchedOutline=r.first),ft(r=mt())&&(n._lineRipple=r.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(e,n){2&e&&Ut("mat-mdc-form-field-label-always-float",n._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",n._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",n._hasIconSuffix)("mat-form-field-invalid",n._control.errorState)("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===n._animationMode)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-hide-placeholder",n._hasFloatingLabel()&&!n._shouldLabelFloat())("mat-focused",n._control.focused)("mat-primary","accent"!==n.color&&"warn"!==n.color)("mat-accent","accent"===n.color)("mat-warn","warn"===n.color)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[ln([{provide:rv,useExisting:i}])],ngContentSelectors:uJ,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","cdkObserveContentDisabled","id","cdkObserveContent"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen","matFormFieldNotchedOutlineLabelWidth"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(e,n){1&e&&(Ai(dJ),Z(0,qQ,1,1,"ng-template",null,0,so),S(2,"div",1,2),de("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),Z(4,KQ,1,0,"div",3),S(5,"div",4),Z(6,JQ,2,3,"div",5),Z(7,eJ,3,0,"div",6),Z(8,tJ,3,0,"div",7),S(9,"div",8),Z(10,iJ,1,1,"ng-template",9),Ft(11),A(),Z(12,rJ,2,0,"div",10),Z(13,sJ,2,0,"div",11),A(),Z(14,oJ,1,0,"div",12),A(),S(15,"div",13),Z(16,aJ,2,1,"div",14),Z(17,cJ,5,2,"div",15),A()),2&e&&(k(2),Ut("mdc-text-field--filled",!n._hasOutline())("mdc-text-field--outlined",n._hasOutline())("mdc-text-field--no-label",!n._hasFloatingLabel())("mdc-text-field--disabled",n._control.disabled)("mdc-text-field--invalid",n._control.errorState),k(2),T("ngIf",!n._hasOutline()&&!n._control.disabled),k(2),T("ngIf",n._hasOutline()),k(1),T("ngIf",n._hasIconPrefix),k(1),T("ngIf",n._hasTextPrefix),k(2),T("ngIf",!n._hasOutline()||n._forceDisplayInfixLabel()),k(2),T("ngIf",n._hasTextSuffix),k(1),T("ngIf",n._hasIconSuffix),k(1),T("ngIf",!n._hasOutline()),k(1),Ut("mat-mdc-form-field-subscript-dynamic-size","dynamic"===n.subscriptSizing),T("ngSwitch",n._getDisplayedMessages()),k(1),T("ngSwitchCase","error"),k(1),T("ngSwitchCase","hint"))},dependencies:[On,hu,Np,dw,t2,nC,nL,sL,rL],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;border-top:1px solid;border-bottom:1px solid;pointer-events:none}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid;flex-grow:1}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{flex:0 0 auto;width:auto;max-width:calc(100% - 12px * 2)}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-10.25px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-10.25px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-10.25px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-24.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-24.75px) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-24.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - 32px)) translateY(-34.75px) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(-34.75px) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(-34.75px) scale(0.75)}100%{transform:translateX(calc(0 - -32px)) translateY(-34.75px) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(-106%) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(-106%) scale(0.75)}100%{transform:translateX(calc(0 - 0%)) translateY(-106%) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}'],encapsulation:2,data:{animation:[_J.transitionMessages]},changeDetection:0}),i})(),Dc=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,nr,hM,Cn]}),i})();const cL=_c({passive:!0});let xJ=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Js;const n=Na(e),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new De,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,cL),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,cL)}}),s}stopMonitoring(e){const n=Na(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(e){return new(e||i)(K(fi),K(lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),wJ=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();const rC=new ue("MAT_INPUT_VALUE_ACCESSOR"),MJ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let CJ=0;const SJ=w2(class{constructor(i,t,e,n){this._defaultErrorStateMatcher=i,this._parentForm=t,this._parentFormGroup=e,this.ngControl=n,this.stateChanges=new De}});let $s=(()=>{class i extends SJ{get disabled(){return this._disabled}set disabled(e){this._disabled=kt(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(zs.required)??!1}set required(e){this._required=kt(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&NO().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=kt(e)}constructor(e,n,r,s,o,a,l,c,d,u){super(a,s,o,r),this._elementRef=e,this._platform=n,this._autofillMonitor=c,this._formField=u,this._uid="mat-input-"+CJ++,this.focused=!1,this.stateChanges=new De,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(f=>NO().has(f)),this._iOSKeyupListener=f=>{const g=f.target;!g.value&&0===g.selectionStart&&0===g.selectionEnd&&(g.setSelectionRange(1,1),g.setSelectionRange(0,0))};const h=this._elementRef.nativeElement,p=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===p,this._isTextarea="textarea"===p,this._isInFormField=!!u,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){const e=this._getPlaceholder();if(e!==this._previousPlaceholder){const n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){MJ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(fi),x(sa,10),x(Df,8),x(za,8),x(C2),x(rC,10),x(xJ),x(lt),x(rv,8))},i.\u0275dir=ge({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(e,n){1&e&&de("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&e&&(To("id",n.id)("disabled",n.disabled)("required",n.required),xt("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required)("id",n.id),Ut("mat-input-server",n._isServer)("mat-mdc-form-field-textarea-control",n._isInFormField&&n._isTextarea)("mat-mdc-form-field-input-control",n._isInFormField)("mdc-text-field__input",n._isInFormField)("mat-mdc-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[ln([{provide:iC,useExisting:i}]),Je,Pi]}),i})(),If=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Dc,Dc,wJ,Cn]}),i})();const EJ=new ue("MAT_PROGRESS_BAR_DEFAULT_OPTIONS"),DJ=wc(class{constructor(i){this._elementRef=i}},"primary");let TJ=(()=>{class i extends DJ{constructor(e,n,r,s,o){super(e),this._ngZone=n,this._changeDetectorRef=r,this._animationMode=s,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new Fe,this._mode="determinate",this._transitionendHandler=a=>{0===this.animationEnd.observers.length||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation="NoopAnimations"===s,o&&(o.color&&(this.color=this.defaultColor=o.color),this.mode=o.mode||this.mode)}get value(){return this._value}set value(e){this._value=dL(dr(e)),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=dL(dr(e)),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${"buffer"===this.mode?this.bufferValue:100}%`}_isIndeterminate(){return"indeterminate"===this.mode||"query"===this.mode}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt),x(yn),x(Fi,8),x(EJ,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:8,hostBindings:function(e,n){2&e&&(xt("aria-valuenow",n._isIndeterminate()?null:n.value)("mode",n.mode),Ut("_mat-animation-noopable",n._isNoopAnimation)("mdc-linear-progress--animation-ready",!n._isNoopAnimation)("mdc-linear-progress--indeterminate",n._isIndeterminate()))},inputs:{color:"color",value:"value",bufferValue:"bufferValue",mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[Je],decls:7,vars:4,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(e,n){1&e&&(S(0,"div",0),pe(1,"div",1)(2,"div",2),A(),S(3,"div",3),pe(4,"span",4),A(),S(5,"div",5),pe(6,"span",4),A()),2&e&&(k(1),Xr("flex-basis",n._getBufferBarFlexBasis()),k(2),Xr("transform",n._getPrimaryBarTransform()))},styles:["@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half, 83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full, 200.611057%))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter, 37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half, 84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full, 160.277782%))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(-10px)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg, -83.67142%))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg, -200.611057%))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg, -37.651913%))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg, -84.386165%))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg, -160.277782%))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;width:100%;height:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;width:100%;height:100%}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color, #6200ee)}.mdc-linear-progress__buffer-dots{background-image:url(\"data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='%23e6e6e6'/%3E%3C/svg%3E\")}.mdc-linear-progress__buffer-bar{background-color:#e6e6e6}.mdc-linear-progress{height:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-track-height, 4px)}.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height, 4px)}.mat-mdc-progress-bar{display:block}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}"],encapsulation:2,changeDetection:0}),i})();function dL(i,t=0,e=100){return Math.max(t,Math.min(e,i))}let uL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn]}),i})();const kJ=["input"],IJ=["label"],RJ=["*"],PJ=new ue("mat-checkbox-default-options",{providedIn:"root",factory:hL});function hL(){return{color:"accent",clickAction:"check-indeterminate"}}const OJ={provide:Zr,useExisting:An(()=>sC),multi:!0};class FJ{}let LJ=0;const pL=hL(),NJ=$_(wc(vf(_f(class{constructor(i){this._elementRef=i}}))));let BJ=(()=>{class i extends NJ{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(e){this._required=kt(e)}constructor(e,n,r,s,o,a,l){super(n),this._changeDetectorRef=r,this._ngZone=s,this._animationMode=a,this._options=l,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Fe,this.indeterminateChange=new Fe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||pL,this.color=this.defaultColor=this._options.color||pL.color,this.tabIndex=parseInt(o)||0,this.id=this._uniqueId=`${e}${++LJ}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){const n=kt(e);n!=this.checked&&(this._checked=n,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){const n=kt(e);n!==this.disabled&&(this._disabled=n,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){const n=e!=this._indeterminate;this._indeterminate=kt(e),n&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_transitionCheckState(e){let n=this._currentCheckState,r=this._getAnimationTargetElement();if(n!==e&&r&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const e=this._options?.clickAction;this.disabled||"noop"===e?!this.disabled&&"noop"===e&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==e&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,n){if("NoopAnimations"===this._animationMode)return"";switch(e){case 0:if(1===n)return this._animationClasses.uncheckedToChecked;if(3==n)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===n?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===n?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===n?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){const n=this._inputElement;n&&(n.nativeElement.indeterminate=e)}}return i.\u0275fac=function(e){Eo()},i.\u0275dir=ge({type:i,viewQuery:function(e,n){if(1&e&&(pn(kJ,5),pn(IJ,5),pn(Ua,5)),2&e){let r;ft(r=mt())&&(n._inputElement=r.first),ft(r=mt())&&(n._labelElement=r.first),ft(r=mt())&&(n.ripple=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[Je]}),i})(),sC=(()=>{class i extends BJ{constructor(e,n,r,s,o,a){super("mat-mdc-checkbox-",e,n,r,s,o,a),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){const n=new FJ;return n.source=this,n.checked=e,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(yn),x(lt),qo("tabindex"),x(Fi,8),x(PJ,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(e,n){2&e&&(To("id",n.id),xt("tabindex",null)("aria-label",null)("aria-labelledby",null),Ut("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mdc-checkbox--disabled",n.disabled)("mat-mdc-checkbox-disabled",n.disabled)("mat-mdc-checkbox-checked",n.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[ln([OJ]),Je],ngContentSelectors:RJ,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[3,"for"],["label",""]],template:function(e,n){if(1&e&&(Ai(),S(0,"div",0),de("click",function(s){return n._preventBubblingFromLabel(s)}),S(1,"div",1,2)(3,"div",3),de("click",function(){return n._onTouchTargetClick()}),A(),S(4,"input",4,5),de("blur",function(){return n._onBlur()})("click",function(){return n._onInputClick()})("change",function(s){return n._onInteractionEvent(s)}),A(),pe(6,"div",6),S(7,"div",7),Yr(),S(8,"svg",8),pe(9,"path",9),A(),dl(),pe(10,"div",10),A(),pe(11,"div",11),A(),S(12,"label",12,13),Ft(14),A()()),2&e){const r=Hn(2);Ut("mdc-form-field--align-end","before"==n.labelPosition),k(4),Ut("mdc-checkbox--selected",n.checked),T("checked",n.checked)("indeterminate",n.indeterminate)("disabled",n.disabled)("id",n.inputId)("required",n.required)("tabIndex",n.tabIndex),xt("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("name",n.name)("value",n.value),k(7),T("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),k(1),T("for",n.inputId)}},dependencies:[Ua],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:not([disabled])~.mdc-checkbox__ripple{opacity:.04;transform:scale(1);transition:opacity 80ms 0 cubic-bezier(0, 0, 0.2, 1),transform 80ms 0 cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:not([disabled]):focus~.mdc-checkbox__ripple{opacity:.16}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__native-control:focus:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, black)}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})(),fL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})(),mL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Nu,fL,Cn,fL]}),i})();class oC{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new De,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));const e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);const e=this.selected,n=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();const e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}_getConcreteValue(t){if(this.compareWith){for(let e of this._selection)if(this.compareWith(t,e))return e;return t}return t}}let aC=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const gL=new ue("CdkAccordion");let zJ=0,HJ=(()=>{class i{get expanded(){return this._expanded}set expanded(e){e=kt(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=kt(e)}constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=J.EMPTY,this.closed=new Fe,this.opened=new Fe,this.destroyed=new Fe,this.expandedChange=new Fe,this.id="cdk-accordion-child-"+zJ++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return i.\u0275fac=function(e){return new(e||i)(x(gL,12),x(yn),x(aC))},i.\u0275dir=ge({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[ln([{provide:gL,useValue:void 0}])]}),i})(),$J=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({}),i})();const GJ=["body"];function jJ(i,t){}const WJ=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],YJ=["mat-expansion-panel-header","*","mat-action-row"];function XJ(i,t){1&i&&pe(0,"span",2),2&i&&T("@indicatorRotate",$()._getExpandedState())}const qJ=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],KJ=["mat-panel-title","mat-panel-description","*"],_L=new ue("MAT_ACCORDION"),vL="225ms cubic-bezier(0.4,0.0,0.2,1)",bL={indicatorRotate:uo("indicatorRotate",[Nr("collapsed, void",Bn({transform:"rotate(0deg)"})),Nr("expanded",Bn({transform:"rotate(180deg)"})),ir("expanded <=> collapsed, void => collapsed",ur(vL))]),bodyExpansion:uo("bodyExpansion",[Nr("collapsed, void",Bn({height:"0px",visibility:"hidden"})),Nr("expanded",Bn({height:"*",visibility:"visible"})),ir("expanded <=> collapsed, void => collapsed",ur(vL))])},yL=new ue("MAT_EXPANSION_PANEL");let ZJ=(()=>{class i{constructor(e,n){this._template=e,this._expansionPanel=n}}return i.\u0275fac=function(e){return new(e||i)(x(ps),x(yL,8))},i.\u0275dir=ge({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),QJ=0;const xL=new ue("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let lC=(()=>{class i extends HJ{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=kt(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,n,r,s,o,a,l){super(e,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Fe,this.afterCollapse=new Fe,this._inputChanges=new De,this._headerId="mat-expansion-panel-header-"+QJ++,this._bodyAnimationDone=new De,this.accordion=e,this._document=o,this._bodyAnimationDone.pipe(Po((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(ms(null),Qt(()=>this.expanded&&!this._portal),oi(1)).subscribe(()=>{this._portal=new Eu(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}}return i.\u0275fac=function(e){return new(e||i)(x(_L,12),x(yn),x(aC),x(lr),x(Lt),x(Fi,8),x(xL,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(e,n,r){if(1&e&&yi(r,ZJ,5),2&e){let s;ft(s=mt())&&(n._lazyContent=s.first)}},viewQuery:function(e,n){if(1&e&&pn(GJ,5),2&e){let r;ft(r=mt())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,n){2&e&&Ut("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[ln([{provide:_L,useValue:void 0},{provide:yL,useExisting:i}]),Je,Pi],ngContentSelectors:YJ,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,n){1&e&&(Ai(WJ),Ft(0),S(1,"div",0,1),de("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),S(3,"div",2),Ft(4,1),Z(5,jJ,0,0,"ng-template",3),A(),Ft(6,2),A()),2&e&&(k(1),T("@bodyExpansion",n._getExpandedState())("id",n.id),xt("aria-labelledby",n._headerId),k(4),T("cdkPortalOutlet",n._portal))},dependencies:[Au],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[bL.bodyExpansion]},changeDetection:0}),i})();class JJ{}const eee=$_(JJ);let wL=(()=>{class i extends eee{constructor(e,n,r,s,o,a,l){super(),this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=J.EMPTY;const c=e.accordion?e.accordion._stateChanges.pipe(Qt(d=>!(!d.hideToggle&&!d.togglePosition))):Js;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=gr(e.opened,e.closed,c,e._inputChanges.pipe(Qt(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Qt(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Us(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(e){return new(e||i)(x(lC,1),x(ht),x(Ba),x(yn),x(xL,8),x(Fi,8),qo("tabindex"))},i.\u0275cmp=Xe({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,n){1&e&&de("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&e&&(xt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),Xr("height",n._getHeaderHeight()),Ut("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[Je],ngContentSelectors:KJ,decls:5,vars:3,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,n){1&e&&(Ai(qJ),S(0,"span",0),Ft(1),Ft(2,1),Ft(3,2),A(),Z(4,XJ,1,1,"span",1)),2&e&&(Ut("mat-content-hide-toggle",!n._showToggle()),k(4),T("ngIf",n._showToggle()))},dependencies:[On],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[bL.indicatorRotate]},changeDetection:0}),i})(),ML=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),CL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),SL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[nr,Cn,$J,yc]}),i})(),cC=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=kt(e)}get inset(){return this._inset}set inset(e){this._inset=kt(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Xe({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,n){2&e&&(xt("aria-orientation",n.vertical?"vertical":"horizontal"),Ut("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),Rf=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Cn]}),i})();const tee=["tooltip"],EL=new ue("mat-tooltip-scroll-strategy"),ree={provide:EL,deps:[yr],useFactory:function iee(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},oee=new ue("mat-tooltip-default-options",{providedIn:"root",factory:function see(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),AL="tooltip-panel",DL=_c({passive:!0});let hee=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=kt(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=kt(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=dr(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=dr(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=e?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,r,s,o,a,l,c,d,u,h,p){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=u,this._defaultOptions=h,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new De,this._scrollStrategy=d,this._document=p,h&&(h.position&&(this.position=h.position),h.positionAtOrigin&&(this.positionAtOrigin=h.positionAtOrigin),h.touchGestures&&(this.touchGestures=h.touchGestures)),u.change.pipe(ke(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(ke(this._destroyed)).subscribe(e=>{e?"keyboard"===e&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,DL)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(n);this._detach(),this._portal=this._portal||new bc(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(ke(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(e)}hide(e=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&s._origin instanceof ht)return this._overlayRef;this._detach()}const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&e||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(ke(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${AL}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(ke(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(ke(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(ke(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!Us(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){const n=e.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(e){return e}_getOrigin(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const e=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&e||"right"==n&&!e?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&e||"left"==n&&!e)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(oi(1),ke(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===e?e="start":"start"===e&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){const{overlayY:n,originX:r,originY:s}=e;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${AL}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{let n;this._setupPointerExitEventsIfNeeded(),void 0!==e.x&&void 0!==e.y&&(n=e),this.show(void 0,n)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{const n=e.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,DL)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const e=this.touchGestures;if("off"!==e){const n=this._elementRef.nativeElement,r=n.style;("on"===e||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===e||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(e){Eo()},i.\u0275dir=ge({type:i,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),wr=(()=>{class i extends hee{constructor(e,n,r,s,o,a,l,c,d,u,h,p){super(e,n,r,s,o,a,l,c,d,u,h,p),this._tooltipComponent=fee,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(e){const r=!this._dir||"ltr"==this._dir.value;return"top"===e.originY?e.offsetY=-8:"bottom"===e.originY?e.offsetY=8:"start"===e.originX?e.offsetX=r?-8:8:"end"===e.originX&&(e.offsetX=r?8:-8),e}}return i.\u0275fac=function(e){return new(e||i)(x(yr),x(ht),x(pf),x(lr),x(lt),x(fi),x(DK),x(Ba),x(EL),x(co,8),x(oee,8),x(Lt))},i.\u0275dir=ge({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[Je]}),i})(),pee=(()=>{class i{constructor(e,n){this._changeDetectorRef=e,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new De,this._animationsDisabled="NoopAnimations"===n}show(e){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(e?s:r),n.classList.add(e?r:s),this._isVisible=e,e&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}}return i.\u0275fac=function(e){return new(e||i)(x(yn),x(Fi,8))},i.\u0275dir=ge({type:i}),i})(),fee=(()=>{class i extends pee{constructor(e,n,r){super(e,r),this._elementRef=n,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>24&&e.width>=200}}return i.\u0275fac=function(e){return new(e||i)(x(yn),x(ht),x(Fi,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(e,n){if(1&e&&pn(tee,7),2&e){let r;ft(r=mt())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(e,n){1&e&&de("mouseleave",function(s){return n._handleMouseLeave(s)}),2&e&&Xr("zoom",n.isVisible()?1:null)},features:[Je],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(e,n){1&e&&(S(0,"div",0,1),de("animationend",function(s){return n._handleAnimationEnd(s)}),S(2,"div",2),H(3),A()()),2&e&&(Ut("mdc-tooltip--multiline",n._isMultiline),T("ngClass",n.tooltipClass),k(3),bn(n.message))},dependencies:[pc],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),i})(),sv=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[ree],imports:[g2,nr,Pu,Cn,Cn,ff]}),i})();class dC{}class El{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const n=e.indexOf(":");if(n>0){const r=e.slice(0,n),s=r.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{let r;if(r="string"==typeof n?[n]:"number"==typeof n?[n.toString()]:n.map(s=>s.toString()),r.length>0){const s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof El?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new El;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof El?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let o=this.headers.get(e);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class mee{encodeKey(t){return kL(t)}encodeValue(t){return kL(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const _ee=/%(\d[a-f0-9])/gi,vee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kL(i){return encodeURIComponent(i).replace(_ee,(t,e)=>vee[e]??t)}function ov(i){return`${i}`}class Al{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new mee,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function gee(i,t){const e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e],r=Array.isArray(n)?n.map(ov):[ov(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Al({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(ov(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let n=this.map.get(t.param)||[];const r=n.indexOf(ov(t.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class bee{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function IL(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function RL(i){return typeof Blob<"u"&&i instanceof Blob}function PL(i){return typeof FormData<"u"&&i instanceof FormData}class Pf{constructor(t,e,n,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function yee(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new El),this.context||(this.context=new bee),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=e;else{const a=e.indexOf("?");this.urlWithParams=e+(-1===a?"?":a<e.length-1?"&":"")+o}}else this.params=new Al,this.urlWithParams=e}serializeBody(){return null===this.body?null:IL(this.body)||RL(this.body)||PL(this.body)||function xee(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Al?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||PL(this.body)?null:RL(this.body)?this.body.type||null:IL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Al?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const d=t.context??this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((u,h)=>u.set(h,t.setHeaders[h]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((u,h)=>u.set(h,t.setParams[h]),c)),new Pf(e,n,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var Mr=(()=>((Mr=Mr||{})[Mr.Sent=0]="Sent",Mr[Mr.UploadProgress=1]="UploadProgress",Mr[Mr.ResponseHeader=2]="ResponseHeader",Mr[Mr.DownloadProgress=3]="DownloadProgress",Mr[Mr.Response=4]="Response",Mr[Mr.User=5]="User",Mr))();class wee{constructor(t,e=200,n="OK"){this.headers=t.headers||new El,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class uC extends wee{constructor(t={}){super(t),this.type=Mr.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new uC({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}function hC(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let pC=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let s;if(e instanceof Pf)s=e;else{let l,c;l=r.headers instanceof El?r.headers:new El(r.headers),r.params&&(c=r.params instanceof Al?r.params:new Al({fromObject:r.params})),s=new Pf(e,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=dt(s).pipe(ml(l=>this.handler.handle(l)));if(e instanceof Pf||"events"===r.observe)return o;const a=o.pipe(Qt(l=>l instanceof uC));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(rt(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(rt(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(rt(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(rt(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:(new Al).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,hC(r,n))}post(e,n,r={}){return this.request("POST",e,hC(r,n))}put(e,n,r={}){return this.request("PUT",e,hC(r,n))}}return i.\u0275fac=function(e){return new(e||i)(K(dC))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();const Fee=["*"];let lv;function Of(i){return function Lee(){if(void 0===lv&&(lv=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(lv=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return lv}()?.createHTML(i)||i}function zL(i){return Error(`Unable to find icon with the name "${i}"`)}function HL(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function $L(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Tc{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let cv=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new Tc(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){const o=this._sanitizer.sanitize(zn.HTML,r);if(!o)throw $L(r);const a=Of(o);return this._addSvgIconConfig(e,n,new Tc("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Tc(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){const s=this._sanitizer.sanitize(zn.HTML,n);if(!s)throw $L(n);const o=Of(s);return this._addSvgIconSetConfig(e,new Tc("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const n=this._sanitizer.sanitize(zn.RESOURCE_URL,e);if(!n)throw HL(e);const r=this._cachedIconsByUrl.get(n);return r?dt(dv(r)):this._loadSvgIconFromConfig(new Tc(e,null)).pipe(pi(s=>this._cachedIconsByUrl.set(n,s)),rt(s=>dv(s)))}getNamedSvgIcon(e,n=""){const r=GL(n,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):fu(zL(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?dt(dv(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(rt(n=>dv(n)))}_getSvgFromIconSetConfigs(e,n){const r=this._extractIconWithNameFromAnySet(e,n);return r?dt(r):J2(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Fa(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(zn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),dt(null)})))).pipe(rt(()=>{const o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw zL(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(pi(n=>e.svgText=n),rt(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?dt(null):this._fetchIcon(e).pipe(pi(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){const s=e.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Of("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){const n=this._document.createElement("DIV");n.innerHTML=e;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const n=this._svgElementFromString(Of("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){const{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw function Nee(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(zn.RESOURCE_URL,n);if(!o)throw HL(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(rt(c=>Of(c)),gl(()=>this._inProgressUrlFetches.delete(o)),Cy());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(GL(e,n),r),this}_addSvgIconSetConfig(e,n){const r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){const n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,e);if(s)return Uee(s)?new Tc(s.url,null,s.options):new Tc(s,null)}}}return i.\u0275fac=function(e){return new(e||i)(K(pC,8),K(ww),K(Lt,8),K(Da))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function dv(i){return i.cloneNode(!0)}function GL(i,t){return i+":"+t}function Uee(i){return!(!i.url||!i.options)}const Vee=wc(class{constructor(i){this._elementRef=i}}),zee=new ue("MAT_ICON_DEFAULT_OPTIONS"),Hee=new ue("mat-icon-location",{providedIn:"root",factory:function $ee(){const i=$t(Lt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),jL=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Gee=jL.map(i=>`[${i}]`).join(", "),jee=/^url\(['"]?#(.*?)['"]?\)$/;let $u=(()=>{class i extends Vee{get inline(){return this._inline}set inline(e){this._inline=kt(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,s,o,a){super(e),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=J.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];const n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=e.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){const n=e.querySelectorAll(Gee),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)jL.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(jee):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(oi(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(cv),qo("aria-hidden"),x(Hee),x(Da),x(zee,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(e,n){2&e&&(xt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet)("fontIcon",n._usingFontIcon()?n.fontIcon:null),Ut("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Je],ngContentSelectors:Fee,decls:1,vars:0,template:function(e,n){1&e&&(Ai(),Ft(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),Ff=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Cn]}),i})();const Wee=["determinateSpinner"];function Yee(i,t){if(1&i&&(Yr(),S(0,"svg",11),pe(1,"circle",12),A()),2&i){const e=$();xt("viewBox",e._viewBox()),k(1),Xr("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),xt("r",e._circleRadius())}}const Xee=wc(class{constructor(i){this._elementRef=i}},"primary"),qee=new ue("mat-progress-spinner-default-options",{providedIn:"root",factory:function Kee(){return{diameter:WL}}}),WL=100;let kc=(()=>{class i extends Xee{constructor(e,n,r){super(e),this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",this._value=0,this._diameter=WL,this._noopAnimations="NoopAnimations"===n&&!!r&&!r._forceAnimations,r&&(r.color&&(this.color=this.defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,dr(e)))}get diameter(){return this._diameter}set diameter(e){this._diameter=dr(e)}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=dr(e)}_circleRadius(){return(this.diameter-10)/2}_viewBox(){const e=2*this._circleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(Fi,8),x(qee))},i.\u0275cmp=Xe({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(e,n){if(1&e&&pn(Wee,5),2&e){let r;ft(r=mt())&&(n._determinateCircle=r.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:12,hostBindings:function(e,n){2&e&&(xt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===n.mode?n.value:null)("mode",n.mode),Xr("width",n.diameter,"px")("height",n.diameter,"px"),Ut("_mat-animation-noopable",n._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===n.mode))},inputs:{color:"color",mode:"mode",value:"value",diameter:"diameter",strokeWidth:"strokeWidth"},exportAs:["matProgressSpinner"],features:[Je],decls:14,vars:11,consts:[["circle",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["determinateSpinner",""],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(e,n){if(1&e&&(Z(0,Yee,2,8,"ng-template",null,0,so),S(2,"div",1,2),Yr(),S(4,"svg",3),pe(5,"circle",4),A()(),dl(),S(6,"div",5)(7,"div",6)(8,"div",7),ac(9,8),A(),S(10,"div",9),ac(11,8),A(),S(12,"div",10),ac(13,8),A()()()),2&e){const r=Hn(1);k(4),xt("viewBox",n._viewBox()),k(1),Xr("stroke-dasharray",n._strokeCircumference(),"px")("stroke-dashoffset",n._strokeDashOffset(),"px")("stroke-width",n._circleStrokeWidth(),"%"),xt("r",n._circleRadius()),k(4),T("ngTemplateOutlet",r),k(2),T("ngTemplateOutlet",r),k(2),T("ngTemplateOutlet",r)}},dependencies:[hu],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, transparent)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),YL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[nr,Cn]}),i})(),bs=(()=>{class i{ngZone;openedResource$=new Be(null);openedResourcePath$=new Be(null);conversionProgress$=new Be([0,0]);constructor(e){this.ngZone=e,eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.expose(this.wrapHandler(this.updateConversionProgress),"update_conversion_progress"),eel.on_angular_ready(),setTimeout(Se(function*(){for(;;){if(eel._websocket){eel._websocket.onclose=()=>window.close();break}yield new Promise(n=>setTimeout(n,0))}}),0)}wrapHandler(e){return(...n)=>{try{lt.assertInAngularZone(),e.bind(this)(...n)}catch{this.ngZone.run(e,this,n)}}}openFile(e){var n=this;return Se(function*(r,s=!1){n.openedResource$.next(null),n.openedResourcePath$.next(r);const o=yield eel.open_file(r,s)();n.openedResource$.next({...o,id:o.name})}).apply(this,arguments)}updateConversionProgress(e,n){this.conversionProgress$.next([e,n])}openFileDialog(){return Se(function*(){return yield eel.open_file_dialog()()})()}openFileWithSystemApp(e){return Se(function*(){yield eel.open_file_with_system_app(e)()})()}retrieveValue(e){return Se(function*(){return yield eel.retrieve_value(e)()})()}runCustomAction(e,n,r){return Se(function*(){return eel.run_custom_action(e,n,r)()})()}saveFile(e){var n=this;return Se(function*(){const r=n.openedResource$.getValue();if(!r)return;const s=yield eel.save_file(n.openedResourcePath$.getValue(),e)();n.openedResource$.next({id:r.id,name:r.name,schema:r.schema,data:s})})()}serializeResource(e){return Se(function*(n,r={}){return eel.serialize_resource(n,r)()}).apply(this,arguments)}serializeResourceTmp(e,n){return Se(function*(r,s,o={}){return eel.serialize_resource_tmp(r,s,o)()}).apply(this,arguments)}serializeReversible(e,n){return Se(function*(){return eel.serialize_reversible(e,n)()})()}deserializeResource(e){return Se(function*(){return eel.deserialize_resource(e)()})()}selectDirectoryDialog(){return Se(function*(){return yield eel.select_directory_dialog()()})()}getGeneralConfig(){return Se(function*(){return yield eel.get_general_config()()})()}getConversionConfig(){return Se(function*(){return yield eel.get_conversion_config()()})()}patchGeneralConfig(e){return Se(function*(){return yield eel.patch_general_config(e)()})()}patchConversionConfig(e){return Se(function*(){return yield eel.patch_conversion_config(e)()})()}testExecutable(e){return Se(function*(){return yield eel.test_executable(e)()})()}convertFiles(e,n,r){return Se(function*(){return yield eel.convert_files(e,n,r)()})()}startFile(e){return Se(function*(){return yield eel.start_file(e)()})()}closeFile(){var e=this;return Se(function*(){const n=yield eel.close_file()();return n.success&&(e.openedResource$.next(null),e.openedResourcePath$.next(null)),n})()}static \u0275fac=function(n){return new(n||i)(K(lt))};static \u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Qee(i,t){if(1&i){const e=en();S(0,"div",2)(1,"button",3),de("click",function(){return nt(e),it($().action())}),H(2),A()()}if(2&i){const e=$();k(2),hi(" ",e.data.action," ")}}const Jee=["label"];function ete(i,t){}const tte=Math.pow(2,31)-1;class mC{constructor(t,e){this._overlayRef=e,this._afterDismissed=new De,this._afterOpened=new De,this._onAction=new De,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,tte))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}const XL=new ue("MatSnackBarData");class uv{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}let nte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"]}),i})(),ite=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"]}),i})(),rte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"]}),i})(),ste=(()=>{class i{constructor(e,n){this.snackBarRef=e,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(e){return new(e||i)(x(mC),x(XL))},i.\u0275cmp=Xe({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions","",4,"ngIf"],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(e,n){1&e&&(S(0,"div",0),H(1),A(),Z(2,Qee,3,1,"div",1)),2&e&&(k(1),hi(" ",n.data.message,"\n"),k(1),T("ngIf",n.hasAction))},dependencies:[On,Oo,nte,ite,rte],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0}),i})();const ote={snackBarState:uo("state",[Nr("void, hidden",Bn({transform:"scale(0.8)",opacity:0})),Nr("visible",Bn({transform:"scale(1)",opacity:1})),ir("* => visible",ur("150ms cubic-bezier(0, 0, 0.2, 1)")),ir("* => void, * => hidden",ur("75ms cubic-bezier(0.4, 0.0, 1, 1)",Bn({opacity:0})))])};let ate=0,lte=(()=>{class i extends O_{constructor(e,n,r,s,o){super(),this._ngZone=e,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._document=$t(Lt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new De,this._onExit=new De,this._onEnter=new De,this._animationState="void",this._liveElementId="mat-snack-bar-container-live-"+ate++,this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}onAnimationEnd(e){const{fromState:n,toState:r}=e;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(oi(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>e.classList.add(r)):e.classList.add(n)),this._exposeToModals()}_exposeToModals(){const e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){const s=n[r],o=s.getAttribute("aria-owns");this._trackedModals.add(s),o?-1===o.indexOf(e)&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{const n=e.getAttribute("aria-owns");if(n){const r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),n.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(e){return new(e||i)(x(lt),x(ht),x(yn),x(fi),x(uv))},i.\u0275dir=ge({type:i,viewQuery:function(e,n){if(1&e&&pn(Au,7),2&e){let r;ft(r=mt())&&(n._portalOutlet=r.first)}},features:[Je]}),i})(),cte=(()=>{class i extends lte{_afterPortalAttached(){super._afterPortalAttached();const e=this._label.nativeElement,n="mdc-snackbar__label";e.classList.toggle(n,!e.querySelector(`.${n}`))}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275cmp=Xe({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(e,n){if(1&e&&pn(Jee,7),2&e){let r;ft(r=mt())&&(n._label=r.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(e,n){1&e&&ax("@state.done",function(s){return n.onAnimationEnd(s)}),2&e&&Dg("@state",n._animationState)},features:[Je],decls:6,vars:3,consts:[[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["label",""],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,n){1&e&&(S(0,"div",0)(1,"div",1,2)(3,"div",3),Z(4,ete,0,0,"ng-template",4),A(),pe(5,"div"),A()()),2&e&&(k(5),xt("aria-live",n._live)("role",n._role)("id",n._liveElementId))},dependencies:[Au],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__dismiss svg,.mat-mdc-snack-bar-container .mdc-snackbar__dismiss img{width:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px));height:var(--mdc-icon-button-icon-size, var(--mdc-snackbar-icon-size, 24px))}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color, inherit)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size, inherit);font-family:var(--mdc-snackbar-supporting-text-font, inherit);font-weight:var(--mdc-snackbar-supporting-text-weight, inherit);line-height:var(--mdc-snackbar-supporting-text-line-height, inherit)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-mdc-snack-bar-button-color, transparent);--mat-mdc-button-persistent-ripple-color: currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{background-color:currentColor;opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[ote.snackBarState]}}),i})(),qL=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Pu,yc,nr,Ml,Cn,Cn]}),i})();const KL=new ue("mat-snack-bar-default-options",{providedIn:"root",factory:function dte(){return new uv}});let ute=(()=>{class i{get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,n,r,s,o,a){this._overlay=e,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){const s={...this._defaultConfig,...r};return s.data={message:e,action:n},s.announcementMessage===e&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){const s=Oi.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:uv,useValue:n}]}),o=new bc(this.snackBarContainerComponent,n.viewContainerRef,s),a=e.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(e,n){const r={...new uv,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new mC(o,s);if(e instanceof ps){const l=new Eu(e,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new bc(e,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(ke(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration))}_createOverlay(e){const n=new Ru;n.direction=e.direction;let r=this._overlay.position().global();const s="rtl"===e.direction,o="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!s||"end"===e.horizontalPosition&&s,a=!o&&"center"!==e.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===e.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){return Oi.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:mC,useValue:n},{provide:XL,useValue:e.data}]})}}return i.\u0275fac=function(e){return new(e||i)(K(yr),K(bM),K(Oi),K(pM),K(i,12),K(KL))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),hv=(()=>{class i extends ute{constructor(e,n,r,s,o,a){super(e,n,r,s,o,a),this.simpleSnackBarComponent=ste,this.snackBarContainerComponent=cte,this.handsetCssClass="mat-mdc-snack-bar-handset"}}return i.\u0275fac=function(e){return new(e||i)(K(yr),K(bM),K(Oi),K(pM),K(i,12),K(KL))},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:qL}),i})();function hte(i,t){1&i&&(S(0,"mat-icon"),H(1,"check_circle"),A())}function pte(i,t){1&i&&pe(0,"mat-spinner",16)}const ZL=function(i,t){return{success:i,error:t}};function fte(i,t){if(1&i&&(S(0,"div",17)(1,"mat-icon"),H(2),A(),S(3,"span"),H(4),A()()),2&i){const e=$();T("ngClass",wx(3,ZL,e.blenderTestResult.success,!e.blenderTestResult.success)),k(2),bn(e.blenderTestResult.success?"check_circle":"error"),k(2),bn(e.blenderTestResult.message)}}function mte(i,t){1&i&&(S(0,"mat-icon"),H(1,"check_circle"),A())}function gte(i,t){1&i&&pe(0,"mat-spinner",16)}function _te(i,t){if(1&i&&(S(0,"div",17)(1,"mat-icon"),H(2),A(),S(3,"span"),H(4),A()()),2&i){const e=$();T("ngClass",wx(3,ZL,e.ffmpegTestResult.success,!e.ffmpegTestResult.success)),k(2),bn(e.ffmpegTestResult.success?"check_circle":"error"),k(2),bn(e.ffmpegTestResult.message)}}let gC=(()=>{class i{formBuilder;dialogRef;eelDelegate;snackBar;configForm;testingBlender=!1;testingFFmpeg=!1;blenderTestResult=null;ffmpegTestResult=null;constructor(e,n,r,s){this.formBuilder=e,this.dialogRef=n,this.eelDelegate=r,this.snackBar=s,this.configForm=this.formBuilder.group({blender_executable:[""],ffmpeg_executable:[""],print_errors:[!1],print_blender_log:[!1]})}ngOnInit(){var e=this;return Se(function*(){const n=yield e.eelDelegate.getGeneralConfig();e.configForm.patchValue(n)})()}testBlenderPath(){var e=this;return Se(function*(){e.testingBlender=!0,e.blenderTestResult=null;try{e.blenderTestResult=yield e.eelDelegate.testExecutable(e.configForm.get("blender_executable")?.value)}catch{e.blenderTestResult={success:!1,message:"Error testing Blender path"}}finally{e.testingBlender=!1}})()}testFFmpegPath(){var e=this;return Se(function*(){e.testingFFmpeg=!0,e.ffmpegTestResult=null;try{e.ffmpegTestResult=yield e.eelDelegate.testExecutable(e.configForm.get("ffmpeg_executable")?.value)}catch{e.ffmpegTestResult={success:!1,message:"Error testing FFmpeg path"}}finally{e.testingFFmpeg=!1}})()}saveConfig(){var e=this;return Se(function*(){try{yield e.eelDelegate.patchGeneralConfig(e.configForm.value),e.snackBar.open("Configuration saved successfully","OK",{duration:3e3}),e.dialogRef.close()}catch{e.snackBar.open("Error saving configuration","OK",{duration:3e3})}})()}cancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||i)(x(tC),x(Mc),x(bs),x(hv))};static \u0275cmp=Xe({type:i,selectors:[["app-config"]],standalone:!0,features:[ru],decls:43,vars:9,consts:[["mat-dialog-title",""],[3,"formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","blender_executable","placeholder","Path to Blender executable"],["mat-raised-button","","color","primary",3,"disabled","click"],[4,"ngIf"],["diameter","20",4,"ngIf"],["class","test-result",3,"ngClass",4,"ngIf"],["matInput","","formControlName","ffmpeg_executable","placeholder","Path to FFmpeg executable"],[1,"form-row","checkbox-row"],["formControlName","print_errors"],["formControlName","print_blender_log"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["diameter","20"],[1,"test-result",3,"ngClass"]],template:function(n,r){1&n&&(S(0,"h2",0),H(1,"System Configuration"),A(),S(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),H(7,"Blender Executable Path"),A(),pe(8,"input",4),S(9,"mat-hint"),H(10,"Working terminal command or path to executable"),A()(),S(11,"button",5),de("click",function(){return r.testBlenderPath()}),Z(12,hte,2,0,"mat-icon",6),Z(13,pte,1,0,"mat-spinner",7),H(14," Test "),A()(),Z(15,fte,5,6,"div",8),S(16,"div",2)(17,"mat-form-field",3)(18,"mat-label"),H(19,"FFmpeg Executable Path"),A(),pe(20,"input",9),S(21,"mat-hint"),H(22,"Working terminal command or path to executable"),A()(),S(23,"button",5),de("click",function(){return r.testFFmpegPath()}),Z(24,mte,2,0,"mat-icon",6),Z(25,gte,1,0,"mat-spinner",7),H(26," Test "),A()(),Z(27,_te,5,6,"div",8),S(28,"div",10)(29,"mat-checkbox",11),H(30,"Print Errors"),A(),S(31,"mat-hint"),H(32,"Show detailed error messages in the console"),A()(),S(33,"div",10)(34,"mat-checkbox",12),H(35,"Print Blender Log"),A(),S(36,"mat-hint"),H(37,"Show Blender log output in the console"),A()()()(),S(38,"mat-dialog-actions",13)(39,"button",14),de("click",function(){return r.cancel()}),H(40,"Cancel"),A(),S(41,"button",15),de("click",function(){return r.saveConfig()}),H(42,"Save"),A()()),2&n&&(k(3),T("formGroup",r.configForm),k(8),T("disabled",r.testingBlender),k(1),T("ngIf",!r.testingBlender),k(1),T("ngIf",r.testingBlender),k(2),T("ngIf",r.blenderTestResult),k(8),T("disabled",r.testingFFmpeg),k(1),T("ngIf",!r.testingFFmpeg),k(1),T("ngIf",r.testingFFmpeg),k(2),T("ngIf",r.ffmpegTestResult))},dependencies:[nr,pc,On,kf,Tf,_s,Hs,wf,za,Vu,Ml,Oo,Dc,vs,xr,nC,If,$s,mL,sC,Ff,$u,YL,kc,xf,kM,IM,RM],styles:[".form-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;margin-bottom:24px;gap:16px}.full-width[_ngcontent-%COMP%]{flex:1}mat-form-field[_ngcontent-%COMP%]{margin-bottom:8px}.checkbox-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;margin-bottom:20px;gap:0}.checkbox-row[_ngcontent-%COMP%]   mat-hint[_ngcontent-%COMP%]{margin-left:44px}.test-result[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:24px;padding:12px;border-radius:4px}.test-result.success[_ngcontent-%COMP%]{background-color:#4caf501a;color:#4caf50}.test-result.error[_ngcontent-%COMP%]{background-color:#f443361a;color:#f44336}.test-result[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}mat-dialog-content[_ngcontent-%COMP%]{min-width:500px;max-width:800px;padding:20px 24px 0!important;max-height:65vh;overflow-y:auto}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px;margin-bottom:0;position:sticky;bottom:0;background-color:#fff;z-index:1;border-top:1px solid rgba(0,0,0,.12)}mat-hint[_ngcontent-%COMP%]{font-size:12px;color:#0009;margin-top:8px;margin-bottom:8px;display:block;line-height:1.4;min-height:1.4em}h2[mat-dialog-title][_ngcontent-%COMP%]{padding:16px 24px;background-color:#f5f5f5;border-bottom:1px solid rgba(0,0,0,.12)}h2[mat-dialog-title][_ngcontent-%COMP%]:before{height:unset}button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{float:left;margin-right:8px;margin-left:-6px;margin-top:2px}"]})}return i})();function vte(i,t){1&i&&(S(0,"mat-error"),H(1," Input path is required "),A())}function bte(i,t){1&i&&(S(0,"mat-error"),H(1," Output path is required "),A())}function yte(i,t){if(1&i){const e=en();S(0,"div",29)(1,"mat-icon",30),H(2,"warning"),A(),S(3,"span"),H(4,"Blender executable path is not working. Some features are disabled."),A(),S(5,"button",31),de("click",function(){return nt(e),it($(2).openConfigDialog())}),H(6,"Fix"),A()()}if(2&i){const e=$(2);k(5),T("disabled",e.isConverting)}}function xte(i,t){1&i&&(S(0,"mat-icon",32),H(1,"warning"),A())}function wte(i,t){1&i&&(S(0,"mat-icon",32),H(1,"warning"),A())}function Mte(i,t){if(1&i&&(S(0,"div")(1,"h3"),H(2,"General Settings"),A(),S(3,"div",15)(4,"mat-form-field",16)(5,"mat-label"),H(6,"Multiprocess Count"),A(),pe(7,"input",17),A()(),pe(8,"mat-divider"),S(9,"h3"),H(10,"Images Settings"),A(),S(11,"div",15)(12,"mat-checkbox",18),H(13," Save Images Only "),A()(),pe(14,"mat-divider"),S(15,"h3"),H(16,"Maps Settings"),A(),S(17,"div",15)(18,"mat-checkbox",19),H(19," Save As Chunked "),A(),S(20,"mat-checkbox",20),H(21," Save Invisible Wall Collisions "),A(),S(22,"mat-checkbox",21),H(23," Save Terrain Collisions "),A(),S(24,"mat-checkbox",22),H(25," Save Spherical Skybox Texture "),A(),S(26,"mat-checkbox",23),H(27," Add Props To Obj "),A()(),pe(28,"mat-divider"),S(29,"h3"),H(30,"Geometry Settings"),A(),Z(31,yte,7,1,"div",24),S(32,"div",15)(33,"mat-checkbox",25),H(34," Save OBJ "),A(),S(35,"mat-checkbox",26),H(36," Save Blend "),Z(37,xte,2,0,"mat-icon",27),A(),S(38,"mat-checkbox",28),H(39," Export To GG Web Engine "),Z(40,wte,2,0,"mat-icon",27),A()()()),2&i){const e=$();k(31),T("ngIf",!e.isBlenderWorking&&!e.isTestingBlender),k(4),T("matTooltip",e.isBlenderWorking?"Save Blender scene for each 3D scene":"Requires working Blender executable"),k(2),T("ngIf",!e.isBlenderWorking),k(1),T("matTooltip",e.isBlenderWorking?"Export to gg-web-engine format":"Requires working Blender executable"),k(2),T("ngIf",!e.isBlenderWorking)}}function Cte(i,t){1&i&&(S(0,"div",33),H(1," Loading configuration settings... "),A())}function Ste(i,t){if(1&i&&(S(0,"div",34),pe(1,"mat-progress-bar",35),Oe(2,"async"),Oe(3,"async"),Oe(4,"async"),S(5,"div",36),H(6),Oe(7,"async"),Oe(8,"async"),A()()),2&i){const e=$();k(1),T("value",Ne(2,3,e.eelDelegate.conversionProgress$)[1]>0?Ne(3,5,e.eelDelegate.conversionProgress$)[0]/Ne(4,7,e.eelDelegate.conversionProgress$)[1]*100:0),k(5),cc(" ",Ne(7,9,e.eelDelegate.conversionProgress$)[0]," / ",Ne(8,11,e.eelDelegate.conversionProgress$)[1]," files processed ")}}let QL=(()=>{class i{fb;eelDelegate;snackBar;cdr;dialog;dialogRef;converterForm;isConverting=!1;outputPath="";configLoaded=!1;blenderExecutablePath="";isBlenderWorking=!1;isTestingBlender=!1;constructor(e,n,r,s,o,a){this.fb=e,this.eelDelegate=n,this.snackBar=r,this.cdr=s,this.dialog=o,this.dialogRef=a,this.converterForm=this.fb.group({input_path:["",zs.required],output_path:["",zs.required],multiprocess_processes_count:[0],images__save_images_only:[!1],maps__save_as_chunked:[!1],maps__save_invisible_wall_collisions:[!1],maps__save_terrain_collisions:[!1],maps__save_spherical_skybox_texture:[!0],maps__add_props_to_obj:[!0],geometry__save_obj:[!0],geometry__save_blend:[!0],geometry__export_to_gg_web_engine:[!1]})}ngOnInit(){var e=this;return Se(function*(){yield e.loadConfig(),yield e.testBlenderExecutable()})()}testBlenderExecutable(){var e=this;return Se(function*(){e.isTestingBlender=!0,e.cdr.markForCheck();try{const n=yield e.eelDelegate.testExecutable(e.blenderExecutablePath);if(e.isBlenderWorking=n.success,!e.isBlenderWorking){const r=e.converterForm.get("geometry");r&&(r.get("save_blend")?.disable(),r.get("export_to_gg_web_engine")?.disable())}}catch(n){e.isBlenderWorking=!1,console.error("Error testing Blender executable:",n)}finally{e.isTestingBlender=!1,e.cdr.markForCheck()}})()}openConfigDialog(){var e=this;W_(this.dialog.open(gC,{width:"600px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!0}).afterClosed()).then(Se(function*(){yield e.loadConfig(),yield e.testBlenderExecutable()}))}loadConfig(){var e=this;return Se(function*(){try{const n=yield e.eelDelegate.getGeneralConfig(),r=yield e.eelDelegate.getConversionConfig();e.blenderExecutablePath=n.blender_executable,e.converterForm.patchValue(r),e.configLoaded=!0,e.cdr.markForCheck()}catch(n){console.error("Failed to load config:",n),e.snackBar.open("Failed to load configuration settings","OK",{duration:5e3})}})()}selectInputDirectory(){var e=this;return Se(function*(){const n=yield e.eelDelegate.selectDirectoryDialog();n&&(e.converterForm.get("input_path")?.setValue(n),e.cdr.markForCheck())})()}selectOutputDirectory(){var e=this;return Se(function*(){const n=yield e.eelDelegate.selectDirectoryDialog();n&&(e.converterForm.get("output_path")?.setValue(n),e.cdr.markForCheck())})()}openOutputDirectory(){var e=this;return Se(function*(){if(e.outputPath){const n=yield e.eelDelegate.startFile(e.outputPath);n.success||e.snackBar.open(`Failed to open directory: ${n.error}`,"OK",{duration:5e3})}})()}convertFiles(){var e=this;return Se(function*(){if(e.converterForm.invalid)return;let n=yield e.eelDelegate.patchConversionConfig(e.converterForm.value);e.isConverting=!0,e.converterForm.disable(),e.eelDelegate.conversionProgress$.next([0,0]),e.cdr.markForCheck();try{const r=yield e.eelDelegate.convertFiles(n.input_path,n.output_path,e.converterForm.value);r.success?(e.outputPath=n.output_path,e.snackBar.open("Conversion completed successfully!","Open Directory",{duration:5e3}).onAction().subscribe(()=>{e.openOutputDirectory()}),e.openOutputDirectory().then()):e.snackBar.open(`Conversion failed: ${r.error}`,"OK",{duration:5e3})}catch(r){e.snackBar.open(`An error occurred: ${r}`,"OK",{duration:5e3})}finally{e.isConverting=!1,e.converterForm.enable(),e.cdr.markForCheck()}})()}cancel(){this.dialogRef.close()}static \u0275fac=function(n){return new(n||i)(x(tC),x(bs),x(hv),x(yn),x(Cc),x(Mc))};static \u0275cmp=Xe({type:i,selectors:[["app-converter"]],standalone:!0,features:[ru],decls:43,vars:10,consts:[[1,"converter-container"],[3,"formGroup","ngSubmit"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","input_path","placeholder","Select input directory or file"],[4,"ngIf"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"],["matInput","","formControlName","output_path","placeholder","Select output directory"],[1,"settings-panel"],["class","loading-config",4,"ngIf"],[1,"actions"],["mat-button","","type","button",3,"disabled","click"],["type","submit","mat-raised-button","","color","accent",3,"disabled"],["class","progress-container",4,"ngIf"],[1,"info-section"],[1,"settings-group"],["appearance","outline"],["matInput","","type","number","formControlName","multiprocess_processes_count","matTooltip","Number of processes to use (0 = use all CPU cores)"],["formControlName","images__save_images_only","matTooltip","Skip saving palette and image positions"],["formControlName","maps__save_as_chunked","matTooltip","Save each terrain mesh chunk as separate file"],["formControlName","maps__save_invisible_wall_collisions","matTooltip","Place boxes with collision where invisible wall is located"],["formControlName","maps__save_terrain_collisions","matTooltip","Save terrain collisions"],["formControlName","maps__save_spherical_skybox_texture","matTooltip","Save spherical skybox texture"],["formControlName","maps__add_props_to_obj","matTooltip","Bake map props to the scene"],["class","blender-warning",4,"ngIf"],["formControlName","geometry__save_obj","matTooltip","Save OBJ file for each 3D scene"],["formControlName","geometry__save_blend",3,"matTooltip"],["color","warn","class","inline-icon",4,"ngIf"],["formControlName","geometry__export_to_gg_web_engine",3,"matTooltip"],[1,"blender-warning"],["color","warn"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["color","warn",1,"inline-icon"],[1,"loading-config"],[1,"progress-container"],["mode","determinate",1,"progress-bar",3,"value"],[1,"progress-text"]],template:function(n,r){if(1&n&&(S(0,"div",0)(1,"h1"),H(2,"Converter to Common Formats"),A(),S(3,"form",1),de("ngSubmit",function(){return r.convertFiles()}),S(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),H(7,"Input Directory/File"),A(),pe(8,"input",4),Z(9,vte,2,0,"mat-error",5),A(),S(10,"button",6),de("click",function(){return r.selectInputDirectory()}),H(11," Browse "),A()(),S(12,"div",2)(13,"mat-form-field",3)(14,"mat-label"),H(15,"Output Directory"),A(),pe(16,"input",7),Z(17,bte,2,0,"mat-error",5),A(),S(18,"button",6),de("click",function(){return r.selectOutputDirectory()}),H(19," Browse "),A()(),S(20,"mat-expansion-panel",8)(21,"mat-expansion-panel-header")(22,"mat-panel-title"),H(23," Conversion Settings "),A(),S(24,"mat-panel-description"),H(25," Customize conversion settings "),A()(),Z(26,Mte,41,5,"div",5),Z(27,Cte,2,0,"div",9),A(),S(28,"div",10)(29,"button",11),de("click",function(){return r.cancel()}),H(30,"Cancel"),A(),S(31,"button",12),H(32," Convert Files "),A()(),Z(33,Ste,9,13,"div",13),A(),S(34,"div",14)(35,"h2"),H(36,"About Conversion"),A(),S(37,"p"),H(38,' This tool allows you to convert NFS resource files to common formats. Select an input directory or file and an output directory, then click "Convert Files" to start the conversion process. '),A(),S(39,"p"),H(40," The converter will process all files in the input directory (including subdirectories) and save the converted files to the output directory. "),A(),S(41,"p"),H(42,' You can customize conversion settings by expanding the "Conversion Settings" panel. '),A()()()),2&n){let s,o;k(3),T("formGroup",r.converterForm),k(6),T("ngIf",null==(s=r.converterForm.get("input_path"))?null:s.hasError("required")),k(1),T("disabled",r.isConverting),k(7),T("ngIf",null==(o=r.converterForm.get("output_path"))?null:o.hasError("required")),k(1),T("disabled",r.isConverting),k(8),T("ngIf",r.configLoaded),k(1),T("ngIf",!r.configLoaded),k(2),T("disabled",r.isConverting),k(2),T("disabled",r.converterForm.invalid||r.isConverting),k(2),T("ngIf",r.isConverting)}},dependencies:[nr,On,Fr,kf,Tf,_s,la,Hs,wf,za,Vu,Ml,Oo,Dc,vs,xr,JF,If,$s,uL,TJ,mL,sC,SL,lC,wL,CL,ML,Rf,cC,sv,wr,Ff,$u,xf],styles:[".converter-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px}h1[_ngcontent-%COMP%]{margin-bottom:20px;color:#3f51b5}.form-row[_ngcontent-%COMP%]{display:flex;align-items:baseline;margin-bottom:20px;gap:10px}.full-width[_ngcontent-%COMP%]{flex:1}.actions[_ngcontent-%COMP%]{margin-top:30px;display:flex;justify-content:flex-end;gap:10px}.progress-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:10px}.progress-bar[_ngcontent-%COMP%]{margin-bottom:5px}.progress-text[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:#0009}.settings-panel[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:20px}.settings-group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px;margin-bottom:16px;align-items:center}.settings-group[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{min-width:200px}.settings-group[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:16px}.loading-config[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#0009}.blender-warning[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:#f443361a;padding:12px;border-radius:4px;margin-bottom:16px}.blender-warning[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.blender-warning[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;margin-right:16px}.inline-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px;vertical-align:middle;margin-left:4px}.info-section[_ngcontent-%COMP%]{margin-top:40px;padding:20px;background-color:#f5f5f5;border-radius:4px}h2[_ngcontent-%COMP%]{margin-bottom:15px;color:#3f51b5}p[_ngcontent-%COMP%]{margin-bottom:10px;line-height:1.5}"],changeDetection:0})}return i})();var Ete=O(4509),Ate=O.n(Ete),Dte=O(9138),Tte=O.n(Dte);const JL=i=>!(!i||"object"!=typeof i),eN=(i={},t,e,n=[])=>{const r=[];if(JL(i)){const s=Object.entries(i);for(let o=0;o<s.length;o+=1){const[a,l]=s[o];if(a===t&&l===e)r.push([i,n]);else if(JL(l)){const c=eN(l,t,e,[...n,a]);r.push(...c)}}}return r};let Jr=(()=>{class i{eelDelegate;_hasUnsavedChanges$=new Be(!1);resource$=new Be(null);error$=new Be(null);customActionRunning$=new Be(!1);changedDataBlocks={};dataBlockChange$=new De;hideHiddenFields$=new Be(!0);constructor(e){var n=this;this.eelDelegate=e,this.eelDelegate.openedResource$.subscribe(r=>{if(this.clearUnsavedChanges(),r?.data.error_class)this.error$.next(r),this.resource$.next(null);else if(r?.schema){const s=eN(r.schema,"is_recursive_ref",!0);for(const[o,a]of s){const l=o.block_class_mro;let c=r.schema,d=c.block_class_mro===l?c:void 0;for(const u of a.slice(0,a.length-1))!d&&c[u]?.block_class_mro===l&&(d=c[u]),c=c[u];c[a[a.length-1]]=d}this.resource$.next(r),this.error$.next(null)}else this.resource$.next(null),this.error$.next(null)}),this.dataBlockChange$.subscribe(function(){var r=Se(function*([s,o]){n.changedDataBlocks[s]=o,n.updateUnsavedChanges();const a=yield n.eelDelegate.retrieveValue(s);n.changedDataBlocks[s]==o&&(Tte()(o)?Math.abs(o-a)<1e-10:Ate()(o,a))&&(delete n.changedDataBlocks[s],n.updateUnsavedChanges())});return function(s){return r.apply(this,arguments)}}())}updateUnsavedChanges(){this._hasUnsavedChanges$.next(Object.keys(this.changedDataBlocks).length>0)}get hasUnsavedChanges$(){return this._hasUnsavedChanges$.asObservable()}get hasUnsavedChanges(){return this._hasUnsavedChanges$.getValue()}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(e=>{delete this.changedDataBlocks[e]}),this.updateUnsavedChanges()}processExternalChanges(e,n){var r=this;return Se(function*(){r.customActionRunning$.next(!0);const s=yield n();if(s.error_class)throw r.customActionRunning$.next(!1),s;if(r.resource$.getValue().id===e)r.resource$.getValue().data=s;else{let o=e.substring(r.resource$.getValue().id.length).replace("__","/").split("/").filter(c=>c),a=r.resource$.getValue().data;for(const c of o.slice(0,o.length-1))a=a[c]||a[+c];let l=o[o.length-1];void 0===a[l]&&void 0!==a[+l]&&(l=+l),a[l]=s}r.clearUnsavedChanges(),r.changedDataBlocks.__has_external_changes__=1,r.updateUnsavedChanges(),r.customActionRunning$.next(!1)})()}runCustomAction(e,n,r){var s=this;return Se(function*(){return s.processExternalChanges(e,()=>s.eelDelegate.runCustomAction(e,n,r))})()}deserializeResource(e){var n=this;return Se(function*(){return n.processExternalChanges(e,()=>n.eelDelegate.deserializeResource(e))})()}reloadResource(){var e=this;return Se(function*(){const n=e.eelDelegate.openedResourcePath$.getValue();n&&e.eelDelegate.openFile(n,!0).then()})()}saveResource(){var e=this;return Se(function*(){const n=Object.entries(e.changedDataBlocks).filter(([r,s])=>"__has_external_changes__"!=r);yield e.eelDelegate.saveFile(n.map(([r,s])=>({id:r,value:s}))),e.clearUnsavedChanges()})()}static \u0275fac=function(n){return new(n||i)(K(bs))};static \u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const ys=(i,t)=>i+(i.includes("__")?"/":"__")+t,tN={ArrayBlock:(i,t)=>({id:ys(i.id,t),name:""+t,data:i.data[t],schema:i.schema.child_schema}),CompoundBlock:(i,t)=>({id:ys(i.id,t),name:""+t,data:i.data[t],schema:i.schema.fields.find(e=>e.name==t).schema}),DelegateBlock:(i,t)=>{if("data"!=t)throw new Error(`Trying to get child with key ${t} from DelegateBlock`);return{id:ys(i.id,"data"),name:"",data:i.data.data,schema:i.schema.possible_resource_schemas[i.data.choice_index]}}},kte=(i,t)=>{for(const e of i.schema.block_class_mro.split("__"))if(tN[e])return tN[e](i,t);throw new Error(`Cannot get child resource from block class ${i.schema.block_class_mro}`)};let Ic=(()=>{class i{main;navigationPath$=new Be([]);resourceToRender$=new Be(null);navigateToId(e){this.navigationPath$.next(e.substring(e.indexOf("__")+2).split("/"))}navigateBack(e){this.navigationPath$.next(this.navigationPath$.value.slice(0,this.navigationPath$.value.length-e))}constructor(e){this.main=e,this.main.resource$.subscribe(n=>{this.navigationPath$.next([])}),Ls([this.main.resource$,this.navigationPath$]).subscribe(([n,r])=>{let s=n;for(const o of r)s&&(s=kte(s,o));this.resourceToRender$.next(s)})}static \u0275fac=function(n){return new(n||i)(K(Jr))};static \u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ite=["*",[["mat-toolbar-row"]]],Rte=["*","mat-toolbar-row"],Pte=wc(class{constructor(i){this._elementRef=i}});let Ote=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),Fte=(()=>{class i extends Pte{constructor(e,n,r){super(e),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(fi),x(Lt))},i.\u0275cmp=Xe({type:i,selectors:[["mat-toolbar"]],contentQueries:function(e,n,r){if(1&e&&yi(r,Ote,5),2&e){let s;ft(s=mt())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(e,n){2&e&&Ut("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[Je],ngContentSelectors:Rte,decls:2,vars:0,template:function(e,n){1&e&&(Ai(Ite),Ft(0),Ft(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color: inherit;--mdc-outlined-button-label-text-color: inherit}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),Lte=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,Cn]}),i})();function nN(i,t){return t?e=>zp(t.pipe(oi(1),function Nte(){return ii((i,t)=>{i.subscribe(Zn(t,Nt))})}()),e.pipe(nN(i))):Qi((e,n)=>mr(i(e,n)).pipe(oi(1),SP(e)))}function iN(i,t=lf){const e=rM(i,t);return nN(()=>e)}const Bte=["mat-menu-item",""];function Ute(i,t){1&i&&(Yr(),S(0,"svg",3),pe(1,"polygon",4),A())}const Vte=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],zte=["mat-icon, [matMenuItemIcon]","*"];function Hte(i,t){if(1&i){const e=en();S(0,"div",0),de("keydown",function(r){return nt(e),it($()._handleKeydown(r))})("click",function(){return nt(e),it($().closed.emit("click"))})("@transformMenu.start",function(r){return nt(e),it($()._onAnimationStart(r))})("@transformMenu.done",function(r){return nt(e),it($()._onAnimationDone(r))}),S(1,"div",1),Ft(2),A()()}if(2&i){const e=$();T("id",e.panelId)("ngClass",e._classList)("@transformMenu",e._panelAnimationState),xt("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}const $te=["*"],_C=new ue("MAT_MENU_PANEL"),Gte=vf(_f(class{}));let Lf=(()=>{class i extends Gte{constructor(e,n,r,s,o){super(),this._elementRef=e,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new De,this._focused=new De,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const e=this._elementRef.nativeElement.cloneNode(!0),n=e.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(Lt),x(Ba),x(_C,8),x(yn))},i.\u0275cmp=Xe({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(e,n){1&e&&de("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&e&&(xt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),Ut("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[Je],attrs:Bte,ngContentSelectors:zte,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(e,n){1&e&&(Ai(Vte),Ft(0),S(1,"span",0),Ft(2,1),A(),pe(3,"div",1),Z(4,Ute,2,0,"svg",2)),2&e&&(k(3),T("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),k(1),T("ngIf",n._triggersSubmenu))},dependencies:[On,Ua],encapsulation:2,changeDetection:0}),i})();const jte=new ue("MatMenuContent"),pv={transformMenu:uo("transformMenu",[Nr("void",Bn({opacity:0,transform:"scale(0.8)"})),ir("void => enter",ur("120ms cubic-bezier(0, 0, 0.2, 1)",Bn({opacity:1,transform:"scale(1)"}))),ir("* => void",ur("100ms 25ms linear",Bn({opacity:0})))]),fadeInItems:uo("fadeInItems",[Nr("showing",Bn({opacity:1})),ir("void => *",[Bn({opacity:0}),ur("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Wte=0;const rN=new ue("mat-menu-default-options",{providedIn:"root",factory:function Yte(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let Nf=(()=>{class i{get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(e){this._overlapTrigger=kt(e)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=kt(e)}set panelClass(e){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(e){this.panelClass=e}constructor(e,n,r,s){this._elementRef=e,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new ou,this._classList={},this._panelAnimationState="void",this._animationDone=new De,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new Fe,this.close=this.closed,this.panelId="mat-menu-panel-"+Wte++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new c2(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(ms(this._directDescendantItems),Lr(e=>gr(...e.map(n=>n._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=e.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(ms(this._directDescendantItems),Lr(n=>gr(...n.map(r=>r._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){const n=e.keyCode,r=this._keyManager;switch(n){case 27:Us(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(e)}e.stopPropagation()}focusFirstItem(e="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(oi(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(e).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){const n=Math.min(this._baseElevation+e,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(e=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===e,r["mat-menu-after"]="after"===e,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(e){this._animationDone.next(e),this._isAnimating=!1}_onAnimationStart(e){this._isAnimating=!0,"enter"===e.toState&&0===this._keyManager.activeItemIndex&&(e.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(ms(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt),x(rN),x(yn))},i.\u0275dir=ge({type:i,contentQueries:function(e,n,r){if(1&e&&(yi(r,jte,5),yi(r,Lf,5),yi(r,Lf,4)),2&e){let s;ft(s=mt())&&(n.lazyContent=s.first),ft(s=mt())&&(n._allItems=s),ft(s=mt())&&(n.items=s)}},viewQuery:function(e,n){if(1&e&&pn(ps,5),2&e){let r;ft(r=mt())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),sN=(()=>{class i extends Nf{constructor(e,n,r,s){super(e,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt),x(rN),x(yn))},i.\u0275cmp=Xe({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(e,n){2&e&&xt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[ln([{provide:_C,useExisting:i}]),Je],ngContentSelectors:$te,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(e,n){1&e&&(Ai(),Z(0,Hte,3,6,"ng-template"))},dependencies:[pc],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[pv.transformMenu,pv.fadeInItems]},changeDetection:0}),i})();const oN=new ue("mat-menu-scroll-strategy"),qte={provide:oN,deps:[yr],useFactory:function Xte(i){return()=>i.scrollStrategies.reposition()}},aN=_c({passive:!0});let Kte=(()=>{class i{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){e!==this._menu&&(this._menu=e,this._menuCloseSubscription.unsubscribe(),e&&(this._menuCloseSubscription=e.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(e,n,r,s,o,a,l,c,d){this._overlay=e,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=J.EMPTY,this._hoverSubscription=J.EMPTY,this._menuCloseSubscription=J.EMPTY,this._changeDetectorRef=$t(yn),this._handleTouchStart=u=>{vM(u)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new Fe,this.onMenuOpen=this.menuOpened,this.menuClosed=new Fe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Nf?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,aN)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,aN),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const e=this.menu;if(this._menuOpen||!e)return;const n=this._createOverlay(e),r=n.getConfig(),s=r.positionStrategy;this._setPosition(e,s),r.hasBackdrop=null==e.hasBackdrop?!this.triggersSubmenu():e.hasBackdrop,n.attach(this._getPortal(e)),e.lazyContent&&e.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(e),e instanceof Nf&&(e._startAnimation(),e._directDescendantItems.changes.pipe(ke(e.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(e,n){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(e){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===e||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Nf?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Qt(r=>"void"===r.toState),oi(1),ke(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(e){e.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,e.direction=this.dir,this._setMenuElevation(e),e.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(e){if(e.setElevation){let n=0,r=e.parentMenu;for(;r;)n++,r=r.parentMenu;e.setElevation(n)}}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){const n=this._getOverlayConfig(e);this._subscribeToPositions(e,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(e){return new Ru({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(e,n){e.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>e.setPositionClasses(s,o)):e.setPositionClasses(s,o)})}_setPosition(e,n){let[r,s]="before"===e.xPosition?["end","start"]:["start","end"],[o,a]="above"===e.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[d,u]=[r,s],h=0;if(this.triggersSubmenu()){if(u=r="before"===e.xPosition?"start":"end",s=d="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const p=this._parentMaterialMenu.items.first;this._parentInnerPadding=p?p._getHostElement().offsetTop:0}h="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:h},{originX:s,originY:l,overlayX:u,overlayY:o,offsetY:h},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-h},{originX:s,originY:c,overlayX:u,overlayY:a,offsetY:-h}])}_menuClosingActions(){const e=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return gr(e,this._parentMaterialMenu?this._parentMaterialMenu.closed:dt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Qt(o=>o!==this._menuItemInstance),Qt(()=>this._menuOpen)):dt(),n)}_handleMousedown(e){_M(e)||(this._openedBy=0===e.button?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){const n=e.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Qt(e=>e===this._menuItemInstance&&!e.disabled),iN(0,iM)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Nf&&this.menu._isAnimating?this.menu._animationDone.pipe(oi(1),iN(0,iM),ke(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Eu(e.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(e){return new(e||i)(x(yr),x(ht),x(lr),x(oN),x(_C,8),x(Lf,10),x(co,8),x(Ba),x(lt))},i.\u0275dir=ge({type:i,hostVars:3,hostBindings:function(e,n){1&e&&de("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&e&&xt("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),lN=(()=>{class i extends Kte{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[Je]}),i})(),cN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[qte],imports:[nr,Nu,Cn,Pu,ff,Cn]}),i})();function Zte(i,t){if(1&i){const e=en();Si(0),pe(1,"mat-divider",4),S(2,"span"),H(3,"/"),A(),S(4,"button",5),de("click",function(){nt(e);const r=$().index;return it($().navigate(r+1))}),H(5),A(),Ei()}if(2&i){const e=$().$implicit;k(5),hi(" ",e," ")}}const Qte=function(){return["data","children"]};function Jte(i,t){if(1&i&&(Si(0),Z(1,Zte,6,1,"ng-container",3),Ei()),2&i){const e=t.$implicit;k(1),T("ngIf",!$i(1,Qte).includes(e))}}const ene=function(){return[]};let vC=(()=>{class i{navigation;main;rootName$=new Be("/");constructor(e,n){this.navigation=e,this.main=n}ngAfterViewInit(){this.main.resource$.subscribe(e=>{let n=e?.id;if(n){const r=n.substring(n.lastIndexOf("/")+1);this.rootName$.next(r)}else this.rootName$.next("/")})}navigate(e){this.navigation.navigateBack(this.navigation.navigationPath$.value.length-e)}static \u0275fac=function(n){return new(n||i)(x(Ic),x(Jr))};static \u0275cmp=Xe({type:i,selectors:[["app-navigation-bar"]],standalone:!0,features:[ru],decls:6,vars:7,consts:[[1,"flex","items-center","space-x-1","py-2","px-4","bg-surface","shadow-sm","rounded-md"],["mat-button","",1,"font-medium","text-primary",3,"click"],[4,"ngFor","ngForOf"],[4,"ngIf"],["vertical",""],["mat-button","",1,"font-medium","text-secondary",3,"click"]],template:function(n,r){1&n&&(S(0,"nav",0)(1,"button",1),de("click",function(){return r.navigate(0)}),H(2),Oe(3,"async"),A(),Z(4,Jte,2,2,"ng-container",2),Oe(5,"async"),A()),2&n&&(k(2),hi(" ",Ne(3,2,r.rootName$)," "),k(2),T("ngForOf",Ne(5,4,r.navigation.navigationPath$)||$i(6,ene)))},dependencies:[Ml,Oo,Rf,cC,cr,On,Fr],styles:["[_nghost-%COMP%]{padding:1rem;padding-bottom:0}nav[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--mat-background);border-radius:4px}button[_ngcontent-%COMP%]{text-transform:none}"],changeDetection:0})}return i})(),dN=(()=>{class i{viewContainerRef;constructor(e){this.viewContainerRef=e}static \u0275fac=function(n){return new(n||i)(x(lr))};static \u0275dir=ge({type:i,selectors:[["","dataBlockUI",""]]})}return i})(),tne=(()=>{class i{resource=null;name="";resourceDescription="";changed=new Fe;constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-fallback-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:2,vars:3,consts:[["matTooltipPosition","above",3,"matTooltip"]],template:function(n,r){1&n&&(S(0,"p",0),H(1),A()),2&n&&(T("matTooltip",r.resourceDescription),k(1),cc("",null==r.resource?null:r.resource.name,"> GUI component for block ",((null==r.resource||null==r.resource.schema?null:r.resource.schema.block_class_mro)||"").split("__")[0]," not implemented :(\n"))},dependencies:[wr],changeDetection:0})}return i})();function nne(i,t){if(1&i){const e=en();S(0,"h2",4),de("click",function(){nt(e);const r=$();return it(r.navigation.navigateToId(r.resource.id))}),H(1),A()}if(2&i){const e=$();T("matTooltip",e.resourceDescription),k(1),bn(e.name)}}function ine(i,t){1&i&&pe(0,"app-block-actions",5),2&i&&T("resource",$().resource)}const rne=function(i,t,e,n){return{id:i,name:t,data:e,schema:n}};function sne(i,t){if(1&i&&pe(0,"app-editor",7),2&i){const e=$().$implicit,n=$();T("resource",fI(3,rne,n.joinId(n.resource.id,e.key),e.key,null==n.data?null:n.data[e.key],null==n.schema?null:n.schema.fields[e.index].schema))("resourceDescription",(null==n.schema?null:n.schema.fields[e.index].description)||"")("disabled",n.disabled||!(null==n.schema||!n.schema.fields[e.index].schema.is_programmatic))}}function one(i,t){if(1&i&&(Si(0),Z(1,sne,1,8,"app-editor",6),Oe(2,"async"),Ei()),2&i){const e=t.$implicit,n=$();k(1),T("ngIf",!(Ne(2,1,n.main.hideHiddenFields$)&&(null!=n.schema&&n.schema.fields[e.index].is_unknown||void 0!==(null==n.schema?null:n.schema.fields[e.index].schema.value_validator)&&"or"!==(null==n.schema||null==n.schema.fields[e.index].schema.value_validator?null:n.schema.fields[e.index].schema.value_validator.type)||null!=n.schema&&n.schema.fields[e.index].schema.is_programmatic)))}}let Fo=(()=>{class i{main;navigation;resource=null;resourceDescription="";hideBlockActions=!1;disabled=!1;get name(){return this.resource&&this.resource.name}get data(){return this.resource&&this.resource.data}get schema(){return this.resource&&this.resource.schema}fieldWhitelist=null;fieldBlacklist=null;changed=new Fe;get fieldKeys(){let e=this.schema?.fields.map((n,r)=>({index:r,name:n.name,usage:n.usage})).filter(n=>"skip_ui"!==(n.usage||"everywhere")).map(n=>({index:n.index,key:n.name}))||[];return this.fieldWhitelist?e=e.filter(({key:n})=>this.fieldWhitelist?.includes(n)):this.fieldBlacklist&&(e=e.filter(({key:n})=>!this.fieldBlacklist?.includes(n))),e}fieldTrackBy(e,n){return n.index}destroyed$=new De;constructor(e,n){this.main=e,this.navigation=n}ngAfterViewInit(){var e=this;this.main.dataBlockChange$.pipe(ke(this.destroyed$),Qt(([n,r])=>!!this.resource&&n.startsWith(this.resource.id)&&!n.substring(this.resource.id.length+1).includes("/"))).subscribe(function(){var n=Se(function*([r,s]){const o=r.substring(e.resource.id.length+1);e.data[o]=s});return function(r){return n.apply(this,arguments)}}())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}joinId=ys;static \u0275fac=function(n){return new(n||i)(x(Jr),x(Ic))};static \u0275cmp=Xe({type:i,selectors:[["app-compound-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled",fieldWhitelist:"fieldWhitelist",fieldBlacklist:"fieldBlacklist"},outputs:{changed:"changed"},decls:6,vars:8,consts:[["id","title","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"resource",4,"ngIf"],[1,"container"],[4,"ngFor","ngForOf","ngForTrackBy"],["id","title","matTooltipPosition","above",3,"matTooltip","click"],[3,"resource"],[3,"resource","resourceDescription","disabled",4,"ngIf"],[3,"resource","resourceDescription","disabled"]],template:function(n,r){if(1&n&&(Z(0,nne,2,2,"h2",0),Oe(1,"async"),Oe(2,"async"),Z(3,ine,1,1,"app-block-actions",1),S(4,"div",2),Z(5,one,3,3,"ng-container",3),A()),2&n){let s;T("ngIf",r.name&&r.name!=(null==(s=Ne(1,4,r.main.resource$))?null:s.name)&&r.name!=(null==(s=Ne(2,6,r.navigation.resourceToRender$))?null:s.name)),k(3),T("ngIf",!r.hideBlockActions),k(2),T("ngForOf",r.fieldKeys)("ngForTrackBy",r.fieldTrackBy)}},styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}#title[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0})}return i})();const ane=["trigger"],lne=["panel"];function cne(i,t){if(1&i&&(S(0,"span",10),H(1),A()),2&i){const e=$();k(1),bn(e.placeholder)}}function dne(i,t){if(1&i&&(S(0,"span",14),H(1),A()),2&i){const e=$(2);k(1),bn(e.triggerValue)}}function une(i,t){1&i&&Ft(0,0,["*ngSwitchCase","true"])}function hne(i,t){1&i&&(S(0,"span",11),Z(1,dne,2,1,"span",12),Z(2,une,1,0,"ng-content",13),A()),2&i&&(T("ngSwitch",!!$().customTrigger),k(2),T("ngSwitchCase",!0))}function pne(i,t){if(1&i){const e=en();Yr(),dl(),S(0,"div",15,16),de("@transformPanel.done",function(r){return nt(e),it($()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return nt(e),it($()._handleKeydown(r))}),Ft(2,1),A()}if(2&i){const e=$();wk("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),T("ngClass",e.panelClass)("@transformPanel","showing"),xt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const fne=[[["mat-select-trigger"]],"*"],mne=["mat-select-trigger","*"],gne={transformPanelWrap:uo("transformPanelWrap",[ir("* => void",EM("@transformPanel",[SM()],{optional:!0}))]),transformPanel:uo("transformPanel",[Nr("void",Bn({opacity:0,transform:"scale(1, 0.8)"})),ir("void => showing",ur("120ms cubic-bezier(0, 0, 0.2, 1)",Bn({opacity:1,transform:"scale(1, 1)"}))),ir("* => void",ur("100ms linear",Bn({opacity:0})))])};let uN=0;const hN=new ue("mat-select-scroll-strategy"),vne=new ue("MAT_SELECT_CONFIG"),bne={provide:hN,deps:[yr],useFactory:function _ne(i){return()=>i.scrollStrategies.reposition()}},yne=new ue("MatSelectTrigger");class xne{constructor(t,e){this.source=t,this.value=e}}const wne=vf($_(_f(w2(class{constructor(i,t,e,n,r){this._elementRef=i,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new De}}))));let Mne=(()=>{class i extends wne{get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(zs.required)??!1}set required(e){this._required=kt(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=kt(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=kt(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=dr(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}constructor(e,n,r,s,o,a,l,c,d,u,h,p,f,g){super(o,s,l,c,u),this._viewportRuler=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=f,this._defaultOptions=g,this._panelOpen=!1,this._compareWith=(m,_)=>m===_,this._uid="mat-select-"+uN++,this._triggerAriaLabelledBy=null,this._destroy=new De,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+uN++,this._panelDoneAnimatingStream=new De,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=Hp(()=>{const m=this.options;return m?m.changes.pipe(ms(m),Lr(()=>gr(...m.map(_=>_.onSelectionChange)))):this._ngZone.onStable.pipe(oi(1),Lr(()=>this.optionSelectionChanges))}),this.openedChange=new Fe,this._openedStream=this.openedChange.pipe(Qt(m=>m),rt(()=>{})),this._closedStream=this.openedChange.pipe(Qt(m=>!m),rt(()=>{})),this.selectionChange=new Fe,this.valueChange=new Fe,this.ngControl&&(this.ngControl.valueAccessor=this),null!=g?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=g.typeaheadDebounceInterval),this._scrollStrategyFactory=p,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}ngOnInit(){this._selectionModel=new oC(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Po(),ke(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(ke(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(ms(null),ke(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const n=e.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!Us(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(e);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){const n=this._keyManager,r=e.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||Us(e))if(!o&&this._multiple&&65===r&&e.ctrlKey){e.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else e.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(oi(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return!!(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e,!0)}_initKeyManager(){this._keyManager=new TK(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=gr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(ke(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),gr(...this.options.map(n=>n._stateChanges)).pipe(ke(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){const r=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const e=this._parentFormField?.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(e){return new(e||i)(x(P_),x(yn),x(lt),x(C2),x(ht),x(co,8),x(Df,8),x(za,8),x(rv,8),x(sa,10),qo("tabindex"),x(hN),x(bM),x(vne,8))},i.\u0275dir=ge({type:i,viewQuery:function(e,n){if(1&e&&(pn(ane,5),pn(lne,5),pn(QO,5)),2&e){let r;ft(r=mt())&&(n.trigger=r.first),ft(r=mt())&&(n.panel=r.first),ft(r=mt())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[Je,Pi]}),i})(),Rc=(()=>{class i extends Mne{constructor(){super(...arguments),this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(ke(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(),this._changeDetectorRef.detectChanges())})}ngAfterViewInit(){this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin())}open(){this._overlayWidth=this._getOverlayWidth(),super.open(),this.stateChanges.next()}close(){super.close(),this.stateChanges.next()}_scrollOptionIntoView(e){const n=this.options.toArray()[e];if(n){const r=this.panel.nativeElement,s=function yZ(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}(e,this.options,this.optionGroups),o=n._getHostElement();r.scrollTop=0===e&&1===s?0:function xZ(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new xne(this,e)}_getOverlayWidth(){return(this._preferredOverlayOrigin instanceof uM?this._preferredOverlayOrigin.elementRef:this._preferredOverlayOrigin||this._elementRef).nativeElement.getBoundingClientRect().width}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=kt(e),this._syncParentProperties()}_syncParentProperties(){if(this.options)for(const e of this.options)e._changeDetectorRef.markForCheck()}}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275cmp=Xe({type:i,selectors:[["mat-select"]],contentQueries:function(e,n,r){if(1&e&&(yi(r,yne,5),yi(r,wl,5),yi(r,R2,5)),2&e){let s;ft(s=mt())&&(n.customTrigger=s.first),ft(s=mt())&&(n.options=s),ft(s=mt())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(e,n){1&e&&de("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&e&&(xt("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),Ut("mat-mdc-select-disabled",n.disabled)("mat-mdc-select-invalid",n.errorState)("mat-mdc-select-required",n.required)("mat-mdc-select-empty",n.empty)("mat-mdc-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex",hideSingleSelectionIndicator:"hideSingleSelectionIndicator"},exportAs:["matSelect"],features:[ln([{provide:iC,useExisting:i},{provide:I2,useExisting:i}]),Je],ngContentSelectors:mne,decls:11,vars:11,consts:[["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],[1,"mat-mdc-select-value",3,"ngSwitch"],["class","mat-mdc-select-placeholder mat-mdc-select-min-line",4,"ngSwitchCase"],["class","mat-mdc-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","backdropClick","attach","detach"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text",3,"ngSwitch"],["class","mat-mdc-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,n){if(1&e&&(Ai(fne),S(0,"div",0,1),de("click",function(){return n.toggle()}),S(3,"div",2),Z(4,cne,2,1,"span",3),Z(5,hne,3,2,"span",4),A(),S(6,"div",5)(7,"div",6),Yr(),S(8,"svg",7),pe(9,"path",8),A()()()(),Z(10,pne,3,9,"ng-template",9),de("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&e){const r=Hn(1);xt("aria-owns",n.panelOpen?n.id+"-panel":null),k(3),T("ngSwitch",n.empty),xt("id",n._valueId),k(1),T("ngSwitchCase",!0),k(1),T("ngSwitchCase",!1),k(5),T("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",n._preferredOverlayOrigin||r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayWidth",n._overlayWidth)}},dependencies:[pc,Np,dw,UR,QO,uM],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:calc(100vw - 32px);max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:calc(100vh - 32px);max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:4px;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}.mat-mdc-select{display:inline-block;width:100%;outline:none}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:translateY(-8px)}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-select-arrow{width:10px;height:5px;position:relative}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}.mdc-menu-surface.mat-mdc-select-panel{width:100%;max-height:275px;position:static;outline:0;margin:0;padding:8px 0;list-style-type:none}.mdc-menu-surface.mat-mdc-select-panel:focus{outline:none}.cdk-high-contrast-active .mdc-menu-surface.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) .mdc-menu-surface.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above .mdc-menu-surface.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[gne.transformPanel]},changeDetection:0}),i})(),pN=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[bne],imports:[nr,Pu,CM,Cn,ff,Dc,CM,Cn]}),i})();function Cne(i,t){if(1&i&&(S(0,"mat-label"),H(1),A()),2&i){const e=$(2);k(1),bn(e.resource.name)}}function Sne(i,t){if(1&i&&(S(0,"mat-option",7),H(1),A()),2&i){const e=t.$implicit;T("value",e),k(1),bn(e)}}function Ene(i,t){if(1&i){const e=en();Si(0),S(1,"mat-select",5),de("ngModelChange",function(r){return nt(e),it($(2).resource.data=r)})("selectionChange",function(){return nt(e),it($(2).changed.emit())}),Z(2,Sne,2,2,"mat-option",6),A(),Ei()}if(2&i){const e=$(2);k(1),T("disabled",e.disabled)("ngModel",e.resource.data),k(1),T("ngForOf",e.resource.schema.value_validator.possible_values)}}function Ane(i,t){if(1&i){const e=en();S(0,"input",8),de("ngModelChange",function(r){return nt(e),it($(2).resource.data=r)})("change",function(){return nt(e),it($(2).changed.emit())}),A()}if(2&i){const e=$(2);T("max",e.resource.schema.max_value)("min",e.resource.schema.min_value)("step",e.resource.schema.value_interval)("disabled",e.disabled||"eq"===(null==e.resource.schema.value_validator?null:e.resource.schema.value_validator.type))("ngModel",e.resource.data)}}function Dne(i,t){if(1&i&&(S(0,"mat-form-field",1),Z(1,Cne,2,1,"mat-label",2),Z(2,Ene,3,3,"ng-container",3),Z(3,Ane,1,5,"ng-template",null,4,so),A()),2&i){const e=Hn(4),n=$();T("matTooltip",n.resourceDescription),k(1),T("ngIf",n.resource.name),k(1),T("ngIf","or"===(null==n.resource.schema.value_validator?null:n.resource.schema.value_validator.type))("ngIfElse",e)}}let fN=(()=>{class i{resource=null;resourceDescription="";disabled=!1;changed=new Fe;constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-number-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["numberInput",""],[3,"disabled","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(n,r){1&n&&Z(0,Dne,5,4,"mat-form-field",0),2&n&&T("ngIf",r.resource)},dependencies:[cr,On,_s,la,Hs,$a,Ha,aa,vs,xr,$s,wr,Rc,wl],changeDetection:0})}return i})();function Tne(i,t){if(1&i&&(S(0,"mat-label"),H(1),A()),2&i){const e=$(2);k(1),bn(e.resource.name)}}function kne(i,t){if(1&i&&(S(0,"mat-option",7),H(1),A()),2&i){const e=t.$implicit;T("value",e),k(1),bn(e)}}function Ine(i,t){if(1&i){const e=en();Si(0),S(1,"mat-select",5),de("ngModelChange",function(r){return nt(e),it($(2).resource.data=r)})("selectionChange",function(){return nt(e),it($(2).changed.emit())}),Z(2,kne,2,2,"mat-option",6),A(),Ei()}if(2&i){const e=$(2);k(1),T("disabled",e.disabled)("ngModel",e.resource.data),k(1),T("ngForOf",e.resource.schema.value_validator.possible_values)}}function Rne(i,t){if(1&i){const e=en();S(0,"input",8),de("ngModelChange",function(r){return nt(e),it($(2).resource.data=r)})("change",function(){return nt(e),it($(2).changed.emit())}),A()}if(2&i){const e=$(2);T("disabled",e.disabled||"eq"===(null==e.resource.schema.value_validator?null:e.resource.schema.value_validator.type))("maxlength",e.maxLength)("minlength",e.minLength)("ngModel",e.resource.data)}}function Pne(i,t){if(1&i&&(S(0,"mat-form-field",1),Z(1,Tne,2,1,"mat-label",2),Z(2,Ine,3,3,"ng-container",3),Z(3,Rne,1,4,"ng-template",null,4,so),A()),2&i){const e=Hn(4),n=$();T("matTooltip",n.resourceDescription),k(1),T("ngIf",n.resource.name),k(1),T("ngIf","or"===(null==n.resource.schema.value_validator?null:n.resource.schema.value_validator.type))("ngIfElse",e)}}let mN=(()=>{class i{get resource(){return this._resource}set resource(e){this._resource=e,isNaN(+this._resource?.schema.length)||(this.minLength=this.maxLength=+this._resource?.schema.length)}_resource=null;resourceDescription="";disabled=!1;changed=new Fe;minLength=null;maxLength=null;constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-string-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["textInput",""],[3,"disabled","ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","type","text",3,"disabled","maxlength","minlength","ngModel","ngModelChange","change"]],template:function(n,r){1&n&&Z(0,Pne,5,4,"mat-form-field",0),2&n&&T("ngIf",r.resource)},dependencies:[cr,On,_s,Hs,JM,eC,aa,vs,xr,$s,wr,Rc,wl],changeDetection:0})}return i})();const Pc=function(){return[]};function One(i,t){if(1&i&&(S(0,"mat-panel-description"),H(1," Click to view items ("),S(2,"b"),H(3),A(),H(4,") "),A()),2&i){const e=$();k(3),bn((e.resourceData||$i(1,Pc)).length)}}function Fne(i,t){1&i&&(S(0,"mat-panel-description"),H(1," Empty array "),A())}function Lne(i,t){}function Nne(i,t){if(1&i&&pe(0,"app-editor",8),2&i){const e=$().$implicit,n=$(2);T("resource",n.children[n.pageIndex*n.pageSize+e])("disabled",n.disabled)}}function Bne(i,t){if(1&i&&(Si(0),Z(1,Nne,1,2,"app-editor",7),Ei()),2&i){const e=t.$implicit,n=$(2);k(1),T("ngIf",n.pageIndex*n.pageSize+e<n.children.length)}}function Une(i,t){}function Vne(i,t){1&i&&(S(0,"p"),H(1,"Empty array"),A())}function zne(i,t){if(1&i&&(Si(0),Z(1,Lne,0,0,"ng-template",5),Z(2,Bne,2,1,"ng-container",6),Z(3,Une,0,0,"ng-template",5),Z(4,Vne,2,0,"p",3),Ei()),2&i){const e=$(),n=Hn(10);k(1),T("ngTemplateOutlet",n),k(1),T("ngForOf",e.renderIndexes),k(1),T("ngTemplateOutlet",n),k(1),T("ngIf",0==(e.resourceData||$i(4,Pc)).length)}}function Hne(i,t){if(1&i&&(S(0,"mat-option",16),H(1),A()),2&i){const e=t.$implicit,n=$(3);T("value",e),k(1),cc(" ",e*n.pageSize," - ",(e+1)*n.pageSize-1," ")}}const $ne=function(i){return{hidden:i}};function Gne(i,t){if(1&i){const e=en();S(0,"div",10)(1,"mat-paginator",11),de("page",function(r){return nt(e),it($(2).renderPage(r.pageIndex,r.pageSize))}),A(),S(2,"div",12)(3,"div",13),H(4,"Go To:"),A(),S(5,"mat-form-field")(6,"mat-select",14),de("ngModelChange",function(r){return nt(e),it($(2).goToIndex=r)})("selectionChange",function(){nt(e);const r=$(2);return it(r.renderPage(r.goToIndex,r.pageSize))}),Z(7,Hne,2,3,"mat-option",15),A()()()()}if(2&i){const e=$(2);T("ngClass",su(9,$ne,(e.resourceData||$i(8,Pc)).length<=e.minPageSize)),k(1),T("length",(e.resourceData||$i(11,Pc)).length)("pageSize",e.pageSize)("pageIndex",e.pageIndex)("pageSizeOptions",e.pageSizeOptions)("showFirstLastButtons",!0),k(5),T("ngModel",e.goToIndex),k(1),T("ngForOf",e.pageIndexes)}}function jne(i,t){1&i&&Z(0,Gne,8,12,"div",9),2&i&&T("ngIf",($().resourceData||$i(1,Pc)).length>0)}let bC=(()=>{class i{main;cdr;navigation;_resource=null;set resource(e){this._resource=e,this.buildChildren(),this.renderPage(0,this.minPageSize),this.updatePageIndexes()}get resource(){return this._resource}resourceDescription="";get resourceData(){return this._resource?.data}buildChildren(){this.children=(this.resourceData||[]).map((e,n)=>({id:ys(this._resource.id,n),name:""+n,data:e,schema:this._resource.schema.child_schema}))}disabled=!1;changed=new Fe;get schema(){return this._resource?.schema}get name(){return this._resource?.name||null}renderContents=!1;contentsTimeout;minPageSize=10;pageIndex=0;pageSize=0;pageSizeOptions=[10,25,50,100];children=[];renderIndexes=[];goToIndex=0;pageIndexes=[];destroyed$=new De;constructor(e,n,r){this.main=e,this.cdr=n,this.navigation=r}ngAfterViewInit(){var e=this;this.main.dataBlockChange$.pipe(ke(this.destroyed$),Qt(([n,r])=>!!this.resource&&n.startsWith(this.resource.id)&&!n.substring(this.resource.id.length+1).includes("/"))).subscribe(function(){var n=Se(function*([r,s]){const o=r.substring(e.resource.id.length+1);e.resourceData[+o]=s});return function(r){return n.apply(this,arguments)}}())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}onContentsTrigger(e){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),e?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(e,n){this.pageSize!==n&&(this.renderIndexes=new Array(n).fill(null).map((r,s)=>s)),this.goToIndex=this.pageIndex=e,this.pageSize=n,this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let e=0;e<Math.ceil((this.resourceData||[]).length/this.pageSize);e++)this.pageIndexes.push(e)}static \u0275fac=function(n){return new(n||i)(x(Jr),x(yn),x(Ic))};static \u0275cmp=Xe({type:i,selectors:[["app-array-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:11,vars:9,consts:[["id","title","matTooltipPosition","above",3,"matTooltip","click"],[3,"opened","closed"],["matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],["paginator",""],[3,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[3,"resource","disabled",4,"ngIf"],[3,"resource","disabled"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,r){1&n&&(S(0,"h2",0),de("click",function(){return r.navigation.navigateToId(r.resource.id)}),H(1),A(),S(2,"mat-expansion-panel",1),de("opened",function(){return r.onContentsTrigger(!0)})("closed",function(){return r.onContentsTrigger(!1)}),S(3,"mat-expansion-panel-header",2)(4,"mat-panel-title"),H(5),A(),Z(6,One,5,2,"mat-panel-description",3),Z(7,Fne,2,0,"mat-panel-description",3),A(),Z(8,zne,5,5,"ng-container",3),A(),Z(9,jne,1,2,"ng-template",null,4,so)),2&n&&(T("matTooltip",r.resourceDescription),k(1),bn(r.name),k(2),T("matTooltip",r.resourceDescription),k(2),hi(" ",r.name," "),k(1),T("ngIf",(r.resourceData||$i(7,Pc)).length>0),k(1),T("ngIf",0==(r.resourceData||$i(8,Pc)).length),k(1),T("ngIf",r.renderContents))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#title[_ngcontent-%COMP%]{cursor:pointer}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0})}return i})();function Wne(i,t){1&i&&(pe(0,"img",2),Oe(1,"async")),2&i&&T("src",Ne(1,1,$().imageUrl$),hg)}const Yne=function(){return["bitmap","palette"]};let Xne=(()=>{class i{eelDelegate;main;_resource$=new Be(null);imageUrl$=new Be(null);set resource(e){this._resource$.next(e)}get resource(){return this._resource$.getValue()}destroyed$=new De;changed=new Fe;constructor(e,n){this.eelDelegate=e,this.main=n}ngAfterViewInit(){var e=this;return Se(function*(){e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var n=Se(function*(r){if(r){const s=yield e.eelDelegate.serializeResource(r.id);e.imageUrl$.next(s.find(o=>o.endsWith(".png"))||null)}else e.imageUrl$.next(null)});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(Jr))};static \u0275cmp=Xe({type:i,selectors:[["app-bitmap-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:8,consts:[[3,"resource","fieldBlacklist"],[3,"src",4,"ngIf"],[3,"src"]],template:function(n,r){1&n&&(pe(0,"app-compound-block-ui",0),Oe(1,"async"),Z(2,Wne,2,3,"img",1),Oe(3,"async")),2&n&&(T("resource",Ne(1,3,r._resource$))("fieldBlacklist",$i(7,Yne)),k(2),T("ngIf",Ne(3,5,r.imageUrl$)))},dependencies:[On,Fo,Fr],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center;row-gap:1rem}img[_ngcontent-%COMP%]{min-width:10rem;max-width:100%;max-height:25rem;object-fit:contain;background-image:linear-gradient(45deg,#808080 25%,transparent 25%),linear-gradient(-45deg,#808080 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#808080 75%),linear-gradient(-45deg,transparent 75%,#808080 75%);background-size:16px 16px;background-color:#aaa}"],changeDetection:0})}return i})();const qne=["*"],eie=new ue("MAT_CARD_CONFIG");let gN=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}}return i.\u0275fac=function(e){return new(e||i)(x(eie,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(e,n){2&e&&Ut("mat-mdc-card-outlined","outlined"===n.appearance)("mdc-card--outlined","outlined"===n.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:qne,decls:1,vars:0,template:function(e,n){1&e&&(Ai(),Ft(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mat-mdc-card{position:relative;border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px));background-color:var(--mdc-elevated-card-container-color, transparent);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color, transparent)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width, 1px);border-style:solid;border-color:var(--mdc-outlined-card-outline-color, transparent)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),i})(),_N=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,nr,Cn]}),i})(),Sie=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[Cn,nr,Nu,Cn]}),i})();const MN={transformPanel:uo("transformPanel",[ir("void => enter-dropdown",ur("120ms cubic-bezier(0, 0, 0.2, 1)",L2([Bn({opacity:0,transform:"scale(1, 0.8)"}),Bn({opacity:1,transform:"scale(1, 1)"})]))),ir("void => enter-dialog",ur("150ms cubic-bezier(0, 0, 0.2, 1)",L2([Bn({opacity:0,transform:"scale(0.7)"}),Bn({transform:"none",opacity:1})]))),ir("* => void",ur("100ms linear",Bn({opacity:0})))]),fadeInCalendar:uo("fadeInCalendar",[Nr("void",Bn({opacity:0})),Nr("enter",Bn({opacity:1})),ir("void => *",ur("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},EN=function(i){return{active:i}};function $ie(i,t){if(1&i){const e=en();S(0,"button",2),de("click",function(){const s=nt(e).$implicit;return it($().select(s))}),A()}if(2&i){const e=t.$implicit,n=$();Xr("background-color",e),T("ngClass",su(3,EN,n.selectedColor===e))}}function Gie(i,t){if(1&i){const e=en();S(0,"button",2),de("click",function(){const s=nt(e).$implicit;return it($().select(s))}),A()}if(2&i){const e=t.$implicit,n=$();Xr("background-color",e),T("ngClass",su(3,EN,n.selectedColor===e))}}const jie=["button"],Wie=/^\s+/,Yie=/\s+$/,ju=Math.round,Xie=(Math,Math,Math,/[^0-9]/g),AN=["#ffffff","#ffff00","#ff00ff","#ff0000","#c0c0c0","#808080","#808000","#800080","#800000","#00ffff","#00ff00","#008080","#008000","#0000ff","#000080","#000000"];function DN(i,t,e){const n=i.getImageData(t,e,1,1).data;return{r:n[0],g:n[1],b:n[2]}}function Oc(i){return 1==i.length?"0"+i:""+i}function Kie(i){return Math.round(255*parseFloat(i)).toString(16)}function TN(i){return Gs(i)/255}function Gs(i){return parseInt(i,16)}function kN(i,t,e,n){var r=[Oc(ju(i).toString(16)),Oc(ju(t).toString(16)),Oc(ju(e).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}const Dl="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",wC="[\\s|\\(]+("+Dl+")[,|\\s]+("+Dl+")[,|\\s]+("+Dl+")\\s*\\)?",MC="[\\s|\\(]+("+Dl+")[,|\\s]+("+Dl+")[,|\\s]+("+Dl+")[,|\\s]+("+Dl+")\\s*\\)?",Fc={CSS_UNIT:new RegExp(Dl),rgb:new RegExp("rgb"+wC),rgba:new RegExp("rgba"+MC),hsl:new RegExp("hsl"+wC),hsla:new RegExp("hsla"+MC),hsv:new RegExp("hsv"+wC),hsva:new RegExp("hsva"+MC),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function CC(i){let t;return i=i.replace(Wie,"").replace(Yie,"").toLowerCase(),(t=Fc.rgb.exec(i))?{r:t[1],g:t[2],b:t[3],a:1}:(t=Fc.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Fc.hex8.exec(i))?{r:Gs(t[1]),g:Gs(t[2]),b:Gs(t[3]),a:TN(t[4])}:(t=Fc.hex6.exec(i))?{r:Gs(t[1]),g:Gs(t[2]),b:Gs(t[3]),a:1}:(t=Fc.hex4.exec(i))?{r:Gs(t[1]+""+t[1]),g:Gs(t[2]+""+t[2]),b:Gs(t[3]+""+t[3]),a:TN(t[4]+""+t[4])}:(t=Fc.hex3.exec(i))?{r:Gs(t[1]+""+t[1]),g:Gs(t[2]+""+t[2]),b:Gs(t[3]+""+t[3]),a:1}:null}class Lc{constructor(t,e,n,r){this.r=t>255?255:t,this.g=e>255?255:e,this.b=n>255?255:n,this.a=null!=r?r>1?1:r:1,this.roundA=Math.round(this.a),this.hex=kN(this.r,this.g,this.b),this.rgba=this.toRgba()}toHex(t){return kN(this.r,this.g,this.b,t)}toRgba(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}toHexString(t){return"#"+this.toHex(t)}toRgbString(){return 1===this.a?"rgb("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+")":"rgba("+Math.round(this.r)+", "+Math.round(this.g)+", "+Math.round(this.b)+", "+this.roundA+")"}toHex8(t){return function qie(i,t,e,n,r){var s=[Oc(ju(i).toString(16)),Oc(ju(t).toString(16)),Oc(ju(e).toString(16)),Oc(Kie(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this.r,this.g,this.b,this.a,t)}toHex8String(t){return"#"+this.toHex8(t)}toString(t){let n;return t||!(this.a<1&&this.a>=0)||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t?("rgb"===t&&(n=this.toRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),n||this.toHexString()):this.toRgbString()}}let IN=(()=>{class i{constructor(e,n){this.zone=e,this.colorChanged=new Fe,this.x=0,this.y=0,this.drag=!1,this._destroyed=new De,this.elementId=n}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}ngAfterViewInit(){this.canvas=document.getElementById(this.elementId),this.ctx=this.canvas.getContext("2d"),this.width=this.canvas.width,this.height=this.canvas.height,this.draw()}draw(){this.ctx.clearRect(0,0,this.width,this.height),this.ctx.rect(0,0,this.width,this.height),this.fillGradient(),0!=this.y&&this.redrawIndicator(this.x,this.y)}onMousedown(e){this.drag=!0,this.changeColor(e),this.zone.runOutsideAngular(()=>{this.canvas.addEventListener("mousemove",this.onMousemove.bind(this))})}onMousemove(e){this.drag&&this.zone.run(()=>{this.changeColor(e)})}onMouseup(e){this.drag=!1,this.canvas.removeEventListener("mousemove",this.onMousemove)}emitChange(e){this.colorChanged.emit(e)}}return i.\u0275fac=function(e){Eo()},i.\u0275dir=ge({type:i,inputs:{color:"color"},outputs:{colorChanged:"colorChanged"}}),i})(),Jie=(()=>{class i extends IN{constructor(e){super(e,"color-strip"),this.zone=e}ngOnInit(){}ngAfterViewInit(){super.ngAfterViewInit()}fillGradient(){const e=this.ctx.createLinearGradient(0,0,0,this.height);e.addColorStop(0,"rgba(255, 0, 0, 1)"),e.addColorStop(.17,"rgba(255, 255, 0, 1)"),e.addColorStop(.34,"rgba(0, 255, 0, 1)"),e.addColorStop(.51,"rgba(0, 255, 255, 1)"),e.addColorStop(.68,"rgba(0, 0, 255, 1)"),e.addColorStop(.85,"rgba(255, 0, 255, 1)"),e.addColorStop(1,"rgba(255, 0, 0, 1)"),this.ctx.fillStyle=e,this.ctx.fill()}redrawIndicator(e,n){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.lineWidth=2,this.ctx.arc(7.5,n,7.5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}changeColor(e){this.x=e.offsetX,this.y=e.offsetY,this.draw();const{r:n,g:r,b:s}=DN(this.ctx,e.offsetX,e.offsetY);this.emitChange(new Lc(n,r,s))}}return i.\u0275fac=function(e){return new(e||i)(x(lt))},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-slider"]],features:[Je],decls:1,vars:0,consts:[["id","color-strip","width","15","height","234",1,"zone-strip",3,"mousedown","mouseup"]],template:function(e,n){1&e&&(S(0,"canvas",0),de("mousedown",function(s){return n.onMousedown(s)})("mouseup",function(s){return n.onMouseup(s)}),A())}}),i})(),ere=(()=>{class i{constructor(){}onInput(e){this._formatInput(e.target)}_formatInput(e){let n=Number(e.value.replace(Xie,""));n=isNaN(n)?0:n,e.value=n}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,selectors:[["","ngxMatNumericColorInput",""]],hostBindings:function(e,n){1&e&&de("input",function(s){return n.onInput(s)})}}),i})(),nre=(()=>{class i extends IN{constructor(e){super(e,"color-block"),this.zone=e,this._resetBaseColor=!0,this.formGroup=new Uu({r:new oa(null,[zs.required]),g:new oa(null,[zs.required]),b:new oa(null,[zs.required]),a:new oa(null,[zs.required]),hex:new oa(null,[zs.required,zs.pattern(Fc.hex6)])})}get rCtrl(){return this.formGroup.get("r")}get gCtrl(){return this.formGroup.get("g")}get bCtrl(){return this.formGroup.get("b")}get aCtrl(){return this.formGroup.get("a")}get hexCtrl(){return this.formGroup.get("hex")}ngOnInit(){gr(this.rCtrl.valueChanges,this.gCtrl.valueChanges,this.bCtrl.valueChanges,this.aCtrl.valueChanges).pipe(ke(this._destroyed),Vs(400)).subscribe(r=>{const s=new Lc(Number(this.rCtrl.value),Number(this.gCtrl.value),Number(this.bCtrl.value),Number(this.aCtrl.value));this.emitChange(s)}),this.hexCtrl.valueChanges.pipe(ke(this._destroyed),Vs(400),Po()).subscribe(r=>{const s=CC(r);if(null!=s){const o=new Lc(s.r,s.g,s.b,s.a);this.emitChange(o)}})}ngOnChanges(e){e.color&&e.color.currentValue&&(this.updateForm(e.color.currentValue),this._resetBaseColor&&(this._baseColor=e.color.currentValue),this._resetBaseColor=!0,e.color.firstChange||this.draw())}updateForm(e){const n={emitEvent:!1};this.rCtrl.setValue(e.r,n),this.gCtrl.setValue(e.g,n),this.bCtrl.setValue(e.b,n),this.aCtrl.setValue(e.a,n),this.hexCtrl.setValue(e.hex,n)}redrawIndicator(e,n){this.ctx.beginPath(),this.ctx.strokeStyle="white",this.ctx.arc(e,n,5,0,2*Math.PI,!1),this.ctx.stroke(),this.ctx.closePath()}fillGradient(){this.ctx.fillStyle=this._baseColor?this._baseColor.rgba:"rgba(255,255,255,1)",this.ctx.fillRect(0,0,this.width,this.height);const e=this.ctx.createLinearGradient(0,0,this.width,0);e.addColorStop(0,"rgba(255,255,255,1)"),e.addColorStop(1,"rgba(255,255,255,0)"),this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.width,this.height);const n=this.ctx.createLinearGradient(0,0,0,this.height);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,this.width,this.height)}onSliderColorChanged(e){this._baseColor=e,this.color=e,this.fillGradient(),this.emitChange(e)}changeColor(e){this.x=e.offsetX,this.y=e.offsetY,this._resetBaseColor=!1,this.draw();const{r:n,g:r,b:s}=DN(this.ctx,e.offsetX,e.offsetY);this.emitChange(new Lc(n,r,s))}}return i.\u0275fac=function(e){return new(e||i)(x(lt))},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-canvas"]],hostAttrs:[1,"ngx-mat-color-canvas"],features:[Je,Pi],decls:30,vars:3,consts:[[3,"formGroup"],[1,"color-canvas-row"],[1,"zone-canvas"],["id","color-block","width","200","height","235",1,"zone-block",3,"mousedown","mouseup"],[3,"colorChanged"],[1,"zone-inputs"],["matInput","","formControlName","r","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","g","ngxMatNumericColorInput","","autocomplete","off"],["matInput","","formControlName","b","ngxMatNumericColorInput","","autocomplete","off"],["mat-mini-fab","",1,"preview"],["matPrefix","",1,"symbol"],["matInput","","formControlName","hex","autocomplete","off"],[1,"input-opacity"],["matInput","","formControlName","a","type","number","min","0","max","1","step","0.1","autocomplete","off"]],template:function(e,n){1&e&&(S(0,"form",0)(1,"div",1)(2,"div",2)(3,"canvas",3),de("mousedown",function(s){return n.onMousedown(s)})("mouseup",function(s){return n.onMouseup(s)}),A(),S(4,"ngx-mat-color-slider",4),de("colorChanged",function(s){return n.onSliderColorChanged(s)}),A()(),S(5,"div",5)(6,"mat-form-field")(7,"mat-label"),H(8,"R"),A(),pe(9,"input",6),A(),S(10,"mat-form-field")(11,"mat-label"),H(12,"G"),A(),pe(13,"input",7),A(),S(14,"mat-form-field")(15,"mat-label"),H(16,"B"),A(),pe(17,"input",8),A()()(),S(18,"div",1),pe(19,"button",9),S(20,"mat-form-field")(21,"mat-label"),H(22,"HEX6"),A(),S(23,"mat-label",10),H(24,"#\xa0"),A(),pe(25,"input",11),A(),S(26,"mat-form-field",12)(27,"mat-label"),H(28,"A"),A(),pe(29,"input",13),A()()()),2&e&&(T("formGroup",n.formGroup),k(19),Xr("background-color",(null==n.color?null:n.color.rgba)||"transparent"))},dependencies:[$s,vs,xr,fJ,Z2,Tf,_s,la,Hs,wf,$a,Ha,za,Vu,Jie,ere],styles:[".ngx-mat-color-canvas .color-canvas-row{display:flex}.ngx-mat-color-canvas .color-canvas-row:first-of-type{height:235px;margin-bottom:12px}.ngx-mat-color-canvas .color-canvas-row:first-of-type .card{height:180px}.ngx-mat-color-canvas .color-canvas-row canvas:hover{cursor:crosshair}.ngx-mat-color-canvas .color-canvas-row .zone{display:flex}.ngx-mat-color-canvas .color-canvas-row .zone-canvas{height:235px}.ngx-mat-color-canvas .color-canvas-row .zone-canvas .zone-block{border:1px solid rgba(0,0,0,.12)}.ngx-mat-color-canvas .color-canvas-row .zone-strip{flex-basis:auto;margin-left:10px}.ngx-mat-color-canvas .color-canvas-row .zone-inputs{display:flex;width:60px;height:235px;flex-direction:column;margin-left:16px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2){display:flex}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .preview{min-width:40px;min-height:40px;height:40px;width:40px;margin-top:12px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field{margin-left:16px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type{width:170px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:first-of-type .symbol{font-weight:700;color:#0000008a}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type{width:60px}.ngx-mat-color-canvas .color-canvas-row:nth-of-type(2) .mat-mdc-form-field:last-of-type .mat-mdc-text-field-wrapper{padding:0 8px}.ngx-mat-color-canvas .mat-mdc-form-field-label{font-weight:700}.ngx-mat-color-canvas .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:transparent}\n"],encapsulation:2}),i})(),ire=(()=>{class i{constructor(){this.colorChanged=new Fe,this.colors1=AN.slice(0,8),this.colors2=AN.slice(8,16)}set color(e){e&&(this.selectedColor=e.toHexString())}ngOnInit(){}select(e){this.selectedColor=e;const{r:n,g:r,b:s,a:o}=CC(e);this.colorChanged.emit(new Lc(n,r,s,o))}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-collection"]],hostAttrs:[1,"ngx-mat-color-collection"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:4,vars:2,consts:[[1,"color-collection-row"],["mat-mini-fab","","class","btn-color",3,"background-color","ngClass","click",4,"ngFor","ngForOf"],["mat-mini-fab","",1,"btn-color",3,"ngClass","click"]],template:function(e,n){1&e&&(S(0,"div",0),Z(1,$ie,1,5,"button",1),A(),S(2,"div",0),Z(3,Gie,1,5,"button",1),A()),2&e&&(k(1),T("ngForOf",n.colors1),k(2),T("ngForOf",n.colors2))},dependencies:[pc,cr,Z2],styles:[".ngx-mat-color-collection .btn-color{height:20px;width:20px;margin-right:11px;box-shadow:none;opacity:.3}.ngx-mat-color-collection .btn-color.active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:1}\n"],encapsulation:2}),i})(),RN=(()=>{class i{constructor(){this.colorChanged=new Fe}ngOnInit(){}handleColorChanged(e){this.colorChanged.emit(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-palette"]],hostAttrs:[1,"ngx-mat-color-palette"],inputs:{color:"color"},outputs:{colorChanged:"colorChanged"},decls:2,vars:2,consts:[[3,"color","colorChanged"]],template:function(e,n){1&e&&(S(0,"ngx-mat-color-canvas",0),de("colorChanged",function(s){return n.handleColorChanged(s)}),A(),S(1,"ngx-mat-color-collection",0),de("colorChanged",function(s){return n.handleColorChanged(s)}),A()),2&e&&(T("color",n.color),k(1),T("color",n.color))},dependencies:[nre,ire],styles:[".ngx-mat-color-palette .actions{margin-top:10px;display:flex}.ngx-mat-color-palette .actions .left{display:flex;flex-direction:column;margin-right:15px}.ngx-mat-color-palette .actions .left .preview{flex:2 1 auto;margin-bottom:10px}.ngx-mat-color-palette .actions .right{display:flex;width:60px;flex-direction:column}\n"],encapsulation:2}),i})(),SC=(()=>{class i{constructor(){}sameColor(e,n){return null==e&&null==n||null!=e&&null!=n&&e.rgba===n.rgba}format(e,n){return e.toString(n)}parse(e){const n=CC(e);return n?new Lc(n.r,n.g,n.b,n.a):null}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();const rre={display:{colorInput:"hex"}},PN=new ue("mat-color-formats"),ON=new ue("ngx-mat-colorpicker-scroll-strategy"),ore={provide:ON,deps:[yr],useFactory:function sre(i){return()=>i.scrollStrategies.reposition()}},are=wc(class{constructor(i){this._elementRef=i}});let FN=(()=>{class i extends are{constructor(e){super(e)}}return i.\u0275fac=function(e){return new(e||i)(x(ht))},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-picker-content"]],viewQuery:function(e,n){if(1&e&&pn(RN,5),2&e){let r;ft(r=mt())&&(n._palette=r.first)}},hostAttrs:[1,"ngx-mat-colorpicker-content"],hostVars:3,hostBindings:function(e,n){2&e&&(Dg("@transformPanel","enter"),Ut("ngx-mat-colorpicker-content-touch",n.picker.touchUi))},inputs:{color:"color"},exportAs:["ngxMatColorPickerContent"],features:[Je],decls:1,vars:1,consts:[[3,"color","colorChanged"]],template:function(e,n){1&e&&(S(0,"ngx-mat-color-palette",0),de("colorChanged",function(s){return n.picker.select(s)}),A()),2&e&&T("color",n.picker._selected)},dependencies:[RN],styles:[".ngx-mat-colorpicker-content{display:block;border-radius:4px;box-shadow:0 2px 4px -1px #0003,0 4px 5px #00000024,0 1px 10px #0000001f;background-color:#fff;color:#000000de;padding:16px}.ngx-mat-colorpicker-content .ngx-mat-color-palette{width:296px;height:354px}.ngx-mat-colorpicker-content-touch{display:block;max-height:80vh;overflow:auto}.ngx-mat-colorpicker-content-touch .ngx-mat-color-palette{min-width:250px;min-height:312px;max-width:750px;max-height:788px}@media all and (orientation: landscape){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-colorpicker-content-touch .ngx-mat-color-palette{width:80vw;height:100vw}}\n"],encapsulation:2,data:{animation:[MN.transformPanel,MN.fadeInCalendar]},changeDetection:0}),i})(),LN=(()=>{class i{constructor(e,n,r,s,o,a,l,c){this._dialog=e,this._overlay=n,this._zone=r,this._adapter=s,this._dir=o,this._document=l,this._viewContainerRef=c,this.openedStream=new Fe,this.closedStream=new Fe,this._touchUi=!1,this._opened=!1,this._defaultColor="primary",this._validSelected=null,this._disabledChange=new De,this._focusedElementBeforeOpen=null,this._inputSubscription=J.EMPTY,this._selectedChanged=new De,this._scrollStrategy=a}get disabled(){return void 0===this._disabled&&this._pickerInput?this._pickerInput.disabled:!!this._disabled}set disabled(e){const n=kt(e);n!==this._disabled&&(this._disabled=n,this._disabledChange.next(n))}get touchUi(){return this._touchUi}set touchUi(e){this._touchUi=kt(e)}get opened(){return this._opened}set opened(e){e?this.open():this.close()}get defaultColor(){return this._defaultColor}set defaultColor(e){this._defaultColor=e}get color(){return this._color||(this._pickerInput?this._pickerInput.getThemePalette():void 0)}set color(e){this._color=e}get _selected(){return this._validSelected}set _selected(e){this._validSelected=e}ngOnInit(){}ngOnDestroy(){this.close(),this._inputSubscription.unsubscribe(),this._disabledChange.complete(),this._popupRef&&(this._popupRef.dispose(),this._popupComponentRef=null)}select(e){let n=this._selected;this._selected=e,this._adapter.sameColor(n,this._selected)||this._selectedChanged.next(e)}registerInput(e){if(this._pickerInput)throw Error("A ColorPicker can only be associated with a single input.");this._pickerInput=e,this._inputSubscription=this._pickerInput._valueChange.subscribe(n=>this._selected=n)}open(){if(!this._opened&&!this.disabled){if(!this._pickerInput)throw Error("Attempted to open an ColorPicker with no associated input.");this._document&&(this._focusedElementBeforeOpen=this._document.activeElement),this.touchUi?this._openAsDialog():this._openAsPopup(),this._opened=!0,this.openedStream.emit()}}_openAsDialog(){this._dialogRef&&this._dialogRef.close(),this._dialogRef=this._dialog.open(FN,{direction:this._dir?this._dir.value:"ltr",viewContainerRef:this._viewContainerRef,panelClass:"ngx-mat-colorpicker-dialog"}),this._dialogRef.afterClosed().subscribe(()=>this.close()),this._dialogRef.componentInstance.picker=this,this._setColor()}_openAsPopup(){this._portal||(this._portal=new bc(FN,this._viewContainerRef)),this._popupRef||this._createPopup(),this._popupRef.hasAttached()||(this._popupComponentRef=this._popupRef.attach(this._portal),this._popupComponentRef.instance.picker=this,this._setColor(),this._zone.onStable.asObservable().pipe(oi(1)).subscribe(()=>{this._popupRef.updatePosition()}))}_createPopup(){const e=new Ru({positionStrategy:this._createPopupPositionStrategy(),hasBackdrop:!0,backdropClass:"mat-overlay-transparent-backdrop",direction:this._dir,scrollStrategy:this._scrollStrategy(),panelClass:"mat-colorpicker-popup"});this._popupRef=this._overlay.create(e),this._popupRef.overlayElement.setAttribute("role","dialog"),gr(this._popupRef.backdropClick(),this._popupRef.detachments(),this._popupRef.keydownEvents().pipe(Qt(n=>27===n.keyCode||this._pickerInput&&n.altKey&&38===n.keyCode))).subscribe(n=>{n&&n.preventDefault(),this.close()})}close(){if(!this._opened)return;this._popupRef&&this._popupRef.hasAttached()&&this._popupRef.detach(),this._dialogRef&&(this._dialogRef.close(),this._dialogRef=null),this._portal&&this._portal.isAttached&&this._portal.detach();const e=()=>{this._opened&&(this._opened=!1,this.closedStream.emit(),this._focusedElementBeforeOpen=null)};this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus?(this._focusedElementBeforeOpen.focus(),setTimeout(e)):e()}_setColor(){const e=this.color;this._popupComponentRef&&(this._popupComponentRef.instance.color=e),this._dialogRef&&(this._dialogRef.componentInstance.color=e)}_createPopupPositionStrategy(){return this._overlay.position().flexibleConnectedTo(this._pickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".ngx-mat-colorpicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition().withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"}])}}return i.\u0275fac=function(e){return new(e||i)(x(Cc),x(yr),x(lt),x(SC),x(co,8),x(ON),x(Lt,8),x(lr))},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-picker"]],inputs:{disabled:"disabled",touchUi:"touchUi",opened:"opened",defaultColor:"defaultColor",color:"color"},outputs:{openedStream:"opened",closedStream:"closed"},exportAs:["ngxMatColorPicker"],decls:0,vars:0,template:function(e,n){},encapsulation:2,changeDetection:0}),i})();class gv{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}}const lre={provide:Zr,useExisting:An(()=>_v),multi:!0},cre={provide:rr,useExisting:An(()=>_v),multi:!0};let _v=(()=>{class i{constructor(e,n,r,s){if(this._elementRef=e,this._formField=n,this._colorFormats=r,this._adapter=s,this.colorChange=new Fe,this.colorInput=new Fe,this._disabledChange=new Fe,this._valueChange=new Fe,this._onTouched=()=>{},this._cvaOnChange=()=>{},this._validatorOnChange=()=>{},this._pickerSubscription=J.EMPTY,this._validator=zs.compose([]),this._lastValueValid=!1,!this._colorFormats)throw function Qie(i){return Error(`NgxMatColorPicker: No provider found for ${i}. You must define MAT_COLOR_FORMATS in your module`)}("MAT_COLOR_FORMATS")}set ngxMatColorPicker(e){e&&(this._picker=e,this._picker.registerInput(this),this._pickerSubscription.unsubscribe(),this._pickerSubscription=this._picker._selectedChanged.subscribe(n=>{this.value=n,this._cvaOnChange(n),this._onTouched(),this.colorInput.emit(new gv(this,this._elementRef.nativeElement)),this.colorChange.emit(new gv(this,this._elementRef.nativeElement))}))}get disabled(){return!!this._disabled}set disabled(e){const n=kt(e),r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this._disabledChange.emit(n)),n&&r.blur&&r.blur()}get value(){return this._value}set value(e){const n=this.value;this._value=e,this._formatValue(e),this._adapter.sameColor(n,e)||this._valueChange.emit(e)}getThemePalette(){return this._formField?this._formField.color:void 0}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}getPopupConnectionElementRef(){return this.getConnectedOverlayOrigin()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}ngOnInit(){}ngOnDestroy(){this._pickerSubscription.unsubscribe(),this._valueChange.complete(),this._disabledChange.complete()}writeValue(e){this.value=e}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onChange(){this.colorChange.emit(new gv(this,this._elementRef.nativeElement))}_onKeydown(e){this._picker&&e.altKey&&40===e.keyCode&&!this._elementRef.nativeElement.readOnly&&(this._picker.open(),e.preventDefault())}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e?this._adapter.format(e,this._colorFormats.display.colorInput):""}_onInput(e){const n=this._lastValueValid,r=this._adapter.parse(e);this._adapter.sameColor(r,this._value)?n!==this._lastValueValid&&this._validatorOnChange():(this._value=r,this._cvaOnChange(r),this._valueChange.emit(r),this.colorInput.emit(new gv(this,this._elementRef.nativeElement)))}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(vs,8),x(PN,8),x(SC))},i.\u0275dir=ge({type:i,selectors:[["input","ngxMatColorPicker",""]],hostVars:3,hostBindings:function(e,n){1&e&&de("input",function(s){return n._onInput(s.target.value)})("change",function(){return n._onChange()})("blur",function(){return n._onBlur()})("keydown",function(s){return n._onKeydown(s)}),2&e&&(To("disabled",n.disabled),xt("aria-haspopup",n._picker?"dialog":null)("aria-owns",(null==n._picker?null:n._picker.opened)&&n._picker.id||null))},inputs:{ngxMatColorPicker:"ngxMatColorPicker",disabled:"disabled",value:"value"},outputs:{colorChange:"colorChange",colorInput:"colorInput"},exportAs:["ngxMatColorPickerInput"],features:[ln([lre,cre,{provide:rC,useExisting:i}])]}),i})(),dre=(()=>{class i{constructor(e){this._cd=e,this._stateChanges=J.EMPTY}get disabled(){if(null==this._disabled&&this.picker)return this.picker.disabled}set disabled(e){this._disabled=e}ngOnInit(){}ngOnChanges(e){e.picker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}open(e){this.picker&&!this.disabled&&(this.picker.open(),e.stopPropagation())}_watchStateChanges(){const e=this.picker?this.picker._disabledChange:dt(),n=this.picker&&this.picker._pickerInput?this.picker._pickerInput._disabledChange:dt(),r=this.picker?gr(this.picker.openedStream,this.picker.closedStream):dt();this._stateChanges.unsubscribe(),this._stateChanges=gr(e,n,r).subscribe(()=>this._cd.markForCheck())}}return i.\u0275fac=function(e){return new(e||i)(x(yn))},i.\u0275cmp=Xe({type:i,selectors:[["ngx-mat-color-toggle"]],viewQuery:function(e,n){if(1&e&&pn(jie,5),2&e){let r;ft(r=mt())&&(n._button=r.first)}},hostAttrs:[1,"ngx-mat-color-toggle"],hostVars:7,hostBindings:function(e,n){1&e&&de("focus",function(){return n._button.focus()}),2&e&&(xt("tabindex",-1),Ut("ngx-mat-color-toggle-active",n.picker&&n.picker.opened)("mat-accent",n.picker&&"accent"===n.picker.color)("mat-warn",n.picker&&"warn"===n.picker.color))},inputs:{picker:["for","picker"],tabIndex:"tabIndex",disabled:"disabled"},exportAs:["ngxMatColorPickerToggle"],features:[Pi],decls:4,vars:5,consts:[["mat-icon-button","","type","button",3,"disabled","click"],["button",""]],template:function(e,n){1&e&&(S(0,"button",0,1),de("click",function(s){return n.open(s)}),S(2,"mat-icon"),H(3,"palette"),A()()),2&e&&(T("disabled",n.disabled),xt("aria-haspopup",n.picker?"dialog":null)("tabindex",n.disabled?-1:n.tabIndex),k(2),Xr("color",null==n.picker||null==n.picker._selected?null:n.picker._selected.rgba))},dependencies:[j_,$u],styles:[".mat-form-field-appearance .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field-appearance .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .ngx-mat-color-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-prefix .mat-icon-button .ngx-mat-color-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance) .mat-form-field-suffix .mat-icon-button .ngx-mat-color-toggle-default-icon{margin:auto}\n"],encapsulation:2}),i})(),ure=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[SC,ore],imports:[nr,If,Ml,_N,Sie,ZF,kf,xf,yc,Ff]}),i})();const hre=["picker"],pre=function(i){return{"background-color":i}};function fre(i,t){if(1&i){const e=en();S(0,"div",5),de("click",function(r){const o=nt(e).index;return it($().onColorClicked(r.currentTarget,o))}),A()}if(2&i){const e=t.$implicit,n=t.index,r=$();T("ngStyle",su(2,pre,"#"+r.lpad(e.toString(16),"0",8)))("matTooltip",n+": #"+e.toString(16))}}const mre=function(){return["colors"]};let gre=(()=>{class i{resource=null;get resourceData(){return this.resource?.data}changed=new Fe;picker;constructor(){}lpad(e,n,r){for(;e.length<r;)e=n+e;return e}selectedIndex=null;onColorClicked(e,n){if(!this.resourceData)return void(this.selectedIndex=null);this.selectedIndex=n;const r=this.resourceData.colors[n]||0;this.picker.select(new Lc((4278190080&r)>>>24,(16711680&r)>>>16,(65280&r)>>>8,255&r)),this.picker.open();const s=new KO;s.top(Math.min(e.offsetTop,window.innerHeight-450)+"px"),s.left(Math.min(e.offsetLeft,window.innerWidth-380)+"px"),this.picker._popupRef.updatePositionStrategy(s),s.apply()}onColorChange(e){this.resourceData?null!==this.selectedIndex&&(this.resourceData.colors[this.selectedIndex]=e?parseInt(e.toHex8String().substring(1),16):0,this.changed.emit()):this.selectedIndex=null}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-palette-block-ui"]],viewQuery:function(n,r){if(1&n&&pn(hre,5),2&n){let s;ft(s=mt())&&(r.picker=s.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:6,vars:5,consts:[[3,"resource","fieldBlacklist"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip","click",4,"ngFor","ngForOf"],["matInput","",1,"hidden",3,"ngxMatColorPicker","colorChange"],["picker",""],[1,"color-box",3,"ngStyle","matTooltip","click"]],template:function(n,r){if(1&n&&(pe(0,"app-compound-block-ui",0),S(1,"div",1),Z(2,fre,1,4,"div",2),A(),S(3,"input",3),de("colorChange",function(o){return r.onColorChange(o.value)}),A(),pe(4,"ngx-mat-color-picker",null,4)),2&n){const s=Hn(5);T("resource",r.resource)("fieldBlacklist",$i(4,mre)),k(2),T("ngForOf",null==r.resourceData?null:r.resourceData.colors),k(1),T("ngxMatColorPicker",s)}},dependencies:[cr,Jg,$s,wr,_v,LN,Fo],styles:["#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0})}return i})();const _re=["editorBody"];function vre(i,t){if(1&i&&(S(0,"div",11),H(1),A()),2&i){const e=$().$implicit;k(1),bn(e.offset)}}function bre(i,t){if(1&i){const e=en();S(0,"input",12),de("input",function(r){const o=nt(e).index,a=$().index;return it($().onHexInput(r,a,o))})("focus",function(r){const o=nt(e).index;return it($(2).onHexFocus(r,o))})("blur",function(r){return nt(e),it($(2).onHexBlur(r))}),A()}if(2&i){const e=t.$implicit,n=t.index;T("id","hex_input__"+$().index+"__"+n)("value",e[0])("disabled",null===e[0])}}function yre(i,t){1&i&&pe(0,"div",3)}function xre(i,t){if(1&i){const e=en();S(0,"span",15),de("click",function(){const s=nt(e).index,o=$(2).index;return it($().blurInput(o,s))}),H(1),A()}if(2&i){const e=t.$implicit,n=t.index;T("id","utf_char__"+$(2).index+"__"+n),k(1),bn(e[1])}}function wre(i,t){if(1&i&&(S(0,"div",13),Z(1,xre,2,2,"span",14),A()),2&i){const e=$().$implicit,n=$();k(1),T("ngForOf",e.values)("ngForTrackBy",n.trackByIndex)}}function Mre(i,t){if(1&i&&(S(0,"div",5),Z(1,vre,2,1,"div",6),Oe(2,"async"),S(3,"div",7),Z(4,bre,1,3,"input",8),A(),Z(5,yre,1,0,"div",9),Oe(6,"async"),Oe(7,"async"),Z(8,wre,2,2,"div",10),Oe(9,"async"),A()),2&i){const e=t.$implicit,n=t.index,r=$();Ut("gray",n%2!=0),k(1),T("ngIf",Ne(2,7,r._showOffsets$)),k(3),T("ngForOf",e.values)("ngForTrackBy",r.trackByIndex),k(1),T("ngIf",Ne(6,9,r._showOffsets$)||Ne(7,11,r._showUtf8$)),k(3),T("ngIf",Ne(9,13,r._showUtf8$))}}function Cre(i,t){if(1&i){const e=en();S(0,"div",16)(1,"button",17),de("click",function(){return nt(e),it($().changePage(-1))}),Oe(2,"async"),H(3,"Previous"),A(),S(4,"span"),H(5),Oe(6,"async"),Oe(7,"async"),A(),S(8,"button",17),de("click",function(){return nt(e),it($().changePage(1))}),Oe(9,"async"),Oe(10,"async"),H(11," Next "),A()()}if(2&i){const e=$();k(1),T("disabled",0===Ne(2,4,e.currentPage$)),k(4),cc("Page ",(Ne(6,6,e.currentPage$)||0)+1," of ",Ne(7,8,e.totalPages$),""),k(3),T("disabled",(Ne(9,10,e.currentPage$)||0)>=(Ne(10,12,e.totalPages$)||0)-1)}}let Sre=(()=>{class i{set maxColumns(e){this._maxColumns$.next(e)}set maxRows(e){this._maxRows$.next(e)}set showOffsets(e){this._showOffsets$.next(e)}set showUtf8(e){this._showUtf8$.next(e)}set data(e){if(e!==this._data$.value){if(e.length===this._data$.value.length){for(let n=0;n<e.length&&e[n]===this._data$.value[n];n++);return}this._data$.next(e)}}get data(){return this._data$.value}constructor(e){this.cdr=e,this._maxColumns$=new Be(0),this._maxRows$=new Be(0),this._showOffsets$=new Be(!0),this._showUtf8$=new Be(!0),this._data$=new Be(new Uint8Array),this.readOnly=!1,this.dataChange=new Fe,this.currentPage$=new Be(0),this.totalPages$=new Be(1),this.pageSize$=new Be([0,0]),this.renderedRows$=new Be([]),this.viewportSize$=new Be([0,0]),this.destroyed$=new De}renderValue(e){return null==e?[null,"\u2205"]:[e.toString(16).padStart(2,"0").toUpperCase(),e>=32&&e<=126?String.fromCharCode(e):"."]}ngAfterViewInit(){new ResizeObserver(e=>{for(const n of e)this.viewportSize$.next([n.contentRect.width,n.contentRect.height])}).observe(this.editorBody.nativeElement),Ls([this.viewportSize$,this._maxColumns$,this._maxRows$,this._showOffsets$,this._showUtf8$]).pipe(ke(this.destroyed$),cf(50)).subscribe(([[e,n],r,s,o,a])=>{let l=e-8;o&&(l-=68);let c=34;a&&(l-=8,c+=10);let u=Math.floor(l/c);r>0&&u>r&&(u=r);let h=this.pageSize$.value[0];u===h+1&&l/c%1<.5&&(u=h),u=Math.max(1,u);let p=Math.floor(n/28);s>0&&p>s&&(p=s),p=Math.max(1,p),(u!=this.pageSize$.value[0]||p!==this.pageSize$.value[1])&&this.pageSize$.next([u,p])}),Ls([this._data$,this.currentPage$,this.pageSize$]).pipe(ke(this.destroyed$)).subscribe(([e,n,r])=>{if(0===r[0]||0===r[1])return;let s=Math.max(1,Math.ceil(Math.ceil(e.length/r[0])/r[1]));if(this.totalPages$.value!==s&&this.totalPages$.next(s),n>=s)return void this.currentPage$.next(n=s-1);const o=[];for(let a=n*r[0]*r[1];a<Math.min(e.length,(n+1)*r[0]*r[1]);a+=r[0]){const l=[];for(let c=0;c<r[0];c++)l.push(this.renderValue(e[a+c]));o.push({values:l,offset:a.toString(16).padStart(8,"0").toUpperCase()})}this.renderedRows$.next(o),this.cdr.detectChanges()})}changePage(e){let n=Math.min(Math.max(this.currentPage$.value+e,0),this.totalPages$.value-1);this.currentPage$.value!==n&&(this.currentPage$.next(n),this.cdr.detectChanges())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}trackByIndex(e){return e}blurInput(e,n){const r=this.editorBody.nativeElement.querySelector(`#hex_input__${e}__${n}`);return!!r&&(r.focus(),!0)}goToNextInput(e){const[n,r,s]=e.split("__");this.blurInput(+r,+s+1)||this.blurInput(+r+1,0)||this.currentPage$.value<this.totalPages$.value-1&&(this.changePage(1),this.blurInput(0,0))}onHexInput(e,n,r){const s=e.target;if(this.readOnly)return void(s.value=this.renderedRows$.value[n].values[r][0]);const o=s.value.replace(/[^0-9a-fA-F]/g,"");if(s.value=o.toUpperCase(),2===o.length){const a=parseInt(o,16);!isNaN(a)&&a>=0&&a<=255&&(this.data[(this.currentPage$.value*this.pageSize$.value[1]+n)*this.pageSize$.value[0]+r]=a,this.renderedRows$.value[n].values[r]=this.renderValue(a),this.cdr.detectChanges(),this.dataChange.emit(this.data),this.goToNextInput(s.id))}}onHexFocus(e,n){const r=e.target,s=r.closest(".row");s&&s.querySelectorAll(".utf8-values span").forEach((a,l)=>{a.classList.toggle("highlight",l===n)}),r.select()}onHexBlur(e){const r=e.target.closest(".row");r&&r.querySelectorAll(".utf8-values span").forEach(o=>{o.classList.remove("highlight")})}}return i.\u0275fac=function(e){return new(e||i)(x(yn))},i.\u0275cmp=Xe({type:i,selectors:[["hex-editor"]],viewQuery:function(e,n){if(1&e&&pn(_re,5),2&e){let r;ft(r=mt())&&(n.editorBody=r.first)}},inputs:{maxColumns:"maxColumns",maxRows:"maxRows",showOffsets:"showOffsets",showUtf8:"showUtf8",data:"data",readOnly:"readOnly"},outputs:{dataChange:"dataChange"},decls:7,vars:7,consts:[[1,"editor-body"],["editorBody",""],["class","row",3,"gray",4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex-spacer"],["class","pagination",4,"ngIf"],[1,"row"],["class","offset",4,"ngIf"],[1,"hex-values"],["maxlength","2",3,"id","value","disabled","input","focus","blur",4,"ngFor","ngForOf","ngForTrackBy"],["class","flex-spacer",4,"ngIf"],["class","utf8-values",4,"ngIf"],[1,"offset"],["maxlength","2",3,"id","value","disabled","input","focus","blur"],[1,"utf8-values"],[3,"id","click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"id","click"],[1,"pagination"],[3,"disabled","click"]],template:function(e,n){1&e&&(S(0,"div",0,1),Z(2,Mre,10,15,"div",2),Oe(3,"async"),pe(4,"div",3),A(),Z(5,Cre,12,14,"div",4),Oe(6,"async")),2&e&&(k(2),T("ngForOf",Ne(3,3,n.renderedRows$))("ngForTrackBy",n.trackByIndex),k(3),T("ngIf",(Ne(6,5,n.totalPages$)||0)>1))},dependencies:[cr,On,Fr],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;font-family:monospace}.editor-body[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;overflow-y:hidden}.row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:24px;margin-bottom:4px}.row.gray[_ngcontent-%COMP%]{background-color:#d3d3d3}.offset[_ngcontent-%COMP%]{width:60px;text-align:left;margin-right:8px}.hex-values[_ngcontent-%COMP%]{display:flex;gap:2px;flex-shrink:1;overflow-x:clip}.hex-values[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:32px;text-align:center;box-sizing:border-box}.utf8-values[_ngcontent-%COMP%]{margin-left:8px}.utf8-values[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:8px;margin-left:2px;color:#000}.utf8-values[_ngcontent-%COMP%]   span.highlight[_ngcontent-%COMP%]{background-color:#ff0}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1em}.flex-spacer[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),i})(),Ere=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[nr]}),i})();const Are=["editor"];let Dre=(()=>{class i{editorDiv;_resource=null;get resource(){return this._resource}set resource(e){this._resource=e,this.data$.next(new Uint8Array(e?e.data:0))}empty=new Uint8Array;data$=new Be(new Uint8Array);resourceDescription="";disabled=!1;changed=new Fe;constructor(){}onDataChange(e){this._resource.data=Array.from(e),this.changed.emit()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-binary-block-ui"]],viewQuery:function(n,r){if(1&n&&pn(Are,5),2&n){let s;ft(s=mt())&&(r.editorDiv=s.first)}},inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:5,vars:10,consts:[["matTooltipPosition","above",3,"matTooltip"],[3,"data","maxColumns","showOffsets","readOnly","dataChange"]],template:function(n,r){1&n&&(S(0,"h2",0),H(1),A(),S(2,"hex-editor",1),de("dataChange",function(o){return r.onDataChange(o)}),Oe(3,"async"),Oe(4,"async"),A()),2&n&&(T("matTooltip",r.resourceDescription),k(1),bn(null==r.resource?null:r.resource.name),k(1),T("data",Ne(3,6,r.data$)||r.empty)("maxColumns",8)("showOffsets",(Ne(4,8,r.data$)||r.empty).length>16)("readOnly",r.disabled))},dependencies:[wr,Sre,Fr],styles:["hex-editor[_ngcontent-%COMP%]{min-height:20rem}"],changeDetection:0})}return i})();const Tre=["picker"];function kre(i,t){if(1&i&&(S(0,"mat-label",8),H(1),A()),2&i){const e=$();k(1),bn(null==e.resource?null:e.resource.name)}}const Ire=function(i){return{transform:i}};let Rre=(()=>{class i{cdr;resource=null;resourceDescription="";changed=new Fe;pi=Math.PI;dragging=!1;picker;mousedown(e){this.dragging=!0,this.updateRotation(e)}mousemove(e){this.dragging&&this.updateRotation(e)}mouseout(){this.dragging=!1}constructor(e){this.cdr=e}updateRotation(e){const n=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(e.clientY-n.top-n.height/2,e.clientX-n.left-n.width/2);e.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resource.data=r,this.changed.emit(),this.cdr.markForCheck()}static \u0275fac=function(n){return new(n||i)(x(yn))};static \u0275cmp=Xe({type:i,selectors:[["app-angle-block-ui"]],viewQuery:function(n,r){if(1&n&&pn(Tre,5),2&n){let s;ft(s=mt())&&(r.picker=s.first)}},hostBindings:function(n,r){1&n&&de("mousedown",function(o){return r.mousedown(o)})("mousemove",function(o){return r.mousemove(o)})("mouseup",function(){return r.mouseout()})("mouseleave",function(){return r.mouseout()})},inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:14,vars:13,consts:[["id","wrapper","matTooltipPosition","above",3,"matTooltip"],[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span",4,"ngIf"],["id","name-span"]],template:function(n,r){1&n&&(S(0,"div",0)(1,"div",1,2)(3,"div",3),pe(4,"div",4)(5,"div",5),A()(),S(6,"div",6),Z(7,kre,2,1,"mat-label",7),S(8,"mat-label"),H(9),Oe(10,"number"),A(),S(11,"mat-label"),H(12),Oe(13,"number"),A()()()),2&n&&(T("matTooltip",r.resourceDescription),k(3),T("ngStyle",su(11,Ire,"rotate("+((null==r.resource?null:r.resource.data)||0)+"rad)")),k(4),T("ngIf",null==r.resource?null:r.resource.name),k(2),hi("",Mx(10,5,180*(null==r.resource?null:r.resource.data)/r.pi||0,"1.2-2")," deg"),k(3),hi("",Mx(13,8,(null==r.resource?null:r.resource.data)||0,"1.2-2")," rad"))},dependencies:[On,Jg,xr,wr,$R],styles:["#wrapper[_ngcontent-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0})}return i})();class EC{constructor(){}deepEquals(t,e){if(null===t&&null!==e)return!1;if(null===e&&null!==t)return!1;if(!0===Array.isArray(t)){if(!1===Array.isArray(e))return!1;if(t.length!==e.length)return!1;{const n=new Set,r=new Set,s=new Set,o=new Set;for(const u of t)!0===Array.isArray(u)?n.add(u):"object"==typeof u?r.add(u):"function"==typeof u?o.add(JSON.stringify(""+u)):s.add(u);const a=new Set,l=new Set,c=new Set,d=new Set;for(const u of e)!0===Array.isArray(u)?a.add(u):"object"==typeof u?l.add(u):"function"==typeof u?d.add(JSON.stringify(""+u)):c.add(u);if(s.size!==c.size)return!1;{let u=!0;for(const h of s)if(!1===c.has(h)){u=!1;break}if(!1===u)return!1;if(r.size===l.size){u=!0;for(const h of r){let p=!1;for(const f of l)if(!0===this.deepEquals(h,f)){p=!0;break}if(!1===p){u=!1;break}}if(!1===u)return!1;if(n.size===a.size){u=!0;for(const h of n){let p=!1;for(const f of a)if(!0===this.deepEquals(h,f)){p=!0;break}if(!1===p){u=!1;break}}if(!1===u)return!1;if(o.size===d.size){u=!0;for(const h of o)if(!1===d.has(h)){u=!1;break}return!1!==u}return!1}return!1}return!1}}}if("object"==typeof t&&null!==t){if("object"!=typeof e)return!1;{let n=!0;if(Object.keys(t).length===Object.keys(e).length){for(const[r,s]of Object.entries(t))if(n=this.deepEquals(s,e[r]),!1===n)break}else n=!1;return n}}return!0!==Array.isArray(e)&&("object"!=typeof e||null===e)&&("function"==typeof t?"function"==typeof e&&JSON.stringify(""+t)===JSON.stringify(""+e):JSON.stringify(t)===JSON.stringify(e))}}function Pre(i,t){if(1&i){const e=en();S(0,"mat-list-option",3),de("dblclick",function(){const s=nt(e).$implicit;return it($().onDoubleClick(s))}),H(1),A()}if(2&i){const e=t.$implicit,n=$();T("value",e)("selected",n.selectedValue==e),k(1),hi(" ",e," ")}}function Ore(i,t){if(1&i&&(S(0,"mat-card"),pe(1,"app-editor",4),A()),2&i){const e=$();k(1),T("resource",e.resources[e.selectedValue])}}let vv=(()=>{class i{deep;navigation;_resources={};get resources(){return this._resources}set resources(e){const n=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(e));this._resources=e,n&&(this.selectedValue=Object.keys(e).length>0?Object.keys(e)[0]:null)}_selectedValue=null;set selectedValue(e){this._selectedValue=e}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}constructor(e,n){this.deep=e,this.navigation=n}onDoubleClick(e){this.navigation.navigateToId(this.resources[e].id)}static \u0275fac=function(n){return new(n||i)(x(EC),x(Ic))};static \u0275cmp=Xe({type:i,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected","dblclick",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected","dblclick"],[3,"resource"]],template:function(n,r){1&n&&(S(0,"mat-selection-list",0),de("selectionChange",function(o){return r.selectedValue=o.source.selectedOptions.selected[0].value}),Z(1,Pre,2,3,"mat-list-option",1),A(),Z(2,Ore,2,1,"mat-card",2)),2&n&&(T("multiple",!1),k(1),T("ngForOf",r.keys),k(1),T("ngIf",r.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit;scroll-snap-align:start;scroll-margin:.5rem}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;max-height:calc(100vh - 54px - 1rem);overflow-y:auto;max-width:33%;flex-shrink:0;padding:0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]{background-color:#e0e0e0}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]   mat-list-option[aria-selected=true][_ngcontent-%COMP%]:focus{background-color:unset}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]     .mdc-radio{display:none}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%;padding:1rem}"],changeDetection:0})}return i})(),Fre=(()=>{class i{_resource=null;get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(r=>"children"===r.name)?.schema.child_schema;if(n)for(let r=0;r<this.resourceData.children.length;r++)this.resourceMap[r.toString()]={id:ys(this._resource?.id||"",`children/${r}`),data:this.resourceData.children[r],schema:n,name:""}}get resourceData(){return this._resource?.data}resourceMap={};changed=new Fe;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-wwww-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(n,r){1&n&&pe(0,"app-sidenav-res-list",0),2&n&&T("resources",r.resourceMap)},dependencies:[vv],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0})}return i})();function Lre(i,t){if(1&i&&(S(0,"mat-label"),H(1),A()),2&i){const e=$(3);k(1),bn(e.resource.name)}}function Nre(i,t){if(1&i&&(S(0,"mat-option",6),H(1),A()),2&i){const e=t.$implicit,n=$(3);T("value",e[1])("disabled",n.disabled),k(1),hi(" ",e[1]," ")}}function Bre(i,t){if(1&i){const e=en();S(0,"mat-form-field",3),Z(1,Lre,2,1,"mat-label",0),S(2,"mat-select",4),de("valueChange",function(r){return nt(e),it($(2).resource.data=r)})("selectionChange",function(){return nt(e),it($(2).changed.emit())}),Z(3,Nre,2,3,"mat-option",5),A()()}if(2&i){const e=$(2);T("matTooltip",e.resourceDescription),k(1),T("ngIf",e.resource.name),k(1),T("value",e.resource.data)("disabled",e.disabled),k(1),T("ngForOf",e.resource.schema.enum_names)}}function Ure(i,t){if(1&i&&(S(0,"mat-label"),H(1),A()),2&i){const e=$(3);k(1),bn(e.resource.name)}}function Vre(i,t){if(1&i){const e=en();S(0,"mat-form-field",3),Z(1,Ure,2,1,"mat-label",0),S(2,"input",7),de("ngModelChange",function(r){return nt(e),it($(2).resource.data=r)})("change",function(){return nt(e),it($(2).changed.emit())}),A()()}if(2&i){const e=$(2);T("matTooltip",e.resourceDescription),k(1),T("ngIf",e.resource.name),k(1),T("min",0)("max",256*(e.resource.schema.length||1)-1)("ngModel",e.resource.data)}}function zre(i,t){if(1&i&&(Si(0),Z(1,Bre,4,5,"mat-form-field",1),Z(2,Vre,3,5,"ng-template",null,2,so),Ei()),2&i){const e=Hn(3),n=$();k(1),T("ngIf",n.isKnownEnumValue(n.resource.data))("ngIfElse",e)}}let Hre=(()=>{class i{resource=null;resourceDescription="";disabled=!1;changed=new Fe;isKnownEnumValue(e){return!!this.resource?.schema.enum_names.find(([n,r])=>r==e)}constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-enum-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","fill","matTooltipPosition","above",3,"matTooltip",4,"ngIf","ngIfElse"],["unknownEnum",""],["appearance","fill","matTooltipPosition","above",3,"matTooltip"],[3,"value","disabled","valueChange","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange","change"]],template:function(n,r){1&n&&Z(0,zre,4,2,"ng-container",0),2&n&&T("ngIf",r.resource)},dependencies:[cr,On,_s,la,Hs,$a,Ha,aa,vs,xr,$s,wr,Rc,wl],changeDetection:0})}return i})();const $re=["*"],jre=["unscopedContent"];function Wre(i,t){1&i&&Ft(0,4)}function Yre(i,t){if(1&i&&(S(0,"div",11),pe(1,"input",12),S(2,"div",13),Yr(),S(3,"svg",14),pe(4,"path",15),A(),dl(),pe(5,"div",16),A()()),2&i){const e=$();Ut("mdc-checkbox--disabled",e.disabled),k(1),T("checked",e.selected)("disabled",e.disabled)}}function Xre(i,t){if(1&i&&(S(0,"div",17),pe(1,"input",18),S(2,"div",19),pe(3,"div",20)(4,"div",21),A()()),2&i){const e=$();Ut("mdc-radio--disabled",e.disabled),k(1),T("checked",e.selected)("disabled",e.disabled)}}function qre(i,t){}function Kre(i,t){if(1&i&&(S(0,"span",22),Z(1,qre,0,0,"ng-template",23),A()),2&i){$();const e=Hn(3);k(1),T("ngTemplateOutlet",e)}}function Zre(i,t){}function Qre(i,t){if(1&i&&(S(0,"span",24),Z(1,Zre,0,0,"ng-template",23),A()),2&i){$();const e=Hn(5);k(1),T("ngTemplateOutlet",e)}}function Jre(i,t){}function ese(i,t){1&i&&Z(0,Jre,0,0,"ng-template",23),2&i&&($(),T("ngTemplateOutlet",Hn(1)))}function tse(i,t){}function nse(i,t){if(1&i&&(S(0,"span",25),Z(1,tse,0,0,"ng-template",23),A()),2&i){$();const e=Hn(3);k(1),T("ngTemplateOutlet",e)}}function ise(i,t){}function rse(i,t){if(1&i&&(S(0,"span",25),Z(1,ise,0,0,"ng-template",23),A()),2&i){$();const e=Hn(5);k(1),T("ngTemplateOutlet",e)}}function sse(i,t){}function ose(i,t){1&i&&Z(0,sse,0,0,"ng-template",23),2&i&&($(),T("ngTemplateOutlet",Hn(1)))}const ase=[[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["mat-divider"]],[["","matListItemAvatar",""],["","matListItemIcon",""]]],lse=["[matListItemTitle]","[matListItemLine]","*","mat-divider","[matListItemAvatar],[matListItemIcon]"],NN=new ue("ListOption");let cse=(()=>{class i{constructor(e){this._elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(x(ht))},i.\u0275dir=ge({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"]}),i})(),dse=(()=>{class i{constructor(e){this._elementRef=e}}return i.\u0275fac=function(e){return new(e||i)(x(ht))},i.\u0275dir=ge({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"]}),i})(),BN=(()=>{class i{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||"after"===this._listOption?._getTogglePosition()}}return i.\u0275fac=function(e){return new(e||i)(x(NN,8))},i.\u0275dir=ge({type:i,hostVars:4,hostBindings:function(e,n){2&e&&Ut("mdc-list-item__start",n._isAlignedAtStart())("mdc-list-item__end",!n._isAlignedAtStart())}}),i})(),use=(()=>{class i extends BN{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],features:[Je]}),i})(),hse=(()=>{class i extends BN{}return i.\u0275fac=function(){let t;return function(n){return(t||(t=ui(i)))(n||i)}}(),i.\u0275dir=ge({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],features:[Je]}),i})();const pse=new ue("MAT_LIST_CONFIG");let AC=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=$t(pse,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=kt(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=kt(e)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ge({type:i,hostVars:1,hostBindings:function(e,n){2&e&&xt("aria-disabled",n.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"}}),i})(),UN=(()=>{class i{set lines(e){this._explicitLines=dr(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=kt(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=kt(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,r,s,o,a){this._elementRef=e,this._ngZone=n,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new J,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement="button"===this._hostElement.nodeName.toLowerCase(),this._noopAnimations="NoopAnimations"===a,r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),null!==this._rippleRenderer&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!(!this._avatars.length&&!this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Lu(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(gr(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();const n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",2===n),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",3===n),this._hasUnscopedTextContent){const s=0===this._titles.length&&1===n;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!(!e.textContent||!e.textContent.trim()))}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt),x(AC,8),x(fi),x(MM,8),x(Fi,8))},i.\u0275dir=ge({type:i,contentQueries:function(e,n,r){if(1&e&&(yi(r,use,4),yi(r,hse,4)),2&e){let s;ft(s=mt())&&(n._avatars=s),ft(s=mt())&&(n._icons=s)}},hostVars:4,hostBindings:function(e,n){2&e&&(xt("aria-disabled",n.disabled)("disabled",n._isButtonElement&&n.disabled||null),Ut("mdc-list-item--disabled",n.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"}}),i})();const VN=new ue("SelectionList");let bv=(()=>{class i extends UN{get checkboxPosition(){return this.togglePosition}set checkboxPosition(e){this.togglePosition=e}get color(){return this._color||this._selectionList.color}set color(e){this._color=e}get value(){return this._value}set value(e){this.selected&&e!==this.value&&this._inputsInitialized&&(this.selected=!1),this._value=e}get selected(){return this._selectionList.selectedOptions.isSelected(this)}set selected(e){const n=kt(e);n!==this._selected&&(this._setSelected(n),(n||this._selectionList.multiple)&&this._selectionList._reportValueChange())}constructor(e,n,r,s,o,a,l){super(e,n,r,s,a,l),this._selectionList=r,this._changeDetectorRef=o,this.selectedChange=new Fe,this.togglePosition="after",this._selected=!1,this._inputsInitialized=!1}ngOnInit(){const e=this._selectionList;e._value&&e._value.some(r=>e.compareWith(this._value,r))&&this._setSelected(!0);const n=this._selected;Promise.resolve().then(()=>{(this._selected||n)&&(this.selected=!0,this._changeDetectorRef.markForCheck())}),this._inputsInitialized=!0}ngOnDestroy(){super.ngOnDestroy(),this.selected&&Promise.resolve().then(()=>{this.selected=!1})}toggle(){this.selected=!this.selected}focus(){this._hostElement.focus()}getLabel(){return(this._titles?.get(0)?._elementRef.nativeElement||this._unscopedContent?.nativeElement)?.textContent||""}_hasCheckboxAt(e){return this._selectionList.multiple&&this._getTogglePosition()===e}_hasRadioAt(e){return!this._selectionList.multiple&&this._getTogglePosition()===e&&!this._selectionList.hideSingleSelectionIndicator}_hasIconsOrAvatarsAt(e){return this._hasProjected("icons",e)||this._hasProjected("avatars",e)}_hasProjected(e,n){return this._getTogglePosition()!==n&&("avatars"===e?0!==this._avatars.length:0!==this._icons.length)}_handleBlur(){this._selectionList._onTouched()}_getTogglePosition(){return this.togglePosition||"after"}_setSelected(e){return e!==this._selected&&(this._selected=e,e?this._selectionList.selectedOptions.select(this):this._selectionList.selectedOptions.deselect(this),this.selectedChange.emit(e),this._changeDetectorRef.markForCheck(),!0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_toggleOnInteraction(){this.disabled||(this._selectionList.multiple?(this.selected=!this.selected,this._selectionList._emitChangeEvent([this])):this.selected||(this.selected=!0,this._selectionList._emitChangeEvent([this])))}_setTabindex(e){this._hostElement.setAttribute("tabindex",e+"")}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt),x(VN),x(fi),x(yn),x(MM,8),x(Fi,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-list-option"]],contentQueries:function(e,n,r){if(1&e&&(yi(r,dse,5),yi(r,cse,5)),2&e){let s;ft(s=mt())&&(n._lines=s),ft(s=mt())&&(n._titles=s)}},viewQuery:function(e,n){if(1&e&&pn(jre,5),2&e){let r;ft(r=mt())&&(n._unscopedContent=r.first)}},hostAttrs:["role","option",1,"mat-mdc-list-item","mat-mdc-list-option","mdc-list-item"],hostVars:25,hostBindings:function(e,n){1&e&&de("blur",function(){return n._handleBlur()})("click",function(){return n._toggleOnInteraction()}),2&e&&(xt("aria-selected",n.selected),Ut("mdc-list-item--selected",n.selected&&!n._selectionList.multiple&&n._selectionList.hideSingleSelectionIndicator)("mdc-list-item--with-leading-avatar",n._hasProjected("avatars","before"))("mdc-list-item--with-leading-icon",n._hasProjected("icons","before"))("mdc-list-item--with-trailing-icon",n._hasProjected("icons","after"))("mat-mdc-list-option-with-trailing-avatar",n._hasProjected("avatars","after"))("mdc-list-item--with-leading-checkbox",n._hasCheckboxAt("before"))("mdc-list-item--with-trailing-checkbox",n._hasCheckboxAt("after"))("mdc-list-item--with-leading-radio",n._hasRadioAt("before"))("mdc-list-item--with-trailing-radio",n._hasRadioAt("after"))("mat-accent","primary"!==n.color&&"warn"!==n.color)("mat-warn","warn"===n.color)("_mat-animation-noopable",n._noopAnimations))},inputs:{togglePosition:"togglePosition",checkboxPosition:"checkboxPosition",color:"color",value:"value",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[ln([{provide:UN,useExisting:i},{provide:NN,useExisting:i}]),Je],ngContentSelectors:lse,decls:20,vars:6,consts:[["icons",""],["checkbox",""],["radio",""],["class","mdc-list-item__start mat-mdc-list-option-checkbox-before",4,"ngIf"],["class","mdc-list-item__start mat-mdc-list-option-radio-before",4,"ngIf"],[3,"ngIf"],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],["unscopedContent",""],["class","mdc-list-item__end",4,"ngIf"],[1,"mat-mdc-focus-indicator"],[1,"mdc-checkbox"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","disabled"],[1,"mdc-checkbox__background"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],[1,"mdc-radio"],["type","radio",1,"mdc-radio__native-control",3,"checked","disabled"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],[1,"mdc-list-item__start","mat-mdc-list-option-checkbox-before"],[3,"ngTemplateOutlet"],[1,"mdc-list-item__start","mat-mdc-list-option-radio-before"],[1,"mdc-list-item__end"]],template:function(e,n){1&e&&(Ai(ase),Z(0,Wre,1,0,"ng-template",null,0,so),Z(2,Yre,6,4,"ng-template",null,1,so),Z(4,Xre,5,4,"ng-template",null,2,so),Z(6,Kre,2,1,"span",3),Z(7,Qre,2,1,"span",4),Z(8,ese,1,1,"ng-template",5),S(9,"span",6),Ft(10),Ft(11,1),S(12,"span",7,8),de("cdkObserveContent",function(){return n._updateItemLines(!0)}),Ft(14,2),A()(),Z(15,nse,2,1,"span",9),Z(16,rse,2,1,"span",9),Z(17,ose,1,1,"ng-template",5),Ft(18,3),pe(19,"div",10)),2&e&&(k(6),T("ngIf",n._hasCheckboxAt("before")),k(1),T("ngIf",n._hasRadioAt("before")),k(1),T("ngIf",n._hasIconsOrAvatarsAt("before")),k(7),T("ngIf",n._hasCheckboxAt("after")),k(1),T("ngIf",n._hasRadioAt("after")),k(1),T("ngIf",n._hasIconsOrAvatarsAt("after")))},dependencies:[t2,On,hu],styles:['.mat-mdc-list-option-with-trailing-avatar.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar.mdc-list-item,.mat-mdc-list-option-with-trailing-avatar.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end,.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{width:40px;height:40px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mat-mdc-list-option-with-trailing-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mat-mdc-list-option-with-trailing-avatar .mdc-list-item__end{border-radius:50%}.mat-mdc-list-option .mdc-touch-target-wrapper{display:inline}.mat-mdc-list-option .mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mat-mdc-list-option .mdc-checkbox[hidden]{display:none}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mat-mdc-list-option .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-list-option .mdc-checkbox__mixedmark{margin:0 1px}}.mat-mdc-list-option .mdc-checkbox--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color}.mat-mdc-list-option .mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0}.mdc-checkbox--upgraded .mat-mdc-list-option .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__checkmark-path{stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mat-mdc-list-option .mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mat-mdc-list-option .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mat-mdc-list-option .mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{opacity:1}.mat-mdc-list-option .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0}.mat-mdc-list-option .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mat-mdc-list-option .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mat-mdc-list-option .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mat-mdc-list-option .mdc-radio[hidden]{display:none}.mat-mdc-list-option .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-list-option .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:""}.mat-mdc-list-option .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%}.mat-mdc-list-option .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mat-mdc-list-option .mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mat-mdc-list-option .mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mat-mdc-list-option .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mat-mdc-list-option .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mat-mdc-list-option .mdc-radio--disabled{cursor:default;pointer-events:none}.mat-mdc-list-option .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5)}.mat-mdc-list-option .mdc-radio__native-control:disabled+.mdc-radio__background,.mat-mdc-list-option [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mat-mdc-list-option .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}@media all and (-ms-high-contrast: none){.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox .mdc-checkbox__focus-ring{display:none}}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__background{transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__mixedmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option:not(._mat-animation-noopable) .mdc-radio__native-control:focus+.mdc-radio__background::before{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-list-option .mdc-checkbox{padding:calc((40px - 18px) / 2);padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((40px - 40px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.38);border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:rgba(0, 0, 0, 0.38);background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:#fff;color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:#fff;border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:#018786;border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:#018786;background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:rgba(0, 0, 0, 0.54);border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-list-option .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__background{top:calc((40px - 18px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((40px - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-list-option .mdc-checkbox .mdc-checkbox__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-checkbox-state-layer-size, 40px);height:40px;height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio{padding:calc((40px - 20px) / 2);padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#000;border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:0.38;opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:#6200ee;border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:#000;border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-list-option .mdc-radio .mdc-radio__background::before{top:calc(-1 * (40px - 20px) / 2);top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (40px - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-radio .mdc-radio__native-control{top:calc((40px - 40px) / 2);top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((40px - 40px) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((40px - 40px) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:40px;width:var(--mdc-radio-state-layer-size, 40px);height:40px;height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-list-option .mdc-checkbox__native-control,.mat-mdc-list-option .mdc-radio__native-control{display:none}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active .mat-mdc-list-option.mdc-list-item--selected [dir=rtl]::after{right:auto;left:16px}'],encapsulation:2,changeDetection:0}),i})();const fse={provide:Zr,useExisting:An(()=>yv),multi:!0};class mse{constructor(t,e){this.source=t,this.options=e}}let yv=(()=>{class i extends AC{get multiple(){return this._multiple}set multiple(e){const n=kt(e);n!==this._multiple&&(this._multiple=n,this.selectedOptions=new oC(this._multiple,this.selectedOptions.selected))}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=kt(e)}constructor(e,n){super(),this._element=e,this._ngZone=n,this._initialized=!1,this._destroyed=new De,this._onChange=r=>{},this.selectionChange=new Fe,this.color="accent",this.compareWith=(r,s)=>r===s,this._multiple=!0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this.selectedOptions=new oC(this._multiple),this._onTouched=()=>{},this._selectionListDisabled=!1,this._handleFocusout=()=>{setTimeout(()=>{this._containsFocus()||this._resetActiveOption()})},this._handleFocusin=r=>{if(this.disabled)return;const s=this._items.toArray().findIndex(o=>o._elementRef.nativeElement.contains(r.target));s>-1?this._setActiveOption(s):this._resetActiveOption()},this._isNonInteractive=!1}ngAfterViewInit(){this._initialized=!0,this._setupRovingTabindex(),this._ngZone.runOutsideAngular(()=>{this._element.nativeElement.addEventListener("focusin",this._handleFocusin),this._element.nativeElement.addEventListener("focusout",this._handleFocusout)}),this._value&&this._setOptionsFromValues(this._value),this._watchForSelectionChange()}ngOnChanges(e){const n=e.disabled,r=e.disableRipple,s=e.hideSingleSelectionIndicator;(r&&!r.firstChange||n&&!n.firstChange||s&&!s.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._keyManager?.destroy(),this._element.nativeElement.removeEventListener("focusin",this._handleFocusin),this._element.nativeElement.removeEventListener("focusout",this._handleFocusout),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(e){this._element.nativeElement.focus(e)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_reportValueChange(){if(this.options&&!this._isDestroyed){const e=this._getSelectedOptionValues();this._onChange(e),this._value=e}}_emitChangeEvent(e){this.selectionChange.emit(new mse(this,e))}writeValue(e){this._value=e,this.options&&this._setOptionsFromValues(e||[])}setDisabledState(e){this.disabled=e}get disabled(){return this._selectionListDisabled}set disabled(e){this._selectionListDisabled=kt(e),this._selectionListDisabled&&this._keyManager?.setActiveItem(-1)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}_watchForSelectionChange(){this.selectedOptions.changed.pipe(ke(this._destroyed)).subscribe(e=>{for(let n of e.added)n.selected=!0;for(let n of e.removed)n.selected=!1;this._containsFocus()||this._resetActiveOption()})}_setOptionsFromValues(e){this.options.forEach(n=>n._setSelected(!1)),e.forEach(n=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,n));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(e=>e.selected).map(e=>e.value)}_markOptionsForCheck(){this.options&&this.options.forEach(e=>e._markForCheck())}_setAllOptionsSelected(e,n){const r=[];return this.options.forEach(s=>{(!n||!s.disabled)&&s._setSelected(e)&&r.push(s)}),r.length&&this._reportValueChange(),r}get options(){return this._items}_handleKeydown(e){const n=this._keyManager.activeItem;if(13!==e.keyCode&&32!==e.keyCode||this._keyManager.isTyping()||!n||n.disabled)if(65===e.keyCode&&this.multiple&&!this._keyManager.isTyping()&&Us(e,"ctrlKey")){const r=this.options.some(s=>!s.disabled&&!s.selected);e.preventDefault(),this._emitChangeEvent(this._setAllOptionsSelected(r,!0))}else this._keyManager.onKeydown(e);else e.preventDefault(),n._toggleOnInteraction()}_setupRovingTabindex(){this._keyManager=new c2(this._items).withHomeAndEnd().withTypeAhead().withWrap().skipPredicate(()=>this.disabled),this._resetActiveOption(),this._keyManager.change.subscribe(e=>this._setActiveOption(e)),this._items.changes.pipe(ke(this._destroyed)).subscribe(()=>{const e=this._keyManager.activeItem;(!e||!this._items.toArray().indexOf(e))&&this._resetActiveOption()})}_setActiveOption(e){this._items.forEach((n,r)=>n._setTabindex(r===e?0:-1)),this._keyManager.updateActiveItem(e)}_resetActiveOption(){if(this.disabled)return void this._setActiveOption(-1);const e=this._items.find(n=>n.selected&&!n.disabled)||this._items.first;this._setActiveOption(e?this._items.toArray().indexOf(e):-1)}_containsFocus(){const e=R_();return e&&this._element.nativeElement.contains(e)}}return i.\u0275fac=function(e){return new(e||i)(x(ht),x(lt))},i.\u0275cmp=Xe({type:i,selectors:[["mat-selection-list"]],contentQueries:function(e,n,r){if(1&e&&yi(r,bv,5),2&e){let s;ft(s=mt())&&(n._items=s)}},hostAttrs:["role","listbox",1,"mat-mdc-selection-list","mat-mdc-list-base","mdc-list"],hostVars:1,hostBindings:function(e,n){1&e&&de("keydown",function(s){return n._handleKeydown(s)}),2&e&&xt("aria-multiselectable",n.multiple)},inputs:{color:"color",compareWith:"compareWith",multiple:"multiple",hideSingleSelectionIndicator:"hideSingleSelectionIndicator",disabled:"disabled"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[ln([fse,{provide:AC,useExisting:i},{provide:VN,useExisting:i}]),Je,Pi],ngContentSelectors:$re,decls:1,vars:0,template:function(e,n){1&e&&(Ai(),Ft(0))},styles:['@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-base{--mdc-list-list-item-container-shape:0;--mdc-list-list-item-leading-avatar-shape:50%;--mdc-list-list-item-container-color:transparent;--mdc-list-list-item-selected-container-color:transparent;--mdc-list-list-item-leading-avatar-color:transparent;--mdc-list-list-item-leading-icon-size:24px;--mdc-list-list-item-leading-avatar-size:40px;--mdc-list-list-item-trailing-icon-size:24px;--mdc-list-list-item-disabled-state-layer-color:transparent;--mdc-list-list-item-disabled-state-layer-opacity:0;--mdc-list-list-item-disabled-label-text-opacity:0.38;--mdc-list-list-item-disabled-leading-icon-opacity:0.38;--mdc-list-list-item-disabled-trailing-icon-opacity:0.38}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] mat-action-list button{text-align:right}mat-action-list button::-moz-focus-inner{border:0}'],encapsulation:2,changeDetection:0}),i})(),gse=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({imports:[hM,nr,Cn,Nu,k2,Rf]}),i})();function _se(i,t){if(1&i&&(S(0,"mat-label"),H(1),A()),2&i){const e=$(2);k(1),bn(e.resource.name)}}function vse(i,t){if(1&i&&(S(0,"mat-list-option",5),H(1),A()),2&i){const e=t.$implicit,n=$(2);T("value",e.key)("selected",n.resource.data[e.key])("disabled",n.disabled),k(1),hi(" ",e.key," ")}}function bse(i,t){if(1&i){const e=en();Si(0,1),Z(1,_se,2,1,"mat-label",2),S(2,"mat-selection-list",3),de("selectionChange",function(r){return nt(e),it($().onSelection(r))}),Z(3,vse,2,4,"mat-list-option",4),Oe(4,"keyvalue"),A(),Ei()}if(2&i){const e=$();T("matTooltip",e.resourceDescription),k(1),T("ngIf",e.resource.name),k(1),T("disabled",e.disabled),k(1),T("ngForOf",Ne(4,4,e.resource.data))}}let yse=(()=>{class i{resource=null;resourceDescription="";disabled=!1;changed=new Fe;constructor(){}onSelection(e){for(const n of e.options)this.resource.data[n.value]=n.selected;this.changed.emit()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-flags-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",disabled:"disabled"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip"],[4,"ngIf"],[3,"disabled","selectionChange"],[3,"value","selected","disabled",4,"ngFor","ngForOf"],[3,"value","selected","disabled"]],template:function(n,r){1&n&&Z(0,bse,5,6,"ng-container",0),2&n&&T("ngIf",r.resource)},dependencies:[cr,On,xr,wr,yv,bv,zR],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0})}return i})();class zN{get tick$(){return this._tick$.asObservable()}get children(){return[...this._children]}constructor(t){this.parent=t,this._tick$=new De,this._children=[],t&&t.addChild(this)}addChild(t){if(t.parent!==this)throw new Error("Incorrect child clock");this._children.includes(t)||this._children.push(t)}removeChild(t){if(t.parent!==this)throw new Error("Incorrect child clock");this._children=this._children.filter(e=>e!==t)}dispose(){this.parent&&this.parent.removeChild(this);for(const t of this._children)t.dispose();this._tick$.complete()}}const wse=typeof performance>"u"?()=>Date.now():()=>performance.now();class Yu extends zN{static get instance(){return Yu._instance||(Yu._instance=new Yu),Yu._instance}get elapsedTime(){return wse()}constructor(){super(null);let t=this.elapsedTime;const e=()=>{requestAnimationFrame(e);const n=t,r=this.elapsedTime;t=r,this._tick$.next([n,r-n])};requestAnimationFrame(e)}dispose(){throw new Error("Cannot dispose global clock")}}class HN extends zN{get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get isStopped(){return-1===this.startedAt}get timeScale(){return this._timeScale}set timeScale(t){if(t!==this._timeScale||this.pausedByTimescale&&0!==t){if(0===t)return void(this.isPaused||(this.pause(),this.pausedByTimescale=!0));if(this.isPaused&&this.pausedByTimescale&&(this.resume(),this.pausedByTimescale=!1),!this.isStopped){const e=this.isPaused?this.pausedAt:this.parentClock.elapsedTime;this.startedAt=e-(e-this.startedAt)*this.timeScale/t}this._timeScale=t}}get elapsedTime(){return this.isStopped?this.lastStopElapsed:this.isPaused?this._timeScale*(this.pausedAt-this.startedAt):this._timeScale*(this.parentClock.elapsedTime-this.startedAt)}constructor(t=!1,e=Yu.instance){super(e),this.parentClock=e,this.tickSub=null,this._internalTick$=new De,this.tickRateLimit=0,this.paused$=new De,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,this.lastStopElapsed=0,this._timeScale=1,this.pausedByTimescale=!1,this.lastFiredTickElapsed=0,t&&this.start(),this._internalTick$.pipe(rt(([n,r])=>[r,r-this.lastFiredTickElapsed]),Qt(([n])=>!this.tickRateLimit||Math.floor(this.lastFiredTickElapsed*this.tickRateLimit/1e3)<Math.floor(n*this.tickRateLimit/1e3)),pi(([n])=>this.lastFiredTickElapsed=n)).subscribe(this._tick$)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.lastStopElapsed=this.elapsedTime,this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime,this.pausedByTimescale=!1,this.paused$.next(!0)}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks(),this.paused$.next(!1))}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(rt(([t,e])=>[this.oldRelativeTime,this.oldRelativeTime+e*this.timeScale]),pi(([t,e])=>this.oldRelativeTime=e)).subscribe(this._internalTick$)}stopListeningTicks(){var t;null===(t=this.tickSub)||void 0===t||t.unsubscribe(),this.tickSub=null}dispose(){this.stopListeningTicks(),this._internalTick$.complete(),super.dispose()}}const Mse={transparent:!1,background:0,size:"fullscreen",antialias:!0};class Cse{constructor(t,e,n={}){this.scene=t,this.canvas=e,this.entity=null,this.rendererOptions=Object.assign(Object.assign({},Mse),n||{})}}class Uf{static fromArray(t,e=!1){const n=new Uf(t[0]);let r=n;for(let s=1;s<t.length;s++){const o=new Uf(t[s]);r.addAdjacent(o),r=o}return e&&r.addAdjacent(n),n}static fromSquareGrid(t){const e=t.map(n=>n.map(r=>new Uf(r)));for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)r>0&&e[n][r].addAdjacent(e[n][r-1]),n>0&&e[n][r].addAdjacent(e[n-1][r]);return e[0][0]}constructor(t){this.data=t,this.adjacent=new Set}addAdjacent(t){return!this.adjacent.has(t)&&(this.adjacent.add(t),t.adjacent.add(this),!0)}removeAdjacent(t){return!!this.adjacent.has(t)&&(this.adjacent.delete(t),t.adjacent.delete(this),!0)}addEdge(t,e){return!!this.removeAdjacent(e)&&(this.addAdjacent(t),t.addAdjacent(e),!0)}removeEdge(t,e){return!(!t.adjacent.has(this)||!t.adjacent.has(e))&&(t.removeAdjacent(this),t.removeAdjacent(e),this.addAdjacent(e))}walkRead(t){const e=new Set,n=[[this,t]];for(e.add(this);n.length;){const r=n.shift(),[s,o]=r;if(0!==o){const a=Array.from(s.adjacent).filter(l=>!e.has(l));for(const l of a)e.add(l),n.push([l,o-1])}}return e}walkReadPreserveDepth(t){const e=new Set,n=[],r=[[this,t]];for(e.add(this);r.length;){const s=r.shift(),[o,a]=s,l=t-a;if(n[l]||(n[l]=new Set),n[l].add(o),0!==a){const c=Array.from(o.adjacent).filter(d=>!e.has(d));for(const d of c)e.add(d),r.push([d,a-1])}}return n}nodes(){return Array.from(this.walkRead(-1))}}var ca=(()=>{return(i=ca||(ca={}))[i.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",i[i.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",i[i.OBJECTS_BINDING=400]="OBJECTS_BINDING",i[i.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",i[i.CONTROLLERS=800]="CONTROLLERS",i[i.RENDERING=1e3]="RENDERING",i[i.POST_RENDERING=1200]="POST_RENDERING",ca;var i})();let Nc=(()=>{class i{constructor(){this.tick$=new De,this._world=null,this._name="e0x"+(i.default_name_counter++).toString(16),this._selfActive=!0,this.parent=null,this._children=[],this._components=[],this._onSpawned$=new De,this._onRemoved$=new De}get world(){return this._world}get name(){return this._name}set name(e){this._name=e}get active(){return this._selfActive&&(!this.parent||this.parent.active)}set active(e){this._selfActive=e}get children(){return[...this._children]}addChildren(...e){for(const n of e)n.parent&&n.parent.removeChildren([n]),n.parent=this;if(this._children.push(...e),this._world)for(const n of e)this._world.addEntity(n)}removeChildren(e,n=!1){this._children=this._children.filter(r=>!e.includes(r));for(const r of e)r.parent=null,this._world&&this._world.removeEntity(r,n)}get components(){return[...this._components]}addComponents(...e){for(const n of e)n.entity&&n.entity.removeComponents([n]),n.entity=this;if(this._components.push(...e),this._world)for(const n of e)n.addToWorld(this._world)}removeComponents(e,n=!1){this._components=this._components.filter(r=>!e.includes(r));for(const r of e)r.entity=null,this._world&&r.removeFromWorld(this._world,n)}get onSpawned$(){return this._onSpawned$.asObservable()}get onRemoved$(){return this._onRemoved$.asObservable()}onSpawned(e){this._world=e;for(const n of this._components)n.addToWorld(e);for(const n of this._children)e.addEntity(n);this._onSpawned$.next()}onRemoved(){const e=this._world;this._world=null;for(const n of this._children)e.removeEntity(n);for(const n of this._components)n.removeFromWorld(e,!1);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this,!1),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const e of this._children)e.dispose();for(const e of this._components)e.dispose()}}return i.default_name_counter=0,i})();class Sse extends Nc{constructor(t){super(),this.tickOrder=t}}function Bc(i,t=ca.CONTROLLERS,e){const n=new Sse(t);return e&&(n.name=e),i.addEntity(n),n.tick$.pipe(gl(()=>{i.removeEntity(n,!0)}))}class $N extends Nc{get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}get rendererOptions(){return this.renderer.rendererOptions}get physicsDebugViewActive(){return this.renderer.physicsDebugViewActive}set physicsDebugViewActive(t){this.renderer.physicsDebugViewActive=t}constructor(t){super(),this.renderer=t,this.tickOrder=ca.RENDERING,this._rendererSize$=new Be(null),this.addComponents(t),this.tick$.subscribe(()=>{this.renderer.render()})}onSpawned(t){this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||"function"==typeof this.rendererOptions.size?(this.renderer.canvas&&(this.renderer.canvas.style.position="absolute"),gr(gs(window,"resize").pipe(cf(100)),gs(window,"orientationchange")).pipe(ke(this._onRemoved$),rt(()=>({x:window.innerWidth,y:window.innerHeight})),ms({x:window.innerWidth,y:window.innerHeight})).subscribe(e=>{this._rendererSize$.next("function"==typeof this.rendererOptions.size?this.rendererOptions.size(e):e)})):this.rendererOptions.size instanceof Nn||void 0!==this.rendererOptions.size.subscribe&&void 0!==this.rendererOptions.size.pipe?this.rendererOptions.size.pipe(ke(this._onRemoved$)).subscribe(e=>{this._rendererSize$.next(e)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(ke(this._onRemoved$),Po((e,n)=>e?.x==n?.x&&e?.y==n?.y)).subscribe(e=>{e&&this.renderer.resizeRenderer(e)}),super.onSpawned(t)}dispose(){super.dispose(),this._rendererSize$.complete()}}const DC=i=>{i.updateVisibility?i.updateVisibility():GN(i)},GN=i=>{for(const t of i.children)DC(t)};class Ese extends Nc{constructor(){super(...arguments),this._visible=!0}get visible(){return this._visible}get worldVisible(){let t=this;for(;;){if(!1===t.visible)return!1;if(!t.parent)break;t=t.parent}return!0}set visible(t){this._visible=t,this.updateVisibility()}updateVisibility(){GN(this)}addChildren(...t){super.addChildren(...t);for(const e of t)DC(e)}removeChildren(t,e=!1){if(super.removeChildren(t,e),!e)for(const n of t)DC(n)}}class TC{constructor(){this._running=!1,this.stop$=new De}get running(){return this._running}start(...t){this.running||(this.startInternal(...t),this._running=!0)}stop(...t){this.running&&(this.stop$.next(),this.stopInternal(...t),this._running=!1)}stopInternal(...t){}}class Ase extends TC{get output$(){return this._output$.asObservable()}constructor(t,e){super(),this.keyboard=t,this.keymap=e,this._output$=new De}startInternal(){const t=[[],[],[],[]];this.keymap.includes("wasd")&&(t[0].push("KeyW"),t[1].push("KeyA"),t[2].push("KeyS"),t[3].push("KeyD")),this.keymap.includes("arrows")&&(t[0].push("ArrowUp"),t[1].push("ArrowLeft"),t[2].push("ArrowDown"),t[3].push("ArrowRight")),Ls(t.map(e=>this.keyboard.bindMany(...e))).pipe(ke(this.stop$),rt(e=>{const n={};if(e.includes(!0)){const[r,s,o,a]=e;r!=o&&(n.upDown=r),s!=a&&(n.leftRight=s)}return n})).subscribe(e=>this._output$.next(e))}}const kC=new Nn(Nt);class xv extends TC{constructor(){super(),this.bindings={},this.skipKeyDownsOnExternalFocus=!0,this.handleKeys=this.handleKeys.bind(this),this.resetAllKeys=this.resetAllKeys.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this)}startInternal(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys),window.addEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange)}stopInternal(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys),window.removeEventListener("blur",this.resetAllKeys),document.addEventListener("pointerlockchange",this.onPointerLockChange),this.resetAllKeys()}bind(t){this.bindings[t]||(this.bindings[t]=[]);const e=new Be(!1);return this.bindings[t].push(e),e.pipe(Po(),gl(()=>{this.bindings[t].splice(this.bindings[t].indexOf(e),1),e.complete()}))}bindMany(...t){if(0==t.length)return console.warn("[KeyboardController] bindMany called without any key code"),kC;if(1==t.length)return this.bind(t[0]);const e=[];for(const n of t){this.bindings[n]||(this.bindings[n]=[]);const r=new Be(!1);this.bindings[n].push(r),e.push(r)}return Ls(e).pipe(gl(()=>{for(let n=0;n<t.length;n++)this.bindings[t[n]].splice(this.bindings[t[n]].indexOf(e[n]),1),e[n].complete()}),rt(n=>n.includes(!0)),Po())}emulateKeyDown(t){if(this.running)for(const e of this.bindings[t]||[])e.next(!0)}emulateKeyUp(t){if(this.running)for(const e of this.bindings[t]||[])e.next(!1)}emulateKeyPress(t){this.emulateKeyDown(t),this.emulateKeyUp(t)}handleKeys(t){if("keydown"!=t.type&&"keyup"!=t.type)return;const e="keydown"==t.type;if(e&&this.skipKeyDownsOnExternalFocus&&document.activeElement)for(const n of xv.externalFocusBlacklist)if(document.activeElement instanceof n)return;for(const n of this.bindings[t.code]||[])n.next(e)}onPointerLockChange(){document.pointerLockElement||this.resetAllKeys()}resetAllKeys(){for(const t in this.bindings)for(const e of this.bindings[t]||[])e.next(!1)}}xv.externalFocusBlacklist=[HTMLInputElement,HTMLTextAreaElement,HTMLSelectElement,HTMLButtonElement];const IC=(i,t,e)=>{for(;Math.abs(i-t)>Math.PI;)t+=Math.PI*(i>t?2:-2);return i*(1-e)+t*e};class Tn{static get O(){return{x:0,y:0}}static get X(){return{x:1,y:0}}static get Y(){return{x:0,y:1}}static get nX(){return{x:-1,y:0}}static get nY(){return{x:0,y:-1}}static clone(t){return{x:t.x,y:t.y}}static spr(t){return[t.x,t.y]}static neg(t){return{x:-t.x,y:-t.y}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y}}static scale(t,e){return{x:t.x*e.x,y:t.y*e.y}}static avg(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}static round(t){return{x:Math.round(t.x),y:Math.round(t.y)}}static lenSq(t){return t.x*t.x+t.y*t.y}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static dist(t,e){return Tn.len(Tn.sub(t,e))}static norm(t){const e=Tn.len(t);return{x:t.x/e,y:t.y/e}}static scalarMult(t,e){return{x:t.x*e,y:t.y*e}}static dot(t,e){return t.x*e.x+t.y*e.y}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}static slerp(t,e,n){const r=Tn.toPolar(t),s=Tn.toPolar(e);return Tn.fromPolar({radius:r.radius+n*(s.radius-r.radius),phi:IC(r.phi,s.phi,n)})}static angle(t,e){const n=Tn.len(t)*Tn.len(e);return Math.acos(Tn.dot(t,e)/n)}static rot(t,e){const n=Math.cos(e),r=Math.sin(e);return{x:t.x*n-t.y*r,y:t.x*r+t.y*n}}static rotAround(t,e,n){const r=Math.cos(n),s=Math.sin(n),o_x=t.x-e.x,o_y=t.y-e.y;return{x:o_x*r-o_y*s+e.x,y:o_x*s+o_y*r+e.y}}static toPolar(t){const e=Math.sqrt(t.x*t.x+t.y*t.y);return{radius:e,phi:0==e?0:Math.atan2(t.y,t.x)}}static fromPolar(t){return{x:t.radius*Math.cos(t.phi),y:t.radius*Math.sin(t.phi)}}}const Tse={pointerLock:!1};var Br=(()=>{return(i=Br||(Br={}))[i.NONE=0]="NONE",i[i.DRAG=1]="DRAG",i[i.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",i[i.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",i[i.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",Br;var i})();class Xu extends TC{static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$||(this._wheel$=gs(this._element,"wheel",{passive:!1}).pipe(ke(this.stopped$),gl(()=>this._wheel$=null),pi(t=>t.preventDefault()),rt(t=>t.deltaY),Cy())),this._wheel$}get isPointerLocked(){return!!document.pointerLockElement}get isPointerLocked$(){return gs(document,"pointerlockchange").pipe(rt(()=>this.isPointerLocked))}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(Lr(t=>t==Br.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:kC),rt(t=>t.map(e=>({x:e.x,y:e.y}))),function Dse(){return ii((i,t)=>{let e,n=!1;i.subscribe(Zn(t,r=>{const s=e;e=r,n&&t.next([s,r]),n=!0}))})}(),Qt(([t,e])=>t.length>1&&e.length>1),rt(([t,e])=>({centerPointDelta:Tn.sub(Tn.scalarMult(e.reduce((n,r)=>Tn.add(n,r),Tn.O),1/e.length),Tn.scalarMult(t.reduce((n,r)=>Tn.add(n,r),Tn.O),1/e.length)),angleDelta:Tn.angle(e[1],e[0])-Tn.angle(t[1],t[0]),distanceDelta:Tn.dist(e[1],e[0])-Tn.dist(t[1],t[0])})))}get _element(){return this.options.canvas||window}constructor(t={}){super(),this._wheel$=null,this._delta$=new De,this._position$=new Be(Tn.O),this._multiTouchPositions$=new Be([]),this.stopped$=new De,this._state$=new Be(Br.NONE),this.options=Object.assign(Object.assign({},Tse),t),this.canvasClickListener=this.canvasClickListener.bind(this)}startInternal(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(Br.NONE);const t=[Br.DRAG,Br.DRAG_MIDDLE_BUTTON,Br.DRAG_RIGHT_BUTTON],e=[Br.NONE,Br.DRAG,Br.DRAG_TOUCH_TWO_FINGERS],n=[],r={};gs(this._element,"mousemove").pipe(ke(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),gs(this._element,"pointermove").pipe(ke(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!Xu.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<n.length;a++)if(n[a].pointerId==o.pointerId){n.splice(a,1);break}0===n.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),window.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(e[Math.min(n.length,2)])};gs(this._element,"pointerdown").pipe(ke(this.stopped$)).subscribe(o=>{if(0===n.length)try{this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),window.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)}catch(a){console.error(a)}n.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(e[Math.min(n.length,2)])):this._state$.next(t[o.button]||Br.NONE)}),gs(this._element,"contextmenu").pipe(ke(this.stopped$)).subscribe(o=>{o.preventDefault()})}stopInternal(t=!0){this.stopped$.next(),t&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())}canvasClickListener(){this.options.canvas.requestPointerLock()}}class kse{static lookAt(t,e,n){let r=xe.sub(t,e);r=0===xe.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):xe.norm(r);let s=xe.cross(n,r);0===xe.lenSq(s)&&(r=1===Math.abs(n.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=xe.norm(r),s=xe.cross(n,r)),s=xe.norm(s);let o=xe.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}class ai{static get O(){return{x:0,y:0,z:0,w:1}}static clone(t){return{x:t.x,y:t.y,z:t.z,w:t.w}}static spr(t){return[t.x,t.y,t.z,t.w]}static add(t,e){const n=t.w+e.w,r=t.x+e.x,s=t.y+e.y,o=t.z+e.z,a=Math.sqrt(n*n+r*r+s*s+o*o);return{w:n/a,x:r/a,y:s/a,z:o/a}}static mult(t,e){return{w:t.w*e.w-t.x*e.x-t.y*e.y-t.z*e.z,x:t.w*e.x+t.x*e.w+t.y*e.z-t.z*e.y,y:t.w*e.y-t.x*e.z+t.y*e.w+t.z*e.x,z:t.w*e.z+t.x*e.y-t.y*e.x+t.z*e.w}}static conjugate(t){return{x:-t.x,y:-t.y,z:-t.z,w:t.w}}static opposite(t){return{x:-t.x,y:-t.y,z:-t.z,w:-t.w}}static combineRotations(...t){let e={w:1,x:0,y:0,z:0};for(const n of t)e=this.mult(e,n);return e}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y),z:t.z+n*(e.z-t.z),w:t.w+n*(e.w-t.w)}}static slerp(t,e,n){let s=Math.acos(t.x*e.x+t.y*e.y+t.z*e.z+t.w*e.w),o=Math.sin(s),a=t.x*Math.sin((1-n)*s)/o+e.x*Math.sin(n*s)/o,l=t.y*Math.sin((1-n)*s)/o+e.y*Math.sin(n*s)/o,c=t.z*Math.sin((1-n)*s)/o+e.z*Math.sin(n*s)/o,d=t.w*Math.sin((1-n)*s)/o+e.w*Math.sin(n*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(d)?ai.clone(t):{x:a,y:l,z:c,w:d}}static fromAngle(t,e){const n=e/2,r=Math.sin(n);return Object.assign(Object.assign({},xe.scalarMult(t,r)),{w:Math.cos(n)})}static fromMatrix4(t){const e=t[0],n=t[4],r=t[8],s=t[1],o=t[5],a=t[9],l=t[2],c=t[6],d=t[10],u=e+o+d;if(u>0){const h=.5/Math.sqrt(u+1);return{x:(c-a)*h,y:(r-l)*h,z:(s-n)*h,w:.25/h}}if(e>o&&e>d){const h=2*Math.sqrt(1+e-o-d);return{x:.25*h,y:(n+s)/h,z:(r+l)/h,w:(c-a)/h}}if(o>d){const h=2*Math.sqrt(1+o-e-d);return{x:(n+s)/h,y:.25*h,z:(a+c)/h,w:(r-l)/h}}{const h=2*Math.sqrt(1+d-e-o);return{x:(r+l)/h,y:(a+c)/h,z:.25*h,w:(s-n)/h}}}static fromMatrix3(t){const e=t[0][0]+t[1][1]+t[2][2];let n,r,s,o;if(e>0){const a=.5/Math.sqrt(e+1);n=.25/a,r=(t[2][1]-t[1][2])*a,s=(t[0][2]-t[2][0])*a,o=(t[1][0]-t[0][1])*a}else if(t[0][0]>t[1][1]&&t[0][0]>t[2][2]){const a=2*Math.sqrt(1+t[0][0]-t[1][1]-t[2][2]);n=(t[2][1]-t[1][2])/a,r=.25*a,s=(t[0][1]+t[1][0])/a,o=(t[0][2]+t[2][0])/a}else if(t[1][1]>t[2][2]){const a=2*Math.sqrt(1+t[1][1]-t[0][0]-t[2][2]);n=(t[0][2]-t[2][0])/a,r=(t[0][1]+t[1][0])/a,s=.25*a,o=(t[1][2]+t[2][1])/a}else{const a=2*Math.sqrt(1+t[2][2]-t[0][0]-t[1][1]);n=(t[1][0]-t[0][1])/a,r=(t[0][2]+t[2][0])/a,s=(t[1][2]+t[2][1])/a,o=.25*a}return{w:n,x:r,y:s,z:o}}static fromEuler(t){const e=t.x,n=t.y,r=t.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*n),l=Math.sin(.5*n),c=Math.cos(.5*e),d=Math.sin(.5*e);return{w:c*a*s+d*l*o,x:d*a*s-c*l*o,y:c*l*s+d*a*o,z:c*a*o-d*l*s}}static toEuler(t){const e=t.w,n=t.x,r=t.y,s=t.z,c=2*(e*r-s*n);return{x:Math.atan2(2*(e*n+r*s),1-2*(n*n+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(e*s+n*r),1-2*(r*r+s*s))}}static lookAt(t,e,n=xe.Z){return this.fromMatrix4(kse.lookAt(t,e,n))}static rotAround(t,e,n){const r=Math.sin(n/2),s={w:Math.cos(n/2),x:e.x*r,y:e.y*r,z:e.z*r};return this.mult(s,t)}}class xe{static get O(){return{x:0,y:0,z:0}}static get X(){return{x:1,y:0,z:0}}static get Y(){return{x:0,y:1,z:0}}static get Z(){return{x:0,y:0,z:1}}static get nX(){return{x:-1,y:0,z:0}}static get nY(){return{x:0,y:-1,z:0}}static get nZ(){return{x:0,y:0,z:-1}}static clone(t){return{x:t.x,y:t.y,z:t.z}}static spr(t){return[t.x,t.y,t.z]}static neg(t){return{x:-t.x,y:-t.y,z:-t.z}}static add(t,e){return{x:t.x+e.x,y:t.y+e.y,z:t.z+e.z}}static sub(t,e){return{x:t.x-e.x,y:t.y-e.y,z:t.z-e.z}}static scale(t,e){return{x:t.x*e.x,y:t.y*e.y,z:t.z*e.z}}static avg(t,e){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2,z:(t.z+e.z)/2}}static round(t){return{x:Math.round(t.x),y:Math.round(t.y),z:Math.round(t.z)}}static lenSq(t){return t.x*t.x+t.y*t.y+t.z*t.z}static len(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static dist(t,e){return xe.len(xe.sub(t,e))}static cross(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return{x:r*l-s*a,y:s*o-n*l,z:n*a-r*o}}static norm(t){const e=xe.len(t);return 0===e?t:{x:t.x/e,y:t.y/e,z:t.z/e}}static scalarMult(t,e){return{x:t.x*e,y:t.y*e,z:t.z*e}}static dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static lerp(t,e,n){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y),z:t.z+n*(e.z-t.z)}}static slerp(t,e,n){const r=xe.toSpherical(t),s=xe.toSpherical(e);return xe.fromSpherical({radius:r.radius+n*(s.radius-r.radius),phi:IC(r.phi,s.phi,n),theta:IC(r.theta,s.theta,n)})}static angle(t,e){const n=xe.len(t)*xe.len(e);let r=xe.dot(t,e)/n;return r=Math.min(1,Math.max(r,-1)),Math.acos(r)}static rot(t,e){const{x:n,y:r,z:s}=t;return{x:e.w*e.w*n+2*e.y*e.w*s-2*e.z*e.w*r+e.x*e.x*n+2*e.y*e.x*r+2*e.z*e.x*s-e.y*e.y*n-e.z*e.z*n,y:2*e.x*e.y*n+e.y*e.y*r+2*e.z*e.y*s+2*e.w*e.z*n-e.z*e.z*r+e.w*e.w*r-2*e.x*e.w*s-e.x*e.x*r,z:2*e.x*e.z*n+2*e.y*e.z*r+e.z*e.z*s-2*e.w*e.y*n-e.y*e.y*s+2*e.w*e.x*r-e.x*e.x*s+e.w*e.w*s}}static rotAround(t,e,n){return this.rot(t,ai.fromAngle(e,n))}static toSpherical(t){const e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return{radius:e,theta:0==e?0:Math.atan2(t.y,t.x),phi:0==e?0:Math.atan2(Math.sqrt(t.x*t.x+t.y*t.y),t.z)}}static fromSpherical(t){return{x:t.radius*Math.sin(t.phi)*Math.cos(t.theta),y:t.radius*Math.sin(t.phi)*Math.sin(t.theta),z:t.radius*Math.cos(t.phi)}}}function RC(i,t,e,n){return r=>r.pipe(Sw((s,o)=>{var a;return{targetValue:o,currentValue:null!==(a=s.currentValue)&&void 0!==a?a:o,hasReachedTarget:!1}},{targetValue:null,currentValue:null,hasReachedTarget:!1}),Lr(s=>i.pipe(rt(([o,a])=>{if(null===s.targetValue||null===s.currentValue)return s.currentValue;if(s.hasReachedTarget)return;const l=1-Math.exp(-a/t),c=e(s.currentValue,s.targetValue,l);return s.currentValue=c,n(c,s.targetValue)?(s.hasReachedTarget=!0,s.targetValue):c}))),rt(s=>void 0!==s?s:null),Qt(s=>null!==s))}O(3738);class Pse extends Nc{get avgReport(){return this._avgReport}get peakReport(){return this._peakReport}constructor(t=60,e=15){super(),this.maxSamples=t,this.maxRows=e,this.tickOrder=Number.MAX_SAFE_INTEGER,this.sampleIndex=0,this.collectedData=new Map,this._avgReport={totalTime:0,entries:[]},this._peakReport={totalTime:0,entries:[]}}onSpawned(t){super.onSpawned(t),this.sampleIndex=0;const e=()=>(typeof performance>"u"?Date:performance).now();this.world.tickForwardTo$.pipe(ke(this.onRemoved$)).subscribe(n=>{n!==this&&(this.collectedData.has(n)?this.collectedData.get(n).push([this.sampleIndex,e(),0]):this.collectedData.set(n,[[this.sampleIndex,e(),0]]))}),this.world.tickForwardedTo$.pipe(ke(this.onRemoved$)).subscribe(n=>{if(n===this)return;const r=this.collectedData.get(n);r[r.length-1][2]=e()}),this.tick$.pipe(ke(this.onRemoved$)).subscribe(()=>{this.sampleIndex++;const n=Array.from(this.collectedData.entries());for(const[u,h]of n){for(;h.length>0&&h[0][0]<this.sampleIndex-this.maxSamples;)h.shift();0===h.length&&this.collectedData.delete(u)}const r=u=>u instanceof Nc?""===u.name?u.constructor.name:u.name:"PHYSICS_WORLD"===u?"Physics simulation":u,s=u=>{let h=0,p=0;for(;p<u.length-2;p++){if(this.maxRows>u.length-p+1){p--;break}h+=u[u.length-p-1][1]}return p>1&&(u=u.slice(0,u.length-p)).push([`Rest (${p})`,h]),u};let o=0,a=Array.from(this.collectedData.entries()).map(([u,h])=>{const p=h.reduce((f,[g,m,_])=>f+_-m,0)/this.maxSamples;return o+=p,[r(u),p]}).sort((u,h)=>h[1]-u[1]);a=s(a),this._avgReport={totalTime:o,entries:a};let l=new Map,c=Array.from(this.collectedData.entries()).map(([u,h])=>{let p=0;for(const[f,g,m]of h){const _=m-g;p=Math.max(p,_),l.set(f,_+(l.get(f)||0))}return[r(u),p]}).sort((u,h)=>h[1]-u[1]);c=s(c);let d=Array.from(l.values()).reduce((u,h)=>Math.max(u,h),0);this._peakReport={totalTime:d,entries:c}})}onRemoved(){super.onRemoved(),this.collectedData=new Map,this._avgReport={totalTime:0,entries:[]},this._peakReport={totalTime:0,entries:[]}}}var qu=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};class Lo{static get documentWorlds(){return[...Lo._documentWorlds]}get renderers(){return this.tickListeners.filter(t=>t instanceof $N)}constructor(t){this.worldClock=new HN(!1),this.keyboardInput=new xv,this.name="w0x"+(Lo.default_name_counter++).toString(16),this.children=[],this.tickListeners=[],this.tickStarted$=new De,this.tickForwardTo$=new De,this.tickForwardedTo$=new De,this.paused$=new De,this.disposed$=new De,this.visualScene=t.visualScene||null,this.physicsWorld=t.physicsWorld||null,this.keyboardInput.start(),window.ggstatic?this.registerConsoleCommands(window.ggstatic):(this.onGgStaticInitialized=this.onGgStaticInitialized.bind(this),window.addEventListener("ggstatic_added",this.onGgStaticInitialized)),this.worldClock.paused$.subscribe(this.paused$),Lo._documentWorlds.push(this),Lo.worldCreated$.next(this)}init(){return qu(this,void 0,void 0,function*(){const t=[];this.visualScene&&t.push(this.visualScene.init()),this.physicsWorld&&t.push(this.physicsWorld.init()),yield Promise.all(t);const e=(n,r,s)=>{n.active&&(this.tickForwardTo$.next(n),n.tick$.next([r,s]),this.tickForwardedTo$.next(n))};this.worldClock.tick$.subscribe(([n,r])=>{this.tickStarted$.next();let s=0;for(;s<this.tickListeners.length&&!(this.tickListeners[s].tickOrder>=ca.PHYSICS_SIMULATION);s++)e(this.tickListeners[s],n,r);for(this.physicsWorld&&(this.tickForwardTo$.next("PHYSICS_WORLD"),this.physicsWorld.simulate(r),this.tickForwardedTo$.next("PHYSICS_WORLD"));s<this.tickListeners.length;s++)e(this.tickListeners[s],n,r)})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(t){return new HN(t,this.worldClock)}dispose(){window.ggstatic?window.ggstatic.deregisterWorldCommands(this):window.removeEventListener("ggstatic_added",this.onGgStaticInitialized),this.worldClock.stop(),this.keyboardInput.stop(),this.tickStarted$.complete(),this.tickForwardTo$.complete(),this.tickForwardedTo$.complete();for(let t=0;t<this.children.length;t++)this.children[t].onRemoved(),this.children[t].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld&&this.physicsWorld.dispose(),this.visualScene&&this.visualScene.dispose(),Lo._documentWorlds.splice(Lo._documentWorlds.indexOf(this),1),this.disposed$.next(),this.disposed$.complete()}addEntity(t){t.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(t),this.tickListeners.push(t),this.tickListeners.sort((e,n)=>e.tickOrder-n.tickOrder),t.onSpawned(this))}removeEntity(t,e=!1){if(t.world){if(t.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(n=>n===t),1),this.tickListeners.splice(this.tickListeners.findIndex(n=>n===t),1),t.onRemoved()}e&&t.dispose()}onGgStaticInitialized(){window.removeEventListener("ggstatic_added",this.onGgStaticInitialized),this.registerConsoleCommands(window.ggstatic)}registerConsoleCommands(t){t.registerConsoleCommand(this,"timescale",(...e)=>qu(this,void 0,void 0,function*(){return isNaN(+e[0])||(this.worldClock.timeScale=+e[0]),this.worldClock.timeScale.toString()}),"args: [ float? ]; Get current time scale of selected world clock or set it. Default value is 1.0 (no time scale applied)"),t.registerConsoleCommand(this,"fps_limit",(...e)=>qu(this,void 0,void 0,function*(){return isNaN(+e[0])||(this.worldClock.tickRateLimit=+e[0]),this.worldClock.tickRateLimit.toString()}),"args: [ int? ]; Get current tick rate limit of selected world clock or set it. 0 means no limit applied"),t.registerConsoleCommand(this,"renderers",()=>qu(this,void 0,void 0,function*(){return this.renderers.map(e=>e.name).join("\n")}),"no args; Print all renderers in selected world"),t.registerConsoleCommand(this,"debug_view",(...e)=>qu(this,void 0,void 0,function*(){let r,n="toggle";for(let o of e)["1","0"].includes(o)?n="1"===o:r=o;let s=r?this.renderers.find(o=>o.name===r):this.renderers[0];if(s)return s.physicsDebugViewActive="toggle"===n?!s.physicsDebugViewActive:n,s.physicsDebugViewActive?"1":"0";throw r?new Error(`Renderer with name "${r}" not found`):new Error("No renderer found")}),'args: [ 0|1?, string? ]; Turn on/off physics debug view, skip first argument to toggle value. Second argument expects renderer name, if not provided first renderer will be picked. Use "renderers" to get list of renderers in the world'),t.registerConsoleCommand(this,"performance",(...e)=>qu(this,void 0,void 0,function*(){let n="avg",r=20;for(let d of e)["avg","peak"].includes(d)?n=d:isNaN(+d)||(r=+d);const s=new Pse(r,250);this.addEntity(s),yield function Ise(i,t){const e="object"==typeof t;return new Promise((n,r)=>{let o,s=!1;i.subscribe({next:a=>{o=a,s=!0},error:r,complete:()=>{s?n(o):e?n(t.defaultValue):r(new pu)}})})}(this.worldClock.tick$.pipe(oi(r)));const o="avg"===n?s.avgReport:s.peakReport;this.removeEntity(s);const a=o.entries.map(([d,u])=>`<span style='color:lightgray;'>${d}:</span>`+new Array(Math.max(0,26-d.length)).join("&nbsp;")+`${u.toFixed(2)} ms`+("avg"===n?` (${(100*u/o.totalTime).toFixed(2)}%)`:""));let l="lightgreen";o.totalTime>12&&(l=o.totalTime<16?"yellow":"red");const c=("avg"===n?"Average":"Peak")+" Frame time";return a.unshift(c+":"+new Array(Math.max(0,26-c.length)).join("&nbsp;")+`<span style='color:${l};'>${o.totalTime.toFixed(2)} ms</span>`),a.unshift(`Performance report (${r} samples)`),a.join("\n")}),'args: [ int?, avg|peak? ]; Measure how much time was spent per entity in world. Arguments are samples amount (20 by default) and "peak" or "avg" choice, both arguments are optional. "avg" report sorts entities by average time consumed, "peak" records highest value for each entity')}}Lo.default_name_counter=0,Lo._documentWorlds=[],Lo.worldCreated$=new De;class Nse extends Cse{}class WN extends Ese{constructor(){super(...arguments),this._world=null}get world(){return this._world}}class xs extends WN{get position(){return this._position}set position(t){this.object3D&&(this.object3D.position=t),this.objectBody&&(this.objectBody.position=t),this._position=t}get rotation(){return this._rotation}set rotation(t){this.object3D&&(this.object3D.rotation=t),this.objectBody&&(this.objectBody.rotation=t),this._rotation=t}updateVisibility(){this.object3D&&(this.object3D.visible=this.worldVisible),super.updateVisibility()}runTransformBinding(t,e){const n=t.position,r=t.rotation;e&&(e.position=n,e.rotation=r),this._position=n,this._rotation=r}constructor(t){super(),this.tickOrder=ca.OBJECTS_BINDING,this._position=xe.O,this._rotation=ai.O,this.object3D=null,this.objectBody=null,t.objectBody&&(this.objectBody=t.objectBody,this.name=this.objectBody.name,this.addComponents(this.objectBody)),t.object3D&&(this.object3D=t.object3D,t.objectBody||(this._position=this.object3D.position,this._rotation=this.object3D.rotation,this.name=this.object3D.name),this.addComponents(this.object3D)),this.objectBody&&(this.tick$.subscribe(()=>{this.runTransformBinding(this.objectBody,this.object3D)}),this.runTransformBinding(this.objectBody,this.object3D))}}class Uc extends Uf{static fromMapArray(t,e=!1){const n=new Uc(t[0]);let r=n;for(let s=1;s<t.length;s++){const o=new Uc(t[s]);r.addAdjacent(o),r=o}return e&&r.addAdjacent(n),n}static fromMapSquareGrid(t){const e=t.map(n=>n.map(r=>new Uc(r)));for(let n=0;n<e.length;n++)for(let r=0;r<e.length;r++)r>0&&e[n][r].addAdjacent(e[n][r-1]),n>0&&e[n][r].addAdjacent(e[n-1][r]);return e[0][0]}getNearestDummy(t,e){let n=1/0,r=this;return t.forEach(s=>{let o=Math.sqrt(Math.pow(e.x-s.data.position.x,2)+Math.pow(e.y-s.data.position.y,2)+Math.pow(e.z-s.data.position.z,2));o<n&&(n=o,r=s)}),r}nodes(){return Array.from(this.walkRead(-1))}}const Use={loadDepth:5,inertia:0,maxNodesLoadingPerTick:1};class FC extends WN{get initialLoadComplete$(){return this._initialLoadComplete$.asObservable()}get nearestDummy(){return this._nearestDummy$.getValue()}get chunkLoaded$(){return this._chunkLoaded$.asObservable()}get loadRateLimit(){return this._loadRateLimit}set loadRateLimit(t){this._loadRateLimit=t,this.loadClock&&(this.loadClock.tickRateLimit=t)}constructor(t,e={}){super(),this.mapGraph=t,this.tickOrder=ca.POST_RENDERING,this.loaderCursor$=new Be(xe.O),this.loaded=new Map,this._initialLoadComplete$=new Be(!1),this._nearestDummy$=new Be(null),this._chunkLoaded$=new De,this.loadClock=null,this._loadRateLimit=1,this.options=Object.assign(Object.assign({},Use),e),this.mapGraphNodes=t.nodes()}onSpawned(t){super.onSpawned(t),this.loadClock=t.createClock(!0),this.loadClock.tickRateLimit=this._loadRateLimit;let e=[],n=[];this.loadClock.tick$.pipe(ms(null),ke(this._onRemoved$),rt(()=>this.mapGraph.getNearestDummy(this.mapGraphNodes,this.loaderCursor$.getValue())),Po(),pi(r=>this._nearestDummy$.next(r))).subscribe(r=>{let o,s=new Set;if(this.options.inertia>0){o=new Set;const a=r.walkReadPreserveDepth(this.options.loadDepth+this.options.inertia);for(let l=0;l<a.length;l++)a[l].forEach(c=>o.add(c.data)),l<=this.options.loadDepth&&a[l].forEach(c=>s.add(c.data))}else r.walkRead(this.options.loadDepth).forEach(a=>s.add(a.data)),o=s;for(const a of this.loaded.keys())o.has(a)?s.delete(a):n.includes(a)||n.push(a);for(let a of Array.from(s.keys()))e.includes(a)||e.push(a)}),this.tick$.pipe(ms(null),ke(this._onRemoved$)).subscribe(()=>{if(n.length){for(const r of n)this.disposeChunk(r);n=[]}if(e.length)if(this._initialLoadComplete$.value&&e.length>this.options.maxNodesLoadingPerTick){let r=e.slice(0,this.options.maxNodesLoadingPerTick);e=e.slice(this.options.maxNodesLoadingPerTick),Promise.all(r.map(s=>this.loadChunk(s))).then()}else Promise.all(e.map(r=>this.loadChunk(r))).then(()=>{this._initialLoadComplete$.value||this._initialLoadComplete$.next(!0)}),e=[]})}onRemoved(){super.onRemoved(),this.loadClock&&(this.loadClock.stop(),this.loadClock=null),this.loaderCursor$.next(xe.O)}loadChunk(t){return function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){const e=yield this.world.loader.loadGgGlb(t.path,Object.assign({position:t.position,rotation:t.rotation||ai.O},t.loadOptions)),n=[...e.entities,...(e.props||[]).map(r=>r.entities).reduce((r,s)=>(r.push(...s),r),[])];return this.loaded.set(t,n),this.addChildren(...n),this._chunkLoaded$.next([e,{position:t.position,rotation:t.rotation||ai.O}]),[n,e]})}disposeChunk(t){this.loaded.has(t)&&(this.removeChildren(this.loaded.get(t),!0),this.loaded.delete(t))}}class Vse extends $N{get position(){return this.renderer.camera.position}set position(t){this.renderer.camera.position=t}get rotation(){return this.renderer.camera.rotation}set rotation(t){this.renderer.camera.rotation=t}get camera(){return this.renderer.camera}}var KN=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};const ZN={keymap:"wasd",cameraLinearSpeed:20,cameraMovementElasticity:0,cameraBoostMultiplier:2.5,cameraRotationSensitivity:1,cameraRotationElasticity:0,mouseOptions:{},ignoreMouseUnlessPointerLocked:!1,ignoreKeyboardUnlessPointerLocked:!1};class LC extends Nc{get active(){return super.active}set active(t){!super.active&&t&&this.reset(),super.active=t}get spherical(){return this._spherical}set spherical(t){this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,t.phi)),this._spherical.theta=t.theta,this.resetMotion$.next()}constructor(t,e,n={}){super(),this.keyboard=t,this.camera=e,this.tickOrder=ca.INPUT_CONTROLLERS,this._spherical={phi:0,radius:1,theta:0},this.resetMotion$=new De,this.options=Object.assign(Object.assign({},ZN),n),n.mouseOptions&&(this.options.mouseOptions=Object.assign(Object.assign({},ZN.mouseOptions),n.mouseOptions)),this.mouseInput=new Xu(this.options.mouseOptions),this.directionsInput=new Ase(t,this.options.keymap)}reset(){this._spherical=xe.toSpherical(xe.rot({x:0,y:0,z:-1},this.camera.rotation)),this.resetMotion$.next()}onSpawned(t){const e=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return KN(this,void 0,void 0,function*(){yield e.onSpawned.call(this,t),this._spherical=xe.toSpherical(xe.rot({x:0,y:0,z:-1},this.camera.rotation));const n=["KeyE","KeyQ"];this.camera.camera.supportsFov&&n.push("KeyZ","KeyC"),n.push("ShiftLeft");let r=Ls([this.directionsInput.output$,...n.map(c=>this.keyboard.bind(c))]).pipe(ke(this._onRemoved$),rt(([c,...d])=>{let u={direction:{},rest:[]};(!this.options.ignoreKeyboardUnlessPointerLocked||this.mouseInput.isPointerLocked)&&(u={direction:c,rest:d});let h=Object.assign({},xe.O);const[p,f,g,m,_]=u.rest;void 0!==u.direction.upDown&&(h.z=u.direction.upDown?-1:1),void 0!==u.direction.leftRight&&(h.x=u.direction.leftRight?-1:1),p!=f&&(h.y=f?-1:1);let b=0;return g!=m&&(b=g?1:-1),h=xe.norm(h),_&&(h=xe.scalarMult(h,this.options.cameraBoostMultiplier)),[h,b]}));this.options.cameraMovementElasticity>0&&(r=r.pipe(RC(this.camera.tick$,this.options.cameraMovementElasticity,([c,d],[u,h],p)=>[xe.lerp(c,u,p),h],([c,d],[u,h])=>d==h&&xe.dist(c,u)<.001)));let s=xe.O,o=0;r.subscribe(([c,d])=>{s=c,o=d});let a=Xu.isTouchDevice(),l=this.mouseInput.delta$.pipe(ke(this._onRemoved$),Qt(()=>this.active&&(a||!this.options.ignoreMouseUnlessPointerLocked||this.mouseInput.isPointerLocked)));if(this.options.cameraRotationElasticity>0){const c=new Be(this._spherical);l.subscribe(u=>{const h=c.getValue();c.next({phi:Math.max(1e-6,Math.min(Math.PI-1e-6,h.phi+u.y*this.options.cameraRotationSensitivity/1e3)),theta:h.theta-u.x*this.options.cameraRotationSensitivity/1e3,radius:1})});const d=()=>{c.pipe(ke(this._onRemoved$),RC(this.tick$,this.options.cameraRotationElasticity,(u,h,p)=>({phi:u.phi+p*(h.phi-u.phi),theta:u.theta+p*(h.theta-u.theta),radius:1}),(u,h)=>Tn.dist({x:u.phi,y:u.theta},{x:h.phi,y:h.theta})<1e-4),ke(this.resetMotion$)).subscribe(u=>{this._spherical.theta=u.theta,this._spherical.phi=u.phi})};this.resetMotion$.pipe(ke(this._onRemoved$)).subscribe(()=>{c.next(this._spherical),d()}),d()}else l.subscribe(c=>{this._spherical.theta-=c.x*this.options.cameraRotationSensitivity/1e3,this._spherical.phi+=c.y*this.options.cameraRotationSensitivity/1e3,this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this._spherical.phi))});this.camera.tick$.pipe(ke(this._onRemoved$),Qt(()=>this.active)).subscribe(([c,d])=>{this.camera.camera.fov+=o,this.camera.position=xe.add(this.camera.position,xe.rot(xe.scalarMult(s,this.options.cameraLinearSpeed*d/1e3),this.camera.rotation)),this.camera.rotation=ai.lookAt(this.camera.position,xe.add(this.camera.position,xe.fromSpherical(this._spherical)))}),this.mouseInput.start(),this.directionsInput.start()})}onRemoved(){const t=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return KN(this,void 0,void 0,function*(){yield t.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var QN=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})};const Hse={mouseOptions:{},orbiting:{sensitivityX:1,sensitivityY:1},orbitingElasticity:0,zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class $se extends Nc{get active(){return super.active}set active(t){!super.active&&t&&this.reset(),super.active=t}get spherical(){return this._spherical}set spherical(t){this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,t.phi)),this._spherical.theta=t.theta,this._spherical.radius=t.radius,this.resetMotion$.next()}constructor(t,e={}){super(),this.camera=t,this.tickOrder=ca.INPUT_CONTROLLERS,this._spherical={phi:0,radius:10,theta:0},this.target=xe.O,this.resetMotion$=new De,this.options=Object.assign(Object.assign({},Hse),e),this.mouseInput=new Xu(this.options.mouseOptions)}reset(){let t=xe.dist(this.target,this.camera.position);this.target=xe.add(this.camera.position,xe.rot({x:0,y:0,z:-t},this.camera.rotation)),this._spherical=xe.toSpherical(xe.sub(this.camera.position,this.target)),this.resetMotion$.next()}onSpawned(t){const e=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return QN(this,void 0,void 0,function*(){if(yield e.onSpawned.call(this,t),this._spherical=xe.toSpherical(xe.sub(this.camera.position,this.target)),this.options.orbiting){let r=this.mouseInput.delta$.pipe(ke(this._onRemoved$),Qt(()=>this.active&&this.mouseInput.state==Br.DRAG));if(this.options.orbitingElasticity>0){const s=new Be(this._spherical);r.subscribe(a=>{const l=s.getValue();s.next({phi:Math.max(1e-6,Math.min(Math.PI-1e-6,l.phi-a.y*this.options.orbiting.sensitivityY/1e3)),theta:l.theta-a.x*this.options.orbiting.sensitivityX/1e3,radius:1})});const o=()=>{s.pipe(ke(this._onRemoved$),RC(this.tick$,this.options.orbitingElasticity,(a,l,c)=>({phi:a.phi+c*(l.phi-a.phi),theta:a.theta+c*(l.theta-a.theta),radius:1}),(a,l)=>Tn.dist({x:a.phi,y:a.theta},{x:l.phi,y:l.theta})<1e-4),ke(this.resetMotion$)).subscribe(a=>{this._spherical.theta=a.theta,this._spherical.phi=a.phi})};this.resetMotion$.pipe(ke(this._onRemoved$)).subscribe(()=>{s.next(this._spherical),o()}),o()}else r.subscribe(s=>{this._spherical.theta-=s.x*this.options.orbiting.sensitivityX/1e3,this._spherical.phi-=s.y*this.options.orbiting.sensitivityY/1e3,this._spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this._spherical.phi))})}this.options.zooming&&this.mouseInput.wheel$.pipe(ke(this._onRemoved$)).subscribe(r=>{0!=r&&(this._spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const n=r=>{const s=xe.fromSpherical(this._spherical),o=xe.rotAround(s,{x:-Math.sin(this._spherical.theta),y:Math.cos(this._spherical.theta),z:0},Math.PI/2),a=xe.rotAround(s,xe.norm(o),Math.PI/2);this.target=xe.add(this.target,xe.add(xe.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),xe.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(ke(this._onRemoved$),Qt(()=>this.mouseInput.state==Br.DRAG_RIGHT_BUTTON)).subscribe(r=>{n(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(ke(this._onRemoved$),Qt(()=>this.mouseInput.state==Br.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this._spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),Xu.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(ke(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this._spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&n(r.centerPointDelta)}),this.camera.tick$.pipe(ke(this._onRemoved$),Qt(()=>this.active),rt(()=>this._spherical)).subscribe(r=>{this.camera.position=xe.add(this.target,xe.fromSpherical(r)),this.camera.rotation=ai.lookAt(this.camera.position,this.target)}),yield this.mouseInput.start()})}onRemoved(){const t=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return QN(this,void 0,void 0,function*(){yield t.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class Yse{randomColor(){return Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())}createPlane(t={}){return this.createPrimitive({shape:"PLANE"},t)}createBox(t,e={}){return this.createPrimitive({shape:"BOX",dimensions:t},e)}createCapsule(t,e,n={}){return this.createPrimitive({shape:"CAPSULE",radius:t,centersDistance:e},n)}createCylinder(t,e,n={}){return this.createPrimitive({shape:"CYLINDER",radius:t,height:e},n)}createCone(t,e,n={}){return this.createPrimitive({shape:"CONE",radius:t,height:e},n)}createSphere(t,e={}){return this.createPrimitive({shape:"SPHERE",radius:t},e)}}var NC=function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})},Tl=(()=>{return(i=Tl||(Tl={}))[i.Nothing=0]="Nothing",i[i.Files=1]="Files",i[i.Entities=2]="Entities",Tl;var i})();const JN={cachingStrategy:Tl.Nothing,position:xe.O,rotation:ai.O,loadProps:!0},eB=i=>({meta:i.meta,resources:i.resources.map(({object3D:t,body:e})=>({object3D:t&&t.clone(),body:e&&e.clone()}))});class Xse{constructor(t){this.world=t,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(t){return NC(this,arguments,void 0,function*(e,n=!1){if(n&&this.filesCache.has(e))return this.filesCache.get(e);const r=Promise.all([fetch(`${e}.glb`).then(o=>o.arrayBuffer()),fetch(`${e}.meta`).then(o=>o.text()).then(o=>JSON.parse(o))]);n&&this.filesCache.set(e,r);const s=yield r;return n&&this.filesCache.set(e,s),s})}loadGgGlbResources(t){return NC(this,arguments,void 0,function*(e,n=Tl.Nothing){var r,s;if(n==Tl.Entities&&this.loadResultCache.has(e)){const u=this.loadResultCache.get(e),h=u instanceof Promise?yield u:u;return eB(h)}const[o,a]=yield this.loadGgGlbFiles(e,n==Tl.Files);if(!o)throw new Error("GLB not found");const[l,c]=yield Promise.all([null===(r=this.world.visualScene)||void 0===r?void 0:r.loader.loadFromGgGlb(o,a),null===(s=this.world.physicsWorld)||void 0===s?void 0:s.loader.loadFromGgGlb(o,a)]),d={resources:[],meta:a};if(!l)return d;if(0==c?.length)d.resources.push({object3D:l,body:null});else if(1==c?.length)d.resources.push({object3D:l,body:c[0]});else{for(const u of c||[])d.resources.push({object3D:l.popChild(u.name),body:u});l.isEmpty()||d.resources.push({object3D:l,body:null})}return n==Tl.Entities&&this.loadResultCache.set(e,eB(d)),d})}loadGgGlb(t){return NC(this,arguments,void 0,function*(e,n=JN){const r=Object.assign(Object.assign({},JN),n),{resources:s,meta:o}=yield this.loadGgGlbResources(e,r.cachingStrategy),a={entities:s.map(l=>new xs({object3D:l.object3D,objectBody:l.body})),meta:o};return r.loadProps&&(a.props=yield Promise.all(o.dummies.filter(l=>l.is_prop||l.is_scene).map(l=>this.loadGgGlb(l.is_prop?(r.propsPath||e.substring(0,e.lastIndexOf("/")+1))+l.prop_id:l.scene_id,{loadProps:!!l.is_scene,position:xe.add(xe.rot(l.position,r.rotation),r.position),rotation:ai.combineRotations(l.rotation,r.rotation)})))),a.entities.forEach(l=>{l.position=xe.add(xe.rot(xe.clone(l.position),r.rotation),r.position),l.rotation=ai.mult(ai.clone(l.rotation),r.rotation)}),a})}}class wv extends Lo{constructor(t){super(t),this.loader=new Xse(this)}addPrimitiveRigidBody(t,e=xe.O,n=ai.O,r={}){var s,o;const a=new xs({object3D:null===(s=this.visualScene)||void 0===s?void 0:s.factory.createPrimitive(t.shape,r),objectBody:null===(o=this.physicsWorld)||void 0===o?void 0:o.factory.createRigidBody(t)});return a.position=e,a.rotation=n,this.addEntity(a),a}addRenderer(t,e,n){if(!this.visualScene)throw new Error("Cannot add renderer to the world without visual scene");const r=new Vse(this.visualScene.createRenderer(t,e,n));return this.addEntity(r),r}registerConsoleCommands(t){super.registerConsoleCommands(t),this.physicsWorld&&t.registerConsoleCommand(this,"gravity",(...e)=>function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){if(1==e.length&&(e=["0","0",""+-+e[0]]),e.length>0){if(isNaN(+e[0])||isNaN(+e[1])||isNaN(+e[2]))throw new Error("Wrong arguments");this.physicsWorld.gravity={x:+e[0],y:+e[1],z:+e[2]}}return JSON.stringify(this.physicsWorld.gravity)}),'args: [ ?float, ?float, ?float ]; Get or set 3D world gravity vector. 1 argument sets vector {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}}window.gg_version="0.0.58";const Qse=0,tB=1,Jse=2,nB=1,iB=2,Ga=3,ua=0,ws=1,Cr=2,ja=0,Ku=1,rB=2,sB=3,oB=4,eoe=5,Vc=100,toe=101,noe=102,ioe=103,roe=104,soe=200,ooe=201,aoe=202,loe=203,UC=204,VC=205,coe=206,doe=207,uoe=208,hoe=209,poe=210,foe=211,moe=212,goe=213,_oe=214,voe=0,boe=1,yoe=2,Mv=3,xoe=4,woe=5,Moe=6,Coe=7,Cv=0,Soe=1,Eoe=2,kl=0,Aoe=1,Doe=2,Toe=3,koe=4,Ioe=5,Roe=6,Poe=7,aB="attached",No=301,zc=302,Sv=303,Ev=304,Vf=306,hr=1e3,mi=1001,zf=1002,Yi=1003,HC=1004,Zu=1005,Bi=1006,Hf=1007,Bo=1008,Wa=1009,lB=1010,cB=1011,$f=1012,$C=1013,Il=1014,js=1015,Qu=1016,GC=1017,jC=1018,Ju=1020,dB=35902,uB=1021,hB=1022,Ms=1023,pB=1024,fB=1025,eh=1026,th=1027,WC=1028,Av=1029,mB=1030,YC=1031,XC=1033,Dv=33776,Tv=33777,kv=33778,Iv=33779,qC=35840,KC=35841,ZC=35842,QC=35843,JC=36196,eS=37492,tS=37496,nS=37808,iS=37809,rS=37810,sS=37811,oS=37812,aS=37813,lS=37814,cS=37815,dS=37816,uS=37817,hS=37818,pS=37819,fS=37820,mS=37821,Rv=36492,gS=36494,_S=36495,gB=36283,vS=36284,bS=36285,yS=36286,Gf=2300,jf=2301,Boe=0,vB=1,MS=2,Voe=3201,Hc=0,zoe=1,Rl="",Sr="srgb",Er="srgb-linear",CS="display-p3",Ov="display-p3-linear",Fv="linear",li="srgb",Lv="rec709",Nv="p3",rh=7680,Hoe=512,$oe=513,Goe=514,yB=515,joe=516,Woe=517,Yoe=518,Xoe=519,xB="300 es",Ya=2e3;class sh{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const r=this._listeners[t];if(void 0!==r){const s=r.indexOf(e);-1!==s&&r.splice(s,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const n=this._listeners[t.type];if(void 0!==n){t.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,t);t.target=null}}}const Ur=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const $c=Math.PI/180,oh=180/Math.PI;function Ws(){const i=4294967295*Math.random()|0,t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Ur[255&i]+Ur[i>>8&255]+Ur[i>>16&255]+Ur[i>>24&255]+"-"+Ur[255&t]+Ur[t>>8&255]+"-"+Ur[t>>16&15|64]+Ur[t>>24&255]+"-"+Ur[63&e|128]+Ur[e>>8&255]+"-"+Ur[e>>16&255]+Ur[e>>24&255]+Ur[255&n]+Ur[n>>8&255]+Ur[n>>16&255]+Ur[n>>24&255]).toLowerCase()}function Ti(i,t,e){return Math.max(t,Math.min(e,i))}function SS(i,t){return(i%t+t)%t}function Wf(i,t,e){return(1-e)*i+e*t}function es(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function rn(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(4294967295*i);case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int32Array:return Math.round(2147483647*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const uae_radToDeg=function oae(i){return i*oh};class _e{constructor(t=0,e=0){_e.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ti(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),r=Math.sin(e),s=this.x-t.x,o=this.y-t.y;return this.x=s*n-o*r+t.x,this.y=s*r+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class dn{constructor(t,e,n,r,s,o,a,l,c){dn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c)}set(t,e,n,r,s,o,a,l,c){const d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],u=n[7],h=n[2],p=n[5],f=n[8],g=r[0],m=r[3],_=r[6],b=r[1],v=r[4],y=r[7],R=r[2],M=r[5],D=r[8];return s[0]=o*g+a*b+l*R,s[3]=o*m+a*v+l*M,s[6]=o*_+a*y+l*D,s[1]=c*g+d*b+u*R,s[4]=c*m+d*v+u*M,s[7]=c*_+d*y+u*D,s[2]=h*g+p*b+f*R,s[5]=h*m+p*v+f*M,s[8]=h*_+p*y+f*D,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8];return e*o*d-e*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=d*o-a*c,h=a*l-d*s,p=c*s-o*l,f=e*u+n*h+r*p;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const g=1/f;return t[0]=u*g,t[1]=(r*c-d*n)*g,t[2]=(a*n-r*o)*g,t[3]=h*g,t[4]=(d*e-r*l)*g,t[5]=(r*s-a*e)*g,t[6]=p*g,t[7]=(n*l-c*e)*g,t[8]=(o*e-n*s)*g,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+t,-r*c,r*l,-r*(-c*o+l*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(ES.makeScale(t,e)),this}rotate(t){return this.premultiply(ES.makeRotation(-t)),this}translate(t,e){return this.premultiply(ES.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ES=new dn;function MB(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function Yf(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function pae(){const i=Yf("canvas");return i.style.display="block",i}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const CB={};function lh(i){i in CB||(CB[i]=!0,console.warn(i))}const SB=(new dn).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),EB=(new dn).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Xf={[Er]:{transfer:Fv,primaries:Lv,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i,fromReference:i=>i},[Sr]:{transfer:li,primaries:Lv,luminanceCoefficients:[.2126,.7152,.0722],toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[Ov]:{transfer:Fv,primaries:Nv,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.applyMatrix3(EB),fromReference:i=>i.applyMatrix3(SB)},[CS]:{transfer:li,primaries:Nv,luminanceCoefficients:[.2289,.6917,.0793],toReference:i=>i.convertSRGBToLinear().applyMatrix3(EB),fromReference:i=>i.applyMatrix3(SB).convertLinearToSRGB()}},mae=new Set([Er,Ov]),Fn={enabled:!0,_workingColorSpace:Er,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!mae.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,t,e){return!1!==this.enabled&&t!==e&&t&&e?(0,Xf[e].fromReference)((0,Xf[t].toReference)(i)):i},fromWorkingColorSpace:function(i,t){return this.convert(i,this._workingColorSpace,t)},toWorkingColorSpace:function(i,t){return this.convert(i,t,this._workingColorSpace)},getPrimaries:function(i){return Xf[i].primaries},getTransfer:function(i){return i===Rl?Fv:Xf[i].transfer},getLuminanceCoefficients:function(i,t=this._workingColorSpace){return i.fromArray(Xf[t].luminanceCoefficients)}};function ch(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function AS(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}let dh;class gae{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===dh&&(dh=Yf("canvas")),dh.width=t.width,dh.height=t.height;const n=dh.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=dh}return e.width>2048||e.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const e=Yf("canvas");e.width=t.width,e.height=t.height;const n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);const r=n.getImageData(0,0,t.width,t.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*ch(s[o]/255);return n.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let n=0;n<e.length;n++)e[n]=e instanceof Uint8Array||e instanceof Uint8ClampedArray?Math.floor(255*ch(e[n]/255)):ch(e[n]);return{data:e,width:t.width,height:t.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let _ae=0;class uh{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_ae++}),this.uuid=Ws(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(DS(r[o].isDataTexture?r[o].image:r[o]))}else s=DS(r);n.url=s}return e||(t.images[this.uuid]=n),n}}function DS(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?gae.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let vae=0,Cs=(()=>{class i extends sh{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=mi,s=mi,o=Bi,a=Bo,l=Ms,c=Wa,d=i.DEFAULT_ANISOTROPY,u=Rl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:vae++}),this.uuid=Ws(),this.name="",this.source=new uh(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new _e(0,0),this.repeat=new _e(1,1),this.center=new _e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new dn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=void 0===e||"string"==typeof e;if(!n&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case hr:e.x=e.x-Math.floor(e.x);break;case mi:e.x=e.x<0?0:1;break;case zf:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case hr:e.y=e.y-Math.floor(e.y);break;case mi:e.y=e.y<0?0:1;break;case zf:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class Kn{constructor(t=0,e=0,n=0,r=1){Kn.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,s;const l=t.elements,c=l[0],d=l[4],u=l[8],h=l[1],p=l[5],f=l[9],g=l[2],m=l[6],_=l[10];if(Math.abs(d-h)<.01&&Math.abs(u-g)<.01&&Math.abs(f-m)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+g)<.1&&Math.abs(f+m)<.1&&Math.abs(c+p+_-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;const v=(c+1)/2,y=(p+1)/2,R=(_+1)/2,M=(d+h)/4,D=(u+g)/4,L=(f+m)/4;return v>y&&v>R?v<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(v),r=M/n,s=D/n):y>R?y<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(y),n=M/r,s=L/r):R<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(R),n=D/s,r=L/s),this.set(n,r,s,e),this}let b=Math.sqrt((m-f)*(m-f)+(u-g)*(u-g)+(h-d)*(h-d));return Math.abs(b)<.001&&(b=1),this.x=(m-f)/b,this.y=(u-g)/b,this.z=(h-d)/b,this.w=Math.acos((c+p+_-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bae extends sh{constructor(t=1,e=1,n={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Kn(0,0,t,e),this.scissorTest=!1,this.viewport=new Kn(0,0,t,e);const r={width:t,height:e,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Bi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const s=new Cs(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);s.flipY=!1,s.generateMipmaps=n.generateMipmaps,s.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let n=0,r=t.textures.length;n<r;n++)this.textures[n]=t.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const e=Object.assign({},t.texture.image);return this.texture.source=new uh(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pl extends bae{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}}class TS extends Cs{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Yi,this.minFilter=Yi,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class AB extends Cs{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Yi,this.minFilter=Yi,this.wrapR=mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class ts{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],u=n[r+3];const h=s[o+0],p=s[o+1],f=s[o+2],g=s[o+3];if(0===a)return t[e+0]=l,t[e+1]=c,t[e+2]=d,void(t[e+3]=u);if(1===a)return t[e+0]=h,t[e+1]=p,t[e+2]=f,void(t[e+3]=g);if(u!==g||l!==h||c!==p||d!==f){let m=1-a;const _=l*h+c*p+d*f+u*g,b=_>=0?1:-1,v=1-_*_;if(v>Number.EPSILON){const R=Math.sqrt(v),M=Math.atan2(R,_*b);m=Math.sin(m*M)/R,a=Math.sin(a*M)/R}const y=a*b;if(l=l*m+h*y,c=c*m+p*y,d=d*m+f*y,u=u*m+g*y,m===1-a){const R=1/Math.sqrt(l*l+c*c+d*d+u*u);l*=R,c*=R,d*=R,u*=R}}t[e]=l,t[e+1]=c,t[e+2]=d,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],u=s[o],h=s[o+1],p=s[o+2],f=s[o+3];return t[e]=a*f+d*u+l*p-c*h,t[e+1]=l*f+d*h+c*u-a*p,t[e+2]=c*f+d*p+a*h-l*u,t[e+3]=d*f-a*u-l*h-c*p,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const n=t._x,r=t._y,s=t._z,o=t._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),u=a(s/2),h=l(n/2),p=l(r/2),f=l(s/2);switch(o){case"XYZ":this._x=h*d*u+c*p*f,this._y=c*p*u-h*d*f,this._z=c*d*f+h*p*u,this._w=c*d*u-h*p*f;break;case"YXZ":this._x=h*d*u+c*p*f,this._y=c*p*u-h*d*f,this._z=c*d*f-h*p*u,this._w=c*d*u+h*p*f;break;case"ZXY":this._x=h*d*u-c*p*f,this._y=c*p*u+h*d*f,this._z=c*d*f+h*p*u,this._w=c*d*u-h*p*f;break;case"ZYX":this._x=h*d*u-c*p*f,this._y=c*p*u+h*d*f,this._z=c*d*f-h*p*u,this._w=c*d*u+h*p*f;break;case"YZX":this._x=h*d*u+c*p*f,this._y=c*p*u+h*d*f,this._z=c*d*f-h*p*u,this._w=c*d*u-h*p*f;break;case"XZY":this._x=h*d*u-c*p*f,this._y=c*p*u-h*d*f,this._z=c*d*f+h*p*u,this._w=c*d*u+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],r=e[4],s=e[8],o=e[1],a=e[5],l=e[9],c=e[2],d=e[6],u=e[10],h=n+a+u;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(d-l)*p,this._y=(s-c)*p,this._z=(o-r)*p}else if(n>a&&n>u){const p=2*Math.sqrt(1+n-a-u);this._w=(d-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+c)/p}else if(a>u){const p=2*Math.sqrt(1+a-n-u);this._w=(s-c)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+d)/p}else{const p=2*Math.sqrt(1+u-n-a);this._w=(o-r)/p,this._x=(s+c)/p,this._y=(l+d)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ti(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,r=t._y,s=t._z,o=t._w,a=e._x,l=e._y,c=e._z,d=e._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*t._w+n*t._x+r*t._y+s*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-e;return this._w=p*o+e*this._w,this._x=p*n+e*this._x,this._y=p*r+e*this._y,this._z=p*s+e*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),u=Math.sin((1-e)*d)/c,h=Math.sin(e*d)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=s*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),s*Math.sin(e),s*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class I{constructor(t=0,e=0,n=0){I.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(DB.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(DB.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[3]*n+s[6]*r,this.y=s[1]*e+s[4]*n+s[7]*r,this.z=s[2]*e+s[5]*n+s[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,r=this.z,s=t.elements,o=1/(s[3]*e+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*e+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*e+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*e+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,r=this.z,s=t.x,o=t.y,a=t.z,l=t.w,c=2*(o*r-a*n),d=2*(a*e-s*r),u=2*(s*n-o*e);return this.x=e+l*c+o*u-a*d,this.y=n+l*d+a*c-s*u,this.z=r+l*u+s*d-o*c,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,r=this.z,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r,this.y=s[1]*e+s[5]*n+s[9]*r,this.z=s[2]*e+s[6]*n+s[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,r=t.y,s=t.z,o=e.x,a=e.y,l=e.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return kS.copy(this).projectOnVector(t),this.sub(kS)}reflect(t){return this.sub(kS.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Ti(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kS=new I,DB=new ts;class Vr{constructor(t=new I(1/0,1/0,1/0),e=new I(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Uo.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Uo.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=Uo.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const n=t.geometry;if(void 0!==n){const s=n.getAttribute("position");if(!0===e&&void 0!==s&&!0!==t.isInstancedMesh)for(let o=0,a=s.count;o<a;o++)!0===t.isMesh?t.getVertexPosition(o,Uo):Uo.fromBufferAttribute(s,o),Uo.applyMatrix4(t.matrixWorld),this.expandByPoint(Uo);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Vv.copy(t.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Vv.copy(n.boundingBox)),Vv.applyMatrix4(t.matrixWorld),this.union(Vv)}const r=t.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Uo),Uo.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(qf),zv.subVectors(this.max,qf),hh.subVectors(t.a,qf),ph.subVectors(t.b,qf),fh.subVectors(t.c,qf),Ol.subVectors(ph,hh),Fl.subVectors(fh,ph),Gc.subVectors(hh,fh);let e=[0,-Ol.z,Ol.y,0,-Fl.z,Fl.y,0,-Gc.z,Gc.y,Ol.z,0,-Ol.x,Fl.z,0,-Fl.x,Gc.z,0,-Gc.x,-Ol.y,Ol.x,0,-Fl.y,Fl.x,0,-Gc.y,Gc.x,0];return!(!IS(e,hh,ph,fh,zv)||(e=[1,0,0,0,1,0,0,0,1],!IS(e,hh,ph,fh,zv)))&&(Hv.crossVectors(Ol,Fl),e=[Hv.x,Hv.y,Hv.z],IS(e,hh,ph,fh,zv))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Uo).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Uo).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Xa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Xa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Xa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Xa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Xa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Xa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Xa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Xa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Xa)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Xa=[new I,new I,new I,new I,new I,new I,new I,new I],Uo=new I,Vv=new Vr,hh=new I,ph=new I,fh=new I,Ol=new I,Fl=new I,Gc=new I,qf=new I,zv=new I,Hv=new I,jc=new I;function IS(i,t,e,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){jc.fromArray(i,s);const a=r.x*Math.abs(jc.x)+r.y*Math.abs(jc.y)+r.z*Math.abs(jc.z),l=t.dot(jc),c=e.dot(jc),d=n.dot(jc);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const yae=new Vr,Kf=new I,RS=new I;class zr{constructor(t=new I,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):yae.setFromPoints(t).getCenter(n);let r=0;for(let s=0,o=t.length;s<o;s++)r=Math.max(r,n.distanceToSquared(t[s]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Kf.subVectors(t,this.center);const e=Kf.lengthSq();if(e>this.radius*this.radius){const n=Math.sqrt(e),r=.5*(n-this.radius);this.center.addScaledVector(Kf,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(RS.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Kf.copy(t.center).add(RS)),this.expandByPoint(Kf.copy(t.center).sub(RS))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const qa=new I,PS=new I,$v=new I,Ll=new I,OS=new I,Gv=new I,FS=new I;class Zf{constructor(t=new I,e=new I(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,qa)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=qa.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(qa.copy(this.origin).addScaledVector(this.direction,e),qa.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){PS.copy(t).add(e).multiplyScalar(.5),$v.copy(e).sub(t).normalize(),Ll.copy(this.origin).sub(PS);const s=.5*t.distanceTo(e),o=-this.direction.dot($v),a=Ll.dot(this.direction),l=-Ll.dot($v),c=Ll.lengthSq(),d=Math.abs(1-o*o);let u,h,p,f;if(d>0)if(u=o*l-a,h=o*a-l,f=s*d,u>=0)if(h>=-f)if(h<=f){const g=1/d;u*=g,h*=g,p=u*(u+o*h+2*a)+h*(o*u+h+2*l)+c}else h=s,u=Math.max(0,-(o*h+a)),p=-u*u+h*(h+2*l)+c;else h=-s,u=Math.max(0,-(o*h+a)),p=-u*u+h*(h+2*l)+c;else h<=-f?(u=Math.max(0,-(-o*s+a)),h=u>0?-s:Math.min(Math.max(-s,-l),s),p=-u*u+h*(h+2*l)+c):h<=f?(u=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(u=Math.max(0,-(o*s+a)),h=u>0?s:Math.min(Math.max(-s,-l),s),p=-u*u+h*(h+2*l)+c);else h=o>0?-s:s,u=Math.max(0,-(o*h+a)),p=-u*u+h*(h+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(PS).addScaledVector($v,h),p}intersectSphere(t,e){qa.subVectors(t.center,this.origin);const n=qa.dot(this.direction),r=qa.dot(qa)-n*n,s=t.radius*t.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(t.min.x-h.x)*c,r=(t.max.x-h.x)*c):(n=(t.max.x-h.x)*c,r=(t.min.x-h.x)*c),d>=0?(s=(t.min.y-h.y)*d,o=(t.max.y-h.y)*d):(s=(t.max.y-h.y)*d,o=(t.min.y-h.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),u>=0?(a=(t.min.z-h.z)*u,l=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,l=(t.min.z-h.z)*u),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return null!==this.intersectBox(t,qa)}intersectTriangle(t,e,n,r,s){OS.subVectors(e,t),Gv.subVectors(n,t),FS.crossVectors(OS,Gv);let a,o=this.direction.dot(FS);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ll.subVectors(this.origin,t);const l=a*this.direction.dot(Gv.crossVectors(Ll,Gv));if(l<0)return null;const c=a*this.direction.dot(OS.cross(Ll));if(c<0||l+c>o)return null;const d=-a*Ll.dot(FS);return d<0?null:this.at(d/o,s)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Et{constructor(t,e,n,r,s,o,a,l,c,d,u,h,p,f,g,m){Et.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,n,r,s,o,a,l,c,d,u,h,p,f,g,m)}set(t,e,n,r,s,o,a,l,c,d,u,h,p,f,g,m){const _=this.elements;return _[0]=t,_[4]=e,_[8]=n,_[12]=r,_[1]=s,_[5]=o,_[9]=a,_[13]=l,_[2]=c,_[6]=d,_[10]=u,_[14]=h,_[3]=p,_[7]=f,_[11]=g,_[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Et).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,r=1/mh.setFromMatrixColumn(t,0).length(),s=1/mh.setFromMatrixColumn(t,1).length(),o=1/mh.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*s,e[5]=n[5]*s,e[6]=n[6]*s,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,n=t.x,r=t.y,s=t.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),u=Math.sin(s);if("XYZ"===t.order){const h=o*d,p=o*u,f=a*d,g=a*u;e[0]=l*d,e[4]=-l*u,e[8]=c,e[1]=p+f*c,e[5]=h-g*c,e[9]=-a*l,e[2]=g-h*c,e[6]=f+p*c,e[10]=o*l}else if("YXZ"===t.order){const h=l*d,p=l*u,f=c*d,g=c*u;e[0]=h+g*a,e[4]=f*a-p,e[8]=o*c,e[1]=o*u,e[5]=o*d,e[9]=-a,e[2]=p*a-f,e[6]=g+h*a,e[10]=o*l}else if("ZXY"===t.order){const h=l*d,p=l*u,f=c*d,g=c*u;e[0]=h-g*a,e[4]=-o*u,e[8]=f+p*a,e[1]=p+f*a,e[5]=o*d,e[9]=g-h*a,e[2]=-o*c,e[6]=a,e[10]=o*l}else if("ZYX"===t.order){const h=o*d,p=o*u,f=a*d,g=a*u;e[0]=l*d,e[4]=f*c-p,e[8]=h*c+g,e[1]=l*u,e[5]=g*c+h,e[9]=p*c-f,e[2]=-c,e[6]=a*l,e[10]=o*l}else if("YZX"===t.order){const h=o*l,p=o*c,f=a*l,g=a*c;e[0]=l*d,e[4]=g-h*u,e[8]=f*u+p,e[1]=u,e[5]=o*d,e[9]=-a*d,e[2]=-c*d,e[6]=p*u+f,e[10]=h-g*u}else if("XZY"===t.order){const h=o*l,p=o*c,f=a*l,g=a*c;e[0]=l*d,e[4]=-u,e[8]=c*d,e[1]=h*u+g,e[5]=o*d,e[9]=p*u-f,e[2]=f*u-p,e[6]=a*d,e[10]=g*u+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(xae,t,wae)}lookAt(t,e,n){const r=this.elements;return Ys.subVectors(t,e),0===Ys.lengthSq()&&(Ys.z=1),Ys.normalize(),Nl.crossVectors(n,Ys),0===Nl.lengthSq()&&(1===Math.abs(n.z)?Ys.x+=1e-4:Ys.z+=1e-4,Ys.normalize(),Nl.crossVectors(n,Ys)),Nl.normalize(),jv.crossVectors(Ys,Nl),r[0]=Nl.x,r[4]=jv.x,r[8]=Ys.x,r[1]=Nl.y,r[5]=jv.y,r[9]=Ys.y,r[2]=Nl.z,r[6]=jv.z,r[10]=Ys.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,r=e.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],u=n[5],h=n[9],p=n[13],f=n[2],g=n[6],m=n[10],_=n[14],b=n[3],v=n[7],y=n[11],R=n[15],M=r[0],D=r[4],L=r[8],C=r[12],w=r[1],U=r[5],ee=r[9],q=r[13],ne=r[2],fe=r[6],V=r[10],te=r[14],Y=r[3],ve=r[7],Le=r[11],$e=r[15];return s[0]=o*M+a*w+l*ne+c*Y,s[4]=o*D+a*U+l*fe+c*ve,s[8]=o*L+a*ee+l*V+c*Le,s[12]=o*C+a*q+l*te+c*$e,s[1]=d*M+u*w+h*ne+p*Y,s[5]=d*D+u*U+h*fe+p*ve,s[9]=d*L+u*ee+h*V+p*Le,s[13]=d*C+u*q+h*te+p*$e,s[2]=f*M+g*w+m*ne+_*Y,s[6]=f*D+g*U+m*fe+_*ve,s[10]=f*L+g*ee+m*V+_*Le,s[14]=f*C+g*q+m*te+_*$e,s[3]=b*M+v*w+y*ne+R*Y,s[7]=b*D+v*U+y*fe+R*ve,s[11]=b*L+v*ee+y*V+R*Le,s[15]=b*C+v*q+y*te+R*$e,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],r=t[8],s=t[12],o=t[1],a=t[5],l=t[9],c=t[13],d=t[2],u=t[6],h=t[10],p=t[14];return t[3]*(+s*l*u-r*c*u-s*a*h+n*c*h+r*a*p-n*l*p)+t[7]*(+e*l*p-e*c*h+s*o*h-r*o*p+r*c*d-s*l*d)+t[11]*(+e*c*u-e*a*p-s*o*u+n*o*p+s*a*d-n*c*d)+t[15]*(-r*a*d-e*l*u+e*a*h+r*o*u-n*o*h+n*l*d)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],c=t[7],d=t[8],u=t[9],h=t[10],p=t[11],f=t[12],g=t[13],m=t[14],_=t[15],b=u*m*c-g*h*c+g*l*p-a*m*p-u*l*_+a*h*_,v=f*h*c-d*m*c-f*l*p+o*m*p+d*l*_-o*h*_,y=d*g*c-f*u*c+f*a*p-o*g*p-d*a*_+o*u*_,R=f*u*l-d*g*l-f*a*h+o*g*h+d*a*m-o*u*m,M=e*b+n*v+r*y+s*R;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/M;return t[0]=b*D,t[1]=(g*h*s-u*m*s-g*r*p+n*m*p+u*r*_-n*h*_)*D,t[2]=(a*m*s-g*l*s+g*r*c-n*m*c-a*r*_+n*l*_)*D,t[3]=(u*l*s-a*h*s-u*r*c+n*h*c+a*r*p-n*l*p)*D,t[4]=v*D,t[5]=(d*m*s-f*h*s+f*r*p-e*m*p-d*r*_+e*h*_)*D,t[6]=(f*l*s-o*m*s-f*r*c+e*m*c+o*r*_-e*l*_)*D,t[7]=(o*h*s-d*l*s+d*r*c-e*h*c-o*r*p+e*l*p)*D,t[8]=y*D,t[9]=(f*u*s-d*g*s-f*n*p+e*g*p+d*n*_-e*u*_)*D,t[10]=(o*g*s-f*a*s+f*n*c-e*g*c-o*n*_+e*a*_)*D,t[11]=(d*a*s-o*u*s-d*n*c+e*u*c+o*n*p-e*a*p)*D,t[12]=R*D,t[13]=(d*g*r-f*u*r+f*n*h-e*g*h-d*n*m+e*u*m)*D,t[14]=(f*a*r-o*g*r-f*n*l+e*g*l+o*n*m-e*a*m)*D,t[15]=(o*u*r-d*a*r+d*n*l-e*u*l-o*n*h+e*a*h)*D,this}scale(t){const e=this.elements,n=t.x,r=t.y,s=t.z;return e[0]*=n,e[4]*=r,e[8]*=s,e[1]*=n,e[5]*=r,e[9]*=s,e[2]*=n,e[6]*=r,e[10]*=s,e[3]*=n,e[7]*=r,e[11]*=s,this}getMaxScaleOnAxis(){const t=this.elements;return Math.sqrt(Math.max(t[0]*t[0]+t[1]*t[1]+t[2]*t[2],t[4]*t[4]+t[5]*t[5]+t[6]*t[6],t[8]*t[8]+t[9]*t[9]+t[10]*t[10]))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),r=Math.sin(e),s=1-n,o=t.x,a=t.y,l=t.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,s,o){return this.set(1,n,s,0,t,1,o,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){const r=this.elements,s=e._x,o=e._y,a=e._z,l=e._w,c=s+s,d=o+o,u=a+a,h=s*c,p=s*d,f=s*u,g=o*d,m=o*u,_=a*u,b=l*c,v=l*d,y=l*u,R=n.x,M=n.y,D=n.z;return r[0]=(1-(g+_))*R,r[1]=(p+y)*R,r[2]=(f-v)*R,r[3]=0,r[4]=(p-y)*M,r[5]=(1-(h+_))*M,r[6]=(m+b)*M,r[7]=0,r[8]=(f+v)*D,r[9]=(m-b)*D,r[10]=(1-(h+g))*D,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){const r=this.elements;let s=mh.set(r[0],r[1],r[2]).length();const o=mh.set(r[4],r[5],r[6]).length(),a=mh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),t.x=r[12],t.y=r[13],t.z=r[14],Vo.copy(this);const c=1/s,d=1/o,u=1/a;return Vo.elements[0]*=c,Vo.elements[1]*=c,Vo.elements[2]*=c,Vo.elements[4]*=d,Vo.elements[5]*=d,Vo.elements[6]*=d,Vo.elements[8]*=u,Vo.elements[9]*=u,Vo.elements[10]*=u,e.setFromRotationMatrix(Vo),n.x=s,n.y=o,n.z=a,this}makePerspective(t,e,n,r,s,o,a=Ya){const l=this.elements,c=2*s/(e-t),d=2*s/(n-r),u=(e+t)/(e-t),h=(n+r)/(n-r);let p,f;if(a===Ya)p=-(o+s)/(o-s),f=-2*o*s/(o-s);else{if(2001!==a)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);p=-o/(o-s),f=-o*s/(o-s)}return l[0]=c,l[4]=0,l[8]=u,l[12]=0,l[1]=0,l[5]=d,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,s,o,a=Ya){const l=this.elements,c=1/(e-t),d=1/(n-r),u=1/(o-s),h=(e+t)*c,p=(n+r)*d;let f,g;if(a===Ya)f=(o+s)*u,g=-2*u;else{if(2001!==a)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);f=s*u,g=-1*u}return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=g,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const mh=new I,Vo=new Et,xae=new I(0,0,0),wae=new I(1,1,1),Nl=new I,jv=new I,Ys=new I,TB=new Et,kB=new ts;let Ka=(()=>{class i{constructor(e=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,s=this._order){return this._x=e,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const s=e.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],u=s[9],h=s[2],p=s[6],f=s[10];switch(n){case"XYZ":this._y=Math.asin(Ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(p,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Ti(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(l,f),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ti(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Ti(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,f),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Ti(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(l,f));break;case"XZY":this._z=Math.asin(-Ti(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(p,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-u,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return TB.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TB,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return kB.setFromEuler(this),this.setFromQuaternion(kB,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class LS{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!=(this.mask&t.mask)}isEnabled(t){return 0!=(this.mask&(1<<t|0))}}let Mae=0;const IB=new I,gh=new ts,Za=new Et,Wv=new I,Qf=new I,Cae=new I,Sae=new ts,RB=new I(1,0,0),PB=new I(0,1,0),OB=new I(0,0,1),FB={type:"added"},Eae={type:"removed"},_h={type:"childadded",child:null},NS={type:"childremoved",child:null};let sr=(()=>{class i extends sh{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mae++}),this.uuid=Ws(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const e=new I,n=new Ka,r=new ts,s=new I(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new Et},normalMatrix:{value:new dn}}),this.matrix=new Et,this.matrixWorld=new Et,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new LS,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return gh.setFromAxisAngle(e,n),this.quaternion.multiply(gh),this}rotateOnWorldAxis(e,n){return gh.setFromAxisAngle(e,n),this.quaternion.premultiply(gh),this}rotateX(e){return this.rotateOnAxis(RB,e)}rotateY(e){return this.rotateOnAxis(PB,e)}rotateZ(e){return this.rotateOnAxis(OB,e)}translateOnAxis(e,n){return IB.copy(e).applyQuaternion(this.quaternion),this.position.add(IB.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(RB,e)}translateY(e){return this.translateOnAxis(PB,e)}translateZ(e){return this.translateOnAxis(OB,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Za.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Wv.copy(e):Wv.set(e,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Qf.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Za.lookAt(Qf,Wv,this.up):Za.lookAt(Wv,Qf,this.up),this.quaternion.setFromRotationMatrix(Za),s&&(Za.extractRotation(s.matrixWorld),gh.setFromRotationMatrix(Za),this.quaternion.premultiply(gh.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(FB),_h.child=e,this.dispatchEvent(_h),_h.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return-1!==n&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Eae),NS.child=e,this.dispatchEvent(NS),NS.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Za.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Za.multiply(e.parent.matrixWorld)),e.applyMatrix4(Za),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(FB),_h.child=e,this.dispatchEvent(_h),_h.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(e,n);if(void 0!==a)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qf,e,Cae),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qf,Sae,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;null!==n&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){const r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(s.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),null!==this.boundingBox&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,u=c.length;d<u;d++)o(e.shapes,c[d]);else o(e.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(e.materials,this.material[c]));s.material=l}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(e.animations,this.animations[l]))}if(n){const l=a(e.geometries),c=a(e.materials),d=a(e.textures),u=a(e.images),h=a(e.shapes),p=a(e.skeletons),f=a(e.animations),g=a(e.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),f.length>0&&(r.animations=f),g.length>0&&(r.nodes=g)}return r.object=s,r;function a(l){const c=[];for(const d in l){const u=l[d];delete u.metadata,c.push(u)}return c}}clone(e){return(new this.constructor).copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===n)for(let r=0;r<e.children.length;r++)this.add(e.children[r].clone());return this}}return i.DEFAULT_UP=new I(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const zo=new I,Qa=new I,BS=new I,Ja=new I,vh=new I,bh=new I,LB=new I,US=new I,VS=new I,zS=new I;class ho{constructor(t=new I,e=new I,n=new I){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),zo.subVectors(t,e),r.cross(zo);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(t,e,n,r,s){zo.subVectors(r,e),Qa.subVectors(n,e),BS.subVectors(t,e);const o=zo.dot(zo),a=zo.dot(Qa),l=zo.dot(BS),c=Qa.dot(Qa),d=Qa.dot(BS),u=o*c-a*a;if(0===u)return s.set(0,0,0),null;const h=1/u,p=(c*l-a*d)*h,f=(o*d-a*l)*h;return s.set(1-p-f,f,p)}static containsPoint(t,e,n,r){return null!==this.getBarycoord(t,e,n,r,Ja)&&Ja.x>=0&&Ja.y>=0&&Ja.x+Ja.y<=1}static getInterpolation(t,e,n,r,s,o,a,l){return null===this.getBarycoord(t,e,n,r,Ja)?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ja.x),l.addScaledVector(o,Ja.y),l.addScaledVector(a,Ja.z),l)}static isFrontFacing(t,e,n,r){return zo.subVectors(n,e),Qa.subVectors(t,e),zo.cross(Qa).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return zo.subVectors(this.c,this.b),Qa.subVectors(this.a,this.b),.5*zo.cross(Qa).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return ho.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return ho.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,s){return ho.getInterpolation(t,this.a,this.b,this.c,e,n,r,s)}containsPoint(t){return ho.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return ho.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const n=this.a,r=this.b,s=this.c;let o,a;vh.subVectors(r,n),bh.subVectors(s,n),US.subVectors(t,n);const l=vh.dot(US),c=bh.dot(US);if(l<=0&&c<=0)return e.copy(n);VS.subVectors(t,r);const d=vh.dot(VS),u=bh.dot(VS);if(d>=0&&u<=d)return e.copy(r);const h=l*u-d*c;if(h<=0&&l>=0&&d<=0)return o=l/(l-d),e.copy(n).addScaledVector(vh,o);zS.subVectors(t,s);const p=vh.dot(zS),f=bh.dot(zS);if(f>=0&&p<=f)return e.copy(s);const g=p*c-l*f;if(g<=0&&c>=0&&f<=0)return a=c/(c-f),e.copy(n).addScaledVector(bh,a);const m=d*f-p*u;if(m<=0&&u-d>=0&&p-f>=0)return LB.subVectors(s,r),a=(u-d)/(u-d+(p-f)),e.copy(r).addScaledVector(LB,a);const _=1/(m+g+h);return o=g*_,a=h*_,e.copy(n).addScaledVector(vh,o).addScaledVector(bh,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const NB={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Bl={h:0,s:0,l:0},Yv={h:0,s:0,l:0};function HS(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+6*(t-i)*e:e<.5?t:e<2/3?i+6*(t-i)*(2/3-e):i}class Ge{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(void 0===e&&void 0===n){const r=t;r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Sr){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,Fn.toWorkingColorSpace(this,e),this}setRGB(t,e,n,r=Fn.workingColorSpace){return this.r=t,this.g=e,this.b=n,Fn.toWorkingColorSpace(this,r),this}setHSL(t,e,n,r=Fn.workingColorSpace){if(t=SS(t,1),e=Ti(e,0,1),n=Ti(n,0,1),0===e)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+e):n+e-n*e,o=2*n-s;this.r=HS(o,s,t+1/3),this.g=HS(o,s,t),this.b=HS(o,s,t-1/3)}return Fn.toWorkingColorSpace(this,r),this}setStyle(t,e=Sr){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:console.warn("THREE.Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,e);if(6===o)return this.setHex(parseInt(s,16),e);console.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Sr){const n=NB[t.toLowerCase()];return void 0!==n?this.setHex(n,e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=ch(t.r),this.g=ch(t.g),this.b=ch(t.b),this}copyLinearToSRGB(t){return this.r=AS(t.r),this.g=AS(t.g),this.b=AS(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Sr){return Fn.fromWorkingColorSpace(Hr.copy(this),t),65536*Math.round(Ti(255*Hr.r,0,255))+256*Math.round(Ti(255*Hr.g,0,255))+Math.round(Ti(255*Hr.b,0,255))}getHexString(t=Sr){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Fn.workingColorSpace){Fn.fromWorkingColorSpace(Hr.copy(this),e);const n=Hr.r,r=Hr.g,s=Hr.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const u=o-a;switch(c=d<=.5?u/(o+a):u/(2-o-a),o){case n:l=(r-s)/u+(r<s?6:0);break;case r:l=(s-n)/u+2;break;case s:l=(n-r)/u+4}l/=6}return t.h=l,t.s=c,t.l=d,t}getRGB(t,e=Fn.workingColorSpace){return Fn.fromWorkingColorSpace(Hr.copy(this),e),t.r=Hr.r,t.g=Hr.g,t.b=Hr.b,t}getStyle(t=Sr){Fn.fromWorkingColorSpace(Hr.copy(this),t);const e=Hr.r,n=Hr.g,r=Hr.b;return t!==Sr?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(t,e,n){return this.getHSL(Bl),this.setHSL(Bl.h+t,Bl.s+e,Bl.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Bl),t.getHSL(Yv);const n=Wf(Bl.h,Yv.h,e),r=Wf(Bl.s,Yv.s,e),s=Wf(Bl.l,Yv.l,e);return this.setHSL(n,r,s),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,n=this.g,r=this.b,s=t.elements;return this.r=s[0]*e+s[3]*n+s[6]*r,this.g=s[1]*e+s[4]*n+s[7]*r,this.b=s[2]*e+s[5]*n+s[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Hr=new Ge;Ge.NAMES=NB;let Aae=0;class ns extends sh{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Aae++}),this.uuid=Ws(),this.name="",this.type="Material",this.blending=Ku,this.side=ua,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=UC,this.blendDst=VC,this.blendEquation=Vc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ge(0,0,0),this.blendAlpha=0,this.depthFunc=Mv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=rh,this.stencilZFail=rh,this.stencilZPass=rh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ku&&(n.blending=this.blending),this.side!==ua&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==UC&&(n.blendSrc=this.blendSrc),this.blendDst!==VC&&(n.blendDst=this.blendDst),this.blendEquation!==Vc&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Mv&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==rh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==rh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==rh&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),e){const s=r(t.textures),o=r(t.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const r=e.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=e[s].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class ti extends ns{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.combine=Cv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const Xi=new I,Xv=new _e;class gi{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=n,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=js,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return lh("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Xv.fromBufferAttribute(this,e),Xv.applyMatrix3(t),this.setXY(e,Xv.x,Xv.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Xi.fromBufferAttribute(this,e),Xi.applyMatrix3(t),this.setXYZ(e,Xi.x,Xi.y,Xi.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)Xi.fromBufferAttribute(this,e),Xi.applyMatrix4(t),this.setXYZ(e,Xi.x,Xi.y,Xi.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)Xi.fromBufferAttribute(this,e),Xi.applyNormalMatrix(t),this.setXYZ(e,Xi.x,Xi.y,Xi.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)Xi.fromBufferAttribute(this,e),Xi.transformDirection(t),this.setXYZ(e,Xi.x,Xi.y,Xi.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=es(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=rn(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=es(e,this.array)),e}setX(t,e){return this.normalized&&(e=rn(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=es(e,this.array)),e}setY(t,e){return this.normalized&&(e=rn(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=es(e,this.array)),e}setZ(t,e){return this.normalized&&(e=rn(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=es(e,this.array)),e}setW(t,e){return this.normalized&&(e=rn(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=rn(e,this.array),n=rn(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=rn(e,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t*=this.itemSize,this.normalized&&(e=rn(e,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=s,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class BB extends gi{constructor(t,e,n){super(new Uint16Array(t),e,n)}}class UB extends gi{constructor(t,e,n){super(new Uint32Array(t),e,n)}}class ot extends gi{constructor(t,e,n){super(new Float32Array(t),e,n)}}let Tae=0;const po=new Et,$S=new sr,yh=new I,Xs=new Vr,em=new Vr,pr=new I;class Jt extends sh{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Tae++}),this.uuid=Ws(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return this.index=Array.isArray(t)?new(MB(t)?UB:BB)(t,1):t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new dn).getNormalMatrix(t);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return po.makeRotationFromQuaternion(t),this.applyMatrix4(po),this}rotateX(t){return po.makeRotationX(t),this.applyMatrix4(po),this}rotateY(t){return po.makeRotationY(t),this.applyMatrix4(po),this}rotateZ(t){return po.makeRotationZ(t),this.applyMatrix4(po),this}translate(t,e,n){return po.makeTranslation(t,e,n),this.applyMatrix4(po),this}scale(t,e,n){return po.makeScale(t,e,n),this.applyMatrix4(po),this}lookAt(t){return $S.lookAt(t),$S.updateMatrix(),this.applyMatrix4($S.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(yh).negate(),this.translate(yh.x,yh.y,yh.z),this}setFromPoints(t){const e=[];for(let n=0,r=t.length;n<r;n++){const s=t[n];e.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new ot(e,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Vr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new I(-1/0,-1/0,-1/0),new I(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++)Xs.setFromBufferAttribute(e[n]),this.morphTargetsRelative?(pr.addVectors(this.boundingBox.min,Xs.min),this.boundingBox.expandByPoint(pr),pr.addVectors(this.boundingBox.max,Xs.max),this.boundingBox.expandByPoint(pr)):(this.boundingBox.expandByPoint(Xs.min),this.boundingBox.expandByPoint(Xs.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zr);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new I,1/0);if(t){const n=this.boundingSphere.center;if(Xs.setFromBufferAttribute(t),e)for(let s=0,o=e.length;s<o;s++)em.setFromBufferAttribute(e[s]),this.morphTargetsRelative?(pr.addVectors(Xs.min,em.min),Xs.expandByPoint(pr),pr.addVectors(Xs.max,em.max),Xs.expandByPoint(pr)):(Xs.expandByPoint(em.min),Xs.expandByPoint(em.max));Xs.getCenter(n);let r=0;for(let s=0,o=t.count;s<o;s++)pr.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(pr));if(e)for(let s=0,o=e.length;s<o;s++){const a=e[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)pr.fromBufferAttribute(a,c),l&&(yh.fromBufferAttribute(t,c),pr.add(yh)),r=Math.max(r,n.distanceToSquared(pr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.position,r=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new gi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let L=0;L<n.count;L++)a[L]=new I,l[L]=new I;const c=new I,d=new I,u=new I,h=new _e,p=new _e,f=new _e,g=new I,m=new I;function _(L,C,w){c.fromBufferAttribute(n,L),d.fromBufferAttribute(n,C),u.fromBufferAttribute(n,w),h.fromBufferAttribute(s,L),p.fromBufferAttribute(s,C),f.fromBufferAttribute(s,w),d.sub(c),u.sub(c),p.sub(h),f.sub(h);const U=1/(p.x*f.y-f.x*p.y);isFinite(U)&&(g.copy(d).multiplyScalar(f.y).addScaledVector(u,-p.y).multiplyScalar(U),m.copy(u).multiplyScalar(p.x).addScaledVector(d,-f.x).multiplyScalar(U),a[L].add(g),a[C].add(g),a[w].add(g),l[L].add(m),l[C].add(m),l[w].add(m))}let b=this.groups;0===b.length&&(b=[{start:0,count:t.count}]);for(let L=0,C=b.length;L<C;++L){const w=b[L],U=w.start;for(let q=U,ne=U+w.count;q<ne;q+=3)_(t.getX(q+0),t.getX(q+1),t.getX(q+2))}const v=new I,y=new I,R=new I,M=new I;function D(L){R.fromBufferAttribute(r,L),M.copy(R);const C=a[L];v.copy(C),v.sub(R.multiplyScalar(R.dot(C))).normalize(),y.crossVectors(M,C);const U=y.dot(l[L])<0?-1:1;o.setXYZW(L,v.x,v.y,v.z,U)}for(let L=0,C=b.length;L<C;++L){const w=b[L],U=w.start;for(let q=U,ne=U+w.count;q<ne;q+=3)D(t.getX(q+0)),D(t.getX(q+1)),D(t.getX(q+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new gi(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let h=0,p=n.count;h<p;h++)n.setXYZ(h,0,0,0);const r=new I,s=new I,o=new I,a=new I,l=new I,c=new I,d=new I,u=new I;if(t)for(let h=0,p=t.count;h<p;h+=3){const f=t.getX(h+0),g=t.getX(h+1),m=t.getX(h+2);r.fromBufferAttribute(e,f),s.fromBufferAttribute(e,g),o.fromBufferAttribute(e,m),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),a.fromBufferAttribute(n,f),l.fromBufferAttribute(n,g),c.fromBufferAttribute(n,m),a.add(d),l.add(d),c.add(d),n.setXYZ(f,a.x,a.y,a.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(m,c.x,c.y,c.z)}else for(let h=0,p=e.count;h<p;h+=3)r.fromBufferAttribute(e,h+0),s.fromBufferAttribute(e,h+1),o.fromBufferAttribute(e,h+2),d.subVectors(o,s),u.subVectors(r,s),d.cross(u),n.setXYZ(h+0,d.x,d.y,d.z),n.setXYZ(h+1,d.x,d.y,d.z),n.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)pr.fromBufferAttribute(t,e),pr.normalize(),t.setXYZ(e,pr.x,pr.y,pr.z)}toNonIndexed(){function t(a,l){const c=a.array,d=a.itemSize,u=a.normalized,h=new c.constructor(l.length*d);let p=0,f=0;for(let g=0,m=l.length;g<m;g++){p=a.isInterleavedBufferAttribute?l[g]*a.data.stride+a.offset:l[g]*d;for(let _=0;_<d;_++)h[f++]=c[p++]}return new gi(h,d,u)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Jt,n=this.index.array,r=this.attributes;for(const a in r){const c=t(r[a],n);e.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,u=c.length;d<u;d++){const p=t(c[d],n);l.push(p)}e.morphAttributes[a]=l}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];e.addGroup(c.start,c.count,c.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(t[c]=l[c]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const l in n)t.data.attributes[l]=n[l].toJSON(t.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let u=0,h=c.length;u<h;u++)d.push(c[u].toJSON(t.data));d.length>0&&(r[l]=d,s=!0)}s&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const r=t.attributes;for(const c in r)this.setAttribute(c,r[c].clone(e));const s=t.morphAttributes;for(const c in s){const d=[],u=s[c];for(let h=0,p=u.length;h<p;h++)d.push(u[h].clone(e));this.morphAttributes[c]=d}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let c=0,d=o.length;c<d;c++){const u=o[c];this.addGroup(u.start,u.count,u.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=t.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const VB=new Et,Wc=new Zf,qv=new zr,zB=new I,xh=new I,wh=new I,Mh=new I,GS=new I,Kv=new I,Zv=new _e,Qv=new _e,Jv=new _e,HB=new I,$B=new I,GB=new I,eb=new I,tb=new I;class sn extends sr{constructor(t=new Jt,e=new ti){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(t,e){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;e.fromBufferAttribute(n.attributes.position,t);const a=this.morphTargetInfluences;if(s&&a){Kv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l];0!==d&&(GS.fromBufferAttribute(s[l],t),Kv.addScaledVector(o?GS:GS.sub(e),d))}e.add(Kv)}return e}raycast(t,e){const n=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),qv.copy(n.boundingSphere),qv.applyMatrix4(s),Wc.copy(t.ray).recast(t.near),(!1!==qv.containsPoint(Wc.origin)||!(null===Wc.intersectSphere(qv,zB)||Wc.origin.distanceToSquared(zB)>(t.far-t.near)**2))&&(VB.copy(s).invert(),Wc.copy(t.ray).applyMatrix4(VB),(null===n.boundingBox||!1!==Wc.intersectsBox(n.boundingBox))&&this._computeIntersections(t,e,Wc)))}_computeIntersections(t,e,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,u=s.attributes.normal,h=s.groups,p=s.drawRange;if(null!==a)if(Array.isArray(o))for(let f=0,g=h.length;f<g;f++){const m=h[f],_=o[m.materialIndex];for(let y=Math.max(m.start,p.start),R=Math.min(a.count,Math.min(m.start+m.count,p.start+p.count));y<R;y+=3)r=nb(this,_,t,n,c,d,u,a.getX(y),a.getX(y+1),a.getX(y+2)),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,e.push(r))}else for(let m=Math.max(0,p.start),_=Math.min(a.count,p.start+p.count);m<_;m+=3)r=nb(this,o,t,n,c,d,u,a.getX(m),a.getX(m+1),a.getX(m+2)),r&&(r.faceIndex=Math.floor(m/3),e.push(r));else if(void 0!==l)if(Array.isArray(o))for(let f=0,g=h.length;f<g;f++){const m=h[f],_=o[m.materialIndex];for(let y=Math.max(m.start,p.start),R=Math.min(l.count,Math.min(m.start+m.count,p.start+p.count));y<R;y+=3)r=nb(this,_,t,n,c,d,u,y,y+1,y+2),r&&(r.faceIndex=Math.floor(y/3),r.face.materialIndex=m.materialIndex,e.push(r))}else for(let m=Math.max(0,p.start),_=Math.min(l.count,p.start+p.count);m<_;m+=3)r=nb(this,o,t,n,c,d,u,m,m+1,m+2),r&&(r.faceIndex=Math.floor(m/3),e.push(r))}}function nb(i,t,e,n,r,s,o,a,l,c){i.getVertexPosition(a,xh),i.getVertexPosition(l,wh),i.getVertexPosition(c,Mh);const d=function kae(i,t,e,n,r,s,o,a){let l;if(l=t.side===ws?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,t.side===ua,a),null===l)return null;tb.copy(a),tb.applyMatrix4(i.matrixWorld);const c=e.ray.origin.distanceTo(tb);return c<e.near||c>e.far?null:{distance:c,point:tb.clone(),object:i}}(i,t,e,n,xh,wh,Mh,eb);if(d){r&&(Zv.fromBufferAttribute(r,a),Qv.fromBufferAttribute(r,l),Jv.fromBufferAttribute(r,c),d.uv=ho.getInterpolation(eb,xh,wh,Mh,Zv,Qv,Jv,new _e)),s&&(Zv.fromBufferAttribute(s,a),Qv.fromBufferAttribute(s,l),Jv.fromBufferAttribute(s,c),d.uv1=ho.getInterpolation(eb,xh,wh,Mh,Zv,Qv,Jv,new _e)),o&&(HB.fromBufferAttribute(o,a),$B.fromBufferAttribute(o,l),GB.fromBufferAttribute(o,c),d.normal=ho.getInterpolation(eb,xh,wh,Mh,HB,$B,GB,new I),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const u={a,b:l,c,normal:new I,materialIndex:0};ho.getNormal(xh,wh,Mh,u.normal),d.face=u}return d}class Yc extends Jt{constructor(t=1,e=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],u=[];let h=0,p=0;function f(g,m,_,b,v,y,R,M,D,L,C){const w=y/D,U=R/L,ee=y/2,q=R/2,ne=M/2,fe=D+1,V=L+1;let te=0,Y=0;const ve=new I;for(let Le=0;Le<V;Le++){const $e=Le*U-q;for(let Mt=0;Mt<fe;Mt++)ve[g]=(Mt*w-ee)*b,ve[m]=$e*v,ve[_]=ne,c.push(ve.x,ve.y,ve.z),ve[g]=0,ve[m]=0,ve[_]=M>0?1:-1,d.push(ve.x,ve.y,ve.z),u.push(Mt/D),u.push(1-Le/L),te+=1}for(let Le=0;Le<L;Le++)for(let $e=0;$e<D;$e++){const Gt=h+$e+fe*(Le+1),ie=h+($e+1)+fe*(Le+1),Ie=h+($e+1)+fe*Le;l.push(h+$e+fe*Le,Gt,Ie),l.push(Gt,ie,Ie),Y+=6}a.addGroup(p,Y,C),p+=Y,h+=te}f("z","y","x",-1,-1,n,e,t,o,s,0),f("z","y","x",1,-1,n,e,-t,o,s,1),f("x","z","y",1,1,t,n,e,r,o,2),f("x","z","y",1,-1,t,n,-e,r,o,3),f("x","y","z",1,-1,t,e,n,r,s,4),f("x","y","z",-1,-1,t,e,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new ot(c,3)),this.setAttribute("normal",new ot(d,3)),this.setAttribute("uv",new ot(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Yc(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function Ch(i){const t={};for(const e in i){t[e]={};for(const n in i[e]){const r=i[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=r.clone():t[e][n]=Array.isArray(r)?r.slice():r}}return t}function is(i){const t={};for(let e=0;e<i.length;e++){const n=Ch(i[e]);for(const r in n)t[r]=n[r]}return t}function jB(i){const t=i.getRenderTarget();return null===t?i.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Fn.workingColorSpace}const WB={clone:Ch,merge:is};class Ho extends ns{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Ch(t.uniforms),this.uniformsGroups=function Iae(i){const t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;e.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(t).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}}class jS extends sr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Et,this.projectionMatrix=new Et,this.projectionMatrixInverse=new Et,this.coordinateSystem=Ya}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Ul=new I,YB=new _e,XB=new _e;class qi extends jS{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*oh*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*$c*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*oh*Math.atan(Math.tan(.5*$c*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Ul.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Ul.x,Ul.y).multiplyScalar(-t/Ul.z),Ul.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Ul.x,Ul.y).multiplyScalar(-t/Ul.z)}getViewSize(t,e){return this.getViewBounds(t,YB,XB),e.subVectors(XB,YB)}setViewOffset(t,e,n,r,s,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*$c*this.fov)/this.zoom,n=2*e,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,e-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,e,e-n,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}class Oae extends sr{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new qi(-90,1,t,e);r.layers=this.layers,this.add(r);const s=new qi(-90,1,t,e);s.layers=this.layers,this.add(s);const o=new qi(-90,1,t,e);o.layers=this.layers,this.add(o);const a=new qi(-90,1,t,e);a.layers=this.layers,this.add(a);const l=new qi(-90,1,t,e);l.layers=this.layers,this.add(l);const c=new qi(-90,1,t,e);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[n,r,s,o,a,l]=e;for(const c of e)this.remove(c);if(t===Ya)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else{if(2001!==t)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1)}for(const c of e)this.add(c),c.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),p=t.getActiveMipmapLevel(),f=t.xr.enabled;t.xr.enabled=!1;const g=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,s),t.setRenderTarget(n,1,r),t.render(e,o),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,l),t.setRenderTarget(n,4,r),t.render(e,c),n.texture.generateMipmaps=g,t.setRenderTarget(n,5,r),t.render(e,d),t.setRenderTarget(u,h,p),t.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class ib extends Cs{constructor(t,e,n,r,s,o,a,l,c,d){super(t=void 0!==t?t:[],e=void 0!==e?e:No,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Fae extends Pl{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const n={width:t,height:t,depth:1};this.texture=new ib([n,n,n,n,n,n],e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:Bi}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Yc(5,5,5),s=new Ho({name:"CubemapFromEquirect",uniforms:Ch(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:ws,blending:ja});s.uniforms.tEquirect.value=e;const o=new sn(r,s),a=e.minFilter;return e.minFilter===Bo&&(e.minFilter=Bi),new Oae(1,10,this).update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,r){const s=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,r);t.setRenderTarget(s)}}const WS=new I,Lae=new I,Nae=new dn;class Xc{constructor(t=new I(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const r=WS.subVectors(n,e).cross(Lae.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const n=t.delta(WS),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const s=-(t.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:e.copy(t.start).addScaledVector(n,s)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Nae.getNormalMatrix(t),r=this.coplanarPoint(WS).applyMatrix4(t),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const qc=new zr,rb=new I;class sb{constructor(t=new Xc,e=new Xc,n=new Xc,r=new Xc,s=new Xc,o=new Xc){this.planes=[t,e,n,r,s,o]}set(t,e,n,r,s,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Ya){const n=this.planes,r=t.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],u=r[6],h=r[7],p=r[8],f=r[9],g=r[10],m=r[11],_=r[12],b=r[13],v=r[14],y=r[15];if(n[0].setComponents(l-s,h-c,m-p,y-_).normalize(),n[1].setComponents(l+s,h+c,m+p,y+_).normalize(),n[2].setComponents(l+o,h+d,m+f,y+b).normalize(),n[3].setComponents(l-o,h-d,m-f,y-b).normalize(),n[4].setComponents(l-a,h-u,m-g,y-v).normalize(),e===Ya)n[5].setComponents(l+a,h+u,m+g,y+v).normalize();else{if(2001!==e)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);n[5].setComponents(a,u,g,v).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),qc.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),qc.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(qc)}intersectsSprite(t){return qc.center.set(0,0,0),qc.radius=.7071067811865476,qc.applyMatrix4(t.matrixWorld),this.intersectsSphere(qc)}intersectsSphere(t){const e=this.planes,n=t.center,r=-t.radius;for(let s=0;s<6;s++)if(e[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const r=e[n];if(rb.x=r.normal.x>0?t.max.x:t.min.x,rb.y=r.normal.y>0?t.max.y:t.min.y,rb.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(rb)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function qB(){let i=null,t=!1,e=null,n=null;function r(s,o){e(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==e&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(s){e=s},setContext:function(s){i=s}}}function Bae(i){const t=new WeakMap;return{get:function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)},remove:function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=t.get(a);l&&(i.deleteBuffer(l.buffer),t.delete(a))},update:function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const d=t.get(a);return void((!d||d.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version}))}const c=t.get(a);if(void 0===c)t.set(a,function e(a,l){const c=a.array,d=a.usage,u=c.byteLength,h=i.createBuffer();let p;if(i.bindBuffer(l,h),i.bufferData(l,c,d),a.onUploadCallback(),c instanceof Float32Array)p=i.FLOAT;else if(c instanceof Uint16Array)p=a.isFloat16BufferAttribute?i.HALF_FLOAT:i.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=i.SHORT;else if(c instanceof Uint32Array)p=i.UNSIGNED_INT;else if(c instanceof Int32Array)p=i.INT;else if(c instanceof Int8Array)p=i.BYTE;else if(c instanceof Uint8Array)p=i.UNSIGNED_BYTE;else{if(!(c instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);p=i.UNSIGNED_BYTE}return{buffer:h,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:u}}(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");(function n(a,l,c){const d=l.array,u=l._updateRange,h=l.updateRanges;if(i.bindBuffer(c,a),-1===u.count&&0===h.length&&i.bufferSubData(c,0,d),0!==h.length){for(let p=0,f=h.length;p<f;p++){const g=h[p];i.bufferSubData(c,g.start*d.BYTES_PER_ELEMENT,d,g.start,g.count)}l.clearUpdateRanges()}-1!==u.count&&(i.bufferSubData(c,u.offset*d.BYTES_PER_ELEMENT,d,u.offset,u.count),u.count=-1),l.onUploadCallback()})(c.buffer,a,l),c.version=a.version}}}}class Kc extends Jt{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};const s=t/2,o=e/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,u=t/a,h=e/l,p=[],f=[],g=[],m=[];for(let _=0;_<d;_++){const b=_*h-o;for(let v=0;v<c;v++)f.push(v*u-s,-b,0),g.push(0,0,1),m.push(v/a),m.push(1-_/l)}for(let _=0;_<l;_++)for(let b=0;b<a;b++){const y=b+c*(_+1),R=b+1+c*(_+1),M=b+1+c*_;p.push(b+c*_,y,M),p.push(y,R,M)}this.setIndex(p),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(g,3)),this.setAttribute("uv",new ot(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Kc(t.width,t.height,t.widthSegments,t.heightSegments)}}const fn={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},qe={common:{diffuse:{value:new Ge(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new dn},alphaMap:{value:null},alphaMapTransform:{value:new dn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new dn}},envmap:{envMap:{value:null},envMapRotation:{value:new dn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new dn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new dn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new dn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new dn},normalScale:{value:new _e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new dn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new dn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new dn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new dn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ge(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ge(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new dn},alphaTest:{value:0},uvTransform:{value:new dn}},sprite:{diffuse:{value:new Ge(16777215)},opacity:{value:1},center:{value:new _e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new dn},alphaMap:{value:null},alphaMapTransform:{value:new dn},alphaTest:{value:0}}},ha={basic:{uniforms:is([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.fog]),vertexShader:fn.meshbasic_vert,fragmentShader:fn.meshbasic_frag},lambert:{uniforms:is([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new Ge(0)}}]),vertexShader:fn.meshlambert_vert,fragmentShader:fn.meshlambert_frag},phong:{uniforms:is([qe.common,qe.specularmap,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,qe.lights,{emissive:{value:new Ge(0)},specular:{value:new Ge(1118481)},shininess:{value:30}}]),vertexShader:fn.meshphong_vert,fragmentShader:fn.meshphong_frag},standard:{uniforms:is([qe.common,qe.envmap,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.roughnessmap,qe.metalnessmap,qe.fog,qe.lights,{emissive:{value:new Ge(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag},toon:{uniforms:is([qe.common,qe.aomap,qe.lightmap,qe.emissivemap,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.gradientmap,qe.fog,qe.lights,{emissive:{value:new Ge(0)}}]),vertexShader:fn.meshtoon_vert,fragmentShader:fn.meshtoon_frag},matcap:{uniforms:is([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,qe.fog,{matcap:{value:null}}]),vertexShader:fn.meshmatcap_vert,fragmentShader:fn.meshmatcap_frag},points:{uniforms:is([qe.points,qe.fog]),vertexShader:fn.points_vert,fragmentShader:fn.points_frag},dashed:{uniforms:is([qe.common,qe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:fn.linedashed_vert,fragmentShader:fn.linedashed_frag},depth:{uniforms:is([qe.common,qe.displacementmap]),vertexShader:fn.depth_vert,fragmentShader:fn.depth_frag},normal:{uniforms:is([qe.common,qe.bumpmap,qe.normalmap,qe.displacementmap,{opacity:{value:1}}]),vertexShader:fn.meshnormal_vert,fragmentShader:fn.meshnormal_frag},sprite:{uniforms:is([qe.sprite,qe.fog]),vertexShader:fn.sprite_vert,fragmentShader:fn.sprite_frag},background:{uniforms:{uvTransform:{value:new dn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:fn.background_vert,fragmentShader:fn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new dn}},vertexShader:fn.backgroundCube_vert,fragmentShader:fn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:fn.cube_vert,fragmentShader:fn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:fn.equirect_vert,fragmentShader:fn.equirect_frag},distanceRGBA:{uniforms:is([qe.common,qe.displacementmap,{referencePosition:{value:new I},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:fn.distanceRGBA_vert,fragmentShader:fn.distanceRGBA_frag},shadow:{uniforms:is([qe.lights,qe.fog,{color:{value:new Ge(0)},opacity:{value:1}}]),vertexShader:fn.shadow_vert,fragmentShader:fn.shadow_frag}};ha.physical={uniforms:is([ha.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new dn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new dn},clearcoatNormalScale:{value:new _e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new dn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new dn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new dn},sheen:{value:0},sheenColor:{value:new Ge(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new dn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new dn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new dn},transmissionSamplerSize:{value:new _e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new dn},attenuationDistance:{value:0},attenuationColor:{value:new Ge(0)},specularColor:{value:new Ge(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new dn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new dn},anisotropyVector:{value:new _e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new dn}}]),vertexShader:fn.meshphysical_vert,fragmentShader:fn.meshphysical_frag};const ob={r:0,b:0,g:0},Zc=new Ka,Bce=new Et;function Uce(i,t,e,n,r,s,o){const a=new Ge(0);let c,d,l=!0===s?0:1,u=null,h=0,p=null;function f(b){let v=!0===b.isScene?b.background:null;return v&&v.isTexture&&(v=(b.backgroundBlurriness>0?e:t).get(v)),v}function _(b,v){b.getRGB(ob,jB(i)),n.buffers.color.setClear(ob.r,ob.g,ob.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(b,v=1){a.set(b),l=v,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(b){l=b,_(a,l)},render:function g(b){let v=!1;const y=f(b);null===y?_(a,l):y&&y.isColor&&(_(y,1),v=!0);const R=i.xr.getEnvironmentBlendMode();"additive"===R?n.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===R&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||v)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))},addToRenderList:function m(b,v){const y=f(v);y&&(y.isCubeTexture||y.mapping===Vf)?(void 0===d&&(d=new sn(new Yc(1,1,1),new Ho({name:"BackgroundCubeMaterial",uniforms:Ch(ha.backgroundCube.uniforms),vertexShader:ha.backgroundCube.vertexShader,fragmentShader:ha.backgroundCube.fragmentShader,side:ws,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(R,M,D){this.matrixWorld.copyPosition(D.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),Zc.copy(v.backgroundRotation),Zc.x*=-1,Zc.y*=-1,Zc.z*=-1,y.isCubeTexture&&!1===y.isRenderTargetTexture&&(Zc.y*=-1,Zc.z*=-1),d.material.uniforms.envMap.value=y,d.material.uniforms.flipEnvMap.value=y.isCubeTexture&&!1===y.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(Bce.makeRotationFromEuler(Zc)),d.material.toneMapped=Fn.getTransfer(y.colorSpace)!==li,(u!==y||h!==y.version||p!==i.toneMapping)&&(d.material.needsUpdate=!0,u=y,h=y.version,p=i.toneMapping),d.layers.enableAll(),b.unshift(d,d.geometry,d.material,0,0,null)):y&&y.isTexture&&(void 0===c&&(c=new sn(new Kc(2,2),new Ho({name:"BackgroundMaterial",uniforms:Ch(ha.background.uniforms),vertexShader:ha.background.vertexShader,fragmentShader:ha.background.fragmentShader,side:ua,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=y,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Fn.getTransfer(y.colorSpace)!==li,!0===y.matrixAutoUpdate&&y.updateMatrix(),c.material.uniforms.uvTransform.value.copy(y.matrix),(u!==y||h!==y.version||p!==i.toneMapping)&&(c.material.needsUpdate=!0,u=y,h=y.version,p=i.toneMapping),c.layers.enableAll(),b.unshift(c,c.geometry,c.material,0,0,null))}}}function Vce(i,t){const e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=h(null);let s=r,o=!1;function c(w){return i.bindVertexArray(w)}function d(w){return i.deleteVertexArray(w)}function h(w){const U=[],ee=[],q=[];for(let ne=0;ne<e;ne++)U[ne]=0,ee[ne]=0,q[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:ee,attributeDivisors:q,object:w,attributes:{},index:null}}function g(){const w=s.newAttributes;for(let U=0,ee=w.length;U<ee;U++)w[U]=0}function m(w){_(w,0)}function _(w,U){const q=s.enabledAttributes,ne=s.attributeDivisors;s.newAttributes[w]=1,0===q[w]&&(i.enableVertexAttribArray(w),q[w]=1),ne[w]!==U&&(i.vertexAttribDivisor(w,U),ne[w]=U)}function b(){const w=s.newAttributes,U=s.enabledAttributes;for(let ee=0,q=U.length;ee<q;ee++)U[ee]!==w[ee]&&(i.disableVertexAttribArray(ee),U[ee]=0)}function v(w,U,ee,q,ne,fe,V){!0===V?i.vertexAttribIPointer(w,U,ee,ne,fe):i.vertexAttribPointer(w,U,ee,q,ne,fe)}function L(){C(),o=!0,s!==r&&(s=r,c(s.object))}function C(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function a(w,U,ee,q,ne){let fe=!1;const V=function u(w,U,ee){const q=!0===ee.wireframe;let ne=n[w.id];void 0===ne&&(ne={},n[w.id]=ne);let fe=ne[U.id];void 0===fe&&(fe={},ne[U.id]=fe);let V=fe[q];return void 0===V&&(V=h(function l(){return i.createVertexArray()}()),fe[q]=V),V}(q,ee,U);s!==V&&(s=V,c(s.object)),fe=function p(w,U,ee,q){const ne=s.attributes,fe=U.attributes;let V=0;const te=ee.getAttributes();for(const Y in te)if(te[Y].location>=0){const Le=ne[Y];let $e=fe[Y];if(void 0===$e&&("instanceMatrix"===Y&&w.instanceMatrix&&($e=w.instanceMatrix),"instanceColor"===Y&&w.instanceColor&&($e=w.instanceColor)),void 0===Le||Le.attribute!==$e||$e&&Le.data!==$e.data)return!0;V++}return s.attributesNum!==V||s.index!==q}(w,q,ee,ne),fe&&function f(w,U,ee,q){const ne={},fe=U.attributes;let V=0;const te=ee.getAttributes();for(const Y in te)if(te[Y].location>=0){let Le=fe[Y];void 0===Le&&("instanceMatrix"===Y&&w.instanceMatrix&&(Le=w.instanceMatrix),"instanceColor"===Y&&w.instanceColor&&(Le=w.instanceColor));const $e={};$e.attribute=Le,Le&&Le.data&&($e.data=Le.data),ne[Y]=$e,V++}s.attributes=ne,s.attributesNum=V,s.index=q}(w,q,ee,ne),null!==ne&&t.update(ne,i.ELEMENT_ARRAY_BUFFER),(fe||o)&&(o=!1,function y(w,U,ee,q){g();const ne=q.attributes,fe=ee.getAttributes(),V=U.defaultAttributeValues;for(const te in fe){const Y=fe[te];if(Y.location>=0){let ve=ne[te];if(void 0===ve&&("instanceMatrix"===te&&w.instanceMatrix&&(ve=w.instanceMatrix),"instanceColor"===te&&w.instanceColor&&(ve=w.instanceColor)),void 0!==ve){const Le=ve.normalized,$e=ve.itemSize,Mt=t.get(ve);if(void 0===Mt)continue;const Gt=Mt.buffer,ie=Mt.type,Ie=Mt.bytesPerElement,Ye=ie===i.INT||ie===i.UNSIGNED_INT||ve.gpuType===$C;if(ve.isInterleavedBufferAttribute){const Re=ve.data,_t=Re.stride,wt=ve.offset;if(Re.isInstancedInterleavedBuffer){for(let yt=0;yt<Y.locationSize;yt++)_(Y.location+yt,Re.meshPerAttribute);!0!==w.isInstancedMesh&&void 0===q._maxInstanceCount&&(q._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let yt=0;yt<Y.locationSize;yt++)m(Y.location+yt);i.bindBuffer(i.ARRAY_BUFFER,Gt);for(let yt=0;yt<Y.locationSize;yt++)v(Y.location+yt,$e/Y.locationSize,ie,Le,_t*Ie,(wt+$e/Y.locationSize*yt)*Ie,Ye)}else{if(ve.isInstancedBufferAttribute){for(let Re=0;Re<Y.locationSize;Re++)_(Y.location+Re,ve.meshPerAttribute);!0!==w.isInstancedMesh&&void 0===q._maxInstanceCount&&(q._maxInstanceCount=ve.meshPerAttribute*ve.count)}else for(let Re=0;Re<Y.locationSize;Re++)m(Y.location+Re);i.bindBuffer(i.ARRAY_BUFFER,Gt);for(let Re=0;Re<Y.locationSize;Re++)v(Y.location+Re,$e/Y.locationSize,ie,Le,$e*Ie,$e/Y.locationSize*Re*Ie,Ye)}}else if(void 0!==V){const Le=V[te];if(void 0!==Le)switch(Le.length){case 2:i.vertexAttrib2fv(Y.location,Le);break;case 3:i.vertexAttrib3fv(Y.location,Le);break;case 4:i.vertexAttrib4fv(Y.location,Le);break;default:i.vertexAttrib1fv(Y.location,Le)}}}}b()}(w,U,ee,q),null!==ne&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(ne).buffer))},reset:L,resetDefaultState:C,dispose:function R(){L();for(const w in n){const U=n[w];for(const ee in U){const q=U[ee];for(const ne in q)d(q[ne].object),delete q[ne];delete U[ee]}delete n[w]}},releaseStatesOfGeometry:function M(w){if(void 0===n[w.id])return;const U=n[w.id];for(const ee in U){const q=U[ee];for(const ne in q)d(q[ne].object),delete q[ne];delete U[ee]}delete n[w.id]},releaseStatesOfProgram:function D(w){for(const U in n){const ee=n[U];if(void 0===ee[w.id])continue;const q=ee[w.id];for(const ne in q)d(q[ne].object),delete q[ne];delete ee[w.id]}},initAttributes:g,enableAttribute:m,disableUnusedAttributes:b}}function zce(i,t,e){let n;function o(c,d,u){0!==u&&(i.drawArraysInstanced(n,c,d,u),e.update(d,n,u))}this.setMode=function r(c){n=c},this.render=function s(c,d){i.drawArrays(n,c,d),e.update(d,n,1)},this.renderInstances=o,this.renderMultiDraw=function a(c,d,u){if(0===u)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,c,0,d,0,u);let p=0;for(let f=0;f<u;f++)p+=d[f];e.update(p,n,1)},this.renderMultiDrawInstances=function l(c,d,u,h){if(0===u)return;const p=t.get("WEBGL_multi_draw");if(null===p)for(let f=0;f<c.length;f++)o(c[f],d[f],h[f]);else{p.multiDrawArraysInstancedWEBGL(n,c,0,d,0,h,0,u);let f=0;for(let g=0;g<u;g++)f+=d[g];for(let g=0;g<h.length;g++)e.update(f,n,h[g])}}}function Hce(i,t,e,n){let r;function l(M){if("highp"===M){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return"mediump"===M&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=void 0!==e.precision?e.precision:"highp";const d=l(c);d!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",d,"instead."),c=d);const u=!0===e.logarithmicDepthBuffer,h=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function s(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const M=t.get("EXT_texture_filter_anisotropic");r=i.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:l,textureFormatReadable:function o(M){return!(M!==Ms&&n.convert(M)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))},textureTypeReadable:function a(M){const D=M===Qu&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(M!==Wa&&n.convert(M)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==js&&!D)},precision:c,logarithmicDepthBuffer:u,maxTextures:h,maxVertexTextures:p,maxTextureSize:i.getParameter(i.MAX_TEXTURE_SIZE),maxCubemapSize:i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:i.getParameter(i.MAX_VERTEX_ATTRIBS),maxVertexUniforms:i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:i.getParameter(i.MAX_VARYING_VECTORS),maxFragmentUniforms:i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:p>0,maxSamples:i.getParameter(i.MAX_SAMPLES)}}function $ce(i){const t=this;let e=null,n=0,r=!1,s=!1;const o=new Xc,a=new dn,l={value:null,needsUpdate:!1};function d(u,h,p,f){const g=null!==u?u.length:0;let m=null;if(0!==g){if(m=l.value,!0!==f||null===m){const _=p+4*g,b=h.matrixWorldInverse;a.getNormalMatrix(b),(null===m||m.length<_)&&(m=new Float32Array(_));for(let v=0,y=p;v!==g;++v,y+=4)o.copy(u[v]).applyMatrix4(b,a),o.normal.toArray(m,y),m[y+3]=o.constant}l.value=m,l.needsUpdate=!0}return t.numPlanes=g,t.numIntersection=0,m}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){const p=0!==u.length||h||0!==n||r;return r=h,n=u.length,p},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(u,h){e=d(u,h,0)},this.setState=function(u,h,p){const f=u.clippingPlanes,g=u.clipIntersection,m=u.clipShadows,_=i.get(u);if(!r||null===f||0===f.length||s&&!m)s?d(null):function c(){l.value!==e&&(l.value=e,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}();else{const b=s?0:n,v=4*b;let y=_.clippingState||null;l.value=y,y=d(f,h,v,p);for(let R=0;R!==v;++R)y[R]=e[R];_.clippingState=y,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=b}}}function Gce(i){let t=new WeakMap;function e(o,a){return a===Sv?o.mapping=No:a===Ev&&(o.mapping=zc),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=t.get(a);void 0!==l&&(t.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===Sv||a===Ev){if(t.has(o))return e(t.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new Fae(l.height);return c.fromEquirectangularTexture(i,o),t.set(o,c),o.addEventListener("dispose",r),e(c.texture,o.mapping)}return null}}}return o},dispose:function s(){t=new WeakMap}}}class tm extends jS{constructor(t=-1,e=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-t,o=n+t,a=r+e,l=r-e;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}const KB=[.125,.215,.35,.446,.526,.582],YS=new tm,ZB=new Ge;let XS=null,qS=0,KS=0,ZS=!1;const Jc=(1+Math.sqrt(5))/2,Dh=1/Jc,QB=[new I(-Jc,Dh,0),new I(Jc,Dh,0),new I(-Dh,0,Jc),new I(Dh,0,Jc),new I(0,Jc,-Dh),new I(0,Jc,Dh),new I(-1,1,-1),new I(1,1,-1),new I(-1,1,1),new I(1,1,1)];class JB{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,r=100){XS=this._renderer.getRenderTarget(),qS=this._renderer.getActiveCubeFace(),KS=this._renderer.getActiveMipmapLevel(),ZS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(t,n,r,s),e>0&&this._blur(s,0,0,e),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=n3(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=t3(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(XS,qS,KS),this._renderer.xr.enabled=ZS,t.scissorTest=!1,ab(t,0,0,t.width,t.height)}_fromTexture(t,e){this._setSize(t.mapping===No||t.mapping===zc?0===t.image.length?16:t.image[0].width||t.image[0].image.width:t.image.width/4),XS=this._renderer.getRenderTarget(),qS=this._renderer.getActiveCubeFace(),KS=this._renderer.getActiveMipmapLevel(),ZS=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Bi,minFilter:Bi,generateMipmaps:!1,type:Qu,format:Ms,colorSpace:Er,depthBuffer:!1},r=e3(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=e3(t,e,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function jce(i){const t=[],e=[],n=[];let r=i;const s=i-4+1+KB.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);e.push(a);let l=1/a;o>i-4?l=KB[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,u=1+c,h=[d,d,u,d,u,u,d,d,u,u,d,u],p=6,f=6,g=3,m=2,_=1,b=new Float32Array(g*f*p),v=new Float32Array(m*f*p),y=new Float32Array(_*f*p);for(let M=0;M<p;M++){const D=M%3*2/3-1,L=M>2?0:-1;b.set([D,L,0,D+2/3,L,0,D+2/3,L+1,0,D,L,0,D+2/3,L+1,0,D,L+1,0],g*f*M),v.set(h,m*f*M),y.set([M,M,M,M,M,M],_*f*M)}const R=new Jt;R.setAttribute("position",new gi(b,g)),R.setAttribute("uv",new gi(v,m)),R.setAttribute("faceIndex",new gi(y,_)),t.push(R),r>4&&r--}return{lodPlanes:t,sizeLods:e,sigmas:n}}(s)),this._blurMaterial=function Wce(i,t,e){const n=new Float32Array(20),r=new I(0,1,0);return new Ho({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ja,depthTest:!1,depthWrite:!1})}(s,t,e)}return r}_compileMaterial(t){const e=new sn(this._lodPlanes[0],t);this._renderer.compile(e,YS)}_sceneToCubeUV(t,e,n,r){const a=new qi(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,u=d.autoClear,h=d.toneMapping;d.getClearColor(ZB),d.toneMapping=kl,d.autoClear=!1;const p=new ti({name:"PMREM.Background",side:ws,depthWrite:!1,depthTest:!1}),f=new sn(new Yc,p);let g=!1;const m=t.background;m?m.isColor&&(p.color.copy(m),t.background=null,g=!0):(p.color.copy(ZB),g=!0);for(let _=0;_<6;_++){const b=_%3;0===b?(a.up.set(0,l[_],0),a.lookAt(c[_],0,0)):1===b?(a.up.set(0,0,l[_]),a.lookAt(0,c[_],0)):(a.up.set(0,l[_],0),a.lookAt(0,0,c[_]));const v=this._cubeSize;ab(r,b*v,_>2?v:0,v,v),d.setRenderTarget(r),g&&d.render(f,a),d.render(t,a)}f.geometry.dispose(),f.material.dispose(),d.toneMapping=h,d.autoClear=u,t.background=m}_textureToCubeUV(t,e){const n=this._renderer,r=t.mapping===No||t.mapping===zc;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=n3()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=t3());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new sn(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const l=this._cubeSize;ab(e,0,0,3*l,2*l),n.setRenderTarget(e),n.render(o,YS)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]);this._blur(t,s-1,s,o,QB[(r-s-1)%QB.length])}e.autoClear=n}_blur(t,e,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",s),this._halfBlur(o,t,n,n,r,"longitudinal",s)}_halfBlur(t,e,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const u=new sn(this._lodPlanes[r],c),h=c.uniforms,p=this._sizeLods[n]-1,f=isFinite(s)?Math.PI/(2*p):2*Math.PI/39,g=s/f,m=isFinite(s)?1+Math.floor(3*g):20;m>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const _=[];let b=0;for(let D=0;D<20;++D){const L=D/g,C=Math.exp(-L*L/2);_.push(C),0===D?b+=C:D<m&&(b+=2*C)}for(let D=0;D<_.length;D++)_[D]=_[D]/b;h.envMap.value=t.texture,h.samples.value=m,h.weights.value=_,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a);const{_lodMax:v}=this;h.dTheta.value=f,h.mipInt.value=v-n;const y=this._sizeLods[r];ab(e,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),l.setRenderTarget(e),l.render(u,YS)}}function e3(i,t,e){const n=new Pl(i,t,e);return n.texture.mapping=Vf,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function ab(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function t3(){return new Ho({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ja,depthTest:!1,depthWrite:!1})}function n3(){return new Ho({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ja,depthTest:!1,depthWrite:!1})}function Yce(i){let t=new WeakMap,e=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=t.get(l);void 0!==c&&(t.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=l===Sv||l===Ev,d=l===No||l===zc;if(c||d){let u=t.get(a);if(a.isRenderTargetTexture&&a.pmremVersion!==(void 0!==u?u.texture.pmremVersion:0))return null===e&&(e=new JB(i)),u=c?e.fromEquirectangular(a,u):e.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),u.texture;if(void 0!==u)return u.texture;{const p=a.image;return c&&p&&p.height>0||d&&p&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(p)?(null===e&&(e=new JB(i)),u=c?e.fromEquirectangular(a):e.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),a.addEventListener("dispose",s),u.texture):null}}}return a},dispose:function o(){t=new WeakMap,null!==e&&(e.dispose(),e=null)}}}function Xce(i){const t={};function e(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return t[n]=r,r}return{has:function(n){return null!==e(n)},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){const r=e(n);return null===r&&lh("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function qce(i,t,e,n){const r={},s=new WeakMap;function o(u){const h=u.target;null!==h.index&&t.remove(h.index);for(const f in h.attributes)t.remove(h.attributes[f]);for(const f in h.morphAttributes){const g=h.morphAttributes[f];for(let m=0,_=g.length;m<_;m++)t.remove(g[m])}h.removeEventListener("dispose",o),delete r[h.id];const p=s.get(h);p&&(t.remove(p),s.delete(h)),n.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,e.memory.geometries--}function c(u){const h=[],p=u.index,f=u.attributes.position;let g=0;if(null!==p){const b=p.array;g=p.version;for(let v=0,y=b.length;v<y;v+=3){const R=b[v+0],M=b[v+1],D=b[v+2];h.push(R,M,M,D,D,R)}}else{if(void 0===f)return;g=f.version;for(let v=0,y=f.array.length/3-1;v<y;v+=3){const R=v+0,M=v+1,D=v+2;h.push(R,M,M,D,D,R)}}const m=new(MB(h)?UB:BB)(h,1);m.version=g;const _=s.get(u);_&&t.remove(_),s.set(u,m)}return{get:function a(u,h){return!0===r[h.id]||(h.addEventListener("dispose",o),r[h.id]=!0,e.memory.geometries++),h},update:function l(u){const h=u.attributes;for(const f in h)t.update(h[f],i.ARRAY_BUFFER);const p=u.morphAttributes;for(const f in p){const g=p[f];for(let m=0,_=g.length;m<_;m++)t.update(g[m],i.ARRAY_BUFFER)}},getWireframeAttribute:function d(u){const h=s.get(u);if(h){const p=u.index;null!==p&&h.version<p.version&&c(u)}else c(u);return s.get(u)}}}function Kce(i,t,e){let n,s,o;function c(h,p,f){0!==f&&(i.drawElementsInstanced(n,p,s,h*o,f),e.update(p,n,f))}this.setMode=function r(h){n=h},this.setIndex=function a(h){s=h.type,o=h.bytesPerElement},this.render=function l(h,p){i.drawElements(n,p,s,h*o),e.update(p,n,1)},this.renderInstances=c,this.renderMultiDraw=function d(h,p,f){if(0===f)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,p,0,s,h,0,f);let m=0;for(let _=0;_<f;_++)m+=p[_];e.update(m,n,1)},this.renderMultiDrawInstances=function u(h,p,f,g){if(0===f)return;const m=t.get("WEBGL_multi_draw");if(null===m)for(let _=0;_<h.length;_++)c(h[_]/o,p[_],g[_]);else{m.multiDrawElementsInstancedWEBGL(n,p,0,s,h,0,g,0,f);let _=0;for(let b=0;b<f;b++)_+=p[b];for(let b=0;b<g.length;b++)e.update(_,n,g[b])}}}function Zce(i){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function n(s,o,a){switch(e.calls++,o){case i.TRIANGLES:e.triangles+=a*(s/3);break;case i.LINES:e.lines+=a*(s/2);break;case i.LINE_STRIP:e.lines+=a*(s-1);break;case i.LINE_LOOP:e.lines+=a*s;break;case i.POINTS:e.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Qce(i,t,e){const n=new WeakMap,r=new Kn;return{update:function s(o,a,l){const c=o.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==d?d.length:0;let h=n.get(a);if(void 0===h||h.count!==u){let C=function(){D.dispose(),n.delete(a),a.removeEventListener("dispose",C)};void 0!==h&&h.texture.dispose();const p=void 0!==a.morphAttributes.position,f=void 0!==a.morphAttributes.normal,g=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],b=a.morphAttributes.color||[];let v=0;!0===p&&(v=1),!0===f&&(v=2),!0===g&&(v=3);let y=a.attributes.position.count*v,R=1;y>t.maxTextureSize&&(R=Math.ceil(y/t.maxTextureSize),y=t.maxTextureSize);const M=new Float32Array(y*R*4*u),D=new TS(M,y,R,u);D.type=js,D.needsUpdate=!0;const L=4*v;for(let w=0;w<u;w++){const U=m[w],ee=_[w],q=b[w],ne=y*R*4*w;for(let fe=0;fe<U.count;fe++){const V=fe*L;!0===p&&(r.fromBufferAttribute(U,fe),M[ne+V+0]=r.x,M[ne+V+1]=r.y,M[ne+V+2]=r.z,M[ne+V+3]=0),!0===f&&(r.fromBufferAttribute(ee,fe),M[ne+V+4]=r.x,M[ne+V+5]=r.y,M[ne+V+6]=r.z,M[ne+V+7]=0),!0===g&&(r.fromBufferAttribute(q,fe),M[ne+V+8]=r.x,M[ne+V+9]=r.y,M[ne+V+10]=r.z,M[ne+V+11]=4===q.itemSize?r.w:1)}}h={count:u,texture:D,size:new _e(y,R)},n.set(a,h),a.addEventListener("dispose",C)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,e);else{let p=0;for(let g=0;g<c.length;g++)p+=c[g];const f=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(i,"morphTargetBaseInfluence",f),l.getUniforms().setValue(i,"morphTargetInfluences",c)}l.getUniforms().setValue(i,"morphTargetsTexture",h.texture,e),l.getUniforms().setValue(i,"morphTargetsTextureSize",h.size)}}}function Jce(i,t,e,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),e.remove(c.instanceMatrix),null!==c.instanceColor&&e.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,u=t.get(l,l.geometry);if(r.get(u)!==c&&(t.update(u),r.set(u,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),r.get(l)!==c&&(e.update(l.instanceMatrix,i.ARRAY_BUFFER),null!==l.instanceColor&&e.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==c&&(h.update(),r.set(h,c))}return u},dispose:function o(){r=new WeakMap}}}class r3 extends Cs{constructor(t,e,n,r,s,o,a,l,c,d=eh){if(d!==eh&&d!==th)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===eh&&(n=Il),void 0===n&&d===th&&(n=Ju),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==a?a:Yi,this.minFilter=void 0!==l?l:Yi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}const s3=new Cs,o3=new r3(1,1),a3=new TS,l3=new AB,c3=new ib,d3=[],u3=[],h3=new Float32Array(16),p3=new Float32Array(9),f3=new Float32Array(4);function Th(i,t,e){const n=i[0];if(n<=0||n>0)return i;const r=t*e;let s=d3[r];if(void 0===s&&(s=new Float32Array(r),d3[r]=s),0!==t){n.toArray(s,0);for(let o=1,a=0;o!==t;++o)a+=e,i[o].toArray(s,a)}return s}function or(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function ar(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function lb(i,t){let e=u3[t];void 0===e&&(e=new Int32Array(t),u3[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function ede(i,t){const e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function tde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(or(e,t))return;i.uniform2fv(this.addr,t),ar(e,t)}}function nde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(void 0!==t.r)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(or(e,t))return;i.uniform3fv(this.addr,t),ar(e,t)}}function ide(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(or(e,t))return;i.uniform4fv(this.addr,t),ar(e,t)}}function rde(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(or(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),ar(e,t)}else{if(or(e,n))return;f3.set(n),i.uniformMatrix2fv(this.addr,!1,f3),ar(e,n)}}function sde(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(or(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),ar(e,t)}else{if(or(e,n))return;p3.set(n),i.uniformMatrix3fv(this.addr,!1,p3),ar(e,n)}}function ode(i,t){const e=this.cache,n=t.elements;if(void 0===n){if(or(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),ar(e,t)}else{if(or(e,n))return;h3.set(n),i.uniformMatrix4fv(this.addr,!1,h3),ar(e,n)}}function ade(i,t){const e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function lde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(or(e,t))return;i.uniform2iv(this.addr,t),ar(e,t)}}function cde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(or(e,t))return;i.uniform3iv(this.addr,t),ar(e,t)}}function dde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(or(e,t))return;i.uniform4iv(this.addr,t),ar(e,t)}}function ude(i,t){const e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function hde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(or(e,t))return;i.uniform2uiv(this.addr,t),ar(e,t)}}function pde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(or(e,t))return;i.uniform3uiv(this.addr,t),ar(e,t)}}function fde(i,t){const e=this.cache;if(void 0!==t.x)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(or(e,t))return;i.uniform4uiv(this.addr,t),ar(e,t)}}function mde(i,t,e){const n=this.cache,r=e.allocateTextureUnit();let s;n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),this.type===i.SAMPLER_2D_SHADOW?(o3.compareFunction=yB,s=o3):s=s3,e.setTexture2D(t||s,r)}function gde(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||l3,r)}function _de(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||c3,r)}function vde(i,t,e){const n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||a3,r)}function yde(i,t){i.uniform1fv(this.addr,t)}function xde(i,t){const e=Th(t,this.size,2);i.uniform2fv(this.addr,e)}function wde(i,t){const e=Th(t,this.size,3);i.uniform3fv(this.addr,e)}function Mde(i,t){const e=Th(t,this.size,4);i.uniform4fv(this.addr,e)}function Cde(i,t){const e=Th(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function Sde(i,t){const e=Th(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function Ede(i,t){const e=Th(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function Ade(i,t){i.uniform1iv(this.addr,t)}function Dde(i,t){i.uniform2iv(this.addr,t)}function Tde(i,t){i.uniform3iv(this.addr,t)}function kde(i,t){i.uniform4iv(this.addr,t)}function Ide(i,t){i.uniform1uiv(this.addr,t)}function Rde(i,t){i.uniform2uiv(this.addr,t)}function Pde(i,t){i.uniform3uiv(this.addr,t)}function Ode(i,t){i.uniform4uiv(this.addr,t)}function Fde(i,t,e){const n=this.cache,r=t.length,s=lb(e,r);or(n,s)||(i.uniform1iv(this.addr,s),ar(n,s));for(let o=0;o!==r;++o)e.setTexture2D(t[o]||s3,s[o])}function Lde(i,t,e){const n=this.cache,r=t.length,s=lb(e,r);or(n,s)||(i.uniform1iv(this.addr,s),ar(n,s));for(let o=0;o!==r;++o)e.setTexture3D(t[o]||l3,s[o])}function Nde(i,t,e){const n=this.cache,r=t.length,s=lb(e,r);or(n,s)||(i.uniform1iv(this.addr,s),ar(n,s));for(let o=0;o!==r;++o)e.setTextureCube(t[o]||c3,s[o])}function Bde(i,t,e){const n=this.cache,r=t.length,s=lb(e,r);or(n,s)||(i.uniform1iv(this.addr,s),ar(n,s));for(let o=0;o!==r;++o)e.setTexture2DArray(t[o]||a3,s[o])}class Vde{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=function bde(i){switch(i){case 5126:return ede;case 35664:return tde;case 35665:return nde;case 35666:return ide;case 35674:return rde;case 35675:return sde;case 35676:return ode;case 5124:case 35670:return ade;case 35667:case 35671:return lde;case 35668:case 35672:return cde;case 35669:case 35673:return dde;case 5125:return ude;case 36294:return hde;case 36295:return pde;case 36296:return fde;case 35678:case 36198:case 36298:case 36306:case 35682:return mde;case 35679:case 36299:case 36307:return gde;case 35680:case 36300:case 36308:case 36293:return _de;case 36289:case 36303:case 36311:case 36292:return vde}}(e.type)}}class zde{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function Ude(i){switch(i){case 5126:return yde;case 35664:return xde;case 35665:return wde;case 35666:return Mde;case 35674:return Cde;case 35675:return Sde;case 35676:return Ede;case 5124:case 35670:return Ade;case 35667:case 35671:return Dde;case 35668:case 35672:return Tde;case 35669:case 35673:return kde;case 5125:return Ide;case 36294:return Rde;case 36295:return Pde;case 36296:return Ode;case 35678:case 36198:case 36298:case 36306:case 35682:return Fde;case 35679:case 36299:case 36307:return Lde;case 35680:case 36300:case 36308:case 36293:return Nde;case 36289:case 36303:case 36311:case 36292:return Bde}}(e.type)}}class Hde{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(t,e[a.id],n)}}}const JS=/(\w+)(\])?(\[|\.)?/g;function m3(i,t){i.seq.push(t),i.map[t.id]=t}function $de(i,t,e){const n=i.name,r=n.length;for(JS.lastIndex=0;;){const s=JS.exec(n);let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&JS.lastIndex+2===r){m3(e,void 0===c?new Vde(a,i,t):new zde(a,i,t));break}{let u=e.map[a];void 0===u&&(u=new Hde(a),m3(e,u)),e=u}}}class cb{constructor(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=t.getActiveUniform(e,r);$de(s,t.getUniformLocation(e,s.name),this)}}setValue(t,e,n,r){const s=this.map[e];void 0!==s&&s.setValue(t,n,r)}setOptional(t,e,n){const r=e[n];void 0!==r&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let s=0,o=e.length;s!==o;++s){const a=e[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(t,l.value,r)}}static seqWithValue(t,e){const n=[];for(let r=0,s=t.length;r!==s;++r){const o=t[r];o.id in e&&n.push(o)}return n}}function g3(i,t,e){const n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}const Gde=37297;let jde=0;function _3(i,t,e){const n=i.getShaderParameter(t,i.COMPILE_STATUS),r=i.getShaderInfoLog(t).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return e.toUpperCase()+"\n\n"+r+"\n\n"+function Wde(i,t){const e=i.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,e.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===t?">":" "} ${a}: ${e[o]}`)}return n.join("\n")}(i.getShaderSource(t),o)}return r}function Xde(i,t){const e=function Yde(i){const t=Fn.getPrimaries(Fn.workingColorSpace),e=Fn.getPrimaries(i);let n;switch(t===e?n="":t===Nv&&e===Lv?n="LinearDisplayP3ToLinearSRGB":t===Lv&&e===Nv&&(n="LinearSRGBToLinearDisplayP3"),i){case Er:case Ov:return[n,"LinearTransferOETF"];case Sr:case CS:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}(t);return`vec4 ${i}( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`}function qde(i,t){let e;switch(t){case Aoe:e="Linear";break;case Doe:e="Reinhard";break;case Toe:e="OptimizedCineon";break;case koe:e="ACESFilmic";break;case Roe:e="AgX";break;case Poe:e="Neutral";break;case Ioe:e="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),e="Linear"}return"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}const db=new I;function nm(i){return""!==i}function v3(i,t){const e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function b3(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const eue=/^[ \t]*#include +<([\w\d./]+)>/gm;function eE(i){return i.replace(eue,nue)}const tue=new Map;function nue(i,t){let e=fn[t];if(void 0===e){const n=tue.get(t);if(void 0===n)throw new Error("Can not resolve #include <"+t+">");e=fn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n)}return eE(e)}const iue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function y3(i){return i.replace(iue,rue)}function rue(i,t,e,n){let r="";for(let s=parseInt(t);s<parseInt(e);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function x3(i){let t=`precision ${i.precision} float;\n\tprecision ${i.precision} int;\n\tprecision ${i.precision} sampler2D;\n\tprecision ${i.precision} samplerCube;\n\tprecision ${i.precision} sampler3D;\n\tprecision ${i.precision} sampler2DArray;\n\tprecision ${i.precision} sampler2DShadow;\n\tprecision ${i.precision} samplerCubeShadow;\n\tprecision ${i.precision} sampler2DArrayShadow;\n\tprecision ${i.precision} isampler2D;\n\tprecision ${i.precision} isampler3D;\n\tprecision ${i.precision} isamplerCube;\n\tprecision ${i.precision} isampler2DArray;\n\tprecision ${i.precision} usampler2D;\n\tprecision ${i.precision} usampler3D;\n\tprecision ${i.precision} usamplerCube;\n\tprecision ${i.precision} usampler2DArray;\n\t`;return"highp"===i.precision?t+="\n#define HIGH_PRECISION":"mediump"===i.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(t+="\n#define LOW_PRECISION"),t}function due(i,t,e,n){const r=i.getContext(),s=e.defines;let o=e.vertexShader,a=e.fragmentShader;const l=function sue(i){let t="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===nB?t="SHADOWMAP_TYPE_PCF":i.shadowMapType===iB?t="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ga&&(t="SHADOWMAP_TYPE_VSM"),t}(e),c=function oue(i){let t="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case No:case zc:t="ENVMAP_TYPE_CUBE";break;case Vf:t="ENVMAP_TYPE_CUBE_UV"}return t}(e),d=function aue(i){let t="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===zc&&(t="ENVMAP_MODE_REFRACTION"),t}(e),u=function lue(i){let t="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case Cv:t="ENVMAP_BLENDING_MULTIPLY";break;case Soe:t="ENVMAP_BLENDING_MIX";break;case Eoe:t="ENVMAP_BLENDING_ADD"}return t}(e),h=function cue(i){const t=i.envMapCubeUVHeight;if(null===t)return null;const e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),112)),texelHeight:n,maxMip:e}}(e),p=function Zde(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nm).join("\n")}(e),f=function Qde(i){const t=[];for(const e in i){const n=i[e];!1!==n&&t.push("#define "+e+" "+n)}return t.join("\n")}(s),g=r.createProgram();let m,_,b=e.glslVersion?"#version "+e.glslVersion+"\n":"";e.isRawShaderMaterial?(m=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,f].filter(nm).join("\n"),m.length>0&&(m+="\n"),_=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,f].filter(nm).join("\n"),_.length>0&&(_+="\n")):(m=[x3(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,f,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&!1===e.flatShading?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(nm).join("\n"),_=[x3(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,f,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+c:"",e.envMap?"#define "+d:"",e.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&!1===e.flatShading?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+l:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==kl?"#define TONE_MAPPING":"",e.toneMapping!==kl?fn.tonemapping_pars_fragment:"",e.toneMapping!==kl?qde("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",fn.colorspace_pars_fragment,Xde("linearToOutputTexel",e.outputColorSpace),(Fn.getLuminanceCoefficients(db),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${db.x.toFixed(4)}, ${db.y.toFixed(4)}, ${db.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"","\n"].filter(nm).join("\n")),o=eE(o),o=v3(o,e),o=b3(o,e),a=eE(a),a=v3(a,e),a=b3(a,e),o=y3(o),a=y3(a),!0!==e.isRawShaderMaterial&&(b="#version 300 es\n",m=[p,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,_=["#define varying in",e.glslVersion===xB?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===xB?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const y=b+_+a,R=g3(r,r.VERTEX_SHADER,b+m+o),M=g3(r,r.FRAGMENT_SHADER,y);function D(U){if(i.debug.checkShaderErrors){const ee=r.getProgramInfoLog(g).trim(),q=r.getShaderInfoLog(R).trim(),ne=r.getShaderInfoLog(M).trim();let fe=!0,V=!0;if(!1===r.getProgramParameter(g,r.LINK_STATUS))if(fe=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,g,R,M);else{const te=_3(r,R,"vertex"),Y=_3(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+"\n\nMaterial Name: "+U.name+"\nMaterial Type: "+U.type+"\n\nProgram Info Log: "+ee+"\n"+te+"\n"+Y)}else""!==ee?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(""===q||""===ne)&&(V=!1);V&&(U.diagnostics={runnable:fe,programLog:ee,vertexShader:{log:q,prefix:m},fragmentShader:{log:ne,prefix:_}})}r.deleteShader(R),r.deleteShader(M),L=new cb(r,g),C=function Jde(i,t){const e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(t,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),e[o]={type:s.type,location:i.getAttribLocation(t,o),locationSize:a}}return e}(r,g)}let L,C;r.attachShader(g,R),r.attachShader(g,M),void 0!==e.index0AttributeName?r.bindAttribLocation(g,0,e.index0AttributeName):!0===e.morphTargets&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g),this.getUniforms=function(){return void 0===L&&D(this),L},this.getAttributes=function(){return void 0===C&&D(this),C};let w=!1===e.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===w&&(w=r.getProgramParameter(g,Gde)),w},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=jde++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=R,this.fragmentShader=M,this}let uue=0;class hue{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const n=t.fragmentShader,r=this._getShaderStage(t.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(t);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const n of e)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let n=e.get(t);return void 0===n&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){const e=this.shaderCache;let n=e.get(t);return void 0===n&&(n=new pue(t),e.set(t,n)),n}}class pue{constructor(t){this.id=uue++,this.code=t,this.usedTimes=0}}function fue(i,t,e,n,r,s,o){const a=new LS,l=new hue,c=new Set,d=[],u=r.logarithmicDepthBuffer,h=r.vertexTextures;let p=r.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(C){return c.add(C),0===C?"uv":`uv${C}`}return{getParameters:function m(C,w,U,ee,q){const ne=ee.fog,fe=q.geometry,te=(C.isMeshStandardMaterial?e:t).get(C.envMap||(C.isMeshStandardMaterial?ee.environment:null)),Y=te&&te.mapping===Vf?te.image.height:null,ve=f[C.type];null!==C.precision&&(p=r.getMaxPrecision(C.precision),p!==C.precision&&console.warn("THREE.WebGLProgram.getParameters:",C.precision,"not supported, using",p,"instead."));const Le=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,$e=void 0!==Le?Le.length:0;let Gt,ie,Ie,Ye,Mt=0;if(void 0!==fe.morphAttributes.position&&(Mt=1),void 0!==fe.morphAttributes.normal&&(Mt=2),void 0!==fe.morphAttributes.color&&(Mt=3),ve){const Yn=ha[ve];Gt=Yn.vertexShader,ie=Yn.fragmentShader}else Gt=C.vertexShader,ie=C.fragmentShader,l.update(C),Ie=l.getVertexShaderID(C),Ye=l.getFragmentShaderID(C);const Re=i.getRenderTarget(),_t=!0===q.isInstancedMesh,wt=!0===q.isBatchedMesh,yt=!!C.map,F=!!te,Ve=!!C.aoMap,Pe=!!C.lightMap,Ze=!!C.bumpMap,be=!!C.normalMap,It=!!C.displacementMap,Qe=!!C.emissiveMap,ut=!!C.metalnessMap,N=!!C.roughnessMap,E=C.anisotropy>0,se=C.clearcoat>0,Ee=C.iridescence>0,Ce=C.sheen>0,At=C.transmission>0,Ke=E&&!!C.anisotropyMap,ct=se&&!!C.clearcoatMap,on=se&&!!C.clearcoatNormalMap,Ue=se&&!!C.clearcoatRoughnessMap,at=Ee&&!!C.iridescenceMap,kn=Ee&&!!C.iridescenceThicknessMap,Xt=Ce&&!!C.sheenColorMap,pt=Ce&&!!C.sheenRoughnessMap,nn=!!C.specularMap,vn=!!C.specularColorMap,Mi=!!C.specularIntensityMap,j=At&&!!C.transmissionMap,ze=At&&!!C.thicknessMap,Me=!!C.alphaMap,Ln=!!C.extensions;let Ki=kl;C.toneMapped&&(null===Re||!0===Re.isXRRenderTarget)&&(Ki=i.toneMapping);const Ar={shaderID:ve,shaderType:C.type,shaderName:C.name,vertexShader:Gt,fragmentShader:ie,defines:C.defines,customVertexShaderID:Ie,customFragmentShaderID:Ye,isRawShaderMaterial:!0===C.isRawShaderMaterial,glslVersion:C.glslVersion,precision:p,batching:wt,batchingColor:wt&&null!==q._colorsTexture,instancing:_t,instancingColor:_t&&null!==q.instanceColor,instancingMorph:_t&&null!==q.morphTexture,supportsVertexTextures:h,outputColorSpace:null===Re?i.outputColorSpace:!0===Re.isXRRenderTarget?Re.texture.colorSpace:Er,alphaToCoverage:!!C.alphaToCoverage,map:yt,matcap:!!C.matcap,envMap:F,envMapMode:F&&te.mapping,envMapCubeUVHeight:Y,aoMap:Ve,lightMap:Pe,bumpMap:Ze,normalMap:be,displacementMap:h&&It,emissiveMap:Qe,normalMapObjectSpace:be&&C.normalMapType===zoe,normalMapTangentSpace:be&&C.normalMapType===Hc,metalnessMap:ut,roughnessMap:N,anisotropy:E,anisotropyMap:Ke,clearcoat:se,clearcoatMap:ct,clearcoatNormalMap:on,clearcoatRoughnessMap:Ue,dispersion:C.dispersion>0,iridescence:Ee,iridescenceMap:at,iridescenceThicknessMap:kn,sheen:Ce,sheenColorMap:Xt,sheenRoughnessMap:pt,specularMap:nn,specularColorMap:vn,specularIntensityMap:Mi,transmission:At,transmissionMap:j,thicknessMap:ze,gradientMap:!!C.gradientMap,opaque:!1===C.transparent&&C.blending===Ku&&!1===C.alphaToCoverage,alphaMap:Me,alphaTest:C.alphaTest>0,alphaHash:!!C.alphaHash,combine:C.combine,mapUv:yt&&g(C.map.channel),aoMapUv:Ve&&g(C.aoMap.channel),lightMapUv:Pe&&g(C.lightMap.channel),bumpMapUv:Ze&&g(C.bumpMap.channel),normalMapUv:be&&g(C.normalMap.channel),displacementMapUv:It&&g(C.displacementMap.channel),emissiveMapUv:Qe&&g(C.emissiveMap.channel),metalnessMapUv:ut&&g(C.metalnessMap.channel),roughnessMapUv:N&&g(C.roughnessMap.channel),anisotropyMapUv:Ke&&g(C.anisotropyMap.channel),clearcoatMapUv:ct&&g(C.clearcoatMap.channel),clearcoatNormalMapUv:on&&g(C.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ue&&g(C.clearcoatRoughnessMap.channel),iridescenceMapUv:at&&g(C.iridescenceMap.channel),iridescenceThicknessMapUv:kn&&g(C.iridescenceThicknessMap.channel),sheenColorMapUv:Xt&&g(C.sheenColorMap.channel),sheenRoughnessMapUv:pt&&g(C.sheenRoughnessMap.channel),specularMapUv:nn&&g(C.specularMap.channel),specularColorMapUv:vn&&g(C.specularColorMap.channel),specularIntensityMapUv:Mi&&g(C.specularIntensityMap.channel),transmissionMapUv:j&&g(C.transmissionMap.channel),thicknessMapUv:ze&&g(C.thicknessMap.channel),alphaMapUv:Me&&g(C.alphaMap.channel),vertexTangents:!!fe.attributes.tangent&&(be||E),vertexColors:C.vertexColors,vertexAlphas:!0===C.vertexColors&&!!fe.attributes.color&&4===fe.attributes.color.itemSize,pointsUvs:!0===q.isPoints&&!!fe.attributes.uv&&(yt||Me),fog:!!ne,useFog:!0===C.fog,fogExp2:!!ne&&ne.isFogExp2,flatShading:!0===C.flatShading,sizeAttenuation:!0===C.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===q.isSkinnedMesh,morphTargets:void 0!==fe.morphAttributes.position,morphNormals:void 0!==fe.morphAttributes.normal,morphColors:void 0!==fe.morphAttributes.color,morphTargetsCount:$e,morphTextureStride:Mt,numDirLights:w.directional.length,numPointLights:w.point.length,numSpotLights:w.spot.length,numSpotLightMaps:w.spotLightMap.length,numRectAreaLights:w.rectArea.length,numHemiLights:w.hemi.length,numDirLightShadows:w.directionalShadowMap.length,numPointLightShadows:w.pointShadowMap.length,numSpotLightShadows:w.spotShadowMap.length,numSpotLightShadowsWithMaps:w.numSpotLightShadowsWithMaps,numLightProbes:w.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:C.dithering,shadowMapEnabled:i.shadowMap.enabled&&U.length>0,shadowMapType:i.shadowMap.type,toneMapping:Ki,decodeVideoTexture:yt&&!0===C.map.isVideoTexture&&Fn.getTransfer(C.map.colorSpace)===li,premultipliedAlpha:C.premultipliedAlpha,doubleSided:C.side===Cr,flipSided:C.side===ws,useDepthPacking:C.depthPacking>=0,depthPacking:C.depthPacking||0,index0AttributeName:C.index0AttributeName,extensionClipCullDistance:Ln&&!0===C.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ln&&!0===C.extensions.multiDraw||wt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:C.customProgramCacheKey()};return Ar.vertexUv1s=c.has(1),Ar.vertexUv2s=c.has(2),Ar.vertexUv3s=c.has(3),c.clear(),Ar},getProgramCacheKey:function _(C){const w=[];if(C.shaderID?w.push(C.shaderID):(w.push(C.customVertexShaderID),w.push(C.customFragmentShaderID)),void 0!==C.defines)for(const U in C.defines)w.push(U),w.push(C.defines[U]);return!1===C.isRawShaderMaterial&&(function b(C,w){C.push(w.precision),C.push(w.outputColorSpace),C.push(w.envMapMode),C.push(w.envMapCubeUVHeight),C.push(w.mapUv),C.push(w.alphaMapUv),C.push(w.lightMapUv),C.push(w.aoMapUv),C.push(w.bumpMapUv),C.push(w.normalMapUv),C.push(w.displacementMapUv),C.push(w.emissiveMapUv),C.push(w.metalnessMapUv),C.push(w.roughnessMapUv),C.push(w.anisotropyMapUv),C.push(w.clearcoatMapUv),C.push(w.clearcoatNormalMapUv),C.push(w.clearcoatRoughnessMapUv),C.push(w.iridescenceMapUv),C.push(w.iridescenceThicknessMapUv),C.push(w.sheenColorMapUv),C.push(w.sheenRoughnessMapUv),C.push(w.specularMapUv),C.push(w.specularColorMapUv),C.push(w.specularIntensityMapUv),C.push(w.transmissionMapUv),C.push(w.thicknessMapUv),C.push(w.combine),C.push(w.fogExp2),C.push(w.sizeAttenuation),C.push(w.morphTargetsCount),C.push(w.morphAttributeCount),C.push(w.numDirLights),C.push(w.numPointLights),C.push(w.numSpotLights),C.push(w.numSpotLightMaps),C.push(w.numHemiLights),C.push(w.numRectAreaLights),C.push(w.numDirLightShadows),C.push(w.numPointLightShadows),C.push(w.numSpotLightShadows),C.push(w.numSpotLightShadowsWithMaps),C.push(w.numLightProbes),C.push(w.shadowMapType),C.push(w.toneMapping),C.push(w.numClippingPlanes),C.push(w.numClipIntersection),C.push(w.depthPacking)}(w,C),function v(C,w){a.disableAll(),w.supportsVertexTextures&&a.enable(0),w.instancing&&a.enable(1),w.instancingColor&&a.enable(2),w.instancingMorph&&a.enable(3),w.matcap&&a.enable(4),w.envMap&&a.enable(5),w.normalMapObjectSpace&&a.enable(6),w.normalMapTangentSpace&&a.enable(7),w.clearcoat&&a.enable(8),w.iridescence&&a.enable(9),w.alphaTest&&a.enable(10),w.vertexColors&&a.enable(11),w.vertexAlphas&&a.enable(12),w.vertexUv1s&&a.enable(13),w.vertexUv2s&&a.enable(14),w.vertexUv3s&&a.enable(15),w.vertexTangents&&a.enable(16),w.anisotropy&&a.enable(17),w.alphaHash&&a.enable(18),w.batching&&a.enable(19),w.dispersion&&a.enable(20),w.batchingColor&&a.enable(21),C.push(a.mask),a.disableAll(),w.fog&&a.enable(0),w.useFog&&a.enable(1),w.flatShading&&a.enable(2),w.logarithmicDepthBuffer&&a.enable(3),w.skinning&&a.enable(4),w.morphTargets&&a.enable(5),w.morphNormals&&a.enable(6),w.morphColors&&a.enable(7),w.premultipliedAlpha&&a.enable(8),w.shadowMapEnabled&&a.enable(9),w.doubleSided&&a.enable(10),w.flipSided&&a.enable(11),w.useDepthPacking&&a.enable(12),w.dithering&&a.enable(13),w.transmission&&a.enable(14),w.sheen&&a.enable(15),w.opaque&&a.enable(16),w.pointsUvs&&a.enable(17),w.decodeVideoTexture&&a.enable(18),w.alphaToCoverage&&a.enable(19),C.push(a.mask)}(w,C),w.push(i.outputColorSpace)),w.push(C.customProgramCacheKey),w.join()},getUniforms:function y(C){const w=f[C.type];let U;return U=w?WB.clone(ha[w].uniforms):C.uniforms,U},acquireProgram:function R(C,w){let U;for(let ee=0,q=d.length;ee<q;ee++){const ne=d[ee];if(ne.cacheKey===w){U=ne,++U.usedTimes;break}}return void 0===U&&(U=new due(i,w,C,s),d.push(U)),U},releaseProgram:function M(C){if(0==--C.usedTimes){const w=d.indexOf(C);d[w]=d[d.length-1],d.pop(),C.destroy()}},releaseShaderCache:function D(C){l.remove(C)},programs:d,dispose:function L(){l.dispose()}}}function mue(){let i=new WeakMap;return{get:function t(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function e(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function gue(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function w3(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function M3(){const i=[];let t=0;const e=[],n=[],r=[];function o(u,h,p,f,g,m){let _=i[t];return void 0===_?(_={id:u.id,object:u,geometry:h,material:p,groupOrder:f,renderOrder:u.renderOrder,z:g,group:m},i[t]=_):(_.id=u.id,_.object=u,_.geometry=h,_.material=p,_.groupOrder=f,_.renderOrder=u.renderOrder,_.z=g,_.group=m),t++,_}return{opaque:e,transmissive:n,transparent:r,init:function s(){t=0,e.length=0,n.length=0,r.length=0},push:function a(u,h,p,f,g,m){const _=o(u,h,p,f,g,m);p.transmission>0?n.push(_):!0===p.transparent?r.push(_):e.push(_)},unshift:function l(u,h,p,f,g,m){const _=o(u,h,p,f,g,m);p.transmission>0?n.unshift(_):!0===p.transparent?r.unshift(_):e.unshift(_)},finish:function d(){for(let u=t,h=i.length;u<h;u++){const p=i[u];if(null===p.id)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}},sort:function c(u,h){e.length>1&&e.sort(u||gue),n.length>1&&n.sort(h||w3),r.length>1&&r.sort(h||w3)}}}function _ue(){let i=new WeakMap;return{get:function t(n,r){const s=i.get(n);let o;return void 0===s?(o=new M3,i.set(n,[o])):r>=s.length?(o=new M3,s.push(o)):o=s[r],o},dispose:function e(){i=new WeakMap}}}function vue(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new I,color:new Ge};break;case"SpotLight":e={position:new I,direction:new I,color:new Ge,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new I,color:new Ge,distance:0,decay:0};break;case"HemisphereLight":e={direction:new I,skyColor:new Ge,groundColor:new Ge};break;case"RectAreaLight":e={color:new Ge,position:new I,halfWidth:new I,halfHeight:new I}}return i[t.id]=e,e}}}let yue=0;function xue(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function wue(i){const t=new vue,e=function bue(){const i={};return{get:function(t){if(void 0!==i[t.id])return i[t.id];let e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e,shadowCameraNear:1,shadowCameraFar:1e3}}return i[t.id]=e,e}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)n.probe.push(new I);const r=new I,s=new Et,o=new Et;return{setup:function a(c){let d=0,u=0,h=0;for(let C=0;C<9;C++)n.probe[C].set(0,0,0);let p=0,f=0,g=0,m=0,_=0,b=0,v=0,y=0,R=0,M=0,D=0;c.sort(xue);for(let C=0,w=c.length;C<w;C++){const U=c[C],ee=U.color,q=U.intensity,ne=U.distance,fe=U.shadow&&U.shadow.map?U.shadow.map.texture:null;if(U.isAmbientLight)d+=ee.r*q,u+=ee.g*q,h+=ee.b*q;else if(U.isLightProbe){for(let V=0;V<9;V++)n.probe[V].addScaledVector(U.sh.coefficients[V],q);D++}else if(U.isDirectionalLight){const V=t.get(U);if(V.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){const te=U.shadow,Y=e.get(U);Y.shadowIntensity=te.intensity,Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,n.directionalShadow[p]=Y,n.directionalShadowMap[p]=fe,n.directionalShadowMatrix[p]=U.shadow.matrix,b++}n.directional[p]=V,p++}else if(U.isSpotLight){const V=t.get(U);V.position.setFromMatrixPosition(U.matrixWorld),V.color.copy(ee).multiplyScalar(q),V.distance=ne,V.coneCos=Math.cos(U.angle),V.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),V.decay=U.decay,n.spot[g]=V;const te=U.shadow;if(U.map&&(n.spotLightMap[R]=U.map,R++,te.updateMatrices(U),U.castShadow&&M++),n.spotLightMatrix[g]=te.matrix,U.castShadow){const Y=e.get(U);Y.shadowIntensity=te.intensity,Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,n.spotShadow[g]=Y,n.spotShadowMap[g]=fe,y++}g++}else if(U.isRectAreaLight){const V=t.get(U);V.color.copy(ee).multiplyScalar(q),V.halfWidth.set(.5*U.width,0,0),V.halfHeight.set(0,.5*U.height,0),n.rectArea[m]=V,m++}else if(U.isPointLight){const V=t.get(U);if(V.color.copy(U.color).multiplyScalar(U.intensity),V.distance=U.distance,V.decay=U.decay,U.castShadow){const te=U.shadow,Y=e.get(U);Y.shadowIntensity=te.intensity,Y.shadowBias=te.bias,Y.shadowNormalBias=te.normalBias,Y.shadowRadius=te.radius,Y.shadowMapSize=te.mapSize,Y.shadowCameraNear=te.camera.near,Y.shadowCameraFar=te.camera.far,n.pointShadow[f]=Y,n.pointShadowMap[f]=fe,n.pointShadowMatrix[f]=U.shadow.matrix,v++}n.point[f]=V,f++}else if(U.isHemisphereLight){const V=t.get(U);V.skyColor.copy(U.color).multiplyScalar(q),V.groundColor.copy(U.groundColor).multiplyScalar(q),n.hemi[_]=V,_++}}m>0&&(!0===i.has("OES_texture_float_linear")?(n.rectAreaLTC1=qe.LTC_FLOAT_1,n.rectAreaLTC2=qe.LTC_FLOAT_2):(n.rectAreaLTC1=qe.LTC_HALF_1,n.rectAreaLTC2=qe.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=u,n.ambient[2]=h;const L=n.hash;(L.directionalLength!==p||L.pointLength!==f||L.spotLength!==g||L.rectAreaLength!==m||L.hemiLength!==_||L.numDirectionalShadows!==b||L.numPointShadows!==v||L.numSpotShadows!==y||L.numSpotMaps!==R||L.numLightProbes!==D)&&(n.directional.length=p,n.spot.length=g,n.rectArea.length=m,n.point.length=f,n.hemi.length=_,n.directionalShadow.length=b,n.directionalShadowMap.length=b,n.pointShadow.length=v,n.pointShadowMap.length=v,n.spotShadow.length=y,n.spotShadowMap.length=y,n.directionalShadowMatrix.length=b,n.pointShadowMatrix.length=v,n.spotLightMatrix.length=y+R-M,n.spotLightMap.length=R,n.numSpotLightShadowsWithMaps=M,n.numLightProbes=D,L.directionalLength=p,L.pointLength=f,L.spotLength=g,L.rectAreaLength=m,L.hemiLength=_,L.numDirectionalShadows=b,L.numPointShadows=v,L.numSpotShadows=y,L.numSpotMaps=R,L.numLightProbes=D,n.version=yue++)},setupView:function l(c,d){let u=0,h=0,p=0,f=0,g=0;const m=d.matrixWorldInverse;for(let _=0,b=c.length;_<b;_++){const v=c[_];if(v.isDirectionalLight){const y=n.directional[u];y.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(m),u++}else if(v.isSpotLight){const y=n.spot[p];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(m),y.direction.setFromMatrixPosition(v.matrixWorld),r.setFromMatrixPosition(v.target.matrixWorld),y.direction.sub(r),y.direction.transformDirection(m),p++}else if(v.isRectAreaLight){const y=n.rectArea[f];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(m),o.identity(),s.copy(v.matrixWorld),s.premultiply(m),o.extractRotation(s),y.halfWidth.set(.5*v.width,0,0),y.halfHeight.set(0,.5*v.height,0),y.halfWidth.applyMatrix4(o),y.halfHeight.applyMatrix4(o),f++}else if(v.isPointLight){const y=n.point[h];y.position.setFromMatrixPosition(v.matrixWorld),y.position.applyMatrix4(m),h++}else if(v.isHemisphereLight){const y=n.hemi[g];y.direction.setFromMatrixPosition(v.matrixWorld),y.direction.transformDirection(m),g++}}},state:n}}function C3(i){const t=new wue(i),e=[],n=[],c={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function r(d){c.camera=d,e.length=0,n.length=0},state:c,setupLights:function a(){t.setup(e)},setupLightsView:function l(d){t.setupView(e,d)},pushLight:function s(d){e.push(d)},pushShadow:function o(d){n.push(d)}}}function Mue(i){let t=new WeakMap;return{get:function e(r,s=0){const o=t.get(r);let a;return void 0===o?(a=new C3(i),t.set(r,[a])):s>=o.length?(a=new C3(i),o.push(a)):a=o[s],a},dispose:function n(){t=new WeakMap}}}class S3 extends ns{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class E3 extends ns{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Cue="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Sue="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Eue(i,t,e){let n=new sb;const r=new _e,s=new _e,o=new Kn,a=new S3({depthPacking:Voe}),l=new E3,c={},d=e.maxTextureSize,u={[ua]:ws,[ws]:ua,[Cr]:Cr},h=new Ho({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _e},radius:{value:4}},vertexShader:Cue,fragmentShader:Sue}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new Jt;f.setAttribute("position",new gi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new sn(f,h),m=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=nB;let _=this.type;function b(M,D){const L=t.update(g);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,p.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),null===M.mapPass&&(M.mapPass=new Pl(r.x,r.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,i.setRenderTarget(M.mapPass),i.clear(),i.renderBufferDirect(D,null,L,h,g,null),p.uniforms.shadow_pass.value=M.mapPass.texture,p.uniforms.resolution.value=M.mapSize,p.uniforms.radius.value=M.radius,i.setRenderTarget(M.map),i.clear(),i.renderBufferDirect(D,null,L,p,g,null)}function v(M,D,L,C){let w=null;const U=!0===L.isPointLight?M.customDistanceMaterial:M.customDepthMaterial;if(void 0!==U)w=U;else if(w=!0===L.isPointLight?l:a,i.localClippingEnabled&&!0===D.clipShadows&&Array.isArray(D.clippingPlanes)&&0!==D.clippingPlanes.length||D.displacementMap&&0!==D.displacementScale||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const ee=w.uuid,q=D.uuid;let ne=c[ee];void 0===ne&&(ne={},c[ee]=ne);let fe=ne[q];void 0===fe&&(fe=w.clone(),ne[q]=fe,D.addEventListener("dispose",R)),w=fe}return w.visible=D.visible,w.wireframe=D.wireframe,w.side=C===Ga?null!==D.shadowSide?D.shadowSide:D.side:null!==D.shadowSide?D.shadowSide:u[D.side],w.alphaMap=D.alphaMap,w.alphaTest=D.alphaTest,w.map=D.map,w.clipShadows=D.clipShadows,w.clippingPlanes=D.clippingPlanes,w.clipIntersection=D.clipIntersection,w.displacementMap=D.displacementMap,w.displacementScale=D.displacementScale,w.displacementBias=D.displacementBias,w.wireframeLinewidth=D.wireframeLinewidth,w.linewidth=D.linewidth,!0===L.isPointLight&&!0===w.isMeshDistanceMaterial&&(i.properties.get(w).light=L),w}function y(M,D,L,C,w){if(!1===M.visible)return;if(M.layers.test(D.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&w===Ga)&&(!M.frustumCulled||n.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(L.matrixWorldInverse,M.matrixWorld);const q=t.update(M),ne=M.material;if(Array.isArray(ne)){const fe=q.groups;for(let V=0,te=fe.length;V<te;V++){const Y=fe[V],ve=ne[Y.materialIndex];if(ve&&ve.visible){const Le=v(M,ve,C,w);M.onBeforeShadow(i,M,D,L,q,Le,Y),i.renderBufferDirect(L,null,q,Le,M,Y),M.onAfterShadow(i,M,D,L,q,Le,Y)}}}else if(ne.visible){const fe=v(M,ne,C,w);M.onBeforeShadow(i,M,D,L,q,fe,null),i.renderBufferDirect(L,null,q,fe,M,null),M.onAfterShadow(i,M,D,L,q,fe,null)}}const ee=M.children;for(let q=0,ne=ee.length;q<ne;q++)y(ee[q],D,L,C,w)}function R(M){M.target.removeEventListener("dispose",R);for(const L in c){const C=c[L],w=M.target.uuid;w in C&&(C[w].dispose(),delete C[w])}}this.render=function(M,D,L){if(!1===m.enabled||!1===m.autoUpdate&&!1===m.needsUpdate||0===M.length)return;const C=i.getRenderTarget(),w=i.getActiveCubeFace(),U=i.getActiveMipmapLevel(),ee=i.state;ee.setBlending(ja),ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const q=_!==Ga&&this.type===Ga,ne=_===Ga&&this.type!==Ga;for(let fe=0,V=M.length;fe<V;fe++){const te=M[fe],Y=te.shadow;if(void 0===Y){console.warn("THREE.WebGLShadowMap:",te,"has no shadow.");continue}if(!1===Y.autoUpdate&&!1===Y.needsUpdate)continue;r.copy(Y.mapSize);const ve=Y.getFrameExtents();if(r.multiply(ve),s.copy(Y.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/ve.x),r.x=s.x*ve.x,Y.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/ve.y),r.y=s.y*ve.y,Y.mapSize.y=s.y)),null===Y.map||!0===q||!0===ne){const $e=this.type!==Ga?{minFilter:Yi,magFilter:Yi}:{};null!==Y.map&&Y.map.dispose(),Y.map=new Pl(r.x,r.y,$e),Y.map.texture.name=te.name+".shadowMap",Y.camera.updateProjectionMatrix()}i.setRenderTarget(Y.map),i.clear();const Le=Y.getViewportCount();for(let $e=0;$e<Le;$e++){const Mt=Y.getViewport($e);o.set(s.x*Mt.x,s.y*Mt.y,s.x*Mt.z,s.y*Mt.w),ee.viewport(o),Y.updateMatrices(te,$e),n=Y.getFrustum(),y(D,L,Y.camera,te,this.type)}!0!==Y.isPointLightShadow&&this.type===Ga&&b(Y,L),Y.needsUpdate=!1}_=this.type,m.needsUpdate=!1,i.setRenderTarget(C,w,U)}}function Aue(i){const r=new function t(){let j=!1;const ze=new Kn;let ye=null;const Me=new Kn(0,0,0,0);return{setMask:function(We){ye!==We&&!j&&(i.colorMask(We,We,We,We),ye=We)},setLocked:function(We){j=We},setClear:function(We,jt,Ln,Ki,Ar){!0===Ar&&(We*=Ki,jt*=Ki,Ln*=Ki),ze.set(We,jt,Ln,Ki),!1===Me.equals(ze)&&(i.clearColor(We,jt,Ln,Ki),Me.copy(ze))},reset:function(){j=!1,ye=null,Me.set(-1,0,0,0)}}},s=new function e(){let j=!1,ze=null,ye=null,Me=null;return{setTest:function(We){We?Ye(i.DEPTH_TEST):Re(i.DEPTH_TEST)},setMask:function(We){ze!==We&&!j&&(i.depthMask(We),ze=We)},setFunc:function(We){if(ye!==We){switch(We){case voe:i.depthFunc(i.NEVER);break;case boe:i.depthFunc(i.ALWAYS);break;case yoe:i.depthFunc(i.LESS);break;case Mv:i.depthFunc(i.LEQUAL);break;case xoe:i.depthFunc(i.EQUAL);break;case woe:i.depthFunc(i.GEQUAL);break;case Moe:i.depthFunc(i.GREATER);break;case Coe:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ye=We}},setLocked:function(We){j=We},setClear:function(We){Me!==We&&(i.clearDepth(We),Me=We)},reset:function(){j=!1,ze=null,ye=null,Me=null}}},o=new function n(){let j=!1,ze=null,ye=null,Me=null,We=null,jt=null,Ln=null,Ki=null,Ar=null;return{setTest:function(Yn){j||(Yn?Ye(i.STENCIL_TEST):Re(i.STENCIL_TEST))},setMask:function(Yn){ze!==Yn&&!j&&(i.stencilMask(Yn),ze=Yn)},setFunc:function(Yn,ol,_a){(ye!==Yn||Me!==ol||We!==_a)&&(i.stencilFunc(Yn,ol,_a),ye=Yn,Me=ol,We=_a)},setOp:function(Yn,ol,_a){(jt!==Yn||Ln!==ol||Ki!==_a)&&(i.stencilOp(Yn,ol,_a),jt=Yn,Ln=ol,Ki=_a)},setLocked:function(Yn){j=Yn},setClear:function(Yn){Ar!==Yn&&(i.clearStencil(Yn),Ar=Yn)},reset:function(){j=!1,ze=null,ye=null,Me=null,We=null,jt=null,Ln=null,Ki=null,Ar=null}}},a=new WeakMap,l=new WeakMap;let c={},d={},u=new WeakMap,h=[],p=null,f=!1,g=null,m=null,_=null,b=null,v=null,y=null,R=null,M=new Ge(0,0,0),D=0,L=!1,C=null,w=null,U=null,ee=null,q=null;const ne=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let fe=!1,V=0;const te=i.getParameter(i.VERSION);-1!==te.indexOf("WebGL")?(V=parseFloat(/^WebGL (\d)/.exec(te)[1]),fe=V>=1):-1!==te.indexOf("OpenGL ES")&&(V=parseFloat(/^OpenGL ES (\d)/.exec(te)[1]),fe=V>=2);let Y=null,ve={};const Le=i.getParameter(i.SCISSOR_BOX),$e=i.getParameter(i.VIEWPORT),Mt=(new Kn).fromArray(Le),Gt=(new Kn).fromArray($e);function ie(j,ze,ye,Me){const We=new Uint8Array(4),jt=i.createTexture();i.bindTexture(j,jt),i.texParameteri(j,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(j,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ln=0;Ln<ye;Ln++)j===i.TEXTURE_3D||j===i.TEXTURE_2D_ARRAY?i.texImage3D(ze,0,i.RGBA,1,1,Me,0,i.RGBA,i.UNSIGNED_BYTE,We):i.texImage2D(ze+Ln,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,We);return jt}const Ie={};function Ye(j){!0!==c[j]&&(i.enable(j),c[j]=!0)}function Re(j){!1!==c[j]&&(i.disable(j),c[j]=!1)}Ie[i.TEXTURE_2D]=ie(i.TEXTURE_2D,i.TEXTURE_2D,1),Ie[i.TEXTURE_CUBE_MAP]=ie(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ie[i.TEXTURE_2D_ARRAY]=ie(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Ie[i.TEXTURE_3D]=ie(i.TEXTURE_3D,i.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),Ye(i.DEPTH_TEST),s.setFunc(Mv),Ze(!1),be(tB),Ye(i.CULL_FACE),Ve(ja);const mn={[Vc]:i.FUNC_ADD,[toe]:i.FUNC_SUBTRACT,[noe]:i.FUNC_REVERSE_SUBTRACT};mn[ioe]=i.MIN,mn[roe]=i.MAX;const F={[soe]:i.ZERO,[ooe]:i.ONE,[aoe]:i.SRC_COLOR,[UC]:i.SRC_ALPHA,[poe]:i.SRC_ALPHA_SATURATE,[uoe]:i.DST_COLOR,[coe]:i.DST_ALPHA,[loe]:i.ONE_MINUS_SRC_COLOR,[VC]:i.ONE_MINUS_SRC_ALPHA,[hoe]:i.ONE_MINUS_DST_COLOR,[doe]:i.ONE_MINUS_DST_ALPHA,[foe]:i.CONSTANT_COLOR,[moe]:i.ONE_MINUS_CONSTANT_COLOR,[goe]:i.CONSTANT_ALPHA,[_oe]:i.ONE_MINUS_CONSTANT_ALPHA};function Ve(j,ze,ye,Me,We,jt,Ln,Ki,Ar,Yn){if(j!==ja){if(!1===f&&(Ye(i.BLEND),f=!0),j===eoe)We=We||ze,jt=jt||ye,Ln=Ln||Me,(ze!==m||We!==v)&&(i.blendEquationSeparate(mn[ze],mn[We]),m=ze,v=We),(ye!==_||Me!==b||jt!==y||Ln!==R)&&(i.blendFuncSeparate(F[ye],F[Me],F[jt],F[Ln]),_=ye,b=Me,y=jt,R=Ln),(!1===Ki.equals(M)||Ar!==D)&&(i.blendColor(Ki.r,Ki.g,Ki.b,Ar),M.copy(Ki),D=Ar),g=j,L=!1;else if(j!==g||Yn!==L){if((m!==Vc||v!==Vc)&&(i.blendEquation(i.FUNC_ADD),m=Vc,v=Vc),Yn)switch(j){case Ku:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case rB:i.blendFunc(i.ONE,i.ONE);break;case sB:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case oB:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",j)}else switch(j){case Ku:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case rB:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case sB:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case oB:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",j)}_=null,b=null,y=null,R=null,M.set(0,0,0),D=0,g=j,L=Yn}}else!0===f&&(Re(i.BLEND),f=!1)}function Ze(j){C!==j&&(i.frontFace(j?i.CW:i.CCW),C=j)}function be(j){j!==Qse?(Ye(i.CULL_FACE),j!==w&&i.cullFace(j===tB?i.BACK:j===Jse?i.FRONT:i.FRONT_AND_BACK)):Re(i.CULL_FACE),w=j}function Qe(j,ze,ye){j?(Ye(i.POLYGON_OFFSET_FILL),(ee!==ze||q!==ye)&&(i.polygonOffset(ze,ye),ee=ze,q=ye)):Re(i.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:s,stencil:o},enable:Ye,disable:Re,bindFramebuffer:function _t(j,ze){return d[j]!==ze&&(i.bindFramebuffer(j,ze),d[j]=ze,j===i.DRAW_FRAMEBUFFER&&(d[i.FRAMEBUFFER]=ze),j===i.FRAMEBUFFER&&(d[i.DRAW_FRAMEBUFFER]=ze),!0)},drawBuffers:function wt(j,ze){let ye=h,Me=!1;if(j){ye=u.get(ze),void 0===ye&&(ye=[],u.set(ze,ye));const We=j.textures;if(ye.length!==We.length||ye[0]!==i.COLOR_ATTACHMENT0){for(let jt=0,Ln=We.length;jt<Ln;jt++)ye[jt]=i.COLOR_ATTACHMENT0+jt;ye.length=We.length,Me=!0}}else ye[0]!==i.BACK&&(ye[0]=i.BACK,Me=!0);Me&&i.drawBuffers(ye)},useProgram:function yt(j){return p!==j&&(i.useProgram(j),p=j,!0)},setBlending:Ve,setMaterial:function Pe(j,ze){j.side===Cr?Re(i.CULL_FACE):Ye(i.CULL_FACE);let ye=j.side===ws;ze&&(ye=!ye),Ze(ye),j.blending===Ku&&!1===j.transparent?Ve(ja):Ve(j.blending,j.blendEquation,j.blendSrc,j.blendDst,j.blendEquationAlpha,j.blendSrcAlpha,j.blendDstAlpha,j.blendColor,j.blendAlpha,j.premultipliedAlpha),s.setFunc(j.depthFunc),s.setTest(j.depthTest),s.setMask(j.depthWrite),r.setMask(j.colorWrite);const Me=j.stencilWrite;o.setTest(Me),Me&&(o.setMask(j.stencilWriteMask),o.setFunc(j.stencilFunc,j.stencilRef,j.stencilFuncMask),o.setOp(j.stencilFail,j.stencilZFail,j.stencilZPass)),Qe(j.polygonOffset,j.polygonOffsetFactor,j.polygonOffsetUnits),!0===j.alphaToCoverage?Ye(i.SAMPLE_ALPHA_TO_COVERAGE):Re(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ze,setCullFace:be,setLineWidth:function It(j){j!==U&&(fe&&i.lineWidth(j),U=j)},setPolygonOffset:Qe,setScissorTest:function ut(j){j?Ye(i.SCISSOR_TEST):Re(i.SCISSOR_TEST)},activeTexture:function N(j){void 0===j&&(j=i.TEXTURE0+ne-1),Y!==j&&(i.activeTexture(j),Y=j)},bindTexture:function E(j,ze,ye){void 0===ye&&(ye=null===Y?i.TEXTURE0+ne-1:Y);let Me=ve[ye];void 0===Me&&(Me={type:void 0,texture:void 0},ve[ye]=Me),(Me.type!==j||Me.texture!==ze)&&(Y!==ye&&(i.activeTexture(ye),Y=ye),i.bindTexture(j,ze||Ie[j]),Me.type=j,Me.texture=ze)},unbindTexture:function se(){const j=ve[Y];void 0!==j&&void 0!==j.type&&(i.bindTexture(j.type,null),j.type=void 0,j.texture=void 0)},compressedTexImage2D:function Ae(){try{i.compressedTexImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexImage3D:function Ee(){try{i.compressedTexImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texImage2D:function at(){try{i.texImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texImage3D:function kn(){try{i.texImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},updateUBOMapping:function nn(j,ze){let ye=l.get(ze);void 0===ye&&(ye=new WeakMap,l.set(ze,ye));let Me=ye.get(j);void 0===Me&&(Me=i.getUniformBlockIndex(ze,j.name),ye.set(j,Me))},uniformBlockBinding:function vn(j,ze){const Me=l.get(ze).get(j);a.get(ze)!==Me&&(i.uniformBlockBinding(ze,Me,j.__bindingPointIndex),a.set(ze,Me))},texStorage2D:function on(){try{i.texStorage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texStorage3D:function Ue(){try{i.texStorage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texSubImage2D:function Ce(){try{i.texSubImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},texSubImage3D:function At(){try{i.texSubImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexSubImage2D:function Ke(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},compressedTexSubImage3D:function ct(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(j){console.error("THREE.WebGLState:",j)}},scissor:function Xt(j){!1===Mt.equals(j)&&(i.scissor(j.x,j.y,j.z,j.w),Mt.copy(j))},viewport:function pt(j){!1===Gt.equals(j)&&(i.viewport(j.x,j.y,j.z,j.w),Gt.copy(j))},reset:function Mi(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},Y=null,ve={},d={},u=new WeakMap,h=[],p=null,f=!1,g=null,m=null,_=null,b=null,v=null,y=null,R=null,M=new Ge(0,0,0),D=0,L=!1,C=null,w=null,U=null,ee=null,q=null,Mt.set(0,0,i.canvas.width,i.canvas.height),Gt.set(0,0,i.canvas.width,i.canvas.height),r.reset(),s.reset(),o.reset()}}}function tE(i,t,e,n){const r=function Iue(i){switch(i){case Wa:case lB:return{byteLength:1,components:1};case $f:case cB:case Qu:return{byteLength:2,components:1};case GC:case jC:return{byteLength:2,components:4};case Il:case $C:case js:return{byteLength:4,components:1};case dB:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}(n);switch(e){case uB:case pB:return i*t;case fB:return i*t*2;case WC:case Av:return i*t/r.components*r.byteLength;case mB:case YC:return i*t*2/r.components*r.byteLength;case hB:return i*t*3/r.components*r.byteLength;case Ms:case XC:return i*t*4/r.components*r.byteLength;case Dv:case Tv:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case kv:case Iv:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case KC:case QC:return Math.max(i,16)*Math.max(t,8)/4;case qC:case ZC:return Math.max(i,8)*Math.max(t,8)/2;case JC:case eS:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case tS:case nS:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case iS:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case rS:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case sS:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case oS:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case aS:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case lS:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case cS:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case dS:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case uS:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case hS:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case pS:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case fS:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case mS:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case Rv:case gS:case _S:return Math.ceil(i/4)*Math.ceil(t/4)*16;case gB:case vS:return Math.ceil(i/4)*Math.ceil(t/4)*8;case bS:case yS:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Rue(i,t,e,n,r,s,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),c=new _e,d=new WeakMap;let u;const h=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function f(N,E){return p?new OffscreenCanvas(N,E):Yf("canvas")}function g(N,E,se){let Ae=1;const Ee=ut(N);if((Ee.width>se||Ee.height>se)&&(Ae=se/Math.max(Ee.width,Ee.height)),Ae<1){if(typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&N instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&N instanceof ImageBitmap||typeof VideoFrame<"u"&&N instanceof VideoFrame){const Ce=Math.floor(Ae*Ee.width),At=Math.floor(Ae*Ee.height);void 0===u&&(u=f(Ce,At));const Ke=E?f(Ce,At):u;return Ke.width=Ce,Ke.height=At,Ke.getContext("2d").drawImage(N,0,0,Ce,At),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+Ce+"x"+At+")."),Ke}return"data"in N&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),N}return N}function m(N){return N.generateMipmaps&&N.minFilter!==Yi&&N.minFilter!==Bi}function _(N){i.generateMipmap(N)}function b(N,E,se,Ae,Ee=!1){if(null!==N){if(void 0!==i[N])return i[N];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+N+"'")}let Ce=E;if(E===i.RED&&(se===i.FLOAT&&(Ce=i.R32F),se===i.HALF_FLOAT&&(Ce=i.R16F),se===i.UNSIGNED_BYTE&&(Ce=i.R8)),E===i.RED_INTEGER&&(se===i.UNSIGNED_BYTE&&(Ce=i.R8UI),se===i.UNSIGNED_SHORT&&(Ce=i.R16UI),se===i.UNSIGNED_INT&&(Ce=i.R32UI),se===i.BYTE&&(Ce=i.R8I),se===i.SHORT&&(Ce=i.R16I),se===i.INT&&(Ce=i.R32I)),E===i.RG&&(se===i.FLOAT&&(Ce=i.RG32F),se===i.HALF_FLOAT&&(Ce=i.RG16F),se===i.UNSIGNED_BYTE&&(Ce=i.RG8)),E===i.RG_INTEGER&&(se===i.UNSIGNED_BYTE&&(Ce=i.RG8UI),se===i.UNSIGNED_SHORT&&(Ce=i.RG16UI),se===i.UNSIGNED_INT&&(Ce=i.RG32UI),se===i.BYTE&&(Ce=i.RG8I),se===i.SHORT&&(Ce=i.RG16I),se===i.INT&&(Ce=i.RG32I)),E===i.RGB&&se===i.UNSIGNED_INT_5_9_9_9_REV&&(Ce=i.RGB9_E5),E===i.RGBA){const At=Ee?Fv:Fn.getTransfer(Ae);se===i.FLOAT&&(Ce=i.RGBA32F),se===i.HALF_FLOAT&&(Ce=i.RGBA16F),se===i.UNSIGNED_BYTE&&(Ce=At===li?i.SRGB8_ALPHA8:i.RGBA8),se===i.UNSIGNED_SHORT_4_4_4_4&&(Ce=i.RGBA4),se===i.UNSIGNED_SHORT_5_5_5_1&&(Ce=i.RGB5_A1)}return(Ce===i.R16F||Ce===i.R32F||Ce===i.RG16F||Ce===i.RG32F||Ce===i.RGBA16F||Ce===i.RGBA32F)&&t.get("EXT_color_buffer_float"),Ce}function v(N,E){let se;return N?null===E||E===Il||E===Ju?se=i.DEPTH24_STENCIL8:E===js?se=i.DEPTH32F_STENCIL8:E===$f&&(se=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===E||E===Il||E===Ju?se=i.DEPTH_COMPONENT24:E===js?se=i.DEPTH_COMPONENT32F:E===$f&&(se=i.DEPTH_COMPONENT16),se}function y(N,E){return!0===m(N)||N.isFramebufferTexture&&N.minFilter!==Yi&&N.minFilter!==Bi?Math.log2(Math.max(E.width,E.height))+1:void 0!==N.mipmaps&&N.mipmaps.length>0?N.mipmaps.length:N.isCompressedTexture&&Array.isArray(N.image)?E.mipmaps.length:1}function R(N){const E=N.target;E.removeEventListener("dispose",R),function D(N){const E=n.get(N);if(void 0===E.__webglInit)return;const se=N.source,Ae=h.get(se);if(Ae){const Ee=Ae[E.__cacheKey];Ee.usedTimes--,0===Ee.usedTimes&&L(N),0===Object.keys(Ae).length&&h.delete(se)}n.remove(N)}(E),E.isVideoTexture&&d.delete(E)}function M(N){const E=N.target;E.removeEventListener("dispose",M),function C(N){const E=n.get(N);if(N.depthTexture&&N.depthTexture.dispose(),N.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++){if(Array.isArray(E.__webglFramebuffer[Ae]))for(let Ee=0;Ee<E.__webglFramebuffer[Ae].length;Ee++)i.deleteFramebuffer(E.__webglFramebuffer[Ae][Ee]);else i.deleteFramebuffer(E.__webglFramebuffer[Ae]);E.__webglDepthbuffer&&i.deleteRenderbuffer(E.__webglDepthbuffer[Ae])}else{if(Array.isArray(E.__webglFramebuffer))for(let Ae=0;Ae<E.__webglFramebuffer.length;Ae++)i.deleteFramebuffer(E.__webglFramebuffer[Ae]);else i.deleteFramebuffer(E.__webglFramebuffer);if(E.__webglDepthbuffer&&i.deleteRenderbuffer(E.__webglDepthbuffer),E.__webglMultisampledFramebuffer&&i.deleteFramebuffer(E.__webglMultisampledFramebuffer),E.__webglColorRenderbuffer)for(let Ae=0;Ae<E.__webglColorRenderbuffer.length;Ae++)E.__webglColorRenderbuffer[Ae]&&i.deleteRenderbuffer(E.__webglColorRenderbuffer[Ae]);E.__webglDepthRenderbuffer&&i.deleteRenderbuffer(E.__webglDepthRenderbuffer)}const se=N.textures;for(let Ae=0,Ee=se.length;Ae<Ee;Ae++){const Ce=n.get(se[Ae]);Ce.__webglTexture&&(i.deleteTexture(Ce.__webglTexture),o.memory.textures--),n.remove(se[Ae])}n.remove(N)}(E)}function L(N){const E=n.get(N);i.deleteTexture(E.__webglTexture),delete h.get(N.source)[E.__cacheKey],o.memory.textures--}let w=0;function ne(N,E){const se=n.get(N);if(N.isVideoTexture&&function It(N){const E=o.render.frame;d.get(N)!==E&&(d.set(N,E),N.update())}(N),!1===N.isRenderTargetTexture&&N.version>0&&se.__version!==N.version){const Ae=N.image;if(null===Ae)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ae.complete)return void Gt(se,N,E);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}e.bindTexture(i.TEXTURE_2D,se.__webglTexture,i.TEXTURE0+E)}const Y={[hr]:i.REPEAT,[mi]:i.CLAMP_TO_EDGE,[zf]:i.MIRRORED_REPEAT},ve={[Yi]:i.NEAREST,[HC]:i.NEAREST_MIPMAP_NEAREST,[Zu]:i.NEAREST_MIPMAP_LINEAR,[Bi]:i.LINEAR,[Hf]:i.LINEAR_MIPMAP_NEAREST,[Bo]:i.LINEAR_MIPMAP_LINEAR},Le={[Hoe]:i.NEVER,[Xoe]:i.ALWAYS,[$oe]:i.LESS,[yB]:i.LEQUAL,[Goe]:i.EQUAL,[Yoe]:i.GEQUAL,[joe]:i.GREATER,[Woe]:i.NOTEQUAL};function $e(N,E){if(E.type===js&&!1===t.has("OES_texture_float_linear")&&(E.magFilter===Bi||E.magFilter===Hf||E.magFilter===Zu||E.magFilter===Bo||E.minFilter===Bi||E.minFilter===Hf||E.minFilter===Zu||E.minFilter===Bo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(N,i.TEXTURE_WRAP_S,Y[E.wrapS]),i.texParameteri(N,i.TEXTURE_WRAP_T,Y[E.wrapT]),(N===i.TEXTURE_3D||N===i.TEXTURE_2D_ARRAY)&&i.texParameteri(N,i.TEXTURE_WRAP_R,Y[E.wrapR]),i.texParameteri(N,i.TEXTURE_MAG_FILTER,ve[E.magFilter]),i.texParameteri(N,i.TEXTURE_MIN_FILTER,ve[E.minFilter]),E.compareFunction&&(i.texParameteri(N,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(N,i.TEXTURE_COMPARE_FUNC,Le[E.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(E.magFilter===Yi||E.minFilter!==Zu&&E.minFilter!==Bo||E.type===js&&!1===t.has("OES_texture_float_linear"))return;if(E.anisotropy>1||n.get(E).__currentAnisotropy){const se=t.get("EXT_texture_filter_anisotropic");i.texParameterf(N,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(E.anisotropy,r.getMaxAnisotropy())),n.get(E).__currentAnisotropy=E.anisotropy}}}function Mt(N,E){let se=!1;void 0===N.__webglInit&&(N.__webglInit=!0,E.addEventListener("dispose",R));const Ae=E.source;let Ee=h.get(Ae);void 0===Ee&&(Ee={},h.set(Ae,Ee));const Ce=function q(N){const E=[];return E.push(N.wrapS),E.push(N.wrapT),E.push(N.wrapR||0),E.push(N.magFilter),E.push(N.minFilter),E.push(N.anisotropy),E.push(N.internalFormat),E.push(N.format),E.push(N.type),E.push(N.generateMipmaps),E.push(N.premultiplyAlpha),E.push(N.flipY),E.push(N.unpackAlignment),E.push(N.colorSpace),E.join()}(E);if(Ce!==N.__cacheKey){void 0===Ee[Ce]&&(Ee[Ce]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,se=!0),Ee[Ce].usedTimes++;const At=Ee[N.__cacheKey];void 0!==At&&(Ee[N.__cacheKey].usedTimes--,0===At.usedTimes&&L(E)),N.__cacheKey=Ce,N.__webglTexture=Ee[Ce].texture}return se}function Gt(N,E,se){let Ae=i.TEXTURE_2D;(E.isDataArrayTexture||E.isCompressedArrayTexture)&&(Ae=i.TEXTURE_2D_ARRAY),E.isData3DTexture&&(Ae=i.TEXTURE_3D);const Ee=Mt(N,E),Ce=E.source;e.bindTexture(Ae,N.__webglTexture,i.TEXTURE0+se);const At=n.get(Ce);if(Ce.version!==At.__version||!0===Ee){e.activeTexture(i.TEXTURE0+se);const Ke=Fn.getPrimaries(Fn.workingColorSpace),ct=E.colorSpace===Rl?null:Fn.getPrimaries(E.colorSpace),on=E.colorSpace===Rl||Ke===ct?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,E.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,E.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,on);let Ue=g(E.image,!1,r.maxTextureSize);Ue=Qe(E,Ue);const at=s.convert(E.format,E.colorSpace),kn=s.convert(E.type);let pt,Xt=b(E.internalFormat,at,kn,E.colorSpace,E.isVideoTexture);$e(Ae,E);const nn=E.mipmaps,vn=!0!==E.isVideoTexture,Mi=void 0===At.__version||!0===Ee,j=Ce.dataReady,ze=y(E,Ue);if(E.isDepthTexture)Xt=v(E.format===th,E.type),Mi&&(vn?e.texStorage2D(i.TEXTURE_2D,1,Xt,Ue.width,Ue.height):e.texImage2D(i.TEXTURE_2D,0,Xt,Ue.width,Ue.height,0,at,kn,null));else if(E.isDataTexture)if(nn.length>0){vn&&Mi&&e.texStorage2D(i.TEXTURE_2D,ze,Xt,nn[0].width,nn[0].height);for(let ye=0,Me=nn.length;ye<Me;ye++)pt=nn[ye],vn?j&&e.texSubImage2D(i.TEXTURE_2D,ye,0,0,pt.width,pt.height,at,kn,pt.data):e.texImage2D(i.TEXTURE_2D,ye,Xt,pt.width,pt.height,0,at,kn,pt.data);E.generateMipmaps=!1}else vn?(Mi&&e.texStorage2D(i.TEXTURE_2D,ze,Xt,Ue.width,Ue.height),j&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Ue.width,Ue.height,at,kn,Ue.data)):e.texImage2D(i.TEXTURE_2D,0,Xt,Ue.width,Ue.height,0,at,kn,Ue.data);else if(E.isCompressedTexture)if(E.isCompressedArrayTexture){vn&&Mi&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ze,Xt,nn[0].width,nn[0].height,Ue.depth);for(let ye=0,Me=nn.length;ye<Me;ye++)if(pt=nn[ye],E.format!==Ms)if(null!==at)if(vn){if(j)if(E.layerUpdates.size>0){const We=tE(pt.width,pt.height,E.format,E.type);for(const jt of E.layerUpdates){const Ln=pt.data.subarray(jt*We/pt.data.BYTES_PER_ELEMENT,(jt+1)*We/pt.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ye,0,0,jt,pt.width,pt.height,1,at,Ln,0,0)}E.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,ye,0,0,0,pt.width,pt.height,Ue.depth,at,pt.data,0,0)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,ye,Xt,pt.width,pt.height,Ue.depth,0,pt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else vn?j&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,ye,0,0,0,pt.width,pt.height,Ue.depth,at,kn,pt.data):e.texImage3D(i.TEXTURE_2D_ARRAY,ye,Xt,pt.width,pt.height,Ue.depth,0,at,kn,pt.data)}else{vn&&Mi&&e.texStorage2D(i.TEXTURE_2D,ze,Xt,nn[0].width,nn[0].height);for(let ye=0,Me=nn.length;ye<Me;ye++)pt=nn[ye],E.format!==Ms?null!==at?vn?j&&e.compressedTexSubImage2D(i.TEXTURE_2D,ye,0,0,pt.width,pt.height,at,pt.data):e.compressedTexImage2D(i.TEXTURE_2D,ye,Xt,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):vn?j&&e.texSubImage2D(i.TEXTURE_2D,ye,0,0,pt.width,pt.height,at,kn,pt.data):e.texImage2D(i.TEXTURE_2D,ye,Xt,pt.width,pt.height,0,at,kn,pt.data)}else if(E.isDataArrayTexture)if(vn){if(Mi&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ze,Xt,Ue.width,Ue.height,Ue.depth),j)if(E.layerUpdates.size>0){const ye=tE(Ue.width,Ue.height,E.format,E.type);for(const Me of E.layerUpdates){const We=Ue.data.subarray(Me*ye/Ue.data.BYTES_PER_ELEMENT,(Me+1)*ye/Ue.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Me,Ue.width,Ue.height,1,at,kn,We)}E.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Ue.width,Ue.height,Ue.depth,at,kn,Ue.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,Xt,Ue.width,Ue.height,Ue.depth,0,at,kn,Ue.data);else if(E.isData3DTexture)vn?(Mi&&e.texStorage3D(i.TEXTURE_3D,ze,Xt,Ue.width,Ue.height,Ue.depth),j&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Ue.width,Ue.height,Ue.depth,at,kn,Ue.data)):e.texImage3D(i.TEXTURE_3D,0,Xt,Ue.width,Ue.height,Ue.depth,0,at,kn,Ue.data);else if(E.isFramebufferTexture){if(Mi)if(vn)e.texStorage2D(i.TEXTURE_2D,ze,Xt,Ue.width,Ue.height);else{let ye=Ue.width,Me=Ue.height;for(let We=0;We<ze;We++)e.texImage2D(i.TEXTURE_2D,We,Xt,ye,Me,0,at,kn,null),ye>>=1,Me>>=1}}else if(nn.length>0){if(vn&&Mi){const ye=ut(nn[0]);e.texStorage2D(i.TEXTURE_2D,ze,Xt,ye.width,ye.height)}for(let ye=0,Me=nn.length;ye<Me;ye++)pt=nn[ye],vn?j&&e.texSubImage2D(i.TEXTURE_2D,ye,0,0,at,kn,pt):e.texImage2D(i.TEXTURE_2D,ye,Xt,at,kn,pt);E.generateMipmaps=!1}else if(vn){if(Mi){const ye=ut(Ue);e.texStorage2D(i.TEXTURE_2D,ze,Xt,ye.width,ye.height)}j&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,at,kn,Ue)}else e.texImage2D(i.TEXTURE_2D,0,Xt,at,kn,Ue);m(E)&&_(Ae),At.__version=Ce.version,E.onUpdate&&E.onUpdate(E)}N.__version=E.version}function Ie(N,E,se,Ae,Ee,Ce){const At=s.convert(se.format,se.colorSpace),Ke=s.convert(se.type),ct=b(se.internalFormat,At,Ke,se.colorSpace);if(!n.get(E).__hasExternalTextures){const Ue=Math.max(1,E.width>>Ce),at=Math.max(1,E.height>>Ce);Ee===i.TEXTURE_3D||Ee===i.TEXTURE_2D_ARRAY?e.texImage3D(Ee,Ce,ct,Ue,at,E.depth,0,At,Ke,null):e.texImage2D(Ee,Ce,ct,Ue,at,0,At,Ke,null)}e.bindFramebuffer(i.FRAMEBUFFER,N),be(E)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Ae,Ee,n.get(se).__webglTexture,0,Ze(E)):(Ee===i.TEXTURE_2D||Ee>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Ee<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Ae,Ee,n.get(se).__webglTexture,Ce),e.bindFramebuffer(i.FRAMEBUFFER,null)}function Ye(N,E,se){if(i.bindRenderbuffer(i.RENDERBUFFER,N),E.depthBuffer){const Ae=E.depthTexture,Ce=v(E.stencilBuffer,Ae&&Ae.isDepthTexture?Ae.type:null),At=E.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Ke=Ze(E);be(E)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Ke,Ce,E.width,E.height):se?i.renderbufferStorageMultisample(i.RENDERBUFFER,Ke,Ce,E.width,E.height):i.renderbufferStorage(i.RENDERBUFFER,Ce,E.width,E.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,At,i.RENDERBUFFER,N)}else{const Ae=E.textures;for(let Ee=0;Ee<Ae.length;Ee++){const Ce=Ae[Ee],At=s.convert(Ce.format,Ce.colorSpace),Ke=s.convert(Ce.type),ct=b(Ce.internalFormat,At,Ke,Ce.colorSpace),on=Ze(E);se&&!1===be(E)?i.renderbufferStorageMultisample(i.RENDERBUFFER,on,ct,E.width,E.height):be(E)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,on,ct,E.width,E.height):i.renderbufferStorage(i.RENDERBUFFER,ct,E.width,E.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function _t(N){const E=n.get(N),se=!0===N.isWebGLCubeRenderTarget;if(N.depthTexture&&!E.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");!function Re(N,E){if(E&&E.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(i.FRAMEBUFFER,N),!E.depthTexture||!E.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(E.depthTexture).__webglTexture||E.depthTexture.image.width!==E.width||E.depthTexture.image.height!==E.height)&&(E.depthTexture.image.width=E.width,E.depthTexture.image.height=E.height,E.depthTexture.needsUpdate=!0),ne(E.depthTexture,0);const Ae=n.get(E.depthTexture).__webglTexture,Ee=Ze(E);if(E.depthTexture.format===eh)be(E)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ae,0,Ee):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Ae,0);else{if(E.depthTexture.format!==th)throw new Error("Unknown depthTexture format");be(E)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ae,0,Ee):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Ae,0)}}(E.__webglFramebuffer,N)}else if(se){E.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)e.bindFramebuffer(i.FRAMEBUFFER,E.__webglFramebuffer[Ae]),E.__webglDepthbuffer[Ae]=i.createRenderbuffer(),Ye(E.__webglDepthbuffer[Ae],N,!1)}else e.bindFramebuffer(i.FRAMEBUFFER,E.__webglFramebuffer),E.__webglDepthbuffer=i.createRenderbuffer(),Ye(E.__webglDepthbuffer,N,!1);e.bindFramebuffer(i.FRAMEBUFFER,null)}const F=[],Ve=[];function Ze(N){return Math.min(r.maxSamples,N.samples)}function be(N){const E=n.get(N);return N.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==E.__useRenderToTexture}function Qe(N,E){const se=N.colorSpace,Ae=N.format,Ee=N.type;return!0===N.isCompressedTexture||!0===N.isVideoTexture||se!==Er&&se!==Rl&&(Fn.getTransfer(se)===li?(Ae!==Ms||Ee!==Wa)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),E}function ut(N){return typeof HTMLImageElement<"u"&&N instanceof HTMLImageElement?(c.width=N.naturalWidth||N.width,c.height=N.naturalHeight||N.height):typeof VideoFrame<"u"&&N instanceof VideoFrame?(c.width=N.displayWidth,c.height=N.displayHeight):(c.width=N.width,c.height=N.height),c}this.allocateTextureUnit=function ee(){const N=w;return N>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+N+" texture units while this GPU supports only "+r.maxTextures),w+=1,N},this.resetTextureUnits=function U(){w=0},this.setTexture2D=ne,this.setTexture2DArray=function fe(N,E){const se=n.get(N);N.version>0&&se.__version!==N.version?Gt(se,N,E):e.bindTexture(i.TEXTURE_2D_ARRAY,se.__webglTexture,i.TEXTURE0+E)},this.setTexture3D=function V(N,E){const se=n.get(N);N.version>0&&se.__version!==N.version?Gt(se,N,E):e.bindTexture(i.TEXTURE_3D,se.__webglTexture,i.TEXTURE0+E)},this.setTextureCube=function te(N,E){const se=n.get(N);N.version>0&&se.__version!==N.version?function ie(N,E,se){if(6!==E.image.length)return;const Ae=Mt(N,E),Ee=E.source;e.bindTexture(i.TEXTURE_CUBE_MAP,N.__webglTexture,i.TEXTURE0+se);const Ce=n.get(Ee);if(Ee.version!==Ce.__version||!0===Ae){e.activeTexture(i.TEXTURE0+se);const At=Fn.getPrimaries(Fn.workingColorSpace),Ke=E.colorSpace===Rl?null:Fn.getPrimaries(E.colorSpace),ct=E.colorSpace===Rl||At===Ke?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,E.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,E.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,ct);const on=E.isCompressedTexture||E.image[0].isCompressedTexture,Ue=E.image[0]&&E.image[0].isDataTexture,at=[];for(let Me=0;Me<6;Me++)at[Me]=on||Ue?Ue?E.image[Me].image:E.image[Me]:g(E.image[Me],!0,r.maxCubemapSize),at[Me]=Qe(E,at[Me]);const kn=at[0],Xt=s.convert(E.format,E.colorSpace),pt=s.convert(E.type),nn=b(E.internalFormat,Xt,pt,E.colorSpace),vn=!0!==E.isVideoTexture,Mi=void 0===Ce.__version||!0===Ae,j=Ee.dataReady;let ye,ze=y(E,kn);if($e(i.TEXTURE_CUBE_MAP,E),on){vn&&Mi&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ze,nn,kn.width,kn.height);for(let Me=0;Me<6;Me++){ye=at[Me].mipmaps;for(let We=0;We<ye.length;We++){const jt=ye[We];E.format!==Ms?null!==Xt?vn?j&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We,0,0,jt.width,jt.height,Xt,jt.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We,nn,jt.width,jt.height,0,jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):vn?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We,0,0,jt.width,jt.height,Xt,pt,jt.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We,nn,jt.width,jt.height,0,Xt,pt,jt.data)}}}else{if(ye=E.mipmaps,vn&&Mi){ye.length>0&&ze++;const Me=ut(at[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ze,nn,Me.width,Me.height)}for(let Me=0;Me<6;Me++)if(Ue){vn?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,at[Me].width,at[Me].height,Xt,pt,at[Me].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,nn,at[Me].width,at[Me].height,0,Xt,pt,at[Me].data);for(let We=0;We<ye.length;We++){const Ln=ye[We].image[Me].image;vn?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We+1,0,0,Ln.width,Ln.height,Xt,pt,Ln.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We+1,nn,Ln.width,Ln.height,0,Xt,pt,Ln.data)}}else{vn?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Xt,pt,at[Me]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,nn,Xt,pt,at[Me]);for(let We=0;We<ye.length;We++){const jt=ye[We];vn?j&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We+1,0,0,Xt,pt,jt.image[Me]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Me,We+1,nn,Xt,pt,jt.image[Me])}}}m(E)&&_(i.TEXTURE_CUBE_MAP),Ce.__version=Ee.version,E.onUpdate&&E.onUpdate(E)}N.__version=E.version}(se,N,E):e.bindTexture(i.TEXTURE_CUBE_MAP,se.__webglTexture,i.TEXTURE0+E)},this.rebindTextures=function wt(N,E,se){const Ae=n.get(N);void 0!==E&&Ie(Ae.__webglFramebuffer,N,N.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),void 0!==se&&_t(N)},this.setupRenderTarget=function yt(N){const E=N.texture,se=n.get(N),Ae=n.get(E);N.addEventListener("dispose",M);const Ee=N.textures,Ce=!0===N.isWebGLCubeRenderTarget,At=Ee.length>1;if(At||(void 0===Ae.__webglTexture&&(Ae.__webglTexture=i.createTexture()),Ae.__version=E.version,o.memory.textures++),Ce){se.__webglFramebuffer=[];for(let Ke=0;Ke<6;Ke++)if(E.mipmaps&&E.mipmaps.length>0){se.__webglFramebuffer[Ke]=[];for(let ct=0;ct<E.mipmaps.length;ct++)se.__webglFramebuffer[Ke][ct]=i.createFramebuffer()}else se.__webglFramebuffer[Ke]=i.createFramebuffer()}else{if(E.mipmaps&&E.mipmaps.length>0){se.__webglFramebuffer=[];for(let Ke=0;Ke<E.mipmaps.length;Ke++)se.__webglFramebuffer[Ke]=i.createFramebuffer()}else se.__webglFramebuffer=i.createFramebuffer();if(At)for(let Ke=0,ct=Ee.length;Ke<ct;Ke++){const on=n.get(Ee[Ke]);void 0===on.__webglTexture&&(on.__webglTexture=i.createTexture(),o.memory.textures++)}if(N.samples>0&&!1===be(N)){se.__webglMultisampledFramebuffer=i.createFramebuffer(),se.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let Ke=0;Ke<Ee.length;Ke++){const ct=Ee[Ke];se.__webglColorRenderbuffer[Ke]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,se.__webglColorRenderbuffer[Ke]);const on=s.convert(ct.format,ct.colorSpace),Ue=s.convert(ct.type),at=b(ct.internalFormat,on,Ue,ct.colorSpace,!0===N.isXRRenderTarget),kn=Ze(N);i.renderbufferStorageMultisample(i.RENDERBUFFER,kn,at,N.width,N.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Ke,i.RENDERBUFFER,se.__webglColorRenderbuffer[Ke])}i.bindRenderbuffer(i.RENDERBUFFER,null),N.depthBuffer&&(se.__webglDepthRenderbuffer=i.createRenderbuffer(),Ye(se.__webglDepthRenderbuffer,N,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Ce){e.bindTexture(i.TEXTURE_CUBE_MAP,Ae.__webglTexture),$e(i.TEXTURE_CUBE_MAP,E);for(let Ke=0;Ke<6;Ke++)if(E.mipmaps&&E.mipmaps.length>0)for(let ct=0;ct<E.mipmaps.length;ct++)Ie(se.__webglFramebuffer[Ke][ct],N,E,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,ct);else Ie(se.__webglFramebuffer[Ke],N,E,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,0);m(E)&&_(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(At){for(let Ke=0,ct=Ee.length;Ke<ct;Ke++){const on=Ee[Ke],Ue=n.get(on);e.bindTexture(i.TEXTURE_2D,Ue.__webglTexture),$e(i.TEXTURE_2D,on),Ie(se.__webglFramebuffer,N,on,i.COLOR_ATTACHMENT0+Ke,i.TEXTURE_2D,0),m(on)&&_(i.TEXTURE_2D)}e.unbindTexture()}else{let Ke=i.TEXTURE_2D;if((N.isWebGL3DRenderTarget||N.isWebGLArrayRenderTarget)&&(Ke=N.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Ke,Ae.__webglTexture),$e(Ke,E),E.mipmaps&&E.mipmaps.length>0)for(let ct=0;ct<E.mipmaps.length;ct++)Ie(se.__webglFramebuffer[ct],N,E,i.COLOR_ATTACHMENT0,Ke,ct);else Ie(se.__webglFramebuffer,N,E,i.COLOR_ATTACHMENT0,Ke,0);m(E)&&_(Ke),e.unbindTexture()}N.depthBuffer&&_t(N)},this.updateRenderTargetMipmap=function mn(N){const E=N.textures;for(let se=0,Ae=E.length;se<Ae;se++){const Ee=E[se];if(m(Ee)){const Ce=N.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,At=n.get(Ee).__webglTexture;e.bindTexture(Ce,At),_(Ce),e.unbindTexture()}}},this.updateMultisampleRenderTarget=function Pe(N){if(N.samples>0)if(!1===be(N)){const E=N.textures,se=N.width,Ae=N.height;let Ee=i.COLOR_BUFFER_BIT;const Ce=N.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,At=n.get(N),Ke=E.length>1;if(Ke)for(let ct=0;ct<E.length;ct++)e.bindFramebuffer(i.FRAMEBUFFER,At.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,At.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,At.__webglMultisampledFramebuffer),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,At.__webglFramebuffer);for(let ct=0;ct<E.length;ct++){if(N.resolveDepthBuffer&&(N.depthBuffer&&(Ee|=i.DEPTH_BUFFER_BIT),N.stencilBuffer&&N.resolveStencilBuffer&&(Ee|=i.STENCIL_BUFFER_BIT)),Ke){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,At.__webglColorRenderbuffer[ct]);const on=n.get(E[ct]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,on,0)}i.blitFramebuffer(0,0,se,Ae,0,0,se,Ae,Ee,i.NEAREST),!0===l&&(F.length=0,Ve.length=0,F.push(i.COLOR_ATTACHMENT0+ct),N.depthBuffer&&!1===N.resolveDepthBuffer&&(F.push(Ce),Ve.push(Ce),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,Ve)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,F))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Ke)for(let ct=0;ct<E.length;ct++){e.bindFramebuffer(i.FRAMEBUFFER,At.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.RENDERBUFFER,At.__webglColorRenderbuffer[ct]);const on=n.get(E[ct]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,At.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+ct,i.TEXTURE_2D,on,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,At.__webglMultisampledFramebuffer)}else N.depthBuffer&&!1===N.resolveDepthBuffer&&l&&i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[N.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT])},this.setupDepthRenderbuffer=_t,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=be}function Pue(i,t){return{convert:function e(n,r=Rl){let s;const o=Fn.getTransfer(r);if(n===Wa)return i.UNSIGNED_BYTE;if(n===GC)return i.UNSIGNED_SHORT_4_4_4_4;if(n===jC)return i.UNSIGNED_SHORT_5_5_5_1;if(n===dB)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===lB)return i.BYTE;if(n===cB)return i.SHORT;if(n===$f)return i.UNSIGNED_SHORT;if(n===$C)return i.INT;if(n===Il)return i.UNSIGNED_INT;if(n===js)return i.FLOAT;if(n===Qu)return i.HALF_FLOAT;if(n===uB)return i.ALPHA;if(n===hB)return i.RGB;if(n===Ms)return i.RGBA;if(n===pB)return i.LUMINANCE;if(n===fB)return i.LUMINANCE_ALPHA;if(n===eh)return i.DEPTH_COMPONENT;if(n===th)return i.DEPTH_STENCIL;if(n===WC)return i.RED;if(n===Av)return i.RED_INTEGER;if(n===mB)return i.RG;if(n===YC)return i.RG_INTEGER;if(n===XC)return i.RGBA_INTEGER;if(n===Dv||n===Tv||n===kv||n===Iv)if(o===li){if(s=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(n===Dv)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Tv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===kv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Iv)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=t.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(n===Dv)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Tv)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===kv)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Iv)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===qC||n===KC||n===ZC||n===QC){if(s=t.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(n===qC)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===KC)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ZC)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===QC)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===JC||n===eS||n===tS){if(s=t.get("WEBGL_compressed_texture_etc"),null===s)return null;if(n===JC||n===eS)return o===li?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===tS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(n===nS||n===iS||n===rS||n===sS||n===oS||n===aS||n===lS||n===cS||n===dS||n===uS||n===hS||n===pS||n===fS||n===mS){if(s=t.get("WEBGL_compressed_texture_astc"),null===s)return null;if(n===nS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===iS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===rS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===sS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===oS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===aS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===lS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===cS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===dS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===uS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===hS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===pS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===fS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===mS)return o===li?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Rv||n===gS||n===_S){if(s=t.get("EXT_texture_compression_bptc"),null===s)return null;if(n===Rv)return o===li?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===gS)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===_S)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===gB||n===vS||n===bS||n===yS){if(s=t.get("EXT_texture_compression_rgtc"),null===s)return null;if(n===Rv)return s.COMPRESSED_RED_RGTC1_EXT;if(n===vS)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===bS)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===yS)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===Ju?i.UNSIGNED_INT_24_8:void 0!==i[n]?i[n]:null}}}class Oue extends qi{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class rs extends sr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Fue={type:"move"};class nE{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new rs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new rs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new I,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new I),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new rs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new I,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new I),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(c&&t.hand){o=!0;for(const g of t.hand.values()){const m=e.getJointPose(g,n),_=this._getHandJoint(c,g);null!==m&&(_.matrix.fromArray(m.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,_.jointRadius=m.radius),_.visible=null!==m}const h=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),p=.02,f=.005;c.inputState.pinching&&h>p+f?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!c.inputState.pinching&&h<=p-f&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==l&&t.gripSpace&&(s=e.getPose(t.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=e.getPose(t.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Fue)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const n=new rs;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}}class Bue{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,n){if(null===this.texture){const r=new Cs;t.properties.get(r).__webglTexture=e.texture,(e.depthNear!=n.depthNear||e.depthFar!=n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=r}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,n=new Ho({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new sn(new Kc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Uue extends sh{constructor(t,e){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,u=null,h=null,p=null,f=null;const g=new Bue,m=e.getContextAttributes();let _=null,b=null;const v=[],y=[],R=new _e;let M=null;const D=new qi;D.layers.enable(1),D.viewport=new Kn;const L=new qi;L.layers.enable(2),L.viewport=new Kn;const C=[D,L],w=new Oue;w.layers.enable(1),w.layers.enable(2);let U=null,ee=null;function q(ie){const Ie=y.indexOf(ie.inputSource);if(-1===Ie)return;const Ye=v[Ie];void 0!==Ye&&(Ye.update(ie.inputSource,ie.frame,c||o),Ye.dispatchEvent({type:ie.type,data:ie.inputSource}))}function ne(){r.removeEventListener("select",q),r.removeEventListener("selectstart",q),r.removeEventListener("selectend",q),r.removeEventListener("squeeze",q),r.removeEventListener("squeezestart",q),r.removeEventListener("squeezeend",q),r.removeEventListener("end",ne),r.removeEventListener("inputsourceschange",fe);for(let ie=0;ie<v.length;ie++){const Ie=y[ie];null!==Ie&&(y[ie]=null,v[ie].disconnect(Ie))}U=null,ee=null,g.reset(),t.setRenderTarget(_),p=null,h=null,u=null,r=null,b=null,Gt.stop(),n.isPresenting=!1,t.setPixelRatio(M),t.setSize(R.width,R.height,!1),n.dispatchEvent({type:"sessionend"})}function fe(ie){for(let Ie=0;Ie<ie.removed.length;Ie++){const Ye=ie.removed[Ie],Re=y.indexOf(Ye);Re>=0&&(y[Re]=null,v[Re].disconnect(Ye))}for(let Ie=0;Ie<ie.added.length;Ie++){const Ye=ie.added[Ie];let Re=y.indexOf(Ye);if(-1===Re){for(let wt=0;wt<v.length;wt++){if(wt>=y.length){y.push(Ye),Re=wt;break}if(null===y[wt]){y[wt]=Ye,Re=wt;break}}if(-1===Re)break}const _t=v[Re];_t&&_t.connect(Ye)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let Ie=v[ie];return void 0===Ie&&(Ie=new nE,v[ie]=Ie),Ie.getTargetRaySpace()},this.getControllerGrip=function(ie){let Ie=v[ie];return void 0===Ie&&(Ie=new nE,v[ie]=Ie),Ie.getGripSpace()},this.getHand=function(ie){let Ie=v[ie];return void 0===Ie&&(Ie=new nE,v[ie]=Ie),Ie.getHandSpace()},this.setFramebufferScaleFactor=function(ie){s=ie,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ie){c=ie},this.getBaseLayer=function(){return null!==h?h:p},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=function(){var ie=Se(function*(Ie){if(r=Ie,null!==r){if(_=t.getRenderTarget(),r.addEventListener("select",q),r.addEventListener("selectstart",q),r.addEventListener("selectend",q),r.addEventListener("squeeze",q),r.addEventListener("squeezestart",q),r.addEventListener("squeezeend",q),r.addEventListener("end",ne),r.addEventListener("inputsourceschange",fe),!0!==m.xrCompatible&&(yield e.makeXRCompatible()),M=t.getPixelRatio(),t.getSize(R),void 0===r.renderState.layers)p=new XRWebGLLayer(r,e,{antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:p}),t.setPixelRatio(1),t.setSize(p.framebufferWidth,p.framebufferHeight,!1),b=new Pl(p.framebufferWidth,p.framebufferHeight,{format:Ms,type:Wa,colorSpace:t.outputColorSpace,stencilBuffer:m.stencil});else{let Ye=null,Re=null,_t=null;m.depth&&(_t=m.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,Ye=m.stencil?th:eh,Re=m.stencil?Ju:Il);const wt={colorFormat:e.RGBA8,depthFormat:_t,scaleFactor:s};u=new XRWebGLBinding(r,e),h=u.createProjectionLayer(wt),r.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),b=new Pl(h.textureWidth,h.textureHeight,{format:Ms,type:Wa,depthTexture:new r3(h.textureWidth,h.textureHeight,Re,void 0,void 0,void 0,void 0,void 0,void 0,Ye),stencilBuffer:m.stencil,colorSpace:t.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}b.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),Gt.setContext(r),Gt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Ie){return ie.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};const V=new I,te=new I;function ve(ie,Ie){null===Ie?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(Ie.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(null===r)return;null!==g.texture&&(ie.near=g.depthNear,ie.far=g.depthFar),w.near=L.near=D.near=ie.near,w.far=L.far=D.far=ie.far,(U!==w.near||ee!==w.far)&&(r.updateRenderState({depthNear:w.near,depthFar:w.far}),U=w.near,ee=w.far,D.near=U,D.far=ee,L.near=U,L.far=ee,D.updateProjectionMatrix(),L.updateProjectionMatrix(),ie.updateProjectionMatrix());const Ie=ie.parent,Ye=w.cameras;ve(w,Ie);for(let Re=0;Re<Ye.length;Re++)ve(Ye[Re],Ie);2===Ye.length?function Y(ie,Ie,Ye){V.setFromMatrixPosition(Ie.matrixWorld),te.setFromMatrixPosition(Ye.matrixWorld);const Re=V.distanceTo(te),_t=Ie.projectionMatrix.elements,wt=Ye.projectionMatrix.elements,yt=_t[14]/(_t[10]-1),mn=_t[14]/(_t[10]+1),F=(_t[9]+1)/_t[5],Ve=(_t[9]-1)/_t[5],Pe=(_t[8]-1)/_t[0],Ze=(wt[8]+1)/wt[0],be=yt*Pe,It=yt*Ze,Qe=Re/(-Pe+Ze),ut=Qe*-Pe;Ie.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(ut),ie.translateZ(Qe),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert();const N=yt+Qe,E=mn+Qe;ie.projectionMatrix.makePerspective(be-ut,It+(Re-ut),F*mn/E*N,Ve*mn/E*N,N,E),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}(w,D,L):w.projectionMatrix.copy(D.projectionMatrix),function Le(ie,Ie,Ye){null===Ye?ie.matrix.copy(Ie.matrixWorld):(ie.matrix.copy(Ye.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(Ie.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0),ie.projectionMatrix.copy(Ie.projectionMatrix),ie.projectionMatrixInverse.copy(Ie.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=2*oh*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}(ie,w,Ie)},this.getCamera=function(){return w},this.getFoveation=function(){if(null!==h||null!==p)return l},this.setFoveation=function(ie){l=ie,null!==h&&(h.fixedFoveation=ie),null!==p&&void 0!==p.fixedFoveation&&(p.fixedFoveation=ie)},this.hasDepthSensing=function(){return null!==g.texture},this.getDepthSensingMesh=function(){return g.getMesh(w)};let $e=null;const Gt=new qB;Gt.setAnimationLoop(function Mt(ie,Ie){if(d=Ie.getViewerPose(c||o),f=Ie,null!==d){const Ye=d.views;null!==p&&(t.setRenderTargetFramebuffer(b,p.framebuffer),t.setRenderTarget(b));let Re=!1;Ye.length!==w.cameras.length&&(w.cameras.length=0,Re=!0);for(let wt=0;wt<Ye.length;wt++){const yt=Ye[wt];let mn=null;if(null!==p)mn=p.getViewport(yt);else{const Ve=u.getViewSubImage(h,yt);mn=Ve.viewport,0===wt&&(t.setRenderTargetTextures(b,Ve.colorTexture,h.ignoreDepthValues?void 0:Ve.depthStencilTexture),t.setRenderTarget(b))}let F=C[wt];void 0===F&&(F=new qi,F.layers.enable(wt),F.viewport=new Kn,C[wt]=F),F.matrix.fromArray(yt.transform.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale),F.projectionMatrix.fromArray(yt.projectionMatrix),F.projectionMatrixInverse.copy(F.projectionMatrix).invert(),F.viewport.set(mn.x,mn.y,mn.width,mn.height),0===wt&&(w.matrix.copy(F.matrix),w.matrix.decompose(w.position,w.quaternion,w.scale)),!0===Re&&w.cameras.push(F)}const _t=r.enabledFeatures;if(_t&&_t.includes("depth-sensing")){const wt=u.getDepthInformation(Ye[0]);wt&&wt.isValid&&wt.texture&&g.init(t,wt,r.renderState)}}for(let Ye=0;Ye<v.length;Ye++){const Re=y[Ye],_t=v[Ye];null!==Re&&void 0!==_t&&_t.update(Re,Ie,c||o)}$e&&$e(ie,Ie),Ie.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Ie}),f=null}),this.setAnimationLoop=function(ie){$e=ie},this.dispose=function(){}}}const ed=new Ka,Vue=new Et;function zue(i,t){function e(m,_){!0===m.matrixAutoUpdate&&m.updateMatrix(),_.value.copy(m.matrix)}function s(m,_){m.opacity.value=_.opacity,_.color&&m.diffuse.value.copy(_.color),_.emissive&&m.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(m.map.value=_.map,e(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,e(_.alphaMap,m.alphaMapTransform)),_.bumpMap&&(m.bumpMap.value=_.bumpMap,e(_.bumpMap,m.bumpMapTransform),m.bumpScale.value=_.bumpScale,_.side===ws&&(m.bumpScale.value*=-1)),_.normalMap&&(m.normalMap.value=_.normalMap,e(_.normalMap,m.normalMapTransform),m.normalScale.value.copy(_.normalScale),_.side===ws&&m.normalScale.value.negate()),_.displacementMap&&(m.displacementMap.value=_.displacementMap,e(_.displacementMap,m.displacementMapTransform),m.displacementScale.value=_.displacementScale,m.displacementBias.value=_.displacementBias),_.emissiveMap&&(m.emissiveMap.value=_.emissiveMap,e(_.emissiveMap,m.emissiveMapTransform)),_.specularMap&&(m.specularMap.value=_.specularMap,e(_.specularMap,m.specularMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest);const b=t.get(_),v=b.envMap,y=b.envMapRotation;v&&(m.envMap.value=v,ed.copy(y),ed.x*=-1,ed.y*=-1,ed.z*=-1,v.isCubeTexture&&!1===v.isRenderTargetTexture&&(ed.y*=-1,ed.z*=-1),m.envMapRotation.value.setFromMatrix4(Vue.makeRotationFromEuler(ed)),m.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,m.reflectivity.value=_.reflectivity,m.ior.value=_.ior,m.refractionRatio.value=_.refractionRatio),_.lightMap&&(m.lightMap.value=_.lightMap,m.lightMapIntensity.value=_.lightMapIntensity,e(_.lightMap,m.lightMapTransform)),_.aoMap&&(m.aoMap.value=_.aoMap,m.aoMapIntensity.value=_.aoMapIntensity,e(_.aoMap,m.aoMapTransform))}return{refreshFogUniforms:function n(m,_){_.color.getRGB(m.fogColor.value,jB(i)),_.isFog?(m.fogNear.value=_.near,m.fogFar.value=_.far):_.isFogExp2&&(m.fogDensity.value=_.density)},refreshMaterialUniforms:function r(m,_,b,v,y){_.isMeshBasicMaterial||_.isMeshLambertMaterial?s(m,_):_.isMeshToonMaterial?(s(m,_),function u(m,_){_.gradientMap&&(m.gradientMap.value=_.gradientMap)}(m,_)):_.isMeshPhongMaterial?(s(m,_),function d(m,_){m.specular.value.copy(_.specular),m.shininess.value=Math.max(_.shininess,1e-4)}(m,_)):_.isMeshStandardMaterial?(s(m,_),function h(m,_){m.metalness.value=_.metalness,_.metalnessMap&&(m.metalnessMap.value=_.metalnessMap,e(_.metalnessMap,m.metalnessMapTransform)),m.roughness.value=_.roughness,_.roughnessMap&&(m.roughnessMap.value=_.roughnessMap,e(_.roughnessMap,m.roughnessMapTransform)),_.envMap&&(m.envMapIntensity.value=_.envMapIntensity)}(m,_),_.isMeshPhysicalMaterial&&function p(m,_,b){m.ior.value=_.ior,_.sheen>0&&(m.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),m.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(m.sheenColorMap.value=_.sheenColorMap,e(_.sheenColorMap,m.sheenColorMapTransform)),_.sheenRoughnessMap&&(m.sheenRoughnessMap.value=_.sheenRoughnessMap,e(_.sheenRoughnessMap,m.sheenRoughnessMapTransform))),_.clearcoat>0&&(m.clearcoat.value=_.clearcoat,m.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(m.clearcoatMap.value=_.clearcoatMap,e(_.clearcoatMap,m.clearcoatMapTransform)),_.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap,e(_.clearcoatRoughnessMap,m.clearcoatRoughnessMapTransform)),_.clearcoatNormalMap&&(m.clearcoatNormalMap.value=_.clearcoatNormalMap,e(_.clearcoatNormalMap,m.clearcoatNormalMapTransform),m.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),_.side===ws&&m.clearcoatNormalScale.value.negate())),_.dispersion>0&&(m.dispersion.value=_.dispersion),_.iridescence>0&&(m.iridescence.value=_.iridescence,m.iridescenceIOR.value=_.iridescenceIOR,m.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],m.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(m.iridescenceMap.value=_.iridescenceMap,e(_.iridescenceMap,m.iridescenceMapTransform)),_.iridescenceThicknessMap&&(m.iridescenceThicknessMap.value=_.iridescenceThicknessMap,e(_.iridescenceThicknessMap,m.iridescenceThicknessMapTransform))),_.transmission>0&&(m.transmission.value=_.transmission,m.transmissionSamplerMap.value=b.texture,m.transmissionSamplerSize.value.set(b.width,b.height),_.transmissionMap&&(m.transmissionMap.value=_.transmissionMap,e(_.transmissionMap,m.transmissionMapTransform)),m.thickness.value=_.thickness,_.thicknessMap&&(m.thicknessMap.value=_.thicknessMap,e(_.thicknessMap,m.thicknessMapTransform)),m.attenuationDistance.value=_.attenuationDistance,m.attenuationColor.value.copy(_.attenuationColor)),_.anisotropy>0&&(m.anisotropyVector.value.set(_.anisotropy*Math.cos(_.anisotropyRotation),_.anisotropy*Math.sin(_.anisotropyRotation)),_.anisotropyMap&&(m.anisotropyMap.value=_.anisotropyMap,e(_.anisotropyMap,m.anisotropyMapTransform))),m.specularIntensity.value=_.specularIntensity,m.specularColor.value.copy(_.specularColor),_.specularColorMap&&(m.specularColorMap.value=_.specularColorMap,e(_.specularColorMap,m.specularColorMapTransform)),_.specularIntensityMap&&(m.specularIntensityMap.value=_.specularIntensityMap,e(_.specularIntensityMap,m.specularIntensityMapTransform))}(m,_,y)):_.isMeshMatcapMaterial?(s(m,_),function f(m,_){_.matcap&&(m.matcap.value=_.matcap)}(m,_)):_.isMeshDepthMaterial?s(m,_):_.isMeshDistanceMaterial?(s(m,_),function g(m,_){const b=t.get(_).light;m.referencePosition.value.setFromMatrixPosition(b.matrixWorld),m.nearDistance.value=b.shadow.camera.near,m.farDistance.value=b.shadow.camera.far}(m,_)):_.isMeshNormalMaterial?s(m,_):_.isLineBasicMaterial?(function o(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,_.map&&(m.map.value=_.map,e(_.map,m.mapTransform))}(m,_),_.isLineDashedMaterial&&function a(m,_){m.dashSize.value=_.dashSize,m.totalSize.value=_.dashSize+_.gapSize,m.scale.value=_.scale}(m,_)):_.isPointsMaterial?function l(m,_,b,v){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.size.value=_.size*b,m.scale.value=.5*v,_.map&&(m.map.value=_.map,e(_.map,m.uvTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,e(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_,b,v):_.isSpriteMaterial?function c(m,_){m.diffuse.value.copy(_.color),m.opacity.value=_.opacity,m.rotation.value=_.rotation,_.map&&(m.map.value=_.map,e(_.map,m.mapTransform)),_.alphaMap&&(m.alphaMap.value=_.alphaMap,e(_.alphaMap,m.alphaMapTransform)),_.alphaTest>0&&(m.alphaTest.value=_.alphaTest)}(m,_):_.isShadowMaterial?(m.color.value.copy(_.color),m.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}}}function Hue(i,t,e,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function p(b,v,y,R){const M=b.value,D=v+"_"+y;if(void 0===R[D])return R[D]="number"==typeof M||"boolean"==typeof M?M:M.clone(),!0;{const L=R[D];if("number"==typeof M||"boolean"==typeof M){if(L!==M)return R[D]=M,!0}else if(!1===L.equals(M))return L.copy(M),!0}return!1}function g(b){const v={boundary:0,storage:0};return"number"==typeof b||"boolean"==typeof b?(v.boundary=4,v.storage=4):b.isVector2?(v.boundary=8,v.storage=8):b.isVector3||b.isColor?(v.boundary=16,v.storage=12):b.isVector4?(v.boundary=16,v.storage=16):b.isMatrix3?(v.boundary=48,v.storage=48):b.isMatrix4?(v.boundary=64,v.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),v}function m(b){const v=b.target;v.removeEventListener("dispose",m);const y=o.indexOf(v.__bindingPointIndex);o.splice(y,1),i.deleteBuffer(r[v.id]),delete r[v.id],delete s[v.id]}return{bind:function l(b,v){n.uniformBlockBinding(b,v.program)},update:function c(b,v){let y=r[b.id];void 0===y&&(function f(b){const v=b.uniforms;let y=0;for(let D=0,L=v.length;D<L;D++){const C=Array.isArray(v[D])?v[D]:[v[D]];for(let w=0,U=C.length;w<U;w++){const ee=C[w],q=Array.isArray(ee.value)?ee.value:[ee.value];for(let ne=0,fe=q.length;ne<fe;ne++){const te=g(q[ne]),Y=y%16,ve=Y%te.boundary,Le=Y+ve;y+=ve,0!==Le&&16-Le<te.storage&&(y+=16-Le),ee.__data=new Float32Array(te.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=y,y+=te.storage}}}const M=y%16;M>0&&(y+=16-M),b.__size=y,b.__cache={}}(b),y=function d(b){const v=function u(){for(let b=0;b<a;b++)if(-1===o.indexOf(b))return o.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();b.__bindingPointIndex=v;const y=i.createBuffer(),R=b.__size,M=b.usage;return i.bindBuffer(i.UNIFORM_BUFFER,y),i.bufferData(i.UNIFORM_BUFFER,R,M),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,v,y),y}(b),r[b.id]=y,b.addEventListener("dispose",m)),n.updateUBOMapping(b,v.program);const M=t.render.frame;s[b.id]!==M&&(function h(b){const y=b.uniforms,R=b.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[b.id]);for(let M=0,D=y.length;M<D;M++){const L=Array.isArray(y[M])?y[M]:[y[M]];for(let C=0,w=L.length;C<w;C++){const U=L[C];if(!0===p(U,M,C,R)){const ee=U.__offset,q=Array.isArray(U.value)?U.value:[U.value];let ne=0;for(let fe=0;fe<q.length;fe++){const V=q[fe],te=g(V);"number"==typeof V||"boolean"==typeof V?(U.__data[0]=V,i.bufferSubData(i.UNIFORM_BUFFER,ee+ne,U.__data)):V.isMatrix3?(U.__data[0]=V.elements[0],U.__data[1]=V.elements[1],U.__data[2]=V.elements[2],U.__data[3]=0,U.__data[4]=V.elements[3],U.__data[5]=V.elements[4],U.__data[6]=V.elements[5],U.__data[7]=0,U.__data[8]=V.elements[6],U.__data[9]=V.elements[7],U.__data[10]=V.elements[8],U.__data[11]=0):(V.toArray(U.__data,ne),ne+=te.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ee,U.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(b),s[b.id]=M)},dispose:function _(){for(const b in r)i.deleteBuffer(r[b]);o=[],r={},s={}}}}class $ue{constructor(t={}){const{canvas:e=pae(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1}=t;let h;if(this.isWebGLRenderer=!0,null!==n){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const p=new Uint32Array(4),f=new Int32Array(4);let g=null,m=null;const _=[],b=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Sr,this.toneMapping=kl,this.toneMappingExposure=1;const v=this;let y=!1,R=0,M=0,D=null,L=-1,C=null;const w=new Kn,U=new Kn;let ee=null;const q=new Ge(0);let ne=0,fe=e.width,V=e.height,te=1,Y=null,ve=null;const Le=new Kn(0,0,fe,V),$e=new Kn(0,0,fe,V);let Mt=!1;const Gt=new sb;let ie=!1,Ie=!1;const Ye=new Et,Re=new I,_t=new Kn,wt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yt=!1;function mn(){return null===D?te:1}let Pe,Ze,be,It,Qe,ut,N,E,se,Ae,Ee,Ce,At,Ke,ct,on,Ue,at,kn,Xt,pt,nn,vn,Mi,F=n;function Ve(P,G){return e.getContext(P,G)}try{const P={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine","three.js r167"),e.addEventListener("webglcontextlost",ye,!1),e.addEventListener("webglcontextrestored",Me,!1),e.addEventListener("webglcontextcreationerror",We,!1),null===F){const G="webgl2";if(F=Ve(G,P),null===F)throw Ve(G)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(P){throw console.error("THREE.WebGLRenderer: "+P.message),P}function j(){Pe=new Xce(F),Pe.init(),nn=new Pue(F,Pe),Ze=new Hce(F,Pe,t,nn),be=new Aue(F),It=new Zce(F),Qe=new mue,ut=new Rue(F,Pe,be,Qe,Ze,nn,It),N=new Gce(v),E=new Yce(v),se=new Bae(F),vn=new Vce(F,se),Ae=new qce(F,se,It,vn),Ee=new Jce(F,Ae,se,It),kn=new Qce(F,Ze,ut),on=new $ce(Qe),Ce=new fue(v,N,E,Pe,Ze,vn,on),At=new zue(v,Qe),Ke=new _ue,ct=new Mue(Pe),at=new Uce(v,N,E,be,Ee,h,l),Ue=new Eue(v,Ee,Ze),Mi=new Hue(F,It,Ze,be),Xt=new zce(F,Pe,It),pt=new Kce(F,Pe,It),It.programs=Ce.programs,v.capabilities=Ze,v.extensions=Pe,v.properties=Qe,v.renderLists=Ke,v.shadowMap=Ue,v.state=be,v.info=It}j();const ze=new Uue(v,F);function ye(P){P.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1;const P=It.autoReset,G=Ue.enabled,re=Ue.autoUpdate,oe=Ue.needsUpdate,X=Ue.type;j(),It.autoReset=P,Ue.enabled=G,Ue.autoUpdate=re,Ue.needsUpdate=oe,Ue.type=X}function We(P){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",P.statusMessage)}function jt(P){const G=P.target;G.removeEventListener("dispose",jt),function Ln(P){(function Ki(P){const G=Qe.get(P).programs;void 0!==G&&(G.forEach(function(re){Ce.releaseProgram(re)}),P.isShaderMaterial&&Ce.releaseShaderCache(P))})(P),Qe.remove(P)}(G)}function Ar(P,G,re){!0===P.transparent&&P.side===Cr&&!1===P.forceSinglePass?(P.side=ws,P.needsUpdate=!0,gy(P,G,re),P.side=ua,P.needsUpdate=!0,gy(P,G,re),P.side=Cr):gy(P,G,re)}this.xr=ze,this.getContext=function(){return F},this.getContextAttributes=function(){return F.getContextAttributes()},this.forceContextLoss=function(){const P=Pe.get("WEBGL_lose_context");P&&P.loseContext()},this.forceContextRestore=function(){const P=Pe.get("WEBGL_lose_context");P&&P.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(P){void 0!==P&&(te=P,this.setSize(fe,V,!1))},this.getSize=function(P){return P.set(fe,V)},this.setSize=function(P,G,re=!0){ze.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(fe=P,V=G,e.width=Math.floor(P*te),e.height=Math.floor(G*te),!0===re&&(e.style.width=P+"px",e.style.height=G+"px"),this.setViewport(0,0,P,G))},this.getDrawingBufferSize=function(P){return P.set(fe*te,V*te).floor()},this.setDrawingBufferSize=function(P,G,re){fe=P,V=G,te=re,e.width=Math.floor(P*re),e.height=Math.floor(G*re),this.setViewport(0,0,P,G)},this.getCurrentViewport=function(P){return P.copy(w)},this.getViewport=function(P){return P.copy(Le)},this.setViewport=function(P,G,re,oe){P.isVector4?Le.set(P.x,P.y,P.z,P.w):Le.set(P,G,re,oe),be.viewport(w.copy(Le).multiplyScalar(te).round())},this.getScissor=function(P){return P.copy($e)},this.setScissor=function(P,G,re,oe){P.isVector4?$e.set(P.x,P.y,P.z,P.w):$e.set(P,G,re,oe),be.scissor(U.copy($e).multiplyScalar(te).round())},this.getScissorTest=function(){return Mt},this.setScissorTest=function(P){be.setScissorTest(Mt=P)},this.setOpaqueSort=function(P){Y=P},this.setTransparentSort=function(P){ve=P},this.getClearColor=function(P){return P.copy(at.getClearColor())},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(P=!0,G=!0,re=!0){let oe=0;if(P){let X=!1;if(null!==D){const He=D.texture.format;X=He===XC||He===YC||He===Av}if(X){const He=D.texture.type,tt=He===Wa||He===Il||He===$f||He===Ju||He===GC||He===jC,vt=at.getClearColor(),bt=at.getClearAlpha(),zt=vt.r,Yt=vt.g,Ht=vt.b;tt?(p[0]=zt,p[1]=Yt,p[2]=Ht,p[3]=bt,F.clearBufferuiv(F.COLOR,0,p)):(f[0]=zt,f[1]=Yt,f[2]=Ht,f[3]=bt,F.clearBufferiv(F.COLOR,0,f))}else oe|=F.COLOR_BUFFER_BIT}G&&(oe|=F.DEPTH_BUFFER_BIT),re&&(oe|=F.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),F.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ye,!1),e.removeEventListener("webglcontextrestored",Me,!1),e.removeEventListener("webglcontextcreationerror",We,!1),Ke.dispose(),ct.dispose(),Qe.dispose(),N.dispose(),E.dispose(),Ee.dispose(),vn.dispose(),Mi.dispose(),Ce.dispose(),ze.dispose(),ze.removeEventListener("sessionstart",_a),ze.removeEventListener("sessionend",KV),yd.stop()},this.renderBufferDirect=function(P,G,re,oe,X,He){null===G&&(G=wt);const tt=X.isMesh&&X.matrixWorld.determinant()<0,vt=function Mve(P,G,re,oe,X){!0!==G.isScene&&(G=wt),ut.resetTextureUnits();const He=G.fog,vt=null===D?v.outputColorSpace:!0===D.isXRRenderTarget?D.texture.colorSpace:Er,bt=(oe.isMeshStandardMaterial?E:N).get(oe.envMap||(oe.isMeshStandardMaterial?G.environment:null)),zt=!0===oe.vertexColors&&!!re.attributes.color&&4===re.attributes.color.itemSize,Yt=!!re.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),Ht=!!re.morphAttributes.position,$n=!!re.morphAttributes.normal,ci=!!re.morphAttributes.color;let Ii=kl;oe.toneMapped&&(null===D||!0===D.isXRRenderTarget)&&(Ii=v.toneMapping);const Zs=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,Xn=void 0!==Zs?Zs.length:0,Ct=Qe.get(oe),Dr=m.state.lights;!0!==ie||!0!==Ie&&P===C||on.setState(oe,P,P===C&&oe.id===L);let qn=!1;oe.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==Dr.state.version||Ct.outputColorSpace!==vt||X.isBatchedMesh&&!1===Ct.batching||!X.isBatchedMesh&&!0===Ct.batching||X.isBatchedMesh&&!0===Ct.batchingColor&&null===X.colorTexture||X.isBatchedMesh&&!1===Ct.batchingColor&&null!==X.colorTexture||X.isInstancedMesh&&!1===Ct.instancing||!X.isInstancedMesh&&!0===Ct.instancing||X.isSkinnedMesh&&!1===Ct.skinning||!X.isSkinnedMesh&&!0===Ct.skinning||X.isInstancedMesh&&!0===Ct.instancingColor&&null===X.instanceColor||X.isInstancedMesh&&!1===Ct.instancingColor&&null!==X.instanceColor||X.isInstancedMesh&&!0===Ct.instancingMorph&&null===X.morphTexture||X.isInstancedMesh&&!1===Ct.instancingMorph&&null!==X.morphTexture||Ct.envMap!==bt||!0===oe.fog&&Ct.fog!==He||void 0!==Ct.numClippingPlanes&&(Ct.numClippingPlanes!==on.numPlanes||Ct.numIntersection!==on.numIntersection)||Ct.vertexAlphas!==zt||Ct.vertexTangents!==Yt||Ct.morphTargets!==Ht||Ct.morphNormals!==$n||Ct.morphColors!==ci||Ct.toneMapping!==Ii||Ct.morphTargetsCount!==Xn)&&(qn=!0):(qn=!0,Ct.__version=oe.version);let Go=Ct.currentProgram;!0===qn&&(Go=gy(oe,G,X));let Yh=!1,Qs=!1,S1=!1;const Zi=Go.getUniforms(),Xl=Ct.uniforms;if(be.useProgram(Go.program)&&(Yh=!0,Qs=!0,S1=!0),oe.id!==L&&(L=oe.id,Qs=!0),Yh||C!==P){Zi.setValue(F,"projectionMatrix",P.projectionMatrix),Zi.setValue(F,"viewMatrix",P.matrixWorldInverse);const yo=Zi.map.cameraPosition;void 0!==yo&&yo.setValue(F,Re.setFromMatrixPosition(P.matrixWorld)),Ze.logarithmicDepthBuffer&&Zi.setValue(F,"logDepthBufFC",2/(Math.log(P.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&Zi.setValue(F,"isOrthographic",!0===P.isOrthographicCamera),C!==P&&(C=P,Qs=!0,S1=!0)}if(X.isSkinnedMesh){Zi.setOptional(F,X,"bindMatrix"),Zi.setOptional(F,X,"bindMatrixInverse");const yo=X.skeleton;yo&&(null===yo.boneTexture&&yo.computeBoneTexture(),Zi.setValue(F,"boneTexture",yo.boneTexture,ut))}X.isBatchedMesh&&(Zi.setOptional(F,X,"batchingTexture"),Zi.setValue(F,"batchingTexture",X._matricesTexture,ut),Zi.setOptional(F,X,"batchingIdTexture"),Zi.setValue(F,"batchingIdTexture",X._indirectTexture,ut),Zi.setOptional(F,X,"batchingColorTexture"),null!==X._colorsTexture&&Zi.setValue(F,"batchingColorTexture",X._colorsTexture,ut));const E1=re.morphAttributes;if((void 0!==E1.position||void 0!==E1.normal||void 0!==E1.color)&&kn.update(X,re,Go),(Qs||Ct.receiveShadow!==X.receiveShadow)&&(Ct.receiveShadow=X.receiveShadow,Zi.setValue(F,"receiveShadow",X.receiveShadow)),oe.isMeshGouraudMaterial&&null!==oe.envMap&&(Xl.envMap.value=bt,Xl.flipEnvMap.value=bt.isCubeTexture&&!1===bt.isRenderTargetTexture?-1:1),oe.isMeshStandardMaterial&&null===oe.envMap&&null!==G.environment&&(Xl.envMapIntensity.value=G.environmentIntensity),Qs&&(Zi.setValue(F,"toneMappingExposure",v.toneMappingExposure),Ct.needsLights&&function Cve(P,G){P.ambientLightColor.needsUpdate=G,P.lightProbe.needsUpdate=G,P.directionalLights.needsUpdate=G,P.directionalLightShadows.needsUpdate=G,P.pointLights.needsUpdate=G,P.pointLightShadows.needsUpdate=G,P.spotLights.needsUpdate=G,P.spotLightShadows.needsUpdate=G,P.rectAreaLights.needsUpdate=G,P.hemisphereLights.needsUpdate=G}(Xl,S1),He&&!0===oe.fog&&At.refreshFogUniforms(Xl,He),At.refreshMaterialUniforms(Xl,oe,te,V,m.state.transmissionRenderTarget[P.id]),cb.upload(F,ez(Ct),Xl,ut)),oe.isShaderMaterial&&!0===oe.uniformsNeedUpdate&&(cb.upload(F,ez(Ct),Xl,ut),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&Zi.setValue(F,"center",X.center),Zi.setValue(F,"modelViewMatrix",X.modelViewMatrix),Zi.setValue(F,"normalMatrix",X.normalMatrix),Zi.setValue(F,"modelMatrix",X.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){const yo=oe.uniformsGroups;for(let A1=0,Eve=yo.length;A1<Eve;A1++){const nz=yo[A1];Mi.update(nz,Go),Mi.bind(nz,Go)}}return Go}(P,G,re,oe,X);be.setMaterial(oe,tt);let bt=re.index,zt=1;if(!0===oe.wireframe){if(bt=Ae.getWireframeAttribute(re),void 0===bt)return;zt=2}const Yt=re.drawRange,Ht=re.attributes.position;let $n=Yt.start*zt,ci=(Yt.start+Yt.count)*zt;null!==He&&($n=Math.max($n,He.start*zt),ci=Math.min(ci,(He.start+He.count)*zt)),null!==bt?($n=Math.max($n,0),ci=Math.min(ci,bt.count)):null!=Ht&&($n=Math.max($n,0),ci=Math.min(ci,Ht.count));const Ii=ci-$n;if(Ii<0||Ii===1/0)return;vn.setup(X,oe,vt,re,bt);let Zs,Xn=Xt;if(null!==bt&&(Zs=se.get(bt),Xn=pt,Xn.setIndex(Zs)),X.isMesh)!0===oe.wireframe?(be.setLineWidth(oe.wireframeLinewidth*mn()),Xn.setMode(F.LINES)):Xn.setMode(F.TRIANGLES);else if(X.isLine){let Ct=oe.linewidth;void 0===Ct&&(Ct=1),be.setLineWidth(Ct*mn()),Xn.setMode(X.isLineSegments?F.LINES:X.isLineLoop?F.LINE_LOOP:F.LINE_STRIP)}else X.isPoints?Xn.setMode(F.POINTS):X.isSprite&&Xn.setMode(F.TRIANGLES);if(X.isBatchedMesh)if(null!==X._multiDrawInstances)Xn.renderMultiDrawInstances(X._multiDrawStarts,X._multiDrawCounts,X._multiDrawCount,X._multiDrawInstances);else if(Pe.get("WEBGL_multi_draw"))Xn.renderMultiDraw(X._multiDrawStarts,X._multiDrawCounts,X._multiDrawCount);else{const Ct=X._multiDrawStarts,Dr=X._multiDrawCounts,qn=X._multiDrawCount,Go=bt?se.get(bt).bytesPerElement:1,Yh=Qe.get(oe).currentProgram.getUniforms();for(let Qs=0;Qs<qn;Qs++)Yh.setValue(F,"_gl_DrawID",Qs),Xn.render(Ct[Qs]/Go,Dr[Qs])}else if(X.isInstancedMesh)Xn.renderInstances($n,Ii,X.count);else if(re.isInstancedBufferGeometry){const Dr=Math.min(re.instanceCount,void 0!==re._maxInstanceCount?re._maxInstanceCount:1/0);Xn.renderInstances($n,Ii,Dr)}else Xn.render($n,Ii)},this.compile=function(P,G,re=null){null===re&&(re=P),m=ct.get(re),m.init(G),b.push(m),re.traverseVisible(function(X){X.isLight&&X.layers.test(G.layers)&&(m.pushLight(X),X.castShadow&&m.pushShadow(X))}),P!==re&&P.traverseVisible(function(X){X.isLight&&X.layers.test(G.layers)&&(m.pushLight(X),X.castShadow&&m.pushShadow(X))}),m.setupLights();const oe=new Set;return P.traverse(function(X){const He=X.material;if(He)if(Array.isArray(He))for(let tt=0;tt<He.length;tt++){const vt=He[tt];Ar(vt,re,X),oe.add(vt)}else Ar(He,re,X),oe.add(He)}),b.pop(),m=null,oe},this.compileAsync=function(P,G,re=null){const oe=this.compile(P,G,re);return new Promise(X=>{function He(){oe.forEach(function(tt){Qe.get(tt).currentProgram.isReady()&&oe.delete(tt)}),0!==oe.size?setTimeout(He,10):X(P)}null!==Pe.get("KHR_parallel_shader_compile")?He():setTimeout(He,10)})};let Yn=null;function _a(){yd.stop()}function KV(){yd.start()}const yd=new qB;function C1(P,G,re,oe){if(!1===P.visible)return;if(P.layers.test(G.layers))if(P.isGroup)re=P.renderOrder;else if(P.isLOD)!0===P.autoUpdate&&P.update(G);else if(P.isLight)m.pushLight(P),P.castShadow&&m.pushShadow(P);else if(P.isSprite){if(!P.frustumCulled||Gt.intersectsSprite(P)){oe&&_t.setFromMatrixPosition(P.matrixWorld).applyMatrix4(Ye);const tt=Ee.update(P),vt=P.material;vt.visible&&g.push(P,tt,vt,re,_t.z,null)}}else if((P.isMesh||P.isLine||P.isPoints)&&(!P.frustumCulled||Gt.intersectsObject(P))){const tt=Ee.update(P),vt=P.material;if(oe&&(void 0!==P.boundingSphere?(null===P.boundingSphere&&P.computeBoundingSphere(),_t.copy(P.boundingSphere.center)):(null===tt.boundingSphere&&tt.computeBoundingSphere(),_t.copy(tt.boundingSphere.center)),_t.applyMatrix4(P.matrixWorld).applyMatrix4(Ye)),Array.isArray(vt)){const bt=tt.groups;for(let zt=0,Yt=bt.length;zt<Yt;zt++){const Ht=bt[zt],$n=vt[Ht.materialIndex];$n&&$n.visible&&g.push(P,tt,$n,re,_t.z,Ht)}}else vt.visible&&g.push(P,tt,vt,re,_t.z,null)}const He=P.children;for(let tt=0,vt=He.length;tt<vt;tt++)C1(He[tt],G,re,oe)}function ZV(P,G,re,oe){const X=P.opaque,He=P.transmissive,tt=P.transparent;m.setupLightsView(re),!0===ie&&on.setGlobalState(v.clippingPlanes,re),oe&&be.viewport(w.copy(oe)),X.length>0&&my(X,G,re),He.length>0&&my(He,G,re),tt.length>0&&my(tt,G,re),be.buffers.depth.setTest(!0),be.buffers.depth.setMask(!0),be.buffers.color.setMask(!0),be.setPolygonOffset(!1)}function QV(P,G,re,oe){if(null!==(!0===re.isScene?re.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[oe.id]&&(m.state.transmissionRenderTarget[oe.id]=new Pl(1,1,{generateMipmaps:!0,type:Pe.has("EXT_color_buffer_half_float")||Pe.has("EXT_color_buffer_float")?Qu:Wa,minFilter:Bo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fn.workingColorSpace}));const He=m.state.transmissionRenderTarget[oe.id],tt=oe.viewport||w;He.setSize(tt.z,tt.w);const vt=v.getRenderTarget();v.setRenderTarget(He),v.getClearColor(q),ne=v.getClearAlpha(),ne<1&&v.setClearColor(16777215,.5),v.clear(),yt&&at.render(re);const bt=v.toneMapping;v.toneMapping=kl;const zt=oe.viewport;if(void 0!==oe.viewport&&(oe.viewport=void 0),m.setupLightsView(oe),!0===ie&&on.setGlobalState(v.clippingPlanes,oe),my(P,re,oe),ut.updateMultisampleRenderTarget(He),ut.updateRenderTargetMipmap(He),!1===Pe.has("WEBGL_multisampled_render_to_texture")){let Yt=!1;for(let Ht=0,$n=G.length;Ht<$n;Ht++){const ci=G[Ht],Ii=ci.object,Zs=ci.geometry,Xn=ci.material,Ct=ci.group;if(Xn.side===Cr&&Ii.layers.test(oe.layers)){const Dr=Xn.side;Xn.side=ws,Xn.needsUpdate=!0,JV(Ii,re,oe,Zs,Xn,Ct),Xn.side=Dr,Xn.needsUpdate=!0,Yt=!0}}!0===Yt&&(ut.updateMultisampleRenderTarget(He),ut.updateRenderTargetMipmap(He))}v.setRenderTarget(vt),v.setClearColor(q,ne),void 0!==zt&&(oe.viewport=zt),v.toneMapping=bt}function my(P,G,re){const oe=!0===G.isScene?G.overrideMaterial:null;for(let X=0,He=P.length;X<He;X++){const tt=P[X],vt=tt.object,bt=tt.geometry,zt=null===oe?tt.material:oe,Yt=tt.group;vt.layers.test(re.layers)&&JV(vt,G,re,bt,zt,Yt)}}function JV(P,G,re,oe,X,He){P.onBeforeRender(v,G,re,oe,X,He),P.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,P.matrixWorld),P.normalMatrix.getNormalMatrix(P.modelViewMatrix),!0===X.transparent&&X.side===Cr&&!1===X.forceSinglePass?(X.side=ws,X.needsUpdate=!0,v.renderBufferDirect(re,G,oe,X,P,He),X.side=ua,X.needsUpdate=!0,v.renderBufferDirect(re,G,oe,X,P,He),X.side=Cr):v.renderBufferDirect(re,G,oe,X,P,He),P.onAfterRender(v,G,re,oe,X,He)}function gy(P,G,re){!0!==G.isScene&&(G=wt);const oe=Qe.get(P),X=m.state.lights,tt=X.state.version,vt=Ce.getParameters(P,X.state,m.state.shadowsArray,G,re),bt=Ce.getProgramCacheKey(vt);let zt=oe.programs;oe.environment=P.isMeshStandardMaterial?G.environment:null,oe.fog=G.fog,oe.envMap=(P.isMeshStandardMaterial?E:N).get(P.envMap||oe.environment),oe.envMapRotation=null!==oe.environment&&null===P.envMap?G.environmentRotation:P.envMapRotation,void 0===zt&&(P.addEventListener("dispose",jt),zt=new Map,oe.programs=zt);let Yt=zt.get(bt);if(void 0!==Yt){if(oe.currentProgram===Yt&&oe.lightsStateVersion===tt)return tz(P,vt),Yt}else vt.uniforms=Ce.getUniforms(P),P.onBeforeCompile(vt,v),Yt=Ce.acquireProgram(vt,bt),zt.set(bt,Yt),oe.uniforms=vt.uniforms;const Ht=oe.uniforms;return(!P.isShaderMaterial&&!P.isRawShaderMaterial||!0===P.clipping)&&(Ht.clippingPlanes=on.uniform),tz(P,vt),oe.needsLights=function Sve(P){return P.isMeshLambertMaterial||P.isMeshToonMaterial||P.isMeshPhongMaterial||P.isMeshStandardMaterial||P.isShadowMaterial||P.isShaderMaterial&&!0===P.lights}(P),oe.lightsStateVersion=tt,oe.needsLights&&(Ht.ambientLightColor.value=X.state.ambient,Ht.lightProbe.value=X.state.probe,Ht.directionalLights.value=X.state.directional,Ht.directionalLightShadows.value=X.state.directionalShadow,Ht.spotLights.value=X.state.spot,Ht.spotLightShadows.value=X.state.spotShadow,Ht.rectAreaLights.value=X.state.rectArea,Ht.ltc_1.value=X.state.rectAreaLTC1,Ht.ltc_2.value=X.state.rectAreaLTC2,Ht.pointLights.value=X.state.point,Ht.pointLightShadows.value=X.state.pointShadow,Ht.hemisphereLights.value=X.state.hemi,Ht.directionalShadowMap.value=X.state.directionalShadowMap,Ht.directionalShadowMatrix.value=X.state.directionalShadowMatrix,Ht.spotShadowMap.value=X.state.spotShadowMap,Ht.spotLightMatrix.value=X.state.spotLightMatrix,Ht.spotLightMap.value=X.state.spotLightMap,Ht.pointShadowMap.value=X.state.pointShadowMap,Ht.pointShadowMatrix.value=X.state.pointShadowMatrix),oe.currentProgram=Yt,oe.uniformsList=null,Yt}function ez(P){if(null===P.uniformsList){const G=P.currentProgram.getUniforms();P.uniformsList=cb.seqWithValue(G.seq,P.uniforms)}return P.uniformsList}function tz(P,G){const re=Qe.get(P);re.outputColorSpace=G.outputColorSpace,re.batching=G.batching,re.batchingColor=G.batchingColor,re.instancing=G.instancing,re.instancingColor=G.instancingColor,re.instancingMorph=G.instancingMorph,re.skinning=G.skinning,re.morphTargets=G.morphTargets,re.morphNormals=G.morphNormals,re.morphColors=G.morphColors,re.morphTargetsCount=G.morphTargetsCount,re.numClippingPlanes=G.numClippingPlanes,re.numIntersection=G.numClipIntersection,re.vertexAlphas=G.vertexAlphas,re.vertexTangents=G.vertexTangents,re.toneMapping=G.toneMapping}yd.setAnimationLoop(function ol(P){Yn&&Yn(P)}),typeof self<"u"&&yd.setContext(self),this.setAnimationLoop=function(P){Yn=P,ze.setAnimationLoop(P),null===P?yd.stop():yd.start()},ze.addEventListener("sessionstart",_a),ze.addEventListener("sessionend",KV),this.render=function(P,G){if(void 0!==G&&!0!==G.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===y)return;if(!0===P.matrixWorldAutoUpdate&&P.updateMatrixWorld(),null===G.parent&&!0===G.matrixWorldAutoUpdate&&G.updateMatrixWorld(),!0===ze.enabled&&!0===ze.isPresenting&&(!0===ze.cameraAutoUpdate&&ze.updateCamera(G),G=ze.getCamera()),!0===P.isScene&&P.onBeforeRender(v,P,G,D),m=ct.get(P,b.length),m.init(G),b.push(m),Ye.multiplyMatrices(G.projectionMatrix,G.matrixWorldInverse),Gt.setFromProjectionMatrix(Ye),Ie=this.localClippingEnabled,ie=on.init(this.clippingPlanes,Ie),g=Ke.get(P,_.length),g.init(),_.push(g),!0===ze.enabled&&!0===ze.isPresenting){const He=v.xr.getDepthSensingMesh();null!==He&&C1(He,G,-1/0,v.sortObjects)}C1(P,G,0,v.sortObjects),g.finish(),!0===v.sortObjects&&g.sort(Y,ve),yt=!1===ze.enabled||!1===ze.isPresenting||!1===ze.hasDepthSensing(),yt&&at.addToRenderList(g,P),this.info.render.frame++,!0===ie&&on.beginShadows(),Ue.render(m.state.shadowsArray,P,G),!0===ie&&on.endShadows(),!0===this.info.autoReset&&this.info.reset();const oe=g.opaque,X=g.transmissive;if(m.setupLights(),G.isArrayCamera){const He=G.cameras;if(X.length>0)for(let tt=0,vt=He.length;tt<vt;tt++)QV(oe,X,P,He[tt]);yt&&at.render(P);for(let tt=0,vt=He.length;tt<vt;tt++){const bt=He[tt];ZV(g,P,bt,bt.viewport)}}else X.length>0&&QV(oe,X,P,G),yt&&at.render(P),ZV(g,P,G);null!==D&&(ut.updateMultisampleRenderTarget(D),ut.updateRenderTargetMipmap(D)),!0===P.isScene&&P.onAfterRender(v,P,G),vn.resetDefaultState(),L=-1,C=null,b.pop(),b.length>0?(m=b[b.length-1],!0===ie&&on.setGlobalState(v.clippingPlanes,m.state.camera)):m=null,_.pop(),g=_.length>0?_[_.length-1]:null},this.getActiveCubeFace=function(){return R},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(P,G,re){Qe.get(P.texture).__webglTexture=G,Qe.get(P.depthTexture).__webglTexture=re;const oe=Qe.get(P);oe.__hasExternalTextures=!0,oe.__autoAllocateDepthBuffer=void 0===re,oe.__autoAllocateDepthBuffer||!0===Pe.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(P,G){const re=Qe.get(P);re.__webglFramebuffer=G,re.__useDefaultFramebuffer=void 0===G},this.setRenderTarget=function(P,G=0,re=0){D=P,R=G,M=re;let oe=!0,X=null,He=!1,tt=!1;if(P){const bt=Qe.get(P);void 0!==bt.__useDefaultFramebuffer?(be.bindFramebuffer(F.FRAMEBUFFER,null),oe=!1):void 0===bt.__webglFramebuffer?ut.setupRenderTarget(P):bt.__hasExternalTextures&&ut.rebindTextures(P,Qe.get(P.texture).__webglTexture,Qe.get(P.depthTexture).__webglTexture);const zt=P.texture;(zt.isData3DTexture||zt.isDataArrayTexture||zt.isCompressedArrayTexture)&&(tt=!0);const Yt=Qe.get(P).__webglFramebuffer;P.isWebGLCubeRenderTarget?(X=Array.isArray(Yt[G])?Yt[G][re]:Yt[G],He=!0):X=P.samples>0&&!1===ut.useMultisampledRTT(P)?Qe.get(P).__webglMultisampledFramebuffer:Array.isArray(Yt)?Yt[re]:Yt,w.copy(P.viewport),U.copy(P.scissor),ee=P.scissorTest}else w.copy(Le).multiplyScalar(te).floor(),U.copy($e).multiplyScalar(te).floor(),ee=Mt;if(be.bindFramebuffer(F.FRAMEBUFFER,X)&&oe&&be.drawBuffers(P,X),be.viewport(w),be.scissor(U),be.setScissorTest(ee),He){const bt=Qe.get(P.texture);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+G,bt.__webglTexture,re)}else if(tt){const bt=Qe.get(P.texture);F.framebufferTextureLayer(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,bt.__webglTexture,re||0,G||0)}L=-1},this.readRenderTargetPixels=function(P,G,re,oe,X,He,tt){if(!P||!P.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let vt=Qe.get(P).__webglFramebuffer;if(P.isWebGLCubeRenderTarget&&void 0!==tt&&(vt=vt[tt]),vt){be.bindFramebuffer(F.FRAMEBUFFER,vt);try{const bt=P.texture,zt=bt.format,Yt=bt.type;if(!Ze.textureFormatReadable(zt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Yt))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");G>=0&&G<=P.width-oe&&re>=0&&re<=P.height-X&&F.readPixels(G,re,oe,X,nn.convert(zt),nn.convert(Yt),He)}finally{const bt=null!==D?Qe.get(D).__webglFramebuffer:null;be.bindFramebuffer(F.FRAMEBUFFER,bt)}}},this.readRenderTargetPixelsAsync=function(){var P=Se(function*(G,re,oe,X,He,tt,vt){if(!G||!G.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let bt=Qe.get(G).__webglFramebuffer;if(G.isWebGLCubeRenderTarget&&void 0!==vt&&(bt=bt[vt]),bt){be.bindFramebuffer(F.FRAMEBUFFER,bt);try{const zt=G.texture,Yt=zt.format,Ht=zt.type;if(!Ze.textureFormatReadable(Yt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(re>=0&&re<=G.width-X&&oe>=0&&oe<=G.height-He){const $n=F.createBuffer();F.bindBuffer(F.PIXEL_PACK_BUFFER,$n),F.bufferData(F.PIXEL_PACK_BUFFER,tt.byteLength,F.STREAM_READ),F.readPixels(re,oe,X,He,nn.convert(Yt),nn.convert(Ht),0),F.flush();const ci=F.fenceSync(F.SYNC_GPU_COMMANDS_COMPLETE,0);yield function fae(i,t,e){return new Promise(function(n,r){setTimeout(function s(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,e);break;default:n()}},e)})}(F,ci,4);try{F.bindBuffer(F.PIXEL_PACK_BUFFER,$n),F.getBufferSubData(F.PIXEL_PACK_BUFFER,0,tt)}finally{F.deleteBuffer($n),F.deleteSync(ci)}return tt}}finally{const zt=null!==D?Qe.get(D).__webglFramebuffer:null;be.bindFramebuffer(F.FRAMEBUFFER,zt)}}});return function(G,re,oe,X,He,tt,vt){return P.apply(this,arguments)}}(),this.copyFramebufferToTexture=function(P,G=null,re=0){!0!==P.isTexture&&(lh("WebGLRenderer: copyFramebufferToTexture function signature has changed."),G=arguments[0]||null,P=arguments[1]);const oe=Math.pow(2,-re),X=Math.floor(P.image.width*oe),He=Math.floor(P.image.height*oe),tt=null!==G?G.x:0,vt=null!==G?G.y:0;ut.setTexture2D(P,0),F.copyTexSubImage2D(F.TEXTURE_2D,re,0,0,tt,vt,X,He),be.unbindTexture()},this.copyTextureToTexture=function(P,G,re=null,oe=null,X=0){let He,tt,vt,bt,zt,Yt;!0!==P.isTexture&&(lh("WebGLRenderer: copyTextureToTexture function signature has changed."),oe=arguments[0]||null,P=arguments[1],G=arguments[2],X=arguments[3]||0,re=null),null!==re?(He=re.max.x-re.min.x,tt=re.max.y-re.min.y,vt=re.min.x,bt=re.min.y):(He=P.image.width,tt=P.image.height,vt=0,bt=0),null!==oe?(zt=oe.x,Yt=oe.y):(zt=0,Yt=0);const Ht=nn.convert(G.format),$n=nn.convert(G.type);ut.setTexture2D(G,0),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,G.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,G.unpackAlignment);const ci=F.getParameter(F.UNPACK_ROW_LENGTH),Ii=F.getParameter(F.UNPACK_IMAGE_HEIGHT),Zs=F.getParameter(F.UNPACK_SKIP_PIXELS),Xn=F.getParameter(F.UNPACK_SKIP_ROWS),Ct=F.getParameter(F.UNPACK_SKIP_IMAGES),Dr=P.isCompressedTexture?P.mipmaps[X]:P.image;F.pixelStorei(F.UNPACK_ROW_LENGTH,Dr.width),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Dr.height),F.pixelStorei(F.UNPACK_SKIP_PIXELS,vt),F.pixelStorei(F.UNPACK_SKIP_ROWS,bt),P.isDataTexture?F.texSubImage2D(F.TEXTURE_2D,X,zt,Yt,He,tt,Ht,$n,Dr.data):P.isCompressedTexture?F.compressedTexSubImage2D(F.TEXTURE_2D,X,zt,Yt,Dr.width,Dr.height,Ht,Dr.data):F.texSubImage2D(F.TEXTURE_2D,X,zt,Yt,He,tt,Ht,$n,Dr),F.pixelStorei(F.UNPACK_ROW_LENGTH,ci),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Ii),F.pixelStorei(F.UNPACK_SKIP_PIXELS,Zs),F.pixelStorei(F.UNPACK_SKIP_ROWS,Xn),F.pixelStorei(F.UNPACK_SKIP_IMAGES,Ct),0===X&&G.generateMipmaps&&F.generateMipmap(F.TEXTURE_2D),be.unbindTexture()},this.copyTextureToTexture3D=function(P,G,re=null,oe=null,X=0){let He,tt,vt,bt,zt,Yt,Ht,$n,ci;!0!==P.isTexture&&(lh("WebGLRenderer: copyTextureToTexture3D function signature has changed."),re=arguments[0]||null,oe=arguments[1]||null,P=arguments[2],G=arguments[3],X=arguments[4]||0);const Ii=P.isCompressedTexture?P.mipmaps[X]:P.image;null!==re?(He=re.max.x-re.min.x,tt=re.max.y-re.min.y,vt=re.max.z-re.min.z,bt=re.min.x,zt=re.min.y,Yt=re.min.z):(He=Ii.width,tt=Ii.height,vt=Ii.depth,bt=0,zt=0,Yt=0),null!==oe?(Ht=oe.x,$n=oe.y,ci=oe.z):(Ht=0,$n=0,ci=0);const Zs=nn.convert(G.format),Xn=nn.convert(G.type);let Ct;if(G.isData3DTexture)ut.setTexture3D(G,0),Ct=F.TEXTURE_3D;else{if(!G.isDataArrayTexture&&!G.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ut.setTexture2DArray(G,0),Ct=F.TEXTURE_2D_ARRAY}F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,G.flipY),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),F.pixelStorei(F.UNPACK_ALIGNMENT,G.unpackAlignment);const Dr=F.getParameter(F.UNPACK_ROW_LENGTH),qn=F.getParameter(F.UNPACK_IMAGE_HEIGHT),Go=F.getParameter(F.UNPACK_SKIP_PIXELS),Yh=F.getParameter(F.UNPACK_SKIP_ROWS),Qs=F.getParameter(F.UNPACK_SKIP_IMAGES);F.pixelStorei(F.UNPACK_ROW_LENGTH,Ii.width),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,Ii.height),F.pixelStorei(F.UNPACK_SKIP_PIXELS,bt),F.pixelStorei(F.UNPACK_SKIP_ROWS,zt),F.pixelStorei(F.UNPACK_SKIP_IMAGES,Yt),P.isDataTexture||P.isData3DTexture?F.texSubImage3D(Ct,X,Ht,$n,ci,He,tt,vt,Zs,Xn,Ii.data):G.isCompressedArrayTexture?F.compressedTexSubImage3D(Ct,X,Ht,$n,ci,He,tt,vt,Zs,Ii.data):F.texSubImage3D(Ct,X,Ht,$n,ci,He,tt,vt,Zs,Xn,Ii),F.pixelStorei(F.UNPACK_ROW_LENGTH,Dr),F.pixelStorei(F.UNPACK_IMAGE_HEIGHT,qn),F.pixelStorei(F.UNPACK_SKIP_PIXELS,Go),F.pixelStorei(F.UNPACK_SKIP_ROWS,Yh),F.pixelStorei(F.UNPACK_SKIP_IMAGES,Qs),0===X&&G.generateMipmaps&&F.generateMipmap(Ct),be.unbindTexture()},this.initRenderTarget=function(P){void 0===Qe.get(P).__webglFramebuffer&&ut.setupRenderTarget(P)},this.initTexture=function(P){P.isCubeTexture?ut.setTextureCube(P,0):P.isData3DTexture?ut.setTexture3D(P,0):P.isDataArrayTexture||P.isCompressedArrayTexture?ut.setTexture2DArray(P,0):ut.setTexture2D(P,0),be.unbindTexture()},this.resetState=function(){R=0,M=0,D=null,be.reset(),vn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ya}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorSpace=t===CS?"display-p3":"srgb",e.unpackColorSpace=Fn.workingColorSpace===Ov?"display-p3":"srgb"}}class im extends sr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ka,this.environmentIntensity=1,this.environmentRotation=new Ka,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}class sE{constructor(t,e){this.isInterleavedBuffer=!0,this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Ws()}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}get updateRange(){return lh("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,e,n){t*=this.stride,n*=e.stride;for(let r=0,s=this.stride;r<s;r++)this.array[t+r]=e.array[n+r];return this}set(t,e=0){return this.array.set(t,e),this}clone(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ws()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(e,this.stride);return n.setUsage(this.usage),n}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Ws()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ss=new I;class td{constructor(t,e,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let e=0,n=this.data.count;e<n;e++)ss.fromBufferAttribute(this,e),ss.applyMatrix4(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)ss.fromBufferAttribute(this,e),ss.applyNormalMatrix(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)ss.fromBufferAttribute(this,e),ss.transformDirection(t),this.setXYZ(e,ss.x,ss.y,ss.z);return this}getComponent(t,e){let n=this.array[t*this.data.stride+this.offset+e];return this.normalized&&(n=es(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=rn(n,this.array)),this.data.array[t*this.data.stride+this.offset+e]=n,this}setX(t,e){return this.normalized&&(e=rn(e,this.array)),this.data.array[t*this.data.stride+this.offset]=e,this}setY(t,e){return this.normalized&&(e=rn(e,this.array)),this.data.array[t*this.data.stride+this.offset+1]=e,this}setZ(t,e){return this.normalized&&(e=rn(e,this.array)),this.data.array[t*this.data.stride+this.offset+2]=e,this}setW(t,e){return this.normalized&&(e=rn(e,this.array)),this.data.array[t*this.data.stride+this.offset+3]=e,this}getX(t){let e=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(e=es(e,this.array)),e}getY(t){let e=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(e=es(e,this.array)),e}getZ(t){let e=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(e=es(e,this.array)),e}getW(t){let e=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(e=es(e,this.array)),e}setXY(t,e,n){return t=t*this.data.stride+this.offset,this.normalized&&(e=rn(e,this.array),n=rn(n,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this}setXYZ(t,e,n,r){return t=t*this.data.stride+this.offset,this.normalized&&(e=rn(e,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}setXYZW(t,e,n,r,s){return t=t*this.data.stride+this.offset,this.normalized&&(e=rn(e,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=s,this}clone(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return new gi(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new td(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)e.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const R3=new I,P3=new Kn,O3=new Kn,Wue=new I,F3=new Et,mb=new I,aE=new zr,L3=new Et,lE=new Zf;class N3 extends sn{constructor(t,e){super(t,e),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=aB,this.bindMatrix=new Et,this.bindMatrixInverse=new Et,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;null===this.boundingBox&&(this.boundingBox=new Vr),this.boundingBox.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,mb),this.boundingBox.expandByPoint(mb)}computeBoundingSphere(){const t=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new zr),this.boundingSphere.makeEmpty();const e=t.getAttribute("position");for(let n=0;n<e.count;n++)this.getVertexPosition(n,mb),this.boundingSphere.expandByPoint(mb)}copy(t,e){return super.copy(t,e),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,e){const r=this.matrixWorld;void 0!==this.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),aE.copy(this.boundingSphere),aE.applyMatrix4(r),!1!==t.ray.intersectsSphere(aE)&&(L3.copy(r).invert(),lE.copy(t.ray).applyMatrix4(L3),(null===this.boundingBox||!1!==lE.intersectsBox(this.boundingBox))&&this._computeIntersections(t,e,lE)))}getVertexPosition(t,e){return super.getVertexPosition(t,e),this.applyBoneTransform(t,e),e}bind(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new Kn,e=this.geometry.attributes.skinWeight;for(let n=0,r=e.count;n<r;n++){t.fromBufferAttribute(e,n);const s=1/t.manhattanLength();s!==1/0?t.multiplyScalar(s):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===aB?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,e){const n=this.skeleton,r=this.geometry;P3.fromBufferAttribute(r.attributes.skinIndex,t),O3.fromBufferAttribute(r.attributes.skinWeight,t),R3.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let s=0;s<4;s++){const o=O3.getComponent(s);if(0!==o){const a=P3.getComponent(s);F3.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(Wue.copy(R3).applyMatrix4(F3),o)}}return e.applyMatrix4(this.bindMatrixInverse)}}class cE extends sr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class tl extends Cs{constructor(t=null,e=1,n=1,r,s,o,a,l,c=Yi,d=Yi,u,h){super(null,o,a,l,c,d,r,s,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const B3=new Et,Yue=new Et;class gb{constructor(t=[],e=[]){this.uuid=Ws(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Et)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const n=new Et;this.bones[t]&&n.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&n.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const n=this.bones[t];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=t.length;s<o;s++)B3.multiplyMatrices(t[s]?t[s].matrixWorld:Yue,e[s]),B3.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new gb(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(4*this.bones.length);t=4*Math.ceil(t/4),t=Math.max(t,4);const e=new Float32Array(t*t*4);e.set(this.boneMatrices);const n=new tl(e,t,t,Ms,js);return n.needsUpdate=!0,this.boneMatrices=e,this.boneTexture=n,this}getBoneByName(t){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];if(r.name===t)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,e){this.uuid=t.uuid;for(let n=0,r=t.bones.length;n<r;n++){const s=t.bones[n];let o=e[s];void 0===o&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new cE),this.bones.push(o),this.boneInverses.push((new Et).fromArray(t.boneInverses[n]))}return this.init(),this}toJSON(){const t={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let r=0,s=e.length;r<s;r++)t.bones.push(e[r].uuid),t.boneInverses.push(n[r].toArray());return t}}class Oh extends gi{constructor(t,e,n,r=1){super(t,e,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Fh=new Et,U3=new Et,_b=[],V3=new Vr,Xue=new Et,am=new sn,lm=new zr;class z3 extends sn{constructor(t,e,n){super(t,e),this.isInstancedMesh=!0,this.instanceMatrix=new Oh(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Xue)}computeBoundingBox(){const t=this.geometry,e=this.count;null===this.boundingBox&&(this.boundingBox=new Vr),null===t.boundingBox&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Fh),V3.copy(t.boundingBox).applyMatrix4(Fh),this.boundingBox.union(V3)}computeBoundingSphere(){const t=this.geometry,e=this.count;null===this.boundingSphere&&(this.boundingSphere=new zr),null===t.boundingSphere&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<e;n++)this.getMatrixAt(n,Fh),lm.copy(t.boundingSphere).applyMatrix4(Fh),this.boundingSphere.union(lm)}copy(t,e){return super.copy(t,e),this.instanceMatrix.copy(t.instanceMatrix),null!==t.morphTexture&&(this.morphTexture=t.morphTexture.clone()),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,e){e.fromArray(this.instanceColor.array,3*t)}getMatrixAt(t,e){e.fromArray(this.instanceMatrix.array,16*t)}getMorphAt(t,e){const n=e.morphTargetInfluences,r=this.morphTexture.source.data.data,o=t*(n.length+1)+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(t,e){const n=this.matrixWorld,r=this.count;if(am.geometry=this.geometry,am.material=this.material,void 0!==am.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),lm.copy(this.boundingSphere),lm.applyMatrix4(n),!1!==t.ray.intersectsSphere(lm)))for(let s=0;s<r;s++){this.getMatrixAt(s,Fh),U3.multiplyMatrices(n,Fh),am.matrixWorld=U3,am.raycast(t,_b);for(let o=0,a=_b.length;o<a;o++){const l=_b[o];l.instanceId=s,l.object=this,e.push(l)}_b.length=0}}setColorAt(t,e){null===this.instanceColor&&(this.instanceColor=new Oh(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),e.toArray(this.instanceColor.array,3*t)}setMatrixAt(t,e){e.toArray(this.instanceMatrix.array,16*t)}setMorphAt(t,e){const n=e.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new tl(new Float32Array(r*this.count),r,this.count,WC,js));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<n.length;c++)o+=n[c];const l=r*t;s[l]=this.geometry.morphTargetsRelative?1:1-o,s.set(n,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}class fr extends ns{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ge(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const yb=new I,xb=new I,G3=new Et,dm=new Zf,wb=new zr,pE=new I,j3=new I;class id extends sr{constructor(t=new Jt,e=new fr){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[0];for(let r=1,s=e.count;r<s;r++)yb.fromBufferAttribute(e,r-1),xb.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=yb.distanceTo(xb);t.setAttribute("lineDistance",new ot(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),wb.copy(n.boundingSphere),wb.applyMatrix4(r),wb.radius+=s,!1===t.ray.intersectsSphere(wb))return;G3.copy(r).invert(),dm.copy(t.ray).applyMatrix4(G3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,d=n.index,h=n.attributes.position;if(null!==d){const p=Math.max(0,o.start),f=Math.min(d.count,o.start+o.count);for(let g=p,m=f-1;g<m;g+=c){const _=d.getX(g),b=d.getX(g+1),v=Mb(this,t,dm,l,_,b);v&&e.push(v)}if(this.isLineLoop){const g=d.getX(f-1),m=d.getX(p),_=Mb(this,t,dm,l,g,m);_&&e.push(_)}}else{const p=Math.max(0,o.start),f=Math.min(h.count,o.start+o.count);for(let g=p,m=f-1;g<m;g+=c){const _=Mb(this,t,dm,l,g,g+1);_&&e.push(_)}if(this.isLineLoop){const g=Mb(this,t,dm,l,f-1,p);g&&e.push(g)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Mb(i,t,e,n,r,s){const o=i.geometry.attributes.position;if(yb.fromBufferAttribute(o,r),xb.fromBufferAttribute(o,s),e.distanceSqToSegment(yb,xb,pE,j3)>n)return;pE.applyMatrix4(i.matrixWorld);const l=t.ray.origin.distanceTo(pE);return l<t.near||l>t.far?void 0:{distance:l,point:j3.clone().applyMatrix4(i.matrixWorld),index:r,face:null,faceIndex:null,object:i}}const W3=new I,Y3=new I;class zl extends id{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,n=[];for(let r=0,s=e.count;r<s;r+=2)W3.fromBufferAttribute(e,r),Y3.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+W3.distanceTo(Y3);t.setAttribute("lineDistance",new ot(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class X3 extends id{constructor(t,e){super(t,e),this.isLineLoop=!0,this.type="LineLoop"}}class rd extends ns{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ge(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const q3=new Et,fE=new Zf,Cb=new zr,Sb=new I;class um extends sr{constructor(t=new Jt,e=new rd){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,e){const n=this.geometry,r=this.matrixWorld,s=t.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Cb.copy(n.boundingSphere),Cb.applyMatrix4(r),Cb.radius+=s,!1===t.ray.intersectsSphere(Cb))return;q3.copy(r).invert(),fE.copy(t.ray).applyMatrix4(q3);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,u=n.attributes.position;if(null!==c)for(let f=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);f<g;f++){const m=c.getX(f);Sb.fromBufferAttribute(u,m),K3(Sb,m,l,r,t,e,this)}else for(let f=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);f<g;f++)Sb.fromBufferAttribute(u,f),K3(Sb,f,l,r,t,e,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){const r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function K3(i,t,e,n,r,s,o){const a=fE.distanceSqToPoint(i);if(a<e){const l=new I;fE.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:o})}}class pa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)}getPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}getSpacedPoints(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}getLength(){const t=this.getLengths();return t[t.length-1]}getLengths(t=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,r=this.getPoint(0),s=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),s+=n.distanceTo(r),e.push(s),r=n;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(t,e){const n=this.getLengths();let r=0;const s=n.length;let o;o=e||t*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(t,e){let r=t-1e-4,s=t+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=e||(o.isVector2?new _e:new I);return l.copy(a).sub(o).normalize(),l}getTangentAt(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)}computeFrenetFrames(t,e){const n=new I,r=[],s=[],o=[],a=new I,l=new Et;for(let p=0;p<=t;p++)r[p]=this.getTangentAt(p/t,new I);s[0]=new I,o[0]=new I;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let p=1;p<=t;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(r[p-1],r[p]),a.length()>Number.EPSILON){a.normalize();const f=Math.acos(Ti(r[p-1].dot(r[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,f))}o[p].crossVectors(r[p],s[p])}if(!0===e){let p=Math.acos(Ti(s[0].dot(s[t]),-1,1));p/=t,r[0].dot(a.crossVectors(s[0],s[t]))>0&&(p=-p);for(let f=1;f<=t;f++)s[f].applyMatrix4(l.makeRotationAxis(r[f],p*f)),o[f].crossVectors(r[f],s[f])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}toJSON(){const t={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t}fromJSON(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}class mE extends pa{constructor(t=0,e=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=t,this.aY=e,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(t,e=new _e){const n=e,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+t*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*d-p*u+this.aX,c=h*u+p*d+this.aY}return n.set(l,c)}copy(t){return super.copy(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}toJSON(){const t=super.toJSON();return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t}fromJSON(t){return super.fromJSON(t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}function gE(){let i=0,t=0,e=0,n=0;function r(s,o,a,l){i=s,t=a,e=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,u){let h=(o-s)/c-(a-s)/(c+d)+(a-o)/d,p=(a-o)/d-(l-o)/(d+u)+(l-a)/u;h*=d,p*=d,r(o,a,h,p)},calc:function(s){const o=s*s;return i+t*s+e*o+n*(o*s)}}}const Eb=new I,_E=new gE,vE=new gE,bE=new gE;function Z3(i,t,e,n,r){const s=.5*(n-t),o=.5*(r-e),a=i*i;return(2*e-2*n+s+o)*(i*a)+(-3*e+3*n-2*s-o)*a+s*i+e}function hm(i,t,e,n){return function ohe(i,t){const e=1-i;return e*e*t}(i,t)+function ahe(i,t){return 2*(1-i)*i*t}(i,e)+function lhe(i,t){return i*i*t}(i,n)}function pm(i,t,e,n,r){return function che(i,t){const e=1-i;return e*e*e*t}(i,t)+function dhe(i,t){const e=1-i;return 3*e*e*i*t}(i,e)+function uhe(i,t){return 3*(1-i)*i*i*t}(i,n)+function hhe(i,t){return i*i*i*t}(i,r)}class Q3 extends pa{constructor(t=new _e,e=new _e,n=new _e,r=new _e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new _e){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(pm(t,r.x,s.x,o.x,a.x),pm(t,r.y,s.y,o.y,a.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}class J3 extends pa{constructor(t=new _e,e=new _e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=t,this.v2=e}getPoint(t,e=new _e){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new _e){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class eU extends pa{constructor(t=new _e,e=new _e,n=new _e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new _e){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(hm(t,r.x,s.x,o.x),hm(t,r.y,s.y,o.y)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}class nU extends pa{constructor(t=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=t}getPoint(t,e=new _e){const n=e,r=this.points,s=(r.length-1)*t,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(Z3(a,l.x,c.x,d.x,u.x),Z3(a,l.y,c.y,d.y,u.y)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new _e).fromArray(r))}return this}}var Ab=Object.freeze({__proto__:null,ArcCurve:class rhe extends mE{constructor(t,e,n,r,s,o){super(t,e,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class she extends pa{constructor(t=[],e=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=r}getPoint(t,e=new I){const n=e,r=this.points,s=r.length,o=(s-(this.closed?0:1))*t;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(Eb.subVectors(r[0],r[1]).add(r[0]),c=Eb);const u=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(Eb.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=Eb),"centripetal"===this.curveType||"chordal"===this.curveType){const p="chordal"===this.curveType?.5:.25;let f=Math.pow(c.distanceToSquared(u),p),g=Math.pow(u.distanceToSquared(h),p),m=Math.pow(h.distanceToSquared(d),p);g<1e-4&&(g=1),f<1e-4&&(f=g),m<1e-4&&(m=g),_E.initNonuniformCatmullRom(c.x,u.x,h.x,d.x,f,g,m),vE.initNonuniformCatmullRom(c.y,u.y,h.y,d.y,f,g,m),bE.initNonuniformCatmullRom(c.z,u.z,h.z,d.z,f,g,m)}else"catmullrom"===this.curveType&&(_E.initCatmullRom(c.x,u.x,h.x,d.x,this.tension),vE.initCatmullRom(c.y,u.y,h.y,d.y,this.tension),bE.initCatmullRom(c.z,u.z,h.z,d.z,this.tension));return n.set(_E.calc(l),vE.calc(l),bE.calc(l)),n}copy(t){super.copy(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++)this.points.push(t.points[e].clone());return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}toJSON(){const t=super.toJSON();t.points=[];for(let e=0,n=this.points.length;e<n;e++)t.points.push(this.points[e].toArray());return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t}fromJSON(t){super.fromJSON(t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const r=t.points[e];this.points.push((new I).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}},CubicBezierCurve:Q3,CubicBezierCurve3:class phe extends pa{constructor(t=new I,e=new I,n=new I,r=new I){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=r}getPoint(t,e=new I){const n=e,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(pm(t,r.x,s.x,o.x,a.x),pm(t,r.y,s.y,o.y,a.y),pm(t,r.z,s.z,o.z,a.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}},EllipseCurve:mE,LineCurve:J3,LineCurve3:class fhe extends pa{constructor(t=new I,e=new I){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=t,this.v2=e}getPoint(t,e=new I){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}getPointAt(t,e){return this.getPoint(t,e)}getTangent(t,e=new I){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(t,e){return this.getTangent(t,e)}copy(t){return super.copy(t),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},QuadraticBezierCurve:eU,QuadraticBezierCurve3:class tU extends pa{constructor(t=new I,e=new I,n=new I){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}getPoint(t,e=new I){const n=e,r=this.v0,s=this.v1,o=this.v2;return n.set(hm(t,r.x,s.x,o.x),hm(t,r.y,s.y,o.y),hm(t,r.z,s.z,o.z)),n}copy(t){return super.copy(t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this}toJSON(){const t=super.toJSON();return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t}fromJSON(t){return super.fromJSON(t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}},SplineCurve:nU});class mhe extends pa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(t){this.curves.push(t)}closePath(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new Ab[!0===t.isVector2?"LineCurve":"LineCurve3"](e,t)),this}getPoint(t,e){const n=t*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,e)}s++}return null}getLength(){const t=this.getCurveLengths();return t[t.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}getSpacedPoints(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}getPoints(t=12){const e=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*t:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?t*o.points.length:t);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(e.push(d),n=d)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(t){super.copy(t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++)this.curves.push(t.curves[e].clone());return this.autoClose=t.autoClose,this}toJSON(){const t=super.toJSON();t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++)t.curves.push(this.curves[e].toJSON());return t}fromJSON(t){super.fromJSON(t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const r=t.curves[e];this.curves.push((new Ab[r.type]).fromJSON(r))}return this}}class Db extends mhe{constructor(t){super(),this.type="Path",this.currentPoint=new _e,t&&this.setFromPoints(t)}setFromPoints(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}moveTo(t,e){return this.currentPoint.set(t,e),this}lineTo(t,e){const n=new J3(this.currentPoint.clone(),new _e(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}quadraticCurveTo(t,e,n,r){const s=new eU(this.currentPoint.clone(),new _e(t,e),new _e(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(t,e,n,r,s,o){const a=new Q3(this.currentPoint.clone(),new _e(t,e),new _e(n,r),new _e(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(t){const e=[this.currentPoint.clone()].concat(t),n=new nU(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}arc(t,e,n,r,s,o){return this.absarc(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o),this}absarc(t,e,n,r,s,o){return this.absellipse(t,e,n,n,r,s,o),this}ellipse(t,e,n,r,s,o,a,l){return this.absellipse(t+this.currentPoint.x,e+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(t,e,n,r,s,o,a,l){const c=new mE(t,e,n,r,s,o,a,l);if(this.curves.length>0){const u=c.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(t){return super.copy(t),this.currentPoint.copy(t.currentPoint),this}toJSON(){const t=super.toJSON();return t.currentPoint=this.currentPoint.toArray(),t}fromJSON(t){return super.fromJSON(t),this.currentPoint.fromArray(t.currentPoint),this}}class Tb extends Jt{constructor(t=[new _e(0,-.5),new _e(.5,0),new _e(0,.5)],e=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e),r=Ti(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/e,u=new I,h=new _e,p=new I,f=new I,g=new I;let m=0,_=0;for(let b=0;b<=t.length-1;b++)switch(b){case 0:m=t[b+1].x-t[b].x,_=t[b+1].y-t[b].y,p.x=1*_,p.y=-m,p.z=0*_,g.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case t.length-1:l.push(g.x,g.y,g.z);break;default:m=t[b+1].x-t[b].x,_=t[b+1].y-t[b].y,p.x=1*_,p.y=-m,p.z=0*_,f.copy(p),p.x+=g.x,p.y+=g.y,p.z+=g.z,p.normalize(),l.push(p.x,p.y,p.z),g.copy(f)}for(let b=0;b<=e;b++){const v=n+b*d*r,y=Math.sin(v),R=Math.cos(v);for(let M=0;M<=t.length-1;M++)u.x=t[M].x*y,u.y=t[M].y,u.z=t[M].x*R,o.push(u.x,u.y,u.z),h.x=b/e,h.y=M/(t.length-1),a.push(h.x,h.y),c.push(l[3*M+0]*y,l[3*M+1],l[3*M+0]*R)}for(let b=0;b<e;b++)for(let v=0;v<t.length-1;v++){const y=v+b*t.length,M=y+t.length,D=y+t.length+1,L=y+1;s.push(y,M,L),s.push(D,L,M)}this.setIndex(s),this.setAttribute("position",new ot(o,3)),this.setAttribute("uv",new ot(a,2)),this.setAttribute("normal",new ot(c,3))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Tb(t.points,t.segments,t.phiStart,t.phiLength)}}class kb extends Tb{constructor(t=1,e=1,n=4,r=8){const s=new Db;s.absarc(0,-e/2,t,1.5*Math.PI,0),s.absarc(0,e/2,t,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:t,length:e,capSegments:n,radialSegments:r}}static fromJSON(t){return new kb(t.radius,t.length,t.capSegments,t.radialSegments)}}class Lh extends Jt{constructor(t=1,e=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],u=[],h=[],p=[];let f=0;const g=[],m=n/2;let _=0;function v(y){const R=f,M=new _e,D=new I;let L=0;const C=!0===y?t:e,w=!0===y?1:-1;for(let ee=1;ee<=r;ee++)u.push(0,m*w,0),h.push(0,w,0),p.push(.5,.5),f++;const U=f;for(let ee=0;ee<=r;ee++){const ne=ee/r*l+a,fe=Math.cos(ne),V=Math.sin(ne);D.x=C*V,D.y=m*w,D.z=C*fe,u.push(D.x,D.y,D.z),h.push(0,w,0),M.x=.5*fe+.5,M.y=.5*V*w+.5,p.push(M.x,M.y),f++}for(let ee=0;ee<r;ee++){const q=R+ee,ne=U+ee;!0===y?d.push(ne,ne+1,q):d.push(ne+1,ne,q),L+=3}c.addGroup(_,L,!0===y?1:2),_+=L}(function b(){const y=new I,R=new I;let M=0;const D=(e-t)/n;for(let L=0;L<=s;L++){const C=[],w=L/s,U=w*(e-t)+t;for(let ee=0;ee<=r;ee++){const q=ee/r,ne=q*l+a,fe=Math.sin(ne),V=Math.cos(ne);R.x=U*fe,R.y=-w*n+m,R.z=U*V,u.push(R.x,R.y,R.z),y.set(fe,D,V).normalize(),h.push(y.x,y.y,y.z),p.push(q,1-w),C.push(f++)}g.push(C)}for(let L=0;L<r;L++)for(let C=0;C<s;C++){const U=g[C+1][L],ee=g[C+1][L+1],q=g[C][L+1];d.push(g[C][L],U,q),d.push(U,ee,q),M+=6}c.addGroup(_,M,0),_+=M})(),!1===o&&(t>0&&v(!0),e>0&&v(!1)),this.setIndex(d),this.setAttribute("position",new ot(u,3)),this.setAttribute("normal",new ot(h,3)),this.setAttribute("uv",new ot(p,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Lh(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}class Ib extends Lh{constructor(t=1,e=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,t,e,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(t){return new Ib(t.radius,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}}const Rb=new I,Pb=new I,wE=new I,Ob=new ho;class iU extends Jt{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},null!==t){const r=Math.pow(10,4),s=Math.cos($c*e),o=t.getIndex(),a=t.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],u=new Array(3),h={},p=[];for(let f=0;f<l;f+=3){o?(c[0]=o.getX(f),c[1]=o.getX(f+1),c[2]=o.getX(f+2)):(c[0]=f,c[1]=f+1,c[2]=f+2);const{a:g,b:m,c:_}=Ob;if(g.fromBufferAttribute(a,c[0]),m.fromBufferAttribute(a,c[1]),_.fromBufferAttribute(a,c[2]),Ob.getNormal(wE),u[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,u[1]=`${Math.round(m.x*r)},${Math.round(m.y*r)},${Math.round(m.z*r)}`,u[2]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let b=0;b<3;b++){const v=(b+1)%3,y=u[b],R=u[v],M=Ob[d[b]],D=Ob[d[v]],L=`${y}_${R}`,C=`${R}_${y}`;C in h&&h[C]?(wE.dot(h[C].normal)<=s&&(p.push(M.x,M.y,M.z),p.push(D.x,D.y,D.z)),h[C]=null):L in h||(h[L]={index0:c[b],index1:c[v],normal:wE.clone()})}}for(const f in h)if(h[f]){const{index0:g,index1:m}=h[f];Rb.fromBufferAttribute(a,g),Pb.fromBufferAttribute(a,m),p.push(Rb.x,Rb.y,Rb.z),p.push(Pb.x,Pb.y,Pb.z)}this.setAttribute("position",new ot(p,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}}class _m extends Jt{constructor(t=1,e=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],u=new I,h=new I,p=[],f=[],g=[],m=[];for(let _=0;_<=n;_++){const b=[],v=_/n;let y=0;0===_&&0===o?y=.5/e:_===n&&l===Math.PI&&(y=-.5/e);for(let R=0;R<=e;R++){const M=R/e;u.x=-t*Math.cos(r+M*s)*Math.sin(o+v*a),u.y=t*Math.cos(o+v*a),u.z=t*Math.sin(r+M*s)*Math.sin(o+v*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),g.push(h.x,h.y,h.z),m.push(M+y,1-v),b.push(c++)}d.push(b)}for(let _=0;_<n;_++)for(let b=0;b<e;b++){const y=d[_][b],R=d[_+1][b],M=d[_+1][b+1];(0!==_||o>0)&&p.push(d[_][b+1],y,M),(_!==n-1||l<Math.PI)&&p.push(y,R,M)}this.setIndex(p),this.setAttribute("position",new ot(f,3)),this.setAttribute("normal",new ot(g,3)),this.setAttribute("uv",new ot(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new _m(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}}class Uh extends ns{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ge(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class $o extends Uh{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ge(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ge(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ge(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}class vm extends ns{constructor(t){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ge(16777215),this.specular=new Ge(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.combine=Cv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class hU extends ns{constructor(t){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ge(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ge(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hc,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ka,this.combine=Cv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}function ad(i,t,e){return!i||!e&&i.constructor===t?i:"number"==typeof t.BYTES_PER_ELEMENT?new t(i):Array.prototype.slice.call(i)}function fU(i){const e=i.length,n=new Array(e);for(let r=0;r!==e;++r)n[r]=r;return n.sort(function t(r,s){return i[r]-i[s]}),n}function PE(i,t,e){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=e[s]*t;for(let l=0;l!==t;++l)r[o++]=i[a+l]}return r}function OE(i,t,e,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let o=s[n];if(void 0!==o)if(Array.isArray(o))do{o=s[n],void 0!==o&&(t.push(s.time),e.push.apply(e,o)),s=i[r++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[n],void 0!==o&&(t.push(s.time),o.toArray(e,e.length)),s=i[r++]}while(void 0!==s);else do{o=s[n],void 0!==o&&(t.push(s.time),e.push(o)),s=i[r++]}while(void 0!==s)}class bm{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let n=this._cachedIndex,r=e[n],s=e[n-1];e:{t:{let o;n:{i:if(!(t<r)){for(let a=n+2;;){if(void 0===r){if(t<s)break i;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=e[++n],t<r)break t}o=e.length;break n}if(t>=s)break e;{const a=e[1];t<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=e[--n-1],t>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;t<e[a]?o=a:n=a+1}if(r=e[n],s=e[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r;for(let o=0;o!==r;++o)e[o]=n[s+o];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jhe extends bm{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,n){const r=this.parameterPositions;let s=t-2,o=t+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=t,a=2*e-n;break;case 2402:s=r.length-2,a=e+r[s]-r[s+1];break;default:s=t,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=t,l=2*n-e;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=t-1,l=e}const c=.5*(n-e),d=this.valueSize;this._weightPrev=c/(e-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(n-e)/(r-e),g=f*f,m=g*f,_=-h*m+2*h*g-h*f,b=(1+h)*m+(-1.5-2*h)*g+(-.5+h)*f+1,v=(-1-p)*m+(1.5+p)*g+.5*f,y=p*m-p*g;for(let R=0;R!==a;++R)s[R]=_*o[d+R]+b*o[c+R]+v*o[l+R]+y*o[u+R];return s}}class mU extends bm{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=t*a,c=l-a,d=(n-e)/(r-e),u=1-d;for(let h=0;h!==a;++h)s[h]=o[c+h]*u+o[l+h]*d;return s}}class Whe extends bm{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class fa{constructor(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ad(e,this.TimeBufferType),this.values=ad(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:ad(t.times,Array),values:ad(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new Whe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new mU(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new jhe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case Gf:e=this.InterpolantFactoryMethodDiscrete;break;case jf:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Gf;case this.InterpolantFactoryMethodLinear:return jf;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<t;)++s;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),t=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),t=!1;break}o=l}if(void 0!==r&&function pU(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}return t}optimize(){const t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=2302===this.getInterpolation(),s=t.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=t[a];if(c!==t[a+1]&&(1!==a||c!==t[0]))if(r)l=!0;else{const u=a*n,h=u-n,p=u+n;for(let f=0;f!==n;++f){const g=e[u+f];if(g!==e[h+f]||g!==e[p+f]){l=!0;break}}}if(l){if(a!==o){t[o]=t[a];const u=a*n,h=o*n;for(let p=0;p!==n;++p)e[h+p]=e[u+p]}++o}}if(s>0){t[o]=t[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)e[l+c]=e[a+c];++o}return o!==t.length?(this.times=t.slice(0,o),this.values=e.slice(0,o*n)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),r=new(0,this.constructor)(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}}fa.prototype.TimeBufferType=Float32Array,fa.prototype.ValueBufferType=Float32Array,fa.prototype.DefaultInterpolation=jf;class Vh extends fa{constructor(t,e,n){super(t,e,n)}}Vh.prototype.ValueTypeName="bool",Vh.prototype.ValueBufferType=Array,Vh.prototype.DefaultInterpolation=Gf,Vh.prototype.InterpolantFactoryMethodLinear=void 0,Vh.prototype.InterpolantFactoryMethodSmooth=void 0;class gU extends fa{}gU.prototype.ValueTypeName="color";class zh extends fa{}zh.prototype.ValueTypeName="number";class Yhe extends bm{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-e)/(r-e);let c=t*a;for(let d=c+a;c!==d;c+=4)ts.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Hh extends fa{InterpolantFactoryMethodLinear(t){return new Yhe(this.times,this.values,this.getValueSize(),t)}}Hh.prototype.ValueTypeName="quaternion",Hh.prototype.InterpolantFactoryMethodSmooth=void 0;class $h extends fa{constructor(t,e,n){super(t,e,n)}}$h.prototype.ValueTypeName="string",$h.prototype.ValueBufferType=Array,$h.prototype.DefaultInterpolation=Gf,$h.prototype.InterpolantFactoryMethodLinear=void 0,$h.prototype.InterpolantFactoryMethodSmooth=void 0;class Gh extends fa{}Gh.prototype.ValueTypeName="vector";class ym{constructor(t="",e=-1,n=[],r=2500){this.name=t,this.tracks=n,this.duration=e,this.blendMode=r,this.uuid=Ws(),this.duration<0&&this.resetDuration()}static parse(t){const e=[],n=t.tracks,r=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(qhe(n[o]).scale(r));const s=new this(t.name,t.duration,e,t.blendMode);return s.uuid=t.uuid,s}static toJSON(t){const e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let s=0,o=n.length;s!==o;++s)e.push(fa.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(t,e,n,r){const s=e.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=fU(l);l=PE(l,1,d),c=PE(c,1,d),!r&&0===l[0]&&(l.push(s),c.push(c[0])),o.push(new zh(".morphTargetInfluences["+e[a].name+"]",l,c).scale(1/n))}return new this(t,-1,o)}static findByName(t,e){let n=t;Array.isArray(t)||(n=t.geometry&&t.geometry.animations||t.animations);for(let r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null}static CreateClipsFromMorphTargetSequences(t,e,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=t.length;a<l;a++){const c=t[a],d=c.name.match(s);if(d&&d.length>1){const u=d[1];let h=r[u];h||(r[u]=h=[]),h.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],e,n));return o}static parseAnimation(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(u,h,p,f,g){if(0!==p.length){const m=[],_=[];OE(p,m,_,f),0!==m.length&&g.push(new u(h,m,_))}},r=[],s=t.name||"default",o=t.fps||30,a=t.blendMode;let l=t.length||-1;const c=t.hierarchy||[];for(let u=0;u<c.length;u++){const h=c[u].keys;if(h&&0!==h.length)if(h[0].morphTargets){const p={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let g=0;g<h[f].morphTargets.length;g++)p[h[f].morphTargets[g]]=-1;for(const g in p){const m=[],_=[];for(let b=0;b!==h[f].morphTargets.length;++b){const v=h[f];m.push(v.time),_.push(v.morphTarget===g?1:0)}r.push(new zh(".morphTargetInfluence["+g+"]",m,_))}l=p.length*o}else{const p=".bones["+e[u].name+"]";n(Gh,p+".position",h,"pos",r),n(Hh,p+".quaternion",h,"rot",r),n(Gh,p+".scale",h,"scl",r)}}return 0===r.length?null:new this(s,l,r,a)}resetDuration(){let e=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];e=Math.max(e,s.times[s.times.length-1])}return this.duration=e,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function qhe(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function Xhe(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zh;case"vector":case"vector2":case"vector3":case"vector4":return Gh;case"color":return gU;case"quaternion":return Hh;case"bool":case"boolean":return Vh;case"string":return $h}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const e=[],n=[];OE(i.keys,e,n,"value"),i.times=e,i.values=n}return void 0!==t.parse?t.parse(i):new t(i.name,i.times,i.values,i.interpolation)}const Hl={enabled:!1,files:{},add:function(i,t){!1!==this.enabled&&(this.files[i]=t)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class _U{constructor(t,e,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,u){return c.push(d,u),this},this.removeHandler=function(d){const u=c.indexOf(d);return-1!==u&&c.splice(u,2),this},this.getHandler=function(d){for(let u=0,h=c.length;u<h;u+=2){const p=c[u],f=c[u+1];if(p.global&&(p.lastIndex=0),p.test(d))return f}return null}}}const vU=new _U;let ld=(()=>{class i{constructor(e){this.manager=void 0!==e?e:vU,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(s,o){r.load(e,s,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}return i.DEFAULT_MATERIAL_NAME="__DEFAULT",i})();const il={};class Khe extends Error{constructor(t,e){super(t),this.response=e}}class fo extends ld{constructor(t){super(t)}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=Hl.get(t);if(void 0!==s)return this.manager.itemStart(t),setTimeout(()=>{e&&e(s),this.manager.itemEnd(t)},0),s;if(void 0!==il[t])return void il[t].push({onLoad:e,onProgress:n,onError:r});il[t]=[],il[t].push({onLoad:e,onProgress:n,onError:r});const o=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=il[t],u=c.body.getReader(),h=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),p=h?parseInt(h):0,f=0!==p;let g=0;const m=new ReadableStream({start(_){!function b(){u.read().then(({done:v,value:y})=>{if(v)_.close();else{g+=y.byteLength;const R=new ProgressEvent("progress",{lengthComputable:f,loaded:g,total:p});for(let M=0,D=d.length;M<D;M++){const L=d[M];L.onProgress&&L.onProgress(R)}_.enqueue(y),b()}},v=>{_.error(v)})}()}});return new Response(m)}throw new Khe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),h=u&&u[1]?u[1].toLowerCase():void 0,p=new TextDecoder(h);return c.arrayBuffer().then(f=>p.decode(f))}}}).then(c=>{Hl.add(t,c);const d=il[t];delete il[t];for(let u=0,h=d.length;u<h;u++){const p=d[u];p.onLoad&&p.onLoad(c)}}).catch(c=>{const d=il[t];if(void 0===d)throw this.manager.itemError(t),c;delete il[t];for(let u=0,h=d.length;u<h;u++){const p=d[u];p.onError&&p.onError(c)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Ub extends ld{constructor(t){super(t)}load(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Hl.get(t);if(void 0!==o)return s.manager.itemStart(t),setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o;const a=Yf("img");function l(){d(),Hl.add(t,this),e&&e(this),s.manager.itemEnd(t)}function c(u){d(),r&&r(u),s.manager.itemError(t),s.manager.itemEnd(t)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(t),a.src=t,a}}class ma extends ld{constructor(t){super(t)}load(t,e,n,r){const s=new Cs,o=new Ub(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(a){s.image=a,s.needsUpdate=!0,void 0!==e&&e(s)},n,r),s}}class Vb extends sr{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ge(t),this.intensity=e}dispose(){}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(e.object.target=this.target.uuid),e}}const FE=new Et,bU=new I,yU=new I;class LE{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _e(512,512),this.map=null,this.mapPass=null,this.matrix=new Et,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sb,this._frameExtents=new _e(1,1),this._viewportCount=1,this._viewports=[new Kn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const e=this.camera,n=this.matrix;bU.setFromMatrixPosition(t.matrixWorld),e.position.copy(bU),yU.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(yU),e.updateMatrixWorld(),FE.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(FE),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(FE)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const t={};return 1!==this.intensity&&(t.intensity=this.intensity),0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Qhe extends LE{constructor(){super(new qi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const e=this.camera,n=2*oh*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=t.distance||e.far;(n!==e.fov||r!==e.aspect||s!==e.far)&&(e.fov=n,e.aspect=r,e.far=s,e.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class xU extends Vb{constructor(t,e,n=0,r=Math.PI/3,s=0,o=2){super(t,e),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(sr.DEFAULT_UP),this.updateMatrix(),this.target=new sr,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Qhe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const wU=new Et,xm=new I,NE=new I;class Jhe extends LE{constructor(){super(new qi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _e(4,2),this._viewportCount=6,this._viewports=[new Kn(2,1,1,1),new Kn(0,1,1,1),new Kn(3,1,1,1),new Kn(1,1,1,1),new Kn(3,0,1,1),new Kn(1,0,1,1)],this._cubeDirections=[new I(1,0,0),new I(-1,0,0),new I(0,0,1),new I(0,0,-1),new I(0,1,0),new I(0,-1,0)],this._cubeUps=[new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,1,0),new I(0,0,1),new I(0,0,-1)]}updateMatrices(t,e=0){const n=this.camera,r=this.matrix,s=t.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),xm.setFromMatrixPosition(t.matrixWorld),n.position.copy(xm),NE.copy(n.position),NE.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(NE),n.updateMatrixWorld(),r.makeTranslation(-xm.x,-xm.y,-xm.z),wU.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wU)}}class MU extends Vb{constructor(t,e,n=0,r=2){super(t,e),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new Jhe}get power(){return 4*this.intensity*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,e){return super.copy(t,e),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class epe extends LE{constructor(){super(new tm(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class CU extends Vb{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(sr.DEFAULT_UP),this.updateMatrix(),this.target=new sr,this.shadow=new epe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class wm extends Vb{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}}class $l{static decodeText(t){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return(new TextDecoder).decode(t);let e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch{return e}}static extractUrlBase(t){const e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}static resolveURL(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}}class ape extends ld{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const s=this,o=Hl.get(t);if(void 0!==o)return s.manager.itemStart(t),o.then?void o.then(c=>{e&&e(c),s.manager.itemEnd(t)}).catch(c=>{r&&r(c)}):(setTimeout(function(){e&&e(o),s.manager.itemEnd(t)},0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(t,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Hl.add(t,c),e&&e(c),s.manager.itemEnd(t),c}).catch(function(c){r&&r(c),Hl.remove(t),s.manager.itemError(t),s.manager.itemEnd(t)});Hl.add(t,l),s.manager.itemStart(t)}}class kU{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=IU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=IU();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function IU(){return(typeof performance>"u"?Date:performance).now()}const UE="\\[\\]\\.:\\/",upe=new RegExp("["+UE+"]","g"),VE="[^"+UE+"]",hpe="[^"+UE.replace("\\.","")+"]",_pe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",VE)+/(WCOD+)?/.source.replace("WCOD",hpe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",VE)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",VE)+"$"),vpe=["material","materials","bones","map"];class bpe{constructor(t,e,n){const r=n||ni.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(t,e)}setValue(t,e){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}let ni=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(upe,"")}static parseTrackName(e){const n=_pe.exec(e);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==vpe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(void 0===n||""===n||"."===n||-1===n||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(void 0!==r)return r}if(e.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)e[n++]=r[s]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===d){d=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==d){if(void 0===e[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[d]}}const a=e[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",e);let l=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[o]&&(o=e.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=bpe,i})();ni.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ni.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ni.prototype.GetterByBindingType=[ni.prototype._getValue_direct,ni.prototype._getValue_array,ni.prototype._getValue_arrayElement,ni.prototype._getValue_toArray],ni.prototype.SetterByBindingTypeAndVersioning=[[ni.prototype._setValue_direct,ni.prototype._setValue_direct_setNeedsUpdate,ni.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_array,ni.prototype._setValue_array_setNeedsUpdate,ni.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_arrayElement,ni.prototype._setValue_arrayElement_setNeedsUpdate,ni.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ni.prototype._setValue_fromArray,ni.prototype._setValue_fromArray_setNeedsUpdate,ni.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"167"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="167");class mo{constructor(t){this.nativeMesh=t,this.entity=null}get position(){return xe.clone(this.nativeMesh.position)}set position(t){this.nativeMesh.position.set(t.x,t.y,t.z)}get rotation(){return ai.clone(this.nativeMesh.quaternion)}set rotation(t){this.nativeMesh.quaternion.set(t.x,t.y,t.z,t.w)}get scale(){return xe.clone(this.nativeMesh.scale)}set scale(t){this.nativeMesh.scale.set(t.x,t.y,t.z)}get visible(){return this.nativeMesh.visible}set visible(t){this.nativeMesh.visible=t}get name(){return this.nativeMesh.name||this.nativeMesh.uuid}set name(t){this.nativeMesh.name=t}isEmpty(){return(this.nativeMesh instanceof im||this.nativeMesh instanceof rs)&&0==this.nativeMesh.children.length}popChild(t){const e=this.nativeMesh.children.find(n=>n.name===t||n.userData.name===t);return e?(e.removeFromParent(),new mo(e)):null}getBoundings(){return(new Vr).setFromObject(this.nativeMesh)}clone(){return new mo(this.nativeMesh.clone())}addToWorld(t){var e;null===(e=t.visualScene.nativeScene)||void 0===e||e.add(this.nativeMesh)}removeFromWorld(t){var e;null===(e=t.visualScene.nativeScene)||void 0===e||e.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(t=>{t instanceof sn&&this.disposeMesh(t)}),this.nativeMesh instanceof sn&&this.disposeMesh(this.nativeMesh)}disposeMesh(t){t.geometry.dispose();const e=t.material instanceof Array?t.material:[t.material];for(const n of e)n.dispose()}}class Cpe extends mo{get supportsFov(){return this.nativeCamera instanceof qi||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(t){this.supportsFov&&(this.nativeCamera.fov=t,this.nativeCamera.updateProjectionMatrix())}constructor(t){super(t),this.nativeCamera=t}}class Spe extends Yse{createMaterial(t){let e={};t.color?e={color:t.color}:t.diffuse||(e={color:super.randomColor()});let n=t.shading||"unlit";switch(n){case"unlit":return new ti(Object.assign(Object.assign({},e),{map:t.diffuse||null}));case"standart":return new Uh(Object.assign(Object.assign({},e),{map:t.diffuse||null}));case"phong":return new vm(Object.assign(Object.assign({},e),{map:t.diffuse||null}));case"wireframe":return new ti(Object.assign(Object.assign({},e),{wireframe:!0}));default:throw new Error(`"${n}" shading not implemented for three.js`)}}transformPrimitiveZUp(t){t.geometry.rotateX(Math.PI/2)}createPrimitive(t,e={}){var n,r,s,o;let a=null,l=this.createMaterial(e);switch(t.shape){case"PLANE":a=new sn(new Kc((null===(n=t.dimensions)||void 0===n?void 0:n.x)||1e4,(null===(r=t.dimensions)||void 0===r?void 0:r.y)||1e4,null===(s=t.segments)||void 0===s?void 0:s.x,null===(o=t.segments)||void 0===o?void 0:o.y),l);break;case"BOX":a=new sn(new Yc(...xe.spr(t.dimensions),...t.segments?xe.spr(t.segments):[]),l);break;case"CAPSULE":a=new sn(new kb(t.radius,t.centersDistance,t.capSegments,t.radialSegments),l),this.transformPrimitiveZUp(a);break;case"CYLINDER":a=new sn(new Lh(t.radius,t.radius,t.height,t.radialSegments,t.heightSegments),l),this.transformPrimitiveZUp(a);break;case"CONE":a=new sn(new Ib(t.radius,t.height,t.radialSegments,t.heightSegments),l),this.transformPrimitiveZUp(a);break;case"SPHERE":a=new sn(new _m(t.radius,t.widthSegments,t.heightSegments),l),this.transformPrimitiveZUp(a);break;case"COMPOUND":a=new rs;for(const{position:d,rotation:u,shape:h}of t.children){const p=this.createPrimitive(h,e).nativeMesh;d&&p.position.set(...xe.spr(d)),u&&p.quaternion.set(...ai.spr(u)),a.add(p)}break;case"MESH":const c=new Jt;c.setFromPoints(t.vertices.map(d=>new I(...xe.spr(d)))),c.setIndex(t.faces.reduce((d,u)=>(d.push(...u),d),[])),a=new sn(c,l)}if(!a)throw new Error(`Primitive with shape "${t.shape}" not implemented`);return void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),new mo(a)}createPerspectiveCamera(t={}){return new Cpe(new qi(t.fov||75,t.aspectRatio||1,t.frustrum?t.frustrum.near:1,t.frustrum?t.frustrum.far:1e4))}}function XU(i,t){if(t===Boe)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(t===MS||t===vB){let e=i.getIndex();if(null===e){const o=[],a=i.getAttribute("position");if(void 0===a)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),e=i.getIndex()}const n=e.count-2,r=[];if(t===MS)for(let o=1;o<=n;o++)r.push(e.getX(0)),r.push(e.getX(o)),r.push(e.getX(o+1));else for(let o=0;o<n;o++)o%2==0?(r.push(e.getX(o)),r.push(e.getX(o+1)),r.push(e.getX(o+2))):(r.push(e.getX(o+2)),r.push(e.getX(o+1)),r.push(e.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),i}class Epe extends ld{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new Ipe(e)}),this.register(function(e){return new Rpe(e)}),this.register(function(e){return new zpe(e)}),this.register(function(e){return new Hpe(e)}),this.register(function(e){return new $pe(e)}),this.register(function(e){return new Ope(e)}),this.register(function(e){return new Fpe(e)}),this.register(function(e){return new Lpe(e)}),this.register(function(e){return new Npe(e)}),this.register(function(e){return new kpe(e)}),this.register(function(e){return new Bpe(e)}),this.register(function(e){return new Ppe(e)}),this.register(function(e){return new Vpe(e)}),this.register(function(e){return new Upe(e)}),this.register(function(e){return new Dpe(e)}),this.register(function(e){return new Gpe(e)}),this.register(function(e){return new jpe(e)})}load(t,e,n,r){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const c=$l.extractUrlBase(t);o=$l.resolveURL(c,this.path)}else o=$l.extractUrlBase(t);this.manager.itemStart(t);const a=function(c){r?r(c):console.error(c),s.manager.itemError(t),s.manager.itemEnd(t)},l=new fo(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,function(c){try{s.parse(c,o,function(d){e(d),s.manager.itemEnd(t)},a)}catch(d){a(d)}},n,a)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return-1===this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.push(t),this}unregister(t){return-1!==this.pluginCallbacks.indexOf(t)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,e,n,r){let s;const o={},a={},l=new TextDecoder;if("string"==typeof t)s=JSON.parse(t);else if(t instanceof ArrayBuffer)if(l.decode(new Uint8Array(t,0,4))===qU){try{o[wn.KHR_BINARY_GLTF]=new Wpe(t)}catch(u){return void(r&&r(u))}s=JSON.parse(o[wn.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(t));else s=t;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const c=new sfe(s,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let d=0;d<this.pluginCallbacks.length;d++){const u=this.pluginCallbacks[d](c);u.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[u.name]=u,o[u.name]=!0}if(s.extensionsUsed)for(let d=0;d<s.extensionsUsed.length;++d){const u=s.extensionsUsed[d],h=s.extensionsRequired||[];switch(u){case wn.KHR_MATERIALS_UNLIT:o[u]=new Tpe;break;case wn.KHR_DRACO_MESH_COMPRESSION:o[u]=new Ype(s,this.dracoLoader);break;case wn.KHR_TEXTURE_TRANSFORM:o[u]=new Xpe;break;case wn.KHR_MESH_QUANTIZATION:o[u]=new qpe;break;default:h.indexOf(u)>=0&&void 0===a[u]&&console.warn('THREE.GLTFLoader: Unknown extension "'+u+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(n,r)}parseAsync(t,e){const n=this;return new Promise(function(r,s){n.parse(t,e,r,s)})}}function Ape(){let i={};return{get:function(t){return i[t]},add:function(t,e){i[t]=e},remove:function(t){delete i[t]},removeAll:function(){i={}}}}const wn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Dpe{constructor(t){this.parser=t,this.name=wn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,e=this.parser.json.nodes||[];for(let n=0,r=e.length;n<r;n++){const s=e[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&t._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(t){const e=this.parser,n="light:"+t;let r=e.cache.get(n);if(r)return r;const s=e.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[t];let c;const d=new Ge(16777215);void 0!==l.color&&d.setRGB(l.color[0],l.color[1],l.color[2],Er);const u=void 0!==l.range?l.range:0;switch(l.type){case"directional":c=new CU(d),c.target.position.set(0,0,-1),c.add(c.target);break;case"point":c=new MU(d),c.distance=u;break;case"spot":c=new xU(d),c.distance=u,l.spot=l.spot||{},l.spot.innerConeAngle=void 0!==l.spot.innerConeAngle?l.spot.innerConeAngle:0,l.spot.outerConeAngle=void 0!==l.spot.outerConeAngle?l.spot.outerConeAngle:Math.PI/4,c.angle=l.spot.outerConeAngle,c.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,c.target.position.set(0,0,-1),c.add(c.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return c.position.set(0,0,0),c.decay=2,rl(c,l),void 0!==l.intensity&&(c.intensity=l.intensity),c.name=e.createUniqueName(l.name||"light_"+t),r=Promise.resolve(c),e.cache.add(n,r),r}getDependency(t,e){if("light"===t)return this._loadLight(e)}createNodeAttachment(t){const e=this,n=this.parser,s=n.json.nodes[t],a=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===a?null:this._loadLight(a).then(function(l){return n._getNodeRef(e.cache,a,l)})}}class Tpe{constructor(){this.name=wn.KHR_MATERIALS_UNLIT}getMaterialType(){return ti}extendParams(t,e,n){const r=[];t.color=new Ge(1,1,1),t.opacity=1;const s=e.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;t.color.setRGB(o[0],o[1],o[2],Er),t.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(t,"map",s.baseColorTexture,Sr))}return Promise.all(r)}}class kpe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(e.emissiveIntensity=s),Promise.resolve()}}class Ipe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(e.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(e,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(e.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(e,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(e,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const a=o.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new _e(a,a)}return Promise.all(s)}}class Rpe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_DISPERSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.dispersion=void 0!==s.dispersion?s.dispersion:0,Promise.resolve()}}class Ppe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(e.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&s.push(n.assignTexture(e,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(e.iridescenceIOR=o.iridescenceIor),void 0===e.iridescenceThicknessRange&&(e.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(e.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(e.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&s.push(n.assignTexture(e,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class Ope{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_SHEEN}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];e.sheenColor=new Ge(0,0,0),e.sheenRoughness=0,e.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const a=o.sheenColorFactor;e.sheenColor.setRGB(a[0],a[1],a[2],Er)}return void 0!==o.sheenRoughnessFactor&&(e.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(e,"sheenColorMap",o.sheenColorTexture,Sr)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(e,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class Fpe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(e.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&s.push(n.assignTexture(e,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class Lpe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_VOLUME}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(e,"thicknessMap",o.thicknessTexture)),e.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return e.attenuationColor=(new Ge).setRGB(a[0],a[1],a[2],Er),Promise.all(s)}}class Npe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_IOR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return e.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class Bpe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];e.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(e,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return e.specularColor=(new Ge).setRGB(a[0],a[1],a[2],Er),void 0!==o.specularColorTexture&&s.push(n.assignTexture(e,"specularColorMap",o.specularColorTexture,Sr)),Promise.all(s)}}class Upe{constructor(t){this.parser=t,this.name=wn.EXT_MATERIALS_BUMP}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return e.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&s.push(n.assignTexture(e,"bumpMap",o.bumpTexture)),Promise.all(s)}}class Vpe{constructor(t){this.parser=t,this.name=wn.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const n=this.parser.json.materials[t];return n.extensions&&n.extensions[this.name]?$o:null}extendMaterialParams(t,e){const n=this.parser,r=n.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(e.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(e.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&s.push(n.assignTexture(e,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class zpe{constructor(t){this.parser=t,this.name=wn.KHR_TEXTURE_BASISU}loadTexture(t){const e=this.parser,n=e.json,r=n.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],o=e.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return e.loadTextureImage(t,s.source,o)}}class Hpe{constructor(t){this.parser=t,this.name=wn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class $pe{constructor(t){this.parser=t,this.name=wn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const e=this.name,n=this.parser,r=n.json,s=r.textures[t];if(!s.extensions||!s.extensions[e])return null;const o=s.extensions[e],a=r.images[o.source];let l=n.textureLoader;if(a.uri){const c=n.options.manager.getHandler(a.uri);null!==c&&(l=c)}return this.detectSupport().then(function(c){if(c)return n.loadTextureImage(t,o.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(e)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const e=new Image;e.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",e.onload=e.onerror=function(){t(1===e.height)}})),this.isSupported}}class Gpe{constructor(t){this.name=wn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const e=this.parser.json,n=e.bufferViews[t];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(e.extensionsRequired&&e.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const d=r.count,u=r.byteStride,h=new Uint8Array(a,r.byteOffset||0,r.byteLength||0);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(d,u,h,r.mode,r.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(d*u);return o.decodeGltfBuffer(new Uint8Array(p),d,u,h,r.mode,r.filter),p})})}return null}}class jpe{constructor(t){this.name=wn.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const e=this.parser.json,n=e.nodes[t];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=e.meshes[n.mesh];for(const c of r.primitives)if(c.mode!==go.TRIANGLES&&c.mode!==go.TRIANGLE_STRIP&&c.mode!==go.TRIANGLE_FAN&&void 0!==c.mode)return null;const o=n.extensions[this.name].attributes,a=[],l={};for(const c in o)a.push(this.parser.getDependency("accessor",o[c]).then(d=>(l[c]=d,l[c])));return a.length<1?null:(a.push(this.parser.createNodeMesh(t)),Promise.all(a).then(c=>{const d=c.pop(),u=d.isGroup?d.children:[d],h=c[0].count,p=[];for(const f of u){const g=new Et,m=new I,_=new ts,b=new I(1,1,1),v=new z3(f.geometry,f.material,h);for(let y=0;y<h;y++)l.TRANSLATION&&m.fromBufferAttribute(l.TRANSLATION,y),l.ROTATION&&_.fromBufferAttribute(l.ROTATION,y),l.SCALE&&b.fromBufferAttribute(l.SCALE,y),v.setMatrixAt(y,g.compose(m,_,b));for(const y in l)if("_COLOR_0"===y){const R=l[y];v.instanceColor=new Oh(R.array,R.itemSize,R.normalized)}else"TRANSLATION"!==y&&"ROTATION"!==y&&"SCALE"!==y&&f.geometry.setAttribute(y,l[y]);sr.prototype.copy.call(v,f),this.parser.assignFinalMaterial(v),p.push(v)}return d.isGroup?(d.clear(),d.add(...p),d):p[0]}))}}const qU="glTF";class Wpe{constructor(t){this.name=wn.KHR_BINARY_GLTF,this.content=null,this.body=null;const e=new DataView(t,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==qU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(t,12);let o=0;for(;o<r;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,1313821514===l){const c=new Uint8Array(t,12+o,a);this.content=n.decode(c)}else if(5130562===l){const c=12+o;this.body=t.slice(c,c+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Ype{constructor(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=wn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}decodePrimitive(t,e){const n=this.json,r=this.dracoLoader,s=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},l={},c={};for(const d in o){const u=WE[d]||d.toLowerCase();a[u]=o[d]}for(const d in t.attributes){const u=WE[d]||d.toLowerCase();if(void 0!==o[d]){const h=n.accessors[t.attributes[d]];c[u]=jh[h.componentType].name,l[u]=!0===h.normalized}}return e.getDependency("bufferView",s).then(function(d){return new Promise(function(u,h){r.decodeDracoFile(d,function(p){for(const f in p.attributes){const m=l[f];void 0!==m&&(p.attributes[f].normalized=m)}u(p)},a,c,Er,h)})})}}class Xpe{constructor(){this.name=wn.KHR_TEXTURE_TRANSFORM}extendTexture(t,e){return(void 0===e.texCoord||e.texCoord===t.channel)&&void 0===e.offset&&void 0===e.rotation&&void 0===e.scale||(t=t.clone(),void 0!==e.texCoord&&(t.channel=e.texCoord),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),t.needsUpdate=!0),t}}class qpe{constructor(){this.name=wn.KHR_MESH_QUANTIZATION}}class ZU extends bm{constructor(t,e,n,r){super(t,e,n,r)}copySampleValue_(t){const e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=t*r*3+r;for(let o=0;o!==r;o++)e[o]=n[s+o];return e}interpolate_(t,e,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=2*a,c=3*a,d=r-e,u=(n-e)/d,h=u*u,p=h*u,f=t*c,g=f-c,m=-2*p+3*h,_=p-h,b=1-m,v=_-h+u;for(let y=0;y!==a;y++)s[y]=b*o[g+y+a]+v*(o[g+y+l]*d)+m*o[f+y+a]+_*(o[f+y]*d);return s}}const Kpe=new ts;class Zpe extends ZU{interpolate_(t,e,n,r){const s=super.interpolate_(t,e,n,r);return Kpe.fromArray(s).normalize().toArray(s),s}}const go={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},jh={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},QU={9728:Yi,9729:Bi,9984:HC,9985:Hf,9986:Zu,9987:Bo},JU={33071:mi,33648:zf,10497:hr},jE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},WE={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},jl={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Qpe={CUBICSPLINE:void 0,LINEAR:jf,STEP:Gf};function fd(i,t,e){for(const n in e.extensions)void 0===i[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=e.extensions[n])}function rl(i,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(i.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function tfe(i,t){if(i.updateMorphTargets(),void 0!==t.weights)for(let e=0,n=t.weights.length;e<n;e++)i.morphTargetInfluences[e]=t.weights[e];if(t.extras&&Array.isArray(t.extras.targetNames)){const e=t.extras.targetNames;if(i.morphTargetInfluences.length===e.length){i.morphTargetDictionary={};for(let n=0,r=e.length;n<r;n++)i.morphTargetDictionary[e[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function nfe(i){let t;const e=i.extensions&&i.extensions[wn.KHR_DRACO_MESH_COMPRESSION];if(t=e?"draco:"+e.bufferView+":"+e.indices+":"+XE(e.attributes):i.indices+":"+XE(i.attributes)+":"+i.mode,void 0!==i.targets)for(let n=0,r=i.targets.length;n<r;n++)t+=":"+XE(i.targets[n]);return t}function XE(i){let t="";const e=Object.keys(i).sort();for(let n=0,r=e.length;n<r;n++)t+=e[n]+":"+i[e[n]]+";";return t}function qE(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const rfe=new Et;class sfe{constructor(t={},e={}){this.json=t,this.extensions={},this.plugins={},this.options=e,this.cache=new Ape,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=-1,s=!1,o=-1;if(typeof navigator<"u"){const a=navigator.userAgent;n=!0===/^((?!chrome|android).)*safari/i.test(a);const l=a.match(/Version\/(\d+)/);r=n&&l?parseInt(l[1],10):-1,s=a.indexOf("Firefox")>-1,o=s?a.match(/Firefox\/([0-9]+)\./)[1]:-1}this.textureLoader=typeof createImageBitmap>"u"||n&&r<17||s&&o<98?new ma(this.options.manager):new ape(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new fo(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,e){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(o){const a={scene:o[0][r.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:r.asset,parser:n,userData:{}};return fd(s,a,r),rl(a,r),Promise.all(n._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){for(const l of a.scenes)l.updateMatrixWorld();t(a)})}).catch(e)}_markDefs(){const t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=e.length;r<s;r++){const o=e[r].joints;for(let a=0,l=o.length;a<l;a++)t[o[a]].isBone=!0}for(let r=0,s=t.length;r<s;r++){const o=t[r];void 0!==o.mesh&&(this._addNodeRef(this.meshCache,o.mesh),void 0!==o.skin&&(n[o.mesh].isSkinnedMesh=!0)),void 0!==o.camera&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(t,e){void 0!==e&&(void 0===t.refs[e]&&(t.refs[e]=t.uses[e]=0),t.refs[e]++)}_getNodeRef(t,e,n){if(t.refs[e]<=1)return n;const r=n.clone(),s=(o,a)=>{const l=this.associations.get(o);null!=l&&this.associations.set(a,l);for(const[c,d]of o.children.entries())s(d,a.children[c])};return s(n,r),r.name+="_instance_"+t.uses[e]++,r}_invokeOne(t){const e=Object.values(this.plugins);e.push(this);for(let n=0;n<e.length;n++){const r=t(e[n]);if(r)return r}return null}_invokeAll(t){const e=Object.values(this.plugins);e.unshift(this);const n=[];for(let r=0;r<e.length;r++){const s=t(e[r]);s&&n.push(s)}return n}getDependency(t,e){const n=t+":"+e;let r=this.cache.get(n);if(!r){switch(t){case"scene":r=this.loadScene(e);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(e)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(e)});break;case"accessor":r=this.loadAccessor(e);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(e)});break;case"buffer":r=this.loadBuffer(e);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(e)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(e)});break;case"skin":r=this.loadSkin(e);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(e)});break;case"camera":r=this.loadCamera(e);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(t,e)}),!r)throw new Error("Unknown type: "+t)}this.cache.add(n,r)}return r}getDependencies(t){let e=this.cache.get(t);if(!e){const n=this;e=Promise.all((this.json[t+("mesh"===t?"es":"s")]||[]).map(function(s,o){return n.getDependency(t,o)})),this.cache.add(t,e)}return e}loadBuffer(t){const e=this.json.buffers[t],n=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[wn.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,o){n.load($l.resolveURL(e.uri,r.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))})})}loadBufferView(t){const e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then(function(n){const s=e.byteOffset||0;return n.slice(s,s+(e.byteLength||0))})}loadAccessor(t){const e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse){const o=jE[r.type],l=!0===r.normalized,c=new(0,jh[r.componentType])(r.count*o);return Promise.resolve(new gi(c,o,l))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=jE[r.type],c=jh[r.componentType],d=c.BYTES_PER_ELEMENT,h=r.byteOffset||0,p=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;let g,m;if(p&&p!==d*l){const _=Math.floor(h/p),b="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+_+":"+r.count;let v=e.cache.get(b);v||(g=new c(a,_*p,r.count*p/d),v=new sE(g,p/d),e.cache.add(b,v)),m=new td(v,l,h%p/d,f)}else g=null===a?new c(r.count*l):new c(a,h,r.count*l),m=new gi(g,l,f);if(void 0!==r.sparse){const y=r.sparse.values.byteOffset||0,R=new(0,jh[r.sparse.indices.componentType])(o[1],r.sparse.indices.byteOffset||0,r.sparse.count*jE.SCALAR),M=new c(o[2],y,r.sparse.count*l);null!==a&&(m=new gi(m.array.slice(),m.itemSize,m.normalized));for(let D=0,L=R.length;D<L;D++){const C=R[D];if(m.setX(C,M[D*l]),l>=2&&m.setY(C,M[D*l+1]),l>=3&&m.setZ(C,M[D*l+2]),l>=4&&m.setW(C,M[D*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return m})}loadTexture(t){const e=this.json,s=e.textures[t].source,o=e.images[s];let a=this.textureLoader;if(o.uri){const l=this.options.manager.getHandler(o.uri);null!==l&&(a=l)}return this.loadTextureImage(t,s,a)}loadTextureImage(t,e,n){const r=this,s=this.json,o=s.textures[t],a=s.images[e],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(e,n).then(function(d){d.flipY=!1,d.name=o.name||a.name||"",""===d.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(d.name=a.uri);const h=(s.samplers||{})[o.sampler]||{};return d.magFilter=QU[h.magFilter]||Bi,d.minFilter=QU[h.minFilter]||Bo,d.wrapS=JU[h.wrapS]||hr,d.wrapT=JU[h.wrapT]||hr,r.associations.set(d,{textures:t}),d}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(t,e){const r=this.json,s=this.options;if(void 0!==this.sourceCache[t])return this.sourceCache[t].then(u=>u.clone());const o=r.images[t],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(void 0!==o.bufferView)l=this.getDependency("bufferView",o.bufferView).then(function(u){c=!0;const h=new Blob([u],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const d=Promise.resolve(l).then(function(u){return new Promise(function(h,p){let f=h;!0===e.isImageBitmapLoader&&(f=function(g){const m=new Cs(g);m.needsUpdate=!0,h(m)}),e.load($l.resolveURL(u,s.path),f,void 0,p)})}).then(function(u){return!0===c&&a.revokeObjectURL(l),rl(u,o),u.userData.mimeType=o.mimeType||function ife(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(o.uri),u}).catch(function(u){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),u});return this.sourceCache[t]=d,d}assignTexture(t,e,n,r){const s=this;return this.getDependency("texture",n.index).then(function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),s.extensions[wn.KHR_TEXTURE_TRANSFORM]){const a=void 0!==n.extensions?n.extensions[wn.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[wn.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return void 0!==r&&(o.colorSpace=r),t[e]=o,o})}assignFinalMaterial(t){const e=t.geometry;let n=t.material;const r=void 0===e.attributes.tangent,s=void 0!==e.attributes.color,o=void 0===e.attributes.normal;if(t.isPoints){const a="PointsMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new rd,ns.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,l.sizeAttenuation=!1,this.cache.add(a,l)),n=l}else if(t.isLine){const a="LineBasicMaterial:"+n.uuid;let l=this.cache.get(a);l||(l=new fr,ns.prototype.copy.call(l,n),l.color.copy(n.color),l.map=n.map,this.cache.add(a,l)),n=l}if(r||s||o){let a="ClonedMaterial:"+n.uuid+":";r&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=n.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(n))),n=l}t.material=n}getMaterialType(){return Uh}loadMaterial(t){const e=this,r=this.extensions,s=this.json.materials[t];let o;const a={},c=[];if((s.extensions||{})[wn.KHR_MATERIALS_UNLIT]){const u=r[wn.KHR_MATERIALS_UNLIT];o=u.getMaterialType(),c.push(u.extendParams(a,s,e))}else{const u=s.pbrMetallicRoughness||{};if(a.color=new Ge(1,1,1),a.opacity=1,Array.isArray(u.baseColorFactor)){const h=u.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],Er),a.opacity=h[3]}void 0!==u.baseColorTexture&&c.push(e.assignTexture(a,"map",u.baseColorTexture,Sr)),a.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,a.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(c.push(e.assignTexture(a,"metalnessMap",u.metallicRoughnessTexture)),c.push(e.assignTexture(a,"roughnessMap",u.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(t)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(t,a)})))}!0===s.doubleSided&&(a.side=Cr);const d=s.alphaMode||"OPAQUE";if("BLEND"===d?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,"MASK"===d&&(a.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==ti&&(c.push(e.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new _e(1,1),void 0!==s.normalTexture.scale)){const u=s.normalTexture.scale;a.normalScale.set(u,u)}if(void 0!==s.occlusionTexture&&o!==ti&&(c.push(e.assignTexture(a,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(a.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==ti){const u=s.emissiveFactor;a.emissive=(new Ge).setRGB(u[0],u[1],u[2],Er)}return void 0!==s.emissiveTexture&&o!==ti&&c.push(e.assignTexture(a,"emissiveMap",s.emissiveTexture,Sr)),Promise.all(c).then(function(){const u=new o(a);return s.name&&(u.name=s.name),rl(u,s),e.associations.set(u,{materials:t}),s.extensions&&fd(r,u,s),u})}createUniqueName(t){const e=ni.sanitizeNodeName(t||"");return e in this.nodeNamesUsed?e+"_"+ ++this.nodeNamesUsed[e]:(this.nodeNamesUsed[e]=0,e)}loadGeometries(t){const e=this,n=this.extensions,r=this.primitiveCache;function s(a){return n[wn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,e).then(function(l){return eV(l,a,e)})}const o=[];for(let a=0,l=t.length;a<l;a++){const c=t[a],d=nfe(c),u=r[d];if(u)o.push(u.promise);else{let h;h=c.extensions&&c.extensions[wn.KHR_DRACO_MESH_COMPRESSION]?s(c):eV(new Jt,c,e),r[d]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(t){const e=this,r=this.extensions,s=this.json.meshes[t],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const d=void 0===o[l].material?(void 0===(i=this.cache).DefaultMaterial&&(i.DefaultMaterial=new Uh({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:ua})),i.DefaultMaterial):this.getDependency("material",o[l].material);a.push(d)}var i;return a.push(e.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),d=l[l.length-1],u=[];for(let p=0,f=d.length;p<f;p++){const g=d[p],m=o[p];let _;const b=c[p];if(m.mode===go.TRIANGLES||m.mode===go.TRIANGLE_STRIP||m.mode===go.TRIANGLE_FAN||void 0===m.mode)_=!0===s.isSkinnedMesh?new N3(g,b):new sn(g,b),!0===_.isSkinnedMesh&&_.normalizeSkinWeights(),m.mode===go.TRIANGLE_STRIP?_.geometry=XU(_.geometry,vB):m.mode===go.TRIANGLE_FAN&&(_.geometry=XU(_.geometry,MS));else if(m.mode===go.LINES)_=new zl(g,b);else if(m.mode===go.LINE_STRIP)_=new id(g,b);else if(m.mode===go.LINE_LOOP)_=new X3(g,b);else{if(m.mode!==go.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+m.mode);_=new um(g,b)}Object.keys(_.geometry.morphAttributes).length>0&&tfe(_,s),_.name=e.createUniqueName(s.name||"mesh_"+t),rl(_,s),m.extensions&&fd(r,_,m),e.assignFinalMaterial(_),u.push(_)}for(let p=0,f=u.length;p<f;p++)e.associations.set(u[p],{meshes:t,primitives:p});if(1===u.length)return s.extensions&&fd(r,u[0],s),u[0];const h=new rs;s.extensions&&fd(r,h,s),e.associations.set(h,{meshes:t});for(let p=0,f=u.length;p<f;p++)h.add(u[p]);return h})}loadCamera(t){let e;const n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new qi(uae_radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new tm(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=this.createUniqueName(n.name)),rl(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(t){const e=this.json.skins[t],n=[];for(let r=0,s=e.joints.length;r<s;r++)n.push(this._loadNodeShallow(e.joints[r]));return n.push(void 0!==e.inverseBindMatrices?this.getDependency("accessor",e.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),o=r,a=[],l=[];for(let c=0,d=o.length;c<d;c++){const u=o[c];if(u){a.push(u);const h=new Et;null!==s&&h.fromArray(s.array,16*c),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[c])}return new gb(a,l)})}loadAnimation(t){const n=this,r=this.json.animations[t],s=r.name?r.name:"animation_"+t,o=[],a=[],l=[],c=[],d=[];for(let u=0,h=r.channels.length;u<h;u++){const p=r.channels[u],f=r.samplers[p.sampler],g=p.target,_=void 0!==r.parameters?r.parameters[f.input]:f.input,b=void 0!==r.parameters?r.parameters[f.output]:f.output;void 0!==g.node&&(o.push(this.getDependency("node",g.node)),a.push(this.getDependency("accessor",_)),l.push(this.getDependency("accessor",b)),c.push(f),d.push(g))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(u){const h=u[0],p=u[1],f=u[2],g=u[3],m=u[4],_=[];for(let b=0,v=h.length;b<v;b++){const y=h[b],R=p[b],M=f[b],D=g[b],L=m[b];if(void 0===y)continue;y.updateMatrix&&y.updateMatrix();const C=n._createAnimationTracks(y,R,M,D,L);if(C)for(let w=0;w<C.length;w++)_.push(C[w])}return new ym(s,void 0,_)})}createNodeMesh(t){const n=this,r=this.json.nodes[t];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const o=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=r.weights.length;l<c;l++)a.morphTargetInfluences[l]=r.weights[l]}),o})}loadNode(t){const n=this,r=this.json.nodes[t],s=n._loadNodeShallow(t),o=[],a=r.children||[];for(let c=0,d=a.length;c<d;c++)o.push(n.getDependency("node",a[c]));const l=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const d=c[0],u=c[1],h=c[2];null!==h&&d.traverse(function(p){p.isSkinnedMesh&&p.bind(h,rfe)});for(let p=0,f=u.length;p<f;p++)d.add(u[p]);return d})}_loadNodeShallow(t){const n=this.extensions,r=this;if(void 0!==this.nodeCache[t])return this.nodeCache[t];const s=this.json.nodes[t],o=s.name?r.createUniqueName(s.name):"",a=[],l=r._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(t)});return l&&a.push(l),void 0!==s.camera&&a.push(r.getDependency("camera",s.camera).then(function(c){return r._getNodeRef(r.cameraCache,s.camera,c)})),r._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(t)}).forEach(function(c){a.push(c)}),this.nodeCache[t]=Promise.all(a).then(function(c){let d;if(d=!0===s.isBone?new cE:c.length>1?new rs:1===c.length?c[0]:new sr,d!==c[0])for(let u=0,h=c.length;u<h;u++)d.add(c[u]);if(s.name&&(d.userData.name=s.name,d.name=o),rl(d,s),s.extensions&&fd(n,d,s),void 0!==s.matrix){const u=new Et;u.fromArray(s.matrix),d.applyMatrix4(u)}else void 0!==s.translation&&d.position.fromArray(s.translation),void 0!==s.rotation&&d.quaternion.fromArray(s.rotation),void 0!==s.scale&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=t,d}),this.nodeCache[t]}loadScene(t){const e=this.extensions,n=this.json.scenes[t],r=this,s=new rs;n.name&&(s.name=r.createUniqueName(n.name)),rl(s,n),n.extensions&&fd(e,s,n);const o=n.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(r.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let d=0,u=l.length;d<u;d++)s.add(l[d]);return r.associations=(d=>{const u=new Map;for(const[h,p]of r.associations)(h instanceof ns||h instanceof Cs)&&u.set(h,p);return d.traverse(h=>{const p=r.associations.get(h);null!=p&&u.set(h,p)}),u})(s),s})}_createAnimationTracks(t,e,n,r,s){const o=[],a=t.name?t.name:t.uuid,l=[];let c;switch(jl[s.path]===jl.weights?t.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a),jl[s.path]){case jl.weights:c=zh;break;case jl.rotation:c=Hh;break;case jl.position:case jl.scale:c=Gh;break;default:c=1===n.itemSize?zh:Gh}const d=void 0!==r.interpolation?Qpe[r.interpolation]:jf,u=this._getArrayFromAccessor(n);for(let h=0,p=l.length;h<p;h++){const f=new c(l[h]+"."+jl[s.path],e.array,u,d);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}_getArrayFromAccessor(t){let e=t.array;if(t.normalized){const n=qE(e.constructor),r=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)r[s]=e[s]*n;e=r}return e}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(n){return new(this instanceof Hh?Zpe:ZU)(this.times,this.values,this.getValueSize()/3,n)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function eV(i,t,e){const n=t.attributes,r=[];function s(o,a){return e.getDependency("accessor",o).then(function(l){i.setAttribute(a,l)})}for(const o in n){const a=WE[o]||o.toLowerCase();a in i.attributes||r.push(s(n[o],a))}if(void 0!==t.indices&&!i.index){const o=e.getDependency("accessor",t.indices).then(function(a){i.setIndex(a)});r.push(o)}return Fn.workingColorSpace!==Er&&"COLOR_0"in n&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Fn.workingColorSpace}" not supported.`),rl(i,t),function ofe(i,t,e){const n=t.attributes,r=new Vr;if(void 0===n.POSITION)return;{const a=e.json.accessors[n.POSITION],l=a.min,c=a.max;if(void 0===l||void 0===c)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new I(l[0],l[1],l[2]),new I(c[0],c[1],c[2])),a.normalized){const d=qE(jh[a.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}const s=t.targets;if(void 0!==s){const a=new I,l=new I;for(let c=0,d=s.length;c<d;c++){const u=s[c];if(void 0!==u.POSITION){const h=e.json.accessors[u.POSITION],p=h.min,f=h.max;if(void 0!==p&&void 0!==f){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(f[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(f[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(f[2]))),h.normalized){const g=qE(jh[h.componentType]);l.multiplyScalar(g)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(a)}i.boundingBox=r;const o=new zr;r.getCenter(o.center),o.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=o}(i,t,e),Promise.all(r).then(function(){return void 0!==t.targets?function efe(i,t,e){let n=!1,r=!1,s=!1;for(let c=0,d=t.length;c<d;c++){const u=t[c];if(void 0!==u.POSITION&&(n=!0),void 0!==u.NORMAL&&(r=!0),void 0!==u.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const o=[],a=[],l=[];for(let c=0,d=t.length;c<d;c++){const u=t[c];if(n){const h=void 0!==u.POSITION?e.getDependency("accessor",u.POSITION):i.attributes.position;o.push(h)}if(r){const h=void 0!==u.NORMAL?e.getDependency("accessor",u.NORMAL):i.attributes.normal;a.push(h)}if(s){const h=void 0!==u.COLOR_0?e.getDependency("accessor",u.COLOR_0):i.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[1],h=c[2];return n&&(i.morphAttributes.position=c[0]),r&&(i.morphAttributes.normal=u),s&&(i.morphAttributes.color=h),i.morphTargetsRelative=!0,i})}(i,t.targets,e):i})}class lfe{constructor(){this.gltfLoader=new Epe}loadFromGgGlb(t,e){return function(i,t,e,n){return new(e||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())})}(this,void 0,void 0,function*(){const n=yield this.gltfLoader.parseAsync(t,"");return n.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new mo(n.scene)})}}const os=(i,t)=>Array(i).fill(null).map((e,n)=>t(n));class md{static startDebugView(t,e){let n=this.activeDebugViews.get(t);return n?n.renderers.includes(e)||n.renderers.push(e):(n={view:new md(t),renderers:[e]},this.activeDebugViews.set(t,n)),n.view}static stopDebugView(t,e){const n=t.world,r=this.activeDebugViews.get(n);r&&(r.renderers=r.renderers.filter(s=>s!==e),0===r.renderers.length&&(r.view.dispose(),this.activeDebugViews.delete(n)))}initShape(t){var e,n;const r=t.debugBodySettings;let a,o=this.lineSegmentPointsForShape(r.shape);o?(a=new zl((new Jt).setFromPoints(o)),a.material.color.set(r.color)):a=null===(e=this.world)||void 0===e?void 0:e.visualScene.factory.createPrimitive(r.shape,{shading:"wireframe",color:r.color}).nativeMesh,r.ignoreTransform||(a.position.set(...xe.spr(t.position)),a.quaternion.set(...ai.spr(t.rotation))),this.syncMap.set(t,[a,r.revision]),null===(n=this.debugScene)||void 0===n||n.add(a)}constructor(t){if(this.world=t,this.debugScene=null,this.aSub=null,this.rSub=null,this.syncMap=new Map,!this.world.physicsWorld)throw new Error("Cannot create three physics debug view for the world without physics");this.debugScene=new im;for(const e of this.world.physicsWorld.children)this.initShape(e);this.aSub=this.world.physicsWorld.added$.subscribe(e=>this.initShape(e)),this.rSub=this.world.physicsWorld.removed$.subscribe(e=>{var n;const r=this.syncMap.get(e);r&&(this.syncMap.delete(e),null===(n=this.debugScene)||void 0===n||n.remove(r[0]))})}get scene(){return this.debugScene}render(t,e){var n;for(const[s,[o,a]]of this.syncMap.entries()){const l=s.debugBodySettings;a!==l.revision?(null===(n=this.debugScene)||void 0===n||n.remove(o),this.initShape(s)):l.ignoreTransform||(o.position.set(...xe.spr(s.position)),o.quaternion.set(...ai.spr(s.rotation)))}const r=t.autoClearColor;r&&(t.autoClearColor=!1),t.render(this.debugScene,e),r&&(t.autoClearColor=!0)}lineSegmentPointsForShape(t){if("BOX"===t.shape){const e=xe.scalarMult(t.dimensions,.5);return[...os(8,n=>new I(n<4?e.x:-e.x,n%4<2?e.y:-e.y,n%2?e.z:-e.z)),...os(8,n=>new I(n%2?e.x:-e.x,n<4?e.y:-e.y,n%4<2?e.z:-e.z)),...os(8,n=>new I(n%4<2?e.x:-e.x,n%2?e.y:-e.y,n<4?e.z:-e.z))]}if("CYLINDER"===t.shape)return[...os(32,e=>new I(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),-t.height/2)),...os(32,e=>new I(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),t.height/2)),...os(8,e=>new I(Math.floor(e/2)%2?0:e<4?t.radius:-t.radius,Math.floor(e/2)%2?e<4?t.radius:-t.radius:0,e%2?t.height/2:-t.height/2)),new I(0,0,-t.height/2),new I(0,0,t.height/2)];if("CONE"===t.shape)return[...os(32,e=>new I(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),-t.height/2)),...os(8,e=>new I(e%2||Math.floor(e/2)%2?0:e<4?t.radius:-t.radius,e%2?0:Math.floor(e/2)%2?e<4?t.radius:-t.radius:0,e%2?t.height/2:-t.height/2)),new I(0,0,-t.height/2),new I(0,0,t.height/2)];if("SPHERE"===t.shape)return[...os(32,e=>new I(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),0)),...os(32,e=>new I(t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),0,t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8))),...os(32,e=>new I(0,t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8)))];if("CAPSULE"===t.shape)return[...this.lineSegmentPointsForShape({shape:"CYLINDER",radius:t.radius,height:t.centersDistance}),...os(16,e=>new I(t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),0,t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)+t.centersDistance/2)),...os(16,e=>new I(t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),0,-t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)-t.centersDistance/2)),...os(16,e=>new I(0,t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)+t.centersDistance/2)),...os(16,e=>new I(0,t.radius*Math.cos(Math.floor((e+1)/2)*Math.PI/8),-t.radius*Math.sin(Math.floor((e+1)/2)*Math.PI/8)-t.centersDistance/2))];if("CONVEX_HULL"===t.shape)return[...t.vertices.map(n=>[new I(n.x-.05,n.y,n.z),new I(n.x+.05,n.y,n.z),new I(n.x,n.y-.05,n.z),new I(n.x,n.y+.05,n.z),new I(n.x,n.y,n.z-.05),new I(n.x,n.y,n.z+.05)]).reduce((n,r)=>(n.push(...r),n),[])];if("COMPOUND"===t.shape){const e=[];for(const{position:n,shape:r,rotation:s}of t.children){let o=this.lineSegmentPointsForShape(r);if(!o)return null;e.push(...o.map(a=>new I(...xe.spr(xe.add(n||xe.O,xe.rot(a,s||ai.O))))))}return e}return null}dispose(){var t,e;this.debugScene=null,null===(t=this.aSub)||void 0===t||t.unsubscribe(),null===(e=this.rSub)||void 0===e||e.unsubscribe(),this.syncMap=new Map}}md.activeDebugViews=new Map;class tV extends Nse{get physicsDebugViewActive(){return this._physicsDebugViewActive}set physicsDebugViewActive(t){this._physicsDebugViewActive!=t&&(this._physicsDebugViewActive=t,this.world&&(t?this.debugView=md.startDebugView(this.world,this):(md.stopDebugView(this.debugView,this),this.debugView=null)))}constructor(t,e,n,r={}){super(t,n,r),this.scene=t,this.camera=e,this.canvas=n,this.world=null,this.debugView=null,this._physicsDebugViewActive=!1,this.nativeRenderer=new $ue(Object.assign({canvas:n,alpha:this.rendererOptions.transparent},this.rendererOptions)),this.nativeRenderer.shadowMap.enabled=!0,this.nativeRenderer.setClearColor(this.rendererOptions.background),this.nativeRenderer.shadowMap.type=iB,this.nativeRenderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}addToWorld(t){this.world=t,this.physicsDebugViewActive&&(this.debugView=md.startDebugView(this.world,this))}removeFromWorld(t){this.physicsDebugViewActive&&(md.stopDebugView(this.debugView,this),this.debugView=null),this.world=null}resizeRenderer(t){this.nativeRenderer.setSize(t.x,t.y),(this.camera.nativeCamera instanceof qi||"PerspectiveCamera"==this.camera.nativeCamera.type)&&Math.abs(this.camera.nativeCamera.aspect-t.x/t.y)>.01&&(this.camera.nativeCamera.aspect=t.x/t.y,this.camera.nativeCamera.updateProjectionMatrix())}render(){this.nativeRenderer.render(this.scene.nativeScene,this.camera.nativeCamera),this.physicsDebugViewActive&&this.debugView.render(this.nativeRenderer,this.camera.nativeCamera)}dispose(){this.camera.dispose(),this.nativeRenderer.clear(),this.nativeRenderer.dispose(),this.nativeRenderer.domElement=null}}const cfe={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"};class Xb{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const dfe=new tm(-1,1,1,-1,0,1),hfe=new class ufe extends Jt{constructor(){super(),this.setAttribute("position",new ot([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new ot([0,2,0,0,2,0],2))}};class pfe{constructor(t){this._mesh=new sn(hfe,t)}dispose(){this._mesh.geometry.dispose()}render(t){t.render(this._mesh,dfe)}get material(){return this._mesh.material}set material(t){this._mesh.material=t}}class ffe extends Xb{constructor(t,e){super(),this.textureID=void 0!==e?e:"tDiffuse",t instanceof Ho?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=WB.clone(t.uniforms),this.material=new Ho({name:void 0!==t.name?t.name:"unspecified",defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new pfe(this.material)}render(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class nV extends Xb{constructor(t,e){super(),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,e,n){const r=t.getContext(),s=t.state;let o,a;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class mfe extends Xb{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}class gfe{constructor(t,e){if(this.renderer=t,this._pixelRatio=t.getPixelRatio(),void 0===e){const n=t.getSize(new _e);this._width=n.width,this._height=n.height,(e=new Pl(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Qu})).texture.name="EffectComposer.rt1"}else this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new ffe(cfe),this.copyPass.material.blending=ja,this.clock=new kU}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}isLastEnabledPass(t){for(let e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0}render(t){void 0===t&&(t=this.clock.getDelta());const e=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const o=this.passes[r];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),o.needsSwap){if(n){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==nV&&(o instanceof nV?n=!0:o instanceof mfe&&(n=!1))}}this.renderer.setRenderTarget(e)}reset(t){if(void 0===t){const e=this.renderer.getSize(new _e);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,e){this._width=t,this._height=e;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class _fe extends Xb{constructor(t,e,n=null,r=null,s=null){super(),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ge}render(t,e,n){const r=t.autoClear;let s,o;t.autoClear=!1,null!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(t.getClearColor(this._oldClearColor),t.setClearColor(this.clearColor,t.getClearAlpha())),null!==this.clearAlpha&&(s=t.getClearAlpha(),t.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),null!==this.clearColor&&t.setClearColor(this._oldClearColor),null!==this.clearAlpha&&t.setClearAlpha(s),null!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=r}}class vfe extends tV{constructor(t,e,n,r={}){super(t,e,n,r),this.nativeComposer=new gfe(this.nativeRenderer)}addToWorld(t){super.addToWorld(t);const e=new _fe(this.scene.nativeScene,this.camera.nativeCamera);this.nativeComposer.insertPass(e,0)}resizeRenderer(t){super.resizeRenderer(t),this.nativeComposer.setSize(t.x,t.y)}render(){this.nativeComposer.render(),this.physicsDebugViewActive&&this.debugView.render(this.nativeRenderer,this.camera.nativeCamera)}dispose(){super.dispose(),this.nativeComposer.dispose()}}class qb{constructor(){this._nativeScene=null,this.factory=new Spe,this.loader=new lfe}get nativeScene(){return this._nativeScene}init(){return i=this,t=void 0,n=function*(){this._nativeScene=new im},new((e=void 0)||(e=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(u){o(u)}}function l(d){try{c(n.throw(d))}catch(u){o(u)}}function c(d){d.done?s(d.value):function r(s){return s instanceof e?s:new e(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,t||[])).next())});var i,t,e,n}createRenderer(t,e,n){return new tV(this,t,e,n)}createComposerRenderer(t,e,n){return new vfe(this,t,e,n)}dispose(){this._nativeScene=new im}}const yfe=/^[og]\s*(.+)?/,xfe=/^mtllib /,wfe=/^usemtl /,Mfe=/^usemap /,iV=/\s+/,rV=new I,KE=new I,sV=new I,oV=new I,_o=new I,Kb=new Ge;function Cfe(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){const n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){const n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[t+0],r[t+1],r[t+2]),s.push(r[e+0],r[e+1],r[e+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){const e=this.vertices;this.object.geometry.vertices.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[t+0],r[t+1],r[t+2]),s.push(r[e+0],r[e+1],r[e+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(t,e,n){const r=this.vertices,s=this.object.geometry.normals;rV.fromArray(r,t),KE.fromArray(r,e),sV.fromArray(r,n),_o.subVectors(sV,KE),oV.subVectors(rV,KE),_o.cross(oV),_o.normalize(),s.push(_o.x,_o.y,_o.z),s.push(_o.x,_o.y,_o.z),s.push(_o.x,_o.y,_o.z)},addColor:function(t,e,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(t,e,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[t+0],r[t+1]),s.push(r[e+0],r[e+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const t=this.object.geometry.uvs;t.push(0,0),t.push(0,0),t.push(0,0)},addUVLine:function(t){const e=this.uvs;this.object.geometry.uvs.push(e[t+0],e[t+1])},addFace:function(t,e,n,r,s,o,a,l,c){const d=this.vertices.length;let u=this.parseVertexIndex(t,d),h=this.parseVertexIndex(e,d),p=this.parseVertexIndex(n,d);if(this.addVertex(u,h,p),this.addColor(u,h,p),void 0!==a&&""!==a){const f=this.normals.length;u=this.parseNormalIndex(a,f),h=this.parseNormalIndex(l,f),p=this.parseNormalIndex(c,f),this.addNormal(u,h,p)}else this.addFaceNormal(u,h,p);if(void 0!==r&&""!==r){const f=this.uvs.length;u=this.parseUVIndex(r,f),h=this.parseUVIndex(s,f),p=this.parseUVIndex(o,f),this.addUV(u,h,p),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(t){this.object.geometry.type="Points";const e=this.vertices.length;for(let n=0,r=t.length;n<r;n++){const s=this.parseVertexIndex(t[n],e);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(t,e){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=t.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(t[s],n));for(let s=0,o=e.length;s<o;s++)this.addUVLine(this.parseUVIndex(e[s],r))}};return i.startObject("",!1),i}class Cm extends ld{constructor(t){super(t),this.materials=null}load(t,e,n,r){const s=this,o=new fo(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(t,function(a){try{e(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(t)}},n,r)}setMaterials(t){return this.materials=t,this}parse(t){const e=new Cfe;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));const n=t.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const d=c.charAt(0);if("#"!==d)if("v"===d){const u=c.split(iV);switch(u[0]){case"v":e.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?(Kb.setRGB(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6])).convertSRGBToLinear(),e.colors.push(Kb.r,Kb.g,Kb.b)):e.colors.push(void 0,void 0,void 0);break;case"vn":e.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":e.uvs.push(parseFloat(u[1]),parseFloat(u[2]))}}else if("f"===d){const h=c.slice(1).trim().split(iV),p=[];for(let g=0,m=h.length;g<m;g++){const _=h[g];if(_.length>0){const b=_.split("/");p.push(b)}}const f=p[0];for(let g=1,m=p.length-1;g<m;g++){const _=p[g],b=p[g+1];e.addFace(f[0],_[0],b[0],f[1],_[1],b[1],f[2],_[2],b[2])}}else if("l"===d){const u=c.substring(1).trim().split(" ");let h=[];const p=[];if(-1===c.indexOf("/"))h=u;else for(let f=0,g=u.length;f<g;f++){const m=u[f].split("/");""!==m[0]&&h.push(m[0]),""!==m[1]&&p.push(m[1])}e.addLineGeometry(h,p)}else if("p"===d){const h=c.slice(1).trim().split(" ");e.addPointGeometry(h)}else if(null!==(r=yfe.exec(c))){const u=(" "+r[0].slice(1).trim()).slice(1);e.startObject(u)}else if(wfe.test(c))e.object.startMaterial(c.substring(7).trim(),e.materialLibraries);else if(xfe.test(c))e.materialLibraries.push(c.substring(7).trim());else if(Mfe.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(r=c.split(" "),r.length>1){const h=r[1].trim().toLowerCase();e.object.smooth="0"!==h&&"off"!==h}else e.object.smooth=!0;const u=e.object.currentMaterial();u&&(u.smooth=e.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}e.finalize();const s=new rs;if(s.materialLibraries=[].concat(e.materialLibraries),1==!(1===e.objects.length&&0===e.objects[0].geometry.vertices.length))for(let a=0,l=e.objects.length;a<l;a++){const c=e.objects[a],d=c.geometry,u=c.materials,h="Line"===d.type,p="Points"===d.type;let f=!1;if(0===d.vertices.length)continue;const g=new Jt;g.setAttribute("position",new ot(d.vertices,3)),d.normals.length>0&&g.setAttribute("normal",new ot(d.normals,3)),d.colors.length>0&&(f=!0,g.setAttribute("color",new ot(d.colors,3))),!0===d.hasUVIndices&&g.setAttribute("uv",new ot(d.uvs,2));const m=[];for(let b=0,v=u.length;b<v;b++){const y=u[b],R=y.name+"_"+y.smooth+"_"+f;let M=e.materials[R];if(null!==this.materials)if(M=this.materials.create(y.name),!h||!M||M instanceof fr){if(p&&M&&!(M instanceof rd)){const D=new rd({size:10,sizeAttenuation:!1});ns.prototype.copy.call(D,M),D.color.copy(M.color),D.map=M.map,M=D}}else{const D=new fr;ns.prototype.copy.call(D,M),D.color.copy(M.color),M=D}void 0===M&&(M=h?new fr:p?new rd({size:1,sizeAttenuation:!1}):new vm,M.name=y.name,M.flatShading=!y.smooth,M.vertexColors=f,e.materials[R]=M),m.push(M)}let _;if(m.length>1){for(let b=0,v=u.length;b<v;b++){const y=u[b];g.addGroup(y.groupStart,y.groupCount,b)}_=h?new zl(g,m):p?new um(g,m):new sn(g,m)}else _=h?new zl(g,m[0]):p?new um(g,m[0]):new sn(g,m[0]);_.name=c.name,s.add(_)}else if(e.vertices.length>0){const a=new rd({size:1,sizeAttenuation:!1}),l=new Jt;l.setAttribute("position",new ot(e.vertices,3)),e.colors.length>0&&void 0!==e.colors[0]&&(l.setAttribute("color",new ot(e.colors,3)),a.vertexColors=!0);const c=new um(l,a);s.add(c)}return s}}class aV extends ld{constructor(t){super(t)}load(t,e,n,r){const s=this,o=""===this.path?$l.extractUrlBase(t):this.path,a=new fo(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(l){try{e(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(t)}},n,r)}setMaterialOptions(t){return this.materialOptions=t,this}parse(t,e){const n=t.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<n.length;l++){let c=n[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const d=c.indexOf(" ");let u=d>=0?c.substring(0,d):c;u=u.toLowerCase();let h=d>=0?c.substring(d+1):"";if(h=h.trim(),"newmtl"===u)r={name:h},o[h]=r;else if("ka"===u||"kd"===u||"ks"===u||"ke"===u){const p=h.split(s,3);r[u]=[parseFloat(p[0]),parseFloat(p[1]),parseFloat(p[2])]}else r[u]=h}const a=new Sfe(this.resourcePath||e,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class Sfe{constructor(t="",e={}){this.baseUrl=t,this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:ua,this.wrap=void 0!==this.options.wrap?this.options.wrap:hr}setCrossOrigin(t){return this.crossOrigin=t,this}setManager(t){this.manager=t}setMaterials(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(t){if(!this.options)return t;const e={};for(const n in t){const r=t[n],s={};e[n]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return e}preload(){for(const t in this.materialsInfo)this.create(t)}getIndex(t){return this.nameLookup[t]}getAsArray(){let t=0;for(const e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray}create(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]}createMaterial_(t){const e=this,n=this.materialsInfo[t],r={name:t,side:this.side};function o(a,l){if(r[a])return;const c=e.getTextureParams(l,r),d=e.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(e.baseUrl,c.url));d.repeat.copy(c.scale),d.offset.copy(c.offset),d.wrapS=e.wrap,d.wrapT=e.wrap,("map"===a||"emissiveMap"===a)&&(d.colorSpace=Sr),r[a]=d}for(const a in n){const l=n[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new Ge).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new Ge).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new Ge).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[t]=new vm(r),this.materials[t]}getTextureParams(t,e){const n={scale:new _e(1,1),offset:new _e(0,0)},r=t.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(e.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(n.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(n.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),n.url=r.join(" ").trim(),n}loadTexture(t,e,n,r,s){const o=void 0!==this.manager?this.manager:vU;let a=o.getHandler(t);null===a&&(a=new ma(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(t,n,r,s);return void 0!==e&&(l.mapping=e),l}}const Efe=["previewCanvasContainer"],Afe=["previewCanvas"];function Dfe(i,t){if(1&i){const e=en();S(0,"div",10)(1,"input",11),de("change",function(){const s=nt(e).$implicit;return it($().setViewMode(s))}),A(),S(2,"label",12),H(3),A()()}if(2&i){const e=t.$implicit,n=$();k(1),T("id","view_mode_"+e)("checked",n.viewMode===e),k(1),T("for","view_mode_"+e),k(1),bn(e)}}function Tfe(i,t){if(1&i){const e=en();Si(0),S(1,"label",12),H(2),A(),S(3,"input",16),de("change",function(r){nt(e);const s=$().$implicit;return s.value=r.currentTarget.checked,it(s.change(s.value))}),A(),Ei()}if(2&i){const e=$(),n=e.index,r=e.$implicit,s=$().index;k(1),T("for","custom_control_"+s+"_"+n),k(1),bn(r.label),k(1),T("id","custom_control_"+s+"_"+n)("type",r.type)("checked",r.value)}}function kfe(i,t){if(1&i){const e=en();S(0,"div",14)(1,"label",12),H(2),A(),S(3,"input",18),de("change",function(){const s=nt(e).$implicit,o=$(2).$implicit;return o.value=s,it(o.change(o.value))}),A()()}if(2&i){const e=t.$implicit,n=$(2),r=n.index,s=n.$implicit,o=$().index;k(1),T("for","custom_control_"+o+"_"+r+"_"+e),k(1),bn(e),k(1),T("id","custom_control_"+o+"_"+r+"_"+e)("checked",s.value===e)}}function Ife(i,t){if(1&i&&(S(0,"div",17)(1,"label"),H(2),A(),Z(3,kfe,4,4,"div",13),A()),2&i){const e=$().$implicit;k(2),bn(e.label),k(1),T("ngForOf",e.options)}}function Rfe(i,t){if(1&i){const e=en();Si(0),S(1,"label",12),H(2),A(),S(3,"input",19),de("colorChange",function(r){nt(e);const s=$().$implicit,o=$(2);return s.value=o.toRGB(r.value),it(s.change(s.value))}),A(),pe(4,"ngx-mat-color-toggle",20)(5,"ngx-mat-color-picker",null,21),Ei()}if(2&i){const e=Hn(6),n=$(),r=n.index,s=n.$implicit,o=$().index;k(1),T("for","custom_control_"+o+"_"+r),k(1),bn(s.label),k(1),T("ngxMatColorPicker",e),k(1),T("for",e)}}function Pfe(i,t){if(1&i){const e=en();Si(0),S(1,"label",12),H(2),A(),S(3,"input",22),de("change",function(r){nt(e);const s=$().$implicit;return s.value=r.currentTarget.value,it(s.change(s.value))}),A(),Ei()}if(2&i){const e=$(),n=e.index,r=e.$implicit,s=$().index;k(1),T("for","custom_control_"+s+"_"+n),k(1),bn(r.label),k(1),T("id","custom_control_"+s+"_"+n)("min",r.minValue)("max",r.maxValue)("step",r.valueStep)("value",r.value)}}function Ofe(i,t){if(1&i&&(S(0,"div",14),Z(1,Tfe,4,5,"ng-container",8),Z(2,Ife,4,2,"div",15),Z(3,Rfe,7,4,"ng-container",8),Z(4,Pfe,4,7,"ng-container",8),A()),2&i){const e=t.$implicit;k(1),T("ngIf","checkbox"===e.type),k(1),T("ngIf","radio"===e.type),k(1),T("ngIf","color"===e.type),k(1),T("ngIf","slider"===e.type)}}function Ffe(i,t){if(1&i&&(Si(0),S(1,"h4"),H(2),A(),Z(3,Ofe,5,4,"div",13),Ei()),2&i){const e=t.$implicit;k(2),bn(e.title),k(1),T("ngForOf",e.controls)}}function Lfe(i,t){if(1&i){const e=en();S(0,"div",14)(1,"label",12),H(2),A(),S(3,"input",23),de("change",function(r){const o=nt(e).$implicit,a=$(2);return o.visible=r.currentTarget.checked,it(a.updateEdgeLineVisibility(o))}),A()()}if(2&i){const e=t.$implicit;k(1),T("for","visibility_"+e.name),k(1),bn(e.name),k(1),T("id","visibility_"+e.name)("checked",e.visible)}}function Nfe(i,t){if(1&i&&(Si(0),S(1,"h4"),H(2,"Objects visibility"),A(),Z(3,Lfe,4,4,"div",13),Ei()),2&i){const e=$();k(3),T("ngForOf",e.meshes)}}function Bfe(i,t){1&i&&pe(0,"mat-spinner",24)}const Ufe=function(){return["material","wireframe","unlit","edges"]},Es=i=>{i.colorSpace="srgb",i.anisotropy=8,i.magFilter=Yi,i.minFilter=Yi};let lV=(()=>{class i{cdr;get paths(){return this._paths$.getValue()}set paths(e){this._paths$.next(e)}visibilityControls=!0;groupFunction=null;customControls=[];onObjectLoaded=new Fe;_paths$=new Be(null);previewCanvasContainer;previewCanvas;destroyed$=new De;world;renderer;entity=null;controller;meshes=[];viewMode="material";originalMaterials=new Map;edgeLines=[];meshToEdgeLines=new Map;ambientLight;meshesWithViewModeMaterials=new Set;controllerManagedMaterials=new Map;constructor(e){this.cdr=e}ngAfterViewInit(){var e=this;return Se(function*(){e.world=new wv({visualScene:new qb}),yield e.world.init(),e.ambientLight=new wm(16777215,2),e.world.visualScene.nativeScene.add(e.ambientLight);let n=new Be({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera({frustrum:{near:.01,far:1e4}}),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.controller=new $se(e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement},orbiting:{sensitivityX:2,sensitivityY:2},orbitingElasticity:30}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._paths$.pipe(ke(e.destroyed$)).subscribe(function(){var s=Se(function*(o){if(e.entity&&(e.world.removeEntity(e.entity),e.entity.dispose(),e.entity=null,e.meshes=[],e.cdr.markForCheck()),o){const[a,l]=o,c=new Cm,u=yield(new aV).loadAsync(l);u.preload(),c.setMaterials(u);const h=yield c.loadAsync(a);if(e.groupFunction){const g={};for(const m of h.children){const _=e.groupFunction(m.name);g[_]||(g[_]=[]),g[_].push(m)}for(const m of Object.keys(g)){const _=new rs;_.add(...g[m]),_.name=m,h.remove(...g[m]),h.add(_)}}e.meshes=h.children.filter(g=>!(g instanceof zl)&&g.name&&""!==g.name.trim()),e.meshes.sort((g,m)=>g.name>m.name?1:-1),e.originalMaterials.clear(),e.controllerManagedMaterials.clear(),e.meshesWithViewModeMaterials.clear(),e.clearEdgeLines(),h.traverse(g=>{if(g instanceof sn){e.originalMaterials.set(g,g.material instanceof Array?[...g.material]:g.material.clone());const m=g.material instanceof Array?g.material:[g.material];for(const _ of m)_.transparent=!0,_.alphaTest=.5,_ instanceof ti&&_.map&&(_.map.wrapS=mi,_.map.wrapT=mi,Es(_.map),_.map.needsUpdate=!0)}}),e.onObjectLoaded.next(h),e.entity=new xs({object3D:new mo(h)}),e.world.addEntity(e.entity);let p={min:{x:-5,y:-5,z:-5},max:{x:5,y:5,z:5}};const f=e.entity.object3D.getBoundings();!isNaN(f.min.x)&&!isNaN(f.max.x)&&(p=f),e.controller.target=xe.scalarMult(xe.add(p.min,p.max),.5),e.controller.spherical={phi:1.22,theta:-1.32,radius:xe.dist(p.min,p.max)},e.cdr.markForCheck()}});return function(o){return s.apply(this,arguments)}}())})()}clearEdgeLines(){if(this.entity&&this.entity.object3D)for(const e of this.edgeLines)this.entity.object3D.nativeMesh.remove(e),e.geometry.dispose(),e.material.dispose();this.edgeLines=[],this.meshToEdgeLines.clear()}applyViewMode(){!this.entity||!this.entity.object3D||(this.clearEdgeLines(),this.entity.object3D.nativeMesh.traverse(e=>{if(e instanceof sn){if(!this.originalMaterials.get(e))return;switch(this.viewMode){case"material":if(this.meshesWithViewModeMaterials.has(e)){const f=this.controllerManagedMaterials.get(e);f&&(e.material=f,this.controllerManagedMaterials.delete(e)),this.meshesWithViewModeMaterials.delete(e)}this.ambientLight.intensity=2;break;case"wireframe":this.meshesWithViewModeMaterials.has(e)||this.controllerManagedMaterials.set(e,e.material);const r=this.controllerManagedMaterials.get(e)||e.material,o=(r instanceof Array?r:[r]).map(f=>new ti({color:f instanceof ti?f.color:16777215,wireframe:!0,transparent:!0,opacity:.8}));e.material=1===o.length?o[0]:o,this.meshesWithViewModeMaterials.add(e),this.ambientLight.intensity=2;break;case"unlit":this.meshesWithViewModeMaterials.has(e)||this.controllerManagedMaterials.set(e,e.material);const a=this.controllerManagedMaterials.get(e)||e.material,c=(a instanceof Array?a:[a]).map(f=>{let g=null,m=16777215;(f instanceof ti||f instanceof hU||f instanceof Uh||f instanceof vm)&&(g=f.map,m=f.color.getHex());const _=new ti({color:m,map:g,transparent:f.transparent,opacity:f.opacity});return _.map&&(_.map.wrapS=mi,_.map.wrapT=mi,Es(_.map)),_});e.material=1===c.length?c[0]:c,this.meshesWithViewModeMaterials.add(e),this.ambientLight.intensity=0;break;case"edges":if(this.meshesWithViewModeMaterials.has(e)){const f=this.controllerManagedMaterials.get(e);f&&(e.material=f,this.controllerManagedMaterials.delete(e)),this.meshesWithViewModeMaterials.delete(e)}this.ambientLight.intensity=2;const d=new iU(e.geometry),u=new fr({color:0,linewidth:2}),h=new zl(d,u);h.position.copy(e.position),h.rotation.copy(e.rotation),h.scale.copy(e.scale);let p=e.visible;e.parent&&e.parent instanceof rs&&e.parent!==this.entity.object3D.nativeMesh&&(p=p&&e.parent.visible),h.visible=p,this.entity.object3D.nativeMesh.add(h),this.edgeLines.push(h),this.meshToEdgeLines.set(e,h)}}}))}setViewMode(e){this.viewMode=e,this.applyViewMode()}updateEdgeLineVisibility(e){e instanceof sn&&this.meshToEdgeLines.has(e)?this.meshToEdgeLines.get(e).visible=e.visible:e instanceof rs&&e.traverse(n=>{n instanceof sn&&this.meshToEdgeLines.has(n)&&(this.meshToEdgeLines.get(n).visible=e.visible&&n.visible)})}toRGB(e){return(e?.r||0)<<16|(e?.g||0)<<8|(e?.b||0)}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(yn))};static \u0275cmp=Xe({type:i,selectors:[["app-obj-viewer"]],viewQuery:function(n,r){if(1&n&&(pn(Efe,5),pn(Afe,5)),2&n){let s;ft(s=mt())&&(r.previewCanvasContainer=s.first),ft(s=mt())&&(r.previewCanvas=s.first)}},inputs:{paths:"paths",visibilityControls:"visibilityControls",groupFunction:"groupFunction",customControls:"customControls"},outputs:{onObjectLoaded:"onObjectLoaded"},decls:12,vars:5,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["id","controls"],[1,"controls-list-vertical"],["class","control-item",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"control-item"],["type","radio","name","viewMode",3,"id","checked","change"],[3,"for"],["class","controls-list",4,"ngFor","ngForOf"],[1,"controls-list"],["style","width: 100%",4,"ngIf"],[3,"id","type","checked","change"],[2,"width","100%"],["type","radio",3,"id","checked","change"],["matInput","",1,"hidden",3,"ngxMatColorPicker","colorChange"],["matSuffix","",3,"for"],["picker",""],["type","range",3,"id","min","max","step","value","change"],["type","checkbox",3,"id","checked","change"],["mode","indeterminate"]],template:function(n,r){1&n&&(S(0,"div",0,1),pe(2,"canvas",2,3),S(4,"div",4)(5,"h4"),H(6,"View Mode"),A(),S(7,"div",5),Z(8,Dfe,4,4,"div",6),A(),Z(9,Ffe,4,2,"ng-container",7),Z(10,Nfe,4,1,"ng-container",8),A(),Z(11,Bfe,1,0,"mat-spinner",9),A()),2&n&&(k(8),T("ngForOf",$i(4,Ufe)),k(1),T("ngForOf",r.customControls),k(1),T("ngIf",r.visibilityControls),k(1),T("ngIf",!r.entity))},dependencies:[cr,On,mJ,$s,kc,dre,_v,LN],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]{position:absolute;right:0;top:0;padding:5px;display:flex;flex-direction:column;row-gap:10px;background-color:#333;color:#fff;max-height:calc(100% - 8px);overflow-y:auto}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]:empty{display:none}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin:0}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%]{width:100%;display:flex;-webkit-user-select:none;user-select:none;align-items:center}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{flex-grow:1}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{flex-grow:1}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list-vertical[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;-webkit-user-select:none;user-select:none;gap:5px}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list-vertical[_ngcontent-%COMP%]   .control-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.previewCanvasContainer[_ngcontent-%COMP%]   #controls[_ngcontent-%COMP%]   .controls-list-vertical[_ngcontent-%COMP%]   .control-item[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0})}return i})();function Vfe(i,t){if(1&i){const e=en();Yr(),S(0,"circle",5),de("mousedown",function(r){return nt(e),it($().startDrag(r))}),Oe(1,"async"),Oe(2,"async"),A()}if(2&i){const e=$();let n,r;xt("cx",(null==(n=Ne(1,3,e.mapPointer$))?null:n.x)||0)("cy",(null==(r=Ne(2,5,e.mapPointer$))?null:r.y)||0)("r",10)}}const zfe=function(){return{"stroke-width":3}};let ZE=(()=>{class i{ref;_roadSpline$=new Be([]);_pointer$=new Be(null);_projection$=new Be("nz");_roadSplineProjected$=new Be([]);_pointerProjected$=new Be(Tn.O);set roadSpline(e){this._roadSpline$.next(e)}set pointer(e){this._pointer$.next(e)}set projection(e){this._projection$.next(e)}splineClosed=!1;pointerChange=new Fe;svgSize$=new Be({x:100,y:100});scalingSquare$=new Be({x:0,y:0,width:100,height:100});mapPolyline$=new Be("");mapPointer$=new Be(null);isShiftPressed=!1;get trackLength$(){return this._roadSpline$.pipe(rt(e=>{let n=0;for(let r=1;r<e.length;r++)n+=xe.dist(e[r],e[r-1]);return n}))}destroyed$=new De;isDragging=!1;constructor(e){this.ref=e}projectionKeys(){switch(this._projection$.getValue()){case"nz":return["x","y","z",!1];case"z":return["x","y","z",!0];case"ny":return["x","z","y",!1];case"y":return["x","z","y",!0];case"nx":return["y","z","x",!1];case"x":return["y","z","x",!0]}}unproject(e,n){let[r,s,o,a]=this.projectionKeys(),l={x:0,y:0,z:0};return l[r]=e.x,l[s]=a?-e.y:e.y,l[o]=a?-n:n,l}projectionZ(e){let[n,r,s,o]=this.projectionKeys();return o?-e[s]:e[s]}project(e){let[n,r,s,o]=this.projectionKeys();return{x:e[n],y:o?-e[r]:e[r]}}ngAfterViewInit(){gs(window,"keydown").pipe(ke(this.destroyed$)).subscribe(n=>{"Shift"===n.key&&(this.isShiftPressed=!0)}),gs(window,"keyup").pipe(ke(this.destroyed$)).subscribe(n=>{"Shift"===n.key&&(this.isShiftPressed=!1)}),Ls([this._roadSpline$,this._projection$]).pipe(ke(this.destroyed$)).subscribe(([n,r])=>{this._roadSplineProjected$.next(n.map(s=>this.project(s)))}),Ls([this._pointer$,this._projection$]).pipe(ke(this.destroyed$)).subscribe(([n,r])=>{this._pointerProjected$.next(this.project(n||xe.O))}),this._roadSplineProjected$.pipe(ke(this.destroyed$),rt(n=>{let r={x:Number.MAX_SAFE_INTEGER,y:Number.MAX_SAFE_INTEGER},s={x:Number.MIN_SAFE_INTEGER,y:Number.MIN_SAFE_INTEGER};n.forEach(a=>{r={x:Math.min(r.x,a.x),y:Math.min(r.y,a.y)},s={x:Math.max(s.x,a.x),y:Math.max(s.y,a.y)}});const o_x=s.x-r.x,o_y=s.y-r.y;return{x:r.x-.1*o_x,y:r.y-.1*o_y,width:1.2*o_x,height:1.2*o_y}})).subscribe(this.scalingSquare$),Ls([this._roadSplineProjected$,this.scalingSquare$,this.svgSize$]).pipe(ke(this.destroyed$),rt(([n,r,s])=>{const o=n.map(a=>({x:(a.x-r.x)*s.x/r.width,y:(r.y-a.y)*s.y/r.height+s.y}));return this.splineClosed&&o.length&&o.push(o[0]),o.map(a=>Math.round(a.x)+","+Math.round(a.y)).join(" ")})).subscribe(this.mapPolyline$),Ls([this._pointerProjected$,this.scalingSquare$.asObservable(),this.svgSize$]).pipe(ke(this.destroyed$),rt(([n,r,s])=>n?{x:(n.x-r.x)*s.x/r.width,y:(r.y-n.y)*s.y/r.height+s.y}:null)).subscribe(this.mapPointer$);const e=()=>{this.svgSize$.next({x:this.ref.nativeElement.clientWidth,y:this.ref.nativeElement.clientHeight})};new ResizeObserver(e).observe(this.ref.nativeElement),e()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}startDrag(e){this.isDragging=!0,this.updatePointer(e)}drag(e){this.isDragging&&this.updatePointer(e)}endDrag(){this.isDragging=!1}getClosestProjectedLineIndex(e){const n=this._roadSplineProjected$.getValue();let r=-1,s=Number.MAX_SAFE_INTEGER;for(let d=1;d<n.length;d++){const u=n[d-1],h=Tn.sub(n[d],n[d-1]),p=Math.max(0,Math.min(1,((e.x-u.x)*h.x+(e.y-u.y)*h.y)/Tn.lenSq(h))),m=Math.hypot(e.x-(u.x+p*h.x),e.y-(u.y+p*h.y));m<s&&(s=m,r=d-1)}if(-1==r)return[-1,0];const o=n[r],l=Tn.sub(n[r+1],o);return[r,Math.max(0,Math.min(1,((e.x-o.x)*l.x+(e.y-o.y)*l.y)/Tn.lenSq(l)))]}getRoadSplineProjectionZ(e){const[n,r]=this.getClosestProjectedLineIndex(e);if(-1==n)return 0;const s=this._roadSpline$.getValue();return this.projectionZ(s[n])+r*(this.projectionZ(s[n+1])-this.projectionZ(s[n]))}updatePointer(e){const n=this.ref.nativeElement.querySelector("svg")?.getBoundingClientRect();if(n){const r={x:e.clientX-n.left,y:n.height-e.clientY+n.top},s=this.scalingSquare$.getValue(),o=this.svgSize$.getValue(),a=this._pointerProjected$.getValue()||Tn.O;let l={x:r.x*(s.width/o.x)+s.x,y:r.y*(s.height/o.y)+s.y};if(this.isShiftPressed){const d=this._roadSplineProjected$.getValue(),[u,h]=this.getClosestProjectedLineIndex(a),[p,f]=this.getClosestProjectedLineIndex(l);if(-1!==u&&-1!==p){const g=Tn.sub(a,Tn.lerp(d[u],d[u+1],h));l=Tn.add(g,Tn.lerp(d[p],d[p+1],f))}}const c=this.projectionZ(this._pointer$.getValue()||xe.O)-this.getRoadSplineProjectionZ(a);this.pointerChange.emit(this.unproject(l,c+this.getRoadSplineProjectionZ(l)))}}static \u0275fac=function(n){return new(n||i)(x(ht))};static \u0275cmp=Xe({type:i,selectors:[["app-minimap"]],inputs:{roadSpline:"roadSpline",pointer:"pointer",projection:"projection",splineClosed:"splineClosed"},outputs:{pointerChange:"pointerChange"},decls:12,vars:16,consts:[[1,"container"],["shape-rendering","geometricPrecision",3,"mousemove","mouseup","mouseleave"],[2,"fill","none","stroke","#333333",3,"ngStyle"],["fill","#e30","stroke","black","stroke-width","3","style","cursor: pointer;",3,"mousedown",4,"ngIf"],[1,"info_div"],["fill","#e30","stroke","black","stroke-width","3",2,"cursor","pointer",3,"mousedown"]],template:function(n,r){if(1&n&&(S(0,"div",0),Yr(),S(1,"svg",1),de("mousemove",function(o){return r.drag(o)})("mouseup",function(){return r.endDrag()})("mouseleave",function(){return r.endDrag()}),Oe(2,"async"),Oe(3,"async"),pe(4,"polyline",2),Oe(5,"async"),Z(6,Vfe,3,7,"circle",3),Oe(7,"async"),A(),dl(),S(8,"div",4)(9,"span"),H(10),Oe(11,"async"),A()()()),2&n){let s,o;k(1),xt("viewBox","0 0 "+(null==(s=Ne(2,5,r.svgSize$))?null:s.x)+" "+(null==(s=Ne(3,7,r.svgSize$))?null:s.y)),k(3),T("ngStyle",$i(15,zfe)),xt("points",Ne(5,9,r.mapPolyline$)),k(2),T("ngIf",Ne(7,11,r.mapPointer$)),k(4),hi("Track length (m): ",null==(o=Ne(11,13,r.trackLength$))?null:o.toFixed(2),"")}},dependencies:[On,Jg,Fr],styles:["[_nghost-%COMP%]{overflow:auto}.container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.container[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.container[_ngcontent-%COMP%]   .info_div[_ngcontent-%COMP%]{color:#838383}"],changeDetection:0})}return i})();const Hfe=["previewCanvasContainer"],$fe=["previewCanvas"];function Gfe(i,t){if(1&i&&(S(0,"mat-option",19),H(1),A()),2&i){const e=t.$implicit;T("value",e),k(1),hi(" ",e," ")}}function jfe(i,t){if(1&i){const e=en();Si(0),S(1,"mat-form-field",1)(2,"mat-label"),H(3,"Custom FAM path"),A(),pe(4,"input",20,21),Oe(6,"async"),A(),S(7,"button",22),de("click",function(){nt(e);const r=Hn(5);return it($().onFamSelected(r.value))}),H(8,"LOAD"),A(),Ei()}if(2&i){const e=$();k(4),T("value",Ne(6,1,e.previewFamLocation$))}}function Wfe(i,t){1&i&&pe(0,"mat-spinner",23),2&i&&T("diameter",40)}function Yfe(i,t){1&i&&pe(0,"mat-spinner",24)}const Xfe=function(){return["loop_chunk","num_chunks","unk0","unk1","position","unknowns0","chunks_size","rail_tex_id","num_prop_descr","num_props","unk2","unk3","prop_descr","props"]};var gd=(()=>{return(i=gd||(gd={})).ThreeModel="model",i.Bitmap="bitmap",i.TwoSidedBitmap="two_sided_bitmap",gd;var i})();class qfe extends FC{mapGraph;famPath;hideUnknownEntities$;textureLoader=new ma;terrainMaterials={};objLoader=new Cm;resource=null;isOpenedTrack=!1;constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.famPath=e,this.hideUnknownEntities$=n}_placeholder=null;_placeholderPromise=null;unknownEntities=new Set;onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe(Po(),ke(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return Se(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}_placeholderTerrain=null;_placeholderTerrainPromise=null;getPlaceholderTerrainTexture(){var t=this;return Se(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=hr,e.wrapT=mi,Es(e),e.flipY=!0,e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return Se(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(l=>{l instanceof sn&&(l.material=e.getTerrainMaterial((l.userData.name||l.name).substr((l.userData.name||l.name).lastIndexOf("_")+1).split(".")[0]))});let r=+t.path.split("_")[t.path.split("_").length-1],s=(e.resource.data.props||[]).filter(l=>l.road_point_idx>=4*r&&l.road_point_idx<4*(r+1)).map(l=>({...l,...e.resource.data.prop_descr[l.prop_descr_idx],position:xe.add({x:l.position.x,y:l.position.z,z:l.position.y},{x:e.resource.data.road_spline[l.road_point_idx].position.x,y:e.resource.data.road_spline[l.road_point_idx].position.z,z:e.resource.data.road_spline[l.road_point_idx].position.y}),rotation:ai.fromAngle(xe.nZ,l.rotation+e.resource.data.road_spline[l.road_point_idx].orientation)}));const o=(yield Promise.all(s.map(l=>e.loadPropInternal(l)))).filter(l=>!!l),a=new xs({object3D:new mo(n)});return e.addChildren(a,...o),e.loaded.set(t,[a,...o]),[[a,...o],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new ti({side:Cr,transparent:!0,visible:!1}),this.famPath?this.textureLoader.loadAsync(`${this.famPath}/${t}.png`).then(e=>{e.wrapS=hr,e.wrapT=mi,Es(e),e.flipY=!0,this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}loadPropInternal(t){var e=this;return Se(function*(){let n=!1;if(t.type==gd.ThreeModel){let r;try{if(!e.famPath)throw new Error;const o=new aV,a=new Cm,l=yield o.loadAsync(`${e.famPath}/props/${t.data.data.resource_id}/0/material.mtl`);l.preload(),a.setMaterials(l),r=new mo(yield a.loadAsync(`${e.famPath}/props/${t.data.data.resource_id}/0/geometry.obj`))}catch{n=!0,r=e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:5},{diffuse:yield e.getPlaceholderTexture()})}r.nativeMesh.traverse(o=>{if(o instanceof sn){const a=o.material instanceof Array?o.material:[o.material];for(const l of a)l.transparent=!0,l.alphaTest=.5,l instanceof ti&&l.map&&(l.map.wrapS=mi,l.map.wrapT=mi,Es(l.map),l.map.needsUpdate=!0)}});const s=new xs({object3D:r});return s.position=t.position,s.rotation=t.rotation,n&&(e.unknownEntities.add(s),s.visible=!e.hideUnknownEntities$.getValue()),e.world.addEntity(s),s}if(t.type==gd.Bitmap||t.type==gd.TwoSidedBitmap){const r=(c,d)=>new Array(d).fill(null).map((u,h)=>e.isOpenedTrack?`${Math.floor(c/4)+h}/0000`:`0/${(Math.floor(c/4)+h).toString().padStart(2,"0")}00`).join(";"),s=new rs,[o,a]=yield e.loadTexturePlaneProp(r(t.data.data.resource_id,t.flags.is_animated?t.data.data.frame_count:1),{x:t.data.data.width,y:t.data.data.height},t.data.data.animation_interval);if(s.add(o),t.type==gd.TwoSidedBitmap){const[c,d]=yield e.loadTexturePlaneProp(r(t.data.data.resource_id_2,1),{x:t.data.data.width_2,y:t.data.data.height},t.data.data.animation_interval);c.rotateY(Math.PI/2),c.position.x=t.data.data.width/2,c.position.y=t.data.data.width_2/2,s.add(c)}const l=new xs({object3D:new mo(s)});return l.position=t.position,l.rotation=t.rotation,a&&(e.unknownEntities.add(l),l.visible=!e.hideUnknownEntities$.getValue()),l}return null})()}loadTexturePlaneProp(t,e,n){var r=this;return Se(function*(){const s=t.split(";"),o=yield r.getPlaceholderTexture();let a=!1,l=[];r.famPath?l=yield Promise.all(s.map(u=>r.textureLoader.loadAsync(`${r.famPath}/foreground/${u}.png`).catch(()=>(a=!0,o)))):(a=!0,l=s.map(()=>o));const c=l.map(u=>(Es(u),new ti({map:u,alphaTest:.5,transparent:!0,side:Cr}))),d=new sn(new Kc(e.x,e.y),c[0]);if(d.rotateX(Math.PI/2),d.position.set(0,0,e.y/2),c.length>1){let u=-1;Bc(r.world).pipe(function Zse(i,t=lf,e){const n=rM(i,t);return function Kse(i,t){return ii((e,n)=>{const{leading:r=!0,trailing:s=!1}=t??{};let o=!1,a=null,l=null,c=!1;const d=()=>{l?.unsubscribe(),l=null,s&&(p(),c&&n.complete())},u=()=>{l=null,c&&n.complete()},h=f=>l=mr(i(f)).subscribe(Zn(n,d,u)),p=()=>{if(o){o=!1;const f=a;a=null,n.next(f),!c&&h(f)}};e.subscribe(Zn(n,f=>{o=!0,a=f,(!l||l.closed)&&(r?p():h(f))},()=>{c=!0,(!(s&&o&&l)||l.closed)&&n.complete()}))})}(()=>n,e)}(n&&!isNaN(+n)?1e3*+n:250)).subscribe(()=>{u=(u+1)%c.length,d.material=c[u]})}return[d,a]})()}}let Kfe=(()=>{class i{eelDelegate;cdr;mainService;previewCanvasContainer;previewCanvas;get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}_resource$=new Be(null);changed=new Fe;previewLoading$=new Be(!0);previewFamLocation$=new Be(null);previewFamLoading$=new Be(!1);terrainChunksObjLocation;pointer$=new Be(null);selectedSplineIndex$=new Be(0);selectedSplineItem$=new Be(null);selectedAiInfoItem$=new Be(null);selectedTerrainItem$=new Be(null);famPath=null;name="";world;renderer=null;map=null;isOpenedTrack=!0;controller;roadPath=null;skySphere;selectionSphere;destroyed$=new De;constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r}get previewFamPossibleLocations(){const e=this.resource?.id;return e?[e.substring(0,e.indexOf("MISC"))+"ETRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_001.FAM",e.substring(0,e.indexOf("MISC"))+"GTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_001.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_M01.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_R01.FAM",e.substring(0,e.indexOf("MISC"))+"NTRACKFM"+e.substr(e.indexOf("MISC")+4,4)+"_T01.FAM"]:[]}get roadSpline(){return(this.resource?.data.road_spline||[]).filter((e,n)=>n<(4*this.resource?.data.num_chunks||0)).map(e=>({x:e.position.x,y:e.position.z,z:e.position.y}))||[]}ngAfterViewInit(){var e=this;return Se(function*(){e.world=new wv({visualScene:new qb}),yield e.world.init(),e.skySphere=new xs({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})}),e.skySphere.object3D.nativeMesh.material.side=Cr,e.world.addEntity(e.skySphere),e.selectionSphere=new xs({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})}),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new wm(16777215,2));let n=new Be({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=ai.lookAt(e.renderer.camera.position,xe.add(e.renderer.camera.position,xe.Y),xe.Z),Bc(e.world).pipe(ke(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new LC(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",cameraLinearSpeed:40,cameraBoostMultiplier:4,cameraMovementElasticity:100,cameraRotationElasticity:30,ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var s=Se(function*(o){e.previewLoading$.next(!0),yield e.loadTerrainChunks(o?.id),yield e.loadPreview(),e.previewFamPossibleLocations[0]&&(e.previewFamLocation$.next(e.previewFamPossibleLocations[0]),yield e.onFamSelected(e.previewFamPossibleLocations[0])),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(ke(e.destroyed$),Qt(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),Vs(3e3)).subscribe(Se(function*(){e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(ke(e.destroyed$),Vs(250)).subscribe(s=>{if(e.resource){const o=e.resource.data.road_spline[s];if(!o)return;const a={x:o.position.x,y:o.position.z,z:o.position.y};e.selectionSphere.position=a,e.renderer&&(e.renderer.position=xe.add(a,xe.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-e.resource.data.road_spline[s].orientation)),e.renderer.rotation=ai.lookAt(e.renderer.position,a,{x:0,y:0,z:1}),e.controller.reset())}e.selectedSplineItem$.next({id:ys(e.resource.id,`road_spline/${s}`),data:e.resource.data.road_spline[s],schema:(e.resource.schema.fields||[]).find(o=>"road_spline"===o.name)?.schema.child_schema,name:""}),e.selectedAiInfoItem$.next({id:ys(e.resource.id,`ai_info/${Math.floor(s/4)}`),data:e.resource.data.ai_info[Math.floor(s/4)],schema:(e.resource.schema.fields||[]).find(o=>"ai_info"===o.name)?.schema.child_schema,name:""}),e.selectedTerrainItem$.next({id:ys(e.resource.id,`terrain/${Math.floor(s/4)}`),data:e.resource.data.terrain[Math.floor(s/4)],schema:(e.resource.schema.fields||[]).find(o=>"terrain"===o.name)?.schema.child_schema,name:""})})})()}onFamSelected(e){var n=this;return Se(function*(){if("custom"!=e&&n.famPath!=e){n.previewFamLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1}),s=new ma,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=No,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.famPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.famPath=null}finally{n.previewFamLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return Se(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}onPointerChange(e){this.renderer&&(this.renderer.position=e)}loadPreview(){var e=this;return Se(function*(){if(e.roadPath=e.resource?.data.road_spline.map(r=>({x:r.position.x,y:r.position.z,z:r.position.y})).filter((r,s)=>s%4==0).slice(0,e.resource.data.num_chunks)||null,e.isOpenedTrack=0===e.resource?.data.loop_chunk,!e.terrainChunksObjLocation||!e.roadPath)return;const n=Uc.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!e.isOpenedTrack);e.unloadPreview(),e.map=new qfe(n,e.famPath&&"resources/"+e.famPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=e.isOpenedTrack,Bc(e.world).pipe(ke(e.destroyed$)).subscribe(()=>{e.map&&e.renderer&&e.map.loaderCursor$.next(e.renderer.position)}),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(yn),x(Jr))};static \u0275cmp=Xe({type:i,selectors:[["app-tri-map-block-ui"]],viewQuery:function(n,r){if(1&n&&(pn(Hfe,5),pn($fe,5)),2&n){let s;ft(s=mt())&&(r.previewCanvasContainer=s.first),ft(s=mt())&&(r.previewCanvas=s.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:49,vars:44,consts:[[1,"famSelector"],["appearance","fill"],[3,"value","valueChange"],["famSelect",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],[4,"ngIf"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed","projection","pointerChange"],[3,"resource","hideBlockActions"],[3,"resource","hideBlockActions","fieldWhitelist"],[3,"value"],["matInput","","type","text",3,"value"],["customFamInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(n,r){if(1&n&&(S(0,"div",0)(1,"h4"),H(2,"Preview *.FAM file"),A(),S(3,"mat-form-field",1)(4,"mat-label"),H(5,"Current preview FAM"),A(),S(6,"mat-select",2,3),de("valueChange",function(o){return r.onFamSelected(o)}),Oe(8,"async"),Oe(9,"async"),Z(10,Gfe,2,2,"mat-option",4),S(11,"mat-option",5),H(12,"custom"),A()()(),Z(13,jfe,9,3,"ng-container",6),Z(14,Wfe,1,1,"mat-spinner",7),Oe(15,"async"),A(),S(16,"div",8)(17,"div",9,10),pe(19,"canvas",11,12),Z(21,Yfe,1,0,"mat-spinner",13),Oe(22,"async"),A(),S(23,"div",14,10)(25,"mat-form-field",1)(26,"mat-label"),H(27,"Spline item"),A(),S(28,"input",15),de("ngModelChange",function(o){return r.selectedSplineIndex$.next(o)}),Oe(29,"async"),Oe(30,"async"),A()(),S(31,"app-minimap",16),de("pointerChange",function(o){return r.onPointerChange(o)}),Oe(32,"async"),A()()(),S(33,"h4"),H(34,"Road spline item"),A(),pe(35,"app-compound-block-ui",17),Oe(36,"async"),S(37,"h4"),H(38,"AI info (block for 4 spline items)"),A(),pe(39,"app-compound-block-ui",17),Oe(40,"async"),S(41,"h4"),H(42,"Terrain (block for 4 spline items)"),A(),pe(43,"app-compound-block-ui",17),Oe(44,"async"),S(45,"h4"),H(46,"Common"),A(),pe(47,"app-compound-block-ui",18),Oe(48,"async")),2&n){const s=Hn(7);let o;k(6),T("value",r.previewFamPossibleLocations.includes(Ne(8,21,r.previewFamLocation$))?Ne(9,23,r.previewFamLocation$):"custom"),k(4),T("ngForOf",r.previewFamPossibleLocations),k(3),T("ngIf","custom"==s.value),k(1),T("ngIf",Ne(15,25,r.previewFamLoading$)),k(7),T("ngIf",Ne(22,27,r.previewLoading$)),k(7),T("min",0)("max",4*(null==(o=Ne(29,29,r._resource$))?null:o.data.num_chunks)-1)("ngModel",Ne(30,31,r.selectedSplineIndex$)),k(3),T("roadSpline",r.roadSpline)("pointer",Ne(32,33,r.pointer$))("splineClosed",!r.isOpenedTrack)("projection","nz"),k(4),T("resource",Ne(36,35,r.selectedSplineItem$))("hideBlockActions",!0),k(4),T("resource",Ne(40,37,r.selectedAiInfoItem$))("hideBlockActions",!0),k(4),T("resource",Ne(44,39,r.selectedTerrainItem$))("hideBlockActions",!0),k(4),T("resource",Ne(48,41,r._resource$))("hideBlockActions",!0)("fieldWhitelist",$i(43,Xfe))}},dependencies:[cr,On,_s,la,Hs,$a,Ha,aa,vs,xr,$s,Oo,Rc,wl,kc,Fo,ZE,Fr],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.famSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.famSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.famSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.famSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .famSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0})}return i})();const cV=i=>new Promise(t=>setTimeout(t,i)),dV=(i,t,e=null)=>{const n=document.createElement("canvas"),r=n.getContext("2d",{willReadFrequently:!0}),s=i.width,o=i.height;n.width=s,n.height=o,r.drawImage(i,0,0,s,o);const a=r.getImageData(0,0,s,o);for(let l=0;l<a.data.length;l+=4)t(a.data,l);r.putImageData(a,0,0),(e||i).src=n.toDataURL("image/png"),n.remove()};class Qfe{mesh;tailLightsTexColor;assetsPath;originalTexWithTailLights=null;tyreMaterial=null;texWithTailLightsImg=null;texWithTailLights=null;tailLightColors=[0,0];tyreTextures=[];tyreTextureUpdateTimer=void 0;wheels=[];wheelIdlePositions=[];frontWheels=[];_tailLightsOn=!1;get tailLightsOn(){return this._tailLightsOn}set tailLightsOn(t){t!==this._tailLightsOn&&(this._tailLightsOn=t,this.recolorTailLights(this.tailLightColors[t?1:0]))}_speed="idle";get speed(){return this._speed}set speed(t){if(t!==this._speed){switch(this._speed=t,this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),t){case"idle":this.tyreMaterial.map=this.tyreTextures[0];break;case"slow":let e=!0;this.tyreTextureUpdateTimer=setInterval(()=>{this.tyreMaterial.map=this.tyreTextures[e?1:2],this.tyreMaterial.needsUpdate=!0,e=!e},16);break;case"fast":this.tyreMaterial.map=this.tyreTextures[3]}this.tyreMaterial.needsUpdate=!0}}_steeringAngle=0;get steeringAngle(){return this._steeringAngle}set steeringAngle(t){if(t!==this._steeringAngle){this._steeringAngle=t;for(const e of this.frontWheels)e.rotation.set(0,0,t)}}constructor(t,e,n){this.mesh=t,this.tailLightsTexColor=e,this.assetsPath=n;const r=[];if(this.wheels=[null,null,null,null],this.frontWheels=[null,null],t.traverse(o=>{if(!(o instanceof sn))return;let a=-1;if(o.name.startsWith("lbl__rt_frnt")?a=0:o.name.startsWith("lbl__lt_frnt")?a=1:o.name.startsWith("lbl__rt_rear")?a=2:o.name.startsWith("lbl__lt_rear")&&(a=3),a>-1){this.wheels[a]=o,a<2&&(this.frontWheels[a]=o),o.geometry.boundingBox||o.geometry.computeBoundingBox();const l=xe.avg(o.geometry.boundingBox.min,o.geometry.boundingBox.max);o.geometry.translate(...xe.spr(xe.neg(l))),o.position.set(...xe.spr(l)),this.wheelIdlePositions[a]=l}(o.name.includes("rsid")||o.name.includes("lite"))&&(r.push(o),this.originalTexWithTailLights=o.material.map)}),!this.originalTexWithTailLights)throw new Error("Not a driveable NFS1 car");this.tailLightColors=n.includes("TRAFFC.CFM")?[9509903,16711680]:[3212546,16258068],this.texWithTailLightsImg=document.createElement("img"),this.texWithTailLights=new Cs(this.texWithTailLightsImg),this.texWithTailLights.flipY=this.originalTexWithTailLights.flipY,Es(this.texWithTailLights),this.recolorTailLights(this.tailLightColors[0]).then();for(const o of r)o.material.map=this.texWithTailLights;const s=new ma;this.tyreTextures=[1,2,3,4].map(o=>s.load(`${n}/tyr${o}.png`));for(const o of this.tyreTextures)Es(o);this.tyreMaterial=new ti({map:this.tyreTextures[0]}),this.tyreMaterial.transparent=!0,this.tyreMaterial.alphaTest=.5,this.tyreMaterial.map.wrapS=mi,this.tyreMaterial.map.wrapT=mi,this.tyreMaterial.polygonOffset=!0,this.tyreMaterial.polygonOffsetFactor=-4;for(const o of this.wheels)o.material=this.tyreMaterial}recolorTailLights(t){var e=this;return Se(function*(){if(e.originalTexWithTailLights&&e.texWithTailLights&&e.texWithTailLightsImg){for(let n=100;n>0&&!e.originalTexWithTailLights.source.data;n--)yield cV(50);((i,t,e,n=null)=>{const[r,s,o]=[t>>16,t>>8&255,255&t],[a,l,c]=[e>>16,e>>8&255,255&e];dV(i,(d,u)=>{d[u]==r&&d[u+1]==s&&d[u+2]==o&&(d[u]=a,d[u+1]=l,d[u+2]=c)},n)})(e.originalTexWithTailLights.source.data,e.tailLightsTexColor,t,e.texWithTailLightsImg),e.texWithTailLights.needsUpdate=!0}})()}dispose(){this.texWithTailLightsImg&&(this.texWithTailLightsImg.remove(),this.texWithTailLightsImg=null),this.texWithTailLights&&(this.texWithTailLights.dispose(),this.texWithTailLights=null),this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),this.tyreMaterial&&(this.tyreMaterial.dispose(),this.tyreMaterial=null)}}let Jfe=(()=>{class i{eelDelegate;mainService;cdr;get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}_resource$=new Be(null);changed=new Fe;previewPaths$=new Be(null);destroyed$=new De;customControls=[];constructor(e,n,r){this.eelDelegate=e,this.mainService=n,this.cdr=r}ngAfterViewInit(){var e=this;return Se(function*(){e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var n=Se(function*(r){e.previewPaths$.next(yield e.loadPreviewFilePaths(r?.id))});return function(r){return n.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(ke(e.destroyed$),Qt(([n,r])=>!!e.resource&&n.startsWith(e.resource.id)),Vs(1500)).subscribe(Se(function*(){e.previewPaths$.next(null),e.previewPaths$.next(yield e.postTmpUpdates(e.resource?.id))}))})()}onObjectLoaded(e){var n=this;return Se(function*(){if((n._resource$.value?.id||"").includes(".CFM__"))try{const r=n.resource?.id.split("/");r.pop(),r[r.length-1]=""+(+r[r.length-1]+1);const s=yield n.eelDelegate.retrieveValue(r.join("/")+"/data"),o=s.children_aliases.findIndex(l=>"!PAL"===l);if(-1==o)throw new Error("Not a car");const a=new Qfe(e,s.children[o].data.colors[254]>>>8,n.previewPaths$.value[0].substring(0,n.previewPaths$.value[0].lastIndexOf("/"))+"/assets");n.customControls=[{title:"TNFS car features",controls:[{label:"Brake lights on",type:"checkbox",value:!1,change:l=>{a.tailLightsOn=l}},{label:"Car speed",type:"radio",options:["idle","slow","fast"],value:"idle",change:l=>{a.speed=l}},{label:"Steering angle",type:"slider",minValue:-.7,maxValue:.7,valueStep:.05,value:0,change:l=>{a.steeringAngle=l}}]}],n.cdr.markForCheck()}catch{}})()}serializerSettings={geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1};postTmpUpdates(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}loadPreviewFilePaths(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResource(e,n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(Jr),x(yn))};static \u0275cmp=Xe({type:i,selectors:[["app-orip-geometry-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:4,vars:7,consts:[[3,"paths","customControls","onObjectLoaded"],[3,"resource"]],template:function(n,r){1&n&&(S(0,"app-obj-viewer",0),de("onObjectLoaded",function(o){return r.onObjectLoaded(o)}),Oe(1,"async"),A(),pe(2,"app-compound-block-ui",1),Oe(3,"async")),2&n&&(T("paths",Ne(1,3,r.previewPaths$))("customControls",r.customControls),k(2),T("resource",Ne(3,5,r._resource$)))},dependencies:[Fo,lV,Fr],changeDetection:0})}return i})();const uV=i=>{let t=i.block_class_mro.split("__")[0];return"ArrayBlock"===t?uV(i.child_schema)+"[]":t},eme=["class","block-ui"];function tme(i,t){if(1&i&&(S(0,"mat-label",7),H(1),A()),2&i){const e=$(2);T("matTooltip",e.resourceDescription),k(1),hi("",null==e.resource?null:e.resource.name," ")}}function nme(i,t){if(1&i&&(S(0,"mat-option",8),H(1),A()),2&i){const e=t.$implicit,n=t.index,r=$(2);T("value",n)("disabled",r.disabled),k(1),hi(" ",r.blockClassStr(e)," ")}}function ime(i,t){if(1&i){const e=en();Si(0),Z(1,tme,2,2,"mat-label",1),Oe(2,"async"),Oe(3,"async"),S(4,"div",2)(5,"mat-label"),H(6,"Resource type:"),A(),S(7,"mat-select",3),de("selectionChange",function(r){return nt(e),it($().setChoiceIndex(r.value))}),Z(8,nme,2,3,"mat-option",4),A(),pe(9,"app-block-actions",5),A(),pe(10,"app-editor",6),Ei()}if(2&i){const e=$();let n;k(1),T("ngIf",(null==e.resource?null:e.resource.name)&&(null==e.resource?null:e.resource.name)!=(null==(n=Ne(2,8,e.main.resource$))?null:n.name)&&(null==e.resource?null:e.resource.name)!=(null==(n=Ne(3,10,e.navigation.resourceToRender$))?null:n.name)),k(6),T("value",e.resourceData.choice_index)("disabled",e.disabled),k(1),T("ngForOf",e.resource.schema.possible_resource_schemas),k(1),T("resource",e.childResource),k(1),T("resource",e.childResource)("hideBlockActions",!0)("disabled",e.disabled)}}let hV=(()=>{class i{main;navigation;_resource=null;get resource(){return this._resource}set resource(e){const n=!this._resource||!e||this._resource.id!==e.id;this._resource=e,n&&(this.choiceDataCaches=new Array(this._resource?.schema.possible_resource_schemas||0).fill(null),this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this._resource.data.data)),this.updateChild()}resourceDescription="";hideBlockActions=!1;disabled=!1;childResource=null;choiceDataCaches=[];get resourceData(){return this._resource?.data||null}constructor(e,n){this.main=e,this.navigation=n}setChoiceIndex(e){this._resource&&(this.choiceDataCaches[this._resource.data.choice_index]=this.childResource.data,this._resource.data.choice_index=e,this._resource.data.data=this.choiceDataCaches[e],this.updateChild(),this.changed.emit())}updateChild(){this.childResource=this._resource?{...this._resource,id:ys(this._resource.id,"data"),data:this.choiceDataCaches[this._resource.data.choice_index],name:"",schema:this._resource.schema.possible_resource_schemas[this._resource.data.choice_index]}:null}changed=new Fe;blockClassStr=uV;static \u0275fac=function(n){return new(n||i)(x(Jr),x(Ic))};static \u0275cmp=Xe({type:i,selectors:[["app-delegate",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled"},outputs:{changed:"changed"},attrs:eme,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["id","resource-type-container"],[3,"value","disabled","selectionChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"resource"],[3,"resource","hideBlockActions","disabled"],["matTooltipPosition","above",3,"matTooltip"],[3,"value","disabled"]],template:function(n,r){1&n&&Z(0,ime,11,12,"ng-container",0),2&n&&T("ngIf",r.resourceData)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;row-gap:1rem}#resource-type-container[_ngcontent-%COMP%]{display:flex;column-gap:.5rem;align-items:center}#resource-type-container[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{flex-shrink:0}"],changeDetection:0})}return i})();var rme=O(5940),sme=O.n(rme);const ome=["class","block-ui"];function ame(i,t){if(1&i&&(S(0,"mat-label",7),H(1),A()),2&i){const e=$(2);T("matTooltip",e.resourceDescription),k(1),hi(" ",e.resource.name," ")}}function lme(i,t){if(1&i){const e=en();Si(0),Z(1,ame,2,2,"mat-label",1),S(2,"mat-selection-list",2),de("selectionChange",function(r){return nt(e),it($().onSelection(r))}),S(3,"mat-list-option",3),H(4," Left "),A(),S(5,"mat-list-option",4),H(6," Right "),A()(),S(7,"mat-form-field",5)(8,"mat-label"),H(9,"Texture ID"),A(),S(10,"input",6),de("ngModelChange",function(r){return nt(e),it($().resource.data.texture_id=r)})("change",function(){return nt(e),it($().changed.emit())}),A()(),Ei()}if(2&i){const e=$();k(1),T("ngIf",e.resource.name),k(2),T("selected",e.resource.data.has_left_fence),k(2),T("selected",e.resource.data.has_right_fence),k(5),T("max",63)("min",0)("step",1)("ngModel",e.resource.data.texture_id)}}let cme=(()=>{class i{resource=null;resourceDescription="";changed=new Fe;onSelection(e){for(const n of e.options)this.resource.data[n.value]=n.selected;this.changed.emit()}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-fence-type",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},attrs:ome,decls:1,vars:1,consts:[[4,"ngIf"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[3,"selectionChange"],["value","has_left_fence",3,"selected"],["value","has_right_fence",3,"selected"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","ngModel","ngModelChange","change"],["matTooltipPosition","above",3,"matTooltip"]],template:function(n,r){1&n&&Z(0,lme,11,7,"ng-container",0),2&n&&T("ngIf",r.resource)},dependencies:[On,_s,la,Hs,$a,Ha,aa,vs,xr,$s,wr,yv,bv],changeDetection:0})}return i})(),dme=(()=>{class i{_resource=null;get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!n)return;let r=this.resourceData.items_descr.map((s,o)=>[s,o]).filter(([s,o])=>s>0).map(([s,o])=>o);for(let s=0;s<this.resourceData.children.length;s++)this.resourceMap["0x"+r[s].toString(16)]={id:ys(this._resource?.id||"",`children/${s}`),data:this.resourceData.children[s],schema:n,name:""}}get resourceData(){return this._resource?.data}resourceMap={};changed=new Fe;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-soundbank-block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resources"]],template:function(n,r){1&n&&pe(0,"app-sidenav-res-list",0),2&n&&T("resources",r.resourceMap)},dependencies:[vv],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}"],changeDetection:0})}return i})();const ume=["class","dialog"];function hme(i,t){if(1&i&&(S(0,"mat-form-field",7)(1,"mat-label"),H(2),A(),pe(3,"input",8),A()),2&i){const e=t.$implicit;k(2),bn(e.title),k(1),T("id",e.id)("type",e.type)("formControlName",e.id)}}let pme=(()=>{class i{dialogRef;fb;data;argsForm;constructor(e,n,r){this.dialogRef=e,this.fb=n,this.data=r;const s={};for(const o of r.args)s[o.id]=["",zs.required];this.argsForm=this.fb.group(s)}submit(){const e=this.argsForm.value;for(const n of this.data.args)"number"==n.type&&(e[n.id]=+e[n.id]);this.dialogRef.close(e)}static \u0275fac=function(n){return new(n||i)(x(Mc),x(tC),x(TM))};static \u0275cmp=Xe({type:i,selectors:[["app-run-custom-action",8,"dialog"]],attrs:ume,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(n,r){1&n&&(S(0,"h1",0),H(1),A(),S(2,"div",1)(3,"p"),H(4),A()(),S(5,"form",2),Z(6,hme,4,4,"mat-form-field",3),A(),S(7,"div",4)(8,"button",5),de("click",function(){return r.dialogRef.close()}),H(9,"Cancel"),A(),S(10,"button",6),de("click",function(){return r.submit()}),H(11,"Run"),A()()),2&n&&(k(1),hi('Run action "',r.data.title,'"'),k(3),bn(r.data.description),k(1),T("formGroup",r.argsForm),k(1),T("ngForOf",r.data.args),k(4),T("disabled",r.argsForm.invalid))},dependencies:[cr,Oo,kM,IM,RM,vs,xr,$s,Tf,_s,Hs,wf,za,Vu],styles:["form[_ngcontent-%COMP%]{padding:0 24px}"]})}return i})();function fme(i,t){if(1&i){const e=en();S(0,"button",7),de("click",function(){return nt(e),it($(2).deserialize())}),pe(1,"mat-icon",8),A()}}function mme(i,t){if(1&i){const e=en();Si(0),Z(1,fme,2,0,"button",4),S(2,"button",5),de("click",function(){return nt(e),it($().serializeBlockReversible())}),pe(3,"mat-icon",6),A(),Ei()}if(2&i){const e=$();k(1),T("ngIf",e.isInReversibleSerializationState),k(1),T("disabled",e.isInReversibleSerializationState)}}function gme(i,t){1&i&&(S(0,"button",9),pe(1,"mat-icon",10),A()),2&i&&($(),T("matMenuTriggerFor",Hn(3)))}function _me(i,t){if(1&i){const e=en();S(0,"button",11),de("click",function(){const s=nt(e).$implicit;return it($().runCustomAction(s))}),S(1,"span"),H(2),A()()}if(2&i){const e=t.$implicit;k(2),bn(e.title)}}const vme=function(){return[]};let Zb=(()=>{class i{mainService;eelDelegate;cdr;dialog;snackBar;resource=null;isInReversibleSerializationState=!1;constructor(e,n,r,s,o){this.mainService=e,this.eelDelegate=n,this.cdr=r,this.dialog=s,this.snackBar=o}serializeBlockReversible(){var e=this;return Se(function*(){if(!e.resource)return;const[n,r]=yield e.eelDelegate.serializeReversible(e.resource.id,[]),s=n.reduce((o,a)=>{let l=0;for(;l<o.length&&l<a.length&&o[l]===a[l];)l++;return o.substring(0,l)});yield e.eelDelegate.openFileWithSystemApp(s),e.isInReversibleSerializationState=r,e.cdr.markForCheck()})()}deserialize(){var e=this;return Se(function*(){e.resource&&(yield e.mainService.deserializeResource(e.resource.id),e.isInReversibleSerializationState=!1,e.cdr.markForCheck())})()}runCustomAction(e){var n=this;return Se(function*(){if(n.mainService.hasUnsavedChanges){let o=n.dialog.open(Q2,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield W_(o.afterClosed())))return;try{yield n.mainService.saveResource(),n.snackBar.open("File Saved!","OK",{duration:1500})}catch(a){n.snackBar.open("Error while saving file! "+a.errorText,"OK :(",{duration:5e3})}}let r=n.dialog.open(pme,{data:e});const s=yield W_(r.afterClosed());if(s)try{yield n.mainService.runCustomAction(n.resource.id,e,s),n.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){n.mainService.clearUnsavedChanges(),n.mainService.reloadResource().then(()=>n.cdr.markForCheck()),n.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}static \u0275fac=function(n){return new(n||i)(x(Jr),x(bs),x(yn),x(Cc),x(hv))};static \u0275cmp=Xe({type:i,selectors:[["app-block-actions"]],inputs:{resource:"resource"},decls:5,vars:4,consts:[[4,"ngIf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Serialize to common format",3,"disabled","click"],["fontIcon","download"],["mat-icon-button","","matTooltip","Deserialize back from common format",3,"click"],["fontIcon","upload"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(n,r){1&n&&(Z(0,mme,4,2,"ng-container",0),Z(1,gme,2,1,"button",1),S(2,"mat-menu",null,2),Z(4,_me,3,1,"button",3),A()),2&n&&(T("ngIf",null==r.resource||null==r.resource.schema?null:r.resource.schema.serializable_to_disc),k(1),T("ngIf",(null==r.resource||null==r.resource.schema.custom_actions?null:r.resource.schema.custom_actions.length)>0),k(3),T("ngForOf",(null==r.resource?null:r.resource.schema.custom_actions)||$i(3,vme)))},dependencies:[cr,On,j_,$u,wr,sN,Lf,lN],styles:["[_nghost-%COMP%]{display:flex}"]})}return i})();const bme=["class","block-ui"];function yme(i,t){if(1&i&&(S(0,"mat-label",7),H(1),A()),2&i){const e=$();T("matTooltip",e.resourceDescription),k(1),hi("",null==e.resource?null:e.resource.name," ")}}function xme(i,t){if(1&i&&(S(0,"audio",8),pe(1,"source",9),Oe(2,"async"),H(3," Your browser does not support the audio element. "),A()),2&i){const e=$();k(1),T("src",Ne(2,1,e.audioUrl$),hg)}}function wme(i,t){1&i&&pe(0,"mat-spinner",10)}function Mme(i,t){1&i&&pe(0,"app-block-actions",11),2&i&&T("resource",$().resource)}const Cme=function(){return["wave_data"]};let Sme=(()=>{class i{eelDelegate;main;navigation;_resource$=new Be(null);audioUrl$=new Be(null);set resource(e){this._resource$.next(e)}get resource(){return this._resource$.getValue()}resourceDescription="";hideBlockActions=!1;destroyed$=new De;changed=new Fe;constructor(e,n,r){this.eelDelegate=e,this.main=n,this.navigation=r}ngAfterViewInit(){var e=this;return Se(function*(){e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var n=Se(function*(r){if(e.audioUrl$.next(null),r){const s=yield e.eelDelegate.serializeResource(r.id);e.audioUrl$.next(s.find(o=>o.endsWith(".wav"))||null)}});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(Jr),x(Ic))};static \u0275cmp=Xe({type:i,selectors:[["app-eacs-audio",8,"block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions"},outputs:{changed:"changed"},attrs:bme,decls:12,vars:18,consts:[["id","header"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["controls","",4,"ngIf"],["mode","indeterminate",4,"ngIf"],[1,"flex-spacer"],[3,"resource",4,"ngIf"],[3,"resource","hideBlockActions","fieldBlacklist"],["matTooltipPosition","above",3,"matTooltip"],["controls",""],[3,"src"],["mode","indeterminate"],[3,"resource"]],template:function(n,r){if(1&n&&(S(0,"div",0),Z(1,yme,2,2,"mat-label",1),Oe(2,"async"),Oe(3,"async"),Z(4,xme,4,3,"audio",2),Oe(5,"async"),Z(6,wme,1,0,"mat-spinner",3),Oe(7,"async"),pe(8,"div",4),Z(9,Mme,1,1,"app-block-actions",5),A(),pe(10,"app-compound-block-ui",6),Oe(11,"async")),2&n){let s;k(1),T("ngIf",(null==r.resource?null:r.resource.name)&&(null==r.resource?null:r.resource.name)!=(null==(s=Ne(2,7,r.main.resource$))?null:s.name)&&(null==r.resource?null:r.resource.name)!=(null==(s=Ne(3,9,r.navigation.resourceToRender$))?null:s.name)),k(3),T("ngIf",Ne(5,11,r.audioUrl$)),k(2),T("ngIf",r.resource&&!Ne(7,13,r.audioUrl$)),k(3),T("ngIf",!r.hideBlockActions),k(1),T("resource",Ne(11,15,r._resource$))("hideBlockActions",!0)("fieldBlacklist",$i(17,Cme))}},dependencies:[On,xr,wr,kc,Fo,Zb,Fr],styles:["#header[_ngcontent-%COMP%]{display:flex}"]})}return i})();class Eme{mesh;assetsPath;textures=[];tyreTextureUpdateTimer=void 0;tyreMaterial=null;tyreTextures=[];_color=65280;get color(){return this._color}set color(t){t!==this._color&&(this._color=t,this.recolorCar().then())}_speed="idle";get speed(){return this._speed}set speed(t){if(t!==this._speed){switch(this._speed=t,this.tyreTextureUpdateTimer&&clearInterval(this.tyreTextureUpdateTimer),t){case"idle":this.tyreMaterial.map=this.tyreTextures[0];break;case"slow":let e=!0;this.tyreTextureUpdateTimer=setInterval(()=>{this.tyreMaterial.map=this.tyreTextures[e?1:2],this.tyreMaterial.needsUpdate=!0,e=!e},16);break;case"fast":this.tyreMaterial.map=this.tyreTextures[3]}this.tyreMaterial.needsUpdate=!0}}_steeringAngle=0;get steeringAngle(){return this._steeringAngle}set steeringAngle(t){if(t!==this._steeringAngle){this._steeringAngle=t;for(const e of this.frontWheels)e.rotation.set(0,0,t)}}wheels=[];wheelIdlePositions=[];frontWheels=[];get hasWheels(){return this.wheels.length>0}constructor(t,e){this.mesh=t,this.assetsPath=e;let n=new Set;if(t.traverse(r=>{if(!(r instanceof sn))return;let s=-1;if(r.name.startsWith("part_hp_12")?s=0:r.name.startsWith("part_hp_14")?s=1:r.name.startsWith("part_hp_16")?s=2:r.name.startsWith("part_hp_18")&&(s=3),s>-1){r.geometry.boundingBox||r.geometry.computeBoundingBox();let a=xe.avg(r.geometry.boundingBox.min,r.geometry.boundingBox.max);return(0==s||2==s)&&(a={x:a.x,y:a.y,z:a.z+1.5}),r.geometry.translate(...xe.spr(xe.neg(a))),r.position.set(...xe.spr(a)),this.wheelIdlePositions[s]=a,this.wheels.push(r),void(s<2&&this.frontWheels.push(r))}const o=r.material.map;o&&n.add(o)}),this.textures=Array.from(n).map(r=>{const s=new Cs(document.createElement("img"));return s.flipY=r.flipY,Es(s),[r,s]}),t.traverse(r=>{if(!(r instanceof sn))return;const s=r.material.map;if(s){const o=this.textures.find(([a,l])=>a===s);o&&(r.material.map=o[1])}}),this.hasWheels){const r=new ma;this.tyreTextures=[0,1,2,3].map(s=>r.load(`${e}/m${s}00.png`));for(const s of this.tyreTextures)Es(s);this.tyreMaterial=new ti({map:this.tyreTextures[0]}),this.tyreMaterial.transparent=!0,this.tyreMaterial.alphaTest=.5,this.tyreMaterial.map.wrapS=mi,this.tyreMaterial.map.wrapT=mi,this.tyreMaterial.polygonOffset=!0,this.tyreMaterial.polygonOffsetFactor=-4;for(const s of this.wheels)s.material=this.tyreMaterial}this.color=65280,this.recolorCar().then()}recolorCar(){var t=this;return Se(function*(){const[e,n,r]=[t.color>>16,t.color>>8&255,255&t.color];for(const[s,o]of t.textures){for(let a=100;a>0&&!s.source.data;a--)yield cV(50);dV(s.source.data,(a,l)=>{if(a[l]+a[l+2]<a[l+1]){const c=a[l+1];a[l]=Math.min(255,Math.round(e*c/255)+a[l]),a[l+1]=Math.round(n*c/255),a[l+2]=Math.min(Math.round(r*c/255)+a[l+2])}},o.source.data),o.needsUpdate=!0}})()}dispose(){}}const Ame=["class","block-ui"];function Dme(i,t){1&i&&(pe(0,"app-compound-block-ui",2),Oe(1,"async")),2&i&&T("resource",Ne(1,1,$()._resource$))}let Tme=(()=>{class i{eelDelegate;main;cdr;get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}_resource$=new Be(null);changed=new Fe;customControls=[];previewPaths$=new Be(null);destroyed$=new De;constructor(e,n,r){this.eelDelegate=e,this.main=n,this.cdr=r}ngAfterViewInit(){var e=this;return Se(function*(){e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var n=Se(function*(r){e.previewPaths$.next(yield e.loadPreviewFilePaths(r?.id))});return function(r){return n.apply(this,arguments)}}()),e.main.dataBlockChange$.pipe(ke(e.destroyed$),Qt(([n,r])=>!!e.resource&&n.startsWith(e.resource.id)),Vs(1500)).subscribe(Se(function*(){e.previewPaths$.next(null),e.previewPaths$.next(yield e.postTmpUpdates(e.resource?.id))}))})()}onObjectLoaded(e){var n=this;return Se(function*(){try{const r=new Eme(e,n.previewPaths$.value[0].substring(0,n.previewPaths$.value[0].lastIndexOf("/"))+"/assets");let s=null;const o=a=>{s&&clearTimeout(s),s=setTimeout(()=>r.color=a,50)};n.customControls=[{title:"NFS2 car features",controls:[{label:"Car color",type:"color",value:65280,change:a=>o(a)}]}],r.hasWheels&&n.customControls[0].controls.push({label:"Car speed",type:"radio",options:["idle","slow","fast"],value:"idle",change:a=>{r.speed=a}},{label:"Steering angle",type:"slider",minValue:-.7,maxValue:.7,valueStep:.05,value:0,change:a=>{r.steeringAngle=a}}),n.cdr.markForCheck()}catch(r){console.error(r)}})()}serializerSettings={geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1};postTmpUpdates(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.main.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}loadPreviewFilePaths(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResource(e,n.serializerSettings);return[r.find(s=>s.endsWith(".obj")),r.find(s=>s.endsWith(".mtl"))]}return null})()}previewObjectGroupFunc(e){return e.startsWith("part_hp")?"High-poly":e.startsWith("part_mp")?"Medium-poly":e.startsWith("part_lp")?"Low-poly":e.startsWith("part_res")?"Reserved":e}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(Jr),x(yn))};static \u0275cmp=Xe({type:i,selectors:[["app-geo-geometry",8,"block-ui"]],inputs:{resource:"resource"},outputs:{changed:"changed"},attrs:Ame,decls:4,vars:8,consts:[[3,"paths","groupFunction","customControls","onObjectLoaded"],[3,"resource",4,"ngIf"],[3,"resource"]],template:function(n,r){1&n&&(S(0,"app-obj-viewer",0),de("onObjectLoaded",function(o){return r.onObjectLoaded(o)}),Oe(1,"async"),A(),Z(2,Dme,2,3,"app-compound-block-ui",1),Oe(3,"async")),2&n&&(T("paths",Ne(1,4,r.previewPaths$))("groupFunction",r.previewObjectGroupFunc)("customControls",r.customControls),k(2),T("ngIf",!Ne(3,6,r.main.hideHiddenFields$)))},dependencies:[On,Fo,lV,Fr],changeDetection:0})}return i})();const kme=function(){return["children","items_descr"]};let Ime=(()=>{class i{_resource=null;get resource(){return this._resource}set resource(e){this._resource=e,this.resourceMap={};const n=(this._resource?.schema.fields||[]).find(s=>"children"===s.name)?.schema.child_schema;if(!n)return;let r=0;for(const[s,o]of this.resourceData.children_aliases.entries()){let a=o||"__"+r++;this.resourceMap[a]={id:ys(this._resource?.id||"",`children/${s}`),data:this.resourceData?.children[s],schema:n,name:""}}}get resourceData(){return this._resource?.data}hideBlockActions=!1;resourceMap={};changed=new Fe;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-base-archive-block-ui"]],inputs:{resource:"resource",hideBlockActions:"hideBlockActions"},outputs:{changed:"changed"},decls:2,vars:5,consts:[[3,"resource","hideBlockActions","fieldBlacklist"],[3,"resources"]],template:function(n,r){1&n&&pe(0,"app-compound-block-ui",0)(1,"app-sidenav-res-list",1),2&n&&(T("resource",r.resource)("hideBlockActions",r.hideBlockActions)("fieldBlacklist",$i(4,kme)),k(1),T("resources",r.resourceMap))},dependencies:[Fo,vv],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 0 16px}"],changeDetection:0})}return i})();const Rme=["previewCanvasContainer"],Pme=["previewCanvas"];function Ome(i,t){1&i&&pe(0,"mat-spinner",16),2&i&&T("diameter",40)}function Fme(i,t){1&i&&pe(0,"mat-spinner",17)}const Lme=function(){return[]};class Nme extends FC{mapGraph;qfsPath;hideUnknownEntities$;textureLoader=new ma;terrainMaterials={};objLoader=new Cm;resource=null;isOpenedTrack=!1;constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.qfsPath=e,this.hideUnknownEntities$=n}_placeholder=null;_placeholderPromise=null;unknownEntities=new Set;onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe(Po(),ke(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return Se(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}_placeholderTerrain=null;_placeholderTerrainPromise=null;getPlaceholderTerrainTexture(){var t=this;return Se(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=hr,e.wrapT=hr,Es(e),e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return Se(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(s=>{s instanceof sn&&(s.material=e.getTerrainMaterial((s.userData.name||s.name).substr((s.userData.name||s.name).lastIndexOf("_")+1).split(".")[0]))});const r=new xs({object3D:new mo(n)});return e.addChildren(r),e.loaded.set(t,[r]),[[r],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new ti({side:Cr,transparent:!0,visible:!1}),this.qfsPath?this.textureLoader.loadAsync(`${this.qfsPath}/${t}.png`).then(e=>{e.wrapS=hr,e.wrapT=hr,Es(e),this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}}let Bme=(()=>{class i{eelDelegate;cdr;mainService;previewCanvasContainer;previewCanvas;get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}_resource$=new Be(null);changed=new Fe;previewLoading$=new Be(!0);previewQfsLocation$=new Be(null);previewQfsLoading$=new Be(!1);terrainChunksObjLocation;pointer$=new Be(null);selectedSplineIndex$=new Be(0);qfsPath=null;name="";world;renderer=null;map=null;controller;roadPath=null;skySphere;selectionSphere;destroyed$=new De;constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r}ngAfterViewInit(){var e=this;return Se(function*(){e.world=new wv({visualScene:new qb}),yield e.world.init(),e.skySphere=new xs({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})}),e.skySphere.object3D.nativeMesh.material.side=Cr,e.world.addEntity(e.skySphere),e.selectionSphere=new xs({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})}),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new wm(16777215,2));let n=new Be({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=ai.lookAt(e.renderer.camera.position,xe.add(e.renderer.camera.position,xe.Y),xe.Z),Bc(e.world).pipe(ke(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new LC(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",cameraLinearSpeed:40,cameraBoostMultiplier:4,cameraMovementElasticity:100,cameraRotationElasticity:30,ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var s=Se(function*(o){e.roadPath=e.resource?.data.block_positions.map(a=>({x:a.x,y:a.z,z:a.y})),e.previewLoading$.next(!0),o?(e.previewQfsLocation$.next(o.id.substring(0,o.id.indexOf(".TRK"))+"0.QFS"),yield e.loadTerrainChunks(o.id),yield e.onQfsSelected(e.previewQfsLocation$.value)):(yield e.loadTerrainChunks(),yield e.loadPreview()),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(ke(e.destroyed$),Qt(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),Vs(3e3)).subscribe(Se(function*(){e.roadPath=e.resource?.data.block_positions.map(s=>({x:s.x,y:s.z,z:s.y})),e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(ke(e.destroyed$),Vs(250)).subscribe(s=>{if(e.resource){let o=e.resource.data.block_positions[s];if(!o)return;o={x:o.x,y:o.z,z:o.y},e.selectionSphere.position=o,e.renderer&&(e.renderer.position=xe.add(o,xe.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-0)),e.renderer.rotation=ai.lookAt(e.renderer.position,o,{x:0,y:0,z:1}),e.controller.reset())}})})()}onQfsSelected(e){var n=this;return Se(function*(){if(n.qfsPath!=e){n.previewQfsLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e),s=new ma,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=No,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=null}finally{n.previewQfsLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return Se(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}onPointerChange(e){this.renderer&&(this.renderer.position=e)}loadPreview(){var e=this;return Se(function*(){if(!e.terrainChunksObjLocation||!e.roadPath)return;const n=Uc.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!0);e.unloadPreview(),e.map=new Nme(n,e.qfsPath&&"resources/"+e.qfsPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=!1,Bc(e.world).pipe(ke(e.destroyed$)).subscribe(()=>{e.map&&e.renderer&&e.map.loaderCursor$.next(e.renderer.position)}),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(yn),x(Jr))};static \u0275cmp=Xe({type:i,selectors:[["app-trk-map-block-ui"]],viewQuery:function(n,r){if(1&n&&(pn(Rme,5),pn(Pme,5)),2&n){let s;ft(s=mt())&&(r.previewCanvasContainer=s.first),ft(s=mt())&&(r.previewCanvas=s.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:32,vars:26,consts:[[1,"qfsSelector"],["appearance","fill"],["matInput","","type","text",3,"value"],["customQfsInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed","projection","pointerChange"],[3,"resource"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(n,r){if(1&n){const s=en();S(0,"div",0)(1,"h4"),H(2,"Preview QFS file"),A(),S(3,"mat-form-field",1)(4,"mat-label"),H(5,"Custom QFS path"),A(),pe(6,"input",2,3),Oe(8,"async"),A(),S(9,"button",4),de("click",function(){nt(s);const a=Hn(7);return it(r.onQfsSelected(a.value))}),H(10,"LOAD"),A(),Z(11,Ome,1,1,"mat-spinner",5),Oe(12,"async"),A(),S(13,"div",6)(14,"div",7,8),pe(16,"canvas",9,10),Z(18,Fme,1,0,"mat-spinner",11),Oe(19,"async"),A(),S(20,"div",12,8)(22,"mat-form-field",1)(23,"mat-label"),H(24,"Spline item"),A(),S(25,"input",13),de("ngModelChange",function(a){return r.selectedSplineIndex$.next(a)}),Oe(26,"async"),Oe(27,"async"),A()(),S(28,"app-minimap",14),de("pointerChange",function(a){return r.onPointerChange(a)}),Oe(29,"async"),A()()(),pe(30,"app-compound-block-ui",15),Oe(31,"async")}if(2&n){let s;k(6),T("value",Ne(8,11,r.previewQfsLocation$)),k(5),T("ngIf",Ne(12,13,r.previewQfsLoading$)),k(7),T("ngIf",Ne(19,15,r.previewLoading$)),k(7),T("min",0)("max",4*(null==(s=Ne(26,17,r._resource$))?null:s.data.num_blocks)-1)("ngModel",Ne(27,19,r.selectedSplineIndex$)),k(3),T("roadSpline",r.roadPath||$i(25,Lme))("pointer",Ne(29,21,r.pointer$))("splineClosed",!0)("projection","nz"),k(2),T("resource",Ne(31,23,r._resource$))}},dependencies:[On,_s,la,Hs,$a,Ha,aa,vs,xr,$s,Oo,kc,Fo,ZE,Fr],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.qfsSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.qfsSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.qfsSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.qfsSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .qfsSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0})}return i})(),Ume=(()=>{class i{resource=null;name="";resourceDescription="";changed=new Fe;constructor(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Xe({type:i,selectors:[["app-skip-block-ui"]],inputs:{resource:"resource",resourceDescription:"resourceDescription"},outputs:{changed:"changed"},decls:0,vars:0,template:function(n,r){},encapsulation:2,changeDetection:0})}return i})();const Vme=["previewCanvasContainer"],zme=["previewCanvas"];function Hme(i,t){1&i&&pe(0,"mat-spinner",16),2&i&&T("diameter",40)}function $me(i,t){1&i&&pe(0,"mat-spinner",17)}const Gme=function(){return[]};class jme extends FC{mapGraph;qfsPath;hideUnknownEntities$;textureLoader=new ma;terrainMaterials={};objLoader=new Cm;resource=null;isOpenedTrack=!1;constructor(t,e,n){super(t,{loadDepth:40,inertia:2}),this.mapGraph=t,this.qfsPath=e,this.hideUnknownEntities$=n}_placeholder=null;_placeholderPromise=null;unknownEntities=new Set;onSpawned(t){super.onSpawned(t),this.hideUnknownEntities$.pipe(Po(),ke(this._onRemoved$)).subscribe(e=>{for(const n of this.unknownEntities)n.visible=!e})}getPlaceholderTexture(){var t=this;return Se(function*(){return t._placeholder?t._placeholder:(t._placeholderPromise||(t._placeholderPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png")),t._placeholderPromise)})()}_placeholderTerrain=null;_placeholderTerrainPromise=null;getPlaceholderTerrainTexture(){var t=this;return Se(function*(){return t._placeholderTerrain?t._placeholderTerrain:(t._placeholderTerrainPromise||(t._placeholderTerrainPromise=t.textureLoader.loadAsync("assets/placeholder_texture.png").then(e=>(e.wrapS=hr,e.wrapT=hr,Es(e),e))),t._placeholderTerrainPromise)})()}loadChunk(t){var e=this;return Se(function*(){const n=yield e.objLoader.loadAsync(t.path+".obj");n.position.set(t.position.x,t.position.y,t.position.z),n.traverse(s=>{s instanceof sn&&(s.material=e.getTerrainMaterial((s.userData.name||s.name).substr((s.userData.name||s.name).lastIndexOf("_")+1).split(".")[0]))});const r=new xs({object3D:new mo(n)});return e.addChildren(r),e.loaded.set(t,[r]),[[r],null]})()}disposeChunk(t){for(const e of this.loaded.get(t)||[])this.unknownEntities.delete(e);super.disposeChunk(t)}getTerrainMaterial(t){return this.terrainMaterials[t]||(this.terrainMaterials[t]=new ti({side:Cr,transparent:!0,visible:!1}),this.qfsPath?this.textureLoader.loadAsync(`${this.qfsPath}/${t}.png`).then(e=>{e.wrapS=hr,e.wrapT=hr,Es(e),this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0}).catch(e=>{console.warn(`Problem with loading terrain material ${t}`),this.getPlaceholderTerrainTexture().then(n=>{this.terrainMaterials[t].map=n,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})}):this.getPlaceholderTerrainTexture().then(e=>{this.terrainMaterials[t].map=e,this.terrainMaterials[t].needsUpdate=!0,this.terrainMaterials[t].visible=!0})),this.terrainMaterials[t]}}let Wme=(()=>{class i{eelDelegate;cdr;mainService;previewCanvasContainer;previewCanvas;get resource(){return this._resource$.getValue()}set resource(e){this._resource$.next(e)}_resource$=new Be(null);changed=new Fe;previewLoading$=new Be(!0);previewQfsLocation$=new Be(null);previewQfsLoading$=new Be(!1);terrainChunksObjLocation;pointer$=new Be(null);selectedSplineIndex$=new Be(0);qfsPath=null;name="";world;renderer=null;map=null;controller;roadPath=null;skySphere;selectionSphere;destroyed$=new De;constructor(e,n,r){this.eelDelegate=e,this.cdr=n,this.mainService=r}ngAfterViewInit(){var e=this;return Se(function*(){e.world=new wv({visualScene:new qb}),yield e.world.init(),e.skySphere=new xs({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:1e3},{color:16777215})}),e.skySphere.object3D.nativeMesh.material.side=Cr,e.world.addEntity(e.skySphere),e.selectionSphere=new xs({object3D:e.world.visualScene.factory.createPrimitive({shape:"SPHERE",radius:.5},{color:16711680,shading:"unlit"})}),e.selectionSphere.object3D.nativeMesh.material.opacity=.4,e.selectionSphere.object3D.nativeMesh.material.transparent=!0,e.world.addEntity(e.selectionSphere),e.world.visualScene.nativeScene.add(new wm(16777215,2));let n=new Be({x:1,y:1});e.renderer=e.world.addRenderer(e.world.visualScene.factory.createPerspectiveCamera(),e.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),e.renderer.camera.position={x:0,y:0,z:2.5},e.renderer.camera.rotation=ai.lookAt(e.renderer.camera.position,xe.add(e.renderer.camera.position,xe.Y),xe.Z),Bc(e.world).pipe(ke(e.destroyed$)).subscribe(()=>{e.renderer&&(e.skySphere.position=e.renderer.camera.position,e.pointer$.next(e.renderer.camera.position))}),e.controller=new LC(e.world.keyboardInput,e.renderer,{mouseOptions:{canvas:e.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",cameraLinearSpeed:40,cameraBoostMultiplier:4,cameraMovementElasticity:100,cameraRotationElasticity:30,ignoreMouseUnlessPointerLocked:!0,ignoreKeyboardUnlessPointerLocked:!0}),e.world.addEntity(e.controller);const r=()=>{n.next({x:e.previewCanvasContainer.nativeElement.clientWidth,y:e.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(e.previewCanvasContainer.nativeElement),r(),e.world.start(),e._resource$.pipe(ke(e.destroyed$)).subscribe(function(){var s=Se(function*(o){e.roadPath=e.resource?.data.blocks.map(a=>({x:a.position.x,y:a.position.z,z:a.position.y})),e.previewLoading$.next(!0),o?(e.previewQfsLocation$.next(o.id.substring(0,o.id.indexOf(".FRD"))+"0.QFS"),yield e.loadTerrainChunks(o.id),yield e.onQfsSelected(e.previewQfsLocation$.value)):(yield e.loadTerrainChunks(),yield e.loadPreview()),e.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),e.mainService.dataBlockChange$.pipe(ke(e.destroyed$),Qt(([s,o])=>!!e.resource&&s.startsWith(e.resource.id)),Vs(3e3)).subscribe(Se(function*(){e.roadPath=e.resource?.data.data.blocks.map(s=>({x:s.position.x,y:s.position.z,z:s.position.y})),e.previewLoading$.next(!0),yield e.postTmpUpdates(e.resource?.id),yield e.loadPreview(),e.previewLoading$.next(!1)})),e.selectedSplineIndex$.pipe(ke(e.destroyed$),Vs(250)).subscribe(s=>{if(e.resource){let o=e.resource.data.blocks[s].position;if(!o)return;o={x:o.x,y:o.z,z:o.y},e.selectionSphere.position=o,e.renderer&&(e.renderer.position=xe.add(o,xe.rotAround({x:10,y:-12,z:5},{x:0,y:0,z:1},-0)),e.renderer.rotation=ai.lookAt(e.renderer.position,o,{x:0,y:0,z:1}),e.controller.reset())}})})()}onQfsSelected(e){var n=this;return Se(function*(){if(n.qfsPath!=e){n.previewQfsLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(e),s=new ma,o=r.find(a=>a.endsWith("spherical.png"));if(o){const a=yield s.loadAsync(o);a.colorSpace="srgb",a.mapping=No,n.skySphere.object3D.nativeMesh.material.map=a}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=e}catch{n.skySphere.object3D.nativeMesh.material.map=null,n.skySphere.object3D.nativeMesh.material.needsUpdate=!0,n.qfsPath=null}finally{n.previewQfsLoading$.next(!1)}yield n.loadPreview()}})()}loadTerrainChunks(e){var n=this;return Se(function*(){if(e){let s=(yield n.eelDelegate.serializeResource(e,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1})).find(o=>o.endsWith(".obj"))||"";n.terrainChunksObjLocation=s.substring(0,s.indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}onPointerChange(e){this.renderer&&(this.renderer.position=e)}loadPreview(){var e=this;return Se(function*(){if(!e.terrainChunksObjLocation||!e.roadPath)return;const n=Uc.fromMapArray(e.roadPath.map((r,s)=>({path:`${e.terrainChunksObjLocation}terrain_chunk_${s}`,position:r,loadOptions:{}}))||[],!0);e.unloadPreview(),e.map=new jme(n,e.qfsPath&&"resources/"+e.qfsPath,e.mainService.hideHiddenFields$),e.map.resource=e.resource,e.map.isOpenedTrack=!1,Bc(e.world).pipe(ke(e.destroyed$)).subscribe(()=>{e.map&&e.renderer&&e.map.loaderCursor$.next(e.renderer.position)}),e.world.addEntity(e.map),e.cdr.markForCheck()})()}unloadPreview(){this.map&&(this.world.removeEntity(this.map),this.map.dispose(),this.map=null,this.cdr.markForCheck())}postTmpUpdates(e){var n=this;return Se(function*(){if(e){const r=yield n.eelDelegate.serializeResourceTmp(e,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__has_external_changes__"!=s&&s.startsWith(e)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!0,maps__save_invisible_wall_collisions:!1,maps__save_terrain_collisions:!1,maps__save_spherical_skybox_texture:!0,maps__add_props_to_obj:!1});n.terrainChunksObjLocation=r[0].substring(0,r[0].indexOf("terrain_chunk_"))}else n.terrainChunksObjLocation=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(bs),x(yn),x(Jr))};static \u0275cmp=Xe({type:i,selectors:[["app-frd-map-block-ui"]],viewQuery:function(n,r){if(1&n&&(pn(Vme,5),pn(zme,5)),2&n){let s;ft(s=mt())&&(r.previewCanvasContainer=s.first),ft(s=mt())&&(r.previewCanvas=s.first)}},inputs:{resource:"resource"},outputs:{changed:"changed"},decls:32,vars:26,consts:[[1,"qfsSelector"],["appearance","fill"],["matInput","","type","text",3,"value"],["customQfsInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"preview"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[1,"previewNavigationContainer"],["matInput","","type","number",3,"min","max","ngModel","ngModelChange"],[3,"roadSpline","pointer","splineClosed","projection","pointerChange"],[3,"resource"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(n,r){if(1&n){const s=en();S(0,"div",0)(1,"h4"),H(2,"Preview QFS file"),A(),S(3,"mat-form-field",1)(4,"mat-label"),H(5,"Custom QFS path"),A(),pe(6,"input",2,3),Oe(8,"async"),A(),S(9,"button",4),de("click",function(){nt(s);const a=Hn(7);return it(r.onQfsSelected(a.value))}),H(10,"LOAD"),A(),Z(11,Hme,1,1,"mat-spinner",5),Oe(12,"async"),A(),S(13,"div",6)(14,"div",7,8),pe(16,"canvas",9,10),Z(18,$me,1,0,"mat-spinner",11),Oe(19,"async"),A(),S(20,"div",12,8)(22,"mat-form-field",1)(23,"mat-label"),H(24,"Spline item"),A(),S(25,"input",13),de("ngModelChange",function(a){return r.selectedSplineIndex$.next(a)}),Oe(26,"async"),Oe(27,"async"),A()(),S(28,"app-minimap",14),de("pointerChange",function(a){return r.onPointerChange(a)}),Oe(29,"async"),A()()(),pe(30,"app-compound-block-ui",15),Oe(31,"async")}if(2&n){let s;k(6),T("value",Ne(8,11,r.previewQfsLocation$)),k(5),T("ngIf",Ne(12,13,r.previewQfsLoading$)),k(7),T("ngIf",Ne(19,15,r.previewLoading$)),k(7),T("min",0)("max",4*(null==(s=Ne(26,17,r._resource$))?null:s.data.num_blocks)-1)("ngModel",Ne(27,19,r.selectedSplineIndex$)),k(3),T("roadSpline",r.roadPath||$i(25,Gme))("pointer",Ne(29,21,r.pointer$))("splineClosed",!0)("projection","nz"),k(2),T("resource",Ne(31,23,r._resource$))}},dependencies:[On,_s,la,Hs,$a,Ha,aa,vs,xr,$s,Oo,kc,Fo,ZE,Fr],styles:[".preview[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);display:flex;column-gap:1rem}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]{flex-grow:1;position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.preview[_ngcontent-%COMP%]   .previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]{width:20rem;flex-shrink:0;display:flex;flex-direction:column}.preview[_ngcontent-%COMP%]   .previewNavigationContainer[_ngcontent-%COMP%]   app-minimap[_ngcontent-%COMP%]{flex-grow:1;display:flex}.qfsSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.qfsSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.qfsSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.qfsSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .qfsSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0})}return i})();function Yme(i,t){if(1&i&&(S(0,"mat-error"),H(1),A()),2&i){const e=$(2);k(1),cc(" ",e.resourceError.data.error_class,": ",e.resourceError.data.error_text," ")}}function Xme(i,t){1&i&&pe(0,"mat-spinner",5)}function qme(i,t){if(1&i&&(S(0,"div",2),Z(1,Yme,2,2,"mat-error",3),Z(2,Xme,1,0,"mat-spinner",4),A()),2&i){const e=$();k(1),T("ngIf",e.resourceError),k(1),T("ngIf",!e.resourceError)}}function Kme(i,t){}let Sm=(()=>{class i{mainService;deep;static DATA_BLOCK_COMPONENTS_MAP={ArrayBlock:bC,SubByteArrayBlock:bC,BitFlagsBlock:yse,BytesBlock:Dre,CompoundBlock:Fo,DataBlock:tne,DelegateBlock:hV,EnumByteBlock:Hre,IntegerBlock:fN,DecimalBlock:fN,UTF8Block:mN,NullTerminatedUTF8Block:mN,SkipBlock:Ume,AngleBlock:Rre,AnyBitmapBlock:Xne,BasePalette:gre,OripGeometry:Jfe,BaseArchiveBlock:Ime,TriMap:Kfe,WwwwBlock:Fre,FenceType:cme,SoundBank:dme,EacsAudioFile:Sme,GeoGeometry:Tme,TrkMap:Bme,FrdMap:Wme};dataBlockUiHost;_component=null;_componentChangedSub=null;destroyed$=new De;resourceSet$=new De;_resource=null;get resource(){return this._resource}_resourceError=null;get resourceError(){return this._resourceError}_resourceDescription="";set resourceDescription(e){this._resourceDescription=e,this._component&&(this._component.instance.resourceDescription=e)}_hideBlockActions=!1;set hideBlockActions(e){this._hideBlockActions=e,this._component&&(this._component.instance.hideBlockActions=e)}_disabled=!1;set disabled(e){this._disabled=e,this._component&&(this._component.instance.disabled=e)}resourceEqual(e,n){return e&&n?e.id===n.id&&this.deep.deepEquals(e.data,n.data):!e==!n}set resource(e){if(!this.resourceEqual(e,this._resourceError||this._resource)&&(this.resourceSet$.next(),e?e.data?.error_class?(this._resourceError=e,this._resource=null):(this._resource=e,this._resourceError=null):(this._resource=null,this._resourceError=null),this.dataBlockUiHost.viewContainerRef.clear(),this._resource&&this._resource.schema.block_class_mro)){{let r;for(const s of this._resource.schema.block_class_mro.split("__"))if(r=i.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+this._resource.schema.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._componentChangedSub=this._component.instance.changed.pipe(ke(this.destroyed$),ke(this.resourceSet$)).subscribe(()=>{const s=this._resource.id,o=this._resource.data;if(o instanceof Array)if(this._resource.schema.block_class_mro.startsWith("BytesBlock"))this.mainService.dataBlockChange$.next([s,o]);else for(let a=0;a<o.length;a++)this.mainService.dataBlockChange$.next([ys(s,a),o[a]]);else if(sme()(o))for(const a in o)this.mainService.dataBlockChange$.next([ys(s,a),o[a]]);else this.mainService.dataBlockChange$.next([s,o])})}this._component.instance.resource=this._resource,this._component.instance.resourceDescription=this._resourceDescription,this._component.instance.hideBlockActions=this._hideBlockActions,this._component.instance.disabled=this._disabled}}constructor(e,n){this.mainService=e,this.deep=n}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}static \u0275fac=function(n){return new(n||i)(x(Jr),x(EC))};static \u0275cmp=Xe({type:i,selectors:[["app-editor"]],viewQuery:function(n,r){if(1&n&&pn(dN,7),2&n){let s;ft(s=mt())&&(r.dataBlockUiHost=s.first)}},inputs:{resourceDescription:"resourceDescription",hideBlockActions:"hideBlockActions",disabled:"disabled",resource:"resource"},decls:2,vars:1,consts:[["id","error-spinner-wrapper",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(n,r){1&n&&(Z(0,qme,3,2,"div",0),Z(1,Kme,0,0,"ng-template",1)),2&n&&T("ngIf",!r.resource||r.resourceError)},dependencies:[On,JF,kc,dN],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0})}return i})(),Zme=(()=>{class i{eelDelegate;constructor(e){this.eelDelegate=e}openFile(){var e=this;return Se(function*(){const n=yield e.eelDelegate.openFileDialog();n&&(yield e.eelDelegate.openFile(n,!0))})()}static \u0275fac=function(n){return new(n||i)(x(bs))};static \u0275cmp=Xe({type:i,selectors:[["app-landing-page"]],decls:11,vars:0,consts:[[1,"landing-page-container"],[1,"landing-page-content"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"]],template:function(n,r){1&n&&(S(0,"div",0)(1,"div",1)(2,"h1"),H(3,"NFS Resources Converter"),A(),S(4,"p"),H(5,"Welcome to the NFS Resources Converter. Use this tool to view and edit NFS game resource files."),A(),S(6,"div",2)(7,"button",3),de("click",function(){return r.openFile()}),S(8,"mat-icon"),H(9,"folder_open"),A(),H(10," Open File "),A()()()())},dependencies:[Oo,$u],styles:[".landing-page-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%;background-color:#f5f5f5}.landing-page-content[_ngcontent-%COMP%]{text-align:center;padding:2rem;max-width:600px;background-color:#fff;border-radius:8px;box-shadow:0 4px 6px #0000001a}h1[_ngcontent-%COMP%]{margin-bottom:1rem;color:#3f51b5}p[_ngcontent-%COMP%]{margin-bottom:2rem;color:#666}.actions[_ngcontent-%COMP%]{display:flex;justify-content:center}button[_ngcontent-%COMP%]{margin:0 .5rem}"]})}return i})();function Qme(i,t){1&i&&ac(0)}function Jme(i,t){if(1&i){const e=en();Si(0),S(1,"mat-toolbar",3),Z(2,Qme,1,0,"ng-container",4),pe(3,"span",5)(4,"app-block-actions",6),Oe(5,"async"),pe(6,"mat-divider",7),S(7,"button",8),de("click",function(){return nt(e),it($().saveResource())}),Oe(8,"async"),Oe(9,"async"),pe(10,"mat-icon",9),A()(),pe(11,"app-navigation-bar"),S(12,"div",10),pe(13,"div",11)(14,"app-editor",12),Oe(15,"async"),Oe(16,"async"),Oe(17,"async"),Oe(18,"async"),Oe(19,"async"),pe(20,"div",11),A(),Ei()}if(2&i){const e=$(),n=Hn(5);let r;k(2),T("ngTemplateOutlet",n),k(2),T("resource",Ne(5,5,e.mainService.resource$)),k(3),T("disabled",!Ne(8,7,e.mainService.resource$)||!Ne(9,9,e.mainService.hasUnsavedChanges$)),k(7),T("resource",Ne(15,11,e.mainService.customActionRunning$)?null:Ne(16,13,e.navigation.resourceToRender$)||Ne(17,15,e.mainService.resource$)||Ne(18,17,e.mainService.error$))("hideBlockActions",0==(null==(r=Ne(19,19,e.navigation.navigationPath$))?null:r.length))}}function ege(i,t){1&i&&ac(0)}function tge(i,t){if(1&i&&(S(0,"mat-toolbar",3),Z(1,ege,1,0,"ng-container",4),pe(2,"span",5),S(3,"span"),H(4,"NFS Resources Converter"),A()(),pe(5,"app-landing-page")),2&i){$();const e=Hn(5);k(1),T("ngTemplateOutlet",e)}}function nge(i,t){1&i&&(S(0,"mat-icon"),H(1,"visibility_off"),A())}function ige(i,t){1&i&&(S(0,"mat-icon"),H(1,"visibility"),A())}function rge(i,t){if(1&i){const e=en();S(0,"button",13),H(1,"File"),A(),S(2,"mat-menu",null,14)(4,"button",15),de("click",function(){return nt(e),it($().openFile())}),S(5,"mat-icon"),H(6,"folder_open"),A(),S(7,"span"),H(8,"Open"),A()(),S(9,"button",16),de("click",function(){return nt(e),it($().closeFile())}),Oe(10,"async"),S(11,"mat-icon"),H(12,"close"),A(),S(13,"span"),H(14,"Close"),A()(),pe(15,"mat-divider"),S(16,"button",16),de("click",function(){return nt(e),it($().saveResource())}),Oe(17,"async"),Oe(18,"async"),S(19,"mat-icon"),H(20,"save"),A(),S(21,"span"),H(22,"Save"),A()(),S(23,"button",16),de("click",function(){return nt(e),it($().reloadResource())}),Oe(24,"async"),S(25,"mat-icon"),H(26,"refresh"),A(),S(27,"span"),H(28,"Reload from disk"),A()()(),S(29,"button",13),H(30,"View"),A(),S(31,"mat-menu",null,17)(33,"button",15),de("click",function(){return nt(e),it($().toggleUnknownsVisibility())}),Z(34,nge,2,0,"mat-icon",18),Oe(35,"async"),Z(36,ige,2,0,"mat-icon",18),Oe(37,"async"),S(38,"span"),H(39,"Toggle Hidden Fields"),A()()(),S(40,"button",13),H(41,"Tools"),A(),S(42,"mat-menu",null,19)(44,"button",15),de("click",function(){return nt(e),it($().openConverter())}),S(45,"mat-icon"),H(46,"transform"),A(),S(47,"span"),H(48,"Converter to common formats"),A()(),S(49,"button",15),de("click",function(){return nt(e),it($().openConfig())}),S(50,"mat-icon"),H(51,"settings"),A(),S(52,"span"),H(53,"System Configuration"),A()()(),S(54,"button",13),H(55,"About"),A(),S(56,"mat-menu",null,20)(58,"button",15),de("click",function(){return nt(e),it($().openHomePage())}),S(59,"mat-icon"),H(60,"home"),A(),S(61,"span"),H(62,"Home Page"),A()(),S(63,"button",15),de("click",function(){return nt(e),it($().openDocs())}),S(64,"mat-icon"),H(65,"build"),A(),S(66,"span"),H(67,"File specs"),A()(),S(68,"button",15),de("click",function(){return nt(e),it($().openBmac())}),S(69,"mat-icon"),H(70,"support"),A(),S(71,"span"),H(72,"Support me"),A()()()}if(2&i){const e=Hn(3),n=Hn(32),r=Hn(43),s=Hn(57),o=$();T("matMenuTriggerFor",e),k(9),T("disabled",!Ne(10,9,o.mainService.eelDelegate.openedResourcePath$)),k(7),T("disabled",!Ne(17,11,o.mainService.resource$)||!Ne(18,13,o.mainService.hasUnsavedChanges$)),k(7),T("disabled",!Ne(24,15,o.mainService.eelDelegate.openedResourcePath$)),k(6),T("matMenuTriggerFor",n),k(5),T("ngIf",Ne(35,17,o.mainService.hideHiddenFields$)),k(2),T("ngIf",!Ne(37,19,o.mainService.hideHiddenFields$)),k(4),T("matMenuTriggerFor",r),k(14),T("matMenuTriggerFor",s)}}let sge=(()=>{class i{eelDelegate;mainService;dialog;navigation;snackBar;cdr;constructor(e,n,r,s,o,a){this.eelDelegate=e,this.mainService=n,this.dialog=r,this.navigation=s,this.snackBar=o,this.cdr=a}openFile(){var e=this;return Se(function*(){const n=yield e.eelDelegate.openFileDialog();n&&(yield e.eelDelegate.openFile(n,!0))})()}closeFile(){this.eelDelegate.closeFile().then()}saveResource(){var e=this;return Se(function*(){try{yield e.mainService.saveResource(),e.snackBar.open("File Saved!","OK",{duration:1500})}catch(n){e.snackBar.open("Error while saving file! "+n.errorText,"OK :(",{duration:5e3})}})()}toggleUnknownsVisibility(){this.mainService.hideHiddenFields$.next(!this.mainService.hideHiddenFields$.getValue())}reloadResource(){var e=this;return Se(function*(){if(e.mainService.hasUnsavedChanges){let n=e.dialog.open(Q2,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield W_(n.afterClosed())))return}yield e.mainService.reloadResource(),e.cdr.markForCheck()})()}openHomePage(){window.open("https://github.com/AndyGura/nfs-resources-converter","_blank")}openDocs(){window.open("https://github.com/AndyGura/nfs-resources-converter/blob/main/resources/README.md","_blank")}openBmac(){window.open("https://www.buymeacoffee.com/andygura","_blank")}openConverter(){this.dialog.open(QL,{width:"800px",height:"600px",disableClose:!0})}openConfig(){this.dialog.open(gC,{width:"600px",maxWidth:"90vw",maxHeight:"90vh",disableClose:!0})}static \u0275fac=function(n){return new(n||i)(x(bs),x(Jr),x(Cc),x(Ic),x(hv),x(yn))};static \u0275cmp=Xe({type:i,selectors:[["app-root"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["landingPage",""],["appMenu",""],["color","primary"],[4,"ngTemplateOutlet"],[1,"flex-spacer"],[3,"resource"],["vertical",""],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[1,"scroll-bounds-snapper"],[3,"resource","hideBlockActions"],["mat-button","",3,"matMenuTriggerFor"],["fileMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["viewMenu","matMenu"],[4,"ngIf"],["toolsMenu","matMenu"],["aboutMenu","matMenu"]],template:function(n,r){if(1&n&&(Z(0,Jme,21,21,"ng-container",0),Oe(1,"async"),Z(2,tge,6,1,"ng-template",null,1,so),Z(4,rge,73,21,"ng-template",null,2,so)),2&n){const s=Hn(3);T("ngIf",Ne(1,2,r.mainService.eelDelegate.openedResourcePath$))("ngIfElse",s)}},dependencies:[On,hu,Fte,cC,wr,Oo,j_,$u,sN,Lf,lN,vC,Sm,Zb,Zme,Fr],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}app-landing-page[_ngcontent-%COMP%]{flex-grow:1}.flex-spacer[_ngcontent-%COMP%]{flex:1 1 auto}#content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;padding:1rem}"],changeDetection:0})}return i})();function pV(i){return new he(3e3,!1)}function Vge(){return typeof window<"u"&&typeof window.document<"u"}function QE(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Wl(i){switch(i.length){case 0:return new yf;case 1:return i[0];default:return new B2(i)}}function fV(i,t,e,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const u=d.get("offset"),h=u==l,p=h&&c||new Map;d.forEach((f,g)=>{let m=g,_=f;if("offset"!==g)switch(m=t.normalizePropertyName(m,o),_){case AM:_=r.get(g);break;case Va:_=s.get(g);break;default:_=t.normalizeStyleValue(g,m,_,o)}p.set(m,_)}),h||a.push(p),c=p,l=u}),o.length)throw function Dge(i){return new he(3502,!1)}();return a}function JE(i,t,e,n){switch(t){case"start":i.onStart(()=>n(e&&e1(e,"start",i)));break;case"done":i.onDone(()=>n(e&&e1(e,"done",i)));break;case"destroy":i.onDestroy(()=>n(e&&e1(e,"destroy",i)))}}function e1(i,t,e){const s=t1(i.element,i.triggerName,i.fromState,i.toState,t||i.phaseName,e.totalTime??i.totalTime,!!e.disabled),o=i._data;return null!=o&&(s._data=o),s}function t1(i,t,e,n,r="",s=0,o){return{element:i,triggerName:t,fromState:e,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function qs(i,t,e){let n=i.get(t);return n||i.set(t,n=e),n}function mV(i){const t=i.indexOf(":");return[i.substring(1,t),i.slice(t+1)]}let n1=(i,t)=>!1,gV=(i,t,e)=>[],_V=null;function r1(i){const t=i.parentNode||i.host;return t===_V?null:t}(QE()||typeof Element<"u")&&(Vge()?(_V=(()=>document.documentElement)(),n1=(i,t)=>{for(;t;){if(t===i)return!0;t=r1(t)}return!1}):n1=(i,t)=>i.contains(t),gV=(i,t,e)=>{if(e)return Array.from(i.querySelectorAll(t));const n=i.querySelector(t);return n?[n]:[]});let _d=null,vV=!1;const bV=n1,yV=gV;let xV=(()=>{class i{validateStyleProperty(e){return function Hge(i){_d||(_d=function $ge(){return typeof document<"u"?document.body:null}()||{},vV=!!_d.style&&"WebkitAppearance"in _d.style);let t=!0;return _d.style&&!function zge(i){return"ebkit"==i.substring(1,6)}(i)&&(t=i in _d.style,!t&&vV&&(t="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in _d.style)),t}(e)}matchesElement(e,n){return!1}containsElement(e,n){return bV(e,n)}getParentElement(e){return r1(e)}query(e,n,r){return yV(e,n,r)}computeStyle(e,n,r){return r||""}animate(e,n,r,s,o,a=[],l){return new yf(r,s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})(),s1=(()=>{class i{}return i.NOOP=new xV,i})();const Gge=1e3,o1="ng-enter",Qb="ng-leave",Jb="ng-trigger",ey=".ng-trigger",MV="ng-animating",a1=".ng-animating";function sl(i){if("number"==typeof i)return i;const t=i.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:l1(parseFloat(t[1]),t[2])}function l1(i,t){return"s"===t?i*Gge:i}function ty(i,t,e){return i.hasOwnProperty("duration")?i:function Wge(i,t,e){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return t.push(pV()),{duration:0,delay:0,easing:""};r=l1(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=l1(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!e){let a=!1,l=t.length;r<0&&(t.push(function oge(){return new he(3100,!1)}()),a=!0),s<0&&(t.push(function age(){return new he(3101,!1)}()),a=!0),a&&t.splice(l,0,pV())}return{duration:r,delay:s,easing:o}}(i,t,e)}function Em(i,t={}){return Object.keys(i).forEach(e=>{t[e]=i[e]}),t}function CV(i){const t=new Map;return Object.keys(i).forEach(e=>{t.set(e,i[e])}),t}function Yl(i,t=new Map,e){if(e)for(let[n,r]of e)t.set(n,r);for(let[n,r]of i)t.set(n,r);return t}function EV(i,t,e){return e?t+":"+e+";":""}function AV(i){let t="";for(let e=0;e<i.style.length;e++){const n=i.style.item(e);t+=EV(0,n,i.style.getPropertyValue(n))}for(const e in i.style)i.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=EV(0,Kge(e),i.style[e]));i.setAttribute("style",t)}function ga(i,t,e){i.style&&(t.forEach((n,r)=>{const s=d1(r);e&&!e.has(r)&&e.set(r,i.style[s]),i.style[s]=n}),QE()&&AV(i))}function vd(i,t){i.style&&(t.forEach((e,n)=>{const r=d1(n);i.style[r]=""}),QE()&&AV(i))}function Am(i){return Array.isArray(i)?1==i.length?i[0]:F2(i):i}const c1=new RegExp("{{\\s*(.+?)\\s*}}","g");function DV(i){let t=[];if("string"==typeof i){let e;for(;e=c1.exec(i);)t.push(e[1]);c1.lastIndex=0}return t}function Dm(i,t,e){const n=i.toString(),r=n.replace(c1,(s,o)=>{let a=t[o];return null==a&&(e.push(function cge(i){return new he(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function ny(i){const t=[];let e=i.next();for(;!e.done;)t.push(e.value),e=i.next();return t}const qge=/-+([a-z0-9])/g;function d1(i){return i.replace(qge,(...t)=>t[1].toUpperCase())}function Kge(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ks(i,t,e){switch(t.type){case 7:return i.visitTrigger(t,e);case 0:return i.visitState(t,e);case 1:return i.visitTransition(t,e);case 2:return i.visitSequence(t,e);case 3:return i.visitGroup(t,e);case 4:return i.visitAnimate(t,e);case 5:return i.visitKeyframes(t,e);case 6:return i.visitStyle(t,e);case 8:return i.visitReference(t,e);case 9:return i.visitAnimateChild(t,e);case 10:return i.visitAnimateRef(t,e);case 11:return i.visitQuery(t,e);case 12:return i.visitStagger(t,e);default:throw function dge(i){return new he(3004,!1)}()}}function TV(i,t){return window.getComputedStyle(i)[t]}const sy="*";function n_e(i,t){const e=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function i_e(i,t,e){if(":"==i[0]){const l=function r_e(i,t){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,n)=>parseFloat(n)>parseFloat(e);case":decrement":return(e,n)=>parseFloat(n)<parseFloat(e);default:return t.push(function Cge(i){return new he(3016,!1)}()),"* => *"}}(i,e);if("function"==typeof l)return void t.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return e.push(function Mge(i){return new he(3015,!1)}()),t;const r=n[1],s=n[2],o=n[3];t.push(kV(r,o));"<"==s[0]&&!(r==sy&&o==sy)&&t.push(kV(o,r))}(n,e,t)):e.push(i),e}const oy=new Set(["true","1"]),ay=new Set(["false","0"]);function kV(i,t){const e=oy.has(i)||ay.has(i),n=oy.has(t)||ay.has(t);return(r,s)=>{let o=i==sy||i==r,a=t==sy||t==s;return!o&&e&&"boolean"==typeof r&&(o=r?oy.has(i):ay.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?oy.has(t):ay.has(t)),o&&a}}const s_e=new RegExp("s*:selfs*,?","g");function u1(i,t,e,n){return new o_e(i).build(t,e,n)}class o_e{constructor(t){this._driver=t}build(t,e,n){const r=new c_e(e);return this._resetContextStyleTimingState(r),Ks(this,Am(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles=new Map,t.collectedStyles.set("",new Map),t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,r=e.depCount=0;const s=[],o=[];return"@"==t.name.charAt(0)&&e.errors.push(function hge(){return new he(3006,!1)}()),t.definitions.forEach(a=>{if(this._resetContextStyleTimingState(e),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,e))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,e);n+=l.queryCount,r+=l.depCount,o.push(l)}else e.errors.push(function pge(){return new he(3007,!1)}())}),{type:7,name:t.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{DV(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(ny(s.values()),e.errors.push(function fge(i,t){return new he(3008,!1)}()))}return{type:0,name:t.name,style:n,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Ks(this,Am(t.animation),e);return{type:1,matchers:n_e(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:bd(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(n=>Ks(this,n,e)),options:bd(t.options)}}visitGroup(t,e){const n=e.currentTime;let r=0;const s=t.steps.map(o=>{e.currentTime=n;const a=Ks(this,o,e);return r=Math.max(r,e.currentTime),a});return e.currentTime=r,{type:3,steps:s,options:bd(t.options)}}visitAnimate(t,e){const n=function u_e(i,t){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return h1(ty(i,t).duration,0,"");const e=i;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=h1(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=ty(e,t);return h1(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=n;let r,s=t.styles?t.styles:Bn({});if(5==s.type)r=this.visitKeyframes(s,e);else{let o=t.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=Bn(c)}e.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,e);l.isEmptyStep=a,r=l}return e.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[],r=Array.isArray(t.styles)?t.styles:[t.styles];for(let a of r)"string"==typeof a?a===Va?n.push(a):e.errors.push(new he(3002,!1)):n.push(CV(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:t.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;n&&s>0&&(s-=n.duration+n.delay),t.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=e.collectedStyles.get(e.currentQuerySelector),d=c.get(l);let u=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(e.errors.push(function gge(i,t,e,n,r){return new he(3010,!1)}()),u=!1),s=d.startTime),u&&c.set(l,{startTime:s,endTime:r}),e.options&&function Xge(i,t,e){const n=t.params||{},r=DV(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||e.push(function lge(i){return new he(3001,!1)}())})}(a,e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function _ge(){return new he(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=t.steps.map(_=>{const b=this._makeStyleAst(_,e);let v=null!=b.offset?b.offset:function d_e(i){if("string"==typeof i)return null;let t=null;if(Array.isArray(i))i.forEach(e=>{if(e instanceof Map&&e.has("offset")){const n=e;t=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const e=i;t=parseFloat(e.get("offset")),e.delete("offset")}return t}(b.styles),y=0;return null!=v&&(s++,y=b.offset=v),l=l||y<0||y>1,a=a||y<c,c=y,o.push(y),b});l&&e.errors.push(function vge(){return new he(3012,!1)}()),a&&e.errors.push(function bge(){return new he(3200,!1)}());const u=t.steps.length;let h=0;s>0&&s<u?e.errors.push(function yge(){return new he(3202,!1)}()):0==s&&(h=1/(u-1));const p=u-1,f=e.currentTime,g=e.currentAnimateTimings,m=g.duration;return d.forEach((_,b)=>{const v=h>0?b==p?1:h*b:o[b],y=v*m;e.currentTime=f+g.delay+y,g.duration=y,this._validateStyleAst(_,e),_.offset=v,n.styles.push(_)}),n}visitReference(t,e){return{type:8,animation:Ks(this,Am(t.animation),e),options:bd(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:bd(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:bd(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,o]=function a_e(i){const t=!!i.split(/\s*,\s*/).find(e=>":self"==e);return t&&(i=i.replace(s_e,"")),i=i.replace(/@\*/g,ey).replace(/@\w+/g,e=>ey+"-"+e.slice(1)).replace(/:animating/g,a1),[i,t]}(t.selector);e.currentQuerySelector=n.length?n+" "+s:s,qs(e.collectedStyles,e.currentQuerySelector,new Map);const a=Ks(this,Am(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:t.selector,options:bd(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function xge(){return new he(3013,!1)}());const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:ty(t.timings,e.errors,!0);return{type:12,animation:Ks(this,Am(t.animation),e),timings:n,options:null}}}class c_e{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function bd(i){return i?(i=Em(i)).params&&(i.params=function l_e(i){return i?Em(i):null}(i.params)):i={},i}function h1(i,t,e){return{duration:i,delay:t,easing:e}}function p1(i,t,e,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:t,preStyleProps:e,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class ly{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const f_e=new RegExp(":enter","g"),g_e=new RegExp(":leave","g");function f1(i,t,e,n,r,s=new Map,o=new Map,a,l,c=[]){return(new __e).buildKeyframes(i,t,e,n,r,s,o,a,l,c)}class __e{buildKeyframes(t,e,n,r,s,o,a,l,c,d=[]){c=c||new ly;const u=new m1(t,e,c,r,s,d,[]);u.options=l;const h=l.delay?sl(l.delay):0;u.currentTimeline.delayNextStep(h),u.currentTimeline.setStyles([o],null,u.errors,l),Ks(this,n,u);const p=u.timelines.filter(f=>f.containsAnimation());if(p.length&&a.size){let f;for(let g=p.length-1;g>=0;g--){const m=p[g];if(m.element===e){f=m;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,u.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[p1(e,[],[],[],0,h,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.get(e.element);if(n){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&e.transformIntoNewTimeline(o)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([t.options,t.animation.options],e,n),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_applyAnimationRefDelays(t,e,n){for(const r of t){const s=r?.delay;if(s){const o="number"==typeof s?s:sl(Dm(s,r?.params??{},e.errors));n.delayNextStep(o)}}}_visitSubInstructions(t,e,n){let s=e.currentTimeline.currentTime;const o=null!=n.duration?sl(n.duration):null,a=null!=n.delay?sl(n.delay):null;return 0!==o&&t.forEach(l=>{const c=e.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ks(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=cy);const o=sl(s.delay);r.delayNextStep(o)}t.steps.length&&(t.steps.forEach(o=>Ks(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?sl(t.options.delay):0;t.steps.forEach(o=>{const a=e.createSubContext(t.options);s&&a.delayNextStep(s),Ks(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>e.currentTimeline.mergeTimelineCollectedStyles(o)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return ty(e.params?Dm(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(n.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,r=e.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(s):n.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,r=e.currentTimeline.duration,s=n.duration,a=e.createSubContext().currentTimeline;a.easing=n.easing,t.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,e.errors,e.options),a.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(a),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?sl(r.delay):0;s&&(6===e.previousNode.type||0==n&&e.currentTimeline.hasCurrentStyleProperties())&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=cy);let o=n;const a=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{e.currentQueryIndex=d;const u=e.createSubContext(t.options,c);s&&u.delayNextStep(s),c===e.element&&(l=u.currentTimeline),Ks(this,t.animation,u),u.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,u.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(o),l&&(e.currentTimeline.mergeTimelineCollectedStyles(l),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,r=e.currentTimeline,s=t.timings,o=Math.abs(s.duration),a=o*(e.currentQueryTotal-1);let l=o*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=e.currentTimeline;l&&d.delayNextStep(l);const u=d.currentTime;Ks(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=r.currentTime-u+(r.startTime-n.currentTimeline.startTime)}}const cy={};class m1{constructor(t,e,n,r,s,o,a,l){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cy,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new dy(this._driver,e,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let r=this.options;null!=n.duration&&(r.duration=sl(n.duration)),null!=n.delay&&(r.delay=sl(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!e||!o.hasOwnProperty(a))&&(o[a]=Dm(s[a],o,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(r=>{n[r]=e[r]})}}return t}createSubContext(t=null,e,n){const r=e||this.element,s=new m1(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=cy,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const r={duration:e??t.duration,delay:this.currentTimeline.currentTime+(n??0)+t.delay,easing:""},s=new v_e(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,r,s,o){let a=[];if(r&&a.push(this.element),t.length>0){t=(t=t.replace(f_e,"."+this._enterClassName)).replace(g_e,"."+this._leaveClassName);let c=this._driver.query(this.element,t,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function wge(i){return new he(3014,!1)}()),a}}class dy{constructor(t,e,n,r){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1===this._keyframes.size&&this._pendingStyles.size;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new dy(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles.set(t,e),this._globalTimelineStyles.set(t,e),this._styleSummary.set(t,{time:this.currentTime,value:e})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&this._previousKeyframe.set("easing",t);for(let[e,n]of this._globalTimelineStyles)this._backFill.set(e,n||Va),this._currentKeyframe.set(e,Va);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,r){e&&this._previousKeyframe.set("easing",e);const s=r&&r.params||{},o=function b_e(i,t){const e=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||t.keys();for(let s of n)e.set(s,Va)}else Yl(r,e)}),e}(t,this._globalTimelineStyles);for(let[a,l]of o){const c=Dm(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Va),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((t,e)=>{this._currentKeyframe.set(e,t)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((t,e)=>{this._currentKeyframe.has(e)||this._currentKeyframe.set(e,t)}))}snapshotCurrentStyles(){for(let[t,e]of this._localTimelineStyles)this._pendingStyles.set(t,e),this._updateStyle(t,e)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){t._styleSummary.forEach((e,n)=>{const r=this._styleSummary.get(n);(!r||e.time>r.time)&&this._updateStyle(n,e.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Yl(a,new Map,this._backFill);c.forEach((d,u)=>{d===AM?t.add(u):d===Va&&e.add(u)}),n||c.set("offset",l/this.duration),r.push(c)});const s=t.size?ny(t.values()):[],o=e.size?ny(e.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return p1(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class v_e extends dy{constructor(t,e,n,r,s,o,a=!1){super(t,e,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],o=n+e,a=e/o,l=Yl(t[0]);l.set("offset",0),s.push(l);const c=Yl(t[0]);c.set("offset",PV(a)),s.push(c);const d=t.length-1;for(let u=1;u<=d;u++){let h=Yl(t[u]);const p=h.get("offset");h.set("offset",PV((e+p*n)/o)),s.push(h)}n=o,e=0,r="",t=s}return p1(this.element,t,this.preStyleProps,this.postStyleProps,n,e,r,!0)}}function PV(i,t=3){const e=Math.pow(10,t-1);return Math.round(i*e)/e}class g1{}const y_e=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class x_e extends g1{normalizePropertyName(t,e){return d1(t)}normalizeStyleValue(t,e,n,r){let s="";const o=n.toString().trim();if(y_e.has(e)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function uge(i,t){return new he(3005,!1)}())}return o+s}}function OV(i,t,e,n,r,s,o,a,l,c,d,u,h){return{type:0,element:i,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:u,errors:h}}const _1={};class FV{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,r){return function w_e(i,t,e,n,r){return i.some(s=>s(t,e,n,r))}(this.ast.matchers,t,e,n,r)}buildStyles(t,e,n){let r=this._stateStyles.get("*");return void 0!==t&&(r=this._stateStyles.get(t?.toString())||r),r?r.buildStyles(e,n):new Map}build(t,e,n,r,s,o,a,l,c,d){const u=[],h=this.ast.options&&this.ast.options.params||_1,f=this.buildStyles(n,a&&a.params||_1,u),g=l&&l.params||_1,m=this.buildStyles(r,g,u),_=new Set,b=new Map,v=new Map,y="void"===r,R={params:M_e(g,h),delay:this.ast.options?.delay},M=d?[]:f1(t,e,this.ast.animation,s,o,f,m,R,c,u);let D=0;if(M.forEach(C=>{D=Math.max(C.duration+C.delay,D)}),u.length)return OV(e,this._triggerName,n,r,y,f,m,[],[],b,v,D,u);M.forEach(C=>{const w=C.element,U=qs(b,w,new Set);C.preStyleProps.forEach(q=>U.add(q));const ee=qs(v,w,new Set);C.postStyleProps.forEach(q=>ee.add(q)),w!==e&&_.add(w)});const L=ny(_.values());return OV(e,this._triggerName,n,r,y,f,m,M,L,b,v,D)}}function M_e(i,t){const e=Em(t);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(e[n]=i[n]);return e}class C_e{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n=new Map,r=Em(this.defaultParams);return Object.keys(t).forEach(s=>{const o=t[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Dm(o,r,e));const l=this.normalizer.normalizePropertyName(a,e);o=this.normalizer.normalizeStyleValue(a,l,o,e),n.set(a,o)})}),n}}class E_e{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states=new Map,e.states.forEach(r=>{this.states.set(r.name,new C_e(r.style,r.options&&r.options.params||{},n))}),LV(this.states,"true","1"),LV(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new FV(t,r,this.states))}),this.fallbackTransition=function A_e(i,t,e){return new FV(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,r){return this.transitionFactories.find(o=>o.match(t,e,n,r))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function LV(i,t,e){i.has(t)?i.has(e)||i.set(e,i.get(t)):i.has(e)&&i.set(t,i.get(e))}const D_e=new ly;class T_e{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(t,e){const n=[],r=[],s=u1(this._driver,e,n,r);if(n.length)throw function Tge(i){return new he(3503,!1)}();this._animations.set(t,s)}_buildPlayer(t,e,n){const r=t.element,s=fV(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const r=[],s=this._animations.get(t);let o;const a=new Map;if(s?(o=f1(this._driver,e,s,o1,Qb,new Map,new Map,n,D_e,r),o.forEach(d=>{const u=qs(a,d.element,new Map);d.postStyleProps.forEach(h=>u.set(h,null))})):(r.push(function kge(){return new he(3300,!1)}()),o=[]),r.length)throw function Ige(i){return new he(3504,!1)}();a.forEach((d,u)=>{d.forEach((h,p)=>{d.set(p,this._driver.computeStyle(u,p,Va))})});const c=Wl(o.map(d=>{const u=a.get(d.element);return this._buildPlayer(d,new Map,u)}));return this._playersById.set(t,c),c.onDestroy(()=>this.destroy(t)),this.players.push(c),c}destroy(t){const e=this._getPlayer(t);e.destroy(),this._playersById.delete(t);const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById.get(t);if(!e)throw function Rge(i){return new he(3301,!1)}();return e}listen(t,e,n,r){const s=t1(e,"","","");return JE(this._getPlayer(t),n,s,r),()=>{}}command(t,e,n,r){if("register"==n)return void this.register(t,r[0]);if("create"==n)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const NV="ng-animate-queued",v1="ng-animate-disabled",O_e=[],BV={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},F_e={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vo="__ng_removed";class b1{get params(){return this.options.params}constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=function U_e(i){return i??null}(n?t.value:t),n){const s=Em(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(t){const e=t.params;if(e){const n=this.options.params;Object.keys(e).forEach(r=>{null==n[r]&&(n[r]=e[r])})}}}const Tm="void",y1=new b1(Tm);class L_e{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,bo(e,this._hostClassName)}listen(t,e,n,r){if(!this._triggers.has(e))throw function Pge(i,t){return new he(3302,!1)}();if(null==n||0==n.length)throw function Oge(i){return new he(3303,!1)}();if(!function V_e(i){return"start"==i||"done"==i}(n))throw function Fge(i,t){return new he(3400,!1)}();const s=qs(this._elementListeners,t,[]),o={name:e,phase:n,callback:r};s.push(o);const a=qs(this._engine.statesByElement,t,new Map);return a.has(e)||(bo(t,Jb),bo(t,Jb+"-"+e),a.set(e,y1)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(e)||a.delete(e)})}}register(t,e){return!this._triggers.has(t)&&(this._triggers.set(t,e),!0)}_getTrigger(t){const e=this._triggers.get(t);if(!e)throw function Lge(i){return new he(3401,!1)}();return e}trigger(t,e,n,r=!0){const s=this._getTrigger(e),o=new x1(this.id,e,t);let a=this._engine.statesByElement.get(t);a||(bo(t,Jb),bo(t,Jb+"-"+e),this._engine.statesByElement.set(t,a=new Map));let l=a.get(e);const c=new b1(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(e,c),l||(l=y1),c.value!==Tm&&l.value===c.value){if(!function $_e(i,t){const e=Object.keys(i),n=Object.keys(t);if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||i[s]!==t[s])return!1}return!0}(l.params,c.params)){const g=[],m=s.matchStyles(l.value,l.params,g),_=s.matchStyles(c.value,c.params,g);g.length?this._engine.reportError(g):this._engine.afterFlush(()=>{vd(t,m),ga(t,_)})}return}const h=qs(this._engine.playersByElement,t,[]);h.forEach(g=>{g.namespaceId==this.id&&g.triggerName==e&&g.queued&&g.destroy()});let p=s.matchTransition(l.value,c.value,t,c.params),f=!1;if(!p){if(!r)return;p=s.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:f}),f||(bo(t,NV),o.onStart(()=>{Wh(t,NV)})),o.onDone(()=>{let g=this.players.indexOf(o);g>=0&&this.players.splice(g,1);const m=this._engine.playersByElement.get(t);if(m){let _=m.indexOf(o);_>=0&&m.splice(_,1)}}),this.players.push(o),h.push(o),o}deregister(t){this._triggers.delete(t),this._engine.statesByElement.forEach(e=>e.delete(t)),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(n=>n.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,ey,!0);n.forEach(r=>{if(r[vo])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,n,r){const s=this._engine.statesByElement.get(t),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(t,c,Tm,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,o),n&&Wl(a).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const r=new Set;e.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||y1,d=new b1(Tm),u=new x1(this.id,o,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:o,transition:l,fromState:c,toState:d,player:u,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let o=t;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)n.markElementAsRemoved(this.id,t,!1,e);else{const s=t[vo];(!s||s===BV)&&(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){bo(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=t1(s,n.triggerName,n.fromState.value,n.toState.value);l._data=t,JE(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(n)}),this._queue=[],e.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(n=>n.element===t)||e,e}}class N_e{_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(n=>{n.queued&&t.push(n)})}),t}createNamespace(t,e){const n=new L_e(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(e);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,t),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(t)}else n.push(t);return r.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let r=this._namespaceLookup[t];r&&r.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&e.add(s)}return e}trigger(t,e,n,r){if(uy(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,n,r),!0}return!1}insertNode(t,e,n,r){if(!uy(e))return;const s=e[vo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(e);o>=0&&this.collectedLeaveElements.splice(o,1)}if(t){const o=this._fetchNamespace(t);o&&o.insertNode(e,n)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),bo(t,v1)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Wh(t,v1))}removeNode(t,e,n,r){if(uy(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),n){const o=this.namespacesByHostElement.get(e);o&&o.id!==t&&o.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,n,r,s){this.collectedLeaveElements.push(e),e[vo]={namespaceId:t,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,n,r,s){return uy(e)?this._fetchNamespace(t).listen(e,n,r,s):()=>{}}_buildInstruction(t,e,n,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,ey,!0);e.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,a1,!0),e.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Wl(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[vo];if(e&&e.setForRemoval){if(t[vo]=BV,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}t.classList?.contains(v1)&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)bo(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],e.length?Wl(e).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(t){throw function Nge(i){return new he(3402,!1)}()}_flushAnimations(t,e){const n=new ly,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(V=>{d.add(V);const te=this.driver.query(V,".ng-animate-queued",!0);for(let Y=0;Y<te.length;Y++)d.add(te[Y])});const u=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=zV(h,this.collectedEnterElements),f=new Map;let g=0;p.forEach((V,te)=>{const Y=o1+g++;f.set(te,Y),V.forEach(ve=>bo(ve,Y))});const m=[],_=new Set,b=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){const te=this.collectedLeaveElements[V],Y=te[vo];Y&&Y.setForRemoval&&(m.push(te),_.add(te),Y.hasAnimation?this.driver.query(te,".ng-star-inserted",!0).forEach(ve=>_.add(ve)):b.add(te))}const v=new Map,y=zV(h,Array.from(_));y.forEach((V,te)=>{const Y=Qb+g++;v.set(te,Y),V.forEach(ve=>bo(ve,Y))}),t.push(()=>{p.forEach((V,te)=>{const Y=f.get(te);V.forEach(ve=>Wh(ve,Y))}),y.forEach((V,te)=>{const Y=v.get(te);V.forEach(ve=>Wh(ve,Y))}),m.forEach(V=>{this.processLeaveNode(V)})});const R=[],M=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(e).forEach(Y=>{const ve=Y.player,Le=Y.element;if(R.push(ve),this.collectedEnterElements.length){const Re=Le[vo];if(Re&&Re.setForMove){if(Re.previousTriggersValues&&Re.previousTriggersValues.has(Y.triggerName)){const _t=Re.previousTriggersValues.get(Y.triggerName),wt=this.statesByElement.get(Y.element);if(wt&&wt.has(Y.triggerName)){const yt=wt.get(Y.triggerName);yt.value=_t,wt.set(Y.triggerName,yt)}}return void ve.destroy()}}const $e=!u||!this.driver.containsElement(u,Le),Mt=v.get(Le),Gt=f.get(Le),ie=this._buildInstruction(Y,n,Gt,Mt,$e);if(ie.errors&&ie.errors.length)return void M.push(ie);if($e)return ve.onStart(()=>vd(Le,ie.fromStyles)),ve.onDestroy(()=>ga(Le,ie.toStyles)),void r.push(ve);if(Y.isFallbackTransition)return ve.onStart(()=>vd(Le,ie.fromStyles)),ve.onDestroy(()=>ga(Le,ie.toStyles)),void r.push(ve);const Ie=[];ie.timelines.forEach(Re=>{Re.stretchStartingKeyframe=!0,this.disabledNodes.has(Re.element)||Ie.push(Re)}),ie.timelines=Ie,n.append(Le,ie.timelines),o.push({instruction:ie,player:ve,element:Le}),ie.queriedElements.forEach(Re=>qs(a,Re,[]).push(ve)),ie.preStyleProps.forEach((Re,_t)=>{if(Re.size){let wt=l.get(_t);wt||l.set(_t,wt=new Set),Re.forEach((yt,mn)=>wt.add(mn))}}),ie.postStyleProps.forEach((Re,_t)=>{let wt=c.get(_t);wt||c.set(_t,wt=new Set),Re.forEach((yt,mn)=>wt.add(mn))})});if(M.length){const V=[];M.forEach(te=>{V.push(function Bge(i,t){return new he(3505,!1)}())}),R.forEach(te=>te.destroy()),this.reportError(V)}const D=new Map,L=new Map;o.forEach(V=>{const te=V.element;n.has(te)&&(L.set(te,te),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,D))}),r.forEach(V=>{const te=V.element;this._getPreviousPlayers(te,!1,V.namespaceId,V.triggerName,null).forEach(ve=>{qs(D,te,[]).push(ve),ve.destroy()})});const C=m.filter(V=>$V(V,l,c)),w=new Map;VV(w,this.driver,b,c,Va).forEach(V=>{$V(V,l,c)&&C.push(V)});const ee=new Map;p.forEach((V,te)=>{VV(ee,this.driver,new Set(V),l,AM)}),C.forEach(V=>{const te=w.get(V),Y=ee.get(V);w.set(V,new Map([...Array.from(te?.entries()??[]),...Array.from(Y?.entries()??[])]))});const q=[],ne=[],fe={};o.forEach(V=>{const{element:te,player:Y,instruction:ve}=V;if(n.has(te)){if(d.has(te))return Y.onDestroy(()=>ga(te,ve.toStyles)),Y.disabled=!0,Y.overrideTotalTime(ve.totalTime),void r.push(Y);let Le=fe;if(L.size>1){let Mt=te;const Gt=[];for(;Mt=Mt.parentNode;){const ie=L.get(Mt);if(ie){Le=ie;break}Gt.push(Mt)}Gt.forEach(ie=>L.set(ie,Le))}const $e=this._buildAnimation(Y.namespaceId,ve,D,s,ee,w);if(Y.setRealPlayer($e),Le===fe)q.push(Y);else{const Mt=this.playersByElement.get(Le);Mt&&Mt.length&&(Y.parentPlayer=Wl(Mt)),r.push(Y)}}else vd(te,ve.fromStyles),Y.onDestroy(()=>ga(te,ve.toStyles)),ne.push(Y),d.has(te)&&r.push(Y)}),ne.forEach(V=>{const te=s.get(V.element);if(te&&te.length){const Y=Wl(te);V.setRealPlayer(Y)}}),r.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<m.length;V++){const te=m[V],Y=te[vo];if(Wh(te,Qb),Y&&Y.hasAnimation)continue;let ve=[];if(a.size){let $e=a.get(te);$e&&$e.length&&ve.push(...$e);let Mt=this.driver.query(te,a1,!0);for(let Gt=0;Gt<Mt.length;Gt++){let ie=a.get(Mt[Gt]);ie&&ie.length&&ve.push(...ie)}}const Le=ve.filter($e=>!$e.destroyed);Le.length?z_e(this,te,Le):this.processLeaveNode(te)}return m.length=0,q.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();const te=this.players.indexOf(V);this.players.splice(te,1)}),V.play()}),q}elementContainsData(t,e){let n=!1;const r=e[vo];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,r,s){let o=[];if(e){const a=this.playersByQueriedElement.get(t);a&&(o=a)}else{const a=this.playersByElement.get(t);if(a){const l=!s||s==Tm;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(t,e,n){const s=e.element,o=e.isRemovalTransition?void 0:t,a=e.isRemovalTransition?void 0:e.triggerName;for(const l of e.timelines){const c=l.element,d=c!==s,u=qs(n,c,[]);this._getPreviousPlayers(c,d,o,a,e.toState).forEach(p=>{const f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),u.push(p)})}vd(s,e.fromStyles)}_buildAnimation(t,e,n,r,s,o){const a=e.triggerName,l=e.element,c=[],d=new Set,u=new Set,h=e.timelines.map(f=>{const g=f.element;d.add(g);const m=g[vo];if(m&&m.removedBeforeQueried)return new yf(f.duration,f.delay);const _=g!==l,b=function H_e(i){const t=[];return HV(i,t),t}((n.get(g)||O_e).map(D=>D.getRealPlayer())).filter(D=>!!D.element&&D.element===g),v=s.get(g),y=o.get(g),R=fV(0,this._normalizer,0,f.keyframes,v,y),M=this._buildPlayer(f,R,b);if(f.subTimeline&&r&&u.add(g),_){const D=new x1(t,a,g);D.setRealPlayer(M),c.push(D)}return M});c.forEach(f=>{qs(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>function B_e(i,t,e){let n=i.get(t);if(n){if(n.length){const r=n.indexOf(e);n.splice(r,1)}0==n.length&&i.delete(t)}return n}(this.playersByQueriedElement,f.element,f))}),d.forEach(f=>bo(f,MV));const p=Wl(h);return p.onDestroy(()=>{d.forEach(f=>Wh(f,MV)),ga(l,e.toStyles)}),u.forEach(f=>{qs(r,f,[]).push(p)}),p}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new yf(t.duration,t.delay)}}class x1{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new yf,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,this._queuedCallbacks.forEach((e,n)=>{e.forEach(r=>JE(t,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){qs(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function uy(i){return i&&1===i.nodeType}function UV(i,t){const e=i.style.display;return i.style.display=t??"none",e}function VV(i,t,e,n,r){const s=[];e.forEach(l=>s.push(UV(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(u=>{const h=t.computeStyle(c,u,r);d.set(u,h),(!h||0==h.length)&&(c[vo]=F_e,o.push(c))}),i.set(c,d)});let a=0;return e.forEach(l=>UV(l,s[a++])),o}function zV(i,t){const e=new Map;if(i.forEach(a=>e.set(a,[])),0==t.length)return e;const n=1,r=new Set(t),s=new Map;function o(a){if(!a)return n;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=e.has(c)?c:r.has(c)?n:o(c),s.set(a,l),l}return t.forEach(a=>{const l=o(a);l!==n&&e.get(l).push(a)}),e}function bo(i,t){i.classList?.add(t)}function Wh(i,t){i.classList?.remove(t)}function z_e(i,t,e){Wl(e).onDone(()=>i.processLeaveNode(t))}function HV(i,t){for(let e=0;e<i.length;e++){const n=i[e];n instanceof B2?HV(n.players,t):t.push(n)}}function $V(i,t,e){const n=e.get(i);if(!n)return!1;let r=t.get(i);return r?n.forEach(s=>r.add(s)):t.set(i,n),e.delete(i),!0}class hy{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new N_e(t,e,n),this._timelineEngine=new T_e(t,e,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,n,r,s){const o=t+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=[],d=u1(this._driver,s,l,c);if(l.length)throw function Age(i,t){return new he(3404,!1)}();a=function S_e(i,t,e){return new E_e(i,t,e)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(e,r,a)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,r){this._transitionEngine.insertNode(t,e,n,r)}onRemove(t,e,n,r){this._transitionEngine.removeNode(t,e,r||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,r){if("@"==n.charAt(0)){const[s,o]=mV(n);this._timelineEngine.command(s,e,o,r)}else this._transitionEngine.trigger(t,e,n,r)}listen(t,e,n,r,s){if("@"==n.charAt(0)){const[o,a]=mV(n);return this._timelineEngine.listen(o,e,a,s)}return this._transitionEngine.listen(t,e,n,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let j_e=(()=>{class i{constructor(e,n,r){this._element=e,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(e);s||i.initialStylesByElement.set(e,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&ga(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ga(this._element,this._initialStyles),this._endStyles&&(ga(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(vd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(vd(this._element,this._endStyles),this._endStyles=null),ga(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function w1(i){let t=null;return i.forEach((e,n)=>{(function W_e(i){return"display"===i||"position"===i})(n)&&(t=t||new Map,t.set(n,e))}),t}class GV{constructor(t,e,n,r){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(t){const e=[];return t.forEach(n=>{e.push(Object.fromEntries(n))}),e}_triggerWebAnimation(t,e,n){return t.animate(this._convertKeyframesToObject(e),n)}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&t.set(r,this._finished?n:TV(this.element,r))}),this.currentSnapshot=t}triggerCallback(t){const e="start"===t?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}}class Y_e{validateStyleProperty(t){return!0}validateAnimatableStyleProperty(t){return!0}matchesElement(t,e){return!1}containsElement(t,e){return bV(t,e)}getParentElement(t){return r1(t)}query(t,e,n){return yV(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}animate(t,e,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(p=>p instanceof GV);(function Zge(i,t){return 0===i||0===t})(n,r)&&d.forEach(p=>{p.currentSnapshot.forEach((f,g)=>c.set(g,f))});let u=function Yge(i){return i.length?i[0]instanceof Map?i:i.map(t=>CV(t)):[]}(e).map(p=>Yl(p));u=function Qge(i,t,e){if(e.size&&t.length){let n=t[0],r=[];if(e.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<t.length;s++){let o=t[s];r.forEach(a=>o.set(a,TV(i,a)))}}return t}(t,u,c);const h=function G_e(i,t){let e=null,n=null;return Array.isArray(t)&&t.length?(e=w1(t[0]),t.length>1&&(n=w1(t[t.length-1]))):t instanceof Map&&(e=w1(t)),e||n?new j_e(i,e,n):null}(t,u);return new GV(t,u,l,h)}}let X_e=(()=>{class i extends P2{constructor(e,n){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(n.body,{id:"0",encapsulation:xo.None,styles:[],data:{animation:[]}})}build(e){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?F2(e):e;return jV(this._renderer,null,n,"register",[r]),new q_e(n,this._renderer)}}return i.\u0275fac=function(e){return new(e||i)(K(vp),K(Lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();class q_e extends wZ{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new K_e(this._id,t,e||{},this._renderer)}}class K_e{constructor(t,e,n,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return jV(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function jV(i,t,e,n,r){return i.setProperty(t,`@@${e}:${n}`,r)}const WV="@.disabled";let Z_e=(()=>{class i{constructor(e,n,r){this.delegate=e,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(e,n){const s=this.delegate.createRenderer(e,n);if(!(e&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new YV("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,e);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,e,d.name,d)};return n.data.animation.forEach(l),new Q_e(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,r){e>=0&&e<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(e){return new(e||i)(K(vp),K(hy),K(lt))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})();class YV{constructor(t,e,n,r){this.namespaceId=t,this.delegate=e,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>e.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,r=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){"@"==e.charAt(0)&&e==WV?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Q_e extends YV{constructor(t,e,n,r,s){super(e,n,r,s),this.factory=t,this.namespaceId=e}setProperty(t,e,n){"@"==e.charAt(0)?"."==e.charAt(1)&&e==WV?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.slice(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if("@"==e.charAt(0)){const r=function J_e(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(t);let s=e.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function eve(i){const t=i.indexOf(".");return[i.substring(0,t),i.slice(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(t,e,n)}}const XV=[{provide:P2,useClass:X_e},{provide:g1,useFactory:function nve(){return new x_e}},{provide:hy,useClass:(()=>{class i extends hy{constructor(e,n,r,s){super(e.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(e){return new(e||i)(K(Lt),K(s1),K(g1),K(du))},i.\u0275prov=Te({token:i,factory:i.\u0275fac}),i})()},{provide:vp,useFactory:function ive(i,t,e){return new Z_e(i,t,e)},deps:[s_,hy,lt]}],M1=[{provide:s1,useFactory:()=>new Y_e},{provide:Fi,useValue:"BrowserAnimations"},...XV],qV=[{provide:s1,useClass:xV},{provide:Fi,useValue:"NoopAnimations"},...XV];let rve=(()=>{class i{static withConfig(e){return{ngModule:i,providers:e.disableAnimations?qV:M1}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:M1,imports:[pP]}),i})();function sve(i,t){if(1&i&&(S(0,"mat-option",19),H(1),A()),2&i){const e=t.$implicit;T("value",e),k(1),hi(" ",e," ")}}function ove(i,t){if(1&i){const e=en();S(0,"mat-form-field",16)(1,"mat-select",17),de("selectionChange",function(r){return nt(e),it($(2)._changePageSize(r.value))}),Z(2,sve,2,2,"mat-option",18),A()()}if(2&i){const e=$(2);T("appearance",e._formFieldAppearance)("color",e.color),k(1),T("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),k(1),T("ngForOf",e._displayedPageSizeOptions)}}function ave(i,t){if(1&i&&(S(0,"div",20),H(1),A()),2&i){const e=$(2);k(1),bn(e.pageSize)}}function lve(i,t){if(1&i&&(S(0,"div",12)(1,"div",13),H(2),A(),Z(3,ove,3,8,"mat-form-field",14),Z(4,ave,2,1,"div",15),A()),2&i){const e=$();k(1),lx("id",e._pageSizeLabelId),k(1),hi(" ",e._intl.itemsPerPageLabel," "),k(1),T("ngIf",e._displayedPageSizeOptions.length>1),k(1),T("ngIf",e._displayedPageSizeOptions.length<=1)}}function cve(i,t){if(1&i){const e=en();S(0,"button",21),de("click",function(){return nt(e),it($().firstPage())}),Yr(),S(1,"svg",7),pe(2,"path",22),A()()}if(2&i){const e=$();T("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),xt("aria-label",e._intl.firstPageLabel)}}function dve(i,t){if(1&i){const e=en();Yr(),dl(),S(0,"button",23),de("click",function(){return nt(e),it($().lastPage())}),Yr(),S(1,"svg",7),pe(2,"path",24),A()()}if(2&i){const e=$();T("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),xt("aria-label",e._intl.lastPageLabel)}}let fy=(()=>{class i{constructor(){this.changes=new De,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=e*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=Te({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hve={provide:fy,deps:[[new Ps,new Ko,fy]],useFactory:function uve(i){return i||new fy}},fve=new ue("MAT_PAGINATOR_DEFAULT_OPTIONS"),mve=_f(dZ(class{}));let gve=(()=>{class i extends mve{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(dr(e),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=dr(e),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(dr(e),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(n=>dr(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(e){this._hidePageSize=kt(e)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(e){this._showFirstLastButtons=kt(e)}constructor(e,n,r){if(super(),this._intl=e,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new Fe,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;const e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;const e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const e=this.getNumberOfPages()-1;return this.pageIndex<e&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._initialized&&(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,n)=>e-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(e){Eo()},i.\u0275dir=ge({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[Je]}),i})(),_ve=0,vve=(()=>{class i extends gve{constructor(e,n,r){super(e,n,r),this._pageSizeLabelId="mat-paginator-page-size-label-"+_ve++,this._formFieldAppearance=r?.formFieldAppearance||"outline"}}return i.\u0275fac=function(e){return new(e||i)(x(fy),x(yn),x(fve,8))},i.\u0275cmp=Xe({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[Je],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],["class","mat-mdc-paginator-page-size",4,"ngIf"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-page-size-label",3,"id"],["class","mat-mdc-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-mdc-paginator-page-size-value",4,"ngIf"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],["hideSingleSelectionIndicator","",3,"value","disabled","aria-labelledby","panelClass","disableOptionCentering","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-mdc-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(e,n){1&e&&(S(0,"div",0)(1,"div",1),Z(2,lve,5,4,"div",2),S(3,"div",3)(4,"div",4),H(5),A(),Z(6,cve,3,5,"button",5),S(7,"button",6),de("click",function(){return n.previousPage()}),Yr(),S(8,"svg",7),pe(9,"path",8),A()(),dl(),S(10,"button",9),de("click",function(){return n.nextPage()}),Yr(),S(11,"svg",7),pe(12,"path",10),A()(),Z(13,dve,3,5,"button",11),A()()()),2&e&&(k(2),T("ngIf",!n.hidePageSize),k(3),hi(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),k(1),T("ngIf",n.showFirstLastButtons),k(1),T("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),xt("aria-label",n._intl.previousPageLabel),k(3),T("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),xt("aria-label",n._intl.nextPageLabel),k(3),T("ngIf",n.showFirstLastButtons))},dependencies:[cr,On,j_,vs,Rc,wl,wr],styles:[".mat-mdc-paginator{display:block}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),bve=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=Ot({type:i}),i.\u0275inj=Dt({providers:[hve],imports:[nr,Ml,pN,sv]}),i})(),yve=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ot({type:i});static \u0275inj=Dt({imports:[nr,ZF,kf,SL,Dc,If,Ml,Ff,Rf,sv,pN,bve,gse,_N,xf,YL,cN,CM,ure,Ere]})}return i})();ep(Fo,[cr,On,wr,Sm,Zb],[Fr]),ep(bC,[pc,cr,On,hu,Hs,aa,lC,wL,CL,ML,vs,wr,Rc,wl,vve,Sm],[]),ep(hV,[cr,On,xr,wr,Rc,wl,Sm,Zb],[Fr]),ep(vv,[cr,On,yv,bv,gN,Sm],[]);let xve=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ot({type:i});static \u0275inj=Dt({imports:[nr,vC]})}return i})(),wve=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Ot({type:i,bootstrap:[sge]});static \u0275inj=Dt({providers:[bs,EC,{provide:PN,useValue:rre}],imports:[pP,lq,rve,Lte,qL,Rf,sv,Ml,Ff,xf,cN,Dc,If,uL,kf,vC,yve,xve,QL,gC]})}return i})();w7().bootstrapModule(wve).catch(i=>console.error(i))},7244:(z,ae,O)=>{var Q=O(3436)(O(2119),"DataView");z.exports=Q},4994:(z,ae,O)=>{var B=O(4312),W=O(6421),Q=O(5764),le=O(8685),J=O(6676);function ce(me){var je=-1,St=null==me?0:me.length;for(this.clear();++je<St;){var gt=me[je];this.set(gt[0],gt[1])}}ce.prototype.clear=B,ce.prototype.delete=W,ce.prototype.get=Q,ce.prototype.has=le,ce.prototype.set=J,z.exports=ce},9215:(z,ae,O)=>{var B=O(1840),W=O(4378),Q=O(4981),le=O(7343),J=O(8895);function ce(me){var je=-1,St=null==me?0:me.length;for(this.clear();++je<St;){var gt=me[je];this.set(gt[0],gt[1])}}ce.prototype.clear=B,ce.prototype.delete=W,ce.prototype.get=Q,ce.prototype.has=le,ce.prototype.set=J,z.exports=ce},1501:(z,ae,O)=>{var Q=O(3436)(O(2119),"Map");z.exports=Q},9850:(z,ae,O)=>{var B=O(638),W=O(1184),Q=O(866),le=O(3771),J=O(1772);function ce(me){var je=-1,St=null==me?0:me.length;for(this.clear();++je<St;){var gt=me[je];this.set(gt[0],gt[1])}}ce.prototype.clear=B,ce.prototype.delete=W,ce.prototype.get=Q,ce.prototype.has=le,ce.prototype.set=J,z.exports=ce},4267:(z,ae,O)=>{var Q=O(3436)(O(2119),"Promise");z.exports=Q},6323:(z,ae,O)=>{var Q=O(3436)(O(2119),"Set");z.exports=Q},8849:(z,ae,O)=>{var B=O(9850),W=O(4600),Q=O(1387);function le(J){var ce=-1,me=null==J?0:J.length;for(this.__data__=new B;++ce<me;)this.add(J[ce])}le.prototype.add=le.prototype.push=W,le.prototype.has=Q,z.exports=le},2858:(z,ae,O)=>{var B=O(9215),W=O(3720),Q=O(4410),le=O(5576),J=O(2247),ce=O(1585);function me(je){var St=this.__data__=new B(je);this.size=St.size}me.prototype.clear=W,me.prototype.delete=Q,me.prototype.get=le,me.prototype.has=J,me.prototype.set=ce,z.exports=me},443:(z,ae,O)=>{var B=O(2119);z.exports=B.Symbol},3457:(z,ae,O)=>{var B=O(2119);z.exports=B.Uint8Array},4243:(z,ae,O)=>{var Q=O(3436)(O(2119),"WeakMap");z.exports=Q},9779:z=>{z.exports=function ae(O,B){for(var W=-1,Q=null==O?0:O.length,le=0,J=[];++W<Q;){var ce=O[W];B(ce,W,O)&&(J[le++]=ce)}return J}},2271:(z,ae,O)=>{var B=O(5334),W=O(7151),Q=O(1503),le=O(891),J=O(8442),ce=O(8159),je=Object.prototype.hasOwnProperty;z.exports=function St(gt,Wt){var Nt=Q(gt),In=!Nt&&W(gt),Un=!Nt&&!In&&le(gt),di=!Nt&&!In&&!Un&&ce(gt),Bt=Nt||In||Un||di,un=Bt?B(gt.length,String):[],Sn=un.length;for(var Mn in gt)(Wt||je.call(gt,Mn))&&(!Bt||!("length"==Mn||Un&&("offset"==Mn||"parent"==Mn)||di&&("buffer"==Mn||"byteLength"==Mn||"byteOffset"==Mn)||J(Mn,Sn)))&&un.push(Mn);return un}},5059:z=>{z.exports=function ae(O,B){for(var W=-1,Q=B.length,le=O.length;++W<Q;)O[le+W]=B[W];return O}},9503:z=>{z.exports=function ae(O,B){for(var W=-1,Q=null==O?0:O.length;++W<Q;)if(B(O[W],W,O))return!0;return!1}},3503:(z,ae,O)=>{var B=O(217);z.exports=function W(Q,le){for(var J=Q.length;J--;)if(B(Q[J][0],le))return J;return-1}},8247:(z,ae,O)=>{var B=O(5059),W=O(1503);z.exports=function Q(le,J,ce){var me=J(le);return W(le)?me:B(me,ce(le))}},3337:(z,ae,O)=>{var B=O(443),W=O(1318),Q=O(2902),ce=B?B.toStringTag:void 0;z.exports=function me(je){return null==je?void 0===je?"[object Undefined]":"[object Null]":ce&&ce in Object(je)?W(je):Q(je)}},186:(z,ae,O)=>{var B=O(3337),W=O(2671);z.exports=function le(J){return W(J)&&"[object Arguments]"==B(J)}},5740:(z,ae,O)=>{var B=O(8325),W=O(2671);z.exports=function Q(le,J,ce,me,je){return le===J||(null==le||null==J||!W(le)&&!W(J)?le!=le&&J!=J:B(le,J,ce,me,Q,je))}},8325:(z,ae,O)=>{var B=O(2858),W=O(3914),Q=O(8583),le=O(2286),J=O(8794),ce=O(1503),me=O(891),je=O(8159),gt="[object Arguments]",Wt="[object Array]",Nt="[object Object]",Un=Object.prototype.hasOwnProperty;z.exports=function di(Bt,un,Sn,Mn,_i,Rn){var vi=ce(Bt),Pn=ce(un),gn=vi?Wt:J(Bt),Vi=Pn?Wt:J(un),Tr=(gn=gn==gt?Nt:gn)==Nt,as=(Vi=Vi==gt?Nt:Vi)==Nt,En=gn==Vi;if(En&&me(Bt)){if(!me(un))return!1;vi=!0,Tr=!1}if(En&&!Tr)return Rn||(Rn=new B),vi||je(Bt)?W(Bt,un,Sn,Mn,_i,Rn):Q(Bt,un,gn,Sn,Mn,_i,Rn);if(!(1&Sn)){var As=Tr&&Un.call(Bt,"__wrapped__"),zi=as&&Un.call(un,"__wrapped__");if(As||zi){var Xh=As?Bt.value():Bt,ql=zi?un.value():un;return Rn||(Rn=new B),_i(Xh,ql,Sn,Mn,Rn)}}return!!En&&(Rn||(Rn=new B),le(Bt,un,Sn,Mn,_i,Rn))}},7304:(z,ae,O)=>{var B=O(5946),W=O(1943),Q=O(5940),le=O(2827),ce=/^\[object .+?Constructor\]$/,Wt=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");z.exports=function Nt(In){return!(!Q(In)||W(In))&&(B(In)?Wt:ce).test(le(In))}},1083:(z,ae,O)=>{var B=O(3337),W=O(6231),Q=O(2671),En={};En["[object Float32Array]"]=En["[object Float64Array]"]=En["[object Int8Array]"]=En["[object Int16Array]"]=En["[object Int32Array]"]=En["[object Uint8Array]"]=En["[object Uint8ClampedArray]"]=En["[object Uint16Array]"]=En["[object Uint32Array]"]=!0,En["[object Arguments]"]=En["[object Array]"]=En["[object ArrayBuffer]"]=En["[object Boolean]"]=En["[object DataView]"]=En["[object Date]"]=En["[object Error]"]=En["[object Function]"]=En["[object Map]"]=En["[object Number]"]=En["[object Object]"]=En["[object RegExp]"]=En["[object Set]"]=En["[object String]"]=En["[object WeakMap]"]=!1,z.exports=function As(zi){return Q(zi)&&W(zi.length)&&!!En[B(zi)]}},1172:(z,ae,O)=>{var B=O(5488),W=O(5491),le=Object.prototype.hasOwnProperty;z.exports=function J(ce){if(!B(ce))return W(ce);var me=[];for(var je in Object(ce))le.call(ce,je)&&"constructor"!=je&&me.push(je);return me}},5334:z=>{z.exports=function ae(O,B){for(var W=-1,Q=Array(O);++W<O;)Q[W]=B(W);return Q}},5647:z=>{z.exports=function ae(O){return function(B){return O(B)}}},5972:z=>{z.exports=function ae(O,B){return O.has(B)}},4610:(z,ae,O)=>{var B=O(2119);z.exports=B["__core-js_shared__"]},3914:(z,ae,O)=>{var B=O(8849),W=O(9503),Q=O(5972);z.exports=function ce(me,je,St,gt,Wt,Nt){var In=1&St,Un=me.length,di=je.length;if(Un!=di&&!(In&&di>Un))return!1;var Bt=Nt.get(me),un=Nt.get(je);if(Bt&&un)return Bt==je&&un==me;var Sn=-1,Mn=!0,_i=2&St?new B:void 0;for(Nt.set(me,je),Nt.set(je,me);++Sn<Un;){var Rn=me[Sn],vi=je[Sn];if(gt)var Pn=In?gt(vi,Rn,Sn,je,me,Nt):gt(Rn,vi,Sn,me,je,Nt);if(void 0!==Pn){if(Pn)continue;Mn=!1;break}if(_i){if(!W(je,function(gn,Vi){if(!Q(_i,Vi)&&(Rn===gn||Wt(Rn,gn,St,gt,Nt)))return _i.push(Vi)})){Mn=!1;break}}else if(Rn!==vi&&!Wt(Rn,vi,St,gt,Nt)){Mn=!1;break}}return Nt.delete(me),Nt.delete(je),Mn}},8583:(z,ae,O)=>{var B=O(443),W=O(3457),Q=O(217),le=O(3914),J=O(3205),ce=O(4174),_i=B?B.prototype:void 0,Rn=_i?_i.valueOf:void 0;z.exports=function vi(Pn,gn,Vi,Tr,as,En,As){switch(Vi){case"[object DataView]":if(Pn.byteLength!=gn.byteLength||Pn.byteOffset!=gn.byteOffset)return!1;Pn=Pn.buffer,gn=gn.buffer;case"[object ArrayBuffer]":return!(Pn.byteLength!=gn.byteLength||!En(new W(Pn),new W(gn)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Q(+Pn,+gn);case"[object Error]":return Pn.name==gn.name&&Pn.message==gn.message;case"[object RegExp]":case"[object String]":return Pn==gn+"";case"[object Map]":var zi=J;case"[object Set]":if(zi||(zi=ce),Pn.size!=gn.size&&!(1&Tr))return!1;var ql=As.get(Pn);if(ql)return ql==gn;Tr|=2,As.set(Pn,gn);var Nn=le(zi(Pn),zi(gn),Tr,as,En,As);return As.delete(Pn),Nn;case"[object Symbol]":if(Rn)return Rn.call(Pn)==Rn.call(gn)}return!1}},2286:(z,ae,O)=>{var B=O(7597),le=Object.prototype.hasOwnProperty;z.exports=function J(ce,me,je,St,gt,Wt){var Nt=1&je,In=B(ce),Un=In.length;if(Un!=B(me).length&&!Nt)return!1;for(var un=Un;un--;){var Sn=In[un];if(!(Nt?Sn in me:le.call(me,Sn)))return!1}var Mn=Wt.get(ce),_i=Wt.get(me);if(Mn&&_i)return Mn==me&&_i==ce;var Rn=!0;Wt.set(ce,me),Wt.set(me,ce);for(var vi=Nt;++un<Un;){var Pn=ce[Sn=In[un]],gn=me[Sn];if(St)var Vi=Nt?St(gn,Pn,Sn,me,ce,Wt):St(Pn,gn,Sn,ce,me,Wt);if(!(void 0===Vi?Pn===gn||gt(Pn,gn,je,St,Wt):Vi)){Rn=!1;break}vi||(vi="constructor"==Sn)}if(Rn&&!vi){var Tr=ce.constructor,as=me.constructor;Tr!=as&&"constructor"in ce&&"constructor"in me&&!("function"==typeof Tr&&Tr instanceof Tr&&"function"==typeof as&&as instanceof as)&&(Rn=!1)}return Wt.delete(ce),Wt.delete(me),Rn}},9122:z=>{var ae="object"==typeof global&&global&&global.Object===Object&&global;z.exports=ae},7597:(z,ae,O)=>{var B=O(8247),W=O(9383),Q=O(118);z.exports=function le(J){return B(J,Q,W)}},4537:(z,ae,O)=>{var B=O(3819);z.exports=function W(Q,le){var J=Q.__data__;return B(le)?J["string"==typeof le?"string":"hash"]:J.map}},3436:(z,ae,O)=>{var B=O(7304),W=O(1990);z.exports=function Q(le,J){var ce=W(le,J);return B(ce)?ce:void 0}},1318:(z,ae,O)=>{var B=O(443),W=Object.prototype,Q=W.hasOwnProperty,le=W.toString,J=B?B.toStringTag:void 0;z.exports=function ce(me){var je=Q.call(me,J),St=me[J];try{me[J]=void 0;var gt=!0}catch{}var Wt=le.call(me);return gt&&(je?me[J]=St:delete me[J]),Wt}},9383:(z,ae,O)=>{var B=O(9779),W=O(9975),le=Object.prototype.propertyIsEnumerable,J=Object.getOwnPropertySymbols;z.exports=J?function(me){return null==me?[]:(me=Object(me),B(J(me),function(je){return le.call(me,je)}))}:W},8794:(z,ae,O)=>{var B=O(7244),W=O(1501),Q=O(4267),le=O(6323),J=O(4243),ce=O(3337),me=O(2827),je="[object Map]",gt="[object Promise]",Wt="[object Set]",Nt="[object WeakMap]",In="[object DataView]",Un=me(B),di=me(W),Bt=me(Q),un=me(le),Sn=me(J),Mn=ce;(B&&Mn(new B(new ArrayBuffer(1)))!=In||W&&Mn(new W)!=je||Q&&Mn(Q.resolve())!=gt||le&&Mn(new le)!=Wt||J&&Mn(new J)!=Nt)&&(Mn=function(_i){var Rn=ce(_i),vi="[object Object]"==Rn?_i.constructor:void 0,Pn=vi?me(vi):"";if(Pn)switch(Pn){case Un:return In;case di:return je;case Bt:return gt;case un:return Wt;case Sn:return Nt}return Rn}),z.exports=Mn},1990:z=>{z.exports=function ae(O,B){return O?.[B]}},4312:(z,ae,O)=>{var B=O(862);z.exports=function W(){this.__data__=B?B(null):{},this.size=0}},6421:z=>{z.exports=function ae(O){var B=this.has(O)&&delete this.__data__[O];return this.size-=B?1:0,B}},5764:(z,ae,O)=>{var B=O(862),le=Object.prototype.hasOwnProperty;z.exports=function J(ce){var me=this.__data__;if(B){var je=me[ce];return"__lodash_hash_undefined__"===je?void 0:je}return le.call(me,ce)?me[ce]:void 0}},8685:(z,ae,O)=>{var B=O(862),Q=Object.prototype.hasOwnProperty;z.exports=function le(J){var ce=this.__data__;return B?void 0!==ce[J]:Q.call(ce,J)}},6676:(z,ae,O)=>{var B=O(862);z.exports=function Q(le,J){var ce=this.__data__;return this.size+=this.has(le)?0:1,ce[le]=B&&void 0===J?"__lodash_hash_undefined__":J,this}},8442:z=>{var O=/^(?:0|[1-9]\d*)$/;z.exports=function B(W,Q){var le=typeof W;return!!(Q=Q??9007199254740991)&&("number"==le||"symbol"!=le&&O.test(W))&&W>-1&&W%1==0&&W<Q}},3819:z=>{z.exports=function ae(O){var B=typeof O;return"string"==B||"number"==B||"symbol"==B||"boolean"==B?"__proto__"!==O:null===O}},1943:(z,ae,O)=>{var le,B=O(4610),W=(le=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+le:"";z.exports=function Q(le){return!!W&&W in le}},5488:z=>{var ae=Object.prototype;z.exports=function O(B){var W=B&&B.constructor;return B===("function"==typeof W&&W.prototype||ae)}},1840:z=>{z.exports=function ae(){this.__data__=[],this.size=0}},4378:(z,ae,O)=>{var B=O(3503),Q=Array.prototype.splice;z.exports=function le(J){var ce=this.__data__,me=B(ce,J);return!(me<0||(me==ce.length-1?ce.pop():Q.call(ce,me,1),--this.size,0))}},4981:(z,ae,O)=>{var B=O(3503);z.exports=function W(Q){var le=this.__data__,J=B(le,Q);return J<0?void 0:le[J][1]}},7343:(z,ae,O)=>{var B=O(3503);z.exports=function W(Q){return B(this.__data__,Q)>-1}},8895:(z,ae,O)=>{var B=O(3503);z.exports=function W(Q,le){var J=this.__data__,ce=B(J,Q);return ce<0?(++this.size,J.push([Q,le])):J[ce][1]=le,this}},638:(z,ae,O)=>{var B=O(4994),W=O(9215),Q=O(1501);z.exports=function le(){this.size=0,this.__data__={hash:new B,map:new(Q||W),string:new B}}},1184:(z,ae,O)=>{var B=O(4537);z.exports=function W(Q){var le=B(this,Q).delete(Q);return this.size-=le?1:0,le}},866:(z,ae,O)=>{var B=O(4537);z.exports=function W(Q){return B(this,Q).get(Q)}},3771:(z,ae,O)=>{var B=O(4537);z.exports=function W(Q){return B(this,Q).has(Q)}},1772:(z,ae,O)=>{var B=O(4537);z.exports=function W(Q,le){var J=B(this,Q),ce=J.size;return J.set(Q,le),this.size+=J.size==ce?0:1,this}},3205:z=>{z.exports=function ae(O){var B=-1,W=Array(O.size);return O.forEach(function(Q,le){W[++B]=[le,Q]}),W}},862:(z,ae,O)=>{var W=O(3436)(Object,"create");z.exports=W},5491:(z,ae,O)=>{var W=O(9385)(Object.keys,Object);z.exports=W},3597:(z,ae,O)=>{z=O.nmd(z);var B=O(9122),W=ae&&!ae.nodeType&&ae,Q=W&&z&&!z.nodeType&&z,J=Q&&Q.exports===W&&B.process,ce=function(){try{return Q&&Q.require&&Q.require("util").types||J&&J.binding&&J.binding("util")}catch{}}();z.exports=ce},2902:z=>{var O=Object.prototype.toString;z.exports=function B(W){return O.call(W)}},9385:z=>{z.exports=function ae(O,B){return function(W){return O(B(W))}}},2119:(z,ae,O)=>{var B=O(9122),W="object"==typeof self&&self&&self.Object===Object&&self,Q=B||W||Function("return this")();z.exports=Q},4600:z=>{z.exports=function O(B){return this.__data__.set(B,"__lodash_hash_undefined__"),this}},1387:z=>{z.exports=function ae(O){return this.__data__.has(O)}},4174:z=>{z.exports=function ae(O){var B=-1,W=Array(O.size);return O.forEach(function(Q){W[++B]=Q}),W}},3720:(z,ae,O)=>{var B=O(9215);z.exports=function W(){this.__data__=new B,this.size=0}},4410:z=>{z.exports=function ae(O){var B=this.__data__,W=B.delete(O);return this.size=B.size,W}},5576:z=>{z.exports=function ae(O){return this.__data__.get(O)}},2247:z=>{z.exports=function ae(O){return this.__data__.has(O)}},1585:(z,ae,O)=>{var B=O(9215),W=O(1501),Q=O(9850);z.exports=function J(ce,me){var je=this.__data__;if(je instanceof B){var St=je.__data__;if(!W||St.length<199)return St.push([ce,me]),this.size=++je.size,this;je=this.__data__=new Q(St)}return je.set(ce,me),this.size=je.size,this}},2827:z=>{var O=Function.prototype.toString;z.exports=function B(W){if(null!=W){try{return O.call(W)}catch{}try{return W+""}catch{}}return""}},217:z=>{z.exports=function ae(O,B){return O===B||O!=O&&B!=B}},7151:(z,ae,O)=>{var B=O(186),W=O(2671),Q=Object.prototype,le=Q.hasOwnProperty,J=Q.propertyIsEnumerable,ce=B(function(){return arguments}())?B:function(me){return W(me)&&le.call(me,"callee")&&!J.call(me,"callee")};z.exports=ce},1503:z=>{z.exports=Array.isArray},6507:(z,ae,O)=>{var B=O(5946),W=O(6231);z.exports=function Q(le){return null!=le&&W(le.length)&&!B(le)}},891:(z,ae,O)=>{z=O.nmd(z);var B=O(2119),W=O(3580),Q=ae&&!ae.nodeType&&ae,le=Q&&z&&!z.nodeType&&z,ce=le&&le.exports===Q?B.Buffer:void 0;z.exports=(ce?ce.isBuffer:void 0)||W},4509:(z,ae,O)=>{var B=O(5740);z.exports=function W(Q,le){return B(Q,le)}},5946:(z,ae,O)=>{var B=O(3337),W=O(5940);z.exports=function me(je){if(!W(je))return!1;var St=B(je);return"[object Function]"==St||"[object GeneratorFunction]"==St||"[object AsyncFunction]"==St||"[object Proxy]"==St}},6231:z=>{z.exports=function O(B){return"number"==typeof B&&B>-1&&B%1==0&&B<=9007199254740991}},9138:(z,ae,O)=>{var B=O(3337),W=O(2671);z.exports=function le(J){return"number"==typeof J||W(J)&&"[object Number]"==B(J)}},5940:z=>{z.exports=function ae(O){var B=typeof O;return null!=O&&("object"==B||"function"==B)}},2671:z=>{z.exports=function ae(O){return null!=O&&"object"==typeof O}},8159:(z,ae,O)=>{var B=O(1083),W=O(5647),Q=O(3597),le=Q&&Q.isTypedArray,J=le?W(le):B;z.exports=J},118:(z,ae,O)=>{var B=O(2271),W=O(1172),Q=O(6507);z.exports=function le(J){return Q(J)?B(J):W(J)}},9975:z=>{z.exports=function ae(){return[]}},3580:z=>{z.exports=function ae(){return!1}},3738:function(z){var ae;z.exports=((ae=function(){function O(gt){return Q.appendChild(gt.dom),gt}function B(gt){for(var Wt=0;Wt<Q.children.length;Wt++)Q.children[Wt].style.display=Wt===gt?"block":"none";W=gt}var W=0,Q=document.createElement("div");Q.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",Q.addEventListener("click",function(gt){gt.preventDefault(),B(++W%Q.children.length)},!1);var le=(performance||Date).now(),J=le,ce=0,me=O(new ae.Panel("FPS","#0ff","#002")),je=O(new ae.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var St=O(new ae.Panel("MB","#f08","#201"));return B(0),{REVISION:16,dom:Q,addPanel:O,showPanel:B,begin:function(){le=(performance||Date).now()},end:function(){ce++;var gt=(performance||Date).now();if(je.update(gt-le,200),gt>J+1e3&&(me.update(1e3*ce/(gt-J),100),J=gt,ce=0,St)){var Wt=performance.memory;St.update(Wt.usedJSHeapSize/1048576,Wt.jsHeapSizeLimit/1048576)}return gt},update:function(){le=this.end()},domElement:Q,setMode:B}}).Panel=function(O,B,W){var Q=1/0,le=0,J=Math.round,ce=J(window.devicePixelRatio||1),me=80*ce,je=48*ce,St=3*ce,gt=2*ce,Wt=3*ce,Nt=15*ce,In=74*ce,Un=30*ce,di=document.createElement("canvas");di.width=me,di.height=je,di.style.cssText="width:80px;height:48px";var Bt=di.getContext("2d");return Bt.font="bold "+9*ce+"px Helvetica,Arial,sans-serif",Bt.textBaseline="top",Bt.fillStyle=W,Bt.fillRect(0,0,me,je),Bt.fillStyle=B,Bt.fillText(O,St,gt),Bt.fillRect(Wt,Nt,In,Un),Bt.fillStyle=W,Bt.globalAlpha=.9,Bt.fillRect(Wt,Nt,In,Un),{dom:di,update:function(un,Sn){Q=Math.min(Q,un),le=Math.max(le,un),Bt.fillStyle=W,Bt.globalAlpha=1,Bt.fillRect(0,0,me,Nt),Bt.fillStyle=B,Bt.fillText(J(un)+" "+O+" ("+J(Q)+"-"+J(le)+")",St,gt),Bt.drawImage(di,Wt+ce,Nt,In-ce,Un,Wt,Nt,In-ce,Un),Bt.fillRect(Wt+In-ce,Nt,ce,Un),Bt.fillStyle=W,Bt.globalAlpha=.9,Bt.fillRect(Wt+In-ce,Nt,ce,J((1-un/Sn)*Un))}}},ae)}},z=>{z(z.s=5673)}]);