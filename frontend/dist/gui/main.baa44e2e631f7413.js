(self.webpackChunkgui=self.webpackChunkgui||[]).push([[179],{84:(ro,ys,Or)=>{"use strict";function Ht(i){return"function"==typeof i}function B(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Dr=B(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function Lr(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class Zt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(Ht(n))try{n()}catch(s){e=s instanceof Dr?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ca(s)}catch(o){e=e??[],o instanceof Dr?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Dr(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ca(e);else{if(e instanceof Zt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Lr(t,e)}remove(e){const{_finalizers:t}=this;t&&Lr(t,e),e instanceof Zt&&e._removeParent(this)}}Zt.EMPTY=(()=>{const i=new Zt;return i.closed=!0,i})();const vn=Zt.EMPTY;function Qa(i){return i instanceof Zt||i&&"closed"in i&&Ht(i.remove)&&Ht(i.add)&&Ht(i.unsubscribe)}function Ca(i){Ht(i)?i():i.unsubscribe()}const bs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},li={setTimeout(i,e,...t){const{delegate:n}=li;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=li;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ci(i){li.setTimeout(()=>{const{onUnhandledError:e}=bs;if(!e)throw i;e(i)})}function Qr(){}const xs=fn("C",void 0,void 0);function fn(i,e,t){return{kind:i,value:e,error:t}}let Ji=null;function Ul(i){if(bs.useDeprecatedSynchronousErrorHandling){const e=!Ji;if(e&&(Ji={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=Ji;if(Ji=null,t)throw n}}else i()}class el extends Zt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Qa(e)&&e.add(this)):this.destination=XC}static create(e,t,n){return new $o(e,t,n)}next(e){this.isStopped?Nm(function so(i){return fn("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Nm(function ws(i){return fn("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nm(xs,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Wo=Function.prototype.bind;function tl(i,e){return Wo.call(i,e)}class Sa{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Uc(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Uc(n)}else Uc(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Uc(t)}}}class $o extends el{constructor(e,t,n){let r;if(super(),Ht(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&bs.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&tl(e.next,s),error:e.error&&tl(e.error,s),complete:e.complete&&tl(e.complete,s)}):r=e}this.destination=new Sa(r)}}function Uc(i){bs.useDeprecatedSynchronousErrorHandling?function Go(i){bs.useDeprecatedSynchronousErrorHandling&&Ji&&(Ji.errorThrown=!0,Ji.error=i)}(i):ci(i)}function Nm(i,e){const{onStoppedNotification:t}=bs;t&&li.setTimeout(()=>t(i,e))}const XC={closed:!0,next:Qr,error:function qC(i){throw i},complete:Qr},Bm="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ea(i){return i}function Cy(i){return 0===i.length?Ea:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let yn=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function Th(i){return i&&i instanceof el||function ZC(i){return i&&Ht(i.next)&&Ht(i.error)&&Ht(i.complete)}(i)&&Qa(i)}(t)?t:new $o(t,n,r);return Ul(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=Da(n))((r,s)=>{const o=new $o({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[Bm](){return this}pipe(...t){return Cy(t)(this)}toPromise(t){return new(t=Da(t))((n,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>n(s))})}}return i.create=e=>new i(e),i})();function Da(i){var e;return null!==(e=i??bs.Promise)&&void 0!==e?e:Promise}const jo=B(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let He=(()=>{class i extends yn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new Sy(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new jo}next(t){Ul(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){Ul(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){Ul(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?vn:(this.currentObservers=null,s.push(t),new Zt(()=>{this.currentObservers=null,Lr(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new yn;return t.source=this,t}}return i.create=(e,t)=>new Sy(e,t),i})();class Sy extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:vn}}function Ey(i){return Ht(i?.lift)}function kn(i){return e=>{if(Ey(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function In(i,e,t,n,r){return new KC(i,e,t,n,r)}class KC extends el{constructor(e,t,n,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Je(i,e){return kn((t,n)=>{let r=0;t.subscribe(In(n,s=>{n.next(i.call(e,s,r++))}))})}function ao(i){return this instanceof ao?(this.v=i,this):new ao(i)}function eS(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(p){n[p]&&(r[p]=function(m){return new Promise(function(_,b){s.push([p,m,_,b])>1||a(p,m)})})}function a(p,m){try{!function l(p){p.value instanceof ao?Promise.resolve(p.value.v).then(c,d):f(s[0][2],p)}(n[p](m))}catch(_){f(s[0][3],_)}}function c(p){a("next",p)}function d(p){a("throw",p)}function f(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function zc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function Vc(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=i[s](o)).done,o.value)})}}}const ju=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function kh(i){return Ht(i?.then)}function ky(i){return Ht(i[Bm])}function Oy(i){return Symbol.asyncIterator&&Ht(i?.[Symbol.asyncIterator])}function Ly(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Gm=function Fy(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ny(i){return Ht(i?.[Gm])}function By(i){return eS(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield ao(t.read());if(r)return yield ao(void 0);yield yield ao(n)}}finally{t.releaseLock()}})}function Uy(i){return Ht(i?.getReader)}function mr(i){if(i instanceof yn)return i;if(null!=i){if(ky(i))return function Vy(i){return new yn(e=>{const t=i[Bm]();if(Ht(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(ju(i))return function tS(i){return new yn(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(kh(i))return function nS(i){return new yn(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ci)})}(i);if(Oy(i))return Oh(i);if(Ny(i))return function iS(i){return new yn(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(Uy(i))return function rS(i){return Oh(By(i))}(i)}throw Ly(i)}function Oh(i){return new yn(e=>{(function Wm(i,e){var t,n,r,s;return function QC(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=zc(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(o){r={error:o}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function Aa(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function $i(i,e,t=1/0){return Ht(e)?$i((n,r)=>Je((s,o)=>e(n,s,r,o))(mr(i(n,r))),t):("number"==typeof e&&(t=e),kn((n,r)=>function sS(i,e,t,n,r,s,o,a){const l=[];let c=0,d=0,f=!1;const p=()=>{f&&!l.length&&!c&&e.complete()},m=b=>c<n?_(b):l.push(b),_=b=>{s&&e.next(b),c++;let y=!1;mr(t(b,d++)).subscribe(In(e,v=>{r?.(v),s?m(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(c--;l.length&&c<n;){const v=l.shift();o?Aa(e,o,()=>_(v)):_(v)}p()}catch(v){e.error(v)}}))};return i.subscribe(In(e,m,()=>{f=!0,p()})),()=>{a?.()}}(n,r,i,t)))}function Hc(i=1/0){return $i(Ea,i)}const Bs=new yn(i=>i.complete());function zy(i){return i&&Ht(i.schedule)}function Lh(i){return i[i.length-1]}function Hy(i){return Ht(Lh(i))?i.pop():void 0}function qu(i){return zy(Lh(i))?i.pop():void 0}function Gy(i,e=0){return kn((t,n)=>{t.subscribe(In(n,r=>Aa(n,i,()=>n.next(r),e),()=>Aa(n,i,()=>n.complete(),e),r=>Aa(n,i,()=>n.error(r),e)))})}function Wy(i,e=0){return kn((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function $y(i,e){if(!i)throw new Error("Iterable cannot be null");return new yn(t=>{Aa(t,e,()=>{const n=i[Symbol.asyncIterator]();Aa(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function Ei(i,e){return e?function dS(i,e){if(null!=i){if(ky(i))return function lS(i,e){return mr(i).pipe(Wy(e),Gy(e))}(i,e);if(ju(i))return function cS(i,e){return new yn(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(kh(i))return function Fh(i,e){return mr(i).pipe(Wy(e),Gy(e))}(i,e);if(Oy(i))return $y(i,e);if(Ny(i))return function Nh(i,e){return new yn(t=>{let n;return Aa(t,e,()=>{n=i[Gm](),Aa(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>Ht(n?.return)&&n.return()})}(i,e);if(Uy(i))return function uS(i,e){return $y(By(i),e)}(i,e)}throw Ly(i)}(i,e):mr(i)}function Ms(...i){const e=qu(i),t=function aS(i,e){return"number"==typeof Lh(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?mr(n[0]):Hc(t)(Ei(n,e)):Bs}function $m(i={}){const{connector:e=(()=>new He),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let o,a,l,c=0,d=!1,f=!1;const p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=l=void 0,d=f=!1},_=()=>{const b=o;m(),b?.unsubscribe()};return kn((b,y)=>{c++,!f&&!d&&p();const v=l=l??e();y.add(()=>{c--,0===c&&!f&&!d&&(a=jm(_,r))}),v.subscribe(y),!o&&c>0&&(o=new $o({next:M=>v.next(M),error:M=>{f=!0,p(),a=jm(m,t,M),v.error(M)},complete:()=>{d=!0,p(),a=jm(m,n),v.complete()}}),mr(b).subscribe(o))})(s)}}function jm(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new $o({next:()=>{n.unsubscribe(),i()}});return mr(e(...t)).subscribe(n)}function jn(i){for(let e in i)if(i[e]===jn)return e;throw Error("Could not find renamed property on target object.")}function qm(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function qn(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(qn).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Bh(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const jy=jn({__forward_ref__:jn});function Un(i){return i.__forward_ref__=Un,i.toString=function(){return qn(this())},i}function _t(i){return Xm(i)?i():i}function Xm(i){return"function"==typeof i&&i.hasOwnProperty(jy)&&i.__forward_ref__===Un}class _e extends Error{constructor(e,t){super(function Xu(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function Ot(i){return"string"==typeof i?i:null==i?"":String(i)}function Yu(i,e){throw new _e(-201,!1)}function es(i,e){null==i&&function On(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Pe(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function Lt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ym(i){return Ky(i,Uh)||Ky(i,Jy)}function Ky(i,e){return i.hasOwnProperty(e)?i[e]:null}function Xn(i){return i&&(i.hasOwnProperty(Zm)||i.hasOwnProperty(bS))?i[Zm]:null}const Uh=jn({\u0275prov:jn}),Zm=jn({\u0275inj:jn}),Jy=jn({ngInjectableDef:jn}),bS=jn({ngInjectorDef:jn});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let Km;function Us(i){const e=Km;return Km=i,e}function Qi(i,e,t){const n=Ym(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&mt.Optional?null:void 0!==e?e:void Yu(qn(i))}function Vs(i){return{toString:i}.toString()}var zs=(()=>((zs=zs||{})[zs.OnPush=0]="OnPush",zs[zs.Default=1]="Default",zs))(),Hs=(()=>{return(i=Hs||(Hs={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Hs;var i})();const Vn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),zl={},Sn=[],Ar=jn({\u0275cmp:jn}),Jm=jn({\u0275dir:jn}),ts=jn({\u0275pipe:jn}),t0=jn({\u0275mod:jn}),Yo=jn({\u0275fac:jn}),Gs=jn({__NG_ELEMENT_ID__:jn});let Vh=0;function St(i){return Vs(()=>{const t=!0===i.standalone,n={},r={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zs.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Sn,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Hs.Emulated,id:"c"+Vh++,styles:i.styles||Sn,_:null,setInput:null,schemas:i.schemas||null,tView:null},s=i.dependencies,o=i.features;return r.inputs=n0(i.inputs,n),r.outputs=n0(i.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(Ta).filter(zh):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Fi).filter(zh):null,r})}function zn(i,e,t){const n=i.\u0275cmp;n.directiveDefs=()=>("function"==typeof e?e():e).map(Ta),n.pipeDefs=()=>("function"==typeof t?t():t).map(Fi)}function Ta(i){return Ln(i)||er(i)}function zh(i){return null!==i}function Ut(i){return Vs(()=>({type:i.type,bootstrap:i.bootstrap||Sn,declarations:i.declarations||Sn,imports:i.imports||Sn,exports:i.exports||Sn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function n0(i,e){if(null==i)return zl;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}const Le=St;function ns(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Ln(i){return i[Ar]||null}function er(i){return i[Jm]||null}function Fi(i){return i[ts]||null}function Cs(i,e){const t=i[t0]||null;if(!t&&!0===e)throw new Error(`Type ${qn(i)} does not have '\u0275mod' property.`);return t}function Nr(i){return Array.isArray(i)&&"object"==typeof i[1]}function po(i){return Array.isArray(i)&&!0===i[1]}function tg(i){return 0!=(8&i.flags)}function Wh(i){return 2==(2&i.flags)}function $h(i){return 1==(1&i.flags)}function mo(i){return null!==i.template}function jh(i){return 0!=(256&i[2])}function jl(i,e){return i.hasOwnProperty(Yo)?i[Yo]:null}class Xh{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function oi(){return Qu}function Qu(i){return i.type.prototype.ngOnChanges&&(i.setInput=Yh),l0}function l0(){const i=ag(this),e=i?.current;if(e){const t=i.previous;if(t===zl)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function Yh(i,e,t,n){const r=ag(i)||function Zh(i,e){return i[og]=e}(i,{previous:zl,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[t],l=o[a];s[a]=new Xh(l&&l.currentValue,e,o===zl),i[n]=e}oi.ngInherit=!0;const og="__ngSimpleChanges__";function ag(i){return i[og]||null}function hi(i){for(;Array.isArray(i);)i=i[0];return i}function td(i,e){return hi(e[i])}function Ws(i,e){return hi(e[i.index])}function Ai(i,e){return i.data[e]}function Ti(i,e){return i[e]}function Es(i,e){const t=e[i];return Nr(t)?t:t[0]}function c0(i){return 4==(4&i[2])}function nd(i){return 64==(64&i[2])}function Zo(i,e){return null==e?null:i[e]}function Xc(i){i[18]=0}function id(i,e){i[5]+=e;let t=i,n=i[3];for(;null!==n&&(1===e&&1===t[5]||-1===e&&0===t[5]);)n[5]+=e,t=n,n=n[3]}const vt={lFrame:m0(null),bindingsEnabled:!0};function u0(){return vt.bindingsEnabled}function xe(){return vt.lFrame.lView}function on(){return vt.lFrame.tView}function pn(i){return vt.lFrame.contextLView=i,i[8]}function En(i){return vt.lFrame.contextLView=null,i}function E(){let i=ql();for(;null!==i&&64===i.type;)i=i.parent;return i}function ql(){return vt.lFrame.currentTNode}function Ii(i,e){const t=vt.lFrame;t.currentTNode=i,t.isParent=e}function nn(){return vt.lFrame.isParent}function dg(){vt.lFrame.isParent=!1}function Br(){const i=vt.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Jc(){return vt.lFrame.bindingIndex++}function gr(i){const e=vt.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function kS(i,e){const t=vt.lFrame;t.bindingIndex=t.bindingRootIndex=i,hg(e)}function hg(i){vt.lFrame.currentDirectiveIndex=i}function _o(i){const e=vt.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}function f0(){return vt.lFrame.currentQueryIndex}function fg(i){vt.lFrame.currentQueryIndex=i}function LS(i){const e=i[1];return 2===e.type?e.declTNode:1===e.type?i[6]:null}function p0(i,e,t){if(t&mt.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&mt.Host||(r=LS(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,i=s}const n=vt.lFrame=sl();return n.currentTNode=e,n.lView=i,!0}function pg(i){const e=sl(),t=i[1];vt.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function sl(){const i=vt.lFrame,e=null===i?null:i.child;return null===e?m0(i):e}function m0(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function g0(){const i=vt.lFrame;return vt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const $s=g0;function mg(){const i=g0();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Ur(){return vt.lFrame.selectedIndex}function ol(i){vt.lFrame.selectedIndex=i}function fi(){const i=vt.lFrame;return Ai(i.tView,i.selectedIndex)}function vo(){vt.lFrame.currentNamespace="svg"}function gg(){!function _g(){vt.lFrame.currentNamespace=null}()}function nf(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:d}=s;o&&(i.contentHooks||(i.contentHooks=[])).push(-t,o),a&&((i.contentHooks||(i.contentHooks=[])).push(t,a),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(t,a)),l&&(i.viewHooks||(i.viewHooks=[])).push(-t,l),c&&((i.viewHooks||(i.viewHooks=[])).push(t,c),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(t,c)),null!=d&&(i.destroyHooks||(i.destroyHooks=[])).push(t,d)}}function sd(i,e,t){sf(i,e,3,t)}function rf(i,e,t,n){(3&i[2])===t&&sf(i,e,t,n)}function yo(i,e){let t=i[2];(3&t)===e&&(t&=2047,t+=1,i[2]=t)}function sf(i,e,t,n){const s=n??-1,o=e.length-1;let a=0;for(let l=void 0!==n?65535&i[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=n&&a>=n)break}else e[l]<0&&(i[18]+=65536),(a<s||-1==s)&&(Xl(i,t,e,l),i[18]=(4294901760&i[18])+l+2),l++}function Xl(i,e,t,n){const r=t[n]<0,s=t[n+1],a=i[r?-t[n]:t[n]];if(r){if(i[2]>>11<i[18]>>16&&(3&i[2])===e){i[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class od{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function ad(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],o=t[n++],a=t[n++];i.setAttribute(e,o,a,s)}else{const s=r,o=t[++n];af(s)?i.setProperty(e,s,o):i.setAttribute(e,s,o),n++}}return n}function rr(i){return 3===i||4===i||6===i}function af(i){return 64===i.charCodeAt(0)}function ld(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||bo(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function bo(i,e,t,n,r){let s=0,o=i.length;if(-1===e)o=-1;else for(;s<i.length;){const a=i[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<i.length;){const a=i[s];if("number"==typeof a)break;if(a===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==o&&(i.splice(o,0,e),s=o+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function lf(i){return-1!==i}function ka(i){return 32767&i}function Zl(i,e){let t=function Yl(i){return i>>16}(i),n=e;for(;t>0;)n=n[15],t--;return n}let _r=!0;function Qc(i){const e=_r;return _r=i,e}let yg=0;const Jo={};function eu(i,e){const t=xg(i,e);if(-1!==t)return t;const n=e[1];n.firstCreatePass&&(i.injectorIndex=e.length,bg(n.data,i),bg(e,null),bg(n.blueprint,null));const r=al(i,e),s=i.injectorIndex;if(lf(r)){const o=ka(r),a=Zl(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function bg(i,e){i.push(0,0,0,0,0,0,0,0,e)}function xg(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function al(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=Sg(r),null===n)return-1;if(t++,r=r[15],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return-1}function cf(i,e,t){!function cd(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Gs)&&(n=t[Gs]),null==n&&(n=t[Gs]=yg++);const r=255&n;e.data[i+(r>>5)]|=1<<r}(i,e,t)}function uf(i,e,t){if(t&mt.Optional)return i;Yu()}function wg(i,e,t,n){if(t&mt.Optional&&void 0===n&&(n=null),0==(t&(mt.Self|mt.Host))){const r=i[9],s=Us(void 0);try{return r?r.get(e,n,t&mt.Optional):Qi(e,n,t&mt.Optional)}finally{Us(s)}}return uf(n,0,t)}function w0(i,e,t,n=mt.Default,r){if(null!==i){if(1024&e[2]){const o=function S0(i,e,t,n,r){let s=i,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=M0(s,o,t,n|mt.Self,Jo);if(a!==Jo)return a;let l=s.parent;if(!l){const c=o[21];if(c){const d=c.get(t,Jo,n);if(d!==Jo)return d}l=Sg(o),o=o[15]}s=l}return r}(i,e,t,n,Jo);if(o!==Jo)return o}const s=M0(i,e,t,n,Jo);if(s!==Jo)return s}return wg(e,t,n,r)}function M0(i,e,t,n,r){const s=function HS(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(Gs)?i[Gs]:void 0;return"number"==typeof e?e>=0?255&e:C0:e}(t);if("function"==typeof s){if(!p0(e,i,n))return n&mt.Host?uf(r,0,n):wg(e,t,n,r);try{const o=s(n);if(null!=o||n&mt.Optional)return o;Yu()}finally{$s()}}else if("number"==typeof s){let o=null,a=xg(i,e),l=-1,c=n&mt.Host?e[16][6]:null;for((-1===a||n&mt.SkipSelf)&&(l=-1===a?al(i,e):e[a+8],-1!==l&&Mg(n,!1)?(o=e[1],a=ka(l),e=Zl(l,e)):a=-1);-1!==a;){const d=e[1];if(df(s,a,d.data)){const f=zS(a,e,t,o,n,c);if(f!==Jo)return f}l=e[a+8],-1!==l&&Mg(n,e[1].data[a+8]===c)&&df(s,a,e)?(o=d,a=ka(l),e=Zl(l,e)):a=-1}}return r}function zS(i,e,t,n,r,s){const o=e[1],a=o.data[i+8],d=ud(a,o,t,null==n?Wh(a)&&_r:n!=o&&0!=(3&a.type),r&mt.Host&&s===a);return null!==d?Kl(e,o,d,a):Jo}function ud(i,e,t,n,r){const s=i.providerIndexes,o=e.data,a=1048575&s,l=i.directiveStart,d=s>>20,p=r?a+d:i.directiveEnd;for(let m=n?a:a+d;m<p;m++){const _=o[m];if(m<l&&t===_||m>=l&&_.type===t)return m}if(r){const m=o[l];if(m&&mo(m)&&m.type===t)return l}return null}function Kl(i,e,t,n){let r=i[t];const s=e.data;if(function _0(i){return i instanceof od}(r)){const o=r;o.resolving&&function qy(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Cn(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ot(i)}(s[t]));const a=Qc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Us(o.injectImpl):null;p0(i,n,mt.Default);try{r=i[t]=o.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function tf(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const o=Qu(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(i,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==l&&Us(l),Qc(a),o.resolving=!1,$s()}}return r}function df(i,e,t){return!!(t[e+(i>>5)]&1<<i)}function Mg(i,e){return!(i&mt.Self||i&mt.Host&&e)}class Jl{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return w0(this._tNode,this._lView,e,n,t)}}function C0(){return new Jl(E(),xe())}function xi(i){return Vs(()=>{const e=i.prototype.constructor,t=e[Yo]||Cg(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[Yo]||Cg(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Cg(i){return Xm(i)?()=>{const e=Cg(_t(i));return e&&e()}:jl(i)}function Sg(i){const e=i[1],t=e.type;return 2===t?e.declTNode:1===t?i[6]:null}function Oa(i){return function VS(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(rr(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(E(),i)}const tu="__parameters__";function nu(i,e,t){return Vs(()=>{const n=function dd(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,d){const f=l.hasOwnProperty(tu)?l[tu]:Object.defineProperty(l,tu,{value:[]})[tu];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class Se{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Pe({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ir(i,e){void 0===e&&(e=i);for(let t=0;t<i.length;t++){let n=i[t];Array.isArray(n)?(e===i&&(e=i.slice(0,t)),Ir(n,e)):e!==i&&e.push(n)}return e}function Qo(i,e){i.forEach(t=>Array.isArray(t)?Qo(t,e):e(t))}function ff(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function hd(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function ec(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function zr(i,e,t){let n=iu(i,e);return n>=0?i[1|n]=t:(n=~n,function $S(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function Ag(i,e){const t=iu(i,e);if(t>=0)return i[1|t]}function iu(i,e){return function Tg(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),o=i[s<<t];if(e===o)return s<<t;o>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const ta={},gf="__NG_DI_FLAG__",fd="ngTempTokenPath",k0=/\n/gm,su="__source";let pd;function nc(i){const e=pd;return pd=i,e}function O0(i,e=mt.Default){if(void 0===pd)throw new _e(-203,!1);return null===pd?Qi(i,void 0,e):pd.get(i,e&mt.Optional?null:void 0,e)}function j(i,e=mt.Default){return(function Qy(){return Km}()||O0)(_t(i),e)}function Hn(i,e=mt.Default){return"number"!=typeof e&&(e=0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)),j(i,e)}function md(i){const e=[];for(let t=0;t<i.length;t++){const n=_t(i[t]);if(Array.isArray(n)){if(0===n.length)throw new _e(900,!1);let r,s=mt.Default;for(let o=0;o<n.length;o++){const a=n[o],l=YS(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(j(r,s))}else e.push(j(n))}return e}function dl(i,e){return i[gf]=e,i.prototype[gf]=e,i}function YS(i){return i[gf]}const wo=dl(nu("Optional"),8),hl=dl(nu("SkipSelf"),4);let Ng,Mf;function os(i){return function Bg(){if(void 0===Mf&&(Mf=null,Vn.trustedTypes))try{Mf=Vn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Mf}()?.createHTML(i)||i}class fl{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class QS extends fl{getTypeName(){return"HTML"}}class eE extends fl{getTypeName(){return"Style"}}class tE extends fl{getTypeName(){return"Script"}}class nE extends fl{getTypeName(){return"URL"}}class G0 extends fl{getTypeName(){return"ResourceURL"}}function as(i){return i instanceof fl?i.changingThisBreaksApplicationSecurity:i}function na(i,e){const t=function Hg(i){return i instanceof fl&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see https://g.co/ng/security#xss)`)}return t===e}class q0{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(os(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class ia{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const n=this.inertDocument.createElement("body");t.appendChild(n)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=os(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=os(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const iE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,sE=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function yd(i){return(i=String(i)).match(iE)||i.match(sE)?i:"unsafe:"+i}function ra(i){const e={};for(const t of i.split(","))e[t]=!0;return e}function bd(...i){const e={};for(const t of i)for(const n in t)t.hasOwnProperty(n)&&(e[n]=!0);return e}const Y0=ra("area,br,col,hr,img,wbr"),Z0=ra("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),K0=ra("rp,rt"),Cf=bd(Y0,bd(Z0,ra("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),bd(K0,ra("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bd(K0,Z0)),Sf=ra("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ef=ra("srcset"),J0=bd(Sf,Ef,ra("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),ra("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Q0=ra("script,style,template");class oE{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!Cf.hasOwnProperty(t))return this.sanitizedSomething=!0,!Q0.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const s=n.item(r),o=s.name,a=o.toLowerCase();if(!J0.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;Sf[a]&&(l=yd(l)),Ef[a]&&(i=l,l=(i=String(i)).split(",").map(e=>yd(e.trim())).join(", ")),this.buf.push(" ",o,'="',eb(l),'"')}var i;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();Cf.hasOwnProperty(t)&&!Y0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(eb(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const aE=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,lE=/([^\#-~ |!])/g;function eb(i){return i.replace(/&/g,"&amp;").replace(aE,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(lE,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Df;function tb(i,e){let t=null;try{Df=Df||function vd(i){const e=new ia(i);return function sc(){try{return!!(new window.DOMParser).parseFromString(os(""),"text/html")}catch{return!1}}()?new q0(e):e}(i);let n=e?String(e):"";t=Df.getInertBodyElement(n);let r=5,s=n;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,n=s,s=t.innerHTML,t=Df.getInertBodyElement(n)}while(n!==s);return os((new oE).sanitizeChildren(ls(t)||t))}finally{if(t){const n=ls(t)||t;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function ls(i){return"content"in i&&function cE(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Rn=(()=>((Rn=Rn||{})[Rn.NONE=0]="NONE",Rn[Rn.HTML=1]="HTML",Rn[Rn.STYLE=2]="STYLE",Rn[Rn.SCRIPT=3]="SCRIPT",Rn[Rn.URL=4]="URL",Rn[Rn.RESOURCE_URL=5]="RESOURCE_URL",Rn))();function Af(i){const e=function xd(){const i=xe();return i&&i[12]}();return e?e.sanitize(Rn.URL,i)||"":na(i,"URL")?as(i):yd(Ot(i))}const $g=new Se("ENVIRONMENT_INITIALIZER"),rb=new Se("INJECTOR",-1),sb=new Se("INJECTOR_DEF_TYPES");class ob{get(e,t=ta){if(t===ta){const n=new Error(`NullInjectorError: No provider for ${qn(e)}!`);throw n.name="NullInjectorError",n}return t}}function mE(...i){return{\u0275providers:ab(0,i)}}function ab(i,...e){const t=[],n=new Set;let r;return Qo(e,s=>{const o=s;jg(o,t,[],n)&&(r||(r=[]),r.push(o))}),void 0!==r&&lb(r,t),t}function lb(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];Qo(r,s=>{e.push(s)})}}function jg(i,e,t,n){if(!(i=_t(i)))return!1;let r=null,s=Xn(i);const o=!s&&Ln(i);if(s||o){if(o&&!o.standalone)return!1;r=i}else{const l=i.ngModule;if(s=Xn(l),!s)return!1;r=l}const a=n.has(r);if(o){if(a)return!1;if(n.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)jg(c,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;n.add(r);try{Qo(s.imports,d=>{jg(d,e,t,n)&&(c||(c=[]),c.push(d))})}finally{}void 0!==c&&lb(c,e)}if(!a){const c=jl(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:Sn},{provide:sb,useValue:r,multi:!0},{provide:$g,useValue:()=>j(r),multi:!0})}const l=s.providers;null==l||a||Qo(l,d=>{e.push(d)})}}return r!==i&&void 0!==i.providers}const gE=jn({provide:String,useValue:jn});function qg(i){return null!==i&&"object"==typeof i&&gE in i}function oc(i){return"function"==typeof i}const wd=new Se("Set Injector scope."),Md={},vE={};let Xg;function Tf(){return void 0===Xg&&(Xg=new ob),Xg}class pl{}class db extends pl{constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Kg(e,o=>this.processProvider(o)),this.records.set(rb,uu(void 0,this)),r.has("environment")&&this.records.set(pl,uu(void 0,this));const s=this.records.get(wd);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(sb.multi,Sn,mt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=nc(this),n=Us(void 0);try{return e()}finally{nc(t),Us(n)}}get(e,t=ta,n=mt.Default){this.assertNotDestroyed();const r=nc(this),s=Us(void 0);try{if(!(n&mt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function wE(i){return"function"==typeof i||"object"==typeof i&&i instanceof Se}(e)&&Ym(e);a=l&&this.injectableDefInScope(l)?uu(Yg(e),Md):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&mt.Self?Tf():this.parent).get(e,t=n&mt.Optional&&t===ta?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[fd]=o[fd]||[]).unshift(qn(e)),r)throw o;return function L0(i,e,t,n){const r=i[fd];throw e[su]&&r.unshift(e[su]),i.message=function _f(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let r=qn(e);if(Array.isArray(e))r=e.map(qn).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):qn(a)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(k0,"\n  ")}`}("\n"+i.message,r,t,n),i.ngTokenPath=r,i[fd]=null,i}(o,e,"R3InjectorError",this.source)}throw o}finally{Us(s),nc(r)}}resolveInjectorInitializers(){const e=nc(this),t=Us(void 0);try{const n=this.get($g.multi,Sn,mt.Self);for(const r of n)r()}finally{nc(e),Us(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(qn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(e){let t=oc(e=_t(e))?e:_t(e&&e.provide);const n=function bE(i){return qg(i)?uu(void 0,i.useValue):uu(Zg(i),Md)}(e);if(oc(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=uu(void 0,Md,!0),r.factory=()=>md(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===Md&&(t.value=vE,t.value=t.factory()),"object"==typeof t.value&&t.value&&function xE(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=_t(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function Yg(i){const e=Ym(i),t=null!==e?e.factory:jl(i);if(null!==t)return t;if(i instanceof Se)throw new _e(204,!1);if(i instanceof Function)return function yE(i){const e=i.length;if(e>0)throw ec(e,"?"),new _e(204,!1);const t=function yS(i){const e=i&&(i[Uh]||i[Jy]);if(e){const t=function si(i){if(i.hasOwnProperty("name"))return i.name;const e=(""+i).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new _e(204,!1)}function Zg(i,e,t){let n;if(oc(i)){const r=_t(i);return jl(r)||Yg(r)}if(qg(i))n=()=>_t(i.useValue);else if(function ub(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...md(i.deps||[]));else if(function cb(i){return!(!i||!i.useExisting)}(i))n=()=>j(_t(i.useExisting));else{const r=_t(i&&(i.useClass||i.provide));if(!function If(i){return!!i.deps}(i))return jl(r)||Yg(r);n=()=>new r(...md(i.deps))}return n}function uu(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function ME(i){return!!i.\u0275providers}function Kg(i,e){for(const t of i)Array.isArray(t)?Kg(t,e):ME(t)?Kg(t.\u0275providers,e):e(t)}class hb{}class EE{resolveComponentFactory(e){throw function SE(i){const e=Error(`No component factory found for ${qn(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let ac=(()=>{class i{}return i.NULL=new EE,i})();function DE(){return du(E(),xe())}function du(i,e){return new Wt(Ws(i,e))}let Wt=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=DE,i})();function AE(i){return i instanceof Wt?i.nativeElement:i}class hu{}let sa=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function TE(){const i=xe(),t=Es(E().index,i);return(Nr(t)?t:i)[11]}(),i})(),IE=(()=>{class i{}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:()=>null}),i})();class lc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const RE=new lc("14.1.2"),fu={};function Lf(i){return i.ngOriginalError}class Fa{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Lf(e);for(;t&&Lf(t);)t=Lf(t);return t||null}}const i_=new Map;let BE=0;const s_="__ngContext__";function Rr(i,e){Nr(e)?(i[s_]=e[20],function VE(i){i_.set(i[20],i)}(e)):i[s_]=e}function Wr(i){const e=i[s_];return"number"==typeof e?function _b(i){return i_.get(i)||null}(e):e||null}function o_(i){const e=Wr(i);return e?Nr(e)?e:e.lView:null}const jE=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(Vn))();function Na(i){return i instanceof Function?i():i}var cs=(()=>((cs=cs||{})[cs.Important=1]="Important",cs[cs.DashCase=2]="DashCase",cs))();function c_(i,e){return undefined(i,e)}function pu(i){const e=i[3];return po(e)?e[3]:e}function u_(i){return Ed(i[13])}function Bf(i){return Ed(i[4])}function Ed(i){for(;null!==i&&!po(i);)i=i[4];return i}function Mo(i,e,t,n,r){if(null!=n){let s,o=!1;po(n)?s=n:Nr(n)&&(o=!0,n=n[0]);const a=hi(n);0===i&&null!==t?null==r?Ab(e,t,a):uc(e,t,a,r||null,!0):1===i&&null!==t?uc(e,t,a,r||null,!0):2===i?function Ob(i,e,t){const n=Vf(i,e);n&&function tD(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,a,o):3===i&&e.destroyNode(a),null!=s&&function rD(i,e,t,n,r){const s=t[7];s!==hi(t)&&Mo(e,i,n,s,r);for(let a=10;a<t.length;a++){const l=t[a];sr(l[1],l,i,e,n,s)}}(e,i,s,t,r)}}function h_(i,e,t){return i.createElement(e,t)}function f_(i,e){const t=i[9],n=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,id(r,-1)),t.splice(n,1)}function p_(i,e){if(i.length<=10)return;const t=10+e,n=i[t];if(n){const r=n[17];null!==r&&r!==i&&f_(r,n),e>0&&(i[t-1][4]=n[4]);const s=hd(i,10+e);!function eD(i,e){sr(i,e,e[11],2,null,null),e[0]=null,e[6]=null}(n[1],n);const o=s[19];null!==o&&o.detachView(s[1]),n[3]=null,n[4]=null,n[2]&=-65}return n}function Pn(i,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&sr(i,e,t,3,null,null),function Xt(i){let e=i[13];if(!e)return m_(i[1],i);for(;e;){let t=null;if(Nr(e))t=e[13];else{const n=e[10];n&&(t=n)}if(!t){for(;e&&!e[4]&&e!==i;)Nr(e)&&m_(e[1],e),e=e[3];null===e&&(e=i),Nr(e)&&m_(e[1],e),t=e&&e[4]}e=t}}(e)}}function m_(i,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function Uf(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof od)){const s=t[n+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(i,e),function Sb(i,e){const t=i.cleanup,n=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+1],a="function"==typeof o?o(e):hi(e[o]),l=n[r=t[s+2]],c=t[s+3];"boolean"==typeof c?a.removeEventListener(t[s],l,c):c>=0?n[r=c]():n[r=-c].unsubscribe(),s+=2}else{const o=n[r=t[s+1]];t[s].call(o)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[7]=null}}(i,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&po(e[3])){t!==e[3]&&f_(t,e);const n=e[19];null!==n&&n.detachView(i)}!function zE(i){i_.delete(i[20])}(e)}}function Eb(i,e,t){return function Db(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[0];if(2&n.flags){const r=i.data[n.directiveStart].encapsulation;if(r===Hs.None||r===Hs.Emulated)return null}return Ws(n,t)}(i,e.parent,t)}function uc(i,e,t,n,r){i.insertBefore(e,t,n,r)}function Ab(i,e,t){i.appendChild(e,t)}function Tb(i,e,t,n,r){null!==n?uc(i,e,t,n,r):Ab(i,e,t)}function Vf(i,e){return i.parentNode(e)}function Ib(i,e,t){return Pb(i,e,t)}let Pb=function Rb(i,e,t){return 40&i.type?Ws(i,t):null};function Hf(i,e,t,n){const r=Eb(i,n,e),s=e[11],a=Ib(n.parent||e[6],n,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)Tb(s,r,t[l],a,!1);else Tb(s,r,t,a,!1)}function mu(i,e){if(null!==e){const t=e.type;if(3&t)return Ws(e,i);if(4&t)return __(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return mu(i,n);{const r=i[e.index];return po(r)?__(-1,r):hi(r)}}if(32&t)return c_(e,i)()||hi(i[e.index]);{const n=kb(i,e);return null!==n?Array.isArray(n)?n[0]:mu(pu(i[16]),n):mu(i,e.next)}}return null}function kb(i,e){return null!==e?i[16][6].projection[e.projection]:null}function __(i,e){const t=10+i+1;if(t<e.length){const n=e[t],r=n[1].firstChild;if(null!==r)return mu(n,r)}return e[7]}function Ui(i,e,t,n,r,s,o){for(;null!=t;){const a=n[t.index],l=t.type;if(o&&0===e&&(a&&Rr(hi(a),n),t.flags|=4),64!=(64&t.flags))if(8&l)Ui(i,e,t.child,n,r,s,!1),Mo(e,i,r,a,s);else if(32&l){const c=c_(t,n);let d;for(;d=c();)Mo(e,i,r,d,s);Mo(e,i,r,a,s)}else 16&l?Lb(i,e,n,t,r,s):Mo(e,i,r,a,s);t=o?t.projectionNext:t.next}}function sr(i,e,t,n,r,s){Ui(t,n,i.firstChild,e,r,s,!1)}function Lb(i,e,t,n,r,s){const o=t[16],l=o[6].projection[n.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)Mo(e,i,r,l[c],s);else Ui(i,e,l,o[3],r,s,!0)}function Nb(i,e,t){i.setAttribute(e,"style",t)}function v_(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function Bb(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const Ub="ng-template";function oD(i,e,t){let n=0;for(;n<i.length;){let r=i[n++];if(t&&"class"===r){if(r=i[n],-1!==Bb(r.toLowerCase(),e,0))return!0}else if(1===r){for(;n<i.length&&"string"==typeof(r=i[n++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function Vb(i){return 4===i.type&&i.value!==Ub}function zb(i,e,t){return e===(4!==i.type||t?i.value:Ub)}function Hb(i,e,t){let n=4;const r=i.attrs||[],s=function gu(i){for(let e=0;e<i.length;e++)if(rr(i[e]))return e;return i.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&n){if(n=2|1&n,""!==l&&!zb(i,l,t)||""===l&&1===e.length){if(Co(n))return!1;o=!0}}else{const c=8&n?l:e[++a];if(8&n&&null!==i.attrs){if(!oD(i.attrs,c,t)){if(Co(n))return!1;o=!0}continue}const f=aD(8&n?"class":l,r,Vb(i),t);if(-1===f){if(Co(n))return!1;o=!0;continue}if(""!==c){let p;p=f>s?"":r[f+1].toLowerCase();const m=8&n?p:null;if(m&&-1!==Bb(m,c,0)||2&n&&c!==p){if(Co(n))return!1;o=!0}}}}else{if(!o&&!Co(n)&&!Co(l))return!1;if(o&&Co(l))continue;o=!1,n=l|1&n}}return Co(n)||o}function Co(i){return 0==(1&i)}function aD(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===i)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function cD(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function Gb(i,e,t=!1){for(let n=0;n<e.length;n++)if(Hb(i,e[n],t))return!0;return!1}function uD(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function Wb(i,e){return i?":not("+e.trim()+")":e}function dD(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let o=i[t];if("string"==typeof o)if(2&n){const a=i[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&n?r+="."+o:4&n&&(r+=" "+o);else""!==r&&!Co(o)&&(e+=Wb(s,r),r=""),n=o,s=s||!Co(n);t++}return""!==r&&(e+=Wb(s,r)),e}const Pt={};function ne(i){jb(on(),xe(),Ur()+i,!1)}function jb(i,e,t,n){if(!n)if(3==(3&e[2])){const s=i.preOrderCheckHooks;null!==s&&sd(e,s,t)}else{const s=i.preOrderHooks;null!==s&&rf(e,s,0,t)}ol(t)}function Zb(i,e=null,t=null,n){const r=Kb(i,e,t,n);return r.resolveInjectorInitializers(),r}function Kb(i,e=null,t=null,n,r=new Set){const s=[t||Sn,mE(i)];return n=n||("object"==typeof i?void 0:qn(i)),new db(s,e||Tf(),n||null,r)}let mi=(()=>{class i{static create(t,n){if(Array.isArray(t))return Zb({name:""},n,t,"");{const r=t.name??"";return Zb({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=ta,i.NULL=new ob,i.\u0275prov=Pe({token:i,providedIn:"any",factory:()=>j(rb)}),i.__NG_ELEMENT_ID__=-1,i})();function R(i,e=mt.Default){const t=xe();return null===t?j(i,e):w0(E(),t,_t(i),e)}function dc(){throw new Error("invalid")}function Dd(i,e){return i<<17|e<<2}function So(i){return i>>17&32767}function Ad(i){return 2|i}function Eo(i){return(131068&i)>>2}function E_(i,e){return-131069&i|e<<2}function D_(i){return 1|i}function nk(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const r=t[n],s=t[n+1];if(-1!==s){const o=i.data[s];fg(r),o.contentQueries(2,e[s],s)}}}function dx(i,e,t,n,r,s,o,a,l,c,d){const f=e.blueprint.slice();return f[0]=r,f[2]=76|n,(null!==d||i&&1024&i[2])&&(f[2]|=1024),Xc(f),f[3]=f[15]=i,f[8]=t,f[10]=o||i&&i[10],f[11]=a||i&&i[11],f[12]=l||i&&i[12]||null,f[9]=c||i&&i[9]||null,f[6]=s,f[20]=function UE(){return BE++}(),f[21]=d,f[16]=2==e.type?i[16]:f,f}function qf(i,e,t,n,r){let s=i.data[e];if(null===s)s=function kD(i,e,t,n,r){const s=ql(),o=nn(),l=i.data[e]=function O4(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(i,e,t,n,r),function PS(){return vt.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const o=function rl(){const i=vt.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Ii(s,!0),s}function Xf(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function hx(i,e,t){pg(e);try{const n=i.viewQuery;null!==n&&HD(1,n,t);const r=i.template;null!==r&&ik(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&nk(i,e),i.staticViewQueries&&HD(2,i.viewQuery,t);const s=i.components;null!==s&&function I4(i,e){for(let t=0;t<e.length;t++)Z4(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[2]&=-5,mg()}}function R_(i,e,t,n){const r=e[2];if(128!=(128&r)){pg(e);try{Xc(e),function d0(i){return vt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&ik(i,e,t,2,n);const o=3==(3&r);if(o){const c=i.preOrderCheckHooks;null!==c&&sd(e,c,null)}else{const c=i.preOrderHooks;null!==c&&rf(e,c,0,null),yo(e,0)}if(function X4(i){for(let e=u_(i);null!==e;e=Bf(e)){if(!e[2])continue;const t=e[9];for(let n=0;n<t.length;n++){const r=t[n],s=r[3];0==(512&r[2])&&id(s,1),r[2]|=512}}}(e),function q4(i){for(let e=u_(i);null!==e;e=Bf(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];nd(n)&&R_(r,n,r.template,n[8])}}(e),null!==i.contentQueries&&nk(i,e),o){const c=i.contentCheckHooks;null!==c&&sd(e,c)}else{const c=i.contentHooks;null!==c&&rf(e,c,1),yo(e,1)}!function ux(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)ol(~r);else{const s=r,o=t[++n],a=t[++n];kS(o,s),a(2,e[s])}}}finally{ol(-1)}}(i,e);const a=i.components;null!==a&&function T4(i,e){for(let t=0;t<e.length;t++)Y4(i,e[t])}(e,a);const l=i.viewQuery;if(null!==l&&HD(2,l,n),o){const c=i.viewCheckHooks;null!==c&&sd(e,c)}else{const c=i.viewHooks;null!==c&&rf(e,c,2),yo(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,id(e[3],-1))}finally{mg()}}}function R4(i,e,t,n){const r=e[10],o=c0(e);try{!o&&r.begin&&r.begin(),o&&hx(i,e,n),R_(i,e,t,n)}finally{!o&&r.end&&r.end()}}function ik(i,e,t,n,r){const s=Ur(),o=2&n;try{ol(-1),o&&e.length>22&&jb(i,e,22,!1),t(n,r)}finally{ol(s)}}function rk(i,e,t){if(tg(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=i.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function OD(i,e,t){!u0()||(function U4(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;i.firstCreatePass||eu(t,e),Rr(n,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=i.data[a],c=mo(l);c&&W4(e,t,l);const d=Kl(e,i,a,t);Rr(d,e),null!==o&&$4(0,a-r,d,l,0,o),c&&(Es(t.index,e)[8]=d)}}(i,e,t,Ws(t,e)),128==(128&t.flags)&&function V4(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,o=function OS(){return vt.lFrame.currentDirectiveIndex}();try{ol(s);for(let a=n;a<r;a++){const l=i.data[a],c=e[a];hg(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&dk(l,c)}}finally{ol(-1),hg(o)}}(i,e,t))}function LD(i,e,t=Ws){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const o=n[s+1],a=-1===o?t(e,i):i[o];i[r++]=a}}}function sk(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=FD(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function FD(i,e,t,n,r,s,o,a,l,c){const d=22+n,f=d+r,p=function P4(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:Pt);return t}(d,f),m="function"==typeof c?c():c;return p[1]={type:i,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1}}function ok(i,e,t,n){const r=vk(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&yk(i).push(n,r.length-1))}function ak(i,e,t){for(let n in i)if(i.hasOwnProperty(n)){const r=i[n];(t=null===t?{}:t).hasOwnProperty(n)?t[n].push(e,r):t[n]=[e,r]}return t}function lk(i,e){const n=e.directiveEnd,r=i.data,s=e.attrs,o=[];let a=null,l=null;for(let c=e.directiveStart;c<n;c++){const d=r[c],f=d.inputs,p=null===s||Vb(e)?null:j4(f,s);o.push(p),a=ak(f,c,a),l=ak(d.outputs,c,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}function To(i,e,t,n,r,s,o,a){const l=Ws(e,t);let d,c=e.inputs;!a&&null!=c&&(d=c[n])?(GD(i,t,d,n,r),Wh(e)&&ck(t,e.index)):3&e.type&&(n=function L4(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=o?o(r,e.value||"",n):r,s.setProperty(l,n,r))}function ck(i,e){const t=Es(e,i);16&t[2]||(t[2]|=32)}function ND(i,e,t,n){let r=!1;if(u0()){const s=function z4(i,e,t){const n=i.directiveRegistry;let r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];Gb(t,o.selectors,!1)&&(r||(r=[]),cf(eu(t,e),i,o.type),mo(o)?(hk(i,t),r.unshift(o)):r.push(o))}return r}(i,e,t),o=null===n?null:{"":-1};if(null!==s){r=!0,fk(t,i.data.length,s.length);for(let d=0;d<s.length;d++){const f=s[d];f.providersResolver&&f.providersResolver(f)}let a=!1,l=!1,c=Xf(i,e,s.length,null);for(let d=0;d<s.length;d++){const f=s[d];t.mergedAttrs=ld(t.mergedAttrs,f.hostAttrs),pk(i,t,e,c,f),G4(c,f,o),null!==f.contentQueries&&(t.flags|=8),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(t.flags|=128);const p=f.type.prototype;!a&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(t.index),l=!0),c++}lk(i,t)}o&&function H4(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new _e(-301,!1);n.push(e[r],s)}}}(t,n,o)}return t.mergedAttrs=ld(t.mergedAttrs,t.attrs),r}function uk(i,e,t,n,r,s){const o=s.hostBindings;if(o){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function B4(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(n,r,o)}}function dk(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function hk(i,e){e.flags|=2,(i.components||(i.components=[])).push(e.index)}function G4(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;mo(e)&&(t[""]=i)}}function fk(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}function pk(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=jl(r.type)),o=new od(s,mo(r),R);i.blueprint[n]=o,t[n]=o,uk(i,e,0,n,Xf(i,t,r.hostVars,Pt),r)}function W4(i,e,t){const n=Ws(e,i),r=sk(t),s=i[10],o=fx(i,dx(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=o}function vl(i,e,t,n,r,s){const o=Ws(i,e);!function BD(i,e,t,n,r,s,o){if(null==s)i.removeAttribute(e,r,t);else{const a=null==o?Ot(s):o(s,n||"",r);i.setAttribute(e,r,a,t)}}(e[11],o,s,i.value,t,n,r)}function $4(i,e,t,n,r,s){const o=s[e];if(null!==o){const a=n.setInput;for(let l=0;l<o.length;){const c=o[l++],d=o[l++],f=o[l++];null!==a?n.setInput(t,f,c,d):t[d]=f}}}function j4(i,e){let t=null,n=0;for(;n<e.length;){const r=e[n];if(0!==r)if(5!==r){if("number"==typeof r)break;i.hasOwnProperty(r)&&(null===t&&(t=[]),t.push(r,i[r],e[n+1])),n+=2}else n+=2;else n+=4}return t}function mk(i,e,t,n){return new Array(i,!0,!1,e,null,0,n,t,null,null)}function Y4(i,e){const t=Es(e,i);if(nd(t)){const n=t[1];48&t[2]?R_(n,t,n.template,t[8]):t[5]>0&&UD(t)}}function UD(i){for(let n=u_(i);null!==n;n=Bf(n))for(let r=10;r<n.length;r++){const s=n[r];if(nd(s))if(512&s[2]){const o=s[1];R_(o,s,o.template,s[8])}else s[5]>0&&UD(s)}const t=i[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Es(t[n],i);nd(r)&&r[5]>0&&UD(r)}}function Z4(i,e){const t=Es(e,i),n=t[1];(function K4(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),hx(n,t,t[8])}function fx(i,e){return i[13]?i[14][4]=e:i[13]=e,i[14]=e,e}function VD(i){for(;i;){i[2]|=32;const e=pu(i);if(jh(i)&&!e)return i;i=e}return null}function _k(i){!function gk(i){for(let e=0;e<i.components.length;e++){const t=i.components[e],n=o_(t);if(null!==n){const r=n[1];R4(r,n,r.template,t)}}}(i[8])}function HD(i,e,t){fg(0),e(i,t)}const Q4=(()=>Promise.resolve(null))();function vk(i){return i[7]||(i[7]=[])}function yk(i){return i.cleanup||(i.cleanup=[])}function bk(i,e,t){return(null===i||mo(i))&&(t=function ug(i){for(;Array.isArray(i);){if("object"==typeof i[1])return i;i=i[0]}return null}(t[e.index])),t[11]}function xk(i,e){const t=i[9],n=t?t.get(Fa,null):null;n&&n.handleError(e)}function GD(i,e,t,n,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],c=i.data[o];null!==c.setInput?c.setInput(l,r,n,a):l[a]=r}}function hc(i,e,t){const n=td(e,i);!function wb(i,e,t){i.setValue(e,t)}(i[11],n,t)}function px(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=Bh(r,a):2==s&&(n=Bh(n,a+": "+e[++o]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function mx(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(hi(s)),po(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&mx(l[1],l,c,n)}const o=t.type;if(8&o)mx(i,e,t.child,n);else if(32&o){const a=c_(t,e);let l;for(;l=a();)n.push(l)}else if(16&o){const a=kb(e,t);if(Array.isArray(a))n.push(...a);else{const l=pu(e[16]);mx(l[1],l,a,n,!0)}}t=r?t.projectionNext:t.next}return n}class P_{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return mx(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(po(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(p_(e,n),hd(t,n))}this._attachedToViewContainer=!1}Pn(this._lView[1],this._lView)}onDestroy(e){ok(this._lView[1],this._lView,null,e)}markForCheck(){VD(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function zD(i,e,t){const n=e[10];n.begin&&n.begin();try{R_(i,e,i.template,t)}catch(r){throw xk(e,r),r}finally{n.end&&n.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ua(i,e){sr(i,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=e}}class e5 extends P_{constructor(e){super(e),this._view=e}detectChanges(){_k(this._view)}checkNoChanges(){}get context(){return null}}class WD extends ac{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Ln(e);return new k_(t,this.ngModule)}}function wk(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class n5{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){const r=this.injector.get(e,fu,n);return r!==fu||t===fu?r:this.parentInjector.get(e,t,n)}}class k_ extends hb{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function hD(i){return i.map(dD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return wk(this.componentDef.inputs)}get outputs(){return wk(this.componentDef.outputs)}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof pl?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new n5(e,s):e,a=o.get(hu,null);if(null===a)throw new _e(407,!1);const l=o.get(IE,null),c=a.createRenderer(null,this.componentDef),d=this.componentDef.selectors[0][0]||"div",f=n?function k4(i,e,t){return i.selectRootElement(e,t===Hs.ShadowDom)}(c,n,this.componentDef.encapsulation):h_(a.createRenderer(null,this.componentDef),d,function t5(i){const e=i.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(d)),p=this.componentDef.onPush?288:272,m=function a5(i,e){return{components:[],scheduler:i||jE,clean:Q4,playerHandler:e||null,flags:0}}(),_=FD(0,null,null,1,0,null,null,null,null,null),b=dx(null,_,m,p,null,null,a,c,l,o,null);let y,v;pg(b);try{const M=function s5(i,e,t,n,r,s){const o=t[1];t[22]=i;const l=qf(o,22,2,"#host",null),c=l.mergedAttrs=e.hostAttrs;null!==c&&(px(l,c,!0),null!==i&&(ad(r,i,c),null!==l.classes&&v_(r,i,l.classes),null!==l.styles&&Nb(r,i,l.styles)));const d=n.createRenderer(i,e),f=dx(t,sk(e),null,e.onPush?32:16,t[22],l,n,d,s||null,null,null);return o.firstCreatePass&&(cf(eu(l,t),o,e.type),hk(o,l),fk(l,t.length,1)),fx(t,f),t[22]=f}(f,this.componentDef,b,a,c);if(f)if(n)ad(c,f,["ng-version",RE.full]);else{const{attrs:w,classes:C}=function $b(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!Co(r))break;r=s}n++}return{attrs:e,classes:t}}(this.componentDef.selectors[0]);w&&ad(c,f,w),C&&C.length>0&&v_(c,f,C.join(" "))}if(v=Ai(_,22),void 0!==t){const w=v.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const D=t[C];w.push(null!=D?Array.from(D):null)}}y=function o5(i,e,t,n,r){const s=t[1],o=function N4(i,e,t){const n=E();i.firstCreatePass&&(t.providersResolver&&t.providersResolver(t),pk(i,n,e,Xf(i,e,1,null),t),lk(i,n));const r=Kl(e,i,n.directiveStart,n);Rr(r,e);const s=Ws(n,e);return s&&Rr(s,e),r}(s,t,e);if(n.components.push(o),i[8]=o,null!==r)for(const l of r)l(o,e);if(e.contentQueries){const l=E();e.contentQueries(1,o,l.directiveStart)}const a=E();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ol(a.index),uk(t[1],a,0,a.directiveStart,a.directiveEnd,e),dk(e,o)),o}(M,this.componentDef,b,m,[l5]),hx(_,b,null)}finally{mg()}return new r5(this.componentType,y,du(v,b),b,v)}}class r5 extends class CE{}{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new e5(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;GD(s[1],s,r,e,t),ck(s,this._tNode.index)}}get injector(){return new Jl(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function l5(){const i=E();nf(xe()[1],i)}function ut(i){let e=function Mk(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(mo(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new _e(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const o=i;o.inputs=$D(i.inputs),o.declaredInputs=$D(i.declaredInputs),o.outputs=$D(i.outputs);const a=r.hostBindings;a&&h5(i,a);const l=r.viewQuery,c=r.contentQueries;if(l&&u5(i,l),c&&d5(i,c),qm(i.inputs,r.inputs),qm(i.declaredInputs,r.declaredInputs),qm(i.outputs,r.outputs),mo(r)&&r.data.animation){const d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(i),a===ut&&(t=!1)}}e=Object.getPrototypeOf(e)}!function c5(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=ld(r.hostAttrs,t=ld(t,r.hostAttrs))}}(n)}function $D(i){return i===zl?{}:i===Sn?[]:i}function u5(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function d5(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function h5(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}let gx=null;function Td(){if(!gx){const i=Vn.Symbol;if(i&&i.iterator)gx=i.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(gx=n)}}}return gx}function O_(i){return!!jD(i)&&(Array.isArray(i)||!(i instanceof Map)&&Td()in i)}function jD(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function yl(i,e,t){return i[e]=t}function ds(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function Id(i,e,t,n){const r=ds(i,e,t);return ds(i,e+1,n)||r}function Qt(i,e,t,n){const r=xe();return ds(r,Jc(),e)&&(on(),vl(fi(),r,i,e,t,n)),Qt}function Zf(i,e,t,n){return ds(i,Jc(),t)?e+Ot(t)+n:Pt}function Kf(i,e,t,n,r,s){const a=Id(i,function Ra(){return vt.lFrame.bindingIndex}(),t,r);return gr(2),a?e+Ot(t)+n+Ot(r)+s:Pt}function Fe(i,e,t,n,r,s,o,a){const l=xe(),c=on(),d=i+22,f=c.firstCreatePass?function x5(i,e,t,n,r,s,o,a,l){const c=e.consts,d=qf(e,i,4,o||null,Zo(c,a));ND(e,t,d,Zo(c,l)),nf(e,d);const f=d.tViews=FD(2,d,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}(d,c,l,e,t,n,r,s,o):c.data[d];Ii(f,!1);const p=l[11].createComment("");Hf(c,l,p,f),Rr(p,l),fx(l,l[d]=mk(p,l,p,f)),$h(f)&&OD(c,l,f),null!=o&&LD(l,f,a)}function bl(i){return Ti(function RS(){return vt.lFrame.contextLView}(),22+i)}function ie(i,e,t){const n=xe();return ds(n,Jc(),e)&&To(on(),fi(),n,i,e,n[11],t,!1),ie}function qD(i,e,t,n,r){const o=r?"class":"style";GD(i,t,e.inputs[o],o,n)}function ce(i,e,t,n){const r=xe(),s=on(),o=22+i,a=r[11],l=r[o]=h_(a,e,function rd(){return vt.lFrame.currentNamespace}()),c=s.firstCreatePass?function M5(i,e,t,n,r,s,o){const a=e.consts,c=qf(e,i,2,r,Zo(a,s));return ND(e,t,c,Zo(a,o)),null!==c.attrs&&px(c,c.attrs,!1),null!==c.mergedAttrs&&px(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,t,n):s.data[o];Ii(c,!0);const d=c.mergedAttrs;null!==d&&ad(a,l,d);const f=c.classes;null!==f&&v_(a,l,f);const p=c.styles;return null!==p&&Nb(a,l,p),64!=(64&c.flags)&&Hf(s,r,l,c),0===function Qh(){return vt.lFrame.elementDepthCount}()&&Rr(l,r),function Zc(){vt.lFrame.elementDepthCount++}(),$h(c)&&(OD(s,r,c),rk(s,c,r)),null!==n&&LD(r,c),ce}function he(){let i=E();nn()?dg():(i=i.parent,Ii(i,!1));const e=i;!function AS(){vt.lFrame.elementDepthCount--}();const t=on();return t.firstCreatePass&&(nf(t,i),tg(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function y0(i){return 0!=(16&i.flags)}(e)&&qD(t,e,xe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function US(i){return 0!=(32&i.flags)}(e)&&qD(t,e,xe(),e.stylesWithoutHost,!1),he}function bt(i,e,t,n){return ce(i,e,t,n),he(),bt}function Io(i,e,t){const n=xe(),r=on(),s=i+22,o=r.firstCreatePass?function C5(i,e,t,n,r){const s=e.consts,o=Zo(s,n),a=qf(e,i,8,"ng-container",o);return null!==o&&px(a,o,!0),ND(e,t,a,Zo(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,n,e,t):r.data[s];Ii(o,!0);const a=n[s]=n[11].createComment("");return Hf(r,n,a,o),Rr(a,n),$h(o)&&(OD(r,n,o),rk(r,o,n)),null!=t&&LD(n,o),Io}function Ro(){let i=E();const e=on();return nn()?dg():(i=i.parent,Ii(i,!1)),e.firstCreatePass&&(nf(e,i),tg(i)&&e.queries.elementEnd(i)),Ro}function yr(){return xe()}function F_(i){return!!i&&"function"==typeof i.then}function Ok(i){return!!i&&"function"==typeof i.subscribe}const XD=Ok;function ct(i,e,t,n){const r=xe(),s=on(),o=E();return Lk(s,r,r[11],o,i,e,0,n),ct}function vx(i,e){const t=E(),n=xe(),r=on();return Lk(r,n,bk(_o(r.data),t,n),t,i,e),vx}function Lk(i,e,t,n,r,s,o,a){const l=$h(n),d=i.firstCreatePass&&yk(i),f=e[8],p=vk(e);let m=!0;if(3&n.type||a){const y=Ws(n,e),v=a?a(y):y,M=p.length,w=a?D=>a(hi(D[n.index])):n.index;let C=null;if(!a&&l&&(C=function S5(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===n){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(i,e,r,n.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,m=!1;else{s=Nk(n,e,f,s,!1);const D=t.listen(v,r,s);p.push(s,D),d&&d.push(r,w,M,M+1)}}else s=Nk(n,e,f,s,!1);const _=n.outputs;let b;if(m&&null!==_&&(b=_[r])){const y=b.length;if(y)for(let v=0;v<y;v+=2){const I=e[b[v]][b[v+1]].subscribe(s),N=p.length;p.push(s,I),d&&d.push(r,n.index,N,-(N+1))}}}function Fk(i,e,t,n){try{return!1!==t(n)}catch(r){return xk(i,r),!1}}function Nk(i,e,t,n,r){return function s(o){if(o===Function)return n;VD(2&i.flags?Es(i.index,e):e);let l=Fk(e,0,n,o),c=s.__ngNextListenerFn__;for(;c;)l=Fk(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Oe(i=1){return function FS(i){return(vt.lFrame.contextLView=function NS(i,e){for(;i>0;)e=e[15],i--;return e}(i,vt.lFrame.contextLView))[8]}(i)}function E5(i,e){let t=null;const n=function lD(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?Gb(i,s,!0):uD(n,s))return r}else t=r}return t}function Ys(i){const e=xe()[16][6];if(!e.projection){const n=e.projection=ec(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const o=i?E5(s,i):0;null!==o&&(r[o]?r[o].projectionNext=s:n[o]=s,r[o]=s),s=s.next}}}function Yn(i,e=0,t){const n=xe(),r=on(),s=qf(r,22+i,16,null,t||null);null===s.projection&&(s.projection=e),dg(),64!=(64&s.flags)&&function iD(i,e,t){Lb(e[11],0,e,t,Eb(i,t,e),Ib(t.parent||e[6],t,e))}(r,n,s)}function qk(i,e,t,n,r){const s=i[t+1],o=null===e;let a=n?So(s):Eo(s),l=!1;for(;0!==a&&(!1===l||o);){const d=i[a+1];T5(i[a],e)&&(l=!0,i[a+1]=n?D_(d):Ad(d)),a=n?So(d):Eo(d)}l&&(i[t+1]=n?Ad(s):D_(s))}function T5(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&iu(i,e)>=0}const br={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Xk(i){return i.substring(br.key,br.keyEnd)}function Yk(i,e){const t=br.textEnd;return t===e?-1:(e=br.keyEnd=function k5(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}(i,br.key=e,t),rp(i,e,t))}function rp(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function fc(i,e,t){return Va(i,e,t,!1),fc}function ui(i,e){return Va(i,e,null,!0),ui}function wl(i,e){for(let t=function R5(i){return function Kk(i){br.key=0,br.keyEnd=0,br.value=0,br.valueEnd=0,br.textEnd=i.length}(i),Yk(i,rp(i,0,br.textEnd))}(e);t>=0;t=Yk(e,t))zr(i,Xk(e),!0)}function Va(i,e,t,n){const r=xe(),s=on(),o=gr(2);s.firstUpdatePass&&tO(s,i,o,n),e!==Pt&&ds(r,o,e)&&iO(s,s.data[Ur()],r,r[11],i,r[o+1]=function W5(i,e){return null==i||("string"==typeof e?i+=e:"object"==typeof i&&(i=qn(as(i)))),i}(e,t),n,o)}function eO(i,e){return e>=i.expandoStartIndex}function tO(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[Ur()],o=eO(i,t);sO(s,n)&&null===e&&!o&&(e=!1),e=function B5(i,e,t,n){const r=_o(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=N_(t=ZD(null,i,e,t,n),e.attrs,n),s=null);else{const o=e.directiveStylingLast;if(-1===o||i[o]!==r)if(t=ZD(r,i,e,t,n),null===s){let l=function U5(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==Eo(n))return i[So(n)]}(i,e,n);void 0!==l&&Array.isArray(l)&&(l=ZD(null,i,e,l[1],n),l=N_(l,e.attrs,n),function V5(i,e,t,n){i[So(t?e.classBindings:e.styleBindings)]=n}(i,e,n,l))}else s=function z5(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=N_(n,i[s].hostAttrs,t);return N_(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function D5(i,e,t,n,r,s){let o=s?e.classBindings:e.styleBindings,a=So(o),l=Eo(o);i[n]=t;let d,c=!1;if(Array.isArray(t)){const f=t;d=f[1],(null===d||iu(f,d)>0)&&(c=!0)}else d=t;if(r)if(0!==l){const p=So(i[a+1]);i[n+1]=Dd(p,a),0!==p&&(i[p+1]=E_(i[p+1],n)),i[a+1]=function DD(i,e){return 131071&i|e<<17}(i[a+1],n)}else i[n+1]=Dd(a,0),0!==a&&(i[a+1]=E_(i[a+1],n)),a=n;else i[n+1]=Dd(l,0),0===a?a=n:i[l+1]=E_(i[l+1],n),l=n;c&&(i[n+1]=Ad(i[n+1])),qk(i,d,n,!0),qk(i,d,n,!1),function A5(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&iu(s,e)>=0&&(t[n+1]=D_(t[n+1]))}(e,d,i,n,s),o=Dd(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,n)}}function ZD(i,e,t,n,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],n=N_(n,s.hostAttrs,r),s!==i);)a++;return null!==i&&(t.directiveStylingLast=a),n}function N_(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),zr(i,o,!!t||e[++s]))}return void 0===i?null:i}function iO(i,e,t,n,r,s,o,a){if(!(3&e.type))return;const l=i.data,c=l[a+1];yx(function ox(i){return 1==(1&i)}(c)?rO(l,e,t,r,Eo(c),o):void 0)||(yx(s)||function sx(i){return 2==(2&i)}(c)&&(s=rO(l,null,t,r,a,o)),function Fb(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:cs.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=cs.Important),i.setStyle(t,n,r,s))}}(n,o,td(Ur(),t),r,s))}function rO(i,e,t,n,r,s){const o=null===e;let a;for(;r>0;){const l=i[r],c=Array.isArray(l),d=c?l[1]:l,f=null===d;let p=t[r+1];p===Pt&&(p=f?Sn:void 0);let m=f?Ag(p,n):d===n?p:void 0;if(c&&!yx(m)&&(m=Ag(l,n)),yx(m)&&(a=m,o))return a;const _=i[r+1];r=o?So(_):Eo(_)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=Ag(l,n))}return a}function yx(i){return void 0!==i}function sO(i,e){return 0!=(i.flags&(e?16:32))}function ot(i,e=""){const t=xe(),n=on(),r=i+22,s=n.firstCreatePass?qf(n,r,1,e,null):n.data[r],o=t[r]=function d_(i,e){return i.createText(e)}(t[11],e);Hf(n,t,o,s),Ii(s,!1)}function Pi(i){return Xr("",i,""),Pi}function Xr(i,e,t){const n=xe(),r=Zf(n,i,e,t);return r!==Pt&&hc(n,Ur(),r),Xr}function B_(i,e,t,n,r){const s=xe(),o=Kf(s,i,e,t,n,r);return o!==Pt&&hc(s,Ur(),o),B_}function fO(i,e,t){!function za(i,e,t,n){const r=on(),s=gr(2);r.firstUpdatePass&&tO(r,null,s,n);const o=xe();if(t!==Pt&&ds(o,s,t)){const a=r.data[Ur()];if(sO(a,n)&&!eO(r,s)){let l=n?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=Bh(l,t||"")),qD(r,a,o,t,n)}else!function G5(i,e,t,n,r,s,o,a){r===Pt&&(r=Sn);let l=0,c=0,d=0<r.length?r[0]:null,f=0<s.length?s[0]:null;for(;null!==d||null!==f;){const p=l<r.length?r[l+1]:void 0,m=c<s.length?s[c+1]:void 0;let b,_=null;d===f?(l+=2,c+=2,p!==m&&(_=f,b=m)):null===f||null!==d&&d<f?(l+=2,_=d):(c+=2,_=f,b=m),null!==_&&iO(i,e,t,n,_,b,o,a),d=l<r.length?r[l]:null,f=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function H5(i,e,t){if(null==t||""===t)return Sn;const n=[],r=as(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&e(n,r);return n}(i,e,t),n,s)}}(zr,wl,Zf(xe(),i,e,t),!0)}function sp(i,e,t){const n=xe();return ds(n,Jc(),e)&&To(on(),fi(),n,i,e,n[11],t,!0),sp}function bx(i,e,t){const n=xe();if(ds(n,Jc(),e)){const s=on(),o=fi();To(s,o,n,i,e,bk(_o(s.data),o,n),t,!0)}return bx}const Rd=void 0;var cG=["en",[["a","p"],["AM","PM"],Rd],[["AM","PM"],Rd,Rd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rd,"{1} 'at' {0}",Rd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function lG(i){const t=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let op={};function Ds(i){const e=function uG(i){return i.toLowerCase().replace(/_/g,"-")}(i);let t=CO(e);if(t)return t;const n=e.split("-")[0];if(t=CO(n),t)return t;if("en"===n)return cG;throw new _e(701,!1)}function CO(i){return i in op||(op[i]=Vn.ng&&Vn.ng.common&&Vn.ng.common.locales&&Vn.ng.common.locales[i]),op[i]}var We=(()=>((We=We||{})[We.LocaleId=0]="LocaleId",We[We.DayPeriodsFormat=1]="DayPeriodsFormat",We[We.DayPeriodsStandalone=2]="DayPeriodsStandalone",We[We.DaysFormat=3]="DaysFormat",We[We.DaysStandalone=4]="DaysStandalone",We[We.MonthsFormat=5]="MonthsFormat",We[We.MonthsStandalone=6]="MonthsStandalone",We[We.Eras=7]="Eras",We[We.FirstDayOfWeek=8]="FirstDayOfWeek",We[We.WeekendRange=9]="WeekendRange",We[We.DateFormat=10]="DateFormat",We[We.TimeFormat=11]="TimeFormat",We[We.DateTimeFormat=12]="DateTimeFormat",We[We.NumberSymbols=13]="NumberSymbols",We[We.NumberFormats=14]="NumberFormats",We[We.CurrencyCode=15]="CurrencyCode",We[We.CurrencySymbol=16]="CurrencySymbol",We[We.CurrencyName=17]="CurrencyName",We[We.Currencies=18]="Currencies",We[We.Directionality=19]="Directionality",We[We.PluralCase=20]="PluralCase",We[We.ExtraData=21]="ExtraData",We))();const ap="en-US";let SO=ap;function QD(i,e,t,n,r){if(i=_t(i),Array.isArray(i))for(let s=0;s<i.length;s++)QD(i[s],e,t,n,r);else{const s=on(),o=xe();let a=oc(i)?i:_t(i.provide),l=Zg(i);const c=E(),d=1048575&c.providerIndexes,f=c.directiveStart,p=c.providerIndexes>>20;if(oc(i)||!i.multi){const m=new od(l,r,R),_=tA(a,e,r?d:d+p,f);-1===_?(cf(eu(c,o),s,a),eA(s,i,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{const m=tA(a,e,d+p,f),_=tA(a,e,d,d+p),b=m>=0&&t[m],y=_>=0&&t[_];if(r&&!y||!r&&!b){cf(eu(c,o),s,a);const v=function aW(i,e,t,n,r){const s=new od(i,t,R);return s.multi=[],s.index=e,s.componentProviders=0,ZO(s,r,n&&!t),s}(r?oW:sW,t.length,r,n,l);!r&&y&&(t[_].providerFactory=v),eA(s,i,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),t.push(v),o.push(v)}else eA(s,i,m>-1?m:_,ZO(t[r?_:m],l,!r&&n));!r&&n&&y&&t[_].componentProviders++}}}function eA(i,e,t,n){const r=oc(e),s=function _E(i){return!!i.useClass}(e);if(r||s){const l=(s?_t(e.useClass):e).prototype.ngOnDestroy;if(l){const c=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const d=c.indexOf(t);-1===d?c.push(t,[n,l]):c[d+1].push(n,l)}else c.push(t,l)}}}function ZO(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function tA(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function sW(i,e,t,n){return nA(this.multi,[])}function oW(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=Kl(t,t[1],this.providerFactory.index,n);s=a.slice(0,o),nA(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],nA(r,s);return s}function nA(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function Nn(i,e=[]){return t=>{t.providersResolver=(n,r)=>function rW(i,e,t){const n=on();if(n.firstCreatePass){const r=mo(i);QD(t,n.data,n.blueprint,r,!0),QD(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class Pd{}class KO{}class JO extends Pd{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new WD(this);const n=Cs(e);this._bootstrapComponents=Na(n.bootstrap),this._r3Injector=Kb(e,t,[{provide:Pd,useValue:this},{provide:ac,useValue:this.componentFactoryResolver}],qn(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class iA extends KO{constructor(e){super(),this.moduleType=e}create(e){return new JO(this.moduleType,e)}}class cW extends Pd{constructor(e,t,n){super(),this.componentFactoryResolver=new WD(this),this.instance=null;const r=new db([...e,{provide:Pd,useValue:this},{provide:ac,useValue:this.componentFactoryResolver}],t||Tf(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Sx(i,e,t=null){return new cW(i,e,t).injector}function aa(i,e,t){const n=Br()+i,r=xe();return r[n]===Pt?yl(r,n,t?e.call(t):e()):function L_(i,e){return i[e]}(r,n)}function Ex(i,e,t,n){return sL(xe(),Br(),i,e,t,n)}function G_(i,e){const t=i[e];return t===Pt?void 0:t}function sL(i,e,t,n,r,s){const o=e+t;return ds(i,o,r)?yl(i,o+1,s?n.call(s,r):n(r)):G_(i,o+1)}function ai(i,e){const t=on();let n;const r=i+22;t.firstCreatePass?(n=function AW(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=jl(n.type)),o=Us(R);try{const a=Qc(!1),l=s();return Qc(a),function w5(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,xe(),r,l),l}finally{Us(o)}}function gi(i,e,t){const n=i+22,r=xe(),s=Ti(r,n);return W_(r,n)?sL(r,Br(),e,s.transform,t,s):s.transform(t)}function sA(i,e,t,n){const r=i+22,s=xe(),o=Ti(s,r);return W_(s,r)?function oL(i,e,t,n,r,s,o){const a=e+t;return Id(i,a,r,s)?yl(i,a+2,o?n.call(o,r,s):n(r,s)):G_(i,a+2)}(s,Br(),e,o.transform,t,n,o):o.transform(t,n)}function W_(i,e){return i[1].data[e].pure}function oA(i){return e=>{setTimeout(i,void 0,e)}}const et=class PW extends He{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),o=n;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=oA(s),r&&(r=oA(r)),o&&(o=oA(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Zt&&e.add(a),a}};function kW(){return this._results[Td()]()}class cp{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Td(),n=cp.prototype;n[t]||(n[t]=kW)}get changes(){return this._changes||(this._changes=new et)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=Ir(e);(this._changesDetected=!function T0(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Zs=(()=>{class i{}return i.__NG_ELEMENT_ID__=FW,i})();const OW=Zs,LW=class extends OW{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tViews,r=dx(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(n)),hx(n,r,e),new P_(r)}};function FW(){return Dx(E(),xe())}function Dx(i,e){return 4&i.type?new LW(e,i,du(i,e)):null}let Yr=(()=>{class i{}return i.__NG_ELEMENT_ID__=NW,i})();function NW(){return hL(E(),xe())}const BW=Yr,uL=class extends BW{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return du(this._hostTNode,this._hostLView)}get injector(){return new Jl(this._hostTNode,this._hostLView)}get parentInjector(){const e=al(this._hostTNode,this._hostLView);if(lf(e)){const t=Zl(e,this._hostLView),n=ka(e);return new Jl(t[1].data[n+8],t)}return new Jl(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=dL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,n,r,s){const o=e&&!function js(i){return"function"==typeof i}(e);let a;if(o)a=t;else{const f=t||{};a=f.index,n=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}const l=o?e:new k_(Ln(e)),c=n||this.parentInjector;if(!s&&null==l.ngModule){const p=(o?c:this.parentInjector).get(pl,null);p&&(s=p)}const d=l.create(c,r,void 0,s);return this.insert(d.hostView,a),d}insert(e,t){const n=e._lView,r=n[1];if(function DS(i){return po(i[3])}(n)){const d=this.indexOf(e);if(-1!==d)this.detach(d);else{const f=n[3],p=new uL(f,f[6],f[3]);p.detach(p.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function Cb(i,e,t,n){const r=10+n,s=t.length;n>0&&(t[r-1][4]=e),n<s-10?(e[4]=t[r],ff(t,10+n,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function Xs(i,e){const t=i[9];e[16]!==e[3][3][16]&&(i[2]=!0),null===t?i[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(i),e[2]|=64}(r,n,o,s);const a=__(s,o),l=n[11],c=Vf(l,o[7]);return null!==c&&function Mb(i,e,t,n,r,s){n[0]=r,n[6]=e,sr(i,n,t,1,r,s)}(r,o[6],l,n,c,a),e.attachToViewContainerRef(),ff(aA(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=dL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=p_(this._lContainer,t);n&&(hd(aA(this._lContainer),t),Pn(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=p_(this._lContainer,t);return n&&null!=hd(aA(this._lContainer),t)?new P_(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function dL(i){return i[8]}function aA(i){return i[8]||(i[8]=[])}function hL(i,e){let t;const n=e[i.index];if(po(n))t=n;else{let r;if(8&i.type)r=hi(n);else{const s=e[11];r=s.createComment("");const o=Ws(i,e);uc(s,Vf(s,o),r,function nD(i,e){return i.nextSibling(e)}(s,o),!1)}e[i.index]=t=mk(n,e,r,i),fx(e,t)}return new uL(t,i,e)}class lA{constructor(e){this.queryList=e,this.matches=null}clone(){return new lA(this.queryList)}setDirty(){this.queryList.setDirty()}}class cA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new cA(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==_L(e,t).matches&&this.queries[t].setDirty()}}class fL{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class uA{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new uA(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class dA{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new dA(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,zW(t,s)),this.matchTNodeWithReadOption(e,t,ud(t,e,s,!1,!1))}else n===Zs?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ud(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Wt||r===Yr||r===Zs&&4&t.type)this.addMatch(t.index,-2);else{const s=ud(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function zW(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function GW(i,e,t,n){return-1===t?function HW(i,e){return 11&i.type?du(i,e):4&i.type?Dx(i,e):null}(e,i):-2===t?function WW(i,e,t){return t===Wt?du(e,i):t===Zs?Dx(e,i):t===Yr?hL(e,i):void 0}(i,e,n):Kl(i,i[1],t,e)}function pL(i,e,t,n){const r=e[19].queries[n];if(null===r.matches){const s=i.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:GW(e,s[c],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function hA(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const o=pL(i,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)n.push(o[a/2]);else{const c=s[a+1],d=e[-l];for(let f=10;f<d.length;f++){const p=d[f];p[17]===p[3]&&hA(p[1],p,c,n)}if(null!==d[9]){const f=d[9];for(let p=0;p<f.length;p++){const m=f[p];hA(m[1],m,c,n)}}}}}return n}function $t(i){const e=xe(),t=on(),n=f0();fg(n+1);const r=_L(t,n);if(i.dirty&&c0(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?hA(t,e,n,[]):pL(t,e,r,n);i.reset(s,AE),i.notifyOnChanges()}return!0}return!1}function qi(i,e,t){const n=on();n.firstCreatePass&&(gL(n,new fL(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),mL(n,xe(),e)}function Ci(i,e,t,n){const r=on();if(r.firstCreatePass){const s=E();gL(r,new fL(e,t,n),s.index),function jW(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}mL(r,xe(),t)}function jt(){return function $W(i,e){return i[19].queries[e].queryList}(xe(),f0())}function mL(i,e,t){const n=new cp(4==(4&t));ok(i,e,n,n.destroy),null===e[19]&&(e[19]=new cA),e[19].queries.push(new lA(n))}function gL(i,e,t){null===i.queries&&(i.queries=new uA),i.queries.track(new dA(e,t))}function _L(i,e){return i.queries.getByIndex(e)}function fA(i,e){return Dx(i,e)}function Tx(...i){}const Ix=new Se("Application Initializer");let Rx=(()=>{class i{constructor(t){this.appInits=t,this.resolve=Tx,this.reject=Tx,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(F_(s))t.push(s);else if(XD(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(j(Ix,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fp=new Se("AppId",{providedIn:"root",factory:function FL(){return`${vA()}${vA()}${vA()}`}});function vA(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const NL=new Se("Platform Initializer"),yA=new Se("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),BL=new Se("appBootstrapListener"),Ks=new Se("AnimationModuleType");let h8=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Ml=new Se("LocaleId",{providedIn:"root",factory:()=>Hn(Ml,mt.Optional|mt.SkipSelf)||function f8(){return typeof $localize<"u"&&$localize.locale||ap}()});class m8{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let bA=(()=>{class i{compileModuleSync(t){return new iA(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=Na(Cs(t).declarations).reduce((o,a)=>{const l=Ln(a);return l&&o.push(new k_(l)),o},[]);return new m8(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const v8=(()=>Promise.resolve(0))();function xA(i){typeof Zone>"u"?v8.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Et{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const r=this;if(r._nesting=0,r._outer=r._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const s=Zone.AsyncStackTaggingZoneSpec;r._inner=r._inner.fork(new s("Angular"))}Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function y8(){let i=Vn.requestAnimationFrame,e=Vn.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function w8(i){const e=()=>{!function x8(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Vn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,MA(i),i.isCheckStableRunning=!0,wA(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),MA(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,o,a)=>{try{return zL(i),t.invokeTask(r,s,o,a)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),HL(i)}},onInvoke:(t,n,r,s,o,a,l)=>{try{return zL(i),t.invoke(r,s,o,a,l)}finally{i.shouldCoalesceRunChangeDetection&&e(),HL(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,MA(i),wA(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Et.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(Et.isInAngularZone())throw new _e(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,b8,Tx,Tx);try{return s.runTask(o,t,n)}finally{s.cancelTask(o)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const b8={};function wA(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function MA(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function zL(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function HL(i){i._nesting--,wA(i)}class M8{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const GL=new Se(""),Px=new Se("");let EA,CA=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,EA||(function C8(i){EA=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Et.assertNotInAngularZone(),xA(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xA(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(SA),j(Px))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),SA=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return EA?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),_u=null;const WL=new Se("AllowMultipleToken"),DA=new Se("PlatformDestroyListeners");class $L{constructor(e,t){this.name=e,this.token=t}}function qL(i,e,t=[]){const n=`Platform: ${e}`,r=new Se(n);return(s=[])=>{let o=AA();if(!o||o.injector.get(WL,!1)){const a=[...t,...s,{provide:r,useValue:!0}];i?i(a):function D8(i){if(_u&&!_u.get(WL,!1))throw new _e(400,!1);_u=i;const e=i.get(YL);(function jL(i){const e=i.get(NL,null);e&&e.forEach(t=>t())})(i)}(function XL(i=[],e){return mi.create({name:e,providers:[{provide:wd,useValue:"platform"},{provide:DA,useValue:new Set([()=>_u=null])},...i]})}(a,n))}return function T8(i){const e=AA();if(!e)throw new _e(401,!1);return e}()}}function AA(){return _u?.get(YL)??null}let YL=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function I8(i,e){let t;return t="noop"===i?new M8:("zone.js"===i?void 0:i)||new Et(e),t}(n?.ngZone,function ZL(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:Et,useValue:r}];return r.run(()=>{const o=mi.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Fa,null);if(!l)throw new _e(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:d=>{l.handleError(d)}});a.onDestroy(()=>{kx(this._modules,a),c.unsubscribe()})}),function KL(i,e,t){try{const n=t();return F_(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(l,r,()=>{const c=a.injector.get(Rx);return c.runInitializers(),c.donePromise.then(()=>(function EO(i){es(i,"Expected localeId to be defined"),"string"==typeof i&&(SO=i.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Ml,ap)||ap),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,n=[]){const r=JL({},n);return function S8(i,e,t){const n=new iA(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(kd);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new _e(403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(DA,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(j(mi))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function JL(i,e){return Array.isArray(e)?e.reduce(JL,i):{...i,...e}}let kd=(()=>{class i{constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new yn(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new yn(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Et.assertNotInAngularZone(),xA(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Et.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=Ms(s,o.pipe($m()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){const r=t instanceof hb;if(!this._injector.get(Rx).done)throw!r&&function dp(i){const e=Ln(i)||er(i)||Fi(i);return null!==e&&e.standalone}(t),new _e(405,false);let o;o=r?t:this._injector.get(ac).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function E8(i){return i.isBoundToModule}(o)?void 0:this._injector.get(Pd),c=o.create(mi.NULL,[],n||o.selector,a),d=c.location.nativeElement,f=c.injector.get(GL,null);return f?.registerApplication(d),c.onDestroy(()=>{this.detachView(c.hostView),kx(this.components,c),f?.unregisterApplication(d)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;kx(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(BL,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>kx(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new _e(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(pl),j(Fa))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function kx(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let eF=!0,Qn=(()=>{class i{}return i.__NG_ELEMENT_ID__=k8,i})();function k8(i){return function O8(i,e,t){if(Wh(i)&&!t){const n=Es(i.index,e);return new P_(n,n)}return 47&i.type?new P_(e[16],e):null}(E(),xe(),16==(16&i))}class sF{constructor(){}supports(e){return O_(e)}create(e){return new V8(e)}}const U8=(i,e)=>e;class V8{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||U8}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const o=!n||t&&t.currentIndex<aF(n,r,s)?t:n,a=aF(o,r,s),l=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,d=l-r;if(c!=d){for(let p=0;p<c;p++){const m=p<s.length?s[p]:s[p]=0,_=m+p;d<=_&&_<c&&(s[p]=m+1)}s[o.previousIndex]=d-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!O_(e))throw new _e(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),n=!0),t=t._next}else r=0,function _5(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[Td()]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(n&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new z8(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new oF),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oF),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class z8{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class H8{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class oF{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new H8,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aF(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class lF{constructor(){}supports(e){return e instanceof Map||jD(e)}create(){return new G8}}class G8{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||jD(e)))throw new _e(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const n=new W8(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class W8{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cF(){return new Fx([new sF])}let Fx=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||cF()),deps:[[i,new hl,new wo]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new _e(901,!1)}}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:cF}),i})();function uF(){return new j_([new lF])}let j_=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||uF()),deps:[[i,new hl,new wo]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new _e(901,!1)}}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:uF}),i})();const q8=qL(null,"core",[]);let X8=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(j(kd))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();let Nx=null;function Cl(){return Nx}const kt=new Se("DocumentToken");let kA=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return function J8(){return j(dF)}()},providedIn:"platform"}),i})();const Q8=new Se("Location Initialized");let dF=(()=>{class i extends kA{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cl().getBaseHref(this._doc)}onPopState(t){const n=Cl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=Cl().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,n,r){hF()?this._history.pushState(t,n,r):this.location.hash=r}replaceState(t,n,r){hF()?this._history.replaceState(t,n,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:function(){return function e6(){return new dF(j(kt))}()},providedIn:"platform"}),i})();function hF(){return!!window.history.pushState}function OA(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function fF(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function gc(i){return i&&"?"!==i[0]?"?"+i:i}let Ld=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return Hn(mF)},providedIn:"root"}),i})();const pF=new Se("appBaseHref");let mF=(()=>{class i extends Ld{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Hn(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return OA(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+gc(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const o=this.prepareExternalUrl(r+gc(s));this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){const o=this.prepareExternalUrl(r+gc(s));this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(j(kA),j(pF,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),t6=(()=>{class i extends Ld{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=OA(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let o=this.prepareExternalUrl(r+gc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,n,o)}replaceState(t,n,r,s){let o=this.prepareExternalUrl(r+gc(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(j(kA),j(pF,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),q_=(()=>{class i{constructor(t){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._baseHref=fF(gF(n)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+gc(n))}normalize(t){return i.stripTrailingSlash(function i6(i,e){return i&&e.startsWith(i)?e.substring(i.length):e}(this._baseHref,gF(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gc(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+gc(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=gc,i.joinWithSlash=OA,i.stripTrailingSlash=fF,i.\u0275fac=function(t){return new(t||i)(j(Ld))},i.\u0275prov=Pe({token:i,factory:function(){return function n6(){return new q_(j(Ld))}()},providedIn:"root"}),i})();function gF(i){return i.replace(/\/index.html$/,"")}var Js=(()=>((Js=Js||{})[Js.Decimal=0]="Decimal",Js[Js.Percent=1]="Percent",Js[Js.Currency=2]="Currency",Js[Js.Scientific=3]="Scientific",Js))(),Ct=(()=>((Ct=Ct||{})[Ct.Decimal=0]="Decimal",Ct[Ct.Group=1]="Group",Ct[Ct.List=2]="List",Ct[Ct.PercentSign=3]="PercentSign",Ct[Ct.PlusSign=4]="PlusSign",Ct[Ct.MinusSign=5]="MinusSign",Ct[Ct.Exponential=6]="Exponential",Ct[Ct.SuperscriptingExponent=7]="SuperscriptingExponent",Ct[Ct.PerMille=8]="PerMille",Ct[Ct.Infinity=9]="Infinity",Ct[Ct.NaN=10]="NaN",Ct[Ct.TimeSeparator=11]="TimeSeparator",Ct[Ct.CurrencyDecimal=12]="CurrencyDecimal",Ct[Ct.CurrencyGroup=13]="CurrencyGroup",Ct))();function la(i,e){const t=Ds(i),n=t[We.NumberSymbols][e];if(typeof n>"u"){if(e===Ct.CurrencyDecimal)return t[We.NumberSymbols][Ct.Decimal];if(e===Ct.CurrencyGroup)return t[We.NumberSymbols][Ct.Group]}return n}const T6=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function HA(i){const e=parseInt(i);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+i);return e}let Z_=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(O_(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachChangedItem(n=>this._toggleClass(n.key,n.currentValue)),t.forEachRemovedItem(n=>{n.previousValue&&this._toggleClass(n.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(n=>{if("string"!=typeof n.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${qn(n.item)}`);this._toggleClass(n.item,!0)}),t.forEachRemovedItem(n=>this._toggleClass(n.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!0)):Object.keys(t).forEach(n=>this._toggleClass(n,!!t[n])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(n=>this._toggleClass(n,!1)):Object.keys(t).forEach(n=>this._toggleClass(n,!1)))}_toggleClass(t,n){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(R(Fx),R(j_),R(Wt),R(sa))},i.\u0275dir=Le({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class H6{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ua=(()=>{class i{constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new H6(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)n.remove(null===s?void 0:s);else if(null!==s){const a=n.get(s);n.move(a,o),DF(a,r)}});for(let r=0,s=n.length;r<s;r++){const a=n.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{DF(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(R(Yr),R(Zs),R(Fx))},i.\u0275dir=Le({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function DF(i,e){i.context.$implicit=e.item}let lr=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new W6,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){AF("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){AF("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(R(Yr),R(Zs))},i.\u0275dir=Le({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class W6{constructor(){this.$implicit=null,this.ngIf=null}}function AF(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${qn(e)}'.`)}class WA{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let pp=(()=>{class i{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let n=0;n<this._defaultViews.length;n++)this._defaultViews[n].enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),qx=(()=>{class i{constructor(t,n,r){this.ngSwitch=r,r._addCase(),this._view=new WA(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(R(Yr),R(Zs),R(pp,9))},i.\u0275dir=Le({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),TF=(()=>{class i{constructor(t,n,r){r._addDefault(new WA(t,n))}}return i.\u0275fac=function(t){return new(t||i)(R(Yr),R(Zs),R(pp,9))},i.\u0275dir=Le({type:i,selectors:[["","ngSwitchDefault",""]],standalone:!0}),i})(),$A=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:cs.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(j_),R(sa))},i.\u0275dir=Le({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),RF=(()=>{class i{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=n.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(t){return new(t||i)(R(Yr))},i.\u0275dir=Le({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[oi]}),i})();function Wa(i,e){return new _e(2100,!1)}class j6{createSubscription(e,t){return e.subscribe({next:t,error:n=>{throw n}})}dispose(e){e.unsubscribe()}}class q6{createSubscription(e,t){return e.then(t,n=>{throw n})}dispose(e){}}const X6=new q6,Y6=new j6;let mp=(()=>{class i{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,n=>this._updateLatestValue(t,n))}_selectStrategy(t){if(F_(t))return X6;if(Ok(t))return Y6;throw Wa()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,n){t===this._obj&&(this._latestValue=n,this._ref.markForCheck())}}return i.\u0275fac=function(t){return new(t||i)(R(Qn,16))},i.\u0275pipe=ns({name:"async",type:i,pure:!1,standalone:!0}),i})(),PF=(()=>{class i{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=kF}transform(t,n=kF){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),s=n!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function o$(i,e){return{key:i,value:e}}(o.key,o.currentValue))})),(r||s)&&(this.keyValues.sort(n),this.compareFn=n),this.keyValues}}return i.\u0275fac=function(t){return new(t||i)(R(j_,16))},i.\u0275pipe=ns({name:"keyvalue",type:i,pure:!1,standalone:!0}),i})();function kF(i,e){const t=i.key,n=e.key;if(t===n)return 0;if(void 0===t)return 1;if(void 0===n)return-1;if(null===t)return 1;if(null===n)return-1;if("string"==typeof t&&"string"==typeof n)return t<n?-1:1;if("number"==typeof t&&"number"==typeof n)return t-n;if("boolean"==typeof t&&"boolean"==typeof n)return t<n?-1:1;const r=String(t),s=String(n);return r==s?0:r<s?-1:1}let OF=(()=>{class i{constructor(t){this._locale=t}transform(t,n,r){if(!function jA(i){return!(null==i||""===i||i!=i)}(t))return null;r=r||this._locale;try{return function L6(i,e,t){return function VA(i,e,t,n,r,s,o=!1){let a="",l=!1;if(isFinite(i)){let c=function N6(i){let n,r,s,o,a,e=Math.abs(i)+"",t=0;for((r=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(r<0&&(r=s),r+=+e.slice(s+1),e=e.substring(0,s)):r<0&&(r=e.length),s=0;"0"===e.charAt(s);s++);if(s===(a=e.length))n=[0],r=1;else{for(a--;"0"===e.charAt(a);)a--;for(r-=s,n=[],o=0;s<=a;s++,o++)n[o]=Number(e.charAt(s))}return r>22&&(n=n.splice(0,21),t=r-1,r=1),{digits:n,exponent:t,integerLen:r}}(i);o&&(c=function F6(i){if(0===i.digits[0])return i;const e=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(0===e?i.digits.push(0,0):1===e&&i.digits.push(0),i.integerLen+=2),i}(c));let d=e.minInt,f=e.minFrac,p=e.maxFrac;if(s){const M=s.match(T6);if(null===M)throw new Error(`${s} is not a valid digit info`);const w=M[1],C=M[3],D=M[5];null!=w&&(d=HA(w)),null!=C&&(f=HA(C)),null!=D?p=HA(D):null!=C&&f>p&&(p=f)}!function B6(i,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let n=i.digits,r=n.length-i.integerLen;const s=Math.min(Math.max(e,r),t);let o=s+i.integerLen,a=n[o];if(o>0){n.splice(Math.max(i.integerLen,o));for(let f=o;f<n.length;f++)n[f]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,o=s+1),n[0]=0;for(let f=1;f<o;f++)n[f]=0}if(a>=5)if(o-1<0){for(let f=0;f>o;f--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[o-1]++;for(;r<Math.max(0,s);r++)n.push(0);let l=0!==s;const c=e+i.integerLen,d=n.reduceRight(function(f,p,m,_){return _[m]=(p+=f)<10?p:p-10,l&&(0===_[m]&&m>=c?_.pop():l=!1),p>=10?1:0},0);d&&(n.unshift(d),i.integerLen++)}(c,f,p);let m=c.digits,_=c.integerLen;const b=c.exponent;let y=[];for(l=m.every(M=>!M);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?y=m.splice(_,m.length):(y=m,m=[0]);const v=[];for(m.length>=e.lgSize&&v.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)v.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&v.unshift(m.join("")),a=v.join(la(t,n)),y.length&&(a+=la(t,r)+y.join("")),b&&(a+=la(t,Ct.Exponential)+"+"+b)}else a=la(t,Ct.Infinity);return a=i<0&&!l?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(i,function zA(i,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(";"),r=n[0],s=n[1],o=-1!==r.indexOf(".")?r.split("."):[r.substring(0,r.lastIndexOf("0")+1),r.substring(r.lastIndexOf("0")+1)],a=o[0],l=o[1]||"";t.posPre=a.substring(0,a.indexOf("#"));for(let d=0;d<l.length;d++){const f=l.charAt(d);"0"===f?t.minFrac=t.maxFrac=d+1:"#"===f?t.maxFrac=d+1:t.posSuf+=f}const c=a.split(",");if(t.gSize=c[1]?c[1].length:0,t.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,s){const d=r.length-t.posPre.length-t.posSuf.length,f=s.indexOf("#");t.negPre=s.substring(0,f).replace(/'/g,""),t.negSuf=s.slice(f+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function LA(i,e){return Ds(i)[We.NumberFormats][e]}(e,Js.Decimal),la(e,Ct.MinusSign)),e,Ct.Group,Ct.Decimal,t)}(function qA(i){if("string"==typeof i&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if("number"!=typeof i)throw new Error(`${i} is not a number`);return i}(t),r,n)}catch(s){throw Wa()}}}return i.\u0275fac=function(t){return new(t||i)(R(Ml,16))},i.\u0275pipe=ns({name:"number",type:i,pure:!0,standalone:!0}),i})();let $a=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const LF="browser";let p$=(()=>{class i{}return i.\u0275prov=Pe({token:i,providedIn:"root",factory:()=>new m$(j(kt),window)}),i})();class m${constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function g$(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=FF(this.window.history)||FF(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function FF(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class XA extends class v$ extends class K8{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Z8(i){Nx||(Nx=i)}(new XA)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function y$(){return K_=K_||document.querySelector("base"),K_?K_.getAttribute("href"):null}();return null==t?null:function b$(i){Xx=Xx||document.createElement("a"),Xx.setAttribute("href",i);const e=Xx.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){K_=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function V6(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Xx,K_=null;const NF=new Se("TRANSITION_ID"),w$=[{provide:Ix,useFactory:function x$(i,e,t){return()=>{t.get(Rx).donePromise.then(()=>{const n=Cl(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[NF,kt,mi],multi:!0}];let C$=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const Yx=new Se("EventManagerPlugins");let Zx=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(j(Yx),j(Et))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class BF{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=Cl().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let UF=(()=>{class i{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),n.add(r))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),J_=(()=>{class i extends UF{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(n.appendChild(o))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(VF),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,r)=>{this._addStylesToHost(t,r,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(VF))}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();function VF(i){Cl().remove(i)}const YA={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ZA=/%COMP%/g;function Kx(i,e,t){for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?Kx(i,r,t):(r=r.replace(ZA,i),t.push(r))}return t}function GF(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let Jx=(()=>{class i{constructor(t,n,r){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new KA(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case Hs.Emulated:{let r=this.rendererByCompId.get(n.id);return r||(r=new I$(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,r)),r.applyToHost(t),r}case 1:case Hs.ShadowDom:return new R$(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const r=Kx(n.id,n.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(j(Zx),j(J_),j(fp))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class KA{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(YA[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){($F(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&($F(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=YA[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=YA[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(cs.DashCase|cs.Important)?e.style.setProperty(t,n,r&cs.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&cs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,GF(n)):this.eventManager.addEventListener(e,t,GF(n))}}function $F(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class I$ extends KA{constructor(e,t,n,r){super(e),this.component=n;const s=Kx(r+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr=function D$(i){return"_ngcontent-%COMP%".replace(ZA,i)}(r+"-"+n.id),this.hostAttr=function A$(i){return"_nghost-%COMP%".replace(ZA,i)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class R$ extends KA{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Kx(r.id,r.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let P$=(()=>{class i extends BF{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const jF=["alt","control","meta","shift"],O$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},qF={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},L$={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let F$=(()=>{class i extends BF{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),o=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cl().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let o="";if(jF.forEach(l=>{const c=n.indexOf(l);c>-1&&(n.splice(c,1),o+=l+".")}),o+=s,0!=n.length||0===s.length)return null;const a={};return a.domEventName=r,a.fullKey=o,a}static getEventFullKey(t){let n="",r=function N$(i){let e=i.key;if(null==e){if(e=i.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===i.location&&qF.hasOwnProperty(e)&&(e=qF[e]))}return O$[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),jF.forEach(s=>{s!=r&&(0,L$[s])(t)&&(n+=s+".")}),n+=r,n}static eventCallback(t,n,r){return s=>{i.getEventFullKey(s)===t&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const z$=qL(q8,"browser",[{provide:yA,useValue:LF},{provide:NL,useValue:function B$(){XA.makeCurrent()},multi:!0},{provide:kt,useFactory:function V$(){return function V0(i){Ng=i}(document),document},deps:[]}]),YF=new Se(""),ZF=[{provide:Px,useClass:class M${addToWindow(e){Vn.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Vn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Vn.getAllAngularRootElements=()=>e.getAllRootElements(),Vn.frameworkStabilizers||(Vn.frameworkStabilizers=[]),Vn.frameworkStabilizers.push(n=>{const r=Vn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&n(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?Cl().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:GL,useClass:CA,deps:[Et,SA,Px]},{provide:CA,useClass:CA,deps:[Et,SA,Px]}],KF=[{provide:wd,useValue:"root"},{provide:Fa,useFactory:function U$(){return new Fa},deps:[]},{provide:Yx,useClass:P$,multi:!0,deps:[kt,Et,yA]},{provide:Yx,useClass:F$,multi:!0,deps:[kt]},{provide:Jx,useClass:Jx,deps:[Zx,J_,fp]},{provide:hu,useExisting:Jx},{provide:UF,useExisting:J_},{provide:J_,useClass:J_,deps:[kt]},{provide:Zx,useClass:Zx,deps:[Yx,Et]},{provide:class _${},useClass:C$,deps:[]},[]];let JF=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:fp,useValue:t.appId},{provide:NF,useExisting:fp},w$]}}}return i.\u0275fac=function(t){return new(t||i)(j(YF,12))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[...KF,...ZF],imports:[$a,X8]}),i})(),QF=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:function(t){let n=null;return n=t?new t:function G$(){return new QF(j(kt))}(),n},providedIn:"root"}),i})();typeof window<"u"&&window;let e1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(t){let n=null;return n=t?new(t||i):j(nN),n},providedIn:"root"}),i})(),nN=(()=>{class i extends e1{constructor(t){super(),this._doc=t}sanitize(t,n){if(null==n)return null;switch(t){case Rn.NONE:return n;case Rn.HTML:return na(n,"HTML")?as(n):tb(this._doc,String(n)).toString();case Rn.STYLE:return na(n,"Style")?as(n):n;case Rn.SCRIPT:if(na(n,"Script"))return as(n);throw new Error("unsafe value used in a script context");case Rn.URL:return na(n,"URL")?as(n):yd(String(n));case Rn.RESOURCE_URL:if(na(n,"ResourceURL"))return as(n);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return function W0(i){return new QS(i)}(t)}bypassSecurityTrustStyle(t){return function _d(i){return new eE(i)}(t)}bypassSecurityTrustScript(t){return function Gg(i){return new tE(i)}(t)}bypassSecurityTrustUrl(t){return function $0(i){return new nE(i)}(t)}bypassSecurityTrustResourceUrl(t){return function j0(i){return new G0(i)}(t)}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:function(t){let n=null;return n=t?new t:function Z$(i){return new nN(i.get(kt))}(j(mi)),n},providedIn:"root"}),i})();function tt(...i){return Ei(i,qu(i))}class wn extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const Q_=B(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:K$}=Array,{getPrototypeOf:J$,prototype:Q$,keys:ej}=Object;function iN(i){if(1===i.length){const e=i[0];if(K$(e))return{args:e,keys:null};if(function tj(i){return i&&"object"==typeof i&&J$(i)===Q$}(e)){const t=ej(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:nj}=Array;function t1(i){return Je(e=>function ij(i,e){return nj(e)?i(...e):i(e)}(i,e))}function rN(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function gp(...i){const e=qu(i),t=Hy(i),{args:n,keys:r}=iN(i);if(0===n.length)return Ei([],e);const s=new yn(function rj(i,e,t=Ea){return n=>{sN(e,()=>{const{length:r}=i,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)sN(e,()=>{const c=Ei(i[l],e);let d=!1;c.subscribe(In(n,f=>{s[l]=f,d||(d=!0,a--),a||n.next(t(s.slice()))},()=>{--o||n.complete()}))},n)},n)}}(n,e,r?o=>rN(r,o):Ea));return t?s.pipe(t1(t)):s}function sN(i,e,t){i?Aa(t,i,e):e()}function ev(...i){return function sj(){return Hc(1)}()(Ei(i,qu(i)))}function tv(i){return new yn(e=>{mr(i()).subscribe(e)})}function _p(i,e){const t=Ht(i)?i:()=>i,n=r=>r.error(t());return new yn(e?r=>e.schedule(n,0,r):n)}function n1(){return kn((i,e)=>{let t=null;i._refCount++;const n=In(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class oN extends yn{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ey(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Zt;const t=this.getSubject();e.add(this.source.subscribe(In(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Zt.EMPTY)}return e}refCount(){return n1()(this)}}function Ts(i,e){return kn((t,n)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&n.complete();t.subscribe(In(n,l=>{r?.unsubscribe();let c=0;const d=s++;mr(i(l,d)).subscribe(r=In(n,f=>n.next(e?e(l,f,d,c++):f),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Si(i){return i<=0?()=>Bs:kn((e,t)=>{let n=0;e.subscribe(In(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function hs(...i){const e=qu(i);return kn((t,n)=>{(e?ev(i,t,e):ev(i,t)).subscribe(n)})}function Dn(i,e){return kn((t,n)=>{let r=0;t.subscribe(In(n,s=>i.call(e,s,r++)&&n.next(s)))})}function Qx(i){return kn((e,t)=>{let n=!1;e.subscribe(In(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function aN(i=oj){return kn((e,t)=>{let n=!1;e.subscribe(In(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function oj(){return new Q_}function yu(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Dn((r,s)=>i(r,s,n)):Ea,Si(1),t?Qx(e):aN(()=>new Q_))}function bu(i,e){return Ht(e)?$i(i,e,1):$i(i,1)}function Hi(i,e,t){const n=Ht(i)||e||t?{next:i,error:e,complete:t}:i;return n?kn((r,s)=>{var o;null===(o=n.subscribe)||void 0===o||o.call(n);let a=!0;r.subscribe(In(s,l=>{var c;null===(c=n.next)||void 0===c||c.call(n,l),s.next(l)},()=>{var l;a=!1,null===(l=n.complete)||void 0===l||l.call(n),s.complete()},l=>{var c;a=!1,null===(c=n.error)||void 0===c||c.call(n,l),s.error(l)},()=>{var l,c;a&&(null===(l=n.unsubscribe)||void 0===l||l.call(n)),null===(c=n.finalize)||void 0===c||c.call(n)}))}):Ea}function vc(i){return kn((e,t)=>{let s,n=null,r=!1;n=e.subscribe(In(t,void 0,void 0,o=>{s=mr(i(o,vc(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function aj(i,e,t,n,r){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(In(o,d=>{const f=c++;l=a?i(l,d,f):(a=!0,d),n&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function lN(i,e){return kn(aj(i,e,arguments.length>=2,!0))}function r1(i){return i<=0?()=>Bs:kn((e,t)=>{let n=[];e.subscribe(In(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function cN(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Dn((r,s)=>i(r,s,n)):Ea,r1(1),t?Qx(e):aN(()=>new Q_))}function uN(i,e=!1){return kn((t,n)=>{let r=0;t.subscribe(In(n,s=>{const o=i(s,r++);(o||e)&&n.next(s),!o&&n.complete()}))})}function dN(i){return Je(()=>i)}function Fd(i){return kn((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const an="primary";class lj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function vp(i){return new lj(i)}function cj(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const o=n[s],a=i[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function Sl(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!hN(i[r],e[r]))return!1;return!0}function hN(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function fN(i){return Array.prototype.concat.apply([],i)}function pN(i){return i.length>0?i[i.length-1]:null}function Zr(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function yc(i){return XD(i)?i:F_(i)?Ei(Promise.resolve(i)):tt(i)}const hj={exact:function _N(i,e,t){if(!Bd(i.segments,e.segments)||!ew(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!_N(i.children[n],e.children[n],t))return!1;return!0},subset:vN},mN={exact:function fj(i,e){return Sl(i,e)},subset:function pj(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>hN(i[t],e[t]))},ignored:()=>!0};function gN(i,e,t){return hj[t.paths](i.root,e.root,t.matrixParams)&&mN[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function vN(i,e,t){return yN(i,e,e.segments,t)}function yN(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!Bd(r,t)||e.hasChildren()||!ew(r,t,n))}if(i.segments.length===t.length){if(!Bd(i.segments,t)||!ew(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!vN(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(Bd(i.segments,r)&&ew(i.segments,r,n)&&i.children[an])&&yN(i.children[an],e,s,n)}}function ew(i,e,t){return e.every((n,r)=>mN[t](i[r].parameters,n.parameters))}class Nd{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vp(this.queryParams)),this._queryParamMap}toString(){return _j.serialize(this)}}class dn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Zr(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tw(this)}}class nv{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=vp(this.parameters)),this._parameterMap}toString(){return MN(this)}}function Bd(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let bN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return new o1},providedIn:"root"}),i})();class o1{parse(e){const t=new Ej(e);return new Nd(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${iv(e.root,!0)}`,n=function bj(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${nw(t)}=${nw(r)}`).join("&"):`${nw(t)}=${nw(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function vj(i){return encodeURI(i)}(e.fragment)}`:""}`}}const _j=new o1;function tw(i){return i.segments.map(e=>MN(e)).join("/")}function iv(i,e){if(!i.hasChildren())return tw(i);if(e){const t=i.children[an]?iv(i.children[an],!1):"",n=[];return Zr(i.children,(r,s)=>{s!==an&&n.push(`${s}:${iv(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function gj(i,e){let t=[];return Zr(i.children,(n,r)=>{r===an&&(t=t.concat(e(n,r)))}),Zr(i.children,(n,r)=>{r!==an&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===an?[iv(i.children[an],!1)]:[`${r}:${iv(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[an]?`${tw(i)}/${t[0]}`:`${tw(i)}/(${t.join("//")})`}}function xN(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nw(i){return xN(i).replace(/%3B/gi,";")}function a1(i){return xN(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function iw(i){return decodeURIComponent(i)}function wN(i){return iw(i.replace(/\+/g,"%20"))}function MN(i){return`${a1(i.path)}${function yj(i){return Object.keys(i).map(e=>`;${a1(e)}=${a1(i[e])}`).join("")}(i.parameters)}`}const xj=/^[^\/()?;=#]+/;function rw(i){const e=i.match(xj);return e?e[0]:""}const wj=/^[^=?&#]+/,Cj=/^[^&#]+/;class Ej{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[an]=new dn(e,t)),n}parseSegment(){const e=rw(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new _e(4009,!1);return this.capture(e),new nv(iw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rw(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=rw(this.remaining);r&&(n=r,this.capture(n))}e[iw(t)]=iw(n)}parseQueryParam(e){const t=function Mj(i){const e=i.match(wj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const o=function Sj(i){const e=i.match(Cj);return e?e[0]:""}(this.remaining);o&&(n=o,this.capture(n))}const r=wN(t),s=wN(n);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=rw(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new _e(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=an);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[an]:new dn([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new _e(4011,!1)}}function l1(i){return i.segments.length>0?new dn([],{[an]:i}):i}function sw(i){const e={};for(const n of Object.keys(i.children)){const s=sw(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function Dj(i){if(1===i.numberOfChildren&&i.children[an]){const e=i.children[an];return new dn(i.segments.concat(e.segments),e.children)}return i}(new dn(i.segments,e))}function Ud(i){return i instanceof Nd}function Ij(i,e,t,n,r){if(0===t.length)return yp(e.root,e.root,e.root,n,r);const s=function EN(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new SN(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Zr(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new SN(t,e,n)}(t);return s.toRoot()?yp(e.root,e.root,new dn([],{}),n,r):function o(l){const c=function Pj(i,e,t,n){if(i.isAbsolute)return new bp(e.root,!0,0);if(-1===n)return new bp(t,t===e.root,0);return function DN(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new _e(4005,!1);r=n.segments.length}return new bp(n,!1,r-s)}(t,n+(rv(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,l),d=c.processChildren?ov(c.segmentGroup,c.index,s.commands):u1(c.segmentGroup,c.index,s.commands);return yp(e.root,c.segmentGroup,d,n,r)}(i.snapshot?._lastPathIndex)}function rv(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function sv(i){return"object"==typeof i&&null!=i&&i.outlets}function yp(i,e,t,n,r){let o,s={};n&&Zr(n,(l,c)=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`}),o=i===e?t:CN(i,e,t);const a=l1(sw(o));return new Nd(a,s,r)}function CN(i,e,t){const n={};return Zr(i.children,(r,s)=>{n[s]=r===e?t:CN(r,e,t)}),new dn(i.segments,n)}class SN{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&rv(n[0]))throw new _e(4003,!1);const r=n.find(sv);if(r&&r!==pN(n))throw new _e(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bp{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function u1(i,e,t){if(i||(i=new dn([],{})),0===i.segments.length&&i.hasChildren())return ov(i,e,t);const n=function Oj(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const o=i.segments[r],a=t[n];if(sv(a))break;const l=`${a}`,c=n<t.length-1?t[n+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!TN(l,c,o))return s;n+=2}else{if(!TN(l,{},o))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new dn(i.segments.slice(0,n.pathIndex),{});return s.children[an]=new dn(i.segments.slice(n.pathIndex),i.children),ov(s,0,r)}return n.match&&0===r.length?new dn(i.segments,{}):n.match&&!i.hasChildren()?d1(i,e,t):n.match?ov(i,0,r):d1(i,e,t)}function ov(i,e,t){if(0===t.length)return new dn(i.segments,{});{const n=function kj(i){return sv(i[0])?i[0].outlets:{[an]:i}}(t),r={};return Zr(n,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=u1(i.children[o],e,s))}),Zr(i.children,(s,o)=>{void 0===n[o]&&(r[o]=s)}),new dn(i.segments,r)}}function d1(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(sv(s)){const l=Lj(s.outlets);return new dn(n,l)}if(0===r&&rv(t[0])){n.push(new nv(i.segments[e].path,AN(t[0]))),r++;continue}const o=sv(s)?s.outlets[an]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&rv(a)?(n.push(new nv(o,AN(a))),r+=2):(n.push(new nv(o,{})),r++)}return new dn(n,{})}function Lj(i){const e={};return Zr(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=d1(new dn([],{}),0,t))}),e}function AN(i){const e={};return Zr(i,(t,n)=>e[n]=`${t}`),e}function TN(i,e,t){return i==t.path&&Sl(e,t.parameters)}class bc{constructor(e,t){this.id=e,this.url=t}}class h1 extends bc{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Vd extends bc{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ow extends bc{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class IN extends bc{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Fj extends bc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Nj extends bc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bj extends bc{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uj extends bc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Vj extends bc{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class zj{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Hj{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Gj{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wj{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $j{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jj{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RN{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class PN{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=f1(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=f1(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=p1(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return p1(e,this._root).map(t=>t.value)}}function f1(i,e){if(i===e.value)return e;for(const t of e.children){const n=f1(i,t);if(n)return n}return null}function p1(i,e){if(i===e.value)return[e];for(const t of e.children){const n=p1(i,t);if(n.length)return n.unshift(e),n}return[]}class xc{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xp(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class kN extends PN{constructor(e,t){super(e),this.snapshot=t,m1(this,e)}toString(){return this.snapshot.toString()}}function ON(i,e){const t=function Xj(i,e){const o=new aw([],{},{},"",{},an,e,null,i.root,-1,{});return new FN("",new xc(o,[]))}(i,e),n=new wn([new nv("",{})]),r=new wn({}),s=new wn({}),o=new wn({}),a=new wn(""),l=new wp(n,r,o,a,s,an,e,t.root);return l.snapshot=t.root,new kN(new xc(l,[]),t)}class wp{constructor(e,t,n,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Je(e=>vp(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Je(e=>vp(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function LN(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function Yj(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class aw{constructor(e,t,n,r,s,o,a,l,c,d,f,p){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=d,this._correctedLastPathIndex=p??d,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=vp(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=vp(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class FN extends PN{constructor(e,t){super(t),this.url=e,m1(this,t)}toString(){return NN(this._root)}}function m1(i,e){e.value._routerState=i,e.children.forEach(t=>m1(i,t))}function NN(i){const e=i.children.length>0?` { ${i.children.map(NN).join(", ")} } `:"";return`${i.value}${e}`}function g1(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,Sl(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),Sl(e.params,t.params)||i.params.next(t.params),function uj(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!Sl(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),Sl(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function _1(i,e){const t=Sl(i.params,e.params)&&function mj(i,e){return Bd(i,e)&&i.every((t,n)=>Sl(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||_1(i.parent,e.parent))}function av(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function Kj(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return av(i,n,r);return av(i,n)})}(i,e,t);return new xc(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>av(i,a)),o}}const n=function Jj(i){return new wp(new wn(i.url),new wn(i.params),new wn(i.queryParams),new wn(i.fragment),new wn(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>av(i,s));return new xc(n,r)}}const v1="ngNavigationCancelingError";function BN(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=Ud(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=UN(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function UN(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[v1]=!0,n.cancellationCode=e,t&&(n.url=t),n}function VN(i){return zN(i)&&Ud(i.url)}function zN(i){return i&&i[v1]}class Qj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new lv,this.attachRef=null}}let lv=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Qj,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lw=!1;let HN=(()=>{class i{constructor(t,n,r,s,o){this.parentContexts=t,this.location=n,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.name=r||an,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new _e(4012,lw);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new _e(4012,lw);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new _e(4012,lw);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new _e(4013,lw);this._activatedRoute=t;const r=this.location,o=t._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new e9(t,a,r.injector);if(n&&function t9(i){return!!i.resolveComponentFactory}(n)){const c=n.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)(R(lv),R(Yr),Oa("name"),R(Qn),R(pl))},i.\u0275dir=Le({type:i,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),i})();class e9{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===wp?this.route:e===lv?this.childContexts:this.parent.get(e,t)}}let GN=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,n){1&t&&bt(0,"router-outlet")},dependencies:[HN],encapsulation:2}),i})();function WN(i,e){return i.providers&&!i._injector&&(i._injector=Sx(i.providers,e,`Route: ${i.path}`)),i._injector??e}function b1(i){const e=i.children&&i.children.map(b1),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==an&&(t.component=GN),t}function da(i){return i.outlet||an}function $N(i,e){const t=i.filter(n=>da(n)===e);return t.push(...i.filter(n=>da(n)!==e)),t}function jN(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class o9{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),g1(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=xp(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],n),delete r[o]}),Zr(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=xp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(n&&n.outlet){const o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=xp(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=xp(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new jj(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Wj(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(g1(r),r===s)if(r.component){const o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const o=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),g1(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=jN(r.snapshot),l=a?.get(ac)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,n)}}class qN{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class cw{constructor(e,t){this.component=e,this.route=t}}function a9(i,e,t){const n=i._root;return cv(n,e?e._root:null,t,[n.value])}function uw(i,e,t){return(jN(e)??t).get(i)}function cv(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=xp(e);return i.children.forEach(o=>{(function c9(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,a=t?t.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function u9(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Bd(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Bd(i.url,e.url)||!Sl(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!_1(i,e)||!Sl(i.queryParams,e.queryParams);default:return!_1(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new qN(n)):(s.data=o.data,s._resolvedData=o._resolvedData),cv(i,e,s.component?a?a.children:null:t,n,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new cw(a.outlet.component,o))}else o&&uv(e,a,r),r.canActivateChecks.push(new qN(n)),cv(i,null,s.component?a?a.children:null:t,n,r)})(o,s[o.value.outlet],t,n.concat([o.value]),r),delete s[o.value.outlet]}),Zr(s,(o,a)=>uv(o,t.getContext(a),r)),r}function uv(i,e,t){const n=xp(i),r=i.value;Zr(n,(s,o)=>{uv(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new cw(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function dv(i){return"function"==typeof i}function x1(i){return i instanceof Q_||"EmptyError"===i?.name}const dw=Symbol("INITIAL_VALUE");function Mp(){return Ts(i=>gp(i.map(e=>e.pipe(Si(1),hs(dw)))).pipe(Je(e=>{for(const t of e)if(!0!==t){if(t===dw)return dw;if(!1===t||t instanceof Nd)return t}return!0}),Dn(e=>e!==dw),Si(1)))}function XN(i){return function YC(...i){return Cy(i)}(Hi(e=>{if(Ud(e))throw BN(0,e)}),Je(e=>!0===e))}const w1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function YN(i,e,t,n,r){const s=M1(i,e,t);return s.matched?function D9(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?tt(r.map(o=>{const a=i.get(o),l=function g9(i){return i&&dv(i.canMatch)}(a)?a.canMatch(e,t):a(e,t);return yc(l)})).pipe(Mp(),XN()):tt(!0)}(n=WN(e,n),e,t).pipe(Je(o=>!0===o?s:{...w1})):tt(s)}function M1(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...w1}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||cj)(t,i,e);if(!r)return{...w1};const s={};Zr(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function hw(i,e,t,n,r="corrected"){if(t.length>0&&function I9(i,e,t){return t.some(n=>fw(i,e,n)&&da(n)!==an)}(i,t,n)){const o=new dn(e,function T9(i,e,t,n){const r={};r[an]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&da(s)!==an){const o=new dn([],{});o._sourceSegment=i,o._segmentIndexShift=e.length,r[da(s)]=o}return r}(i,e,n,new dn(t,i.children)));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===t.length&&function R9(i,e,t){return t.some(n=>fw(i,e,n))}(i,t,n)){const o=new dn(i.segments,function A9(i,e,t,n,r,s){const o={};for(const a of n)if(fw(i,t,a)&&!r[da(a)]){const l=new dn([],{});l._sourceSegment=i,l._segmentIndexShift="legacy"===s?i.segments.length:e.length,o[da(a)]=l}return{...r,...o}}(i,e,t,n,i.children,r));return o._sourceSegment=i,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}const s=new dn(i.segments,i.children);return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function fw(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function ZN(i,e,t,n){return!!(da(i)===n||n!==an&&fw(e,t,i))&&("**"===i.path||M1(e,i,t).matched)}function KN(i,e,t){return 0===e.length&&!i.children[t]}const pw=!1;class mw{constructor(e){this.segmentGroup=e||null}}class JN{constructor(e){this.urlTree=e}}function hv(i){return _p(new mw(i))}function QN(i){return _p(new JN(i))}class L9{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=hw(this.urlTree.root,[],[],this.config).segmentGroup,t=new dn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,an).pipe(Je(s=>this.createUrlTree(sw(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(vc(s=>{if(s instanceof JN)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof mw?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,an).pipe(Je(r=>this.createUrlTree(sw(r),e.queryParams,e.fragment))).pipe(vc(r=>{throw r instanceof mw?this.noMatchError(r):r}))}noMatchError(e){return new _e(4002,pw)}createUrlTree(e,t,n){const r=l1(e);return new Nd(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(Je(s=>new dn([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return Ei(r).pipe(bu(s=>{const o=n.children[s],a=$N(t,s);return this.expandSegmentGroup(e,a,o,s).pipe(Je(l=>({segment:l,outlet:s})))}),lN((s,o)=>(s[o.outlet]=o.segment,s),{}),cN())}expandSegment(e,t,n,r,s,o){return Ei(n).pipe(bu(a=>this.expandSegmentAgainstRoute(e,t,n,a,r,s,o).pipe(vc(c=>{if(c instanceof mw)return tt(null);throw c}))),yu(a=>!!a),vc((a,l)=>{if(x1(a))return KN(t,r,s)?tt(new dn([],{})):hv(t);throw a}))}expandSegmentAgainstRoute(e,t,n,r,s,o,a){return ZN(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o):hv(t):hv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?QN(s):this.lineralizeSegments(n,s).pipe($i(o=>{const a=new dn(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:d}=M1(t,r,s);if(!a)return hv(t);const f=this.applyRedirectCommands(l,r.redirectTo,d);return r.redirectTo.startsWith("/")?QN(f):this.lineralizeSegments(r,f).pipe($i(p=>this.expandSegment(e,t,n,p.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=WN(n,e),n.loadChildren?(n._loadedRoutes?tt({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(Je(a=>(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,new dn(r,{})))):tt(new dn(r,{}))):YN(t,n,r,e).pipe(Ts(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=n._injector??e,n,r).pipe($i(d=>{const f=d.injector??e,p=d.routes,{segmentGroup:m,slicedSegments:_}=hw(t,a,l,p),b=new dn(m.segments,m.children);if(0===_.length&&b.hasChildren())return this.expandChildren(f,p,b).pipe(Je(w=>new dn(a,w)));if(0===p.length&&0===_.length)return tt(new dn(a,{}));const y=da(n)===s;return this.expandSegment(f,b,p,_,y?an:s,!0).pipe(Je(M=>new dn(a.concat(M.segments),M.children)))})):hv(t)))}getChildConfig(e,t,n){return t.children?tt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?tt({routes:t._loadedRoutes,injector:t._loadedInjector}):function E9(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?tt(!0):tt(r.map(o=>{const a=i.get(o),l=function h9(i){return i&&dv(i.canLoad)}(a)?a.canLoad(e,t):a(e,t);return yc(l)})).pipe(Mp(),XN())}(e,t,n).pipe($i(r=>r?this.configLoader.loadChildren(e,t).pipe(Hi(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function k9(i){return _p(UN(pw,3))}())):tt({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return tt(n);if(r.numberOfChildren>1||!r.children[an])return _p(new _e(4e3,pw));r=r.children[an]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new Nd(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Zr(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);n[s]=t[a]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let o={};return Zr(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,n,r)}),new dn(s,o)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new _e(4001,pw);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class N9{}class V9{constructor(e,t,n,r,s,o,a,l){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a,this.urlSerializer=l}recognize(){const e=hw(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,an).pipe(Je(t=>{if(null===t)return null;const n=new aw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new xc(n,t),s=new FN(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=LN(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return Ei(Object.keys(n.children)).pipe(bu(r=>{const s=n.children[r],o=$N(t,r);return this.processSegmentGroup(e,o,s,r)}),lN((r,s)=>r&&s?(r.push(...s),r):null),uN(r=>null!==r),Qx(null),cN(),Je(r=>{if(null===r)return null;const s=e2(r);return function z9(i){i.sort((e,t)=>e.value.outlet===an?-1:t.value.outlet===an?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return Ei(t).pipe(bu(o=>this.processSegmentAgainstRoute(o._injector??e,o,n,r,s)),yu(o=>!!o),vc(o=>{if(x1(o))return KN(n,r,s)?tt([]):tt(null);throw o}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!ZN(t,n,r,s))return tt(null);let o;if("**"===t.path){const a=r.length>0?pN(r).parameters:{},l=n2(n)+r.length;o=tt({snapshot:new aw(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s2(t),da(t),t.component??t._loadedComponent??null,t,t2(n),l,o2(t),l),consumedSegments:[],remainingSegments:[]})}else o=YN(n,t,r,e).pipe(Je(({matched:a,consumedSegments:l,remainingSegments:c,parameters:d})=>{if(!a)return null;const f=n2(n)+l.length;return{snapshot:new aw(l,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,s2(t),da(t),t.component??t._loadedComponent??null,t,t2(n),f,o2(t),f),consumedSegments:l,remainingSegments:c}}));return o.pipe(Ts(a=>{if(null===a)return tt(null);const{snapshot:l,consumedSegments:c,remainingSegments:d}=a;e=t._injector??e;const f=t._loadedInjector??e,p=function H9(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:m,slicedSegments:_}=hw(n,c,d,p.filter(y=>void 0===y.redirectTo),this.relativeLinkResolution);if(0===_.length&&m.hasChildren())return this.processChildren(f,p,m).pipe(Je(y=>null===y?null:[new xc(l,y)]));if(0===p.length&&0===_.length)return tt([new xc(l,[])]);const b=da(t)===s;return this.processSegment(f,p,m,_,b?an:s).pipe(Je(y=>null===y?null:[new xc(l,y)]))}))}}function G9(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function e2(i){const e=[],t=new Set;for(const n of i){if(!G9(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=e2(n.children);e.push(new xc(n.value,r))}return e.filter(n=>!t.has(n))}function t2(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function n2(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function s2(i){return i.data||{}}function o2(i){return i.resolve||{}}const C1=Symbol("RouteTitle");function a2(i){return"string"==typeof i.title||null===i.title}function S1(i){return Ts(e=>{const t=i(e);return t?Ei(t).pipe(Je(()=>e)):tt(e)})}let l2=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===an);return n}getResolvedTitleForRoute(t){return t.data[C1]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:function(){return Hn(c2)},providedIn:"root"}),i})(),c2=(()=>{class i extends l2{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(j(QF))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class K9{}class Q9 extends class J9{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const E1=new Se("",{providedIn:"root",factory:()=>({})}),D1=new Se("ROUTES");let A1=(()=>{class i{constructor(t,n){this.injector=t,this.compiler=n,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return tt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=yc(t.loadComponent()).pipe(Hi(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Fd(()=>{this.componentLoaders.delete(t)})),r=new oN(n,()=>new He).pipe(n1());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return tt({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(Je(a=>{this.onLoadEndListener&&this.onLoadEndListener(n);let l,c,d=!1;Array.isArray(a)?c=a:(l=a.create(t).injector,c=fN(l.get(D1,[],mt.Self|mt.Optional)));return{routes:c.map(b1),injector:l}}),Fd(()=>{this.childrenLoaders.delete(n)})),o=new oN(s,()=>new He).pipe(n1());return this.childrenLoaders.set(n,o),o}loadModuleFactoryOrRoutes(t){return yc(t()).pipe($i(n=>n instanceof KO||Array.isArray(n)?tt(n):Ei(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)(j(mi),j(bA))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class t7{}class n7{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function i7(i){throw i}function r7(i,e,t){return e.parse("/")}const s7={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},o7={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function d2(){const i=Hn(bN),e=Hn(lv),t=Hn(q_),n=Hn(mi),r=Hn(bA),s=Hn(D1,{optional:!0})??[],o=Hn(E1,{optional:!0})??{},a=Hn(c2),l=Hn(l2,{optional:!0}),c=Hn(t7,{optional:!0}),d=Hn(K9,{optional:!0}),f=new Is(null,i,e,t,n,r,fN(s));return c&&(f.urlHandlingStrategy=c),d&&(f.routeReuseStrategy=d),f.titleStrategy=l??a,function a7(i,e){i.errorHandler&&(e.errorHandler=i.errorHandler),i.malformedUriErrorHandler&&(e.malformedUriErrorHandler=i.malformedUriErrorHandler),i.onSameUrlNavigation&&(e.onSameUrlNavigation=i.onSameUrlNavigation),i.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=i.paramsInheritanceStrategy),i.relativeLinkResolution&&(e.relativeLinkResolution=i.relativeLinkResolution),i.urlUpdateStrategy&&(e.urlUpdateStrategy=i.urlUpdateStrategy),i.canceledNavigationResolution&&(e.canceledNavigationResolution=i.canceledNavigationResolution)}(o,f),f}let Is=(()=>{class i{constructor(t,n,r,s,o,a,l){this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new He,this.errorHandler=i7,this.malformedUriErrorHandler=r7,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>tt(void 0),this.urlHandlingStrategy=new n7,this.routeReuseStrategy=new Q9,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(A1),this.configLoader.onLoadEndListener=p=>this.triggerEvent(new Hj(p)),this.configLoader.onLoadStartListener=p=>this.triggerEvent(new zj(p)),this.ngModule=o.get(Pd),this.console=o.get(h8);const f=o.get(Et);this.isNgZoneEnabled=f instanceof Et&&Et.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function dj(){return new Nd(new dn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ON(this.currentUrlTree,this.rootComponentType),this.transitions=new wn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const n=this.events;return t.pipe(Dn(r=>0!==r.id),Je(r=>({...r,extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Ts(r=>{let s=!1,o=!1;return tt(r).pipe(Hi(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Ts(a=>{const l=this.browserUrlTree.toString(),c=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||c)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return h2(a.source)&&(this.browserUrlTree=a.extractedUrl),tt(a).pipe(Ts(f=>{const p=this.transitions.getValue();return n.next(new h1(f.id,this.serializeUrl(f.extractedUrl),f.source,f.restoredState)),p!==this.transitions.getValue()?Bs:Promise.resolve(f)}),function F9(i,e,t,n){return Ts(r=>function O9(i,e,t,n,r){return new L9(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(Je(s=>({...r,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Hi(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},r.urlAfterRedirects=f.urlAfterRedirects}),function $9(i,e,t,n,r,s){return $i(o=>function U9(i,e,t,n,r,s,o="emptyOnly",a="legacy"){return new V9(i,e,t,n,r,o,a,s).recognize().pipe(Ts(l=>null===l?function B9(i){return new yn(e=>e.error(i))}(new N9):tt(l)))}(i,e,t,o.urlAfterRedirects,n.serialize(o.urlAfterRedirects),n,r,s).pipe(Je(a=>({...o,targetSnapshot:a}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Hi(f=>{if(r.targetSnapshot=f.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!f.extras.skipLocationChange){const m=this.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);this.setBrowserUrl(m,f)}this.browserUrlTree=f.urlAfterRedirects}const p=new Fj(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);n.next(p)}));if(c&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:p,extractedUrl:m,source:_,restoredState:b,extras:y}=a,v=new h1(p,this.serializeUrl(m),_,b);n.next(v);const M=ON(m,this.rootComponentType).snapshot;return tt(r={...a,targetSnapshot:M,urlAfterRedirects:m,extras:{...y,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),Bs}),Hi(a=>{const l=new Nj(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),Je(a=>r={...a,guards:a9(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function v9(i,e){return $i(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?tt({...t,guardsResult:!0}):function y9(i,e,t,n){return Ei(i).pipe($i(r=>function S9(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?tt(s.map(a=>{const l=uw(a,e,r);return yc(function m9(i){return i&&dv(i.canDeactivate)}(l)?l.canDeactivate(i,e,t,n):l(i,e,t,n)).pipe(yu())})).pipe(Mp()):tt(!0)}(r.component,r.route,t,e,n)),yu(r=>!0!==r,!0))}(o,n,r,i).pipe($i(a=>a&&function d9(i){return"boolean"==typeof i}(a)?function b9(i,e,t,n){return Ei(e).pipe(bu(r=>ev(function w9(i,e){return null!==i&&e&&e(new Gj(i)),tt(!0)}(r.route.parent,n),function x9(i,e){return null!==i&&e&&e(new $j(i)),tt(!0)}(r.route,n),function C9(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function l9(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>tv(()=>tt(o.guards.map(l=>{const c=uw(l,o.node,t);return yc(function p9(i){return i&&dv(i.canActivateChild)}(c)?c.canActivateChild(n,i):c(n,i)).pipe(yu())})).pipe(Mp())));return tt(s).pipe(Mp())}(i,r.path,t),function M9(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return tt(!0);const r=n.map(s=>tv(()=>{const o=uw(s,e,t);return yc(function f9(i){return i&&dv(i.canActivate)}(o)?o.canActivate(e,i):o(e,i)).pipe(yu())}));return tt(r).pipe(Mp())}(i,r.route,t))),yu(r=>!0!==r,!0))}(n,s,i,e):tt(a)),Je(a=>({...t,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),Hi(a=>{if(r.guardsResult=a.guardsResult,Ud(a.guardsResult))throw BN(0,a.guardsResult);const l=new Bj(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Dn(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),S1(a=>{if(a.guards.canActivateChecks.length)return tt(a).pipe(Hi(l=>{const c=new Uj(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}),Ts(l=>{let c=!1;return tt(l).pipe(function j9(i,e){return $i(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return tt(t);let s=0;return Ei(r).pipe(bu(o=>function q9(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!a2(r)&&(s[C1]=r.title),function X9(i,e,t,n){const r=function Y9(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return tt({});const s={};return Ei(r).pipe($i(o=>function Z9(i,e,t,n){const r=uw(i,e,n);return yc(r.resolve?r.resolve(e,t):r(e,t))}(i[o],e,t,n).pipe(yu(),Hi(a=>{s[o]=a}))),r1(1),dN(s),vc(o=>x1(o)?Bs:_p(o)))}(s,i,e,n).pipe(Je(o=>(i._resolvedData=o,i.data=LN(i,t).resolve,r&&a2(r)&&(i.data[C1]=r.title),null)))}(o.route,n,i,e)),Hi(()=>s++),r1(1),$i(o=>s===r.length?tt(t):Bs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Hi({next:()=>c=!0,complete:()=>{c||(this.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Hi(l=>{const c=new Vj(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(c)}))}),S1(a=>{const l=c=>{const d=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(c.routeConfig).pipe(Hi(f=>{c.component=f}),Je(()=>{})));for(const f of c.children)d.push(...l(f));return d};return gp(l(a.targetSnapshot.root)).pipe(Qx(),Si(1))}),S1(()=>this.afterPreactivation()),Je(a=>{const l=function Zj(i,e,t){const n=av(i,e._root,t?t._root:void 0);return new kN(n,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return r={...a,targetRouterState:l}}),Hi(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((i,e,t)=>Je(n=>(new o9(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),Hi({next(){s=!0},complete(){s=!0}}),Fd(()=>{s||o||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),vc(a=>{if(o=!0,zN(a)){VN(a)||(this.navigated=!0,this.restoreHistory(r,!0));const l=new ow(r.id,this.serializeUrl(r.extractedUrl),a.message,a.cancellationCode);if(n.next(l),VN(a)){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||h2(r.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{this.restoreHistory(r,!0);const l=new IN(r.id,this.serializeUrl(r.extractedUrl),a,r.targetSnapshot??void 0);n.next(l);try{r.resolve(this.errorHandler(a))}catch(c){r.reject(c)}}return Bs}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,n,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(b1),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=r||this.routerState.root,d=l?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),Ij(c,this.currentUrlTree,t,f,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=Ud(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,n)}navigate(t,n={skipLocationChange:!1}){return function l7(i){for(let e=0;e<i.length;e++){if(null==i[e])throw new _e(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...s7}:!1===n?{...o7}:n,Ud(t))return gN(this.currentUrlTree,t,r);const s=this.parseUrl(t);return gN(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Vd(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,n,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((p,m)=>{a=p,l=m});const d=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.setTransition({id:d,targetPageId:f,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t),s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===r?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,n,r){const s=new ow(t.id,this.serializeUrl(t.extractedUrl),n,r);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){dc()},i.\u0275prov=Pe({token:i,factory:function(){return d2()},providedIn:"root"}),i})();function h2(i){return"imperative"!==i}class f2{}let p2=(()=>{class i{constructor(t,n,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Dn(t=>t instanceof Vd),bu(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=Sx(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return Ei(r).pipe(Hc())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):tt(null);const s=r.pipe($i(o=>null===o?tt(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return n.loadComponent&&!n._loadedComponent?Ei([s,this.loader.loadComponent(n)]).pipe(Hc()):s})}}return i.\u0275fac=function(t){return new(t||i)(j(Is),j(bA),j(pl),j(f2),j(A1))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const m2=new Se("");let d7=(()=>{class i{constructor(t,n,r={}){this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof h1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vd&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof RN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.router.triggerEvent(new RN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return i.\u0275fac=function(t){dc()},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const g2=new Se("ROUTER_FORROOT_GUARD"),_2=new Se(""),h7=[q_,{provide:bN,useClass:o1},{provide:Is,useFactory:d2},lv,{provide:wp,useFactory:function f7(i){return i.routerState.root},deps:[Is]},A1];function p7(){return new $L("Router",Is)}let v2=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[h7,[],y2(t),{provide:g2,useFactory:v7,deps:[[Is,new wo,new hl]]},{provide:E1,useValue:n||{}},n?.useHash?{provide:Ld,useClass:t6}:{provide:Ld,useClass:mF},{provide:m2,useFactory:()=>{const i=Hn(Is),e=Hn(p$),t=Hn(E1);return t.scrollOffset&&e.setOffset(t.scrollOffset),new d7(i,e,t)}},n?.preloadingStrategy?S7(n.preloadingStrategy):[],{provide:$L,multi:!0,useFactory:p7},n?.initialNavigation?b7(n):[],[{provide:b2,useFactory:y7},{provide:BL,multi:!0,useExisting:b2}]]}}static forChild(t){return{ngModule:i,providers:[y2(t)]}}}return i.\u0275fac=function(t){return new(t||i)(j(g2,8))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();function v7(i){return"guarded"}function y2(i){return[{provide:D1,multi:!0,useValue:i}]}function y7(){const i=Hn(mi);return e=>{const t=i.get(kd);if(e!==t.components[0])return;const n=i.get(Is),r=i.get(x2);1===i.get(R1)&&n.initialNavigation(),i.get(_2,null,mt.Optional)?.setUpPreloading(),i.get(m2,null,mt.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.next(),r.complete()}}const b2=new Se("");function b7(i){return["disabled"===i.initialNavigation?[{provide:Ix,multi:!0,useFactory:()=>{const i=Hn(Is);return()=>{i.setUpLocationChangeListener()}}},{provide:R1,useValue:2}]:[],"enabledBlocking"===i.initialNavigation?[{provide:R1,useValue:0},{provide:Ix,multi:!0,deps:[mi],useFactory:i=>{const e=i.get(Q8,Promise.resolve(null));let t=!1;return()=>e.then(()=>new Promise(r=>{const s=i.get(Is),o=i.get(x2);(function n(r){i.get(Is).events.pipe(Dn(o=>o instanceof Vd||o instanceof ow||o instanceof IN),Je(o=>o instanceof Vd||o instanceof ow&&(0===o.code||1===o.code)&&null),Dn(o=>null!==o),Si(1)).subscribe(()=>{r()})})(()=>{r(!0),t=!0}),s.afterPreactivation=()=>(r(!0),t||o.closed?tt(void 0):o),s.initialNavigation()}))}}]:[]]}const x2=new Se("",{factory:()=>new He}),R1=new Se("",{providedIn:"root",factory:()=>1});function S7(i){return[p2,{provide:_2,useExisting:p2},{provide:f2,useExisting:i}]}const E7=[];let P1,D7=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[v2.forRoot(E7),v2]}),i})();function w2(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(c){return void t(c)}a.done?e(l):Promise.resolve(l).then(n,r)}function ei(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){w2(s,n,r,o,a,"next",l)}function a(l){w2(s,n,r,o,a,"throw",l)}o(void 0)})}}try{P1=typeof Intl<"u"&&Intl.v8BreakIterator}catch{P1=!1}let Cp,wr=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function f$(i){return i===LF}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!P1)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(j(yA))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const M2=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function C2(){if(Cp)return Cp;if("object"!=typeof document||!document)return Cp=new Set(M2),Cp;let i=document.createElement("input");return Cp=new Set(M2.filter(e=>(i.setAttribute("type",e),i.type===e))),Cp}let fv,zd,k1;function Sp(i){return function A7(){if(null==fv&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>fv=!0}))}finally{fv=fv||!1}return fv}()?i:!!i.capture}function T7(){if(null==zd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return zd=!1,zd;if("scrollBehavior"in document.documentElement.style)zd=!0;else{const i=Element.prototype.scrollTo;zd=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return zd}function S2(i){if(function I7(){if(null==k1){const i=typeof document<"u"?document.head:null;k1=!(!i||!i.createShadowRoot&&!i.attachShadow)}return k1}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function O1(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function Hd(i){return i.composedPath?i.composedPath()[0]:i.target}function L1(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function ha(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class H7 extends Zt{constructor(e,t){super()}schedule(e,t=0){return this}}const xw={setInterval(i,e,...t){const{delegate:n}=xw;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=xw;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};class N1 extends H7{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,n=0){return xw.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&xw.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Lr(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const E2={now:()=>(E2.delegate||Date).now(),delegate:void 0};class _v{constructor(e,t=_v.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}_v.now=E2.now;class B1 extends _v{constructor(e,t=_v.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const ww=new B1(N1),G7=ww;function vv(i,e=ww){return kn((t,n)=>{let r=null,s=null,o=null;const a=()=>{if(r){r.unsubscribe(),r=null;const c=s;s=null,n.next(c)}};function l(){const c=o+i,d=e.now();if(d<c)return r=this.schedule(void 0,c-d),void n.add(r);a()}t.subscribe(In(n,c=>{s=c,o=e.now(),r||(r=e.schedule(l,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{s=r=null}))})}function D2(i){return Dn((e,t)=>i<=t)}function Mw(i,e=Ea){return i=i??W7,kn((t,n)=>{let r,s=!0;t.subscribe(In(n,o=>{const a=e(o);(s||!i(r,a))&&(s=!1,r=a,n.next(o))}))})}function W7(i,e){return i===e}function at(i){return kn((e,t)=>{mr(i).subscribe(In(t,()=>t.complete(),Qr)),!t.closed&&e.subscribe(t)})}function Gn(i){return null!=i&&"false"!=`${i}`}function fa(i,e=0){return function $7(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function Cw(i){return Array.isArray(i)?i:[i]}function cr(i){return null==i?"":"string"==typeof i?i:`${i}px`}function wc(i){return i instanceof Wt?i.nativeElement:i}let A2=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),j7=(()=>{class i{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,n)=>this._cleanupObserver(n))}observe(t){const n=wc(t);return new yn(r=>{const o=this._observeElement(n).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const n=new He,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:r,stream:n,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:n,stream:r}=this._observedElements.get(t);n&&n.disconnect(),r.complete(),this._observedElements.delete(t)}}}return i.\u0275fac=function(t){return new(t||i)(j(A2))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),q7=(()=>{class i{constructor(t,n,r){this._contentObserver=t,this._elementRef=n,this._ngZone=r,this.event=new et,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=fa(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(vv(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(R(j7),R(Wt),R(Et))},i.\u0275dir=Le({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),i})(),T2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[A2]}),i})();const I2=new Set;let Ap,X7=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Z7}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Y7(i){if(!I2.has(i))try{Ap||(Ap=document.createElement("style"),Ap.setAttribute("type","text/css"),document.head.appendChild(Ap)),Ap.sheet&&(Ap.sheet.insertRule(`@media ${i} {body{ }}`,0),I2.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(j(wr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Z7(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Sw=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new He}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return R2(Cw(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=gp(R2(Cw(t)).map(o=>this._registerQuery(o).observable));return s=ev(s.pipe(Si(1)),s.pipe(D2(1),vv(0))),s.pipe(Je(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new yn(o=>{const a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(hs(n),Je(({matches:o})=>({query:t,matches:o})),at(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(j(X7),j(Et))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function R2(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Ew(i,e){return(i.getAttribute(e)||"").match(/\S+/g)||[]}const O2="cdk-describedby-message",Dw="cdk-describedby-host";let U1=0,Q7=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+U1++,this._document=t,this._id=Hn(fp)+"-"+U1++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;const s=V1(n,r);"string"!=typeof n?(L2(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){if(!n||!this._isElementNode(t))return;const s=V1(n,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof n){const o=this._messageRegistry.get(s);o&&0===o.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${Dw}="${this._id}"]`);for(let n=0;n<t.length;n++)this._removeCdkDescribedByReferenceIds(t[n]),t[n].removeAttribute(Dw);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){const r=this._document.createElement("div");L2(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(V1(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const n=Ew(t,"aria-describedby").filter(r=>0!=r.indexOf(O2));t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){const r=this._messageRegistry.get(n);(function K7(i,e,t){const n=Ew(i,e);n.some(r=>r.trim()==t.trim())||(n.push(t.trim()),i.setAttribute(e,n.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(Dw,this._id),r.referenceCount++}_removeMessageReference(t,n){const r=this._messageRegistry.get(n);r.referenceCount--,function J7(i,e,t){const r=Ew(i,e).filter(s=>s!=t.trim());r.length?i.setAttribute(e,r.join(" ")):i.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(Dw)}_isElementDescribedByMessage(t,n){const r=Ew(t,"aria-describedby"),s=this._messageRegistry.get(n),o=s&&s.messageElement.id;return!!o&&-1!=r.indexOf(o)}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(wr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function V1(i,e){return"string"==typeof i?`${e||""}/${i}`:i}function L2(i,e){i.id||(i.id=`${O2}-${e}-${U1++}`)}class F2{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new He,this._typeaheadSubscription=Zt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new He,this.change=new He,e instanceof cp&&e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Hi(t=>this._pressedLetters.push(t)),vv(e),Dn(()=>this._pressedLetters.length>0),Je(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&0===o.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;default:return void((r||ha(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof cp?this._items.toArray():this._items}}class eq extends F2{setActiveItem(e){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(e),this.activeItem&&this.activeItem.setActiveStyles()}}class N2 extends F2{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let Aw=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function nq(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function tq(i){try{return i.frameElement}catch{return null}}(function uq(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===U2(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=U2(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function lq(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function cq(i){return!function rq(i){return function oq(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function iq(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function sq(i){return function aq(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||B2(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(j(wr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function B2(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function U2(i){if(!B2(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class dq{constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Si(1)).subscribe(e)}}let z1=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new dq(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(j(Aw),j(Et),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function H1(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function G1(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const hq=new Se("cdk-input-modality-detector-options"),fq={ignoreKeys:[18,17,224,91,16]},Tp=Sp({passive:!0,capture:!0});let pq=(()=>{class i{constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new wn(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Hd(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(H1(o)?"keyboard":"mouse"),this._mostRecentTarget=Hd(o))},this._onTouchstart=o=>{G1(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Hd(o))},this._options={...fq,...s},this.modalityDetected=this._modality.pipe(D2(1)),this.modalityChanged=this.modalityDetected.pipe(Mw()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Tp),r.addEventListener("mousedown",this._onMousedown,Tp),r.addEventListener("touchstart",this._onTouchstart,Tp)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Tp),document.removeEventListener("mousedown",this._onMousedown,Tp),document.removeEventListener("touchstart",this._onTouchstart,Tp))}}return i.\u0275fac=function(t){return new(t||i)(j(wr),j(Et),j(kt),j(hq,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mq=new Se("liveAnnouncerElement",{providedIn:"root",factory:function gq(){return null}}),_q=new Se("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let W1=(()=>{class i{constructor(t,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=t||this._createLiveElement()}announce(t,...n){const r=this._defaultOptions;let s,o;return 1===n.length&&"number"==typeof n[0]?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),null==o&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,"number"==typeof o&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){const t="cdk-live-announcer-element",n=this._document.getElementsByClassName(t),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(t),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),this._document.body.appendChild(r),r}}return i.\u0275fac=function(t){return new(t||i)(j(mq,8),j(Et),j(kt),j(_q,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const vq=new Se("cdk-focus-monitor-default-options"),Tw=Sp({passive:!0,capture:!0});let Mc=(()=>{class i{constructor(t,n,r,s,o){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new He,this._rootNodeFocusAndBlurListener=a=>{for(let c=Hd(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,n=!1){const r=wc(t);if(!this._platform.isBrowser||1!==r.nodeType)return tt(null);const s=S2(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;const a={checkChildren:n,subject:new He,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const n=wc(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=wc(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=Hd(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,Tw),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,Tw)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(at(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Tw),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Tw),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(wr),j(pq),j(kt,8),j(vq,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const z2="cdk-high-contrast-black-on-white",H2="cdk-high-contrast-white-on-black",$1="cdk-high-contrast-active";let G2=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=Hn(Sw).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove($1,z2,H2),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add($1,z2):2===n&&t.add($1,H2)}}}return i.\u0275fac=function(t){return new(t||i)(j(wr),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),W2=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(j(G2))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[T2]}),i})();const yq=["addListener","removeListener"],bq=["addEventListener","removeEventListener"],xq=["on","off"];function pa(i,e,t,n){if(Ht(t)&&(n=t,t=void 0),n)return pa(i,e,t).pipe(t1(n));const[r,s]=function Cq(i){return Ht(i.addEventListener)&&Ht(i.removeEventListener)}(i)?bq.map(o=>a=>i[o](e,a,t)):function wq(i){return Ht(i.addListener)&&Ht(i.removeListener)}(i)?yq.map($2(i,e)):function Mq(i){return Ht(i.on)&&Ht(i.off)}(i)?xq.map($2(i,e)):[];if(!r&&ju(i))return $i(o=>pa(o,e,t))(mr(i));if(!r)throw new TypeError("Invalid event target");return new yn(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function $2(i,e){return t=>n=>i[t](e,n)}const yv={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=yv;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const r=e(s=>{t=void 0,i(s)});return new Zt(()=>t?.(r))},requestAnimationFrame(...i){const{delegate:e}=yv;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=yv;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},j2=new class Eq extends B1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Sq extends N1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=yv.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(yv.cancelAnimationFrame(t),e._scheduled=void 0)}});let j1,Dq=1;const Iw={};function q2(i){return i in Iw&&(delete Iw[i],!0)}const Aq={setImmediate(i){const e=Dq++;return Iw[e]=!0,j1||(j1=Promise.resolve()),j1.then(()=>q2(e)&&i()),e},clearImmediate(i){q2(i)}},{setImmediate:Tq,clearImmediate:Iq}=Aq,Rw={setImmediate(...i){const{delegate:e}=Rw;return(e?.setImmediate||Tq)(...i)},clearImmediate(i){const{delegate:e}=Rw;return(e?.clearImmediate||Iq)(i)},delegate:void 0},q1=new class Pq extends B1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Rq extends N1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=Rw.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(Rw.clearImmediate(t),e._scheduled=void 0)}});function X1(i=0,e,t=G7){let n=-1;return null!=e&&(zy(e)?t=e:n=e),new yn(r=>{let s=function Oq(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function Y1(i,e=ww){return function kq(i){return kn((e,t)=>{let n=!1,r=null,s=null,o=!1;const a=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const c=r;r=null,t.next(c)}o&&t.complete()},l=()=>{s=null,o&&t.complete()};e.subscribe(In(t,c=>{n=!0,r=c,s||mr(i(c)).subscribe(s=In(t,a,l))},()=>{o=!0,(!n||!s||s.closed)&&t.complete()}))})}(()=>X1(i,e))}const Lq=new Se("cdk-dir-doc",{providedIn:"root",factory:function Fq(){return Hn(kt)}}),Nq=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let wu=(()=>{class i{constructor(t){if(this.value="ltr",this.change=new et,t){const r=t.documentElement?t.documentElement.dir:null;this.value=function Bq(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?Nq.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(j(Lq,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),bv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})(),X2=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new He,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new yn(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(Y1(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):tt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(Dn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=wc(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>pa(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(j(Et),j(wr),j(kt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Pw=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new He,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Y1(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(j(wr),j(Et),j(kt,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),xv=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})(),Y2=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[bv,xv,bv,xv]}),i})();class Z1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class Ip extends Z1{constructor(e,t,n,r){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r}}class Rp extends Z1{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class zq extends Z1{constructor(e){super(),this.element=e instanceof Wt?e.nativeElement:e}}class kw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof Ip?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof Rp?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof zq?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Hq extends kw{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{const a=o.element,l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||mi.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Pp=(()=>{class i extends kw{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new et,this.attachDomPortal=s=>{const o=s.element,a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),o=n.createComponent(s,n.length,t.injector||n.injector);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=t,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(R(ac),R(Yr),R(kt))},i.\u0275dir=Le({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[ut]}),i})(),kp=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const Z2=T7();class Gq{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=cr(-this._previousScrollPosition.left),e.style.top=cr(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),Z2&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Z2&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class Wq{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class K2{enable(){}disable(){}attach(){}}function K1(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function J2(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class $q{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();K1(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let jq=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new K2,this.close=o=>new Wq(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new Gq(this._viewportRuler,this._document),this.reposition=o=>new $q(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}}return i.\u0275fac=function(t){return new(t||i)(j(X2),j(Pw),j(Et),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class wv{constructor(e){if(this.scrollStrategy=new K2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class qq{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let Q2=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Xq=(()=>{class i extends Q2{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){const a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(Et,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Yq=(()=>{class i extends Q2{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=Hd(s)},this._clickListener=s=>{const o=Hd(s),a="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;const f=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(wr),j(Et,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ow=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||L1()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),L1()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(wr))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class Mv{constructor(e,t,n,r,s,o,a,l,c,d=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new He,this._attachments=new He,this._detachments=new He,this._locationChanges=Zt.EMPTY,this._backdropClickHandler=f=>this._backdropClick.next(f),this._backdropTransitionendHandler=f=>{this._disposeBackdrop(f.target)},this._keydownEvents=new He,this._outsidePointerEvents=new He,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Si(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=cr(this._config.width),e.height=cr(this._config.height),e.minWidth=cr(this._config.minWidth),e.minHeight=cr(this._config.minHeight),e.maxWidth=cr(this._config.maxWidth),e.maxHeight=cr(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=Cw(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(at(Ms(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const e3="cdk-overlay-connected-position-bounding-box",Zq=/([A-Za-z%]+)$/;class Kq{constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new He,this._resizeSubscription=Zt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(e3),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,t,a),d=this._getOverlayFit(c,t,n,a);if(d.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(a,l);this._canFitWithFlexibleDimensions(d,c,n)?s.push({position:a,origin:l,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(l,a)}):(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:t})}if(s.length){let a=null,l=-1;for(const c of s){const d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}return this._isPushed=!1,void this._applyPosition(a.position,a.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Gd(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(e3),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r="start"==n.originX?o:a}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=n3(t);let{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let p=0-a,m=a+s.height-n.height,_=this._subtractOverflows(s.width,0-o,o+s.width-n.width),b=this._subtractOverflows(s.height,p,m),y=_*b;return{visibleArea:y,isCompletelyWithinViewport:s.width*s.height===y,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,o=t3(this._overlayRef.getConfig().minHeight),a=t3(this._overlayRef.getConfig().minWidth),c=e.fitsInViewportHorizontally||null!=a&&a<=s;return(e.fitsInViewportVertically||null!=o&&o<=r)&&c}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=n3(t),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-n.top-e.y,0),c=Math.max(s.left-n.left-e.x,0);let d=0,f=0;return d=r.width<=s.width?c||-o:e.x<this._viewportMargin?s.left-n.left-e.x:0,f=r.height<=s.height?l||-a:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:d,y:f},{x:e.x+d,y:e.y+f}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new qq(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,o,a,d,f,p;if("top"===t.overlayY)o=e.y,s=n.height-o+this._viewportMargin;else if("bottom"===t.overlayY)a=n.height-e.y+2*this._viewportMargin,s=n.height-a+this._viewportMargin;else{const m=Math.min(n.bottom-e.y+n.top,e.y),_=this._lastBoundingBoxSize.height;s=2*m,o=e.y-m,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-_/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)p=n.width-e.x+this._viewportMargin,d=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)f=e.x,d=n.right-e.x;else{const m=Math.min(n.right-e.x+n.left,e.x),_=this._lastBoundingBoxSize.width;d=2*m,f=e.x-m,d>_&&!this._isInitialRender&&!this._growAfterOpen&&(f=e.x-_/2)}return{top:o,left:f,bottom:a,right:p,width:d,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=cr(n.height),r.top=cr(n.top),r.bottom=cr(n.bottom),r.width=cr(n.width),r.left=cr(n.left),r.right=cr(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=cr(s)),o&&(r.maxWidth=cr(o))}this._lastBoundingBoxSize=n,Gd(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Gd(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Gd(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const d=this._viewportRuler.getViewportScrollPosition();Gd(n,this._getExactOverlayY(t,e,d)),Gd(n,this._getExactOverlayX(t,e,d))}else n.position="static";let a="",l=this._getOffset(t,"x"),c=this._getOffset(t,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=cr(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=cr(o.maxWidth):s&&(n.maxWidth="")),Gd(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=cr(s.y),r}_getExactOverlayX(e,t,n){let o,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=cr(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:J2(e,n),isOriginOutsideView:K1(e,n),isOverlayClipped:J2(t,n),isOverlayOutsideView:K1(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?e.offsetX??this._offsetX:e.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Cw(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Wt)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function Gd(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function t3(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(Zq);return t&&"px"!==t?null:parseFloat(e)}return i||null}function n3(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const i3="cdk-global-overlay-wrapper";class Jq{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(i3),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),c=!("100%"!==s&&"100vh"!==s||a&&"100%"!==a&&"100vh"!==a),d=this._xPosition,f=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let m="",_="",b="";l?b="flex-start":"center"===d?(b="center",p?_=f:m=f):p?"left"===d||"end"===d?(b="flex-end",m=f):("right"===d||"start"===d)&&(b="flex-start",_=f):"left"===d||"start"===d?(b="flex-start",m=f):("right"===d||"end"===d)&&(b="flex-end",_=f),e.position=this._cssPosition,e.marginLeft=l?"0":m,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":_,t.justifyContent=b,t.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(i3),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Qq=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new Jq}flexibleConnectedTo(t){return new Kq(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(j(Pw),j(kt),j(wr),j(Ow))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),eX=0,Qs=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,f,p,m){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=f,this._outsideClickDispatcher=p,this._animationsModuleType=m}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new wv(t);return o.direction=o.direction||this._directionality.value,new Mv(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+eX++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(kd)),new Hq(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(j(jq),j(Ow),j(ac),j(Qq),j(Xq),j(mi),j(Et),j(kt),j(wu),j(q_),j(Yq),j(Ks,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const tX=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],r3=new Se("cdk-connected-overlay-scroll-strategy");let s3=(()=>{class i{constructor(t){this.elementRef=t}}return i.\u0275fac=function(t){return new(t||i)(R(Wt))},i.\u0275dir=Le({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),i})(),o3=(()=>{class i{constructor(t,n,r,s,o){this._overlay=t,this._dir=o,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=Zt.EMPTY,this._attachSubscription=Zt.EMPTY,this._detachSubscription=Zt.EMPTY,this._positionSubscription=Zt.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new et,this.positionChange=new et,this.attach=new et,this.detach=new et,this.overlayKeydown=new et,this.overlayOutsideClick=new et,this._templatePortal=new Rp(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Gn(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=Gn(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=Gn(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=Gn(t)}get push(){return this._push}set push(t){this._push=Gn(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=tX);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),27===n.keyCode&&!this.disableClose&&!ha(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{this.overlayOutsideClick.next(n)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),n=new wv({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(n.width=this.width),(this.height||0===this.height)&&(n.height=this.height),(this.minWidth||0===this.minWidth)&&(n.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(t){const n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return t.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(t),t}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof s3?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(uN(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(R(Qs),R(Zs),R(Yr),R(r3),R(wu,8))},i.\u0275dir=Le({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[oi]}),i})();const iX={provide:r3,deps:[Qs],useFactory:function nX(i){return()=>i.scrollStrategies.reposition()}};let Op=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[Qs,iX],imports:[bv,kp,Y2,Y2]}),i})();function rX(i,e){}class Lw{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0}}let a3=(()=>{class i extends kw{constructor(t,n,r,s,o,a,l,c){super(),this._elementRef=t,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=d=>{this._portalOutlet.hasAttached();const f=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),f},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),n}attachTemplatePortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let n=null;if("string"==typeof t?n=this._document.querySelector(t):"boolean"==typeof t?n=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(n=t),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=O1(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=O1();return t===n||t.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=O1())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(z1),R(kt,8),R(Lw),R(Aw),R(Et),R(Mv),R(Mc))},i.\u0275cmp=St({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,n){if(1&t&&qi(Pp,7),2&t){let r;$t(r=jt())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,n){2&t&&Qt("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[ut],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&Fe(0,rX,0,0,"ng-template",0)},dependencies:[Pp],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class J1{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new He,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!ha(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})})}close(e,t){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const l3=new Se("DialogScrollStrategy"),sX=new Se("DialogData"),oX=new Se("DefaultDialogConfig"),lX={provide:l3,deps:[Qs],useFactory:function aX(i){return()=>i.scrollStrategies.block()}};let cX=0,c3=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new He,this._afterOpenedAtThisLevel=new He,this._ariaHiddenElements=new Map,this.afterAllClosed=tv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(hs(void 0))),this._scrollStrategy=a}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}open(t,n){(n={...this._defaultOptions||new Lw,...n}).id=n.id||"cdk-dialog-"+cX++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new J1(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(t,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){Q1(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){Q1(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),Q1(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const n=new wv({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachContainer(t,n,r){const s=r.injector??r.viewContainerRef?.injector,o=[{provide:Lw,useValue:r},{provide:J1,useValue:n},{provide:Mv,useValue:t}];let a;r.container?"function"==typeof r.container?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=a3;const l=new Ip(a,r.viewContainerRef,mi.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return t.attach(l).instance}_attachDialogContent(t,n,r,s){const o=this._createInjector(s,n,r);if(t instanceof Zs){let a={$implicit:s.data,dialogRef:n};s.templateContext&&(a={...a,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new Rp(t,null,a,o))}else{const a=r.attachComponentPortal(new Ip(t,s.viewContainerRef,o,s.componentFactoryResolver));n.componentInstance=a.instance}}_createInjector(t,n,r){const s=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=[{provide:sX,useValue:t.data},{provide:J1,useValue:n}];return t.providers&&("function"==typeof t.providers?o.push(...t.providers(n,t,r)):o.push(...t.providers)),t.direction&&(!s||!s.get(wu,null,mt.Optional))&&o.push({provide:wu,useValue:{value:t.direction,change:tt()}}),mi.create({parent:t.injector||s||this._injector,providers:o})}_removeOpenDialog(t,n){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(mi),j(oX,8),j(i,12),j(Ow),j(l3))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();function Q1(i,e){let t=i.length;for(;t--;)e(i[t])}let uX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[c3,lX],imports:[Op,kp,W2,kp]}),i})();function dX(i,e){if(1&i&&bt(0,"mat-pseudo-checkbox",4),2&i){const t=Oe();ie("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function hX(i,e){if(1&i&&(ce(0,"span",5),ot(1),he()),2&i){const t=Oe();ne(1),Xr("(",t.group.label,")")}}const fX=["*"],mX=new Se("mat-sanity-checks",{providedIn:"root",factory:function pX(){return!0}});let Mn=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!L1()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(j(G2),j(mX,8),j(kt))},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[bv,bv]}),i})();function Fw(i){return class extends i{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=Gn(e)}}}function Cv(i,e){return class extends i{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}}}function Sv(i){return class extends i{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Gn(e)}}}function h3(i,e=0){return class extends i{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?fa(t):this.defaultTabIndex}}}function f3(i){return class extends i{constructor(...e){super(...e),this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}function gX(i){return class extends i{constructor(...e){super(...e),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new yn(t=>{this._isInitialized?this._notifySubscriber(t):this._pendingSubscribers.push(t)})}_markInitialized(){this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(e){e.next(),e.complete()}}}let eT=(()=>{class i{isErrorState(t,n){return!!(t&&t.invalid&&(t.touched||n&&n.submitted))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),vX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),i})();function Ev(i,e,t){i.nativeElement.classList.toggle(e,t)}let p3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,Mn]}),i})();class bX{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const m3={enterDuration:225,exitDuration:150},tT=Sp({passive:!0}),g3=["mousedown","touchstart"],_3=["mouseup","mouseleave","touchend","touchcancel"];class wX{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wc(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...m3,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const o=n.radius||function MX(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),a=e-r.left,l=t-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=a-o+"px",d.style.top=l-o+"px",d.style.height=2*o+"px",d.style.width=2*o+"px",null!=n.color&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);const f=window.getComputedStyle(d),m=f.transitionDuration,_="none"===f.transitionProperty||"0s"===m||"0s, 0s"===m,b=new bX(this,d,n,_);d.style.transform="scale3d(1, 1, 1)",b.state=0,n.persistent||(this._mostRecentTransientRipple=b);let y=null;return!_&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const v=()=>this._finishRippleTransition(b),M=()=>this._destroyRipple(b);d.addEventListener("transitionend",v),d.addEventListener("transitioncancel",M),y={onTransitionEnd:v,onTransitionCancel:M}}),this._activeRipples.set(b,y),(_||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...m3,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=wc(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(g3))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(_3),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=H1(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!G1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,tT)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(g3.forEach(e=>{this._triggerElement.removeEventListener(e,this,tT)}),this._pointerUpEventsRegistered&&_3.forEach(e=>{this._triggerElement.removeEventListener(e,this,tT)}))}}const CX=new Se("mat-ripple-global-options");let Dv=(()=>{class i{constructor(t,n,r,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new wX(this,n,t,r)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Et),R(wr),R(CX,8),R(Ks,8))},i.\u0275dir=Le({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&ui("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),Nw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,Mn]}),i})(),v3=(()=>{class i{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return i.\u0275fac=function(t){return new(t||i)(R(Ks,8))},i.\u0275cmp=St({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,n){2&t&&ui("mat-pseudo-checkbox-indeterminate","indeterminate"===n.state)("mat-pseudo-checkbox-checked","checked"===n.state)("mat-pseudo-checkbox-disabled",n.disabled)("_mat-animation-noopable","NoopAnimations"===n._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,n){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0}),i})(),nT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn]}),i})();const y3=new Se("MAT_OPTION_PARENT_COMPONENT"),b3=new Se("MatOptgroup");let SX=0;class EX{constructor(e,t=!1){this.source=e,this.isUserInput=t}}let DX=(()=>{class i{constructor(t,n,r,s){this._element=t,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+SX++,this.onSelectionChange=new et,this._stateChanges=new He}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=Gn(t)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,n){const r=this._getHostElement();"function"==typeof r.focus&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){(13===t.keyCode||32===t.keyCode)&&!ha(t)&&(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new EX(this,t))}}return i.\u0275fac=function(t){dc()},i.\u0275dir=Le({type:i,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}}),i})(),Av=(()=>{class i extends DX{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Qn),R(y3,8),R(b3,8))},i.\u0275cmp=St({type:i,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,n){1&t&&ct("click",function(){return n._selectViaInteraction()})("keydown",function(s){return n._handleKeydown(s)}),2&t&&(sp("id",n.id),Qt("tabindex",n._getTabIndex())("aria-selected",n._getAriaSelected())("aria-disabled",n.disabled.toString()),ui("mat-selected",n.selected)("mat-option-multiple",n.multiple)("mat-active",n.active)("mat-option-disabled",n.disabled))},exportAs:["matOption"],features:[ut],ngContentSelectors:fX,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,n){1&t&&(Ys(),Fe(0,dX,1,2,"mat-pseudo-checkbox",0),ce(1,"span",1),Yn(2),he(),Fe(3,hX,2,1,"span",2),bt(4,"div",3)),2&t&&(ie("ngIf",n.multiple),ne(3),ie("ngIf",n.group&&n.group._inert),ne(1),ie("matRippleTrigger",n._getHostElement())("matRippleDisabled",n.disabled||n.disableRipple))},dependencies:[Dv,lr,v3],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),i})();function x3(i,e,t){if(t.length){let n=e.toArray(),r=t.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}let w3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Nw,$a,Mn,nT]}),i})();class M3{}const Cc="*";function El(i,e){return{type:7,name:i,definitions:e,options:{}}}function eo(i,e=null){return{type:4,styles:e,timings:i}}function C3(i,e=null){return{type:3,steps:i,options:e}}function S3(i,e=null){return{type:2,steps:i,options:e}}function $n(i){return{type:6,styles:i,offset:null}}function fs(i,e,t){return{type:0,name:i,styles:e,options:t}}function Rs(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function iT(i=null){return{type:9,options:i}}function rT(i,e,t=null){return{type:11,selector:i,animation:e,options:t}}function E3(i){Promise.resolve(null).then(i)}class Tv{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){E3(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class D3{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?E3(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++n==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function RX(i,e){}const Lp={params:{enterAnimationDuration:"150ms",exitAnimationDuration:"75ms"}},PX={dialogContainer:El("dialogContainer",[fs("void, exit",$n({opacity:0,transform:"scale(0.7)"})),fs("enter",$n({transform:"none"})),Rs("* => enter",C3([eo("{{enterAnimationDuration}} cubic-bezier(0, 0, 0.2, 1)",$n({transform:"none",opacity:1})),rT("@*",iT(),{optional:!0})]),Lp),Rs("* => void, * => exit",C3([eo("{{exitAnimationDuration}} cubic-bezier(0.4, 0.0, 0.2, 1)",$n({opacity:0})),rT("@*",iT(),{optional:!0})]),Lp)])};class Bw{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0,this.enterAnimationDuration=Lp.params.enterAnimationDuration,this.exitAnimationDuration=Lp.params.exitAnimationDuration}}let kX=(()=>{class i extends a3{constructor(t,n,r,s,o,a,l,c){super(t,n,r,s,o,a,l,c),this._animationStateChanged=new et}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(z1),R(kt,8),R(Bw),R(Aw),R(Et),R(Mv),R(Mc))},i.\u0275cmp=St({type:i,selectors:[["ng-component"]],features:[ut],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})(),OX=(()=>{class i extends kX{constructor(t,n,r,s,o,a,l,c,d){super(t,n,r,s,o,a,l,d),this._changeDetectorRef=c,this._state="enter"}_onAnimationDone({toState:t,totalTime:n}){"enter"===t?this._openAnimationDone(n):"exit"===t&&this._animationStateChanged.next({state:"closed",totalTime:n})}_onAnimationStart({toState:t,totalTime:n}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:n}):("exit"===t||"void"===t)&&this._animationStateChanged.next({state:"closing",totalTime:n})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_getAnimationState(){return{value:this._state,params:{enterAnimationDuration:this._config.enterAnimationDuration||Lp.params.enterAnimationDuration,exitAnimationDuration:this._config.exitAnimationDuration||Lp.params.exitAnimationDuration}}}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(z1),R(kt,8),R(Bw),R(Aw),R(Et),R(Mv),R(Qn),R(Mc))},i.\u0275cmp=St({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-dialog-container"],hostVars:7,hostBindings:function(t,n){1&t&&vx("@dialogContainer.start",function(s){return n._onAnimationStart(s)})("@dialogContainer.done",function(s){return n._onAnimationDone(s)}),2&t&&(sp("id",n._config.id),Qt("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),bx("@dialogContainer",n._getAnimationState()))},features:[ut],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&Fe(0,RX,0,0,"ng-template",0)},dependencies:[Pp],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions.mat-dialog-actions-align-center,.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions.mat-dialog-actions-align-end,.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,data:{animation:[PX.dialogContainer]}}),i})();class Iv{constructor(e,t,n){this._ref=e,this._containerInstance=n,this._afterOpened=new He,this._beforeClosed=new He,this._state=0,this.disableClose=t.disableClose,this.id=e.id,n._animationStateChanged.pipe(Dn(r=>"opened"===r.state),Si(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Dn(r=>"closed"===r.state),Si(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Ms(this.backdropClick(),this.keydownEvents().pipe(Dn(r=>27===r.keyCode&&!this.disableClose&&!ha(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),A3(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Dn(t=>"closing"===t.state),Si(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}function A3(i,e,t){return i._closeInteractionType=e,i.close(t)}const oT=new Se("MatDialogData"),LX=new Se("mat-dialog-default-options"),T3=new Se("mat-dialog-scroll-strategy"),NX={provide:T3,deps:[Qs],useFactory:function FX(i){return()=>i.scrollStrategies.block()}};let BX=0,UX=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,f){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=l,this._dialogContainerType=c,this._dialogDataToken=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new He,this._afterOpenedAtThisLevel=new He,this._idPrefix="mat-dialog-",this.afterAllClosed=tv(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(hs(void 0))),this._scrollStrategy=a,this._dialog=n.get(c3)}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,n){let r;(n={...this._defaultOptions||new Bw,...n}).id=n.id||`${this._idPrefix}${BX++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:Bw,useValue:n},{provide:Lw,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let n=t.length;for(;n--;)t[n].close()}}return i.\u0275fac=function(t){dc()},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),Uw=(()=>{class i extends UX{constructor(t,n,r,s,o,a,l,c){super(t,n,s,a,l,o,Iv,OX,oT,c)}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(mi),j(q_,8),j(LX,8),j(T3),j(i,12),j(Ow),j(Ks,8))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),VX=0,zX=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this._elementRef=n,this._dialog=r,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=k3(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const n=t._matDialogClose||t._matDialogCloseResult;n&&(this.dialogResult=n.currentValue)}_onButtonClick(t){A3(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return i.\u0275fac=function(t){return new(t||i)(R(Iv,8),R(Wt),R(Uw))},i.\u0275dir=Le({type:i,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,n){1&t&&ct("click",function(s){return n._onButtonClick(s)}),2&t&&Qt("aria-label",n.ariaLabel||null)("type",n.type)},inputs:{ariaLabel:["aria-label","ariaLabel"],type:"type",dialogResult:["mat-dialog-close","dialogResult"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[oi]}),i})(),I3=(()=>{class i{constructor(t,n,r){this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-dialog-title-"+VX++}ngOnInit(){this._dialogRef||(this._dialogRef=k3(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(t){return new(t||i)(R(Iv,8),R(Wt),R(Uw))},i.\u0275dir=Le({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,n){2&t&&sp("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),R3=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),i})(),P3=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-dialog-actions"],hostVars:4,hostBindings:function(t,n){2&t&&ui("mat-dialog-actions-align-center","center"===n.align)("mat-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})();function k3(i,e){let t=i.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-dialog-container");)t=t.parentElement;return t?e.find(n=>n.id===t.id):null}let HX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[Uw,NX],imports:[uX,Op,kp,Mn,Mn]}),i})();const GX=["mat-button",""],WX=["*"],jX=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],qX=Cv(Fw(Sv(class{constructor(i){this._elementRef=i}})));let Fp=(()=>{class i extends qX{constructor(t,n,r){super(t),this._focusMonitor=n,this._animationMode=r,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of jX)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,n){t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(n=>this._getHostElement().hasAttribute(n))}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Mc),R(Ks,8))},i.\u0275cmp=St({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,n){if(1&t&&qi(Dv,5),2&t){let r;$t(r=jt())&&(n.ripple=r.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,n){2&t&&(Qt("disabled",n.disabled||null),ui("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-button-disabled",n.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ut],attrs:GX,ngContentSelectors:WX,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,n){1&t&&(Ys(),ce(0,"span",0),Yn(1),he(),bt(2,"span",1)(3,"span",2)),2&t&&(ne(2),ui("mat-button-ripple-round",n.isRoundButton||n.isIconButton),ie("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",n.isIconButton)("matRippleTrigger",n._getHostElement()))},dependencies:[Dv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),aT=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Nw,Mn,Mn]}),i})();const XX=["class","dialog"];let O3=(()=>{class i{constructor(t,n){this.dialogRef=t,this.data=n}}return i.\u0275fac=function(t){return new(t||i)(R(Iv),R(oT))},i.\u0275cmp=St({type:i,selectors:[["app-confirm",8,"dialog"]],attrs:XX,decls:10,vars:2,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"mat-dialog-close"]],template:function(t,n){1&t&&(ce(0,"h1",0),ot(1,"Confirmation"),he(),ce(2,"div",1)(3,"p"),ot(4),he()(),ce(5,"div",2)(6,"button",3),ct("click",function(){return n.dialogRef.close()}),ot(7,"Cancel"),he(),ce(8,"button",4),ot(9,"Yes"),he()()),2&t&&(ne(4),Pi(n.data.text),ne(4),ie("mat-dialog-close",!0))},dependencies:[Fp,zX,I3,R3,P3]}),i})();function lT(i,e){const t="object"==typeof e;return new Promise((n,r)=>{const s=new $o({next:o=>{n(o),s.unsubscribe()},error:r,complete:()=>{t?n(e.defaultValue):r(new Q_)}});i.subscribe(s)})}function L3(...i){const e=Hy(i),{args:t,keys:n}=iN(i),r=new yn(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let d=0;d<o;d++){let f=!1;mr(t[d]).subscribe(In(s,p=>{f||(f=!0,c--),a[d]=p},()=>l--,void 0,()=>{(!l||!f)&&(c||s.next(n?rN(n,a):a),s.complete())}))}});return e?r.pipe(t1(e)):r}let F3=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(R(sa),R(Wt))},i.\u0275dir=Le({type:i}),i})(),Wd=(()=>{class i extends F3{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275dir=Le({type:i,features:[ut]}),i})();const ja=new Se("NgValueAccessor"),ZX={provide:ja,useExisting:Un(()=>Mu),multi:!0},JX=new Se("CompositionEventMode");let Mu=(()=>{class i extends F3{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function KX(){const i=Cl()?Cl().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(R(sa),R(Wt),R(JX,8))},i.\u0275dir=Le({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&ct("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[Nn([ZX]),ut]}),i})();function Cu(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function B3(i){return null!=i&&"number"==typeof i.length}const ps=new Se("NgValidators"),Su=new Se("NgAsyncValidators"),eY=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class cT{static min(e){return U3(e)}static max(e){return V3(e)}static required(e){return function z3(i){return Cu(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function H3(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function G3(i){return Cu(i.value)||eY.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function W3(i){return e=>Cu(e.value)||!B3(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function $3(i){return e=>B3(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function j3(i){if(!i)return Vw;let e,t;return"string"==typeof i?(t="","^"!==i.charAt(0)&&(t+="^"),t+=i,"$"!==i.charAt(i.length-1)&&(t+="$"),e=new RegExp(t)):(t=i.toString(),e=i),n=>{if(Cu(n.value))return null;const r=n.value;return e.test(r)?null:{pattern:{requiredPattern:t,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return J3(e)}static composeAsync(e){return Q3(e)}}function U3(i){return e=>{if(Cu(e.value)||Cu(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<i?{min:{min:i,actual:e.value}}:null}}function V3(i){return e=>{if(Cu(e.value)||Cu(i))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>i?{max:{max:i,actual:e.value}}:null}}function Vw(i){return null}function q3(i){return null!=i}function X3(i){return F_(i)?Ei(i):i}function Y3(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Z3(i,e){return e.map(t=>t(i))}function K3(i){return i.map(e=>function tY(i){return!i.validate}(e)?e:t=>e.validate(t))}function J3(i){if(!i)return null;const e=i.filter(q3);return 0==e.length?null:function(t){return Y3(Z3(t,e))}}function uT(i){return null!=i?J3(K3(i)):null}function Q3(i){if(!i)return null;const e=i.filter(q3);return 0==e.length?null:function(t){return L3(Z3(t,e).map(X3)).pipe(Je(Y3))}}function dT(i){return null!=i?Q3(K3(i)):null}function eB(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function tB(i){return i._rawValidators}function nB(i){return i._rawAsyncValidators}function hT(i){return i?Array.isArray(i)?i:[i]:[]}function zw(i,e){return Array.isArray(i)?i.includes(e):i===e}function iB(i,e){const t=hT(e);return hT(i).forEach(r=>{zw(t,r)||t.push(r)}),t}function rB(i,e){return hT(e).filter(t=>!zw(i,t))}class sB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=uT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=dT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ps extends sB{get formDirective(){return null}get path(){return null}}class Dl extends sB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let $d=(()=>{class i extends oB{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Dl,2))},i.\u0275dir=Le({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&ui("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[ut]}),i})(),aB=(()=>{class i extends oB{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Ps,10))},i.\u0275dir=Le({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,n){2&t&&ui("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)("ng-submitted",n.isSubmitted)},features:[ut]}),i})();const Rv="VALID",Gw="INVALID",Np="PENDING",Pv="DISABLED";function gT(i){return(Ww(i)?i.validators:i)||null}function cB(i){return Array.isArray(i)?uT(i):i||null}function _T(i,e){return(Ww(e)?e.asyncValidators:i)||null}function uB(i){return Array.isArray(i)?dT(i):i||null}function Ww(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function dB(i,e,t){const n=i.controls;if(!(e?Object.keys(n):n).length)throw new _e(1e3,"");if(!n[t])throw new _e(1001,"")}function hB(i,e,t){i._forEachChild((n,r)=>{if(void 0===t[r])throw new _e(1002,"")})}class $w{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=cB(this._rawValidators),this._composedAsyncValidatorFn=uB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rv}get invalid(){return this.status===Gw}get pending(){return this.status==Np}get disabled(){return this.status===Pv}get enabled(){return this.status!==Pv}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=cB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=uB(e)}addValidators(e){this.setValidators(iB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rB(e,this._rawAsyncValidators))}hasValidator(e){return zw(this._rawValidators,e)}hasAsyncValidator(e){return zw(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Np,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Pv,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Rv,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rv||this.status===Np)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pv:Rv}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Np,this._hasOwnPendingAsyncValidator=!0;const t=X3(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Pv:this.errors?Gw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Np)?Np:this._anyControlsHaveStatus(Gw)?Gw:Rv}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ww(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class jw extends $w{constructor(e,t,n){super(gT(t),_T(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hB(this,0,e),Object.keys(e).forEach(n=>{dB(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{const r=this.controls[n];r&&r.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>!!n._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,n,r)=>((n.enabled||this.disabled)&&(t[r]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((r,s)=>{n=t(n,r,s)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function qw(i,e){return[...e.path,i]}function kv(i,e){vT(i,e),e.valueAccessor.writeValue(i.value),i.disabled&&e.valueAccessor.setDisabledState?.(!0),function uY(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&fB(i,e)})}(i,e),function hY(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function dY(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&fB(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function cY(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function Xw(i,e,t=!0){const n=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n)),Zw(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Yw(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function vT(i,e){const t=tB(i);null!==e.validator?i.setValidators(eB(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=nB(i);null!==e.asyncValidator?i.setAsyncValidators(eB(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();Yw(e._rawValidators,r),Yw(e._rawAsyncValidators,r)}function Zw(i,e){let t=!1;if(null!==i){if(null!==e.validator){const r=tB(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(t=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=nB(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(t=!0,i.setAsyncValidators(s))}}}const n=()=>{};return Yw(e._rawValidators,n),Yw(e._rawAsyncValidators,n),t}function fB(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function pB(i,e){vT(i,e)}function yT(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function gB(i,e){i._syncPendingControls(),e.forEach(t=>{const n=t.control;"submit"===n.updateOn&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function bT(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===Mu?t=s:function mY(i){return Object.getPrototypeOf(i.constructor)===Wd}(s)?n=s:r=s}),r||n||t||null}const _Y={provide:Ps,useExisting:Un(()=>Lv)},Ov=(()=>Promise.resolve(null))();let Lv=(()=>{class i extends Ps{constructor(t,n){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new et,this.form=new jw({},uT(t),dT(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ov.then(()=>{const n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),kv(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ov.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Ov.then(()=>{const n=this._findContainer(t.path),r=new jw({});pB(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ov.then(()=>{const n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Ov.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,gB(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return i.\u0275fac=function(t){return new(t||i)(R(ps,10),R(Su,10))},i.\u0275dir=Le({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,n){1&t&&ct("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nn([_Y]),ut]}),i})();function _B(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function vB(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const Fv=class extends $w{constructor(e=null,t,n){super(gT(t),_T(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ww(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=vB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_B(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_B(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){vB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},bY={provide:Dl,useExisting:Un(()=>jd)},xB=(()=>Promise.resolve(null))();let jd=(()=>{class i extends Dl{constructor(t,n,r,s,o){super(),this._changeDetectorRef=o,this.control=new Fv,this._registered=!1,this.update=new et,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=bT(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),yT(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kv(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){xB.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,r=0!==n&&function mc(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}(n);xB.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?qw(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(R(Ps,9),R(ps,10),R(Su,10),R(ja,10),R(Qn,8))},i.\u0275dir=Le({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Nn([bY]),ut,oi]}),i})(),wB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),i})();const xY={provide:ja,useExisting:Un(()=>Nv),multi:!0};let Nv=(()=>{class i extends Wd{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=n=>{t(""==n?null:parseFloat(n))}}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275dir=Le({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,n){1&t&&ct("input",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},features:[Nn([xY]),ut]}),i})(),MB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const xT=new Se("NgModelWithFormControlWarning"),EY={provide:Ps,useExisting:Un(()=>Bp)};let Bp=(()=>{class i extends Ps{constructor(t,n){super(),this.validators=t,this.asyncValidators=n,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new et,this._setValidators(t),this._setAsyncValidators(n)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Zw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const n=this.form.get(t.path);return kv(n,t),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),n}getControl(t){return this.form.get(t.path)}removeControl(t){Xw(t.control||null,t,!1),function gY(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,n){this.form.get(t.path).setValue(n)}onSubmit(t){return this.submitted=!0,gB(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const n=t.control,r=this.form.get(t.path);n!==r&&(Xw(n||null,t),(i=>i instanceof Fv)(r)&&(kv(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const n=this.form.get(t.path);pB(n,t),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const n=this.form.get(t.path);n&&function fY(i,e){return Zw(i,e)}(n,t)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){vT(this.form,this),this._oldForm&&Zw(this._oldForm,this)}_checkFormPresent(){}}return i.\u0275fac=function(t){return new(t||i)(R(ps,10),R(Su,10))},i.\u0275dir=Le({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,n){1&t&&ct("submit",function(s){return n.onSubmit(s)})("reset",function(){return n.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Nn([EY]),ut,oi]}),i})();const TY={provide:Dl,useExisting:Un(()=>CT)};let CT=(()=>{class i extends Dl{constructor(t,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new et,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=bT(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),yT(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return qw(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return i._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(R(Ps,13),R(ps,10),R(Su,10),R(ja,10),R(xT,8))},i.\u0275dir=Le({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Nn([TY]),ut,oi]}),i})();function RB(i){return"number"==typeof i?i:parseFloat(i)}let qd=(()=>{class i{constructor(){this._validator=Vw}ngOnChanges(t){if(this.inputName in t){const n=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Vw,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,features:[oi]}),i})();const FY={provide:ps,useExisting:Un(()=>DT),multi:!0};let DT=(()=>{class i extends qd{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=t=>RB(t),this.createValidator=t=>V3(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275dir=Le({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&Qt("max",n._enabled?n.max:null)},inputs:{max:"max"},features:[Nn([FY]),ut]}),i})();const NY={provide:ps,useExisting:Un(()=>AT),multi:!0};let AT=(()=>{class i extends qd{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>RB(t),this.createValidator=t=>U3(t)}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275dir=Le({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,n){2&t&&Qt("min",n._enabled?n.min:null)},inputs:{min:"min"},features:[Nn([NY]),ut]}),i})(),NB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[MB]}),i})(),WY=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[NB]}),i})(),BB=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:xT,useValue:t.warnOnNgModelWithFormControl}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[NB]}),i})();class UB extends $w{constructor(e,t,n){super(gT(t),_T(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){let n=this._adjustIndex(e);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),t&&(this.controls.splice(r,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){hB(this,0,e),e.forEach((n,r)=>{dB(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,n)=>!!n._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function VB(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let $Y=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new i;return t.useNonNullable=!0,t}group(t,n=null){const r=this._reduceControls(t);let s={};return VB(n)?s=n:null!==n&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new jw(r,s)}control(t,n,r){let s={};return this.useNonNullable?(VB(n)?s=n:(s.validators=n,s.asyncValidators=r),new Fv(t,{...s,nonNullable:!0})):new Fv(t,n,r)}array(t,n,r){const s=t.map(o=>this._createControl(o));return new UB(s,n,r)}_reduceControls(t){const n={};return Object.keys(t).forEach(r=>{n[r]=this._createControl(t[r])}),n}_createControl(t){return t instanceof Fv||t instanceof $w?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:BB}),i})();const jY=["connectionContainer"],qY=["inputContainer"],XY=["label"];function YY(i,e){1&i&&(Io(0),ce(1,"div",14),bt(2,"div",15)(3,"div",16)(4,"div",17),he(),ce(5,"div",18),bt(6,"div",15)(7,"div",16)(8,"div",17),he(),Ro())}function ZY(i,e){if(1&i){const t=yr();ce(0,"div",19),ct("cdkObserveContent",function(){return pn(t),En(Oe().updateOutlineGap())}),Yn(1,1),he()}2&i&&ie("cdkObserveContentDisabled","outline"!=Oe().appearance)}function KY(i,e){if(1&i&&(Io(0),Yn(1,2),ce(2,"span"),ot(3),he(),Ro()),2&i){const t=Oe(2);ne(3),Pi(t._control.placeholder)}}function JY(i,e){1&i&&Yn(0,3,["*ngSwitchCase","true"])}function QY(i,e){1&i&&(ce(0,"span",23),ot(1," *"),he())}function eZ(i,e){if(1&i){const t=yr();ce(0,"label",20,21),ct("cdkObserveContent",function(){return pn(t),En(Oe().updateOutlineGap())}),Fe(2,KY,4,1,"ng-container",12),Fe(3,JY,1,0,"ng-content",12),Fe(4,QY,2,0,"span",22),he()}if(2&i){const t=Oe();ui("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),ie("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),Qt("for",t._control.id)("aria-owns",t._control.id),ne(2),ie("ngSwitchCase",!1),ne(1),ie("ngSwitchCase",!0),ne(1),ie("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function tZ(i,e){1&i&&(ce(0,"div",24),Yn(1,4),he())}function nZ(i,e){if(1&i&&(ce(0,"div",25),bt(1,"span",26),he()),2&i){const t=Oe();ne(1),ui("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function iZ(i,e){1&i&&(ce(0,"div"),Yn(1,5),he()),2&i&&ie("@transitionMessages",Oe()._subscriptAnimationState)}function rZ(i,e){if(1&i&&(ce(0,"div",30),ot(1),he()),2&i){const t=Oe(2);ie("id",t._hintLabelId),ne(1),Pi(t.hintLabel)}}function sZ(i,e){if(1&i&&(ce(0,"div",27),Fe(1,rZ,2,2,"div",28),Yn(2,6),bt(3,"div",29),Yn(4,7),he()),2&i){const t=Oe();ie("@transitionMessages",t._subscriptAnimationState),ne(1),ie("ngIf",t.hintLabel)}}const oZ=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],aZ=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let lZ=0;const zB=new Se("MatError");let cZ=(()=>{class i{constructor(t,n){this.id="mat-error-"+lZ++,t||n.nativeElement.setAttribute("aria-live","polite")}}return i.\u0275fac=function(t){return new(t||i)(Oa("aria-live"),R(Wt))},i.\u0275dir=Le({type:i,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,n){2&t&&Qt("id",n.id)},inputs:{id:"id"},features:[Nn([{provide:zB,useExisting:i}])]}),i})();const uZ={transitionMessages:El("transitionMessages",[fs("enter",$n({opacity:1,transform:"translateY(0%)"})),Rs("void => enter",[$n({opacity:0,transform:"translateY(-5px)"}),eo("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Kw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i}),i})();const dZ=new Se("MatHint");let Sc=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["mat-label"]]}),i})(),hZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["mat-placeholder"]]}),i})();const fZ=new Se("MatPrefix"),pZ=new Se("MatSuffix");let HB=0;const gZ=Cv(class{constructor(i){this._elementRef=i}},"primary"),_Z=new Se("MAT_FORM_FIELD_DEFAULT_OPTIONS"),IT=new Se("MatFormField");let Xd=(()=>{class i extends gZ{constructor(t,n,r,s,o,a,l){super(t),this._changeDetectorRef=n,this._dir=r,this._defaults=s,this._platform=o,this._ngZone=a,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new He,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+HB++,this._labelId="mat-form-field-label-"+HB++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==l,this.appearance=s?.appearance||"legacy",s&&(this._hideRequiredMarker=Boolean(s.hideRequiredMarker),s.color&&(this.color=this.defaultColor=s.color))}get appearance(){return this._appearance}set appearance(t){const n=this._appearance;this._appearance=t||this._defaults?.appearance||"legacy","outline"===this._appearance&&n!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Gn(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(hs(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(at(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(at(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Ms(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(hs(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(hs(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(at(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const n=this._control?this._control.ngControl:null;return n&&n[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,pa(this._label.nativeElement,"transitionend").pipe(Si(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const n=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,r=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;n?t.push(n.id):this._hintLabel&&t.push(this._hintLabelId),r&&t.push(r.id)}else this._errorChildren&&t.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,n=this._connectionContainerRef.nativeElement,r=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const d=n.querySelectorAll(`${r}, ${s}`);for(let f=0;f<d.length;f++)d[f].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let o=0,a=0;const l=n.querySelectorAll(r),c=n.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const d=n.getBoundingClientRect();if(0===d.width&&0===d.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const f=this._getStartEnd(d),p=t.children,m=this._getStartEnd(p[0].getBoundingClientRect());let _=0;for(let b=0;b<p.length;b++)_+=p[b].offsetWidth;o=Math.abs(m-f)-5,a=_>0?.75*_+10:0}for(let d=0;d<l.length;d++)l[d].style.width=`${o}px`;for(let d=0;d<c.length;d++)c[d].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const n=t.getRootNode();return n&&n!==t}return document.documentElement.contains(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Qn),R(wu,8),R(_Z,8),R(wr),R(Et),R(Ks,8))},i.\u0275cmp=St({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,n,r){if(1&t&&(Ci(r,Kw,5),Ci(r,Kw,7),Ci(r,Sc,5),Ci(r,Sc,7),Ci(r,hZ,5),Ci(r,zB,5),Ci(r,dZ,5),Ci(r,fZ,5),Ci(r,pZ,5)),2&t){let s;$t(s=jt())&&(n._controlNonStatic=s.first),$t(s=jt())&&(n._controlStatic=s.first),$t(s=jt())&&(n._labelChildNonStatic=s.first),$t(s=jt())&&(n._labelChildStatic=s.first),$t(s=jt())&&(n._placeholderChild=s.first),$t(s=jt())&&(n._errorChildren=s),$t(s=jt())&&(n._hintChildren=s),$t(s=jt())&&(n._prefixChildren=s),$t(s=jt())&&(n._suffixChildren=s)}},viewQuery:function(t,n){if(1&t&&(qi(jY,7),qi(qY,5),qi(XY,5)),2&t){let r;$t(r=jt())&&(n._connectionContainerRef=r.first),$t(r=jt())&&(n._inputContainerRef=r.first),$t(r=jt())&&(n._label=r.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,n){2&t&&ui("mat-form-field-appearance-standard","standard"==n.appearance)("mat-form-field-appearance-fill","fill"==n.appearance)("mat-form-field-appearance-outline","outline"==n.appearance)("mat-form-field-appearance-legacy","legacy"==n.appearance)("mat-form-field-invalid",n._control.errorState)("mat-form-field-can-float",n._canLabelFloat())("mat-form-field-should-float",n._shouldLabelFloat())("mat-form-field-has-label",n._hasFloatingLabel())("mat-form-field-hide-placeholder",n._hideControlPlaceholder())("mat-form-field-disabled",n._control.disabled)("mat-form-field-autofilled",n._control.autofilled)("mat-focused",n._control.focused)("ng-untouched",n._shouldForward("untouched"))("ng-touched",n._shouldForward("touched"))("ng-pristine",n._shouldForward("pristine"))("ng-dirty",n._shouldForward("dirty"))("ng-valid",n._shouldForward("valid"))("ng-invalid",n._shouldForward("invalid"))("ng-pending",n._shouldForward("pending"))("_mat-animation-noopable",!n._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[Nn([{provide:IT,useExisting:i}]),ut],ngContentSelectors:aZ,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,n){1&t&&(Ys(oZ),ce(0,"div",0)(1,"div",1,2),ct("click",function(s){return n._control.onContainerClick&&n._control.onContainerClick(s)}),Fe(3,YY,9,0,"ng-container",3),Fe(4,ZY,2,1,"div",4),ce(5,"div",5,6),Yn(7),ce(8,"span",7),Fe(9,eZ,5,16,"label",8),he()(),Fe(10,tZ,2,0,"div",9),he(),Fe(11,nZ,2,4,"div",10),ce(12,"div",11),Fe(13,iZ,2,1,"div",12),Fe(14,sZ,5,2,"div",13),he()()),2&t&&(ne(3),ie("ngIf","outline"==n.appearance),ne(1),ie("ngIf",n._prefixChildren.length),ne(5),ie("ngIf",n._hasFloatingLabel()),ne(1),ie("ngIf",n._suffixChildren.length),ne(1),ie("ngIf","outline"!=n.appearance),ne(1),ie("ngSwitch",n._getDisplayedMessages()),ne(1),ie("ngSwitchCase","error"),ne(1),ie("ngSwitchCase","hint"))},dependencies:[lr,pp,qx,q7],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[uZ.transitionMessages]},changeDetection:0}),i})(),Jw=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[$a,Mn,T2,Mn]}),i})();const WB=Sp({passive:!0});let vZ=(()=>{class i{constructor(t,n){this._platform=t,this._ngZone=n,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Bs;const n=wc(t),r=this._monitoredElements.get(n);if(r)return r.subject;const s=new He,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||n.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,WB),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,WB)}}),s}stopMonitoring(t){const n=wc(t),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((t,n)=>this.stopMonitoring(n))}}return i.\u0275fac=function(t){return new(t||i)(j(wr),j(Et))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),$B=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const yZ=new Se("MAT_INPUT_VALUE_ACCESSOR"),bZ=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let xZ=0;const wZ=f3(class{constructor(i,e,t,n){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=t,this.ngControl=n,this.stateChanges=new He}});let Up=(()=>{class i extends wZ{constructor(t,n,r,s,o,a,l,c,d,f){super(a,s,o,r),this._elementRef=t,this._platform=n,this._autofillMonitor=c,this._formField=f,this._uid="mat-input-"+xZ++,this.focused=!1,this.stateChanges=new He,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>C2().has(_)),this._iOSKeyupListener=_=>{const b=_.target;!b.value&&0===b.selectionStart&&0===b.selectionEnd&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};const p=this._elementRef.nativeElement,m=p.nodeName.toLowerCase();this._inputValueAccessor=l||p,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===m,this._isTextarea="textarea"===m,this._isInFormField=!!f,this._isNativeSelect&&(this.controlType=p.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=Gn(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(cT.required)??!1}set required(t){this._required=Gn(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&C2().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Gn(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){const t=this._formField,n=t&&"legacy"===t.appearance&&!t._hasLabel?.()?null:this.placeholder;if(n!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=n,n?r.setAttribute("placeholder",n):r.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){bZ.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,n=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&n&&n.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(wr),R(Dl,10),R(Lv,8),R(Bp,8),R(eT),R(yZ,10),R(vZ),R(Et),R(IT,8))},i.\u0275dir=Le({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,n){1&t&&ct("focus",function(){return n._focusChanged(!0)})("blur",function(){return n._focusChanged(!1)})("input",function(){return n._onInput()}),2&t&&(sp("disabled",n.disabled)("required",n.required),Qt("id",n.id)("data-placeholder",n.placeholder)("name",n.name||null)("readonly",n.readonly&&!n._isNativeSelect||null)("aria-invalid",n.empty&&n.required?null:n.errorState)("aria-required",n.required),ui("mat-input-server",n._isServer)("mat-native-select-inline",n._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[Nn([{provide:Kw,useExisting:i}]),ut,oi]}),i})(),MZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[eT],imports:[$B,Jw,Mn,$B,Jw]}),i})();const CZ=["class","dialog"];function SZ(i,e){if(1&i&&(ce(0,"mat-form-field",7)(1,"mat-label"),ot(2),he(),bt(3,"input",8),he()),2&i){const t=e.$implicit;ne(2),Pi(t.title),ne(1),ie("id",t.id)("type",t.type)("formControlName",t.id)}}let EZ=(()=>{class i{constructor(t,n,r){this.dialogRef=t,this.fb=n,this.data=r;const s={};for(const o of r.args)s[o.id]=["",cT.required];this.argsForm=this.fb.group(s)}submit(){const t=this.argsForm.value;for(const n of this.data.args)"number"==n.type&&(t[n.id]=+t[n.id]);this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Iv),R($Y),R(oT))},i.\u0275cmp=St({type:i,selectors:[["app-run-custom-action",8,"dialog"]],attrs:CZ,decls:12,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],["appearance","fill"],["matInput","",3,"id","type","formControlName"]],template:function(t,n){1&t&&(ce(0,"h1",0),ot(1),he(),ce(2,"div",1)(3,"p"),ot(4),he()(),ce(5,"form",2),Fe(6,SZ,4,4,"mat-form-field",3),he(),ce(7,"div",4)(8,"button",5),ct("click",function(){return n.dialogRef.close()}),ot(9,"Cancel"),he(),ce(10,"button",6),ct("click",function(){return n.submit()}),ot(11,"Run"),he()()),2&t&&(ne(1),Xr('Run action "',n.data.title,'"'),ne(3),Pi(n.data.description),ne(1),ie("formGroup",n.argsForm),ne(1),ie("ngForOf",n.data.args),ne(4),ie("disabled",n.argsForm.invalid))},dependencies:[ua,wB,Mu,$d,aB,Xd,Sc,Up,Fp,I3,R3,P3,Bp,CT]}),i})(),Vp=(()=>{class i{constructor(t){this.ngZone=t,this.openedResource$=new wn(null),this.openedResourcePath$=new wn(null),eel.expose(this.wrapHandler(this.openFile),"open_file"),eel.on_angular_ready()}wrapHandler(t){return(...n)=>{try{Et.assertInAngularZone(),t.bind(this)(...n)}catch{this.ngZone.run(t,this,n)}}}openFile(t,n=!1){var r=this;return ei(function*(){r.openedResource$.next(null),r.openedResourcePath$.next(null);const s=yield eel.open_file(t,n)();r.openedResource$.next(s),r.openedResourcePath$.next(t)})()}runCustomAction(t,n,r){return ei(function*(){return eel.run_custom_action(t.block_id,n,r)()})()}saveFile(t){var n=this;return ei(function*(){return eel.save_file(n.openedResourcePath$.getValue(),t)()})()}serializeResource(t,n={}){return ei(function*(){return eel.serialize_resource(t,n)()})()}serializeResourceTmp(t,n,r={}){return ei(function*(){return eel.serialize_resource_tmp(t,n,r)()})()}deserializeResource(t){var n=this;return ei(function*(){n.openedResource$.next(yield eel.deserialize_resource(t)())})()}}return i.\u0275fac=function(t){return new(t||i)(j(Et))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var RT=Or(489);let Qw=(()=>{class i{constructor(t){this.eelDelegate=t,this.resourceData$=new wn(null),this.resourceError$=new wn(null),this.customActionRunning$=new wn(!1),this.changedDataBlocks={},this.dataBlockChange$=new He,this.eelDelegate.openedResource$.subscribe(n=>{this.clearUnsavedChanges(),n?n.block_class_mro?(this.resourceData$.next(n),this.resourceError$.next(null)):(this.resourceData$.next(null),this.resourceError$.next(n)):(this.resourceData$.next(null),this.resourceError$.next(null))}),this.dataBlockChange$.subscribe(([n,r])=>{void 0===r?delete this.changedDataBlocks[n]:this.changedDataBlocks[n]=r})}get hasUnsavedChanges(){return Object.keys(this.changedDataBlocks).length>0}clearUnsavedChanges(){Object.keys(this.changedDataBlocks).forEach(t=>{delete this.changedDataBlocks[t]})}runCustomAction(t,n,r){var s=this;return ei(function*(){s.customActionRunning$.next(!0);const o=yield s.eelDelegate.runCustomAction(t,n,r);if(o.error_class)throw s.customActionRunning$.next(!1),o;return RT.merge(t,o),s.changedDataBlocks.__custom_action_performed__=1,s.customActionRunning$.next(!1),o})()}}return i.\u0275fac=function(t){return new(t||i)(j(Vp))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function DZ(i,e){if(1&i){const t=yr();ce(0,"div",2)(1,"button",3),ct("click",function(){return pn(t),En(Oe().action())}),ot(2),he()()}if(2&i){const t=Oe();ne(2),Pi(t.data.action)}}function AZ(i,e){}const jB=new Se("MatSnackBarData");class eM{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const TZ=Math.pow(2,31)-1;class PT{constructor(e,t){this._overlayRef=t,this._afterDismissed=new He,this._afterOpened=new He,this._onAction=new He,this._dismissedByAction=!1,this.containerInstance=e,e._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(e){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(e,TZ))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let IZ=(()=>{class i{constructor(t,n){this.snackBarRef=t,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return i.\u0275fac=function(t){return new(t||i)(R(PT),R(jB))},i.\u0275cmp=St({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[[1,"mat-simple-snack-bar-content"],["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(t,n){1&t&&(ce(0,"span",0),ot(1),he(),Fe(2,DZ,3,1,"div",1)),2&t&&(ne(1),Pi(n.data.message),ne(1),ie("ngIf",n.hasAction))},dependencies:[lr,Fp],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}.mat-simple-snack-bar-content{overflow:hidden;text-overflow:ellipsis}"],encapsulation:2,changeDetection:0}),i})();const RZ={snackBarState:El("state",[fs("void, hidden",$n({transform:"scale(0.8)",opacity:0})),fs("visible",$n({transform:"scale(1)",opacity:1})),Rs("* => visible",eo("150ms cubic-bezier(0, 0, 0.2, 1)")),Rs("* => void, * => hidden",eo("75ms cubic-bezier(0.4, 0.0, 1, 1)",$n({opacity:0})))])};let PZ=(()=>{class i extends kw{constructor(t,n,r,s,o){super(),this._ngZone=t,this._elementRef=n,this._changeDetectorRef=r,this._platform=s,this.snackBarConfig=o,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new He,this._onExit=new He,this._onEnter=new He,this._animationState="void",this.attachDomPortal=a=>{this._assertNotAttached();const l=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),l},this._live="assertive"!==o.politeness||o.announcementMessage?"off"===o.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(t){this._assertNotAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._afterPortalAttached(),n}attachTemplatePortal(t){this._assertNotAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._afterPortalAttached(),n}onAnimationEnd(t){const{fromState:n,toState:r}=t;if(("void"===r&&"void"!==n||"hidden"===r)&&this._completeExit(),"visible"===r){const s=this._onEnter;this._ngZone.run(()=>{s.next(),s.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe(Si(1)).subscribe(()=>{this._ngZone.run(()=>{this._onExit.next(),this._onExit.complete()})})}_afterPortalAttached(){const t=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(r=>t.classList.add(r)):t.classList.add(n))}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const t=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(t&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&t.contains(document.activeElement)&&(r=document.activeElement),t.removeAttribute("aria-hidden"),n.appendChild(t),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return i.\u0275fac=function(t){return new(t||i)(R(Et),R(Wt),R(Qn),R(wr),R(eM))},i.\u0275dir=Le({type:i,viewQuery:function(t,n){if(1&t&&qi(Pp,7),2&t){let r;$t(r=jt())&&(n._portalOutlet=r.first)}},features:[ut]}),i})(),kZ=(()=>{class i extends PZ{_afterPortalAttached(){super._afterPortalAttached(),"center"===this.snackBarConfig.horizontalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&this._elementRef.nativeElement.classList.add("mat-snack-bar-top")}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275cmp=St({type:i,selectors:[["snack-bar-container"]],hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(t,n){1&t&&vx("@state.done",function(s){return n.onAnimationEnd(s)}),2&t&&bx("@state",n._animationState)},features:[ut],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(t,n){1&t&&(ce(0,"div",0),Fe(1,AZ,0,0,"ng-template",1),he(),bt(2,"div")),2&t&&(ne(2),Qt("aria-live",n._live)("role",n._role))},dependencies:[Pp],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}"],encapsulation:2,data:{animation:[RZ.snackBarState]}}),i})(),qB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Op,kp,$a,aT,Mn,Mn]}),i})();const XB=new Se("mat-snack-bar-default-options",{providedIn:"root",factory:function OZ(){return new eM}});let LZ=(()=>{class i{constructor(t,n,r,s,o,a){this._overlay=t,this._live=n,this._injector=r,this._breakpointObserver=s,this._parentSnackBar=o,this._defaultConfig=a,this._snackBarRefAtThisLevel=null}get _openedSnackBarRef(){const t=this._parentSnackBar;return t?t._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(t){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=t:this._snackBarRefAtThisLevel=t}openFromComponent(t,n){return this._attach(t,n)}openFromTemplate(t,n){return this._attach(t,n)}open(t,n="",r){const s={...this._defaultConfig,...r};return s.data={message:t,action:n},s.announcementMessage===t&&(s.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,s)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(t,n){const s=mi.create({parent:n&&n.viewContainerRef&&n.viewContainerRef.injector||this._injector,providers:[{provide:eM,useValue:n}]}),o=new Ip(this.snackBarContainerComponent,n.viewContainerRef,s),a=t.attach(o);return a.instance.snackBarConfig=n,a.instance}_attach(t,n){const r={...new eM,...this._defaultConfig,...n},s=this._createOverlay(r),o=this._attachSnackBarContainer(s,r),a=new PT(o,s);if(t instanceof Zs){const l=new Rp(t,null,{$implicit:r.data,snackBarRef:a});a.instance=o.attachTemplatePortal(l)}else{const l=this._createInjector(r,a),c=new Ip(t,void 0,l),d=o.attachComponentPortal(c);a.instance=d.instance}return this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait)").pipe(at(s.detachments())).subscribe(l=>{s.overlayElement.classList.toggle(this.handsetCssClass,l.matches)}),r.announcementMessage&&o._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(t,n){t.afterDismissed().subscribe(()=>{this._openedSnackBarRef==t&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{t.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):t.containerInstance.enter(),n.duration&&n.duration>0&&t.afterOpened().subscribe(()=>t._dismissAfter(n.duration))}_createOverlay(t){const n=new wv;n.direction=t.direction;let r=this._overlay.position().global();const s="rtl"===t.direction,o="left"===t.horizontalPosition||"start"===t.horizontalPosition&&!s||"end"===t.horizontalPosition&&s,a=!o&&"center"!==t.horizontalPosition;return o?r.left("0"):a?r.right("0"):r.centerHorizontally(),"top"===t.verticalPosition?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(t,n){return mi.create({parent:t&&t.viewContainerRef&&t.viewContainerRef.injector||this._injector,providers:[{provide:PT,useValue:n},{provide:jB,useValue:t.data}]})}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(W1),j(mi),j(Sw),j(i,12),j(XB))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),FZ=(()=>{class i extends LZ{constructor(t,n,r,s,o,a){super(t,n,r,s,o,a),this.simpleSnackBarComponent=IZ,this.snackBarContainerComponent=kZ,this.handsetCssClass="mat-snack-bar-handset"}}return i.\u0275fac=function(t){return new(t||i)(j(Qs),j(W1),j(mi),j(Sw),j(i,12),j(XB))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:qB}),i})();const NZ=["*",[["mat-toolbar-row"]]],BZ=["*","mat-toolbar-row"],UZ=Cv(class{constructor(i){this._elementRef=i}});let VZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),i})(),zZ=(()=>{class i extends UZ{constructor(t,n,r){super(t),this._platform=n,this._document=r}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(wr),R(kt))},i.\u0275cmp=St({type:i,selectors:[["mat-toolbar"]],contentQueries:function(t,n,r){if(1&t&&Ci(r,VZ,5),2&t){let s;$t(s=jt())&&(n._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,n){2&t&&ui("mat-toolbar-multiple-rows",n._toolbarRows.length>0)("mat-toolbar-single-row",0===n._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[ut],ngContentSelectors:BZ,decls:2,vars:0,template:function(t,n){1&t&&(Ys(NZ),Yn(0),Yn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),i})(),HZ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,Mn]}),i})();const GZ=["tooltip"],YB="tooltip-panel",ZB=Sp({passive:!0}),KB=new Se("mat-tooltip-scroll-strategy"),qZ={provide:KB,deps:[Qs],useFactory:function jZ(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},XZ=new Se("mat-tooltip-default-options",{providedIn:"root",factory:function YZ(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}});let ZZ=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d,f,p,m){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=o,this._platform=a,this._ariaDescriber=l,this._focusMonitor=c,this._dir=f,this._defaultOptions=p,this._position="below",this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new He,this._scrollStrategy=d,this._document=m,p&&(p.position&&(this.position=p.position),p.touchGestures&&(this.touchGestures=p.touchGestures)),f.change.pipe(at(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=fa(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=fa(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(at(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,ZB)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay){if(this.disabled||!this.message||this._isTooltipVisible()&&!this._tooltipInstance._showTimeoutId&&!this._tooltipInstance._hideTimeoutId)return;const n=this._createOverlay();this._detach(),this._portal=this._portal||new Ip(this._tooltipComponent,this._viewContainerRef);const r=this._tooltipInstance=n.attach(this._portal).instance;r._triggerElement=this._elementRef.nativeElement,r._mouseLeaveHideDelay=this._hideDelay,r.afterHidden().pipe(at(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),r.show(t)}hide(t=this.hideDelay){this._tooltipInstance&&this._tooltipInstance.hide(t)}toggle(){this._isTooltipVisible()?this.hide():this.show()}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(){if(this._overlayRef)return this._overlayRef;const t=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),n=this._overlay.position().flexibleConnectedTo(this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return n.positionChanges.pipe(at(this._destroyed)).subscribe(r=>{this._updateCurrentPositionClass(r.connectionPair),this._tooltipInstance&&r.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:n,panelClass:`${this._cssClassPrefix}-${YB}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(at(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(at(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(at(this._destroyed)).subscribe(r=>{this._isTooltipVisible()&&27===r.keyCode&&!ha(r)&&(r.preventDefault(),r.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:o}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:o}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:o}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:o}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Si(1),at(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:r,originY:s}=t;let o;if(o="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",o!==this._currentPosition){const a=this._overlayRef;if(a){const l=`${this._cssClassPrefix}-${YB}-`;a.removePanelClass(l+this._currentPosition),a.addPanelClass(l+o)}this._currentPosition=o}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",()=>{this._setupPointerExitEventsIfNeeded(),this.show()}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",()=>{this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,ZB)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,r=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(t){dc()},i.\u0275dir=Le({type:i,inputs:{position:["matTooltipPosition","position"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),kT=(()=>{class i extends ZZ{constructor(t,n,r,s,o,a,l,c,d,f,p,m){super(t,n,r,s,o,a,l,c,d,f,p,m),this._tooltipComponent=JZ}}return i.\u0275fac=function(t){return new(t||i)(R(Qs),R(Wt),R(X2),R(Yr),R(Et),R(wr),R(Q7),R(Mc),R(KB),R(wu,8),R(XZ,8),R(kt))},i.\u0275dir=Le({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-tooltip-trigger"],exportAs:["matTooltip"],features:[ut]}),i})(),KZ=(()=>{class i{constructor(t,n){this._changeDetectorRef=t,this._visibility="initial",this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new He,this._animationsDisabled="NoopAnimations"===n}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&this.hide(this._mouseLeaveHideDelay)}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const o=getComputedStyle(n);("0s"===o.getPropertyValue("animation-duration")||"none"===o.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return i.\u0275fac=function(t){return new(t||i)(R(Qn),R(Ks,8))},i.\u0275dir=Le({type:i}),i})(),JZ=(()=>{class i extends KZ{constructor(t,n,r){super(t,r),this._breakpointObserver=n,this._isHandset=this._breakpointObserver.observe("(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)"),this._showAnimation="mat-tooltip-show",this._hideAnimation="mat-tooltip-hide"}}return i.\u0275fac=function(t){return new(t||i)(R(Qn),R(Sw),R(Ks,8))},i.\u0275cmp=St({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(t,n){if(1&t&&qi(GZ,7),2&t){let r;$t(r=jt())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,n){1&t&&ct("mouseleave",function(s){return n._handleMouseLeave(s)}),2&t&&fc("zoom",n.isVisible()?1:null)},features:[ut],decls:4,vars:6,consts:[[1,"mat-tooltip",3,"ngClass","animationend"],["tooltip",""]],template:function(t,n){if(1&t&&(ce(0,"div",0,1),ct("animationend",function(s){return n._handleAnimationEnd(s)}),ai(2,"async"),ot(3),he()),2&t){let r;ui("mat-tooltip-handset",null==(r=gi(2,4,n._isHandset))?null:r.matches),ie("ngClass",n.tooltipClass),ne(3),Pi(n.message)}},dependencies:[Z_,mp],styles:[".mat-tooltip{color:#fff;border-radius:4px;margin:14px;max-width:250px;padding-left:8px;padding-right:8px;overflow:hidden;text-overflow:ellipsis;transform:scale(0)}.mat-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.cdk-high-contrast-active .mat-tooltip{outline:solid 1px}.mat-tooltip-handset{margin:24px;padding-left:16px;padding-right:16px}.mat-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-tooltip-show{0%{opacity:0;transform:scale(0)}50%{opacity:.5;transform:scale(0.99)}100%{opacity:1;transform:scale(1)}}@keyframes mat-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(1)}}.mat-tooltip-show{animation:mat-tooltip-show 200ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-tooltip-hide{animation:mat-tooltip-hide 100ms cubic-bezier(0, 0, 0.2, 1) forwards}"],encapsulation:2,changeDetection:0}),i})(),JB=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[qZ],imports:[W2,$a,Op,Mn,Mn,xv]}),i})();class QZ{}class Eu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),o=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let n=e[t];const r=t.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Eu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Eu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Eu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class eK{encodeKey(e){return QB(e)}encodeValue(e){return QB(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const nK=/%(\d[a-f0-9])/gi,iK={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function QB(i){return encodeURIComponent(i).replace(nK,(e,t)=>iK[t]??e)}function tM(i){return`${i}`}class Du{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new eK,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tK(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(tM):[tM(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Du({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(tM(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(tM(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rK{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function eU(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function tU(i){return typeof Blob<"u"&&i instanceof Blob}function nU(i){return typeof FormData<"u"&&i instanceof FormData}class Bv{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function sK(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Eu),this.context||(this.context=new rK),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new Du,this.urlWithParams=t}serializeBody(){return null===this.body?null:eU(this.body)||tU(this.body)||nU(this.body)||function oK(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Du?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nU(this.body)?null:tU(this.body)?this.body.type||null:eU(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Du?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const d=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),c)),new Bv(t,n,s,{params:c,headers:l,context:d,reportProgress:a,responseType:r,withCredentials:o})}}var Kr=(()=>((Kr=Kr||{})[Kr.Sent=0]="Sent",Kr[Kr.UploadProgress=1]="UploadProgress",Kr[Kr.ResponseHeader=2]="ResponseHeader",Kr[Kr.DownloadProgress=3]="DownloadProgress",Kr[Kr.Response=4]="Response",Kr[Kr.User=5]="User",Kr))();class OT extends class aK{constructor(e,t=200,n="OK"){this.headers=e.headers||new Eu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Kr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new OT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function LT(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let rU=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof Bv)s=t;else{let l,c;l=r.headers instanceof Eu?r.headers:new Eu(r.headers),r.params&&(c=r.params instanceof Du?r.params:new Du({fromObject:r.params})),s=new Bv(t,n,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:c,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=tt(s).pipe(bu(l=>this.handler.handle(l)));if(t instanceof Bv||"events"===r.observe)return o;const a=o.pipe(Dn(l=>l instanceof OT));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(Je(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(Je(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(Je(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(Je(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new Du).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,LT(r,n))}post(t,n,r={}){return this.request("POST",t,LT(r,n))}put(t,n,r={}){return this.request("PUT",t,LT(r,n))}}return i.\u0275fac=function(t){return new(t||i)(j(QZ))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();const cK=["*"];let nM;function Uv(i){return function uK(){if(void 0===nM&&(nM=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&(nM=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return nM}()?.createHTML(i)||i}function sU(i){return Error(`Unable to find icon with the name "${i}"`)}function oU(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function aU(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class Yd{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let iM=(()=>{class i{constructor(t,n,r,s){this._httpClient=t,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(t,n,r){return this.addSvgIconInNamespace("",t,n,r)}addSvgIconLiteral(t,n,r){return this.addSvgIconLiteralInNamespace("",t,n,r)}addSvgIconInNamespace(t,n,r,s){return this._addSvgIconConfig(t,n,new Yd(r,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,n,r,s){const o=this._sanitizer.sanitize(Rn.HTML,r);if(!o)throw aU(r);const a=Uv(o);return this._addSvgIconConfig(t,n,new Yd("",a,s))}addSvgIconSet(t,n){return this.addSvgIconSetInNamespace("",t,n)}addSvgIconSetLiteral(t,n){return this.addSvgIconSetLiteralInNamespace("",t,n)}addSvgIconSetInNamespace(t,n,r){return this._addSvgIconSetConfig(t,new Yd(n,null,r))}addSvgIconSetLiteralInNamespace(t,n,r){const s=this._sanitizer.sanitize(Rn.HTML,n);if(!s)throw aU(n);const o=Uv(s);return this._addSvgIconSetConfig(t,new Yd("",o,r))}registerFontClassAlias(t,n=t){return this._fontCssClassesByAlias.set(t,n),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const n=this._sanitizer.sanitize(Rn.RESOURCE_URL,t);if(!n)throw oU(t);const r=this._cachedIconsByUrl.get(n);return r?tt(rM(r)):this._loadSvgIconFromConfig(new Yd(t,null)).pipe(Hi(s=>this._cachedIconsByUrl.set(n,s)),Je(s=>rM(s)))}getNamedSvgIcon(t,n=""){const r=lU(n,t);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,t),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):_p(sU(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?tt(rM(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(Je(n=>rM(n)))}_getSvgFromIconSetConfigs(t,n){const r=this._extractIconWithNameFromAnySet(t,n);return r?tt(r):L3(n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(vc(a=>{const c=`Loading icon set URL: ${this._sanitizer.sanitize(Rn.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),tt(null)})))).pipe(Je(()=>{const o=this._extractIconWithNameFromAnySet(t,n);if(!o)throw sU(t);return o}))}_extractIconWithNameFromAnySet(t,n){for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,t,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(Hi(n=>t.svgText=n),Je(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?tt(null):this._fetchIcon(t).pipe(Hi(n=>t.svgText=n))}_extractSvgIconFromSet(t,n,r){const s=t.querySelector(`[id="${n}"]`);if(!s)return null;const o=s.cloneNode(!0);if(o.removeAttribute("id"),"svg"===o.nodeName.toLowerCase())return this._setSvgAttributes(o,r);if("symbol"===o.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(o),r);const a=this._svgElementFromString(Uv("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(t){const n=this._document.createElement("DIV");n.innerHTML=t;const r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(t){const n=this._svgElementFromString(Uv("<svg></svg>")),r=t.attributes;for(let s=0;s<r.length;s++){const{name:o,value:a}=r[s];"id"!==o&&n.setAttribute(o,a)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(t,n){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),n&&n.viewBox&&t.setAttribute("viewBox",n.viewBox),t}_fetchIcon(t){const{url:n,options:r}=t,s=r?.withCredentials??!1;if(!this._httpClient)throw function dK(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(Rn.RESOURCE_URL,n);if(!o)throw oU(n);const a=this._inProgressUrlFetches.get(o);if(a)return a;const l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Je(c=>Uv(c)),Fd(()=>this._inProgressUrlFetches.delete(o)),$m());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(t,n,r){return this._svgIconConfigs.set(lU(t,n),r),this}_addSvgIconSetConfig(t,n){const r=this._iconSetConfigs.get(t);return r?r.push(n):this._iconSetConfigs.set(t,[n]),this}_svgElementFromConfig(t){if(!t.svgElement){const n=this._svgElementFromString(t.svgText);this._setSvgAttributes(n,t.options),t.svgElement=n}return t.svgElement}_getIconConfigFromResolvers(t,n){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](n,t);if(s)return fK(s)?new Yd(s.url,null,s.options):new Yd(s,null)}}}return i.\u0275fac=function(t){return new(t||i)(j(rU,8),j(e1),j(kt,8),j(Fa))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function rM(i){return i.cloneNode(!0)}function lU(i,e){return i+":"+e}function fK(i){return!(!i.url||!i.options)}const pK=Cv(class{constructor(i){this._elementRef=i}}),mK=new Se("MAT_ICON_DEFAULT_OPTIONS"),gK=new Se("mat-icon-location",{providedIn:"root",factory:function _K(){const i=Hn(kt),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),cU=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],vK=cU.map(i=>`[${i}]`).join(", "),yK=/^url\(['"]?#(.*?)['"]?\)$/;let bK=(()=>{class i extends pK{constructor(t,n,r,s,o,a){super(t),this._iconRegistry=n,this._location=s,this._errorHandler=o,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Zt.EMPTY,a&&(a.color&&(this.color=this.defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=Gn(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const n=this._cleanupFontValue(t);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const n=this._cleanupFontValue(t);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let n=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){const r=t.childNodes[n];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>t.classList.remove(r)),n.forEach(r=>t.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${t}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(t){const n=t.querySelectorAll(vK),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)cU.forEach(o=>{const a=n[s],l=a.getAttribute(o),c=l?l.match(yK):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[n,r]=this._splitIconName(t);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Si(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${n}:${r}! ${s.message}`))})}}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(iM),Oa("aria-hidden"),R(gK),R(Fa),R(mK,8))},i.\u0275cmp=St({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,n){2&t&&(Qt("data-mat-icon-type",n._usingFontIcon()?"font":"svg")("data-mat-icon-name",n._svgName||n.fontIcon)("data-mat-icon-namespace",n._svgNamespace||n.fontSet),ui("mat-icon-inline",n.inline)("mat-icon-no-color","primary"!==n.color&&"accent"!==n.color&&"warn"!==n.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[ut],ngContentSelectors:cK,decls:1,vars:0,template:function(t,n){1&t&&(Ys(),Yn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),i})(),xK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,Mn]}),i})();function uU(i,e){return e?t=>ev(e.pipe(Si(1),function wK(){return kn((i,e)=>{i.subscribe(In(e,Qr))})}()),t.pipe(uU(i))):$i((t,n)=>mr(i(t,n)).pipe(Si(1),dN(t)))}function dU(i,e=ww){const t=X1(i,e);return uU(()=>t)}const MK=["mat-menu-item",""];function CK(i,e){1&i&&(vo(),ce(0,"svg",2),bt(1,"polygon",3),he())}const hU=["*"];function SK(i,e){if(1&i){const t=yr();ce(0,"div",0),ct("keydown",function(r){return pn(t),En(Oe()._handleKeydown(r))})("click",function(){return pn(t),En(Oe().closed.emit("click"))})("@transformMenu.start",function(r){return pn(t),En(Oe()._onAnimationStart(r))})("@transformMenu.done",function(r){return pn(t),En(Oe()._onAnimationDone(r))}),ce(1,"div",1),Yn(2),he()()}if(2&i){const t=Oe();ie("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),Qt("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const sM={transformMenu:El("transformMenu",[fs("void",$n({opacity:0,transform:"scale(0.8)"})),Rs("void => enter",eo("120ms cubic-bezier(0, 0, 0.2, 1)",$n({opacity:1,transform:"scale(1)"}))),Rs("* => void",eo("100ms 25ms linear",$n({opacity:0})))]),fadeInItems:El("fadeInItems",[fs("showing",$n({opacity:1})),Rs("void => *",[$n({opacity:0}),eo("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},EK=new Se("MatMenuContent"),FT=new Se("MAT_MENU_PANEL"),DK=Sv(Fw(class{}));let oM=(()=>{class i extends DK{constructor(t,n,r,s,o){super(),this._elementRef=t,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=o,this.role="menuitem",this._hovered=new He,this._focused=new He,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),n=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(kt),R(Mc),R(FT,8),R(Qn))},i.\u0275cmp=St({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,n){1&t&&ct("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&t&&(Qt("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled.toString())("disabled",n.disabled||null),ui("mat-menu-item",!0)("mat-menu-item-highlighted",n._highlighted)("mat-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ut],attrs:MK,ngContentSelectors:hU,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,n){1&t&&(Ys(),Yn(0),bt(1,"div",0),Fe(2,CK,2,0,"svg",1)),2&t&&(ne(1),ie("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),ne(1),ie("ngIf",n._triggersSubmenu))},dependencies:[lr,Dv],encapsulation:2,changeDetection:0}),i})();const fU=new Se("mat-menu-default-options",{providedIn:"root",factory:function AK(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let TK=0,Vv=(()=>{class i{constructor(t,n,r,s){this._elementRef=t,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new cp,this._tabSubscription=Zt.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new He,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new et,this.close=this.closed,this.panelId="mat-menu-panel-"+TK++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=Gn(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=Gn(t)}set panelClass(t){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new N2(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(hs(this._directDescendantItems),Ts(t=>Ms(...t.map(n=>n._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(hs(this._directDescendantItems),Ts(n=>Ms(...n.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const n=t.keyCode,r=this._keyManager;switch(n){case 27:ha(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._ngZone.onStable.pipe(Si(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const n=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(o=>o.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(hs(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Et),R(fU),R(Qn))},i.\u0275dir=Le({type:i,contentQueries:function(t,n,r){if(1&t&&(Ci(r,EK,5),Ci(r,oM,5),Ci(r,oM,4)),2&t){let s;$t(s=jt())&&(n.lazyContent=s.first),$t(s=jt())&&(n._allItems=s),$t(s=jt())&&(n.items=s)}},viewQuery:function(t,n){if(1&t&&qi(Zs,5),2&t){let r;$t(r=jt())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),IK=(()=>{class i extends Vv{constructor(t,n,r,s){super(t,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Et),R(fU),R(Qn))},i.\u0275cmp=St({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,n){2&t&&Qt("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[Nn([{provide:FT,useExisting:i}]),ut],ngContentSelectors:hU,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,n){1&t&&(Ys(),Fe(0,SK,3,6,"ng-template"))},dependencies:[Z_],styles:['mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px;position:relative}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[sM.transformMenu,sM.fadeInItems]},changeDetection:0}),i})();const pU=new Se("mat-menu-scroll-strategy"),PK={provide:pU,deps:[Qs],useFactory:function RK(i){return()=>i.scrollStrategies.reposition()}},mU=Sp({passive:!0});let kK=(()=>{class i{constructor(t,n,r,s,o,a,l,c,d){this._overlay=t,this._element=n,this._viewContainerRef=r,this._menuItemInstance=a,this._dir=l,this._focusMonitor=c,this._ngZone=d,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Zt.EMPTY,this._hoverSubscription=Zt.EMPTY,this._menuCloseSubscription=Zt.EMPTY,this._handleTouchStart=f=>{G1(f)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new et,this.onMenuOpen=this.menuOpened,this.menuClosed=new et,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=o instanceof Vv?o:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,mU),a&&(a._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})))}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,mU),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const n=this._createOverlay(t),r=n.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=t.hasBackdrop??!this.triggersSubmenu(),n.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof Vv&&(t._startAnimation(),t._directDescendantItems.changes.pipe(at(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof Vv?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Dn(r=>"void"===r.toState),Si(1),at(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let n=0,r=t.parentMenu;for(;r;)n++,r=r.parentMenu;t.setElevation(n)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_createOverlay(t){if(!this._overlayRef){const n=this._getOverlayConfig(t);this._subscribeToPositions(t,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new wv({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,n){t.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",o="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,o)):t.setPositionClasses(s,o)})}_setPosition(t,n){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[o,a]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[l,c]=[o,a],[d,f]=[r,s],p=0;if(this.triggersSubmenu()){if(f=r="before"===t.xPosition?"start":"end",s=d="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const m=this._parentMaterialMenu.items.first;this._parentInnerPadding=m?m._getHostElement().offsetTop:0}p="bottom"===o?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(l="top"===o?"bottom":"top",c="top"===a?"bottom":"top");n.withPositions([{originX:r,originY:l,overlayX:d,overlayY:o,offsetY:p},{originX:s,originY:l,overlayX:f,overlayY:o,offsetY:p},{originX:r,originY:c,overlayX:d,overlayY:a,offsetY:-p},{originX:s,originY:c,overlayX:f,overlayY:a,offsetY:-p}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return Ms(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:tt(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Dn(o=>o!==this._menuItemInstance),Dn(()=>this._menuOpen)):tt(),n)}_handleMousedown(t){H1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const n=t.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Dn(t=>t===this._menuItemInstance&&!t.disabled),dU(0,q1)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof Vv&&this.menu._isAnimating?this.menu._animationDone.pipe(Si(1),dU(0,q1),at(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new Rp(t.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(t){return new(t||i)(R(Qs),R(Wt),R(Yr),R(pU),R(FT,8),R(oM,10),R(wu,8),R(Mc),R(Et))},i.\u0275dir=Le({type:i,hostVars:3,hostBindings:function(t,n){1&t&&ct("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&t&&Qt("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen||null)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),OK=(()=>{class i extends kK{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275dir=Le({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[ut]}),i})(),LK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[PK],imports:[$a,Mn,Nw,Op,xv,Mn]}),i})(),gU=(()=>{class i{constructor(t){this.viewContainerRef=t}}return i.\u0275fac=function(t){return new(t||i)(R(Yr))},i.\u0275dir=Le({type:i,selectors:[["","dataBlockUI",""]]}),i})(),FK=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-fallback-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:2,vars:1,template:function(t,n){1&t&&(ce(0,"p"),ot(1),he()),2&t&&(ne(1),Xr("GUI component for block ",((null==n.resourceData?null:n.resourceData.block_class_mro)||"").split("__")[0]," not implemented :("))},changeDetection:0}),i})();function NK(i,e){if(1&i&&bt(0,"app-editor",1),2&i){const t=e.$implicit,n=Oe();ie("resourceData",null==n.resourceData?null:n.resourceData.value[t])("name",t)}}let aM=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}get fieldKeys(){return Object.keys(this.resourceData?.value||{})}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-compound-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[3,"resourceData","name",4,"ngFor","ngForOf"],[3,"resourceData","name"]],template:function(t,n){1&t&&Fe(0,NK,1,2,"app-editor",0),2&t&&ie("ngForOf",n.fieldKeys)},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;justify-content:space-around;column-gap:1rem}"],changeDetection:0}),i})();function BK(i,e){if(1&i){const t=yr();ce(0,"mat-form-field",1)(1,"mat-label"),ot(2),he(),ce(3,"input",2),ct("ngModelChange",function(r){return pn(t),En(Oe().resourceData.value=r)})("change",function(){return pn(t),En(Oe().changed.emit())}),he()()}if(2&i){const t=Oe();ne(2),Pi(t.name),ne(1),ie("max",t.resourceData.editor_validators.max_value)("min",t.resourceData.editor_validators.min_value)("step",t.resourceData.editor_validators.value_interval)("disabled",!(null==t.resourceData.block||!t.resourceData.block.required_value))("ngModel",t.resourceData.value)}}let UK=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-integer-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","type","number",3,"max","min","step","disabled","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Fe(0,BK,4,6,"mat-form-field",0),2&t&&ie("ngIf",n.resourceData)},dependencies:[lr,Mu,Nv,$d,AT,DT,jd,Xd,Sc,Up],changeDetection:0}),i})();function VK(i,e){if(1&i){const t=yr();ce(0,"mat-form-field",1)(1,"mat-label"),ot(2),he(),ce(3,"input",2),ct("ngModelChange",function(r){return pn(t),En(Oe().resourceData.value=r)})("change",function(){return pn(t),En(Oe().changed.emit())}),he()()}if(2&i){const t=Oe();ne(2),Pi(t.name),ne(1),ie("disabled",!(null==t.resourceData.block||!t.resourceData.block.required_value))("ngModel",t.resourceData.value)}}let zK=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-string-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],["matInput","","type","text",3,"disabled","ngModel","ngModelChange","change"]],template:function(t,n){1&t&&Fe(0,VK,4,3,"mat-form-field",0),2&t&&ie("ngIf",n.resourceData)},dependencies:[lr,Mu,$d,jd,Xd,Sc,Up],changeDetection:0}),i})();const Au=function(){return[]};function HK(i,e){if(1&i&&(ce(0,"mat-panel-description"),ot(1," Click to view items ("),ce(2,"b"),ot(3),he(),ot(4,") "),he()),2&i){const t=Oe(2);ne(3),Pi(((null==t.resourceData?null:t.resourceData.value)||aa(1,Au)).length)}}function GK(i,e){1&i&&(ce(0,"mat-panel-description"),ot(1," Empty array "),he())}function WK(i,e){}function $K(i,e){if(1&i){const t=yr();ce(0,"mat-expansion-panel",4),ct("opened",function(){return pn(t),En(Oe().onContentsTrigger(!0))})("closed",function(){return pn(t),En(Oe().onContentsTrigger(!1))}),ce(1,"mat-expansion-panel-header")(2,"mat-panel-title"),ot(3),he(),Fe(4,HK,5,2,"mat-panel-description",1),Fe(5,GK,2,0,"mat-panel-description",1),he(),Fe(6,WK,0,0,"ng-template",5),he()}if(2&i){const t=Oe(),n=bl(3);ne(3),Xr(" ",t.name," "),ne(1),ie("ngIf",((null==t.resourceData?null:t.resourceData.value)||aa(4,Au)).length>0),ne(1),ie("ngIf",0==((null==t.resourceData?null:t.resourceData.value)||aa(5,Au)).length),ne(1),ie("ngTemplateOutlet",n)}}function jK(i,e){}function qK(i,e){if(1&i&&(Io(0),ce(1,"h2"),ot(2),he(),ce(3,"div",6),Fe(4,jK,0,0,"ng-template",5),he(),Ro()),2&i){const t=Oe(),n=bl(3);ne(2),Pi(t.name),ne(2),ie("ngTemplateOutlet",n)}}function XK(i,e){}function YK(i,e){if(1&i&&(ce(0,"div",10),bt(1,"mat-divider",11),ce(2,"span",12),ot(3),he(),bt(4,"mat-divider",11),he()),2&i){const t=Oe(),n=t.$implicit,r=t.index;ne(3),Pi(n.block_id.split("__")[1]||r)}}function ZK(i,e){if(1&i&&(Io(0),Fe(1,YK,5,1,"div",8),bt(2,"app-editor",9),Ro()),2&i){const t=e.$implicit,n=e.index;ne(1),ie("ngIf",-1==(null==t||null==t.block_class_mro?null:t.block_class_mro.indexOf("Atomic"))),ne(1),ie("resourceData",t)("name",n.toString())}}function KK(i,e){}function JK(i,e){1&i&&(ce(0,"p"),ot(1,"Empty array"),he())}function QK(i,e){if(1&i&&(Io(0),Fe(1,XK,0,0,"ng-template",5),Fe(2,ZK,3,3,"ng-container",7),Fe(3,KK,0,0,"ng-template",5),Fe(4,JK,2,0,"p",1),Ro()),2&i){const t=Oe(2),n=bl(5);ne(1),ie("ngTemplateOutlet",n),ne(1),ie("ngForOf",t.renderItems),ne(1),ie("ngTemplateOutlet",n),ne(1),ie("ngIf",0==((null==t.resourceData?null:t.resourceData.value)||aa(4,Au)).length)}}function eJ(i,e){if(1&i&&(Io(0),ce(1,"p",13),ot(2),he(),Ro()),2&i){const t=Oe(2);ne(2),Xr("[",((null==t.resourceData?null:t.resourceData.value)||aa(1,Au)).join(", "),"]")}}function tJ(i,e){if(1&i&&(Fe(0,QK,5,5,"ng-container",1),Fe(1,eJ,3,2,"ng-container",1)),2&i){const t=Oe();ie("ngIf",(t.renderContents||!t.showAsCollapsable)&&!(null!=t.resourceData&&null!=t.resourceData.block&&null!=t.resourceData.block.child&&t.resourceData.block.child.simplified)),ne(1),ie("ngIf",(t.renderContents||!t.showAsCollapsable)&&(null==t.resourceData||null==t.resourceData.block||null==t.resourceData.block.child?null:t.resourceData.block.child.simplified))}}function nJ(i,e){if(1&i&&(ce(0,"mat-option",21),ot(1),he()),2&i){const t=e.$implicit,n=Oe(3);ie("value",t),ne(1),B_(" ",t*n.pageSize," - ",(t+1)*n.pageSize-1," ")}}const iJ=function(i){return{hidden:i}};function rJ(i,e){if(1&i){const t=yr();ce(0,"div",15)(1,"mat-paginator",16),ct("page",function(r){return pn(t),En(Oe(2).renderPage(r.pageIndex,r.pageSize))}),he(),ce(2,"div",17)(3,"div",18),ot(4,"Go To: "),he(),ce(5,"mat-form-field")(6,"mat-select",19),ct("ngModelChange",function(r){return pn(t),En(Oe(2).goToIndex=r)})("selectionChange",function(){pn(t);const r=Oe(2);return En(r.renderPage(r.goToIndex,r.pageSize))}),Fe(7,nJ,2,3,"mat-option",20),he()()()()}if(2&i){const t=Oe(2);ie("ngClass",Ex(9,iJ,((null==t.resourceData?null:t.resourceData.value)||aa(8,Au)).length<=t.minPageSize)),ne(1),ie("length",((null==t.resourceData?null:t.resourceData.value)||aa(11,Au)).length)("pageSize",t.pageSize)("pageIndex",t.pageIndex)("pageSizeOptions",t.pageSizeOptions)("showFirstLastButtons",!0),ne(5),ie("ngModel",t.goToIndex),ne(1),ie("ngForOf",t.pageIndexes)}}function sJ(i,e){if(1&i&&Fe(0,rJ,8,12,"div",14),2&i){const t=Oe();ie("ngIf",((null==t.resourceData?null:t.resourceData.value)||aa(1,Au)).length>0)}}let _U=(()=>{class i{constructor(t){this.cdr=t,this._resourceData=null,this.name="",this.changed=new et,this.showAsCollapsable=!1,this.renderContents=!1,this.minPageSize=10,this.pageIndex=0,this.pageSize=10,this.pageSizeOptions=[10,25,50,100],this.renderItems=[],this.goToIndex=0,this.pageIndexes=[]}get resourceData(){return this._resourceData}set resourceData(t){this._resourceData=t,this.showAsCollapsable=this._resourceData?.value?.length>5,this.updatePageIndexes(),this.renderPage(0,this.minPageSize)}onContentsTrigger(t){void 0!==this.contentsTimeout&&(clearTimeout(this.contentsTimeout),this.contentsTimeout=void 0),t?(this.renderContents=!0,this.cdr.markForCheck()):this.contentsTimeout=setTimeout(()=>{this.contentsTimeout=void 0,this.renderContents=!1,this.cdr.markForCheck()},2e3)}renderPage(t,n){this.goToIndex=this.pageIndex=t,this.pageSize=n,this.renderItems=(this.resourceData?.value||[]).slice(t*n,(t+1)*n).map(r=>r.block?r:{...r,block:this.resourceData?.block.child}),this.cdr.markForCheck()}updatePageIndexes(){this.goToIndex=this.pageIndex,this.pageIndexes=[];for(let t=0;t<Math.ceil((this.resourceData?.value||[]).length/this.pageSize);t++)this.pageIndexes.push(t)}}return i.\u0275fac=function(t){return new(t||i)(R(Qn))},i.\u0275cmp=St({type:i,selectors:[["app-array-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:6,vars:2,consts:[[3,"opened","closed",4,"ngIf"],[4,"ngIf"],["contents",""],["paginator",""],[3,"opened","closed"],[3,"ngTemplateOutlet"],[1,"mat-expansion-panel-body"],[4,"ngFor","ngForOf"],["class","divider",4,"ngIf"],[3,"resourceData","name"],[1,"divider"],[2,"width","50%","display","inline-block"],[2,"padding","20px","font-weight","500"],[2,"word-break","break-word","max-width","100%"],["id","pagination-wrapper",3,"ngClass",4,"ngIf"],["id","pagination-wrapper",3,"ngClass"],["aria-label","Select page",3,"length","pageSize","pageIndex","pageSizeOptions","showFirstLastButtons","page"],[1,"go-to-container"],[1,"go-to-label"],[3,"ngModel","ngModelChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(Fe(0,$K,7,6,"mat-expansion-panel",0),Fe(1,qK,5,2,"ng-container",1),Fe(2,tJ,2,2,"ng-template",null,2,fA),Fe(4,sJ,1,2,"ng-template",null,3,fA)),2&t&&(ie("ngIf",n.showAsCollapsable),ne(1),ie("ngIf",!n.showAsCollapsable))},styles:["[_nghost-%COMP%]{width:100%;padding-bottom:1.34375em;margin:0 1rem}.divider[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;align-items:center}  .mat-expansion-panel-body{display:flex;justify-content:space-evenly;column-gap:1rem;flex-wrap:wrap}#pagination-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:flex-end}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]{display:flex;align-items:baseline;background:white}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:6rem;margin:6px 4px 0;font-size:12px}#pagination-wrapper[_ngcontent-%COMP%]   .go-to-container[_ngcontent-%COMP%]   .go-to-label[_ngcontent-%COMP%]{margin:0 4px;font-size:12px;color:#0000008a;font-family:Roboto,Helvetica Neue,sans-serif}"],changeDetection:0}),i})();function oJ(i,e){if(1&i){const t=yr();Io(0),ce(1,"input",5),ct("change",function(){return pn(t),En(Oe(2).changed.emit())})("ngModelChange",function(r){const o=pn(t).index,a=Oe(2);return En((null==a.resourceData?null:a.resourceData.value.unknowns.value[o]).value=r)}),he(),Ro()}if(2&i){const t=e.index,n=Oe(2);ne(1),ie("ngModel",null==n.resourceData?null:n.resourceData.value.unknowns.value[t].value)}}const aJ=function(){return[]};function lJ(i,e){if(1&i&&(ce(0,"div",3),ot(1," Unknowns: "),Fe(2,oJ,2,1,"ng-container",4),ai(3,"async"),he()),2&i){const t=Oe();let n;ne(2),ie("ngForOf",aa(3,aJ).constructor(null==(n=gi(3,1,t._resourceData$))?null:n.value.unknowns.value.length))}}function cJ(i,e){1&i&&(bt(0,"img",6),ai(1,"async")),2&i&&ie("src",gi(1,1,Oe().imageUrl$),Af)}function uJ(i,e){if(1&i&&(bt(0,"app-editor",7),ai(1,"async")),2&i){let n;ie("resourceData",null==(n=gi(1,1,Oe()._resourceData$))||null==n.value?null:n.value.palette)}}let vU=(()=>{class i{constructor(t,n){this.eelDelegate=t,this.cdr=n,this._resourceData$=new wn(null),this.imageUrl$=new wn(null),this.name="",this.destroyed$=new He,this.changed=new et}set resourceData(t){this._resourceData$.next(t)}get resourceData(){return this._resourceData$.getValue()}ngAfterViewInit(){var t=this;return ei(function*(){t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var n=ei(function*(r){if(r){const[s]=yield t.eelDelegate.serializeResource(r.block_id);t.imageUrl$.next(s)}else t.imageUrl$.next(null)});return function(r){return n.apply(this,arguments)}}())})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(Vp),R(Qn))},i.\u0275cmp=St({type:i,selectors:[["app-bitmap-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:7,vars:11,consts:[["class","number-matrix",4,"ngIf"],[3,"src",4,"ngIf"],[3,"resourceData",4,"ngIf"],[1,"number-matrix"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"ngModel","change","ngModelChange"],[3,"src"],[3,"resourceData"]],template:function(t,n){if(1&t&&(Fe(0,lJ,4,4,"div",0),ai(1,"async"),Fe(2,cJ,2,3,"img",1),ai(3,"async"),Fe(4,uJ,2,3,"app-editor",2),ai(5,"async"),ai(6,"async")),2&t){let r;ie("ngIf",gi(1,3,n._resourceData$)),ne(2),ie("ngIf",gi(3,5,n.imageUrl$)),ne(2),ie("ngIf",(null==(r=gi(5,7,n._resourceData$))||null==r.value?null:r.value.palette)&&124!=(null==(r=gi(6,9,n._resourceData$))||null==r.value||null==r.value.palette||null==r.value.palette.value||null==r.value.palette.value.resource_id?null:r.value.palette.value.resource_id.value))}},styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center;flex-direction:column;align-items:center;row-gap:1rem}.number-matrix[_ngcontent-%COMP%]{display:flex;margin:0 0 16px}img[_ngcontent-%COMP%]{min-width:10rem}#actions[_ngcontent-%COMP%]{display:flex;column-gap:1rem}"],changeDetection:0}),i})();function dJ(i,e){if(1&i){const t=yr();Io(0),ce(1,"input",5),ct("change",function(){return pn(t),En(Oe(2).changed.emit())})("ngModelChange",function(r){const o=pn(t).index;return En(Oe(2).resourceData.value.unknowns.value[o]=r)}),he(),Ro()}if(2&i){const t=e.index,n=Oe(2);ne(1),ie("ngModel",n.resourceData.value.unknowns.value[t])}}const hJ=function(){return[]};function fJ(i,e){if(1&i&&(ce(0,"div",3),ot(1," Unknowns: "),Fe(2,dJ,2,1,"ng-container",4),he()),2&i){const t=Oe();ne(2),ie("ngForOf",aa(1,hJ).constructor(t.resourceData.value.unknowns.value.length))}}const pJ=function(i){return{"background-color":i}};function mJ(i,e){if(1&i&&bt(0,"div",6),2&i){const t=e.$implicit,n=e.index,r=Oe();ie("ngStyle",Ex(2,pJ,"#"+r.lpad(t.value.toString(16),"0",8)))("matTooltip",n+": #"+t.value.toString(16))}}let gJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}lpad(t,n,r){for(;t.length<r;)t=n+t;return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-palette-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:5,vars:3,consts:[["class","number-matrix",4,"ngIf"],["id","colors-container"],["class","color-box",3,"ngStyle","matTooltip",4,"ngFor","ngForOf"],[1,"number-matrix"],[4,"ngFor","ngForOf"],["matInput","","type","number",3,"ngModel","change","ngModelChange"],[1,"color-box",3,"ngStyle","matTooltip"]],template:function(t,n){1&t&&(ce(0,"h1"),ot(1),he(),Fe(2,fJ,3,2,"div",0),ce(3,"div",1),Fe(4,mJ,1,4,"div",2),he()),2&t&&(ne(1),Pi(((null==n.resourceData?null:n.resourceData.block_class_mro)||"").split("__")[0]),ne(1),ie("ngIf",n.resourceData),ne(2),ie("ngForOf",null==n.resourceData?null:n.resourceData.value.colors.value))},dependencies:[ua,lr,$A,Mu,Nv,$d,jd,Up,kT],styles:[".number-matrix[_ngcontent-%COMP%]{display:flex;margin:0 0 16px}#colors-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.color-box[_ngcontent-%COMP%]{border:solid .1rem;outline:solid .1rem;width:2rem;height:2rem}"],changeDetection:0}),i})();const _J=["editor"];let vJ=(()=>{class i{constructor(t){this.cdr=t,this._resourceData=null,this.name="",this.changed=new et,this.editorProps={}}get resourceData(){return this._resourceData}set resourceData(t){this._resourceData=t,this.editor&&(this.editorProps.data=t?new Uint8Array(t.value):void 0,this.editor.$set({props:{data:this.editorProps.data}}),this.cdr.markForCheck())}ngAfterViewInit(){this.resourceData&&(this.editorProps.data=new Uint8Array(this.resourceData.value)),this.editor=new HexEditor({target:this.editorDiv?.nativeElement,props:this.editorProps}),this.cdr.markForCheck()}ngOnDestroy(){this.editor&&this.editor.$destroy()}}return i.\u0275fac=function(t){return new(t||i)(R(Qn))},i.\u0275cmp=St({type:i,selectors:[["app-binary-block-ui"]],viewQuery:function(t,n){if(1&t&&qi(_J,5),2&t){let r;$t(r=jt())&&(n.editorDiv=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:4,vars:0,consts:[["editor",""]],template:function(t,n){1&t&&(ce(0,"p"),ot(1,"binary.block-ui works!"),he(),bt(2,"div",null,0))},changeDetection:0}),i})();const yJ=["picker"],bJ=function(i){return{transform:i}};let xJ=(()=>{class i{constructor(t){this.cdr=t,this.resourceData=null,this.name="",this.changed=new et,this.pi=Math.PI,this.dragging=!1}mousedown(t){this.dragging=!0,this.updateRotation(t)}mousemove(t){this.dragging&&this.updateRotation(t)}mouseout(){this.dragging=!1}updateRotation(t){const n=this.picker.nativeElement.getBoundingClientRect();let r=Math.atan2(t.clientY-n.top-n.height/2,t.clientX-n.left-n.width/2);t.shiftKey&&(r=15*Math.round(180*r/Math.PI/15)*Math.PI/180),this.resourceData.value=r,this.changed.emit(),this.cdr.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(R(Qn))},i.\u0275cmp=St({type:i,selectors:[["app-angle-block-ui"]],viewQuery:function(t,n){if(1&t&&qi(yJ,5),2&t){let r;$t(r=jt())&&(n.picker=r.first)}},hostBindings:function(t,n){1&t&&ct("mousedown",function(s){return n.mousedown(s)})("mousemove",function(s){return n.mousemove(s)})("mouseup",function(){return n.mouseout()})("mouseleave",function(){return n.mouseout()})},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:14,vars:12,consts:[[1,"circle-container"],["picker",""],[1,"ui-anglepicker-pointer",3,"ngStyle"],[1,"ui-anglepicker-dot"],[1,"ui-anglepicker-line"],["id","labels"],["id","name-span"]],template:function(t,n){1&t&&(ce(0,"div",0,1)(2,"div",2),bt(3,"div",3)(4,"div",4),he()(),ce(5,"div",5)(6,"mat-label",6),ot(7),he(),ce(8,"mat-label"),ot(9),ai(10,"number"),he(),ce(11,"mat-label"),ot(12),ai(13,"number"),he()()),2&t&&(ne(2),ie("ngStyle",Ex(10,bJ,"rotate("+((null==n.resourceData?null:n.resourceData.value)||0)+"rad)")),ne(5),Pi(n.name),ne(2),Xr("",sA(10,4,180*(null==n.resourceData?null:n.resourceData.value)/n.pi||0,"1.2-2")," deg"),ne(3),Xr("",sA(13,7,(null==n.resourceData?null:n.resourceData.value)||0,"1.2-2")," rad"))},dependencies:[$A,Sc,OF],styles:["[_nghost-%COMP%]{display:flex;padding-bottom:1.34375em}#name-span[_ngcontent-%COMP%]{font-weight:500}.circle-container[_ngcontent-%COMP%]{width:52px;height:52px;background:rgba(0,0,0,.04);border:1px solid rgba(0,0,0,.6);border-radius:50%;position:relative;display:inline-block}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:50%;margin:-2px 0 0 -2px;transform-origin:2px 2px}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-dot[_ngcontent-%COMP%]{height:4px;width:4px;position:absolute;background:#838383;border-radius:50%}.circle-container[_ngcontent-%COMP%]   .ui-anglepicker-pointer[_ngcontent-%COMP%]   .ui-anglepicker-line[_ngcontent-%COMP%]{margin-top:1.5px;margin-right:-2px;height:1px;background:#838383}#labels[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-left:1rem;min-width:6rem}"],changeDetection:0}),i})(),yU=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}get resourcesMap(){const t={};for(let n=0;n<this.resourceData?.value.children_descriptions?.value.length;n++){const r=this.resourceData?.value.children_descriptions?.value[n].value.name.value;t[r]=this.resourceData?.value.children?.value[n]}return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-shpi-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:5,vars:3,consts:[["id","top-bar"],[1,"plain-editor",3,"resourceData","name"],[3,"resources"]],template:function(t,n){1&t&&(ce(0,"div",0)(1,"h1"),ot(2,"SHPI archive"),he(),bt(3,"app-editor",1),he(),bt(4,"app-sidenav-res-list",2)),2&t&&(ne(3),ie("resourceData",null==n.resourceData||null==n.resourceData.value?null:n.resourceData.value.shpi_directory)("name","shpi_directory"),ne(1),ie("resources",n.resourcesMap))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   app-sidenav-res-list[_ngcontent-%COMP%]{height:calc(100% - 4rem)}"],changeDetection:0}),i})();class bU{constructor(){}deepEquals(e,t){if(null===e&&null!==t)return!1;if(null===t&&null!==e)return!1;if(!0===Array.isArray(e)){if(!1===Array.isArray(t))return!1;if(e.length!==t.length)return!1;{const n=new Set,r=new Set,s=new Set,o=new Set;for(const f of e)!0===Array.isArray(f)?n.add(f):"object"==typeof f?r.add(f):"function"==typeof f?o.add(JSON.stringify(""+f)):s.add(f);const a=new Set,l=new Set,c=new Set,d=new Set;for(const f of t)!0===Array.isArray(f)?a.add(f):"object"==typeof f?l.add(f):"function"==typeof f?d.add(JSON.stringify(""+f)):c.add(f);if(s.size!==c.size)return!1;{let f=!0;for(const p of s)if(!1===c.has(p)){f=!1;break}if(!1===f)return!1;if(r.size===l.size){f=!0;for(const p of r){let m=!1;for(const _ of l)if(!0===this.deepEquals(p,_)){m=!0;break}if(!1===m){f=!1;break}}if(!1===f)return!1;if(n.size===a.size){f=!0;for(const p of n){let m=!1;for(const _ of a)if(!0===this.deepEquals(p,_)){m=!0;break}if(!1===m){f=!1;break}}if(!1===f)return!1;if(o.size===d.size){f=!0;for(const p of o)if(!1===d.has(p)){f=!1;break}return!1!==f}return!1}return!1}return!1}}}if("object"==typeof e&&null!==e){if("object"!=typeof t)return!1;{let n=!0;if(Object.keys(e).length===Object.keys(t).length){for(const[r,s]of Object.entries(e))if(n=this.deepEquals(s,t[r]),!1===n)break}else n=!1;return n}}return!0!==Array.isArray(t)&&("object"!=typeof t||null===t)&&("function"==typeof e?"function"==typeof t&&JSON.stringify(""+e)===JSON.stringify(""+t):JSON.stringify(e)===JSON.stringify(t))}}function wJ(i,e){if(1&i&&(ce(0,"mat-list-option",3),ot(1),he()),2&i){const t=e.$implicit,n=Oe();ie("value",t)("selected",n.selectedValue==t),ne(1),Xr(" ",t," ")}}function MJ(i,e){if(1&i&&(ce(0,"mat-card"),bt(1,"app-editor",4),he()),2&i){const t=Oe();ne(1),ie("name",t.selectedValue)("resourceData",t.resources[t.selectedValue])}}let NT=(()=>{class i{constructor(t){this.deep=t,this._resources={},this._selectedValue=null}get resources(){return this._resources}set resources(t){const n=!this._resources||!this.deep.deepEquals(Object.keys(this._resources),Object.keys(t));this._resources=t,n&&(this.selectedValue=Object.keys(t).length>0?Object.keys(t)[0]:null)}set selectedValue(t){this._selectedValue=t}get selectedValue(){return this._selectedValue}get keys(){return Object.keys(this.resources)}}return i.\u0275fac=function(t){return new(t||i)(R(bU))},i.\u0275cmp=St({type:i,selectors:[["app-sidenav-res-list"]],inputs:{resources:"resources"},decls:3,vars:3,consts:[[3,"multiple","selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","selected"],[3,"name","resourceData"]],template:function(t,n){1&t&&(ce(0,"mat-selection-list",0),ct("selectionChange",function(s){return n.selectedValue=s.source.selectedOptions.selected[0].value}),Fe(1,wJ,2,3,"mat-list-option",1),he(),Fe(2,MJ,2,2,"mat-card",2)),2&t&&(ie("multiple",!1),ne(1),ie("ngForOf",n.keys),ne(1),ie("ngIf",n.selectedValue))},styles:["[_nghost-%COMP%]{display:flex;align-items:flex-start;column-gap:1rem;height:inherit}[_nghost-%COMP%]   mat-selection-list[_ngcontent-%COMP%]{height:100%;overflow-y:auto;width:12rem;max-width:33%;flex-shrink:0}[_nghost-%COMP%]   mat-card[_ngcontent-%COMP%]{width:100%;height:100%}"]}),i})(),CJ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}get resourcesMap(){const t={};for(let n=0;n<this.resourceData?.value.children?.value.length;n++)t[n.toString()]=this.resourceData?.value.children?.value[n];return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-wwww-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:4,vars:1,consts:[["id","top-bar"],[3,"resources"]],template:function(t,n){1&t&&(ce(0,"div",0)(1,"h1"),ot(2,"Wwww archive"),he()(),bt(3,"app-sidenav-res-list",1)),2&t&&(ne(3),ie("resources",n.resourcesMap))},dependencies:[NT],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   #top-bar[_ngcontent-%COMP%]{flex-grow:0;display:flex;flex-direction:row;align-items:center;column-gap:2rem}[_nghost-%COMP%]   app-sidenav-res-list[_ngcontent-%COMP%]{height:calc(100% - 4rem)}"],changeDetection:0}),i})();class BT{constructor(e=!1,t,n=!0,r){this._multiple=e,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new He,t&&t.length&&(e?t.forEach(s=>this._markSelected(s)):this._markSelected(t[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...e){this._verifyValueAssignment(e),e.forEach(n=>this._markSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}deselect(...e){this._verifyValueAssignment(e),e.forEach(n=>this._unmarkSelected(n));const t=this._hasQueuedChanges();return this._emitChangeEvent(),t}setSelection(...e){this._verifyValueAssignment(e);const t=this.selected,n=new Set(e);e.forEach(s=>this._markSelected(s)),t.filter(s=>!n.has(s)).forEach(s=>this._unmarkSelected(s));const r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(e){return this.isSelected(e)?this.deselect(e):this.select(e)}clear(e=!0){this._unmarkAll();const t=this._hasQueuedChanges();return e&&this._emitChangeEvent(),t}isSelected(e){if(this.compareWith){for(const t of this._selection)if(this.compareWith(t,e))return!0;return!1}return this._selection.has(e)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(e){this._multiple&&this.selected&&this._selected.sort(e)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(e){this.isSelected(e)||(this._multiple||this._unmarkAll(),this.isSelected(e)||this._selection.add(e),this._emitChanges&&this._selectedToEmit.push(e))}_unmarkSelected(e){this.isSelected(e)&&(this._selection.delete(e),this._emitChanges&&this._deselectedToEmit.push(e))}_unmarkAll(){this.isEmpty()||this._selection.forEach(e=>this._unmarkSelected(e))}_verifyValueAssignment(e){}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}}let xU=(()=>{class i{constructor(){this._listeners=[]}notify(t,n){for(let r of this._listeners)r(t,n)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(n=>t!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const SJ=["trigger"],EJ=["panel"];function DJ(i,e){if(1&i&&(ce(0,"span",8),ot(1),he()),2&i){const t=Oe();ne(1),Pi(t.placeholder)}}function AJ(i,e){if(1&i&&(ce(0,"span",12),ot(1),he()),2&i){const t=Oe(2);ne(1),Pi(t.triggerValue)}}function TJ(i,e){1&i&&Yn(0,0,["*ngSwitchCase","true"])}function IJ(i,e){1&i&&(ce(0,"span",9),Fe(1,AJ,2,1,"span",10),Fe(2,TJ,1,0,"ng-content",11),he()),2&i&&(ie("ngSwitch",!!Oe().customTrigger),ne(2),ie("ngSwitchCase",!0))}function RJ(i,e){if(1&i){const t=yr();ce(0,"div",13)(1,"div",14,15),ct("@transformPanel.done",function(r){return pn(t),En(Oe()._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){return pn(t),En(Oe()._handleKeydown(r))}),Yn(3,1),he()()}if(2&i){const t=Oe();ie("@transformPanelWrap",void 0),ne(1),fO("mat-select-panel ",t._getPanelTheme(),""),fc("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),ie("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),Qt("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}}const PJ=[[["mat-select-trigger"]],"*"],kJ=["mat-select-trigger","*"],wU={transformPanelWrap:El("transformPanelWrap",[Rs("* => void",rT("@transformPanel",[iT()],{optional:!0}))]),transformPanel:El("transformPanel",[fs("void",$n({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),fs("showing",$n({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),fs("showing-multiple",$n({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),Rs("void => *",eo("120ms cubic-bezier(0, 0, 0.2, 1)")),Rs("* => void",eo("100ms 25ms linear",$n({opacity:0})))])};let MU=0;const SU=new Se("mat-select-scroll-strategy"),NJ=new Se("MAT_SELECT_CONFIG"),BJ={provide:SU,deps:[Qs],useFactory:function FJ(i){return()=>i.scrollStrategies.reposition()}};class UJ{constructor(e,t){this.source=e,this.value=t}}const VJ=Sv(h3(Fw(f3(class{constructor(i,e,t,n,r){this._elementRef=i,this._defaultErrorStateMatcher=e,this._parentForm=t,this._parentFormGroup=n,this.ngControl=r,this.stateChanges=new He}})))),zJ=new Se("MatSelectTrigger");let HJ=(()=>{class i extends VJ{constructor(t,n,r,s,o,a,l,c,d,f,p,m,_,b){super(o,s,l,c,f),this._viewportRuler=t,this._changeDetectorRef=n,this._ngZone=r,this._dir=a,this._parentFormField=d,this._liveAnnouncer=_,this._defaultOptions=b,this._panelOpen=!1,this._compareWith=(y,v)=>y===v,this._uid="mat-select-"+MU++,this._triggerAriaLabelledBy=null,this._destroy=new He,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+MU++,this._panelDoneAnimatingStream=new He,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this._multiple=!1,this._disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.optionSelectionChanges=tv(()=>{const y=this.options;return y?y.changes.pipe(hs(y),Ts(()=>Ms(...y.map(v=>v.onSelectionChange)))):this._ngZone.onStable.pipe(Si(1),Ts(()=>this.optionSelectionChanges))}),this.openedChange=new et,this._openedStream=this.openedChange.pipe(Dn(y=>y),Je(()=>{})),this._closedStream=this.openedChange.pipe(Dn(y=>!y),Je(()=>{})),this.selectionChange=new et,this.valueChange=new et,this.ngControl&&(this.ngControl.valueAccessor=this),null!=b?.typeaheadDebounceInterval&&(this._typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(p)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(cT.required)??!1}set required(t){this._required=Gn(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=Gn(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=Gn(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){this._assignValue(t)&&this._onChange(t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=fa(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new BT(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Mw(),at(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(at(this._destroy)).subscribe(t=>{t.added.forEach(n=>n.select()),t.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(hs(null),at(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby(),n=this.ngControl;if(t!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?r.setAttribute("aria-labelledby",t):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(void 0!==this._previousControl&&null!==n.disabled&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(t){(t.disabled||t.userAriaDescribedBy)&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this._assignValue(t)}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const n=t.keyCode,r=40===n||38===n||37===n||39===n,s=13===n||32===n,o=this._keyManager;if(!o.isTyping()&&s&&!ha(t)||(this.multiple||t.altKey)&&r)t.preventDefault(),this.open();else if(!this.multiple){const a=this.selected;o.onKeydown(t);const l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(t){const n=this._keyManager,r=t.keyCode,s=40===r||38===r,o=n.isTyping();if(s&&t.altKey)t.preventDefault(),this.close();else if(o||13!==r&&32!==r||!n.activeItem||ha(t))if(!o&&this._multiple&&65===r&&t.ctrlKey){t.preventDefault();const a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{const a=n.activeItemIndex;n.onKeydown(t),this._multiple&&s&&t.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}else t.preventDefault(),n.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Si(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{const n=this._selectOptionByValue(t);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(t){const n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return null!=r.value&&this._compareWith(r.value,t)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(t){return!!(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t,!0)}_initKeyManager(){this._keyManager=new eq(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(at(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=Ms(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(at(t)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ms(...this.options.map(n=>n._stateChanges)).pipe(at(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,n){const r=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(r!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),n&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),n&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),r!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,t):t.indexOf(n)-t.indexOf(r)),this.stateChanges.next()}}_propagateChanges(t){let n=null;n=this.multiple?this.selected.map(r=>r.value):this.selected?this.selected.value:t,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();return this.ariaLabelledby?(t?t+" ":"")+this.ariaLabelledby:t}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;const t=this._parentFormField?.getLabelId();let n=(t?t+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return i.\u0275fac=function(t){return new(t||i)(R(Pw),R(Qn),R(Et),R(eT),R(Wt),R(wu,8),R(Lv,8),R(Bp,8),R(IT,8),R(Dl,10),Oa("tabindex"),R(SU),R(W1),R(NJ,8))},i.\u0275dir=Le({type:i,viewQuery:function(t,n){if(1&t&&(qi(SJ,5),qi(EJ,5),qi(o3,5)),2&t){let r;$t(r=jt())&&(n.trigger=r.first),$t(r=jt())&&(n.panel=r.first),$t(r=jt())&&(n._overlayDir=r.first)}},inputs:{userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:"typeaheadDebounceInterval",sortComparator:"sortComparator",id:"id"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[ut,oi]}),i})(),cM=(()=>{class i extends HJ{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,n,r){const s=this._getItemHeight();return Math.min(Math.max(0,s*t-n+s/2),r)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(at(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Si(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const n=x3(t,this.options,this.optionGroups),r=this._getItemHeight();this.panel.nativeElement.scrollTop=0===t&&1===n?0:function AX(i,e,t,n){return i<t?i:i+e>t+n?Math.max(0,i-n+e):t}((t+n)*r,r,this.panel.nativeElement.scrollTop,256)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new UJ(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),n=this._viewportRuler.getViewportSize(),r=this._isRtl(),s=this.multiple?56:32;let o;if(this.multiple)o=40;else if(this.disableOptionCentering)o=16;else{let c=this._selectionModel.selected[0]||this.options.first;o=c&&c.group?32:16}r||(o*=-1);const a=0-(t.left+o-(r?s:0)),l=t.right+o-n.width+(r?0:s);a>0?o+=a+8:l>0&&(o-=l+8),this._overlayDir.offsetX=Math.round(o),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,n,r){const s=this._getItemHeight(),o=(s-this._triggerRect.height)/2,a=Math.floor(256/s);let l;return this.disableOptionCentering?0:(l=0===this._scrollTop?t*s:this._scrollTop===r?(t-(this._getItemCount()-a))*s+(s-(this._getItemCount()*s-256)%s):n-s/2,Math.round(-1*l-o))}_checkOverlayWithinViewport(t){const n=this._getItemHeight(),r=this._viewportRuler.getViewportSize(),s=this._triggerRect.top-8,o=r.height-this._triggerRect.bottom-8,a=Math.abs(this._offsetY),c=Math.min(this._getItemCount()*n,256)-a-this._triggerRect.height;c>o?this._adjustPanelUp(c,o):a>s?this._adjustPanelDown(a,s,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,n){const r=Math.round(t-n);this._scrollTop-=r,this._offsetY-=r,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,n,r){const s=Math.round(t-n);if(this._scrollTop+=s,this._offsetY+=s,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=r)return this._scrollTop=r,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),n=this._getItemCount(),r=Math.min(n*t,256),o=n*t-r;let a;a=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),a+=x3(a,this.options,this.optionGroups);const l=r/2;this._scrollTop=this._calculateOverlayScroll(a,l,o),this._offsetY=this._calculateOverlayOffsetY(a,l,o),this._checkOverlayWithinViewport(o)}_getOriginBasedOnOption(){const t=this._getItemHeight(),n=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-n+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=xi(i)))(n||i)}}(),i.\u0275cmp=St({type:i,selectors:[["mat-select"]],contentQueries:function(t,n,r){if(1&t&&(Ci(r,zJ,5),Ci(r,Av,5),Ci(r,b3,5)),2&t){let s;$t(s=jt())&&(n.customTrigger=s.first),$t(s=jt())&&(n.options=s),$t(s=jt())&&(n.optionGroups=s)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:19,hostBindings:function(t,n){1&t&&ct("keydown",function(s){return n._handleKeydown(s)})("focus",function(){return n._onFocus()})("blur",function(){return n._onBlur()}),2&t&&(Qt("id",n.id)("tabindex",n.tabIndex)("aria-controls",n.panelOpen?n.id+"-panel":null)("aria-expanded",n.panelOpen)("aria-label",n.ariaLabel||null)("aria-required",n.required.toString())("aria-disabled",n.disabled.toString())("aria-invalid",n.errorState)("aria-activedescendant",n._getAriaActiveDescendant()),ui("mat-select-disabled",n.disabled)("mat-select-invalid",n.errorState)("mat-select-required",n.required)("mat-select-empty",n.empty)("mat-select-multiple",n.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Nn([{provide:Kw,useExisting:i},{provide:y3,useExisting:i}]),ut],ngContentSelectors:kJ,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,n){if(1&t&&(Ys(PJ),ce(0,"div",0,1),ct("click",function(){return n.toggle()}),ce(3,"div",2),Fe(4,DJ,2,1,"span",3),Fe(5,IJ,3,2,"span",4),he(),ce(6,"div",5),bt(7,"div",6),he()(),Fe(8,RJ,4,14,"ng-template",7),ct("backdropClick",function(){return n.close()})("attach",function(){return n._onAttached()})("detach",function(){return n.close()})),2&t){const r=bl(1);Qt("aria-owns",n.panelOpen?n.id+"-panel":null),ne(3),ie("ngSwitch",n.empty),Qt("id",n._valueId),ne(1),ie("ngSwitchCase",!0),ne(1),ie("ngSwitchCase",!1),ne(3),ie("cdkConnectedOverlayPanelClass",n._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",n._scrollStrategy)("cdkConnectedOverlayOrigin",r)("cdkConnectedOverlayOpen",n.panelOpen)("cdkConnectedOverlayPositions",n._positions)("cdkConnectedOverlayMinWidth",null==n._triggerRect?null:n._triggerRect.width)("cdkConnectedOverlayOffsetY",n._offsetY)}},dependencies:[Z_,pp,qx,TF,o3,s3],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{height:16px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;margin:0 4px}.mat-form-field.mat-focused .mat-select-arrow{transform:translateX(0)}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}'],encapsulation:2,data:{animation:[wU.transformPanelWrap,wU.transformPanel]},changeDetection:0}),i})(),EU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[BJ],imports:[$a,Op,w3,Mn,xv,Jw,w3,Mn]}),i})();function GJ(i,e){if(1&i&&(ce(0,"mat-option",4),ot(1),he()),2&i){const t=e.$implicit;ie("value",t[1]),ne(1),Xr(" ",t[1]," ")}}function WJ(i,e){if(1&i){const t=yr();ce(0,"mat-form-field",1)(1,"mat-label"),ot(2),he(),ce(3,"mat-select",2),ct("valueChange",function(r){return pn(t),En(Oe().resourceData.value=r)})("selectionChange",function(){return pn(t),En(Oe().changed.emit())}),Fe(4,GJ,2,2,"mat-option",3),he()()}if(2&i){const t=Oe();ne(2),Pi(t.name),ne(1),ie("value",t.resourceData.value),ne(1),ie("ngForOf",t.resourceData.block.enum_names)}}let $J=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-enum-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["appearance","fill",4,"ngIf"],["appearance","fill"],[3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&Fe(0,WJ,5,3,"mat-form-field",0),2&t&&ie("ngIf",n.resourceData)},dependencies:[ua,lr,Xd,Sc,cM,Av],changeDetection:0}),i})(),jJ=(()=>{class i{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=Gn(t)}get inset(){return this._inset}set inset(t){this._inset=Gn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,n){2&t&&(Qt("aria-orientation",n.vertical?"vertical":"horizontal"),ui("mat-divider-vertical",n.vertical)("mat-divider-horizontal",!n.vertical)("mat-divider-inset",n.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,n){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0}),i})(),DU=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,Mn]}),i})();const qJ=["*"],YJ=["text"];function ZJ(i,e){if(1&i&&bt(0,"mat-pseudo-checkbox",5),2&i){const t=Oe();ie("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}const KJ=["*",[["","mat-list-avatar",""],["","mat-list-icon",""],["","matListAvatar",""],["","matListIcon",""]]],JJ=["*","[mat-list-avatar], [mat-list-icon], [matListAvatar], [matListIcon]"];let QJ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["","mat-list-avatar",""],["","matListAvatar",""]],hostAttrs:[1,"mat-list-avatar"]}),i})(),eQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["","mat-list-icon",""],["","matListIcon",""]],hostAttrs:[1,"mat-list-icon"]}),i})();const tQ=Sv(class{}),nQ=Sv(class{}),iQ={provide:ja,useExisting:Un(()=>uM),multi:!0};class rQ{constructor(e,t){this.source=e,this.options=t}}let UT=(()=>{class i extends nQ{constructor(t,n,r){super(),this._element=t,this._changeDetector=n,this.selectionList=r,this._selected=!1,this._disabled=!1,this._hasFocus=!1,this.selectedChange=new et,this.checkboxPosition="after",this._inputsInitialized=!1}get color(){return this._color||this.selectionList.color}set color(t){this._color=t}get value(){return this._value}set value(t){this.selected&&!this.selectionList.compareWith(t,this.value)&&this._inputsInitialized&&(this.selected=!1),this._value=t}get disabled(){return this._disabled||this.selectionList&&this.selectionList.disabled}set disabled(t){const n=Gn(t);n!==this._disabled&&(this._disabled=n,this._changeDetector.markForCheck())}get selected(){return this.selectionList.selectedOptions.isSelected(this)}set selected(t){const n=Gn(t);n!==this._selected&&(this._setSelected(n),(n||this.selectionList.multiple)&&this.selectionList._reportValueChange())}ngOnInit(){const t=this.selectionList;t._value&&t._value.some(r=>t.compareWith(this._value,r))&&this._setSelected(!0);const n=this._selected;Promise.resolve().then(()=>{(this._selected||n)&&(this.selected=!0,this._changeDetector.markForCheck())}),this._inputsInitialized=!0}ngAfterContentInit(){!function yX(i,e,t="mat"){i.changes.pipe(hs(i)).subscribe(({length:n})=>{Ev(e,`${t}-2-line`,!1),Ev(e,`${t}-3-line`,!1),Ev(e,`${t}-multi-line`,!1),2===n||3===n?Ev(e,`${t}-${n}-line`,!0):n>3&&Ev(e,`${t}-multi-line`,!0)})}(this._lines,this._element)}ngOnDestroy(){this.selected&&Promise.resolve().then(()=>{this.selected=!1});const t=this._hasFocus,n=this.selectionList._removeOptionFromList(this);t&&n&&n.focus()}toggle(){this.selected=!this.selected}focus(){this._element.nativeElement.focus()}getLabel(){return this._text&&this._text.nativeElement.textContent||""}_isRippleDisabled(){return this.disabled||this.disableRipple||this.selectionList.disableRipple}_handleClick(){!this.disabled&&(this.selectionList.multiple||!this.selected)&&(this.toggle(),this.selectionList._emitChangeEvent([this]))}_handleFocus(){this.selectionList._setFocusedOption(this),this._hasFocus=!0}_handleBlur(){this.selectionList._onTouched(),this._hasFocus=!1}_getHostElement(){return this._element.nativeElement}_setSelected(t){return t!==this._selected&&(this._selected=t,t?this.selectionList.selectedOptions.select(this):this.selectionList.selectedOptions.deselect(this),this.selectedChange.emit(t),this._changeDetector.markForCheck(),!0)}_markForCheck(){this._changeDetector.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Qn),R(Un(()=>uM)))},i.\u0275cmp=St({type:i,selectors:[["mat-list-option"]],contentQueries:function(t,n,r){if(1&t&&(Ci(r,QJ,5),Ci(r,eQ,5),Ci(r,vX,5)),2&t){let s;$t(s=jt())&&(n._avatar=s.first),$t(s=jt())&&(n._icon=s.first),$t(s=jt())&&(n._lines=s)}},viewQuery:function(t,n){if(1&t&&qi(YJ,5),2&t){let r;$t(r=jt())&&(n._text=r.first)}},hostAttrs:["role","option",1,"mat-list-item","mat-list-option","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&ct("focus",function(){return n._handleFocus()})("blur",function(){return n._handleBlur()})("click",function(){return n._handleClick()}),2&t&&(Qt("aria-selected",n.selected)("aria-disabled",n.disabled)("tabindex",-1),ui("mat-list-item-disabled",n.disabled)("mat-list-item-with-avatar",n._avatar||n._icon)("mat-primary","primary"===n.color)("mat-accent","primary"!==n.color&&"warn"!==n.color)("mat-warn","warn"===n.color)("mat-list-single-selected-option",n.selected&&!n.selectionList.multiple))},inputs:{disableRipple:"disableRipple",checkboxPosition:"checkboxPosition",color:"color",value:"value",disabled:"disabled",selected:"selected"},outputs:{selectedChange:"selectedChange"},exportAs:["matListOption"],features:[ut],ngContentSelectors:JJ,decls:7,vars:5,consts:[[1,"mat-list-item-content"],["mat-ripple","",1,"mat-list-item-ripple",3,"matRippleTrigger","matRippleDisabled"],[3,"state","disabled",4,"ngIf"],[1,"mat-list-text"],["text",""],[3,"state","disabled"]],template:function(t,n){1&t&&(Ys(KJ),ce(0,"div",0),bt(1,"div",1),Fe(2,ZJ,1,2,"mat-pseudo-checkbox",2),ce(3,"div",3,4),Yn(5),he(),Yn(6,1),he()),2&t&&(ui("mat-list-item-content-reverse","after"==n.checkboxPosition),ne(1),ie("matRippleTrigger",n._getHostElement())("matRippleDisabled",n._isRippleDisabled()),ne(1),ie("ngIf",n.selectionList.multiple))},dependencies:[Dv,v3,lr],encapsulation:2,changeDetection:0}),i})(),uM=(()=>{class i extends tQ{constructor(t,n,r){super(),this._element=t,this._changeDetector=n,this._focusMonitor=r,this._multiple=!0,this._contentInitialized=!1,this.selectionChange=new et,this.color="accent",this.compareWith=(s,o)=>s===o,this._disabled=!1,this.selectedOptions=new BT(this._multiple),this._tabIndex=-1,this._onChange=s=>{},this._destroyed=new He,this._onTouched=()=>{}}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t),this._markOptionsForCheck()}get multiple(){return this._multiple}set multiple(t){const n=Gn(t);n!==this._multiple&&(this._multiple=n,this.selectedOptions=new BT(this._multiple,this.selectedOptions.selected))}ngAfterContentInit(){this._contentInitialized=!0,this._keyManager=new N2(this.options).withWrap().withTypeAhead().withHomeAndEnd().skipPredicate(()=>!1).withAllowedModifierKeys(["shiftKey"]),this._value&&this._setOptionsFromValues(this._value),this._keyManager.tabOut.pipe(at(this._destroyed)).subscribe(()=>{this._allowFocusEscape()}),this.options.changes.pipe(hs(null),at(this._destroyed)).subscribe(()=>{this._updateTabIndex()}),this.selectedOptions.changed.pipe(at(this._destroyed)).subscribe(t=>{if(t.added)for(let n of t.added)n.selected=!0;if(t.removed)for(let n of t.removed)n.selected=!1}),this._focusMonitor.monitor(this._element).pipe(at(this._destroyed)).subscribe(t=>{if("keyboard"===t||"program"===t){let n=0;for(let r=0;r<this.options.length;r++)if(this.options.get(r)?.selected){n=r;break}this._keyManager.setActiveItem(n)}})}ngOnChanges(t){const n=t.disableRipple,r=t.color;(n&&!n.firstChange||r&&!r.firstChange)&&this._markOptionsForCheck()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._element),this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0}focus(t){this._element.nativeElement.focus(t)}selectAll(){return this._setAllOptionsSelected(!0)}deselectAll(){return this._setAllOptionsSelected(!1)}_setFocusedOption(t){this._keyManager.updateActiveItem(t)}_removeOptionFromList(t){const n=this._getOptionIndex(t);return n>-1&&this._keyManager.activeItemIndex===n&&(n>0?this._keyManager.updateActiveItem(n-1):0===n&&this.options.length>1&&this._keyManager.updateActiveItem(Math.min(n+1,this.options.length-1))),this._keyManager.activeItem}_keydown(t){const n=t.keyCode,r=this._keyManager,s=r.activeItemIndex,o=ha(t);switch(n){case 32:case 13:!o&&!r.isTyping()&&(this._toggleFocusedOption(),t.preventDefault());break;default:if(65===n&&this.multiple&&ha(t,"ctrlKey")&&!r.isTyping()){const a=this.options.some(l=>!l.disabled&&!l.selected);this._setAllOptionsSelected(a,!0,!0),t.preventDefault()}else r.onKeydown(t)}this.multiple&&(38===n||40===n)&&t.shiftKey&&r.activeItemIndex!==s&&this._toggleFocusedOption()}_reportValueChange(){if(this.options&&!this._isDestroyed){const t=this._getSelectedOptionValues();this._onChange(t),this._value=t}}_emitChangeEvent(t){this.selectionChange.emit(new rQ(this,t))}writeValue(t){this._value=t,this.options&&this._setOptionsFromValues(t||[])}setDisabledState(t){this.disabled=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}_setOptionsFromValues(t){this.options.forEach(n=>n._setSelected(!1)),t.forEach(n=>{const r=this.options.find(s=>!s.selected&&this.compareWith(s.value,n));r&&r._setSelected(!0)})}_getSelectedOptionValues(){return this.options.filter(t=>t.selected).map(t=>t.value)}_toggleFocusedOption(){let t=this._keyManager.activeItemIndex;if(null!=t&&this._isValidIndex(t)){let n=this.options.toArray()[t];n&&!n.disabled&&(this._multiple||!n.selected)&&(n.toggle(),this._emitChangeEvent([n]))}}_setAllOptionsSelected(t,n,r){const s=[];return this.options.forEach(o=>{(!n||!o.disabled)&&o._setSelected(t)&&s.push(o)}),s.length&&(this._reportValueChange(),r&&this._emitChangeEvent(s)),s}_isValidIndex(t){return t>=0&&t<this.options.length}_getOptionIndex(t){return this.options.toArray().indexOf(t)}_markOptionsForCheck(){this.options&&this.options.forEach(t=>t._markForCheck())}_allowFocusEscape(){this._tabIndex=-1,setTimeout(()=>{this._tabIndex=0,this._changeDetector.markForCheck()})}_updateTabIndex(){this._tabIndex=0===this.options.length?-1:0}}return i.\u0275fac=function(t){return new(t||i)(R(Wt),R(Qn),R(Mc))},i.\u0275cmp=St({type:i,selectors:[["mat-selection-list"]],contentQueries:function(t,n,r){if(1&t&&Ci(r,UT,5),2&t){let s;$t(s=jt())&&(n.options=s)}},hostAttrs:["role","listbox",1,"mat-selection-list","mat-list-base"],hostVars:3,hostBindings:function(t,n){1&t&&ct("keydown",function(s){return n._keydown(s)}),2&t&&Qt("aria-multiselectable",n.multiple)("aria-disabled",n.disabled.toString())("tabindex",n._tabIndex)},inputs:{disableRipple:"disableRipple",color:"color",compareWith:"compareWith",disabled:"disabled",multiple:"multiple"},outputs:{selectionChange:"selectionChange"},exportAs:["matSelectionList"],features:[Nn([iQ]),ut,oi],ngContentSelectors:qJ,decls:1,vars:0,template:function(t,n){1&t&&(Ys(),Yn(0))},styles:['.mat-subheader{display:flex;box-sizing:border-box;padding:16px;align-items:center}.mat-list-base .mat-subheader{margin:0}button.mat-list-item,button.mat-list-option{padding:0;width:100%;background:none;color:inherit;border:none;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:left}[dir=rtl] button.mat-list-item,[dir=rtl] button.mat-list-option{text-align:right}button.mat-list-item::-moz-focus-inner,button.mat-list-option::-moz-focus-inner{border:0}.mat-list-base{padding-top:8px;display:block;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-list-base .mat-subheader{height:48px;line-height:16px}.mat-list-base .mat-subheader:first-child{margin-top:-8px}.mat-list-base .mat-list-item,.mat-list-base .mat-list-option{display:block;height:48px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base .mat-list-item .mat-list-item-content,.mat-list-base .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base .mat-list-item .mat-list-item-content-reverse,.mat-list-base .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base .mat-list-item .mat-list-item-ripple,.mat-list-base .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar,.mat-list-base .mat-list-option.mat-list-item-with-avatar{height:56px}.mat-list-base .mat-list-item.mat-2-line,.mat-list-base .mat-list-option.mat-2-line{height:72px}.mat-list-base .mat-list-item.mat-3-line,.mat-list-base .mat-list-option.mat-3-line{height:88px}.mat-list-base .mat-list-item.mat-multi-line,.mat-list-base .mat-list-option.mat-multi-line{height:auto}.mat-list-base .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base .mat-list-item .mat-list-text,.mat-list-base .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base .mat-list-item .mat-list-text>*,.mat-list-base .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base .mat-list-item .mat-list-text:empty,.mat-list-base .mat-list-option .mat-list-text:empty{display:none}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base .mat-list-item .mat-list-avatar,.mat-list-base .mat-list-option .mat-list-avatar{flex-shrink:0;width:40px;height:40px;border-radius:50%;object-fit:cover}.mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:72px;width:calc(100% - 72px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:72px}.mat-list-base .mat-list-item .mat-list-icon,.mat-list-base .mat-list-option .mat-list-icon{flex-shrink:0;width:24px;height:24px;font-size:24px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:64px;width:calc(100% - 64px)}[dir=rtl] .mat-list-base .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:64px}.mat-list-base .mat-list-item .mat-divider,.mat-list-base .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base .mat-list-item .mat-divider,[dir=rtl] .mat-list-base .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-list-base[dense]{padding-top:4px;display:block}.mat-list-base[dense] .mat-subheader{height:40px;line-height:8px}.mat-list-base[dense] .mat-subheader:first-child{margin-top:-4px}.mat-list-base[dense] .mat-list-item,.mat-list-base[dense] .mat-list-option{display:block;height:40px;-webkit-tap-highlight-color:rgba(0,0,0,0);width:100%;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-item-content,.mat-list-base[dense] .mat-list-option .mat-list-item-content{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;padding:0 16px;position:relative;height:inherit}.mat-list-base[dense] .mat-list-item .mat-list-item-content-reverse,.mat-list-base[dense] .mat-list-option .mat-list-item-content-reverse{display:flex;align-items:center;padding:0 16px;flex-direction:row-reverse;justify-content:space-around}.mat-list-base[dense] .mat-list-item .mat-list-item-ripple,.mat-list-base[dense] .mat-list-option .mat-list-item-ripple{display:block;top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar{height:48px}.mat-list-base[dense] .mat-list-item.mat-2-line,.mat-list-base[dense] .mat-list-option.mat-2-line{height:60px}.mat-list-base[dense] .mat-list-item.mat-3-line,.mat-list-base[dense] .mat-list-option.mat-3-line{height:76px}.mat-list-base[dense] .mat-list-item.mat-multi-line,.mat-list-base[dense] .mat-list-option.mat-multi-line{height:auto}.mat-list-base[dense] .mat-list-item.mat-multi-line .mat-list-item-content,.mat-list-base[dense] .mat-list-option.mat-multi-line .mat-list-item-content{padding-top:16px;padding-bottom:16px}.mat-list-base[dense] .mat-list-item .mat-list-text,.mat-list-base[dense] .mat-list-option .mat-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden;padding:0}.mat-list-base[dense] .mat-list-item .mat-list-text>*,.mat-list-base[dense] .mat-list-option .mat-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-list-base[dense] .mat-list-item .mat-list-text:empty,.mat-list-base[dense] .mat-list-option .mat-list-text:empty{display:none}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:0;padding-left:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:0}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-left:0;padding-right:16px}[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-item.mat-list-option .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar .mat-list-item-content-reverse .mat-list-text,[dir=rtl] .mat-list-base[dense] .mat-list-option.mat-list-option .mat-list-item-content-reverse .mat-list-text{padding-right:0;padding-left:16px}.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-item.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content-reverse .mat-list-text,.mat-list-base[dense] .mat-list-option.mat-list-item-with-avatar.mat-list-option .mat-list-item-content .mat-list-text{padding-right:16px;padding-left:16px}.mat-list-base[dense] .mat-list-item .mat-list-avatar,.mat-list-base[dense] .mat-list-option .mat-list-avatar{flex-shrink:0;width:36px;height:36px;border-radius:50%;object-fit:cover}.mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:68px;width:calc(100% - 68px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-avatar~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-avatar~.mat-divider-inset{margin-left:auto;margin-right:68px}.mat-list-base[dense] .mat-list-item .mat-list-icon,.mat-list-base[dense] .mat-list-option .mat-list-icon{flex-shrink:0;width:20px;height:20px;font-size:20px;box-sizing:content-box;border-radius:50%;padding:4px}.mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:60px;width:calc(100% - 60px)}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-list-icon~.mat-divider-inset,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-list-icon~.mat-divider-inset{margin-left:auto;margin-right:60px}.mat-list-base[dense] .mat-list-item .mat-divider,.mat-list-base[dense] .mat-list-option .mat-divider{position:absolute;bottom:0;left:0;width:100%;margin:0}[dir=rtl] .mat-list-base[dense] .mat-list-item .mat-divider,[dir=rtl] .mat-list-base[dense] .mat-list-option .mat-divider{margin-left:auto;margin-right:0}.mat-list-base[dense] .mat-list-item .mat-divider.mat-divider-inset,.mat-list-base[dense] .mat-list-option .mat-divider.mat-divider-inset{position:absolute}.mat-nav-list a{text-decoration:none;color:inherit}.mat-nav-list .mat-list-item{cursor:pointer;outline:none}mat-action-list .mat-list-item{cursor:pointer;outline:inherit}.mat-list-option:not(.mat-list-item-disabled){cursor:pointer;outline:none}.mat-list-item-disabled{pointer-events:none}.cdk-high-contrast-active .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active :host .mat-list-item-disabled{opacity:.5}.cdk-high-contrast-active .mat-list-option:hover,.cdk-high-contrast-active .mat-nav-list .mat-list-item:hover,.cdk-high-contrast-active mat-action-list .mat-list-item:hover{outline:dotted 1px;z-index:1}.cdk-high-contrast-active .mat-list-single-selected-option::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active [dir=rtl] .mat-list-single-selected-option::after{right:auto;left:16px}@media(hover: none){.mat-list-option:not(.mat-list-single-selected-option):not(.mat-list-item-disabled):hover,.mat-nav-list .mat-list-item:not(.mat-list-item-disabled):hover,.mat-action-list .mat-list-item:not(.mat-list-item-disabled):hover{background:none}}'],encapsulation:2,changeDetection:0}),i})(),sQ=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[p3,Nw,Mn,nT,$a,p3,Mn,nT,DU]}),i})();function oQ(i,e){if(1&i&&(ce(0,"mat-list-option",3),ot(1),he()),2&i){const t=e.$implicit,n=Oe(2);ie("value",t.key)("selected",n.resourceData.value[t.key]),ne(1),Xr(" ",t.key," ")}}function aQ(i,e){if(1&i){const t=yr();Io(0),ce(1,"mat-label"),ot(2),he(),ce(3,"mat-selection-list",1),ct("selectionChange",function(r){return pn(t),En(Oe().onSelection(r))}),Fe(4,oQ,2,3,"mat-list-option",2),ai(5,"keyvalue"),he(),Ro()}if(2&i){const t=Oe();ne(2),Pi(t.name),ne(2),ie("ngForOf",gi(5,2,t.resourceData.value))}}let lQ=(()=>{class i{constructor(){this.resourceData=null,this.name="",this.changed=new et}onSelection(t){for(const n of t.options)this.resourceData.value[n.value]=n.selected;this.changed.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=St({type:i,selectors:[["app-flags-block-ui"]],inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"selectionChange"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value","selected"]],template:function(t,n){1&t&&Fe(0,aQ,6,4,"ng-container",0),2&t&&ie("ngIf",n.resourceData)},dependencies:[ua,lr,Sc,uM,UT,PF],styles:["[_nghost-%COMP%]{padding-bottom:1.34375em}"],changeDetection:0}),i})();var Ec=(()=>{return(i=Ec||(Ec={}))[i.INPUT_CONTROLLERS=0]="INPUT_CONTROLLERS",i[i.PHYSICS_SIMULATION=200]="PHYSICS_SIMULATION",i[i.OBJECTS_BINDING=400]="OBJECTS_BINDING",i[i.ANIMATION_MIXERS=600]="ANIMATION_MIXERS",i[i.CONTROLLERS=800]="CONTROLLERS",i[i.RENDERING=1e3]="RENDERING",i[i.POST_RENDERING=1200]="POST_RENDERING",Ec;var i})();let Hv=(()=>{class i{constructor(){this.tick$=new He,this._world=null,this._name="0x"+(i.default_name_counter++).toString(16),this._active=!0,this._children=[],this._onSpawned$=new He,this._onRemoved$=new He}get world(){return this._world}get name(){return this._name}set name(t){this._name=t}get active(){return this._active}set active(t){this._active=t}addChildren(...t){if(this._children.push(...t),this._world)for(const n of t)this._world.addEntity(n)}removeChildren(t,n=!1){if(this._children=this._children.filter(r=>!t.includes(r)),this._world)for(const r of t)this._world.removeEntity(r,n)}onSpawned(t){this._world=t;for(const n of this._children)t.addEntity(n);this._onSpawned$.next()}onRemoved(){const t=this._world;this._world=null;for(const n of this._children)t.removeEntity(n);this._onRemoved$.next()}dispose(){this.world&&this.world.removeEntity(this),this._onSpawned$.complete(),this._onRemoved$.complete(),this.tick$.complete();for(const t of this._children)t.dispose()}}return i.default_name_counter=0,i})();const cQ={transparent:!1,background:0,size:"fullscreen",antialias:!0};class uQ extends Hv{constructor(e,t={}){super(),this.canvas=e,this.tickOrder=Ec.RENDERING,this._rendererSize$=new wn(null),this.rendererOptions=Object.assign(Object.assign({},cQ),t||{}),this.tick$.subscribe(()=>{this.render()})}get rendererSize$(){return this._rendererSize$.asObservable()}get rendererSize(){return this._rendererSize$.getValue()}onSpawned(e){super.onSpawned(e),this._rendererSize$.next(null),"fullscreen"==this.rendererOptions.size||this.rendererOptions.size instanceof Function?(this.canvas&&(this.canvas.style.position="absolute"),Ms(pa(window,"resize").pipe(Y1(100)),pa(window,"orientationchange")).pipe(at(this._onRemoved$),Je(()=>({x:window.innerWidth,y:window.innerHeight})),hs({x:window.innerWidth,y:window.innerHeight})).subscribe(t=>{this._rendererSize$.next(this.rendererOptions.size instanceof Function?this.rendererOptions.size(t):t)})):this.rendererOptions.size instanceof yn||void 0!==!!this.rendererOptions.subscribe&&void 0!==!!this.rendererOptions.pipe?this.rendererOptions.size.pipe(at(this._onRemoved$)).subscribe(t=>{this._rendererSize$.next(t)}):this._rendererSize$.next(this.rendererOptions.size),this._rendererSize$.pipe(at(this._onRemoved$),Mw((t,n)=>t?.x==n?.x&&t?.y==n?.y)).subscribe(t=>{t&&this.resizeRenderer(t)})}dispose(){super.dispose(),this._rendererSize$.complete()}}class dQ extends Hv{constructor(e){super(),this.tickOrder=e}}function VT(i,e=Ec.CONTROLLERS){const t=new dQ(e);return i.addEntity(t),t.tick$.pipe(Fd(()=>{i.removeEntity(t)}))}var zT=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class HT{constructor(){this._running=!1,this.stop$=new He}get running(){return this._running}start(...e){return zT(this,void 0,void 0,function*(){this.running||(yield this.startInternal(...e),this._running=!0)})}stop(...e){return zT(this,void 0,void 0,function*(){!this.running||(this.stop$.next(),yield this.stopInternal(...e),this._running=!1)})}stopInternal(...e){return zT(this,void 0,void 0,function*(){})}}class fQ extends HT{constructor(e,t){super(),this.keyboard=e,this.keymap=t,this._output$=new He}get output$(){return this._output$.asObservable()}startInternal(){return i=this,e=void 0,n=function*(){const e=[[],[],[],[]];this.keymap.includes("wasd")&&(e[0].push("KeyW"),e[1].push("KeyA"),e[2].push("KeyS"),e[3].push("KeyD")),this.keymap.includes("arrows")&&(e[0].push("ArrowUp"),e[1].push("ArrowLeft"),e[2].push("ArrowDown"),e[3].push("ArrowRight")),gp(e.map(t=>this.keyboard.bindMany(...t))).pipe(at(this.stop$),Je(t=>{const n={};if(t.includes(!0)){const[r,s,o,a]=t;r!=o&&(n.upDown=r),s!=a&&(n.leftRight=s)}return n})).subscribe(this._output$)},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}}const GT=new yn(Qr);var AU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class pQ extends HT{constructor(){super(),this.bindings={},this.handleKeys=this.handleKeys.bind(this)}startInternal(){return AU(this,void 0,void 0,function*(){window.addEventListener("keydown",this.handleKeys),window.addEventListener("keyup",this.handleKeys)})}stopInternal(){return AU(this,void 0,void 0,function*(){window.removeEventListener("keydown",this.handleKeys),window.removeEventListener("keyup",this.handleKeys)})}bind(e){this.bindings[e]||(this.bindings[e]=[]);const t=new wn(!1);return this.bindings[e].push(t),t.pipe(Fd(()=>{this.bindings[e].splice(this.bindings[e].indexOf(t),1),t.complete()}))}bindMany(...e){if(0==e.length)return console.warn("[KeyboardController] bindMany called without any key code"),GT;if(1==e.length)return this.bind(e[0]);const t=[];for(const n of e){this.bindings[n]||(this.bindings[n]=[]);const r=new wn(!1);this.bindings[n].push(r),t.push(r)}return gp(t).pipe(Fd(()=>{for(let n=0;n<e.length;n++)this.bindings[e[n]].splice(this.bindings[e[n]].indexOf(t[n]),1),t[n].complete()}),Je(n=>n.includes(!0)))}emulateKeyDown(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!0)}emulateKeyUp(e){if(this.running)for(const t of this.bindings[e]||[])t.next(!1)}emulateKeyPress(e){this.emulateKeyDown(e),this.emulateKeyUp(e)}handleKeys(e){if("keydown"!=e.type&&"keyup"!=e.type)return;const t="keydown"==e.type;for(const n of this.bindings[e.code]||[])n.next(t)}}class Po{static clone(e){return{x:e.x,y:e.y}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y}}static lenSq(e){return e.x*e.x+e.y*e.y}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static dist(e,t){return Po.len(Po.sub(e,t))}static norm(e){const t=Math.sqrt(e.x**2+e.y**2);return{x:e.x/t,y:e.y/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t}}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}static angle(e,t){const n=e.x*t.x+e.y*t.y,r=Math.sqrt(e.x**2+e.y**2)*Math.sqrt(t.x**2+t.y**2);return Math.acos(n/r)}}var TU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const gQ={pointerLock:!1};var ms=(()=>{return(i=ms||(ms={}))[i.NONE=0]="NONE",i[i.DRAG=1]="DRAG",i[i.DRAG_MIDDLE_BUTTON=2]="DRAG_MIDDLE_BUTTON",i[i.DRAG_RIGHT_BUTTON=3]="DRAG_RIGHT_BUTTON",i[i.DRAG_TOUCH_TWO_FINGERS=4]="DRAG_TOUCH_TWO_FINGERS",ms;var i})();class Hp extends HT{constructor(e={}){super(),this._delta$=new He,this._position$=new wn({x:0,y:0}),this._multiTouchPositions$=new wn([]),this._wheel$=new He,this.stopped$=new He,this._state$=new wn(ms.NONE),this.options=Object.assign(Object.assign({},gQ),e),this.canvasClickListener=this.canvasClickListener.bind(this)}static isTouchDevice(){return"createTouch"in document||!!navigator.userAgent.match(/(iPhone|iPod|iPad)/)||!!navigator.userAgent.match(/Android/)}get delta$(){return this._delta$.asObservable()}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}get wheel$(){return this._wheel$.asObservable()}get isPointerLocked(){return!!document.pointerLockElement}get state(){return this._state$.getValue()}get state$(){return this._state$.asObservable()}get multiTouchPositions$(){return this._multiTouchPositions$.asObservable()}get twoTouchGestureDelta$(){return this.state$.pipe(Ts(e=>e==ms.DRAG_TOUCH_TWO_FINGERS?this.multiTouchPositions$:GT),Je(e=>e.map(t=>({x:t.x,y:t.y}))),function mQ(){return kn((i,e)=>{let t,n=!1;i.subscribe(In(e,r=>{const s=t;t=r,n&&e.next([s,r]),n=!0}))})}(),Dn(([e,t])=>e.length>1&&t.length>1),Je(([e,t])=>({centerPointDelta:Po.sub(Po.scalarMult(t.reduce((n,r)=>Po.add(n,r),{x:0,y:0}),1/t.length),Po.scalarMult(e.reduce((n,r)=>Po.add(n,r),{x:0,y:0}),1/t.length)),angleDelta:Po.angle(t[1],t[0])-Po.angle(e[1],e[0]),distanceDelta:Po.dist(t[1],t[0])-Po.dist(e[1],e[0])})))}get _element(){return this.options.canvas||window}startInternal(){return TU(this,void 0,void 0,function*(){this.options.canvas&&(this.options.canvas.style.touchAction="none"),this._state$.next(ms.NONE);const e=[ms.DRAG,ms.DRAG_MIDDLE_BUTTON,ms.DRAG_RIGHT_BUTTON],t=[ms.NONE,ms.DRAG,ms.DRAG_TOUCH_TWO_FINGERS],n=[],r={};pa(this._element,"mousemove").pipe(at(this.stopped$)).subscribe(o=>{this._delta$.next({x:o.movementX,y:o.movementY})}),pa(this._element,"pointermove").pipe(at(this.stopped$)).subscribe(o=>{o instanceof PointerEvent?("touch"===o.pointerType&&(r[o.pointerId]={x:o.pageX,y:o.pageY}),this._position$.next({x:o.pageX,y:o.pageY}),this._multiTouchPositions$.next(Object.values(r))):this._position$.next({x:o.clientX,y:o.clientY}),this._delta$.next({x:o.movementX,y:o.movementY})}),!Hp.isTouchDevice()&&this.options.pointerLock&&this.options.canvas&&this.options.canvas.addEventListener("click",this.canvasClickListener);const s=o=>{delete r[o.pointerId];for(let a=0;a<n.length;a++)if(n[a].pointerId==o.pointerId){n.splice(a,1);break}0===n.length&&(this.options.canvas&&this.options.canvas.releasePointerCapture(o.pointerId),this._element.removeEventListener("pointerup",s),this._element.removeEventListener("pointercancel",s)),this._state$.next(t[Math.min(n.length,2)])};pa(this._element,"pointerdown").pipe(at(this.stopped$)).subscribe(o=>{0===n.length&&(this.options.canvas&&this.options.canvas.setPointerCapture(o.pointerId),this._element.addEventListener("pointerup",s),this._element.addEventListener("pointercancel",s)),n.push(o),"touch"===o.pointerType?(r[o.pointerId]={x:o.pageX,y:o.pageY},this._state$.next(t[Math.min(n.length,2)])):this._state$.next(e[o.button]||ms.NONE)}),pa(this._element,"contextmenu").pipe(at(this.stopped$)).subscribe(o=>{o.preventDefault()}),pa(this._element,"wheel",{passive:!1}).pipe(at(this.stopped$)).subscribe(o=>{o.preventDefault(),this._wheel$.next(o.deltaY)})})}stopInternal(e=!0){return TU(this,void 0,void 0,function*(){this.stopped$.next(),e&&this.options.canvas&&(this.options.canvas.removeEventListener("click",this.canvasClickListener),document.exitPointerLock())})}canvasClickListener(){this.options.canvas.requestPointerLock()}}class to{static clone(e){return{x:e.x,y:e.y,z:e.z,w:e.w}}static add(e,t){const n=e.w+t.w,r=e.x+t.x,s=e.y+t.y,o=e.z+t.z,a=Math.sqrt(n*n+r*r+s*s+o*o);return{w:n/a,x:r/a,y:s/a,z:o/a}}static mult(e,t){return{w:e.w*t.w-e.x*t.x-e.y*t.y-e.z*t.z,x:e.w*t.x+e.x*t.w+e.y*t.z-e.z*t.y,y:e.w*t.y-e.x*t.z+e.y*t.w+e.z*t.x,z:e.w*t.z+e.x*t.y-e.y*t.x+e.z*t.w}}static combineRotations(...e){let t={w:1,x:0,y:0,z:0};for(const n of e)t=this.mult(t,n);return t}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),z:e.z+n*(t.z-e.z),w:e.w+n*(t.w-e.w)}}static slerp(e,t,n){let s=Math.acos(e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w),o=Math.sin(s),a=e.x*Math.sin((1-n)*s)/o+t.x*Math.sin(n*s)/o,l=e.y*Math.sin((1-n)*s)/o+t.y*Math.sin(n*s)/o,c=e.z*Math.sin((1-n)*s)/o+t.z*Math.sin(n*s)/o,d=e.w*Math.sin((1-n)*s)/o+t.w*Math.sin(n*s)/o;return isNaN(a)||isNaN(l)||isNaN(c)||isNaN(d)?to.clone(e):{x:a,y:l,z:c,w:d}}static fromAngle(e,t){const n=t/2,r=Math.sin(n);return Object.assign(Object.assign({},zt.scalarMult(e,r)),{w:Math.cos(n)})}static fromMatrix4(e){const t=e[0],n=e[4],r=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],d=e[10],f=t+o+d;if(f>0){const p=.5/Math.sqrt(f+1);return{x:(c-a)*p,y:(r-l)*p,z:(s-n)*p,w:.25/p}}if(t>o&&t>d){const p=2*Math.sqrt(1+t-o-d);return{x:.25*p,y:(n+s)/p,z:(r+l)/p,w:(c-a)/p}}if(o>d){const p=2*Math.sqrt(1+o-t-d);return{x:(n+s)/p,y:.25*p,z:(a+c)/p,w:(r-l)/p}}{const p=2*Math.sqrt(1+d-t-o);return{x:(r+l)/p,y:(a+c)/p,z:.25*p,w:(s-n)/p}}}static fromEuler(e){const t=e.x,n=e.y,r=e.z,s=Math.cos(.5*r),o=Math.sin(.5*r),a=Math.cos(.5*n),l=Math.sin(.5*n),c=Math.cos(.5*t),d=Math.sin(.5*t);return{w:c*a*s+d*l*o,x:d*a*s-c*l*o,y:c*l*s+d*a*o,z:c*a*o-d*l*s}}static toEuler(e){const t=e.w,n=e.x,r=e.y,s=e.z,c=2*(t*r-s*n);return{x:Math.atan2(2*(t*n+r*s),1-2*(n*n+r*r)),y:Math.abs(c)>=1?Math.sign(c)*Math.PI/2:Math.asin(c),z:Math.atan2(2*(t*s+n*r),1-2*(r*r+s*s))}}static lookAt(e,t,n){return this.fromMatrix4(class _Q{static lookAt(e,t,n){let r=zt.sub(e,t);r=0===zt.lenSq(r)?Object.assign(Object.assign({},r),{z:1}):zt.norm(r);let s=zt.cross(n,r);0===zt.lenSq(s)&&(r=1===Math.abs(n.z)?Object.assign(Object.assign({},r),{x:r.x+1e-4}):Object.assign(Object.assign({},r),{z:r.z+1e-4}),r=zt.norm(r),s=zt.cross(n,r)),s=zt.norm(s);let o=zt.cross(r,s);return[s.x,s.y,s.z,0,o.x,o.y,o.z,0,r.x,r.y,r.z,0]}}.lookAt(e,t,n))}static rotAround(e,t,n){const r=Math.sin(n/2),s={w:Math.cos(n/2),x:t.x*r,y:t.y*r,z:t.z*r};return this.mult(s,e)}}class zt{static clone(e){return{x:e.x,y:e.y,z:e.z}}static add(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}static sub(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}}static lenSq(e){return e.x*e.x+e.y*e.y+e.z*e.z}static len(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}static dist(e,t){return zt.len(zt.sub(e,t))}static cross(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return{x:r*l-s*a,y:s*o-n*l,z:n*a-r*o}}static norm(e){const t=Math.sqrt(e.x**2+e.y**2+e.z**2);return 0===t?e:{x:e.x/t,y:e.y/t,z:e.z/t}}static scalarMult(e,t){return{x:e.x*t,y:e.y*t,z:e.z*t}}static lerp(e,t,n){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y),z:e.z+n*(t.z-e.z)}}static angle(e,t){const n=e.x*t.x+e.y*t.y+e.z*t.z,r=Math.sqrt(e.x**2+e.y**2+e.z**2)*Math.sqrt(t.x**2+t.y**2+t.z**2);return Math.acos(n/r)}static rot(e,t){const{x:n,y:r,z:s}=e;return{x:t.w*t.w*n+2*t.y*t.w*s-2*t.z*t.w*r+t.x*t.x*n+2*t.y*t.x*r+2*t.z*t.x*s-t.y*t.y*n-t.z*t.z*n,y:2*t.x*t.y*n+t.y*t.y*r+2*t.z*t.y*s+2*t.w*t.z*n-t.z*t.z*r+t.w*t.w*r-2*t.x*t.w*s-t.x*t.x*r,z:2*t.x*t.z*n+2*t.y*t.z*r+t.z*t.z*s-2*t.w*t.y*n-t.y*t.y*s+2*t.w*t.x*r-t.x*t.x*s+t.w*t.w*s}}static rotAround(e,t,n){return this.rot(e,to.fromAngle(t,n))}static toSpherical(e){const t=Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);return{radius:t,theta:0==t?0:Math.atan2(e.y,e.x),phi:0==t?0:Math.atan2(Math.sqrt(e.x*e.x+e.y*e.y),e.z)}}static fromSpherical(e){return{x:e.radius*Math.sin(e.phi)*Math.cos(e.theta),y:e.radius*Math.sin(e.phi)*Math.sin(e.theta),z:e.radius*Math.cos(e.phi)}}}class ma{constructor(){this.worlds=[],this.selectedWorld=null,window.gg=this}static get instance(){return ma._instance||(ma._instance=new ma),ma._instance}console(e){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){if(!this.selectedWorld)return"World not selected";const t=e.split("\n");let n=[];for(const r of t){const s=r.split(" ");n.push(yield this.selectedWorld.runConsoleCommand(s.splice(0,1)[0],s))}return n.join("\n")})}}class Gv{constructor(){this.output="\n                  \u2584\u2588\u2588\u2588\u2588   \u2584\u2588\u2588\u2588\u2588     \u2588     \u2588\u2591\u2593\u2588\u2588\u2588\u2588\u2588  \u2584\u2584\u2584\u2584   \n                 \u2588\u2588\u2592 \u2580\u2588\u2592 \u2588\u2588\u2592 \u2580\u2588\u2592   \u2593\u2588\u2591 \u2588 \u2591\u2588\u2591\u2593\u2588   \u2580 \u2593\u2588\u2588\u2588\u2588\u2588\u2584 \n                \u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591\u2592\u2588\u2588\u2591\u2584\u2584\u2584\u2591   \u2592\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2588\u2588\u2588   \u2592\u2588\u2588\u2592 \u2584\u2588\u2588\n                \u2591\u2593\u2588  \u2588\u2588\u2593\u2591\u2593\u2588  \u2588\u2588\u2593   \u2591\u2588\u2591 \u2588 \u2591\u2588 \u2592\u2593\u2588  \u2584 \u2592\u2588\u2588\u2591\u2588\u2580  \n                \u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592   \u2591\u2591\u2588\u2588\u2592\u2588\u2588\u2593 \u2591\u2592\u2588\u2588\u2588\u2588\u2592\u2591\u2593\u2588  \u2580\u2588\u2593\n                 \u2591\u2592   \u2592  \u2591\u2592   \u2592    \u2591 \u2593\u2591\u2592 \u2592  \u2591\u2591 \u2592\u2591 \u2591\u2591\u2592\u2593\u2588\u2588\u2588\u2580\u2592\n                  \u2591   \u2591   \u2591   \u2591      \u2592 \u2591 \u2591   \u2591 \u2591  \u2591\u2592\u2591\u2592   \u2591 \n                \u2591 \u2591   \u2591 \u2591 \u2591   \u2591      \u2591   \u2591     \u2591    \u2591    \u2591 \n                      \u2591       \u2591        \u2591       \u2591  \u2591 \u2591      \n                                                         \u2591 \n             >>> https://github.com/AndyGura/gg-web-engine <<<\nWelcome to GG web engine UI console. \nEnter command in input below.\n\nList of available commands: commandslist \n",this.commandHistory=[],this.currentCommandIndex=0,this.elements=null}static get instance(){return this._instance||(this._instance=new Gv),this._instance}get isUIShown(){return!!this.elements}createUI(){if(this.elements)return;const e=document.createElement("div");e.innerHTML='\n  <div id="gg-console-header" style="padding: 10px; cursor: move; z-index: 10; background-color: #054a81; border: 1px solid white; font-size: large;">GG web engine UI console</div>\n  <textarea id="gg-console-output" disabled style="resize: none; flex-grow: 1; background: #555555; border: 1px solid white; color: white; font-family: monospace;" ></textarea>\n  <input id="gg-console-input" style="background: #555555; border: 1px solid white; color: white; font-family: monospace;"/>',e.style.position="absolute",e.style.zIndex="1000",e.style.backgroundColor="#222222",e.style.border="1px solid white",e.style.width="640px",e.style.height="480px",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="stretch",e.style.padding="3px",e.style.rowGap="3px",e.style.fontFamily="monospace",e.style.color="white",document.body.append(e),this.elements={main:e,input:document.getElementById("gg-console-input"),output:document.getElementById("gg-console-output")},this.elements.input.onkeydown=t=>{13===t?.keyCode?(t.preventDefault(),this.onInput().then()):38===t?.keyCode?(t.preventDefault(),this.onUsePreviousCommand()):40===t?.keyCode&&(t.preventDefault(),this.onUseNextCommand())},this.stdout(),this.setupDragging(),setTimeout(()=>this.elements.input.focus(),20)}destroyUI(){!this.elements||(document.body.removeChild(this.elements.main),this.elements=null)}onUsePreviousCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex--,this.currentCommandIndex<0&&(this.currentCommandIndex+=this.commandHistory.length),this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onUseNextCommand(){0!==this.commandHistory.length&&(this.currentCommandIndex++,this.elements.input.value=this.commandHistory[this.currentCommandIndex%this.commandHistory.length])}onInput(){return i=this,e=void 0,n=function*(){const e=this.elements.input.value;this.elements.input.value="",this.stdout("\n> "+e),this.stdout("\n"+(yield ma.instance.console(e))),this.commandHistory.push(e),this.currentCommandIndex=this.commandHistory.length},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}stdout(e=""){this.output+=e,this.elements.output.value=this.output,this.elements.output.scrollTop=this.elements.output.scrollHeight}setupDragging(){let e=0,t=0;const r=o=>{o.preventDefault();const a=e-o.clientX,l=t-o.clientY;e=o.clientX,t=o.clientY,this.elements.main.style.left=this.elements.main.offsetLeft-a+"px",this.elements.main.style.top=this.elements.main.offsetTop-l+"px"},s=()=>{document.onmouseup=null,document.onmousemove=null};document.getElementById("gg-console-header").onmousedown=o=>{(o=o||window.event).preventDefault(),e=o.clientX,t=o.clientY,document.onmouseup=s,document.onmousemove=r}}}var bQ=Or(738),xQ=Or.n(bQ);class Zd{constructor(){this.ui=null,this.removed$=new He}static get instance(){return this._instance||(this._instance=new Zd),this._instance}get isUIShown(){return!!this.ui}createUI(){var e;const t=new(xQ());t.dom.style.left="unset",t.dom.style.right="0",t.showPanel(0),document.body.appendChild(t.dom),VT(ma.instance.selectedWorld,-1).pipe(at(this.removed$)).subscribe(()=>{t?.begin()}),VT(ma.instance.selectedWorld,1e4).pipe(at(this.removed$)).subscribe(()=>{t?.end()});const n=document.createElement("div");n.style.cssText="position:fixed;top:48px;right:0;opacity:0.9;z-index:9999;background-color:#333;color:white",n.innerHTML=`<input type="checkbox" name="checkbox" id="physics_debugger_checkbox_id" value="1"${null!==(e=ma.instance.selectedWorld)&&void 0!==e&&e.physicsWorld.physicsDebugViewActive?" checked":""}>\n                                 <label for="physics_debugger_checkbox_id" style="user-select: none;">Show physics bodies in scene</label>`,document.body.appendChild(n),pa(document.getElementById("physics_debugger_checkbox_id"),"change").pipe(at(this.removed$)).subscribe(r=>{ma.instance.console("dr_drawphysics "+r.target.checked).then()}),this.ui={stats:t,customContainer:n}}destroyUI(){this.ui&&(document.body.removeChild(this.ui.stats.dom),document.body.removeChild(this.ui.customContainer),this.ui.stats.end(),this.ui=null),this.removed$.next()}}class WT{constructor(e=!1,t=Kd.instance){this.parentClock=t,this.tickSub=null,this._tick$=new He,this.startedAt=-1,this.oldRelativeTime=0,this.pausedAt=-1,e&&this.start()}get tick$(){return this._tick$.pipe(Je(([e,t])=>[t,t-e]))}get isRunning(){return!!this.tickSub}get isPaused(){return-1!==this.pausedAt}get elapsedTime(){return this.isPaused?this.pausedAt-this.startedAt:this.parentClock.elapsedTime-this.startedAt}createChildClock(e){return new WT(e,this)}start(){this.isRunning||(this.oldRelativeTime=0,this.startedAt=this.parentClock.elapsedTime,this.startListeningTicks())}stop(){this.stopListeningTicks(),this.startedAt=this.pausedAt=-1}pause(){this.stopListeningTicks(),this.pausedAt=this.parentClock.elapsedTime}resume(){this.isRunning||-1==this.pausedAt||(this.startedAt+=this.parentClock.elapsedTime-this.pausedAt,this.pausedAt=-1,this.startListeningTicks())}startListeningTicks(){if(this.tickSub)throw new Error("Clock is already ticking!");this.tickSub=this.parentClock.tick$.pipe(Je(([e,t])=>[this.oldRelativeTime,e-this.startedAt]),Hi(([e,t])=>this.oldRelativeTime=t)).subscribe(this._tick$)}stopListeningTicks(){var e;null===(e=this.tickSub)||void 0===e||e.unsubscribe(),this.tickSub=null}}class Kd{constructor(){this._tick$=new He;let e=this.elapsedTime;tt(void 0,j2).pipe(function wQ(i){let t,e=1/0;return null!=i&&("object"==typeof i?({count:e=1/0,delay:t}=i):e=i),e<=0?()=>Bs:kn((n,r)=>{let o,s=0;const a=()=>{if(o?.unsubscribe(),o=null,null!=t){const c="number"==typeof t?X1(t):mr(t(s)),d=In(r,()=>{d.unsubscribe(),l()});c.subscribe(d)}else l()},l=()=>{let c=!1;o=n.subscribe(In(r,void 0,()=>{++s<e?o?a():c=!0:r.complete()})),c&&a()};l()})}()).pipe(Je(()=>[e,this.elapsedTime]),Hi(([t,n])=>e=n)).subscribe(this._tick$)}static get instance(){return Kd._instance||(Kd._instance=new Kd),Kd._instance}get tick$(){return this._tick$.pipe(Je(([e,t])=>[t,t-e]))}get elapsedTime(){return(typeof performance>"u"?Date:performance).now()}createChildClock(e){return new WT(e,this)}}var Gp=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class SQ extends Hv{constructor(){super(),this._position$=new wn(this.getDefaultPosition()),this._rotation$=new wn(this.getDefaultRotation()),this._scale$=new wn(this.getDefaultScale())}get world(){return super.world}get position(){return this._position$.getValue()}get position$(){return this._position$.asObservable()}set position(e){this._position$.next(e)}get rotation(){return this._rotation$.getValue()}get rotation$(){return this._rotation$.asObservable()}set rotation(e){this._rotation$.next(e)}get scale(){return this._scale$.getValue()}get scale$(){return this._scale$.asObservable()}set scale(e){this._scale$.next(e)}onSpawned(e){super.onSpawned(e)}}class EQ extends SQ{getDefaultPosition(){return{x:0,y:0,z:0}}getDefaultRotation(){return{x:0,y:0,z:0,w:1}}getDefaultScale(){return{x:1,y:1,z:1}}get euler$(){return this._rotation$.pipe(Je(e=>to.toEuler(e)))}get euler(){return to.toEuler(this._rotation$.getValue())}set euler(e){this._rotation$.next(to.fromEuler(e))}}class Tu extends EQ{constructor(e,t=null){if(super(),this.object3D=e,this.objectBody=t,this.tickOrder=Ec.OBJECTS_BINDING,t)t.entity=this,this.tick$.subscribe(()=>{this.runTransformBinding(t,e)}),this.runTransformBinding(t,e),this.name=t.name;else{if(!e)throw new Error("Cannot create entity without a mesh and a body");super.position=e.position,super.rotation=e.rotation,super.scale=e.scale,this.name=e.name}}get position(){return super.position}set position(e){this.object3D&&(this.object3D.position=e),this.objectBody&&(this.objectBody.position=e),super.position=e}get rotation(){return super.rotation}set rotation(e){this.object3D&&(this.object3D.rotation=e),this.objectBody&&(this.objectBody.rotation=e),super.rotation=e}get scale(){return super.scale}set scale(e){this.object3D&&(this.object3D.scale=e),this.objectBody&&(this.objectBody.scale=e),super.scale=e}get visible(){var e;return!(null===(e=this.object3D)||void 0===e||!e.visible)}set visible(e){this.object3D&&(this.object3D.visible=e);for(const t of this._children)t instanceof Tu&&(t.visible=e)}runTransformBinding(e,t){const n=e.position,r=e.rotation;t&&(t.position=n,t.rotation=r),this._position$.next(n),this._rotation$.next(r)}onSpawned(e){var t,n;super.onSpawned(e),null===(t=this.object3D)||void 0===t||t.addToWorld(e.visualScene),null===(n=this.objectBody)||void 0===n||n.addToWorld(e.physicsWorld)}onRemoved(){var e,t;null===(e=this.object3D)||void 0===e||e.removeFromWorld(this.world.visualScene),null===(t=this.objectBody)||void 0===t||t.removeFromWorld(this.world.physicsWorld),super.onRemoved()}dispose(){super.dispose(),this.object3D&&this.object3D.dispose(),this.objectBody&&this.objectBody.dispose()}}class DQ extends Tu{constructor(e,t=null){super(e,t),this.object3D=e,this.objectBody=t}get fov(){return this.object3D.fov}set fov(e){this.object3D.fov=e}}var RU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};class RQ extends Hv{constructor(e,t,n={keymap:"wasd",movementOptions:{speed:.5},mouseOptions:{}}){super(),this.keyboard=e,this.camera=t,this.options=n,this.tickOrder=Ec.INPUT_CONTROLLERS,this.mouseInput=new Hp(n.mouseOptions),this.directionsInput=new fQ(e,n.keymap)}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return RU(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e);let n={direction:{},rest:[]};const r=["KeyE","KeyQ"];this.camera.object3D.supportsFov&&r.push("KeyZ","KeyC"),this.directionsInput.output$.pipe(at(this._onRemoved$)).subscribe(a=>{n.direction=a}),gp(r.map(a=>this.keyboard.bind(a))).pipe(at(this._onRemoved$)).subscribe(a=>{n.rest=a});let s={x:0,y:0},o=Hp.isTouchDevice();this.mouseInput.delta$.pipe(at(this._onRemoved$),Dn(()=>o||this.mouseInput.isPointerLocked)).subscribe(a=>{s=Po.add(s,a)}),this.camera.tick$.pipe(at(this._onRemoved$)).subscribe(()=>{let a={x:0,y:0,z:0};const[l,c,d,f]=n.rest;if(void 0!==n.direction.upDown&&(a.z=n.direction.upDown?-1:1),void 0!==n.direction.leftRight&&(a.x=n.direction.leftRight?-1:1),l!=c&&(a.y=c?-1:1),d!=f&&(this.camera.object3D.fov+=d?1:-1),this.camera.position=zt.add(this.camera.position,zt.rot(zt.scalarMult(zt.norm(a),this.options.movementOptions.speed),this.camera.rotation)),0!=s.x||0!=s.y){const p=zt.toSpherical(zt.rot({x:0,y:0,z:-1},this.camera.rotation));p.theta-=s.x/300,p.phi+=s.y/300,p.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,p.phi)),this.camera.rotation=to.lookAt(this.camera.position,zt.add(this.camera.position,zt.fromSpherical(p)),{x:0,y:0,z:1}),s={x:0,y:0}}}),yield this.mouseInput.start(),yield this.directionsInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return RU(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0),yield this.directionsInput.stop()})}}var PU=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})};const PQ={mouseOptions:{},target:{x:0,y:0,z:0},orbiting:{sensitivityX:1,sensitivityY:1},zooming:{sensitivity:1},panning:{sensitivityX:1,sensitivityY:1},dollying:{sensitivity:1}};class kU extends Hv{constructor(e,t={}){super(),this.camera=e,this.tickOrder=Ec.INPUT_CONTROLLERS,this.spherical={phi:0,radius:0,theta:0},this.options=Object.assign(Object.assign({},PQ),t),this.mouseInput=new Hp(this.options.mouseOptions)}onSpawned(e){const t=Object.create(null,{onSpawned:{get:()=>super.onSpawned}});return PU(this,void 0,void 0,function*(){yield t.onSpawned.call(this,e),this.spherical=zt.toSpherical(zt.sub(this.camera.position,this.options.target)),this.options.orbiting&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Dn(()=>this.mouseInput.state==ms.DRAG)).subscribe(r=>{this.spherical.theta-=r.x*this.options.orbiting.sensitivityX*Math.PI/900,this.spherical.phi-=r.y*this.options.orbiting.sensitivityY*Math.PI/900,this.spherical.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.spherical.phi))}),this.options.zooming&&this.mouseInput.wheel$.pipe(at(this._onRemoved$)).subscribe(r=>{0!=r&&(this.spherical.radius*=Math.pow(.95,this.options.zooming.sensitivity*(r>0?-1:1)))});const n=r=>{const s=zt.fromSpherical(this.spherical),o=zt.rotAround(s,{x:-Math.sin(this.spherical.theta),y:Math.cos(this.spherical.theta),z:0},Math.PI/2),a=zt.rotAround(s,zt.norm(o),Math.PI/2);this.options.target=zt.add(this.options.target,zt.add(zt.scalarMult(o,-this.options.panning.sensitivityY*r.y/1e3),zt.scalarMult(a,this.options.panning.sensitivityX*r.x/1e3)))};this.options.panning&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Dn(()=>this.mouseInput.state==ms.DRAG_RIGHT_BUTTON)).subscribe(r=>{n(r)}),this.options.dollying&&this.mouseInput.delta$.pipe(at(this._onRemoved$),Dn(()=>this.mouseInput.state==ms.DRAG_MIDDLE_BUTTON)).subscribe(r=>{this.spherical.radius*=Math.pow(.95,-this.options.dollying.sensitivity*r.y/10)}),Hp.isTouchDevice()&&(this.options.dollying||this.options.panning)&&this.mouseInput.twoTouchGestureDelta$.pipe(at(this._onRemoved$)).subscribe(r=>{this.options.dollying&&(this.spherical.radius*=Math.pow(.95,this.options.dollying.sensitivity*r.distanceDelta/10)),this.options.panning&&n(r.centerPointDelta)}),this.camera.tick$.pipe(at(this._onRemoved$),Je(()=>this.spherical)).subscribe(r=>{this.camera.position=zt.add(this.options.target,zt.fromSpherical(r)),this.camera.rotation=to.lookAt(this.camera.position,this.options.target,{x:0,y:0,z:1})}),yield this.mouseInput.start()})}onRemoved(){const e=Object.create(null,{onRemoved:{get:()=>super.onRemoved}});return PU(this,void 0,void 0,function*(){yield e.onRemoved.call(this),yield this.mouseInput.stop(!0)})}}class OQ extends uQ{onSpawned(e){super.onSpawned(e),e.addEntity(this.camera)}onRemoved(){var e;super.onRemoved(),null===(e=this.world)||void 0===e||e.removeEntity(this.camera)}}var qT=function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})},Iu=(()=>{return(i=Iu||(Iu={}))[i.Nothing=0]="Nothing",i[i.Files=1]="Files",i[i.Entities=2]="Entities",Iu;var i})();const OU={cachingStrategy:Iu.Nothing,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0,w:1},loadProps:!0},LU=i=>({meta:i.meta,resources:i.resources.map(({object3D:e,body:t})=>({object3D:e&&e.clone(),body:t&&t.clone()}))});class FQ{constructor(e){this.world=e,this.filesCache=new Map,this.loadResultCache=new Map}loadGgGlbFiles(e,t=!1){return qT(this,void 0,void 0,function*(){if(t&&this.filesCache.has(e))return this.filesCache.get(e);const n=Promise.all([fetch(`${e}.glb`).then(s=>s.arrayBuffer()),fetch(`${e}.meta`).then(s=>s.text()).then(s=>JSON.parse(s))]);t&&this.filesCache.set(e,n);const r=yield n;return t&&this.filesCache.set(e,r),r})}loadGgGlbResources(e,t=Iu.Nothing){return qT(this,void 0,void 0,function*(){if(t==Iu.Entities&&this.loadResultCache.has(e)){const l=this.loadResultCache.get(e),c=l instanceof Promise?yield l:l;return LU(c)}const[n,r]=yield this.loadGgGlbFiles(e,t==Iu.Files);if(!n)throw new Error("GLB not found");const[s,o]=yield Promise.all([this.world.visualScene.loader.loadFromGgGlb(n,r),this.world.physicsWorld.loader.loadFromGgGlb(n,r)]),a={resources:[],meta:r};if(!s)return a;if(0==o.length)a.resources.push({object3D:s,body:null});else if(1==o.length)a.resources.push({object3D:s,body:o[0]});else{for(const l of o)a.resources.push({object3D:s.popChild(l.name),body:l});s.isEmpty()||a.resources.push({object3D:s,body:null})}return t==Iu.Entities&&this.loadResultCache.set(e,LU(a)),a})}loadGgGlb(e,t=OU){return qT(this,void 0,void 0,function*(){const n=Object.assign(Object.assign({},OU),t),{resources:r,meta:s}=yield this.loadGgGlbResources(e,n.cachingStrategy),o={entities:r.map(({object3D:a,body:l})=>new Tu(a,l)),meta:s};return n.loadProps&&(o.props=yield Promise.all(s.dummies.filter(a=>a.is_prop||a.is_scene).map(a=>this.loadGgGlb(a.is_prop?(n.propsPath||e.substring(0,e.lastIndexOf("/")+1))+a.prop_id:a.scene_id,{loadProps:!!a.is_scene,position:zt.add(zt.rot(a.position,n.rotation),n.position),rotation:to.combineRotations(a.rotation,n.rotation)})))),o.entities.forEach(a=>{a.position=zt.add(zt.rot(zt.clone(a.position),n.rotation),n.position),a.rotation=to.mult(to.clone(a.rotation),n.rotation)}),o})}}class FU extends class MQ{constructor(e,t,n=!1){this.visualScene=e,this.physicsWorld=t,this.consoleEnabled=n,this.worldClock=Kd.instance.createChildClock(!1),this.keyboardInput=new pQ,this.children=[],this.tickListeners=[],this.commands={},ma.instance.worlds.push(this),ma.instance.selectedWorld=this,this.keyboardInput.start().then(),n&&(this.keyboardInput.bind("Backquote").pipe(Dn(r=>r)).subscribe(()=>{Gv.instance.isUIShown?Gv.instance.destroyUI():Gv.instance.createUI()}),this.registerConsoleCommand("commandslist",()=>Gp(this,void 0,void 0,function*(){return Object.entries(this.commands).map(([r,s])=>`${r}${s.doc?"\t// "+s.doc:""}`).sort().join("\n\n")}),"no args; print all available commands"),this.registerConsoleCommand("debugger",(...r)=>Gp(this,void 0,void 0,function*(){return["1","true","+"].includes(r[0])!=Zd.instance.isUIShown&&(Zd.instance.isUIShown?Zd.instance.destroyUI():Zd.instance.createUI()),""+Zd.instance.isUIShown}),"args: [0 or 1]; turn on/off debug panel. Default value is 0"),this.registerConsoleCommand("ph_timescale",(...r)=>Gp(this,void 0,void 0,function*(){return this.physicsWorld.timeScale=+r[0],JSON.stringify(this.physicsWorld.timeScale)}),"args: [float]; change time scale of physics engine. Default value is 1.0"),this.registerConsoleCommand("dr_drawphysics",(...r)=>Gp(this,void 0,void 0,function*(){return["1","true","+"].includes(r[0])!=this.physicsWorld.physicsDebugViewActive&&this.triggerPhysicsDebugView(),""+this.physicsWorld.physicsDebugViewActive}),"args: [0 or 1]; turn on/off physics debug view. Default value is 0"))}init(){return Gp(this,void 0,void 0,function*(){yield Promise.all([this.physicsWorld.init(),this.visualScene.init()]),this.worldClock.tick$.subscribe(([e,t])=>{let n=0;for(;n<this.tickListeners.length&&!(this.tickListeners[n].tickOrder>=Ec.PHYSICS_SIMULATION);n++)this.tickListeners[n].active&&this.tickListeners[n].tick$.next([e,t]);for(this.physicsWorld.simulate(t);n<this.tickListeners.length;n++)this.tickListeners[n].active&&this.tickListeners[n].tick$.next([e,t])})})}start(){this.worldClock.start()}pauseWorld(){this.worldClock.pause()}resumeWorld(){this.worldClock.resume()}get isRunning(){return this.worldClock.isRunning}get isPaused(){return this.worldClock.isPaused}get worldTime(){return this.worldClock.elapsedTime}createClock(e){return this.worldClock.createChildClock(e)}dispose(){this.worldClock.stop(),this.keyboardInput.stop().then();for(let e=0;e<this.children.length;e++)this.children[e].onRemoved(),this.children[e].dispose();this.children.splice(0,this.children.length),this.tickListeners.splice(0,this.tickListeners.length),this.physicsWorld.dispose(),this.visualScene.dispose()}addEntity(e){e.world?console.warn("Trying to spawn entity, which is already spawned"):(this.children.push(e),this.tickListeners.push(e),this.tickListeners.sort((t,n)=>t.tickOrder-n.tickOrder),e.onSpawned(this))}removeEntity(e,t=!0){if(e.world){if(e.world!==this)throw new Error("Entity is not a part of this world");this.children.splice(this.children.findIndex(n=>n===e),1),this.tickListeners.splice(this.tickListeners.findIndex(n=>n===e),1),e.onRemoved()}t&&e.dispose()}registerConsoleCommand(e,t,n){if(!this.consoleEnabled)throw new Error("Console not enabled for this world");this.commands[e]={handler:t,doc:n}}runConsoleCommand(e,t){return Gp(this,void 0,void 0,function*(){if(!this.consoleEnabled)throw new Error("Console not enabled for this world");return this.commands[e]?this.commands[e].handler(...t):"Unrecognized command: "+e})}triggerPhysicsDebugView(){if(this.physicsWorld.physicsDebugViewActive)this.physicsWorld.stopDebugger(this);else{const e=this.visualScene.debugPhysicsDrawerClass;if(!e)throw new Error("Debug drawer is not available");this.physicsWorld.startDebugger(this,new e)}}}{constructor(e,t,n=!1){super(e,t,n),this.visualScene=e,this.physicsWorld=t,this.consoleEnabled=n,this.loader=new FQ(this),n&&this.registerConsoleCommand("ph_gravity",(...r)=>function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){return 1==r.length&&(r=["0","0",""+-+r[0]]),r.length>0&&(this.physicsWorld.gravity={x:+r[0],y:+r[1],z:+r[2]}),JSON.stringify(this.physicsWorld.gravity)}),'args: [float] or [float float float]; change 3D world gravity vector. 1 argument means {x: 0, y: 0, z: -value}, 3 arguments set the whole vector. Default value is "9.82" or "0 0 -9.82"')}addPrimitiveRigidBody(e,t={x:0,y:0,z:0},n={x:0,y:0,z:0,w:1}){const r=new Tu(this.visualScene.factory.createPrimitive(e.shape),this.physicsWorld.factory.createRigidBody(e));return r.position=t,r.rotation=n,this.addEntity(r),r}}const Mr=1001,ur=1003,dr=1006,eh=1008,th=1009,nh=1014,Pu=1015,qv=1016,jp=1020,_a=1023,ih=1026,qp=1027,rh=3e3,ti=3001,Al="srgb",Xv="srgb-linear",yV="display-p3";class Zp{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],oh=Math.PI/180,Kp=180/Math.PI;function ko(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(gs[255&i]+gs[i>>8&255]+gs[i>>16&255]+gs[i>>24&255]+"-"+gs[255&e]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[63&t|128]+gs[t>>8&255]+"-"+gs[t>>16&255]+gs[t>>24&255]+gs[255&n]+gs[n>>8&255]+gs[n>>16&255]+gs[n>>24&255]).toLowerCase()}function Gi(i,e,t){return Math.max(e,Math.min(t,i))}function Yv(i,e,t){return(1-t)*i+t*e}function lI(i){return 0==(i&i-1)&&0!==i}function MV(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Oo(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function rn(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}class Me{constructor(e=0,t=0){Me.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Gi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class bn{constructor(){bn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=n,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],c=n[1],d=n[4],f=n[7],p=n[2],m=n[5],_=n[8],b=r[0],y=r[3],v=r[6],M=r[1],w=r[4],C=r[7],D=r[2],I=r[5],N=r[8];return s[0]=o*b+a*M+l*D,s[3]=o*y+a*w+l*I,s[6]=o*v+a*C+l*N,s[1]=c*b+d*M+f*D,s[4]=c*y+d*w+f*I,s[7]=c*v+d*C+f*N,s[2]=p*b+m*M+_*D,s[5]=p*y+m*w+_*I,s[8]=p*v+m*C+_*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-n*s*d+n*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,_=t*f+n*p+r*m;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);const b=1/_;return e[0]=f*b,e[1]=(r*c-d*n)*b,e[2]=(a*n-r*o)*b,e[3]=p*b,e[4]=(d*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=m*b,e[7]=(n*l-c*t)*b,e[8]=(o*t-n*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(n*l,n*c,-n*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(cI.makeScale(e,t)),this}rotate(e){return this.premultiply(cI.makeRotation(-e)),this}translate(e,t){return this.premultiply(cI.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const cI=new bn;function CV(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}function Zv(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function Qp(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function uI(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Xee=(new bn).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Yee=(new bn).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),Jee={[Xv]:i=>i,[Al]:i=>i.convertSRGBToLinear(),[yV]:function Zee(i){return i.convertSRGBToLinear().applyMatrix3(Yee)}},Qee={[Xv]:i=>i,[Al]:i=>i.convertLinearToSRGB(),[yV]:function Kee(i){return i.applyMatrix3(Xee).convertLinearToSRGB()}},Lo={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return Xv},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(!1===this.enabled||e===t||!e||!t)return i;const n=Jee[e],r=Qee[t];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let em;class SV{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===em&&(em=Zv("canvas")),em.width=e.width,em.height=e.height;const n=em.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=em}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Zv("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=255*Qp(s[o]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*Qp(t[n]/255)):Qp(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class tm{constructor(e=null){this.isSource=!0,this.uuid=ko(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)s.push(dI(r[o].isDataTexture?r[o].image:r[o]))}else s=dI(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function dI(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?SV.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ete=0,ku=(()=>{class i extends Zp{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=Mr,s=Mr,o=dr,a=eh,l=_a,c=th,d=i.DEFAULT_ANISOTROPY,f=rh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ete++}),this.uuid=ko(),this.name="",this.source=new tm(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=o,this.minFilter=a,this.anisotropy=d,this.format=l,this.internalFormat=null,this.type=c,this.offset=new Me(0,0),this.repeat=new Me(1,1),this.center=new Me(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new bn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=f,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case 1e3:t.x=t.x-Math.floor(t.x);break;case Mr:t.x=t.x<0?0:1;break;case 1002:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case 1e3:t.y=t.y-Math.floor(t.y);break;case Mr:t.y=t.y<0?0:1;break;case 1002:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class ni{constructor(e=0,t=0,n=0,r=1){ni.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],_=l[9],b=l[2],y=l[6],v=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-b)<.01&&Math.abs(_-y)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+b)<.1&&Math.abs(_+y)<.1&&Math.abs(c+m+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(c+1)/2,C=(m+1)/2,D=(v+1)/2,I=(d+p)/4,N=(f+b)/4,V=(_+y)/4;return w>C&&w>D?w<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(w),r=I/n,s=N/n):C>D?C<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),n=I/r,s=V/r):D<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(D),n=N/s,r=V/s),this.set(n,r,s,t),this}let M=Math.sqrt((y-_)*(y-_)+(f-b)*(f-b)+(p-d)*(p-d));return Math.abs(M)<.001&&(M=1),this.x=(y-_)/M,this.y=(f-b)/M,this.z=(p-d)/M,this.w=Math.acos((c+m+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class ah extends Zp{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new ni(0,0,e,t),this.scissorTest=!1,this.viewport=new ni(0,0,e,t),this.texture=new ku({width:e,height:t,depth:1},n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:dr,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new tm(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hI extends ku{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class EV extends ku{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=Mr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Fo{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],c=n[r+1],d=n[r+2],f=n[r+3];const p=s[o+0],m=s[o+1],_=s[o+2],b=s[o+3];if(0===a)return e[t+0]=l,e[t+1]=c,e[t+2]=d,void(e[t+3]=f);if(1===a)return e[t+0]=p,e[t+1]=m,e[t+2]=_,void(e[t+3]=b);if(f!==b||l!==p||c!==m||d!==_){let y=1-a;const v=l*p+c*m+d*_+f*b,M=v>=0?1:-1,w=1-v*v;if(w>Number.EPSILON){const D=Math.sqrt(w),I=Math.atan2(D,v*M);y=Math.sin(y*I)/D,a=Math.sin(a*I)/D}const C=a*M;if(l=l*y+p*C,c=c*y+m*C,d=d*y+_*C,f=f*y+b*C,y===1-a){const D=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=D,c*=D,d*=D,f*=D}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],c=n[r+2],d=n[r+3],f=s[o],p=s[o+1],m=s[o+2],_=s[o+3];return e[t]=a*_+d*f+l*m-c*p,e[t+1]=l*_+d*p+c*f-a*m,e[t+2]=c*_+d*m+a*p-l*f,e[t+3]=d*_-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(n/2),d=a(r/2),f=a(s/2),p=l(n/2),m=l(r/2),_=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*_,this._y=c*m*f-p*d*_,this._z=c*d*_+p*m*f,this._w=c*d*f-p*m*_;break;case"YXZ":this._x=p*d*f+c*m*_,this._y=c*m*f-p*d*_,this._z=c*d*_-p*m*f,this._w=c*d*f+p*m*_;break;case"ZXY":this._x=p*d*f-c*m*_,this._y=c*m*f+p*d*_,this._z=c*d*_+p*m*f,this._w=c*d*f-p*m*_;break;case"ZYX":this._x=p*d*f-c*m*_,this._y=c*m*f+p*d*_,this._z=c*d*_-p*m*f,this._w=c*d*f+p*m*_;break;case"YZX":this._x=p*d*f+c*m*_,this._y=c*m*f+p*d*_,this._z=c*d*_-p*m*f,this._w=c*d*f-p*m*_;break;case"XZY":this._x=p*d*f-c*m*_,this._y=c*m*f-p*d*_,this._z=c*d*_+p*m*f,this._w=c*d*f+p*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],p=n+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(n>a&&n>f){const m=2*Math.sqrt(1+n-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-n-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-n-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Gi(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=n*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-n*c,this._z=s*d+o*c+n*l-r*a,this._w=o*d-n*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*n+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*f+this._w*p,this._x=n*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class O{constructor(e=0,t=0,n=0){O.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(DV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(DV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*r-a*n,d=l*n+a*t-s*r,f=l*r+s*n-o*t,p=-s*t-o*n-a*r;return this.x=c*l+p*-s+d*-a-f*-o,this.y=d*l+p*-o+f*-s-c*-a,this.z=f*l+p*-a+c*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return fI.copy(this).projectOnVector(e),this.sub(fI)}reflect(e){return this.sub(fI.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Gi(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const fI=new O,DV=new Fo;class Tl{constructor(e=new O(1/0,1/0,1/0),t=new O(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ic.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ic.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Ic.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),nm.copy(e.boundingBox),nm.applyMatrix4(e.matrixWorld),this.union(nm);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let o=0,a=s.count;o<a;o++)Ic.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Ic)}else null===r.boundingBox&&r.computeBoundingBox(),nm.copy(r.boundingBox),nm.applyMatrix4(e.matrixWorld),this.union(nm)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ic),Ic.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Kv),wM.subVectors(this.max,Kv),im.subVectors(e.a,Kv),rm.subVectors(e.b,Kv),sm.subVectors(e.c,Kv),Ou.subVectors(rm,im),Lu.subVectors(sm,rm),lh.subVectors(im,sm);let t=[0,-Ou.z,Ou.y,0,-Lu.z,Lu.y,0,-lh.z,lh.y,Ou.z,0,-Ou.x,Lu.z,0,-Lu.x,lh.z,0,-lh.x,-Ou.y,Ou.x,0,-Lu.y,Lu.x,0,-lh.y,lh.x,0];return!(!pI(t,im,rm,sm,wM)||(t=[1,0,0,0,1,0,0,0,1],!pI(t,im,rm,sm,wM)))&&(MM.crossVectors(Ou,Lu),t=[MM.x,MM.y,MM.z],pI(t,im,rm,sm,wM))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ic).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Ic).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Tc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Tc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Tc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Tc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Tc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Tc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Tc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Tc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Tc)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Tc=[new O,new O,new O,new O,new O,new O,new O,new O],Ic=new O,nm=new Tl,im=new O,rm=new O,sm=new O,Ou=new O,Lu=new O,lh=new O,Kv=new O,wM=new O,MM=new O,ch=new O;function pI(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){ch.fromArray(i,s);const a=r.x*Math.abs(ch.x)+r.y*Math.abs(ch.y)+r.z*Math.abs(ch.z),l=e.dot(ch),c=t.dot(ch),d=n.dot(ch);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const tte=new Tl,Jv=new O,mI=new O;class Rc{constructor(e=new O,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):tte.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jv.subVectors(e,this.center);const t=Jv.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(Jv,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(mI.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jv.copy(e.center).add(mI)),this.expandByPoint(Jv.copy(e.center).sub(mI))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Pc=new O,gI=new O,CM=new O,Fu=new O,_I=new O,SM=new O,vI=new O;class EM{constructor(e=new O,t=new O(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Pc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Pc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Pc.copy(this.origin).addScaledVector(this.direction,t),Pc.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){gI.copy(e).add(t).multiplyScalar(.5),CM.copy(t).sub(e).normalize(),Fu.copy(this.origin).sub(gI);const s=.5*e.distanceTo(t),o=-this.direction.dot(CM),a=Fu.dot(this.direction),l=-Fu.dot(CM),c=Fu.lengthSq(),d=Math.abs(1-o*o);let f,p,m,_;if(d>0)if(f=o*l-a,p=o*a-l,_=s*d,f>=0)if(p>=-_)if(p<=_){const b=1/d;f*=b,p*=b,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-_?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=_?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(gI).addScaledVector(CM,p),m}intersectSphere(e,t){Pc.subVectors(e.center,this.origin);const n=Pc.dot(this.direction),r=Pc.dot(Pc)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:this.at(a<0?l:a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(n=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(n=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),n>l||a>r)||((a>n||n!=n)&&(n=a),(l<r||r!=r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,Pc)}intersectTriangle(e,t,n,r,s){_I.subVectors(t,e),SM.subVectors(n,e),vI.crossVectors(_I,SM);let a,o=this.direction.dot(vI);if(o>0){if(r)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Fu.subVectors(this.origin,e);const l=a*this.direction.dot(SM.crossVectors(Fu,SM));if(l<0)return null;const c=a*this.direction.dot(_I.cross(Fu));if(c<0||l+c>o)return null;const d=-a*Fu.dot(vI);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class tn{constructor(){tn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,o,a,l,c,d,f,p,m,_,b,y){const v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=d,v[10]=f,v[14]=p,v[3]=m,v[7]=_,v[11]=b,v[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new tn).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/om.setFromMatrixColumn(e,0).length(),s=1/om.setFromMatrixColumn(e,1).length(),o=1/om.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),f=Math.sin(s);if("XYZ"===e.order){const p=o*d,m=o*f,_=a*d,b=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=m+_*c,t[5]=p-b*c,t[9]=-a*l,t[2]=b-p*c,t[6]=_+m*c,t[10]=o*l}else if("YXZ"===e.order){const p=l*d,m=l*f,_=c*d,b=c*f;t[0]=p+b*a,t[4]=_*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*d,t[9]=-a,t[2]=m*a-_,t[6]=b+p*a,t[10]=o*l}else if("ZXY"===e.order){const p=l*d,m=l*f,_=c*d,b=c*f;t[0]=p-b*a,t[4]=-o*f,t[8]=_+m*a,t[1]=m+_*a,t[5]=o*d,t[9]=b-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if("ZYX"===e.order){const p=o*d,m=o*f,_=a*d,b=a*f;t[0]=l*d,t[4]=_*c-m,t[8]=p*c+b,t[1]=l*f,t[5]=b*c+p,t[9]=m*c-_,t[2]=-c,t[6]=a*l,t[10]=o*l}else if("YZX"===e.order){const p=o*l,m=o*c,_=a*l,b=a*c;t[0]=l*d,t[4]=b-p*f,t[8]=_*f+m,t[1]=f,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*f+_,t[10]=p-b*f}else if("XZY"===e.order){const p=o*l,m=o*c,_=a*l,b=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=p*f+b,t[5]=o*d,t[9]=m*f-_,t[2]=_*f-m,t[6]=a*d,t[10]=b*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(nte,e,ite)}lookAt(e,t,n){const r=this.elements;return No.subVectors(e,t),0===No.lengthSq()&&(No.z=1),No.normalize(),Nu.crossVectors(n,No),0===Nu.lengthSq()&&(1===Math.abs(n.z)?No.x+=1e-4:No.z+=1e-4,No.normalize(),Nu.crossVectors(n,No)),Nu.normalize(),DM.crossVectors(No,Nu),r[0]=Nu.x,r[4]=DM.x,r[8]=No.x,r[1]=Nu.y,r[5]=DM.y,r[9]=No.y,r[2]=Nu.z,r[6]=DM.z,r[10]=No.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],c=n[12],d=n[1],f=n[5],p=n[9],m=n[13],_=n[2],b=n[6],y=n[10],v=n[14],M=n[3],w=n[7],C=n[11],D=n[15],I=r[0],N=r[4],V=r[8],A=r[12],k=r[1],ee=r[5],le=r[9],$=r[13],X=r[2],re=r[6],q=r[10],Q=r[14],Y=r[3],ae=r[7],we=r[11],qe=r[15];return s[0]=o*I+a*k+l*X+c*Y,s[4]=o*N+a*ee+l*re+c*ae,s[8]=o*V+a*le+l*q+c*we,s[12]=o*A+a*$+l*Q+c*qe,s[1]=d*I+f*k+p*X+m*Y,s[5]=d*N+f*ee+p*re+m*ae,s[9]=d*V+f*le+p*q+m*we,s[13]=d*A+f*$+p*Q+m*qe,s[2]=_*I+b*k+y*X+v*Y,s[6]=_*N+b*ee+y*re+v*ae,s[10]=_*V+b*le+y*q+v*we,s[14]=_*A+b*$+y*Q+v*qe,s[3]=M*I+w*k+C*X+D*Y,s[7]=M*N+w*ee+C*re+D*ae,s[11]=M*V+w*le+C*q+D*we,s[15]=M*A+w*$+C*Q+D*qe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14];return e[3]*(+s*l*f-r*c*f-s*a*p+n*c*p+r*a*m-n*l*m)+e[7]*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+e[11]*(+t*c*f-t*a*m-s*o*f+n*o*m+s*a*d-n*c*d)+e[15]*(-r*a*d-t*l*f+t*a*p+r*o*f-n*o*p+n*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],_=e[12],b=e[13],y=e[14],v=e[15],M=f*y*c-b*p*c+b*l*m-a*y*m-f*l*v+a*p*v,w=_*p*c-d*y*c-_*l*m+o*y*m+d*l*v-o*p*v,C=d*b*c-_*f*c+_*a*m-o*b*m-d*a*v+o*f*v,D=_*f*l-d*b*l-_*a*p+o*b*p+d*a*y-o*f*y,I=t*M+n*w+r*C+s*D;if(0===I)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/I;return e[0]=M*N,e[1]=(b*p*s-f*y*s-b*r*m+n*y*m+f*r*v-n*p*v)*N,e[2]=(a*y*s-b*l*s+b*r*c-n*y*c-a*r*v+n*l*v)*N,e[3]=(f*l*s-a*p*s-f*r*c+n*p*c+a*r*m-n*l*m)*N,e[4]=w*N,e[5]=(d*y*s-_*p*s+_*r*m-t*y*m-d*r*v+t*p*v)*N,e[6]=(_*l*s-o*y*s-_*r*c+t*y*c+o*r*v-t*l*v)*N,e[7]=(o*p*s-d*l*s+d*r*c-t*p*c-o*r*m+t*l*m)*N,e[8]=C*N,e[9]=(_*f*s-d*b*s-_*n*m+t*b*m+d*n*v-t*f*v)*N,e[10]=(o*b*s-_*a*s+_*n*c-t*b*c-o*n*v+t*a*v)*N,e[11]=(d*a*s-o*f*s-d*n*c+t*f*c+o*n*m-t*a*m)*N,e[12]=D*N,e[13]=(d*b*r-_*f*r+_*n*p-t*b*p-d*n*y+t*f*y)*N,e[14]=(_*a*r-o*b*r-_*n*l+t*b*l+o*n*y-t*a*y)*N,e[15]=(o*f*r-d*a*r+d*n*l-t*f*l-o*n*p+t*a*p)*N,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+n,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+n,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,_=s*f,b=o*d,y=o*f,v=a*f,M=l*c,w=l*d,C=l*f,D=n.x,I=n.y,N=n.z;return r[0]=(1-(b+v))*D,r[1]=(m+C)*D,r[2]=(_-w)*D,r[3]=0,r[4]=(m-C)*I,r[5]=(1-(p+v))*I,r[6]=(y+M)*I,r[7]=0,r[8]=(_+w)*N,r[9]=(y-M)*N,r[10]=(1-(p+b))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=om.set(r[0],r[1],r[2]).length();const o=om.set(r[4],r[5],r[6]).length(),a=om.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],qa.copy(this);const c=1/s,d=1/o,f=1/a;return qa.elements[0]*=c,qa.elements[1]*=c,qa.elements[2]*=c,qa.elements[4]*=d,qa.elements[5]*=d,qa.elements[6]*=d,qa.elements[8]*=f,qa.elements[9]*=f,qa.elements[10]*=f,t.setFromRotationMatrix(qa),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o){const a=this.elements,c=2*s/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r),p=-(o+s)/(o-s),m=-2*o*s/(o-s);return a[0]=2*s/(t-e),a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=c,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=m,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,s,o){const a=this.elements,l=1/(t-e),c=1/(n-r),d=1/(o-s),f=(t+e)*l,p=(n+r)*c,m=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-m,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const om=new O,qa=new tn,nte=new O(0,0,0),ite=new O(1,1,1),Nu=new O,DM=new O,No=new O,AV=new tn,TV=new Fo;let rte=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,o=s[0],a=s[4],l=s[8],c=s[1],d=s[5],f=s[9],p=s[2],m=s[6],_=s[10];switch(n){case"XYZ":this._y=Math.asin(Gi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,_),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Gi(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,_),this._z=Math.atan2(c,d)):(this._y=Math.atan2(-p,o),this._z=0);break;case"ZXY":this._x=Math.asin(Gi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,_),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(c,o));break;case"ZYX":this._y=Math.asin(-Gi(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,_),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Gi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-p,o)):(this._x=0,this._y=Math.atan2(l,_));break;case"XZY":this._z=Math.asin(-Gi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(l,o)):(this._x=Math.atan2(-f,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return AV.makeRotationFromQuaternion(t),this.setFromRotationMatrix(AV,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return TV.setFromEuler(this),this.setFromQuaternion(TV,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class yI{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let ste=0;const IV=new O,am=new Fo,kc=new tn,AM=new O,Qv=new O,ote=new O,ate=new Fo,RV=new O(1,0,0),PV=new O(0,1,0),kV=new O(0,0,1),lte={type:"added"},OV={type:"removed"};let ks=(()=>{class i extends Zp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ste++}),this.uuid=ko(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const t=new O,n=new rte,r=new Fo,s=new O(1,1,1);n._onChange(function o(){r.setFromEuler(n,!1)}),r._onChange(function a(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new tn},normalMatrix:{value:new bn}}),this.matrix=new tn,this.matrixWorld=new tn,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new yI,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return am.setFromAxisAngle(t,n),this.quaternion.multiply(am),this}rotateOnWorldAxis(t,n){return am.setFromAxisAngle(t,n),this.quaternion.premultiply(am),this}rotateX(t){return this.rotateOnAxis(RV,t)}rotateY(t){return this.rotateOnAxis(PV,t)}rotateZ(t){return this.rotateOnAxis(kV,t)}translateOnAxis(t,n){return IV.copy(t).applyQuaternion(this.quaternion),this.position.add(IV.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(RV,t)}translateY(t){return this.translateOnAxis(PV,t)}translateZ(t){return this.translateOnAxis(kV,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(kc.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?AM.copy(t):AM.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),Qv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?kc.lookAt(Qv,AM,this.up):kc.lookAt(AM,Qv,this.up),this.quaternion.setFromRotationMatrix(kc),s&&(kc.extractRotation(s.matrixWorld),am.setFromRotationMatrix(kc),this.quaternion.premultiply(am.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(lte)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(OV)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent(OV)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),kc.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),kc.multiply(t.parent.matrixWorld)),t.applyMatrix4(kc),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectByProperty(t,n);if(void 0!==a)return a}}getObjectsByProperty(t,n){let r=[];this[t]===n&&r.push(this);for(let s=0,o=this.children.length;s<o;s++){const a=this.children[s].getObjectsByProperty(t,n);a.length>0&&(r=r.concat(a))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qv,t,ote),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qv,ate,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const o=n[r];(!0===o.matrixWorldAutoUpdate||!0===t)&&o.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let o=0,a=s.length;o<a;o++){const l=s[o];!0===l.matrixWorldAutoUpdate&&l.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function o(l,c){return void 0===l[c.uuid]&&(l[c.uuid]=c.toJSON(t)),c.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(t.geometries,this.geometry);const l=this.geometry.parameters;if(void 0!==l&&void 0!==l.shapes){const c=l.shapes;if(Array.isArray(c))for(let d=0,f=c.length;d<f;d++)o(t.shapes,c[d]);else o(t.shapes,c)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(o(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const l=[];for(let c=0,d=this.material.length;c<d;c++)l.push(o(t.materials,this.material[c]));s.material=l}else s.material=o(t.materials,this.material);if(this.children.length>0){s.children=[];for(let l=0;l<this.children.length;l++)s.children.push(this.children[l].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let l=0;l<this.animations.length;l++)s.animations.push(o(t.animations,this.animations[l]))}if(n){const l=a(t.geometries),c=a(t.materials),d=a(t.textures),f=a(t.images),p=a(t.shapes),m=a(t.skeletons),_=a(t.animations),b=a(t.nodes);l.length>0&&(r.geometries=l),c.length>0&&(r.materials=c),d.length>0&&(r.textures=d),f.length>0&&(r.images=f),p.length>0&&(r.shapes=p),m.length>0&&(r.skeletons=m),_.length>0&&(r.animations=_),b.length>0&&(r.nodes=b)}return r.object=s,r;function a(l){const c=[];for(const d in l){const f=l[d];delete f.metadata,c.push(f)}return c}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DEFAULT_UP=new O(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const Xa=new O,Oc=new O,bI=new O,Lc=new O,lm=new O,cm=new O,LV=new O,xI=new O,wI=new O,MI=new O;let TM=!1;class Bo{constructor(e=new O,t=new O,n=new O){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Xa.subVectors(e,t),r.cross(Xa);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Xa.subVectors(r,t),Oc.subVectors(n,t),bI.subVectors(e,t);const o=Xa.dot(Xa),a=Xa.dot(Oc),l=Xa.dot(bI),c=Oc.dot(Oc),d=Oc.dot(bI),f=o*c-a*a;if(0===f)return s.set(-2,-1,-1);const p=1/f,m=(c*l-a*d)*p,_=(o*d-a*l)*p;return s.set(1-m-_,_,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Lc),Lc.x>=0&&Lc.y>=0&&Lc.x+Lc.y<=1}static getUV(e,t,n,r,s,o,a,l){return!1===TM&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),TM=!0),this.getInterpolation(e,t,n,r,s,o,a,l)}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Lc),l.setScalar(0),l.addScaledVector(s,Lc.x),l.addScaledVector(o,Lc.y),l.addScaledVector(a,Lc.z),l}static isFrontFacing(e,t,n,r){return Xa.subVectors(n,t),Oc.subVectors(e,t),Xa.cross(Oc).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Xa.subVectors(this.c,this.b),Oc.subVectors(this.a,this.b),.5*Xa.cross(Oc).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Bo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Bo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return!1===TM&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),TM=!0),Bo.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return Bo.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Bo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Bo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;lm.subVectors(r,n),cm.subVectors(s,n),xI.subVectors(e,n);const l=lm.dot(xI),c=cm.dot(xI);if(l<=0&&c<=0)return t.copy(n);wI.subVectors(e,r);const d=lm.dot(wI),f=cm.dot(wI);if(d>=0&&f<=d)return t.copy(r);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(n).addScaledVector(lm,o);MI.subVectors(e,s);const m=lm.dot(MI),_=cm.dot(MI);if(_>=0&&m<=_)return t.copy(s);const b=m*c-l*_;if(b<=0&&c>=0&&_<=0)return a=c/(c-_),t.copy(n).addScaledVector(cm,a);const y=d*_-m*f;if(y<=0&&f-d>=0&&m-_>=0)return LV.subVectors(s,r),a=(f-d)/(f-d+(m-_)),t.copy(r).addScaledVector(LV,a);const v=1/(y+b+p);return o=b*v,a=p*v,t.copy(n).addScaledVector(lm,o).addScaledVector(cm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let cte=0;class Il extends Zp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cte++}),this.uuid=ko(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),0!==this.side&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const FV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ya={h:0,s:0,l:0},IM={h:0,s:0,l:0};function CI(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}class je{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Al){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Lo.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Lo.workingColorSpace){return this.r=e,this.g=t,this.b=n,Lo.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Lo.workingColorSpace){if(e=function aI(i,e){return(i%e+e)%e}(e,1),t=Gi(t,0,1),n=Gi(n,0,1),0===t)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=CI(o,s,e+1/3),this.g=CI(o,s,e),this.b=CI(o,s,e-1/3)}return Lo.toWorkingColorSpace(this,r),this}setStyle(e,t=Al){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Lo.toWorkingColorSpace(this,t),n(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Lo.toWorkingColorSpace(this,t),n(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const l=parseFloat(s[1])/360,c=parseFloat(s[2])/100,d=parseFloat(s[3])/100;return n(s[4]),this.setHSL(l,c,d,t)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(3===o)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===o)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Al){const n=FV[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qp(e.r),this.g=Qp(e.g),this.b=Qp(e.b),this}copyLinearToSRGB(e){return this.r=uI(e.r),this.g=uI(e.g),this.b=uI(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Al){return Lo.fromWorkingColorSpace(_s.copy(this),e),Gi(255*_s.r,0,255)<<16^Gi(255*_s.g,0,255)<<8^Gi(255*_s.b,0,255)<<0}getHexString(e=Al){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Lo.workingColorSpace){Lo.fromWorkingColorSpace(_s.copy(this),t);const n=_s.r,r=_s.g,s=_s.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case n:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-n)/f+2;break;case s:l=(n-r)/f+4}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=Lo.workingColorSpace){return Lo.fromWorkingColorSpace(_s.copy(this),t),e.r=_s.r,e.g=_s.g,e.b=_s.b,e}getStyle(e=Al){Lo.fromWorkingColorSpace(_s.copy(this),e);const t=_s.r,n=_s.g,r=_s.b;return e!==Al?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${255*t|0},${255*n|0},${255*r|0})`}offsetHSL(e,t,n){return this.getHSL(Ya),Ya.h+=e,Ya.s+=t,Ya.l+=n,this.setHSL(Ya.h,Ya.s,Ya.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Ya),e.getHSL(IM);const n=Yv(Ya.h,IM.h,t),r=Yv(Ya.s,IM.s,t),s=Yv(Ya.l,IM.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const _s=new je;je.NAMES=FV;class Za extends Il{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const hr=new O,RM=new Me;class fr{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)RM.fromBufferAttribute(this,t),RM.applyMatrix3(e),this.setXY(t,RM.x,RM.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix3(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.applyMatrix4(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.applyNormalMatrix(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)hr.fromBufferAttribute(this,t),hr.transformDirection(e),this.setXYZ(t,hr.x,hr.y,hr.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Oo(t,this.array)),t}setX(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Oo(t,this.array)),t}setY(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Oo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Oo(t,this.array)),t}setW(e,t){return this.normalized&&(t=rn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=rn(t,this.array),n=rn(n,this.array),r=rn(r,this.array),s=rn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class NV extends fr{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class BV extends fr{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Ke extends fr{constructor(e,t,n){super(new Float32Array(e),t,n)}}let dte=0;const va=new tn,SI=new ks,um=new O,Uo=new Tl,ty=new Tl,Pr=new O;class sn extends Zp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dte++}),this.uuid=ko(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(CV(e)?BV:NV)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new bn).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return va.makeRotationFromQuaternion(e),this.applyMatrix4(va),this}rotateX(e){return va.makeRotationX(e),this.applyMatrix4(va),this}rotateY(e){return va.makeRotationY(e),this.applyMatrix4(va),this}rotateZ(e){return va.makeRotationZ(e),this.applyMatrix4(va),this}translate(e,t,n){return va.makeTranslation(e,t,n),this.applyMatrix4(va),this}scale(e,t,n){return va.makeScale(e,t,n),this.applyMatrix4(va),this}lookAt(e){return SI.lookAt(e),SI.updateMatrix(),this.applyMatrix4(SI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(um).negate(),this.translate(um.x,um.y,um.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ke(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Tl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new O(-1/0,-1/0,-1/0),new O(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)Uo.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Pr.addVectors(this.boundingBox.min,Uo.min),this.boundingBox.expandByPoint(Pr),Pr.addVectors(this.boundingBox.max,Uo.max),this.boundingBox.expandByPoint(Pr)):(this.boundingBox.expandByPoint(Uo.min),this.boundingBox.expandByPoint(Uo.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Rc);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new O,1/0);if(e){const n=this.boundingSphere.center;if(Uo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++)ty.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Pr.addVectors(Uo.min,ty.min),Uo.expandByPoint(Pr),Pr.addVectors(Uo.max,ty.max),Uo.expandByPoint(Pr)):(Uo.expandByPoint(ty.min),Uo.expandByPoint(ty.max));Uo.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Pr.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Pr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Pr.fromBufferAttribute(a,c),l&&(um.fromBufferAttribute(e,c),Pr.add(um)),r=Math.max(r,n.distanceToSquared(Pr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new fr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let k=0;k<a;k++)c[k]=new O,d[k]=new O;const f=new O,p=new O,m=new O,_=new Me,b=new Me,y=new Me,v=new O,M=new O;function w(k,ee,le){f.fromArray(r,3*k),p.fromArray(r,3*ee),m.fromArray(r,3*le),_.fromArray(o,2*k),b.fromArray(o,2*ee),y.fromArray(o,2*le),p.sub(f),m.sub(f),b.sub(_),y.sub(_);const $=1/(b.x*y.y-y.x*b.y);!isFinite($)||(v.copy(p).multiplyScalar(y.y).addScaledVector(m,-b.y).multiplyScalar($),M.copy(m).multiplyScalar(b.x).addScaledVector(p,-y.x).multiplyScalar($),c[k].add(v),c[ee].add(v),c[le].add(v),d[k].add(M),d[ee].add(M),d[le].add(M))}let C=this.groups;0===C.length&&(C=[{start:0,count:n.length}]);for(let k=0,ee=C.length;k<ee;++k){const le=C[k],$=le.start;for(let re=$,q=$+le.count;re<q;re+=3)w(n[re+0],n[re+1],n[re+2])}const D=new O,I=new O,N=new O,V=new O;function A(k){N.fromArray(s,3*k),V.copy(N);const ee=c[k];D.copy(ee),D.sub(N.multiplyScalar(N.dot(ee))).normalize(),I.crossVectors(V,ee);const $=I.dot(d[k])<0?-1:1;l[4*k]=D.x,l[4*k+1]=D.y,l[4*k+2]=D.z,l[4*k+3]=$}for(let k=0,ee=C.length;k<ee;++k){const le=C[k],$=le.start;for(let re=$,q=$+le.count;re<q;re+=3)A(n[re+0]),A(n[re+1]),A(n[re+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new fr(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let p=0,m=n.count;p<m;p++)n.setXYZ(p,0,0,0);const r=new O,s=new O,o=new O,a=new O,l=new O,c=new O,d=new O,f=new O;if(e)for(let p=0,m=e.count;p<m;p+=3){const _=e.getX(p+0),b=e.getX(p+1),y=e.getX(p+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,y),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),a.fromBufferAttribute(n,_),l.fromBufferAttribute(n,b),c.fromBufferAttribute(n,y),a.add(d),l.add(d),c.add(d),n.setXYZ(_,a.x,a.y,a.z),n.setXYZ(b,l.x,l.y,l.z),n.setXYZ(y,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),n.setXYZ(p+0,d.x,d.y,d.z),n.setXYZ(p+1,d.x,d.y,d.z),n.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Pr.fromBufferAttribute(e,t),Pr.normalize(),e.setXYZ(t,Pr.x,Pr.y,Pr.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,_=0;for(let b=0,y=l.length;b<y;b++){m=a.isInterleavedBufferAttribute?l[b]*a.data.stride+a.offset:l[b]*d;for(let v=0;v<d;v++)p[_++]=c[m++]}return new fr(p,d,f)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new sn,n=this.index.array,r=this.attributes;for(const a in r){const c=e(r[a],n);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const m=e(c[d],n);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const l=this.parameters;for(const c in l)void 0!==l[c]&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n)e.data.attributes[l]=n[l].toJSON(e.data);const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++)d.push(c[f].toJSON(e.data));d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const c in r)this.setAttribute(c,r[c].clone(t));const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const l=e.boundingSphere;return null!==l&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const UV=new tn,Rl=new EM,PM=new Rc,VV=new O,dm=new O,hm=new O,fm=new O,EI=new O,kM=new O,OM=new Me,LM=new Me,FM=new Me,zV=new O,HV=new O,GV=new O,NM=new O,BM=new O;class _i extends ks{constructor(e=new sn,t=new Za){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const a=this.morphTargetInfluences;if(s&&a){kM.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];0!==d&&(EI.fromBufferAttribute(f,e),kM.addScaledVector(o?EI:EI.sub(t),d))}t.add(kM)}return this.isSkinnedMesh&&this.applyBoneTransform(e,t),t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;if(void 0===r||(null===n.boundingSphere&&n.computeBoundingSphere(),PM.copy(n.boundingSphere),PM.applyMatrix4(s),Rl.copy(e.ray).recast(e.near),!1===PM.containsPoint(Rl.origin)&&(null===Rl.intersectSphere(PM,VV)||Rl.origin.distanceToSquared(VV)>(e.far-e.near)**2))||(UV.copy(s).invert(),Rl.copy(e.ray).applyMatrix4(UV),null!==n.boundingBox&&!1===Rl.intersectsBox(n.boundingBox)))return;let o;const a=n.index,l=n.attributes.position,c=n.attributes.uv,d=n.attributes.uv2,f=n.attributes.normal,p=n.groups,m=n.drawRange;if(null!==a)if(Array.isArray(r))for(let _=0,b=p.length;_<b;_++){const y=p[_],v=r[y.materialIndex];for(let C=Math.max(y.start,m.start),D=Math.min(a.count,Math.min(y.start+y.count,m.start+m.count));C<D;C+=3){const I=a.getX(C),N=a.getX(C+1),V=a.getX(C+2);o=UM(this,v,e,Rl,c,d,f,I,N,V),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else for(let y=Math.max(0,m.start),v=Math.min(a.count,m.start+m.count);y<v;y+=3){const M=a.getX(y),w=a.getX(y+1),C=a.getX(y+2);o=UM(this,r,e,Rl,c,d,f,M,w,C),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}else if(void 0!==l)if(Array.isArray(r))for(let _=0,b=p.length;_<b;_++){const y=p[_],v=r[y.materialIndex];for(let C=Math.max(y.start,m.start),D=Math.min(l.count,Math.min(y.start+y.count,m.start+m.count));C<D;C+=3)o=UM(this,v,e,Rl,c,d,f,C,C+1,C+2),o&&(o.faceIndex=Math.floor(C/3),o.face.materialIndex=y.materialIndex,t.push(o))}else for(let y=Math.max(0,m.start),v=Math.min(l.count,m.start+m.count);y<v;y+=3)o=UM(this,r,e,Rl,c,d,f,y,y+1,y+2),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}function UM(i,e,t,n,r,s,o,a,l,c){i.getVertexPosition(a,dm),i.getVertexPosition(l,hm),i.getVertexPosition(c,fm);const d=function hte(i,e,t,n,r,s,o,a){let l;if(l=1===e.side?n.intersectTriangle(o,s,r,!0,a):n.intersectTriangle(r,s,o,0===e.side,a),null===l)return null;BM.copy(a),BM.applyMatrix4(i.matrixWorld);const c=t.ray.origin.distanceTo(BM);return c<t.near||c>t.far?null:{distance:c,point:BM.clone(),object:i}}(i,e,t,n,dm,hm,fm,NM);if(d){r&&(OM.fromBufferAttribute(r,a),LM.fromBufferAttribute(r,l),FM.fromBufferAttribute(r,c),d.uv=Bo.getInterpolation(NM,dm,hm,fm,OM,LM,FM,new Me)),s&&(OM.fromBufferAttribute(s,a),LM.fromBufferAttribute(s,l),FM.fromBufferAttribute(s,c),d.uv2=Bo.getInterpolation(NM,dm,hm,fm,OM,LM,FM,new Me)),o&&(zV.fromBufferAttribute(o,a),HV.fromBufferAttribute(o,l),GV.fromBufferAttribute(o,c),d.normal=Bo.getInterpolation(NM,dm,hm,fm,zV,HV,GV,new O),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new O,materialIndex:0};Bo.getNormal(dm,hm,fm,f.normal),d.face=f}return d}class uh extends sn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;function _(b,y,v,M,w,C,D,I,N,V,A){const k=C/N,ee=D/V,le=C/2,$=D/2,X=I/2,re=N+1,q=V+1;let Q=0,Y=0;const ae=new O;for(let we=0;we<q;we++){const qe=we*ee-$;for(let ke=0;ke<re;ke++)ae[b]=(ke*k-le)*M,ae[y]=qe*w,ae[v]=X,c.push(ae.x,ae.y,ae.z),ae[b]=0,ae[y]=0,ae[v]=I>0?1:-1,d.push(ae.x,ae.y,ae.z),f.push(ke/N),f.push(1-we/V),Q+=1}for(let we=0;we<V;we++)for(let qe=0;qe<N;qe++){const oe=p+qe+re*(we+1),de=p+(qe+1)+re*(we+1),Ne=p+(qe+1)+re*we;l.push(p+qe+re*we,oe,Ne),l.push(oe,de,Ne),Y+=6}a.addGroup(m,Y,A),m+=Y,p+=Q}_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,r,o,2),_("x","z","y",1,-1,e,n,-t,r,o,3),_("x","y","z",1,-1,e,t,n,r,s,4),_("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ke(c,3)),this.setAttribute("normal",new Ke(d,3)),this.setAttribute("uv",new Ke(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function pm(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function Os(i){const e={};for(let t=0;t<i.length;t++){const n=pm(i[t]);for(const r in n)e[r]=n[r]}return e}function WV(i){return null===i.getRenderTarget()&&i.outputEncoding===ti?Al:Xv}const pte={clone:pm,merge:Os};class Bu extends Il{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=pm(e.uniforms),this.uniformsGroups=function fte(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;t.uniforms[r]=o&&o.isTexture?{type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?{type:"c",value:o.getHex()}:o&&o.isVector2?{type:"v2",value:o.toArray()}:o&&o.isVector3?{type:"v3",value:o.toArray()}:o&&o.isVector4?{type:"v4",value:o.toArray()}:o&&o.isMatrix3?{type:"m3",value:o.toArray()}:o&&o.isMatrix4?{type:"m4",value:o.toArray()}:{value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class DI extends ks{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new tn,this.projectionMatrix=new tn,this.projectionMatrixInverse=new tn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Cr extends DI{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Kp*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*oh*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Kp*Math.atan(Math.tan(.5*oh*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*oh*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/c,r*=o.width/l,n*=o.height/c}const a=this.filmOffset;0!==a&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class _te extends ks{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Cr(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Cr(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new Cr(-90,1,e,t);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new Cr(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new Cr(-90,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const c=new Cr(-90,1,e,t);c.layers=this.layers,c.up.set(0,1,0),c.lookAt(0,0,-1),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,o,a,l,c]=this.children,d=e.getRenderTarget(),f=e.toneMapping,p=e.xr.enabled;e.toneMapping=0,e.xr.enabled=!1;const m=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,l),n.texture.generateMipmaps=m,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(d),e.toneMapping=f,e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class VM extends ku{constructor(e,t,n,r,s,o,a,l,c,d){super(e=void 0!==e?e:[],t=void 0!==t?t:301,n,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class vte extends ah{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1};this.texture=new VM([n,n,n,n,n,n],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:dr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new uh(5,5,5),s=new Bu({name:"CubemapFromEquirect",uniforms:pm(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new _i(r,s),a=t.minFilter;return t.minFilter===eh&&(t.minFilter=dr),new _te(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}const AI=new O,yte=new O,bte=new bn;class dh{constructor(e=new O(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=AI.subVectors(n,t).cross(yte.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(AI),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||bte.getNormalMatrix(e),r=this.coplanarPoint(AI).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const hh=new Rc,zM=new O;class TI{constructor(e=new dh,t=new dh,n=new dh,r=new dh,s=new dh,o=new dh){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],o=n[2],a=n[3],l=n[4],c=n[5],d=n[6],f=n[7],p=n[8],m=n[9],_=n[10],b=n[11],y=n[12],v=n[13],M=n[14],w=n[15];return t[0].setComponents(a-r,f-l,b-p,w-y).normalize(),t[1].setComponents(a+r,f+l,b+p,w+y).normalize(),t[2].setComponents(a+s,f+c,b+m,w+v).normalize(),t[3].setComponents(a-s,f-c,b-m,w-v).normalize(),t[4].setComponents(a-o,f-d,b-_,w-M).normalize(),t[5].setComponents(a+o,f+d,b+_,w+M).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),hh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),hh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(hh)}intersectsSprite(e){return hh.center.set(0,0,0),hh.radius=.7071067811865476,hh.applyMatrix4(e.matrixWorld),this.intersectsSphere(hh)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(zM.x=r.normal.x>0?e.max.x:e.min.x,zM.y=r.normal.y>0?e.max.y:e.min.y,zM.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(zM)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function $V(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function xte(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),n.get(c)},remove:function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=n.get(c);d&&(i.deleteBuffer(d.buffer),n.delete(c))},update:function l(c,d){if(c.isGLBufferAttribute){const p=n.get(c);return void((!p||p.version<c.version)&&n.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version}))}c.isInterleavedBufferAttribute&&(c=c.data);const f=n.get(c);void 0===f?n.set(c,function r(c,d){const f=c.array,p=c.usage,m=i.createBuffer();let _;if(i.bindBuffer(d,m),i.bufferData(d,f,p),c.onUploadCallback(),f instanceof Float32Array)_=5126;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");_=5131}else _=5123;else if(f instanceof Int16Array)_=5122;else if(f instanceof Uint32Array)_=5125;else if(f instanceof Int32Array)_=5124;else if(f instanceof Int8Array)_=5120;else if(f instanceof Uint8Array)_=5121;else{if(!(f instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);_=5121}return{buffer:m,type:_,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version}}(c,d)):f.version<c.version&&(function s(c,d,f){const p=d.array,m=d.updateRange;i.bindBuffer(f,c),-1===m.count?i.bufferSubData(f,0,p):(t?i.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):i.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}(f.buffer,c,d),f.version=c.version)}}}class HM extends sn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),c=a+1,d=l+1,f=e/a,p=t/l,m=[],_=[],b=[],y=[];for(let v=0;v<d;v++){const M=v*p-o;for(let w=0;w<c;w++)_.push(w*f-s,-M,0),b.push(0,0,1),y.push(w/a),y.push(1-v/l)}for(let v=0;v<l;v++)for(let M=0;M<a;M++){const C=M+c*(v+1),D=M+1+c*(v+1),I=M+1+c*v;m.push(M+c*v,C,I),m.push(C,D,I)}this.setIndex(m),this.setAttribute("position",new Ke(_,3)),this.setAttribute("normal",new Ke(b,3)),this.setAttribute("uv",new Ke(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new HM(e.width,e.height,e.widthSegments,e.heightSegments)}}const ln={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_UV2\n\tattribute vec2 uv2;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Be={common:{diffuse:{value:new je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaMapTransform:{value:new bn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new bn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new bn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new bn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new bn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new bn},normalScale:{value:new Me(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new bn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new bn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new bn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new bn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new bn}},sprite:{diffuse:{value:new je(16777215)},opacity:{value:1},center:{value:new Me(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new bn},alphaMap:{value:null},alphaTest:{value:0}}},Pl={basic:{uniforms:Os([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.fog]),vertexShader:ln.meshbasic_vert,fragmentShader:ln.meshbasic_frag},lambert:{uniforms:Os([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new je(0)}}]),vertexShader:ln.meshlambert_vert,fragmentShader:ln.meshlambert_frag},phong:{uniforms:Os([Be.common,Be.specularmap,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,Be.lights,{emissive:{value:new je(0)},specular:{value:new je(1118481)},shininess:{value:30}}]),vertexShader:ln.meshphong_vert,fragmentShader:ln.meshphong_frag},standard:{uniforms:Os([Be.common,Be.envmap,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.roughnessmap,Be.metalnessmap,Be.fog,Be.lights,{emissive:{value:new je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag},toon:{uniforms:Os([Be.common,Be.aomap,Be.lightmap,Be.emissivemap,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.gradientmap,Be.fog,Be.lights,{emissive:{value:new je(0)}}]),vertexShader:ln.meshtoon_vert,fragmentShader:ln.meshtoon_frag},matcap:{uniforms:Os([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,Be.fog,{matcap:{value:null}}]),vertexShader:ln.meshmatcap_vert,fragmentShader:ln.meshmatcap_frag},points:{uniforms:Os([Be.points,Be.fog]),vertexShader:ln.points_vert,fragmentShader:ln.points_frag},dashed:{uniforms:Os([Be.common,Be.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ln.linedashed_vert,fragmentShader:ln.linedashed_frag},depth:{uniforms:Os([Be.common,Be.displacementmap]),vertexShader:ln.depth_vert,fragmentShader:ln.depth_frag},normal:{uniforms:Os([Be.common,Be.bumpmap,Be.normalmap,Be.displacementmap,{opacity:{value:1}}]),vertexShader:ln.meshnormal_vert,fragmentShader:ln.meshnormal_frag},sprite:{uniforms:Os([Be.sprite,Be.fog]),vertexShader:ln.sprite_vert,fragmentShader:ln.sprite_frag},background:{uniforms:{uvTransform:{value:new bn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ln.background_vert,fragmentShader:ln.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ln.backgroundCube_vert,fragmentShader:ln.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ln.cube_vert,fragmentShader:ln.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ln.equirect_vert,fragmentShader:ln.equirect_frag},distanceRGBA:{uniforms:Os([Be.common,Be.displacementmap,{referencePosition:{value:new O},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ln.distanceRGBA_vert,fragmentShader:ln.distanceRGBA_frag},shadow:{uniforms:Os([Be.lights,Be.fog,{color:{value:new je(0)},opacity:{value:1}}]),vertexShader:ln.shadow_vert,fragmentShader:ln.shadow_frag}};Pl.physical={uniforms:Os([Pl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new bn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new bn},clearcoatNormalScale:{value:new Me(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new bn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new bn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new bn},sheen:{value:0},sheenColor:{value:new je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new bn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new bn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new bn},transmissionSamplerSize:{value:new Me},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new bn},attenuationDistance:{value:0},attenuationColor:{value:new je(0)},specularColor:{value:new je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new bn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new bn}}]),vertexShader:ln.meshphysical_vert,fragmentShader:ln.meshphysical_frag};const GM={r:0,b:0,g:0};function _ie(i,e,t,n,r,s,o){const a=new je(0);let c,d,l=!0===s?0:1,f=null,p=0,m=null;function b(y,v){y.getRGB(GM,WV(i)),n.buffers.color.setClear(GM.r,GM.g,GM.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(y,v=1){a.set(y),l=v,b(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(y){l=y,b(a,l)},render:function _(y,v){let M=!1,w=!0===v.isScene?v.background:null;w&&w.isTexture&&(w=(v.backgroundBlurriness>0?t:e).get(w));const C=i.xr,D=C.getSession&&C.getSession();D&&"additive"===D.environmentBlendMode&&(w=null),null===w?b(a,l):w&&w.isColor&&(b(w,1),M=!0),(i.autoClear||M)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),w&&(w.isCubeTexture||306===w.mapping)?(void 0===d&&(d=new _i(new uh(1,1,1),new Bu({name:"BackgroundCubeMaterial",uniforms:pm(Pl.backgroundCube.uniforms),vertexShader:Pl.backgroundCube.vertexShader,fragmentShader:Pl.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(I,N,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&!1===w.isRenderTargetTexture?-1:1,d.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,d.material.toneMapped=w.encoding!==ti,(f!==w||p!==w.version||m!==i.toneMapping)&&(d.material.needsUpdate=!0,f=w,p=w.version,m=i.toneMapping),d.layers.enableAll(),y.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(void 0===c&&(c=new _i(new HM(2,2),new Bu({name:"BackgroundMaterial",uniforms:pm(Pl.background.uniforms),vertexShader:Pl.background.vertexShader,fragmentShader:Pl.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=w,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=w.encoding!==ti,!0===w.matrixAutoUpdate&&w.updateMatrix(),c.material.uniforms.uvTransform.value.copy(w.matrix),(f!==w||p!==w.version||m!==i.toneMapping)&&(c.material.needsUpdate=!0,f=w,p=w.version,m=i.toneMapping),c.layers.enableAll(),y.unshift(c,c.geometry,c.material,0,0,null))}}}function vie(i,e,t,n){const r=i.getParameter(34921),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||null!==s,a={},l=y(null);let c=l,d=!1;function m(X){return n.isWebGL2?i.bindVertexArray(X):s.bindVertexArrayOES(X)}function _(X){return n.isWebGL2?i.deleteVertexArray(X):s.deleteVertexArrayOES(X)}function y(X){const re=[],q=[],Q=[];for(let Y=0;Y<r;Y++)re[Y]=0,q[Y]=0,Q[Y]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:re,enabledAttributes:q,attributeDivisors:Q,object:X,attributes:{},index:null}}function w(){const X=c.newAttributes;for(let re=0,q=X.length;re<q;re++)X[re]=0}function C(X){D(X,0)}function D(X,re){const Q=c.enabledAttributes,Y=c.attributeDivisors;c.newAttributes[X]=1,0===Q[X]&&(i.enableVertexAttribArray(X),Q[X]=1),Y[X]!==re&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](X,re),Y[X]=re)}function I(){const X=c.newAttributes,re=c.enabledAttributes;for(let q=0,Q=re.length;q<Q;q++)re[q]!==X[q]&&(i.disableVertexAttribArray(q),re[q]=0)}function N(X,re,q,Q,Y,ae){!0!==n.isWebGL2||5124!==q&&5125!==q?i.vertexAttribPointer(X,re,q,Q,Y,ae):i.vertexAttribIPointer(X,re,q,Y,ae)}function le(){$(),d=!0,c!==l&&(c=l,m(c.object))}function $(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function f(X,re,q,Q,Y){let ae=!1;if(o){const we=function b(X,re,q){const Q=!0===q.wireframe;let Y=a[X.id];void 0===Y&&(Y={},a[X.id]=Y);let ae=Y[re.id];void 0===ae&&(ae={},Y[re.id]=ae);let we=ae[Q];return void 0===we&&(we=y(function p(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),ae[Q]=we),we}(Q,q,re);c!==we&&(c=we,m(c.object)),ae=function v(X,re,q,Q){const Y=c.attributes,ae=re.attributes;let we=0;const qe=q.getAttributes();for(const ke in qe)if(qe[ke].location>=0){const de=Y[ke];let Ne=ae[ke];if(void 0===Ne&&("instanceMatrix"===ke&&X.instanceMatrix&&(Ne=X.instanceMatrix),"instanceColor"===ke&&X.instanceColor&&(Ne=X.instanceColor)),void 0===de||de.attribute!==Ne||Ne&&de.data!==Ne.data)return!0;we++}return c.attributesNum!==we||c.index!==Q}(X,Q,q,Y),ae&&function M(X,re,q,Q){const Y={},ae=re.attributes;let we=0;const qe=q.getAttributes();for(const ke in qe)if(qe[ke].location>=0){let de=ae[ke];void 0===de&&("instanceMatrix"===ke&&X.instanceMatrix&&(de=X.instanceMatrix),"instanceColor"===ke&&X.instanceColor&&(de=X.instanceColor));const Ne={};Ne.attribute=de,de&&de.data&&(Ne.data=de.data),Y[ke]=Ne,we++}c.attributes=Y,c.attributesNum=we,c.index=Q}(X,Q,q,Y)}else{const we=!0===re.wireframe;(c.geometry!==Q.id||c.program!==q.id||c.wireframe!==we)&&(c.geometry=Q.id,c.program=q.id,c.wireframe=we,ae=!0)}null!==Y&&t.update(Y,34963),(ae||d)&&(d=!1,function V(X,re,q,Q){if(!1===n.isWebGL2&&(X.isInstancedMesh||Q.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;w();const Y=Q.attributes,ae=q.getAttributes(),we=re.defaultAttributeValues;for(const qe in ae){const ke=ae[qe];if(ke.location>=0){let oe=Y[qe];if(void 0===oe&&("instanceMatrix"===qe&&X.instanceMatrix&&(oe=X.instanceMatrix),"instanceColor"===qe&&X.instanceColor&&(oe=X.instanceColor)),void 0!==oe){const de=oe.normalized,Ne=oe.itemSize,$e=t.get(oe);if(void 0===$e)continue;const Z=$e.buffer,dt=$e.type,rt=$e.bytesPerElement;if(oe.isInterleavedBufferAttribute){const Re=oe.data,st=Re.stride,Ee=oe.offset;if(Re.isInstancedInterleavedBuffer){for(let ge=0;ge<ke.locationSize;ge++)D(ke.location+ge,Re.meshPerAttribute);!0!==X.isInstancedMesh&&void 0===Q._maxInstanceCount&&(Q._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let ge=0;ge<ke.locationSize;ge++)C(ke.location+ge);i.bindBuffer(34962,Z);for(let ge=0;ge<ke.locationSize;ge++)N(ke.location+ge,Ne/ke.locationSize,dt,de,st*rt,(Ee+Ne/ke.locationSize*ge)*rt)}else{if(oe.isInstancedBufferAttribute){for(let Re=0;Re<ke.locationSize;Re++)D(ke.location+Re,oe.meshPerAttribute);!0!==X.isInstancedMesh&&void 0===Q._maxInstanceCount&&(Q._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let Re=0;Re<ke.locationSize;Re++)C(ke.location+Re);i.bindBuffer(34962,Z);for(let Re=0;Re<ke.locationSize;Re++)N(ke.location+Re,Ne/ke.locationSize,dt,de,Ne*rt,Ne/ke.locationSize*Re*rt)}}else if(void 0!==we){const de=we[qe];if(void 0!==de)switch(de.length){case 2:i.vertexAttrib2fv(ke.location,de);break;case 3:i.vertexAttrib3fv(ke.location,de);break;case 4:i.vertexAttrib4fv(ke.location,de);break;default:i.vertexAttrib1fv(ke.location,de)}}}}I()}(X,re,q,Q),null!==Y&&i.bindBuffer(34963,t.get(Y).buffer))},reset:le,resetDefaultState:$,dispose:function A(){le();for(const X in a){const re=a[X];for(const q in re){const Q=re[q];for(const Y in Q)_(Q[Y].object),delete Q[Y];delete re[q]}delete a[X]}},releaseStatesOfGeometry:function k(X){if(void 0===a[X.id])return;const re=a[X.id];for(const q in re){const Q=re[q];for(const Y in Q)_(Q[Y].object),delete Q[Y];delete re[q]}delete a[X.id]},releaseStatesOfProgram:function ee(X){for(const re in a){const q=a[re];if(void 0===q[X.id])continue;const Q=q[X.id];for(const Y in Q)_(Q[Y].object),delete Q[Y];delete q[X.id]}},initAttributes:w,enableAttribute:C,disableUnusedAttributes:I}}function yie(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function o(c){s=c},this.render=function a(c,d){i.drawArrays(s,c,d),t.update(d,s,1)},this.renderInstances=function l(c,d,f){if(0===f)return;let p,m;if(r)p=i,m="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");p[m](s,c,d,f),t.update(d,s,f)}}function bie(i,e,t){let n;function s(N){if("highp"===N){if(i.getShaderPrecisionFormat(35633,36338).precision>0&&i.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";N="mediump"}return"mediump"===N&&i.getShaderPrecisionFormat(35633,36337).precision>0&&i.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===i.constructor.name;let a=void 0!==t.precision?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=!0===t.logarithmicDepthBuffer,f=i.getParameter(34930),p=i.getParameter(35660),m=i.getParameter(3379),_=i.getParameter(34076),b=i.getParameter(34921),y=i.getParameter(36347),v=i.getParameter(36348),M=i.getParameter(36349),w=p>0,C=o||e.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const N=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:_,maxAttributes:b,maxVertexUniforms:y,maxVaryings:v,maxFragmentUniforms:M,vertexTextures:w,floatFragmentTextures:C,floatVertexTextures:w&&C,maxSamples:o?i.getParameter(36183):0}}function xie(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new dh,a=new bn,l={value:null,needsUpdate:!1};function d(f,p,m,_){const b=null!==f?f.length:0;let y=null;if(0!==b){if(y=l.value,!0!==_||null===y){const v=m+4*b,M=p.matrixWorldInverse;a.getNormalMatrix(M),(null===y||y.length<v)&&(y=new Float32Array(v));for(let w=0,C=m;w!==b;++w,C+=4)o.copy(f[w]).applyMatrix4(M,a),o.normal.toArray(y,C),y[C+3]=o.constant}l.value=y,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,y}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=0!==f.length||p||0!==n||r;return r=p,n=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=d(f,p,0)},this.setState=function(f,p,m){const _=f.clippingPlanes,b=f.clipIntersection,y=f.clipShadows,v=i.get(f);if(!r||null===_||0===_.length||s&&!y)s?d(null):function c(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const M=s?0:n,w=4*M;let C=v.clippingState||null;l.value=C,C=d(_,p,w,m);for(let D=0;D!==w;++D)C[D]=t[D];v.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=M}}}function wie(i){let e=new WeakMap;function t(o,a){return 303===a?o.mapping=301:304===a&&(o.mapping=302),o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);void 0!==l&&(e.delete(a),l.dispose())}return{get:function n(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){const a=o.mapping;if(303===a||304===a){if(e.has(o))return t(e.get(o).texture,o.mapping);{const l=o.image;if(l&&l.height>0){const c=new vte(l.height/2);return c.fromEquirectangularTexture(i,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}return null}}}return o},dispose:function s(){e=new WeakMap}}}class II extends DI{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(null!==this.view&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const jV=[.125,.215,.35,.446,.526,.582],RI=new II,qV=new je;let PI=null;const ph=(1+Math.sqrt(5))/2,vm=1/ph,XV=[new O(1,1,1),new O(-1,1,1),new O(1,1,-1),new O(-1,1,-1),new O(0,ph,vm),new O(0,ph,-vm),new O(vm,0,ph),new O(-vm,0,ph),new O(ph,vm,0),new O(-ph,vm,0)];class YV{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){PI=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=JV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=KV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(PI),e.scissorTest=!1,WM(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(301===e.mapping||302===e.mapping?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),PI=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:dr,minFilter:dr,generateMipmaps:!1,type:qv,format:_a,encoding:rh,depthBuffer:!1},r=ZV(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ZV(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function Mie(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+jV.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-4?l=jV[o-i+4-1]:0===o&&(l=0),n.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,_=6,b=3,y=2,v=1,M=new Float32Array(b*_*m),w=new Float32Array(y*_*m),C=new Float32Array(v*_*m);for(let I=0;I<m;I++){const N=I%3*2/3-1,V=I>2?0:-1;M.set([N,V,0,N+2/3,V,0,N+2/3,V+1,0,N,V,0,N+2/3,V+1,0,N,V+1,0],b*_*I),w.set(p,y*_*I),C.set([I,I,I,I,I,I],v*_*I)}const D=new sn;D.setAttribute("position",new fr(M,b)),D.setAttribute("uv",new fr(w,y)),D.setAttribute("faceIndex",new fr(C,v)),e.push(D),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function Cie(i,e,t){const n=new Float32Array(20),r=new O(0,1,0);return new Bu({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new _i(this._lodPlanes[0],e);this._renderer.compile(t,RI)}_sceneToCubeUV(e,t,n,r){const a=new Cr(90,1,t,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(qV),d.toneMapping=0,d.autoClear=!1;const m=new Za({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),_=new _i(new uh,m);let b=!1;const y=e.background;y?y.isColor&&(m.color.copy(y),e.background=null,b=!0):(m.color.copy(qV),b=!0);for(let v=0;v<6;v++){const M=v%3;0===M?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):1===M?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const w=this._cubeSize;WM(r,M*w,v>2?w:0,w,w),d.setRenderTarget(r),b&&d.render(_,a),d.render(e,a)}_.geometry.dispose(),_.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=y}_textureToCubeUV(e,t){const n=this._renderer,r=301===e.mapping||302===e.mapping;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=JV()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=KV());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new _i(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const l=this._cubeSize;WM(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,RI)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,XV[(r-1)%XV.length])}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,c=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const f=new _i(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*m):2*Math.PI/39,b=s/_,y=isFinite(s)?1+Math.floor(3*b):20;y>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${y} samples when the maximum is set to 20`);const v=[];let M=0;for(let N=0;N<20;++N){const V=N/b,A=Math.exp(-V*V/2);v.push(A),0===N?M+=A:N<y&&(M+=2*A)}for(let N=0;N<v.length;N++)v[N]=v[N]/M;p.envMap.value=e.texture,p.samples.value=y,p.weights.value=v,p.latitudinal.value="latitudinal"===o,a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=_,p.mipInt.value=w-n;const C=this._sizeLods[r];WM(t,3*C*(r>w-4?r-w+4:0),4*(this._cubeSize-C),3*C,2*C),l.setRenderTarget(t),l.render(f,RI)}}function ZV(i,e,t){const n=new ah(i,e,t);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function WM(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function KV(){return new Bu({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function JV(){return new Bu({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function Sie(i){let e=new WeakMap,t=null;function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);void 0!==c&&(e.delete(l),c.dispose())}return{get:function n(a){if(a&&a.isTexture){const l=a.mapping,c=303===l||304===l,d=301===l||302===l;if(c||d){if(a.isRenderTargetTexture&&!0===a.needsPMREMUpdate){a.needsPMREMUpdate=!1;let f=e.get(a);return null===t&&(t=new YV(i)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||d&&f&&function r(a){let l=0;for(let d=0;d<6;d++)void 0!==a[d]&&l++;return 6===l}(f)){null===t&&(t=new YV(i));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}return null}}}return a},dispose:function o(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Eie(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Die(i,e,t,n){const r={},s=new WeakMap;function o(f){const p=f.target;null!==p.index&&e.remove(p.index);for(const _ in p.attributes)e.remove(p.attributes[_]);p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),n.releaseStatesOfGeometry(p),!0===p.isInstancedBufferGeometry&&delete p._maxInstanceCount,t.memory.geometries--}function c(f){const p=[],m=f.index,_=f.attributes.position;let b=0;if(null!==m){const M=m.array;b=m.version;for(let w=0,C=M.length;w<C;w+=3){const D=M[w+0],I=M[w+1],N=M[w+2];p.push(D,I,I,N,N,D)}}else{b=_.version;for(let w=0,C=_.array.length/3-1;w<C;w+=3){const D=w+0,I=w+1,N=w+2;p.push(D,I,I,N,N,D)}}const y=new(CV(p)?BV:NV)(p,1);y.version=b;const v=s.get(f);v&&e.remove(v),s.set(f,y)}return{get:function a(f,p){return!0===r[p.id]||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p},update:function l(f){const p=f.attributes;for(const _ in p)e.update(p[_],34962);const m=f.morphAttributes;for(const _ in m){const b=m[_];for(let y=0,v=b.length;y<v;y++)e.update(b[y],34962)}},getWireframeAttribute:function d(f){const p=s.get(f);if(p){const m=f.index;null!==m&&p.version<m.version&&c(f)}else c(f);return s.get(f)}}}function Aie(i,e,t,n){const r=n.isWebGL2;let s,a,l;this.setMode=function o(p){s=p},this.setIndex=function c(p){a=p.type,l=p.bytesPerElement},this.render=function d(p,m){i.drawElements(s,m,a,p*l),t.update(m,s,1)},this.renderInstances=function f(p,m,_){if(0===_)return;let b,y;if(r)b=i,y="drawElementsInstanced";else if(b=e.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",null===b)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");b[y](s,m,a,p*l,_),t.update(m,s,_)}}function Tie(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,o,a){switch(t.calls++,o){case 4:t.triangles+=a*(s/3);break;case 1:t.lines+=a*(s/2);break;case 3:t.lines+=a*(s-1);break;case 2:t.lines+=a*s;break;case 0:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o)}}}}function Iie(i,e){return i[0]-e[0]}function Rie(i,e){return Math.abs(e[1])-Math.abs(i[1])}function Pie(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,o=new ni,a=[];for(let c=0;c<8;c++)a[c]=[c,0];return{update:function l(c,d,f){const p=c.morphTargetInfluences;if(!0===e.isWebGL2){const m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=void 0!==m?m.length:0;let b=s.get(d);if(void 0===b||b.count!==_){let X=function(){le.dispose(),s.delete(d),d.removeEventListener("dispose",X)};void 0!==b&&b.texture.dispose();const M=void 0!==d.morphAttributes.position,w=void 0!==d.morphAttributes.normal,C=void 0!==d.morphAttributes.color,D=d.morphAttributes.position||[],I=d.morphAttributes.normal||[],N=d.morphAttributes.color||[];let V=0;!0===M&&(V=1),!0===w&&(V=2),!0===C&&(V=3);let A=d.attributes.position.count*V,k=1;A>e.maxTextureSize&&(k=Math.ceil(A/e.maxTextureSize),A=e.maxTextureSize);const ee=new Float32Array(A*k*4*_),le=new hI(ee,A,k,_);le.type=Pu,le.needsUpdate=!0;const $=4*V;for(let re=0;re<_;re++){const q=D[re],Q=I[re],Y=N[re],ae=A*k*4*re;for(let we=0;we<q.count;we++){const qe=we*$;!0===M&&(o.fromBufferAttribute(q,we),ee[ae+qe+0]=o.x,ee[ae+qe+1]=o.y,ee[ae+qe+2]=o.z,ee[ae+qe+3]=0),!0===w&&(o.fromBufferAttribute(Q,we),ee[ae+qe+4]=o.x,ee[ae+qe+5]=o.y,ee[ae+qe+6]=o.z,ee[ae+qe+7]=0),!0===C&&(o.fromBufferAttribute(Y,we),ee[ae+qe+8]=o.x,ee[ae+qe+9]=o.y,ee[ae+qe+10]=o.z,ee[ae+qe+11]=4===Y.itemSize?o.w:1)}}b={count:_,texture:le,size:new Me(A,k)},s.set(d,b),d.addEventListener("dispose",X)}let y=0;for(let M=0;M<p.length;M++)y+=p[M];const v=d.morphTargetsRelative?1:1-y;f.getUniforms().setValue(i,"morphTargetBaseInfluence",v),f.getUniforms().setValue(i,"morphTargetInfluences",p),f.getUniforms().setValue(i,"morphTargetsTexture",b.texture,t),f.getUniforms().setValue(i,"morphTargetsTextureSize",b.size)}else{const m=void 0===p?0:p.length;let _=n[d.id];if(void 0===_||_.length!==m){_=[];for(let w=0;w<m;w++)_[w]=[w,0];n[d.id]=_}for(let w=0;w<m;w++){const C=_[w];C[0]=w,C[1]=p[w]}_.sort(Rie);for(let w=0;w<8;w++)w<m&&_[w][1]?(a[w][0]=_[w][0],a[w][1]=_[w][1]):(a[w][0]=Number.MAX_SAFE_INTEGER,a[w][1]=0);a.sort(Iie);const b=d.morphAttributes.position,y=d.morphAttributes.normal;let v=0;for(let w=0;w<8;w++){const C=a[w],D=C[0],I=C[1];D!==Number.MAX_SAFE_INTEGER&&I?(b&&d.getAttribute("morphTarget"+w)!==b[D]&&d.setAttribute("morphTarget"+w,b[D]),y&&d.getAttribute("morphNormal"+w)!==y[D]&&d.setAttribute("morphNormal"+w,y[D]),r[w]=I,v+=I):(b&&!0===d.hasAttribute("morphTarget"+w)&&d.deleteAttribute("morphTarget"+w),y&&!0===d.hasAttribute("morphNormal"+w)&&d.deleteAttribute("morphNormal"+w),r[w]=0)}const M=d.morphTargetsRelative?1:1-v;f.getUniforms().setValue(i,"morphTargetBaseInfluence",M),f.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function kie(i,e,t,n){let r=new WeakMap;function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),null!==c.instanceColor&&t.remove(c.instanceColor)}return{update:function s(l){const c=n.render.frame,f=e.get(l,l.geometry);return r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(!1===l.hasEventListener("dispose",a)&&l.addEventListener("dispose",a),t.update(l.instanceMatrix,34962),null!==l.instanceColor&&t.update(l.instanceColor,34962)),f},dispose:function o(){r=new WeakMap}}}const QV=new ku,ez=new hI,tz=new EV,nz=new VM,iz=[],rz=[],sz=new Float32Array(16),oz=new Float32Array(9),az=new Float32Array(4);function ym(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=iz[r];if(void 0===s&&(s=new Float32Array(r),iz[r]=s),0!==e){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function Sr(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function Er(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function $M(i,e){let t=rz[e];void 0===t&&(t=new Int32Array(e),rz[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function Oie(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Lie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sr(t,e))return;i.uniform2fv(this.addr,e),Er(t,e)}}function Fie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Sr(t,e))return;i.uniform3fv(this.addr,e),Er(t,e)}}function Nie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sr(t,e))return;i.uniform4fv(this.addr,e),Er(t,e)}}function Bie(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Sr(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),Er(t,e)}else{if(Sr(t,n))return;az.set(n),i.uniformMatrix2fv(this.addr,!1,az),Er(t,n)}}function Uie(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Sr(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),Er(t,e)}else{if(Sr(t,n))return;oz.set(n),i.uniformMatrix3fv(this.addr,!1,oz),Er(t,n)}}function Vie(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(Sr(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),Er(t,e)}else{if(Sr(t,n))return;sz.set(n),i.uniformMatrix4fv(this.addr,!1,sz),Er(t,n)}}function zie(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Hie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sr(t,e))return;i.uniform2iv(this.addr,e),Er(t,e)}}function Gie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sr(t,e))return;i.uniform3iv(this.addr,e),Er(t,e)}}function Wie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sr(t,e))return;i.uniform4iv(this.addr,e),Er(t,e)}}function $ie(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function jie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Sr(t,e))return;i.uniform2uiv(this.addr,e),Er(t,e)}}function qie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Sr(t,e))return;i.uniform3uiv(this.addr,e),Er(t,e)}}function Xie(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Sr(t,e))return;i.uniform4uiv(this.addr,e),Er(t,e)}}function Yie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||QV,r)}function Zie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||tz,r)}function Kie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||nz,r)}function Jie(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||ez,r)}function ere(i,e){i.uniform1fv(this.addr,e)}function tre(i,e){const t=ym(e,this.size,2);i.uniform2fv(this.addr,t)}function nre(i,e){const t=ym(e,this.size,3);i.uniform3fv(this.addr,t)}function ire(i,e){const t=ym(e,this.size,4);i.uniform4fv(this.addr,t)}function rre(i,e){const t=ym(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function sre(i,e){const t=ym(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function ore(i,e){const t=ym(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function are(i,e){i.uniform1iv(this.addr,e)}function lre(i,e){i.uniform2iv(this.addr,e)}function cre(i,e){i.uniform3iv(this.addr,e)}function ure(i,e){i.uniform4iv(this.addr,e)}function dre(i,e){i.uniform1uiv(this.addr,e)}function hre(i,e){i.uniform2uiv(this.addr,e)}function fre(i,e){i.uniform3uiv(this.addr,e)}function pre(i,e){i.uniform4uiv(this.addr,e)}function mre(i,e,t){const n=this.cache,r=e.length,s=$M(t,r);Sr(n,s)||(i.uniform1iv(this.addr,s),Er(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||QV,s[o])}function gre(i,e,t){const n=this.cache,r=e.length,s=$M(t,r);Sr(n,s)||(i.uniform1iv(this.addr,s),Er(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||tz,s[o])}function _re(i,e,t){const n=this.cache,r=e.length,s=$M(t,r);Sr(n,s)||(i.uniform1iv(this.addr,s),Er(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||nz,s[o])}function vre(i,e,t){const n=this.cache,r=e.length,s=$M(t,r);Sr(n,s)||(i.uniform1iv(this.addr,s),Er(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||ez,s[o])}class bre{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function Qie(i){switch(i){case 5126:return Oie;case 35664:return Lie;case 35665:return Fie;case 35666:return Nie;case 35674:return Bie;case 35675:return Uie;case 35676:return Vie;case 5124:case 35670:return zie;case 35667:case 35671:return Hie;case 35668:case 35672:return Gie;case 35669:case 35673:return Wie;case 5125:return $ie;case 36294:return jie;case 36295:return qie;case 36296:return Xie;case 35678:case 36198:case 36298:case 36306:case 35682:return Yie;case 35679:case 36299:case 36307:return Zie;case 35680:case 36300:case 36308:case 36293:return Kie;case 36289:case 36303:case 36311:case 36292:return Jie}}(t.type)}}class xre{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function yre(i){switch(i){case 5126:return ere;case 35664:return tre;case 35665:return nre;case 35666:return ire;case 35674:return rre;case 35675:return sre;case 35676:return ore;case 5124:case 35670:return are;case 35667:case 35671:return lre;case 35668:case 35672:return cre;case 35669:case 35673:return ure;case 5125:return dre;case 36294:return hre;case 36295:return fre;case 36296:return pre;case 35678:case 36198:case 36298:case 36306:case 35682:return mre;case 35679:case 36299:case 36307:return gre;case 35680:case 36300:case 36308:case 36293:return _re;case 36289:case 36303:case 36311:case 36292:return vre}}(t.type)}}class wre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const OI=/(\w+)(\])?(\[|\.)?/g;function lz(i,e){i.seq.push(e),i.map[e.id]=e}function Mre(i,e,t){const n=i.name,r=n.length;for(OI.lastIndex=0;;){const s=OI.exec(n),o=OI.lastIndex;let a=s[1];const c=s[3];if("]"===s[2]&&(a|=0),void 0===c||"["===c&&o+2===r){lz(t,void 0===c?new bre(a,i,e):new xre(a,i,e));break}{let f=t.map[a];void 0===f&&(f=new wre(a),lz(t,f)),t=f}}}class jM{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);Mre(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];!1!==l.needsUpdate&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function cz(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let Cre=0;function uz(i,e,t){const n=i.getShaderParameter(e,35713),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function Sre(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join("\n")}(i.getShaderSource(e),o)}return r}function Dre(i,e){const t=function Ere(i){switch(i){case rh:return["Linear","( value )"];case ti:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Are(i,e){let t;switch(e){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="OptimizedCineon";break;case 4:t="ACESFilmic";break;case 5:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function ny(i){return""!==i}function dz(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function hz(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Pre=/^[ \t]*#include +<([\w\d./]+)>/gm;function LI(i){return i.replace(Pre,kre)}function kre(i,e){const t=ln[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return LI(t)}const Ore=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function fz(i){return i.replace(Ore,Lre)}function Lre(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function pz(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function zre(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=function Fre(i){let e="SHADOWMAP_TYPE_BASIC";return 1===i.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(t),c=function Nre(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case 301:case 302:e="ENVMAP_TYPE_CUBE";break;case 306:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),d=function Bre(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&302===i.envMapMode&&(e="ENVMAP_MODE_REFRACTION"),e}(t),f=function Ure(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(t),p=function Vre(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),m=t.isWebGL2?"":function Tre(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ny).join("\n")}(t),_=function Ire(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),b=r.createProgram();let y,v,M=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(y=[_].filter(ny).join("\n"),y.length>0&&(y+="\n"),v=[m,_].filter(ny).join("\n"),v.length>0&&(v+="\n")):(y=[pz(t),"#define SHADER_NAME "+t.shaderName,_,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ny).join("\n"),v=[m,pz(t),"#define SHADER_NAME "+t.shaderName,_,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs2?"#define USE_UV2":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==t.toneMapping?"#define TONE_MAPPING":"",0!==t.toneMapping?ln.tonemapping_pars_fragment:"",0!==t.toneMapping?Are("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ln.encodings_pars_fragment,Dre("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(ny).join("\n")),o=LI(o),o=dz(o,t),o=hz(o,t),a=LI(a),a=dz(a,t),a=hz(a,t),o=fz(o),a=fz(a),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(M="#version 300 es\n",y=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,v=["#define varying in","300 es"===t.glslVersion?"":"layout(location = 0) out highp vec4 pc_fragColor;","300 es"===t.glslVersion?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const C=M+v+a,D=cz(r,35633,M+y+o),I=cz(r,35632,C);if(r.attachShader(b,D),r.attachShader(b,I),void 0!==t.index0AttributeName?r.bindAttribLocation(b,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b),i.debug.checkShaderErrors){const A=r.getProgramInfoLog(b).trim(),k=r.getShaderInfoLog(D).trim(),ee=r.getShaderInfoLog(I).trim();let le=!0,$=!0;if(!1===r.getProgramParameter(b,35714))if(le=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,b,D,I);else{const X=uz(r,D,"vertex"),re=uz(r,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,35715)+"\n\nProgram Info Log: "+A+"\n"+X+"\n"+re)}else""!==A?console.warn("THREE.WebGLProgram: Program Info Log:",A):(""===k||""===ee)&&($=!1);$&&(this.diagnostics={runnable:le,programLog:A,vertexShader:{log:k,prefix:y},fragmentShader:{log:ee,prefix:v}})}let N,V;return r.deleteShader(D),r.deleteShader(I),this.getUniforms=function(){return void 0===N&&(N=new jM(r,b)),N},this.getAttributes=function(){return void 0===V&&(V=function Rre(i,e){const t={},n=i.getProgramParameter(e,35721);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;35674===s.type&&(a=2),35675===s.type&&(a=3),35676===s.type&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}(r,b)),V},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.name=t.shaderName,this.id=Cre++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=D,this.fragmentShader=I,this}let Hre=0;class Gre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(s)&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Wre(e),t.set(e,n)),n}}class Wre{constructor(e){this.id=Hre++,this.code=e,this.usedTimes=0}}function $re(i,e,t,n,r,s,o){const a=new yI,l=new Gre,c=[],d=r.isWebGL2,f=r.logarithmicDepthBuffer,p=r.vertexTextures;let m=r.precision;const _={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(A){return 1===A?"uv2":"uv"}return{getParameters:function y(A,k,ee,le,$){const X=le.fog,re=$.geometry,Q=(A.isMeshStandardMaterial?t:e).get(A.envMap||(A.isMeshStandardMaterial?le.environment:null)),Y=Q&&306===Q.mapping?Q.image.height:null,ae=_[A.type];null!==A.precision&&(m=r.getMaxPrecision(A.precision),m!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const we=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,qe=void 0!==we?we.length:0;let oe,de,Ne,$e,ke=0;if(void 0!==re.morphAttributes.position&&(ke=1),void 0!==re.morphAttributes.normal&&(ke=2),void 0!==re.morphAttributes.color&&(ke=3),ae){const Ze=Pl[ae];oe=Ze.vertexShader,de=Ze.fragmentShader}else oe=A.vertexShader,de=A.fragmentShader,l.update(A),Ne=l.getVertexShaderID(A),$e=l.getFragmentShaderID(A);const Z=i.getRenderTarget(),dt=!0===$.isInstancedMesh,rt=!!A.map,st=!!Q,Ee=!!A.aoMap,ge=!!A.lightMap,De=!!A.bumpMap,nt=!!A.normalMap,ze=!!A.displacementMap,At=!!A.emissiveMap,Tt=!!A.metalnessMap,xt=!!A.roughnessMap,hn=A.clearcoat>0,Bn=A.iridescence>0,F=A.sheen>0,P=A.transmission>0,se=hn&&!!A.clearcoatMap,Ae=hn&&!!A.clearcoatNormalMap,Ie=hn&&!!A.clearcoatRoughnessMap,Ge=Bn&&!!A.iridescenceMap,Rt=Bn&&!!A.iridescenceThicknessMap,Qe=F&&!!A.sheenColorMap,me=F&&!!A.sheenRoughnessMap,lt=!!A.specularMap,wt=!!A.specularColorMap,It=!!A.specularIntensityMap,it=P&&!!A.transmissionMap,ht=P&&!!A.thicknessMap,ii=!!A.alphaMap,H=!!A.extensions,pe=!!re.attributes.uv2;return{isWebGL2:d,shaderID:ae,shaderName:A.type,vertexShader:oe,fragmentShader:de,defines:A.defines,customVertexShaderID:Ne,customFragmentShaderID:$e,isRawShaderMaterial:!0===A.isRawShaderMaterial,glslVersion:A.glslVersion,precision:m,instancing:dt,instancingColor:dt&&null!==$.instanceColor,supportsVertexTextures:p,outputEncoding:null===Z?i.outputEncoding:!0===Z.isXRRenderTarget?Z.texture.encoding:rh,map:rt,matcap:!!A.matcap,envMap:st,envMapMode:st&&Q.mapping,envMapCubeUVHeight:Y,aoMap:Ee,lightMap:ge,bumpMap:De,normalMap:nt,displacementMap:p&&ze,emissiveMap:At,normalMapObjectSpace:nt&&1===A.normalMapType,normalMapTangentSpace:nt&&0===A.normalMapType,decodeVideoTexture:rt&&!0===A.map.isVideoTexture&&A.map.encoding===ti,metalnessMap:Tt,roughnessMap:xt,clearcoat:hn,clearcoatMap:se,clearcoatNormalMap:Ae,clearcoatRoughnessMap:Ie,iridescence:Bn,iridescenceMap:Ge,iridescenceThicknessMap:Rt,sheen:F,sheenColorMap:Qe,sheenRoughnessMap:me,specularMap:lt,specularColorMap:wt,specularIntensityMap:It,transmission:P,transmissionMap:it,thicknessMap:ht,gradientMap:!!A.gradientMap,opaque:!1===A.transparent&&1===A.blending,alphaMap:ii,alphaTest:A.alphaTest>0,combine:A.combine,mapUv:rt&&b(A.map.channel),aoMapUv:Ee&&b(A.aoMap.channel),lightMapUv:ge&&b(A.lightMap.channel),bumpMapUv:De&&b(A.bumpMap.channel),normalMapUv:nt&&b(A.normalMap.channel),displacementMapUv:ze&&b(A.displacementMap.channel),emissiveMapUv:At&&b(A.emissiveMap.channel),metalnessMapUv:Tt&&b(A.metalnessMap.channel),roughnessMapUv:xt&&b(A.roughnessMap.channel),clearcoatMapUv:se&&b(A.clearcoatMap.channel),clearcoatNormalMapUv:Ae&&b(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ie&&b(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ge&&b(A.iridescenceMap.channel),iridescenceThicknessMapUv:Rt&&b(A.iridescenceThicknessMap.channel),sheenColorMapUv:Qe&&b(A.sheenColorMap.channel),sheenRoughnessMapUv:me&&b(A.sheenRoughnessMap.channel),specularMapUv:lt&&b(A.specularMap.channel),specularColorMapUv:wt&&b(A.specularColorMap.channel),specularIntensityMapUv:It&&b(A.specularIntensityMap.channel),transmissionMapUv:it&&b(A.transmissionMap.channel),thicknessMapUv:ht&&b(A.thicknessMap.channel),alphaMapUv:ii&&b(A.alphaMap.channel),vertexTangents:nt&&!!re.attributes.tangent,vertexColors:A.vertexColors,vertexAlphas:!0===A.vertexColors&&!!re.attributes.color&&4===re.attributes.color.itemSize,vertexUvs2:pe,pointsUvs:!0===$.isPoints&&!!re.attributes.uv&&(rt||ii),fog:!!X,useFog:!0===A.fog,fogExp2:X&&X.isFogExp2,flatShading:!0===A.flatShading,sizeAttenuation:!0===A.sizeAttenuation,logarithmicDepthBuffer:f,skinning:!0===$.isSkinnedMesh,morphTargets:void 0!==re.morphAttributes.position,morphNormals:void 0!==re.morphAttributes.normal,morphColors:void 0!==re.morphAttributes.color,morphTargetsCount:qe,morphTextureStride:ke,numDirLights:k.directional.length,numPointLights:k.point.length,numSpotLights:k.spot.length,numSpotLightMaps:k.spotLightMap.length,numRectAreaLights:k.rectArea.length,numHemiLights:k.hemi.length,numDirLightShadows:k.directionalShadowMap.length,numPointLightShadows:k.pointShadowMap.length,numSpotLightShadows:k.spotShadowMap.length,numSpotLightShadowsWithMaps:k.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:i.shadowMap.enabled&&ee.length>0,shadowMapType:i.shadowMap.type,toneMapping:A.toneMapped?i.toneMapping:0,useLegacyLights:i.useLegacyLights,premultipliedAlpha:A.premultipliedAlpha,doubleSided:2===A.side,flipSided:1===A.side,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionDerivatives:H&&!0===A.extensions.derivatives,extensionFragDepth:H&&!0===A.extensions.fragDepth,extensionDrawBuffers:H&&!0===A.extensions.drawBuffers,extensionShaderTextureLOD:H&&!0===A.extensions.shaderTextureLOD,rendererExtensionFragDepth:d||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||n.has("EXT_shader_texture_lod"),customProgramCacheKey:A.customProgramCacheKey()}},getProgramCacheKey:function v(A){const k=[];if(A.shaderID?k.push(A.shaderID):(k.push(A.customVertexShaderID),k.push(A.customFragmentShaderID)),void 0!==A.defines)for(const ee in A.defines)k.push(ee),k.push(A.defines[ee]);return!1===A.isRawShaderMaterial&&(function M(A,k){A.push(k.precision),A.push(k.outputEncoding),A.push(k.envMapMode),A.push(k.envMapCubeUVHeight),A.push(k.mapUv),A.push(k.alphaMapUv),A.push(k.lightMapUv),A.push(k.aoMapUv),A.push(k.bumpMapUv),A.push(k.normalMapUv),A.push(k.displacementMapUv),A.push(k.emissiveMapUv),A.push(k.metalnessMapUv),A.push(k.roughnessMapUv),A.push(k.clearcoatMapUv),A.push(k.clearcoatNormalMapUv),A.push(k.clearcoatRoughnessMapUv),A.push(k.iridescenceMapUv),A.push(k.iridescenceThicknessMapUv),A.push(k.sheenColorMapUv),A.push(k.sheenRoughnessMapUv),A.push(k.specularMapUv),A.push(k.specularColorMapUv),A.push(k.specularIntensityMapUv),A.push(k.transmissionMapUv),A.push(k.thicknessMapUv),A.push(k.combine),A.push(k.fogExp2),A.push(k.sizeAttenuation),A.push(k.morphTargetsCount),A.push(k.morphAttributeCount),A.push(k.numDirLights),A.push(k.numPointLights),A.push(k.numSpotLights),A.push(k.numSpotLightMaps),A.push(k.numHemiLights),A.push(k.numRectAreaLights),A.push(k.numDirLightShadows),A.push(k.numPointLightShadows),A.push(k.numSpotLightShadows),A.push(k.numSpotLightShadowsWithMaps),A.push(k.shadowMapType),A.push(k.toneMapping),A.push(k.numClippingPlanes),A.push(k.numClipIntersection),A.push(k.depthPacking)}(k,A),function w(A,k){a.disableAll(),k.isWebGL2&&a.enable(0),k.supportsVertexTextures&&a.enable(1),k.instancing&&a.enable(2),k.instancingColor&&a.enable(3),k.matcap&&a.enable(4),k.envMap&&a.enable(5),k.normalMapObjectSpace&&a.enable(6),k.normalMapTangentSpace&&a.enable(7),k.clearcoat&&a.enable(8),k.iridescence&&a.enable(9),k.alphaTest&&a.enable(10),k.vertexColors&&a.enable(11),k.vertexAlphas&&a.enable(12),k.vertexUvs2&&a.enable(13),k.vertexTangents&&a.enable(14),A.push(a.mask),a.disableAll(),k.fog&&a.enable(0),k.useFog&&a.enable(1),k.flatShading&&a.enable(2),k.logarithmicDepthBuffer&&a.enable(3),k.skinning&&a.enable(4),k.morphTargets&&a.enable(5),k.morphNormals&&a.enable(6),k.morphColors&&a.enable(7),k.premultipliedAlpha&&a.enable(8),k.shadowMapEnabled&&a.enable(9),k.useLegacyLights&&a.enable(10),k.doubleSided&&a.enable(11),k.flipSided&&a.enable(12),k.useDepthPacking&&a.enable(13),k.dithering&&a.enable(14),k.transmission&&a.enable(15),k.sheen&&a.enable(16),k.decodeVideoTexture&&a.enable(17),k.opaque&&a.enable(18),k.pointsUvs&&a.enable(19),A.push(a.mask)}(k,A),k.push(i.outputEncoding)),k.push(A.customProgramCacheKey),k.join()},getUniforms:function C(A){const k=_[A.type];let ee;return ee=k?pte.clone(Pl[k].uniforms):A.uniforms,ee},acquireProgram:function D(A,k){let ee;for(let le=0,$=c.length;le<$;le++){const X=c[le];if(X.cacheKey===k){ee=X,++ee.usedTimes;break}}return void 0===ee&&(ee=new zre(i,k,A,s),c.push(ee)),ee},releaseProgram:function I(A){if(0==--A.usedTimes){const k=c.indexOf(A);c[k]=c[c.length-1],c.pop(),A.destroy()}},releaseShaderCache:function N(A){l.remove(A)},programs:c,dispose:function V(){l.dispose()}}}function jre(){let i=new WeakMap;return{get:function e(s){let o=i.get(s);return void 0===o&&(o={},i.set(s,o)),o},remove:function t(s){i.delete(s)},update:function n(s,o,a){i.get(s)[o]=a},dispose:function r(){i=new WeakMap}}}function qre(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function mz(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function gz(){const i=[];let e=0;const t=[],n=[],r=[];function o(f,p,m,_,b,y){let v=i[e];return void 0===v?(v={id:f.id,object:f,geometry:p,material:m,groupOrder:_,renderOrder:f.renderOrder,z:b,group:y},i[e]=v):(v.id=f.id,v.object=f,v.geometry=p,v.material=m,v.groupOrder=_,v.renderOrder=f.renderOrder,v.z=b,v.group=y),e++,v}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function a(f,p,m,_,b,y){const v=o(f,p,m,_,b,y);m.transmission>0?n.push(v):!0===m.transparent?r.push(v):t.push(v)},unshift:function l(f,p,m,_,b,y){const v=o(f,p,m,_,b,y);m.transmission>0?n.unshift(v):!0===m.transparent?r.unshift(v):t.unshift(v)},finish:function d(){for(let f=e,p=i.length;f<p;f++){const m=i[f];if(null===m.id)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}},sort:function c(f,p){t.length>1&&t.sort(f||qre),n.length>1&&n.sort(p||mz),r.length>1&&r.sort(p||mz)}}}function Xre(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let o;return void 0===s?(o=new gz,i.set(n,[o])):r>=s.length?(o=new gz,s.push(o)):o=s[r],o},dispose:function t(){i=new WeakMap}}}function Yre(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new O,color:new je};break;case"SpotLight":t={position:new O,direction:new O,color:new je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new O,color:new je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new O,skyColor:new je,groundColor:new je};break;case"RectAreaLight":t={color:new je,position:new O,halfWidth:new O,halfHeight:new O}}return i[e.id]=t,t}}}let Kre=0;function Jre(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Qre(i,e){const t=new Yre,n=function Zre(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Me,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)r.probe.push(new O);const s=new O,o=new tn,a=new tn;return{setup:function l(d,f){let p=0,m=0,_=0;for(let ee=0;ee<9;ee++)r.probe[ee].set(0,0,0);let b=0,y=0,v=0,M=0,w=0,C=0,D=0,I=0,N=0,V=0;d.sort(Jre);const A=!0===f?Math.PI:1;for(let ee=0,le=d.length;ee<le;ee++){const $=d[ee],X=$.color,re=$.intensity,q=$.distance,Q=$.shadow&&$.shadow.map?$.shadow.map.texture:null;if($.isAmbientLight)p+=X.r*re*A,m+=X.g*re*A,_+=X.b*re*A;else if($.isLightProbe)for(let Y=0;Y<9;Y++)r.probe[Y].addScaledVector($.sh.coefficients[Y],re);else if($.isDirectionalLight){const Y=t.get($);if(Y.color.copy($.color).multiplyScalar($.intensity*A),$.castShadow){const ae=$.shadow,we=n.get($);we.shadowBias=ae.bias,we.shadowNormalBias=ae.normalBias,we.shadowRadius=ae.radius,we.shadowMapSize=ae.mapSize,r.directionalShadow[b]=we,r.directionalShadowMap[b]=Q,r.directionalShadowMatrix[b]=$.shadow.matrix,C++}r.directional[b]=Y,b++}else if($.isSpotLight){const Y=t.get($);Y.position.setFromMatrixPosition($.matrixWorld),Y.color.copy(X).multiplyScalar(re*A),Y.distance=q,Y.coneCos=Math.cos($.angle),Y.penumbraCos=Math.cos($.angle*(1-$.penumbra)),Y.decay=$.decay,r.spot[v]=Y;const ae=$.shadow;if($.map&&(r.spotLightMap[N]=$.map,N++,ae.updateMatrices($),$.castShadow&&V++),r.spotLightMatrix[v]=ae.matrix,$.castShadow){const we=n.get($);we.shadowBias=ae.bias,we.shadowNormalBias=ae.normalBias,we.shadowRadius=ae.radius,we.shadowMapSize=ae.mapSize,r.spotShadow[v]=we,r.spotShadowMap[v]=Q,I++}v++}else if($.isRectAreaLight){const Y=t.get($);Y.color.copy(X).multiplyScalar(re),Y.halfWidth.set(.5*$.width,0,0),Y.halfHeight.set(0,.5*$.height,0),r.rectArea[M]=Y,M++}else if($.isPointLight){const Y=t.get($);if(Y.color.copy($.color).multiplyScalar($.intensity*A),Y.distance=$.distance,Y.decay=$.decay,$.castShadow){const ae=$.shadow,we=n.get($);we.shadowBias=ae.bias,we.shadowNormalBias=ae.normalBias,we.shadowRadius=ae.radius,we.shadowMapSize=ae.mapSize,we.shadowCameraNear=ae.camera.near,we.shadowCameraFar=ae.camera.far,r.pointShadow[y]=we,r.pointShadowMap[y]=Q,r.pointShadowMatrix[y]=$.shadow.matrix,D++}r.point[y]=Y,y++}else if($.isHemisphereLight){const Y=t.get($);Y.skyColor.copy($.color).multiplyScalar(re*A),Y.groundColor.copy($.groundColor).multiplyScalar(re*A),r.hemi[w]=Y,w++}}M>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=Be.LTC_FLOAT_1,r.rectAreaLTC2=Be.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Be.LTC_HALF_1,r.rectAreaLTC2=Be.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=_;const k=r.hash;(k.directionalLength!==b||k.pointLength!==y||k.spotLength!==v||k.rectAreaLength!==M||k.hemiLength!==w||k.numDirectionalShadows!==C||k.numPointShadows!==D||k.numSpotShadows!==I||k.numSpotMaps!==N)&&(r.directional.length=b,r.spot.length=v,r.rectArea.length=M,r.point.length=y,r.hemi.length=w,r.directionalShadow.length=C,r.directionalShadowMap.length=C,r.pointShadow.length=D,r.pointShadowMap.length=D,r.spotShadow.length=I,r.spotShadowMap.length=I,r.directionalShadowMatrix.length=C,r.pointShadowMatrix.length=D,r.spotLightMatrix.length=I+N-V,r.spotLightMap.length=N,r.numSpotLightShadowsWithMaps=V,k.directionalLength=b,k.pointLength=y,k.spotLength=v,k.rectAreaLength=M,k.hemiLength=w,k.numDirectionalShadows=C,k.numPointShadows=D,k.numSpotShadows=I,k.numSpotMaps=N,r.version=Kre++)},setupView:function c(d,f){let p=0,m=0,_=0,b=0,y=0;const v=f.matrixWorldInverse;for(let M=0,w=d.length;M<w;M++){const C=d[M];if(C.isDirectionalLight){const D=r.directional[p];D.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(v),p++}else if(C.isSpotLight){const D=r.spot[_];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(v),D.direction.setFromMatrixPosition(C.matrixWorld),s.setFromMatrixPosition(C.target.matrixWorld),D.direction.sub(s),D.direction.transformDirection(v),_++}else if(C.isRectAreaLight){const D=r.rectArea[b];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(v),a.identity(),o.copy(C.matrixWorld),o.premultiply(v),a.extractRotation(o),D.halfWidth.set(.5*C.width,0,0),D.halfHeight.set(0,.5*C.height,0),D.halfWidth.applyMatrix4(a),D.halfHeight.applyMatrix4(a),b++}else if(C.isPointLight){const D=r.point[m];D.position.setFromMatrixPosition(C.matrixWorld),D.position.applyMatrix4(v),m++}else if(C.isHemisphereLight){const D=r.hemi[y];D.direction.setFromMatrixPosition(C.matrixWorld),D.direction.transformDirection(v),y++}}},state:r}}function _z(i,e){const t=new Qre(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function l(f){t.setup(n,f)},setupLightsView:function c(f){t.setupView(n,f)},pushLight:function o(f){n.push(f)},pushShadow:function a(f){r.push(f)}}}function ese(i,e){let t=new WeakMap;return{get:function n(s,o=0){const a=t.get(s);let l;return void 0===a?(l=new _z(i,e),t.set(s,[l])):o>=a.length?(l=new _z(i,e),a.push(l)):l=a[o],l},dispose:function r(){t=new WeakMap}}}class vz extends Il{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class yz extends Il{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function ise(i,e,t){let n=new TI;const r=new Me,s=new Me,o=new ni,a=new vz({depthPacking:3201}),l=new yz,c={},d=t.maxTextureSize,f={0:1,1:0,2:2},p=new Bu({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Me},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const _=new sn;_.setAttribute("position",new fr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new _i(_,p),y=this;function v(C,D){const I=e.update(b);p.defines.VSM_SAMPLES!==C.blurSamples&&(p.defines.VSM_SAMPLES=C.blurSamples,m.defines.VSM_SAMPLES=C.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===C.mapPass&&(C.mapPass=new ah(r.x,r.y)),p.uniforms.shadow_pass.value=C.map.texture,p.uniforms.resolution.value=C.mapSize,p.uniforms.radius.value=C.radius,i.setRenderTarget(C.mapPass),i.clear(),i.renderBufferDirect(D,null,I,p,b,null),m.uniforms.shadow_pass.value=C.mapPass.texture,m.uniforms.resolution.value=C.mapSize,m.uniforms.radius.value=C.radius,i.setRenderTarget(C.map),i.clear(),i.renderBufferDirect(D,null,I,m,b,null)}function M(C,D,I,N){let V=null;const A=!0===I.isPointLight?C.customDistanceMaterial:C.customDepthMaterial;if(void 0!==A)V=A;else if(V=!0===I.isPointLight?l:a,i.localClippingEnabled&&!0===D.clipShadows&&Array.isArray(D.clippingPlanes)&&0!==D.clippingPlanes.length||D.displacementMap&&0!==D.displacementScale||D.alphaMap&&D.alphaTest>0||D.map&&D.alphaTest>0){const k=V.uuid,ee=D.uuid;let le=c[k];void 0===le&&(le={},c[k]=le);let $=le[ee];void 0===$&&($=V.clone(),le[ee]=$),V=$}return V.visible=D.visible,V.wireframe=D.wireframe,V.side=3===N?null!==D.shadowSide?D.shadowSide:D.side:null!==D.shadowSide?D.shadowSide:f[D.side],V.alphaMap=D.alphaMap,V.alphaTest=D.alphaTest,V.map=D.map,V.clipShadows=D.clipShadows,V.clippingPlanes=D.clippingPlanes,V.clipIntersection=D.clipIntersection,V.displacementMap=D.displacementMap,V.displacementScale=D.displacementScale,V.displacementBias=D.displacementBias,V.wireframeLinewidth=D.wireframeLinewidth,V.linewidth=D.linewidth,!0===I.isPointLight&&!0===V.isMeshDistanceMaterial&&(i.properties.get(V).light=I),V}function w(C,D,I,N,V){if(!1===C.visible)return;if(C.layers.test(D.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&3===V)&&(!C.frustumCulled||n.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,C.matrixWorld);const ee=e.update(C),le=C.material;if(Array.isArray(le)){const $=ee.groups;for(let X=0,re=$.length;X<re;X++){const q=$[X],Q=le[q.materialIndex];if(Q&&Q.visible){const Y=M(C,Q,N,V);i.renderBufferDirect(I,null,ee,Y,C,q)}}}else if(le.visible){const $=M(C,le,N,V);i.renderBufferDirect(I,null,ee,$,C,null)}}const k=C.children;for(let ee=0,le=k.length;ee<le;ee++)w(k[ee],D,I,N,V)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(C,D,I){if(!1===y.enabled||!1===y.autoUpdate&&!1===y.needsUpdate||0===C.length)return;const N=i.getRenderTarget(),V=i.getActiveCubeFace(),A=i.getActiveMipmapLevel(),k=i.state;k.setBlending(0),k.buffers.color.setClear(1,1,1,1),k.buffers.depth.setTest(!0),k.setScissorTest(!1);for(let ee=0,le=C.length;ee<le;ee++){const $=C[ee],X=$.shadow;if(void 0===X){console.warn("THREE.WebGLShadowMap:",$,"has no shadow.");continue}if(!1===X.autoUpdate&&!1===X.needsUpdate)continue;r.copy(X.mapSize);const re=X.getFrameExtents();r.multiply(re),s.copy(X.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/re.x),r.x=s.x*re.x,X.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/re.y),r.y=s.y*re.y,X.mapSize.y=s.y)),null===X.map&&(X.map=new ah(r.x,r.y,3!==this.type?{minFilter:ur,magFilter:ur}:{}),X.map.texture.name=$.name+".shadowMap",X.camera.updateProjectionMatrix()),i.setRenderTarget(X.map),i.clear();const q=X.getViewportCount();for(let Q=0;Q<q;Q++){const Y=X.getViewport(Q);o.set(s.x*Y.x,s.y*Y.y,s.x*Y.z,s.y*Y.w),k.viewport(o),X.updateMatrices($,Q),n=X.getFrustum(),w(D,I,X.camera,$,this.type)}!0!==X.isPointLightShadow&&3===this.type&&v(X,I),X.needsUpdate=!1}y.needsUpdate=!1,i.setRenderTarget(N,V,A)}}function rse(i,e,t){const n=t.isWebGL2,a=new function r(){let H=!1;const pe=new ni;let Te=null;const Ze=new ni(0,0,0,0);return{setMask:function(ft){Te!==ft&&!H&&(i.colorMask(ft,ft,ft,ft),Te=ft)},setLocked:function(ft){H=ft},setClear:function(ft,yi,Li,vs,Wu){!0===Wu&&(ft*=vs,yi*=vs,Li*=vs),pe.set(ft,yi,Li,vs),!1===Ze.equals(pe)&&(i.clearColor(ft,yi,Li,vs),Ze.copy(pe))},reset:function(){H=!1,Te=null,Ze.set(-1,0,0,0)}}},l=new function s(){let H=!1,pe=null,Te=null,Ze=null;return{setTest:function(ft){ft?Z(2929):dt(2929)},setMask:function(ft){pe!==ft&&!H&&(i.depthMask(ft),pe=ft)},setFunc:function(ft){if(Te!==ft){switch(ft){case 0:i.depthFunc(512);break;case 1:i.depthFunc(519);break;case 2:i.depthFunc(513);break;case 3:default:i.depthFunc(515);break;case 4:i.depthFunc(514);break;case 5:i.depthFunc(518);break;case 6:i.depthFunc(516);break;case 7:i.depthFunc(517)}Te=ft}},setLocked:function(ft){H=ft},setClear:function(ft){Ze!==ft&&(i.clearDepth(ft),Ze=ft)},reset:function(){H=!1,pe=null,Te=null,Ze=null}}},c=new function o(){let H=!1,pe=null,Te=null,Ze=null,ft=null,yi=null,Li=null,vs=null,Wu=null;return{setTest:function(Ki){H||(Ki?Z(2960):dt(2960))},setMask:function(Ki){pe!==Ki&&!H&&(i.stencilMask(Ki),pe=Ki)},setFunc:function(Ki,Ma,Bl){(Te!==Ki||Ze!==Ma||ft!==Bl)&&(i.stencilFunc(Ki,Ma,Bl),Te=Ki,Ze=Ma,ft=Bl)},setOp:function(Ki,Ma,Bl){(yi!==Ki||Li!==Ma||vs!==Bl)&&(i.stencilOp(Ki,Ma,Bl),yi=Ki,Li=Ma,vs=Bl)},setLocked:function(Ki){H=Ki},setClear:function(Ki){Wu!==Ki&&(i.clearStencil(Ki),Wu=Ki)},reset:function(){H=!1,pe=null,Te=null,Ze=null,ft=null,yi=null,Li=null,vs=null,Wu=null}}},d=new WeakMap,f=new WeakMap;let p={},m={},_=new WeakMap,b=[],y=null,v=!1,M=null,w=null,C=null,D=null,I=null,N=null,V=null,A=!1,k=null,ee=null,le=null,$=null,X=null;const re=i.getParameter(35661);let q=!1,Q=0;const Y=i.getParameter(7938);-1!==Y.indexOf("WebGL")?(Q=parseFloat(/^WebGL (\d)/.exec(Y)[1]),q=Q>=1):-1!==Y.indexOf("OpenGL ES")&&(Q=parseFloat(/^OpenGL ES (\d)/.exec(Y)[1]),q=Q>=2);let ae=null,we={};const qe=i.getParameter(3088),ke=i.getParameter(2978),oe=(new ni).fromArray(qe),de=(new ni).fromArray(ke);function Ne(H,pe,Te){const Ze=new Uint8Array(4),ft=i.createTexture();i.bindTexture(H,ft),i.texParameteri(H,10241,9728),i.texParameteri(H,10240,9728);for(let yi=0;yi<Te;yi++)i.texImage2D(pe+yi,0,6408,1,1,0,6408,5121,Ze);return ft}const $e={};function Z(H){!0!==p[H]&&(i.enable(H),p[H]=!0)}function dt(H){!1!==p[H]&&(i.disable(H),p[H]=!1)}$e[3553]=Ne(3553,3553,1),$e[34067]=Ne(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Z(2929),l.setFunc(3),ze(!1),At(1),Z(2884),De(0);const Ee={100:32774,101:32778,102:32779};if(n)Ee[103]=32775,Ee[104]=32776;else{const H=e.get("EXT_blend_minmax");null!==H&&(Ee[103]=H.MIN_EXT,Ee[104]=H.MAX_EXT)}const ge={200:0,201:1,202:768,204:770,210:776,208:774,206:772,203:769,205:771,209:775,207:773};function De(H,pe,Te,Ze,ft,yi,Li,vs){if(0!==H){if(!1===v&&(Z(3042),v=!0),5===H)ft=ft||pe,yi=yi||Te,Li=Li||Ze,(pe!==w||ft!==I)&&(i.blendEquationSeparate(Ee[pe],Ee[ft]),w=pe,I=ft),(Te!==C||Ze!==D||yi!==N||Li!==V)&&(i.blendFuncSeparate(ge[Te],ge[Ze],ge[yi],ge[Li]),C=Te,D=Ze,N=yi,V=Li),M=H,A=!1;else if(H!==M||vs!==A){if((100!==w||100!==I)&&(i.blendEquation(32774),w=100,I=100),vs)switch(H){case 1:i.blendFuncSeparate(1,771,1,771);break;case 2:i.blendFunc(1,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}else switch(H){case 1:i.blendFuncSeparate(770,771,1,771);break;case 2:i.blendFunc(770,1);break;case 3:i.blendFuncSeparate(0,769,0,1);break;case 4:i.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",H)}C=null,D=null,N=null,V=null,M=H,A=vs}}else!0===v&&(dt(3042),v=!1)}function ze(H){k!==H&&(i.frontFace(H?2304:2305),k=H)}function At(H){0!==H?(Z(2884),H!==ee&&i.cullFace(1===H?1029:2===H?1028:1032)):dt(2884),ee=H}function xt(H,pe,Te){H?(Z(32823),($!==pe||X!==Te)&&(i.polygonOffset(pe,Te),$=pe,X=Te)):dt(32823)}return{buffers:{color:a,depth:l,stencil:c},enable:Z,disable:dt,bindFramebuffer:function rt(H,pe){return m[H]!==pe&&(i.bindFramebuffer(H,pe),m[H]=pe,n&&(36009===H&&(m[36160]=pe),36160===H&&(m[36009]=pe)),!0)},drawBuffers:function Re(H,pe){let Te=b,Ze=!1;if(H)if(Te=_.get(pe),void 0===Te&&(Te=[],_.set(pe,Te)),H.isWebGLMultipleRenderTargets){const ft=H.texture;if(Te.length!==ft.length||36064!==Te[0]){for(let yi=0,Li=ft.length;yi<Li;yi++)Te[yi]=36064+yi;Te.length=ft.length,Ze=!0}}else 36064!==Te[0]&&(Te[0]=36064,Ze=!0);else 1029!==Te[0]&&(Te[0]=1029,Ze=!0);Ze&&(t.isWebGL2?i.drawBuffers(Te):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Te))},useProgram:function st(H){return y!==H&&(i.useProgram(H),y=H,!0)},setBlending:De,setMaterial:function nt(H,pe){2===H.side?dt(2884):Z(2884);let Te=1===H.side;pe&&(Te=!Te),ze(Te),1===H.blending&&!1===H.transparent?De(0):De(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),l.setFunc(H.depthFunc),l.setTest(H.depthTest),l.setMask(H.depthWrite),a.setMask(H.colorWrite);const Ze=H.stencilWrite;c.setTest(Ze),Ze&&(c.setMask(H.stencilWriteMask),c.setFunc(H.stencilFunc,H.stencilRef,H.stencilFuncMask),c.setOp(H.stencilFail,H.stencilZFail,H.stencilZPass)),xt(H.polygonOffset,H.polygonOffsetFactor,H.polygonOffsetUnits),!0===H.alphaToCoverage?Z(32926):dt(32926)},setFlipSided:ze,setCullFace:At,setLineWidth:function Tt(H){H!==le&&(q&&i.lineWidth(H),le=H)},setPolygonOffset:xt,setScissorTest:function hn(H){H?Z(3089):dt(3089)},activeTexture:function Bn(H){void 0===H&&(H=33984+re-1),ae!==H&&(i.activeTexture(H),ae=H)},bindTexture:function F(H,pe,Te){void 0===Te&&(Te=null===ae?33984+re-1:ae);let Ze=we[Te];void 0===Ze&&(Ze={type:void 0,texture:void 0},we[Te]=Ze),(Ze.type!==H||Ze.texture!==pe)&&(ae!==Te&&(i.activeTexture(Te),ae=Te),i.bindTexture(H,pe||$e[H]),Ze.type=H,Ze.texture=pe)},unbindTexture:function P(){const H=we[ae];void 0!==H&&void 0!==H.type&&(i.bindTexture(H.type,null),H.type=void 0,H.texture=void 0)},compressedTexImage2D:function se(){try{i.compressedTexImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexImage3D:function Ae(){try{i.compressedTexImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage2D:function wt(){try{i.texImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texImage3D:function It(){try{i.texImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},updateUBOMapping:function An(H,pe){let Te=f.get(pe);void 0===Te&&(Te=new WeakMap,f.set(pe,Te));let Ze=Te.get(H);void 0===Ze&&(Ze=i.getUniformBlockIndex(pe,H.name),Te.set(H,Ze))},uniformBlockBinding:function ii(H,pe){const Ze=f.get(pe).get(H);d.get(pe)!==Ze&&(i.uniformBlockBinding(pe,Ze,H.__bindingPointIndex),d.set(pe,Ze))},texStorage2D:function me(){try{i.texStorage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texStorage3D:function lt(){try{i.texStorage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage2D:function Ie(){try{i.texSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},texSubImage3D:function Ge(){try{i.texSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage2D:function Rt(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},compressedTexSubImage3D:function Qe(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(H){console.error("THREE.WebGLState:",H)}},scissor:function it(H){!1===oe.equals(H)&&(i.scissor(H.x,H.y,H.z,H.w),oe.copy(H))},viewport:function ht(H){!1===de.equals(H)&&(i.viewport(H.x,H.y,H.z,H.w),de.copy(H))},reset:function Zi(){i.disable(3042),i.disable(2884),i.disable(2929),i.disable(32823),i.disable(3089),i.disable(2960),i.disable(32926),i.blendEquation(32774),i.blendFunc(1,0),i.blendFuncSeparate(1,0,1,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(513),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(519,0,4294967295),i.stencilOp(7680,7680,7680),i.clearStencil(0),i.cullFace(1029),i.frontFace(2305),i.polygonOffset(0,0),i.activeTexture(33984),i.bindFramebuffer(36160,null),!0===n&&(i.bindFramebuffer(36009,null),i.bindFramebuffer(36008,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),p={},ae=null,we={},m={},_=new WeakMap,b=[],y=null,v=!1,M=null,w=null,C=null,D=null,I=null,N=null,V=null,A=!1,k=null,ee=null,le=null,$=null,X=null,oe.set(0,0,i.canvas.width,i.canvas.height),de.set(0,0,i.canvas.width,i.canvas.height),a.reset(),l.reset(),c.reset()}}}function sse(i,e,t,n,r,s,o){const a=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,d=r.maxTextureSize,f=r.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),_=new WeakMap;let b;const y=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function M(F,P){return v?new OffscreenCanvas(F,P):Zv("canvas")}function w(F,P,se,Ae){let Ie=1;if((F.width>Ae||F.height>Ae)&&(Ie=Ae/Math.max(F.width,F.height)),Ie<1||!0===P){if(typeof HTMLImageElement<"u"&&F instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&F instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&F instanceof ImageBitmap){const Ge=P?MV:Math.floor,Rt=Ge(Ie*F.width),Qe=Ge(Ie*F.height);void 0===b&&(b=M(Rt,Qe));const me=se?M(Rt,Qe):b;return me.width=Rt,me.height=Qe,me.getContext("2d").drawImage(F,0,0,Rt,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+F.width+"x"+F.height+") to ("+Rt+"x"+Qe+")."),me}return"data"in F&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+F.width+"x"+F.height+")."),F}return F}function C(F){return lI(F.width)&&lI(F.height)}function I(F,P){return F.generateMipmaps&&P&&F.minFilter!==ur&&F.minFilter!==dr}function N(F){i.generateMipmap(F)}function V(F,P,se,Ae,Ie=!1){if(!1===a)return P;if(null!==F){if(void 0!==i[F])return i[F];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+F+"'")}let Ge=P;return 6403===P&&(5126===se&&(Ge=33326),5131===se&&(Ge=33325),5121===se&&(Ge=33321)),33319===P&&(5126===se&&(Ge=33328),5131===se&&(Ge=33327),5121===se&&(Ge=33323)),6408===P&&(5126===se&&(Ge=34836),5131===se&&(Ge=34842),5121===se&&(Ge=Ae===ti&&!1===Ie?35907:32856),32819===se&&(Ge=32854),32820===se&&(Ge=32855)),(33325===Ge||33326===Ge||33327===Ge||33328===Ge||34842===Ge||34836===Ge)&&e.get("EXT_color_buffer_float"),Ge}function A(F,P,se){return!0===I(F,se)||F.isFramebufferTexture&&F.minFilter!==ur&&F.minFilter!==dr?Math.log2(Math.max(P.width,P.height))+1:void 0!==F.mipmaps&&F.mipmaps.length>0?F.mipmaps.length:F.isCompressedTexture&&Array.isArray(F.image)?P.mipmaps.length:1}function k(F){return F===ur||1004===F||1005===F?9728:9729}function ee(F){const P=F.target;P.removeEventListener("dispose",ee),function $(F){const P=n.get(F);if(void 0===P.__webglInit)return;const se=F.source,Ae=y.get(se);if(Ae){const Ie=Ae[P.__cacheKey];Ie.usedTimes--,0===Ie.usedTimes&&X(F),0===Object.keys(Ae).length&&y.delete(se)}n.remove(F)}(P),P.isVideoTexture&&_.delete(P)}function le(F){const P=F.target;P.removeEventListener("dispose",le),function re(F){const P=F.texture,se=n.get(F),Ae=n.get(P);if(void 0!==Ae.__webglTexture&&(i.deleteTexture(Ae.__webglTexture),o.memory.textures--),F.depthTexture&&F.depthTexture.dispose(),F.isWebGLCubeRenderTarget)for(let Ie=0;Ie<6;Ie++)i.deleteFramebuffer(se.__webglFramebuffer[Ie]),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer[Ie]);else{if(i.deleteFramebuffer(se.__webglFramebuffer),se.__webglDepthbuffer&&i.deleteRenderbuffer(se.__webglDepthbuffer),se.__webglMultisampledFramebuffer&&i.deleteFramebuffer(se.__webglMultisampledFramebuffer),se.__webglColorRenderbuffer)for(let Ie=0;Ie<se.__webglColorRenderbuffer.length;Ie++)se.__webglColorRenderbuffer[Ie]&&i.deleteRenderbuffer(se.__webglColorRenderbuffer[Ie]);se.__webglDepthRenderbuffer&&i.deleteRenderbuffer(se.__webglDepthRenderbuffer)}if(F.isWebGLMultipleRenderTargets)for(let Ie=0,Ge=P.length;Ie<Ge;Ie++){const Rt=n.get(P[Ie]);Rt.__webglTexture&&(i.deleteTexture(Rt.__webglTexture),o.memory.textures--),n.remove(P[Ie])}n.remove(P),n.remove(F)}(P)}function X(F){const P=n.get(F);i.deleteTexture(P.__webglTexture),delete y.get(F.source)[P.__cacheKey],o.memory.textures--}let q=0;function we(F,P){const se=n.get(F);if(F.isVideoTexture&&function hn(F){const P=o.render.frame;_.get(F)!==P&&(_.set(F,P),F.update())}(F),!1===F.isRenderTargetTexture&&F.version>0&&se.__version!==F.version){const Ae=F.image;if(null===Ae)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Ae.complete)return void dt(se,F,P);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(3553,se.__webglTexture,33984+P)}const de={1e3:10497,[Mr]:33071,1002:33648},Ne={[ur]:9728,1004:9984,1005:9986,[dr]:9729,1007:9985,[eh]:9987};function $e(F,P,se){if(se?(i.texParameteri(F,10242,de[P.wrapS]),i.texParameteri(F,10243,de[P.wrapT]),(32879===F||35866===F)&&i.texParameteri(F,32882,de[P.wrapR]),i.texParameteri(F,10240,Ne[P.magFilter]),i.texParameteri(F,10241,Ne[P.minFilter])):(i.texParameteri(F,10242,33071),i.texParameteri(F,10243,33071),(32879===F||35866===F)&&i.texParameteri(F,32882,33071),(P.wrapS!==Mr||P.wrapT!==Mr)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(F,10240,k(P.magFilter)),i.texParameteri(F,10241,k(P.minFilter)),P.minFilter!==ur&&P.minFilter!==dr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Ae=e.get("EXT_texture_filter_anisotropic");if(P.magFilter===ur||1005!==P.minFilter&&P.minFilter!==eh||P.type===Pu&&!1===e.has("OES_texture_float_linear")||!1===a&&P.type===qv&&!1===e.has("OES_texture_half_float_linear"))return;(P.anisotropy>1||n.get(P).__currentAnisotropy)&&(i.texParameterf(F,Ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(P.anisotropy,r.getMaxAnisotropy())),n.get(P).__currentAnisotropy=P.anisotropy)}}function Z(F,P){let se=!1;void 0===F.__webglInit&&(F.__webglInit=!0,P.addEventListener("dispose",ee));const Ae=P.source;let Ie=y.get(Ae);void 0===Ie&&(Ie={},y.set(Ae,Ie));const Ge=function ae(F){const P=[];return P.push(F.wrapS),P.push(F.wrapT),P.push(F.wrapR||0),P.push(F.magFilter),P.push(F.minFilter),P.push(F.anisotropy),P.push(F.internalFormat),P.push(F.format),P.push(F.type),P.push(F.generateMipmaps),P.push(F.premultiplyAlpha),P.push(F.flipY),P.push(F.unpackAlignment),P.push(F.encoding),P.join()}(P);if(Ge!==F.__cacheKey){void 0===Ie[Ge]&&(Ie[Ge]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,se=!0),Ie[Ge].usedTimes++;const Rt=Ie[F.__cacheKey];void 0!==Rt&&(Ie[F.__cacheKey].usedTimes--,0===Rt.usedTimes&&X(P)),F.__cacheKey=Ge,F.__webglTexture=Ie[Ge].texture}return se}function dt(F,P,se){let Ae=3553;(P.isDataArrayTexture||P.isCompressedArrayTexture)&&(Ae=35866),P.isData3DTexture&&(Ae=32879);const Ie=Z(F,P),Ge=P.source;t.bindTexture(Ae,F.__webglTexture,33984+se);const Rt=n.get(Ge);if(Ge.version!==Rt.__version||!0===Ie){t.activeTexture(33984+se),i.pixelStorei(37440,P.flipY),i.pixelStorei(37441,P.premultiplyAlpha),i.pixelStorei(3317,P.unpackAlignment),i.pixelStorei(37443,0);const Qe=function D(F){return!a&&(F.wrapS!==Mr||F.wrapT!==Mr||F.minFilter!==ur&&F.minFilter!==dr)}(P)&&!1===C(P.image);let me=w(P.image,Qe,!1,d);me=Bn(P,me);const lt=C(me)||a,wt=s.convert(P.format,P.encoding);let ht,It=s.convert(P.type),it=V(P.internalFormat,wt,It,P.encoding,P.isVideoTexture);$e(Ae,P,lt);const An=P.mipmaps,ii=a&&!0!==P.isVideoTexture,Zi=void 0===Rt.__version||!0===Ie,H=A(P,me,lt);if(P.isDepthTexture)it=6402,a?it=P.type===Pu?36012:P.type===nh?33190:P.type===jp?35056:33189:P.type===Pu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),P.format===ih&&6402===it&&1012!==P.type&&P.type!==nh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),P.type=nh,It=s.convert(P.type)),P.format===qp&&6402===it&&(it=34041,P.type!==jp&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),P.type=jp,It=s.convert(P.type))),Zi&&(ii?t.texStorage2D(3553,1,it,me.width,me.height):t.texImage2D(3553,0,it,me.width,me.height,0,wt,It,null));else if(P.isDataTexture)if(An.length>0&&lt){ii&&Zi&&t.texStorage2D(3553,H,it,An[0].width,An[0].height);for(let pe=0,Te=An.length;pe<Te;pe++)ht=An[pe],ii?t.texSubImage2D(3553,pe,0,0,ht.width,ht.height,wt,It,ht.data):t.texImage2D(3553,pe,it,ht.width,ht.height,0,wt,It,ht.data);P.generateMipmaps=!1}else ii?(Zi&&t.texStorage2D(3553,H,it,me.width,me.height),t.texSubImage2D(3553,0,0,0,me.width,me.height,wt,It,me.data)):t.texImage2D(3553,0,it,me.width,me.height,0,wt,It,me.data);else if(P.isCompressedTexture)if(P.isCompressedArrayTexture){ii&&Zi&&t.texStorage3D(35866,H,it,An[0].width,An[0].height,me.depth);for(let pe=0,Te=An.length;pe<Te;pe++)ht=An[pe],P.format!==_a?null!==wt?ii?t.compressedTexSubImage3D(35866,pe,0,0,0,ht.width,ht.height,me.depth,wt,ht.data,0,0):t.compressedTexImage3D(35866,pe,it,ht.width,ht.height,me.depth,0,ht.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ii?t.texSubImage3D(35866,pe,0,0,0,ht.width,ht.height,me.depth,wt,It,ht.data):t.texImage3D(35866,pe,it,ht.width,ht.height,me.depth,0,wt,It,ht.data)}else{ii&&Zi&&t.texStorage2D(3553,H,it,An[0].width,An[0].height);for(let pe=0,Te=An.length;pe<Te;pe++)ht=An[pe],P.format!==_a?null!==wt?ii?t.compressedTexSubImage2D(3553,pe,0,0,ht.width,ht.height,wt,ht.data):t.compressedTexImage2D(3553,pe,it,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ii?t.texSubImage2D(3553,pe,0,0,ht.width,ht.height,wt,It,ht.data):t.texImage2D(3553,pe,it,ht.width,ht.height,0,wt,It,ht.data)}else if(P.isDataArrayTexture)ii?(Zi&&t.texStorage3D(35866,H,it,me.width,me.height,me.depth),t.texSubImage3D(35866,0,0,0,0,me.width,me.height,me.depth,wt,It,me.data)):t.texImage3D(35866,0,it,me.width,me.height,me.depth,0,wt,It,me.data);else if(P.isData3DTexture)ii?(Zi&&t.texStorage3D(32879,H,it,me.width,me.height,me.depth),t.texSubImage3D(32879,0,0,0,0,me.width,me.height,me.depth,wt,It,me.data)):t.texImage3D(32879,0,it,me.width,me.height,me.depth,0,wt,It,me.data);else if(P.isFramebufferTexture){if(Zi)if(ii)t.texStorage2D(3553,H,it,me.width,me.height);else{let pe=me.width,Te=me.height;for(let Ze=0;Ze<H;Ze++)t.texImage2D(3553,Ze,it,pe,Te,0,wt,It,null),pe>>=1,Te>>=1}}else if(An.length>0&&lt){ii&&Zi&&t.texStorage2D(3553,H,it,An[0].width,An[0].height);for(let pe=0,Te=An.length;pe<Te;pe++)ht=An[pe],ii?t.texSubImage2D(3553,pe,0,0,wt,It,ht):t.texImage2D(3553,pe,it,wt,It,ht);P.generateMipmaps=!1}else ii?(Zi&&t.texStorage2D(3553,H,it,me.width,me.height),t.texSubImage2D(3553,0,0,0,wt,It,me)):t.texImage2D(3553,0,it,wt,It,me);I(P,lt)&&N(Ae),Rt.__version=Ge.version,P.onUpdate&&P.onUpdate(P)}F.__version=P.version}function Re(F,P,se,Ae,Ie){const Ge=s.convert(se.format,se.encoding),Rt=s.convert(se.type),Qe=V(se.internalFormat,Ge,Rt,se.encoding);n.get(P).__hasExternalTextures||(32879===Ie||35866===Ie?t.texImage3D(Ie,0,Qe,P.width,P.height,P.depth,0,Ge,Rt,null):t.texImage2D(Ie,0,Qe,P.width,P.height,0,Ge,Rt,null)),t.bindFramebuffer(36160,F),xt(P)?p.framebufferTexture2DMultisampleEXT(36160,Ae,Ie,n.get(se).__webglTexture,0,Tt(P)):(3553===Ie||Ie>=34069&&Ie<=34074)&&i.framebufferTexture2D(36160,Ae,Ie,n.get(se).__webglTexture,0),t.bindFramebuffer(36160,null)}function st(F,P,se){if(i.bindRenderbuffer(36161,F),P.depthBuffer&&!P.stencilBuffer){let Ae=33189;if(se||xt(P)){const Ie=P.depthTexture;Ie&&Ie.isDepthTexture&&(Ie.type===Pu?Ae=36012:Ie.type===nh&&(Ae=33190));const Ge=Tt(P);xt(P)?p.renderbufferStorageMultisampleEXT(36161,Ge,Ae,P.width,P.height):i.renderbufferStorageMultisample(36161,Ge,Ae,P.width,P.height)}else i.renderbufferStorage(36161,Ae,P.width,P.height);i.framebufferRenderbuffer(36160,36096,36161,F)}else if(P.depthBuffer&&P.stencilBuffer){const Ae=Tt(P);se&&!1===xt(P)?i.renderbufferStorageMultisample(36161,Ae,35056,P.width,P.height):xt(P)?p.renderbufferStorageMultisampleEXT(36161,Ae,35056,P.width,P.height):i.renderbufferStorage(36161,34041,P.width,P.height),i.framebufferRenderbuffer(36160,33306,36161,F)}else{const Ae=!0===P.isWebGLMultipleRenderTargets?P.texture:[P.texture];for(let Ie=0;Ie<Ae.length;Ie++){const Ge=Ae[Ie],Rt=s.convert(Ge.format,Ge.encoding),Qe=s.convert(Ge.type),me=V(Ge.internalFormat,Rt,Qe,Ge.encoding),lt=Tt(P);se&&!1===xt(P)?i.renderbufferStorageMultisample(36161,lt,me,P.width,P.height):xt(P)?p.renderbufferStorageMultisampleEXT(36161,lt,me,P.width,P.height):i.renderbufferStorage(36161,me,P.width,P.height)}}i.bindRenderbuffer(36161,null)}function ge(F){const P=n.get(F),se=!0===F.isWebGLCubeRenderTarget;if(F.depthTexture&&!P.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");!function Ee(F,P){if(P&&P.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,F),!P.depthTexture||!P.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(P.depthTexture).__webglTexture||P.depthTexture.image.width!==P.width||P.depthTexture.image.height!==P.height)&&(P.depthTexture.image.width=P.width,P.depthTexture.image.height=P.height,P.depthTexture.needsUpdate=!0),we(P.depthTexture,0);const Ae=n.get(P.depthTexture).__webglTexture,Ie=Tt(P);if(P.depthTexture.format===ih)xt(P)?p.framebufferTexture2DMultisampleEXT(36160,36096,3553,Ae,0,Ie):i.framebufferTexture2D(36160,36096,3553,Ae,0);else{if(P.depthTexture.format!==qp)throw new Error("Unknown depthTexture format");xt(P)?p.framebufferTexture2DMultisampleEXT(36160,33306,3553,Ae,0,Ie):i.framebufferTexture2D(36160,33306,3553,Ae,0)}}(P.__webglFramebuffer,F)}else if(se){P.__webglDepthbuffer=[];for(let Ae=0;Ae<6;Ae++)t.bindFramebuffer(36160,P.__webglFramebuffer[Ae]),P.__webglDepthbuffer[Ae]=i.createRenderbuffer(),st(P.__webglDepthbuffer[Ae],F,!1)}else t.bindFramebuffer(36160,P.__webglFramebuffer),P.__webglDepthbuffer=i.createRenderbuffer(),st(P.__webglDepthbuffer,F,!1);t.bindFramebuffer(36160,null)}function Tt(F){return Math.min(f,F.samples)}function xt(F){const P=n.get(F);return a&&F.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==P.__useRenderToTexture}function Bn(F,P){const se=F.encoding,Ae=F.format,Ie=F.type;return!0===F.isCompressedTexture||!0===F.isVideoTexture||1035===F.format||se!==rh&&(se===ti?!1===a?!0===e.has("EXT_sRGB")&&Ae===_a?(F.format=1035,F.minFilter=dr,F.generateMipmaps=!1):P=SV.sRGBToLinear(P):(Ae!==_a||Ie!==th)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",se)),P}this.allocateTextureUnit=function Y(){const F=q;return F>=l&&console.warn("THREE.WebGLTextures: Trying to use "+F+" texture units while this GPU supports only "+l),q+=1,F},this.resetTextureUnits=function Q(){q=0},this.setTexture2D=we,this.setTexture2DArray=function qe(F,P){const se=n.get(F);F.version>0&&se.__version!==F.version?dt(se,F,P):t.bindTexture(35866,se.__webglTexture,33984+P)},this.setTexture3D=function ke(F,P){const se=n.get(F);F.version>0&&se.__version!==F.version?dt(se,F,P):t.bindTexture(32879,se.__webglTexture,33984+P)},this.setTextureCube=function oe(F,P){const se=n.get(F);F.version>0&&se.__version!==F.version?function rt(F,P,se){if(6!==P.image.length)return;const Ae=Z(F,P),Ie=P.source;t.bindTexture(34067,F.__webglTexture,33984+se);const Ge=n.get(Ie);if(Ie.version!==Ge.__version||!0===Ae){t.activeTexture(33984+se),i.pixelStorei(37440,P.flipY),i.pixelStorei(37441,P.premultiplyAlpha),i.pixelStorei(3317,P.unpackAlignment),i.pixelStorei(37443,0);const Rt=P.isCompressedTexture||P.image[0].isCompressedTexture,Qe=P.image[0]&&P.image[0].isDataTexture,me=[];for(let pe=0;pe<6;pe++)me[pe]=Rt||Qe?Qe?P.image[pe].image:P.image[pe]:w(P.image[pe],!1,!0,c),me[pe]=Bn(P,me[pe]);const lt=me[0],wt=C(lt)||a,It=s.convert(P.format,P.encoding),it=s.convert(P.type),ht=V(P.internalFormat,It,it,P.encoding),An=a&&!0!==P.isVideoTexture,ii=void 0===Ge.__version||!0===Ae;let H,Zi=A(P,lt,wt);if($e(34067,P,wt),Rt){An&&ii&&t.texStorage2D(34067,Zi,ht,lt.width,lt.height);for(let pe=0;pe<6;pe++){H=me[pe].mipmaps;for(let Te=0;Te<H.length;Te++){const Ze=H[Te];P.format!==_a?null!==It?An?t.compressedTexSubImage2D(34069+pe,Te,0,0,Ze.width,Ze.height,It,Ze.data):t.compressedTexImage2D(34069+pe,Te,ht,Ze.width,Ze.height,0,Ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):An?t.texSubImage2D(34069+pe,Te,0,0,Ze.width,Ze.height,It,it,Ze.data):t.texImage2D(34069+pe,Te,ht,Ze.width,Ze.height,0,It,it,Ze.data)}}}else{H=P.mipmaps,An&&ii&&(H.length>0&&Zi++,t.texStorage2D(34067,Zi,ht,me[0].width,me[0].height));for(let pe=0;pe<6;pe++)if(Qe){An?t.texSubImage2D(34069+pe,0,0,0,me[pe].width,me[pe].height,It,it,me[pe].data):t.texImage2D(34069+pe,0,ht,me[pe].width,me[pe].height,0,It,it,me[pe].data);for(let Te=0;Te<H.length;Te++){const ft=H[Te].image[pe].image;An?t.texSubImage2D(34069+pe,Te+1,0,0,ft.width,ft.height,It,it,ft.data):t.texImage2D(34069+pe,Te+1,ht,ft.width,ft.height,0,It,it,ft.data)}}else{An?t.texSubImage2D(34069+pe,0,0,0,It,it,me[pe]):t.texImage2D(34069+pe,0,ht,It,it,me[pe]);for(let Te=0;Te<H.length;Te++){const Ze=H[Te];An?t.texSubImage2D(34069+pe,Te+1,0,0,It,it,Ze.image[pe]):t.texImage2D(34069+pe,Te+1,ht,It,it,Ze.image[pe])}}}I(P,wt)&&N(34067),Ge.__version=Ie.version,P.onUpdate&&P.onUpdate(P)}F.__version=P.version}(se,F,P):t.bindTexture(34067,se.__webglTexture,33984+P)},this.rebindTextures=function De(F,P,se){const Ae=n.get(F);void 0!==P&&Re(Ae.__webglFramebuffer,F,F.texture,36064,3553),void 0!==se&&ge(F)},this.setupRenderTarget=function nt(F){const P=F.texture,se=n.get(F),Ae=n.get(P);F.addEventListener("dispose",le),!0!==F.isWebGLMultipleRenderTargets&&(void 0===Ae.__webglTexture&&(Ae.__webglTexture=i.createTexture()),Ae.__version=P.version,o.memory.textures++);const Ie=!0===F.isWebGLCubeRenderTarget,Ge=!0===F.isWebGLMultipleRenderTargets,Rt=C(F)||a;if(Ie){se.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)se.__webglFramebuffer[Qe]=i.createFramebuffer()}else{if(se.__webglFramebuffer=i.createFramebuffer(),Ge)if(r.drawBuffers){const Qe=F.texture;for(let me=0,lt=Qe.length;me<lt;me++){const wt=n.get(Qe[me]);void 0===wt.__webglTexture&&(wt.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&F.samples>0&&!1===xt(F)){const Qe=Ge?P:[P];se.__webglMultisampledFramebuffer=i.createFramebuffer(),se.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,se.__webglMultisampledFramebuffer);for(let me=0;me<Qe.length;me++){const lt=Qe[me];se.__webglColorRenderbuffer[me]=i.createRenderbuffer(),i.bindRenderbuffer(36161,se.__webglColorRenderbuffer[me]);const wt=s.convert(lt.format,lt.encoding),It=s.convert(lt.type),it=V(lt.internalFormat,wt,It,lt.encoding,!0===F.isXRRenderTarget),ht=Tt(F);i.renderbufferStorageMultisample(36161,ht,it,F.width,F.height),i.framebufferRenderbuffer(36160,36064+me,36161,se.__webglColorRenderbuffer[me])}i.bindRenderbuffer(36161,null),F.depthBuffer&&(se.__webglDepthRenderbuffer=i.createRenderbuffer(),st(se.__webglDepthRenderbuffer,F,!0)),t.bindFramebuffer(36160,null)}}if(Ie){t.bindTexture(34067,Ae.__webglTexture),$e(34067,P,Rt);for(let Qe=0;Qe<6;Qe++)Re(se.__webglFramebuffer[Qe],F,P,36064,34069+Qe);I(P,Rt)&&N(34067),t.unbindTexture()}else if(Ge){const Qe=F.texture;for(let me=0,lt=Qe.length;me<lt;me++){const wt=Qe[me],It=n.get(wt);t.bindTexture(3553,It.__webglTexture),$e(3553,wt,Rt),Re(se.__webglFramebuffer,F,wt,36064+me,3553),I(wt,Rt)&&N(3553)}t.unbindTexture()}else{let Qe=3553;(F.isWebGL3DRenderTarget||F.isWebGLArrayRenderTarget)&&(a?Qe=F.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Qe,Ae.__webglTexture),$e(Qe,P,Rt),Re(se.__webglFramebuffer,F,P,36064,Qe),I(P,Rt)&&N(Qe),t.unbindTexture()}F.depthBuffer&&ge(F)},this.updateRenderTargetMipmap=function ze(F){const P=C(F)||a,se=!0===F.isWebGLMultipleRenderTargets?F.texture:[F.texture];for(let Ae=0,Ie=se.length;Ae<Ie;Ae++){const Ge=se[Ae];if(I(Ge,P)){const Rt=F.isWebGLCubeRenderTarget?34067:3553,Qe=n.get(Ge).__webglTexture;t.bindTexture(Rt,Qe),N(Rt),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function At(F){if(a&&F.samples>0&&!1===xt(F)){const P=F.isWebGLMultipleRenderTargets?F.texture:[F.texture],se=F.width,Ae=F.height;let Ie=16384;const Ge=[],Rt=F.stencilBuffer?33306:36096,Qe=n.get(F),me=!0===F.isWebGLMultipleRenderTargets;if(me)for(let lt=0;lt<P.length;lt++)t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+lt,36161,null),t.bindFramebuffer(36160,Qe.__webglFramebuffer),i.framebufferTexture2D(36009,36064+lt,3553,null,0);t.bindFramebuffer(36008,Qe.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,Qe.__webglFramebuffer);for(let lt=0;lt<P.length;lt++){Ge.push(36064+lt),F.depthBuffer&&Ge.push(Rt);const wt=void 0!==Qe.__ignoreDepthValues&&Qe.__ignoreDepthValues;if(!1===wt&&(F.depthBuffer&&(Ie|=256),F.stencilBuffer&&(Ie|=1024)),me&&i.framebufferRenderbuffer(36008,36064,36161,Qe.__webglColorRenderbuffer[lt]),!0===wt&&(i.invalidateFramebuffer(36008,[Rt]),i.invalidateFramebuffer(36009,[Rt])),me){const It=n.get(P[lt]).__webglTexture;i.framebufferTexture2D(36009,36064,3553,It,0)}i.blitFramebuffer(0,0,se,Ae,0,0,se,Ae,Ie,9728),m&&i.invalidateFramebuffer(36008,Ge)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),me)for(let lt=0;lt<P.length;lt++){t.bindFramebuffer(36160,Qe.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(36160,36064+lt,36161,Qe.__webglColorRenderbuffer[lt]);const wt=n.get(P[lt]).__webglTexture;t.bindFramebuffer(36160,Qe.__webglFramebuffer),i.framebufferTexture2D(36009,36064+lt,3553,wt,0)}t.bindFramebuffer(36009,Qe.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ge,this.setupFrameBufferTexture=Re,this.useMultisampledRTT=xt}function ose(i,e,t){const n=t.isWebGL2;return{convert:function r(s,o=null){let a;if(s===th)return 5121;if(1017===s)return 32819;if(1018===s)return 32820;if(1010===s)return 5120;if(1011===s)return 5122;if(1012===s)return 5123;if(1013===s)return 5124;if(s===nh)return 5125;if(s===Pu)return 5126;if(s===qv)return n?5131:(a=e.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===s)return 6406;if(s===_a)return 6408;if(1024===s)return 6409;if(1025===s)return 6410;if(s===ih)return 6402;if(s===qp)return 34041;if(1035===s)return a=e.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===s)return 6403;if(1029===s)return 36244;if(1030===s)return 33319;if(1031===s)return 33320;if(1033===s)return 36249;if(33776===s||33777===s||33778===s||33779===s)if(o===ti){if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(33776===s)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=e.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(33776===s)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===s)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===s)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===s)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===s||35841===s||35842===s||35843===s){if(a=e.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(35840===s)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===s)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===s)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===s)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===s)return a=e.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===s||37496===s){if(a=e.get("WEBGL_compressed_texture_etc"),null===a)return null;if(37492===s)return o===ti?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(37496===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(37808===s||37809===s||37810===s||37811===s||37812===s||37813===s||37814===s||37815===s||37816===s||37817===s||37818===s||37819===s||37820===s||37821===s){if(a=e.get("WEBGL_compressed_texture_astc"),null===a)return null;if(37808===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===s)return o===ti?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===s){if(a=e.get("EXT_texture_compression_bptc"),null===a)return null;if(36492===s)return o===ti?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===s||36284===s||36285===s||36286===s){if(a=e.get("EXT_texture_compression_rgtc"),null===a)return null;if(36492===s)return a.COMPRESSED_RED_RGTC1_EXT;if(36284===s)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===s)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===s)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===jp?n?34042:(a=e.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class ase extends Cr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Uu extends ks{constructor(){super(),this.isGroup=!0,this.type="Group"}}const lse={type:"move"};class FI{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Uu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Uu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new O,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new O),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Uu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new O,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new O),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const y=t.getJointPose(b,n),v=this._getHandJoint(c,b);null!==y&&(v.matrix.fromArray(y.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=y.radius),v.visible=null!==y}const p=c.joints["index-finger-tip"].position.distanceTo(c.joints["thumb-tip"].position),m=.02,_=.005;c.inputState.pinching&&p>m+_?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-_&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==l&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(lse)))}return null!==a&&(a.visible=null!==r),null!==l&&(l.visible=null!==s),null!==c&&(c.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Uu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class cse extends ku{constructor(e,t,n,r,s,o,a,l,c,d){if((d=void 0!==d?d:ih)!==ih&&d!==qp)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&d===ih&&(n=nh),void 0===n&&d===qp&&(n=jp),super(null,r,s,o,a,l,d,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:ur,this.minFilter=void 0!==l?l:ur,this.flipY=!1,this.generateMipmaps=!1}}class use extends Zp{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,_=null;const b=t.getContextAttributes();let y=null,v=null;const M=[],w=[],C=new Set,D=new Map,I=new Cr;I.layers.enable(1),I.viewport=new ni;const N=new Cr;N.layers.enable(2),N.viewport=new ni;const V=[I,N],A=new ase;A.layers.enable(1),A.layers.enable(2);let k=null,ee=null;function le(oe){const de=w.indexOf(oe.inputSource);if(-1===de)return;const Ne=M[de];void 0!==Ne&&Ne.dispatchEvent({type:oe.type,data:oe.inputSource})}function $(){r.removeEventListener("select",le),r.removeEventListener("selectstart",le),r.removeEventListener("selectend",le),r.removeEventListener("squeeze",le),r.removeEventListener("squeezestart",le),r.removeEventListener("squeezeend",le),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",X);for(let oe=0;oe<M.length;oe++){const de=w[oe];null!==de&&(w[oe]=null,M[oe].disconnect(de))}k=null,ee=null,e.setRenderTarget(y),m=null,p=null,f=null,r=null,v=null,ke.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function X(oe){for(let de=0;de<oe.removed.length;de++){const Ne=oe.removed[de],$e=w.indexOf(Ne);$e>=0&&(w[$e]=null,M[$e].disconnect(Ne))}for(let de=0;de<oe.added.length;de++){const Ne=oe.added[de];let $e=w.indexOf(Ne);if(-1===$e){for(let dt=0;dt<M.length;dt++){if(dt>=w.length){w.push(Ne),$e=dt;break}if(null===w[dt]){w[dt]=Ne,$e=dt;break}}if(-1===$e)break}const Z=M[$e];Z&&Z.connect(Ne)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let de=M[oe];return void 0===de&&(de=new FI,M[oe]=de),de.getTargetRaySpace()},this.getControllerGrip=function(oe){let de=M[oe];return void 0===de&&(de=new FI,M[oe]=de),de.getGripSpace()},this.getHand=function(oe){let de=M[oe];return void 0===de&&(de=new FI,M[oe]=de),de.getHandSpace()},this.setFramebufferScaleFactor=function(oe){s=oe,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(oe){c=oe},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return f},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=function(){var oe=ei(function*(de){if(r=de,null!==r){if(y=e.getRenderTarget(),r.addEventListener("select",le),r.addEventListener("selectstart",le),r.addEventListener("selectend",le),r.addEventListener("squeeze",le),r.addEventListener("squeezestart",le),r.addEventListener("squeezeend",le),r.addEventListener("end",$),r.addEventListener("inputsourceschange",X),!0!==b.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)m=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||b.antialias,alpha:b.alpha,depth:b.depth,stencil:b.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:m}),v=new ah(m.framebufferWidth,m.framebufferHeight,{format:_a,type:th,encoding:e.outputEncoding,stencilBuffer:b.stencil});else{let Ne=null,$e=null,Z=null;b.depth&&(Z=b.stencil?35056:33190,Ne=b.stencil?qp:ih,$e=b.stencil?jp:nh);const dt={colorFormat:32856,depthFormat:Z,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(dt),r.updateRenderState({layers:[p]}),v=new ah(p.textureWidth,p.textureHeight,{format:_a,type:th,depthTexture:new cse(p.textureWidth,p.textureHeight,$e,void 0,void 0,void 0,void 0,void 0,void 0,Ne),stencilBuffer:b.stencil,encoding:e.outputEncoding,samples:b.antialias?4:0}),e.properties.get(v).__ignoreDepthValues=p.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=yield r.requestReferenceSpace(a),ke.setContext(r),ke.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(de){return oe.apply(this,arguments)}}();const re=new O,q=new O;function Y(oe,de){null===de?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(de.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(null===r)return;A.near=N.near=I.near=oe.near,A.far=N.far=I.far=oe.far,(k!==A.near||ee!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),k=A.near,ee=A.far);const de=oe.parent,Ne=A.cameras;Y(A,de);for(let $e=0;$e<Ne.length;$e++)Y(Ne[$e],de);2===Ne.length?function Q(oe,de,Ne){re.setFromMatrixPosition(de.matrixWorld),q.setFromMatrixPosition(Ne.matrixWorld);const $e=re.distanceTo(q),Z=de.projectionMatrix.elements,dt=Ne.projectionMatrix.elements,rt=Z[14]/(Z[10]-1),Re=Z[14]/(Z[10]+1),st=(Z[9]+1)/Z[5],Ee=(Z[9]-1)/Z[5],ge=(Z[8]-1)/Z[0],De=(dt[8]+1)/dt[0],nt=rt*ge,ze=rt*De,At=$e/(-ge+De),Tt=At*-ge;de.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(Tt),oe.translateZ(At),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const xt=rt+At,hn=Re+At;oe.projectionMatrix.makePerspective(nt-Tt,ze+($e-Tt),st*Re/hn*xt,Ee*Re/hn*xt,xt,hn),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}(A,I,N):A.projectionMatrix.copy(I.projectionMatrix),function ae(oe,de,Ne){null===Ne?oe.matrix.copy(de.matrixWorld):(oe.matrix.copy(Ne.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(de.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0);const $e=oe.children;for(let Z=0,dt=$e.length;Z<dt;Z++)$e[Z].updateMatrixWorld(!0);oe.projectionMatrix.copy(de.projectionMatrix),oe.projectionMatrixInverse.copy(de.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=2*Kp*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}(oe,A,de)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==p||null!==m)return l},this.setFoveation=function(oe){l=oe,null!==p&&(p.fixedFoveation=oe),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=oe)},this.getPlanes=function(){return C};let we=null;const ke=new $V;ke.setAnimationLoop(function qe(oe,de){if(d=de.getViewerPose(c||o),_=de,null!==d){const Ne=d.views;null!==m&&(e.setRenderTargetFramebuffer(v,m.framebuffer),e.setRenderTarget(v));let $e=!1;Ne.length!==A.cameras.length&&(A.cameras.length=0,$e=!0);for(let Z=0;Z<Ne.length;Z++){const dt=Ne[Z];let rt=null;if(null!==m)rt=m.getViewport(dt);else{const st=f.getViewSubImage(p,dt);rt=st.viewport,0===Z&&(e.setRenderTargetTextures(v,st.colorTexture,p.ignoreDepthValues?void 0:st.depthStencilTexture),e.setRenderTarget(v))}let Re=V[Z];void 0===Re&&(Re=new Cr,Re.layers.enable(Z),Re.viewport=new ni,V[Z]=Re),Re.matrix.fromArray(dt.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(dt.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(rt.x,rt.y,rt.width,rt.height),0===Z&&(A.matrix.copy(Re.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===$e&&A.cameras.push(Re)}}for(let Ne=0;Ne<M.length;Ne++){const $e=w[Ne],Z=M[Ne];null!==$e&&void 0!==Z&&Z.update($e,de,c||o)}if(we&&we(oe,de),de.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:de.detectedPlanes});let Ne=null;for(const $e of C)de.detectedPlanes.has($e)||(null===Ne&&(Ne=[]),Ne.push($e));if(null!==Ne)for(const $e of Ne)C.delete($e),D.delete($e),n.dispatchEvent({type:"planeremoved",data:$e});for(const $e of de.detectedPlanes)if(C.has($e)){const Z=D.get($e);$e.lastChangedTime>Z&&(D.set($e,$e.lastChangedTime),n.dispatchEvent({type:"planechanged",data:$e}))}else C.add($e),D.set($e,de.lastChangedTime),n.dispatchEvent({type:"planeadded",data:$e})}_=null}),this.setAnimationLoop=function(oe){we=oe},this.dispose=function(){}}}function dse(i,e){function t(y,v){!0===y.matrixAutoUpdate&&y.updateMatrix(),v.value.copy(y.matrix)}function s(y,v){y.opacity.value=v.opacity,v.color&&y.diffuse.value.copy(v.color),v.emissive&&y.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap,t(v.alphaMap,y.alphaMapTransform)),v.bumpMap&&(y.bumpMap.value=v.bumpMap,t(v.bumpMap,y.bumpMapTransform),y.bumpScale.value=v.bumpScale,1===v.side&&(y.bumpScale.value*=-1)),v.normalMap&&(y.normalMap.value=v.normalMap,t(v.normalMap,y.normalMapTransform),y.normalScale.value.copy(v.normalScale),1===v.side&&y.normalScale.value.negate()),v.displacementMap&&(y.displacementMap.value=v.displacementMap,t(v.displacementMap,y.displacementMapTransform),y.displacementScale.value=v.displacementScale,y.displacementBias.value=v.displacementBias),v.emissiveMap&&(y.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,y.emissiveMapTransform)),v.specularMap&&(y.specularMap.value=v.specularMap,t(v.specularMap,y.specularMapTransform)),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest);const M=e.get(v).envMap;if(M&&(y.envMap.value=M,y.flipEnvMap.value=M.isCubeTexture&&!1===M.isRenderTargetTexture?-1:1,y.reflectivity.value=v.reflectivity,y.ior.value=v.ior,y.refractionRatio.value=v.refractionRatio),v.lightMap){y.lightMap.value=v.lightMap;const w=!0===i.useLegacyLights?Math.PI:1;y.lightMapIntensity.value=v.lightMapIntensity*w,t(v.lightMap,y.lightMapTransform)}v.aoMap&&(y.aoMap.value=v.aoMap,y.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,y.aoMapTransform))}return{refreshFogUniforms:function n(y,v){v.color.getRGB(y.fogColor.value,WV(i)),v.isFog?(y.fogNear.value=v.near,y.fogFar.value=v.far):v.isFogExp2&&(y.fogDensity.value=v.density)},refreshMaterialUniforms:function r(y,v,M,w,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(y,v):v.isMeshToonMaterial?(s(y,v),function f(y,v){v.gradientMap&&(y.gradientMap.value=v.gradientMap)}(y,v)):v.isMeshPhongMaterial?(s(y,v),function d(y,v){y.specular.value.copy(v.specular),y.shininess.value=Math.max(v.shininess,1e-4)}(y,v)):v.isMeshStandardMaterial?(s(y,v),function p(y,v){y.metalness.value=v.metalness,v.metalnessMap&&(y.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,y.metalnessMapTransform)),y.roughness.value=v.roughness,v.roughnessMap&&(y.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,y.roughnessMapTransform)),e.get(v).envMap&&(y.envMapIntensity.value=v.envMapIntensity)}(y,v),v.isMeshPhysicalMaterial&&function m(y,v,M){y.ior.value=v.ior,v.sheen>0&&(y.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),y.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(y.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,y.sheenColorMapTransform)),v.sheenRoughnessMap&&(y.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,y.sheenRoughnessMapTransform))),v.clearcoat>0&&(y.clearcoat.value=v.clearcoat,y.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(y.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,y.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,y.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(y.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,y.clearcoatNormalMapTransform),y.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),1===v.side&&y.clearcoatNormalScale.value.negate())),v.iridescence>0&&(y.iridescence.value=v.iridescence,y.iridescenceIOR.value=v.iridescenceIOR,y.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(y.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,y.iridescenceMapTransform)),v.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,y.iridescenceThicknessMapTransform))),v.transmission>0&&(y.transmission.value=v.transmission,y.transmissionSamplerMap.value=M.texture,y.transmissionSamplerSize.value.set(M.width,M.height),v.transmissionMap&&(y.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,y.transmissionMapTransform)),y.thickness.value=v.thickness,v.thicknessMap&&(y.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,y.thicknessMapTransform)),y.attenuationDistance.value=v.attenuationDistance,y.attenuationColor.value.copy(v.attenuationColor)),y.specularIntensity.value=v.specularIntensity,y.specularColor.value.copy(v.specularColor),v.specularColorMap&&(y.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,y.specularColorMapTransform)),v.specularIntensityMap&&(y.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,y.specularIntensityMapTransform))}(y,v,C)):v.isMeshMatcapMaterial?(s(y,v),function _(y,v){v.matcap&&(y.matcap.value=v.matcap)}(y,v)):v.isMeshDepthMaterial?s(y,v):v.isMeshDistanceMaterial?(s(y,v),function b(y,v){const M=e.get(v).light;y.referencePosition.value.setFromMatrixPosition(M.matrixWorld),y.nearDistance.value=M.shadow.camera.near,y.farDistance.value=M.shadow.camera.far}(y,v)):v.isMeshNormalMaterial?s(y,v):v.isLineBasicMaterial?(function o(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform))}(y,v),v.isLineDashedMaterial&&function a(y,v){y.dashSize.value=v.dashSize,y.totalSize.value=v.dashSize+v.gapSize,y.scale.value=v.scale}(y,v)):v.isPointsMaterial?function l(y,v,M,w){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.size.value=v.size*M,y.scale.value=.5*w,v.map&&(y.map.value=v.map,t(v.map,y.uvTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v,M,w):v.isSpriteMaterial?function c(y,v){y.diffuse.value.copy(v.color),y.opacity.value=v.opacity,y.rotation.value=v.rotation,v.map&&(y.map.value=v.map,t(v.map,y.mapTransform)),v.alphaMap&&(y.alphaMap.value=v.alphaMap),v.alphaTest>0&&(y.alphaTest.value=v.alphaTest)}(y,v):v.isShadowMaterial?(y.color.value.copy(v.color),y.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}}}function hse(i,e,t,n){let r={},s={},o=[];const a=t.isWebGL2?i.getParameter(35375):0;function m(M,w,C){const D=M.value;if(void 0===C[w]){if("number"==typeof D)C[w]=D;else{const I=Array.isArray(D)?D:[D],N=[];for(let V=0;V<I.length;V++)N.push(I[V].clone());C[w]=N}return!0}if("number"==typeof D){if(C[w]!==D)return C[w]=D,!0}else{const I=Array.isArray(C[w])?C[w]:[C[w]],N=Array.isArray(D)?D:[D];for(let V=0;V<I.length;V++){const A=I[V];if(!1===A.equals(N[V]))return A.copy(N[V]),!0}}return!1}function b(M){const w={boundary:0,storage:0};return"number"==typeof M?(w.boundary=4,w.storage=4):M.isVector2?(w.boundary=8,w.storage=8):M.isVector3||M.isColor?(w.boundary=16,w.storage=12):M.isVector4?(w.boundary=16,w.storage=16):M.isMatrix3?(w.boundary=48,w.storage=48):M.isMatrix4?(w.boundary=64,w.storage=64):M.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",M),w}function y(M){const w=M.target;w.removeEventListener("dispose",y);const C=o.indexOf(w.__bindingPointIndex);o.splice(C,1),i.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}return{bind:function l(M,w){n.uniformBlockBinding(M,w.program)},update:function c(M,w){let C=r[M.id];void 0===C&&(function _(M){const w=M.uniforms;let C=0;let I=0;for(let N=0,V=w.length;N<V;N++){const A=w[N],k={boundary:0,storage:0},ee=Array.isArray(A.value)?A.value:[A.value];for(let le=0,$=ee.length;le<$;le++){const re=b(ee[le]);k.boundary+=re.boundary,k.storage+=re.storage}if(A.__data=new Float32Array(k.storage/Float32Array.BYTES_PER_ELEMENT),A.__offset=C,N>0){I=C%16;const le=16-I;0!==I&&le-k.boundary<0&&(C+=16-I,A.__offset=C)}C+=k.storage}I=C%16,I>0&&(C+=16-I),M.__size=C,M.__cache={}}(M),C=function d(M){const w=function f(){for(let M=0;M<a;M++)if(-1===o.indexOf(M))return o.push(M),M;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();M.__bindingPointIndex=w;const C=i.createBuffer(),D=M.__size,I=M.usage;return i.bindBuffer(35345,C),i.bufferData(35345,D,I),i.bindBuffer(35345,null),i.bindBufferBase(35345,w,C),C}(M),r[M.id]=C,M.addEventListener("dispose",y)),n.updateUBOMapping(M,w.program);const I=e.render.frame;s[M.id]!==I&&(function p(M){const C=M.uniforms,D=M.__cache;i.bindBuffer(35345,r[M.id]);for(let I=0,N=C.length;I<N;I++){const V=C[I];if(!0===m(V,I,D)){const A=V.__offset,k=Array.isArray(V.value)?V.value:[V.value];let ee=0;for(let le=0;le<k.length;le++){const $=k[le],X=b($);"number"==typeof $?(V.__data[0]=$,i.bufferSubData(35345,A+ee,V.__data)):$.isMatrix3?(V.__data[0]=$.elements[0],V.__data[1]=$.elements[1],V.__data[2]=$.elements[2],V.__data[3]=$.elements[0],V.__data[4]=$.elements[3],V.__data[5]=$.elements[4],V.__data[6]=$.elements[5],V.__data[7]=$.elements[0],V.__data[8]=$.elements[6],V.__data[9]=$.elements[7],V.__data[10]=$.elements[8],V.__data[11]=$.elements[0]):($.toArray(V.__data,ee),ee+=X.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(35345,A,V.__data)}}i.bindBuffer(35345,null)}(M),s[M.id]=I)},dispose:function v(){for(const M in r)i.deleteBuffer(r[M]);o=[],r={},s={}}}}function fse(){const i=Zv("canvas");return i.style.display="block",i}class NI{constructor(e={}){const{canvas:t=fse(),context:n=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;let p;this.isWebGLRenderer=!0,p=null!==n?n.getContextAttributes().alpha:o;let m=null,_=null;const b=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=rh,this.useLegacyLights=!0,this.toneMapping=0,this.toneMappingExposure=1;const v=this;let M=!1,w=0,C=0,D=null,I=-1,N=null;const V=new ni,A=new ni;let k=null,ee=t.width,le=t.height,$=1,X=null,re=null;const q=new ni(0,0,ee,le),Q=new ni(0,0,ee,le);let Y=!1;const ae=new TI;let we=!1,qe=!1,ke=null;const oe=new tn,de=new O,Ne={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function $e(){return null===D?$:1}let rt,Re,st,Ee,ge,De,nt,ze,At,Tt,xt,hn,Bn,F,P,se,Ae,Ie,Ge,Rt,Qe,me,lt,wt,Z=n;function dt(L,J){for(let fe=0;fe<L.length;fe++){const ye=t.getContext(L[fe],J);if(null!==ye)return ye}return null}try{const L={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r151"),t.addEventListener("webglcontextlost",ht,!1),t.addEventListener("webglcontextrestored",An,!1),t.addEventListener("webglcontextcreationerror",ii,!1),null===Z){const J=["webgl2","webgl","experimental-webgl"];if(!0===v.isWebGL1Renderer&&J.shift(),Z=dt(J,L),null===Z)throw dt(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Z.getShaderPrecisionFormat&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(L){throw console.error("THREE.WebGLRenderer: "+L.message),L}function It(){rt=new Eie(Z),Re=new bie(Z,rt,e),rt.init(Re),me=new ose(Z,rt,Re),st=new rse(Z,rt,Re),Ee=new Tie,ge=new jre,De=new sse(Z,rt,st,ge,Re,me,Ee),nt=new wie(v),ze=new Sie(v),At=new xte(Z,Re),lt=new vie(Z,rt,At,Re),Tt=new Die(Z,At,Ee,lt),xt=new kie(Z,Tt,At,Ee),Ge=new Pie(Z,Re,De),se=new xie(ge),hn=new $re(v,nt,ze,rt,Re,lt,se),Bn=new dse(v,ge),F=new Xre,P=new ese(rt,Re),Ie=new _ie(v,nt,ze,st,xt,p,l),Ae=new ise(v,xt,Re),wt=new hse(Z,Ee,Re,st),Rt=new yie(Z,rt,Ee,Re),Qe=new Aie(Z,rt,Ee,Re),Ee.programs=hn.programs,v.capabilities=Re,v.extensions=rt,v.properties=ge,v.renderLists=F,v.shadowMap=Ae,v.state=st,v.info=Ee}It();const it=new use(v,Z);function ht(L){L.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),M=!0}function An(){console.log("THREE.WebGLRenderer: Context Restored."),M=!1;const L=Ee.autoReset,J=Ae.enabled,fe=Ae.autoUpdate,K=Ae.needsUpdate,ye=Ae.type;It(),Ee.autoReset=L,Ae.enabled=J,Ae.autoUpdate=fe,Ae.needsUpdate=K,Ae.type=ye}function ii(L){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function Zi(L){const J=L.target;J.removeEventListener("dispose",Zi),function H(L){(function pe(L){const J=ge.get(L).programs;void 0!==J&&(J.forEach(function(fe){hn.releaseProgram(fe)}),L.isShaderMaterial&&hn.releaseShaderCache(L))})(L),ge.remove(L)}(J)}this.xr=it,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const L=rt.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){const L=rt.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return $},this.setPixelRatio=function(L){void 0!==L&&($=L,this.setSize(ee,le,!1))},this.getSize=function(L){return L.set(ee,le)},this.setSize=function(L,J,fe=!0){it.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ee=L,le=J,t.width=Math.floor(L*$),t.height=Math.floor(J*$),!0===fe&&(t.style.width=L+"px",t.style.height=J+"px"),this.setViewport(0,0,L,J))},this.getDrawingBufferSize=function(L){return L.set(ee*$,le*$).floor()},this.setDrawingBufferSize=function(L,J,fe){ee=L,le=J,$=fe,t.width=Math.floor(L*fe),t.height=Math.floor(J*fe),this.setViewport(0,0,L,J)},this.getCurrentViewport=function(L){return L.copy(V)},this.getViewport=function(L){return L.copy(q)},this.setViewport=function(L,J,fe,K){L.isVector4?q.set(L.x,L.y,L.z,L.w):q.set(L,J,fe,K),st.viewport(V.copy(q).multiplyScalar($).floor())},this.getScissor=function(L){return L.copy(Q)},this.setScissor=function(L,J,fe,K){L.isVector4?Q.set(L.x,L.y,L.z,L.w):Q.set(L,J,fe,K),st.scissor(A.copy(Q).multiplyScalar($).floor())},this.getScissorTest=function(){return Y},this.setScissorTest=function(L){st.setScissorTest(Y=L)},this.setOpaqueSort=function(L){X=L},this.setTransparentSort=function(L){re=L},this.getClearColor=function(L){return L.copy(Ie.getClearColor())},this.setClearColor=function(){Ie.setClearColor.apply(Ie,arguments)},this.getClearAlpha=function(){return Ie.getClearAlpha()},this.setClearAlpha=function(){Ie.setClearAlpha.apply(Ie,arguments)},this.clear=function(L=!0,J=!0,fe=!0){let K=0;L&&(K|=16384),J&&(K|=256),fe&&(K|=1024),Z.clear(K)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ht,!1),t.removeEventListener("webglcontextrestored",An,!1),t.removeEventListener("webglcontextcreationerror",ii,!1),F.dispose(),P.dispose(),ge.dispose(),nt.dispose(),ze.dispose(),xt.dispose(),lt.dispose(),wt.dispose(),hn.dispose(),it.dispose(),it.removeEventListener("sessionstart",ft),it.removeEventListener("sessionend",yi),ke&&(ke.dispose(),ke=null),Li.stop()},this.renderBufferDirect=function(L,J,fe,K,ye,Mt){null===J&&(J=Ne);const Bt=ye.isMesh&&ye.matrixWorld.determinant()<0,qt=function bue(L,J,fe,K,ye){!0!==J.isScene&&(J=Ne),De.resetTextureUnits();const Mt=J.fog,qt=null===D?v.outputEncoding:!0===D.isXRRenderTarget?D.texture.encoding:rh,cn=(K.isMeshStandardMaterial?ze:nt).get(K.envMap||(K.isMeshStandardMaterial?J.environment:null)),gn=!0===K.vertexColors&&!!fe.attributes.color&&4===fe.attributes.color.itemSize,_n=!!K.normalMap&&!!fe.attributes.tangent,xn=!!fe.morphAttributes.position,ri=!!fe.morphAttributes.normal,Fs=!!fe.morphAttributes.color,Ja=K.toneMapped?v.toneMapping:0,Eh=fe.morphAttributes.position||fe.morphAttributes.normal||fe.morphAttributes.color,pr=void 0!==Eh?Eh.length:0,Tn=ge.get(K),KR=_.state.lights;!0!==we||!0!==qe&&L===N||se.setState(K,L,L===N&&K.id===I);let kr=!1;K.version===Tn.__version?(Tn.needsLights&&Tn.lightsStateVersion!==KR.state.version||Tn.outputEncoding!==qt||ye.isInstancedMesh&&!1===Tn.instancing||!ye.isInstancedMesh&&!0===Tn.instancing||ye.isSkinnedMesh&&!1===Tn.skinning||!ye.isSkinnedMesh&&!0===Tn.skinning||Tn.envMap!==cn||!0===K.fog&&Tn.fog!==Mt||void 0!==Tn.numClippingPlanes&&(Tn.numClippingPlanes!==se.numPlanes||Tn.numIntersection!==se.numIntersection)||Tn.vertexAlphas!==gn||Tn.vertexTangents!==_n||Tn.morphTargets!==xn||Tn.morphNormals!==ri||Tn.morphColors!==Fs||Tn.toneMapping!==Ja||!0===Re.isWebGL2&&Tn.morphTargetsCount!==pr)&&(kr=!0):(kr=!0,Tn.__version=K.version);let Dh=Tn.currentProgram;!0===kr&&(Dh=jC(K,J,ye));let D4=!1,My=!1,JR=!1;const Ns=Dh.getUniforms(),Ah=Tn.uniforms;if(st.useProgram(Dh.program)&&(D4=!0,My=!0,JR=!0),K.id!==I&&(I=K.id,My=!0),D4||N!==L){if(Ns.setValue(Z,"projectionMatrix",L.projectionMatrix),Re.logarithmicDepthBuffer&&Ns.setValue(Z,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),N!==L&&(N=L,My=!0,JR=!0),K.isShaderMaterial||K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshStandardMaterial||K.envMap){const Ho=Ns.map.cameraPosition;void 0!==Ho&&Ho.setValue(Z,de.setFromMatrixPosition(L.matrixWorld))}(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial)&&Ns.setValue(Z,"isOrthographic",!0===L.isOrthographicCamera),(K.isMeshPhongMaterial||K.isMeshToonMaterial||K.isMeshLambertMaterial||K.isMeshBasicMaterial||K.isMeshStandardMaterial||K.isShaderMaterial||K.isShadowMaterial||ye.isSkinnedMesh)&&Ns.setValue(Z,"viewMatrix",L.matrixWorldInverse)}if(ye.isSkinnedMesh){Ns.setOptional(Z,ye,"bindMatrix"),Ns.setOptional(Z,ye,"bindMatrixInverse");const Ho=ye.skeleton;Ho&&(Re.floatVertexTextures?(null===Ho.boneTexture&&Ho.computeBoneTexture(),Ns.setValue(Z,"boneTexture",Ho.boneTexture,De),Ns.setValue(Z,"boneTextureSize",Ho.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const QR=fe.morphAttributes;if((void 0!==QR.position||void 0!==QR.normal||void 0!==QR.color&&!0===Re.isWebGL2)&&Ge.update(ye,fe,Dh),(My||Tn.receiveShadow!==ye.receiveShadow)&&(Tn.receiveShadow=ye.receiveShadow,Ns.setValue(Z,"receiveShadow",ye.receiveShadow)),K.isMeshGouraudMaterial&&null!==K.envMap&&(Ah.envMap.value=cn,Ah.flipEnvMap.value=cn.isCubeTexture&&!1===cn.isRenderTargetTexture?-1:1),My&&(Ns.setValue(Z,"toneMappingExposure",v.toneMappingExposure),Tn.needsLights&&function xue(L,J){L.ambientLightColor.needsUpdate=J,L.lightProbe.needsUpdate=J,L.directionalLights.needsUpdate=J,L.directionalLightShadows.needsUpdate=J,L.pointLights.needsUpdate=J,L.pointLightShadows.needsUpdate=J,L.spotLights.needsUpdate=J,L.spotLightShadows.needsUpdate=J,L.rectAreaLights.needsUpdate=J,L.hemisphereLights.needsUpdate=J}(Ah,JR),Mt&&!0===K.fog&&Bn.refreshFogUniforms(Ah,Mt),Bn.refreshMaterialUniforms(Ah,K,$,le,ke),jM.upload(Z,Tn.uniformsList,Ah,De)),K.isShaderMaterial&&!0===K.uniformsNeedUpdate&&(jM.upload(Z,Tn.uniformsList,Ah,De),K.uniformsNeedUpdate=!1),K.isSpriteMaterial&&Ns.setValue(Z,"center",ye.center),Ns.setValue(Z,"modelViewMatrix",ye.modelViewMatrix),Ns.setValue(Z,"normalMatrix",ye.normalMatrix),Ns.setValue(Z,"modelMatrix",ye.matrixWorld),K.isShaderMaterial||K.isRawShaderMaterial){const Ho=K.uniformsGroups;for(let eP=0,Mue=Ho.length;eP<Mue;eP++)if(Re.isWebGL2){const A4=Ho[eP];wt.update(A4,Dh),wt.bind(A4,Dh)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Dh}(L,J,fe,K,ye);st.setMaterial(K,Bt);let cn=fe.index,gn=1;!0===K.wireframe&&(cn=Tt.getWireframeAttribute(fe),gn=2);const _n=fe.drawRange,xn=fe.attributes.position;let ri=_n.start*gn,Fs=(_n.start+_n.count)*gn;null!==Mt&&(ri=Math.max(ri,Mt.start*gn),Fs=Math.min(Fs,(Mt.start+Mt.count)*gn)),null!==cn?(ri=Math.max(ri,0),Fs=Math.min(Fs,cn.count)):null!=xn&&(ri=Math.max(ri,0),Fs=Math.min(Fs,xn.count));const Ja=Fs-ri;if(Ja<0||Ja===1/0)return;lt.setup(ye,K,qt,fe,cn);let Eh,pr=Rt;if(null!==cn&&(Eh=At.get(cn),pr=Qe,pr.setIndex(Eh)),ye.isMesh)!0===K.wireframe?(st.setLineWidth(K.wireframeLinewidth*$e()),pr.setMode(1)):pr.setMode(4);else if(ye.isLine){let Tn=K.linewidth;void 0===Tn&&(Tn=1),st.setLineWidth(Tn*$e()),pr.setMode(ye.isLineSegments?1:ye.isLineLoop?2:3)}else ye.isPoints?pr.setMode(0):ye.isSprite&&pr.setMode(4);if(ye.isInstancedMesh)pr.renderInstances(ri,Ja,ye.count);else if(fe.isInstancedBufferGeometry){const KR=Math.min(fe.instanceCount,void 0!==fe._maxInstanceCount?fe._maxInstanceCount:1/0);pr.renderInstances(ri,Ja,KR)}else pr.render(ri,Ja)},this.compile=function(L,J){function fe(K,ye,Mt){!0===K.transparent&&2===K.side&&!1===K.forceSinglePass?(K.side=1,K.needsUpdate=!0,jC(K,ye,Mt),K.side=0,K.needsUpdate=!0,jC(K,ye,Mt),K.side=2):jC(K,ye,Mt)}_=P.get(L),_.init(),y.push(_),L.traverseVisible(function(K){K.isLight&&K.layers.test(J.layers)&&(_.pushLight(K),K.castShadow&&_.pushShadow(K))}),_.setupLights(v.useLegacyLights),L.traverse(function(K){const ye=K.material;if(ye)if(Array.isArray(ye))for(let Mt=0;Mt<ye.length;Mt++)fe(ye[Mt],L,K);else fe(ye,L,K)}),y.pop(),_=null};let Te=null;function ft(){Li.stop()}function yi(){Li.start()}const Li=new $V;function vs(L,J,fe,K){if(!1===L.visible)return;if(L.layers.test(J.layers))if(L.isGroup)fe=L.renderOrder;else if(L.isLOD)!0===L.autoUpdate&&L.update(J);else if(L.isLight)_.pushLight(L),L.castShadow&&_.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||ae.intersectsSprite(L)){K&&de.setFromMatrixPosition(L.matrixWorld).applyMatrix4(oe);const Bt=xt.update(L),qt=L.material;qt.visible&&m.push(L,Bt,qt,fe,de.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(L.isSkinnedMesh&&L.skeleton.frame!==Ee.render.frame&&(L.skeleton.update(),L.skeleton.frame=Ee.render.frame),!L.frustumCulled||ae.intersectsObject(L))){K&&de.setFromMatrixPosition(L.matrixWorld).applyMatrix4(oe);const Bt=xt.update(L),qt=L.material;if(Array.isArray(qt)){const cn=Bt.groups;for(let gn=0,_n=cn.length;gn<_n;gn++){const xn=cn[gn],ri=qt[xn.materialIndex];ri&&ri.visible&&m.push(L,Bt,ri,fe,de.z,xn)}}else qt.visible&&m.push(L,Bt,qt,fe,de.z,null)}const Mt=L.children;for(let Bt=0,qt=Mt.length;Bt<qt;Bt++)vs(Mt[Bt],J,fe,K)}function Wu(L,J,fe,K){const ye=L.opaque,Mt=L.transmissive,Bt=L.transparent;_.setupLightsView(fe),!0===we&&se.setGlobalState(v.clippingPlanes,fe),Mt.length>0&&function Ki(L,J,fe,K){if(null===ke){const qt=Re.isWebGL2;ke=new ah(1024,1024,{generateMipmaps:!0,type:rt.has("EXT_color_buffer_half_float")?qv:th,minFilter:eh,samples:qt&&!0===a?4:0})}const ye=v.getRenderTarget();v.setRenderTarget(ke),v.clear();const Mt=v.toneMapping;v.toneMapping=0,Ma(L,fe,K),De.updateMultisampleRenderTarget(ke),De.updateRenderTargetMipmap(ke);let Bt=!1;for(let qt=0,cn=J.length;qt<cn;qt++){const gn=J[qt],_n=gn.object,xn=gn.geometry,ri=gn.material,Fs=gn.group;if(2===ri.side&&_n.layers.test(K.layers)){const Ja=ri.side;ri.side=1,ri.needsUpdate=!0,Bl(_n,fe,K,xn,ri,Fs),ri.side=Ja,ri.needsUpdate=!0,Bt=!0}}!0===Bt&&(De.updateMultisampleRenderTarget(ke),De.updateRenderTargetMipmap(ke)),v.setRenderTarget(ye),v.toneMapping=Mt}(ye,Mt,J,fe),K&&st.viewport(V.copy(K)),ye.length>0&&Ma(ye,J,fe),Mt.length>0&&Ma(Mt,J,fe),Bt.length>0&&Ma(Bt,J,fe),st.buffers.depth.setTest(!0),st.buffers.depth.setMask(!0),st.buffers.color.setMask(!0),st.setPolygonOffset(!1)}function Ma(L,J,fe){const K=!0===J.isScene?J.overrideMaterial:null;for(let ye=0,Mt=L.length;ye<Mt;ye++){const Bt=L[ye],qt=Bt.object,cn=Bt.geometry,gn=null===K?Bt.material:K,_n=Bt.group;qt.layers.test(fe.layers)&&Bl(qt,J,fe,cn,gn,_n)}}function Bl(L,J,fe,K,ye,Mt){L.onBeforeRender(v,J,fe,K,ye,Mt),L.modelViewMatrix.multiplyMatrices(fe.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),ye.onBeforeRender(v,J,fe,K,L,Mt),!0===ye.transparent&&2===ye.side&&!1===ye.forceSinglePass?(ye.side=1,ye.needsUpdate=!0,v.renderBufferDirect(fe,J,K,ye,L,Mt),ye.side=0,ye.needsUpdate=!0,v.renderBufferDirect(fe,J,K,ye,L,Mt),ye.side=2):v.renderBufferDirect(fe,J,K,ye,L,Mt),L.onAfterRender(v,J,fe,K,ye,Mt)}function jC(L,J,fe){!0!==J.isScene&&(J=Ne);const K=ge.get(L),ye=_.state.lights,Bt=ye.state.version,qt=hn.getParameters(L,ye.state,_.state.shadowsArray,J,fe),cn=hn.getProgramCacheKey(qt);let gn=K.programs;K.environment=L.isMeshStandardMaterial?J.environment:null,K.fog=J.fog,K.envMap=(L.isMeshStandardMaterial?ze:nt).get(L.envMap||K.environment),void 0===gn&&(L.addEventListener("dispose",Zi),gn=new Map,K.programs=gn);let _n=gn.get(cn);if(void 0!==_n){if(K.currentProgram===_n&&K.lightsStateVersion===Bt)return E4(L,qt),_n}else qt.uniforms=hn.getUniforms(L),L.onBuild(fe,qt,v),L.onBeforeCompile(qt,v),_n=hn.acquireProgram(qt,cn),gn.set(cn,_n),K.uniforms=qt.uniforms;const xn=K.uniforms;(!L.isShaderMaterial&&!L.isRawShaderMaterial||!0===L.clipping)&&(xn.clippingPlanes=se.uniform),E4(L,qt),K.needsLights=function wue(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&!0===L.lights}(L),K.lightsStateVersion=Bt,K.needsLights&&(xn.ambientLightColor.value=ye.state.ambient,xn.lightProbe.value=ye.state.probe,xn.directionalLights.value=ye.state.directional,xn.directionalLightShadows.value=ye.state.directionalShadow,xn.spotLights.value=ye.state.spot,xn.spotLightShadows.value=ye.state.spotShadow,xn.rectAreaLights.value=ye.state.rectArea,xn.ltc_1.value=ye.state.rectAreaLTC1,xn.ltc_2.value=ye.state.rectAreaLTC2,xn.pointLights.value=ye.state.point,xn.pointLightShadows.value=ye.state.pointShadow,xn.hemisphereLights.value=ye.state.hemi,xn.directionalShadowMap.value=ye.state.directionalShadowMap,xn.directionalShadowMatrix.value=ye.state.directionalShadowMatrix,xn.spotShadowMap.value=ye.state.spotShadowMap,xn.spotLightMatrix.value=ye.state.spotLightMatrix,xn.spotLightMap.value=ye.state.spotLightMap,xn.pointShadowMap.value=ye.state.pointShadowMap,xn.pointShadowMatrix.value=ye.state.pointShadowMatrix);const ri=_n.getUniforms(),Fs=jM.seqWithValue(ri.seq,xn);return K.currentProgram=_n,K.uniformsList=Fs,_n}function E4(L,J){const fe=ge.get(L);fe.outputEncoding=J.outputEncoding,fe.instancing=J.instancing,fe.skinning=J.skinning,fe.morphTargets=J.morphTargets,fe.morphNormals=J.morphNormals,fe.morphColors=J.morphColors,fe.morphTargetsCount=J.morphTargetsCount,fe.numClippingPlanes=J.numClippingPlanes,fe.numIntersection=J.numClipIntersection,fe.vertexAlphas=J.vertexAlphas,fe.vertexTangents=J.vertexTangents,fe.toneMapping=J.toneMapping}Li.setAnimationLoop(function Ze(L){Te&&Te(L)}),typeof self<"u"&&Li.setContext(self),this.setAnimationLoop=function(L){Te=L,it.setAnimationLoop(L),null===L?Li.stop():Li.start()},it.addEventListener("sessionstart",ft),it.addEventListener("sessionend",yi),this.render=function(L,J){if(void 0===J||!0===J.isCamera){if(!0!==M){if(!0===L.matrixWorldAutoUpdate&&L.updateMatrixWorld(),null===J.parent&&!0===J.matrixWorldAutoUpdate&&J.updateMatrixWorld(),!0===it.enabled&&!0===it.isPresenting&&(!0===it.cameraAutoUpdate&&it.updateCamera(J),J=it.getCamera()),!0===L.isScene&&L.onBeforeRender(v,L,J,D),_=P.get(L,y.length),_.init(),y.push(_),oe.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),ae.setFromProjectionMatrix(oe),qe=this.localClippingEnabled,we=se.init(this.clippingPlanes,qe),m=F.get(L,b.length),m.init(),b.push(m),vs(L,J,0,v.sortObjects),m.finish(),!0===v.sortObjects&&m.sort(X,re),!0===we&&se.beginShadows(),Ae.render(_.state.shadowsArray,L,J),!0===we&&se.endShadows(),!0===this.info.autoReset&&this.info.reset(),Ie.render(m,L),_.setupLights(v.useLegacyLights),J.isArrayCamera){const K=J.cameras;for(let ye=0,Mt=K.length;ye<Mt;ye++){const Bt=K[ye];Wu(m,L,Bt,Bt.viewport)}}else Wu(m,L,J);null!==D&&(De.updateMultisampleRenderTarget(D),De.updateRenderTargetMipmap(D)),!0===L.isScene&&L.onAfterRender(v,L,J),lt.resetDefaultState(),I=-1,N=null,y.pop(),_=y.length>0?y[y.length-1]:null,b.pop(),m=b.length>0?b[b.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return D},this.setRenderTargetTextures=function(L,J,fe){ge.get(L.texture).__webglTexture=J,ge.get(L.depthTexture).__webglTexture=fe;const K=ge.get(L);K.__hasExternalTextures=!0,K.__hasExternalTextures&&(K.__autoAllocateDepthBuffer=void 0===fe,K.__autoAllocateDepthBuffer||!0===rt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),K.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(L,J){const fe=ge.get(L);fe.__webglFramebuffer=J,fe.__useDefaultFramebuffer=void 0===J},this.setRenderTarget=function(L,J=0,fe=0){D=L,w=J,C=fe;let K=!0,ye=null,Mt=!1,Bt=!1;if(L){const cn=ge.get(L);void 0!==cn.__useDefaultFramebuffer?(st.bindFramebuffer(36160,null),K=!1):void 0===cn.__webglFramebuffer?De.setupRenderTarget(L):cn.__hasExternalTextures&&De.rebindTextures(L,ge.get(L.texture).__webglTexture,ge.get(L.depthTexture).__webglTexture);const gn=L.texture;(gn.isData3DTexture||gn.isDataArrayTexture||gn.isCompressedArrayTexture)&&(Bt=!0);const _n=ge.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(ye=_n[J],Mt=!0):ye=Re.isWebGL2&&L.samples>0&&!1===De.useMultisampledRTT(L)?ge.get(L).__webglMultisampledFramebuffer:_n,V.copy(L.viewport),A.copy(L.scissor),k=L.scissorTest}else V.copy(q).multiplyScalar($).floor(),A.copy(Q).multiplyScalar($).floor(),k=Y;if(st.bindFramebuffer(36160,ye)&&Re.drawBuffers&&K&&st.drawBuffers(L,ye),st.viewport(V),st.scissor(A),st.setScissorTest(k),Mt){const cn=ge.get(L.texture);Z.framebufferTexture2D(36160,36064,34069+J,cn.__webglTexture,fe)}else if(Bt){const cn=ge.get(L.texture);Z.framebufferTextureLayer(36160,36064,cn.__webglTexture,fe||0,J||0)}I=-1},this.readRenderTargetPixels=function(L,J,fe,K,ye,Mt,Bt){if(!L||!L.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let qt=ge.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&void 0!==Bt&&(qt=qt[Bt]),qt){st.bindFramebuffer(36160,qt);try{const cn=L.texture,gn=cn.format,_n=cn.type;if(gn!==_a&&me.convert(gn)!==Z.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const xn=_n===qv&&(rt.has("EXT_color_buffer_half_float")||Re.isWebGL2&&rt.has("EXT_color_buffer_float"));if(!(_n===th||me.convert(_n)===Z.getParameter(35738)||_n===Pu&&(Re.isWebGL2||rt.has("OES_texture_float")||rt.has("WEBGL_color_buffer_float"))||xn))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");J>=0&&J<=L.width-K&&fe>=0&&fe<=L.height-ye&&Z.readPixels(J,fe,K,ye,me.convert(gn),me.convert(_n),Mt)}finally{const cn=null!==D?ge.get(D).__webglFramebuffer:null;st.bindFramebuffer(36160,cn)}}},this.copyFramebufferToTexture=function(L,J,fe=0){const K=Math.pow(2,-fe),ye=Math.floor(J.image.width*K),Mt=Math.floor(J.image.height*K);De.setTexture2D(J,0),Z.copyTexSubImage2D(3553,fe,0,0,L.x,L.y,ye,Mt),st.unbindTexture()},this.copyTextureToTexture=function(L,J,fe,K=0){const ye=J.image.width,Mt=J.image.height,Bt=me.convert(fe.format),qt=me.convert(fe.type);De.setTexture2D(fe,0),Z.pixelStorei(37440,fe.flipY),Z.pixelStorei(37441,fe.premultiplyAlpha),Z.pixelStorei(3317,fe.unpackAlignment),J.isDataTexture?Z.texSubImage2D(3553,K,L.x,L.y,ye,Mt,Bt,qt,J.image.data):J.isCompressedTexture?Z.compressedTexSubImage2D(3553,K,L.x,L.y,J.mipmaps[0].width,J.mipmaps[0].height,Bt,J.mipmaps[0].data):Z.texSubImage2D(3553,K,L.x,L.y,Bt,qt,J.image),0===K&&fe.generateMipmaps&&Z.generateMipmap(3553),st.unbindTexture()},this.copyTextureToTexture3D=function(L,J,fe,K,ye=0){if(v.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Mt=L.max.x-L.min.x+1,Bt=L.max.y-L.min.y+1,qt=L.max.z-L.min.z+1,cn=me.convert(K.format),gn=me.convert(K.type);let _n;if(K.isData3DTexture)De.setTexture3D(K,0),_n=32879;else{if(!K.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");De.setTexture2DArray(K,0),_n=35866}Z.pixelStorei(37440,K.flipY),Z.pixelStorei(37441,K.premultiplyAlpha),Z.pixelStorei(3317,K.unpackAlignment);const xn=Z.getParameter(3314),ri=Z.getParameter(32878),Fs=Z.getParameter(3316),Ja=Z.getParameter(3315),Eh=Z.getParameter(32877),pr=fe.isCompressedTexture?fe.mipmaps[0]:fe.image;Z.pixelStorei(3314,pr.width),Z.pixelStorei(32878,pr.height),Z.pixelStorei(3316,L.min.x),Z.pixelStorei(3315,L.min.y),Z.pixelStorei(32877,L.min.z),fe.isDataTexture||fe.isData3DTexture?Z.texSubImage3D(_n,ye,J.x,J.y,J.z,Mt,Bt,qt,cn,gn,pr.data):fe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(_n,ye,J.x,J.y,J.z,Mt,Bt,qt,cn,pr.data)):Z.texSubImage3D(_n,ye,J.x,J.y,J.z,Mt,Bt,qt,cn,gn,pr),Z.pixelStorei(3314,xn),Z.pixelStorei(32878,ri),Z.pixelStorei(3316,Fs),Z.pixelStorei(3315,Ja),Z.pixelStorei(32877,Eh),0===ye&&K.generateMipmaps&&Z.generateMipmap(_n),st.unbindTexture()},this.initTexture=function(L){L.isCubeTexture?De.setTextureCube(L,0):L.isData3DTexture?De.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?De.setTexture2DArray(L,0):De.setTexture2D(L,0),st.unbindTexture()},this.resetState=function(){w=0,C=0,D=null,st.reset(),lt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}(class pse extends NI{}).prototype.isWebGL1Renderer=!0;class qM extends ks{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Jr extends Il{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Oz=new O,Lz=new O,Fz=new tn,HI=new EM,QM=new Rc;class uy extends ks{constructor(e=new sn,t=new Jr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)Oz.fromBufferAttribute(t,r-1),Lz.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=Oz.distanceTo(Lz);e.setAttribute("lineDistance",new Ke(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),QM.copy(n.boundingSphere),QM.applyMatrix4(r),QM.radius+=s,!1===e.ray.intersectsSphere(QM))return;Fz.copy(r).invert(),HI.copy(e.ray).applyMatrix4(Fz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new O,d=new O,f=new O,p=new O,m=this.isLineSegments?2:1,_=n.index,y=n.attributes.position;if(null!==_)for(let w=Math.max(0,o.start),C=Math.min(_.count,o.start+o.count)-1;w<C;w+=m){const D=_.getX(w),I=_.getX(w+1);if(c.fromBufferAttribute(y,D),d.fromBufferAttribute(y,I),HI.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const V=e.ray.origin.distanceTo(p);V<e.near||V>e.far||t.push({distance:V,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}else for(let w=Math.max(0,o.start),C=Math.min(y.count,o.start+o.count)-1;w<C;w+=m){if(c.fromBufferAttribute(y,w),d.fromBufferAttribute(y,w+1),HI.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(p);I<e.near||I>e.far||t.push({distance:I,point:f.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const Nz=new O,Bz=new O;class dy extends uy{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Nz.fromBufferAttribute(t,r),Bz.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Nz.distanceTo(Bz);e.setAttribute("lineDistance",new Ke(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Dm extends Il{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Uz=new tn,GI=new EM,eC=new Rc,tC=new O;class nC extends ks{constructor(e=new sn,t=new Dm){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),eC.copy(n.boundingSphere),eC.applyMatrix4(r),eC.radius+=s,!1===e.ray.intersectsSphere(eC))return;Uz.copy(r).invert(),GI.copy(e.ray).applyMatrix4(Uz);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=n.index,f=n.attributes.position;if(null!==c)for(let _=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);_<b;_++){const y=c.getX(_);tC.fromBufferAttribute(f,y),Vz(tC,y,l,r,e,t,this)}else for(let _=Math.max(0,o.start),b=Math.min(f.count,o.start+o.count);_<b;_++)tC.fromBufferAttribute(f,_),Vz(tC,_,l,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Vz(i,e,t,n,r,s,o){const a=GI.distanceSqToPoint(i);if(a<t){const l=new O;GI.closestPointToPoint(i,l),l.applyMatrix4(n);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class kl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let o;o=t||e*n[s-1];let c,a=0,l=s-1;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=n[r]-o,c<0)a=r+1;else{if(!(c>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(s-1);const d=n[r];return(r+(o-d)/(n[r+1]-d))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Me:new O);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new O,r=[],s=[],o=[],a=new O,l=new tn;for(let m=0;m<=e;m++)r[m]=this.getTangentAt(m/e,new O);s[0]=new O,o[0]=new O;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,n.set(1,0,0)),f<=c&&(c=f,n.set(0,1,0)),p<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const _=Math.acos(Gi(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,_))}o[m].crossVectors(r[m],s[m])}if(!0===t){let m=Math.acos(Gi(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let _=1;_<=e;_++)s[_].applyMatrix4(l.makeRotationAxis(r[_],m*_)),o[_].crossVectors(r[_],s[_])}return{tangents:r,normals:s,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class WI extends kl{constructor(e=0,t=0,n=1,r=1,s=0,o=2*Math.PI,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const n=t||new Me,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=o?0:r),!0===this.aClockwise&&!o&&(s===r?s=-r:s-=r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return n.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function $I(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s;return i+e*s+t*o+n*(o*s)}}}const iC=new O,jI=new $I,qI=new $I,XI=new $I;function zz(i,e,t,n,r){const s=.5*(n-e),o=.5*(r-t),a=i*i;return(2*t-2*n+s+o)*(i*a)+(-3*t+3*n-2*s-o)*a+s*i+t}function hy(i,e,t,n){return function Ese(i,e){const t=1-i;return t*t*e}(i,e)+function Dse(i,e){return 2*(1-i)*i*e}(i,t)+function Ase(i,e){return i*i*e}(i,n)}function fy(i,e,t,n,r){return function Tse(i,e){const t=1-i;return t*t*t*e}(i,e)+function Ise(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function Rse(i,e){return 3*(1-i)*i*i*e}(i,n)+function Pse(i,e){return i*i*i*e}(i,r)}class Hz extends kl{constructor(e=new Me,t=new Me,n=new Me,r=new Me){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Me){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(fy(e,r.x,s.x,o.x,a.x),fy(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class YI extends kl{constructor(e=new Me,t=new Me){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Me){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Me){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gz extends kl{constructor(e=new Me,t=new Me,n=new Me){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Me){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(hy(e,r.x,s.x,o.x),hy(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $z extends kl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Me){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[0===o?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return n.set(zz(a,l.x,c.x,d.x,f.x),zz(a,l.y,c.y,d.y,f.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new Me).fromArray(r))}return this}}var ZI=Object.freeze({__proto__:null,ArcCurve:class Cse extends WI{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class Sse extends kl{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new O){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let c,d,a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:0===l&&a===s-1&&(a=s-2,l=1),this.closed||a>0?c=r[(a-1)%s]:(iC.subVectors(r[0],r[1]).add(r[0]),c=iC);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(iC.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=iC),"centripetal"===this.curveType||"chordal"===this.curveType){const m="chordal"===this.curveType?.5:.25;let _=Math.pow(c.distanceToSquared(f),m),b=Math.pow(f.distanceToSquared(p),m),y=Math.pow(p.distanceToSquared(d),m);b<1e-4&&(b=1),_<1e-4&&(_=b),y<1e-4&&(y=b),jI.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,_,b,y),qI.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,_,b,y),XI.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,_,b,y)}else"catmullrom"===this.curveType&&(jI.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),qI.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),XI.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return n.set(jI.calc(l),qI.calc(l),XI.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new O).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}},CubicBezierCurve:Hz,CubicBezierCurve3:class kse extends kl{constructor(e=new O,t=new O,n=new O,r=new O){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new O){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(fy(e,r.x,s.x,o.x,a.x),fy(e,r.y,s.y,o.y,a.y),fy(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:WI,LineCurve:YI,LineCurve3:class Ose extends kl{constructor(e=new O,t=new O){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new O){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new O){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:Gz,QuadraticBezierCurve3:class Wz extends kl{constructor(e=new O,t=new O,n=new O){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new O){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(hy(e,r.x,s.x,o.x),hy(e,r.y,s.y,o.y),hy(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},SplineCurve:$z});class Lse extends kl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new YI(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength();return a.getPointAt(0===l?0:1-o/l,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],l=o.getPoints(o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e);for(let c=0;c<l.length;c++){const d=l[c];n&&n.equals(d)||(t.push(d),n=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push((new ZI[r.type]).fromJSON(r))}return this}}class rC extends Lse{constructor(e){super(),this.type="Path",this.currentPoint=new Me,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new YI(this.currentPoint.clone(),new Me(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new Gz(this.currentPoint.clone(),new Me(e,t),new Me(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new Hz(this.currentPoint.clone(),new Me(e,t),new Me(n,r),new Me(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new $z(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const c=new WI(e,t,n,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class sC extends sn{constructor(e=[new Me(0,-.5),new Me(.5,0),new Me(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Gi(r,0,2*Math.PI);const s=[],o=[],a=[],l=[],c=[],d=1/t,f=new O,p=new Me,m=new O,_=new O,b=new O;let y=0,v=0;for(let M=0;M<=e.length-1;M++)switch(M){case 0:y=e[M+1].x-e[M].x,v=e[M+1].y-e[M].y,m.x=1*v,m.y=-y,m.z=0*v,b.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:y=e[M+1].x-e[M].x,v=e[M+1].y-e[M].y,m.x=1*v,m.y=-y,m.z=0*v,_.copy(m),m.x+=b.x,m.y+=b.y,m.z+=b.z,m.normalize(),l.push(m.x,m.y,m.z),b.copy(_)}for(let M=0;M<=t;M++){const w=n+M*d*r,C=Math.sin(w),D=Math.cos(w);for(let I=0;I<=e.length-1;I++)f.x=e[I].x*C,f.y=e[I].y,f.z=e[I].x*D,o.push(f.x,f.y,f.z),p.x=M/t,p.y=I/(e.length-1),a.push(p.x,p.y),c.push(l[3*I+0]*C,l[3*I+1],l[3*I+0]*D)}for(let M=0;M<t;M++)for(let w=0;w<e.length-1;w++){const C=w+M*e.length,I=C+e.length,N=C+e.length+1,V=C+1;s.push(C,I,V),s.push(N,V,I)}this.setIndex(s),this.setAttribute("position",new Ke(o,3)),this.setAttribute("uv",new Ke(a,2)),this.setAttribute("normal",new Ke(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sC(e.points,e.segments,e.phiStart,e.phiLength)}}class oC extends sC{constructor(e=1,t=1,n=4,r=8){const s=new rC;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new oC(e.radius,e.length,e.capSegments,e.radialSegments)}}class Am extends sn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],f=[],p=[],m=[];let _=0;const b=[],y=n/2;let v=0;function w(C){const D=_,I=new Me,N=new O;let V=0;const A=!0===C?e:t,k=!0===C?1:-1;for(let le=1;le<=r;le++)f.push(0,y*k,0),p.push(0,k,0),m.push(.5,.5),_++;const ee=_;for(let le=0;le<=r;le++){const X=le/r*l+a,re=Math.cos(X),q=Math.sin(X);N.x=A*q,N.y=y*k,N.z=A*re,f.push(N.x,N.y,N.z),p.push(0,k,0),I.x=.5*re+.5,I.y=.5*q*k+.5,m.push(I.x,I.y),_++}for(let le=0;le<r;le++){const $=D+le,X=ee+le;!0===C?d.push(X,X+1,$):d.push(X+1,X,$),V+=3}c.addGroup(v,V,!0===C?1:2),v+=V}(function M(){const C=new O,D=new O;let I=0;const N=(t-e)/n;for(let V=0;V<=s;V++){const A=[],k=V/s,ee=k*(t-e)+e;for(let le=0;le<=r;le++){const $=le/r,X=$*l+a,re=Math.sin(X),q=Math.cos(X);D.x=ee*re,D.y=-k*n+y,D.z=ee*q,f.push(D.x,D.y,D.z),C.set(re,N,q).normalize(),p.push(C.x,C.y,C.z),m.push($,1-k),A.push(_++)}b.push(A)}for(let V=0;V<r;V++)for(let A=0;A<s;A++){const ee=b[A+1][V],le=b[A+1][V+1],$=b[A][V+1];d.push(b[A][V],ee,$),d.push(ee,le,$),I+=6}c.addGroup(v,I,0),v+=I})(),!1===o&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new Ke(f,3)),this.setAttribute("normal",new Ke(p,3)),this.setAttribute("uv",new Ke(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Am(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class aC extends Am{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new aC(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Rm extends sn{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new O,p=new O,m=[],_=[],b=[],y=[];for(let v=0;v<=n;v++){const M=[],w=v/n;let C=0;0===v&&0===o?C=.5/t:v===n&&l===Math.PI&&(C=-.5/t);for(let D=0;D<=t;D++){const I=D/t;f.x=-e*Math.cos(r+I*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(r+I*s)*Math.sin(o+w*a),_.push(f.x,f.y,f.z),p.copy(f).normalize(),b.push(p.x,p.y,p.z),y.push(I+C,1-w),M.push(c++)}d.push(M)}for(let v=0;v<n;v++)for(let M=0;M<t;M++){const w=d[v][M+1],C=d[v][M],D=d[v+1][M],I=d[v+1][M+1];(0!==v||o>0)&&m.push(w,C,I),(v!==n-1||l<Math.PI)&&m.push(C,D,I)}this.setIndex(m),this.setAttribute("position",new Ke(_,3)),this.setAttribute("normal",new Ke(b,3)),this.setAttribute("uv",new Ke(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class uR extends Il{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new je(16777215),this.specular=new je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Me(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}function ya(i,e,t){return dR(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)}function _h(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function dR(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}class mC{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=s)break e;{const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0}}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class moe extends mC{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:s=e,a=2*t-n;break;case 2402:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(void 0===l)switch(this.getSettings_().endingEnd){case 2401:o=e,l=2*n-t;break;case 2402:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const c=.5*(n-t),d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-n),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,_=(n-t)/(r-t),b=_*_,y=b*_,v=-p*y+2*p*b-p*_,M=(1+p)*y+(-1.5-2*p)*b+(-.5+p)*_+1,w=(-1-m)*y+(1.5+m)*b+.5*_,C=m*y-m*b;for(let D=0;D!==a;++D)s[D]=v*o[d+D]+M*o[c+D]+w*o[l+D]+C*o[f+D];return s}}class tH extends mC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(n-t)/(r-t),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class goe extends mC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ol{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_h(t,this.TimeBufferType),this.values=_h(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:_h(e.times,Array),values:_h(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new goe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tH(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new moe(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==s||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=ya(n,s,o),this.values=ya(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if("number"==typeof l&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(null!==o&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(void 0!==r&&dR(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=ya(this.times),t=ya(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a];if(c!==e[a+1]&&(1!==a||c!==e[0]))if(r)l=!0;else{const f=a*n,p=f-n,m=f+n;for(let _=0;_!==n;++_){const b=t[f+_];if(b!==t[p+_]||b!==t[m+_]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*n,p=o*n;for(let m=0;m!==n;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,c=0;c!==n;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=ya(e,0,o),this.values=ya(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=ya(this.times,0),t=ya(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Ol.prototype.TimeBufferType=Float32Array,Ol.prototype.ValueBufferType=Float32Array,Ol.prototype.DefaultInterpolation=2301;class Pm extends Ol{}Pm.prototype.ValueTypeName="bool",Pm.prototype.ValueBufferType=Array,Pm.prototype.DefaultInterpolation=2300,Pm.prototype.InterpolantFactoryMethodLinear=void 0,Pm.prototype.InterpolantFactoryMethodSmooth=void 0;(class nH extends Ol{}).prototype.ValueTypeName="color";(class gC extends Ol{}).prototype.ValueTypeName="number";class _oe extends mC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)Fo.slerpFlat(s,0,o,c-a,o,c,l);return s}}class _y extends Ol{InterpolantFactoryMethodLinear(e){return new _oe(this.times,this.values,this.getValueSize(),e)}}_y.prototype.ValueTypeName="quaternion",_y.prototype.DefaultInterpolation=2301,_y.prototype.InterpolantFactoryMethodSmooth=void 0;class km extends Ol{}km.prototype.ValueTypeName="string",km.prototype.ValueBufferType=Array,km.prototype.DefaultInterpolation=2300,km.prototype.InterpolantFactoryMethodLinear=void 0,km.prototype.InterpolantFactoryMethodSmooth=void 0;(class _C extends Ol{}).prototype.ValueTypeName="vector";const Om={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class iH{constructor(e,t,n){const r=this;let l,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(d){a++,!1===s&&void 0!==r.onStart&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,void 0!==r.onProgress&&r.onProgress(d,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(d){void 0!==r.onError&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return-1!==f&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],_=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return _}return null}}}const rH=new iH;class vy{constructor(e){this.manager=void 0!==e?e:rH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Bc={};class boe extends Error{constructor(e,t){super(e),this.response=t}}class Ll extends vy{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Om.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==Bc[e])return void Bc[e].push({onLoad:t,onProgress:n,onError:r});Bc[e]=[],Bc[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(200===c.status||0===c.status){if(0===c.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===c.body||void 0===c.body.getReader)return c;const d=Bc[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,_=0!==m;let b=0;const y=new ReadableStream({start(v){!function M(){f.read().then(({done:w,value:C})=>{if(w)v.close();else{b+=C.byteLength;const D=new ProgressEvent("progress",{lengthComputable:_,loaded:b,total:m});for(let I=0,N=d.length;I<N;I++){const V=d[I];V.onProgress&&V.onProgress(D)}v.enqueue(C),M()}})}()}});return new Response(y)}throw new boe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>(new DOMParser).parseFromString(d,a));case"json":return c.json();default:if(void 0===a)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(_=>m.decode(_))}}}).then(c=>{Om.add(e,c);const d=Bc[e];delete Bc[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=Bc[e];if(void 0===d)throw this.manager.itemError(e),c;delete Bc[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class yC extends vy{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Om.get(e);if(void 0!==o)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Zv("img");function l(){d(),Om.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){d(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class sH extends vy{constructor(e){super(e)}load(e,t,n,r){const s=new ku,o=new yC(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class xoe extends ks{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class gR extends xoe{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const yR="\\[\\]\\.:\\/",Uoe=new RegExp("["+yR+"]","g"),bR="[^"+yR+"]",Voe="[^"+yR.replace("\\.","")+"]",$oe=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",bR)+/(WCOD+)?/.source.replace("WCOD",Voe)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bR)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bR)+"$"),joe=["material","materials","bones","map"];class qoe{constructor(e,t,n){const r=n||vi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let vi=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Uoe,"")}static parseTrackName(t){const n=$oe.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const o=r.nodeName.substring(s+1);-1!==joe.indexOf(o)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=o)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(o){for(let a=0;a<o.length;a++){const l=o[a];if(l.name===n||l.uuid===n)return l;const c=r(l.children);if(c)return c}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,o=r.length;s!==o;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let o=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let d=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let f=0;f<t.length;f++)if(t[f].name===d){d=f;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==d){if(void 0===t[d])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[d]}}const a=t[s];if(void 0===a)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(void 0!==o){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[o]&&(o=t.morphTargetDictionary[o])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=o}else void 0!==a.fromArray&&void 0!==a.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=s;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=qoe,i})();vi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},vi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},vi.prototype.GetterByBindingType=[vi.prototype._getValue_direct,vi.prototype._getValue_array,vi.prototype._getValue_arrayElement,vi.prototype._getValue_toArray],vi.prototype.SetterByBindingTypeAndVersioning=[[vi.prototype._setValue_direct,vi.prototype._setValue_direct_setNeedsUpdate,vi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_array,vi.prototype._setValue_array_setNeedsUpdate,vi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_arrayElement,vi.prototype._setValue_arrayElement_setNeedsUpdate,vi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vi.prototype._setValue_fromArray,vi.prototype._setValue_fromArray_setNeedsUpdate,vi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"151"}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="151");class Fl{constructor(e){this.nativeMesh=e,this.name=""}get position(){return this.nativeMesh.position}set position(e){this.nativeMesh.position.set(e.x,e.y,e.z)}get rotation(){return this.nativeMesh.quaternion}set rotation(e){this.nativeMesh.quaternion.set(e.x,e.y,e.z,e.w)}get scale(){return this.nativeMesh.scale}set scale(e){this.nativeMesh.scale.set(e.x,e.y,e.z)}get visible(){return this.nativeMesh.visible}set visible(e){this.nativeMesh.visible=e}isEmpty(){return(this.nativeMesh instanceof qM||this.nativeMesh instanceof Uu)&&0==this.nativeMesh.children.length}popChild(e){const t=this.nativeMesh.children.find(n=>n.name===e||n.userData.name===e);return t?(t.removeFromParent(),new Fl(t)):null}getBoundings(){return(new Tl).setFromObject(this.nativeMesh)}clone(){return new Fl(this.nativeMesh.clone())}addToWorld(e){var t;null===(t=e.nativeScene)||void 0===t||t.add(this.nativeMesh)}removeFromWorld(e){var t;null===(t=e.nativeScene)||void 0===t||t.remove(this.nativeMesh)}dispose(){this.nativeMesh.traverse(e=>{e instanceof _i&&this.disposeMesh(e)}),this.nativeMesh instanceof _i&&this.disposeMesh(this.nativeMesh)}disposeMesh(e){e.geometry.dispose();const t=e.material instanceof Array?e.material:[e.material];for(const n of t)n.dispose()}}class Joe extends class LQ{createBox(e,t){return this.createPrimitive({shape:"BOX",dimensions:e},t)}createCapsule(e,t,n){return this.createPrimitive({shape:"CAPSULE",radius:e,centersDistance:t},n)}createCylinder(e,t,n){return this.createPrimitive({shape:"CYLINDER",radius:e,height:t},n)}createCone(e,t,n){return this.createPrimitive({shape:"CONE",radius:e,height:t},n)}createSphere(e){return this.createPrimitive({shape:"SPHERE",radius:e})}}{getRandomMaterial(){return new Za({color:Math.floor(256*Math.random())<<16|Math.floor(256*Math.random())<<8|Math.floor(256*Math.random())})}transformPrimitiveZUp(e){e.rotateX(Math.PI/2);const t=new Uu;return t.add(e),t}createPrimitive(e,t=this.getRandomMaterial()){let n=null;switch(e.shape){case"BOX":n=new _i(new uh(e.dimensions.x,e.dimensions.y,e.dimensions.z),t);break;case"CAPSULE":n=this.transformPrimitiveZUp(new _i(new oC(e.radius,e.centersDistance),t));break;case"CYLINDER":n=this.transformPrimitiveZUp(new _i(new Am(e.radius,e.radius,e.height),t));break;case"CONE":n=this.transformPrimitiveZUp(new _i(new aC(e.radius,e.height),t));break;case"SPHERE":n=new _i(new Rm(e.radius),t)}if(!n)throw new Error(`Primitive with shape "${e.shape}" not implemented`);return new Fl(n)}}class eae{constructor(){this.gltfLoader=null}registerGltfLoaderAddon(e){this.gltfLoader=e}loadFromGgGlb(e,t){return function(i,e,t,n){return new(t||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){if(!this.gltfLoader)throw new Error("Three GLTF loader addon not registered! Use loader.registerGltfLoaderAddon(new GLTFLoader()) before trying to load something");const n=yield this.gltfLoader.parseAsync(e,"");return n.scene.traverse(r=>{r.type.endsWith("Light")&&(console.warn("WORKAROUND: light intensity from GLB divided by 200."),r.intensity*=.005)}),new Fl(n.scene)})}}class tae extends Fl{constructor(){super(new dy(new sn,new Jr({color:16711680,linewidth:.5}))),this.debugBufferSize=3e6,this.index=0,this.lastMaxIndex=0,this.debugVertices=new Float32Array(this.debugBufferSize),this.debugColors=new Float32Array(this.debugBufferSize),this.nativeMesh.geometry.setAttribute("position",new fr(this.debugVertices,3)),this.nativeMesh.geometry.setAttribute("color",new fr(this.debugColors,3)),this.nativeMesh.frustumCulled=!1}drawContactPoint(e,t,n){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,e.x+t.x,e.y+t.y,e.z+t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}drawLine(e,t,n){this.setXYZ(this.debugVertices,this.index,e.x,e.y,e.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0),this.setXYZ(this.debugVertices,this.index,t.x,t.y,t.z),this.setXYZ(this.debugColors,this.index++,n?.x||0,n?.y||0,n?.z||0)}update(){this.index<this.lastMaxIndex&&(this.debugVertices.fill(0,this.index,this.lastMaxIndex),this.debugColors.fill(0,this.index,this.lastMaxIndex)),this.lastMaxIndex=this.index,this.index=0,this.nativeMesh.geometry.attributes.position.needsUpdate=!0,this.nativeMesh.geometry.attributes.color.needsUpdate=!0}setXYZ(e,t,n,r,s){e[t*=3]=n,e[t+1]=r,e[t+2]=s}}class AH{constructor(){this._nativeScene=null,this.factory=new Joe,this.loader=new eae,this.debugPhysicsDrawerClass=tae}get nativeScene(){return this._nativeScene}init(){return i=this,e=void 0,n=function*(){this._nativeScene=new qM},new((t=void 0)||(t=Promise))(function(s,o){function a(d){try{c(n.next(d))}catch(f){o(f)}}function l(d){try{c(n.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(d.value).then(a,l)}c((n=n.apply(i,e||[])).next())});var i,e,t,n}dispose(){this._nativeScene=new qM}}class iae extends DQ{}class rae extends Fl{constructor(e){super(e),this.nativeCamera=e}get supportsFov(){return this.nativeCamera instanceof Cr||"PerspectiveCamera"==this.nativeCamera.type}get fov(){return this.nativeCamera.fov||NaN}set fov(e){this.supportsFov&&(this.nativeCamera.fov=e,this.nativeCamera.updateProjectionMatrix())}}class TH extends OQ{constructor(e,t={},n=new iae(new rae(new Cr(75,1,1,1e4)))){super(e,t),this.canvas=e,this.camera=n,this.renderer=new NI({canvas:e,antialias:this.rendererOptions.antialias,preserveDrawingBuffer:!0,alpha:this.rendererOptions.transparent}),this.renderer.useLegacyLights=!1,this.renderer.outputEncoding=ti,this.renderer.toneMappingExposure=2,this.renderer.shadowMap.enabled=!0,this.renderer.setClearColor(this.rendererOptions.background),this.renderer.shadowMap.type=2,this.renderer.setPixelRatio(this.rendererOptions.forceResolution||devicePixelRatio)}resizeRenderer(e){this.renderer.setSize(e.x,e.y),(this.camera.object3D.nativeCamera instanceof Cr||"PerspectiveCamera"==this.camera.object3D.nativeCamera.type)&&Math.abs(this.camera.object3D.nativeCamera.aspect-e.x/e.y)>.01&&(this.camera.object3D.nativeCamera.aspect=e.x/e.y,this.camera.object3D.nativeCamera.updateProjectionMatrix())}render(){this.renderer.render(this.world.visualScene.nativeScene,this.camera.object3D.nativeCamera)}dispose(){super.dispose(),this.renderer instanceof NI&&(this.renderer.dispose(),this.renderer.forceContextLoss()),this.renderer.domElement=null}}const sae=/^[og]\s*(.+)?/,oae=/^mtllib /,aae=/^usemtl /,lae=/^usemap /,IH=/\s+/,RH=new O,CR=new O,PH=new O,kH=new O,ba=new O,DC=new je;function cae(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const o=this._finalize(!1);o&&(o.inherited||o.groupCount<=0)&&this.materials.splice(o.index,1);const a={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==o?o.smooth:this.smooth,groupStart:void 0!==o?o.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:"number"==typeof l?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(a),a},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let o=this.materials.length-1;o>=0;o--)this.materials[o].groupCount<=0&&this.materials.splice(o,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,s=this.object.geometry.normals;RH.fromArray(r,e),CR.fromArray(r,t),PH.fromArray(r,n),ba.subVectors(PH,CR),kH.subVectors(RH,CR),ba.cross(kH),ba.normalize(),s.push(ba.x,ba.y,ba.z),s.push(ba.x,ba.y,ba.z),s.push(ba.x,ba.y,ba.z)},addColor:function(e,t,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,o,a,l,c){const d=this.vertices.length;let f=this.parseVertexIndex(e,d),p=this.parseVertexIndex(t,d),m=this.parseVertexIndex(n,d);if(this.addVertex(f,p,m),this.addColor(f,p,m),void 0!==a&&""!==a){const _=this.normals.length;f=this.parseNormalIndex(a,_),p=this.parseNormalIndex(l,_),m=this.parseNormalIndex(c,_),this.addNormal(f,p,m)}else this.addFaceNormal(f,p,m);if(void 0!==r&&""!==r){const _=this.uvs.length;f=this.parseUVIndex(r,_),p=this.parseUVIndex(s,_),m=this.parseUVIndex(o,_),this.addUV(f,p,m),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,o=t.length;s<o;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return i.startObject("",!1),i}class OH extends vy{constructor(e){super(e),this.materials=null}load(e,t,n,r){const s=this,o=new Ll(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(a))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new cae;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let a=0,l=n.length;a<l;a++){const c=n[a].trimStart();if(0===c.length)continue;const d=c.charAt(0);if("#"!==d)if("v"===d){const f=c.split(IH);switch(f[0]){case"v":t.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(DC.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6])).convertSRGBToLinear(),t.colors.push(DC.r,DC.g,DC.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":t.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===d){const p=c.slice(1).trim().split(IH),m=[];for(let b=0,y=p.length;b<y;b++){const v=p[b];if(v.length>0){const M=v.split("/");m.push(M)}}const _=m[0];for(let b=1,y=m.length-1;b<y;b++){const v=m[b],M=m[b+1];t.addFace(_[0],v[0],M[0],_[1],v[1],M[1],_[2],v[2],M[2])}}else if("l"===d){const f=c.substring(1).trim().split(" ");let p=[];const m=[];if(-1===c.indexOf("/"))p=f;else for(let _=0,b=f.length;_<b;_++){const y=f[_].split("/");""!==y[0]&&p.push(y[0]),""!==y[1]&&m.push(y[1])}t.addLineGeometry(p,m)}else if("p"===d){const p=c.slice(1).trim().split(" ");t.addPointGeometry(p)}else if(null!==(r=sae.exec(c))){const f=(" "+r[0].slice(1).trim()).slice(1);t.startObject(f)}else if(aae.test(c))t.object.startMaterial(c.substring(7).trim(),t.materialLibraries);else if(oae.test(c))t.materialLibraries.push(c.substring(7).trim());else if(lae.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===d){if(r=c.split(" "),r.length>1){const p=r[1].trim().toLowerCase();t.object.smooth="0"!==p&&"off"!==p}else t.object.smooth=!0;const f=t.object.currentMaterial();f&&(f.smooth=t.object.smooth)}else{if("\0"===c)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}t.finalize();const s=new Uu;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let a=0,l=t.objects.length;a<l;a++){const c=t.objects[a],d=c.geometry,f=c.materials,p="Line"===d.type,m="Points"===d.type;let _=!1;if(0===d.vertices.length)continue;const b=new sn;b.setAttribute("position",new Ke(d.vertices,3)),d.normals.length>0&&b.setAttribute("normal",new Ke(d.normals,3)),d.colors.length>0&&(_=!0,b.setAttribute("color",new Ke(d.colors,3))),!0===d.hasUVIndices&&b.setAttribute("uv",new Ke(d.uvs,2));const y=[];for(let M=0,w=f.length;M<w;M++){const C=f[M],D=C.name+"_"+C.smooth+"_"+_;let I=t.materials[D];if(null!==this.materials)if(I=this.materials.create(C.name),!p||!I||I instanceof Jr){if(m&&I&&!(I instanceof Dm)){const N=new Dm({size:10,sizeAttenuation:!1});Il.prototype.copy.call(N,I),N.color.copy(I.color),N.map=I.map,I=N}}else{const N=new Jr;Il.prototype.copy.call(N,I),N.color.copy(I.color),I=N}void 0===I&&(I=p?new Jr:m?new Dm({size:1,sizeAttenuation:!1}):new uR,I.name=C.name,I.flatShading=!C.smooth,I.vertexColors=_,t.materials[D]=I),y.push(I)}let v;if(y.length>1){for(let M=0,w=f.length;M<w;M++){const C=f[M];b.addGroup(C.groupStart,C.groupCount,M)}v=p?new dy(b,y):m?new nC(b,y):new _i(b,y)}else v=p?new dy(b,y[0]):m?new nC(b,y[0]):new _i(b,y[0]);v.name=c.name,s.add(v)}else if(t.vertices.length>0){const a=new Dm({size:1,sizeAttenuation:!1}),l=new sn;l.setAttribute("position",new Ke(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(l.setAttribute("color",new Ke(t.colors,3)),a.vertexColors=!0);const c=new nC(l,a);s.add(c)}return s}}class LH extends vy{constructor(e){super(e)}load(e,t,n,r){const s=this,o=""===this.path?class vR{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}.extractUrlBase(e):this.path,a=new Ll(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},n,r)}setMaterialOptions(e){return this.materialOptions=e,this}parse(e,t){const n=e.split("\n");let r={};const s=/\s+/,o={};for(let l=0;l<n.length;l++){let c=n[l];if(c=c.trim(),0===c.length||"#"===c.charAt(0))continue;const d=c.indexOf(" ");let f=d>=0?c.substring(0,d):c;f=f.toLowerCase();let p=d>=0?c.substring(d+1):"";if(p=p.trim(),"newmtl"===f)r={name:p},o[p]=r;else if("ka"===f||"kd"===f||"ks"===f||"ke"===f){const m=p.split(s,3);r[f]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else r[f]=p}const a=new uae(this.resourcePath||t,this.materialOptions);return a.setCrossOrigin(this.crossOrigin),a.setManager(this.manager),a.setMaterials(o),a}}class uae{constructor(e="",t={}){this.baseUrl=e,this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=void 0!==this.options.side?this.options.side:0,this.wrap=void 0!==this.options.wrap?this.options.wrap:1e3}setCrossOrigin(e){return this.crossOrigin=e,this}setManager(e){this.manager=e}setMaterials(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(e){if(!this.options)return e;const t={};for(const n in e){const r=e[n],s={};t[n]=s;for(const o in r){let a=!0,l=r[o];const c=o.toLowerCase();switch(c){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(l=[l[0]/255,l[1]/255,l[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===l[0]&&0===l[1]&&0===l[2]&&(a=!1)}a&&(s[c]=l)}}return t}preload(){for(const e in this.materialsInfo)this.create(e)}getIndex(e){return this.nameLookup[e]}getAsArray(){let e=0;for(const t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray}create(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]}createMaterial_(e){const t=this,n=this.materialsInfo[e],r={name:e,side:this.side};function o(a,l){if(r[a])return;const c=t.getTextureParams(l,r),d=t.loadTexture(function s(a,l){return"string"!=typeof l||""===l?"":/^https?:\/\//i.test(l)?l:a+l}(t.baseUrl,c.url));d.repeat.copy(c.scale),d.offset.copy(c.offset),d.wrapS=t.wrap,d.wrapT=t.wrap,("map"===a||"emissiveMap"===a)&&(d.encoding=ti),r[a]=d}for(const a in n){const l=n[a];let c;if(""!==l)switch(a.toLowerCase()){case"kd":r.color=(new je).fromArray(l).convertSRGBToLinear();break;case"ks":r.specular=(new je).fromArray(l).convertSRGBToLinear();break;case"ke":r.emissive=(new je).fromArray(l).convertSRGBToLinear();break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),r.transparent=!0;break;case"ns":r.shininess=parseFloat(l);break;case"d":c=parseFloat(l),c<1&&(r.opacity=c,r.transparent=!0);break;case"tr":c=parseFloat(l),this.options&&this.options.invertTrProperty&&(c=1-c),c>0&&(r.opacity=1-c,r.transparent=!0)}}return this.materials[e]=new uR(r),this.materials[e]}getTextureParams(e,t){const n={scale:new Me(1,1),offset:new Me(0,0)},r=e.split(/\s+/);let s;return s=r.indexOf("-bm"),s>=0&&(t.bumpScale=parseFloat(r[s+1]),r.splice(s,2)),s=r.indexOf("-s"),s>=0&&(n.scale.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),s=r.indexOf("-o"),s>=0&&(n.offset.set(parseFloat(r[s+1]),parseFloat(r[s+2])),r.splice(s,4)),n.url=r.join(" ").trim(),n}loadTexture(e,t,n,r,s){const o=void 0!==this.manager?this.manager:rH;let a=o.getHandler(e);null===a&&(a=new sH(o)),a.setCrossOrigin&&a.setCrossOrigin(this.crossOrigin);const l=a.load(e,n,r,s);return void 0!==t&&(l.mapping=t),l}}function dae(i,e){if(1&i&&(vo(),bt(0,"circle",4)),2&i){const t=Oe(),n=bl(1);fc("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(n)),Qt("r",t._getCircleRadius())}}function hae(i,e){if(1&i&&(vo(),bt(0,"circle",4)),2&i){const t=Oe(),n=bl(1);fc("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%")("transform-origin",t._getCircleTransformOrigin(n)),Qt("r",t._getCircleRadius())}}const pae=Cv(class{constructor(i){this._elementRef=i}},"primary"),mae=new Se("mat-progress-spinner-default-options",{providedIn:"root",factory:function gae(){return{diameter:100}}});class Ka extends pae{constructor(e,t,n,r,s,o,a,l){super(e),this._document=n,this._diameter=100,this._value=0,this._resizeSubscription=Zt.EMPTY,this.mode="determinate";const c=Ka._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),c.has(n.head)||c.set(n.head,new Set([100])),this._noopAnimations="NoopAnimations"===r&&!!s&&!s._forceAnimations,"mat-spinner"===e.nativeElement.nodeName.toLowerCase()&&(this.mode="indeterminate"),s&&(s.color&&(this.color=this.defaultColor=s.color),s.diameter&&(this.diameter=s.diameter),s.strokeWidth&&(this.strokeWidth=s.strokeWidth)),t.isBrowser&&t.SAFARI&&a&&o&&l&&(this._resizeSubscription=a.change(150).subscribe(()=>{"indeterminate"===this.mode&&l.run(()=>o.markForCheck())}))}get diameter(){return this._diameter}set diameter(e){this._diameter=fa(e),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(e){this._strokeWidth=fa(e)}get value(){return"determinate"===this.mode?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,fa(e)))}ngOnInit(){const e=this._elementRef.nativeElement;this._styleRoot=S2(e)||this._document.head,this._attachStyleNode(),e.classList.add("mat-progress-spinner-indeterminate-animation")}ngOnDestroy(){this._resizeSubscription.unsubscribe()}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const e=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${e} ${e}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_getCircleTransformOrigin(e){const t=50*(e.currentScale??1);return`${t}% ${t}%`}_attachStyleNode(){const e=this._styleRoot,t=this._diameter,n=Ka._diameters;let r=n.get(e);if(!r||!r.has(t)){const s=this._document.createElement("style");s.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),s.textContent=this._getAnimationText(),e.appendChild(s),r||(r=new Set,n.set(e,r)),r.add(t)}}_getAnimationText(){const e=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*e).replace(/END_VALUE/g,""+.2*e).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}Ka._diameters=new WeakMap,Ka.\u0275fac=function(e){return new(e||Ka)(R(Wt),R(wr),R(kt,8),R(Ks,8),R(mae),R(Qn),R(Pw),R(Et))},Ka.\u0275cmp=St({type:Ka,selectors:[["mat-progress-spinner"],["mat-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner","mat-spinner"],hostVars:10,hostBindings:function(e,t){2&e&&(Qt("aria-valuemin","determinate"===t.mode?0:null)("aria-valuemax","determinate"===t.mode?100:null)("aria-valuenow","determinate"===t.mode?t.value:null)("mode",t.mode),fc("width",t.diameter,"px")("height",t.diameter,"px"),ui("_mat-animation-noopable",t._noopAnimations))},inputs:{color:"color",diameter:"diameter",strokeWidth:"strokeWidth",mode:"mode",value:"value"},exportAs:["matProgressSpinner"],features:[ut],decls:4,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["svg",""],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width","transform-origin",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,t){1&e&&(vo(),ce(0,"svg",0,1),Fe(2,dae,1,11,"circle",2),Fe(3,hae,1,9,"circle",3),he()),2&e&&(fc("width",t.diameter,"px")("height",t.diameter,"px"),ie("ngSwitch","indeterminate"===t.mode),Qt("viewBox",t._getViewBox()),ne(2),ie("ngSwitchCase",!0),ne(1),ie("ngSwitchCase",!1))},dependencies:[pp,qx],styles:[".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:rgba(0,0,0,0);transition:stroke-dashoffset 225ms linear}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:CanvasText}.mat-progress-spinner[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}.mat-progress-spinner[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}.mat-progress-spinner._mat-animation-noopable svg,.mat-progress-spinner._mat-animation-noopable circle{animation:none;transition:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}"],encapsulation:2,changeDetection:0});let vae=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,$a,Mn]}),i})();const yae=["previewCanvasContainer"],bae=["previewCanvas"];function xae(i,e){if(1&i&&(ce(0,"mat-option",14),ot(1),he()),2&i){const t=e.$implicit;ie("value",t),ne(1),Xr(" ",t," ")}}function wae(i,e){if(1&i){const t=yr();Io(0),ce(1,"mat-form-field",1)(2,"mat-label"),ot(3,"Custom FAM path"),he(),bt(4,"input",15,16),ai(6,"async"),he(),ce(7,"button",17),ct("click",function(){pn(t);const r=bl(5);return En(Oe().onFamSelected(r.value))}),ot(8,"LOAD"),he(),Ro()}if(2&i){const t=Oe();ne(4),ie("value",gi(6,1,t.previewFamLocation$))}}function Mae(i,e){1&i&&bt(0,"mat-spinner",18),2&i&&ie("diameter",40)}function Cae(i,e){1&i&&bt(0,"mat-spinner",19)}let Sae=(()=>{class i{constructor(t,n,r){this.eelDelegate=t,this.cdr=n,this.mainService=r,this._resourceData$=new wn(null),this.changed=new et,this.previewLoading$=new wn(!0),this.previewFamLocation$=new wn(null),this.previewFamLoading$=new wn(!1),this.previewMtlInstance=null,this.name="",this.entity=null,this.skySphere=new Tu(new Fl(new _i(new Rm(1e3),new Za({side:2,color:16777215})))),this.destroyed$=new He}get resourceData(){return this._resourceData$.getValue()}set resourceData(t){this._resourceData$.next(t)}get previewFamPossibleLocations(){const t=this.resourceData?.block_id;return t?[t.substring(0,t.indexOf("MISC"))+"ETRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_001.FAM",t.substring(0,t.indexOf("MISC"))+"GTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_001.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_M01.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_R01.FAM",t.substring(0,t.indexOf("MISC"))+"NTRACKFM"+t.substr(t.indexOf("MISC")+4,4)+"_T01.FAM"]:[]}ngAfterViewInit(){var t=this;return ei(function*(){var s;t.world=new FU(new AH,{init:(s=ei(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield t.world.init(),t.skySphere.rotation=to.fromEuler({x:Math.PI/2,y:0,z:0}),t.world.addEntity(t.skySphere),t.world.visualScene.nativeScene.add(new gR(16777215,2));let n=new wn({x:1,y:1});t.renderer=new TH(t.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),t.renderer.camera.position={x:0,y:0,z:2.5},t.renderer.camera.rotation=to.lookAt(t.renderer.camera.position,zt.add(t.renderer.camera.position,{x:0,y:1,z:0}),{x:0,y:0,z:1}),t.world.addEntity(t.renderer),VT(t.world).pipe(at(t.destroyed$)).subscribe(()=>{t.skySphere.position=t.renderer.camera.position}),t.controller=new RQ(t.world.keyboardInput,t.renderer.camera,{mouseOptions:{canvas:t.previewCanvas.nativeElement,pointerLock:!0},keymap:"wasd+arrows",movementOptions:{speed:1}}),t.world.addEntity(t.controller);const r=()=>{n.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var s=ei(function*(o){t.previewLoading$.next(!0),t.previewFamPossibleLocations[0]&&(t.previewFamLocation$.next(t.previewFamPossibleLocations[0]),yield t.onFamSelected(t.previewFamPossibleLocations[0])),yield t.loadPreviewObjPath(o?.block_id),yield t.loadPreview(),t.previewLoading$.next(!1)});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(at(t.destroyed$),Dn(([s,o])=>!!t.resourceData&&s.startsWith(t.resourceData.block_id)),vv(1500)).subscribe(ei(function*(){t.previewLoading$.next(!0),yield t.postTmpUpdates(t.resourceData?.block_id),yield t.loadPreview(),t.previewLoading$.next(!1)}))})()}onFamSelected(t){var n=this;return ei(function*(){if("custom"!=t){n.previewFamLoading$.next(!0);try{const r=yield n.eelDelegate.serializeResource(t),o=r.filter(d=>d.includes(".FAM/background")&&d.endsWith(".png")).map(d=>`newmtl ${d.substring(d.lastIndexOf("background")+11,d.lastIndexOf(".png"))}\n        Ka 1.000000 1.000000 1.000000\n        Kd 1.000000 1.000000 1.000000\n        Ks 0.000000 0.000000 0.000000\n        illum 1\n        Ns 0.000000\n        map_Kd ${d}\n`).join("\n"),a=new LH;n.previewMtlInstance=yield a.parse(o,""),n.previewMtlInstance.preload();const l=new sH,c=r.find(d=>d.endsWith("spherical.png"));if(c){const d=yield l.loadAsync(c);d.encoding=ti,n.skySphere.object3D.nativeMesh.material.map=d}else n.skySphere.object3D.nativeMesh.material.map=null;n.skySphere.object3D.nativeMesh.material.needsUpdate=!0}finally{n.previewFamLoading$.next(!1)}yield n.loadPreview()}})()}loadPreviewObjPath(t){var n=this;return ei(function*(){if(t){const r=yield n.eelDelegate.serializeResource(t,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!1,maps__save_collisions:!1,maps__save_spherical_skybox_texture:!0});n.previewObjPath=r.find(s=>s.endsWith(".obj"))}else n.previewObjPath=void 0})()}loadPreview(){var t=this;return ei(function*(){if(!t.previewObjPath)return;const n=new OH;t.previewMtlInstance&&n.setMaterials(t.previewMtlInstance);const r=yield n.loadAsync(t.previewObjPath);r.traverse(s=>{if(s instanceof _i){const o=s.material instanceof Array?s.material:[s.material];for(const a of o)a.transparent=!0,a.alphaTest=.5,a instanceof Za&&a.map&&(a.map.wrapS=Mr,a.map.wrapT=Mr,a.map.needsUpdate=!0),a.side=2}}),t.unloadPreview(),t.entity=new Tu(new Fl(r),null),t.world.addEntity(t.entity),t.cdr.markForCheck()})()}unloadPreview(){this.entity&&(this.world.removeEntity(this.entity),this.entity.dispose(),this.entity=null,this.cdr.markForCheck())}postTmpUpdates(t){var n=this;return ei(function*(){if(t){const r=yield n.eelDelegate.serializeResourceTmp(t,Object.entries(n.mainService.changedDataBlocks).filter(([s,o])=>"__custom_action_performed__"!=s&&s.startsWith(t)).map(([s,o])=>({id:s,value:o})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,maps__save_as_chunked:!1,maps__save_collisions:!1,maps__save_spherical_skybox_texture:!0});n.previewObjPath=r.find(s=>s.endsWith(".obj"))}else n.previewObjPath=void 0})()}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(Vp),R(Qn),R(Qw))},i.\u0275cmp=St({type:i,selectors:[["app-tri-map-block-ui"]],viewQuery:function(t,n){if(1&t&&(qi(yae,5),qi(bae,5)),2&t){let r;$t(r=jt())&&(n.previewCanvasContainer=r.first),$t(r=jt())&&(n.previewCanvas=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:24,vars:16,consts:[[1,"famSelector"],["appearance","fill"],[3,"value","valueChange"],["famSelect",""],[3,"value",4,"ngFor","ngForOf"],["value","custom"],[4,"ngIf"],["mode","indeterminate",3,"diameter",4,"ngIf"],[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[3,"resourceData"],[3,"value"],["matInput","","type","text",3,"value"],["customFamInput",""],["mat-button","",3,"click"],["mode","indeterminate",3,"diameter"],["mode","indeterminate"]],template:function(t,n){if(1&t&&(ce(0,"div",0)(1,"h4"),ot(2,"Preview *.FAM file"),he(),ce(3,"mat-form-field",1)(4,"mat-label"),ot(5,"Current preview FAM"),he(),ce(6,"mat-select",2,3),ct("valueChange",function(s){return n.onFamSelected(s)}),ai(8,"async"),ai(9,"async"),Fe(10,xae,2,2,"mat-option",4),ce(11,"mat-option",5),ot(12,"custom"),he()()(),Fe(13,wae,9,3,"ng-container",6),Fe(14,Mae,1,1,"mat-spinner",7),ai(15,"async"),he(),ce(16,"div",8,9),bt(18,"canvas",10,11),Fe(20,Cae,1,0,"mat-spinner",12),ai(21,"async"),he(),bt(22,"app-compound-block-ui",13),ai(23,"async")),2&t){const r=bl(7);ne(6),ie("value",n.previewFamPossibleLocations.includes(gi(8,6,n.previewFamLocation$))?gi(9,8,n.previewFamLocation$):"custom"),ne(4),ie("ngForOf",n.previewFamPossibleLocations),ne(3),ie("ngIf","custom"==r.value),ne(1),ie("ngIf",gi(15,10,n.previewFamLoading$)),ne(6),ie("ngIf",gi(21,12,n.previewLoading$)),ne(2),ie("resourceData",gi(23,14,n._resourceData$))}},dependencies:[ua,lr,Xd,Sc,Up,Fp,cM,Av,Ka,aM,mp],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}.famSelector[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;column-gap:1rem}.famSelector[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{min-width:-moz-fit-content;min-width:fit-content}.famSelector[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.famSelector[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%], .famSelector[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:1.34375em}"],changeDetection:0}),i})();const Eae=["previewCanvasContainer"],Dae=["previewCanvas"];function Aae(i,e){1&i&&bt(0,"mat-spinner",6)}let Tae=(()=>{class i{constructor(t,n,r){this.eelDelegate=t,this.cdr=n,this.mainService=r,this._resourceData$=new wn(null),this.name="",this.changed=new et,this.destroyed$=new He,this.entity=null}get resourceData(){return this._resourceData$.getValue()}set resourceData(t){this._resourceData$.next(t)}ngAfterViewInit(){var t=this;return ei(function*(){var s;t.world=new FU(new AH,{init:(s=ei(function*(){}),function(){return s.apply(this,arguments)}),simulate:()=>{}}),yield t.world.init(),t.world.visualScene.nativeScene.add(new gR(16777215,2));let n=new wn({x:1,y:1});t.renderer=new TH(t.previewCanvas.nativeElement,{size:n.asObservable(),background:11184810}),t.renderer.camera.position={x:1,y:4,z:1.5},t.renderer.camera.rotation=to.lookAt(t.renderer.camera.position,{x:0,y:0,z:0},{x:0,y:0,z:1}),t.world.addEntity(t.renderer),t.controller=new kU(t.renderer.camera,{mouseOptions:{canvas:t.previewCanvas.nativeElement}}),t.world.addEntity(t.controller);const r=()=>{n.next({x:t.previewCanvasContainer.nativeElement.clientWidth,y:t.previewCanvasContainer.nativeElement.clientHeight})};new ResizeObserver(r).observe(t.previewCanvasContainer.nativeElement),r(),t.world.start(),t._resourceData$.pipe(at(t.destroyed$)).subscribe(function(){var s=ei(function*(o){const a=yield t.loadPreviewFilePaths(o?.block_id);a&&(yield t.loadPreview(a))});return function(o){return s.apply(this,arguments)}}()),t.mainService.dataBlockChange$.pipe(at(t.destroyed$),Dn(([s,o])=>!!t.resourceData&&s.startsWith(t.resourceData.block_id)),vv(1500)).subscribe(ei(function*(){t.unloadPreview();const s=yield t.postTmpUpdates(t.resourceData?.block_id);s&&(yield t.loadPreview(s))}))})()}postTmpUpdates(t){var n=this;return ei(function*(){if(t){const r=yield n.eelDelegate.serializeResourceTmp(t,Object.entries(n.mainService.changedDataBlocks).filter(([a,l])=>"__custom_action_performed__"!=a&&a.startsWith(t)).map(([a,l])=>({id:a,value:l})),{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreviewFilePaths(t){var n=this;return ei(function*(){if(t){const r=yield n.eelDelegate.serializeResource(t,{geometry__save_obj:!0,geometry__save_blend:!1,geometry__export_to_gg_web_engine:!1,geometry__replace_car_wheel_with_dummies:!1});return[r.find(a=>a.endsWith(".obj")),r.find(a=>a.endsWith(".mtl"))]}})()}loadPreview([t,n]){var r=this;return ei(function*(){r.unloadPreview();const s=new OH,a=yield(new LH).loadAsync(n);a.preload(),s.setMaterials(a);const l=yield s.loadAsync(t);l.traverse(f=>{if(f instanceof _i){const p=f.material instanceof Array?f.material:[f.material];for(const m of p)m.transparent=!0,m.alphaTest=.5,m instanceof Za&&m.map&&(m.map.wrapS=Mr,m.map.wrapT=Mr,m.map.needsUpdate=!0),m.side=2}}),r.entity=new Tu(new Fl(l),null),r.world.addEntity(r.entity),r.world.removeEntity(r.controller);const c=r.entity.object3D.getBoundings(),d=zt.scalarMult(zt.add(c.min,c.max),.5);r.renderer.camera.position=zt.add(d,zt.scalarMult(zt.norm({x:1,y:-4,z:1.5}),zt.dist(c.min,c.max))),r.controller=new kU(r.renderer.camera,{mouseOptions:{canvas:r.previewCanvas.nativeElement},target:d}),r.world.addEntity(r.controller),r.cdr.markForCheck()})()}unloadPreview(){this.entity&&(this.world.removeEntity(this.entity),this.entity.dispose(),this.entity=null,this.cdr.markForCheck())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.\u0275fac=function(t){return new(t||i)(R(Vp),R(Qn),R(Qw))},i.\u0275cmp=St({type:i,selectors:[["app-orip-geometry-block-ui"]],viewQuery:function(t,n){if(1&t&&(qi(Eae,5),qi(Dae,5)),2&t){let r;$t(r=jt())&&(n.previewCanvasContainer=r.first),$t(r=jt())&&(n.previewCanvas=r.first)}},inputs:{resourceData:"resourceData"},outputs:{changed:"changed"},decls:7,vars:4,consts:[[1,"previewCanvasContainer"],["previewCanvasContainer",""],["width","640","height","480"],["previewCanvas",""],["mode","indeterminate",4,"ngIf"],[3,"resourceData"],["mode","indeterminate"]],template:function(t,n){1&t&&(ce(0,"div",0,1),bt(2,"canvas",2,3),Fe(4,Aae,1,0,"mat-spinner",4),he(),bt(5,"app-compound-block-ui",5),ai(6,"async")),2&t&&(ne(4),ie("ngIf",!n.entity),ne(1),ie("resourceData",gi(6,2,n._resourceData$)))},dependencies:[lr,Ka,aM,mp],styles:[".previewCanvasContainer[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 14rem);position:relative;overflow:hidden;margin:0 0 16px;display:flex;align-items:center;justify-content:space-around}.previewCanvasContainer[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute}"],changeDetection:0}),i})();function Iae(i,e){if(1&i&&(ce(0,"mat-error"),ot(1),he()),2&i){const t=Oe(2);ne(1),B_(" ",t.error.error_class,": ",t.error.error_text," ")}}function Rae(i,e){1&i&&bt(0,"mat-spinner",5)}function Pae(i,e){if(1&i&&(ce(0,"div",2),Fe(1,Iae,2,2,"mat-error",3),Fe(2,Rae,1,0,"mat-spinner",4),he()),2&i){const t=Oe();ne(1),ie("ngIf",t.error),ne(1),ie("ngIf",!t.resourceData)}}function kae(i,e){}let Lm=(()=>{class i{constructor(t){this.mainService=t,this._component=null,this._componentChangedSub=null,this.destroyed$=new He,this._name="",this._resourceData=null}get name(){return this._name}set name(t){this._name=t,this._component?.instance&&(this._component.instance.name=t)}get resourceData(){return this._resourceData}get error(){return this._resourceData?.error_class?this._resourceData:null}set resourceData(t){if(this._resourceData=t,this.dataBlockUiHost.viewContainerRef.clear(),this._resourceData&&this._resourceData.block_class_mro){const n=this._resourceData;let r;for(const s of n.block_class_mro.split("__"))if(r=i.DATA_BLOCK_COMPONENTS_MAP[s],r)break;if(!r)throw new Error("Cannot find GUI component for block MRO "+n.block_class_mro);this._component&&this._componentChangedSub&&this._componentChangedSub.unsubscribe(),this._dataSnapshot=(0,RT.cloneDeep)(n.value),this._component=this.dataBlockUiHost.viewContainerRef.createComponent(r),this._component.instance.resourceData=n,this._component.instance.name=this._name,this._componentChangedSub=this._component.instance.changed.pipe(at(this.destroyed$)).subscribe(()=>{this.mainService.dataBlockChange$.next([n.block_id,(0,RT.isEqual)(n.value,this._dataSnapshot)?void 0:n.value])})}}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}}return i.DATA_BLOCK_COMPONENTS_MAP={DataBlock:FK,CompoundBlock:aM,ArrayBlock:_U,IntegerBlock:UK,AngleBlock:xJ,Utf8Block:zK,BytesField:vJ,EnumByteBlock:$J,BitFlagsBlock:lQ,BasePalette:gJ,AnyBitmapBlock:vU,TriMap:Sae,ShpiBlock:yU,WwwwBlock:CJ,OripGeometry:Tae},i.\u0275fac=function(t){return new(t||i)(R(Qw))},i.\u0275cmp=St({type:i,selectors:[["app-editor"]],viewQuery:function(t,n){if(1&t&&qi(gU,7),2&t){let r;$t(r=jt())&&(n.dataBlockUiHost=r.first)}},inputs:{name:"name",resourceData:"resourceData"},decls:2,vars:1,consts:[["id","error-spinner-wrapper",4,"ngIf"],["dataBlockUI",""],["id","error-spinner-wrapper"],[4,"ngIf"],["mode","indeterminate",4,"ngIf"],["mode","indeterminate"]],template:function(t,n){1&t&&(Fe(0,Pae,3,2,"div",0),Fe(1,kae,0,0,"ng-template",1)),2&t&&ie("ngIf",!n.resourceData||n.error)},dependencies:[lr,cZ,Ka,gU],styles:["[_nghost-%COMP%]{display:contents}[_nghost-%COMP%]    >*{flex-grow:1;max-width:100%}[_nghost-%COMP%]   #error-spinner-wrapper[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:space-around}"],changeDetection:0}),i})();function Oae(i,e){1&i&&(ce(0,"button",14),bt(1,"mat-icon",15),he()),2&i&&(Oe(),ie("matMenuTriggerFor",bl(22)))}function Lae(i,e){if(1&i){const t=yr();ce(0,"button",16),ct("click",function(){const s=pn(t).$implicit;return En(Oe().runCustomAction(s))}),ce(1,"span"),ot(2),he()()}if(2&i){const t=e.$implicit;ne(2),Pi(t.title)}}const Fae=function(){return[]};let Nae=(()=>{class i{constructor(t,n,r,s,o,a){this.eelDelegate=t,this.mainService=n,this.dialog=r,this.snackBar=s,this.cdr=o,this.appRef=a}saveResource(){var t=this;return ei(function*(){try{const n=Object.entries(t.mainService.changedDataBlocks).filter(([r,s])=>"__custom_action_performed__"!=r);yield t.eelDelegate.saveFile(n.map(([r,s])=>({id:r,value:s}))),t.mainService.clearUnsavedChanges(),t.snackBar.open("File Saved!","OK",{duration:1500})}catch(n){t.snackBar.open("Error while saving file! "+n.errorText,"OK :(",{duration:5e3})}})()}reloadResource(){var t=this;return ei(function*(){if(t.mainService.hasUnsavedChanges){let r=t.dialog.open(O3,{data:{text:"There are unsaved changes, which will be lost. Are you sure you want to reload file?"}});if(!(yield lT(r.afterClosed())))return}const n=t.mainService.eelDelegate.openedResourcePath$.getValue();n&&t.eelDelegate.openFile(n,!0).then(),t.cdr.markForCheck()})()}runCustomAction(t){var n=this;return ei(function*(){if(n.mainService.hasUnsavedChanges){let o=n.dialog.open(O3,{data:{text:"Cannot run custom action on a file with not saved changes. Do you want to save them first?"}});if(!(yield lT(o.afterClosed())))return;yield n.saveResource()}let r=n.dialog.open(EZ,{data:t});const s=yield lT(r.afterClosed());if(s)try{yield n.mainService.runCustomAction(n.mainService.resourceData$.getValue(),t,s),n.snackBar.open("Action performed!","OK",{duration:1500})}catch(o){n.mainService.clearUnsavedChanges(),n.reloadResource().then(),n.snackBar.open("Error while performing action! Reverting file state.. "+o.errorText||0,"OK :(",{duration:5e3})}})()}}return i.\u0275fac=function(t){return new(t||i)(R(Vp),R(Qw),R(Uw),R(FZ),R(Qn),R(kd))},i.\u0275cmp=St({type:i,selectors:[["app-root"]],decls:25,vars:24,consts:[["color","primary"],[1,"flex-spacer"],["mat-icon-button","","matTooltip","Reload file from disk",3,"disabled","click"],["fontIcon","refresh"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor",4,"ngIf"],["mat-icon-button","","matTooltip","Save changes to file",3,"disabled","click"],["fontIcon","save"],["id","content-wrapper"],[3,"resourceData"],["id","bmac"],["href","https://www.buymeacoffee.com/andygura","target","_blank"],["src","https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png","alt","Buy Me A Coffee",2,"height","60px !important","width","217px !important"],["customActionsMenu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Run custom action",3,"matMenuTriggerFor"],["fontIcon","bolt"],["mat-menu-item","",3,"click"]],template:function(t,n){if(1&t&&(ce(0,"mat-toolbar",0)(1,"span"),ot(2),ai(3,"async"),he(),bt(4,"span",1),ce(5,"button",2),ct("click",function(){return n.reloadResource()}),ai(6,"async"),bt(7,"mat-icon",3),he(),Fe(8,Oae,2,1,"button",4),ai(9,"async"),ce(10,"button",5),ct("click",function(){return n.saveResource()}),ai(11,"async"),bt(12,"mat-icon",6),he()(),ce(13,"div",7),bt(14,"app-editor",8),ai(15,"async"),ai(16,"async"),ai(17,"async"),ce(18,"div",9)(19,"a",10),bt(20,"img",11),he()()(),ce(21,"mat-menu",null,12),Fe(23,Lae,3,1,"button",13),ai(24,"async"),he()),2&t){let r,s,o;ne(2),B_("",(null==(r=gi(3,7,n.mainService.resourceData$))?null:r.block_id)||"...","",n.mainService.hasUnsavedChanges?"*":"",""),ne(3),ie("disabled",!gi(6,9,n.mainService.eelDelegate.openedResourcePath$)),ne(3),ie("ngIf",(null==(s=gi(9,11,n.mainService.resourceData$))||null==s.block.custom_actions?null:s.block.custom_actions.length)>0),ne(2),ie("disabled",!gi(11,13,n.mainService.resourceData$)||!n.mainService.hasUnsavedChanges),ne(4),ie("resourceData",gi(15,15,n.mainService.customActionRunning$)?null:gi(16,17,n.mainService.resourceData$)||gi(17,19,n.mainService.resourceError$)),ne(9),ie("ngForOf",(null==(o=gi(24,21,n.mainService.resourceData$))?null:o.block.custom_actions)||aa(23,Fae))}},dependencies:[ua,lr,zZ,kT,Fp,bK,IK,oM,OK,Lm,mp],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column}#content-wrapper[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;padding:1rem;height:100%}#bmac[_ngcontent-%COMP%]{text-align:end;margin-top:1rem}"],changeDetection:0}),i})();function FH(i){return new _e(3e3,!1)}function vle(){return typeof window<"u"&&typeof window.document<"u"}function ER(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function zu(i){switch(i.length){case 0:return new Tv;case 1:return i[0];default:return new D3(i)}}function NH(i,e,t,n,r=new Map,s=new Map){const o=[],a=[];let l=-1,c=null;if(n.forEach(d=>{const f=d.get("offset"),p=f==l,m=p&&c||new Map;d.forEach((_,b)=>{let y=b,v=_;if("offset"!==b)switch(y=e.normalizePropertyName(y,o),v){case"!":v=r.get(b);break;case Cc:v=s.get(b);break;default:v=e.normalizeStyleValue(b,y,v,o)}m.set(y,v)}),p||a.push(m),c=m,l=f}),o.length)throw function ole(i){return new _e(3502,!1)}();return a}function DR(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&AR(t,"start",i)));break;case"done":i.onDone(()=>n(t&&AR(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&AR(t,"destroy",i)))}}function AR(i,e,t){const s=TR(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),o=i._data;return null!=o&&(s._data=o),s}function TR(i,e,t,n,r="",s=0,o){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!o}}function Vo(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function BH(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let IR=(i,e)=>!1,UH=(i,e,t)=>[],VH=null;function RR(i){const e=i.parentNode||i.host;return e===VH?null:e}(ER()||typeof Element<"u")&&(vle()?(VH=(()=>document.documentElement)(),IR=(i,e)=>{for(;e;){if(e===i)return!0;e=RR(e)}return!1}):IR=(i,e)=>i.contains(e),UH=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let Mh=null,zH=!1;const HH=IR,GH=UH;let WH=(()=>{class i{validateStyleProperty(t){return function ble(i){Mh||(Mh=function xle(){return typeof document<"u"?document.body:null}()||{},zH=!!Mh.style&&"WebkitAppearance"in Mh.style);let e=!0;return Mh.style&&!function yle(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in Mh.style,!e&&zH&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Mh.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return HH(t,n)}getParentElement(t){return RR(t)}query(t,n,r){return GH(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,o,a=[],l){return new Tv(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})(),PR=(()=>{class i{}return i.NOOP=new WH,i})();const kR="ng-enter",AC="ng-leave",TC="ng-trigger",IC=".ng-trigger",jH="ng-animating",OR=".ng-animating";function Hu(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:LR(parseFloat(e[1]),e[2])}function LR(i,e){return"s"===e?1e3*i:i}function RC(i,e,t){return i.hasOwnProperty("duration")?i:function Cle(i,e,t){let r,s=0,o="";if("string"==typeof i){const a=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(FH()),{duration:0,delay:0,easing:""};r=LR(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=LR(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else r=i;if(!t){let a=!1,l=e.length;r<0&&(e.push(function Bae(){return new _e(3100,!1)}()),a=!0),s<0&&(e.push(function Uae(){return new _e(3101,!1)}()),a=!0),a&&e.splice(l,0,FH())}return{duration:r,delay:s,easing:o}}(i,e,t)}function by(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function qH(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function Gu(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function YH(i,e,t){return t?e+":"+t+";":""}function ZH(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=YH(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=YH(0,Ale(t),i.style[t]));i.setAttribute("style",e)}function Nl(i,e,t){i.style&&(e.forEach((n,r)=>{const s=NR(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),ER()&&ZH(i))}function Ch(i,e){i.style&&(e.forEach((t,n)=>{const r=NR(n);i.style[r]=""}),ER()&&ZH(i))}function xy(i){return Array.isArray(i)?1==i.length?i[0]:S3(i):i}const FR=new RegExp("{{\\s*(.+?)\\s*}}","g");function KH(i){let e=[];if("string"==typeof i){let t;for(;t=FR.exec(i);)e.push(t[1]);FR.lastIndex=0}return e}function PC(i,e,t){const n=i.toString(),r=n.replace(FR,(s,o)=>{let a=e[o];return null==a&&(t.push(function zae(i){return new _e(3003,!1)}()),a=""),a.toString()});return r==n?i:r}function kC(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const Dle=/-+([a-z0-9])/g;function NR(i){return i.replace(Dle,(...e)=>e[1].toUpperCase())}function Ale(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function zo(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function Hae(i){return new _e(3004,!1)}()}}function JH(i,e){return window.getComputedStyle(i)[e]}function Ole(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function Lle(i,e,t){if(":"==i[0]){const l=function Fle(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function nle(i){return new _e(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof l)return void e.push(l);i=l}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function tle(i){return new _e(3015,!1)}()),e;const r=n[1],s=n[2],o=n[3];e.push(QH(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(QH(o,r))}(n,t,e)):t.push(i),t}const NC=new Set(["true","1"]),BC=new Set(["false","0"]);function QH(i,e){const t=NC.has(i)||BC.has(i),n=NC.has(e)||BC.has(e);return(r,s)=>{let o="*"==i||i==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?NC.has(i):BC.has(i)),!a&&n&&"boolean"==typeof s&&(a=s?NC.has(e):BC.has(e)),o&&a}}const Nle=new RegExp("s*:selfs*,?","g");function BR(i,e,t,n){return new Ble(i).build(e,t,n)}class Ble{constructor(e){this._driver=e}build(e,t,n){const r=new zle(t);return this._resetContextStyleTimingState(r),zo(this,xy(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function Wae(){return new _e(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(d=>{l.name=d,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);n+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function $ae(){return new _e(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,o=r||{};n.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{KH(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(kC(s.values()),t.errors.push(function jae(i,e){return new _e(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=zo(this,xy(e.animation),t);return{type:1,matchers:Ole(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Sh(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>zo(this,n,t)),options:Sh(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=n;const a=zo(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Sh(e.options)}}visitAnimate(e,t){const n=function Gle(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return UR(RC(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=UR(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=RC(t,e);return UR(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:$n({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};n.easing&&(c.easing=n.easing),o=$n(c)}t.currentTime+=n.duration+n.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Cc?n.push(a):t.errors.push(new _e(3002,!1)):n.push(qH(a));let s=!1,o=null;return n.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),d=c.get(l);let f=!0;d&&(s!=r&&s>=d.startTime&&r<=d.endTime&&(t.errors.push(function Xae(i,e,t,n,r){return new _e(3010,!1)}()),f=!1),s=d.startTime),f&&c.set(l,{startTime:s,endTime:r}),t.options&&function Ele(i,e,t){const n=e.params||{},r=KH(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function Vae(i){return new _e(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function Yae(){return new _e(3011,!1)}()),n;let s=0;const o=[];let a=!1,l=!1,c=0;const d=e.steps.map(v=>{const M=this._makeStyleAst(v,t);let w=null!=M.offset?M.offset:function Hle(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(M.styles),C=0;return null!=w&&(s++,C=M.offset=w),l=l||C<0||C>1,a=a||C<c,c=C,o.push(C),M});l&&t.errors.push(function Zae(){return new _e(3012,!1)}()),a&&t.errors.push(function Kae(){return new _e(3200,!1)}());const f=e.steps.length;let p=0;s>0&&s<f?t.errors.push(function Jae(){return new _e(3202,!1)}()):0==s&&(p=1/(f-1));const m=f-1,_=t.currentTime,b=t.currentAnimateTimings,y=b.duration;return d.forEach((v,M)=>{const w=p>0?M==m?1:p*M:o[M],C=w*y;t.currentTime=_+b.delay+C,b.duration=C,this._validateStyleAst(v,t),v.offset=w,n.styles.push(v)}),n}visitReference(e,t){return{type:8,animation:zo(this,xy(e.animation),t),options:Sh(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Sh(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Sh(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function Ule(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(Nle,"")),i=i.replace(/@\*/g,IC).replace(/@\w+/g,t=>IC+"-"+t.slice(1)).replace(/:animating/g,OR),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,Vo(t.collectedStyles,t.currentQuerySelector,new Map);const a=zo(this,xy(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Sh(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Qae(){return new _e(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:RC(e.timings,t.errors,!0);return{type:12,animation:zo(this,xy(e.animation),t),timings:n,options:null}}}class zle{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Sh(i){return i?(i=by(i)).params&&(i.params=function Vle(i){return i?by(i):null}(i.params)):i={},i}function UR(i,e,t){return{duration:i,delay:e,easing:t}}function VR(i,e,t,n,r,s,o=null,a=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class UC{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const jle=new RegExp(":enter","g"),Xle=new RegExp(":leave","g");function zR(i,e,t,n,r,s=new Map,o=new Map,a,l,c=[]){return(new Yle).buildKeyframes(i,e,t,n,r,s,o,a,l,c)}class Yle{buildKeyframes(e,t,n,r,s,o,a,l,c,d=[]){c=c||new UC;const f=new HR(e,t,c,r,s,d,[]);f.options=l;const p=l.delay?Hu(l.delay):0;f.currentTimeline.delayNextStep(p),f.currentTimeline.setStyles([o],null,f.errors,l),zo(this,n,f);const m=f.timelines.filter(_=>_.containsAnimation());if(m.length&&a.size){let _;for(let b=m.length-1;b>=0;b--){const y=m[b];if(y.element===t){_=y;break}}_&&!_.allowOnlyTimelineStyles()&&_.setStyles([a],null,f.errors,l)}return m.length?m.map(_=>_.buildKeyframes()):[VR(t,[],[],[],0,p,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(n,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const o=null!=n.duration?Hu(n.duration):null,a=null!=n.delay?Hu(n.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),zo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=VC);const o=Hu(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>zo(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Hu(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),zo(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),n.push(a.currentTimeline)}),n.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return RC(t.params?PC(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,a=t.createSubContext().currentTimeline;a.easing=n.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Hu(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=VC);let o=n;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,d)=>{t.currentQueryIndex=d;const f=t.createSubContext(e.options,c);s&&f.delayNextStep(s),c===t.element&&(l=f.currentTimeline),zo(this,e.animation,f),f.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,f.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=n.currentStaggerTime}const d=t.currentTimeline;l&&d.delayNextStep(l);const f=d.currentTime;zo(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-f+(r.startTime-n.currentTimeline.startTime)}}const VC={};class HR{constructor(e,t,n,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=VC,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new zC(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=Hu(n.duration)),null!=n.delay&&(r.delay=Hu(n.delay));const s=n.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=PC(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new HR(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=VC,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new Zle(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(jle,"."+this._enterClassName)).replace(Xle,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=n);0!==n&&(c=n<0?c.slice(c.length+n,c.length):c.slice(0,n)),a.push(...c)}return!s&&0==a.length&&o.push(function ele(i){return new _e(3014,!1)}()),a}}class zC{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new zC(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||Cc),this._currentKeyframe.set(t,Cc);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function Kle(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,Cc)}else Gu(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=PC(l,s,n);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Cc),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const c=Gu(a,new Map,this._backFill);c.forEach((d,f)=>{"!"===d?e.add(f):d===Cc&&t.add(f)}),n||c.set("offset",l/this.duration),r.push(c)});const s=e.size?kC(e.values()):[],o=t.size?kC(t.values()):[];if(n){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return VR(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class Zle extends zC{constructor(e,t,n,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=n+t,a=t/o,l=Gu(e[0]);l.set("offset",0),s.push(l);const c=Gu(e[0]);c.set("offset",n4(a)),s.push(c);const d=e.length-1;for(let f=1;f<=d;f++){let p=Gu(e[f]);const m=p.get("offset");p.set("offset",n4((t+m*n)/o)),s.push(p)}n=o,t=0,r="",e=s}return VR(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function n4(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class GR{}const Jle=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Qle extends GR{normalizePropertyName(e,t){return NR(e)}normalizeStyleValue(e,t,n,r){let s="";const o=n.toString().trim();if(Jle.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const a=n.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function Gae(i,e){return new _e(3005,!1)}())}return o+s}}function i4(i,e,t,n,r,s,o,a,l,c,d,f,p){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:d,totalTime:f,errors:p}}const WR={};class r4{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function ece(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,o,a,l,c,d){const f=[],p=this.ast.options&&this.ast.options.params||WR,_=this.buildStyles(n,a&&a.params||WR,f),b=l&&l.params||WR,y=this.buildStyles(r,b,f),v=new Set,M=new Map,w=new Map,C="void"===r,D={params:tce(b,p),delay:this.ast.options?.delay},I=d?[]:zR(e,t,this.ast.animation,s,o,_,y,D,c,f);let N=0;if(I.forEach(A=>{N=Math.max(A.duration+A.delay,N)}),f.length)return i4(t,this._triggerName,n,r,C,_,y,[],[],M,w,N,f);I.forEach(A=>{const k=A.element,ee=Vo(M,k,new Set);A.preStyleProps.forEach($=>ee.add($));const le=Vo(w,k,new Set);A.postStyleProps.forEach($=>le.add($)),k!==t&&v.add(k)});const V=kC(v.values());return i4(t,this._triggerName,n,r,C,_,y,I,V,M,w,N)}}function tce(i,e){const t=by(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class nce{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=by(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=PC(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),n.set(l,o)})}),n}}class rce{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new nce(r.style,r.options&&r.options.params||{},n))}),s4(this.states,"true","1"),s4(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new r4(e,r,this.states))}),this.fallbackTransition=function sce(i,e,t){return new r4(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(o=>o.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function s4(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const oce=new UC;class ace{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],s=BR(this._driver,t,n,[]);if(n.length)throw function ale(i){return new _e(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=NH(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=zR(this._driver,t,s,kR,AC,new Map,new Map,n,oce,r),o.forEach(d=>{const f=Vo(a,d.element,new Map);d.postStyleProps.forEach(p=>f.set(p,null))})):(r.push(function lle(){return new _e(3300,!1)}()),o=[]),r.length)throw function cle(i){return new _e(3504,!1)}();a.forEach((d,f)=>{d.forEach((p,m)=>{d.set(m,this._driver.computeStyle(f,m,Cc))})});const c=zu(o.map(d=>{const f=a.get(d.element);return this._buildPlayer(d,new Map,f)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function ule(i){return new _e(3301,!1)}();return t}listen(e,t,n,r){const s=TR(t,"","","");return DR(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const o4="ng-animate-queued",$R="ng-animate-disabled",hce=[],a4={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fce={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},xa="__ng_removed";class jR{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function _ce(i){return i??null}(n?e.value:e),n){const s=by(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const wy="void",qR=new jR(wy);class pce{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,wa(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function dle(i,e){return new _e(3302,!1)}();if(null==n||0==n.length)throw function hle(i){return new _e(3303,!1)}();if(!function vce(i){return"start"==i||"done"==i}(n))throw function fle(i,e){return new _e(3400,!1)}();const s=Vo(this._elementListeners,e,[]),o={name:t,phase:n,callback:r};s.push(o);const a=Vo(this._engine.statesByElement,e,new Map);return a.has(t)||(wa(e,TC),wa(e,TC+"-"+t),a.set(t,qR)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function ple(i){return new _e(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),o=new XR(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(wa(e,TC),wa(e,TC+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new jR(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=qR),c.value!==wy&&l.value===c.value){if(!function xce(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(l.params,c.params)){const b=[],y=s.matchStyles(l.value,l.params,b),v=s.matchStyles(c.value,c.params,b);b.length?this._engine.reportError(b):this._engine.afterFlush(()=>{Ch(e,y),Nl(e,v)})}return}const p=Vo(this._engine.playersByElement,e,[]);p.forEach(b=>{b.namespaceId==this.id&&b.triggerName==t&&b.queued&&b.destroy()});let m=s.matchTransition(l.value,c.value,e,c.params),_=!1;if(!m){if(!r)return;m=s.fallbackTransition,_=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:m,fromState:l,toState:c,player:o,isFallbackTransition:_}),_||(wa(e,o4),o.onStart(()=>{Fm(e,o4)})),o.onDone(()=>{let b=this.players.indexOf(o);b>=0&&this.players.splice(b,1);const y=this._engine.playersByElement.get(e);if(y){let v=y.indexOf(o);v>=0&&y.splice(v,1)}}),this.players.push(o),p.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,IC,!0);n.forEach(r=>{if(r[xa])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const d=this.trigger(e,c,wy,r);d&&a.push(d)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),n&&zu(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,c=n.get(o)||qR,d=new jR(wy),f=new XR(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:d,player:f,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(n.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[xa];(!s||s===a4)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){wa(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==n.triggerName){const l=TR(s,n.triggerName,n.fromState.value,n.toState.value);l._data=e,DR(n.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class mce{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new pce(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const c=n.indexOf(l);n.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(HC(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!HC(t))return;const s=t[xa];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),wa(e,$R)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Fm(e,$R))}removeNode(e,t,n,r){if(HC(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[xa]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return HC(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,IC,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,OR,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zu(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[xa];if(t&&t.setForRemoval){if(e[xa]=a4,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains($R)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)wa(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?zu(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function mle(i){return new _e(3402,!1)}()}_flushAnimations(e,t){const n=new UC,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,d=new Set;this.disabledNodes.forEach(q=>{d.add(q);const Q=this.driver.query(q,".ng-animate-queued",!0);for(let Y=0;Y<Q.length;Y++)d.add(Q[Y])});const f=this.bodyNode,p=Array.from(this.statesByElement.keys()),m=u4(p,this.collectedEnterElements),_=new Map;let b=0;m.forEach((q,Q)=>{const Y=kR+b++;_.set(Q,Y),q.forEach(ae=>wa(ae,Y))});const y=[],v=new Set,M=new Set;for(let q=0;q<this.collectedLeaveElements.length;q++){const Q=this.collectedLeaveElements[q],Y=Q[xa];Y&&Y.setForRemoval&&(y.push(Q),v.add(Q),Y.hasAnimation?this.driver.query(Q,".ng-star-inserted",!0).forEach(ae=>v.add(ae)):M.add(Q))}const w=new Map,C=u4(p,Array.from(v));C.forEach((q,Q)=>{const Y=AC+b++;w.set(Q,Y),q.forEach(ae=>wa(ae,Y))}),e.push(()=>{m.forEach((q,Q)=>{const Y=_.get(Q);q.forEach(ae=>Fm(ae,Y))}),C.forEach((q,Q)=>{const Y=w.get(Q);q.forEach(ae=>Fm(ae,Y))}),y.forEach(q=>{this.processLeaveNode(q)})});const D=[],I=[];for(let q=this._namespaceList.length-1;q>=0;q--)this._namespaceList[q].drainQueuedTransitions(t).forEach(Y=>{const ae=Y.player,we=Y.element;if(D.push(ae),this.collectedEnterElements.length){const Z=we[xa];if(Z&&Z.setForMove){if(Z.previousTriggersValues&&Z.previousTriggersValues.has(Y.triggerName)){const dt=Z.previousTriggersValues.get(Y.triggerName),rt=this.statesByElement.get(Y.element);if(rt&&rt.has(Y.triggerName)){const Re=rt.get(Y.triggerName);Re.value=dt,rt.set(Y.triggerName,Re)}}return void ae.destroy()}}const qe=!f||!this.driver.containsElement(f,we),ke=w.get(we),oe=_.get(we),de=this._buildInstruction(Y,n,oe,ke,qe);if(de.errors&&de.errors.length)return void I.push(de);if(qe)return ae.onStart(()=>Ch(we,de.fromStyles)),ae.onDestroy(()=>Nl(we,de.toStyles)),void r.push(ae);if(Y.isFallbackTransition)return ae.onStart(()=>Ch(we,de.fromStyles)),ae.onDestroy(()=>Nl(we,de.toStyles)),void r.push(ae);const Ne=[];de.timelines.forEach(Z=>{Z.stretchStartingKeyframe=!0,this.disabledNodes.has(Z.element)||Ne.push(Z)}),de.timelines=Ne,n.append(we,de.timelines),o.push({instruction:de,player:ae,element:we}),de.queriedElements.forEach(Z=>Vo(a,Z,[]).push(ae)),de.preStyleProps.forEach((Z,dt)=>{if(Z.size){let rt=l.get(dt);rt||l.set(dt,rt=new Set),Z.forEach((Re,st)=>rt.add(st))}}),de.postStyleProps.forEach((Z,dt)=>{let rt=c.get(dt);rt||c.set(dt,rt=new Set),Z.forEach((Re,st)=>rt.add(st))})});if(I.length){const q=[];I.forEach(Q=>{q.push(function gle(i,e){return new _e(3505,!1)}())}),D.forEach(Q=>Q.destroy()),this.reportError(q)}const N=new Map,V=new Map;o.forEach(q=>{const Q=q.element;n.has(Q)&&(V.set(Q,Q),this._beforeAnimationBuild(q.player.namespaceId,q.instruction,N))}),r.forEach(q=>{const Q=q.element;this._getPreviousPlayers(Q,!1,q.namespaceId,q.triggerName,null).forEach(ae=>{Vo(N,Q,[]).push(ae),ae.destroy()})});const A=y.filter(q=>h4(q,l,c)),k=new Map;c4(k,this.driver,M,c,Cc).forEach(q=>{h4(q,l,c)&&A.push(q)});const le=new Map;m.forEach((q,Q)=>{c4(le,this.driver,new Set(q),l,"!")}),A.forEach(q=>{const Q=k.get(q),Y=le.get(q);k.set(q,new Map([...Array.from(Q?.entries()??[]),...Array.from(Y?.entries()??[])]))});const $=[],X=[],re={};o.forEach(q=>{const{element:Q,player:Y,instruction:ae}=q;if(n.has(Q)){if(d.has(Q))return Y.onDestroy(()=>Nl(Q,ae.toStyles)),Y.disabled=!0,Y.overrideTotalTime(ae.totalTime),void r.push(Y);let we=re;if(V.size>1){let ke=Q;const oe=[];for(;ke=ke.parentNode;){const de=V.get(ke);if(de){we=de;break}oe.push(ke)}oe.forEach(de=>V.set(de,we))}const qe=this._buildAnimation(Y.namespaceId,ae,N,s,le,k);if(Y.setRealPlayer(qe),we===re)$.push(Y);else{const ke=this.playersByElement.get(we);ke&&ke.length&&(Y.parentPlayer=zu(ke)),r.push(Y)}}else Ch(Q,ae.fromStyles),Y.onDestroy(()=>Nl(Q,ae.toStyles)),X.push(Y),d.has(Q)&&r.push(Y)}),X.forEach(q=>{const Q=s.get(q.element);if(Q&&Q.length){const Y=zu(Q);q.setRealPlayer(Y)}}),r.forEach(q=>{q.parentPlayer?q.syncPlayerEvents(q.parentPlayer):q.destroy()});for(let q=0;q<y.length;q++){const Q=y[q],Y=Q[xa];if(Fm(Q,AC),Y&&Y.hasAnimation)continue;let ae=[];if(a.size){let qe=a.get(Q);qe&&qe.length&&ae.push(...qe);let ke=this.driver.query(Q,OR,!0);for(let oe=0;oe<ke.length;oe++){let de=a.get(ke[oe]);de&&de.length&&ae.push(...de)}}const we=ae.filter(qe=>!qe.destroyed);we.length?yce(this,Q,we):this.processLeaveNode(Q)}return y.length=0,$.forEach(q=>{this.players.push(q),q.onDone(()=>{q.destroy();const Q=this.players.indexOf(q);this.players.splice(Q,1)}),q.play()}),$}elementContainsData(e,t){let n=!1;const r=t[xa];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==wy;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(n||r)&&(o=o.filter(a=>!(n&&n!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,n){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,d=c!==s,f=Vo(n,c,[]);this._getPreviousPlayers(c,d,o,a,t.toState).forEach(m=>{const _=m.getRealPlayer();_.beforeDestroy&&_.beforeDestroy(),m.destroy(),f.push(m)})}Ch(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,o){const a=t.triggerName,l=t.element,c=[],d=new Set,f=new Set,p=t.timelines.map(_=>{const b=_.element;d.add(b);const y=b[xa];if(y&&y.removedBeforeQueried)return new Tv(_.duration,_.delay);const v=b!==l,M=function bce(i){const e=[];return d4(i,e),e}((n.get(b)||hce).map(N=>N.getRealPlayer())).filter(N=>!!N.element&&N.element===b),w=s.get(b),C=o.get(b),D=NH(0,this._normalizer,0,_.keyframes,w,C),I=this._buildPlayer(_,D,M);if(_.subTimeline&&r&&f.add(b),v){const N=new XR(e,a,b);N.setRealPlayer(I),c.push(N)}return I});c.forEach(_=>{Vo(this.playersByQueriedElement,_.element,[]).push(_),_.onDone(()=>function gce(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,_.element,_))}),d.forEach(_=>wa(_,jH));const m=zu(p);return m.onDestroy(()=>{d.forEach(_=>Fm(_,jH)),Nl(l,t.toStyles)}),f.forEach(_=>{Vo(r,_,[]).push(m)}),m}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new Tv(e.duration,e.delay)}}class XR{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new Tv,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>DR(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Vo(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function HC(i){return i&&1===i.nodeType}function l4(i,e){const t=i.style.display;return i.style.display=e??"none",t}function c4(i,e,t,n,r){const s=[];t.forEach(l=>s.push(l4(l)));const o=[];n.forEach((l,c)=>{const d=new Map;l.forEach(f=>{const p=e.computeStyle(c,f,r);d.set(f,p),(!p||0==p.length)&&(c[xa]=fce,o.push(c))}),i.set(c,d)});let a=0;return t.forEach(l=>l4(l,s[a++])),o}function u4(i,e){const t=new Map;if(i.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:r.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function wa(i,e){i.classList?.add(e)}function Fm(i,e){i.classList?.remove(e)}function yce(i,e,t){zu(t).onDone(()=>i.processLeaveNode(e))}function d4(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof D3?d4(n.players,e):e.push(n)}}function h4(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class GC{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new mce(e,t,n),this._timelineEngine=new ace(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],d=BR(this._driver,s,l,[]);if(l.length)throw function sle(i,e){return new _e(3404,!1)}();a=function ice(i,e,t){return new rce(i,e,t)}(r,d,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,o]=BH(n);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[o,a]=BH(n);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let Mce=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Nl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Nl(this._element,this._initialStyles),this._endStyles&&(Nl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Ch(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ch(this._element,this._endStyles),this._endStyles=null),Nl(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function YR(i){let e=null;return i.forEach((t,n)=>{(function Cce(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class f4{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:JH(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Sce{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return HH(e,t)}getParentElement(e){return RR(e)}query(e,t,n){return GH(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,o=[]){const l={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const c=new Map,d=o.filter(m=>m instanceof f4);(function Tle(i,e){return 0===i||0===e})(n,r)&&d.forEach(m=>{m.currentSnapshot.forEach((_,b)=>c.set(b,_))});let f=function Sle(i){return i.length?i[0]instanceof Map?i:i.map(e=>qH(e)):[]}(t).map(m=>Gu(m));f=function Ile(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,o)=>{n.has(o)||r.push(o),n.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,JH(i,a)))}}return e}(e,f,c);const p=function wce(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=YR(e[0]),e.length>1&&(n=YR(e[e.length-1]))):e instanceof Map&&(t=YR(e)),t||n?new Mce(i,t,n):null}(e,f);return new f4(e,f,l,p)}}let Ece=(()=>{class i extends M3{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:Hs.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?S3(t):t;return p4(this._renderer,null,n,"register",[r]),new Dce(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(j(hu),j(kt))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class Dce extends class TX{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Ace(this._id,e,t||{},this._renderer)}}class Ace{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return p4(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function p4(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const m4="@.disabled";let Tce=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let d=this._rendererCache.get(s);return d||(d=new g4("",s,this.engine),this._rendererCache.set(s,d)),d}const o=n.id,a=n.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=d=>{Array.isArray(d)?d.forEach(l):this.engine.registerTrigger(o,a,t,d.name,d)};return n.data.animation.forEach(l),new Ice(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(j(hu),j(GC),j(Et))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})();class g4{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==m4?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Ice extends g4{constructor(e,t,n,r){super(t,n,r),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==m4?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function Rce(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Pce(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,n,a)})}return this.delegate.listen(e,t,n)}}const _4=[{provide:M3,useClass:Ece},{provide:GR,useFactory:function Oce(){return new Qle}},{provide:GC,useClass:(()=>{class i extends GC{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(j(kt),j(PR),j(GR),j(kd))},i.\u0275prov=Pe({token:i,factory:i.\u0275fac}),i})()},{provide:hu,useFactory:function Lce(i,e,t){return new Tce(i,e,t)},deps:[Jx,GC,Et]}],ZR=[{provide:PR,useFactory:()=>new Sce},{provide:Ks,useValue:"BrowserAnimations"},..._4],v4=[{provide:PR,useClass:WH},{provide:Ks,useValue:"NoopAnimations"},..._4];let Fce=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?v4:ZR}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:ZR,imports:[JF]}),i})();const y4=new Se("CdkAccordion");let Nce=0,Bce=(()=>{class i{constructor(t,n,r){this.accordion=t,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=Zt.EMPTY,this.closed=new et,this.opened=new et,this.destroyed=new et,this.expandedChange=new et,this.id="cdk-accordion-child-"+Nce++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=Gn(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=Gn(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return i.\u0275fac=function(t){return new(t||i)(R(y4,12),R(Qn),R(xU))},i.\u0275dir=Le({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Nn([{provide:y4,useValue:void 0}])]}),i})(),Uce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({}),i})();const Vce=["body"];function zce(i,e){}const Hce=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Gce=["mat-expansion-panel-header","*","mat-action-row"];function Wce(i,e){1&i&&bt(0,"span",2),2&i&&ie("@indicatorRotate",Oe()._getExpandedState())}const $ce=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],jce=["mat-panel-title","mat-panel-description","*"],b4=new Se("MAT_ACCORDION"),x4="225ms cubic-bezier(0.4,0.0,0.2,1)",w4={indicatorRotate:El("indicatorRotate",[fs("collapsed, void",$n({transform:"rotate(0deg)"})),fs("expanded",$n({transform:"rotate(180deg)"})),Rs("expanded <=> collapsed, void => collapsed",eo(x4))]),bodyExpansion:El("bodyExpansion",[fs("collapsed, void",$n({height:"0px",visibility:"hidden"})),fs("expanded",$n({height:"*",visibility:"visible"})),Rs("expanded <=> collapsed, void => collapsed",eo(x4))])},M4=new Se("MAT_EXPANSION_PANEL");let qce=(()=>{class i{constructor(t,n){this._template=t,this._expansionPanel=n}}return i.\u0275fac=function(t){return new(t||i)(R(Zs),R(M4,8))},i.\u0275dir=Le({type:i,selectors:[["ng-template","matExpansionPanelContent",""]]}),i})(),Xce=0;const C4=new Se("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let S4=(()=>{class i extends Bce{constructor(t,n,r,s,o,a,l){super(t,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new et,this.afterCollapse=new et,this._inputChanges=new He,this._headerId="mat-expansion-panel-header-"+Xce++,this._bodyAnimationDone=new He,this.accordion=t,this._document=o,this._bodyAnimationDone.pipe(Mw((c,d)=>c.fromState===d.fromState&&c.toState===d.toState)).subscribe(c=>{"void"!==c.fromState&&("expanded"===c.toState?this.afterExpand.emit():"collapsed"===c.toState&&this.afterCollapse.emit())}),l&&(this.hideToggle=l.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=Gn(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(hs(null),Dn(()=>this.expanded&&!this._portal),Si(1)).subscribe(()=>{this._portal=new Rp(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,n=this._body.nativeElement;return t===n||n.contains(t)}return!1}}return i.\u0275fac=function(t){return new(t||i)(R(b4,12),R(Qn),R(xU),R(Yr),R(kt),R(Ks,8),R(C4,8))},i.\u0275cmp=St({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(t,n,r){if(1&t&&Ci(r,qce,5),2&t){let s;$t(s=jt())&&(n._lazyContent=s.first)}},viewQuery:function(t,n){if(1&t&&qi(Vce,5),2&t){let r;$t(r=jt())&&(n._body=r.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,n){2&t&&ui("mat-expanded",n.expanded)("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-expansion-panel-spacing",n._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Nn([{provide:b4,useValue:void 0},{provide:M4,useExisting:i}]),ut,oi],ngContentSelectors:Gce,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,n){1&t&&(Ys(Hce),Yn(0),ce(1,"div",0,1),ct("@bodyExpansion.done",function(s){return n._bodyAnimationDone.next(s)}),ce(3,"div",2),Yn(4,1),Fe(5,zce,0,0,"ng-template",3),he(),Yn(6,2),he()),2&t&&(ne(1),ie("@bodyExpansion",n._getExpandedState())("id",n.id),Qt("aria-labelledby",n._headerId),ne(4),ie("cdkPortalOutlet",n._portal))},dependencies:[Pp],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[w4.bodyExpansion]},changeDetection:0}),i})();class Yce{}const Zce=h3(Yce);let Kce=(()=>{class i extends Zce{constructor(t,n,r,s,o,a,l){super(),this.panel=t,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=Zt.EMPTY;const c=t.accordion?t.accordion._stateChanges.pipe(Dn(d=>!(!d.hideToggle&&!d.togglePosition))):Bs;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=Ms(t.opened,t.closed,c,t._inputChanges.pipe(Dn(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(Dn(()=>t._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:ha(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,n){t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return i.\u0275fac=function(t){return new(t||i)(R(S4,1),R(Wt),R(Mc),R(Qn),R(C4,8),R(Ks,8),Oa("tabindex"))},i.\u0275cmp=St({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,n){1&t&&ct("click",function(){return n._toggle()})("keydown",function(s){return n._keydown(s)}),2&t&&(Qt("id",n.panel._headerId)("tabindex",n.tabIndex)("aria-controls",n._getPanelId())("aria-expanded",n._isExpanded())("aria-disabled",n.panel.disabled),fc("height",n._getHeaderHeight()),ui("mat-expanded",n._isExpanded())("mat-expansion-toggle-indicator-after","after"===n._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===n._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===n._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[ut],ngContentSelectors:jce,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,n){1&t&&(Ys($ce),ce(0,"span",0),Yn(1),Yn(2,1),Yn(3,2),he(),Fe(4,Wce,1,1,"span",1)),2&t&&(ne(4),ie("ngIf",n._showToggle()))},dependencies:[lr],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[w4.indicatorRotate]},changeDetection:0}),i})(),Jce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"]}),i})(),Qce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=Le({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),i})(),eue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[$a,Mn,Uce,kp]}),i})();function tue(i,e){if(1&i&&(ce(0,"mat-option",19),ot(1),he()),2&i){const t=e.$implicit;ie("value",t),ne(1),Xr(" ",t," ")}}function nue(i,e){if(1&i){const t=yr();ce(0,"mat-form-field",16)(1,"mat-select",17),ct("selectionChange",function(r){return pn(t),En(Oe(2)._changePageSize(r.value))}),Fe(2,tue,2,2,"mat-option",18),he()()}if(2&i){const t=Oe(2);ie("appearance",t._formFieldAppearance)("color",t.color),ne(1),ie("value",t.pageSize)("disabled",t.disabled)("panelClass",t.selectConfig.panelClass||"")("disableOptionCentering",t.selectConfig.disableOptionCentering)("aria-label",t._intl.itemsPerPageLabel),ne(1),ie("ngForOf",t._displayedPageSizeOptions)}}function iue(i,e){if(1&i&&(ce(0,"div",20),ot(1),he()),2&i){const t=Oe(2);ne(1),Pi(t.pageSize)}}function rue(i,e){if(1&i&&(ce(0,"div",12)(1,"div",13),ot(2),he(),Fe(3,nue,3,8,"mat-form-field",14),Fe(4,iue,2,1,"div",15),he()),2&i){const t=Oe();ne(2),Xr(" ",t._intl.itemsPerPageLabel," "),ne(1),ie("ngIf",t._displayedPageSizeOptions.length>1),ne(1),ie("ngIf",t._displayedPageSizeOptions.length<=1)}}function sue(i,e){if(1&i){const t=yr();ce(0,"button",21),ct("click",function(){return pn(t),En(Oe().firstPage())}),vo(),ce(1,"svg",7),bt(2,"path",22),he()()}if(2&i){const t=Oe();ie("matTooltip",t._intl.firstPageLabel)("matTooltipDisabled",t._previousButtonsDisabled())("matTooltipPosition","above")("disabled",t._previousButtonsDisabled()),Qt("aria-label",t._intl.firstPageLabel)}}function oue(i,e){if(1&i){const t=yr();vo(),gg(),ce(0,"button",23),ct("click",function(){return pn(t),En(Oe().lastPage())}),vo(),ce(1,"svg",7),bt(2,"path",24),he()()}if(2&i){const t=Oe();ie("matTooltip",t._intl.lastPageLabel)("matTooltipDisabled",t._nextButtonsDisabled())("matTooltipPosition","above")("disabled",t._nextButtonsDisabled()),Qt("aria-label",t._intl.lastPageLabel)}}let $C=(()=>{class i{constructor(){this.changes=new He,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,n,r)=>{if(0==r||0==n)return`0 of ${r}`;const s=t*n;return`${s+1} \u2013 ${s<(r=Math.max(r,0))?Math.min(s+n,r):s+n} of ${r}`}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Pe({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lue={provide:$C,deps:[[new wo,new hl,$C]],useFactory:function aue(i){return i||new $C}},uue=new Se("MAT_PAGINATOR_DEFAULT_OPTIONS"),due=Fw(gX(class{}));let hue=(()=>{class i extends due{constructor(t,n,r){if(super(),this._intl=t,this._changeDetectorRef=n,this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this._hidePageSize=!1,this._showFirstLastButtons=!1,this.selectConfig={},this.page=new et,this._intlChanges=t.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){const{pageSize:s,pageSizeOptions:o,hidePageSize:a,showFirstLastButtons:l}=r;null!=s&&(this._pageSize=s),null!=o&&(this._pageSizeOptions=o),null!=a&&(this._hidePageSize=a),null!=l&&(this._showFirstLastButtons=l)}}get pageIndex(){return this._pageIndex}set pageIndex(t){this._pageIndex=Math.max(fa(t),0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(t){this._length=fa(t),this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(t){this._pageSize=Math.max(fa(t),0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(t){this._pageSizeOptions=(t||[]).map(n=>fa(n)),this._updateDisplayedPageSizeOptions()}get hidePageSize(){return this._hidePageSize}set hidePageSize(t){this._hidePageSize=Gn(t)}get showFirstLastButtons(){return this._showFirstLastButtons}set showFirstLastButtons(t){this._showFirstLastButtons=Gn(t)}ngOnInit(){this._initialized=!0,this._updateDisplayedPageSizeOptions(),this._markInitialized()}ngOnDestroy(){this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(t)}previousPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(t)}firstPage(){if(!this.hasPreviousPage())return;const t=this.pageIndex;this.pageIndex=0,this._emitPageEvent(t)}lastPage(){if(!this.hasNextPage())return;const t=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(t)}hasPreviousPage(){return this.pageIndex>=1&&0!=this.pageSize}hasNextPage(){const t=this.getNumberOfPages()-1;return this.pageIndex<t&&0!=this.pageSize}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(t){const r=this.pageIndex;this.pageIndex=Math.floor(this.pageIndex*this.pageSize/t)||0,this.pageSize=t,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){!this._initialized||(this.pageSize||(this._pageSize=0!=this.pageSizeOptions.length?this.pageSizeOptions[0]:50),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),-1===this._displayedPageSizeOptions.indexOf(this.pageSize)&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((t,n)=>t-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(t){this.page.emit({previousPageIndex:t,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}}return i.\u0275fac=function(t){dc()},i.\u0275dir=Le({type:i,inputs:{color:"color",pageIndex:"pageIndex",length:"length",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions",hidePageSize:"hidePageSize",showFirstLastButtons:"showFirstLastButtons",selectConfig:"selectConfig"},outputs:{page:"page"},features:[ut]}),i})(),fue=(()=>{class i extends hue{constructor(t,n,r){super(t,n,r),r&&null!=r.formFieldAppearance&&(this._formFieldAppearance=r.formFieldAppearance)}}return i.\u0275fac=function(t){return new(t||i)(R($C),R(Qn),R(uue,8))},i.\u0275cmp=St({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-paginator"],inputs:{disabled:"disabled"},exportAs:["matPaginator"],features:[ut],decls:14,vars:14,consts:[[1,"mat-paginator-outer-container"],[1,"mat-paginator-container"],["class","mat-paginator-page-size",4,"ngIf"],[1,"mat-paginator-range-actions"],[1,"mat-paginator-range-label"],["mat-icon-button","","type","button","class","mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-previous",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["viewBox","0 0 24 24","focusable","false",1,"mat-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-next",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","class","mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click",4,"ngIf"],[1,"mat-paginator-page-size"],[1,"mat-paginator-page-size-label"],["class","mat-paginator-page-size-select",3,"appearance","color",4,"ngIf"],["class","mat-paginator-page-size-value",4,"ngIf"],[1,"mat-paginator-page-size-select",3,"appearance","color"],[3,"value","disabled","panelClass","disableOptionCentering","aria-label","selectionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"mat-paginator-page-size-value"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled","click"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,n){1&t&&(ce(0,"div",0)(1,"div",1),Fe(2,rue,5,3,"div",2),ce(3,"div",3)(4,"div",4),ot(5),he(),Fe(6,sue,3,5,"button",5),ce(7,"button",6),ct("click",function(){return n.previousPage()}),vo(),ce(8,"svg",7),bt(9,"path",8),he()(),gg(),ce(10,"button",9),ct("click",function(){return n.nextPage()}),vo(),ce(11,"svg",7),bt(12,"path",10),he()(),Fe(13,oue,3,5,"button",11),he()()()),2&t&&(ne(2),ie("ngIf",!n.hidePageSize),ne(3),Xr(" ",n._intl.getRangeLabel(n.pageIndex,n.pageSize,n.length)," "),ne(1),ie("ngIf",n.showFirstLastButtons),ne(1),ie("matTooltip",n._intl.previousPageLabel)("matTooltipDisabled",n._previousButtonsDisabled())("matTooltipPosition","above")("disabled",n._previousButtonsDisabled()),Qt("aria-label",n._intl.previousPageLabel),ne(3),ie("matTooltip",n._intl.nextPageLabel)("matTooltipDisabled",n._nextButtonsDisabled())("matTooltipPosition","above")("disabled",n._nextButtonsDisabled()),Qt("aria-label",n._intl.nextPageLabel),ne(3),ie("ngIf",n.showFirstLastButtons))},dependencies:[ua,lr,Fp,Xd,cM,Av,kT],styles:[".mat-paginator{display:block}.mat-paginator-outer-container{display:flex}.mat-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap-reverse;width:100%}.mat-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-paginator-page-size{margin-right:0;margin-left:8px}.mat-paginator-page-size-label{margin:0 4px}.mat-paginator-page-size-select{margin:6px 4px 0 4px;width:56px}.mat-paginator-page-size-select.mat-form-field-appearance-outline{width:64px}.mat-paginator-page-size-select.mat-form-field-appearance-fill{width:64px}.mat-paginator-range-label{margin:0 32px 0 24px}.mat-paginator-range-actions{display:flex;align-items:center}.mat-paginator-icon{display:inline-block;width:28px;fill:currentColor}[dir=rtl] .mat-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-paginator-icon{fill:CanvasText}"],encapsulation:2,changeDetection:0}),i})(),pue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({providers:[lue],imports:[$a,aT,EU,JB,Mn]}),i})();const mue=["*",[["mat-card-footer"]]],gue=["*","mat-card-footer"];let _ue=(()=>{class i{constructor(t){this._animationMode=t}}return i.\u0275fac=function(t){return new(t||i)(R(Ks,8))},i.\u0275cmp=St({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,n){2&t&&ui("_mat-animation-noopable","NoopAnimations"===n._animationMode)},exportAs:["matCard"],ngContentSelectors:gue,decls:2,vars:0,template:function(t,n){1&t&&(Ys(mue),Yn(0),Yn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}.mat-card._mat-animation-noopable{transition:none !important;animation:none !important}.mat-card>.mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card>.mat-divider-horizontal{left:auto;right:0}.mat-card>.mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card>.mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}"],encapsulation:2,changeDetection:0}),i})(),vue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i}),i.\u0275inj=Lt({imports:[Mn,Mn]}),i})(),yue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Ut({type:i,bootstrap:[Nae]}),i.\u0275inj=Lt({providers:[Vp,bU],imports:[JF,D7,Fce,WY,HZ,Jw,MZ,eue,qB,DU,JB,aT,xK,pue,sQ,vue,EU,HX,vae,LK,BB]}),i})();zn(aM,[ua,Lm],[]),zn(_U,[Z_,ua,lr,RF,$d,jd,Xd,S4,Kce,Qce,Jce,jJ,fue,cM,Av,Lm],[]),zn(vU,[ua,lr,Mu,Nv,$d,jd,Up,Lm],[mp]),zn(NT,[ua,lr,uM,UT,_ue,Lm],[]),zn(yU,[Lm,NT],[]),function P8(){eF=!1}(),z$().bootstrapModule(yue).catch(i=>console.error(i))},489:function(ro,ys,Or){var Ht;ro=Or.nmd(ro),function(){var B,vn="Expected a function",Ca="__lodash_hash_undefined__",li="__lodash_placeholder__",yn=1/0,Da=9007199254740991,jo=4294967295,Ey=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],kn="[object Arguments]",In="[object Array]",Je="[object Boolean]",Vl="[object Date]",$u="[object Error]",Um="[object Function]",JC="[object GeneratorFunction]",qo="[object Map]",Ih="[object Number]",nl="[object Object]",Vm="[object Promise]",Vc="[object RegExp]",oo="[object Set]",Rh="[object String]",zm="[object Symbol]",ao="[object WeakMap]",Ph="[object ArrayBuffer]",zc="[object DataView]",Dy="[object Float32Array]",Hm="[object Float64Array]",Ay="[object Int8Array]",Ty="[object Int16Array]",Iy="[object Int32Array]",Ry="[object Uint8Array]",Py="[object Uint8ClampedArray]",ju="[object Uint16Array]",kh="[object Uint32Array]",ky=/\b__p \+= '';/g,Oy=/\b(__p \+=) '' \+/g,Ly=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Fy=/&(?:amp|lt|gt|quot|#39);/g,Gm=/[&<>"']/g,Ny=RegExp(Fy.source),By=RegExp(Gm.source),Uy=/<%-([\s\S]+?)%>/g,mr=/<%([\s\S]+?)%>/g,Vy=/<%=([\s\S]+?)%>/g,tS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nS=/^\w*$/,iS=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Oh=/[\\^$.*+?()[\]{}|]/g,rS=RegExp(Oh.source),Wm=/^\s+/,Aa=/\s/,sS=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,$i=/\{\n\/\* \[wrapped with (.+)\] \*/,Hc=/,? & /,Bs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rP=/[()=,{}\[\]\/\s]/,oS=/\\(\\)?/g,zy=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lh=/\w*$/,Hy=/^[-+]0x[0-9a-f]+$/i,qu=/^0b[01]+$/i,aS=/^\[object .+?Constructor\]$/,Gy=/^0o[0-7]+$/i,Wy=/^(?:0|[1-9]\d*)$/,lS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fh=/($^)/,cS=/['\n\r\u2028\u2029\\]/g,Nh="\\ud800-\\udfff",Ei="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ms="\\u2700-\\u27bf",$m="a-z\\xdf-\\xf6\\xf8-\\xff",Bh="A-Z\\xc0-\\xd6\\xd8-\\xde",jy="\\ufe0e\\ufe0f",Un="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xm="["+Nh+"]",hS="["+Un+"]",_e="["+Ei+"]",Xu="\\d+",Ot="["+Ms+"]",Cn="["+$m+"]",qy="[^"+Nh+Un+Xu+Ms+$m+Bh+"]",Xy="\\ud83c[\\udffb-\\udfff]",Yu="[^"+Nh+"]",Fr="(?:\\ud83c[\\udde6-\\uddff]){2}",Yy="[\\ud800-\\udbff][\\udc00-\\udfff]",Gc="["+Bh+"]",Xo="(?:"+Cn+"|"+qy+")",sP="(?:"+Gc+"|"+qy+")",mS="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",gS="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",_S="(?:"+_e+"|"+Xy+")?",Zy="["+jy+"]?",es=Zy+_S+"(?:\\u200d(?:"+[Yu,Fr,Yy].join("|")+")"+Zy+_S+")*",On="(?:"+[Ot,Fr,Yy].join("|")+")"+es,lP="(?:"+[Yu+_e+"?",_e,Fr,Yy,Xm].join("|")+")",cP=RegExp("['\u2019]","g"),uP=RegExp(_e,"g"),Pe=RegExp(Xy+"(?="+Xy+")|"+lP+es,"g"),dP=RegExp([Gc+"?"+Cn+"+"+mS+"(?="+[hS,Gc,"$"].join("|")+")",sP+"+"+gS+"(?="+[hS,Gc+Xo,"$"].join("|")+")",Gc+"?"+Xo+"+"+mS,Gc+"+"+gS,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Xu,On].join("|"),"g"),Lt=RegExp("[\\u200d"+Nh+Ei+jy+"]"),Ym=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ky=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yS=-1,si={};si[Dy]=si[Hm]=si[Ay]=si[Ty]=si[Iy]=si[Ry]=si[Py]=si[ju]=si[kh]=!0,si[kn]=si[In]=si[Ph]=si[Je]=si[zc]=si[Vl]=si[$u]=si[Um]=si[qo]=si[Ih]=si[nl]=si[Vc]=si[oo]=si[Rh]=si[ao]=!1;var Xn={};Xn[kn]=Xn[In]=Xn[Ph]=Xn[zc]=Xn[Je]=Xn[Vl]=Xn[Dy]=Xn[Hm]=Xn[Ay]=Xn[Ty]=Xn[Iy]=Xn[qo]=Xn[Ih]=Xn[nl]=Xn[Vc]=Xn[oo]=Xn[Rh]=Xn[zm]=Xn[Ry]=Xn[Py]=Xn[ju]=Xn[kh]=!0,Xn[$u]=Xn[Um]=Xn[ao]=!1;var bS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mt=parseFloat,Km=parseInt,Qy="object"==typeof global&&global&&global.Object===Object&&global,Us="object"==typeof self&&self&&self.Object===Object&&self,Qi=Qy||Us||Function("return this")(),xS=ys&&!ys.nodeType&&ys,Vs=xS&&ro&&!ro.nodeType&&ro,zs=Vs&&Vs.exports===xS,e0=zs&&Qy.process,lo=function(){try{return Vs&&Vs.require&&Vs.require("util").types||e0&&e0.binding&&e0.binding("util")}catch{}}(),Hs=lo&&lo.isArrayBuffer,Vn=lo&&lo.isDate,wS=lo&&lo.isMap,MS=lo&&lo.isRegExp,zl=lo&&lo.isSet,Sn=lo&&lo.isTypedArray;function Ar(G,ue,te){switch(te.length){case 0:return G.call(ue);case 1:return G.call(ue,te[0]);case 2:return G.call(ue,te[0],te[1]);case 3:return G.call(ue,te[0],te[1],te[2])}return G.apply(ue,te)}function Jm(G,ue,te,Ye){for(var Vt=-1,Fn=null==G?0:G.length;++Vt<Fn;){var nr=G[Vt];ue(Ye,nr,te(nr),G)}return Ye}function ts(G,ue){for(var te=-1,Ye=null==G?0:G.length;++te<Ye&&!1!==ue(G[te],te,G););return G}function t0(G,ue){for(var te=null==G?0:G.length;te--&&!1!==ue(G[te],te,G););return G}function Yo(G,ue){for(var te=-1,Ye=null==G?0:G.length;++te<Ye;)if(!ue(G[te],te,G))return!1;return!0}function Gs(G,ue){for(var te=-1,Ye=null==G?0:G.length,Vt=0,Fn=[];++te<Ye;){var nr=G[te];ue(nr,te,G)&&(Fn[Vt++]=nr)}return Fn}function Vh(G,ue){return!(null==G||!G.length)&&Fi(G,ue,0)>-1}function St(G,ue,te){for(var Ye=-1,Vt=null==G?0:G.length;++Ye<Vt;)if(te(ue,G[Ye]))return!0;return!1}function zn(G,ue){for(var te=-1,Ye=null==G?0:G.length,Vt=Array(Ye);++te<Ye;)Vt[te]=ue(G[te],te,G);return Vt}function Ta(G,ue){for(var te=-1,Ye=ue.length,Vt=G.length;++te<Ye;)G[Vt+te]=ue[te];return G}function zh(G,ue,te,Ye){var Vt=-1,Fn=null==G?0:G.length;for(Ye&&Fn&&(te=G[++Vt]);++Vt<Fn;)te=ue(te,G[Vt],Vt,G);return te}function Ut(G,ue,te,Ye){var Vt=null==G?0:G.length;for(Ye&&Vt&&(te=G[--Vt]);Vt--;)te=ue(te,G[Vt],Vt,G);return te}function Qm(G,ue){for(var te=-1,Ye=null==G?0:G.length;++te<Ye;)if(ue(G[te],te,G))return!0;return!1}var n0=Ft("length");function Ln(G,ue,te){var Ye;return te(G,function(Vt,Fn,nr){if(ue(Vt,Fn,nr))return Ye=Fn,!1}),Ye}function er(G,ue,te,Ye){for(var Vt=G.length,Fn=te+(Ye?1:-1);Ye?Fn--:++Fn<Vt;)if(ue(G[Fn],Fn,G))return Fn;return-1}function Fi(G,ue,te){return ue==ue?function Gh(G,ue,te){for(var Ye=te-1,Vt=G.length;++Ye<Vt;)if(G[Ye]===ue)return Ye;return-1}(G,ue,te):er(G,Ss,te)}function Cs(G,ue,te,Ye){for(var Vt=te-1,Fn=G.length;++Vt<Fn;)if(Ye(G[Vt],ue))return Vt;return-1}function Ss(G){return G!=G}function Ue(G,ue){var te=null==G?0:G.length;return te?Ni(G,ue)/te:NaN}function Ft(G){return function(ue){return null==ue?B:ue[G]}}function Zn(G){return function(ue){return null==G?B:G[ue]}}function is(G,ue,te,Ye,Vt){return Vt(G,function(Fn,nr,Jn){te=Ye?(Ye=!1,Fn):ue(te,Fn,nr,Jn)}),te}function Ni(G,ue){for(var te,Ye=-1,Vt=G.length;++Ye<Vt;){var Fn=ue(G[Ye]);Fn!==B&&(te=te===B?Fn:te+Fn)}return te}function Ia(G,ue){for(var te=-1,Ye=Array(G);++te<G;)Ye[te]=ue(te);return Ye}function Wc(G){return G&&G.slice(0,Nr(G)+1).replace(Wm,"")}function tr(G){return function(ue){return G(ue)}}function Gt(G,ue){return zn(ue,function(te){return G[te]})}function il(G,ue){return G.has(ue)}function Gl(G,ue){for(var te=-1,Ye=G.length;++te<Ye&&Fi(ue,G[te],0)>-1;);return te}function Hh(G,ue){for(var te=G.length;te--&&Fi(ue,G[te],0)>-1;);return te}function Wl(G,ue){for(var te=G.length,Ye=0;te--;)G[te]===ue&&++Ye;return Ye}var Tr=Zn({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Zu=Zn({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function $c(G){return"\\"+bS[G]}function uo(G){return Lt.test(G)}function eg(G){var ue=-1,te=Array(G.size);return G.forEach(function(Ye,Vt){te[++ue]=[Vt,Ye]}),te}function s0(G,ue){return function(te){return G(ue(te))}}function ho(G,ue){for(var te=-1,Ye=G.length,Vt=0,Fn=[];++te<Ye;){var nr=G[te];(nr===ue||nr===li)&&(G[te]=li,Fn[Vt++]=te)}return Fn}function jc(G){var ue=-1,te=Array(G.size);return G.forEach(function(Ye){te[++ue]=Ye}),te}function Di(G){return uo(G)?function tg(G){for(var ue=Pe.lastIndex=0;Pe.test(G);)++ue;return ue}(G):n0(G)}function fo(G){return uo(G)?function Wh(G){return G.match(Pe)||[]}(G):function Le(G){return G.split("")}(G)}function Nr(G){for(var ue=G.length;ue--&&Aa.test(G.charAt(ue)););return ue}var po=Zn({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),jh=function G(ue){var u,te=(ue=null==ue?Qi:jh.defaults(Qi.Object(),ue,jh.pick(Qi,Ky))).Array,Ye=ue.Date,Vt=ue.Error,Fn=ue.Function,nr=ue.Math,Jn=ue.Object,o0=ue.RegExp,hP=ue.String,go=ue.TypeError,ng=te.prototype,Ju=Jn.prototype,ig=ue["__core-js_shared__"],rg=Fn.prototype.toString,Wn=Ju.hasOwnProperty,a0=0,qh=(u=/[^.]+$/.exec(ig&&ig.keys&&ig.keys.IE_PROTO||""))?"Symbol(src)_1."+u:"",sg=Ju.toString,pP=rg.call(Jn),mP=Qi._,jl=o0("^"+rg.call(Wn).replace(Oh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xh=zs?ue.Buffer:B,oi=ue.Symbol,Qu=ue.Uint8Array,l0=Xh?Xh.allocUnsafe:B,Yh=s0(Jn.getPrototypeOf,Jn),og=Jn.create,ag=Ju.propertyIsEnumerable,Zh=ng.splice,Kh=oi?oi.isConcatSpreadable:B,ed=oi?oi.iterator:B,ir=oi?oi.toStringTag:B,qc=function(){try{var u=rc(Jn,"defineProperty");return u({},"",{}),u}catch{}}(),CS=ue.clearTimeout!==Qi.clearTimeout&&ue.clearTimeout,lg=Ye&&Ye.now!==Qi.Date.now&&Ye.now,SS=ue.setTimeout!==Qi.setTimeout&&ue.setTimeout,cg=nr.ceil,hi=nr.floor,ug=Jn.getOwnPropertySymbols,gP=Xh?Xh.isBuffer:B,td=ue.isFinite,Ws=ng.join,ES=s0(Jn.keys,Jn),Ai=nr.max,Ti=nr.min,Es=Ye.now,c0=ue.parseInt,nd=nr.random,DS=ng.reverse,Zo=rc(ue,"DataView"),Xc=rc(ue,"Map"),id=rc(ue,"Promise"),vt=rc(ue,"Set"),Yc=rc(ue,"WeakMap"),Jh=rc(Jn,"create"),Qh=Yc&&new Yc,Zc={},AS=sc(Zo),u0=sc(Xc),TS=sc(id),IS=sc(vt),xe=sc(Yc),on=oi?oi.prototype:B,pn=on?on.valueOf:B,En=on?on.toString:B;function E(u){if(pi(u)&&!Nt(u)&&!(u instanceof nn)){if(u instanceof Ii)return u;if(Wn.call(u,"__wrapped__"))return rE(u)}return new Ii(u)}var ql=function(){function u(){}return function(h){if(!wi(h))return{};if(og)return og(h);u.prototype=h;var g=new u;return u.prototype=B,g}}();function rl(){}function Ii(u,h){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=B}function nn(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jo,this.__views__=[]}function Kc(u){var h=-1,g=null==u?0:u.length;for(this.clear();++h<g;){var x=u[h];this.set(x[0],x[1])}}function gr(u){var h=-1,g=null==u?0:u.length;for(this.clear();++h<g;){var x=u[h];this.set(x[0],x[1])}}function _o(u){var h=-1,g=null==u?0:u.length;for(this.clear();++h<g;){var x=u[h];this.set(x[0],x[1])}}function sl(u){var h=-1,g=null==u?0:u.length;for(this.__data__=new _o;++h<g;)this.add(u[h])}function $s(u){var h=this.__data__=new gr(u);this.size=h.size}function fi(u,h){var g=Nt(u),x=!g&&cc(u),S=!g&&!x&&ml(u),T=!g&&!x&&!S&&Mo(u),U=g||x||S||T,z=U?Ia(u.length,hP):[],W=z.length;for(var ve in u)(h||Wn.call(u,ve))&&(!U||!("length"==ve||S&&("offset"==ve||"parent"==ve)||T&&("buffer"==ve||"byteLength"==ve||"byteOffset"==ve)||os(ve,W)))&&z.push(ve);return z}function vo(u){var h=u.length;return h?u[dd(0,h-1)]:B}function BS(u,h){return vd(rs(u),Xl(h,0,u.length))}function gg(u){return vd(rs(u))}function _g(u,h,g){(g!==B&&!Wr(u[h],g)||g===B&&!(h in u))&&yo(u,h,g)}function rd(u,h,g){var x=u[h];(!Wn.call(u,h)||!Wr(x,g)||g===B&&!(h in u))&&yo(u,h,g)}function tf(u,h){for(var g=u.length;g--;)if(Wr(u[g][0],h))return g;return-1}function nf(u,h,g,x){return Ko(u,function(S,T,U){h(x,S,g(S),U)}),x}function sd(u,h){return u&&ea(h,Ui(h),u)}function yo(u,h,g){"__proto__"==h&&qc?qc(u,h,{configurable:!0,enumerable:!0,value:g,writable:!0}):u[h]=g}function sf(u,h){for(var g=-1,x=h.length,S=te(x),T=null==u;++g<x;)S[g]=T?B:zf(u,h[g]);return S}function Xl(u,h,g){return u==u&&(g!==B&&(u=u<=g?u:g),h!==B&&(u=u>=h?u:h)),u}function ji(u,h,g,x,S,T){var U,z=1&h,W=2&h,ve=4&h;if(g&&(U=S?g(u,x,S,T):g(u)),U!==B)return U;if(!wi(u))return u;var be=Nt(u);if(be){if(U=function Ng(u){var h=u.length,g=new u.constructor(h);return h&&"string"==typeof u[0]&&Wn.call(u,"index")&&(g.index=u.index,g.input=u.input),g}(u),!z)return rs(u,U)}else{var Ce=vr(u),Ve=Ce==Um||Ce==JC;if(ml(u))return Dg(u,z);if(Ce==nl||Ce==kn||Ve&&!S){if(U=W||Ve?{}:V0(u),!z)return W?function mf(u,h){return ea(u,B0(u),h)}(u,function rf(u,h){return u&&ea(h,sr(h),u)}(U,u)):function Ig(u,h){return ea(u,wf(u),h)}(u,sd(U,u))}else{if(!Xn[Ce])return S?u:{};U=function z0(u,h,g){var x=u.constructor;switch(h){case Ph:return zr(u);case Je:case Vl:return new x(+u);case zc:return function Ag(u,h){var g=h?zr(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.byteLength)}(u,g);case Dy:case Hm:case Ay:case Ty:case Iy:case Ry:case Py:case ju:case kh:return Tg(u,g);case qo:return new x;case Ih:case Rh:return new x(u);case Vc:return function iu(u){var h=new u.constructor(u.source,Lh.exec(u));return h.lastIndex=u.lastIndex,h}(u);case oo:return new x;case zm:return function CP(u){return pn?Jn(pn.call(u)):{}}(u)}}(u,Ce,z)}}T||(T=new $s);var Xe=T.get(u);if(Xe)return Xe;T.set(u,U),Bf(u)?u.forEach(function(gt){U.add(ji(gt,h,g,gt,u,T))}):ZE(u)&&u.forEach(function(gt,Jt){U.set(Jt,ji(gt,h,g,Jt,u,T))});var Yt=be?B:(ve?W?Lg:ic:W?sr:Ui)(u);return ts(Yt||u,function(gt,Jt){Yt&&(gt=u[Jt=gt]),rd(U,Jt,ji(gt,h,g,Jt,u,T))}),U}function _0(u,h,g){var x=g.length;if(null==u)return!x;for(u=Jn(u);x--;){var S=g[x],U=u[S];if(U===B&&!(S in u)||!(0,h[S])(U))return!1}return!0}function v0(u,h,g){if("function"!=typeof u)throw new go(vn);return _d(function(){u.apply(B,g)},h)}function Pa(u,h,g,x){var S=-1,T=Vh,U=!0,z=u.length,W=[],ve=h.length;if(!z)return W;g&&(h=zn(h,tr(g))),x?(T=St,U=!1):h.length>=200&&(T=il,U=!1,h=new sl(h));e:for(;++S<z;){var be=u[S],Ce=null==g?be:g(be);if(be=x||0!==be?be:0,U&&Ce==Ce){for(var Ve=ve;Ve--;)if(h[Ve]===Ce)continue e;W.push(be)}else T(h,Ce,x)||W.push(be)}return W}E.templateSettings={escape:Uy,evaluate:mr,interpolate:Vy,variable:"",imports:{_:E}},(E.prototype=rl.prototype).constructor=E,(Ii.prototype=ql(rl.prototype)).constructor=Ii,(nn.prototype=ql(rl.prototype)).constructor=nn,Kc.prototype.clear=function ef(){this.__data__=Jh?Jh(null):{},this.size=0},Kc.prototype.delete=function Br(u){var h=this.has(u)&&delete this.__data__[u];return this.size-=h?1:0,h},Kc.prototype.get=function Ra(u){var h=this.__data__;if(Jh){var g=h[u];return g===Ca?B:g}return Wn.call(h,u)?h[u]:B},Kc.prototype.has=function d0(u){var h=this.__data__;return Jh?h[u]!==B:Wn.call(h,u)},Kc.prototype.set=function Jc(u,h){var g=this.__data__;return this.size+=this.has(u)?0:1,g[u]=Jh&&h===B?Ca:h,this},gr.prototype.clear=function PS(){this.__data__=[],this.size=0},gr.prototype.delete=function h0(u){var h=this.__data__,g=tf(h,u);return!(g<0||(g==h.length-1?h.pop():Zh.call(h,g,1),--this.size,0))},gr.prototype.get=function kS(u){var h=this.__data__,g=tf(h,u);return g<0?B:h[g][1]},gr.prototype.has=function OS(u){return tf(this.__data__,u)>-1},gr.prototype.set=function hg(u,h){var g=this.__data__,x=tf(g,u);return x<0?(++this.size,g.push([u,h])):g[x][1]=h,this},_o.prototype.clear=function f0(){this.size=0,this.__data__={hash:new Kc,map:new(Xc||gr),string:new Kc}},_o.prototype.delete=function fg(u){var h=bf(this,u).delete(u);return this.size-=h?1:0,h},_o.prototype.get=function LS(u){return bf(this,u).get(u)},_o.prototype.has=function p0(u){return bf(this,u).has(u)},_o.prototype.set=function pg(u,h){var g=bf(this,u),x=g.size;return g.set(u,h),this.size+=g.size==x?0:1,this},sl.prototype.add=sl.prototype.push=function m0(u){return this.__data__.set(u,Ca),this},sl.prototype.has=function g0(u){return this.__data__.has(u)},$s.prototype.clear=function mg(){this.__data__=new gr,this.size=0},$s.prototype.delete=function FS(u){var h=this.__data__,g=h.delete(u);return this.size=h.size,g},$s.prototype.get=function NS(u){return this.__data__.get(u)},$s.prototype.has=function Ur(u){return this.__data__.has(u)},$s.prototype.set=function ol(u,h){var g=this.__data__;if(g instanceof gr){var x=g.__data__;if(!Xc||x.length<199)return x.push([u,h]),this.size=++g.size,this;g=this.__data__=new _o(x)}return g.set(u,h),this.size=g.size,this};var Ko=gf(bo),y0=gf(lf,!0);function US(u,h){var g=!0;return Ko(u,function(x,S,T){return g=!!h(x,S,T)}),g}function vg(u,h,g){for(var x=-1,S=u.length;++x<S;){var T=u[x],U=h(T);if(null!=U&&(z===B?U==U&&!qs(U):g(U,z)))var z=U,W=T}return W}function ad(u,h){var g=[];return Ko(u,function(x,S,T){h(x,S,T)&&g.push(x)}),g}function rr(u,h,g,x,S){var T=-1,U=u.length;for(g||(g=Bg),S||(S=[]);++T<U;){var z=u[T];h>0&&g(z)?h>1?rr(z,h-1,g,x,S):Ta(S,z):x||(S[S.length]=z)}return S}var af=fd(),ld=fd(!0);function bo(u,h){return u&&af(u,h,Ui)}function lf(u,h){return u&&ld(u,h,Ui)}function ka(u,h){return Gs(h,function(g){return Ba(u[g])})}function Yl(u,h){for(var g=0,x=(h=ul(h,u)).length;null!=u&&g<x;)u=u[ia(h[g++])];return g&&g==x?u:B}function Zl(u,h,g){var x=h(u);return Nt(u)?x:Ta(x,g(u))}function _r(u){return null==u?u===B?"[object Undefined]":"[object Null]":ir&&ir in Jn(u)?function xf(u){var h=Wn.call(u,ir),g=u[ir];try{u[ir]=B;var x=!0}catch{}var S=sg.call(u);return x&&(h?u[ir]=g:delete u[ir]),S}(u):function nE(u){return sg.call(u)}(u)}function Qc(u,h){return u>h}function yP(u,h){return null!=u&&Wn.call(u,h)}function b0(u,h){return null!=u&&h in Jn(u)}function yg(u,h,g){for(var x=g?St:Vh,S=u[0].length,T=u.length,U=T,z=te(T),W=1/0,ve=[];U--;){var be=u[U];U&&h&&(be=zn(be,tr(h))),W=Ti(be.length,W),z[U]=!g&&(h||S>=120&&be.length>=120)?new sl(U&&be):B}be=u[0];var Ce=-1,Ve=z[0];e:for(;++Ce<S&&ve.length<W;){var Xe=be[Ce],pt=h?h(Xe):Xe;if(Xe=g||0!==Xe?Xe:0,!(Ve?il(Ve,pt):x(ve,pt,g))){for(U=T;--U;){var Yt=z[U];if(!(Yt?il(Yt,pt):x(u[U],pt,g)))continue e}Ve&&Ve.push(pt),ve.push(Xe)}}return ve}function cd(u,h,g){var x=null==(u=as(u,h=ul(h,u)))?u:u[ia(ls(h))];return null==x?B:Ar(x,u,g)}function eu(u){return pi(u)&&_r(u)==kn}function al(u,h,g,x,S){return u===h||(null==u||null==h||!pi(u)&&!pi(h)?u!=u&&h!=h:function cf(u,h,g,x,S,T){var U=Nt(u),z=Nt(h),W=U?In:vr(u),ve=z?In:vr(h),be=(W=W==kn?nl:W)==nl,Ce=(ve=ve==kn?nl:ve)==nl,Ve=W==ve;if(Ve&&ml(u)){if(!ml(h))return!1;U=!0,be=!1}if(Ve&&!be)return T||(T=new $s),U||Mo(u)?Og(u,h,g,x,S,T):function ZS(u,h,g,x,S,T,U){switch(g){case zc:if(u.byteLength!=h.byteLength||u.byteOffset!=h.byteOffset)return!1;u=u.buffer,h=h.buffer;case Ph:return!(u.byteLength!=h.byteLength||!T(new Qu(u),new Qu(h)));case Je:case Vl:case Ih:return Wr(+u,+h);case $u:return u.name==h.name&&u.message==h.message;case Vc:case Rh:return u==h+"";case qo:var z=eg;case oo:if(z||(z=jc),u.size!=h.size&&!(1&x))return!1;var ve=U.get(u);if(ve)return ve==h;x|=2,U.set(u,h);var be=Og(z(u),z(h),x,S,T,U);return U.delete(u),be;case zm:if(pn)return pn.call(u)==pn.call(h)}return!1}(u,h,W,g,x,S,T);if(!(1&g)){var Xe=be&&Wn.call(u,"__wrapped__"),pt=Ce&&Wn.call(h,"__wrapped__");if(Xe||pt){var Yt=Xe?u.value():u,gt=pt?h.value():h;return T||(T=new $s),S(Yt,gt,g,x,T)}}return!!Ve&&(T||(T=new $s),function KS(u,h,g,x,S,T){var U=1&g,z=ic(u),W=z.length;if(W!=ic(h).length&&!U)return!1;for(var Ce=W;Ce--;){var Ve=z[Ce];if(!(U?Ve in h:Wn.call(h,Ve)))return!1}var Xe=T.get(u),pt=T.get(h);if(Xe&&pt)return Xe==h&&pt==u;var Yt=!0;T.set(u,h),T.set(h,u);for(var gt=U;++Ce<W;){var Jt=u[Ve=z[Ce]],un=h[Ve];if(x)var jr=U?x(un,Jt,Ve,h,u,T):x(Jt,un,Ve,u,h,T);if(!(jr===B?Jt===un||S(Jt,un,g,x,T):jr)){Yt=!1;break}gt||(gt="constructor"==Ve)}if(Yt&&!gt){var qr=u.constructor,Vi=h.constructor;qr!=Vi&&"constructor"in u&&"constructor"in h&&!("function"==typeof qr&&qr instanceof qr&&"function"==typeof Vi&&Vi instanceof Vi)&&(Yt=!1)}return T.delete(u),T.delete(h),Yt}(u,h,g,x,S,T))}(u,h,g,x,al,S))}function uf(u,h,g,x){var S=g.length,T=S,U=!x;if(null==u)return!T;for(u=Jn(u);S--;){var z=g[S];if(U&&z[2]?z[1]!==u[z[0]]:!(z[0]in u))return!1}for(;++S<T;){var W=(z=g[S])[0],ve=u[W],be=z[1];if(U&&z[2]){if(ve===B&&!(W in u))return!1}else{var Ce=new $s;if(x)var Ve=x(ve,be,W,u,h,Ce);if(!(Ve===B?al(be,ve,3,x,Ce):Ve))return!1}}return!0}function wg(u){return!(!wi(u)||function Vg(u){return!!qh&&qh in u}(u))&&(Ba(u)?jl:aS).test(sc(u))}function ud(u){return"function"==typeof u?u:null==u?us:"object"==typeof u?Nt(u)?C0(u[0],u[1]):Jl(u):Dd(u)}function Kl(u){if(!cu(u))return ES(u);var h=[];for(var g in Jn(u))Wn.call(u,g)&&"constructor"!=g&&h.push(g);return h}function df(u,h){return u<h}function Mg(u,h){var g=-1,x=$r(u)?te(u.length):[];return Ko(u,function(S,T,U){x[++g]=h(S,T,U)}),x}function Jl(u){var h=Fg(u);return 1==h.length&&h[0][2]?fl(h[0][0],h[0][1]):function(g){return g===u||uf(g,u,h)}}function C0(u,h){return Ug(u)&&zg(h)?fl(ia(u),h):function(g){var x=zf(g,u);return x===B&&x===h?mu(g,u):al(h,x,3)}}function xi(u,h,g,x,S){u!==h&&af(h,function(T,U){if(S||(S=new $s),wi(T))!function Cg(u,h,g,x,S,T,U){var z=Hg(u,g),W=Hg(h,g),ve=U.get(W);if(ve)_g(u,g,ve);else{var be=T?T(z,W,g+"",u,h,U):B,Ce=be===B;if(Ce){var Ve=Nt(W),Xe=!Ve&&ml(W),pt=!Ve&&!Xe&&Mo(W);be=W,Ve||Xe||pt?Nt(z)?be=z:Ri(z)?be=rs(z):Xe?(Ce=!1,be=Dg(W,!0)):pt?(Ce=!1,be=Tg(W,!0)):be=[]:Sd(W)||cc(W)?(be=z,cc(z)?be=f_(z):(!wi(z)||Ba(z))&&(be=V0(W))):Ce=!1}Ce&&(U.set(W,be),S(be,W,x,T,U),U.delete(W)),_g(u,g,be)}}(u,h,U,g,xi,x,S);else{var z=x?x(Hg(u,U),T,U+"",u,h,S):B;z===B&&(z=T),_g(u,U,z)}},sr)}function S0(u,h){var g=u.length;if(g)return os(h+=h<0?g:0,g)?u[h]:B}function Sg(u,h,g){h=h.length?zn(h,function(T){return Nt(T)?function(U){return Yl(U,1===T.length?T[0]:T)}:T}):[us];var x=-1;return h=zn(h,tr(yt())),function Hl(G,ue){var te=G.length;for(G.sort(ue);te--;)G[te]=G[te].value;return G}(Mg(u,function(T,U,z){return{criteria:zn(h,function(ve){return ve(T)}),index:++x,value:T}}),function(T,U){return function qS(u,h,g){for(var x=-1,S=u.criteria,T=h.criteria,U=S.length,z=g.length;++x<U;){var W=I0(S[x],T[x]);if(W)return x>=z?W:W*("desc"==g[x]?-1:1)}return u.index-h.index}(T,U,g)})}function Ql(u,h,g){for(var x=-1,S=h.length,T={};++x<S;){var U=h[x],z=Yl(u,U);g(z,U)&&hf(T,ul(U,u),z)}return T}function ll(u,h,g,x){var S=x?Cs:Fi,T=-1,U=h.length,z=u;for(u===h&&(h=rs(h)),g&&(z=zn(u,tr(g)));++T<U;)for(var W=0,ve=h[T],be=g?g(ve):ve;(W=S(z,be,W,x))>-1;)z!==u&&Zh.call(z,W,1),Zh.call(u,W,1);return u}function Eg(u,h){for(var g=u?h.length:0,x=g-1;g--;){var S=h[g];if(g==x||S!==T){var T=S;os(S)?Zh.call(u,S,1):A0(u,S)}}return u}function dd(u,h){return u+hi(nd()*(h-u+1))}function E0(u,h){var g="";if(!u||h<1||h>Da)return g;do{h%2&&(g+=u),(h=hi(h/2))&&(u+=u)}while(h);return g}function Kt(u,h){return Gg(G0(u,h,us),u+"")}function Se(u){return vo(gu(u))}function bP(u,h){var g=gu(u);return vd(g,Xl(h,0,g.length))}function hf(u,h,g,x){if(!wi(u))return u;for(var S=-1,T=(h=ul(h,u)).length,U=T-1,z=u;null!=z&&++S<T;){var W=ia(h[S]),ve=g;if("__proto__"===W||"constructor"===W||"prototype"===W)return u;if(S!=U){var be=z[W];(ve=x?x(be,W,z):B)===B&&(ve=wi(be)?be:os(h[S+1])?[]:{})}rd(z,W,ve),z=z[W]}return u}var GS=Qh?function(u,h){return Qh.set(u,h),u}:us,xP=qc?function(u,h){return qc(u,"toString",{configurable:!0,enumerable:!1,value:w_(h),writable:!0})}:us;function wP(u){return vd(gu(u))}function xo(u,h,g){var x=-1,S=u.length;h<0&&(h=-h>S?0:S+h),(g=g>S?S:g)<0&&(g+=S),S=h>g?0:g-h>>>0,h>>>=0;for(var T=te(S);++x<S;)T[x]=u[x+h];return T}function MP(u,h){var g;return Ko(u,function(x,S,T){return!(g=h(x,S,T))}),!!g}function cl(u,h,g){var x=0,S=null==u?x:u.length;if("number"==typeof h&&h==h&&S<=2147483647){for(;x<S;){var T=x+S>>>1,U=u[T];null!==U&&!qs(U)&&(g?U<=h:U<h)?x=T+1:S=T}return S}return D0(u,h,us,g)}function D0(u,h,g,x){var S=0,T=null==u?0:u.length;if(0===T)return 0;for(var U=(h=g(h))!=h,z=null===h,W=qs(h),ve=h===B;S<T;){var be=hi((S+T)/2),Ce=g(u[be]),Ve=Ce!==B,Xe=null===Ce,pt=Ce==Ce,Yt=qs(Ce);if(U)var gt=x||pt;else gt=ve?pt&&(x||Ve):z?pt&&Ve&&(x||!Xe):W?pt&&Ve&&!Xe&&(x||!Yt):!Xe&&!Yt&&(x?Ce<=h:Ce<h);gt?S=be+1:T=be}return Ti(T,4294967294)}function WS(u,h){for(var g=-1,x=u.length,S=0,T=[];++g<x;){var U=u[g],z=h?h(U):U;if(!g||!Wr(z,W)){var W=z;T[S++]=0===U?0:U}}return T}function Bi(u){return"number"==typeof u?u:qs(u)?NaN:+u}function Vr(u){if("string"==typeof u)return u;if(Nt(u))return zn(u,Vr)+"";if(qs(u))return En?En.call(u):"";var h=u+"";return"0"==h&&1/u==-yn?"-0":h}function js(u,h,g){var x=-1,S=Vh,T=u.length,U=!0,z=[],W=z;if(g)U=!1,S=St;else if(T>=200){var ve=h?null:F0(u);if(ve)return jc(ve);U=!1,S=il,W=new sl}else W=h?[]:z;e:for(;++x<T;){var be=u[x],Ce=h?h(be):be;if(be=g||0!==be?be:0,U&&Ce==Ce){for(var Ve=W.length;Ve--;)if(W[Ve]===Ce)continue e;h&&W.push(Ce),z.push(be)}else S(W,Ce,g)||(W!==z&&W.push(Ce),z.push(be))}return z}function A0(u,h){return null==(u=as(u,h=ul(h,u)))||delete u[ia(ls(h))]}function T0(u,h,g,x){return hf(u,h,g(Yl(u,h)),x)}function Ir(u,h,g,x){for(var S=u.length,T=x?S:-1;(x?T--:++T<S)&&h(u[T],T,u););return g?xo(u,x?0:T,x?T+1:S):xo(u,x?T+1:0,x?S:T)}function Qo(u,h){var g=u;return g instanceof nn&&(g=g.value()),zh(h,function(x,S){return S.func.apply(S.thisArg,Ta([x],S.args))},g)}function ff(u,h,g){var x=u.length;if(x<2)return x?js(u[0]):[];for(var S=-1,T=te(x);++S<x;)for(var U=u[S],z=-1;++z<x;)z!=S&&(T[S]=Pa(T[S]||U,u[z],h,g));return js(rr(T,1),h,g)}function hd(u,h,g){for(var x=-1,S=u.length,T=h.length,U={};++x<S;)g(U,u[x],x<T?h[x]:B);return U}function ec(u){return Ri(u)?u:[]}function pf(u){return"function"==typeof u?u:us}function ul(u,h){return Nt(u)?u:Ug(u,h)?[u]:q0(Pn(u))}var $S=Kt;function tc(u,h,g){var x=u.length;return g=g===B?x:g,!h&&g>=x?u:xo(u,h,g)}var jS=CS||function(u){return Qi.clearTimeout(u)};function Dg(u,h){if(h)return u.slice();var g=u.length,x=l0?l0(g):new u.constructor(g);return u.copy(x),x}function zr(u){var h=new u.constructor(u.byteLength);return new Qu(h).set(new Qu(u)),h}function Tg(u,h){var g=h?zr(u.buffer):u.buffer;return new u.constructor(g,u.byteOffset,u.length)}function I0(u,h){if(u!==h){var g=u!==B,x=null===u,S=u==u,T=qs(u),U=h!==B,z=null===h,W=h==h,ve=qs(h);if(!z&&!ve&&!T&&u>h||T&&U&&W&&!z&&!ve||x&&U&&W||!g&&W||!S)return 1;if(!x&&!T&&!ve&&u<h||ve&&g&&S&&!x&&!T||z&&g&&S||!U&&S||!W)return-1}return 0}function R0(u,h,g,x){for(var S=-1,T=u.length,U=g.length,z=-1,W=h.length,ve=Ai(T-U,0),be=te(W+ve),Ce=!x;++z<W;)be[z]=h[z];for(;++S<U;)(Ce||S<T)&&(be[g[S]]=u[S]);for(;ve--;)be[z++]=u[S++];return be}function P0(u,h,g,x){for(var S=-1,T=u.length,U=-1,z=g.length,W=-1,ve=h.length,be=Ai(T-z,0),Ce=te(be+ve),Ve=!x;++S<be;)Ce[S]=u[S];for(var Xe=S;++W<ve;)Ce[Xe+W]=h[W];for(;++U<z;)(Ve||S<T)&&(Ce[Xe+g[U]]=u[S++]);return Ce}function rs(u,h){var g=-1,x=u.length;for(h||(h=te(x));++g<x;)h[g]=u[g];return h}function ea(u,h,g,x){var S=!g;g||(g={});for(var T=-1,U=h.length;++T<U;){var z=h[T],W=x?x(g[z],u[z],z,g,u):B;W===B&&(W=u[z]),S?yo(g,z,W):rd(g,z,W)}return g}function Rg(u,h){return function(g,x){var S=Nt(g)?Jm:nf,T=h?h():{};return S(g,u,yt(x,2),T)}}function ta(u){return Kt(function(h,g){var x=-1,S=g.length,T=S>1?g[S-1]:B,U=S>2?g[2]:B;for(T=u.length>3&&"function"==typeof T?(S--,T):B,U&&Hr(g[0],g[1],U)&&(T=S<3?B:T,S=1),h=Jn(h);++x<S;){var z=g[x];z&&u(h,z,x,T)}return h})}function gf(u,h){return function(g,x){if(null==g)return g;if(!$r(g))return u(g,x);for(var S=g.length,T=h?S:-1,U=Jn(g);(h?T--:++T<S)&&!1!==x(U[T],T,U););return g}}function fd(u){return function(h,g,x){for(var S=-1,T=Jn(h),U=x(h),z=U.length;z--;){var W=U[u?z:++S];if(!1===g(T[W],W,T))break}return h}}function k0(u){return function(h){var g=uo(h=Pn(h))?fo(h):B,x=g?g[0]:h.charAt(0),S=g?tc(g,1).join(""):h.slice(1);return x[u]()+S}}function ru(u){return function(h){return zh(Qb(Pt(h).replace(cP,"")),u,"")}}function su(u){return function(){var h=arguments;switch(h.length){case 0:return new u;case 1:return new u(h[0]);case 2:return new u(h[0],h[1]);case 3:return new u(h[0],h[1],h[2]);case 4:return new u(h[0],h[1],h[2],h[3]);case 5:return new u(h[0],h[1],h[2],h[3],h[4]);case 6:return new u(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new u(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var g=ql(u.prototype),x=u.apply(g,h);return wi(x)?x:g}}function nc(u){return function(h,g,x){var S=Jn(h);if(!$r(h)){var T=yt(g,3);h=Ui(h),g=function(z){return T(S[z],z,S)}}var U=u(h,g,x);return U>-1?S[T?h[U]:U]:B}}function O0(u){return ss(function(h){var g=h.length,x=g,S=Ii.prototype.thru;for(u&&h.reverse();x--;){var T=h[x];if("function"!=typeof T)throw new go(vn);if(S&&!U&&"wrapper"==gd(T))var U=new Ii([],!0)}for(x=U?x:g;++x<g;){var z=gd(T=h[x]),W="wrapper"==z?N0(T):B;U=W&&lu(W[0])&&424==W[1]&&!W[4].length&&1==W[9]?U[gd(W[0])].apply(U,W[3]):1==T.length&&lu(T)?U[z]():U.thru(T)}return function(){var ve=arguments,be=ve[0];if(U&&1==ve.length&&Nt(be))return U.plant(be).value();for(var Ce=0,Ve=g?h[Ce].apply(this,ve):be;++Ce<g;)Ve=h[Ce].call(this,Ve);return Ve}})}function j(u,h,g,x,S,T,U,z,W,ve){var be=128&h,Ce=1&h,Ve=2&h,Xe=24&h,pt=512&h,Yt=Ve?B:su(u);return function gt(){for(var Jt=arguments.length,un=te(Jt),jr=Jt;jr--;)un[jr]=arguments[jr];if(Xe)var qr=au(gt),Vi=Wl(un,qr);if(x&&(un=R0(un,x,S,Xe)),T&&(un=P0(un,T,U,Xe)),Jt-=Vi,Xe&&Jt<ve){var Mi=ho(un,qr);return vf(u,h,j,gt.placeholder,g,un,Mi,z,W,ve-Jt)}var Do=Ce?g:this,Ao=Ve?Do[u]:u;return Jt=un.length,z?un=na(un,z):pt&&Jt>1&&un.reverse(),be&&W<Jt&&(un.length=W),this&&this!==Qi&&this instanceof gt&&(Ao=Yt||su(Ao)),Ao.apply(Do,un)}}function Pg(u,h){return function(g,x){return function Jo(u,h,g,x){return bo(u,function(S,T,U){h(x,g(S),T,U)}),x}(g,u,h(x),{})}}function Hn(u,h){return function(g,x){var S;if(g===B&&x===B)return h;if(g!==B&&(S=g),x!==B){if(S===B)return x;"string"==typeof g||"string"==typeof x?(g=Vr(g),x=Vr(x)):(g=Bi(g),x=Bi(x)),S=u(g,x)}return S}}function md(u){return ss(function(h){return h=zn(h,tr(yt())),Kt(function(g){var x=this;return u(h,function(S){return Ar(S,x,g)})})})}function dl(u,h){var g=(h=h===B?" ":Vr(h)).length;if(g<2)return g?E0(h,u):h;var x=E0(h,cg(u/Di(h)));return uo(h)?tc(fo(x),0,u).join(""):x.slice(0,u)}function L0(u){return function(h,g,x){return x&&"number"!=typeof x&&Hr(h,g,x)&&(g=x=B),h=Ua(h),g===B?(g=h,h=0):g=Ua(g),function nu(u,h,g,x){for(var S=-1,T=Ai(cg((h-u)/(g||1)),0),U=te(T);T--;)U[x?T:++S]=u,u+=g;return U}(h,g,x=x===B?h<g?1:-1:Ua(x),u)}}function _f(u){return function(h,g){return"string"==typeof h&&"string"==typeof g||(h=Xs(h),g=Xs(g)),u(h,g)}}function vf(u,h,g,x,S,T,U,z,W,ve){var be=8&h;h|=be?32:64,4&(h&=~(be?64:32))||(h&=-4);var Yt=[u,h,S,be?T:B,be?U:B,be?B:T,be?B:U,z,W,ve],gt=g.apply(B,Yt);return lu(u)&&W0(gt,Yt),gt.placeholder=x,$0(gt,u,h)}function wo(u){var h=nr[u];return function(g,x){if(g=Xs(g),(x=null==x?0:Ti(Xt(x),292))&&td(g)){var S=(Pn(g)+"e").split("e");return+((S=(Pn(h(S[0]+"e"+(+S[1]+x)))+"e").split("e"))[0]+"e"+(+S[1]-x))}return h(g)}}var F0=vt&&1/jc(new vt([,-0]))[1]==yn?function(u){return new vt(u)}:S_;function hl(u){return function(h){var g=vr(h);return g==qo?eg(h):g==oo?function Ku(G){var ue=-1,te=Array(G.size);return G.forEach(function(Ye){te[++ue]=[Ye,Ye]}),te}(h):function bi(G,ue){return zn(ue,function(te){return[te,G[te]]})}(h,u(h))}}function La(u,h,g,x,S,T,U,z){var W=2&h;if(!W&&"function"!=typeof u)throw new go(vn);var ve=x?x.length:0;if(ve||(h&=-97,x=S=B),U=U===B?U:Ai(Xt(U),0),z=z===B?z:Xt(z),ve-=S?S.length:0,64&h){var be=x,Ce=S;x=S=B}var Ve=W?B:N0(u),Xe=[u,h,g,x,S,be,Ce,T,U,z];if(Ve&&function eE(u,h){var g=u[1],x=h[1],S=g|x;if(!(S<131||(128==x&&8==g||128==x&&256==g&&u[7].length<=h[8]||384==x&&h[7].length<=h[8]&&8==g)))return u;1&x&&(u[2]=h[2],S|=1&g?0:4);var z=h[3];if(z){var W=u[3];u[3]=W?R0(W,z,h[4]):z,u[4]=W?ho(u[3],li):h[4]}(z=h[5])&&(u[5]=(W=u[5])?P0(W,z,h[6]):z,u[6]=W?ho(u[5],li):h[6]),(z=h[7])&&(u[7]=z),128&x&&(u[8]=null==u[8]?h[8]:Ti(u[8],h[8])),null==u[9]&&(u[9]=h[9]),u[0]=h[0],u[1]=S}(Xe,Ve),u=Xe[0],h=Xe[1],g=Xe[2],x=Xe[3],S=Xe[4],!(z=Xe[9]=Xe[9]===B?W?0:u.length:Ai(Xe[9]-ve,0))&&24&h&&(h&=-25),h&&1!=h)pt=8==h||16==h?function pd(u,h,g){var x=su(u);return function S(){for(var T=arguments.length,U=te(T),z=T,W=au(S);z--;)U[z]=arguments[z];var ve=T<3&&U[0]!==W&&U[T-1]!==W?[]:ho(U,W);return(T-=ve.length)<g?vf(u,h,j,S.placeholder,B,U,ve,B,B,g-T):Ar(this&&this!==Qi&&this instanceof S?x:u,this,U)}}(u,h,z):32!=h&&33!=h||S.length?j.apply(B,Xe):function YS(u,h,g,x){var S=1&h,T=su(u);return function U(){for(var z=-1,W=arguments.length,ve=-1,be=x.length,Ce=te(be+W),Ve=this&&this!==Qi&&this instanceof U?T:u;++ve<be;)Ce[ve]=x[ve];for(;W--;)Ce[ve++]=arguments[++z];return Ar(Ve,S?g:this,Ce)}}(u,h,g,x);else var pt=function XS(u,h,g){var x=1&h,S=su(u);return function T(){return(this&&this!==Qi&&this instanceof T?S:u).apply(x?g:this,arguments)}}(u,h,g);return $0((Ve?GS:W0)(pt,Xe),u,h)}function kg(u,h,g,x){return u===B||Wr(u,Ju[g])&&!Wn.call(x,g)?h:u}function ou(u,h,g,x,S,T){return wi(u)&&wi(h)&&(T.set(h,u),xi(u,h,B,ou,T),T.delete(h)),u}function yf(u){return Sd(u)?B:u}function Og(u,h,g,x,S,T){var U=1&g,z=u.length,W=h.length;if(z!=W&&!(U&&W>z))return!1;var ve=T.get(u),be=T.get(h);if(ve&&be)return ve==h&&be==u;var Ce=-1,Ve=!0,Xe=2&g?new sl:B;for(T.set(u,h),T.set(h,u);++Ce<z;){var pt=u[Ce],Yt=h[Ce];if(x)var gt=U?x(Yt,pt,Ce,h,u,T):x(pt,Yt,Ce,u,h,T);if(gt!==B){if(gt)continue;Ve=!1;break}if(Xe){if(!Qm(h,function(Jt,un){if(!il(Xe,un)&&(pt===Jt||S(pt,Jt,g,x,T)))return Xe.push(un)})){Ve=!1;break}}else if(pt!==Yt&&!S(pt,Yt,g,x,T)){Ve=!1;break}}return T.delete(u),T.delete(h),Ve}function ss(u){return Gg(G0(u,B,Ef),u+"")}function ic(u){return Zl(u,Ui,wf)}function Lg(u){return Zl(u,sr,B0)}var N0=Qh?function(u){return Qh.get(u)}:S_;function gd(u){for(var h=u.name+"",g=Zc[h],x=Wn.call(Zc,h)?g.length:0;x--;){var S=g[x],T=S.func;if(null==T||T==u)return S.name}return h}function au(u){return(Wn.call(E,"placeholder")?E:u).placeholder}function yt(){var u=E.iteratee||Wf;return u=u===Wf?ud:u,arguments.length?u(arguments[0],arguments[1]):u}function bf(u,h){var g=u.__data__;return function EP(u){var h=typeof u;return"string"==h||"number"==h||"symbol"==h||"boolean"==h?"__proto__"!==u:null===u}(h)?g["string"==typeof h?"string":"hash"]:g.map}function Fg(u){for(var h=Ui(u),g=h.length;g--;){var x=h[g],S=u[x];h[g]=[x,S,zg(S)]}return h}function rc(u,h){var g=function co(G,ue){return null==G?B:G[ue]}(u,h);return wg(g)?g:B}var wf=ug?function(u){return null==u?[]:(u=Jn(u),Gs(ug(u),function(h){return ag.call(u,h)}))}:Ad,B0=ug?function(u){for(var h=[];u;)Ta(h,wf(u)),u=Yh(u);return h}:Ad,vr=_r;function JS(u,h,g){for(var x=-1,S=(h=ul(h,u)).length,T=!1;++x<S;){var U=ia(h[x]);if(!(T=null!=u&&g(u,U)))break;u=u[U]}return T||++x!=S?T:!!(S=null==u?0:u.length)&&a_(S)&&os(U,S)&&(Nt(u)||cc(u))}function V0(u){return"function"!=typeof u.constructor||cu(u)?{}:ql(Yh(u))}function Bg(u){return Nt(u)||cc(u)||!!(Kh&&u&&u[Kh])}function os(u,h){var g=typeof u;return!!(h=h??Da)&&("number"==g||"symbol"!=g&&Wy.test(u))&&u>-1&&u%1==0&&u<h}function Hr(u,h,g){if(!wi(g))return!1;var x=typeof h;return!!("number"==x?$r(g)&&os(h,g.length):"string"==x&&h in g)&&Wr(g[h],u)}function Ug(u,h){if(Nt(u))return!1;var g=typeof u;return!("number"!=g&&"symbol"!=g&&"boolean"!=g&&null!=u&&!qs(u))||nS.test(u)||!tS.test(u)||null!=h&&u in Jn(h)}function lu(u){var h=gd(u),g=E[h];if("function"!=typeof g||!(h in nn.prototype))return!1;if(u===g)return!0;var x=N0(g);return!!x&&u===x[0]}(Zo&&vr(new Zo(new ArrayBuffer(1)))!=zc||Xc&&vr(new Xc)!=qo||id&&vr(id.resolve())!=Vm||vt&&vr(new vt)!=oo||Yc&&vr(new Yc)!=ao)&&(vr=function(u){var h=_r(u),g=h==nl?u.constructor:B,x=g?sc(g):"";if(x)switch(x){case AS:return zc;case u0:return qo;case TS:return Vm;case IS:return oo;case xe:return ao}return h});var H0=ig?Ba:Eo;function cu(u){var h=u&&u.constructor;return u===("function"==typeof h&&h.prototype||Ju)}function zg(u){return u==u&&!wi(u)}function fl(u,h){return function(g){return null!=g&&g[u]===h&&(h!==B||u in Jn(g))}}function G0(u,h,g){return h=Ai(h===B?u.length-1:h,0),function(){for(var x=arguments,S=-1,T=Ai(x.length-h,0),U=te(T);++S<T;)U[S]=x[h+S];S=-1;for(var z=te(h+1);++S<h;)z[S]=x[S];return z[h]=g(U),Ar(u,this,z)}}function as(u,h){return h.length<2?u:Yl(u,xo(h,0,-1))}function na(u,h){for(var g=u.length,x=Ti(h.length,g),S=rs(u);x--;){var T=h[x];u[x]=os(T,g)?S[T]:B}return u}function Hg(u,h){if(("constructor"!==h||"function"!=typeof u[h])&&"__proto__"!=h)return u[h]}var W0=j0(GS),_d=SS||function(u,h){return Qi.setTimeout(u,h)},Gg=j0(xP);function $0(u,h,g){var x=h+"";return Gg(u,function Mf(u,h){var g=h.length;if(!g)return u;var x=g-1;return h[x]=(g>1?"& ":"")+h[x],h=h.join(g>2?", ":" "),u.replace(sS,"{\n/* [wrapped with "+h+"] */\n")}(x,function iE(u,h){return ts(Ey,function(g){var x="_."+g[0];h&g[1]&&!Vh(u,x)&&u.push(x)}),u.sort()}(function U0(u){var h=u.match($i);return h?h[1].split(Hc):[]}(x),g)))}function j0(u){var h=0,g=0;return function(){var x=Es(),S=16-(x-g);if(g=x,S>0){if(++h>=800)return arguments[0]}else h=0;return u.apply(B,arguments)}}function vd(u,h){var g=-1,x=u.length,S=x-1;for(h=h===B?x:h;++g<h;){var T=dd(g,S),U=u[T];u[T]=u[g],u[g]=U}return u.length=h,u}var q0=function QS(u){var h=Ff(u,function(x){return 500===g.size&&g.clear(),x}),g=h.cache;return h}(function(u){var h=[];return 46===u.charCodeAt(0)&&h.push(""),u.replace(iS,function(g,x,S,T){h.push(S?T.replace(oS,"$1"):x||g)}),h});function ia(u){if("string"==typeof u||qs(u))return u;var h=u+"";return"0"==h&&1/u==-yn?"-0":h}function sc(u){if(null!=u){try{return rg.call(u)}catch{}try{return u+""}catch{}}return""}function rE(u){if(u instanceof nn)return u.clone();var h=new Ii(u.__wrapped__,u.__chain__);return h.__actions__=rs(u.__actions__),h.__index__=u.__index__,h.__values__=u.__values__,h}var ra=Kt(function(u,h){return Ri(u)?Pa(u,rr(h,1,Ri,!0)):[]}),bd=Kt(function(u,h){var g=ls(h);return Ri(g)&&(g=B),Ri(u)?Pa(u,rr(h,1,Ri,!0),yt(g,2)):[]}),Y0=Kt(function(u,h){var g=ls(h);return Ri(g)&&(g=B),Ri(u)?Pa(u,rr(h,1,Ri,!0),B,g):[]});function Cf(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=null==g?0:Xt(g);return S<0&&(S=Ai(x+S,0)),er(u,yt(h,3),S)}function Sf(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=x-1;return g!==B&&(S=Xt(g),S=g<0?Ai(x+S,0):Ti(S,x-1)),er(u,yt(h,3),S,!0)}function Ef(u){return null!=u&&u.length?rr(u,1):[]}function Q0(u){return u&&u.length?u[0]:B}var lE=Kt(function(u){var h=zn(u,ec);return h.length&&h[0]===u[0]?yg(h):[]}),eb=Kt(function(u){var h=ls(u),g=zn(u,ec);return h===ls(g)?h=B:g.pop(),g.length&&g[0]===u[0]?yg(g,yt(h,2)):[]}),Df=Kt(function(u){var h=ls(u),g=zn(u,ec);return(h="function"==typeof h?h:B)&&g.pop(),g.length&&g[0]===u[0]?yg(g,B,h):[]});function ls(u){var h=null==u?0:u.length;return h?u[h-1]:B}var uE=Kt(nb);function nb(u,h){return u&&u.length&&h&&h.length?ll(u,h):u}var dE=ss(function(u,h){var g=null==u?0:u.length,x=sf(u,h);return Eg(u,zn(h,function(S){return os(S,g)?+S:S}).sort(I0)),x});function Wg(u){return null==u?u:DS.call(u)}var gE=Kt(function(u){return js(rr(u,1,Ri,!0))}),qg=Kt(function(u){var h=ls(u);return Ri(h)&&(h=B),js(rr(u,1,Ri,!0),yt(h,2))}),cb=Kt(function(u){var h=ls(u);return h="function"==typeof h?h:B,js(rr(u,1,Ri,!0),B,h)});function wd(u){if(!u||!u.length)return[];var h=0;return u=Gs(u,function(g){if(Ri(g))return h=Ai(g.length,h),!0}),Ia(h,function(g){return zn(u,Ft(g))})}function Md(u,h){if(!u||!u.length)return[];var g=wd(u);return null==h?g:zn(g,function(x){return Ar(h,B,x)})}var vE=Kt(function(u,h){return Ri(u)?Pa(u,h):[]}),Xg=Kt(function(u){return ff(Gs(u,Ri))}),Tf=Kt(function(u){var h=ls(u);return Ri(h)&&(h=B),ff(Gs(u,Ri),yt(h,2))}),pl=Kt(function(u){var h=ls(u);return h="function"==typeof h?h:B,ff(Gs(u,Ri),B,h)}),db=Kt(wd),bE=Kt(function(u){var h=u.length,g=h>1?u[h-1]:B;return g="function"==typeof g?(u.pop(),g):B,Md(u,g)});function Zg(u){var h=E(u);return h.__chain__=!0,h}function If(u,h){return h(u)}var xE=ss(function(u){var h=u.length,g=h?u[0]:0,x=this.__wrapped__,S=function(T){return sf(T,u)};return!(h>1||this.__actions__.length)&&x instanceof nn&&os(g)?((x=x.slice(g,+g+(h?1:0))).__actions__.push({func:If,args:[S],thisArg:B}),new Ii(x,this.__chain__).thru(function(T){return h&&!T.length&&T.push(B),T})):this.thru(S)}),LP=Rg(function(u,h,g){Wn.call(u,g)?++u[g]:yo(u,g,1)}),DE=nc(Cf),du=nc(Sf);function hu(u,h){return(Nt(u)?ts:Ko)(u,yt(h,3))}function sa(u,h){return(Nt(u)?t0:y0)(u,yt(h,3))}var TE=Rg(function(u,h,g){Wn.call(u,g)?u[g].push(h):yo(u,g,[h])}),lc=Kt(function(u,h,g){var x=-1,S="function"==typeof h,T=$r(u)?te(u.length):[];return Ko(u,function(U){T[++x]=S?Ar(h,U,g):cd(U,h,g)}),T}),RE=Rg(function(u,h,g){yo(u,g,h)});function fu(u,h){return(Nt(u)?zn:Mg)(u,yt(h,3))}var kE=Rg(function(u,h,g){u[g?0:1].push(h)},function(){return[[],[]]}),GP=Kt(function(u,h){if(null==u)return[];var g=h.length;return g>1&&Hr(u,h[0],h[1])?h=[]:g>2&&Hr(h[0],h[1],h[2])&&(h=[h[0]]),Sg(u,rr(h,1),[])}),Rf=lg||function(){return Qi.Date.now()};function Pf(u,h,g){return h=g?B:h,La(u,128,B,B,B,B,h=u&&null==h?u.length:h)}function e_(u,h){var g;if("function"!=typeof h)throw new go(vn);return u=Xt(u),function(){return--u>0&&(g=h.apply(this,arguments)),u<=1&&(h=B),g}}var kf=Kt(function(u,h,g){var x=1;if(g.length){var S=ho(g,au(kf));x|=32}return La(u,x,h,g,S)}),t_=Kt(function(u,h,g){var x=3;if(g.length){var S=ho(g,au(t_));x|=32}return La(h,x,u,g,S)});function Lf(u,h,g){var x,S,T,U,z,W,ve=0,be=!1,Ce=!1,Ve=!0;if("function"!=typeof u)throw new go(vn);function Xe(Mi){var Do=x,Ao=S;return x=S=B,ve=Mi,U=u.apply(Ao,Do)}function pt(Mi){return ve=Mi,z=_d(Jt,h),be?Xe(Mi):U}function gt(Mi){var Do=Mi-W;return W===B||Do>=h||Do<0||Ce&&Mi-ve>=T}function Jt(){var Mi=Rf();if(gt(Mi))return un(Mi);z=_d(Jt,function Yt(Mi){var ux=h-(Mi-W);return Ce?Ti(ux,T-(Mi-ve)):ux}(Mi))}function un(Mi){return z=B,Ve&&x?Xe(Mi):(x=S=B,U)}function Vi(){var Mi=Rf(),Do=gt(Mi);if(x=arguments,S=this,W=Mi,Do){if(z===B)return pt(W);if(Ce)return jS(z),z=_d(Jt,h),Xe(W)}return z===B&&(z=_d(Jt,h)),U}return h=Xs(h)||0,wi(g)&&(be=!!g.leading,T=(Ce="maxWait"in g)?Ai(Xs(g.maxWait)||0,h):T,Ve="trailing"in g?!!g.trailing:Ve),Vi.cancel=function jr(){z!==B&&jS(z),ve=0,x=W=S=z=B},Vi.flush=function qr(){return z===B?U:un(Rf())},Vi}var Fa=Kt(function(u,h){return v0(u,1,h)}),OE=Kt(function(u,h,g){return v0(u,Xs(h)||0,g)});function Ff(u,h){if("function"!=typeof u||null!=h&&"function"!=typeof h)throw new go(vn);var g=function(){var x=arguments,S=h?h.apply(this,x):x[0],T=g.cache;if(T.has(S))return T.get(S);var U=u.apply(this,x);return g.cache=T.set(S,U)||T,U};return g.cache=new(Ff.Cache||_o),g}function Cd(u){if("function"!=typeof u)throw new go(vn);return function(){var h=arguments;switch(h.length){case 0:return!u.call(this);case 1:return!u.call(this,h[0]);case 2:return!u.call(this,h[0],h[1]);case 3:return!u.call(this,h[0],h[1],h[2])}return!u.apply(this,h)}}Ff.Cache=_o;var NE=$S(function(u,h){var g=(h=1==h.length&&Nt(h[0])?zn(h[0],tr(yt())):zn(rr(h,1),tr(yt()))).length;return Kt(function(x){for(var S=-1,T=Ti(x.length,g);++S<T;)x[S]=h[S].call(this,x[S]);return Ar(u,this,x)})}),n_=Kt(function(u,h){var g=ho(h,au(n_));return La(u,32,B,h,g)}),gb=Kt(function(u,h){var g=ho(h,au(gb));return La(u,64,B,h,g)}),i_=ss(function(u,h){return La(u,256,B,B,B,h)});function Wr(u,h){return u===h||u!=u&&h!=h}var o_=_f(Qc),GE=_f(function(u,h){return u>=h}),cc=eu(function(){return arguments}())?eu:function(u){return pi(u)&&Wn.call(u,"callee")&&!ag.call(u,"callee")},Nt=te.isArray,WE=Hs?tr(Hs):function bg(u){return pi(u)&&_r(u)==Ph};function $r(u){return null!=u&&a_(u.length)&&!Ba(u)}function Ri(u){return pi(u)&&$r(u)}var ml=gP||Eo,$E=Vn?tr(Vn):function xg(u){return pi(u)&&_r(u)==Vl};function gl(u){if(!pi(u))return!1;var h=_r(u);return h==$u||"[object DOMException]"==h||"string"==typeof u.message&&"string"==typeof u.name&&!Sd(u)}function Ba(u){if(!wi(u))return!1;var h=_r(u);return h==Um||h==JC||"[object AsyncFunction]"==h||"[object Proxy]"==h}function bb(u){return"number"==typeof u&&u==Xt(u)}function a_(u){return"number"==typeof u&&u>-1&&u%1==0&&u<=Da}function wi(u){var h=typeof u;return null!=u&&("object"==h||"function"==h)}function pi(u){return null!=u&&"object"==typeof u}var ZE=wS?tr(wS):function VS(u){return pi(u)&&vr(u)==qo};function pu(u){return"number"==typeof u||pi(u)&&_r(u)==Ih}function Sd(u){if(!pi(u)||_r(u)!=nl)return!1;var h=Yh(u);if(null===h)return!0;var g=Wn.call(h,"constructor")&&h.constructor;return"function"==typeof g&&g instanceof g&&rg.call(g)==pP}var Nf=MS?tr(MS):function w0(u){return pi(u)&&_r(u)==Vc},Bf=zl?tr(zl):function M0(u){return pi(u)&&vr(u)==oo};function Ed(u){return"string"==typeof u||!Nt(u)&&pi(u)&&_r(u)==Rh}function qs(u){return"symbol"==typeof u||pi(u)&&_r(u)==zm}var Mo=Sn?tr(Sn):function zS(u){return pi(u)&&a_(u.length)&&!!si[_r(u)]},h_=_f(df),eD=_f(function(u,h){return u<=h});function Mb(u){if(!u)return[];if($r(u))return Ed(u)?fo(u):rs(u);if(ed&&u[ed])return function Kn(G){for(var ue,te=[];!(ue=G.next()).done;)te.push(ue.value);return te}(u[ed]());var h=vr(u);return(h==qo?eg:h==oo?jc:gu)(u)}function Ua(u){return u?(u=Xs(u))===yn||u===-yn?17976931348623157e292*(u<0?-1:1):u==u?u:0:0===u?u:0}function Xt(u){var h=Ua(u),g=h%1;return h==h?g?h-g:h:0}function Cb(u){return u?Xl(Xt(u),0,jo):0}function Xs(u){if("number"==typeof u)return u;if(qs(u))return NaN;if(wi(u)){var h="function"==typeof u.valueOf?u.valueOf():u;u=wi(h)?h+"":h}if("string"!=typeof u)return 0===u?u:+u;u=Wc(u);var g=qu.test(u);return g||Gy.test(u)?Km(u.slice(2),g?2:8):Hy.test(u)?NaN:+u}function f_(u){return ea(u,sr(u))}function Pn(u){return null==u?"":Vr(u)}var m_=ta(function(u,h){if(cu(h)||$r(h))ea(h,Ui(h),u);else for(var g in h)Wn.call(h,g)&&rd(u,g,h[g])}),Sb=ta(function(u,h){ea(h,sr(h),u)}),Uf=ta(function(u,h,g,x){ea(h,sr(h),u,x)}),Eb=ta(function(u,h,g,x){ea(h,Ui(h),u,x)}),Db=ss(sf),Ab=Kt(function(u,h){u=Jn(u);var g=-1,x=h.length,S=x>2?h[2]:B;for(S&&Hr(h[0],h[1],S)&&(x=1);++g<x;)for(var T=h[g],U=sr(T),z=-1,W=U.length;++z<W;){var ve=U[z],be=u[ve];(be===B||Wr(be,Ju[ve])&&!Wn.call(u,ve))&&(u[ve]=T[ve])}return u}),Tb=Kt(function(u){return u.push(B,ou),Ar(Fb,B,u)});function zf(u,h,g){var x=null==u?B:Yl(u,h);return x===B?g:x}function mu(u,h){return null!=u&&JS(u,h,b0)}var kb=Pg(function(u,h,g){null!=h&&"function"!=typeof h.toString&&(h=sg.call(h)),u[h]=g},w_(us)),__=Pg(function(u,h,g){null!=h&&"function"!=typeof h.toString&&(h=sg.call(h)),Wn.call(u,h)?u[h].push(g):u[h]=[g]},yt),Ob=Kt(cd);function Ui(u){return $r(u)?fi(u):Kl(u)}function sr(u){return $r(u)?fi(u,!0):function HS(u){if(!wi(u))return function tE(u){var h=[];if(null!=u)for(var g in Jn(u))h.push(g);return h}(u);var h=cu(u),g=[];for(var x in u)"constructor"==x&&(h||!Wn.call(u,x))||g.push(x);return g}(u)}var rD=ta(function(u,h,g){xi(u,h,g)}),Fb=ta(function(u,h,g,x){xi(u,h,g,x)}),Nb=ss(function(u,h){var g={};if(null==u)return g;var x=!1;h=zn(h,function(T){return T=ul(T,u),x||(x=T.length>1),T}),ea(u,Lg(u),g),x&&(g=ji(g,7,yf));for(var S=h.length;S--;)A0(g,h[S]);return g}),Bb=ss(function(u,h){return null==u?{}:function Oa(u,h){return Ql(u,h,function(g,x){return mu(u,x)})}(u,h)});function sD(u,h){if(null==u)return{};var g=zn(Lg(u),function(x){return[x]});return h=yt(h),Ql(u,g,function(x,S){return h(x,S[0])})}var zb=hl(Ui),Hb=hl(sr);function gu(u){return null==u?[]:Gt(u,Ui(u))}var hD=ru(function(u,h,g){return h=h.toLowerCase(),u+(g?$b(h):h)});function $b(u){return _l(Pn(u).toLowerCase())}function Pt(u){return(u=Pn(u))&&u.replace(lS,Tr).replace(uP,"")}var fD=ru(function(u,h,g){return u+(g?"-":"")+h.toLowerCase()}),pD=ru(function(u,h,g){return u+(g?" ":"")+h.toLowerCase()}),Xb=k0("toLowerCase"),Kb=ru(function(u,h,g){return u+(g?"_":"")+h.toLowerCase()}),vD=ru(function(u,h,g){return u+(g?" ":"")+_l(h)}),xD=ru(function(u,h,g){return u+(g?" ":"")+h.toUpperCase()}),_l=k0("toUpperCase");function Qb(u,h,g){return u=Pn(u),(h=g?B:h)===B?function r0(G){return Ym.test(G)}(u)?function $h(G){return G.match(dP)||[]}(u):function ns(G){return G.match(Bs)||[]}(u):u.match(h)||[]}var x_=Kt(function(u,h){try{return Ar(u,B,h)}catch(g){return gl(g)?g:new Vt(g)}}),Gf=ss(function(u,h){return ts(h,function(g){g=ia(g),yo(u,g,kf(u[g],u))}),u});function w_(u){return function(){return u}}var CD=O0(),SD=O0(!0);function us(u){return u}function Wf(u){return ud("function"==typeof u?u:ji(u,1))}var nx=Kt(function(u,h){return function(g){return cd(g,u,h)}}),M_=Kt(function(u,h){return function(g){return cd(u,g,h)}});function ix(u,h,g){var x=Ui(h),S=ka(h,x);null==g&&(!wi(h)||!S.length&&x.length)&&(g=h,h=u,u=this,S=ka(h,Ui(h)));var T=!(wi(g)&&"chain"in g&&!g.chain),U=Ba(u);return ts(S,function(z){var W=h[z];u[z]=W,U&&(u.prototype[z]=function(){var ve=this.__chain__;if(T||ve){var be=u(this.__wrapped__),Ce=be.__actions__=rs(this.__actions__);return Ce.push({func:W,args:arguments,thisArg:u}),be.__chain__=ve,be}return W.apply(u,Ta([this.value()],arguments))})}),u}function S_(){}var R=md(zn),dc=md(Yo),rx=md(Qm);function Dd(u){return Ug(u)?Ft(ia(u)):function tu(u){return function(h){return Yl(h,u)}}(u)}var sx=L0(),DD=L0(!0);function Ad(){return[]}function Eo(){return!1}var $f=Hn(function(u,h){return u+h},0),jf=wo("ceil"),A_=Hn(function(u,h){return u/h},1),T_=wo("floor"),lx=Hn(function(u,h){return u*h},1),ek=wo("round"),PD=Hn(function(u,h){return u-h},0);return E.after=function pb(u,h){if("function"!=typeof h)throw new go(vn);return u=Xt(u),function(){if(--u<1)return h.apply(this,arguments)}},E.ary=Pf,E.assign=m_,E.assignIn=Sb,E.assignInWith=Uf,E.assignWith=Eb,E.at=Db,E.before=e_,E.bind=kf,E.bindAll=Gf,E.bindKey=t_,E.castArray=function HE(){if(!arguments.length)return[];var u=arguments[0];return Nt(u)?u:[u]},E.chain=Zg,E.chunk=function sE(u,h,g){h=(g?Hr(u,h,g):h===B)?1:Ai(Xt(h),0);var x=null==u?0:u.length;if(!x||h<1)return[];for(var S=0,T=0,U=te(cg(x/h));S<x;)U[T++]=xo(u,S,S+=h);return U},E.compact=function yd(u){for(var h=-1,g=null==u?0:u.length,x=0,S=[];++h<g;){var T=u[h];T&&(S[x++]=T)}return S},E.concat=function X0(){var u=arguments.length;if(!u)return[];for(var h=te(u-1),g=arguments[0],x=u;x--;)h[x-1]=arguments[x];return Ta(Nt(g)?rs(g):[g],rr(h,1))},E.cond=function wD(u){var h=null==u?0:u.length,g=yt();return u=h?zn(u,function(x){if("function"!=typeof x[1])throw new go(vn);return[g(x[0]),x[1]]}):[],Kt(function(x){for(var S=-1;++S<h;){var T=u[S];if(Ar(T[0],this,x))return Ar(T[1],this,x)}})},E.conforms=function ex(u){return function od(u){var h=Ui(u);return function(g){return _0(g,u,h)}}(ji(u,1))},E.constant=w_,E.countBy=LP,E.create=function uc(u,h){var g=ql(u);return null==h?g:sd(g,h)},E.curry=function Of(u,h,g){var x=La(u,8,B,B,B,B,B,h=g?B:h);return x.placeholder=Of.placeholder,x},E.curryRight=function mb(u,h,g){var x=La(u,16,B,B,B,B,B,h=g?B:h);return x.placeholder=mb.placeholder,x},E.debounce=Lf,E.defaults=Ab,E.defaultsDeep=Tb,E.defer=Fa,E.delay=OE,E.difference=ra,E.differenceBy=bd,E.differenceWith=Y0,E.drop=function Z0(u,h,g){var x=null==u?0:u.length;return x?xo(u,(h=g||h===B?1:Xt(h))<0?0:h,x):[]},E.dropRight=function K0(u,h,g){var x=null==u?0:u.length;return x?xo(u,0,(h=x-(h=g||h===B?1:Xt(h)))<0?0:h):[]},E.dropRightWhile=function DP(u,h){return u&&u.length?Ir(u,yt(h,3),!0,!0):[]},E.dropWhile=function AP(u,h){return u&&u.length?Ir(u,yt(h,3),!0):[]},E.fill=function TP(u,h,g,x){var S=null==u?0:u.length;return S?(g&&"number"!=typeof g&&Hr(u,h,g)&&(g=0,x=S),function vP(u,h,g,x){var S=u.length;for((g=Xt(g))<0&&(g=-g>S?0:S+g),(x=x===B||x>S?S:Xt(x))<0&&(x+=S),x=g>x?0:Cb(x);g<x;)u[g++]=h;return u}(u,h,g,x)):[]},E.filter=function ac(u,h){return(Nt(u)?Gs:ad)(u,yt(h,3))},E.flatMap=function Wt(u,h){return rr(fu(u,h),1)},E.flatMapDeep=function AE(u,h){return rr(fu(u,h),yn)},E.flatMapDepth=function FP(u,h,g){return g=g===B?1:Xt(g),rr(fu(u,h),g)},E.flatten=Ef,E.flattenDeep=function IP(u){return null!=u&&u.length?rr(u,yn):[]},E.flattenDepth=function RP(u,h){return null!=u&&u.length?rr(u,h=h===B?1:Xt(h)):[]},E.flip=function LE(u){return La(u,512)},E.flow=CD,E.flowRight=SD,E.fromPairs=function J0(u){for(var h=-1,g=null==u?0:u.length,x={};++h<g;){var S=u[h];x[S[0]]=S[1]}return x},E.functions=function Pb(u){return null==u?[]:ka(u,Ui(u))},E.functionsIn=function g_(u){return null==u?[]:ka(u,sr(u))},E.groupBy=TE,E.initial=function aE(u){return null!=u&&u.length?xo(u,0,-1):[]},E.intersection=lE,E.intersectionBy=eb,E.intersectionWith=Df,E.invert=kb,E.invertBy=__,E.invokeMap=lc,E.iteratee=Wf,E.keyBy=RE,E.keys=Ui,E.keysIn=sr,E.map=fu,E.mapKeys=function iD(u,h){var g={};return h=yt(h,3),bo(u,function(x,S,T){yo(g,h(x,S,T),x)}),g},E.mapValues=function Lb(u,h){var g={};return h=yt(h,3),bo(u,function(x,S,T){yo(g,S,h(x,S,T))}),g},E.matches=function ED(u){return Jl(ji(u,1))},E.matchesProperty=function tx(u,h){return C0(u,ji(h,1))},E.memoize=Ff,E.merge=rD,E.mergeWith=Fb,E.method=nx,E.methodOf=M_,E.mixin=ix,E.negate=Cd,E.nthArg=function ZP(u){return u=Xt(u),Kt(function(h){return S0(h,u)})},E.omit=Nb,E.omitBy=function v_(u,h){return sD(u,Cd(yt(h)))},E.once=function FE(u){return e_(2,u)},E.orderBy=function PE(u,h,g,x){return null==u?[]:(Nt(h)||(h=null==h?[]:[h]),Nt(g=x?B:g)||(g=null==g?[]:[g]),Sg(u,h,g))},E.over=R,E.overArgs=NE,E.overEvery=dc,E.overSome=rx,E.partial=n_,E.partialRight=gb,E.partition=kE,E.pick=Bb,E.pickBy=sD,E.property=Dd,E.propertyOf=function So(u){return function(h){return null==u?B:Yl(u,h)}},E.pull=uE,E.pullAll=nb,E.pullAllBy=function Af(u,h,g){return u&&u.length&&h&&h.length?ll(u,h,yt(g,2)):u},E.pullAllWith=function ib(u,h,g){return u&&u.length&&h&&h.length?ll(u,h,B,g):u},E.pullAt=dE,E.range=sx,E.rangeRight=DD,E.rearg=i_,E.reject=function BP(u,h){return(Nt(u)?Gs:ad)(u,Cd(yt(h,3)))},E.remove=function hE(u,h){var g=[];if(!u||!u.length)return g;var x=-1,S=[],T=u.length;for(h=yt(h,3);++x<T;){var U=u[x];h(U,x,u)&&(g.push(U),S.push(x))}return Eg(u,S),g},E.rest=function BE(u,h){if("function"!=typeof u)throw new go(vn);return Kt(u,h=h===B?h:Xt(h))},E.reverse=Wg,E.sampleSize=function UP(u,h,g){return h=(g?Hr(u,h,g):h===B)?1:Xt(h),(Nt(u)?BS:bP)(u,h)},E.set=function oD(u,h,g){return null==u?u:hf(u,h,g)},E.setWith=function Vb(u,h,g,x){return x="function"==typeof x?x:B,null==u?u:hf(u,h,g,x)},E.shuffle=function VP(u){return(Nt(u)?gg:wP)(u)},E.slice=function fE(u,h,g){var x=null==u?0:u.length;return x?(g&&"number"!=typeof g&&Hr(u,h,g)?(h=0,g=x):(h=null==h?0:Xt(h),g=g===B?x:Xt(g)),xo(u,h,g)):[]},E.sortBy=GP,E.sortedUniq=function sb(u){return u&&u.length?WS(u):[]},E.sortedUniqBy=function ob(u,h){return u&&u.length?WS(u,yt(h,2)):[]},E.split=function mi(u,h,g){return g&&"number"!=typeof g&&Hr(u,h,g)&&(h=g=B),(g=g===B?jo:g>>>0)?(u=Pn(u))&&("string"==typeof h||null!=h&&!Nf(h))&&!(h=Vr(h))&&uo(u)?tc(fo(u),0,g):u.split(h,g):[]},E.spread=function UE(u,h){if("function"!=typeof u)throw new go(vn);return h=null==h?0:Ai(Xt(h),0),Kt(function(g){var x=g[h],S=tc(g,0,h);return x&&Ta(S,x),Ar(u,this,S)})},E.tail=function mE(u){var h=null==u?0:u.length;return h?xo(u,1,h):[]},E.take=function ab(u,h,g){return u&&u.length?xo(u,0,(h=g||h===B?1:Xt(h))<0?0:h):[]},E.takeRight=function lb(u,h,g){var x=null==u?0:u.length;return x?xo(u,(h=x-(h=g||h===B?1:Xt(h)))<0?0:h,x):[]},E.takeRightWhile=function jg(u,h){return u&&u.length?Ir(u,yt(h,3),!1,!0):[]},E.takeWhile=function OP(u,h){return u&&u.length?Ir(u,yt(h,3)):[]},E.tap=function uu(u,h){return h(u),u},E.throttle=function VE(u,h,g){var x=!0,S=!0;if("function"!=typeof u)throw new go(vn);return wi(g)&&(x="leading"in g?!!g.leading:x,S="trailing"in g?!!g.trailing:S),Lf(u,h,{leading:x,maxWait:h,trailing:S})},E.thru=If,E.toArray=Mb,E.toPairs=zb,E.toPairsIn=Hb,E.toPath=function ax(u){return Nt(u)?zn(u,ia):qs(u)?[u]:rs(q0(Pn(u)))},E.toPlainObject=f_,E.transform=function Co(u,h,g){var x=Nt(u),S=x||ml(u)||Mo(u);if(h=yt(h,4),null==g){var T=u&&u.constructor;g=S?x?new T:[]:wi(u)&&Ba(T)?ql(Yh(u)):{}}return(S?ts:bo)(u,function(U,z,W){return h(g,U,z,W)}),g},E.unary=function _b(u){return Pf(u,1)},E.union=gE,E.unionBy=qg,E.unionWith=cb,E.uniq=function ub(u){return u&&u.length?js(u):[]},E.uniqBy=function oc(u,h){return u&&u.length?js(u,yt(h,2)):[]},E.uniqWith=function _E(u,h){return h="function"==typeof h?h:B,u&&u.length?js(u,B,h):[]},E.unset=function aD(u,h){return null==u||A0(u,h)},E.unzip=wd,E.unzipWith=Md,E.update=function Gb(u,h,g){return null==u?u:T0(u,h,pf(g))},E.updateWith=function lD(u,h,g,x){return x="function"==typeof x?x:B,null==u?u:T0(u,h,pf(g),x)},E.values=gu,E.valuesIn=function cD(u){return null==u?[]:Gt(u,sr(u))},E.without=vE,E.words=Qb,E.wrap=function zE(u,h){return n_(pf(h),u)},E.xor=Xg,E.xorBy=Tf,E.xorWith=pl,E.zip=db,E.zipObject=function Yg(u,h){return hd(u||[],h||[],rd)},E.zipObjectDeep=function yE(u,h){return hd(u||[],h||[],hf)},E.zipWith=bE,E.entries=zb,E.entriesIn=Hb,E.extend=Sb,E.extendWith=Uf,ix(E,E),E.add=$f,E.attempt=x_,E.camelCase=hD,E.capitalize=$b,E.ceil=jf,E.clamp=function uD(u,h,g){return g===B&&(g=h,h=B),g!==B&&(g=(g=Xs(g))==g?g:0),h!==B&&(h=(h=Xs(h))==h?h:0),Xl(Xs(u),h,g)},E.clone=function Gr(u){return ji(u,4)},E.cloneDeep=function vb(u){return ji(u,5)},E.cloneDeepWith=function s_(u,h){return ji(u,5,h="function"==typeof h?h:B)},E.cloneWith=function r_(u,h){return ji(u,4,h="function"==typeof h?h:B)},E.conformsTo=function Rr(u,h){return null==h||_0(u,h,Ui(h))},E.deburr=Pt,E.defaultTo=function MD(u,h){return null==u||u!=u?h:u},E.divide=A_,E.endsWith=function ne(u,h,g){u=Pn(u),h=Vr(h);var x=u.length,S=g=g===B?x:Xl(Xt(g),0,x);return(g-=h.length)>=0&&u.slice(g,S)==h},E.eq=Wr,E.escape=function jb(u){return(u=Pn(u))&&By.test(u)?u.replace(Gm,Zu):u},E.escapeRegExp=function qb(u){return(u=Pn(u))&&rS.test(u)?u.replace(Oh,"\\$&"):u},E.every=function EE(u,h,g){var x=Nt(u)?Yo:US;return g&&Hr(u,h,g)&&(h=B),x(u,yt(h,3))},E.find=DE,E.findIndex=Cf,E.findKey=function tD(u,h){return Ln(u,yt(h,3),bo)},E.findLast=du,E.findLastIndex=Sf,E.findLastKey=function WP(u,h){return Ln(u,yt(h,3),lf)},E.floor=T_,E.forEach=hu,E.forEachRight=sa,E.forIn=function Vf(u,h){return null==u?u:af(u,yt(h,3),sr)},E.forInRight=function nD(u,h){return null==u?u:ld(u,yt(h,3),sr)},E.forOwn=function Ib(u,h){return u&&bo(u,yt(h,3))},E.forOwnRight=function Rb(u,h){return u&&lf(u,yt(h,3))},E.get=zf,E.gt=o_,E.gte=GE,E.has=function Hf(u,h){return null!=u&&JS(u,h,yP)},E.hasIn=mu,E.head=Q0,E.identity=us,E.includes=function IE(u,h,g,x){u=$r(u)?u:gu(u),g=g&&!x?Xt(g):0;var S=u.length;return g<0&&(g=Ai(S+g,0)),Ed(u)?g<=S&&u.indexOf(h,g)>-1:!!S&&Fi(u,h,g)>-1},E.indexOf=function oE(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=null==g?0:Xt(g);return S<0&&(S=Ai(x+S,0)),Fi(u,h,S)},E.inRange=function Wb(u,h,g){return h=Ua(h),g===B?(g=h,h=0):g=Ua(g),function x0(u,h,g){return u>=Ti(h,g)&&u<Ai(h,g)}(u=Xs(u),h,g)},E.invoke=Ob,E.isArguments=cc,E.isArray=Nt,E.isArrayBuffer=WE,E.isArrayLike=$r,E.isArrayLikeObject=Ri,E.isBoolean=function yb(u){return!0===u||!1===u||pi(u)&&_r(u)==Je},E.isBuffer=ml,E.isDate=$E,E.isElement=function jE(u){return pi(u)&&1===u.nodeType&&!Sd(u)},E.isEmpty=function qE(u){if(null==u)return!0;if($r(u)&&(Nt(u)||"string"==typeof u||"function"==typeof u.splice||ml(u)||Mo(u)||cc(u)))return!u.length;var h=vr(u);if(h==qo||h==oo)return!u.size;if(cu(u))return!Kl(u).length;for(var g in u)if(Wn.call(u,g))return!1;return!0},E.isEqual=function XE(u,h){return al(u,h)},E.isEqualWith=function YE(u,h,g){var x=(g="function"==typeof g?g:B)?g(u,h):B;return x===B?al(u,h,B,g):!!x},E.isError=gl,E.isFinite=function Na(u){return"number"==typeof u&&td(u)},E.isFunction=Ba,E.isInteger=bb,E.isLength=a_,E.isMap=ZE,E.isMatch=function cs(u,h){return u===h||uf(u,h,Fg(h))},E.isMatchWith=function l_(u,h,g){return g="function"==typeof g?g:B,uf(u,h,Fg(h),g)},E.isNaN=function c_(u){return pu(u)&&u!=+u},E.isNative=function KE(u){if(H0(u))throw new Vt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return wg(u)},E.isNil=function JE(u){return null==u},E.isNull=function xb(u){return null===u},E.isNumber=pu,E.isObject=wi,E.isObjectLike=pi,E.isPlainObject=Sd,E.isRegExp=Nf,E.isSafeInteger=function u_(u){return bb(u)&&u>=-Da&&u<=Da},E.isSet=Bf,E.isString=Ed,E.isSymbol=qs,E.isTypedArray=Mo,E.isUndefined=function d_(u){return u===B},E.isWeakMap=function wb(u){return pi(u)&&vr(u)==ao},E.isWeakSet=function QE(u){return pi(u)&&"[object WeakSet]"==_r(u)},E.join=function tb(u,h){return null==u?"":Ws.call(u,h)},E.kebabCase=fD,E.last=ls,E.lastIndexOf=function cE(u,h,g){var x=null==u?0:u.length;if(!x)return-1;var S=x;return g!==B&&(S=(S=Xt(g))<0?Ai(x+S,0):Ti(S,x-1)),h==h?function $l(G,ue,te){for(var Ye=te+1;Ye--;)if(G[Ye]===ue)return Ye;return Ye}(u,h,S):er(u,Ss,S,!0)},E.lowerCase=pD,E.lowerFirst=Xb,E.lt=h_,E.lte=eD,E.max=function I_(u){return u&&u.length?vg(u,us,Qc):B},E.maxBy=function QP(u,h){return u&&u.length?vg(u,yt(h,2),Qc):B},E.mean=function AD(u){return Ue(u,us)},E.meanBy=function TD(u,h){return Ue(u,yt(h,2))},E.min=function ID(u){return u&&u.length?vg(u,us,df):B},E.minBy=function RD(u,h){return u&&u.length?vg(u,yt(h,2),df):B},E.stubArray=Ad,E.stubFalse=Eo,E.stubObject=function E_(){return{}},E.stubString=function ox(){return""},E.stubTrue=function D_(){return!0},E.multiply=lx,E.nth=function Rn(u,h){return u&&u.length?S0(u,Xt(h)):B},E.noConflict=function C_(){return Qi._===this&&(Qi._=mP),this},E.noop=S_,E.now=Rf,E.pad=function mD(u,h,g){u=Pn(u);var x=(h=Xt(h))?Di(u):0;if(!h||x>=h)return u;var S=(h-x)/2;return dl(hi(S),g)+u+dl(cg(S),g)},E.padEnd=function Yb(u,h,g){u=Pn(u);var x=(h=Xt(h))?Di(u):0;return h&&x<h?u+dl(h-x,g):u},E.padStart=function gD(u,h,g){u=Pn(u);var x=(h=Xt(h))?Di(u):0;return h&&x<h?dl(h-x,g)+u:u},E.parseInt=function _D(u,h,g){return g||null==h?h=0:h&&(h=+h),c0(Pn(u).replace(Wm,""),h||0)},E.random=function dD(u,h,g){if(g&&"boolean"!=typeof g&&Hr(u,h,g)&&(h=g=B),g===B&&("boolean"==typeof h?(g=h,h=B):"boolean"==typeof u&&(g=u,u=B)),u===B&&h===B?(u=0,h=1):(u=Ua(u),h===B?(h=u,u=0):h=Ua(h)),u>h){var x=u;u=h,h=x}if(g||u%1||h%1){var S=nd();return Ti(u+S*(h-u+mt("1e-"+((S+"").length-1))),h)}return dd(u,h)},E.reduce=function Jg(u,h,g){var x=Nt(u)?zh:is,S=arguments.length<3;return x(u,yt(h,4),g,S,Ko)},E.reduceRight=function NP(u,h,g){var x=Nt(u)?Ut:is,S=arguments.length<3;return x(u,yt(h,4),g,S,y0)},E.repeat=function $P(u,h,g){return h=(g?Hr(u,h,g):h===B)?1:Xt(h),E0(Pn(u),h)},E.replace=function Zb(){var u=arguments,h=Pn(u[0]);return u.length<3?h:h.replace(u[1],u[2])},E.result=function Ub(u,h,g){var x=-1,S=(h=ul(h,u)).length;for(S||(S=1,u=B);++x<S;){var T=null==u?B:u[ia(h[x])];T===B&&(x=S,T=g),u=Ba(T)?T.call(u):T}return u},E.round=ek,E.runInContext=G,E.sample=function Qg(u){return(Nt(u)?vo:Se)(u)},E.size=function zP(u){if(null==u)return 0;if($r(u))return Ed(u)?Di(u):u.length;var h=vr(u);return h==qo||h==oo?u.size:Kl(u).length},E.snakeCase=Kb,E.some=function HP(u,h,g){var x=Nt(u)?Qm:MP;return g&&Hr(u,h,g)&&(h=B),x(u,yt(h,3))},E.sortedIndex=function pE(u,h){return cl(u,h)},E.sortedIndexBy=function PP(u,h,g){return D0(u,h,yt(g,2))},E.sortedIndexOf=function kP(u,h){var g=null==u?0:u.length;if(g){var x=cl(u,h);if(x<g&&Wr(u[x],h))return x}return-1},E.sortedLastIndex=function xd(u,h){return cl(u,h,!0)},E.sortedLastIndexBy=function $g(u,h,g){return D0(u,h,yt(g,2),!0)},E.sortedLastIndexOf=function rb(u,h){if(null!=u&&u.length){var x=cl(u,h,!0)-1;if(Wr(u[x],h))return x}return-1},E.startCase=vD,E.startsWith=function y_(u,h,g){return u=Pn(u),g=null==g?0:Xl(Xt(g),0,u.length),h=Vr(h),u.slice(g,g+h.length)==h},E.subtract=PD,E.sum=function tk(u){return u&&u.length?Ni(u,us):0},E.sumBy=function cx(u,h){return u&&u.length?Ni(u,yt(h,2)):0},E.template=function b_(u,h,g){var x=E.templateSettings;g&&Hr(u,h,g)&&(h=B),u=Pn(u),h=Uf({},h,x,kg);var z,W,S=Uf({},h.imports,x.imports,kg),T=Ui(S),U=Gt(S,T),ve=0,be=h.interpolate||Fh,Ce="__p += '",Ve=o0((h.escape||Fh).source+"|"+be.source+"|"+(be===Vy?zy:Fh).source+"|"+(h.evaluate||Fh).source+"|$","g"),Xe="//# sourceURL="+(Wn.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yS+"]")+"\n";u.replace(Ve,function(gt,Jt,un,jr,qr,Vi){return un||(un=jr),Ce+=u.slice(ve,Vi).replace(cS,$c),Jt&&(z=!0,Ce+="' +\n__e("+Jt+") +\n'"),qr&&(W=!0,Ce+="';\n"+qr+";\n__p += '"),un&&(Ce+="' +\n((__t = ("+un+")) == null ? '' : __t) +\n'"),ve=Vi+gt.length,gt}),Ce+="';\n";var pt=Wn.call(h,"variable")&&h.variable;if(pt){if(rP.test(pt))throw new Vt("Invalid `variable` option passed into `_.template`")}else Ce="with (obj) {\n"+Ce+"\n}\n";Ce=(W?Ce.replace(ky,""):Ce).replace(Oy,"$1").replace(Ly,"$1;"),Ce="function("+(pt||"obj")+") {\n"+(pt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(z?", __e = _.escape":"")+(W?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ce+"return __p\n}";var Yt=x_(function(){return Fn(T,Xe+"return "+Ce).apply(B,U)});if(Yt.source=Ce,gl(Yt))throw Yt;return Yt},E.times=function KP(u,h){if((u=Xt(u))<1||u>Da)return[];var g=jo,x=Ti(u,jo);h=yt(h),u-=jo;for(var S=Ia(x,h);++g<u;)h(g);return S},E.toFinite=Ua,E.toInteger=Xt,E.toLength=Cb,E.toLower=function yD(u){return Pn(u).toLowerCase()},E.toNumber=Xs,E.toSafeInteger=function p_(u){return u?Xl(Xt(u),-Da,Da):0===u?u:0},E.toString=Pn,E.toUpper=function jP(u){return Pn(u).toUpperCase()},E.trim=function qP(u,h,g){if((u=Pn(u))&&(g||h===B))return Wc(u);if(!u||!(h=Vr(h)))return u;var x=fo(u),S=fo(h);return tc(x,Gl(x,S),Hh(x,S)+1).join("")},E.trimEnd=function XP(u,h,g){if((u=Pn(u))&&(g||h===B))return u.slice(0,Nr(u)+1);if(!u||!(h=Vr(h)))return u;var x=fo(u);return tc(x,0,Hh(x,fo(h))+1).join("")},E.trimStart=function bD(u,h,g){if((u=Pn(u))&&(g||h===B))return u.replace(Wm,"");if(!u||!(h=Vr(h)))return u;var x=fo(u);return tc(x,Gl(x,fo(h))).join("")},E.truncate=function Jb(u,h){var g=30,x="...";if(wi(h)){var S="separator"in h?h.separator:S;g="length"in h?Xt(h.length):g,x="omission"in h?Vr(h.omission):x}var T=(u=Pn(u)).length;if(uo(u)){var U=fo(u);T=U.length}if(g>=T)return u;var z=g-Di(x);if(z<1)return x;var W=U?tc(U,0,z).join(""):u.slice(0,z);if(S===B)return W+x;if(U&&(z+=W.length-z),Nf(S)){if(u.slice(z).search(S)){var ve,be=W;for(S.global||(S=o0(S.source,Pn(Lh.exec(S))+"g")),S.lastIndex=0;ve=S.exec(be);)var Ce=ve.index;W=W.slice(0,Ce===B?z:Ce)}}else if(u.indexOf(Vr(S),z)!=z){var Ve=W.lastIndexOf(S);Ve>-1&&(W=W.slice(0,Ve))}return W+x},E.unescape=function YP(u){return(u=Pn(u))&&Ny.test(u)?u.replace(Fy,po):u},E.uniqueId=function JP(u){var h=++a0;return Pn(u)+h},E.upperCase=xD,E.upperFirst=_l,E.each=hu,E.eachRight=sa,E.first=Q0,ix(E,function(){var u={};return bo(E,function(h,g){Wn.call(E.prototype,g)||(u[g]=h)}),u}(),{chain:!1}),E.VERSION="4.17.21",ts(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){E[u].placeholder=E}),ts(["drop","take"],function(u,h){nn.prototype[u]=function(g){g=g===B?1:Ai(Xt(g),0);var x=this.__filtered__&&!h?new nn(this):this.clone();return x.__filtered__?x.__takeCount__=Ti(g,x.__takeCount__):x.__views__.push({size:Ti(g,jo),type:u+(x.__dir__<0?"Right":"")}),x},nn.prototype[u+"Right"]=function(g){return this.reverse()[u](g).reverse()}}),ts(["filter","map","takeWhile"],function(u,h){var g=h+1,x=1==g||3==g;nn.prototype[u]=function(S){var T=this.clone();return T.__iteratees__.push({iteratee:yt(S,3),type:g}),T.__filtered__=T.__filtered__||x,T}}),ts(["head","last"],function(u,h){var g="take"+(h?"Right":"");nn.prototype[u]=function(){return this[g](1).value()[0]}}),ts(["initial","tail"],function(u,h){var g="drop"+(h?"":"Right");nn.prototype[u]=function(){return this.__filtered__?new nn(this):this[g](1)}}),nn.prototype.compact=function(){return this.filter(us)},nn.prototype.find=function(u){return this.filter(u).head()},nn.prototype.findLast=function(u){return this.reverse().find(u)},nn.prototype.invokeMap=Kt(function(u,h){return"function"==typeof u?new nn(this):this.map(function(g){return cd(g,u,h)})}),nn.prototype.reject=function(u){return this.filter(Cd(yt(u)))},nn.prototype.slice=function(u,h){u=Xt(u);var g=this;return g.__filtered__&&(u>0||h<0)?new nn(g):(u<0?g=g.takeRight(-u):u&&(g=g.drop(u)),h!==B&&(g=(h=Xt(h))<0?g.dropRight(-h):g.take(h-u)),g)},nn.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},nn.prototype.toArray=function(){return this.take(jo)},bo(nn.prototype,function(u,h){var g=/^(?:filter|find|map|reject)|While$/.test(h),x=/^(?:head|last)$/.test(h),S=E[x?"take"+("last"==h?"Right":""):h],T=x||/^find/.test(h);!S||(E.prototype[h]=function(){var U=this.__wrapped__,z=x?[1]:arguments,W=U instanceof nn,ve=z[0],be=W||Nt(U),Ce=function(Jt){var un=S.apply(E,Ta([Jt],z));return x&&Ve?un[0]:un};be&&g&&"function"==typeof ve&&1!=ve.length&&(W=be=!1);var Ve=this.__chain__,Xe=!!this.__actions__.length,pt=T&&!Ve,Yt=W&&!Xe;if(!T&&be){U=Yt?U:new nn(this);var gt=u.apply(U,z);return gt.__actions__.push({func:If,args:[Ce],thisArg:B}),new Ii(gt,Ve)}return pt&&Yt?u.apply(this,z):(gt=this.thru(Ce),pt?x?gt.value()[0]:gt.value():gt)})}),ts(["pop","push","shift","sort","splice","unshift"],function(u){var h=ng[u],g=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",x=/^(?:pop|shift)$/.test(u);E.prototype[u]=function(){var S=arguments;if(x&&!this.__chain__){var T=this.value();return h.apply(Nt(T)?T:[],S)}return this[g](function(U){return h.apply(Nt(U)?U:[],S)})}}),bo(nn.prototype,function(u,h){var g=E[h];if(g){var x=g.name+"";Wn.call(Zc,x)||(Zc[x]=[]),Zc[x].push({name:h,func:g})}}),Zc[j(B,2).name]=[{name:"wrapper",func:B}],nn.prototype.clone=function dg(){var u=new nn(this.__wrapped__);return u.__actions__=rs(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=rs(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=rs(this.__views__),u},nn.prototype.reverse=function _P(){if(this.__filtered__){var u=new nn(this);u.__dir__=-1,u.__filtered__=!0}else(u=this.clone()).__dir__*=-1;return u},nn.prototype.value=function RS(){var u=this.__wrapped__.value(),h=this.__dir__,g=Nt(u),x=h<0,S=g?u.length:0,T=function SP(u,h,g){for(var x=-1,S=g.length;++x<S;){var T=g[x],U=T.size;switch(T.type){case"drop":u+=U;break;case"dropRight":h-=U;break;case"take":h=Ti(h,u+U);break;case"takeRight":u=Ai(u,h-U)}}return{start:u,end:h}}(0,S,this.__views__),U=T.start,z=T.end,W=z-U,ve=x?z:U-1,be=this.__iteratees__,Ce=be.length,Ve=0,Xe=Ti(W,this.__takeCount__);if(!g||!x&&S==W&&Xe==W)return Qo(u,this.__actions__);var pt=[];e:for(;W--&&Ve<Xe;){for(var Yt=-1,gt=u[ve+=h];++Yt<Ce;){var Jt=be[Yt],jr=Jt.type,qr=(0,Jt.iteratee)(gt);if(2==jr)gt=qr;else if(!qr){if(1==jr)continue e;break e}}pt[Ve++]=gt}return pt},E.prototype.at=xE,E.prototype.chain=function wE(){return Zg(this)},E.prototype.commit=function ME(){return new Ii(this.value(),this.__chain__)},E.prototype.next=function Kg(){this.__values__===B&&(this.__values__=Mb(this.value()));var u=this.__index__>=this.__values__.length;return{done:u,value:u?B:this.__values__[this.__index__++]}},E.prototype.plant=function hb(u){for(var h,g=this;g instanceof rl;){var x=rE(g);x.__index__=0,x.__values__=B,h?S.__wrapped__=x:h=x;var S=x;g=g.__wrapped__}return S.__wrapped__=u,h},E.prototype.reverse=function SE(){var u=this.__wrapped__;if(u instanceof nn){var h=u;return this.__actions__.length&&(h=new nn(this)),(h=h.reverse()).__actions__.push({func:If,args:[Wg],thisArg:B}),new Ii(h,this.__chain__)}return this.thru(Wg)},E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=function fb(){return Qo(this.__wrapped__,this.__actions__)},E.prototype.first=E.prototype.head,ed&&(E.prototype[ed]=function CE(){return this}),E}();Qi._=jh,(Ht=function(){return jh}.call(ys,Or,ys,ro))!==B&&(ro.exports=Ht)}.call(this)},738:function(ro){var ys;ro.exports=((ys=function(){function Or(li){return Dr.appendChild(li.dom),li}function Ht(li){for(var ci=0;ci<Dr.children.length;ci++)Dr.children[ci].style.display=ci===li?"block":"none";B=li}var B=0,Dr=document.createElement("div");Dr.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",Dr.addEventListener("click",function(li){li.preventDefault(),Ht(++B%Dr.children.length)},!1);var Lr=(performance||Date).now(),Zt=Lr,vn=0,Qa=Or(new ys.Panel("FPS","#0ff","#002")),Ca=Or(new ys.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var bs=Or(new ys.Panel("MB","#f08","#201"));return Ht(0),{REVISION:16,dom:Dr,addPanel:Or,showPanel:Ht,begin:function(){Lr=(performance||Date).now()},end:function(){vn++;var li=(performance||Date).now();if(Ca.update(li-Lr,200),li>Zt+1e3&&(Qa.update(1e3*vn/(li-Zt),100),Zt=li,vn=0,bs)){var ci=performance.memory;bs.update(ci.usedJSHeapSize/1048576,ci.jsHeapSizeLimit/1048576)}return li},update:function(){Lr=this.end()},domElement:Dr,setMode:Ht}}).Panel=function(Or,Ht,B){var Dr=1/0,Lr=0,Zt=Math.round,vn=Zt(window.devicePixelRatio||1),Qa=80*vn,Ca=48*vn,bs=3*vn,li=2*vn,ci=3*vn,Qr=15*vn,xs=74*vn,ws=30*vn,so=document.createElement("canvas");so.width=Qa,so.height=Ca,so.style.cssText="width:80px;height:48px";var fn=so.getContext("2d");return fn.font="bold "+9*vn+"px Helvetica,Arial,sans-serif",fn.textBaseline="top",fn.fillStyle=B,fn.fillRect(0,0,Qa,Ca),fn.fillStyle=Ht,fn.fillText(Or,bs,li),fn.fillRect(ci,Qr,xs,ws),fn.fillStyle=B,fn.globalAlpha=.9,fn.fillRect(ci,Qr,xs,ws),{dom:so,update:function(Ji,Ul){Dr=Math.min(Dr,Ji),Lr=Math.max(Lr,Ji),fn.fillStyle=B,fn.globalAlpha=1,fn.fillRect(0,0,Qa,Qr),fn.fillStyle=Ht,fn.fillText(Zt(Ji)+" "+Or+" ("+Zt(Dr)+"-"+Zt(Lr)+")",bs,li),fn.drawImage(so,ci+vn,Qr,xs-vn,ws,ci,Qr,xs-vn,ws),fn.fillRect(ci+xs-vn,Qr,vn,ws),fn.fillStyle=B,fn.globalAlpha=.9,fn.fillRect(ci+xs-vn,Qr,vn,Zt((1-Ji/Ul)*ws))}}},ys)}},ro=>{ro(ro.s=84)}]);